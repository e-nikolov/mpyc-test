import"./style-cLP6Dben.js";import{g as getDefaultExportFromCjs,p as purify,c as commonjsGlobal}from"./purify.es-OX2H-FQQ.js";import"./encode-GRFFunDQ.js";function _mergeNamespaces(s,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in s)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var define_BUILD_INFO_default$1={version:"0.6.0",dirty:!0,deployment:"test",timestamp:1701946709709,time:"7/12/2023, 11:58:29",revision:"dccd3cf"};document.title=`MPyC Web (${define_BUILD_INFO_default$1.deployment})`;var define_BUILD_INFO_default={version:"0.6.0",dirty:!0,deployment:"test",timestamp:1701946709709,time:"7/12/2023, 11:58:29",revision:"dccd3cf"};function makeVersion(){let s=define_BUILD_INFO_default;console.log("buildInfo",s);let e=document.querySelector("#version");e.innerText=`v${s.version}-${s.revision}`,e.innerText+="-dirty",e.innerText+=` (${s.time})`}makeVersion();const regMobileAll=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,regMobileFour=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,isMobileFn=s=>regMobileAll.test(s)||regMobileFour.test(s.substr(0,4)),isNode=typeof navigator>"u",userAgent=isNode?"node":navigator.userAgent,isMobile=isMobileFn(userAgent),callSoonChan=new MessageChannel,callSoonCallbacks=[];callSoonChan.port1.onmessage=()=>{callSoonCallbacks.pop()()};const anyMap=new WeakMap,eventsMap=new WeakMap,producersMap=new WeakMap;var define_globalThis_process_env_default={};const anyProducer=Symbol("anyProducer"),resolvedPromise=Promise.resolve(),listenerAdded=Symbol("listenerAdded"),listenerRemoved=Symbol("listenerRemoved");let canEmitMetaEvents=!1,isGlobalDebugEnabled=!1;function assertEventName(s){if(typeof s!="string"&&typeof s!="symbol"&&typeof s!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function assertListener(s){if(typeof s!="function")throw new TypeError("listener must be a function")}function getListeners(s,e){const r=eventsMap.get(s);if(r.has(e))return r.get(e)}function getEventProducers(s,e){const r=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:anyProducer,n=producersMap.get(s);if(n.has(r))return n.get(r)}function enqueueProducers(s,e,r){const n=producersMap.get(s);if(n.has(e))for(const o of n.get(e))o.enqueue(r);if(n.has(anyProducer)){const o=Promise.all([e,r]);for(const a of n.get(anyProducer))a.enqueue(o)}}function iterator(s,e){e=Array.isArray(e)?e:[e];let r=!1,n=()=>{},o=[];const a={enqueue(c){o.push(c),n()},finish(){r=!0,n()}};for(const c of e){let l=getEventProducers(s,c);l||(l=new Set,producersMap.get(s).set(c,l)),l.add(a)}return{async next(){return o?o.length===0?r?(o=void 0,this.next()):(await new Promise(c=>{n=c}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(c){o=void 0;for(const l of e){const h=getEventProducers(s,l);h&&(h.delete(a),h.size===0&&producersMap.get(s).delete(l))}return n(),arguments.length>0?{done:!0,value:await c}:{done:!0}},[Symbol.asyncIterator](){return this}}}function defaultMethodNamesOrAssert(s){if(s===void 0)return allEmitteryMethods;if(!Array.isArray(s))throw new TypeError("`methodNames` must be an array of strings");for(const e of s)if(!allEmitteryMethods.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return s}const isMetaEvent=s=>s===listenerAdded||s===listenerRemoved;function emitMetaEvent(s,e,r){if(isMetaEvent(e))try{canEmitMetaEvents=!0,s.emit(e,r)}finally{canEmitMetaEvents=!1}}class Emittery{static mixin(e,r){return r=defaultMethodNamesOrAssert(r),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const c of r)if(n.prototype[c]!==void 0)throw new Error(`The property \`${c}\` already exists on \`target\``);function o(){return Object.defineProperty(this,e,{enumerable:!1,value:new Emittery}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:o});const a=c=>function(...l){return this[e][c](...l)};for(const c of r)Object.defineProperty(n.prototype,c,{enumerable:!1,value:a(c)});return n}}static get isDebugEnabled(){if(typeof define_globalThis_process_env_default!="object")return isGlobalDebugEnabled;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||isGlobalDebugEnabled}static set isDebugEnabled(e){isGlobalDebugEnabled=e}constructor(e={}){anyMap.set(this,new Set),eventsMap.set(this,new Map),producersMap.set(this,new Map),producersMap.get(this).set(anyProducer,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(r,n,o,a)=>{try{a=JSON.stringify(a)}catch{a=`Object with the following keys failed to stringify: ${Object.keys(a).join(",")}`}(typeof o=="symbol"||typeof o=="number")&&(o=o.toString());const c=new Date,l=`${c.getHours()}:${c.getMinutes()}:${c.getSeconds()}.${c.getMilliseconds()}`;console.log(`[${l}][emittery:${r}][${n}] Event Name: ${o}
	data: ${a}`)})}logIfDebugEnabled(e,r,n){(Emittery.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,r,n)}on(e,r){assertListener(r),e=Array.isArray(e)?e:[e];for(const n of e){assertEventName(n);let o=getListeners(this,n);o||(o=new Set,eventsMap.get(this).set(n,o)),o.add(r),this.logIfDebugEnabled("subscribe",n,void 0),isMetaEvent(n)||emitMetaEvent(this,listenerAdded,{eventName:n,listener:r})}return this.off.bind(this,e,r)}off(e,r){assertListener(r),e=Array.isArray(e)?e:[e];for(const n of e){assertEventName(n);const o=getListeners(this,n);o&&(o.delete(r),o.size===0&&eventsMap.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),isMetaEvent(n)||emitMetaEvent(this,listenerRemoved,{eventName:n,listener:r})}}once(e){let r;const n=new Promise(o=>{r=this.on(e,a=>{r(),o(a)})});return n.off=r,n}events(e){e=Array.isArray(e)?e:[e];for(const r of e)assertEventName(r);return iterator(this,e)}async emit(e,r){if(assertEventName(e),isMetaEvent(e)&&!canEmitMetaEvents)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,r),enqueueProducers(this,e,r);const n=getListeners(this,e)??new Set,o=anyMap.get(this),a=[...n],c=isMetaEvent(e)?[]:[...o];await resolvedPromise,await Promise.all([...a.map(async l=>{if(n.has(l))return l(r)}),...c.map(async l=>{if(o.has(l))return l(e,r)})])}async emitSerial(e,r){if(assertEventName(e),isMetaEvent(e)&&!canEmitMetaEvents)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,r);const n=getListeners(this,e)??new Set,o=anyMap.get(this),a=[...n],c=[...o];await resolvedPromise;for(const l of a)n.has(l)&&await l(r);for(const l of c)o.has(l)&&await l(e,r)}onAny(e){return assertListener(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),anyMap.get(this).add(e),emitMetaEvent(this,listenerAdded,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return iterator(this)}offAny(e){assertListener(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),emitMetaEvent(this,listenerRemoved,{listener:e}),anyMap.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const r of e)if(this.logIfDebugEnabled("clear",r,void 0),typeof r=="string"||typeof r=="symbol"||typeof r=="number"){const n=getListeners(this,r);n&&n.clear();const o=getEventProducers(this,r);if(o){for(const a of o)a.finish();o.clear()}}else{anyMap.get(this).clear();for(const[n,o]of eventsMap.get(this).entries())o.clear(),eventsMap.get(this).delete(n);for(const[n,o]of producersMap.get(this).entries()){for(const a of o)a.finish();o.clear(),producersMap.get(this).delete(n)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let r=0;for(const n of e){if(typeof n=="string"){r+=anyMap.get(this).size+(getListeners(this,n)?.size??0)+(getEventProducers(this,n)?.size??0)+(getEventProducers(this)?.size??0);continue}typeof n<"u"&&assertEventName(n),r+=anyMap.get(this).size;for(const o of eventsMap.get(this).values())r+=o.size;for(const o of producersMap.get(this).values())r+=o.size}return r}bindMethods(e,r){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");r=defaultMethodNamesOrAssert(r);for(const n of r){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const allEmitteryMethods=Object.getOwnPropertyNames(Emittery.prototype).filter(s=>s!=="constructor");Object.defineProperty(Emittery,"listenerAdded",{value:listenerAdded,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Emittery,"listenerRemoved",{value:listenerRemoved,writable:!1,enumerable:!0,configurable:!1});const wrapEvent=(s,e,r)=>{s.on(r,n=>{e.emit(`runtime:${r}`,n)})};class MPCManager extends Emittery{transport;peerIDToPID=new Map;pidToPeerID=new Map;peersReady=new Map;runtime;running=!1;runtimeFactory;transportFactory;env={};constructor(e,r,n={}){super(),this.transport=this.newTransport(e),this.runtime=this.newRuntime(r),this.env=n}newTransport(e){this.transportFactory=e,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const r=e();return this.addTransportEvents(r),r}newRuntime(e=this.runtimeFactory){this.runtimeFactory=e;const r=e();return this.addRuntimeEvents(r),r}addTransportEvents(e){e.on("ready",r=>{this.emit("transport:ready",r)}),e.on("closed",()=>{this.emit("transport:closed")}),e.on("error",r=>{this.emit("transport:error",r)}),e.on("conn:ready",r=>{this.emit("transport:conn:ready",r)}),e.on("conn:disconnected",r=>{this.emit("transport:conn:disconnected",r)}),e.on("conn:error",({peerID:r,err:n})=>{this.emit("transport:conn:error",{peerID:r,err:n})}),e.on("conn:data",({peerID:r,data:n})=>{switch(n.type){case"mpyc:ready":this.processReadyMessage(r,n.payload);break;case"mpyc:runtime":this.processRuntimeMessage(r,n.payload);break;default:this.emit("transport:conn:data:custom",{peerID:r,data:n})}})}addRuntimeEvents(e){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach(r=>{wrapEvent(e,this,r)}),e.on("ready",()=>{this.emit("runtime:ready")}),e.on("send",({type:r,pid:n,payload:o})=>{this.sendMPCMessage(r,n,o)})}runMPC(e,r,n=!0){this.running=!0;let o=this.transport.getPeers(!0),a=o.findIndex(c=>c===this.transport.id());for(let c=0;c<o.length;c++)this.peerIDToPID.set(o[c],c),this.pidToPeerID.set(c,o[c]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:a,filename:r,parties:o,is_async:n,no_async:!n,code:e})}reset(e=this.transportFactory,r=this.runtimeFactory){this.resetTransport(e),this.resetRuntime(r)}resetTransport(e=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(e)}resetRuntime(e=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(e),this.running=!1}sendMPCMessage(e,r,n){let o=this.pidToPeerID.get(r);this.transport.send(o,`mpyc:${e}`,n)}processReadyMessage=(e,r)=>{if(this.peersReady.set(e,!0),!this.running){console.log("ignoring mpc ready message because we are not running");return}let n=this.peerIDToPID.get(e);this.runtime.processReadyMessage(n,r)};processRuntimeMessage=(e,r)=>{if(!this.running){console.log("ignoring mpc runtime message because we are not running");return}let n=this.peerIDToPID.get(e);this.runtime.processRuntimeMessage(n,r)}}const VOID=-1,PRIMITIVE=0,ARRAY$1=1,OBJECT$1=2,DATE=3,REGEXP=4,MAP=5,SET$2=6,ERROR=7,BIGINT$1=8,env$2=typeof self=="object"?self:globalThis,deserializer=(s,e)=>{const r=(o,a)=>(s.set(a,o),o),n=o=>{if(s.has(o))return s.get(o);const[a,c]=e[o];switch(a){case PRIMITIVE:case VOID:return r(c,o);case ARRAY$1:{const l=r([],o);for(const h of c)l.push(n(h));return l}case OBJECT$1:{const l=r({},o);for(const[h,d]of c)l[n(h)]=n(d);return l}case DATE:return r(new Date(c),o);case REGEXP:{const{source:l,flags:h}=c;return r(new RegExp(l,h),o)}case MAP:{const l=r(new Map,o);for(const[h,d]of c)l.set(n(h),n(d));return l}case SET$2:{const l=r(new Set,o);for(const h of c)l.add(n(h));return l}case ERROR:{const{name:l,message:h}=c;return r(new env$2[l](h),o)}case BIGINT$1:return r(BigInt(c),o);case"BigInt":return r(Object(BigInt(c)),o)}return r(new env$2[a](c),o)};return n},deserialize=s=>deserializer(new Map,s)(0),EMPTY="",{toString}={},{keys:keys$1}=Object,typeOf=s=>{const e=typeof s;if(e!=="object"||!s)return[PRIMITIVE,e];const r=toString.call(s).slice(8,-1);switch(r){case"Array":return[ARRAY$1,EMPTY];case"Object":return[OBJECT$1,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET$2,EMPTY]}return r.includes("Array")?[ARRAY$1,r]:r.includes("Error")?[ERROR,r]:[OBJECT$1,r]},shouldSkip=([s,e])=>s===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(s,e,r,n)=>{const o=(c,l)=>{const h=n.push(c)-1;return r.set(l,h),h},a=c=>{if(r.has(c))return r.get(c);let[l,h]=typeOf(c);switch(l){case PRIMITIVE:{let f=c;switch(h){case"bigint":l=BIGINT$1,f=c.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+h);f=null;break;case"undefined":return o([VOID],c)}return o([l,f],c)}case ARRAY$1:{if(h)return o([h,[...c]],c);const f=[],g=o([l,f],c);for(const _ of c)f.push(a(_));return g}case OBJECT$1:{if(h)switch(h){case"BigInt":return o([h,c.toString()],c);case"Boolean":case"Number":case"String":return o([h,c.valueOf()],c)}if(e&&"toJSON"in c)return a(c.toJSON());const f=[],g=o([l,f],c);for(const _ of keys$1(c))(s||!shouldSkip(typeOf(c[_])))&&f.push([a(_),a(c[_])]);return g}case DATE:return o([l,c.toISOString()],c);case REGEXP:{const{source:f,flags:g}=c;return o([l,{source:f,flags:g}],c)}case MAP:{const f=[],g=o([l,f],c);for(const[_,E]of c)(s||!(shouldSkip(typeOf(_))||shouldSkip(typeOf(E))))&&f.push([a(_),a(E)]);return g}case SET$2:{const f=[],g=o([l,f],c);for(const _ of c)(s||!shouldSkip(typeOf(_)))&&f.push(a(_));return g}}const{message:d}=c;return o([l,{name:h,message:d}],c)};return a},serialize=(s,{json:e,lossy:r}={})=>{const n=[];return serializer(!(e||r),!!e,new Map,n)(s),n};/*! (c) Andrea Giammarchi - ISC */const{parse:$parse,stringify:$stringify}=JSON,options={json:!0,lossy:!0},parse$1=s=>deserialize($parse(s)),stringify=s=>$stringify(serialize(s,options)),JSON$1=Object.freeze(Object.defineProperty({__proto__:null,parse:parse$1,stringify},Symbol.toStringTag,{value:"Module"})),CHANNEL="4ee55850-17cb-4a85-a071-03fe2aa108bd",MAIN="M"+CHANNEL,THREAD="T"+CHANNEL,ARRAY="array",BIGINT="bigint",BOOLEAN="boolean",FUNCTION="function",NULL="null",NUMBER="number",OBJECT="object",STRING="string",SYMBOL="symbol",UNDEFINED="undefined",APPLY="apply",CONSTRUCT="construct",DEFINE_PROPERTY="defineProperty",DELETE_PROPERTY="deleteProperty",GET="get",GET_OWN_PROPERTY_DESCRIPTOR="getOwnPropertyDescriptor",GET_PROTOTYPE_OF="getPrototypeOf",HAS="has",IS_EXTENSIBLE="isExtensible",OWN_KEYS="ownKeys",PREVENT_EXTENSION="preventExtensions",SET$1="set",SET_PROTOTYPE_OF="setPrototypeOf",DELETE="delete",waitAsyncFallback=s=>({value:new Promise(e=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=e,r.postMessage(s)})});/*! (c) Andrea Giammarchi - ISC */const{Int32Array:Int32Array$1,Map:Map$1,SharedArrayBuffer,Uint16Array:Uint16Array$1}=globalThis,{BYTES_PER_ELEMENT:I32_BYTES}=Int32Array$1,{BYTES_PER_ELEMENT:UI16_BYTES}=Uint16Array$1,{isArray:isArray$2}=Array,{notify,wait,waitAsync}=Atomics,waitInterrupt=(s,e,r)=>{for(;wait(s,0,0,e)==="timed-out";)r()},buffers=new WeakSet,context=new WeakMap,syncResult={value:{then:s=>s()}};let uid=0;const coincident$1=(s,{parse:e=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:o}=JSON)=>{if(!context.has(s)){const a=(g,..._)=>s.postMessage({[CHANNEL]:_},{transfer:g}),c=typeof o===FUNCTION?o:o?.handler,l=o?.delay||42,h=new TextDecoder("utf-16"),d=(g,_)=>g?(waitAsync||waitAsyncFallback)(_,0):(c?waitInterrupt(_,l,c):wait(_,0),syncResult);let f=!1;context.set(s,new Proxy(new Map$1,{[HAS]:(g,_)=>typeof _=="string"&&!_.startsWith("_"),[GET]:(g,_)=>_==="then"?null:(...E)=>{const A=uid++;let w=new Int32Array$1(new SharedArrayBuffer(I32_BYTES*2)),m=[];buffers.has(E.at(-1)||m)&&buffers.delete(m=E.pop()),a(m,A,w,_,n?E.map(n):E);const b=s!==globalThis;let y=0;return f&&b&&(y=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${_}(...args) is awaited`)),d(b,w).value.then(()=>{clearTimeout(y);const x=w[1];if(!x)return;const D=UI16_BYTES*x;return w=new Int32Array$1(new SharedArrayBuffer(D+D%I32_BYTES)),a([],A,w),d(b,w).value.then(()=>e(h.decode(new Uint16Array$1(w.buffer).slice(0,x))))})},[SET$1](g,_,E){const A=typeof E;if(A!==FUNCTION)throw new Error(`Unable to assign ${_} as ${A}`);if(!g.size){const w=new Map$1;s.addEventListener("message",async m=>{const b=m.data?.[CHANNEL];if(isArray$2(b)){m.stopImmediatePropagation();const[y,x,...D]=b;let R;if(D.length){const[M,L]=D;if(g.has(M)){f=!0;try{const k=await g.get(M)(...L);if(k!==void 0){const I=r(n?n(k):k);w.set(y,I),x[1]=I.length}}catch(k){R=k}finally{f=!1}}else R=new Error(`Unsupported action: ${M}`);x[0]=1}else{const M=w.get(y);w.delete(y);for(let L=new Uint16Array$1(x.buffer),k=0;k<M.length;k++)L[k]=M.charCodeAt(k)}if(notify(x,0),R)throw R}})}return!!g.set(_,E)}}))}return context.get(s)};coincident$1.transfer=(...s)=>(buffers.add(s),s);const{isArray:isArray$1}=Array,invoke=s=>s(),reviver=(s,e)=>e,obj=(s,e)=>({t:s,v:e}),bound=s=>Context.bind(s),unbound=s=>typeof s===FUNCTION?invoke(s):s;function Context(){return this}const target=(s,e)=>s===ARRAY?[e]:obj(s,e),unwrap=(s,e=reviver)=>{let r=typeof s,n=s;return r===OBJECT&&(isArray$1(s)?(r=ARRAY,n=s.at(0)):{t:r,v:n}=s),e(r,n)},resolver=(s,e)=>s===FUNCTION?e:target(s,e),wrap=(s,e=resolver)=>{const r=s===null?NULL:typeof s;return e(r===OBJECT&&isArray$1(s)?ARRAY:r,s)},registry$2=new FinalizationRegistry(([s,e,r])=>{r&&console.debug(`Held value ${String(e)} not relevant anymore`),s(e)}),handler=Object.create(null),create$3=(s,e,{debug:r,return:n,token:o=s}=handler)=>{const a=n||new Proxy(s,handler),c=[a,[e,s,!!r]];return o!==!1&&c.push(o),registry$2.register(...c),a},{defineProperty:defineProperty$1,deleteProperty,getOwnPropertyDescriptor,getPrototypeOf,isExtensible,ownKeys,preventExtensions,set,setPrototypeOf}=Reflect,{assign:assign$1,create:create$2}=Object,TypedArray=getPrototypeOf(Int8Array),augment=(s,e)=>{const{get:r,set:n,value:o}=s;return r&&(s.get=e(r)),n&&(s.set=e(n)),o&&(s.value=e(o)),s},asEntry=s=>e=>wrap(e,(r,n)=>{switch(r){case NULL:return target(NULL,n);case OBJECT:if(n===globalThis)return target(r,null);case ARRAY:case FUNCTION:return s(r,n);case BOOLEAN:case NUMBER:case STRING:case UNDEFINED:case BIGINT:return target(r,n);case SYMBOL:if(symbols$1.has(n))return target(r,symbols$1.get(n))}throw new Error(`Unable to handle this ${r} type`)}),symbols$1=new Map(ownKeys(Symbol).filter(s=>typeof Symbol[s]===SYMBOL).map(s=>[Symbol[s],s])),symbol=s=>{for(const[e,r]of symbols$1)if(r===s)return e},transform=s=>s,main$3=(s,e)=>{const r=e&&new WeakMap;if(e){const{addEventListener:o}=EventTarget.prototype;defineProperty$1(EventTarget.prototype,"addEventListener",{value(a,c,...l){return l.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(a,[].concat(l[0].invoke)),delete l[0].invoke),o.call(this,a,c,...l)}})}const n=e&&(o=>{const{currentTarget:a,target:c,type:l}=o;for(const h of r.get(a||c)?.get(l)||[])o[h]()});return function(o,a,c,...l){let h=0,d=this?.transform||transform;const f=new Map,g=new Map,{[c]:_}=o,E=l.length?assign$1(create$2(globalThis),...l):globalThis,A=asEntry((x,D)=>{if(!f.has(D)){let R;for(;g.has(R=h++););f.set(D,R),g.set(R,x===FUNCTION?D:d(D))}return target(x,f.get(D))}),w=x=>{_(DELETE,target(STRING,x))},m=(x,D)=>{switch(x){case OBJECT:if(D==null)return E;case ARRAY:if(typeof D===NUMBER)return g.get(D);if(!(D instanceof TypedArray))for(const R in D)D[R]=b(D[R]);return D;case FUNCTION:if(typeof D===STRING){if(!g.has(D)){const R=function(...M){return e&&M.at(0)instanceof Event&&n(...M),_(APPLY,target(FUNCTION,D),A(this),M.map(A))};return g.set(D,new WeakRef(R)),create$3(D,w,{return:R,token:!1})}return g.get(D).deref()}return g.get(D);case SYMBOL:return symbol(D)}return D},b=x=>unwrap(x,m),y={[APPLY]:(x,D,R)=>A(x.apply(D,R)),[CONSTRUCT]:(x,D)=>A(new x(...D)),[DEFINE_PROPERTY]:(x,D,R)=>A(defineProperty$1(x,D,R)),[DELETE_PROPERTY]:(x,D)=>A(deleteProperty(x,D)),[GET_PROTOTYPE_OF]:x=>A(getPrototypeOf(x)),[GET]:(x,D)=>A(x[D]),[GET_OWN_PROPERTY_DESCRIPTOR]:(x,D)=>{const R=getOwnPropertyDescriptor(x,D);return R?target(OBJECT,augment(R,A)):target(UNDEFINED,R)},[HAS]:(x,D)=>A(D in x),[IS_EXTENSIBLE]:x=>A(isExtensible(x)),[OWN_KEYS]:x=>target(ARRAY,ownKeys(x).map(A)),[PREVENT_EXTENSION]:x=>A(preventExtensions(x)),[SET$1]:(x,D,R)=>A(set(x,D,R)),[SET_PROTOTYPE_OF]:(x,D)=>A(setPrototypeOf(x,D)),[DELETE](x){f.delete(g.get(x)),g.delete(x)}};return o[a]=(x,D,...R)=>{switch(x){case APPLY:R[0]=b(R[0]),R[1]=R[1].map(b);break;case CONSTRUCT:R[0]=R[0].map(b);break;case DEFINE_PROPERTY:{const[M,L]=R;R[0]=b(M);const{get:k,set:I,value:V}=L;k&&(L.get=b(k)),I&&(L.set=b(I)),V&&(L.value=b(V));break}default:R=R.map(b);break}return y[x](b(D),...R)},{proxy:o,[s.toLowerCase()]:E,[`is${s}Proxy`]:()=>!1}}},main$2=main$3("Window",!0),thread$1=s=>{let e=0;const r=new Map,n=new Map,o=Symbol();return function(a,c,l){const h=this?.transform||transform,{[c]:d}=a,f=new Map,g=y=>{f.delete(y),d(DELETE,_(y))},_=asEntry((y,x)=>{if(o in x)return unbound(x[o]);if(y===FUNCTION){if(x=h(x),!n.has(x)){let D;for(;n.has(D=String(e++)););r.set(x,D),n.set(D,x)}return target(y,r.get(x))}if(!(x instanceof TypedArray)){(y===OBJECT||y===ARRAY)&&(x=h(x));for(const D in x)x[D]=_(x[D])}return target(y,x)}),E=(y,x,D)=>{if(!f.has(D)){const R=x===FUNCTION?bound(y):y,M=new Proxy(R,m);return f.set(D,new WeakRef(M)),create$3(D,g,{return:M,token:!1})}return f.get(D).deref()},A=y=>unwrap(y,(x,D)=>{switch(x){case OBJECT:if(D===null)return globalThis;case ARRAY:return typeof D===NUMBER?E(y,x,D):D;case FUNCTION:return typeof D===STRING?n.get(D):E(y,x,D);case SYMBOL:return symbol(D)}return D}),w=(y,x,...D)=>A(d(y,unbound(x),...D)),m={[APPLY]:(y,x,D)=>w(APPLY,y,_(x),D.map(_)),[CONSTRUCT]:(y,x)=>w(CONSTRUCT,y,x.map(_)),[DEFINE_PROPERTY]:(y,x,D)=>{const{get:R,set:M,value:L}=D;return typeof R===FUNCTION&&(D.get=_(R)),typeof M===FUNCTION&&(D.set=_(M)),typeof L===FUNCTION&&(D.value=_(L)),w(DEFINE_PROPERTY,y,_(x),D)},[DELETE_PROPERTY]:(y,x)=>w(DELETE_PROPERTY,y,_(x)),[GET_PROTOTYPE_OF]:y=>w(GET_PROTOTYPE_OF,y),[GET]:(y,x)=>x===o?y:w(GET,y,_(x)),[GET_OWN_PROPERTY_DESCRIPTOR]:(y,x)=>{const D=w(GET_OWN_PROPERTY_DESCRIPTOR,y,_(x));return D&&augment(D,A)},[HAS]:(y,x)=>x===o||w(HAS,y,_(x)),[IS_EXTENSIBLE]:y=>w(IS_EXTENSIBLE,y),[OWN_KEYS]:y=>w(OWN_KEYS,y).map(A),[PREVENT_EXTENSION]:y=>w(PREVENT_EXTENSION,y),[SET$1]:(y,x,D)=>w(SET$1,y,_(x),_(D)),[SET_PROTOTYPE_OF]:(y,x)=>w(SET_PROTOTYPE_OF,y,_(x))};a[l]=(y,x,D,R)=>{switch(y){case APPLY:return A(x).apply(A(D),R.map(A));case DELETE:{const M=A(x);r.delete(n.get(M)),n.delete(M)}}};const b=new Proxy(target(OBJECT,null),m);return{[s.toLowerCase()]:b,[`is${s}Proxy`]:y=>typeof y===OBJECT&&!!y&&o in y,proxy:a}}},thread=thread$1("Window"),Worker$1=typeof Worker===FUNCTION?Worker:class{},proxies=new WeakMap,coincident=(s,...e)=>{const r=coincident$1(s,...e);if(!proxies.has(r)){const n=s instanceof Worker$1?main$2:thread;proxies.set(r,n.call(e.at(0),r,MAIN,THREAD))}return proxies.get(r)};coincident.transfer=coincident$1.transfer;const xworker=()=>new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="4ee55850-17cb-4a85-a071-03fe2aa108bd",d="M"+p,y="T"+p,h="array",g="function",w="null",m="number",b="object",v="string",$="symbol",S="undefined",E="apply",A="construct",P="defineProperty",k="deleteProperty",x="get",M="getOwnPropertyDescriptor",j="getPrototypeOf",T="has",_="isExtensible",O="ownKeys",W="preventExtensions",F="set",R="setPrototypeOf",B="delete";var J=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:I,Map:L,SharedArrayBuffer:D,Uint16Array:C}=globalThis,{BYTES_PER_ELEMENT:H}=I,{BYTES_PER_ELEMENT:N}=C,{isArray:U}=Array,{notify:z,wait:q,waitAsync:K}=Atomics,Y=new WeakSet,G=new WeakMap,V={value:{then:e=>e()}};let Q=0;const X=(e,{parse:t=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:s}=JSON)=>{if(!G.has(e)){const o=(t,...r)=>e.postMessage({[p]:r},{transfer:t}),a=typeof s===g?s:s?.handler,i=s?.delay||42,c=new TextDecoder("utf-16"),l=(e,t)=>e?(K||J)(t,0):(a?((e,t,r)=>{for(;"timed-out"===q(e,0,0,t);)r()})(t,i,a):q(t,0),V);let u=!1;G.set(e,new Proxy(new L,{[T]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[x]:(r,s)=>"then"===s?null:(...r)=>{const a=Q++;let i=new I(new D(2*H)),f=[];Y.has(r.at(-1)||f)&&Y.delete(f=r.pop()),o(f,a,i,s,n?r.map(n):r);const p=e!==globalThis;let d=0;return u&&p&&(d=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${s}(...args) is awaited`)),l(p,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const r=N*e;return i=new I(new D(r+r%H)),o([],a,i),l(p,i).value.then((()=>t(c.decode(new C(i.buffer).slice(0,e)))))}))},[F](t,s,o){const a=typeof o;if(a!==g)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new L;e.addEventListener("message",(async e=>{const o=e.data?.[p];if(U(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=r(n?n(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new C(i.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}if(z(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return G.get(e)};X.transfer=(...e)=>(Y.add(e),e);const{isArray:Z}=Array,ee=(e,t)=>t,te=e=>typeof e===g?(e=>e())(e):e;function re(){return this}const ne=(e,t)=>e===h?[t]:{t:e,v:t},se=(e,t=ee)=>{let r=typeof e,n=e;return r===b&&(Z(e)?(r=h,n=e.at(0)):({t:r,v:n}=e)),t(r,n)},oe=(e,t)=>e===g?t:ne(e,t),ae=(e,t=oe)=>{const r=null===e?w:typeof e;return t(r===b&&Z(e)?h:r,e)},ie=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),ce=Object.create(null),le=(e,t,{debug:r,return:n,token:s=e}=ce)=>{const o=n||new Proxy(e,ce),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),ie.register(...a),o},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:pe,getPrototypeOf:de,isExtensible:ye,ownKeys:he,preventExtensions:ge,set:we,setPrototypeOf:me}=Reflect,{assign:be,create:ve}=Object,$e=de(Int8Array),Se=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Ee=e=>t=>ae(t,((t,r)=>{switch(t){case w:return ne(w,r);case b:if(r===globalThis)return ne(t,null);case h:case g:return e(t,r);case"boolean":case m:case v:case S:case"bigint":return ne(t,r);case $:if(Ae.has(r))return ne(t,Ae.get(r))}throw new Error(`Unable to handle this ${t} type`)})),Ae=new Map(he(Symbol).filter((e=>typeof Symbol[e]===$)).map((e=>[Symbol[e],e]))),Pe=e=>{for(const[t,r]of Ae)if(r===e)return t},ke=e=>e;var xe=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,s,o,...a){let i=0,c=this?.transform||ke;const l=new Map,u=new Map,{[o]:f}=r,p=a.length?be(ve(globalThis),...a):globalThis,d=Ee(((e,t)=>{if(!l.has(t)){let r;for(;u.has(r=i++););l.set(t,r),u.set(r,e===g?t:c(t))}return ne(e,l.get(t))})),y=e=>{f(B,ne(v,e))},w=(e,r)=>{switch(e){case b:if(null==r)return p;case h:if(typeof r===m)return u.get(r);if(!(r instanceof $e))for(const e in r)r[e]=J(r[e]);return r;case g:if(typeof r===v){if(!u.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),f(E,ne(g,r),d(this),e.map(d))};return u.set(r,new WeakRef(e)),le(r,y,{return:e,token:!1})}return u.get(r).deref()}return u.get(r);case $:return Pe(r)}return r},J=e=>se(e,w),I={[E]:(e,t,r)=>d(e.apply(t,r)),[A]:(e,t)=>d(new e(...t)),[P]:(e,t,r)=>d(ue(e,t,r)),[k]:(e,t)=>d(fe(e,t)),[j]:e=>d(de(e)),[x]:(e,t)=>d(e[t]),[M]:(e,t)=>{const r=pe(e,t);return r?ne(b,Se(r,d)):ne(S,r)},[T]:(e,t)=>d(t in e),[_]:e=>d(ye(e)),[O]:e=>ne(h,he(e).map(d)),[W]:e=>d(ge(e)),[F]:(e,t,r)=>d(we(e,t,r)),[R]:(e,t)=>d(me(e,t)),[B](e){l.delete(u.get(e)),u.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case E:r[0]=J(r[0]),r[1]=r[1].map(J);break;case A:r[0]=r[0].map(J);break;case P:{const[e,t]=r;r[0]=J(e);const{get:n,set:s,value:o}=t;n&&(t.get=J(n)),s&&(t.set=J(s)),o&&(t.value=J(o));break}default:r=r.map(J)}return I[e](J(t),...r)},{proxy:r,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Me=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||ke,{[a]:l}=o,u=new Map,f=e=>{u.delete(e),l(B,p(e))},p=Ee(((e,o)=>{if(s in o)return te(o[s]);if(e===g){if(o=c(o),!n.has(o)){let e;for(;n.has(e=String(t++)););r.set(o,e),n.set(e,o)}return ne(e,r.get(o))}if(!(o instanceof $e)){e!==b&&e!==h||(o=c(o));for(const e in o)o[e]=p(o[e])}return ne(e,o)})),d=(e,t,r)=>{if(!u.has(r)){const n=t===g?(e=>re.bind(e))(e):e,s=new Proxy(n,S);return u.set(r,new WeakRef(s)),le(r,f,{return:s,token:!1})}return u.get(r).deref()},y=e=>se(e,((t,r)=>{switch(t){case b:if(null===r)return globalThis;case h:return typeof r===m?d(e,t,r):r;case g:return typeof r===v?n.get(r):d(e,t,r);case $:return Pe(r)}return r})),w=(e,t,...r)=>y(l(e,te(t),...r)),S={[E]:(e,t,r)=>w(E,e,p(t),r.map(p)),[A]:(e,t)=>w(A,e,t.map(p)),[P]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===g&&(r.get=p(n)),typeof s===g&&(r.set=p(s)),typeof o===g&&(r.value=p(o)),w(P,e,p(t),r)},[k]:(e,t)=>w(k,e,p(t)),[j]:e=>w(j,e),[x]:(e,t)=>t===s?e:w(x,e,p(t)),[M]:(e,t)=>{const r=w(M,e,p(t));return r&&Se(r,y)},[T]:(e,t)=>t===s||w(T,e,p(t)),[_]:e=>w(_,e),[O]:e=>w(O,e).map(y),[W]:e=>w(W,e),[F]:(e,t,r)=>w(F,e,p(t),p(r)),[R]:(e,t)=>w(R,e,p(t))};o[i]=(e,t,s,o)=>{switch(e){case E:return y(t).apply(y(s),o.map(y));case B:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const J=new Proxy(ne(b,null),S);return{[e.toLowerCase()]:J,[`is${e}Proxy`]:e=>typeof e===b&&!!e&&s in e,proxy:o}}})("Window"),je=typeof Worker===g?Worker:class{};const Te=new WeakMap,_e=(e,...t)=>{const r=X(e,...t);if(!Te.has(r)){const n=e instanceof je?xe:Me;Te.set(r,n.call(t.at(0),r,d,y))}return Te.get(r)};_e.transfer=X.transfer;const Oe={object(...e){return this.string(function(e){for(var t=e[0],r=1,n=arguments.length;r<n;r++)t+=arguments[r]+e[r];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const We=e=>e.arrayBuffer(),Fe=e=>e.json(),Re=e=>e.text(),Be=new WeakMap,Je=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Be.set(t,r),t}}},Ie=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Le=e=>{const t=e.split("/");return t.pop(),t.join("/")},De=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Ce=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},He=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Ne=(e,t)=>fetch(st(t,Ue.get(e))),Ue=new WeakMap,ze=(e,t,r)=>rt((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(Ve(n))return n.map((r=>({url:He([e,r]),path:He([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:He([t,s])}]}))})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),qe=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Ke=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),Ye=(e,t,r)=>rt((e=>{const t=new Map,r=new Set,n=[];for(const[s,o]of Object.entries(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Ke(o,t))}else{const e=Ke(s,t),a=qe(e,Ke(o||"./",t));if(r.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);r.add(a),n.push({url:e,path:a})}return n})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),Ge=(e,...t)=>Oe[typeof e](e,...t),{isArray:Ve}=Array,{assign:Qe,create:Xe,defineProperties:Ze,defineProperty:et,entries:tt}=Object,{all:rt,resolve:nt}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),st=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,ot=(e,t,r,n=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${r}`,{bubbles:!0,detail:{worker:n}}))},at=e=>Function(`\'use strict\';return (${e})`)(),it=(e,t,r)=>{e.registerJsModule(t,r)},ct=(e,t,...r)=>{try{return e.runPython(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},lt=async(e,t,...r)=>{try{return await e.runPythonAsync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},ut=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}};var ft={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=Je();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.files&&await Ye(this,a,t.files),t.fetch&&await ze(this,a,t.fetch),a},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const pt={dict_converter:Object.fromEntries};var dt={type:"pyodide",module:(e="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=Je(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.files&&await Ye(this,i,t.files),t.fetch&&await ze(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(pt):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const yt="ruby-wasm-wasi",ht=yt.replace(/\\W+/g,"_");var gt={type:yt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.files&&await Ye(this,o,t.files),t.fetch&&await ze(this,o,t.fetch),o},registerJSModule(e,t,r){const n=`__module_${ht}_${t}`;globalThis[n]=r,this.run(e,`require "js";$${t}=JS.global[:${n}]`),delete globalThis[n]},run:(e,t,...r)=>e.eval(Ge(t),...r),runAsync:(e,t,...r)=>e.evalAsync(Ge(t),...r),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${ht}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${yt}`)}};var wt={type:"wasmoon",module:(e="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=Je(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.files&&await Ye(this,a,r.files),r.fetch&&await ze(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{e.global.set(t,r)},run:(e,t,...r)=>{try{return e.doStringSync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runAsync:async(e,t,...r)=>{try{return await e.doString(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(De(e,Le(t)),t=Ce(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const mt=new Map,bt=new Map,vt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=mt.get(r),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{bt.set(t,e);for(const t of["files","fetch"]){const r=e?.[t];r&&Ue.set(r,o)}return s(n,e,r)}))}}),$t=e=>{for(const t of[].concat(e.type))mt.set(t,e)};for(const e of[ft,dt,gt,wt])$t(e);const St=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Et=(e,t,r={})=>{if(t){const[e,n]=(e=>{let t=typeof e;return"string"===t&&/\\.(json|toml|txt)$/.test(e)?t=RegExp.$1:e="./config.txt",[st(e),t]})(t);if("json"===n)r=fetch(e).then(Fe);else if("toml"===n)r=fetch(e).then(Re).then(St);else if("string"===n)try{r=JSON.parse(t)}catch(e){r=St(t)}else"object"===n&&t&&(r=t);t=e}return nt(r).then((r=>vt[e](r,t)))},At="BeforeRun",Pt="AfterRun",kt=[`code${At}`,`code${At}Async`,`code${Pt}`,`code${Pt}Async`],xt=["onWorker","onReady",`on${At}`,`on${At}Async`,`on${Pt}`,`on${Pt}Async`];function Mt(e,t){const{run:r,runAsync:n}=mt.get(this.type);return{...e,run:r.bind(this,t),runAsync:n.bind(this,t)}}const jt=(e,t,r,n,s,o)=>{if(s||o){const a=Mt.bind(e,t),i=n?"runAsync":"run",c=e[i];e[i]=n?async function(e,t,...n){s&&await s.call(this,a(e),r);const i=await c.call(this,e,t,...n);return o&&await o.call(this,a(e),r),i}:function(e,t,...n){s&&s.call(this,a(e),r);const i=c.call(this,e,t,...n);return o&&o.call(this,a(e),r),i}}};try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let Tt,_t,Ot;const Wt=(e,t)=>{addEventListener(e,t||(async t=>{try{await Tt,_t(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Ft,stringify:Rt}=f,{proxy:Bt,window:Jt,isWindowProxy:It}=_e(self,{parse:Ft,stringify:Rt,transform:e=>Ot?Ot(e):e}),Lt={sync:Bt,window:Jt,isWindowProxy:It,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Wt("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{Tt=(async()=>{try{const{id:s,tag:o,type:a,custom:i,version:c,config:l,async:u}=e,f=await Et(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(a,c),t,l),p=Xe(mt.get(a)),d=((e,t,r,n)=>({type:t,config:r,interpreter:n,io:Be.get(n),run:(t,...r)=>e.run(n,t,...r),runAsync:(t,...r)=>e.runAsync(n,t,...r),runEvent:(...t)=>e.runEvent(n,...t)}))(p,i||a,l,f);let y="run";if(u&&(y+="Async"),n){const e=((e,t)=>(r,n)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${n?r:t}\\n${n?t:r}`,...o)})(p,y);let t,r,s="",o="";for(const e of kt){const t=n[e];if(t){const r=e.endsWith("Async");(r&&u||!r&&!u)&&(e.startsWith("codeBefore")?s=t:o=t)}}o&&e(o,!1),s&&e(s,!0);for(const e of xt.slice(2)){const s=n[e];if(s){const n=e.endsWith("Async");if(n&&u||!n&&!u){const n=at(s);e.startsWith("onBefore")?t=n:r=n}}}jt(p,d,Lt,u,t,r)}const{CustomEvent:h,document:g}=Jt,w=s&&g.getElementById(s)||null,m=e=>ot(w,i||a,e,!0,h);let b="";return p.registerJSModule(f,"polyscript",{xworker:Lt,get target(){return!b&&w&&("SCRIPT"===o?w.after(Qe(g.createElement(`script-${i||a}`),{id:b=`${s}-target`})):(b=s,w.replaceChildren(),w.style.display="block")),b}}),_t=p.runEvent.bind(p,f),Ot=p.transform.bind(p,f),w&&m("ready"),n?.onReady&&at(n?.onReady).call(p,Mt.call(p,d,f),Lt),await p[y](f,r),w&&m("done"),f}catch(e){postMessage(e)}})(),Wt("error"),Wt("message"),Wt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),scriptRel="modulepreload",assetsURL=function(s,e){return new URL(s,e).href},seen={},__vitePreload=function(e,r,n){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=assetsURL(a,n),a in seen)return;seen[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!n)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===a&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":scriptRel,c||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a})};Promise.withResolvers||(Promise.withResolvers=function(){var e,r,n=new this(function(o,a){e=o,r=a});return{resolve:e,reject:r,promise:n}});const getBuffer=s=>s.arrayBuffer(),getJSON=s=>s.json(),getText=s=>s.text();function content$1(s){for(var e=s[0],r=1,n=arguments.length;r<n;r++)e+=arguments[r]+s[r];return e}const dedent$2={object(...s){return this.string(content$1(...s))},string(s){for(const e of s.split(/[\r\n]+/))if(e.trim().length){/^(\s+)/.test(e)&&(s=s.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return s}},codedent=(s,...e)=>dedent$2[typeof s](s,...e),{replace}="",es=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,unes={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},cape=s=>unes[s],unescape$2=s=>replace.call(s,es,cape),dedent$1=codedent,unescape$1=unescape$2,{isArray}=Array,{assign,create:create$1,defineProperties,defineProperty,entries}=Object,{all,resolve:resolve$1}=new Proxy(Promise,{get:(s,e)=>s[e].bind(s)}),absoluteURL=(s,e=location.href)=>new URL(s,e.replace(/^blob:/,"")).href;let id$1=0;const nodeInfo=(s,e)=>({id:s.id||(s.id=`${e}-w${id$1++}`),tag:s.tagName}),dispatch=(s,e,r,n=!1,o=CustomEvent)=>{s.dispatchEvent(new o(`${e}:${r}`,{bubbles:!0,detail:{worker:n}}))},createResolved=(s,e,r,n)=>({type:e,config:r,interpreter:n,io:io.get(n),run:(o,...a)=>s.run(n,o,...a),runAsync:(o,...a)=>s.runAsync(n,o,...a),runEvent:(...o)=>s.runEvent(n,...o)}),createOverload=(s,e)=>(r,n)=>{const o=s[e].bind(s);s[e]=(a,c,...l)=>o(a,`${n?r:c}
${n?c:r}`,...l)},io=new WeakMap,stdio=s=>{const e=s||console,r={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...n)=>r.stderr(...n),stdout:(...n)=>r.stdout(...n),async get(n){const o=await n;return io.set(o,r),o}}},writeFile=({FS:s,PATH:e,PATH_FS:r},n,o)=>{const a=r.resolve(n);return s.mkdirTree(e.dirname(a)),s.writeFile(a,new Uint8Array(o),{canOwn:!0})},writeFileShim=(s,e,r)=>(mkdirTree(s,dirname(e)),e=resolve(s,e),s.writeFile(e,new Uint8Array(r),{canOwn:!0})),dirname=s=>{const e=s.split("/");return e.pop(),e.join("/")},mkdirTree=(s,e)=>{const r=[];for(const n of e.split("/"))n!=="."&&(r.push(n),n&&s.mkdir(r.join("/")))},resolve=(s,e)=>{const r=[];for(const n of e.split("/"))switch(n){case"":break;case".":break;case"..":r.pop();break;default:r.push(n)}return[s.cwd()].concat(r).join("/").replace(/^\/+/,"/")},calculateFetchPaths=s=>{for(const{files:e,to_file:r,from:n=""}of s){if(e!==void 0&&r!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(e===void 0&&r===void 0&&n.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${n}, please supply 'to_file' parameter.`)}return s.flatMap(({from:e="",to_folder:r=".",to_file:n,files:o})=>{if(isArray(o))return o.map(c=>({url:joinPaths([e,c]),path:joinPaths([r,c])}));const a=n||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:joinPaths([r,a])}]})},joinPaths=s=>{const e=s.map(r=>r.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(r=>r!==""&&r!==".").join("/");return s[0].startsWith("/")?`/${e}`:e},fetchResolved=(s,e)=>fetch(absoluteURL(e,base$1.get(s))),base$1=new WeakMap,fetchPaths=(s,e,r)=>all(calculateFetchPaths(r).map(({url:n,path:o})=>fetchResolved(r,n).then(getBuffer).then(a=>s.writeFile(e,o,a)))),fillName=(s,e)=>e.endsWith("/")?`${e}${s.split("/").pop()}`:e,parseTemplate=(s,e)=>s.replace(/\{.+?\}/g,r=>{if(!e.has(r))throw new SyntaxError(`Invalid template: ${r}`);return e.get(r)}),calculateFilesPaths=s=>{const e=new Map,r=new Set,n=[];for(const[o,a]of Object.entries(s))if(/^\{.+\}$/.test(o)){if(e.has(o))throw new SyntaxError(`Duplicated template: ${o}`);e.set(o,parseTemplate(a,e))}else{const c=parseTemplate(o,e),l=fillName(c,parseTemplate(a||"./",e));if(r.has(l))throw new SyntaxError(`Duplicated destination: ${l}`);r.add(l),n.push({url:c,path:l})}return n},fetchFiles=(s,e,r)=>all(calculateFilesPaths(r).map(({url:n,path:o})=>fetchResolved(r,n).then(getBuffer).then(a=>s.writeFile(e,o,a)))),registerJSModule=(s,e,r)=>{s.registerJsModule(e,r)},run=(s,e,...r)=>{try{return s.runPython(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runAsync=async(s,e,...r)=>{try{return await s.runPythonAsync(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runEvent=async(s,e,r)=>{const[n,...o]=e.split(".");let a=s.globals.get(n),c;for(const l of o)[c,a]=[a,a[l]];try{await a.call(c,r)}catch(l){io.get(s).stderr(l)}},type$3="micropython",micropython={type:type$3,module:(s="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${s}/micropython.mjs`,async engine({loadMicroPython:s},e,r){const{stderr:n,stdout:o,get:a}=stdio();r=r.replace(/\.m?js$/,".wasm");const c=await a(s({stderr:n,stdout:o,url:r}));return e.files&&await fetchFiles(this,c,e.files),e.fetch&&await fetchPaths(this,c,e.fetch),c},registerJSModule,run,runAsync,runEvent,transform:(s,e)=>e,writeFile:({FS:s,_module:{PATH:e,PATH_FS:r}},n,o)=>writeFile({FS:s,PATH:e,PATH_FS:r},n,o)},type$2="pyodide",toJsOptions={dict_converter:Object.fromEntries},pyodide={type:type$2,module:(s="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${s}/full/pyodide.mjs`,async engine({loadPyodide:s},e,r){const{stderr:n,stdout:o,get:a}=stdio(),c=r.slice(0,r.lastIndexOf("/")),l=await a(s({stderr:n,stdout:o,indexURL:c}));if(e.files&&await fetchFiles(this,l,e.files),e.fetch&&await fetchPaths(this,l,e.fetch),e.packages){await l.loadPackage("micropip");const h=await l.pyimport("micropip");await h.install(e.packages,{keep_going:!0}),h.destroy()}return l},registerJSModule,run,runAsync,runEvent,transform:(s,e)=>e instanceof s.ffi.PyProxy?e.toJs(toJsOptions):e,writeFile:({FS:s,PATH:e,_module:{PATH_FS:r}},n,o)=>writeFile({FS:s,PATH:e,PATH_FS:r},n,o)},type$1="ruby-wasm-wasi",jsType=type$1.replace(/\W+/g,"_"),ruby_wasm_wasi={type:type$1,experimental:!0,module:(s="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${s}/dist/browser.esm.js`,async engine({DefaultRubyVM:s},e,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),o=await WebAssembly.compile(await n.arrayBuffer()),{vm:a}=await s(o);return e.files&&await fetchFiles(this,a,e.files),e.fetch&&await fetchPaths(this,a,e.fetch),a},registerJSModule(s,e,r){const n=`__module_${jsType}_${e}`;globalThis[n]=r,this.run(s,`require "js";$${e}=JS.global[:${n}]`),delete globalThis[n]},run:(s,e,...r)=>s.eval(dedent$1(e),...r),runAsync:(s,e,...r)=>s.evalAsync(dedent$1(e),...r),async runEvent(s,e,r){if(/^xworker\.(on\w+)$/.test(e)){const{$1:n}=RegExp,o=`__module_${jsType}_event`;globalThis[o]=r,this.run(s,`require "js";$xworker.call("${n}",JS.global[:${o}])`),delete globalThis[o]}else await this.run(s,`method(:${e})`).call(e,s.wrap(r))},transform:(s,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${type$1}`)}},type="wasmoon",wasmoon={type,module:(s="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${s}/+esm`,async engine({LuaFactory:s,LuaLibraries:e},r){const{stderr:n,stdout:o,get:a}=stdio(),c=await a(new s().createEngine());return c.global.getTable(e.Base,l=>{c.global.setField(l,"print",o),c.global.setField(l,"printErr",n)}),r.files&&await fetchFiles(this,c,r.files),r.fetch&&await fetchPaths(this,c,r.fetch),c},registerJSModule:(s,e,r)=>{s.global.set(e,r)},run:(s,e,...r)=>{try{return s.doStringSync(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runAsync:async(s,e,...r)=>{try{return await s.doString(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runEvent:async(s,e,r)=>{const[n,...o]=e.split(".");let a=s.global.get(n),c;for(const l of o)[c,a]=[a,a[l]];try{await a.call(c,r)}catch(l){io.get(s).stderr(l)}},transform:(s,e)=>e,writeFile:({cmodule:{module:{FS:s}}},e,r)=>writeFileShim(s,e,r)},registry$1=new Map,configs=new Map,selectors=[],prefixes=[],interpreter=new Proxy(new Map,{get(s,e){if(!s.has(e)){const[a,...c]=e.split("@"),l=registry$1.get(a),h=/^(?:\.?\.?\/|https?:\/\/)/i.test(c)?c.join("@"):l.module(...c);s.set(e,{url:h,module:__vitePreload(()=>import(h),__vite__mapDeps([]),import.meta.url),engine:l.engine.bind(l)})}const{url:r,module:n,engine:o}=s.get(e);return(a,c)=>n.then(l=>{configs.set(e,a);for(const h of["files","fetch"]){const d=a?.[h];d&&base$1.set(d,c)}return o(l,a,r)})}}),register=s=>{for(const e of[].concat(s.type))registry$1.set(e,s),selectors.push(`script[type="${e}"]`),prefixes.push(`${e}-`)};for(const s of[micropython,pyodide,ruby_wasm_wasi,wasmoon])register(s);const TOML_LIB="https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js",parse=async s=>(await __vitePreload(()=>import(TOML_LIB),__vite__mapDeps([]),import.meta.url)).parse(s),getConfigURLAndType=s=>{let e=typeof s;return e==="string"&&/\.(json|toml|txt)$/.test(s)?e=RegExp.$1:s="./config.txt",[absoluteURL(s),e]},getRuntime=(s,e,r={})=>{if(e){const[n,o]=getConfigURLAndType(e);if(o==="json")r=fetch(n).then(getJSON);else if(o==="toml")r=fetch(n).then(getText).then(parse);else if(o==="string")try{r=JSON.parse(e)}catch{r=parse(e)}else o==="object"&&e&&(r=e);e=n}return resolve$1(r).then(n=>interpreter[s](n,e))},getRuntimeID=(s,e="")=>`${s}@${e}`.replace(/@$/,""),beforeRun="BeforeRun",afterRun="AfterRun",code$1=[`code${beforeRun}`,`code${beforeRun}Async`,`code${afterRun}`,`code${afterRun}Async`],js=["onWorker","onReady",`on${beforeRun}`,`on${beforeRun}Async`,`on${afterRun}`,`on${afterRun}Async`];function patch(s,e){const{run:r,runAsync:n}=registry$1.get(this.type);return{...s,run:r.bind(this,e),runAsync:n.bind(this,e)}}const polluteJS=(s,e,r,n,o,a)=>{if(o||a){const c=patch.bind(s,e),l=n?"runAsync":"run",h=s[l];s[l]=n?async function(d,f,...g){o&&await o.call(this,c(d),r);const _=await h.call(this,d,f,...g);return a&&await a.call(this,c(d),r),_}:function(d,f,...g){o&&o.call(this,c(d),r);const _=h.call(this,d,f,...g);return a&&a.call(this,c(d),r),_}}};let Hook$1=class{constructor(e,r={}){const{main:n,worker:o}=r;this.interpreter=e,this.onWorker=n?.onWorker;for(const a of js.slice(1))this[a]=o?.[a];for(const a of code$1)this[a]=o?.[a]}toJSON(){const e={};for(const r of js.slice(1))this[r]&&(e[r]=String(this[r]));for(const r of code$1)this[r]&&(e[r]=dedent$1(this[r]()));return e}};const $xworker=(...s)=>function(r,n){const o=xworker(),{postMessage:a}=o,c=this instanceof Hook$1;if(s.length){const[d,f]=s;n=assign({},n||{type:d,version:f}),n.type||(n.type=d)}const[l]=getConfigURLAndType(n.config),h=fetch(r).then(getText).then(d=>{const f=c?this.toJSON():void 0;a.call(o,{options:n,config:l,code:d,hooks:f})});return defineProperties(o,{postMessage:{value:(d,...f)=>h.then(()=>a.call(o,d,...f))},sync:{value:coincident(o,JSON$1).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),o.addEventListener("message",d=>{const{data:f}=d;f instanceof Error&&(d.stopImmediatePropagation(),o.onerror(create$1(d,{type:{value:"error"},error:{value:f}})))}),c&&this.onWorker?.(this.interpreter,o),o},XWorker$1=$xworker();class MPCRuntimeBase extends Emittery{peersReady=new Map;workerInitializing=!1;running=!1;env={};syncProxyPy;asyncProxyPy;constructor(e,r,n={}){super(),e.getEnv=this.getEnv.bind(this),this.syncProxyPy=e,this.asyncProxyPy=r,e.fetch=this.fetch.bind(this),r.onerror=o=>{console.warn("asyncProxyPy.onerror"),console.warn(o),this.emit("error",o)},r.onmessageerror=o=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(o),this.emit("messageerror",o)},r.onmessage=o=>{let a=o.data;if(!Array.isArray(a)){console.warn("asyncProxyPy.onmessage",a),this.emit("display:error",`invalid message from worker 
`+JSON.stringify(a,null,2)+`
`);return}const[c,...l]=a;switch(c){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[h]=l;this.emit("display:stats",h);break;case"proxy:js:mpc:msg:ready":let[d,f]=l;f.getBuffer&&(f=f.getBuffer()),this.emit("send",{type:"ready",pid:d,payload:f});break;case"proxy:js:mpc:msg:runtime":let[g,_]=l;_.getBuffer&&(_=_.getBuffer()),this.emit("send",{type:"runtime",pid:g,payload:_});break;case"proxy:js:display":let[E]=l;this.display(E);break;case"proxy:js:display:error":let[A]=l;this.displayError(A+`
`);break}},this.env=n}exec=async e=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};run_mpc=async e=>{this.emit("exec:init"),e.filename||(e.filename="<exec>");try{console.log("run_mpc",e),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};processReadyMessage(e,r){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",e,r])}processRuntimeMessage(e,r){try{let n;if(r&&r instanceof Uint8Array&&(n=[r.buffer]),n){this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r],n);return}this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r])}catch(n){console.warn("runtime:error"),console.warn("runtime:error",n),this.emit("error",new ErrorEvent("runtime:error",{error:n}))}}updateEnv(e={}){this.env={...this.env,...e},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}fetch2=async e=>{console.log("fetching",e);let n=await(await fetch("./"+e)).arrayBuffer();return new Uint8Array(n)};fetch=async e=>{e.endsWith(".gz")&&(e+="ip"),console.log("js/fetch fetching",e);let n=await(await fetch(e)).arrayBuffer();return new Uint8Array(n)};getEnv=()=>this.env;readline=e=>{};destroy(){console.log("destroying worker"),this.running=!1,this._close()}display=e=>{this.emit("display",e)};displayError=e=>{this.emit("display:error",e)};resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}onerror=e=>{console.warn("MPCRuntime.onerror"),console.warn(e.error),this.emit("error",e)};onmessageerror=e=>{console.warn("MPCRuntime.onmessageerror"),console.warn(e),this.emit("messageerror",e)};setReadlineFn(e){this.readline=e,this.syncProxyPy.readline=e}}function XXWorker(s,e,r){let n={async:!0,type:"pyodide",version:"0.24.1",config:e};return console.log("creating a new worker"),XWorker$1.call(new Hook$1(null,r),s,n)}let emptyBlob=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class PyScriptWorkerRuntime extends MPCRuntimeBase{_close(){this.worker.terminate()}worker;constructor(e,r,n={}){(!e||e=="")&&(e=emptyBlob);let o=XXWorker(e,r,{worker:{onReady:(a,c)=>{console.log("worker onReady/init"),a.io.stderr=l=>{typeof l!="string"&&(l=l.toString()),console.error(l),c.postMessage(["proxy:js:display:error",l])},a.io.stdout=l=>{c.postMessage(["proxy:js:display",l+`
`])},c.postMessage(["proxy:js:init"]),self.wrap=a,self.pyodide=a.interpreter,console.log(self.pyodide),self.runAsync=async(l,h)=>{try{return await a.interpreter.runPythonAsync(l,{filename:h})}catch(d){a.io.stderr(d)}},self.runAsync(`
                        import asyncio
                        import js
                        import sys
                        from startup import *
                    `,"startup.py")}}});o.onmessageerror=a=>{console.error("worker.onmessageerror"),console.error(a)},o.onerror=a=>{console.error("worker.onerror"),console.error(a)},super(o.sync,o,n),this.worker=o}type(){return"PyScript/Worker"}}const stickyModule=(s,e,r=globalThis)=>{const n=Symbol.for(s),o=n in r;return[o?r[n]:Object.defineProperty(r,n,{value:e})[n],o]},$$1=(s,e=document)=>e.querySelector(s),$$$1=(s,e=document)=>[...e.querySelectorAll(s)],$x=(s,e=document)=>{const n=new XPathEvaluator().createExpression(s).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),o=[];for(let a=0,{snapshotLength:c}=n;a<c;a++)o.push(n.snapshotItem(a));return o},INVALID_CONTENT="Invalid content",INVALID_SRC_ATTR="Invalid worker attribute",INVALID_WORKER_ATTR="Invalid worker attribute",hasCommentsOnly=s=>!s.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim(),workerURL=s=>{const{src:e,worker:r}=s.attributes;if(r){let{value:n}=r;if(n)throw new SyntaxError(INVALID_WORKER_ATTR);if(n=e?.value,!n){if(e)throw new SyntaxError(INVALID_SRC_ATTR);if(!s.childElementCount)n=s.textContent;else{const{innerHTML:a,localName:c,type:l}=s,h=l||c.replace(/-script$/,"");n=unescape$1(a),console.warn(`Deprecated: use <script type="${h}"> for an always safe content parsing:
`,n)}return URL.createObjectURL(new Blob([dedent$1(n)],{type:"text/plain"}))}return n}if(e&&!hasCommentsOnly(s.textContent))throw new SyntaxError(INVALID_CONTENT)},getRoot$1=s=>{let e=s;for(;e.parentNode;)e=e.parentNode;return e},queryTarget=(s,e)=>{const r=getRoot$1(s);return r.getElementById(e)||$$1(e,r)},targets=new WeakMap,targetDescriptor={get(){let s=targets.get(this);return s||(s=document.createElement(`${this.type}-script`),targets.set(this,s),handle(this)),s},set(s){typeof s=="string"?targets.set(this,queryTarget(this,s)):(targets.set(this,s),handle(this))}},handled=new WeakMap,interpreters=new Map,execute$1=async(s,e,r,n)=>{const{type:o}=s,a=registry$1.get(o);a.experimental&&console.warn(`The ${o} interpreter is experimental`);const[c,l]=await all([handled.get(s).interpreter,e]);try{defineProperty(document,"currentScript",{configurable:!0,get:()=>s}),a.registerJSModule(c,"polyscript",{XWorker:r}),dispatch(s,o,"ready");const h=a[n?"runAsync":"run"](c,l),d=dispatch.bind(null,s,o,"done");return n?h.then(d):d(),h}finally{delete document.currentScript}},getValue=(s,e)=>{const r=s?.value;return r?e+r:""},getDetails=(s,e,r,n,o,a=s)=>{if(!interpreters.has(e)){const c={interpreter:getRuntime(r,o),queue:resolve$1(),XWorker:$xworker(s,n)};interpreters.set(e,c),interpreters.has(s)||interpreters.set(s,c),interpreters.has(a)||interpreters.set(a,c)}return interpreters.get(e)},handle=async s=>{if(handled.has(s)){const{target:e}=s;e&&(s.closest("head")?document.body.append(e):s.after(e))}else{const{attributes:{async:e,config:r,env:n,target:o,version:a},src:c,type:l}=s,h=a?.value,d=getRuntimeID(l,h);let f=getValue(r,"|");const g=getValue(n,"")||`${d}${f}`;f=f.slice(1);const _=workerURL(s);if(_){const m=$xworker(l,h),b=new m(_,{...nodeInfo(s,l),async:!!e,config:f});handled.set(defineProperty(s,"xworker",{value:b}),{xworker:b});return}const E=getValue(o,""),A=getDetails(l,g,d,h,f);handled.set(defineProperty(s,"target",targetDescriptor),A),E&&targets.set(s,queryTarget(s,E));const w=c?fetch(c).then(getText):s.textContent;A.queue=A.queue.then(()=>execute$1(s,w,A.XWorker,!!e))}},env$1=new Proxy(create$1(null),{get:(s,e)=>new Promise(queueMicrotask).then(()=>awaitInterpreter(e))}),awaitInterpreter=async s=>{if(interpreters.has(s)){const{interpreter:r,queue:n}=interpreters.get(s);return(await all([r,n]))[0]}const e=interpreters.size?`Available interpreters are: ${[...interpreters.keys()].map(r=>`"${r}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${s}" was not found. ${e}`)},listener=async s=>{const{type:e,currentTarget:r}=s;if(prefixes.length)for(let{name:n,value:o,ownerElement:a}of $x(`./@*[${prefixes.map(c=>`name()="${c}${e}"`).join(" or ")}]`,r)){n=n.slice(0,-(e.length+1));const c=await awaitInterpreter(a.getAttribute(`${n}-env`)||n);registry$1.get(n).runEvent(c,o,s)}},addAllListeners=s=>{if(prefixes.length)for(let{name:e,ownerElement:r}of $x(`.//@*[${prefixes.map(n=>`starts-with(name(),"${n}")`).join(" or ")}]`,s)){const n=e.lastIndexOf("-"),o=e.slice(n+1);o!=="env"&&(r.addEventListener(o,listener),"disabled"in r&&!r.disabled&&(r.disabled=!0,env$1[e.slice(0,n)].then(()=>{r.disabled=!1})))}},CUSTOM_SELECTORS=[],types$1=new Map,waitList=new Map,handleCustomType=s=>{for(const e of CUSTOM_SELECTORS)if(s.matches(e)){const r=types$1.get(e),n=registry.get(r),{resolve:o}=waitList.get(r),{options:a,known:c}=n;if(!c.has(s)){c.add(s);const{interpreter:l,config:h,version:d,env:f,onerror:g,hooks:_}=a;let E;try{const y=workerURL(s);if(y){const x=XWorker$1.call(new Hook$1(null,_),y,{...nodeInfo(s,r),version:d,type:l,custom:r,config:s.getAttribute("config")||h||{},async:s.hasAttribute("async")});defineProperty(s,"xworker",{value:x}),o({type:r,xworker:x});return}}catch(y){E=y}const A=getRuntimeID(l,d),w=f||`${A}${h?`|${h}`:""}`,{interpreter:m,XWorker:b}=getDetails(r,w,A,d,h,l);m.then(y=>{const x=create$1(registry$1.get(l)),D=new Hook$1(y,_),R=function(...k){return b.apply(D,k)},M={...createResolved(x,r,structuredClone(configs.get(A)),y),XWorker:R};x.registerJSModule(y,"polyscript",{XWorker:R});for(const L of["Run","RunAsync"]){const k=createOverload(x,`r${L.slice(1)}`);let I="",V="";for(const H of code$1){const z=_?.main?.[H];z&&H.endsWith(L)&&(H.startsWith("codeBefore")?I=dedent$1(z()):V=dedent$1(z()))}V&&k(V,!1),I&&k(I,!0);let N,B;for(let H=2;H<js.length;H++){const z=js[H],W=_?.main?.[z];W&&z.endsWith(L)&&(z.startsWith("onBefore")?N=W:B=W)}polluteJS(x,M,s,L.endsWith("Async"),N,B)}n.queue=n.queue.then(()=>(o(M),E&&g?.(E,s),_?.main?.onReady?.(M,s)))})}}},registry=new Map;let dontBotherCount=0;const define$1=(s,e)=>{let r=s==null;if(r)s=`_ps${dontBotherCount++}`;else if(registry$1.has(s)||registry.has(s))throw new Error(`<script type="${s}"> already registered`);if(!registry$1.has(e?.interpreter))throw new Error("Unspecified interpreter");registry$1.set(s,registry$1.get(e.interpreter));const n=[`script[type="${s}"]`];if(whenDefined$1(s),r){const{hooks:o}=e,a=o?.main?.onReady;e={...e,hooks:{...o,main:{...o?.main,onReady(c,l){CUSTOM_SELECTORS.splice(CUSTOM_SELECTORS.indexOf(s),1),registry$1.delete(s),registry.delete(s),waitList.delete(s),l.remove(),a?.(c)}}}},document.head.append(assign(document.createElement("script"),{type:s}))}else n.push(`${s}-script`),prefixes.push(`${s}-`);for(const o of n)types$1.set(o,s);CUSTOM_SELECTORS.push(...n),registry.set(s,{options:assign({env:s},e),known:new WeakSet,queue:Promise.resolve()}),r||addAllListeners(document),$$$1(n.join(",")).forEach(handleCustomType)},whenDefined$1=s=>(waitList.has(s)||waitList.set(s,Promise.withResolvers()),waitList.get(s).promise),[{define,whenDefined,env,Hook,XWorker},alreadyLive]=stickyModule("polyscript",{define:define$1,whenDefined:whenDefined$1,env:env$1,Hook:Hook$1,XWorker:XWorker$1});if(!alreadyLive){const s=new MutationObserver(o=>{const a=selectors.join(",");for(const{type:c,target:l,attributeName:h,addedNodes:d}of o){if(c==="attributes"){const f=h.lastIndexOf("-")+1;if(f){const g=h.slice(0,f);for(const _ of prefixes)if(g===_){const E=h.slice(f);if(E!=="env"){const A=l.hasAttribute(h)?"add":"remove";l[`${A}EventListener`](E,listener)}break}}continue}for(const f of d)f.nodeType===1&&(addAllListeners(f),a&&f.matches(a)?handle(f):e(a,f,!0))}}),e=(o,a,c)=>{o&&$$$1(o,a).forEach(handle),o=CUSTOM_SELECTORS.join(","),o&&(c&&handleCustomType(a),$$$1(o,a).forEach(handleCustomType))},r=o=>(s.observe(o,{childList:!0,subtree:!0,attributes:!0}),o),{attachShadow:n}=Element.prototype;assign(Element.prototype,{attachShadow(o){return r(n.call(this,o))}}),queueMicrotask(()=>{addAllListeners(r(document)),e(selectors.join(","),document,!1)})}class $e8379818650e2442$export$93654d4f2d6cd524{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return $e8379818650e2442$var$concatArrayBuffers(e).buffer}}function $e8379818650e2442$var$concatArrayBuffers(s){let e=0;for(const o of s)e+=o.byteLength;const r=new Uint8Array(e);let n=0;for(const o of s){const a=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);r.set(a,n),n+=o.byteLength}return r}function $0cfd7828ad59115f$export$417857010dc9287f(s){return new $0cfd7828ad59115f$var$Unpacker(s).unpack()}function $0cfd7828ad59115f$export$2a703dbb0cb35339(s){const e=new $0cfd7828ad59115f$export$b9ec4b114aa40074;return e.pack(s),e.getBuffer()}class $0cfd7828ad59115f$var$Unpacker{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let n=0,o="",a,c;for(;n<e;)a=r[n],a<160?(c=a,n++):(a^192)<32?(c=(a&31)<<6|r[n+1]&63,n+=2):(a^224)<16?(c=(a&15)<<12|(r[n+1]&63)<<6|r[n+2]&63,n+=3):(c=(a&7)<<18|(r[n+1]&63)<<12|(r[n+2]&63)<<6|r[n+3]&63,n+=4),o+=String.fromCodePoint(c);return this.index+=e,o}unpack_array(e){const r=new Array(e);for(let n=0;n<e;n++)r[n]=this.unpack();return r}unpack_map(e){const r={};for(let n=0;n<e;n++){const o=this.unpack();r[o]=this.unpack()}return r}unpack_float(){const e=this.unpack_uint32(),r=e>>31,n=(e>>23&255)-127,o=e&8388607|8388608;return(r===0?1:-1)*o*2**(n-23)}unpack_double(){const e=this.unpack_uint32(),r=this.unpack_uint32(),n=e>>31,o=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(o-20)+r*2**(o-52);return(n===0?1:-1)*c}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class $0cfd7828ad59115f$export$b9ec4b114aa40074{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array)this.pack_array(e);else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const n=e;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else throw new Error(`Type "${r.toString()}" not yet supported`)}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),n=r.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");for(let n=0;n<r;n++)this.pack(e[n])}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let r=0;e<0&&(r=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),o=e/2**n-1,a=Math.floor(o*2**52),c=2**32,l=r<<31|n+1023<<20|a/c&1048575,h=a%c;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(h)}pack_object(e){const n=Object.keys(e).length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(const o in e)e.hasOwnProperty(o)&&(this.pack(o),this.pack(e[o]))}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const r=e&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(e){const r=e/4294967296,n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const r=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new $e8379818650e2442$export$93654d4f2d6cd524,this._textEncoder=new TextEncoder}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(s,e,r){const n=s.match(e);return n&&n.length>=r&&parseInt(n[r],10)}function wrapPeerConnectionEvent(s,e,r){if(!s.RTCPeerConnection)return;const n=s.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(c,l){if(c!==e)return o.apply(this,arguments);const h=d=>{const f=r(d);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,h),o.apply(this,[c,h])};const a=n.removeEventListener;n.removeEventListener=function(c,l){if(c!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const h=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,h])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function disableLog(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(logDisabled_=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(deprecationWarnings_=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(s,e){deprecationWarnings_&&console.warn(s+" is deprecated, please use "+e+" instead.")}function detectBrowser(s){const e={browser:null,version:null};if(typeof s>"u"||!s.navigator||!s.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=s;if(r.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||s.isSecureContext===!1&&s.webkitRTCPeerConnection)e.browser="chrome",e.version=extractVersion(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject$1(s){return Object.prototype.toString.call(s)==="[object Object]"}function compactObject(s){return isObject$1(s)?Object.keys(s).reduce(function(e,r){const n=isObject$1(s[r]),o=n?compactObject(s[r]):s[r],a=n&&!Object.keys(o).length;return o===void 0||a?e:Object.assign(e,{[r]:o})},{}):s}function walkStats(s,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?walkStats(s,s.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(o=>{walkStats(s,s.get(o),r)})}))}function filterStats(s,e,r){const n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const a=[];return s.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&a.push(c)}),a.forEach(c=>{s.forEach(l=>{l.type===n&&l.trackId===c.id&&walkStats(s,l,o)})}),o}const logging=log;function shimGetUserMedia$2(s,e){const r=s&&s.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const h={};return Object.keys(l).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const f=typeof l[d]=="object"?l[d]:{ideal:l[d]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const g=function(_,E){return _?_+E.charAt(0).toUpperCase()+E.slice(1):E==="deviceId"?"sourceId":E};if(f.ideal!==void 0){h.optional=h.optional||[];let _={};typeof f.ideal=="number"?(_[g("min",d)]=f.ideal,h.optional.push(_),_={},_[g("max",d)]=f.ideal,h.optional.push(_)):(_[g("",d)]=f.ideal,h.optional.push(_))}f.exact!==void 0&&typeof f.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[g("",d)]=f.exact):["min","max"].forEach(_=>{f[_]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[g(_,d)]=f[_])})}),l.advanced&&(h.optional=(h.optional||[]).concat(l.advanced)),h},o=function(l,h){if(e.version>=61)return h(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const d=function(f,g,_){g in f&&!(_ in f)&&(f[_]=f[g],delete f[g])};l=JSON.parse(JSON.stringify(l)),d(l.audio,"autoGainControl","googAutoGainControl"),d(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let d=l.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const f=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return r.mediaDevices.enumerateDevices().then(_=>{_=_.filter(A=>A.kind==="videoinput");let E=_.find(A=>g.some(w=>A.label.toLowerCase().includes(w)));return!E&&_.length&&g.includes("back")&&(E=_[_.length-1]),E&&(l.video.deviceId=d.exact?{exact:E.deviceId}:{ideal:E.deviceId}),l.video=n(l.video),logging("chrome: "+JSON.stringify(l)),h(l)})}l.video=n(l.video)}return logging("chrome: "+JSON.stringify(l)),h(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,h,d){o(l,f=>{r.webkitGetUserMedia(f,h,g=>{d&&d(a(g))})})};if(r.getUserMedia=c.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(h){return o(h,d=>l(d).then(f=>{if(d.audio&&!f.getAudioTracks().length||d.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(a(f))))}}}function shimGetDisplayMedia$1(s,e){if(!(s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices)&&s.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}s.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(o=>{const a=n.video&&n.video.width,c=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o,maxFrameRate:l||3}},a&&(n.video.mandatory.maxWidth=a),c&&(n.video.mandatory.maxHeight=c),s.navigator.mediaDevices.getUserMedia(n)})}}}function shimMediaStream(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function shimOnTrack$1(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",o=>{let a;s.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===o.track.id):a={track:o.track};const c=new Event("track");c.track=o.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)}),n.stream.getTracks().forEach(o=>{let a;s.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===o.id):a={track:o};const c=new Event("track");c.track=o,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(s,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const e=function(o,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=o.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:o}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(l,h){let d=o.apply(this,arguments);return d||(d=e(this,l),this._senders.push(d)),d};const a=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const h=this._senders.indexOf(l);h!==-1&&this._senders.splice(h,1)}}const r=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(h=>h.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof s=="object"&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const e=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(o=>o._pc=this),n},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[n,o,a]=arguments;if(arguments.length>0&&typeof n=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof n!="function"))return e.apply(this,[]);const c=function(h){const d={};return h.result().forEach(g=>{const _={id:g.id,timestamp:g.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[g.type]||g.type};g.names().forEach(E=>{_[E]=g.stat(E)}),d[_.id]=_}),d},l=function(h){return new Map(Object.keys(h).map(d=>[d,h[d]]))};if(arguments.length>=2){const h=function(d){o(l(c(d)))};return e.apply(this,[h,n])}return new Promise((h,d)=>{e.apply(this,[function(f){h(l(c(f)))},d])}).then(o,a)}}function shimSenderReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const r=s.RTCPeerConnection.prototype.getSenders;r&&(s.RTCPeerConnection.prototype.getSenders=function(){const a=r.apply(this,[]);return a.forEach(c=>c._pc=this),a});const n=s.RTCPeerConnection.prototype.addTrack;n&&(s.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),s.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>filterStats(c,a.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const r=s.RTCPeerConnection.prototype.getReceivers;r&&(s.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o}),wrapPeerConnectionEvent(s,"track",n=>(n.receiver._pc=n.srcElement,n)),s.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>filterStats(a,o.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype))return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const n=arguments[0];let o,a,c;return this.getSenders().forEach(l=>{l.track===n&&(o?c=!0:o=l)}),this.getReceivers().forEach(l=>(l.track===n&&(a?c=!0:a=l),l.track===n)),c||o&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(h)===-1&&this._shimmedLocalStreams[l.id].push(h):this._shimmedLocalStreams[l.id]=[l,h],h};const r=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const h=this.getSenders().filter(d=>l.indexOf(d)===-1);this._shimmedLocalStreams[c.id]=[c].concat(h)};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],n.apply(this,arguments)};const o=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const h=this._shimmedLocalStreams[l].indexOf(c);h!==-1&&this._shimmedLocalStreams[l].splice(h,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),o.apply(this,arguments)}}function shimAddTrackRemoveTrack(s,e){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(s);const r=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(g=>this._reverseStreams[g.id])};const n=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(g=>{if(this.getSenders().find(E=>E.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const g=new s.MediaStream(f.getTracks());this._streams[f.id]=g,this._reverseStreams[g.id]=f,f=g}n.apply(this,[f])};const o=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},s.RTCPeerConnection.prototype.addTrack=function(f,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(_.length!==1||!_[0].getTracks().find(w=>w===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(w=>w.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const A=this._streams[g.id];if(A)A.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const w=new s.MediaStream([f]);this._streams[g.id]=w,this._reverseStreams[w.id]=g,this.addStream(w)}return this.getSenders().find(w=>w.track===f)};function a(d,f){let g=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(_=>{const E=d._reverseStreams[_],A=d._streams[E.id];g=g.replace(new RegExp(A.id,"g"),E.id)}),new RTCSessionDescription({type:f.type,sdp:g})}function c(d,f){let g=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(_=>{const E=d._reverseStreams[_],A=d._streams[E.id];g=g.replace(new RegExp(E.id,"g"),A.id)}),new RTCSessionDescription({type:f.type,sdp:g})}["createOffer","createAnswer"].forEach(function(d){const f=s.RTCPeerConnection.prototype[d],g={[d](){const _=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[A=>{const w=a(this,A);_[0].apply(null,[w])},A=>{_[1]&&_[1].apply(null,A)},arguments[2]]):f.apply(this,arguments).then(A=>a(this,A))}};s.RTCPeerConnection.prototype[d]=g[d]});const l=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const d=h.get.apply(this);return d.type===""?d:a(this,d)}}),s.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let _;Object.keys(this._streams).forEach(E=>{this._streams[E].getTracks().find(w=>f.track===w)&&(_=this._streams[E])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(s,e){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=s.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};s.RTCPeerConnection.prototype[r]=o[r]})}function fixNegotiationNeeded(s,e){wrapPeerConnectionEvent(s,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(s,e){const r=s&&s.navigator,n=s&&s.MediaStreamTrack;if(r.getUserMedia=function(o,a,c){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(o).then(a,c)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const o=function(c,l,h){l in c&&!(h in c)&&(c[h]=c[l],delete c[l])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),o(c.audio,"autoGainControl","mozAutoGainControl"),o(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},n&&n.prototype.getSettings){const c=n.prototype.getSettings;n.prototype.getSettings=function(){const l=c.apply(this,arguments);return o(l,"mozAutoGainControl","autoGainControl"),o(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),o(l,"autoGainControl","mozAutoGainControl"),o(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function shimGetDisplayMedia(s,e){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,s.navigator.mediaDevices.getUserMedia(n)})}function shimOnTrack(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(s,e){if(typeof s!="object"||!(s.RTCPeerConnection||s.mozRTCPeerConnection))return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const a=s.RTCPeerConnection.prototype[o],c={[o](){return arguments[0]=new(o==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};s.RTCPeerConnection.prototype[o]=c[o]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return n.apply(this,[a||null]).then(h=>{if(e.version<53&&!c)try{h.forEach(d=>{d.type=r[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;h.forEach((f,g)=>{h.set(g,Object.assign({},f,{type:r[f.type]||f.type}))})}return h}).then(c,l)}}function shimSenderGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const e=s.RTCPeerConnection.prototype.getSenders;e&&(s.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(a=>a._pc=this),o});const r=s.RTCPeerConnection.prototype.addTrack;r&&(s.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const e=s.RTCPeerConnection.prototype.getReceivers;e&&(s.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(o=>o._pc=this),n}),wrapPeerConnectionEvent(s,"track",r=>(r.receiver._pc=r.srcElement,r)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(s){!s.RTCPeerConnection||"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(r){deprecated("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function shimRTCDataChannel(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function shimAddTransceiver(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.addTransceiver;e&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const o=n.length>0;o&&n.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(o){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,c.sendEncodings=n,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function shimGetParameters(s){if(!(typeof s=="object"&&s.RTCRtpSender))return;const e=s.RTCRtpSender.prototype.getParameters;e&&(s.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function shimCreateOffer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(o=>e.call(this,o,n)),n.getVideoTracks().forEach(o=>e.call(this,o,n))},s.RTCPeerConnection.prototype.addTrack=function(n,...o){return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const o=r.getTracks();this.getSenders().forEach(a=>{o.includes(a.track)&&this.removeTrack(a)})})}}function shimRemoteStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,this.dispatchEvent(a)})})}});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,n.dispatchEvent(c)})}),e.apply(n,arguments)}}}function shimCallbacksAPI(s){if(typeof s!="object"||!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,o=e.setLocalDescription,a=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(d,f){const g=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[g]);return f?(_.then(d,f),Promise.resolve()):_},e.createAnswer=function(d,f){const g=arguments.length>=2?arguments[2]:arguments[0],_=n.apply(this,[g]);return f?(_.then(d,f),Promise.resolve()):_};let l=function(h,d,f){const g=o.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g};e.setLocalDescription=l,l=function(h,d,f){const g=a.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g},e.setRemoteDescription=l,l=function(h,d,f){const g=c.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g},e.addIceCandidate=l}function shimGetUserMedia(s){const e=s&&s.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=o=>n(shimConstraints(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,o,a){e.mediaDevices.getUserMedia(n).then(o,a)}.bind(e))}function shimConstraints(s){return s&&s.video!==void 0?Object.assign({},s,{video:compactObject(s.video)}):s}function shimRTCIceServerUrls(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection;s.RTCPeerConnection=function(n,o){if(n&&n.iceServers){const a=[];for(let c=0;c<n.iceServers.length;c++){let l=n.iceServers[c];l.urls===void 0&&l.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(n.iceServers[c])}n.iceServers=a}return new e(n,o)},s.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(s){const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const o=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function shimAudioContext(s){typeof s!="object"||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver},Symbol.toStringTag,{value:"Module"}));var sdp$1={exports:{}};(function(s){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((o,a)=>(a>0?"m="+o:o).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(o=>o.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const o={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":o.relatedAddress=n[a+1];break;case"rport":o.relatedPort=parseInt(n[a+1],10);break;case"tcptype":o.tcpType=n[a+1];break;case"ufrag":o.ufrag=n[a+1],o.usernameFragment=n[a+1];break;default:o[n[a]]===void 0&&(o[n[a]]=n[a+1]);break}return o},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const o=r.component;o==="rtp"?n.push(1):o==="rtcp"?n.push(2):n.push(o),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const a=r.type;return n.push("typ"),n.push(a),a!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const o={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),o.name=n[0],o.clockRate=parseInt(n[1],10),o.channels=n.length===3?parseInt(n[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const o=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let o;const a=r.substring(r.indexOf(" ")+1).split(";");for(let c=0;c<a.length;c++)o=a[c].trim().split("="),n[o[0].trim()]=o[1];return n},e.writeFmtp=function(r){let n="",o=r.payloadType;if(r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const a=[];Object.keys(r.parameters).forEach(c=>{r.parameters[c]!==void 0?a.push(c+"="+r.parameters[c]):a.push(c)}),n+="a=fmtp:"+o+" "+a.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",o=r.payloadType;return r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+o+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),o={ssrc:parseInt(r.substring(7,n),10)},a=r.indexOf(":",n);return a>-1?(o.attribute=r.substring(n+1,a),o.value=r.substring(a+1)):o.attribute=r.substring(n+1),o},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(o=>parseInt(o,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let o="a=setup:"+n+`\r
`;return r.fingerprints.forEach(a=>{o+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),o},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const o=e.matchPrefix(r+n,"a=ice-ufrag:")[0],a=e.matchPrefix(r+n,"a=ice-pwd:")[0];return o&&a?{usernameFragment:o.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(r)[0].split(" ");n.profile=a[2];for(let l=3;l<a.length;l++){const h=a[l],d=e.matchPrefix(r,"a=rtpmap:"+h+" ")[0];if(d){const f=e.parseRtpMap(d),g=e.matchPrefix(r,"a=fmtp:"+h+" ");switch(f.parameters=g.length?e.parseFmtp(g[0]):{},f.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),n.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(f.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const c=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{c.forEach(h=>{l.rtcpFeedback.find(f=>f.type===h.type&&f.parameter===h.parameter)||l.rtcpFeedback.push(h)})}),n},e.writeRtpDescription=function(r,n){let o="";o+="m="+r+" ",o+=n.codecs.length>0?"9":"0",o+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=n.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(c=>{o+=e.writeRtpMap(c),o+=e.writeFmtp(c),o+=e.writeRtcpFb(c)});let a=0;return n.codecs.forEach(c=>{c.maxptime>a&&(a=c.maxptime)}),a>0&&(o+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(c=>{o+=e.writeExtmap(c)}),o},e.parseRtpEncodingParameters=function(r){const n=[],o=e.parseRtpParameters(r),a=o.fecMechanisms.indexOf("RED")!==-1,c=o.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(_=>e.parseSsrcMedia(_)).filter(_=>_.attribute==="cname"),h=l.length>0&&l[0].ssrc;let d;const f=e.matchPrefix(r,"a=ssrc-group:FID").map(_=>_.substring(17).split(" ").map(A=>parseInt(A,10)));f.length>0&&f[0].length>1&&f[0][0]===h&&(d=f[0][1]),o.codecs.forEach(_=>{if(_.name.toUpperCase()==="RTX"&&_.parameters.apt){let E={ssrc:h,codecPayloadType:parseInt(_.parameters.apt,10)};h&&d&&(E.rtx={ssrc:d}),n.push(E),a&&(E=JSON.parse(JSON.stringify(E)),E.fec={ssrc:h,mechanism:c?"red+ulpfec":"red"},n.push(E))}}),n.length===0&&h&&n.push({ssrc:h});let g=e.matchPrefix(r,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-50*40*8:g=void 0,n.forEach(_=>{_.maxBitrate=g})),n},e.parseRtcpParameters=function(r){const n={},o=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];o&&(n.cname=o.value,n.ssrc=o.ssrc);const a=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;const c=e.matchPrefix(r,"a=rtcp-mux");return n.mux=c.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const o=e.matchPrefix(r,"a=msid:");if(o.length===1)return n=o[0].substring(7).split(" "),{stream:n[0],track:n[1]};const a=e.matchPrefix(r,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),o=e.matchPrefix(r,"a=max-message-size:");let a;o.length>0&&(a=parseInt(o[0].substring(19),10)),isNaN(a)&&(a=65536);const c=e.matchPrefix(r,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:n.fmt,maxMessageSize:a};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const h=l[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:a}}},e.writeSctpDescription=function(r,n){let o=[];return r.protocol!=="DTLS/SCTP"?o=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:o=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&o.push("a=max-message-size:"+n.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,o){let a;const c=n!==void 0?n:2;return r?a=r:a=e.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const o=e.splitLines(r);for(let a=0;a<o.length;a++)switch(o[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[a].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const o=e.splitLines(r)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},e.parseOLine=function(r){const o=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let o=0;o<n.length;o++)if(n[o].length<2||n[o].charAt(1)!=="=")return!1;return!0},s.exports=e})(sdp$1);var sdpExports=sdp$1.exports;const SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const e=s.RTCIceCandidate;s.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const o=new e(n),a=SDPUtils.parseCandidate(n.candidate);for(const c in a)c in o||Object.defineProperty(o,c,{value:a[c]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(n)},s.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(s,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new s.RTCIceCandidate(r.candidate),writable:"false"}),r))}function shimRTCIceCandidateRelayProtocol(s){!s.RTCIceCandidate||s.RTCIceCandidate&&"relayProtocol"in s.RTCIceCandidate.prototype||wrapPeerConnectionEvent(s,"icecandidate",e=>{if(e.candidate){const r=SDPUtils.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function shimMaxMessageSize(s,e){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const h=SDPUtils.splitSections(l.sdp);return h.shift(),h.some(d=>{const f=SDPUtils.parseMLine(d);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(l){const h=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const d=parseInt(h[1],10);return d!==d?-1:d},o=function(l){let h=65536;return e.browser==="firefox"&&(e.version<57?l===-1?h=16384:h=2147483637:e.version<60?h=e.version===57?65535:65536:h=2147483637),h},a=function(l,h){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const f=SDPUtils.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?d=parseInt(f[0].substring(19),10):e.browser==="firefox"&&h!==-1&&(d=2147483637),d},c=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const h=n(arguments[0]),d=o(h),f=a(arguments[0],h);let g;d===0&&f===0?g=Number.POSITIVE_INFINITY:d===0||f===0?g=Math.max(d,f):g=Math.min(d,f);const _={};Object.defineProperty(_,"maxMessageSize",{get(){return g}}),this._sctp=_}return c.apply(this,arguments)}}function shimSendThrowTypeError(s){if(!(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype))return;function e(n,o){const a=n.send;n.send=function(){const l=arguments[0],h=l.length||l.size||l.byteLength;if(n.readyState==="open"&&o.sctp&&h>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const r=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const o=r.apply(this,arguments);return e(o,this),o},wrapPeerConnectionEvent(s,"datachannel",n=>(e(n.channel,n.target),n))}function shimConnectionState(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const e=s.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const a=o.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",o);a.dispatchEvent(c)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function removeExtmapAllowMixed(s,e){if(!s.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=o.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);s.RTCSessionDescription&&o instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:o.type,sdp:a}):o.sdp=a}return r.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const r=s.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const r=s.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(s.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return r.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?r.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>r.apply(this,[c]))})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:s}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=log,n=detectBrowser(s),o={browserDetails:n,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(n.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimGetUserMedia$2(s,n),shimMediaStream(s),shimPeerConnection$1(s,n),shimOnTrack$1(s),shimAddTrackRemoveTrack(s,n),shimGetSendersWithDtmf(s),shimGetStats(s),shimSenderReceiverGetStats(s),fixNegotiationNeeded(s,n),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimConnectionState(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,n);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimGetUserMedia$1(s,n),shimPeerConnection(s,n),shimOnTrack(s),shimRemoveStream(s),shimSenderGetStats(s),shimReceiverGetStats(s),shimRTCDataChannel(s),shimAddTransceiver(s),shimGetParameters(s),shimCreateOffer(s),shimCreateAnswer(s),shimRTCIceCandidate(s),shimConnectionState(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s);break;case"safari":if(!safariShim||!e.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimRTCIceServerUrls(s),shimCreateOfferLegacy(s),shimCallbacksAPI(s),shimLocalStreamsAPI(s),shimRemoteStreamsAPI(s),shimTrackEventTransceiver(s),shimGetUserMedia(s),shimAudioContext(s),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,n);break;default:r("Unsupported browser!");break}return o}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(s,e,r,n){Object.defineProperty(s,e,{get:r,set:n,enumerable:!0,configurable:!0})}class $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],n=e.byteLength,o=Math.ceil(n/this.chunkedMTU);let a=0,c=0;for(;c<n;){const l=Math.min(n,c+this.chunkedMTU),h=e.slice(c,l),d={__peerData:this._dataCount,n:a,data:h,total:o};r.push(d),c=l,a++}return this._dataCount++,r}}}function $fcbcc7538a6776d5$export$52c89ebcdc4f53f2(s){let e=0;for(const o of s)e+=o.byteLength;const r=new Uint8Array(e);let n=0;for(const o of s)r.set(o,n),n+=o.byteLength;return r}const $fb63e766cfafaab9$var$webRTCAdapter=adapter.default||adapter,$fb63e766cfafaab9$export$25be9502477c137d=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const s=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(s)?s==="chrome"?e>=this.minChromeVersion:s==="firefox"?e>=this.minFirefoxVersion:s==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.browser}getVersion(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0}isUnifiedPlanSupported(){const s=this.getBrowser(),e=$fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0;if(s==="chrome"&&e<this.minChromeVersion)return!1;if(s==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),n=!0}catch{}finally{r&&r.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$9a84a32bf0bf36bb$export$f35f128fd59ea256=s=>!s||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(s),$0e5fd1585784c252$export$4e61f672936bec77=()=>Math.random().toString(36).slice(2),$4f4134156c446392$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $4f4134156c446392$export$f8f26dd395d7e1bd extends $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{noop(){}blobToArrayBuffer(e,r){const n=new FileReader;return n.onload=function(o){o.target&&r(o.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=$4f4134156c446392$var$DEFAULT_CONFIG,this.browser=$fb63e766cfafaab9$export$25be9502477c137d.getBrowser(),this.browserVersion=$fb63e766cfafaab9$export$25be9502477c137d.getVersion(),this.pack=$0cfd7828ad59115f$export$2a703dbb0cb35339,this.unpack=$0cfd7828ad59115f$export$417857010dc9287f,this.supports=function(){const r={browser:$fb63e766cfafaab9$export$25be9502477c137d.isBrowserSupported(),webRTC:$fb63e766cfafaab9$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let n;try{n=new RTCPeerConnection($4f4134156c446392$var$DEFAULT_CONFIG),r.audioVideo=!0;let o;try{o=n.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!o.ordered;try{o.binaryType="blob",r.binaryBlob=!$fb63e766cfafaab9$export$25be9502477c137d.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{n&&n.close()}return r}(),this.validateId=$9a84a32bf0bf36bb$export$f35f128fd59ea256,this.randomToken=$0e5fd1585784c252$export$4e61f672936bec77}}const $4f4134156c446392$export$7debb50ef11d5e0b=new $4f4134156c446392$export$f8f26dd395d7e1bd,$257947e92926277a$var$LOG_PREFIX="PeerJS: ";var $257947e92926277a$export$243e62d78d3b544d;(function(s){s[s.Disabled=0]="Disabled",s[s.Errors=1]="Errors",s[s.Warnings=2]="Warnings",s[s.All=3]="All"})($257947e92926277a$export$243e62d78d3b544d||($257947e92926277a$export$243e62d78d3b544d={}));class $257947e92926277a$var$Logger{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.All&&this._print($257947e92926277a$export$243e62d78d3b544d.All,...e)}warn(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.Warnings&&this._print($257947e92926277a$export$243e62d78d3b544d.Warnings,...e)}error(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.Errors&&this._print($257947e92926277a$export$243e62d78d3b544d.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...r){const n=[$257947e92926277a$var$LOG_PREFIX,...r];for(const o in n)n[o]instanceof Error&&(n[o]="("+n[o].name+") "+n[o].message);e>=$257947e92926277a$export$243e62d78d3b544d.All?console.log(...n):e>=$257947e92926277a$export$243e62d78d3b544d.Warnings?console.warn("WARNING",...n):e>=$257947e92926277a$export$243e62d78d3b544d.Errors&&console.error("ERROR",...n)}constructor(){this._logLevel=$257947e92926277a$export$243e62d78d3b544d.Disabled}}var $257947e92926277a$export$2e2bcd8739ae039=new $257947e92926277a$var$Logger,$c4dcfd1d1ea86647$exports={},$c4dcfd1d1ea86647$var$has=Object.prototype.hasOwnProperty,$c4dcfd1d1ea86647$var$prefix="~";function $c4dcfd1d1ea86647$var$Events(){}Object.create&&($c4dcfd1d1ea86647$var$Events.prototype=Object.create(null),new $c4dcfd1d1ea86647$var$Events().__proto__||($c4dcfd1d1ea86647$var$prefix=!1));function $c4dcfd1d1ea86647$var$EE(s,e,r){this.fn=s,this.context=e,this.once=r||!1}function $c4dcfd1d1ea86647$var$addListener(s,e,r,n,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new $c4dcfd1d1ea86647$var$EE(r,n||s,o),c=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;return s._events[c]?s._events[c].fn?s._events[c]=[s._events[c],a]:s._events[c].push(a):(s._events[c]=a,s._eventsCount++),s}function $c4dcfd1d1ea86647$var$clearEvent(s,e){--s._eventsCount===0?s._events=new $c4dcfd1d1ea86647$var$Events:delete s._events[e]}function $c4dcfd1d1ea86647$var$EventEmitter(){this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0}$c4dcfd1d1ea86647$var$EventEmitter.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)$c4dcfd1d1ea86647$var$has.call(r,n)&&e.push($c4dcfd1d1ea86647$var$prefix?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listeners=function(e){var r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,c=new Array(a);o<a;o++)c[o]=n[o].fn;return c};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listenerCount=function(e){var r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,n=this._events[r];return n?n.fn?1:n.length:0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.emit=function(e,r,n,o,a,c){var l=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[l])return!1;var h=this._events[l],d=arguments.length,f,g;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,r),!0;case 3:return h.fn.call(h.context,r,n),!0;case 4:return h.fn.call(h.context,r,n,o),!0;case 5:return h.fn.call(h.context,r,n,o,a),!0;case 6:return h.fn.call(h.context,r,n,o,a,c),!0}for(g=1,f=new Array(d-1);g<d;g++)f[g-1]=arguments[g];h.fn.apply(h.context,f)}else{var _=h.length,E;for(g=0;g<_;g++)switch(h[g].once&&this.removeListener(e,h[g].fn,void 0,!0),d){case 1:h[g].fn.call(h[g].context);break;case 2:h[g].fn.call(h[g].context,r);break;case 3:h[g].fn.call(h[g].context,r,n);break;case 4:h[g].fn.call(h[g].context,r,n,o);break;default:if(!f)for(E=1,f=new Array(d-1);E<d;E++)f[E-1]=arguments[E];h[g].fn.apply(h[g].context,f)}}return!0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.on=function(e,r,n){return $c4dcfd1d1ea86647$var$addListener(this,e,r,n,!1)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.once=function(e,r,n){return $c4dcfd1d1ea86647$var$addListener(this,e,r,n,!0)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener=function(e,r,n,o){var a=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[a])return this;if(!r)return $c4dcfd1d1ea86647$var$clearEvent(this,a),this;var c=this._events[a];if(c.fn)c.fn===r&&(!o||c.once)&&(!n||c.context===n)&&$c4dcfd1d1ea86647$var$clearEvent(this,a);else{for(var l=0,h=[],d=c.length;l<d;l++)(c[l].fn!==r||o&&!c[l].once||n&&c[l].context!==n)&&h.push(c[l]);h.length?this._events[a]=h.length===1?h[0]:h:$c4dcfd1d1ea86647$var$clearEvent(this,a)}return this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeAllListeners=function(e){var r;return e?(r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,this._events[r]&&$c4dcfd1d1ea86647$var$clearEvent(this,r)):(this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0),this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.off=$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener;$c4dcfd1d1ea86647$var$EventEmitter.prototype.addListener=$c4dcfd1d1ea86647$var$EventEmitter.prototype.on;$c4dcfd1d1ea86647$var$EventEmitter.prefixed=$c4dcfd1d1ea86647$var$prefix;$c4dcfd1d1ea86647$var$EventEmitter.EventEmitter=$c4dcfd1d1ea86647$var$EventEmitter;$c4dcfd1d1ea86647$exports=$c4dcfd1d1ea86647$var$EventEmitter;var $78455e22dea96b8c$exports={};$parcel$export($78455e22dea96b8c$exports,"ConnectionType",()=>$78455e22dea96b8c$export$3157d57b4135e3bc);$parcel$export($78455e22dea96b8c$exports,"PeerErrorType",()=>$78455e22dea96b8c$export$9547aaa2e39030ff);$parcel$export($78455e22dea96b8c$exports,"BaseConnectionErrorType",()=>$78455e22dea96b8c$export$7974935686149686);$parcel$export($78455e22dea96b8c$exports,"DataConnectionErrorType",()=>$78455e22dea96b8c$export$49ae800c114df41d);$parcel$export($78455e22dea96b8c$exports,"SerializationType",()=>$78455e22dea96b8c$export$89f507cf986a947);$parcel$export($78455e22dea96b8c$exports,"SocketEventType",()=>$78455e22dea96b8c$export$3b5c4a4b6354f023);$parcel$export($78455e22dea96b8c$exports,"ServerMessageType",()=>$78455e22dea96b8c$export$adb4a1754da6f10d);var $78455e22dea96b8c$export$3157d57b4135e3bc;(function(s){s.Data="data",s.Media="media"})($78455e22dea96b8c$export$3157d57b4135e3bc||($78455e22dea96b8c$export$3157d57b4135e3bc={}));var $78455e22dea96b8c$export$9547aaa2e39030ff;(function(s){s.BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc"})($78455e22dea96b8c$export$9547aaa2e39030ff||($78455e22dea96b8c$export$9547aaa2e39030ff={}));var $78455e22dea96b8c$export$7974935686149686;(function(s){s.NegotiationFailed="negotiation-failed",s.ConnectionClosed="connection-closed"})($78455e22dea96b8c$export$7974935686149686||($78455e22dea96b8c$export$7974935686149686={}));var $78455e22dea96b8c$export$49ae800c114df41d;(function(s){s.NotOpenYet="not-open-yet",s.MessageToBig="message-too-big"})($78455e22dea96b8c$export$49ae800c114df41d||($78455e22dea96b8c$export$49ae800c114df41d={}));var $78455e22dea96b8c$export$89f507cf986a947;(function(s){s.Binary="binary",s.BinaryUTF8="binary-utf8",s.JSON="json",s.None="raw"})($78455e22dea96b8c$export$89f507cf986a947||($78455e22dea96b8c$export$89f507cf986a947={}));var $78455e22dea96b8c$export$3b5c4a4b6354f023;(function(s){s.Message="message",s.Disconnected="disconnected",s.Error="error",s.Close="close"})($78455e22dea96b8c$export$3b5c4a4b6354f023||($78455e22dea96b8c$export$3b5c4a4b6354f023={}));var $78455e22dea96b8c$export$adb4a1754da6f10d;(function(s){s.Heartbeat="HEARTBEAT",s.Candidate="CANDIDATE",s.Offer="OFFER",s.Answer="ANSWER",s.Open="OPEN",s.Error="ERROR",s.IdTaken="ID-TAKEN",s.InvalidKey="INVALID-KEY",s.Leave="LEAVE",s.Expire="EXPIRE"})($78455e22dea96b8c$export$adb4a1754da6f10d||($78455e22dea96b8c$export$adb4a1754da6f10d={}));var $f5f881ec4575f1fc$exports={};$f5f881ec4575f1fc$exports=JSON.parse('{"name":"peerjs","version":"1.5.1","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"^1.5.3","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.0.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class $8f5bfa60836d261d$export$4798917dbf149b79 extends $c4dcfd1d1ea86647$exports.EventEmitter{constructor(e,r,n,o,a,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const l=e?"wss://":"ws://";this._baseUrl=l+r+":"+n+o+"peerjs?key="+a}start(e,r){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+$f5f881ec4575f1fc$exports.version),this._disconnected=!1,this._socket.onmessage=o=>{let a;try{a=JSON.parse(o.data),$257947e92926277a$export$2e2bcd8739ae039.log("Server message received:",a)}catch{$257947e92926277a$export$2e2bcd8739ae039.log("Invalid server message",o.data);return}this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,a)},this._socket.onclose=o=>{this._disconnected||($257947e92926277a$export$2e2bcd8739ae039.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),$257947e92926277a$export$2e2bcd8739ae039.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){$257947e92926277a$export$2e2bcd8739ae039.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const n=this.connection,o={ordered:!!e.reliable},a=r.createDataChannel(n.label,o);n._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){$257947e92926277a$export$2e2bcd8739ae039.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,n=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||($257947e92926277a$export$2e2bcd8739ae039.log(`Received ICE candidates for ${r}:`,c.candidate),a.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Candidate,payload:{candidate:c.candidate,type:o,connectionId:n},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for data channel"),e.ondatachannel=c=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received data channel");const l=c.channel;a.getConnection(r,n)._initializeDataChannel(l)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for remote stream"),e.ontrack=c=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received remote stream");const l=c.streams[0],h=a.getConnection(r,n);if(h.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const d=h;this._addStreamToMediaConnection(l,d)}}}cleanup(){$257947e92926277a$export$2e2bcd8739ae039.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const r=e.signalingState!=="closed";let n=!1;const o=this.connection.dataChannel;o&&(n=!!o.readyState&&o.readyState!=="closed"),(r||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);$257947e92926277a$export$2e2bcd8739ae039.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",n,`for:${this.connection.peer}`);let o={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const a=this.connection;o={...o,label:a.label,reliable:a.reliable,serialization:a.serialization}}r.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,o),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",o))}}catch(n){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,n),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createAnswer();$257947e92926277a$export$2e2bcd8739ae039.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",n,`for:${this.connection.peer}`),r.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,o),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",o)}}catch(n){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,n),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to create answer, ",n)}}async handleSDP(e,r){r=new RTCSessionDescription(r);const n=this.connection.peerConnection,o=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Setting remote description",r);const a=this;try{await n.setRemoteDescription(r),$257947e92926277a$export$2e2bcd8739ae039.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await a._makeAnswer()}catch(c){o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,c),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){$257947e92926277a$export$2e2bcd8739ae039.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),$257947e92926277a$export$2e2bcd8739ae039.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,r),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(e,r){if($257947e92926277a$export$2e2bcd8739ae039.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return $257947e92926277a$export$2e2bcd8739ae039.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{r.addTrack(n,e)})}_addStreamToMediaConnection(e,r){$257947e92926277a$export$2e2bcd8739ae039.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class $23779d1881157a18$export$6a678e589c8a4542 extends $c4dcfd1d1ea86647$exports.EventEmitter{emitError(e,r){$257947e92926277a$export$2e2bcd8739ae039.error("Error:",r),this.emit("error",new $23779d1881157a18$export$98871882f492de82(`${e}`,r))}}class $23779d1881157a18$export$98871882f492de82 extends Error{constructor(e,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=e}}class $5045192fc6d387ba$export$23a2a68283c24d80 extends $23779d1881157a18$export$6a678e589c8a4542{get open(){return this._open}constructor(e,r,n){super(),this.peer=e,this.provider=r,this.options=n,this._open=!1,this.metadata=n.metadata}}class $5c1d08c7c57da9a3$export$4a84e95a2324ac29 extends $5045192fc6d387ba$export$23a2a68283c24d80{static#e=(()=>{this.ID_PREFIX="mc_"})();get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,n){super(e,r,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||$5c1d08c7c57da9a3$export$4a84e95a2324ac29.ID_PREFIX+$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){$257947e92926277a$export$2e2bcd8739ae039.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,n=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(r,n.sdp),this._open=!0;break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(e,r={}){if(this._localStream){$257947e92926277a$export$2e2bcd8739ae039.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const o of n)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class $abf266641927cd89$export$2c4e825dc9120f87{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:n,port:o,path:a,key:c}=this._options,l=new URL(`${r}://${n}:${o}${a}${c}/${e}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",$f5f881ec4575f1fc$exports.version),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){$257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving ID",e);let r="";throw this._options.path==="/"&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let r="";throw this._options.host===$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw $257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class $6366c4ca161bc297$export$d365f7ad9d7df9c9 extends $5045192fc6d387ba$export$23a2a68283c24d80{static#e=(()=>{this.ID_PREFIX="dc_"})();static#t=(()=>{this.MAX_BUFFERED_AMOUNT=8388608})();get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Data}constructor(e,r,n){super(e,r,n),this.connectionId=this.options.connectionId||$6366c4ca161bc297$export$d365f7ad9d7df9c9.ID_PREFIX+$0e5fd1585784c252$export$4e61f672936bec77(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,r=!1){if(!this.open){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,r)}async handleMessage(e){const r=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:await this._negotiator.handleSDP(e.type,r.sdp);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b extends $6366c4ca161bc297$export$d365f7ad9d7df9c9{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>$6366c4ca161bc297$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return $257947e92926277a$export$2e2bcd8739ae039.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class $9fcfddb3ae148f88$export$f0a5a64d5bb37108 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{close(e){super.close(e),this._chunkedData={}}constructor(e,r,n){super(e,r,n),this.chunker=new $fcbcc7538a6776d5$export$f1c5f4c9cb95390b,this.serialization=$78455e22dea96b8c$export$89f507cf986a947.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=$0cfd7828ad59115f$export$417857010dc9287f(e),n=r.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(e){const r=e.__peerData,n=this._chunkedData[r]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[r]=n,n.total===n.count){delete this._chunkedData[r];const o=$fcbcc7538a6776d5$export$52c89ebcdc4f53f2(n.data);this._handleDataMessage({data:o})}}_send(e,r){if(e instanceof Blob)return e.arrayBuffer().then(o=>{this._send(o,r)});const n=$0cfd7828ad59115f$export$2a703dbb0cb35339(e);if(!r&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const r=this.chunker.chunk(e);$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const n of r)this.send(n,!0)}}class $bbaee3f15f714663$export$6f88fe47d32c9c94 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.None}}class $817f931e3f9096cf$export$48880ac635f47186 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),n=r.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",r)}_send(e,r){const n=this.encoder.encode(this.stringify(e));if(n.byteLength>=$4f4134156c446392$export$7debb50ef11d5e0b.chunkedMTU){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class $416260bce337df90$export$ecd1fc136c422448 extends $23779d1881157a18$export$6a678e589c8a4542{static#e=(()=>{this.DEFAULT_KEY="peerjs"})();get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,n]of this._connections)e[r]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){super(),this._serializers={raw:$bbaee3f15f714663$export$6f88fe47d32c9c94,json:$817f931e3f9096cf$export$48880ac635f47186,binary:$9fcfddb3ae148f88$export$f0a5a64d5bb37108,"binary-utf8":$9fcfddb3ae148f88$export$f0a5a64d5bb37108,default:$9fcfddb3ae148f88$export$f0a5a64d5bb37108},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(e&&e.constructor==Object?r=e:e&&(n=e.toString()),r={debug:0,host:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST,port:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:$416260bce337df90$export$ecd1fc136c422448.DEFAULT_KEY,token:$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),config:$4f4134156c446392$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?this._options.secure=$4f4134156c446392$export$7debb50ef11d5e0b.isSecure():this._options.host==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&$257947e92926277a$export$2e2bcd8739ae039.setLogFunction(this._options.logFunction),$257947e92926277a$export$2e2bcd8739ae039.logLevel=this._options.debug||0,this._api=new $abf266641927cd89$export$2c4e825dc9120f87(r),this._socket=this._createServerConnection(),!$4f4134156c446392$export$7debb50ef11d5e0b.supports.audioVideo&&!$4f4134156c446392$export$7debb50ef11d5e0b.supports.data){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!$4f4134156c446392$export$7debb50ef11d5e0b.validateId(n)){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,o))}_createServerConnection(){const e=new $8f5bfa60836d261d$export$4798917dbf149b79(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,r=>{this._handleMessage(r)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,r=>{this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketError,r)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected,()=>{this.disconnected||(this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Network,"Lost connection to server."),this.disconnect())}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Close,()=>{this.disconnected||this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,n=e.payload,o=e.src;switch(r){case $78455e22dea96b8c$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Error:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,n.msg);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.IdTaken:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.UnavailableID,`ID "${this.id}" is taken`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.InvalidKey:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Leave:$257947e92926277a$export$2e2bcd8739ae039.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Expire:this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.PeerUnavailable,`Could not connect to peer ${o}`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Offer:{const a=n.connectionId;let c=this.getConnection(o,a);if(c&&(c.close(),$257947e92926277a$export$2e2bcd8739ae039.warn(`Offer received for existing Connection ID:${a}`)),n.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const h=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(o,this,{connectionId:a,_payload:n,metadata:n.metadata});c=h,this._addConnection(o,c),this.emit("call",h)}else if(n.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const h=new this._serializers[n.serialization](o,this,{connectionId:a,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});c=h,this._addConnection(o,c),this.emit("connection",h)}else{$257947e92926277a$export$2e2bcd8739ae039.warn(`Received malformed connection type:${n.type}`);return}const l=this._getMessages(a);for(const h of l)c.handleMessage(h);break}default:{if(!n){$257947e92926277a$export$2e2bcd8739ae039.warn(`You received a malformed message from ${o} of type ${r}`);return}const a=n.connectionId,c=this.getConnection(o,a);c&&c.peerConnection?c.handleMessage(e):a?this._storeMessage(a,e):$257947e92926277a$export$2e2bcd8739ae039.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,n),n}call(e,r,n={}){if(this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){$257947e92926277a$export$2e2bcd8739ae039.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(e,this,{...n,_stream:r});return this._addConnection(e,o),o}_addConnection(e,r){$257947e92926277a$export$2e2bcd8739ae039.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const n=this._connections.get(e);if(!n)return null;for(const o of n)if(o.connectionId===r)return o;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){$257947e92926277a$export$2e2bcd8739ae039.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||($257947e92926277a$export$2e2bcd8739ae039.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const n of r)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;$257947e92926277a$export$2e2bcd8739ae039.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)$257947e92926277a$export$2e2bcd8739ae039.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$257947e92926277a$export$2e2bcd8739ae039.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=r=>{}){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,r))}}class PeerJSTransport extends Emittery{peer;conns=new Map;constructor(e){super();let r={secure:!0,host:"mpyc-demo--headscale-ams3-c99f82e5.demo.mpyc.tech",port:443,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"}};try{e?this.peer=new $416260bce337df90$export$ecd1fc136c422448(e,r):this.peer=new $416260bce337df90$export$ecd1fc136c422448(r)}catch(n){console.warn(n)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}id=()=>this.peer.id;addPeerEventHandlers(e){e.on("open",async r=>{this.emit("ready",r)}),e.on("error",async r=>{this.emit("error",r)}),e.on("close",async()=>{this.emit("closed")}),e.on("connection",async r=>{this.addConnEventHandlers(r)})}addConnEventHandlers(e){console.log(`transport:conn ${e.peer} is trying to connect`),e.on("open",async()=>{this.conns.set(e.peer,e),this.sendPeers(e),this.emit("conn:ready",e.peer)}),e.on("error",async r=>{this.emit("conn:error",{peerID:e.peer,err:r})}),e.on("close",async()=>{this.conns.delete(e.peer),this.emit("conn:disconnected",e.peer)}),e.on("data",async r=>{let{type:n,payload:o}=r;switch(n){case"peers":this.processNewPeers(o);break;default:this.emit("conn:data",{peerID:e.peer,data:r});break}})}async send(e,r,n){this.conns.get(e).send({type:r,payload:n})}destroy(){this.peer.destroy()}processNewPeers=async e=>{e.forEach(r=>{!this.conns.get(r)&&r!=this.peer.id&&this.connect(r)})};async broadcast(e,r){this.conns.forEach(n=>{this.send(n.peer,`user:${e}`,r)})}async sendPeers(e){e.send({type:"peers",payload:this.getPeers()})}getPeers(e=!1){let r=Array.from(this.conns,([n,o])=>o.peer);return e&&r.push(this.peer.id),r.sort()}async connect(e){let r=this.peer.connect(e,{reliable:!0});this.addConnEventHandlers(r)}}var top$1="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top$1,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(s,e){return s.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(s,e){return s.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write,afterWrite];function getNodeName(s){return s?(s.nodeName||"").toLowerCase():null}function getWindow(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function isElement$1(s){var e=getWindow(s).Element;return s instanceof e||s instanceof Element}function isHTMLElement(s){var e=getWindow(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function isShadowRoot(s){if(typeof ShadowRoot>"u")return!1;var e=getWindow(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function applyStyles(s){var e=s.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},o=e.attributes[r]||{},a=e.elements[r];!isHTMLElement(a)||!getNodeName(a)||(Object.assign(a.style,n),Object.keys(o).forEach(function(c){var l=o[c];l===!1?a.removeAttribute(c):a.setAttribute(c,l===!0?"":l)}))})}function effect$2(s){var e=s.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var o=e.elements[n],a=e.attributes[n]||{},c=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=c.reduce(function(h,d){return h[d]="",h},{});!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,l),Object.keys(a).forEach(function(h){o.removeAttribute(h)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(s){return s.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect$1(s,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=s.getBoundingClientRect(),o=1,a=1;e&&isHTMLElement(s)&&(o=s.offsetWidth>0&&round(n.width)/s.offsetWidth||1,a=s.offsetHeight>0&&round(n.height)/s.offsetHeight||1);var c=isElement$1(s)?getWindow(s):window,l=c.visualViewport,h=!isLayoutViewport()&&r,d=(n.left+(h&&l?l.offsetLeft:0))/o,f=(n.top+(h&&l?l.offsetTop:0))/a,g=n.width/o,_=n.height/a;return{width:g,height:_,top:f,right:d+g,bottom:f+_,left:d,x:d,y:f}}function getLayoutRect(s){var e=getBoundingClientRect$1(s),r=s.offsetWidth,n=s.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:s.offsetLeft,y:s.offsetTop,width:r,height:n}}function contains$1(s,e){var r=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(r&&isShadowRoot(r)){var n=e;do{if(n&&s.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(s){return getWindow(s).getComputedStyle(s)}function isTableElement(s){return["table","td","th"].indexOf(getNodeName(s))>=0}function getDocumentElement(s){return((isElement$1(s)?s.ownerDocument:s.document)||window.document).documentElement}function getParentNode(s){return getNodeName(s)==="html"?s:s.assignedSlot||s.parentNode||(isShadowRoot(s)?s.host:null)||getDocumentElement(s)}function getTrueOffsetParent(s){return!isHTMLElement(s)||getComputedStyle$1(s).position==="fixed"?null:s.offsetParent}function getContainingBlock(s){var e=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(s)){var n=getComputedStyle$1(s);if(n.position==="fixed")return null}var o=getParentNode(s);for(isShadowRoot(o)&&(o=o.host);isHTMLElement(o)&&["html","body"].indexOf(getNodeName(o))<0;){var a=getComputedStyle$1(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function getOffsetParent(s){for(var e=getWindow(s),r=getTrueOffsetParent(s);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?e:r||getContainingBlock(s)||e}function getMainAxisFromPlacement(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function within(s,e,r){return max(s,min(e,r))}function withinMaxClamp(s,e,r){var n=within(s,e,r);return n>r?r:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(s){return Object.assign({},getFreshSideObject(),s)}function expandToHashMap(s,e){return e.reduce(function(r,n){return r[n]=s,r},{})}var toPaddingObject=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(s){var e,r=s.state,n=s.name,o=s.options,a=r.elements.arrow,c=r.modifiersData.popperOffsets,l=getBasePlacement(r.placement),h=getMainAxisFromPlacement(l),d=[left,right].indexOf(l)>=0,f=d?"height":"width";if(!(!a||!c)){var g=toPaddingObject(o.padding,r),_=getLayoutRect(a),E=h==="y"?top$1:left,A=h==="y"?bottom:right,w=r.rects.reference[f]+r.rects.reference[h]-c[h]-r.rects.popper[f],m=c[h]-r.rects.reference[h],b=getOffsetParent(a),y=b?h==="y"?b.clientHeight||0:b.clientWidth||0:0,x=w/2-m/2,D=g[E],R=y-_[f]-g[A],M=y/2-_[f]/2+x,L=within(D,M,R),k=h;r.modifiersData[n]=(e={},e[k]=L,e.centerOffset=L-M,e)}}function effect$1(s){var e=s.state,r=s.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||contains$1(e.elements.popper,o)&&(e.elements.arrow=o))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(s){return s.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(s,e){var r=s.x,n=s.y,o=e.devicePixelRatio||1;return{x:round(r*o)/o||0,y:round(n*o)/o||0}}function mapToStyles(s){var e,r=s.popper,n=s.popperRect,o=s.placement,a=s.variation,c=s.offsets,l=s.position,h=s.gpuAcceleration,d=s.adaptive,f=s.roundOffsets,g=s.isFixed,_=c.x,E=_===void 0?0:_,A=c.y,w=A===void 0?0:A,m=typeof f=="function"?f({x:E,y:w}):{x:E,y:w};E=m.x,w=m.y;var b=c.hasOwnProperty("x"),y=c.hasOwnProperty("y"),x=left,D=top$1,R=window;if(d){var M=getOffsetParent(r),L="clientHeight",k="clientWidth";if(M===getWindow(r)&&(M=getDocumentElement(r),getComputedStyle$1(M).position!=="static"&&l==="absolute"&&(L="scrollHeight",k="scrollWidth")),M=M,o===top$1||(o===left||o===right)&&a===end){D=bottom;var I=g&&M===R&&R.visualViewport?R.visualViewport.height:M[L];w-=I-n.height,w*=h?1:-1}if(o===left||(o===top$1||o===bottom)&&a===end){x=right;var V=g&&M===R&&R.visualViewport?R.visualViewport.width:M[k];E-=V-n.width,E*=h?1:-1}}var N=Object.assign({position:l},d&&unsetSides),B=f===!0?roundOffsetsByDPR({x:E,y:w},getWindow(r)):{x:E,y:w};if(E=B.x,w=B.y,h){var H;return Object.assign({},N,(H={},H[D]=y?"0":"",H[x]=b?"0":"",H.transform=(R.devicePixelRatio||1)<=1?"translate("+E+"px, "+w+"px)":"translate3d("+E+"px, "+w+"px, 0)",H))}return Object.assign({},N,(e={},e[D]=y?w+"px":"",e[x]=b?E+"px":"",e.transform="",e))}function computeStyles(s){var e=s.state,r=s.options,n=r.gpuAcceleration,o=n===void 0?!0:n,a=r.adaptive,c=a===void 0?!0:a,l=r.roundOffsets,h=l===void 0?!0:l,d={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(s){var e=s.state,r=s.instance,n=s.options,o=n.scroll,a=o===void 0?!0:o,c=n.resize,l=c===void 0?!0:c,h=getWindow(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(f){f.addEventListener("scroll",r.update,passive)}),l&&h.addEventListener("resize",r.update,passive),function(){a&&d.forEach(function(f){f.removeEventListener("scroll",r.update,passive)}),l&&h.removeEventListener("resize",r.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$2={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(s){return s.replace(/left|right|bottom|top/g,function(e){return hash$2[e]})}var hash$1={start:"end",end:"start"};function getOppositeVariationPlacement(s){return s.replace(/start|end/g,function(e){return hash$1[e]})}function getWindowScroll(s){var e=getWindow(s),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function getWindowScrollBarX(s){return getBoundingClientRect$1(getDocumentElement(s)).left+getWindowScroll(s).scrollLeft}function getViewportRect(s,e){var r=getWindow(s),n=getDocumentElement(s),o=r.visualViewport,a=n.clientWidth,c=n.clientHeight,l=0,h=0;if(o){a=o.width,c=o.height;var d=isLayoutViewport();(d||!d&&e==="fixed")&&(l=o.offsetLeft,h=o.offsetTop)}return{width:a,height:c,x:l+getWindowScrollBarX(s),y:h}}function getDocumentRect(s){var e,r=getDocumentElement(s),n=getWindowScroll(s),o=(e=s.ownerDocument)==null?void 0:e.body,a=max(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=max(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-n.scrollLeft+getWindowScrollBarX(s),h=-n.scrollTop;return getComputedStyle$1(o||r).direction==="rtl"&&(l+=max(r.clientWidth,o?o.clientWidth:0)-a),{width:a,height:c,x:l,y:h}}function isScrollParent(s){var e=getComputedStyle$1(s),r=e.overflow,n=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function getScrollParent(s){return["html","body","#document"].indexOf(getNodeName(s))>=0?s.ownerDocument.body:isHTMLElement(s)&&isScrollParent(s)?s:getScrollParent(getParentNode(s))}function listScrollParents(s,e){var r;e===void 0&&(e=[]);var n=getScrollParent(s),o=n===((r=s.ownerDocument)==null?void 0:r.body),a=getWindow(n),c=o?[a].concat(a.visualViewport||[],isScrollParent(n)?n:[]):n,l=e.concat(c);return o?l:l.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function getInnerBoundingClientRect(s,e){var r=getBoundingClientRect$1(s,!1,e==="fixed");return r.top=r.top+s.clientTop,r.left=r.left+s.clientLeft,r.bottom=r.top+s.clientHeight,r.right=r.left+s.clientWidth,r.width=s.clientWidth,r.height=s.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(s,e,r){return e===viewport?rectToClientRect(getViewportRect(s,r)):isElement$1(e)?getInnerBoundingClientRect(e,r):rectToClientRect(getDocumentRect(getDocumentElement(s)))}function getClippingParents(s){var e=listScrollParents(getParentNode(s)),r=["absolute","fixed"].indexOf(getComputedStyle$1(s).position)>=0,n=r&&isHTMLElement(s)?getOffsetParent(s):s;return isElement$1(n)?e.filter(function(o){return isElement$1(o)&&contains$1(o,n)&&getNodeName(o)!=="body"}):[]}function getClippingRect(s,e,r,n){var o=e==="clippingParents"?getClippingParents(s):[].concat(e),a=[].concat(o,[r]),c=a[0],l=a.reduce(function(h,d){var f=getClientRectFromMixedType(s,d,n);return h.top=max(f.top,h.top),h.right=min(f.right,h.right),h.bottom=min(f.bottom,h.bottom),h.left=max(f.left,h.left),h},getClientRectFromMixedType(s,c,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function computeOffsets(s){var e=s.reference,r=s.element,n=s.placement,o=n?getBasePlacement(n):null,a=n?getVariation(n):null,c=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,h;switch(o){case top$1:h={x:c,y:e.y-r.height};break;case bottom:h={x:c,y:e.y+e.height};break;case right:h={x:e.x+e.width,y:l};break;case left:h={x:e.x-r.width,y:l};break;default:h={x:e.x,y:e.y}}var d=o?getMainAxisFromPlacement(o):null;if(d!=null){var f=d==="y"?"height":"width";switch(a){case start:h[d]=h[d]-(e[f]/2-r[f]/2);break;case end:h[d]=h[d]+(e[f]/2-r[f]/2);break}}return h}function detectOverflow(s,e){e===void 0&&(e={});var r=e,n=r.placement,o=n===void 0?s.placement:n,a=r.strategy,c=a===void 0?s.strategy:a,l=r.boundary,h=l===void 0?clippingParents:l,d=r.rootBoundary,f=d===void 0?viewport:d,g=r.elementContext,_=g===void 0?popper:g,E=r.altBoundary,A=E===void 0?!1:E,w=r.padding,m=w===void 0?0:w,b=mergePaddingObject(typeof m!="number"?m:expandToHashMap(m,basePlacements)),y=_===popper?reference:popper,x=s.rects.popper,D=s.elements[A?y:_],R=getClippingRect(isElement$1(D)?D:D.contextElement||getDocumentElement(s.elements.popper),h,f,c),M=getBoundingClientRect$1(s.elements.reference),L=computeOffsets({reference:M,element:x,strategy:"absolute",placement:o}),k=rectToClientRect(Object.assign({},x,L)),I=_===popper?k:M,V={top:R.top-I.top+b.top,bottom:I.bottom-R.bottom+b.bottom,left:R.left-I.left+b.left,right:I.right-R.right+b.right},N=s.modifiersData.offset;if(_===popper&&N){var B=N[o];Object.keys(V).forEach(function(H){var z=[right,bottom].indexOf(H)>=0?1:-1,W=[top$1,bottom].indexOf(H)>=0?"y":"x";V[H]+=B[W]*z})}return V}function computeAutoPlacement(s,e){e===void 0&&(e={});var r=e,n=r.placement,o=r.boundary,a=r.rootBoundary,c=r.padding,l=r.flipVariations,h=r.allowedAutoPlacements,d=h===void 0?placements:h,f=getVariation(n),g=f?l?variationPlacements:variationPlacements.filter(function(A){return getVariation(A)===f}):basePlacements,_=g.filter(function(A){return d.indexOf(A)>=0});_.length===0&&(_=g);var E=_.reduce(function(A,w){return A[w]=detectOverflow(s,{placement:w,boundary:o,rootBoundary:a,padding:c})[getBasePlacement(w)],A},{});return Object.keys(E).sort(function(A,w){return E[A]-E[w]})}function getExpandedFallbackPlacements(s){if(getBasePlacement(s)===auto)return[];var e=getOppositePlacement(s);return[getOppositeVariationPlacement(s),e,getOppositeVariationPlacement(e)]}function flip(s){var e=s.state,r=s.options,n=s.name;if(!e.modifiersData[n]._skip){for(var o=r.mainAxis,a=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!0:c,h=r.fallbackPlacements,d=r.padding,f=r.boundary,g=r.rootBoundary,_=r.altBoundary,E=r.flipVariations,A=E===void 0?!0:E,w=r.allowedAutoPlacements,m=e.options.placement,b=getBasePlacement(m),y=b===m,x=h||(y||!A?[getOppositePlacement(m)]:getExpandedFallbackPlacements(m)),D=[m].concat(x).reduce(function(be,xe){return be.concat(getBasePlacement(xe)===auto?computeAutoPlacement(e,{placement:xe,boundary:f,rootBoundary:g,padding:d,flipVariations:A,allowedAutoPlacements:w}):xe)},[]),R=e.rects.reference,M=e.rects.popper,L=new Map,k=!0,I=D[0],V=0;V<D.length;V++){var N=D[V],B=getBasePlacement(N),H=getVariation(N)===start,z=[top$1,bottom].indexOf(B)>=0,W=z?"width":"height",Q=detectOverflow(e,{placement:N,boundary:f,rootBoundary:g,altBoundary:_,padding:d}),X=z?H?right:left:H?bottom:top$1;R[W]>M[W]&&(X=getOppositePlacement(X));var G=getOppositePlacement(X),q=[];if(a&&q.push(Q[B]<=0),l&&q.push(Q[X]<=0,Q[G]<=0),q.every(function(be){return be})){I=N,k=!1;break}L.set(N,q)}if(k)for(var Y=A?3:1,K=function(xe){var Ee=D.find(function(J){var ne=L.get(J);if(ne)return ne.slice(0,xe).every(function(de){return de})});if(Ee)return I=Ee,"break"},se=Y;se>0;se--){var Se=K(se);if(Se==="break")break}e.placement!==I&&(e.modifiersData[n]._skip=!0,e.placement=I,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(s,e,r){return r===void 0&&(r={x:0,y:0}),{top:s.top-e.height-r.y,right:s.right-e.width+r.x,bottom:s.bottom-e.height+r.y,left:s.left-e.width-r.x}}function isAnySideFullyClipped(s){return[top$1,right,bottom,left].some(function(e){return s[e]>=0})}function hide(s){var e=s.state,r=s.name,n=e.rects.reference,o=e.rects.popper,a=e.modifiersData.preventOverflow,c=detectOverflow(e,{elementContext:"reference"}),l=detectOverflow(e,{altBoundary:!0}),h=getSideOffsets(c,n),d=getSideOffsets(l,o,a),f=isAnySideFullyClipped(h),g=isAnySideFullyClipped(d);e.modifiersData[r]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(s,e,r){var n=getBasePlacement(s),o=[left,top$1].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:s})):r,c=a[0],l=a[1];return c=c||0,l=(l||0)*o,[left,right].indexOf(n)>=0?{x:l,y:c}:{x:c,y:l}}function offset(s){var e=s.state,r=s.options,n=s.name,o=r.offset,a=o===void 0?[0,0]:o,c=placements.reduce(function(f,g){return f[g]=distanceAndSkiddingToXY(g,e.rects,a),f},{}),l=c[e.placement],h=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[n]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(s){var e=s.state,r=s.name;e.modifiersData[r]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(s){return s==="x"?"y":"x"}function preventOverflow(s){var e=s.state,r=s.options,n=s.name,o=r.mainAxis,a=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!1:c,h=r.boundary,d=r.rootBoundary,f=r.altBoundary,g=r.padding,_=r.tether,E=_===void 0?!0:_,A=r.tetherOffset,w=A===void 0?0:A,m=detectOverflow(e,{boundary:h,rootBoundary:d,padding:g,altBoundary:f}),b=getBasePlacement(e.placement),y=getVariation(e.placement),x=!y,D=getMainAxisFromPlacement(b),R=getAltAxis(D),M=e.modifiersData.popperOffsets,L=e.rects.reference,k=e.rects.popper,I=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,V=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(M){if(a){var H,z=D==="y"?top$1:left,W=D==="y"?bottom:right,Q=D==="y"?"height":"width",X=M[D],G=X+m[z],q=X-m[W],Y=E?-k[Q]/2:0,K=y===start?L[Q]:k[Q],se=y===start?-k[Q]:-L[Q],Se=e.elements.arrow,be=E&&Se?getLayoutRect(Se):{width:0,height:0},xe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Ee=xe[z],J=xe[W],ne=within(0,L[Q],be[Q]),de=x?L[Q]/2-Y-ne-Ee-V.mainAxis:K-ne-Ee-V.mainAxis,ue=x?-L[Q]/2+Y+ne+J+V.mainAxis:se+ne+J+V.mainAxis,Fe=e.elements.arrow&&getOffsetParent(e.elements.arrow),Ie=Fe?D==="y"?Fe.clientTop||0:Fe.clientLeft||0:0,ye=(H=N?.[D])!=null?H:0,$e=X+de-ye-Ie,Oe=X+ue-ye,Le=within(E?min(G,$e):G,X,E?max(q,Oe):q);M[D]=Le,B[D]=Le-X}if(l){var He,tt=D==="x"?top$1:left,Ze=D==="x"?bottom:right,pt=M[R],fe=R==="y"?"height":"width",Ne=pt+m[tt],we=pt-m[Ze],ke=[top$1,left].indexOf(b)!==-1,De=(He=N?.[R])!=null?He:0,Pe=ke?Ne:pt-L[fe]-k[fe]-De+V.altAxis,Je=ke?pt+L[fe]+k[fe]-De-V.altAxis:we,Ye=E&&ke?withinMaxClamp(Pe,pt,Je):within(E?Pe:Ne,pt,E?Je:we);M[R]=Ye,B[R]=Ye-pt}e.modifiersData[n]=B}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function getNodeScroll(s){return s===getWindow(s)||!isHTMLElement(s)?getWindowScroll(s):getHTMLElementScroll(s)}function isElementScaled(s){var e=s.getBoundingClientRect(),r=round(e.width)/s.offsetWidth||1,n=round(e.height)/s.offsetHeight||1;return r!==1||n!==1}function getCompositeRect(s,e,r){r===void 0&&(r=!1);var n=isHTMLElement(e),o=isHTMLElement(e)&&isElementScaled(e),a=getDocumentElement(e),c=getBoundingClientRect$1(s,o,r),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!r)&&((getNodeName(e)!=="body"||isScrollParent(a))&&(l=getNodeScroll(e)),isHTMLElement(e)?(h=getBoundingClientRect$1(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=getWindowScrollBarX(a))),{x:c.left+l.scrollLeft-h.x,y:c.top+l.scrollTop-h.y,width:c.width,height:c.height}}function order(s){var e=new Map,r=new Set,n=[];s.forEach(function(a){e.set(a.name,a)});function o(a){r.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(l){if(!r.has(l)){var h=e.get(l);h&&o(h)}}),n.push(a)}return s.forEach(function(a){r.has(a.name)||o(a)}),n}function orderModifiers(s){var e=order(s);return modifierPhases.reduce(function(r,n){return r.concat(e.filter(function(o){return o.phase===n}))},[])}function debounce$1(s){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(s())})})),e}}function mergeByName(s){var e=s.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function popperGenerator(s){s===void 0&&(s={});var e=s,r=e.defaultModifiers,n=r===void 0?[]:r,o=e.defaultOptions,a=o===void 0?DEFAULT_OPTIONS:o;return function(l,h,d){d===void 0&&(d=a);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,a),modifiersData:{},elements:{reference:l,popper:h},attributes:{},styles:{}},g=[],_=!1,E={state:f,setOptions:function(b){var y=typeof b=="function"?b(f.options):b;w(),f.options=Object.assign({},a,f.options,y),f.scrollParents={reference:isElement$1(l)?listScrollParents(l):l.contextElement?listScrollParents(l.contextElement):[],popper:listScrollParents(h)};var x=orderModifiers(mergeByName([].concat(n,f.options.modifiers)));return f.orderedModifiers=x.filter(function(D){return D.enabled}),A(),E.update()},forceUpdate:function(){if(!_){var b=f.elements,y=b.reference,x=b.popper;if(areValidElements(y,x)){f.rects={reference:getCompositeRect(y,getOffsetParent(x),f.options.strategy==="fixed"),popper:getLayoutRect(x)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(V){return f.modifiersData[V.name]=Object.assign({},V.data)});for(var D=0;D<f.orderedModifiers.length;D++){if(f.reset===!0){f.reset=!1,D=-1;continue}var R=f.orderedModifiers[D],M=R.fn,L=R.options,k=L===void 0?{}:L,I=R.name;typeof M=="function"&&(f=M({state:f,options:k,name:I,instance:E})||f)}}}},update:debounce$1(function(){return new Promise(function(m){E.forceUpdate(),m(f)})}),destroy:function(){w(),_=!0}};if(!areValidElements(l,h))return E;E.setOptions(d).then(function(m){!_&&d.onFirstUpdate&&d.onFirstUpdate(m)});function A(){f.orderedModifiers.forEach(function(m){var b=m.name,y=m.options,x=y===void 0?{}:y,D=m.effect;if(typeof D=="function"){var R=D({state:f,name:b,instance:E,options:x}),M=function(){};g.push(R||M)}})}function w(){g.forEach(function(m){return m()}),g=[]}return E}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,afterMain,afterRead,afterWrite,applyStyles:applyStyles$1,arrow:arrow$1,auto,basePlacements,beforeMain,beforeRead,beforeWrite,bottom,clippingParents,computeStyles:computeStyles$1,createPopper,createPopperBase:createPopper$2,createPopperLite:createPopper$1,detectOverflow,end,eventListeners,flip:flip$1,hide:hide$1,left,main:main$1,modifierPhases,offset:offset$1,placements,popper,popperGenerator,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1,read,reference,right,start,top:top$1,variationPlacements,viewport,write},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const elementMap=new Map,Data={set(s,e,r){elementMap.has(s)||elementMap.set(s,new Map);const n=elementMap.get(s);if(!n.has(e)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(e,r)},get(s,e){return elementMap.has(s)&&elementMap.get(s).get(e)||null},remove(s,e){if(!elementMap.has(s))return;const r=elementMap.get(s);r.delete(e),r.size===0&&elementMap.delete(s)}},MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",parseSelector=s=>(s&&window.CSS&&window.CSS.escape&&(s=s.replace(/#([^\s"#']+)/g,(e,r)=>`#${CSS.escape(r)}`)),s),toType=s=>s==null?`${s}`:Object.prototype.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=s=>{do s+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(s));return s},getTransitionDurationFromElement=s=>{if(!s)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(s);const n=Number.parseFloat(e),o=Number.parseFloat(r);return!n&&!o?0:(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=s=>{s.dispatchEvent(new Event(TRANSITION_END))},isElement=s=>!s||typeof s!="object"?!1:(typeof s.jquery<"u"&&(s=s[0]),typeof s.nodeType<"u"),getElement=s=>isElement(s)?s.jquery?s[0]:s:typeof s=="string"&&s.length>0?document.querySelector(parseSelector(s)):null,isVisible=s=>{if(!isElement(s)||s.getClientRects().length===0)return!1;const e=getComputedStyle(s).getPropertyValue("visibility")==="visible",r=s.closest("details:not([open])");if(!r)return e;if(r!==s){const n=s.closest("summary");if(n&&n.parentNode!==r||n===null)return!1}return e},isDisabled=s=>!s||s.nodeType!==Node.ELEMENT_NODE||s.classList.contains("disabled")?!0:typeof s.disabled<"u"?s.disabled:s.hasAttribute("disabled")&&s.getAttribute("disabled")!=="false",findShadowRoot=s=>{if(!document.documentElement.attachShadow)return null;if(typeof s.getRootNode=="function"){const e=s.getRootNode();return e instanceof ShadowRoot?e:null}return s instanceof ShadowRoot?s:s.parentNode?findShadowRoot(s.parentNode):null},noop=()=>{},reflow=s=>{s.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=s=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of DOMContentLoadedCallbacks)e()}),DOMContentLoadedCallbacks.push(s)):s()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=s=>{onDOMContentLoaded(()=>{const e=getjQuery();if(e){const r=s.NAME,n=e.fn[r];e.fn[r]=s.jQueryInterface,e.fn[r].Constructor=s,e.fn[r].noConflict=()=>(e.fn[r]=n,s.jQueryInterface)}})},execute=(s,e=[],r=s)=>typeof s=="function"?s(...e):r,executeAfterTransition=(s,e,r=!0)=>{if(!r){execute(s);return}const n=5,o=getTransitionDurationFromElement(e)+n;let a=!1;const c=({target:l})=>{l===e&&(a=!0,e.removeEventListener(TRANSITION_END,c),execute(s))};e.addEventListener(TRANSITION_END,c),setTimeout(()=>{a||triggerTransitionEnd(e)},o)},getNextActiveElement=(s,e,r,n)=>{const o=s.length;let a=s.indexOf(e);return a===-1?!r&&n?s[o-1]:s[0]:(a+=r?1:-1,n&&(a=(a+o)%o),s[Math.max(0,Math.min(a,o-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(s,e){return e&&`${e}::${uidEvent++}`||s.uidEvent||uidEvent++}function getElementEvents(s){const e=makeEventUid(s);return s.uidEvent=e,eventRegistry[e]=eventRegistry[e]||{},eventRegistry[e]}function bootstrapHandler(s,e){return function r(n){return hydrateObj(n,{delegateTarget:s}),r.oneOff&&EventHandler.off(s,n.type,e),e.apply(s,[n])}}function bootstrapDelegationHandler(s,e,r){return function n(o){const a=s.querySelectorAll(e);for(let{target:c}=o;c&&c!==this;c=c.parentNode)for(const l of a)if(l===c)return hydrateObj(o,{delegateTarget:c}),n.oneOff&&EventHandler.off(s,o.type,e,r),r.apply(c,[o])}}function findHandler(s,e,r=null){return Object.values(s).find(n=>n.callable===e&&n.delegationSelector===r)}function normalizeParameters(s,e,r){const n=typeof e=="string",o=n?r:e||r;let a=getTypeEvent(s);return nativeEvents.has(a)||(a=s),[n,o,a]}function addHandler(s,e,r,n,o){if(typeof e!="string"||!s)return;let[a,c,l]=normalizeParameters(e,r,n);e in customEvents&&(c=(A=>function(w){if(!w.relatedTarget||w.relatedTarget!==w.delegateTarget&&!w.delegateTarget.contains(w.relatedTarget))return A.call(this,w)})(c));const h=getElementEvents(s),d=h[l]||(h[l]={}),f=findHandler(d,c,a?r:null);if(f){f.oneOff=f.oneOff&&o;return}const g=makeEventUid(c,e.replace(namespaceRegex,"")),_=a?bootstrapDelegationHandler(s,r,c):bootstrapHandler(s,c);_.delegationSelector=a?r:null,_.callable=c,_.oneOff=o,_.uidEvent=g,d[g]=_,s.addEventListener(l,_,a)}function removeHandler(s,e,r,n,o){const a=findHandler(e[r],n,o);a&&(s.removeEventListener(r,a,!!o),delete e[r][a.uidEvent])}function removeNamespacedHandlers(s,e,r,n){const o=e[r]||{};for(const[a,c]of Object.entries(o))a.includes(n)&&removeHandler(s,e,r,c.callable,c.delegationSelector)}function getTypeEvent(s){return s=s.replace(stripNameRegex,""),customEvents[s]||s}const EventHandler={on(s,e,r,n){addHandler(s,e,r,n,!1)},one(s,e,r,n){addHandler(s,e,r,n,!0)},off(s,e,r,n){if(typeof e!="string"||!s)return;const[o,a,c]=normalizeParameters(e,r,n),l=c!==e,h=getElementEvents(s),d=h[c]||{},f=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(d).length)return;removeHandler(s,h,c,a,o?r:null);return}if(f)for(const g of Object.keys(h))removeNamespacedHandlers(s,h,g,e.slice(1));for(const[g,_]of Object.entries(d)){const E=g.replace(stripUidRegex,"");(!l||e.includes(E))&&removeHandler(s,h,c,_.callable,_.delegationSelector)}},trigger(s,e,r){if(typeof e!="string"||!s)return null;const n=getjQuery(),o=getTypeEvent(e),a=e!==o;let c=null,l=!0,h=!0,d=!1;a&&n&&(c=n.Event(e,r),n(s).trigger(c),l=!c.isPropagationStopped(),h=!c.isImmediatePropagationStopped(),d=c.isDefaultPrevented());const f=hydrateObj(new Event(e,{bubbles:l,cancelable:!0}),r);return d&&f.preventDefault(),h&&s.dispatchEvent(f),f.defaultPrevented&&c&&c.preventDefault(),f}};function hydrateObj(s,e={}){for(const[r,n]of Object.entries(e))try{s[r]=n}catch{Object.defineProperty(s,r,{configurable:!0,get(){return n}})}return s}function normalizeData(s){if(s==="true")return!0;if(s==="false")return!1;if(s===Number(s).toString())return Number(s);if(s===""||s==="null")return null;if(typeof s!="string")return s;try{return JSON.parse(decodeURIComponent(s))}catch{return s}}function normalizeDataKey(s){return s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Manipulator={setDataAttribute(s,e,r){s.setAttribute(`data-bs-${normalizeDataKey(e)}`,r)},removeDataAttribute(s,e){s.removeAttribute(`data-bs-${normalizeDataKey(e)}`)},getDataAttributes(s){if(!s)return{};const e={},r=Object.keys(s.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of r){let o=n.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=normalizeData(s.dataset[n])}return e},getDataAttribute(s,e){return normalizeData(s.getAttribute(`data-bs-${normalizeDataKey(e)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,r){const n=isElement(r)?Manipulator.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...isElement(r)?Manipulator.getDataAttributes(r):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,r=this.constructor.DefaultType){for(const[n,o]of Object.entries(r)){const a=e[n],c=isElement(a)?"element":toType(a);if(!new RegExp(o).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${c}" but expected type "${o}".`)}}}const VERSION="5.3.2";class BaseComponent extends Config{constructor(e,r){super(),e=getElement(e),e&&(this._element=e,this._config=this._getConfig(r),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,r,n=!0){executeAfterTransition(e,r,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,r={}){return this.getInstance(e)||new this(e,typeof r=="object"?r:null)}static get VERSION(){return VERSION}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const getSelector=s=>{let e=s.getAttribute("data-bs-target");if(!e||e==="#"){let r=s.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&r!=="#"?parseSelector(r.trim()):null}return e},SelectorEngine={find(s,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,s))},findOne(s,e=document.documentElement){return Element.prototype.querySelector.call(e,s)},children(s,e){return[].concat(...s.children).filter(r=>r.matches(e))},parents(s,e){const r=[];let n=s.parentNode.closest(e);for(;n;)r.push(n),n=n.parentNode.closest(e);return r},prev(s,e){let r=s.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(s,e){let r=s.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(s){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(e,s).filter(r=>!isDisabled(r)&&isVisible(r))},getSelectorFromElement(s){const e=getSelector(s);return e&&SelectorEngine.findOne(e)?e:null},getElementFromSelector(s){const e=getSelector(s);return e?SelectorEngine.findOne(e):null},getMultipleElementsFromSelector(s){const e=getSelector(s);return e?SelectorEngine.find(e):[]}},enableDismissTrigger=(s,e="hide")=>{const r=`click.dismiss${s.EVENT_KEY}`,n=s.NAME;EventHandler.on(document,r,`[data-bs-dismiss="${n}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),isDisabled(this))return;const a=SelectorEngine.getElementFromSelector(this)||this.closest(`.${n}`);s.getOrCreateInstance(a)[e]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const r=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(e){return this.each(function(){const r=Alert.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(e){return this.each(function(){const r=Button.getOrCreateInstance(this);e==="toggle"&&r[e]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,s=>{s.preventDefault();const e=s.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(e).toggle()});defineJQueryPlugin(Button);const NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(e,r){super(),this._element=e,!(!e||!Swipe.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=SWIPE_THRESHOLD)return;const r=e/this._deltaX;this._deltaX=0,r&&execute(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,e=>this._start(e)),EventHandler.on(this._element,EVENT_POINTERUP,e=>this._end(e)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,e=>this._start(e)),EventHandler.on(this._element,EVENT_TOUCHMOVE,e=>this._move(e)),EventHandler.on(this._element,EVENT_TOUCHEND,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===POINTER_TYPE_PEN||e.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(e,r){super(e,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(e){const r=this._getItems();if(e>r.length-1||e<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(e));return}const n=this._getItemIndex(this._getActive());if(n===e)return;const o=e>n?ORDER_NEXT:ORDER_PREV;this._slide(o,r[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,e=>this._keydown(e)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(n,EVENT_DRAG_START,o=>o.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,r)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const r=KEY_TO_DIRECTION[e.key];r&&(e.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const r=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);r.classList.remove(CLASS_NAME_ACTIVE$2),r.removeAttribute("aria-current");const n=SelectorEngine.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(CLASS_NAME_ACTIVE$2),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const r=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(e,r=null){if(this._isSliding)return;const n=this._getActive(),o=e===ORDER_NEXT,a=r||getNextActiveElement(this._getItems(),n,o,this._config.wrap);if(a===n)return;const c=this._getItemIndex(a),l=E=>EventHandler.trigger(this._element,E,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:c});if(l(EVENT_SLIDE).defaultPrevented||!n||!a)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=a;const f=o?CLASS_NAME_START:CLASS_NAME_END,g=o?CLASS_NAME_NEXT:CLASS_NAME_PREV;a.classList.add(g),reflow(a),n.classList.add(f),a.classList.add(f);const _=()=>{a.classList.remove(f,g),a.classList.add(CLASS_NAME_ACTIVE$2),n.classList.remove(CLASS_NAME_ACTIVE$2,g,f),this._isSliding=!1,l(EVENT_SLID)};this._queueCallback(_,n,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return isRTL()?e===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:e===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(e){return isRTL()?e===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:e===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(e){return this.each(function(){const r=Carousel.getOrCreateInstance(this,e);if(typeof e=="number"){r.to(e);return}if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(s){const e=SelectorEngine.getElementFromSelector(this);if(!e||!e.classList.contains(CLASS_NAME_CAROUSEL))return;s.preventDefault();const r=Carousel.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){r.to(n),r._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const s=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const e of s)Carousel.getOrCreateInstance(e)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,r){super(e,r),this._isTransitioning=!1,this._triggerArray=[];const n=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const o of n){const a=SelectorEngine.getSelectorFromElement(o),c=SelectorEngine.find(a).filter(l=>l===this._element);a!==null&&c.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(l=>l!==this._element).map(l=>Collapse.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const l of e)l.hide();const n=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[n]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},c=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[n]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const o of this._triggerArray){const a=SelectorEngine.getElementFromSelector(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[r]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const r of e){const n=SelectorEngine.getElementFromSelector(r);n&&this._addAriaAndCollapsedClass([r],this._isShown(n))}}_getFirstLevelChildren(e){const r=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter(n=>!r.includes(n))}_addAriaAndCollapsedClass(e,r){if(e.length)for(const n of e)n.classList.toggle(CLASS_NAME_COLLAPSED,!r),n.setAttribute("aria-expanded",r)}static jQueryInterface(e){const r={};return typeof e=="string"&&/show|hide/.test(e)&&(r.toggle=!1),this.each(function(){const n=Collapse.getOrCreateInstance(this,r);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(s){(s.target.tagName==="A"||s.delegateTarget&&s.delegateTarget.tagName==="A")&&s.preventDefault();for(const e of SelectorEngine.getMultipleElementsFromSelector(this))Collapse.getOrCreateInstance(e,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(e,r){super(e,r),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const n of[].concat(...document.body.children))EventHandler.on(n,"mouseover",noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,e)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))EventHandler.off(n,"mouseover",noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!isElement(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:isElement(this._config.reference)?e=getElement(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const r=this._getPopperConfig();this._popper=createPopper(e,this._menu,r)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const e=this._parent;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(e.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(e.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(CLASS_NAME_DROPUP)?r?PLACEMENT_TOPEND:PLACEMENT_TOP:r?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...execute(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:r}){const n=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(o=>isVisible(o));n.length&&getNextActiveElement(n,r,e===ARROW_DOWN_KEY$1,!n.includes(r)).focus()}static jQueryInterface(e){return this.each(function(){const r=Dropdown.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}static clearMenus(e){if(e.button===RIGHT_MOUSE_BUTTON||e.type==="keyup"&&e.key!==TAB_KEY$1)return;const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const n of r){const o=Dropdown.getInstance(n);if(!o||o._config.autoClose===!1)continue;const a=e.composedPath(),c=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!c||o._config.autoClose==="outside"&&c||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:o._element};e.type==="click"&&(l.clickEvent=e),o._completeHide(l)}}static dataApiKeydownHandler(e){const r=/input|textarea/i.test(e.target.tagName),n=e.key===ESCAPE_KEY$2,o=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(e.key);if(!o&&!n||r&&!n)return;e.preventDefault();const a=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,e.delegateTarget.parentNode),c=Dropdown.getOrCreateInstance(a);if(o){e.stopPropagation(),c.show(),c._selectMenuItem(e);return}c._isShown()&&(e.stopPropagation(),c.hide(),a.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(s){s.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(e){if(!this._config.isVisible){execute(e);return}this._append();const r=this._getElement();this._config.isAnimated&&reflow(r),r.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(e)})}hide(e){if(!this._config.isVisible){execute(e);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(e)})}dispose(){this._isAppended&&(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(CLASS_NAME_FADE$4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=getElement(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),EventHandler.on(e,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,e=>this._handleFocusin(e)),EventHandler.on(document,EVENT_KEYDOWN_TAB,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(e){const{trapElement:r}=this._config;if(e.target===document||e.target===r||r.contains(e.target))return;const n=SelectorEngine.focusableChildren(r);n.length===0?r.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===TAB_KEY&&(this._lastTabNavDirection=e.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,r=>r-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,r,n){const o=this.getWidth(),a=c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+o)return;this._saveInitialAttribute(c,r);const l=window.getComputedStyle(c).getPropertyValue(r);c.style.setProperty(r,`${n(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,r){const n=e.style.getPropertyValue(r);n&&Manipulator.setDataAttribute(e,r,n)}_resetElementAttributes(e,r){const n=o=>{const a=Manipulator.getDataAttribute(o,r);if(a===null){o.style.removeProperty(r);return}Manipulator.removeDataAttribute(o,r),o.style.setProperty(r,a)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,r){if(isElement(e)){r(e);return}for(const n of SelectorEngine.find(e,this._element))r(n)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(e,r){super(e,r),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){EventHandler.off(window,EVENT_KEY$4),EventHandler.off(this._dialog,EVENT_KEY$4),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);r&&(r.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,e=>{if(e.key===ESCAPE_KEY$1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,e=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,r=>{if(!(this._element!==e.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),n=r>0;if(n&&!e){const o=isRTL()?"paddingLeft":"paddingRight";this._element.style[o]=`${r}px`}if(!n&&e){const o=isRTL()?"paddingRight":"paddingLeft";this._element.style[o]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,r){return this.each(function(){const n=Modal.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](r)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(s){const e=SelectorEngine.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&s.preventDefault(),EventHandler.one(e,EVENT_SHOW$4,o=>{o.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const r=SelectorEngine.findOne(OPEN_SELECTOR$1);r&&Modal.getInstance(r).hide(),Modal.getOrCreateInstance(e).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(e,r){super(e,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const r=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},r=!!this._config.backdrop;return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?e:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,e=>{if(e.key===ESCAPE_KEY){if(this._config.keyboard){this.hide();return}EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED)}})}static jQueryInterface(e){return this.each(function(){const r=Offcanvas.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(s){const e=SelectorEngine.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),isDisabled(this))return;EventHandler.one(e,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const r=SelectorEngine.findOne(OPEN_SELECTOR);r&&r!==e&&Offcanvas.getInstance(r).hide(),Offcanvas.getOrCreateInstance(e).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const s of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(s).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const s of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(s).position!=="fixed"&&Offcanvas.getOrCreateInstance(s).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),SAFE_URL_PATTERN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,allowedAttribute=(s,e)=>{const r=s.nodeName.toLowerCase();return e.includes(r)?uriAttributes.has(r)?!!SAFE_URL_PATTERN.test(s.nodeValue):!0:e.filter(n=>n instanceof RegExp).some(n=>n.test(r))};function sanitizeHtml(s,e,r){if(!s.length)return s;if(r&&typeof r=="function")return r(s);const o=new window.DOMParser().parseFromString(s,"text/html"),a=[].concat(...o.body.querySelectorAll("*"));for(const c of a){const l=c.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){c.remove();continue}const h=[].concat(...c.attributes),d=[].concat(e["*"]||[],e[l]||[]);for(const f of h)allowedAttribute(f,d)||c.removeAttribute(f.nodeName)}return o.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,a]of Object.entries(this._config.content))this._setContent(e,a,o);const r=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&r.classList.add(...n.split(" ")),r}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[r,n]of Object.entries(e))super._typeCheckConfig({selector:r,entry:n},DefaultContentType)}_setContent(e,r,n){const o=SelectorEngine.findOne(n,e);if(o){if(r=this._resolvePossibleFunction(r),!r){o.remove();return}if(isElement(r)){this._putElementInTemplate(getElement(r),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(r);return}o.textContent=r}}_maybeSanitize(e){return this._config.sanitize?sanitizeHtml(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return execute(e,[this])}_putElementInTemplate(e,r){if(this._config.html){r.innerHTML="",r.append(e);return}r.textContent=e.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(e,r){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),n=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(o),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(o),o.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))EventHandler.on(l,"mouseover",noop);const c=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(c,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))EventHandler.off(o,"mouseover",noop);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const r=this._getTemplateFactory(e).toHtml();if(!r)return null;r.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),r.classList.add(`bs-${this.constructor.NAME}-auto`);const n=getUID(this.constructor.NAME).toString();return r.setAttribute("id",n),this._isAnimated()&&r.classList.add(CLASS_NAME_FADE$2),r}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new TemplateFactory({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(e){const r=execute(this._config.placement,[this,e,this._element]),n=AttachmentMap[r.toUpperCase()];return createPopper(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_resolvePossibleFunction(e){return execute(e,[this._element])}_getPopperConfig(e){const r={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...r,...execute(this._config.popperConfig,[r])}}_setListeners(){const e=this._config.trigger.split(" ");for(const r of e)if(r==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(r!==TRIGGER_MANUAL){const n=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),o=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,n,this._config.selector,a=>{const c=this._initializeOnDelegatedTarget(a);c._activeTrigger[a.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,c._enter()}),EventHandler.on(this._element,o,this._config.selector,a=>{const c=this._initializeOnDelegatedTarget(a);c._activeTrigger[a.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=c._element.contains(a.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,r){clearTimeout(this._timeout),this._timeout=setTimeout(e,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const r=Manipulator.getDataAttributes(this._element);for(const n of Object.keys(r))DISALLOWED_ATTRIBUTES.has(n)&&delete r[n];return e={...r,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:getElement(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[r,n]of Object.entries(this._config))this.constructor.Default[r]!==n&&(e[r]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const r=Tooltip.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const r=Popover.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(e,r){super(e,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=getElement(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(r=>Number.parseFloat(r))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,e=>{const r=this._observableSections.get(e.target.hash);if(r){e.preventDefault();const n=this._rootElement||window,o=r.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:o,behavior:"smooth"});return}n.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),e)}_observerCallback(e){const r=c=>this._targetLinks.get(`#${c.target.id}`),n=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(r(c))},o=(this._rootElement||document.documentElement).scrollTop,a=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const c of e){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(c));continue}const l=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&l){if(n(c),!o)return;continue}!a&&!l&&n(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const r of e){if(!r.hash||isDisabled(r))continue;const n=SelectorEngine.findOne(decodeURI(r.hash),this._element);isVisible(n)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,n))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(e),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,e.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const r of SelectorEngine.parents(e,SELECTOR_NAV_LIST_GROUP))for(const n of SelectorEngine.prev(r,SELECTOR_LINK_ITEMS))n.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(e){e.classList.remove(CLASS_NAME_ACTIVE$1);const r=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,e);for(const n of r)n.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(e){return this.each(function(){const r=ScrollSpy.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const s of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(s)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",HOME_KEY="Home",END_KEY="End",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=`:not(${SELECTOR_DROPDOWN_TOGGLE})`,SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(e){super(e),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,r=>this._keydown(r)))}static get NAME(){return NAME$1}show(){const e=this._element;if(this._elemIsActive(e))return;const r=this._getActiveElem(),n=r?EventHandler.trigger(r,EVENT_HIDE$1,{relatedTarget:e}):null;EventHandler.trigger(e,EVENT_SHOW$1,{relatedTarget:r}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(r,e),this._activate(e,r))}_activate(e,r){if(!e)return;e.classList.add(CLASS_NAME_ACTIVE),this._activate(SelectorEngine.getElementFromSelector(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(CLASS_NAME_SHOW$1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),EventHandler.trigger(e,EVENT_SHOWN$1,{relatedTarget:r})};this._queueCallback(n,e,e.classList.contains(CLASS_NAME_FADE$1))}_deactivate(e,r){if(!e)return;e.classList.remove(CLASS_NAME_ACTIVE),e.blur(),this._deactivate(SelectorEngine.getElementFromSelector(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(CLASS_NAME_SHOW$1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),EventHandler.trigger(e,EVENT_HIDDEN$1,{relatedTarget:r})};this._queueCallback(n,e,e.classList.contains(CLASS_NAME_FADE$1))}_keydown(e){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY,HOME_KEY,END_KEY].includes(e.key))return;e.stopPropagation(),e.preventDefault();const r=this._getChildren().filter(o=>!isDisabled(o));let n;if([HOME_KEY,END_KEY].includes(e.key))n=r[e.key===HOME_KEY?0:r.length-1];else{const o=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(e.key);n=getNextActiveElement(r,e.target,o,!0)}n&&(n.focus({preventScroll:!0}),Tab.getOrCreateInstance(n).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,r){this._setAttributeIfNotExists(e,"role","tablist");for(const n of r)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const r=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",r),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),r||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const r=SelectorEngine.getElementFromSelector(e);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,r){const n=this._getOuterElement(e);if(!n.classList.contains(CLASS_DROPDOWN))return;const o=(a,c)=>{const l=SelectorEngine.findOne(a,n);l&&l.classList.toggle(c,r)};o(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),o(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),n.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(e,r,n){e.hasAttribute(r)||e.setAttribute(r,n)}_elemIsActive(e){return e.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(e){return e.matches(SELECTOR_INNER_ELEM)?e:SelectorEngine.findOne(SELECTOR_INNER_ELEM,e)}_getOuterElement(e){return e.closest(SELECTOR_OUTER)||e}static jQueryInterface(e){return this.each(function(){const r=Tab.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(s){["A","AREA"].includes(this.tagName)&&s.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const s of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(s)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(e,r){super(e,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const r=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const r=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,r){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,e=>this._onInteraction(e,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const r=Toast.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const debounce=(s,e=100)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>s.apply(this,n),e)}},$=(s,e=document)=>e.querySelector(s),$$=(s,e=document)=>[...e.querySelectorAll(s)];function setStorage(s,e){localStorage[s]=e,sessionStorage[s]=e}function getStorage(s,e){return localStorage[s]||sessionStorage[s]||e}function safe(s){return purify.sanitize(s)}class CopyButton{contentSelector;buttonSelector;contentEl;buttonEl;constructor(e,r){this.contentSelector=e,this.buttonSelector=r,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(r),this.buttonEl.addEventListener("click",()=>{let n=new URL("./",window.location.href);n.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(n.toString()).then(()=>{Tooltip.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),$(`${this.buttonSelector}.btn-primary`).style.display="none",$(`${this.buttonSelector}.btn-success`).style.display="",setTimeout(()=>{$(`${this.buttonSelector}.btn-primary`).style.display="",$(`${this.buttonSelector}.btn-success`).style.display="none",Tooltip.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(o){console.error("Async: Could not copy text: ",o)})})}}var xterm={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={4567:function(c,l,h){var d=this&&this.__decorate||function(x,D,R,M){var L,k=arguments.length,I=k<3?D:M===null?M=Object.getOwnPropertyDescriptor(D,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(x,D,R,M);else for(var V=x.length-1;V>=0;V--)(L=x[V])&&(I=(k<3?L(I):k>3?L(D,R,I):L(D,R))||I);return k>3&&I&&Object.defineProperty(D,R,I),I},f=this&&this.__param||function(x,D){return function(R,M){D(R,M,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const g=h(9042),_=h(6114),E=h(9924),A=h(844),w=h(5596),m=h(4725),b=h(3656);let y=l.AccessibilityManager=class extends A.Disposable{constructor(x,D){super(),this._terminal=x,this._renderService=D,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let R=0;R<this._terminal.rows;R++)this._rowElements[R]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[R]);if(this._topBoundaryFocusListener=R=>this._handleBoundaryFocus(R,0),this._bottomBoundaryFocusListener=R=>this._handleBoundaryFocus(R,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new E.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(R=>this._handleResize(R.rows))),this.register(this._terminal.onRender(R=>this._refreshRows(R.start,R.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(R=>this._handleChar(R))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(R=>this._handleTab(R))),this.register(this._terminal.onKey(R=>this._handleKey(R.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new w.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,b.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,A.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(x){for(let D=0;D<x;D++)this._handleChar(" ")}_handleChar(x){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==x&&(this._charsToAnnounce+=x):this._charsToAnnounce+=x,x===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=g.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(x){this._clearLiveRegion(),/\p{Control}/u.test(x)||this._charsToConsume.push(x)}_refreshRows(x,D){this._liveRegionDebouncer.refresh(x,D,this._terminal.rows)}_renderRows(x,D){const R=this._terminal.buffer,M=R.lines.length.toString();for(let L=x;L<=D;L++){const k=R.translateBufferLineToString(R.ydisp+L,!0),I=(R.ydisp+L+1).toString(),V=this._rowElements[L];V&&(k.length===0?V.innerText=" ":V.textContent=k,V.setAttribute("aria-posinset",I),V.setAttribute("aria-setsize",M))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(x,D){const R=x.target,M=this._rowElements[D===0?1:this._rowElements.length-2];if(R.getAttribute("aria-posinset")===(D===0?"1":`${this._terminal.buffer.lines.length}`)||x.relatedTarget!==M)return;let L,k;if(D===0?(L=R,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(L=this._rowElements.shift(),k=R,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),D===0){const I=this._createAccessibilityTreeNode();this._rowElements.unshift(I),this._rowContainer.insertAdjacentElement("afterbegin",I)}else{const I=this._createAccessibilityTreeNode();this._rowElements.push(I),this._rowContainer.appendChild(I)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(D===0?-1:1),this._rowElements[D===0?1:this._rowElements.length-2].focus(),x.preventDefault(),x.stopImmediatePropagation()}_handleResize(x){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let D=this._rowContainer.children.length;D<this._terminal.rows;D++)this._rowElements[D]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[D]);for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const x=document.createElement("div");return x.setAttribute("role","listitem"),x.tabIndex=-1,this._refreshRowDimensions(x),x}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let x=0;x<this._terminal.rows;x++)this._refreshRowDimensions(this._rowElements[x])}}_refreshRowDimensions(x){x.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=y=d([f(1,m.IRenderService)],y)},3614:(c,l)=>{function h(_){return _.replace(/\r?\n/g,"\r")}function d(_,E){return E?"\x1B[200~"+_+"\x1B[201~":_}function f(_,E,A,w){_=d(_=h(_),A.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),A.triggerDataEvent(_,!0),E.value=""}function g(_,E,A){const w=A.getBoundingClientRect(),m=_.clientX-w.left-10,b=_.clientY-w.top-10;E.style.width="20px",E.style.height="20px",E.style.left=`${m}px`,E.style.top=`${b}px`,E.style.zIndex="1000",E.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=h,l.bracketTextForPaste=d,l.copyHandler=function(_,E){_.clipboardData&&_.clipboardData.setData("text/plain",E.selectionText),_.preventDefault()},l.handlePasteEvent=function(_,E,A,w){_.stopPropagation(),_.clipboardData&&f(_.clipboardData.getData("text/plain"),E,A,w)},l.paste=f,l.moveTextAreaUnderMouseCursor=g,l.rightClickHandler=function(_,E,A,w,m){g(_,E,A),m&&w.rightClickSelect(_),E.value=w.selectionText,E.select()}},7239:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const d=h(1505);l.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(f,g,_){this._css.set(f,g,_)}getCss(f,g){return this._css.get(f,g)}setColor(f,g,_){this._color.set(f,g,_)}getColor(f,g){return this._color.get(f,g)}clear(){this._color.clear(),this._css.clear()}}},3656:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(h,d,f,g){h.addEventListener(d,f,g);let _=!1;return{dispose:()=>{_||(_=!0,h.removeEventListener(d,f,g))}}}},6465:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const g=h(3656),_=h(8460),E=h(844),A=h(2585);let w=l.Linkifier2=class extends E.Disposable{get currentLink(){return this._currentLink}constructor(m){super(),this._bufferService=m,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,E.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,E.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(m){return this._linkProviders.push(m),{dispose:()=>{const b=this._linkProviders.indexOf(m);b!==-1&&this._linkProviders.splice(b,1)}}}attachToDom(m,b,y){this._element=m,this._mouseService=b,this._renderService=y,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(m){if(this._lastMouseEvent=m,!this._element||!this._mouseService)return;const b=this._positionFromMouseEvent(m,this._element,this._mouseService);if(!b)return;this._isMouseOut=!1;const y=m.composedPath();for(let x=0;x<y.length;x++){const D=y[x];if(D.classList.contains("xterm"))break;if(D.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._handleHover(b),this._lastBufferCell=b)}_handleHover(m){if(this._activeLine!==m.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(m,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,m)||(this._clearCurrentLink(),this._askForLink(m,!0))}_askForLink(m,b){var y,x;this._activeProviderReplies&&b||((y=this._activeProviderReplies)===null||y===void 0||y.forEach(R=>{R?.forEach(M=>{M.link.dispose&&M.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=m.y);let D=!1;for(const[R,M]of this._linkProviders.entries())b?!((x=this._activeProviderReplies)===null||x===void 0)&&x.get(R)&&(D=this._checkLinkProviderResult(R,m,D)):M.provideLinks(m.y,L=>{var k,I;if(this._isMouseOut)return;const V=L?.map(N=>({link:N}));(k=this._activeProviderReplies)===null||k===void 0||k.set(R,V),D=this._checkLinkProviderResult(R,m,D),((I=this._activeProviderReplies)===null||I===void 0?void 0:I.size)===this._linkProviders.length&&this._removeIntersectingLinks(m.y,this._activeProviderReplies)})}_removeIntersectingLinks(m,b){const y=new Set;for(let x=0;x<b.size;x++){const D=b.get(x);if(D)for(let R=0;R<D.length;R++){const M=D[R],L=M.link.range.start.y<m?0:M.link.range.start.x,k=M.link.range.end.y>m?this._bufferService.cols:M.link.range.end.x;for(let I=L;I<=k;I++){if(y.has(I)){D.splice(R--,1);break}y.add(I)}}}}_checkLinkProviderResult(m,b,y){var x;if(!this._activeProviderReplies)return y;const D=this._activeProviderReplies.get(m);let R=!1;for(let M=0;M<m;M++)this._activeProviderReplies.has(M)&&!this._activeProviderReplies.get(M)||(R=!0);if(!R&&D){const M=D.find(L=>this._linkAtPosition(L.link,b));M&&(y=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviders.length&&!y)for(let M=0;M<this._activeProviderReplies.size;M++){const L=(x=this._activeProviderReplies.get(M))===null||x===void 0?void 0:x.find(k=>this._linkAtPosition(k.link,b));if(L){y=!0,this._handleNewLink(L);break}}return y}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(m){if(!this._element||!this._mouseService||!this._currentLink)return;const b=this._positionFromMouseEvent(m,this._element,this._mouseService);b&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(m,this._currentLink.link.text)}_clearCurrentLink(m,b){this._element&&this._currentLink&&this._lastMouseEvent&&(!m||!b||this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,E.disposeArray)(this._linkCacheDisposables))}_handleNewLink(m){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._linkAtPosition(m.link,b)&&(this._currentLink=m,this._currentLink.state={decorations:{underline:m.link.decorations===void 0||m.link.decorations.underline,pointerCursor:m.link.decorations===void 0||m.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,m.link,this._lastMouseEvent),m.link.decorations={},Object.defineProperties(m.link.decorations,{pointerCursor:{get:()=>{var y,x;return(x=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||x===void 0?void 0:x.decorations.pointerCursor},set:y=>{var x,D;!((x=this._currentLink)===null||x===void 0)&&x.state&&this._currentLink.state.decorations.pointerCursor!==y&&(this._currentLink.state.decorations.pointerCursor=y,this._currentLink.state.isHovered&&((D=this._element)===null||D===void 0||D.classList.toggle("xterm-cursor-pointer",y)))}},underline:{get:()=>{var y,x;return(x=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||x===void 0?void 0:x.decorations.underline},set:y=>{var x,D,R;!((x=this._currentLink)===null||x===void 0)&&x.state&&((R=(D=this._currentLink)===null||D===void 0?void 0:D.state)===null||R===void 0?void 0:R.decorations.underline)!==y&&(this._currentLink.state.decorations.underline=y,this._currentLink.state.isHovered&&this._fireUnderlineEvent(m.link,y))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(y=>{if(!this._currentLink)return;const x=y.start===0?0:y.start+1+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.ydisp+1+y.end;if(this._currentLink.link.range.start.y>=x&&this._currentLink.link.range.end.y<=D&&(this._clearCurrentLink(x,D),this._lastMouseEvent&&this._element)){const R=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);R&&this._askForLink(R,!1)}})))}_linkHover(m,b,y){var x;!((x=this._currentLink)===null||x===void 0)&&x.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&m.classList.add("xterm-cursor-pointer")),b.hover&&b.hover(y,b.text)}_fireUnderlineEvent(m,b){const y=m.range,x=this._bufferService.buffer.ydisp,D=this._createLinkUnderlineEvent(y.start.x-1,y.start.y-x-1,y.end.x,y.end.y-x-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(D)}_linkLeave(m,b,y){var x;!((x=this._currentLink)===null||x===void 0)&&x.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&m.classList.remove("xterm-cursor-pointer")),b.leave&&b.leave(y,b.text)}_linkAtPosition(m,b){const y=m.range.start.y*this._bufferService.cols+m.range.start.x,x=m.range.end.y*this._bufferService.cols+m.range.end.x,D=b.y*this._bufferService.cols+b.x;return y<=D&&D<=x}_positionFromMouseEvent(m,b,y){const x=y.getCoords(m,b,this._bufferService.cols,this._bufferService.rows);if(x)return{x:x[0],y:x[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(m,b,y,x,D){return{x1:m,y1:b,x2:y,y2:x,cols:this._bufferService.cols,fg:D}}};l.Linkifier2=w=d([f(0,A.IBufferService)],w)},9042:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(c,l,h){var d=this&&this.__decorate||function(w,m,b,y){var x,D=arguments.length,R=D<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,m,b,y);else for(var M=w.length-1;M>=0;M--)(x=w[M])&&(R=(D<3?x(R):D>3?x(m,b,R):x(m,b))||R);return D>3&&R&&Object.defineProperty(m,b,R),R},f=this&&this.__param||function(w,m){return function(b,y){m(b,y,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const g=h(511),_=h(2585);let E=l.OscLinkProvider=class{constructor(w,m,b){this._bufferService=w,this._optionsService=m,this._oscLinkService=b}provideLinks(w,m){var b;const y=this._bufferService.buffer.lines.get(w-1);if(!y)return void m(void 0);const x=[],D=this._optionsService.rawOptions.linkHandler,R=new g.CellData,M=y.getTrimmedLength();let L=-1,k=-1,I=!1;for(let V=0;V<M;V++)if(k!==-1||y.hasContent(V)){if(y.loadCell(V,R),R.hasExtendedAttrs()&&R.extended.urlId){if(k===-1){k=V,L=R.extended.urlId;continue}I=R.extended.urlId!==L}else k!==-1&&(I=!0);if(I||k!==-1&&V===M-1){const N=(b=this._oscLinkService.getLinkData(L))===null||b===void 0?void 0:b.uri;if(N){const B={start:{x:k+1,y:w},end:{x:V+(I||V!==M-1?0:1),y:w}};let H=!1;if(!D?.allowNonHttpProtocols)try{const z=new URL(N);["http:","https:"].includes(z.protocol)||(H=!0)}catch{H=!0}H||x.push({text:N,range:B,activate:(z,W)=>D?D.activate(z,W,B):A(0,W),hover:(z,W)=>{var Q;return(Q=D?.hover)===null||Q===void 0?void 0:Q.call(D,z,W,B)},leave:(z,W)=>{var Q;return(Q=D?.leave)===null||Q===void 0?void 0:Q.call(D,z,W,B)}})}I=!1,R.hasExtendedAttrs()&&R.extended.urlId?(k=V,L=R.extended.urlId):(k=-1,L=-1)}}m(x)}};function A(w,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const b=window.open();if(b){try{b.opener=null}catch{}b.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=E=d([f(0,_.IBufferService),f(1,_.IOptionsService),f(2,_.IOscLinkService)],E)},6193:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(h,d){this._parentWindow=h,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(h){return this._refreshCallbacks.push(h),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(h,d,f){this._rowCount=f,h=h!==void 0?h:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const h=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const h of this._refreshCallbacks)h(0);this._refreshCallbacks=[]}}},5596:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const d=h(844);class f extends d.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=f},3236:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const d=h(3614),f=h(3656),g=h(6465),_=h(9042),E=h(3730),A=h(1680),w=h(3107),m=h(5744),b=h(2950),y=h(1296),x=h(428),D=h(4269),R=h(5114),M=h(8934),L=h(3230),k=h(9312),I=h(4725),V=h(6731),N=h(8055),B=h(8969),H=h(8460),z=h(844),W=h(6114),Q=h(8437),X=h(2584),G=h(7399),q=h(5941),Y=h(9074),K=h(2585),se=h(5435),Se=h(4567),be=typeof window<"u"?window.document:null;class xe extends B.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(J={}){super(J),this.browser=W,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new H.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new H.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new H.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new H.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new H.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new H.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new H.EventEmitter),this._onBlur=this.register(new H.EventEmitter),this._onA11yCharEmitter=this.register(new H.EventEmitter),this._onA11yTabEmitter=this.register(new H.EventEmitter),this._onWillOpen=this.register(new H.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(g.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(E.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(Y.DecorationService),this._instantiationService.setService(K.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((ne,de)=>this.refresh(ne,de))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(ne=>this._reportWindowsOptions(ne))),this.register(this._inputHandler.onColor(ne=>this._handleColorEvent(ne))),this.register((0,H.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,H.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,H.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,H.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(ne=>this._afterResize(ne.cols,ne.rows))),this.register((0,z.toDisposable)(()=>{var ne,de;this._customKeyEventHandler=void 0,(de=(ne=this.element)===null||ne===void 0?void 0:ne.parentNode)===null||de===void 0||de.removeChild(this.element)}))}_handleColorEvent(J){if(this._themeService)for(const ne of J){let de,ue="";switch(ne.index){case 256:de="foreground",ue="10";break;case 257:de="background",ue="11";break;case 258:de="cursor",ue="12";break;default:de="ansi",ue="4;"+ne.index}switch(ne.type){case 0:const Fe=N.color.toColorRGB(de==="ansi"?this._themeService.colors.ansi[ne.index]:this._themeService.colors[de]);this.coreService.triggerDataEvent(`${X.C0.ESC}]${ue};${(0,q.toRgbString)(Fe)}${X.C1_ESCAPED.ST}`);break;case 1:if(de==="ansi")this._themeService.modifyColors(Ie=>Ie.ansi[ne.index]=N.rgba.toColor(...ne.color));else{const Ie=de;this._themeService.modifyColors(ye=>ye[Ie]=N.rgba.toColor(...ne.color))}break;case 2:this._themeService.restoreColor(ne.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(J){J?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Se.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(J){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[I"),this.updateCursorStyle(J),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var J;return(J=this.textarea)===null||J===void 0?void 0:J.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(X.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const J=this.buffer.ybase+this.buffer.y,ne=this.buffer.lines.get(J);if(!ne)return;const de=Math.min(this.buffer.x,this.cols-1),ue=this._renderService.dimensions.css.cell.height,Fe=ne.getWidth(de),Ie=this._renderService.dimensions.css.cell.width*Fe,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,$e=de*this._renderService.dimensions.css.cell.width;this.textarea.style.left=$e+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=Ie+"px",this.textarea.style.height=ue+"px",this.textarea.style.lineHeight=ue+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",ne=>{this.hasSelection()&&(0,d.copyHandler)(ne,this._selectionService)}));const J=ne=>(0,d.handlePasteEvent)(ne,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",J)),this.register((0,f.addDisposableDomListener)(this.element,"paste",J)),W.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",ne=>{ne.button===2&&(0,d.rightClickHandler)(ne,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",ne=>{(0,d.rightClickHandler)(ne,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),W.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",ne=>{ne.button===1&&(0,d.moveTextAreaUnderMouseCursor)(ne,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",J=>this._keyUp(J),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",J=>this._keyDown(J),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",J=>this._keyPress(J),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",J=>this._compositionHelper.compositionupdate(J))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",J=>this._inputEvent(J),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(J){var ne;if(!J)throw new Error("Terminal requires a parent element.");J.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=J.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),J.appendChild(this.element);const de=be.createDocumentFragment();this._viewportElement=be.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),de.appendChild(this._viewportElement),this._viewportScrollArea=be.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=be.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=be.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),de.appendChild(this.screenElement),this.textarea=be.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),W.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,(ne=this._document.defaultView)!==null&&ne!==void 0?ne:window),this._instantiationService.setService(I.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",ue=>this._handleTextAreaFocus(ue))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(I.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(V.ThemeService),this._instantiationService.setService(I.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(D.CharacterJoinerService),this._instantiationService.setService(I.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(I.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ue=>this._onRender.fire(ue))),this.onResize(ue=>this._renderService.resize(ue.cols,ue.rows)),this._compositionView=be.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(b.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(de);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(M.MouseService),this._instantiationService.setService(I.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(A.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ue=>this.scrollLines(ue.amount,ue.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(k.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(I.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ue=>this.scrollLines(ue.amount,ue.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ue=>this._renderService.handleSelectionChanged(ue.start,ue.end,ue.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ue=>{this.textarea.value=ue,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ue=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",ue=>this._selectionService.handleMouseDown(ue))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Se.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ue=>this._handleScreenReaderModeOptionChange(ue))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ue=>{!this._overviewRulerRenderer&&ue&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(y.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const J=this,ne=this.element;function de(Ie){const ye=J._mouseService.getMouseReportCoords(Ie,J.screenElement);if(!ye)return!1;let $e,Oe;switch(Ie.overrideType||Ie.type){case"mousemove":Oe=32,Ie.buttons===void 0?($e=3,Ie.button!==void 0&&($e=Ie.button<3?Ie.button:3)):$e=1&Ie.buttons?0:4&Ie.buttons?1:2&Ie.buttons?2:3;break;case"mouseup":Oe=0,$e=Ie.button<3?Ie.button:3;break;case"mousedown":Oe=1,$e=Ie.button<3?Ie.button:3;break;case"wheel":if(J.viewport.getLinesScrolled(Ie)===0)return!1;Oe=Ie.deltaY<0?0:1,$e=4;break;default:return!1}return!(Oe===void 0||$e===void 0||$e>4)&&J.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:$e,action:Oe,ctrl:Ie.ctrlKey,alt:Ie.altKey,shift:Ie.shiftKey})}const ue={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Fe={mouseup:Ie=>(de(Ie),Ie.buttons||(this._document.removeEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.removeEventListener("mousemove",ue.mousedrag)),this.cancel(Ie)),wheel:Ie=>(de(Ie),this.cancel(Ie,!0)),mousedrag:Ie=>{Ie.buttons&&de(Ie)},mousemove:Ie=>{Ie.buttons||de(Ie)}};this.register(this.coreMouseService.onProtocolChange(Ie=>{Ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Ie?ue.mousemove||(ne.addEventListener("mousemove",Fe.mousemove),ue.mousemove=Fe.mousemove):(ne.removeEventListener("mousemove",ue.mousemove),ue.mousemove=null),16&Ie?ue.wheel||(ne.addEventListener("wheel",Fe.wheel,{passive:!1}),ue.wheel=Fe.wheel):(ne.removeEventListener("wheel",ue.wheel),ue.wheel=null),2&Ie?ue.mouseup||(ne.addEventListener("mouseup",Fe.mouseup),ue.mouseup=Fe.mouseup):(this._document.removeEventListener("mouseup",ue.mouseup),ne.removeEventListener("mouseup",ue.mouseup),ue.mouseup=null),4&Ie?ue.mousedrag||(ue.mousedrag=Fe.mousedrag):(this._document.removeEventListener("mousemove",ue.mousedrag),ue.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(ne,"mousedown",Ie=>{if(Ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Ie))return de(Ie),ue.mouseup&&this._document.addEventListener("mouseup",ue.mouseup),ue.mousedrag&&this._document.addEventListener("mousemove",ue.mousedrag),this.cancel(Ie)})),this.register((0,f.addDisposableDomListener)(ne,"wheel",Ie=>{if(!ue.wheel){if(!this.buffer.hasScrollback){const ye=this.viewport.getLinesScrolled(Ie);if(ye===0)return;const $e=X.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Ie.deltaY<0?"A":"B");let Oe="";for(let Le=0;Le<Math.abs(ye);Le++)Oe+=$e;return this.coreService.triggerDataEvent(Oe,!0),this.cancel(Ie,!0)}return this.viewport.handleWheel(Ie)?this.cancel(Ie):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(ne,"touchstart",Ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Ie),this.cancel(Ie)},{passive:!0})),this.register((0,f.addDisposableDomListener)(ne,"touchmove",Ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Ie)?void 0:this.cancel(Ie)},{passive:!1}))}refresh(J,ne){var de;(de=this._renderService)===null||de===void 0||de.refreshRows(J,ne)}updateCursorStyle(J){var ne;!((ne=this._selectionService)===null||ne===void 0)&&ne.shouldColumnSelect(J)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(J,ne,de=0){var ue;de===1?(super.scrollLines(J,ne,de),this.refresh(0,this.rows-1)):(ue=this.viewport)===null||ue===void 0||ue.scrollLines(J)}paste(J){(0,d.paste)(J,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(J){this._customKeyEventHandler=J}registerLinkProvider(J){return this.linkifier2.registerLinkProvider(J)}registerCharacterJoiner(J){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const ne=this._characterJoinerService.register(J);return this.refresh(0,this.rows-1),ne}deregisterCharacterJoiner(J){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(J)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(J){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+J)}registerDecoration(J){return this._decorationService.registerDecoration(J)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(J,ne,de){this._selectionService.setSelection(J,ne,de)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var J;(J=this._selectionService)===null||J===void 0||J.clearSelection()}selectAll(){var J;(J=this._selectionService)===null||J===void 0||J.selectAll()}selectLines(J,ne){var de;(de=this._selectionService)===null||de===void 0||de.selectLines(J,ne)}_keyDown(J){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;const ne=this.browser.isMac&&this.options.macOptionIsMeta&&J.altKey;if(!ne&&!this._compositionHelper.keydown(J))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;ne||J.key!=="Dead"&&J.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const de=(0,G.evaluateKeyboardEvent)(J,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(J),de.type===3||de.type===2){const ue=this.rows-1;return this.scrollLines(de.type===2?-ue:ue),this.cancel(J,!0)}return de.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,J)||(de.cancel&&this.cancel(J,!0),!de.key||!!(J.key&&!J.ctrlKey&&!J.altKey&&!J.metaKey&&J.key.length===1&&J.key.charCodeAt(0)>=65&&J.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(de.key!==X.C0.ETX&&de.key!==X.C0.CR||(this.textarea.value=""),this._onKey.fire({key:de.key,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent(de.key,!0),!this.optionsService.rawOptions.screenReaderMode||J.altKey||J.ctrlKey?this.cancel(J,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(J,ne){const de=J.isMac&&!this.options.macOptionIsMeta&&ne.altKey&&!ne.ctrlKey&&!ne.metaKey||J.isWindows&&ne.altKey&&ne.ctrlKey&&!ne.metaKey||J.isWindows&&ne.getModifierState("AltGraph");return ne.type==="keypress"?de:de&&(!ne.keyCode||ne.keyCode>47)}_keyUp(J){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1||(function(ne){return ne.keyCode===16||ne.keyCode===17||ne.keyCode===18}(J)||this.focus(),this.updateCursorStyle(J),this._keyPressHandled=!1)}_keyPress(J){let ne;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(J)===!1)return!1;if(this.cancel(J),J.charCode)ne=J.charCode;else if(J.which===null||J.which===void 0)ne=J.keyCode;else{if(J.which===0||J.charCode===0)return!1;ne=J.which}return!(!ne||(J.altKey||J.ctrlKey||J.metaKey)&&!this._isThirdLevelShift(this.browser,J)||(ne=String.fromCharCode(ne),this._onKey.fire({key:ne,domEvent:J}),this._showCursor(),this.coreService.triggerDataEvent(ne,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(J){if(J.data&&J.inputType==="insertText"&&(!J.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const ne=J.data;return this.coreService.triggerDataEvent(ne,!0),this.cancel(J),!0}return!1}resize(J,ne){J!==this.cols||ne!==this.rows?super.resize(J,ne):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(J,ne){var de,ue;(de=this._charSizeService)===null||de===void 0||de.measure(),(ue=this.viewport)===null||ue===void 0||ue.syncScrollArea(!0)}clear(){var J;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ne=1;ne<this.rows;ne++)this.buffer.lines.push(this.buffer.getBlankLine(Q.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(J=this.viewport)===null||J===void 0||J.reset(),this.refresh(0,this.rows-1)}}reset(){var J,ne;this.options.rows=this.rows,this.options.cols=this.cols;const de=this._customKeyEventHandler;this._setup(),super.reset(),(J=this._selectionService)===null||J===void 0||J.reset(),this._decorationService.reset(),(ne=this.viewport)===null||ne===void 0||ne.reset(),this._customKeyEventHandler=de,this.refresh(0,this.rows-1)}clearTextureAtlas(){var J;(J=this._renderService)===null||J===void 0||J.clearTextureAtlas()}_reportFocus(){var J;!((J=this.element)===null||J===void 0)&&J.classList.contains("focus")?this.coreService.triggerDataEvent(X.C0.ESC+"[I"):this.coreService.triggerDataEvent(X.C0.ESC+"[O")}_reportWindowsOptions(J){if(this._renderService)switch(J){case se.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const ne=this._renderService.dimensions.css.canvas.width.toFixed(0),de=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[4;${de};${ne}t`);break;case se.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ue=this._renderService.dimensions.css.cell.width.toFixed(0),Fe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${X.C0.ESC}[6;${Fe};${ue}t`)}}cancel(J,ne){if(this.options.cancelEvents||ne)return J.preventDefault(),J.stopPropagation(),!1}}l.Terminal=xe},9924:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(h,d=1e3){this._renderCallback=h,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(h,d,f){this._rowCount=f,h=h!==void 0?h:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=g-this._lastRefreshMs,E=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},E)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const h=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,d)}}},1680:function(c,l,h){var d=this&&this.__decorate||function(b,y,x,D){var R,M=arguments.length,L=M<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,x):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,y,x,D);else for(var k=b.length-1;k>=0;k--)(R=b[k])&&(L=(M<3?R(L):M>3?R(y,x,L):R(y,x))||L);return M>3&&L&&Object.defineProperty(y,x,L),L},f=this&&this.__param||function(b,y){return function(x,D){y(x,D,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const g=h(3656),_=h(4725),E=h(8460),A=h(844),w=h(2585);let m=l.Viewport=class extends A.Disposable{constructor(b,y,x,D,R,M,L,k){super(),this._viewportElement=b,this._scrollArea=y,this._bufferService=x,this._optionsService=D,this._charSizeService=R,this._renderService=M,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new E.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(I=>this._renderDimensions=I)),this._handleThemeChange(k.colors),this.register(k.onChangeColors(I=>this._handleThemeChange(I))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(b){this._viewportElement.style.backgroundColor=b.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(b){if(b)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const y=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==y&&(this._lastRecordedBufferHeight=y,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const b=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==b&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=b),this._refreshAnimationFrame=null}syncScrollArea(b=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(b);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(b)}_handleScroll(b){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const y=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:y,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const b=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(b*(this._smoothScrollState.target-this._smoothScrollState.origin)),b<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(b,y){const x=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(y<0&&this._viewportElement.scrollTop!==0||y>0&&x<this._lastRecordedBufferHeight)||(b.cancelable&&b.preventDefault(),!1)}handleWheel(b){const y=this._getPixelsScrolled(b);return y!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+y:this._smoothScrollState.target+=y,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=y,this._bubbleScroll(b,y))}scrollLines(b){if(b!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const y=b*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+y,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!1})}_getPixelsScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let y=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_LINE?y*=this._currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(y*=this._currentRowHeight*this._bufferService.rows),y}getBufferElements(b,y){var x;let D,R="";const M=[],L=y??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let I=b;I<L;I++){const V=k.get(I);if(!V)continue;const N=(x=k.get(I+1))===null||x===void 0?void 0:x.isWrapped;if(R+=V.translateToString(!N),!N||I===k.length-1){const B=document.createElement("div");B.textContent=R,M.push(B),R.length>0&&(D=B),R=""}}return{bufferElements:M,cursorElement:D}}getLinesScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let y=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(y/=this._currentRowHeight+0,this._wheelPartialScroll+=y,y=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(y*=this._bufferService.rows),y}_applyScrollModifier(b,y){const x=this._optionsService.rawOptions.fastScrollModifier;return x==="alt"&&y.altKey||x==="ctrl"&&y.ctrlKey||x==="shift"&&y.shiftKey?b*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:b*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(b){this._lastTouchY=b.touches[0].pageY}handleTouchMove(b){const y=this._lastTouchY-b.touches[0].pageY;return this._lastTouchY=b.touches[0].pageY,y!==0&&(this._viewportElement.scrollTop+=y,this._bubbleScroll(b,y))}};l.Viewport=m=d([f(2,w.IBufferService),f(3,w.IOptionsService),f(4,_.ICharSizeService),f(5,_.IRenderService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],m)},3107:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const g=h(3656),_=h(4725),E=h(844),A=h(2585);let w=l.BufferDecorationRenderer=class extends E.Disposable{constructor(m,b,y,x){super(),this._screenElement=m,this._bufferService=b,this._decorationService=y,this._renderService=x,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(D=>this._removeDecoration(D))),this.register((0,E.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){var b,y;const x=document.createElement("div");x.classList.add("xterm-decoration"),x.classList.toggle("xterm-decoration-top-layer",((b=m?.options)===null||b===void 0?void 0:b.layer)==="top"),x.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,x.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",x.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",x.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const D=(y=m.options.x)!==null&&y!==void 0?y:0;return D&&D>this._bufferService.cols&&(x.style.display="none"),this._refreshXPosition(m,x),x}_refreshStyle(m){const b=m.marker.line-this._bufferService.buffers.active.ydisp;if(b<0||b>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let y=this._decorationElements.get(m);y||(y=this._createElement(m),m.element=y,this._decorationElements.set(m,y),this._container.appendChild(y),m.onDispose(()=>{this._decorationElements.delete(m),y.remove()})),y.style.top=b*this._renderService.dimensions.css.cell.height+"px",y.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(y)}}_refreshXPosition(m,b=m.element){var y;if(!b)return;const x=(y=m.options.x)!==null&&y!==void 0?y:0;(m.options.anchor||"left")==="right"?b.style.right=x?x*this._renderService.dimensions.css.cell.width+"px":"":b.style.left=x?x*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){var b;(b=this._decorationElements.get(m))===null||b===void 0||b.remove(),this._decorationElements.delete(m),m.dispose()}};l.BufferDecorationRenderer=w=d([f(1,A.IBufferService),f(2,A.IDecorationService),f(3,_.IRenderService)],w)},5871:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(h){if(h.options.overviewRulerOptions){for(const d of this._zones)if(d.color===h.options.overviewRulerOptions.color&&d.position===h.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,h.marker.line))return;if(this._lineAdjacentToZone(d,h.marker.line,h.options.overviewRulerOptions.position))return void this._addLineToZone(d,h.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=h.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=h.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=h.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=h.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:h.options.overviewRulerOptions.color,position:h.options.overviewRulerOptions.position,startBufferLine:h.marker.line,endBufferLine:h.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(h){this._linePadding=h}_lineIntersectsZone(h,d){return d>=h.startBufferLine&&d<=h.endBufferLine}_lineAdjacentToZone(h,d,f){return d>=h.startBufferLine-this._linePadding[f||"full"]&&d<=h.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(h,d){h.startBufferLine=Math.min(h.startBufferLine,d),h.endBufferLine=Math.max(h.endBufferLine,d)}}},5744:function(c,l,h){var d=this&&this.__decorate||function(D,R,M,L){var k,I=arguments.length,V=I<3?R:L===null?L=Object.getOwnPropertyDescriptor(R,M):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(D,R,M,L);else for(var N=D.length-1;N>=0;N--)(k=D[N])&&(V=(I<3?k(V):I>3?k(R,M,V):k(R,M))||V);return I>3&&V&&Object.defineProperty(R,M,V),V},f=this&&this.__param||function(D,R){return function(M,L){R(M,L,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const g=h(5871),_=h(3656),E=h(4725),A=h(844),w=h(2585),m={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0},y={full:0,left:0,center:0,right:0};let x=l.OverviewRulerRenderer=class extends A.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(D,R,M,L,k,I,V){var N;super(),this._viewportElement=D,this._screenElement=R,this._bufferService=M,this._decorationService=L,this._renderService=k,this._optionsService=I,this._coreBrowseService=V,this._colorZoneStore=new g.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(N=this._viewportElement.parentElement)===null||N===void 0||N.insertBefore(this._canvas,this._viewportElement);const B=this._canvas.getContext("2d");if(!B)throw new Error("Ctx cannot be null");this._ctx=B,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,A.toDisposable)(()=>{var H;(H=this._canvas)===null||H===void 0||H.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const D=Math.floor(this._canvas.width/3),R=Math.ceil(this._canvas.width/3);b.full=this._canvas.width,b.left=D,b.center=R,b.right=D,this._refreshDrawHeightConstants(),y.full=0,y.left=0,y.center=b.left,y.right=b.left+b.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowseService.dpr);const D=this._canvas.height/this._bufferService.buffer.lines.length,R=Math.round(Math.max(Math.min(D,12),6)*this._coreBrowseService.dpr);m.left=R,m.center=R,m.right=R}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const R of this._decorationService.decorations)this._colorZoneStore.addDecoration(R);this._ctx.lineWidth=1;const D=this._colorZoneStore.zones;for(const R of D)R.position!=="full"&&this._renderColorZone(R);for(const R of D)R.position==="full"&&this._renderColorZone(R);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(D){this._ctx.fillStyle=D.color,this._ctx.fillRect(y[D.position||"full"],Math.round((this._canvas.height-1)*(D.startBufferLine/this._bufferService.buffers.active.lines.length)-m[D.position||"full"]/2),b[D.position||"full"],Math.round((this._canvas.height-1)*((D.endBufferLine-D.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[D.position||"full"]))}_queueRefresh(D,R){this._shouldUpdateDimensions=D||this._shouldUpdateDimensions,this._shouldUpdateAnchor=R||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};l.OverviewRulerRenderer=x=d([f(2,w.IBufferService),f(3,w.IDecorationService),f(4,E.IRenderService),f(5,w.IOptionsService),f(6,E.ICoreBrowserService)],x)},2950:function(c,l,h){var d=this&&this.__decorate||function(w,m,b,y){var x,D=arguments.length,R=D<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,m,b,y);else for(var M=w.length-1;M>=0;M--)(x=w[M])&&(R=(D<3?x(R):D>3?x(m,b,R):x(m,b))||R);return D>3&&R&&Object.defineProperty(m,b,R),R},f=this&&this.__param||function(w,m){return function(b,y){m(b,y,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const g=h(4725),_=h(2585),E=h(2584);let A=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,m,b,y,x,D){this._textarea=w,this._compositionView=m,this._bufferService=b,this._optionsService=y,this._coreService=x,this._renderService=D,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let b;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,b=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),b.length>0&&this._coreService.triggerDataEvent(b,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,b=m.replace(w,"");this._dataAlreadySent=b,m.length>w.length?this._coreService.triggerDataEvent(b,!0):m.length<w.length?this._coreService.triggerDataEvent(`${E.C0.DEL}`,!0):m.length===w.length&&m!==w&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),b=this._renderService.dimensions.css.cell.height,y=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,x=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=x+"px",this._compositionView.style.top=y+"px",this._compositionView.style.height=b+"px",this._compositionView.style.lineHeight=b+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const D=this._compositionView.getBoundingClientRect();this._textarea.style.left=x+"px",this._textarea.style.top=y+"px",this._textarea.style.width=Math.max(D.width,1)+"px",this._textarea.style.height=Math.max(D.height,1)+"px",this._textarea.style.lineHeight=D.height+"px"}w||setTimeout(()=>this.updateCompositionElements(!0),0)}}};l.CompositionHelper=A=d([f(2,_.IBufferService),f(3,_.IOptionsService),f(4,_.ICoreService),f(5,g.IRenderService)],A)},9806:(c,l)=>{function h(d,f,g){const _=g.getBoundingClientRect(),E=d.getComputedStyle(g),A=parseInt(E.getPropertyValue("padding-left")),w=parseInt(E.getPropertyValue("padding-top"));return[f.clientX-_.left-A,f.clientY-_.top-w]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=h,l.getCoords=function(d,f,g,_,E,A,w,m,b){if(!A)return;const y=h(d,f,g);return y?(y[0]=Math.ceil((y[0]+(b?w/2:0))/w),y[1]=Math.ceil(y[1]/m),y[0]=Math.min(Math.max(y[0],1),_+(b?1:0)),y[1]=Math.min(Math.max(y[1],1),E),y):void 0}},9504:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const d=h(2584);function f(m,b,y,x){const D=m-g(m,y),R=b-g(b,y),M=Math.abs(D-R)-function(L,k,I){let V=0;const N=L-g(L,I),B=k-g(k,I);for(let H=0;H<Math.abs(N-B);H++){const z=_(L,k)==="A"?-1:1,W=I.buffer.lines.get(N+z*H);W?.isWrapped&&V++}return V}(m,b,y);return w(M,A(_(m,b),x))}function g(m,b){let y=0,x=b.buffer.lines.get(m),D=x?.isWrapped;for(;D&&m>=0&&m<b.rows;)y++,x=b.buffer.lines.get(--m),D=x?.isWrapped;return y}function _(m,b){return m>b?"A":"B"}function E(m,b,y,x,D,R){let M=m,L=b,k="";for(;M!==y||L!==x;)M+=D?1:-1,D&&M>R.cols-1?(k+=R.buffer.translateBufferLineToString(L,!1,m,M),M=0,m=0,L++):!D&&M<0&&(k+=R.buffer.translateBufferLineToString(L,!1,0,m+1),M=R.cols-1,m=M,L--);return k+R.buffer.translateBufferLineToString(L,!1,m,M)}function A(m,b){const y=b?"O":"[";return d.C0.ESC+y+m}function w(m,b){m=Math.floor(m);let y="";for(let x=0;x<m;x++)y+=b;return y}l.moveToCellSequence=function(m,b,y,x){const D=y.buffer.x,R=y.buffer.y;if(!y.buffer.hasScrollback)return function(k,I,V,N,B,H){return f(I,N,B,H).length===0?"":w(E(k,I,k,I-g(I,B),!1,B).length,A("D",H))}(D,R,0,b,y,x)+f(R,b,y,x)+function(k,I,V,N,B,H){let z;z=f(I,N,B,H).length>0?N-g(N,B):I;const W=N,Q=function(X,G,q,Y,K,se){let Se;return Se=f(q,Y,K,se).length>0?Y-g(Y,K):G,X<q&&Se<=Y||X>=q&&Se<Y?"C":"D"}(k,I,V,N,B,H);return w(E(k,z,V,W,Q==="C",B).length,A(Q,H))}(D,R,m,b,y,x);let M;if(R===b)return M=D>m?"D":"C",w(Math.abs(D-m),A(M,x));M=R>b?"D":"C";const L=Math.abs(R-b);return w(function(k,I){return I.cols-k}(R>b?m:D,y)+(L-1)*y.cols+1+((R>b?D:m)-1),A(M,x))}},1296:function(c,l,h){var d=this&&this.__decorate||function(B,H,z,W){var Q,X=arguments.length,G=X<3?H:W===null?W=Object.getOwnPropertyDescriptor(H,z):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(B,H,z,W);else for(var q=B.length-1;q>=0;q--)(Q=B[q])&&(G=(X<3?Q(G):X>3?Q(H,z,G):Q(H,z))||G);return X>3&&G&&Object.defineProperty(H,z,G),G},f=this&&this.__param||function(B,H){return function(z,W){H(z,W,B)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const g=h(3787),_=h(2550),E=h(2223),A=h(6171),w=h(4725),m=h(8055),b=h(8460),y=h(844),x=h(2585),D="xterm-dom-renderer-owner-",R="xterm-rows",M="xterm-fg-",L="xterm-bg-",k="xterm-focus",I="xterm-selection";let V=1,N=l.DomRenderer=class extends y.Disposable{constructor(B,H,z,W,Q,X,G,q,Y,K){super(),this._element=B,this._screenElement=H,this._viewportElement=z,this._linkifier2=W,this._charSizeService=X,this._optionsService=G,this._bufferService=q,this._coreBrowserService=Y,this._themeService=K,this._terminalClass=V++,this._rowElements=[],this.onRequestRedraw=this.register(new b.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(R),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(I),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,A.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(se=>this._injectCss(se))),this._injectCss(this._themeService.colors),this._rowFactory=Q.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(D+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(se=>this._handleLinkHover(se))),this.register(this._linkifier2.onHideLinkUnderline(se=>this._handleLinkLeave(se))),this.register((0,y.toDisposable)(()=>{this._element.classList.remove(D+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const B=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*B,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*B),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/B),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/B),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const H=`${this._terminalSelector} .${R} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=H,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(B){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let H=`${this._terminalSelector} .${R} { color: ${B.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;H+=`${this._terminalSelector} .${R} .xterm-dim { color: ${m.color.multiplyOpacity(B.foreground,.5).css};}`,H+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,H+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",H+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${B.cursor.css};  color: ${B.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${B.cursor.css}; }}`,H+=`${this._terminalSelector} .${R}.${k} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${R}.${k} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${R} .xterm-cursor.xterm-cursor-block { background-color: ${B.cursor.css}; color: ${B.cursorAccent.css};}${this._terminalSelector} .${R} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${B.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${R} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${B.cursor.css} inset;}${this._terminalSelector} .${R} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${B.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,H+=`${this._terminalSelector} .${I} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${I} div { position: absolute; background-color: ${B.selectionBackgroundOpaque.css};}${this._terminalSelector} .${I} div { position: absolute; background-color: ${B.selectionInactiveBackgroundOpaque.css};}`;for(const[z,W]of B.ansi.entries())H+=`${this._terminalSelector} .${M}${z} { color: ${W.css}; }${this._terminalSelector} .${M}${z}.xterm-dim { color: ${m.color.multiplyOpacity(W,.5).css}; }${this._terminalSelector} .${L}${z} { background-color: ${W.css}; }`;H+=`${this._terminalSelector} .${M}${E.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(B.background).css}; }${this._terminalSelector} .${M}${E.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${m.color.multiplyOpacity(m.color.opaque(B.background),.5).css}; }${this._terminalSelector} .${L}${E.INVERTED_DEFAULT_COLOR} { background-color: ${B.foreground.css}; }`,this._themeStyleElement.textContent=H}_setDefaultSpacing(){const B=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${B}px`,this._rowFactory.defaultSpacing=B}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(B,H){for(let z=this._rowElements.length;z<=H;z++){const W=document.createElement("div");this._rowContainer.appendChild(W),this._rowElements.push(W)}for(;this._rowElements.length>H;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(B,H){this._refreshRowElements(B,H),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(k)}handleFocus(){this._rowContainer.classList.add(k),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(B,H,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(B,H,z),this.renderRows(0,this._bufferService.rows-1),!B||!H)return;const W=B[1]-this._bufferService.buffer.ydisp,Q=H[1]-this._bufferService.buffer.ydisp,X=Math.max(W,0),G=Math.min(Q,this._bufferService.rows-1);if(X>=this._bufferService.rows||G<0)return;const q=document.createDocumentFragment();if(z){const Y=B[0]>H[0];q.appendChild(this._createSelectionElement(X,Y?H[0]:B[0],Y?B[0]:H[0],G-X+1))}else{const Y=W===X?B[0]:0,K=X===Q?H[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(X,Y,K));const se=G-X-1;if(q.appendChild(this._createSelectionElement(X+1,0,this._bufferService.cols,se)),X!==G){const Se=Q===G?H[0]:this._bufferService.cols;q.appendChild(this._createSelectionElement(G,0,Se))}}this._selectionContainer.appendChild(q)}_createSelectionElement(B,H,z,W=1){const Q=document.createElement("div");return Q.style.height=W*this.dimensions.css.cell.height+"px",Q.style.top=B*this.dimensions.css.cell.height+"px",Q.style.left=H*this.dimensions.css.cell.width+"px",Q.style.width=this.dimensions.css.cell.width*(z-H)+"px",Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const B of this._rowElements)B.replaceChildren()}renderRows(B,H){const z=this._bufferService.buffer,W=z.ybase+z.y,Q=Math.min(z.x,this._bufferService.cols-1),X=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=B;Y<=H;Y++){const K=Y+z.ydisp,se=this._rowElements[Y],Se=z.lines.get(K);if(!se||!Se)break;se.replaceChildren(...this._rowFactory.createRow(Se,K,K===W,G,q,Q,X,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${D}${this._terminalClass}`}_handleLinkHover(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!0)}_handleLinkLeave(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!1)}_setCellUnderline(B,H,z,W,Q,X){z<0&&(B=0),W<0&&(H=0);const G=this._bufferService.rows-1;z=Math.max(Math.min(z,G),0),W=Math.max(Math.min(W,G),0),Q=Math.min(Q,this._bufferService.cols);const q=this._bufferService.buffer,Y=q.ybase+q.y,K=Math.min(q.x,Q-1),se=this._optionsService.rawOptions.cursorBlink,Se=this._optionsService.rawOptions.cursorStyle,be=this._optionsService.rawOptions.cursorInactiveStyle;for(let xe=z;xe<=W;++xe){const Ee=xe+q.ydisp,J=this._rowElements[xe],ne=q.lines.get(Ee);if(!J||!ne)break;J.replaceChildren(...this._rowFactory.createRow(ne,Ee,Ee===Y,Se,be,K,se,this.dimensions.css.cell.width,this._widthCache,X?xe===z?B:0:-1,X?(xe===W?H:Q)-1:-1))}}};l.DomRenderer=N=d([f(4,x.IInstantiationService),f(5,w.ICharSizeService),f(6,x.IOptionsService),f(7,x.IBufferService),f(8,w.ICoreBrowserService),f(9,w.IThemeService)],N)},3787:function(c,l,h){var d=this&&this.__decorate||function(M,L,k,I){var V,N=arguments.length,B=N<3?L:I===null?I=Object.getOwnPropertyDescriptor(L,k):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(M,L,k,I);else for(var H=M.length-1;H>=0;H--)(V=M[H])&&(B=(N<3?V(B):N>3?V(L,k,B):V(L,k))||B);return N>3&&B&&Object.defineProperty(L,k,B),B},f=this&&this.__param||function(M,L){return function(k,I){L(k,I,M)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const g=h(2223),_=h(643),E=h(511),A=h(2585),w=h(8055),m=h(4725),b=h(4269),y=h(6171),x=h(3734);let D=l.DomRendererRowFactory=class{constructor(M,L,k,I,V,N,B){this._document=M,this._characterJoinerService=L,this._optionsService=k,this._coreBrowserService=I,this._coreService=V,this._decorationService=N,this._themeService=B,this._workCell=new E.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(M,L,k){this._selectionStart=M,this._selectionEnd=L,this._columnSelectMode=k}createRow(M,L,k,I,V,N,B,H,z,W,Q){const X=[],G=this._characterJoinerService.getJoinedCharacters(L),q=this._themeService.colors;let Y,K=M.getNoBgTrimmedLength();k&&K<N+1&&(K=N+1);let se=0,Se="",be=0,xe=0,Ee=0,J=!1,ne=0,de=!1,ue=0;const Fe=[],Ie=W!==-1&&Q!==-1;for(let ye=0;ye<K;ye++){M.loadCell(ye,this._workCell);let $e=this._workCell.getWidth();if($e===0)continue;let Oe=!1,Le=ye,He=this._workCell;if(G.length>0&&ye===G[0][0]){Oe=!0;const ut=G.shift();He=new b.JoinedCellData(this._workCell,M.translateToString(!0,ut[0],ut[1]),ut[1]-ut[0]),Le=ut[1]-1,$e=He.getWidth()}const tt=this._isCellInSelection(ye,L),Ze=k&&ye===N,pt=Ie&&ye>=W&&ye<=Q;let fe=!1;this._decorationService.forEachDecorationAtCell(ye,L,void 0,ut=>{fe=!0});let Ne=He.getChars()||_.WHITESPACE_CELL_CHAR;if(Ne===" "&&(He.isUnderline()||He.isOverline())&&(Ne=" "),ue=$e*H-z.get(Ne,He.isBold(),He.isItalic()),Y){if(se&&(tt&&de||!tt&&!de&&He.bg===be)&&(tt&&de&&q.selectionForeground||He.fg===xe)&&He.extended.ext===Ee&&pt===J&&ue===ne&&!Ze&&!Oe&&!fe){Se+=Ne,se++;continue}se&&(Y.textContent=Se),Y=this._document.createElement("span"),se=0,Se=""}else Y=this._document.createElement("span");if(be=He.bg,xe=He.fg,Ee=He.extended.ext,J=pt,ne=ue,de=tt,Oe&&N>=ye&&N<=Le&&(N=ye),!this._coreService.isCursorHidden&&Ze){if(Fe.push("xterm-cursor"),this._coreBrowserService.isFocused)B&&Fe.push("xterm-cursor-blink"),Fe.push(I==="bar"?"xterm-cursor-bar":I==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(V)switch(V){case"outline":Fe.push("xterm-cursor-outline");break;case"block":Fe.push("xterm-cursor-block");break;case"bar":Fe.push("xterm-cursor-bar");break;case"underline":Fe.push("xterm-cursor-underline")}}if(He.isBold()&&Fe.push("xterm-bold"),He.isItalic()&&Fe.push("xterm-italic"),He.isDim()&&Fe.push("xterm-dim"),Se=He.isInvisible()?_.WHITESPACE_CELL_CHAR:He.getChars()||_.WHITESPACE_CELL_CHAR,He.isUnderline()&&(Fe.push(`xterm-underline-${He.extended.underlineStyle}`),Se===" "&&(Se=" "),!He.isUnderlineColorDefault()))if(He.isUnderlineColorRGB())Y.style.textDecorationColor=`rgb(${x.AttributeData.toColorRGB(He.getUnderlineColor()).join(",")})`;else{let ut=He.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&He.isBold()&&ut<8&&(ut+=8),Y.style.textDecorationColor=q.ansi[ut].css}He.isOverline()&&(Fe.push("xterm-overline"),Se===" "&&(Se=" ")),He.isStrikethrough()&&Fe.push("xterm-strikethrough"),pt&&(Y.style.textDecoration="underline");let we=He.getFgColor(),ke=He.getFgColorMode(),De=He.getBgColor(),Pe=He.getBgColorMode();const Je=!!He.isInverse();if(Je){const ut=we;we=De,De=ut;const nt=ke;ke=Pe,Pe=nt}let Ye,Ct,Rt,vt=!1;switch(this._decorationService.forEachDecorationAtCell(ye,L,void 0,ut=>{ut.options.layer!=="top"&&vt||(ut.backgroundColorRGB&&(Pe=50331648,De=ut.backgroundColorRGB.rgba>>8&16777215,Ye=ut.backgroundColorRGB),ut.foregroundColorRGB&&(ke=50331648,we=ut.foregroundColorRGB.rgba>>8&16777215,Ct=ut.foregroundColorRGB),vt=ut.options.layer==="top")}),!vt&&tt&&(Ye=this._coreBrowserService.isFocused?q.selectionBackgroundOpaque:q.selectionInactiveBackgroundOpaque,De=Ye.rgba>>8&16777215,Pe=50331648,vt=!0,q.selectionForeground&&(ke=50331648,we=q.selectionForeground.rgba>>8&16777215,Ct=q.selectionForeground)),vt&&Fe.push("xterm-decoration-top"),Pe){case 16777216:case 33554432:Rt=q.ansi[De],Fe.push(`xterm-bg-${De}`);break;case 50331648:Rt=w.rgba.toColor(De>>16,De>>8&255,255&De),this._addStyle(Y,`background-color:#${R((De>>>0).toString(16),"0",6)}`);break;default:Je?(Rt=q.foreground,Fe.push(`xterm-bg-${g.INVERTED_DEFAULT_COLOR}`)):Rt=q.background}switch(Ye||He.isDim()&&(Ye=w.color.multiplyOpacity(Rt,.5)),ke){case 16777216:case 33554432:He.isBold()&&we<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(we+=8),this._applyMinimumContrast(Y,Rt,q.ansi[we],He,Ye,void 0)||Fe.push(`xterm-fg-${we}`);break;case 50331648:const ut=w.rgba.toColor(we>>16&255,we>>8&255,255&we);this._applyMinimumContrast(Y,Rt,ut,He,Ye,Ct)||this._addStyle(Y,`color:#${R(we.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(Y,Rt,q.foreground,He,Ye,void 0)||Je&&Fe.push(`xterm-fg-${g.INVERTED_DEFAULT_COLOR}`)}Fe.length&&(Y.className=Fe.join(" "),Fe.length=0),Ze||Oe||fe?Y.textContent=Se:se++,ue!==this.defaultSpacing&&(Y.style.letterSpacing=`${ue}px`),X.push(Y),ye=Le}return Y&&se&&(Y.textContent=Se),X}_applyMinimumContrast(M,L,k,I,V,N){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,y.excludeFromContrastRatioDemands)(I.getCode()))return!1;const B=this._getContrastCache(I);let H;if(V||N||(H=B.getColor(L.rgba,k.rgba)),H===void 0){const z=this._optionsService.rawOptions.minimumContrastRatio/(I.isDim()?2:1);H=w.color.ensureContrastRatio(V||L,N||k,z),B.setColor((V||L).rgba,(N||k).rgba,H??null)}return!!H&&(this._addStyle(M,`color:${H.css}`),!0)}_getContrastCache(M){return M.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(M,L){M.setAttribute("style",`${M.getAttribute("style")||""}${L};`)}_isCellInSelection(M,L){const k=this._selectionStart,I=this._selectionEnd;return!(!k||!I)&&(this._columnSelectMode?k[0]<=I[0]?M>=k[0]&&L>=k[1]&&M<I[0]&&L<=I[1]:M<k[0]&&L>=k[1]&&M>=I[0]&&L<=I[1]:L>k[1]&&L<I[1]||k[1]===I[1]&&L===k[1]&&M>=k[0]&&M<I[0]||k[1]<I[1]&&L===I[1]&&M<I[0]||k[1]<I[1]&&L===k[1]&&M>=k[0])}};function R(M,L,k){for(;M.length<k;)M=L+M;return M}l.DomRendererRowFactory=D=d([f(1,m.ICharacterJoinerService),f(2,A.IOptionsService),f(3,m.ICoreBrowserService),f(4,A.ICoreService),f(5,A.IDecorationService),f(6,m.IThemeService)],D)},2550:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=h.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=h.createElement("span"),f=h.createElement("span");f.style.fontWeight="bold";const g=h.createElement("span");g.style.fontStyle="italic";const _=h.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[d,f,g,_],this._container.appendChild(d),this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(_),h.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(h,d,f,g){h===this._font&&d===this._fontSize&&f===this._weight&&g===this._weightBold||(this._font=h,this._fontSize=d,this._weight=f,this._weightBold=g,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${g}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${g}`,this.clear())}get(h,d,f){let g=0;if(!d&&!f&&h.length===1&&(g=h.charCodeAt(0))<256)return this._flat[g]!==-9999?this._flat[g]:this._flat[g]=this._measure(h,0);let _=h;d&&(_+="B"),f&&(_+="I");let E=this._holey.get(_);if(E===void 0){let A=0;d&&(A|=1),f&&(A|=2),E=this._measure(h,A),this._holey.set(_,E)}return E}_measure(h,d){const f=this._measureElements[d];return f.textContent=h.repeat(32),f.offsetWidth/32}}},2223:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const h=this.selectionStart,d=this.selectionEnd;return!(!h||!d)&&(h[1]>d[1]||h[1]===d[1]&&h[0]>d[0])}handleTrim(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const g=h(2585),_=h(8460),E=h(844);let A=l.CharSizeService=class extends E.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(m,b,y){super(),this._optionsService=y,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new w(m,b,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const m=this._measureStrategy.measure();m.width===this.width&&m.height===this.height||(this.width=m.width,this.height=m.height,this._onCharSizeChange.fire())}};l.CharSizeService=A=d([f(2,g.IOptionsService)],A);class w{constructor(b,y,x){this._document=b,this._parentElement=y,this._optionsService=x,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const b={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return b.width!==0&&b.height!==0&&(this._result.width=b.width/32,this._result.height=Math.ceil(b.height)),this._result}}},4269:function(c,l,h){var d=this&&this.__decorate||function(b,y,x,D){var R,M=arguments.length,L=M<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,x):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,y,x,D);else for(var k=b.length-1;k>=0;k--)(R=b[k])&&(L=(M<3?R(L):M>3?R(y,x,L):R(y,x))||L);return M>3&&L&&Object.defineProperty(y,x,L),L},f=this&&this.__param||function(b,y){return function(x,D){y(x,D,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const g=h(3734),_=h(643),E=h(511),A=h(2585);class w extends g.AttributeData{constructor(y,x,D){super(),this.content=0,this.combinedData="",this.fg=y.fg,this.bg=y.bg,this.combinedData=x,this._width=D}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(y){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let m=l.CharacterJoinerService=class vn{constructor(y){this._bufferService=y,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new E.CellData}register(y){const x={id:this._nextCharacterJoinerId++,handler:y};return this._characterJoiners.push(x),x.id}deregister(y){for(let x=0;x<this._characterJoiners.length;x++)if(this._characterJoiners[x].id===y)return this._characterJoiners.splice(x,1),!0;return!1}getJoinedCharacters(y){if(this._characterJoiners.length===0)return[];const x=this._bufferService.buffer.lines.get(y);if(!x||x.length===0)return[];const D=[],R=x.translateToString(!0);let M=0,L=0,k=0,I=x.getFg(0),V=x.getBg(0);for(let N=0;N<x.getTrimmedLength();N++)if(x.loadCell(N,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==V){if(N-M>1){const B=this._getJoinedRanges(R,k,L,x,M);for(let H=0;H<B.length;H++)D.push(B[H])}M=N,k=L,I=this._workCell.fg,V=this._workCell.bg}L+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-M>1){const N=this._getJoinedRanges(R,k,L,x,M);for(let B=0;B<N.length;B++)D.push(N[B])}return D}_getJoinedRanges(y,x,D,R,M){const L=y.substring(x,D);let k=[];try{k=this._characterJoiners[0].handler(L)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const V=this._characterJoiners[I].handler(L);for(let N=0;N<V.length;N++)vn._mergeRanges(k,V[N])}catch(V){console.error(V)}return this._stringRangesToCellRanges(k,R,M),k}_stringRangesToCellRanges(y,x,D){let R=0,M=!1,L=0,k=y[R];if(k){for(let I=D;I<this._bufferService.cols;I++){const V=x.getWidth(I),N=x.getString(I).length||_.WHITESPACE_CELL_CHAR.length;if(V!==0){if(!M&&k[0]<=L&&(k[0]=I,M=!0),k[1]<=L){if(k[1]=I,k=y[++R],!k)break;k[0]<=L?(k[0]=I,M=!0):M=!1}L+=N}}k&&(k[1]=this._bufferService.cols)}}static _mergeRanges(y,x){let D=!1;for(let R=0;R<y.length;R++){const M=y[R];if(D){if(x[1]<=M[0])return y[R-1][1]=x[1],y;if(x[1]<=M[1])return y[R-1][1]=Math.max(x[1],M[1]),y.splice(R,1),y;y.splice(R,1),R--}else{if(x[1]<=M[0])return y.splice(R,0,x),y;if(x[1]<=M[1])return M[0]=Math.min(x[0],M[0]),y;x[0]<M[1]&&(M[0]=Math.min(x[0],M[0]),D=!0)}}return D?y[y.length-1][1]=x[1]:y.push(x),y}};l.CharacterJoinerService=m=d([f(0,A.IBufferService)],m)},5114:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(h,d){this._textarea=h,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(c,l,h){var d=this&&this.__decorate||function(A,w,m,b){var y,x=arguments.length,D=x<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,w,m,b);else for(var R=A.length-1;R>=0;R--)(y=A[R])&&(D=(x<3?y(D):x>3?y(w,m,D):y(w,m))||D);return x>3&&D&&Object.defineProperty(w,m,D),D},f=this&&this.__param||function(A,w){return function(m,b){w(m,b,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const g=h(4725),_=h(9806);let E=l.MouseService=class{constructor(A,w){this._renderService=A,this._charSizeService=w}getCoords(A,w,m,b,y){return(0,_.getCoords)(window,A,w,m,b,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,y)}getMouseReportCoords(A,w){const m=(0,_.getCoordsRelativeToElement)(window,A,w);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};l.MouseService=E=d([f(0,g.IRenderService),f(1,g.ICharSizeService)],E)},3230:function(c,l,h){var d=this&&this.__decorate||function(D,R,M,L){var k,I=arguments.length,V=I<3?R:L===null?L=Object.getOwnPropertyDescriptor(R,M):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(D,R,M,L);else for(var N=D.length-1;N>=0;N--)(k=D[N])&&(V=(I<3?k(V):I>3?k(R,M,V):k(R,M))||V);return I>3&&V&&Object.defineProperty(R,M,V),V},f=this&&this.__param||function(D,R){return function(M,L){R(M,L,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const g=h(3656),_=h(6193),E=h(5596),A=h(4725),w=h(8460),m=h(844),b=h(7226),y=h(2585);let x=l.RenderService=class extends m.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(D,R,M,L,k,I,V,N){if(super(),this._rowCount=D,this._charSizeService=L,this._renderer=this.register(new m.MutableDisposable),this._pausedResizeTask=new b.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(V.window,(B,H)=>this._renderRows(B,H)),this.register(this._renderDebouncer),this._screenDprMonitor=new E.ScreenDprMonitor(V.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(I.onResize(()=>this._fullRefresh())),this.register(I.buffers.onBufferActivate(()=>{var B;return(B=this._renderer.value)===null||B===void 0?void 0:B.clear()})),this.register(M.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(k.onDecorationRegistered(()=>this._fullRefresh())),this.register(k.onDecorationRemoved(()=>this._fullRefresh())),this.register(M.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(I.cols,I.rows),this._fullRefresh()})),this.register(M.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(I.buffer.y,I.buffer.y,!0))),this.register((0,g.addDisposableDomListener)(V.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(N.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in V.window){const B=new V.window.IntersectionObserver(H=>this._handleIntersectionChange(H[H.length-1]),{threshold:0});B.observe(R),this.register({dispose:()=>B.disconnect()})}}_handleIntersectionChange(D){this._isPaused=D.isIntersecting===void 0?D.intersectionRatio===0:!D.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(D,R,M=!1){this._isPaused?this._needsFullRefresh=!0:(M||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(D,R,this._rowCount))}_renderRows(D,R){this._renderer.value&&(D=Math.min(D,this._rowCount-1),R=Math.min(R,this._rowCount-1),this._renderer.value.renderRows(D,R),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:D,end:R}),this._onRender.fire({start:D,end:R}),this._isNextRenderRedrawOnly=!0)}resize(D,R){this._rowCount=R,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(D){this._renderer.value=D,this._renderer.value.onRequestRedraw(R=>this.refreshRows(R.start,R.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(D){return this._renderDebouncer.addRefreshCallback(D)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var D,R;this._renderer.value&&((R=(D=this._renderer.value).clearTextureAtlas)===null||R===void 0||R.call(D),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(D,R){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(D,R)):this._renderer.value.handleResize(D,R),this._fullRefresh())}handleCharSizeChanged(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCharSizeChanged()}handleBlur(){var D;(D=this._renderer.value)===null||D===void 0||D.handleBlur()}handleFocus(){var D;(D=this._renderer.value)===null||D===void 0||D.handleFocus()}handleSelectionChanged(D,R,M){var L;this._selectionState.start=D,this._selectionState.end=R,this._selectionState.columnSelectMode=M,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(D,R,M)}handleCursorMove(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCursorMove()}clear(){var D;(D=this._renderer.value)===null||D===void 0||D.clear()}};l.RenderService=x=d([f(2,y.IOptionsService),f(3,A.ICharSizeService),f(4,y.IDecorationService),f(5,y.IBufferService),f(6,A.ICoreBrowserService),f(7,A.IThemeService)],x)},9312:function(c,l,h){var d=this&&this.__decorate||function(k,I,V,N){var B,H=arguments.length,z=H<3?I:N===null?N=Object.getOwnPropertyDescriptor(I,V):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(k,I,V,N);else for(var W=k.length-1;W>=0;W--)(B=k[W])&&(z=(H<3?B(z):H>3?B(I,V,z):B(I,V))||z);return H>3&&z&&Object.defineProperty(I,V,z),z},f=this&&this.__param||function(k,I){return function(V,N){I(V,N,k)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const g=h(9806),_=h(9504),E=h(456),A=h(4725),w=h(8460),m=h(844),b=h(6114),y=h(4841),x=h(511),D=h(2585),R=" ",M=new RegExp(R,"g");let L=l.SelectionService=class extends m.Disposable{constructor(k,I,V,N,B,H,z,W,Q){super(),this._element=k,this._screenElement=I,this._linkifier=V,this._bufferService=N,this._coreService=B,this._mouseService=H,this._optionsService=z,this._renderService=W,this._coreBrowserService=Q,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new x.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=X=>this._handleMouseMove(X),this._mouseUpListener=X=>this._handleMouseUp(X),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(X=>this._handleTrim(X)),this.register(this._bufferService.buffers.onBufferActivate(X=>this._handleBufferActivate(X))),this.enable(),this._model=new E.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const k=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!k||!I||k[0]===I[0]&&k[1]===I[1])}get selectionText(){const k=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!k||!I)return"";const V=this._bufferService.buffer,N=[];if(this._activeSelectionMode===3){if(k[0]===I[0])return"";const B=k[0]<I[0]?k[0]:I[0],H=k[0]<I[0]?I[0]:k[0];for(let z=k[1];z<=I[1];z++){const W=V.translateBufferLineToString(z,!0,B,H);N.push(W)}}else{const B=k[1]===I[1]?I[0]:void 0;N.push(V.translateBufferLineToString(k[1],!0,k[0],B));for(let H=k[1]+1;H<=I[1]-1;H++){const z=V.lines.get(H),W=V.translateBufferLineToString(H,!0);z?.isWrapped?N[N.length-1]+=W:N.push(W)}if(k[1]!==I[1]){const H=V.lines.get(I[1]),z=V.translateBufferLineToString(I[1],!0,0,I[0]);H&&H.isWrapped?N[N.length-1]+=z:N.push(z)}}return N.map(B=>B.replace(M," ")).join(b.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(k){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),b.isLinux&&k&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(k){const I=this._getMouseBufferCoords(k),V=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!!(V&&N&&I)&&this._areCoordsInSelection(I,V,N)}isCellInSelection(k,I){const V=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!V||!N)&&this._areCoordsInSelection([k,I],V,N)}_areCoordsInSelection(k,I,V){return k[1]>I[1]&&k[1]<V[1]||I[1]===V[1]&&k[1]===I[1]&&k[0]>=I[0]&&k[0]<V[0]||I[1]<V[1]&&k[1]===V[1]&&k[0]<V[0]||I[1]<V[1]&&k[1]===I[1]&&k[0]>=I[0]}_selectWordAtCursor(k,I){var V,N;const B=(N=(V=this._linkifier.currentLink)===null||V===void 0?void 0:V.link)===null||N===void 0?void 0:N.range;if(B)return this._model.selectionStart=[B.start.x-1,B.start.y-1],this._model.selectionStartLength=(0,y.getRangeLength)(B,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const H=this._getMouseBufferCoords(k);return!!H&&(this._selectWordAt(H,I),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(k,I){this._model.clearSelection(),k=Math.max(k,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,k],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()}_handleTrim(k){this._model.handleTrim(k)&&this.refresh()}_getMouseBufferCoords(k){const I=this._mouseService.getCoords(k,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I}_getMouseEventScrollAmount(k){let I=(0,g.getCoordsRelativeToElement)(this._coreBrowserService.window,k,this._screenElement)[1];const V=this._renderService.dimensions.css.canvas.height;return I>=0&&I<=V?0:(I>V&&(I-=V),I=Math.min(Math.max(I,-50),50),I/=50,I/Math.abs(I)+Math.round(14*I))}shouldForceSelection(k){return b.isMac?k.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:k.shiftKey}handleMouseDown(k){if(this._mouseDownTimeStamp=k.timeStamp,(k.button!==2||!this.hasSelection)&&k.button===0){if(!this._enabled){if(!this.shouldForceSelection(k))return;k.stopPropagation()}k.preventDefault(),this._dragScrollAmount=0,this._enabled&&k.shiftKey?this._handleIncrementalClick(k):k.detail===1?this._handleSingleClick(k):k.detail===2?this._handleDoubleClick(k):k.detail===3&&this._handleTripleClick(k),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(k){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(k))}_handleSingleClick(k){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(k)?3:0,this._model.selectionStart=this._getMouseBufferCoords(k),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(k){this._selectWordAtCursor(k,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(k){const I=this._getMouseBufferCoords(k);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))}shouldColumnSelect(k){return k.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(k){if(k.stopImmediatePropagation(),!this._model.selectionStart)return;const I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(k),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(k),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const V=this._bufferService.buffer;if(this._model.selectionEnd[1]<V.lines.length){const N=V.lines.get(this._model.selectionEnd[1]);N&&N.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const k=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(k.ydisp+this._bufferService.rows,k.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=k.ydisp),this.refresh()}}_handleMouseUp(k){const I=k.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&k.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const V=this._mouseService.getCoords(k,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(V&&V[0]!==void 0&&V[1]!==void 0){const N=(0,_.moveToCellSequence)(V[0]-1,V[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(N,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const k=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,V=!(!k||!I||k[0]===I[0]&&k[1]===I[1]);V?k&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&k[0]===this._oldSelectionStart[0]&&k[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(k,I,V)):this._oldHasSelection&&this._fireOnSelectionChange(k,I,V)}_fireOnSelectionChange(k,I,V){this._oldSelectionStart=k,this._oldSelectionEnd=I,this._oldHasSelection=V,this._onSelectionChange.fire()}_handleBufferActivate(k){this.clearSelection(),this._trimListener.dispose(),this._trimListener=k.activeBuffer.lines.onTrim(I=>this._handleTrim(I))}_convertViewportColToCharacterIndex(k,I){let V=I;for(let N=0;I>=N;N++){const B=k.loadCell(N,this._workCell).getChars().length;this._workCell.getWidth()===0?V--:B>1&&I!==N&&(V+=B-1)}return V}setSelection(k,I,V){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[k,I],this._model.selectionStartLength=V,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(k){this._isClickInSelection(k)||(this._selectWordAtCursor(k,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(k,I,V=!0,N=!0){if(k[0]>=this._bufferService.cols)return;const B=this._bufferService.buffer,H=B.lines.get(k[1]);if(!H)return;const z=B.translateBufferLineToString(k[1],!1);let W=this._convertViewportColToCharacterIndex(H,k[0]),Q=W;const X=k[0]-W;let G=0,q=0,Y=0,K=0;if(z.charAt(W)===" "){for(;W>0&&z.charAt(W-1)===" ";)W--;for(;Q<z.length&&z.charAt(Q+1)===" ";)Q++}else{let be=k[0],xe=k[0];H.getWidth(be)===0&&(G++,be--),H.getWidth(xe)===2&&(q++,xe++);const Ee=H.getString(xe).length;for(Ee>1&&(K+=Ee-1,Q+=Ee-1);be>0&&W>0&&!this._isCharWordSeparator(H.loadCell(be-1,this._workCell));){H.loadCell(be-1,this._workCell);const J=this._workCell.getChars().length;this._workCell.getWidth()===0?(G++,be--):J>1&&(Y+=J-1,W-=J-1),W--,be--}for(;xe<H.length&&Q+1<z.length&&!this._isCharWordSeparator(H.loadCell(xe+1,this._workCell));){H.loadCell(xe+1,this._workCell);const J=this._workCell.getChars().length;this._workCell.getWidth()===2?(q++,xe++):J>1&&(K+=J-1,Q+=J-1),Q++,xe++}}Q++;let se=W+X-G+Y,Se=Math.min(this._bufferService.cols,Q-W+G+q-Y-K);if(I||z.slice(W,Q).trim()!==""){if(V&&se===0&&H.getCodePoint(0)!==32){const be=B.lines.get(k[1]-1);if(be&&H.isWrapped&&be.getCodePoint(this._bufferService.cols-1)!==32){const xe=this._getWordAt([this._bufferService.cols-1,k[1]-1],!1,!0,!1);if(xe){const Ee=this._bufferService.cols-xe.start;se-=Ee,Se+=Ee}}}if(N&&se+Se===this._bufferService.cols&&H.getCodePoint(this._bufferService.cols-1)!==32){const be=B.lines.get(k[1]+1);if(be?.isWrapped&&be.getCodePoint(0)!==32){const xe=this._getWordAt([0,k[1]+1],!1,!1,!0);xe&&(Se+=xe.length)}}return{start:se,length:Se}}}_selectWordAt(k,I){const V=this._getWordAt(k,I);if(V){for(;V.start<0;)V.start+=this._bufferService.cols,k[1]--;this._model.selectionStart=[V.start,k[1]],this._model.selectionStartLength=V.length}}_selectToWordAt(k){const I=this._getWordAt(k,!0);if(I){let V=k[1];for(;I.start<0;)I.start+=this._bufferService.cols,V--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,V++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,V]}}_isCharWordSeparator(k){return k.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(k.getChars())>=0}_selectLineAt(k){const I=this._bufferService.buffer.getWrappedRangeForLine(k),V={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,y.getRangeLength)(V,this._bufferService.cols)}};l.SelectionService=L=d([f(3,D.IBufferService),f(4,D.ICoreService),f(5,A.IMouseService),f(6,D.IOptionsService),f(7,A.IRenderService),f(8,A.ICoreBrowserService)],L)},4725:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const d=h(8343);l.ICharSizeService=(0,d.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),l.IMouseService=(0,d.createDecorator)("MouseService"),l.IRenderService=(0,d.createDecorator)("RenderService"),l.ISelectionService=(0,d.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(c,l,h){var d=this&&this.__decorate||function(L,k,I,V){var N,B=arguments.length,H=B<3?k:V===null?V=Object.getOwnPropertyDescriptor(k,I):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(L,k,I,V);else for(var z=L.length-1;z>=0;z--)(N=L[z])&&(H=(B<3?N(H):B>3?N(k,I,H):N(k,I))||H);return B>3&&H&&Object.defineProperty(k,I,H),H},f=this&&this.__param||function(L,k){return function(I,V){k(I,V,L)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const g=h(7239),_=h(8055),E=h(8460),A=h(844),w=h(2585),m=_.css.toColor("#ffffff"),b=_.css.toColor("#000000"),y=_.css.toColor("#ffffff"),x=_.css.toColor("#000000"),D={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],k=[0,95,135,175,215,255];for(let I=0;I<216;I++){const V=k[I/36%6|0],N=k[I/6%6|0],B=k[I%6];L.push({css:_.channels.toCss(V,N,B),rgba:_.channels.toRgba(V,N,B)})}for(let I=0;I<24;I++){const V=8+10*I;L.push({css:_.channels.toCss(V,V,V),rgba:_.channels.toRgba(V,V,V)})}return L})());let R=l.ThemeService=class extends A.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new g.ColorContrastCache,this._halfContrastCache=new g.ColorContrastCache,this._onChangeColors=this.register(new E.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:b,cursor:y,cursorAccent:x,selectionForeground:void 0,selectionBackgroundTransparent:D,selectionBackgroundOpaque:_.color.blend(b,D),selectionInactiveBackgroundTransparent:D,selectionInactiveBackgroundOpaque:_.color.blend(b,D),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const k=this._colors;if(k.foreground=M(L.foreground,m),k.background=M(L.background,b),k.cursor=M(L.cursor,y),k.cursorAccent=M(L.cursorAccent,x),k.selectionBackgroundTransparent=M(L.selectionBackground,D),k.selectionBackgroundOpaque=_.color.blend(k.background,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundTransparent=M(L.selectionInactiveBackground,k.selectionBackgroundTransparent),k.selectionInactiveBackgroundOpaque=_.color.blend(k.background,k.selectionInactiveBackgroundTransparent),k.selectionForeground=L.selectionForeground?M(L.selectionForeground,_.NULL_COLOR):void 0,k.selectionForeground===_.NULL_COLOR&&(k.selectionForeground=void 0),_.color.isOpaque(k.selectionBackgroundTransparent)&&(k.selectionBackgroundTransparent=_.color.opacity(k.selectionBackgroundTransparent,.3)),_.color.isOpaque(k.selectionInactiveBackgroundTransparent)&&(k.selectionInactiveBackgroundTransparent=_.color.opacity(k.selectionInactiveBackgroundTransparent,.3)),k.ansi=l.DEFAULT_ANSI_COLORS.slice(),k.ansi[0]=M(L.black,l.DEFAULT_ANSI_COLORS[0]),k.ansi[1]=M(L.red,l.DEFAULT_ANSI_COLORS[1]),k.ansi[2]=M(L.green,l.DEFAULT_ANSI_COLORS[2]),k.ansi[3]=M(L.yellow,l.DEFAULT_ANSI_COLORS[3]),k.ansi[4]=M(L.blue,l.DEFAULT_ANSI_COLORS[4]),k.ansi[5]=M(L.magenta,l.DEFAULT_ANSI_COLORS[5]),k.ansi[6]=M(L.cyan,l.DEFAULT_ANSI_COLORS[6]),k.ansi[7]=M(L.white,l.DEFAULT_ANSI_COLORS[7]),k.ansi[8]=M(L.brightBlack,l.DEFAULT_ANSI_COLORS[8]),k.ansi[9]=M(L.brightRed,l.DEFAULT_ANSI_COLORS[9]),k.ansi[10]=M(L.brightGreen,l.DEFAULT_ANSI_COLORS[10]),k.ansi[11]=M(L.brightYellow,l.DEFAULT_ANSI_COLORS[11]),k.ansi[12]=M(L.brightBlue,l.DEFAULT_ANSI_COLORS[12]),k.ansi[13]=M(L.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),k.ansi[14]=M(L.brightCyan,l.DEFAULT_ANSI_COLORS[14]),k.ansi[15]=M(L.brightWhite,l.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const I=Math.min(k.ansi.length-16,L.extendedAnsi.length);for(let V=0;V<I;V++)k.ansi[V+16]=M(L.extendedAnsi[V],l.DEFAULT_ANSI_COLORS[V+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let k=0;k<this._restoreColors.ansi.length;++k)this._colors.ansi[k]=this._restoreColors.ansi[k]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function M(L,k){if(L!==void 0)try{return _.css.toColor(L)}catch{}return k}l.ThemeService=R=d([f(0,w.IOptionsService)],R)},6349:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const d=h(8460),f=h(844);class g extends f.Disposable{constructor(E){super(),this._maxLength=E,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(E){if(this._maxLength===E)return;const A=new Array(E);for(let w=0;w<Math.min(E,this.length);w++)A[w]=this._array[this._getCyclicIndex(w)];this._array=A,this._maxLength=E,this._startIndex=0}get length(){return this._length}set length(E){if(E>this._length)for(let A=this._length;A<E;A++)this._array[A]=void 0;this._length=E}get(E){return this._array[this._getCyclicIndex(E)]}set(E,A){this._array[this._getCyclicIndex(E)]=A}push(E){this._array[this._getCyclicIndex(this._length)]=E,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(E,A,...w){if(A){for(let m=E;m<this._length-A;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+A)];this._length-=A,this.onDeleteEmitter.fire({index:E,amount:A})}for(let m=this._length-1;m>=E;m--)this._array[this._getCyclicIndex(m+w.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<w.length;m++)this._array[this._getCyclicIndex(E+m)]=w[m];if(w.length&&this.onInsertEmitter.fire({index:E,amount:w.length}),this._length+w.length>this._maxLength){const m=this._length+w.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=w.length}trimStart(E){E>this._length&&(E=this._length),this._startIndex+=E,this._length-=E,this.onTrimEmitter.fire(E)}shiftElements(E,A,w){if(!(A<=0)){if(E<0||E>=this._length)throw new Error("start argument out of range");if(E+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let b=A-1;b>=0;b--)this.set(E+b+w,this.get(E+b));const m=E+A+w-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<A;m++)this.set(E+m+w,this.get(E+m))}}_getCyclicIndex(E){return(this._startIndex+E)%this._maxLength}}l.CircularList=g},1439:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function h(d,f=5){if(typeof d!="object")return d;const g=Array.isArray(d)?[]:{};for(const _ in d)g[_]=f<=1?d[_]:d[_]&&h(d[_],f-1);return g}},8055:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(6114);let f=0,g=0,_=0,E=0;var A,w,m,b,y;function x(R){const M=R.toString(16);return M.length<2?"0"+M:M}function D(R,M){return R<M?(M+.05)/(R+.05):(R+.05)/(M+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(R){R.toCss=function(M,L,k,I){return I!==void 0?`#${x(M)}${x(L)}${x(k)}${x(I)}`:`#${x(M)}${x(L)}${x(k)}`},R.toRgba=function(M,L,k,I=255){return(M<<24|L<<16|k<<8|I)>>>0}}(A||(l.channels=A={})),function(R){function M(L,k){return E=Math.round(255*k),[f,g,_]=y.toChannels(L.rgba),{css:A.toCss(f,g,_,E),rgba:A.toRgba(f,g,_,E)}}R.blend=function(L,k){if(E=(255&k.rgba)/255,E===1)return{css:k.css,rgba:k.rgba};const I=k.rgba>>24&255,V=k.rgba>>16&255,N=k.rgba>>8&255,B=L.rgba>>24&255,H=L.rgba>>16&255,z=L.rgba>>8&255;return f=B+Math.round((I-B)*E),g=H+Math.round((V-H)*E),_=z+Math.round((N-z)*E),{css:A.toCss(f,g,_),rgba:A.toRgba(f,g,_)}},R.isOpaque=function(L){return(255&L.rgba)==255},R.ensureContrastRatio=function(L,k,I){const V=y.ensureContrastRatio(L.rgba,k.rgba,I);if(V)return y.toColor(V>>24&255,V>>16&255,V>>8&255)},R.opaque=function(L){const k=(255|L.rgba)>>>0;return[f,g,_]=y.toChannels(k),{css:A.toCss(f,g,_),rgba:k}},R.opacity=M,R.multiplyOpacity=function(L,k){return E=255&L.rgba,M(L,E*k/255)},R.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(R){let M,L;if(!d.isNode){const k=document.createElement("canvas");k.width=1,k.height=1;const I=k.getContext("2d",{willReadFrequently:!0});I&&(M=I,M.globalCompositeOperation="copy",L=M.createLinearGradient(0,0,1,1))}R.toColor=function(k){if(k.match(/#[\da-f]{3,8}/i))switch(k.length){case 4:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),y.toColor(f,g,_);case 5:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),E=parseInt(k.slice(4,5).repeat(2),16),y.toColor(f,g,_,E);case 7:return{css:k,rgba:(parseInt(k.slice(1),16)<<8|255)>>>0};case 9:return{css:k,rgba:parseInt(k.slice(1),16)>>>0}}const I=k.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(I)return f=parseInt(I[1]),g=parseInt(I[2]),_=parseInt(I[3]),E=Math.round(255*(I[5]===void 0?1:parseFloat(I[5]))),y.toColor(f,g,_,E);if(!M||!L)throw new Error("css.toColor: Unsupported css format");if(M.fillStyle=L,M.fillStyle=k,typeof M.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(M.fillRect(0,0,1,1),[f,g,_,E]=M.getImageData(0,0,1,1).data,E!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,_,E),css:k}}}(m||(l.css=m={})),function(R){function M(L,k,I){const V=L/255,N=k/255,B=I/255;return .2126*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.7152*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}R.relativeLuminance=function(L){return M(L>>16&255,L>>8&255,255&L)},R.relativeLuminance2=M}(b||(l.rgb=b={})),function(R){function M(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z>0||W>0||Q>0);)z-=Math.max(0,Math.ceil(.1*z)),W-=Math.max(0,Math.ceil(.1*W)),Q-=Math.max(0,Math.ceil(.1*Q)),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}function L(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z<255||W<255||Q<255);)z=Math.min(255,z+Math.ceil(.1*(255-z))),W=Math.min(255,W+Math.ceil(.1*(255-W))),Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}R.ensureContrastRatio=function(k,I,V){const N=b.relativeLuminance(k>>8),B=b.relativeLuminance(I>>8);if(D(N,B)<V){if(B<N){const W=M(k,I,V),Q=D(N,b.relativeLuminance(W>>8));if(Q<V){const X=L(k,I,V);return Q>D(N,b.relativeLuminance(X>>8))?W:X}return W}const H=L(k,I,V),z=D(N,b.relativeLuminance(H>>8));if(z<V){const W=M(k,I,V);return z>D(N,b.relativeLuminance(W>>8))?H:W}return H}},R.reduceLuminance=M,R.increaseLuminance=L,R.toChannels=function(k){return[k>>24&255,k>>16&255,k>>8&255,255&k]},R.toColor=function(k,I,V,N){return{css:A.toCss(k,I,V,N),rgba:A.toRgba(k,I,V,N)}}}(y||(l.rgba=y={})),l.toPaddedHex=x,l.contrastRatio=D},8969:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const d=h(844),f=h(2585),g=h(4348),_=h(7866),E=h(744),A=h(7302),w=h(6975),m=h(8460),b=h(1753),y=h(1480),x=h(7994),D=h(9282),R=h(5435),M=h(5981),L=h(2660);let k=!1;class I extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(N=>{var B;(B=this._onScrollApi)===null||B===void 0||B.fire(N.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(N){for(const B in N)this.optionsService.options[B]=N[B]}constructor(N){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new g.InstantiationService,this.optionsService=this.register(new A.OptionsService(N)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(E.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(b.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(y.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(x.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new R.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(B=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new M.WriteBuffer((B,H)=>this._inputHandler.parse(B,H))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(N,B){this._writeBuffer.write(N,B)}writeSync(N,B){this._logService.logLevel<=f.LogLevelEnum.WARN&&!k&&(this._logService.warn("writeSync is unreliable and will be removed soon."),k=!0),this._writeBuffer.writeSync(N,B)}resize(N,B){isNaN(N)||isNaN(B)||(N=Math.max(N,E.MINIMUM_COLS),B=Math.max(B,E.MINIMUM_ROWS),this._bufferService.resize(N,B))}scroll(N,B=!1){this._bufferService.scroll(N,B)}scrollLines(N,B,H){this._bufferService.scrollLines(N,B,H)}scrollPages(N){this.scrollLines(N*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(N){const B=N-this._bufferService.buffer.ydisp;B!==0&&this.scrollLines(B)}registerEscHandler(N,B){return this._inputHandler.registerEscHandler(N,B)}registerDcsHandler(N,B){return this._inputHandler.registerDcsHandler(N,B)}registerCsiHandler(N,B){return this._inputHandler.registerCsiHandler(N,B)}registerOscHandler(N,B){return this._inputHandler.registerOscHandler(N,B)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let N=!1;const B=this.optionsService.rawOptions.windowsPty;B&&B.buildNumber!==void 0&&B.buildNumber!==void 0?N=B.backend==="conpty"&&B.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(N=!0),N?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const N=[];N.push(this.onLineFeed(D.updateWindowsModeWrappedState.bind(null,this._bufferService))),N.push(this.registerCsiHandler({final:"H"},()=>((0,D.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const B of N)B.dispose()})}}}l.CoreTerminal=I},8460:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},5435:function(c,l,h){var d=this&&this.__decorate||function(X,G,q,Y){var K,se=arguments.length,Se=se<3?G:Y===null?Y=Object.getOwnPropertyDescriptor(G,q):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Se=Reflect.decorate(X,G,q,Y);else for(var be=X.length-1;be>=0;be--)(K=X[be])&&(Se=(se<3?K(Se):se>3?K(G,q,Se):K(G,q))||Se);return se>3&&Se&&Object.defineProperty(G,q,Se),Se},f=this&&this.__param||function(X,G){return function(q,Y){G(q,Y,X)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const g=h(2584),_=h(7116),E=h(2015),A=h(844),w=h(482),m=h(8437),b=h(8460),y=h(643),x=h(511),D=h(3734),R=h(2585),M=h(6242),L=h(6351),k=h(5941),I={"(":0,")":1,"*":2,"+":3,"-":1,".":2},V=131072;function N(X,G){if(X>24)return G.setWinLines||!1;switch(X){case 1:return!!G.restoreWin;case 2:return!!G.minimizeWin;case 3:return!!G.setWinPosition;case 4:return!!G.setWinSizePixels;case 5:return!!G.raiseWin;case 6:return!!G.lowerWin;case 7:return!!G.refreshWin;case 8:return!!G.setWinSizeChars;case 9:return!!G.maximizeWin;case 10:return!!G.fullscreenWin;case 11:return!!G.getWinState;case 13:return!!G.getWinPosition;case 14:return!!G.getWinSizePixels;case 15:return!!G.getScreenSizePixels;case 16:return!!G.getCellSizePixels;case 18:return!!G.getWinSizeChars;case 19:return!!G.getScreenSizeChars;case 20:return!!G.getIconTitle;case 21:return!!G.getWinTitle;case 22:return!!G.pushTitle;case 23:return!!G.popTitle;case 24:return!!G.setWinLines}return!1}var B;(function(X){X[X.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",X[X.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(B||(l.WindowsOptionsReportType=B={}));let H=0;class z extends A.Disposable{getAttrData(){return this._curAttrData}constructor(G,q,Y,K,se,Se,be,xe,Ee=new E.EscapeSequenceParser){super(),this._bufferService=G,this._charsetService=q,this._coreService=Y,this._logService=K,this._optionsService=se,this._oscLinkService=Se,this._coreMouseService=be,this._unicodeService=xe,this._parser=Ee,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new x.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new b.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new b.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new b.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new b.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new b.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new b.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new b.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new b.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new b.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new b.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new W(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(J=>this._activeBuffer=J.activeBuffer)),this._parser.setCsiHandlerFallback((J,ne)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(J),params:ne.toArray()})}),this._parser.setEscHandlerFallback(J=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(J)})}),this._parser.setExecuteHandlerFallback(J=>{this._logService.debug("Unknown EXECUTE code: ",{code:J})}),this._parser.setOscHandlerFallback((J,ne,de)=>{this._logService.debug("Unknown OSC code: ",{identifier:J,action:ne,data:de})}),this._parser.setDcsHandlerFallback((J,ne,de)=>{ne==="HOOK"&&(de=de.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(J),action:ne,payload:de})}),this._parser.setPrintHandler((J,ne,de)=>this.print(J,ne,de)),this._parser.registerCsiHandler({final:"@"},J=>this.insertChars(J)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},J=>this.scrollLeft(J)),this._parser.registerCsiHandler({final:"A"},J=>this.cursorUp(J)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},J=>this.scrollRight(J)),this._parser.registerCsiHandler({final:"B"},J=>this.cursorDown(J)),this._parser.registerCsiHandler({final:"C"},J=>this.cursorForward(J)),this._parser.registerCsiHandler({final:"D"},J=>this.cursorBackward(J)),this._parser.registerCsiHandler({final:"E"},J=>this.cursorNextLine(J)),this._parser.registerCsiHandler({final:"F"},J=>this.cursorPrecedingLine(J)),this._parser.registerCsiHandler({final:"G"},J=>this.cursorCharAbsolute(J)),this._parser.registerCsiHandler({final:"H"},J=>this.cursorPosition(J)),this._parser.registerCsiHandler({final:"I"},J=>this.cursorForwardTab(J)),this._parser.registerCsiHandler({final:"J"},J=>this.eraseInDisplay(J,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},J=>this.eraseInDisplay(J,!0)),this._parser.registerCsiHandler({final:"K"},J=>this.eraseInLine(J,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},J=>this.eraseInLine(J,!0)),this._parser.registerCsiHandler({final:"L"},J=>this.insertLines(J)),this._parser.registerCsiHandler({final:"M"},J=>this.deleteLines(J)),this._parser.registerCsiHandler({final:"P"},J=>this.deleteChars(J)),this._parser.registerCsiHandler({final:"S"},J=>this.scrollUp(J)),this._parser.registerCsiHandler({final:"T"},J=>this.scrollDown(J)),this._parser.registerCsiHandler({final:"X"},J=>this.eraseChars(J)),this._parser.registerCsiHandler({final:"Z"},J=>this.cursorBackwardTab(J)),this._parser.registerCsiHandler({final:"`"},J=>this.charPosAbsolute(J)),this._parser.registerCsiHandler({final:"a"},J=>this.hPositionRelative(J)),this._parser.registerCsiHandler({final:"b"},J=>this.repeatPrecedingCharacter(J)),this._parser.registerCsiHandler({final:"c"},J=>this.sendDeviceAttributesPrimary(J)),this._parser.registerCsiHandler({prefix:">",final:"c"},J=>this.sendDeviceAttributesSecondary(J)),this._parser.registerCsiHandler({final:"d"},J=>this.linePosAbsolute(J)),this._parser.registerCsiHandler({final:"e"},J=>this.vPositionRelative(J)),this._parser.registerCsiHandler({final:"f"},J=>this.hVPosition(J)),this._parser.registerCsiHandler({final:"g"},J=>this.tabClear(J)),this._parser.registerCsiHandler({final:"h"},J=>this.setMode(J)),this._parser.registerCsiHandler({prefix:"?",final:"h"},J=>this.setModePrivate(J)),this._parser.registerCsiHandler({final:"l"},J=>this.resetMode(J)),this._parser.registerCsiHandler({prefix:"?",final:"l"},J=>this.resetModePrivate(J)),this._parser.registerCsiHandler({final:"m"},J=>this.charAttributes(J)),this._parser.registerCsiHandler({final:"n"},J=>this.deviceStatus(J)),this._parser.registerCsiHandler({prefix:"?",final:"n"},J=>this.deviceStatusPrivate(J)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},J=>this.softReset(J)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},J=>this.setCursorStyle(J)),this._parser.registerCsiHandler({final:"r"},J=>this.setScrollRegion(J)),this._parser.registerCsiHandler({final:"s"},J=>this.saveCursor(J)),this._parser.registerCsiHandler({final:"t"},J=>this.windowOptions(J)),this._parser.registerCsiHandler({final:"u"},J=>this.restoreCursor(J)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},J=>this.insertColumns(J)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},J=>this.deleteColumns(J)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},J=>this.selectProtected(J)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},J=>this.requestMode(J,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},J=>this.requestMode(J,!1)),this._parser.setExecuteHandler(g.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(g.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(g.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(g.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(g.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(g.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(g.C1.IND,()=>this.index()),this._parser.setExecuteHandler(g.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(g.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new M.OscHandler(J=>(this.setTitle(J),this.setIconName(J),!0))),this._parser.registerOscHandler(1,new M.OscHandler(J=>this.setIconName(J))),this._parser.registerOscHandler(2,new M.OscHandler(J=>this.setTitle(J))),this._parser.registerOscHandler(4,new M.OscHandler(J=>this.setOrReportIndexedColor(J))),this._parser.registerOscHandler(8,new M.OscHandler(J=>this.setHyperlink(J))),this._parser.registerOscHandler(10,new M.OscHandler(J=>this.setOrReportFgColor(J))),this._parser.registerOscHandler(11,new M.OscHandler(J=>this.setOrReportBgColor(J))),this._parser.registerOscHandler(12,new M.OscHandler(J=>this.setOrReportCursorColor(J))),this._parser.registerOscHandler(104,new M.OscHandler(J=>this.restoreIndexedColor(J))),this._parser.registerOscHandler(110,new M.OscHandler(J=>this.restoreFgColor(J))),this._parser.registerOscHandler(111,new M.OscHandler(J=>this.restoreBgColor(J))),this._parser.registerOscHandler(112,new M.OscHandler(J=>this.restoreCursorColor(J))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const J in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:J},()=>this.selectCharset("("+J)),this._parser.registerEscHandler({intermediates:")",final:J},()=>this.selectCharset(")"+J)),this._parser.registerEscHandler({intermediates:"*",final:J},()=>this.selectCharset("*"+J)),this._parser.registerEscHandler({intermediates:"+",final:J},()=>this.selectCharset("+"+J)),this._parser.registerEscHandler({intermediates:"-",final:J},()=>this.selectCharset("-"+J)),this._parser.registerEscHandler({intermediates:".",final:J},()=>this.selectCharset("."+J)),this._parser.registerEscHandler({intermediates:"/",final:J},()=>this.selectCharset("/"+J));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(J=>(this._logService.error("Parsing error: ",J),J)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((J,ne)=>this.requestStatusString(J,ne)))}_preserveStack(G,q,Y,K){this._parseStack.paused=!0,this._parseStack.cursorStartX=G,this._parseStack.cursorStartY=q,this._parseStack.decodedLength=Y,this._parseStack.position=K}_logSlowResolvingAsync(G){this._logService.logLevel<=R.LogLevelEnum.WARN&&Promise.race([G,new Promise((q,Y)=>setTimeout(()=>Y("#SLOW_TIMEOUT"),5e3))]).catch(q=>{if(q!=="#SLOW_TIMEOUT")throw q;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(G,q){let Y,K=this._activeBuffer.x,se=this._activeBuffer.y,Se=0;const be=this._parseStack.paused;if(be){if(Y=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,q))return this._logSlowResolvingAsync(Y),Y;K=this._parseStack.cursorStartX,se=this._parseStack.cursorStartY,this._parseStack.paused=!1,G.length>V&&(Se=this._parseStack.position+V)}if(this._logService.logLevel<=R.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof G=="string"?` "${G}"`:` "${Array.prototype.map.call(G,xe=>String.fromCharCode(xe)).join("")}"`),typeof G=="string"?G.split("").map(xe=>xe.charCodeAt(0)):G),this._parseBuffer.length<G.length&&this._parseBuffer.length<V&&(this._parseBuffer=new Uint32Array(Math.min(G.length,V))),be||this._dirtyRowTracker.clearRange(),G.length>V)for(let xe=Se;xe<G.length;xe+=V){const Ee=xe+V<G.length?xe+V:G.length,J=typeof G=="string"?this._stringDecoder.decode(G.substring(xe,Ee),this._parseBuffer):this._utf8Decoder.decode(G.subarray(xe,Ee),this._parseBuffer);if(Y=this._parser.parse(this._parseBuffer,J))return this._preserveStack(K,se,J,xe),this._logSlowResolvingAsync(Y),Y}else if(!be){const xe=typeof G=="string"?this._stringDecoder.decode(G,this._parseBuffer):this._utf8Decoder.decode(G,this._parseBuffer);if(Y=this._parser.parse(this._parseBuffer,xe))return this._preserveStack(K,se,xe,0),this._logSlowResolvingAsync(Y),Y}this._activeBuffer.x===K&&this._activeBuffer.y===se||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(G,q,Y){let K,se;const Se=this._charsetService.charset,be=this._optionsService.rawOptions.screenReaderMode,xe=this._bufferService.cols,Ee=this._coreService.decPrivateModes.wraparound,J=this._coreService.modes.insertMode,ne=this._curAttrData;let de=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&Y-q>0&&de.getWidth(this._activeBuffer.x-1)===2&&de.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ne.fg,ne.bg,ne.extended);for(let ue=q;ue<Y;++ue){if(K=G[ue],se=this._unicodeService.wcwidth(K),K<127&&Se){const Fe=Se[String.fromCharCode(K)];Fe&&(K=Fe.charCodeAt(0))}if(be&&this._onA11yChar.fire((0,w.stringFromCodePoint)(K)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),se||!this._activeBuffer.x){if(this._activeBuffer.x+se-1>=xe){if(Ee){for(;this._activeBuffer.x<xe;)de.setCellFromCodePoint(this._activeBuffer.x++,0,1,ne.fg,ne.bg,ne.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),de=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=xe-1,se===2)continue}if(J&&(de.insertCells(this._activeBuffer.x,se,this._activeBuffer.getNullCell(ne),ne),de.getWidth(xe-1)===2&&de.setCellFromCodePoint(xe-1,y.NULL_CELL_CODE,y.NULL_CELL_WIDTH,ne.fg,ne.bg,ne.extended)),de.setCellFromCodePoint(this._activeBuffer.x++,K,se,ne.fg,ne.bg,ne.extended),se>0)for(;--se;)de.setCellFromCodePoint(this._activeBuffer.x++,0,0,ne.fg,ne.bg,ne.extended)}else de.getWidth(this._activeBuffer.x-1)?de.addCodepointToCell(this._activeBuffer.x-1,K):de.addCodepointToCell(this._activeBuffer.x-2,K)}Y-q>0&&(de.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<xe&&Y-q>0&&de.getWidth(this._activeBuffer.x)===0&&!de.hasContent(this._activeBuffer.x)&&de.setCellFromCodePoint(this._activeBuffer.x,0,1,ne.fg,ne.bg,ne.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(G,q){return G.final!=="t"||G.prefix||G.intermediates?this._parser.registerCsiHandler(G,q):this._parser.registerCsiHandler(G,Y=>!N(Y.params[0],this._optionsService.rawOptions.windowOptions)||q(Y))}registerDcsHandler(G,q){return this._parser.registerDcsHandler(G,new L.DcsHandler(q))}registerEscHandler(G,q){return this._parser.registerEscHandler(G,q)}registerOscHandler(G,q){return this._parser.registerOscHandler(G,new M.OscHandler(q))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var G;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||G===void 0)&&G.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);q.hasWidth(this._activeBuffer.x)&&!q.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const G=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-G),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(G=this._bufferService.cols-1){this._activeBuffer.x=Math.min(G,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(G,q){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=G,this._activeBuffer.y=this._activeBuffer.scrollTop+q):(this._activeBuffer.x=G,this._activeBuffer.y=q),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(G,q){this._restrictCursor(),this._setCursor(this._activeBuffer.x+G,this._activeBuffer.y+q)}cursorUp(G){const q=this._activeBuffer.y-this._activeBuffer.scrollTop;return q>=0?this._moveCursor(0,-Math.min(q,G.params[0]||1)):this._moveCursor(0,-(G.params[0]||1)),!0}cursorDown(G){const q=this._activeBuffer.scrollBottom-this._activeBuffer.y;return q>=0?this._moveCursor(0,Math.min(q,G.params[0]||1)):this._moveCursor(0,G.params[0]||1),!0}cursorForward(G){return this._moveCursor(G.params[0]||1,0),!0}cursorBackward(G){return this._moveCursor(-(G.params[0]||1),0),!0}cursorNextLine(G){return this.cursorDown(G),this._activeBuffer.x=0,!0}cursorPrecedingLine(G){return this.cursorUp(G),this._activeBuffer.x=0,!0}cursorCharAbsolute(G){return this._setCursor((G.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(G){return this._setCursor(G.length>=2?(G.params[1]||1)-1:0,(G.params[0]||1)-1),!0}charPosAbsolute(G){return this._setCursor((G.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(G){return this._moveCursor(G.params[0]||1,0),!0}linePosAbsolute(G){return this._setCursor(this._activeBuffer.x,(G.params[0]||1)-1),!0}vPositionRelative(G){return this._moveCursor(0,G.params[0]||1),!0}hVPosition(G){return this.cursorPosition(G),!0}tabClear(G){const q=G.params[0];return q===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:q===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(G){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let q=G.params[0]||1;for(;q--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(G){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let q=G.params[0]||1;for(;q--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(G){const q=G.params[0];return q===1&&(this._curAttrData.bg|=536870912),q!==2&&q!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(G,q,Y,K=!1,se=!1){const Se=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);Se.replaceCells(q,Y,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),se),K&&(Se.isWrapped=!1)}_resetBufferLine(G,q=!1){const Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);Y&&(Y.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),q),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+G),Y.isWrapped=!1)}eraseInDisplay(G,q=!1){let Y;switch(this._restrictCursor(this._bufferService.cols),G.params[0]){case 0:for(Y=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Y),this._eraseInBufferLine(Y++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,q);Y<this._bufferService.rows;Y++)this._resetBufferLine(Y,q);this._dirtyRowTracker.markDirty(Y);break;case 1:for(Y=this._activeBuffer.y,this._dirtyRowTracker.markDirty(Y),this._eraseInBufferLine(Y,0,this._activeBuffer.x+1,!0,q),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(Y+1).isWrapped=!1);Y--;)this._resetBufferLine(Y,q);this._dirtyRowTracker.markDirty(0);break;case 2:for(Y=this._bufferService.rows,this._dirtyRowTracker.markDirty(Y-1);Y--;)this._resetBufferLine(Y,q);this._dirtyRowTracker.markDirty(0);break;case 3:const K=this._activeBuffer.lines.length-this._bufferService.rows;K>0&&(this._activeBuffer.lines.trimStart(K),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-K,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-K,0),this._onScroll.fire(0))}return!0}eraseInLine(G,q=!1){switch(this._restrictCursor(this._bufferService.cols),G.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,q);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,q);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,q)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(G){this._restrictCursor();let q=G.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Y=this._activeBuffer.ybase+this._activeBuffer.y,K=this._bufferService.rows-1-this._activeBuffer.scrollBottom,se=this._bufferService.rows-1+this._activeBuffer.ybase-K+1;for(;q--;)this._activeBuffer.lines.splice(se-1,1),this._activeBuffer.lines.splice(Y,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(G){this._restrictCursor();let q=G.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const Y=this._activeBuffer.ybase+this._activeBuffer.y;let K;for(K=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-K;q--;)this._activeBuffer.lines.splice(Y,1),this._activeBuffer.lines.splice(K,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(G){this._restrictCursor();const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return q&&(q.insertCells(this._activeBuffer.x,G.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(G){this._restrictCursor();const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return q&&(q.deleteCells(this._activeBuffer.x,G.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(G){let q=G.params[0]||1;for(;q--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(G){let q=G.params[0]||1;for(;q--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(G){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const q=G.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);K.deleteCells(0,q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(G){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const q=G.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);K.insertCells(0,q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(G){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const q=G.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);K.insertCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(G){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const q=G.params[0]||1;for(let Y=this._activeBuffer.scrollTop;Y<=this._activeBuffer.scrollBottom;++Y){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);K.deleteCells(this._activeBuffer.x,q,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(G){this._restrictCursor();const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return q&&(q.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(G.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(G){if(!this._parser.precedingCodepoint)return!0;const q=G.params[0]||1,Y=new Uint32Array(q);for(let K=0;K<q;++K)Y[K]=this._parser.precedingCodepoint;return this.print(Y,0,Y.length),!0}sendDeviceAttributesPrimary(G){return G.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(G){return G.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(G.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c")),!0}_is(G){return(this._optionsService.rawOptions.termName+"").indexOf(G)===0}setMode(G){for(let q=0;q<G.length;q++)switch(G.params[q]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(G){for(let q=0;q<G.length;q++)switch(G.params[q]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(G){for(let q=0;q<G.length;q++)switch(G.params[q]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(G){for(let q=0;q<G.length;q++)switch(G.params[q]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),G.params[q]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(G,q){const Y=this._coreService.decPrivateModes,{activeProtocol:K,activeEncoding:se}=this._coreMouseService,Se=this._coreService,{buffers:be,cols:xe}=this._bufferService,{active:Ee,alt:J}=be,ne=this._optionsService.rawOptions,de=ye=>ye?1:2,ue=G.params[0];return Fe=ue,Ie=q?ue===2?4:ue===4?de(Se.modes.insertMode):ue===12?3:ue===20?de(ne.convertEol):0:ue===1?de(Y.applicationCursorKeys):ue===3?ne.windowOptions.setWinLines?xe===80?2:xe===132?1:0:0:ue===6?de(Y.origin):ue===7?de(Y.wraparound):ue===8?3:ue===9?de(K==="X10"):ue===12?de(ne.cursorBlink):ue===25?de(!Se.isCursorHidden):ue===45?de(Y.reverseWraparound):ue===66?de(Y.applicationKeypad):ue===67?4:ue===1e3?de(K==="VT200"):ue===1002?de(K==="DRAG"):ue===1003?de(K==="ANY"):ue===1004?de(Y.sendFocus):ue===1005?4:ue===1006?de(se==="SGR"):ue===1015?4:ue===1016?de(se==="SGR_PIXELS"):ue===1048?1:ue===47||ue===1047||ue===1049?de(Ee===J):ue===2004?de(Y.bracketedPasteMode):0,Se.triggerDataEvent(`${g.C0.ESC}[${q?"":"?"}${Fe};${Ie}$y`),!0;var Fe,Ie}_updateAttrColor(G,q,Y,K,se){return q===2?(G|=50331648,G&=-16777216,G|=D.AttributeData.fromColorRGB([Y,K,se])):q===5&&(G&=-50331904,G|=33554432|255&Y),G}_extractColor(G,q,Y){const K=[0,0,-1,0,0,0];let se=0,Se=0;do{if(K[Se+se]=G.params[q+Se],G.hasSubParams(q+Se)){const be=G.getSubParams(q+Se);let xe=0;do K[1]===5&&(se=1),K[Se+xe+1+se]=be[xe];while(++xe<be.length&&xe+Se+1+se<K.length);break}if(K[1]===5&&Se+se>=2||K[1]===2&&Se+se>=5)break;K[1]&&(se=1)}while(++Se+q<G.length&&Se+se<K.length);for(let be=2;be<K.length;++be)K[be]===-1&&(K[be]=0);switch(K[0]){case 38:Y.fg=this._updateAttrColor(Y.fg,K[1],K[3],K[4],K[5]);break;case 48:Y.bg=this._updateAttrColor(Y.bg,K[1],K[3],K[4],K[5]);break;case 58:Y.extended=Y.extended.clone(),Y.extended.underlineColor=this._updateAttrColor(Y.extended.underlineColor,K[1],K[3],K[4],K[5])}return Se}_processUnderline(G,q){q.extended=q.extended.clone(),(!~G||G>5)&&(G=1),q.extended.underlineStyle=G,q.fg|=268435456,G===0&&(q.fg&=-268435457),q.updateExtended()}_processSGR0(G){G.fg=m.DEFAULT_ATTR_DATA.fg,G.bg=m.DEFAULT_ATTR_DATA.bg,G.extended=G.extended.clone(),G.extended.underlineStyle=0,G.extended.underlineColor&=-67108864,G.updateExtended()}charAttributes(G){if(G.length===1&&G.params[0]===0)return this._processSGR0(this._curAttrData),!0;const q=G.length;let Y;const K=this._curAttrData;for(let se=0;se<q;se++)Y=G.params[se],Y>=30&&Y<=37?(K.fg&=-50331904,K.fg|=16777216|Y-30):Y>=40&&Y<=47?(K.bg&=-50331904,K.bg|=16777216|Y-40):Y>=90&&Y<=97?(K.fg&=-50331904,K.fg|=16777224|Y-90):Y>=100&&Y<=107?(K.bg&=-50331904,K.bg|=16777224|Y-100):Y===0?this._processSGR0(K):Y===1?K.fg|=134217728:Y===3?K.bg|=67108864:Y===4?(K.fg|=268435456,this._processUnderline(G.hasSubParams(se)?G.getSubParams(se)[0]:1,K)):Y===5?K.fg|=536870912:Y===7?K.fg|=67108864:Y===8?K.fg|=1073741824:Y===9?K.fg|=2147483648:Y===2?K.bg|=134217728:Y===21?this._processUnderline(2,K):Y===22?(K.fg&=-134217729,K.bg&=-134217729):Y===23?K.bg&=-67108865:Y===24?(K.fg&=-268435457,this._processUnderline(0,K)):Y===25?K.fg&=-536870913:Y===27?K.fg&=-67108865:Y===28?K.fg&=-1073741825:Y===29?K.fg&=2147483647:Y===39?(K.fg&=-67108864,K.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):Y===49?(K.bg&=-67108864,K.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):Y===38||Y===48||Y===58?se+=this._extractColor(G,se,K):Y===53?K.bg|=1073741824:Y===55?K.bg&=-1073741825:Y===59?(K.extended=K.extended.clone(),K.extended.underlineColor=-1,K.updateExtended()):Y===100?(K.fg&=-67108864,K.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,K.bg&=-67108864,K.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",Y);return!0}deviceStatus(G){switch(G.params[0]){case 5:this._coreService.triggerDataEvent(`${g.C0.ESC}[0n`);break;case 6:const q=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[${q};${Y}R`)}return!0}deviceStatusPrivate(G){if(G.params[0]===6){const q=this._activeBuffer.y+1,Y=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[?${q};${Y}R`)}return!0}softReset(G){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(G){const q=G.params[0]||1;switch(q){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const Y=q%2==1;return this._optionsService.options.cursorBlink=Y,!0}setScrollRegion(G){const q=G.params[0]||1;let Y;return(G.length<2||(Y=G.params[1])>this._bufferService.rows||Y===0)&&(Y=this._bufferService.rows),Y>q&&(this._activeBuffer.scrollTop=q-1,this._activeBuffer.scrollBottom=Y-1,this._setCursor(0,0)),!0}windowOptions(G){if(!N(G.params[0],this._optionsService.rawOptions.windowOptions))return!0;const q=G.length>1?G.params[1]:0;switch(G.params[0]){case 14:q!==2&&this._onRequestWindowsOptionsReport.fire(B.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(B.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${g.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:q!==0&&q!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),q!==0&&q!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:q!==0&&q!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),q!==0&&q!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(G){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(G){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(G){return this._windowTitle=G,this._onTitleChange.fire(G),!0}setIconName(G){return this._iconName=G,!0}setOrReportIndexedColor(G){const q=[],Y=G.split(";");for(;Y.length>1;){const K=Y.shift(),se=Y.shift();if(/^\d+$/.exec(K)){const Se=parseInt(K);if(Q(Se))if(se==="?")q.push({type:0,index:Se});else{const be=(0,k.parseColor)(se);be&&q.push({type:1,index:Se,color:be})}}}return q.length&&this._onColor.fire(q),!0}setHyperlink(G){const q=G.split(";");return!(q.length<2)&&(q[1]?this._createHyperlink(q[0],q[1]):!q[0]&&this._finishHyperlink())}_createHyperlink(G,q){this._getCurrentLinkId()&&this._finishHyperlink();const Y=G.split(":");let K;const se=Y.findIndex(Se=>Se.startsWith("id="));return se!==-1&&(K=Y[se].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:K,uri:q}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(G,q){const Y=G.split(";");for(let K=0;K<Y.length&&!(q>=this._specialColors.length);++K,++q)if(Y[K]==="?")this._onColor.fire([{type:0,index:this._specialColors[q]}]);else{const se=(0,k.parseColor)(Y[K]);se&&this._onColor.fire([{type:1,index:this._specialColors[q],color:se}])}return!0}setOrReportFgColor(G){return this._setOrReportSpecialColor(G,0)}setOrReportBgColor(G){return this._setOrReportSpecialColor(G,1)}setOrReportCursorColor(G){return this._setOrReportSpecialColor(G,2)}restoreIndexedColor(G){if(!G)return this._onColor.fire([{type:2}]),!0;const q=[],Y=G.split(";");for(let K=0;K<Y.length;++K)if(/^\d+$/.exec(Y[K])){const se=parseInt(Y[K]);Q(se)&&q.push({type:2,index:se})}return q.length&&this._onColor.fire(q),!0}restoreFgColor(G){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(G){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(G){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(G){return G.length!==2?(this.selectDefaultCharset(),!0):(G[0]==="/"||this._charsetService.setgCharset(I[G[0]],_.CHARSETS[G[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const G=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,G,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(G){return this._charsetService.setgLevel(G),!0}screenAlignmentPattern(){const G=new x.CellData;G.content=4194373,G.fg=this._curAttrData.fg,G.bg=this._curAttrData.bg,this._setCursor(0,0);for(let q=0;q<this._bufferService.rows;++q){const Y=this._activeBuffer.ybase+this._activeBuffer.y+q,K=this._activeBuffer.lines.get(Y);K&&(K.fill(G),K.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(G,q){const Y=this._bufferService.buffer,K=this._optionsService.rawOptions;return(se=>(this._coreService.triggerDataEvent(`${g.C0.ESC}${se}${g.C0.ESC}\\`),!0))(G==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:G==='"p'?'P1$r61;1"p':G==="r"?`P1$r${Y.scrollTop+1};${Y.scrollBottom+1}r`:G==="m"?"P1$r0m":G===" q"?`P1$r${{block:2,underline:4,bar:6}[K.cursorStyle]-(K.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(G,q){this._dirtyRowTracker.markRangeDirty(G,q)}}l.InputHandler=z;let W=class{constructor(X){this._bufferService=X,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(X){X<this.start?this.start=X:X>this.end&&(this.end=X)}markRangeDirty(X,G){X>G&&(H=X,X=G,G=H),X<this.start&&(this.start=X),G>this.end&&(this.end=G)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(X){return 0<=X&&X<256}W=d([f(0,R.IBufferService)],W)},844:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},1505:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,_){this._data[f]||(this._data[f]={}),this._data[f][g]=_}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,_,E){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,_,E)}get(d,f,g,_){var E;return(E=this._data.get(d,f))===null||E===void 0?void 0:E.get(g,_)}clear(){this._data.clear()}}},6114:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},6106:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let h=0;l.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(h=this._search(this._getKey(d)),this._array.splice(h,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const f=this._getKey(d);if(f===void 0||(h=this._search(f),h===-1)||this._getKey(this._array[h])!==f)return!1;do if(this._array[h]===d)return this._array.splice(h,1),!0;while(++h<this._array.length&&this._getKey(this._array[h])===f);return!1}*getKeyIterator(d){if(this._array.length!==0&&(h=this._search(d),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===d))do yield this._array[h];while(++h<this._array.length&&this._getKey(this._array[h])===d)}forEachByKey(d,f){if(this._array.length!==0&&(h=this._search(d),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===d))do f(this._array[h]);while(++h<this._array.length&&this._getKey(this._array[h])===d)}values(){return[...this._array].values()}_search(d){let f=0,g=this._array.length-1;for(;g>=f;){let _=f+g>>1;const E=this._getKey(this._array[_]);if(E>d)g=_-1;else{if(!(E<d)){for(;_>0&&this._getKey(this._array[_-1])===d;)_--;return _}f=_+1}}return f}}},7226:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(E){this._tasks.push(E),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(E){this._idleCallback=void 0;let A=0,w=0,m=E.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=E.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(E){return setTimeout(()=>E(this._createDeadline(16)))}_cancelCallback(E){clearTimeout(E)}_createDeadline(E){const A=Date.now()+E;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const d=h(643);l.updateWindowsModeWrappedState=function(f){const g=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),_=g?.get(f.cols-1),E=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);E&&_&&(E.isWrapped=_[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&_[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,_=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=_}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},9092:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const d=h(6349),f=h(7226),g=h(3734),_=h(8437),E=h(4634),A=h(511),w=h(643),m=h(4863),b=h(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(y,x,D){this._hasScrollback=y,this._optionsService=x,this._bufferService=D,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=b.DEFAULT_CHARSET,this.markers=[],this._nullCell=A.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=A.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(y){return y?(this._nullCell.fg=y.fg,this._nullCell.bg=y.bg,this._nullCell.extended=y.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell}getWhitespaceCell(y){return y?(this._whitespaceCell.fg=y.fg,this._whitespaceCell.bg=y.bg,this._whitespaceCell.extended=y.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell}getBlankLine(y,x){return new _.BufferLine(this._bufferService.cols,this.getNullCell(y),x)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const y=this.ybase+this.y-this.ydisp;return y>=0&&y<this._rows}_getCorrectBufferLength(y){if(!this._hasScrollback)return y;const x=y+this._optionsService.rawOptions.scrollback;return x>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:x}fillViewportRows(y){if(this.lines.length===0){y===void 0&&(y=_.DEFAULT_ATTR_DATA);let x=this._rows;for(;x--;)this.lines.push(this.getBlankLine(y))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(y,x){const D=this.getNullCell(_.DEFAULT_ATTR_DATA);let R=0;const M=this._getCorrectBufferLength(x);if(M>this.lines.maxLength&&(this.lines.maxLength=M),this.lines.length>0){if(this._cols<y)for(let k=0;k<this.lines.length;k++)R+=+this.lines.get(k).resize(y,D);let L=0;if(this._rows<x)for(let k=this._rows;k<x;k++)this.lines.length<x+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(y,D)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(y,D)));else for(let k=this._rows;k>x;k--)this.lines.length>x+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(M<this.lines.maxLength){const k=this.lines.length-M;k>0&&(this.lines.trimStart(k),this.ybase=Math.max(this.ybase-k,0),this.ydisp=Math.max(this.ydisp-k,0),this.savedY=Math.max(this.savedY-k,0)),this.lines.maxLength=M}this.x=Math.min(this.x,y-1),this.y=Math.min(this.y,x-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,y-1),this.scrollTop=0}if(this.scrollBottom=x-1,this._isReflowEnabled&&(this._reflow(y,x),this._cols>y))for(let L=0;L<this.lines.length;L++)R+=+this.lines.get(L).resize(y,D);this._cols=y,this._rows=x,this._memoryCleanupQueue.clear(),R>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let y=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,y=!1);let x=0;for(;this._memoryCleanupPosition<this.lines.length;)if(x+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),x>100)return!0;return y}get _isReflowEnabled(){const y=this._optionsService.rawOptions.windowsPty;return y&&y.buildNumber?this._hasScrollback&&y.backend==="conpty"&&y.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(y,x){this._cols!==y&&(y>this._cols?this._reflowLarger(y,x):this._reflowSmaller(y,x))}_reflowLarger(y,x){const D=(0,E.reflowLargerGetLinesToRemove)(this.lines,this._cols,y,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(D.length>0){const R=(0,E.reflowLargerCreateNewLayout)(this.lines,D);(0,E.reflowLargerApplyNewLayout)(this.lines,R.layout),this._reflowLargerAdjustViewport(y,x,R.countRemoved)}}_reflowLargerAdjustViewport(y,x,D){const R=this.getNullCell(_.DEFAULT_ATTR_DATA);let M=D;for(;M-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<x&&this.lines.push(new _.BufferLine(y,R))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-D,0)}_reflowSmaller(y,x){const D=this.getNullCell(_.DEFAULT_ATTR_DATA),R=[];let M=0;for(let L=this.lines.length-1;L>=0;L--){let k=this.lines.get(L);if(!k||!k.isWrapped&&k.getTrimmedLength()<=y)continue;const I=[k];for(;k.isWrapped&&L>0;)k=this.lines.get(--L),I.unshift(k);const V=this.ybase+this.y;if(V>=L&&V<L+I.length)continue;const N=I[I.length-1].getTrimmedLength(),B=(0,E.reflowSmallerGetNewLineLengths)(I,this._cols,y),H=B.length-I.length;let z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+H):Math.max(0,this.lines.length-this.lines.maxLength+H);const W=[];for(let K=0;K<H;K++){const se=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);W.push(se)}W.length>0&&(R.push({start:L+I.length+M,newLines:W}),M+=W.length),I.push(...W);let Q=B.length-1,X=B[Q];X===0&&(Q--,X=B[Q]);let G=I.length-H-1,q=N;for(;G>=0;){const K=Math.min(q,X);if(I[Q]===void 0)break;if(I[Q].copyCellsFrom(I[G],q-K,X-K,K,!0),X-=K,X===0&&(Q--,X=B[Q]),q-=K,q===0){G--;const se=Math.max(G,0);q=(0,E.getWrappedLineTrimmedLength)(I,se,this._cols)}}for(let K=0;K<I.length;K++)B[K]<y&&I[K].setCell(B[K],D);let Y=H-z;for(;Y-- >0;)this.ybase===0?this.y<x-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+M)-x&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+H,this.ybase+x-1)}if(R.length>0){const L=[],k=[];for(let Q=0;Q<this.lines.length;Q++)k.push(this.lines.get(Q));const I=this.lines.length;let V=I-1,N=0,B=R[N];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+M);let H=0;for(let Q=Math.min(this.lines.maxLength-1,I+M-1);Q>=0;Q--)if(B&&B.start>V+H){for(let X=B.newLines.length-1;X>=0;X--)this.lines.set(Q--,B.newLines[X]);Q++,L.push({index:V+1,amount:B.newLines.length}),H+=B.newLines.length,B=R[++N]}else this.lines.set(Q,k[V--]);let z=0;for(let Q=L.length-1;Q>=0;Q--)L[Q].index+=z,this.lines.onInsertEmitter.fire(L[Q]),z+=L[Q].amount;const W=Math.max(0,I+M-this.lines.maxLength);W>0&&this.lines.onTrimEmitter.fire(W)}}translateBufferLineToString(y,x,D=0,R){const M=this.lines.get(y);return M?M.translateToString(x,D,R):""}getWrappedRangeForLine(y){let x=y,D=y;for(;x>0&&this.lines.get(x).isWrapped;)x--;for(;D+1<this.lines.length&&this.lines.get(D+1).isWrapped;)D++;return{first:x,last:D}}setupTabStops(y){for(y!=null?this.tabs[y]||(y=this.prevStop(y)):(this.tabs={},y=0);y<this._cols;y+=this._optionsService.rawOptions.tabStopWidth)this.tabs[y]=!0}prevStop(y){for(y==null&&(y=this.x);!this.tabs[--y]&&y>0;);return y>=this._cols?this._cols-1:y<0?0:y}nextStop(y){for(y==null&&(y=this.x);!this.tabs[++y]&&y<this._cols;);return y>=this._cols?this._cols-1:y<0?0:y}clearMarkers(y){this._isClearing=!0;for(let x=0;x<this.markers.length;x++)this.markers[x].line===y&&(this.markers[x].dispose(),this.markers.splice(x--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].dispose(),this.markers.splice(y--,1);this._isClearing=!1}addMarker(y){const x=new m.Marker(y);return this.markers.push(x),x.register(this.lines.onTrim(D=>{x.line-=D,x.line<0&&x.dispose()})),x.register(this.lines.onInsert(D=>{x.line>=D.index&&(x.line+=D.amount)})),x.register(this.lines.onDelete(D=>{x.line>=D.index&&x.line<D.index+D.amount&&x.dispose(),x.line>D.index&&(x.line-=D.amount)})),x.register(x.onDispose(()=>this._removeMarker(x))),x}_removeMarker(y){this._isClearing||this.markers.splice(this.markers.indexOf(y),1)}}},8437:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const d=h(3734),f=h(511),g=h(643),_=h(482);l.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let E=0;class A{constructor(m,b,y=!1){this.isWrapped=y,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const x=b||f.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]);for(let D=0;D<m;++D)this.setCell(D,x);this.length=m}get(m){const b=this._data[3*m+0],y=2097151&b;return[this._data[3*m+1],2097152&b?this._combined[m]:y?(0,_.stringFromCodePoint)(y):"",b>>22,2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):y]}set(m,b){this._data[3*m+1]=b[g.CHAR_DATA_ATTR_INDEX],b[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=b[1],this._data[3*m+0]=2097152|m|b[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=b[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[g.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&b}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m]:2097151&b?(0,_.stringFromCodePoint)(2097151&b):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,b){return E=3*m,b.content=this._data[E+0],b.fg=this._data[E+1],b.bg=this._data[E+2],2097152&b.content&&(b.combinedData=this._combined[m]),268435456&b.bg&&(b.extended=this._extendedAttrs[m]),b}setCell(m,b){2097152&b.content&&(this._combined[m]=b.combinedData),268435456&b.bg&&(this._extendedAttrs[m]=b.extended),this._data[3*m+0]=b.content,this._data[3*m+1]=b.fg,this._data[3*m+2]=b.bg}setCellFromCodePoint(m,b,y,x,D,R){268435456&D&&(this._extendedAttrs[m]=R),this._data[3*m+0]=b|y<<22,this._data[3*m+1]=x,this._data[3*m+2]=D}addCodepointToCell(m,b){let y=this._data[3*m+0];2097152&y?this._combined[m]+=(0,_.stringFromCodePoint)(b):(2097151&y?(this._combined[m]=(0,_.stringFromCodePoint)(2097151&y)+(0,_.stringFromCodePoint)(b),y&=-2097152,y|=2097152):y=b|4194304,this._data[3*m+0]=y)}insertCells(m,b,y,x){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs),b<this.length-m){const D=new f.CellData;for(let R=this.length-m-b-1;R>=0;--R)this.setCell(m+b+R,this.loadCell(m+R,D));for(let R=0;R<b;++R)this.setCell(m+R,y)}else for(let D=m;D<this.length;++D)this.setCell(D,y);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs)}deleteCells(m,b,y,x){if(m%=this.length,b<this.length-m){const D=new f.CellData;for(let R=0;R<this.length-m-b;++R)this.setCell(m+R,this.loadCell(m+b+R,D));for(let R=this.length-b;R<this.length;++R)this.setCell(R,y)}else for(let D=m;D<this.length;++D)this.setCell(D,y);m&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodePoint(m,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs)}replaceCells(m,b,y,x,D=!1){if(D)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodePoint(m-1,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs),b<this.length&&this.getWidth(b-1)===2&&!this.isProtected(b)&&this.setCellFromCodePoint(b,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs);m<b&&m<this.length;)this.isProtected(m)||this.setCell(m,y),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs),b<this.length&&this.getWidth(b-1)===2&&this.setCellFromCodePoint(b,0,1,x?.fg||0,x?.bg||0,x?.extended||new d.ExtendedAttrs);m<b&&m<this.length;)this.setCell(m++,y)}resize(m,b){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const y=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*y)this._data=new Uint32Array(this._data.buffer,0,y);else{const x=new Uint32Array(y);x.set(this._data),this._data=x}for(let x=this.length;x<m;++x)this.setCell(x,b)}else{this._data=this._data.subarray(0,y);const x=Object.keys(this._combined);for(let R=0;R<x.length;R++){const M=parseInt(x[R],10);M>=m&&delete this._combined[M]}const D=Object.keys(this._extendedAttrs);for(let R=0;R<D.length;R++){const M=parseInt(D[R],10);M>=m&&delete this._extendedAttrs[M]}}return this.length=m,4*y*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,b=!1){if(b)for(let y=0;y<this.length;++y)this.isProtected(y)||this.setCell(y,m);else{this._combined={},this._extendedAttrs={};for(let y=0;y<this.length;++y)this.setCell(y,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const b in m._combined)this._combined[b]=m._combined[b];this._extendedAttrs={};for(const b in m._extendedAttrs)this._extendedAttrs[b]=m._extendedAttrs[b];this.isWrapped=m.isWrapped}clone(){const m=new A(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const b in this._combined)m._combined[b]=this._combined[b];for(const b in this._extendedAttrs)m._extendedAttrs[b]=this._extendedAttrs[b];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,b,y,x,D){const R=m._data;if(D)for(let L=x-1;L>=0;L--){for(let k=0;k<3;k++)this._data[3*(y+L)+k]=R[3*(b+L)+k];268435456&R[3*(b+L)+2]&&(this._extendedAttrs[y+L]=m._extendedAttrs[b+L])}else for(let L=0;L<x;L++){for(let k=0;k<3;k++)this._data[3*(y+L)+k]=R[3*(b+L)+k];268435456&R[3*(b+L)+2]&&(this._extendedAttrs[y+L]=m._extendedAttrs[b+L])}const M=Object.keys(m._combined);for(let L=0;L<M.length;L++){const k=parseInt(M[L],10);k>=b&&(this._combined[k-b+y]=m._combined[k])}}translateToString(m=!1,b=0,y=this.length){m&&(y=Math.min(y,this.getTrimmedLength()));let x="";for(;b<y;){const D=this._data[3*b+0],R=2097151&D;x+=2097152&D?this._combined[b]:R?(0,_.stringFromCodePoint)(R):g.WHITESPACE_CELL_CHAR,b+=D>>22||1}return x}}l.BufferLine=A},4841:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(h,d){if(h.start.y>h.end.y)throw new Error(`Buffer range end (${h.end.x}, ${h.end.y}) cannot be before start (${h.start.x}, ${h.start.y})`);return d*(h.end.y-h.start.y)+(h.end.x-h.start.x+1)}},4634:(c,l)=>{function h(d,f,g){if(f===d.length-1)return d[f].getTrimmedLength();const _=!d[f].hasContent(g-1)&&d[f].getWidth(g-1)===1,E=d[f+1].getWidth(0)===2;return _&&E?g-1:g}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(d,f,g,_,E){const A=[];for(let w=0;w<d.length-1;w++){let m=w,b=d.get(++m);if(!b.isWrapped)continue;const y=[d.get(w)];for(;m<d.length&&b.isWrapped;)y.push(b),b=d.get(++m);if(_>=w&&_<m){w+=y.length-1;continue}let x=0,D=h(y,x,f),R=1,M=0;for(;R<y.length;){const k=h(y,R,f),I=k-M,V=g-D,N=Math.min(I,V);y[x].copyCellsFrom(y[R],M,D,N,!1),D+=N,D===g&&(x++,D=0),M+=N,M===k&&(R++,M=0),D===0&&x!==0&&y[x-1].getWidth(g-1)===2&&(y[x].copyCellsFrom(y[x-1],g-1,D++,1,!1),y[x-1].setCell(g-1,E))}y[x].replaceCells(D,g,E);let L=0;for(let k=y.length-1;k>0&&(k>x||y[k].getTrimmedLength()===0);k--)L++;L>0&&(A.push(w+y.length-L),A.push(L)),w+=y.length-1}return A},l.reflowLargerCreateNewLayout=function(d,f){const g=[];let _=0,E=f[_],A=0;for(let w=0;w<d.length;w++)if(E===w){const m=f[++_];d.onDeleteEmitter.fire({index:w-A,amount:m}),w+=m-1,A+=m,E=f[++_]}else g.push(w);return{layout:g,countRemoved:A}},l.reflowLargerApplyNewLayout=function(d,f){const g=[];for(let _=0;_<f.length;_++)g.push(d.get(f[_]));for(let _=0;_<g.length;_++)d.set(_,g[_]);d.length=f.length},l.reflowSmallerGetNewLineLengths=function(d,f,g){const _=[],E=d.map((b,y)=>h(d,y,f)).reduce((b,y)=>b+y);let A=0,w=0,m=0;for(;m<E;){if(E-m<g){_.push(E-m);break}A+=g;const b=h(d,w,f);A>b&&(A-=b,w++);const y=d[w].getWidth(A-1)===2;y&&A--;const x=y?g-1:g;_.push(x),m+=x}return _},l.getWrappedLineTrimmedLength=h},5295:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const d=h(8460),f=h(844),g=h(9092);class _ extends f.Disposable{constructor(A,w){super(),this._optionsService=A,this._bufferService=w,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new g.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new g.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(A){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(A),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(A,w){this._normal.resize(A,w),this._alt.resize(A,w),this.setupTabStops(A)}setupTabStops(A){this._normal.setupTabStops(A),this._alt.setupTabStops(A)}}l.BufferSet=_},511:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(482),f=h(643),g=h(3734);class _ extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new _;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=_},643:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const d=h(8460),f=h(844);class g{get id(){return this._id}constructor(E){this.line=E,this.isDisposed=!1,this._disposables=[],this._id=g._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(E){return this._disposables.push(E),E}}l.Marker=g,g._nextId=1},7116:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},l.CHARSETS.A={"#":"£"},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},l.CHARSETS.C=l.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},l.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},l.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},l.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},l.CHARSETS.E=l.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},l.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},l.CHARSETS.H=l.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(c,l)=>{var h,d,f;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,function(g){g.NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL=""}(h||(l.C0=h={})),function(g){g.PAD="",g.HOP="",g.BPH="",g.NBH="",g.IND="",g.NEL="",g.SSA="",g.ESA="",g.HTS="",g.HTJ="",g.VTS="",g.PLD="",g.PLU="",g.RI="",g.SS2="",g.SS3="",g.DCS="",g.PU1="",g.PU2="",g.STS="",g.CCH="",g.MW="",g.SPA="",g.EPA="",g.SOS="",g.SGCI="",g.SCI="",g.CSI="",g.ST="",g.OSC="",g.PM="",g.APC=""}(d||(l.C1=d={})),function(g){g.ST=`${h.ESC}\\`}(f||(l.C1_ESCAPED=f={}))},7399:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const d=h(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(g,_,E,A){const w={type:0,cancel:!1,key:void 0},m=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:g.key==="UIKeyInputUpArrow"?w.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A":g.key==="UIKeyInputLeftArrow"?w.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D":g.key==="UIKeyInputRightArrow"?w.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C":g.key==="UIKeyInputDownArrow"&&(w.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(g.altKey){w.key=d.C0.ESC+d.C0.DEL;break}w.key=d.C0.DEL;break;case 9:if(g.shiftKey){w.key=d.C0.ESC+"[Z";break}w.key=d.C0.HT,w.cancel=!0;break;case 13:w.key=g.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,w.cancel=!0;break;case 27:w.key=d.C0.ESC,g.altKey&&(w.key=d.C0.ESC+d.C0.ESC),w.cancel=!0;break;case 37:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"D",w.key===d.C0.ESC+"[1;3D"&&(w.key=d.C0.ESC+(E?"b":"[1;5D"))):w.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"C",w.key===d.C0.ESC+"[1;3C"&&(w.key=d.C0.ESC+(E?"f":"[1;5C"))):w.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"A",E||w.key!==d.C0.ESC+"[1;3A"||(w.key=d.C0.ESC+"[1;5A")):w.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"B",E||w.key!==d.C0.ESC+"[1;3B"||(w.key=d.C0.ESC+"[1;5B")):w.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(w.key=d.C0.ESC+"[2~");break;case 46:w.key=m?d.C0.ESC+"[3;"+(m+1)+"~":d.C0.ESC+"[3~";break;case 36:w.key=m?d.C0.ESC+"[1;"+(m+1)+"H":_?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:w.key=m?d.C0.ESC+"[1;"+(m+1)+"F":_?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:g.shiftKey?w.type=2:g.ctrlKey?w.key=d.C0.ESC+"[5;"+(m+1)+"~":w.key=d.C0.ESC+"[5~";break;case 34:g.shiftKey?w.type=3:g.ctrlKey?w.key=d.C0.ESC+"[6;"+(m+1)+"~":w.key=d.C0.ESC+"[6~";break;case 112:w.key=m?d.C0.ESC+"[1;"+(m+1)+"P":d.C0.ESC+"OP";break;case 113:w.key=m?d.C0.ESC+"[1;"+(m+1)+"Q":d.C0.ESC+"OQ";break;case 114:w.key=m?d.C0.ESC+"[1;"+(m+1)+"R":d.C0.ESC+"OR";break;case 115:w.key=m?d.C0.ESC+"[1;"+(m+1)+"S":d.C0.ESC+"OS";break;case 116:w.key=m?d.C0.ESC+"[15;"+(m+1)+"~":d.C0.ESC+"[15~";break;case 117:w.key=m?d.C0.ESC+"[17;"+(m+1)+"~":d.C0.ESC+"[17~";break;case 118:w.key=m?d.C0.ESC+"[18;"+(m+1)+"~":d.C0.ESC+"[18~";break;case 119:w.key=m?d.C0.ESC+"[19;"+(m+1)+"~":d.C0.ESC+"[19~";break;case 120:w.key=m?d.C0.ESC+"[20;"+(m+1)+"~":d.C0.ESC+"[20~";break;case 121:w.key=m?d.C0.ESC+"[21;"+(m+1)+"~":d.C0.ESC+"[21~";break;case 122:w.key=m?d.C0.ESC+"[23;"+(m+1)+"~":d.C0.ESC+"[23~";break;case 123:w.key=m?d.C0.ESC+"[24;"+(m+1)+"~":d.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(E&&!A||!g.altKey||g.metaKey)!E||g.altKey||g.ctrlKey||g.shiftKey||!g.metaKey?g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&g.key.length===1?w.key=g.key:g.key&&g.ctrlKey&&(g.key==="_"&&(w.key=d.C0.US),g.key==="@"&&(w.key=d.C0.NUL)):g.keyCode===65&&(w.type=1);else{const b=f[g.keyCode],y=b?.[g.shiftKey?1:0];if(y)w.key=d.C0.ESC+y;else if(g.keyCode>=65&&g.keyCode<=90){const x=g.ctrlKey?g.keyCode-64:g.keyCode+32;let D=String.fromCharCode(x);g.shiftKey&&(D=D.toUpperCase()),w.key=d.C0.ESC+D}else if(g.keyCode===32)w.key=d.C0.ESC+(g.ctrlKey?d.C0.NUL:" ");else if(g.key==="Dead"&&g.code.startsWith("Key")){let x=g.code.slice(3,4);g.shiftKey||(x=x.toLowerCase()),w.key=d.C0.ESC+x,w.cancel=!0}}else g.keyCode>=65&&g.keyCode<=90?w.key=String.fromCharCode(g.keyCode-64):g.keyCode===32?w.key=d.C0.NUL:g.keyCode>=51&&g.keyCode<=55?w.key=String.fromCharCode(g.keyCode-51+27):g.keyCode===56?w.key=d.C0.DEL:g.keyCode===219?w.key=d.C0.ESC:g.keyCode===220?w.key=d.C0.FS:g.keyCode===221&&(w.key=d.C0.GS)}return w}},482:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let _=d;_<f;++_){let E=h[_];E>65535?(E-=65536,g+=String.fromCharCode(55296+(E>>10))+String.fromCharCode(E%1024+56320)):g+=String.fromCharCode(E)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,_=0;if(this._interim){const E=h.charCodeAt(_++);56320<=E&&E<=57343?d[g++]=1024*(this._interim-55296)+E-56320+65536:(d[g++]=this._interim,d[g++]=E),this._interim=0}for(let E=_;E<f;++E){const A=h.charCodeAt(E);if(55296<=A&&A<=56319){if(++E>=f)return this._interim=A,g;const w=h.charCodeAt(E);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,_,E,A,w=0,m=0,b=0;if(this.interim[0]){let D=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let M,L=0;for(;(M=63&this.interim[++L])&&L<4;)R<<=6,R|=M;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=k-L;for(;b<I;){if(b>=f)return 0;if(M=h[b++],(192&M)!=128){b--,D=!0;break}this.interim[L++]=M,R<<=6,R|=63&M}D||(k===2?R<128?b--:d[w++]=R:k===3?R<2048||R>=55296&&R<=57343||R===65279||(d[w++]=R):R<65536||R>1114111||(d[w++]=R)),this.interim.fill(0)}const y=f-4;let x=b;for(;x<f;){for(;!(!(x<y)||128&(g=h[x])||128&(_=h[x+1])||128&(E=h[x+2])||128&(A=h[x+3]));)d[w++]=g,d[w++]=_,d[w++]=E,d[w++]=A,x+=4;if(g=h[x++],g<128)d[w++]=g;else if((224&g)==192){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(m=(31&g)<<6|63&_,m<128){x--;continue}d[w++]=m}else if((240&g)==224){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(m=(15&g)<<12|(63&_)<<6|63&E,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,this.interim[2]=E,w;if(A=h[x++],(192&A)!=128){x--;continue}if(m=(7&g)<<18|(63&_)<<12|(63&E)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},225:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const h=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;l.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let g=0;g<h.length;++g)f.fill(0,h[g][0],h[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?f[g]:function(_,E){let A,w=0,m=E.length-1;if(_<E[0][0]||_>E[m][1])return!1;for(;m>=w;)if(A=w+m>>1,_>E[A][1])w=A+1;else{if(!(_<E[A][0]))return!0;m=A-1}return!1}(g,d)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}}},5981:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const d=h(8460),f=h(844);class g extends f.Disposable{constructor(E){super(),this._action=E,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(E,A){if(A!==void 0&&this._syncCalls>A)return void(this._syncCalls=0);if(this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(E,A){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(A),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(A)}_innerWrite(E=0,A=!0){const w=E||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],b=this._action(m,A);if(b){const x=D=>Date.now()-w>=12?setTimeout(()=>this._innerWrite(0,D)):this._innerWrite(w,D);return void b.catch(D=>(queueMicrotask(()=>{throw D}),Promise.resolve(!1))).then(x)}const y=this._callbacks[this._bufferOffset];if(y&&y(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=g},5941:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const h=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function f(g,_){const E=g.toString(16),A=E.length<2?"0"+E:E;switch(_){case 4:return E[0];case 8:return A;case 12:return(A+A).slice(0,3);default:return A+A}}l.parseColor=function(g){if(!g)return;let _=g.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const E=h.exec(_);if(E){const A=E[1]?15:E[4]?255:E[7]?4095:65535;return[Math.round(parseInt(E[1]||E[4]||E[7]||E[10],16)/A*255),Math.round(parseInt(E[2]||E[5]||E[8]||E[11],16)/A*255),Math.round(parseInt(E[3]||E[6]||E[9]||E[12],16)/A*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),d.exec(_)&&[3,6,9,12].includes(_.length))){const E=_.length/3,A=[0,0,0];for(let w=0;w<3;++w){const m=parseInt(_.slice(E*w,E*w+E),16);A[w]=E===1?m<<4:E===2?m:E===3?m>>4:m>>8}return A}},l.toRgbString=function(g,_=16){const[E,A,w]=g;return`rgb:${f(E,_)}/${f(A,_)}/${f(w,_)}`}},5770:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const d=h(482),f=h(8742),g=h(5770),_=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(A,w){this._handlers[A]===void 0&&(this._handlers[A]=[]);const m=this._handlers[A];return m.push(w),{dispose:()=>{const b=m.indexOf(w);b!==-1&&m.splice(b,1)}}}clearHandler(A){this._handlers[A]&&delete this._handlers[A]}setHandlerFallback(A){this._handlerFb=A}reset(){if(this._active.length)for(let A=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;A>=0;--A)this._active[A].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(A,w){if(this.reset(),this._ident=A,this._active=this._handlers[A]||_,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(A,w,m){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(A,w,m);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(A,w,m))}unhook(A,w=!0){if(this._active.length){let m=!1,b=this._active.length-1,y=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,m=w,y=this._stack.fallThrough,this._stack.paused=!1),!y&&m===!1){for(;b>=0&&(m=this._active[b].unhook(A),m!==!0);b--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,m;b--}for(;b>=0;b--)if(m=this._active[b].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",A);this._active=_,this._ident=0}};const E=new f.Params;E.addParam(0),l.DcsHandler=class{constructor(A){this._handler=A,this._data="",this._params=E,this._hitLimit=!1}hook(A){this._params=A.length>1||A.params[0]?A.clone():E,this._data="",this._hitLimit=!1}put(A,w,m){this._hitLimit||(this._data+=(0,d.utf32ToString)(A,w,m),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(A){let w=!1;if(this._hitLimit)w=!1;else if(A&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then(m=>(this._params=E,this._data="",this._hitLimit=!1,m));return this._params=E,this._data="",this._hitLimit=!1,w}}},2015:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const d=h(844),f=h(8742),g=h(6242),_=h(6351);class E{constructor(b){this.table=new Uint8Array(b)}setDefault(b,y){this.table.fill(b<<4|y)}add(b,y,x,D){this.table[y<<8|b]=x<<4|D}addMany(b,y,x,D){for(let R=0;R<b.length;R++)this.table[y<<8|b[R]]=x<<4|D}}l.TransitionTable=E;const A=160;l.VT500_TRANSITION_TABLE=function(){const m=new E(4095),b=Array.apply(null,Array(256)).map((L,k)=>k),y=(L,k)=>b.slice(L,k),x=y(32,127),D=y(0,24);D.push(25),D.push.apply(D,y(28,32));const R=y(0,14);let M;for(M in m.setDefault(1,0),m.addMany(x,0,2,0),R)m.addMany([24,26,153,154],M,3,0),m.addMany(y(128,144),M,3,0),m.addMany(y(144,152),M,3,0),m.add(156,M,0,0),m.add(27,M,11,1),m.add(157,M,4,8),m.addMany([152,158,159],M,0,7),m.add(155,M,11,3),m.add(144,M,11,9);return m.addMany(D,0,3,0),m.addMany(D,1,3,1),m.add(127,1,0,1),m.addMany(D,8,0,8),m.addMany(D,3,3,3),m.add(127,3,0,3),m.addMany(D,4,3,4),m.add(127,4,0,4),m.addMany(D,6,3,6),m.addMany(D,5,3,5),m.add(127,5,0,5),m.addMany(D,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(x,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(y(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(x,7,0,7),m.addMany(D,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(y(64,127),3,7,0),m.addMany(y(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(y(48,60),4,8,4),m.addMany(y(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(y(32,64),6,0,6),m.add(127,6,0,6),m.addMany(y(64,127),6,0,0),m.addMany(y(32,48),3,9,5),m.addMany(y(32,48),5,9,5),m.addMany(y(48,64),5,0,6),m.addMany(y(64,127),5,7,0),m.addMany(y(32,48),4,9,5),m.addMany(y(32,48),1,9,2),m.addMany(y(32,48),2,9,2),m.addMany(y(48,127),2,10,0),m.addMany(y(48,80),1,10,0),m.addMany(y(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(y(96,127),1,10,0),m.add(80,1,11,9),m.addMany(D,9,0,9),m.add(127,9,0,9),m.addMany(y(28,32),9,0,9),m.addMany(y(32,48),9,9,12),m.addMany(y(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(D,11,0,11),m.addMany(y(32,128),11,0,11),m.addMany(y(28,32),11,0,11),m.addMany(D,10,0,10),m.add(127,10,0,10),m.addMany(y(28,32),10,0,10),m.addMany(y(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(y(32,48),10,9,12),m.addMany(D,12,0,12),m.add(127,12,0,12),m.addMany(y(28,32),12,0,12),m.addMany(y(32,48),12,9,12),m.addMany(y(48,64),12,0,11),m.addMany(y(64,127),12,12,13),m.addMany(y(64,127),10,12,13),m.addMany(y(64,127),9,12,13),m.addMany(D,13,13,13),m.addMany(x,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(A,0,2,0),m.add(A,8,5,8),m.add(A,6,0,6),m.add(A,11,0,11),m.add(A,13,13,13),m}();class w extends d.Disposable{constructor(b=l.VT500_TRANSITION_TABLE){super(),this._transitions=b,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(y,x,D)=>{},this._executeHandlerFb=y=>{},this._csiHandlerFb=(y,x)=>{},this._escHandlerFb=y=>{},this._errorHandlerFb=y=>y,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new g.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(b,y=[64,126]){let x=0;if(b.prefix){if(b.prefix.length>1)throw new Error("only one byte as prefix supported");if(x=b.prefix.charCodeAt(0),x&&60>x||x>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(b.intermediates){if(b.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let R=0;R<b.intermediates.length;++R){const M=b.intermediates.charCodeAt(R);if(32>M||M>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");x<<=8,x|=M}}if(b.final.length!==1)throw new Error("final must be a single byte");const D=b.final.charCodeAt(0);if(y[0]>D||D>y[1])throw new Error(`final must be in range ${y[0]} .. ${y[1]}`);return x<<=8,x|=D,x}identToString(b){const y=[];for(;b;)y.push(String.fromCharCode(255&b)),b>>=8;return y.reverse().join("")}setPrintHandler(b){this._printHandler=b}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(b,y){const x=this._identifier(b,[48,126]);this._escHandlers[x]===void 0&&(this._escHandlers[x]=[]);const D=this._escHandlers[x];return D.push(y),{dispose:()=>{const R=D.indexOf(y);R!==-1&&D.splice(R,1)}}}clearEscHandler(b){this._escHandlers[this._identifier(b,[48,126])]&&delete this._escHandlers[this._identifier(b,[48,126])]}setEscHandlerFallback(b){this._escHandlerFb=b}setExecuteHandler(b,y){this._executeHandlers[b.charCodeAt(0)]=y}clearExecuteHandler(b){this._executeHandlers[b.charCodeAt(0)]&&delete this._executeHandlers[b.charCodeAt(0)]}setExecuteHandlerFallback(b){this._executeHandlerFb=b}registerCsiHandler(b,y){const x=this._identifier(b);this._csiHandlers[x]===void 0&&(this._csiHandlers[x]=[]);const D=this._csiHandlers[x];return D.push(y),{dispose:()=>{const R=D.indexOf(y);R!==-1&&D.splice(R,1)}}}clearCsiHandler(b){this._csiHandlers[this._identifier(b)]&&delete this._csiHandlers[this._identifier(b)]}setCsiHandlerFallback(b){this._csiHandlerFb=b}registerDcsHandler(b,y){return this._dcsParser.registerHandler(this._identifier(b),y)}clearDcsHandler(b){this._dcsParser.clearHandler(this._identifier(b))}setDcsHandlerFallback(b){this._dcsParser.setHandlerFallback(b)}registerOscHandler(b,y){return this._oscParser.registerHandler(b,y)}clearOscHandler(b){this._oscParser.clearHandler(b)}setOscHandlerFallback(b){this._oscParser.setHandlerFallback(b)}setErrorHandler(b){this._errorHandler=b}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(b,y,x,D,R){this._parseStack.state=b,this._parseStack.handlers=y,this._parseStack.handlerPos=x,this._parseStack.transition=D,this._parseStack.chunkPos=R}parse(b,y,x){let D,R=0,M=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(x===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const k=this._parseStack.handlers;let I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(x===!1&&I>-1){for(;I>=0&&(D=k[I](this._params),D!==!0);I--)if(D instanceof Promise)return this._parseStack.handlerPos=I,D}this._parseStack.handlers=[];break;case 4:if(x===!1&&I>-1){for(;I>=0&&(D=k[I](),D!==!0);I--)if(D instanceof Promise)return this._parseStack.handlerPos=I,D}this._parseStack.handlers=[];break;case 6:if(R=b[this._parseStack.chunkPos],D=this._dcsParser.unhook(R!==24&&R!==26,x),D)return D;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(R=b[this._parseStack.chunkPos],D=this._oscParser.end(R!==24&&R!==26,x),D)return D;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let k=L;k<y;++k){switch(R=b[k],M=this._transitions.table[this.currentState<<8|(R<160?R:A)],M>>4){case 2:for(let H=k+1;;++H){if(H>=y||(R=b[H])<32||R>126&&R<A){this._printHandler(b,k,H),k=H-1;break}if(++H>=y||(R=b[H])<32||R>126&&R<A){this._printHandler(b,k,H),k=H-1;break}if(++H>=y||(R=b[H])<32||R>126&&R<A){this._printHandler(b,k,H),k=H-1;break}if(++H>=y||(R=b[H])<32||R>126&&R<A){this._printHandler(b,k,H),k=H-1;break}}break;case 3:this._executeHandlers[R]?this._executeHandlers[R]():this._executeHandlerFb(R),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:R,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const I=this._csiHandlers[this._collect<<8|R];let V=I?I.length-1:-1;for(;V>=0&&(D=I[V](this._params),D!==!0);V--)if(D instanceof Promise)return this._preserveStack(3,I,V,M,k),D;V<0&&this._csiHandlerFb(this._collect<<8|R,this._params),this.precedingCodepoint=0;break;case 8:do switch(R){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(R-48)}while(++k<y&&(R=b[k])>47&&R<60);k--;break;case 9:this._collect<<=8,this._collect|=R;break;case 10:const N=this._escHandlers[this._collect<<8|R];let B=N?N.length-1:-1;for(;B>=0&&(D=N[B](),D!==!0);B--)if(D instanceof Promise)return this._preserveStack(4,N,B,M,k),D;B<0&&this._escHandlerFb(this._collect<<8|R),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|R,this._params);break;case 13:for(let H=k+1;;++H)if(H>=y||(R=b[H])===24||R===26||R===27||R>127&&R<A){this._dcsParser.put(b,k,H),k=H-1;break}break;case 14:if(D=this._dcsParser.unhook(R!==24&&R!==26),D)return this._preserveStack(6,[],0,M,k),D;R===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let H=k+1;;H++)if(H>=y||(R=b[H])<32||R>127&&R<A){this._oscParser.put(b,k,H),k=H-1;break}break;case 6:if(D=this._oscParser.end(R!==24&&R!==26),D)return this._preserveStack(5,[],0,M,k),D;R===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&M}}}l.EscapeSequenceParser=w},6242:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const d=h(5770),f=h(482),g=[];l.OscParser=class{constructor(){this._state=0,this._active=g,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,E){this._handlers[_]===void 0&&(this._handlers[_]=[]);const A=this._handlers[_];return A.push(E),{dispose:()=>{const w=A.indexOf(E);w!==-1&&A.splice(w,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=g,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||g,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,E,A){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(_,E,A);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(_,E,A))}start(){this.reset(),this._state=1}put(_,E,A){if(this._state!==3){if(this._state===1)for(;E<A;){const w=_[E++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&A-E>0&&this._put(_,E,A)}}end(_,E=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let A=!1,w=this._active.length-1,m=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,A=E,m=this._stack.fallThrough,this._stack.paused=!1),!m&&A===!1){for(;w>=0&&(A=this._active[w].end(_),A!==!0);w--)if(A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,A;w--}for(;w>=0;w--)if(A=this._active[w].end(!1),A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,A}else this._handlerFb(this._id,"END",_);this._active=g,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,E,A){this._hitLimit||(this._data+=(0,f.utf32ToString)(_,E,A),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let E=!1;if(this._hitLimit)E=!1;else if(_&&(E=this._handler(this._data),E instanceof Promise))return E.then(A=>(this._data="",this._hitLimit=!1,A));return this._data="",this._hitLimit=!1,E}}},8742:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const h=2147483647;class d{static fromArray(g){const _=new d;if(!g.length)return _;for(let E=Array.isArray(g[0])?1:0;E<g.length;++E){const A=g[E];if(Array.isArray(A))for(let w=0;w<A.length;++w)_.addSubParam(A[w]);else _.addParam(A)}return _}constructor(g=32,_=32){if(this.maxLength=g,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const g=new d(this.maxLength,this.maxSubParamsLength);return g.params.set(this.params),g.length=this.length,g._subParams.set(this._subParams),g._subParamsLength=this._subParamsLength,g._subParamsIdx.set(this._subParamsIdx),g._rejectDigits=this._rejectDigits,g._rejectSubDigits=this._rejectSubDigits,g._digitIsSub=this._digitIsSub,g}toArray(){const g=[];for(let _=0;_<this.length;++_){g.push(this.params[_]);const E=this._subParamsIdx[_]>>8,A=255&this._subParamsIdx[_];A-E>0&&g.push(Array.prototype.slice.call(this._subParams,E,A))}return g}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>h?h:g}}addSubParam(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>h?h:g,this._subParamsIdx[this.length-1]++}}hasSubParams(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0}getSubParams(g){const _=this._subParamsIdx[g]>>8,E=255&this._subParamsIdx[g];return E-_>0?this._subParams.subarray(_,E):null}getSubParamsAll(){const g={};for(let _=0;_<this.length;++_){const E=this._subParamsIdx[_]>>8,A=255&this._subParamsIdx[_];A-E>0&&(g[_]=this._subParams.slice(E,A))}return g}addDigit(g){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const E=this._digitIsSub?this._subParams:this.params,A=E[_-1];E[_-1]=~A?Math.min(10*A+g,h):g}}l.Params=d},5741:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()}loadAddon(h,d){const f={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(f),d.dispose=()=>this._wrappedAddonDispose(f),d.activate(h)}_wrappedAddonDispose(h){if(h.isDisposed)return;let d=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===h){d=f;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(d,1)}}},8771:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const d=h(3785),f=h(511);l.BufferApiView=class{constructor(g,_){this._buffer=g,this.type=_}init(g){return this._buffer=g,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(g){const _=this._buffer.lines.get(g);if(_)return new d.BufferLineApiView(_)}getNullCell(){return new f.CellData}}},3785:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const d=h(511);l.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,g){if(!(f<0||f>=this._line.length))return g?(this._line.loadCell(f,g),g):this._line.loadCell(f,new d.CellData)}translateToString(f,g,_){return this._line.translateToString(f,g,_)}}},8285:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const d=h(8771),f=h(8460),g=h(844);class _ extends g.Disposable{constructor(A){super(),this._core=A,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=_},7975:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(h){this._core=h}registerCsiHandler(h,d){return this._core.registerCsiHandler(h,f=>d(f.toArray()))}addCsiHandler(h,d){return this.registerCsiHandler(h,d)}registerDcsHandler(h,d){return this._core.registerDcsHandler(h,(f,g)=>d(f,g.toArray()))}addDcsHandler(h,d){return this.registerDcsHandler(h,d)}registerEscHandler(h,d){return this._core.registerEscHandler(h,d)}addEscHandler(h,d){return this.registerEscHandler(h,d)}registerOscHandler(h,d){return this._core.registerOscHandler(h,d)}addOscHandler(h,d){return this.registerOscHandler(h,d)}}},7090:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(h){this._core=h}register(h){this._core.unicodeService.register(h)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(h){this._core.unicodeService.activeVersion=h}}},744:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const g=h(8460),_=h(844),E=h(5295),A=h(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let w=l.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new E.BufferSet(m,this))}resize(m,b){this.cols=m,this.rows=b,this.buffers.resize(m,b),this._onResize.fire({cols:m,rows:b})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,b=!1){const y=this.buffer;let x;x=this._cachedBlankLine,x&&x.length===this.cols&&x.getFg(0)===m.fg&&x.getBg(0)===m.bg||(x=y.getBlankLine(m,b),this._cachedBlankLine=x),x.isWrapped=b;const D=y.ybase+y.scrollTop,R=y.ybase+y.scrollBottom;if(y.scrollTop===0){const M=y.lines.isFull;R===y.lines.length-1?M?y.lines.recycle().copyFrom(x):y.lines.push(x.clone()):y.lines.splice(R+1,0,x.clone()),M?this.isUserScrolling&&(y.ydisp=Math.max(y.ydisp-1,0)):(y.ybase++,this.isUserScrolling||y.ydisp++)}else{const M=R-D+1;y.lines.shiftElements(D+1,M-1,-1),y.lines.set(R,x.clone())}this.isUserScrolling||(y.ydisp=y.ybase),this._onScroll.fire(y.ydisp)}scrollLines(m,b,y){const x=this.buffer;if(m<0){if(x.ydisp===0)return;this.isUserScrolling=!0}else m+x.ydisp>=x.ybase&&(this.isUserScrolling=!1);const D=x.ydisp;x.ydisp=Math.max(Math.min(x.ydisp+m,x.ybase),0),D!==x.ydisp&&(b||this._onScroll.fire(x.ydisp))}};l.BufferService=w=d([f(0,A.IOptionsService)],w)},7994:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(h){this.glevel=h,this.charset=this._charsets[h]}setgCharset(h,d){this._charsets[h]=d,this.glevel===h&&(this.charset=d)}}},1753:function(c,l,h){var d=this&&this.__decorate||function(x,D,R,M){var L,k=arguments.length,I=k<3?D:M===null?M=Object.getOwnPropertyDescriptor(D,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(x,D,R,M);else for(var V=x.length-1;V>=0;V--)(L=x[V])&&(I=(k<3?L(I):k>3?L(D,R,I):L(D,R))||I);return k>3&&I&&Object.defineProperty(D,R,I),I},f=this&&this.__param||function(x,D){return function(R,M){D(R,M,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const g=h(2585),_=h(8460),E=h(844),A={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:x=>x.button!==4&&x.action===1&&(x.ctrl=!1,x.alt=!1,x.shift=!1,!0)},VT200:{events:19,restrict:x=>x.action!==32},DRAG:{events:23,restrict:x=>x.action!==32||x.button!==3},ANY:{events:31,restrict:x=>!0}};function w(x,D){let R=(x.ctrl?16:0)|(x.shift?4:0)|(x.alt?8:0);return x.button===4?(R|=64,R|=x.action):(R|=3&x.button,4&x.button&&(R|=64),8&x.button&&(R|=128),x.action===32?R|=32:x.action!==0||D||(R|=3)),R}const m=String.fromCharCode,b={DEFAULT:x=>{const D=[w(x,!1)+32,x.col+32,x.row+32];return D[0]>255||D[1]>255||D[2]>255?"":`\x1B[M${m(D[0])}${m(D[1])}${m(D[2])}`},SGR:x=>{const D=x.action===0&&x.button!==4?"m":"M";return`\x1B[<${w(x,!0)};${x.col};${x.row}${D}`},SGR_PIXELS:x=>{const D=x.action===0&&x.button!==4?"m":"M";return`\x1B[<${w(x,!0)};${x.x};${x.y}${D}`}};let y=l.CoreMouseService=class extends E.Disposable{constructor(x,D){super(),this._bufferService=x,this._coreService=D,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const R of Object.keys(A))this.addProtocol(R,A[R]);for(const R of Object.keys(b))this.addEncoding(R,b[R]);this.reset()}addProtocol(x,D){this._protocols[x]=D}addEncoding(x,D){this._encodings[x]=D}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(x){if(!this._protocols[x])throw new Error(`unknown protocol "${x}"`);this._activeProtocol=x,this._onProtocolChange.fire(this._protocols[x].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(x){if(!this._encodings[x])throw new Error(`unknown encoding "${x}"`);this._activeEncoding=x}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(x){if(x.col<0||x.col>=this._bufferService.cols||x.row<0||x.row>=this._bufferService.rows||x.button===4&&x.action===32||x.button===3&&x.action!==32||x.button!==4&&(x.action===2||x.action===3)||(x.col++,x.row++,x.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,x,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(x))return!1;const D=this._encodings[this._activeEncoding](x);return D&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(D):this._coreService.triggerDataEvent(D,!0)),this._lastEvent=x,!0}explainEvents(x){return{down:!!(1&x),up:!!(2&x),drag:!!(4&x),move:!!(8&x),wheel:!!(16&x)}}_equalEvents(x,D,R){if(R){if(x.x!==D.x||x.y!==D.y)return!1}else if(x.col!==D.col||x.row!==D.row)return!1;return x.button===D.button&&x.action===D.action&&x.ctrl===D.ctrl&&x.alt===D.alt&&x.shift===D.shift}};l.CoreMouseService=y=d([f(0,g.IBufferService),f(1,g.ICoreService)],y)},6975:function(c,l,h){var d=this&&this.__decorate||function(y,x,D,R){var M,L=arguments.length,k=L<3?x:R===null?R=Object.getOwnPropertyDescriptor(x,D):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(y,x,D,R);else for(var I=y.length-1;I>=0;I--)(M=y[I])&&(k=(L<3?M(k):L>3?M(x,D,k):M(x,D))||k);return L>3&&k&&Object.defineProperty(x,D,k),k},f=this&&this.__param||function(y,x){return function(D,R){x(D,R,y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const g=h(1439),_=h(8460),E=h(844),A=h(2585),w=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let b=l.CoreService=class extends E.Disposable{constructor(y,x,D){super(),this._bufferService=y,this._logService=x,this._optionsService=D,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(w),this.decPrivateModes=(0,g.clone)(m)}reset(){this.modes=(0,g.clone)(w),this.decPrivateModes=(0,g.clone)(m)}triggerDataEvent(y,x=!1){if(this._optionsService.rawOptions.disableStdin)return;const D=this._bufferService.buffer;x&&this._optionsService.rawOptions.scrollOnUserInput&&D.ybase!==D.ydisp&&this._onRequestScrollToBottom.fire(),x&&this._onUserInput.fire(),this._logService.debug(`sending data "${y}"`,()=>y.split("").map(R=>R.charCodeAt(0))),this._onData.fire(y)}triggerBinaryEvent(y){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${y}"`,()=>y.split("").map(x=>x.charCodeAt(0))),this._onBinary.fire(y))}};l.CoreService=b=d([f(0,A.IBufferService),f(1,A.ILogService),f(2,A.IOptionsService)],b)},9074:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const d=h(8055),f=h(8460),g=h(844),_=h(6106);let E=0,A=0;class w extends g.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(y=>y?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,g.toDisposable)(()=>this.reset()))}registerDecoration(y){if(y.marker.isDisposed)return;const x=new m(y);if(x){const D=x.marker.onDispose(()=>x.dispose());x.onDispose(()=>{x&&(this._decorations.delete(x)&&this._onDecorationRemoved.fire(x),D.dispose())}),this._decorations.insert(x),this._onDecorationRegistered.fire(x)}return x}reset(){for(const y of this._decorations.values())y.dispose();this._decorations.clear()}*getDecorationsAtCell(y,x,D){var R,M,L;let k=0,I=0;for(const V of this._decorations.getKeyIterator(x))k=(R=V.options.x)!==null&&R!==void 0?R:0,I=k+((M=V.options.width)!==null&&M!==void 0?M:1),y>=k&&y<I&&(!D||((L=V.options.layer)!==null&&L!==void 0?L:"bottom")===D)&&(yield V)}forEachDecorationAtCell(y,x,D,R){this._decorations.forEachByKey(x,M=>{var L,k,I;E=(L=M.options.x)!==null&&L!==void 0?L:0,A=E+((k=M.options.width)!==null&&k!==void 0?k:1),y>=E&&y<A&&(!D||((I=M.options.layer)!==null&&I!==void 0?I:"bottom")===D)&&R(M)})}}l.DecorationService=w;class m extends g.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(y){super(),this.options=y,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=y.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const d=h(2585),f=h(8343);class g{constructor(...E){this._entries=new Map;for(const[A,w]of E)this.set(A,w)}set(E,A){const w=this._entries.get(E);return this._entries.set(E,A),w}forEach(E){for(const[A,w]of this._entries.entries())E(A,w)}has(E){return this._entries.has(E)}get(E){return this._entries.get(E)}}l.ServiceCollection=g,l.InstantiationService=class{constructor(){this._services=new g,this._services.set(d.IInstantiationService,this)}setService(_,E){this._services.set(_,E)}getService(_){return this._services.get(_)}createInstance(_,...E){const A=(0,f.getServiceDependencies)(_).sort((b,y)=>b.index-y.index),w=[];for(const b of A){const y=this._services.get(b.id);if(!y)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${b.id}.`);w.push(y)}const m=A.length>0?A[0].index:E.length;if(E.length!==m)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${m+1} conflicts with ${E.length} static arguments`);return new _(...E,...w)}}},7866:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(844),_=h(2585),E={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=E[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,y){this._evalLazyOptionalParams(y),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...y)}trace(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}debug(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}info(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.INFO&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.info,m,b)}warn(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.WARN&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.warn,m,b)}error(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.error,m,b)}};l.LogService=w=d([f(0,_.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,y){if(typeof y.value!="function")throw new Error("not supported");const x=y.value;y.value=function(...D){if(A.logLevel!==_.LogLevelEnum.TRACE)return x.apply(this,D);A.trace(`GlyphRenderer#${x.name}(${D.map(M=>JSON.stringify(M)).join(", ")})`);const R=x.apply(this,D);return A.trace(`GlyphRenderer#${x.name} return`,R),R}}},7302:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const d=h(8460),f=h(844),g=h(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:g.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class E extends f.Disposable{constructor(w){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m=Object.assign({},l.DEFAULT_OPTIONS);for(const b in w)if(b in m)try{const y=w[b];m[b]=this._sanitizeAndValidateOption(b,y)}catch(y){console.error(y)}this.rawOptions=m,this.options=Object.assign({},m),this._setupOptions()}onSpecificOptionChange(w,m){return this.onOptionChange(b=>{b===w&&m(this.rawOptions[w])})}onMultipleOptionChange(w,m){return this.onOptionChange(b=>{w.indexOf(b)!==-1&&m()})}_setupOptions(){const w=b=>{if(!(b in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);return this.rawOptions[b]},m=(b,y)=>{if(!(b in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);y=this._sanitizeAndValidateOption(b,y),this.rawOptions[b]!==y&&(this.rawOptions[b]=y,this._onOptionChange.fire(b))};for(const b in this.rawOptions){const y={get:w.bind(this,b),set:m.bind(this,b)};Object.defineProperty(this.options,b,y)}}_sanitizeAndValidateOption(w,m){switch(w){case"cursorStyle":if(m||(m=l.DEFAULT_OPTIONS[w]),!function(b){return b==="block"||b==="underline"||b==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${w}`);break;case"wordSeparator":m||(m=l.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=_.includes(m)?m:l.DEFAULT_OPTIONS[w];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${w} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${w} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}l.OptionsService=E},2660:function(c,l,h){var d=this&&this.__decorate||function(E,A,w,m){var b,y=arguments.length,x=y<3?A:m===null?m=Object.getOwnPropertyDescriptor(A,w):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(E,A,w,m);else for(var D=E.length-1;D>=0;D--)(b=E[D])&&(x=(y<3?b(x):y>3?b(A,w,x):b(A,w))||x);return y>3&&x&&Object.defineProperty(A,w,x),x},f=this&&this.__param||function(E,A){return function(w,m){A(w,m,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const g=h(2585);let _=l.OscLinkService=class{constructor(E){this._bufferService=E,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(E){const A=this._bufferService.buffer;if(E.id===void 0){const D=A.addMarker(A.ybase+A.y),R={data:E,id:this._nextId++,lines:[D]};return D.onDispose(()=>this._removeMarkerFromLink(R,D)),this._dataByLinkId.set(R.id,R),R.id}const w=E,m=this._getEntryIdKey(w),b=this._entriesWithId.get(m);if(b)return this.addLineToLink(b.id,A.ybase+A.y),b.id;const y=A.addMarker(A.ybase+A.y),x={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(x,y)),this._entriesWithId.set(x.key,x),this._dataByLinkId.set(x.id,x),x.id}addLineToLink(E,A){const w=this._dataByLinkId.get(E);if(w&&w.lines.every(m=>m.line!==A)){const m=this._bufferService.buffer.addMarker(A);w.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(w,m))}}getLinkData(E){var A;return(A=this._dataByLinkId.get(E))===null||A===void 0?void 0:A.data}_getEntryIdKey(E){return`${E.id};;${E.uri}`}_removeMarkerFromLink(E,A){const w=E.lines.indexOf(A);w!==-1&&(E.lines.splice(w,1),E.lines.length===0&&(E.data.id!==void 0&&this._entriesWithId.delete(E.key),this._dataByLinkId.delete(E.id)))}};l.OscLinkService=_=d([f(0,g.IBufferService)],_)},8343:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(_,E,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,_,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},2585:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(8343);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const d=h(8460),f=h(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const g=new f.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let _=0;const E=g.length;for(let A=0;A<E;++A){let w=g.charCodeAt(A);if(55296<=w&&w<=56319){if(++A>=E)return _+this.wcwidth(w);const m=g.charCodeAt(A);56320<=m&&m<=57343?w=1024*(w-55296)+m-56320+65536:_+=this.wcwidth(m)}_+=this.wcwidth(w)}return _}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const l=o(9042),h=o(3236),d=o(844),f=o(5741),g=o(8285),_=o(7975),E=o(7090),A=["cols","rows"];class w extends d.Disposable{constructor(b){super(),this._core=this.register(new h.Terminal(b)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const y=D=>this._core.options[D],x=(D,R)=>{this._checkReadonlyOptions(D),this._core.options[D]=R};for(const D in this._core.options){const R={get:y.bind(this,D),set:x.bind(this,D)};Object.defineProperty(this._publicOptions,D,R)}}_checkReadonlyOptions(b){if(A.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new E.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new g.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let y="none";switch(this._core.coreMouseService.activeProtocol){case"X10":y="x10";break;case"VT200":y="vt200";break;case"DRAG":y="drag";break;case"ANY":y="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:y,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const y in b)this._publicOptions[y]=b[y]}blur(){this._core.blur()}focus(){this._core.focus()}resize(b,y){this._verifyIntegers(b,y),this._core.resize(b,y)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.registerMarker(b)}registerDecoration(b){var y,x,D;return this._checkProposedApi(),this._verifyPositiveIntegers((y=b.x)!==null&&y!==void 0?y:0,(x=b.width)!==null&&x!==void 0?x:0,(D=b.height)!==null&&D!==void 0?D:0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,y,x){this._verifyIntegers(b,y,x),this._core.select(b,y,x)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,y){this._verifyIntegers(b,y),this._core.selectLines(b,y)}dispose(){super.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,y){this._core.write(b,y)}writeln(b,y){this._core.write(b),this._core.write(`\r
`,y)}paste(b){this._core.paste(b)}refresh(b,y){this._verifyIntegers(b,y),this._core.refresh(b,y)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){this._addonManager.loadAddon(this,b)}static get strings(){return l}_verifyIntegers(...b){for(const y of b)if(y===1/0||isNaN(y)||y%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const y of b)if(y&&(y===1/0||isNaN(y)||y%1!=0||y<0))throw new Error("This API only accepts positive integers")}}c.Terminal=w})(),a})())})(xterm);var xtermExports=xterm.exports,xtermAddonCanvas={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={903:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;const d=h(274),f=h(627),g=h(237),_=h(860),E=h(374),A=h(296),w=h(345),m=h(859),b=h(399),y=h(855);class x extends m.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var M;return(M=this._charAtlas)===null||M===void 0?void 0:M.pages[0].canvas}constructor(M,L,k,I,V,N,B,H,z,W){super(),this._terminal=M,this._container=L,this._alpha=V,this._themeService=N,this._bufferService=B,this._optionsService=H,this._decorationService=z,this._coreBrowserService=W,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,A.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new m.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new w.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new d.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${k}-layer`),this._canvas.style.zIndex=I.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(Q=>{this._refreshCharAtlas(Q),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,m.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,E.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(M,L){}handleSelectionChanged(M,L,k=!1){this._selectionModel.update(this._terminal,M,L,k)}_setTransparency(M){if(M===this._alpha)return;const L=this._canvas;this._alpha=M,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,L),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(M){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,f.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,M,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,w.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let L=0;L<this._charAtlas.pages.length;L++)this._bitmapGenerator[L]=new D(this._charAtlas.pages[L].canvas)}}resize(M){this._deviceCellWidth=M.device.cell.width,this._deviceCellHeight=M.device.cell.height,this._deviceCharWidth=M.device.char.width,this._deviceCharHeight=M.device.char.height,this._deviceCharLeft=M.device.char.left,this._deviceCharTop=M.device.char.top,this._canvas.width=M.device.canvas.width,this._canvas.height=M.device.canvas.height,this._canvas.style.width=`${M.css.canvas.width}px`,this._canvas.style.height=`${M.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var M;(M=this._charAtlas)===null||M===void 0||M.clearTexture()}_fillCells(M,L,k,I){this._ctx.fillRect(M*this._deviceCellWidth,L*this._deviceCellHeight,k*this._deviceCellWidth,I*this._deviceCellHeight)}_fillMiddleLineAtCells(M,L,k=1){const I=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(M*this._deviceCellWidth,(L+1)*this._deviceCellHeight-I-this._coreBrowserService.dpr,k*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(M,L,k=1,I=0){this._ctx.fillRect(M*this._deviceCellWidth,(L+1)*this._deviceCellHeight+I-this._coreBrowserService.dpr-1,k*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(M,L,k=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const I=this._coreBrowserService.dpr;this._ctx.lineWidth=I;for(let V=0;V<k;V++){const N=(M+V)*this._deviceCellWidth,B=(M+V+.5)*this._deviceCellWidth,H=(M+V+1)*this._deviceCellWidth,z=(L+1)*this._deviceCellHeight-I-1,W=z-I,Q=z+I;this._ctx.moveTo(N,z),this._ctx.bezierCurveTo(N,W,B,W,B,z),this._ctx.bezierCurveTo(B,Q,H,Q,H,z)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(M,L,k=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const I=this._coreBrowserService.dpr;this._ctx.lineWidth=I,this._ctx.setLineDash([2*I,I]);const V=M*this._deviceCellWidth,N=(L+1)*this._deviceCellHeight-I-1;this._ctx.moveTo(V,N);for(let B=0;B<k;B++){const H=(M+k+B)*this._deviceCellWidth;this._ctx.lineTo(H,N)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(M,L,k=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const I=this._coreBrowserService.dpr;this._ctx.lineWidth=I,this._ctx.setLineDash([4*I,3*I]);const V=M*this._deviceCellWidth,N=(M+k)*this._deviceCellWidth,B=(L+1)*this._deviceCellHeight-I-1;this._ctx.moveTo(V,B),this._ctx.lineTo(N,B),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(M,L,k){this._ctx.fillRect(M*this._deviceCellWidth,L*this._deviceCellHeight,this._coreBrowserService.dpr*k,this._deviceCellHeight)}_strokeRectAtCell(M,L,k,I){const V=this._coreBrowserService.dpr;this._ctx.lineWidth=V,this._ctx.strokeRect(M*this._deviceCellWidth+V/2,L*this._deviceCellHeight+V/2,k*this._deviceCellWidth-V,I*this._deviceCellHeight-V)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(M,L,k,I){this._alpha?this._ctx.clearRect(M*this._deviceCellWidth,L*this._deviceCellHeight,k*this._deviceCellWidth,I*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(M*this._deviceCellWidth,L*this._deviceCellHeight,k*this._deviceCellWidth,I*this._deviceCellHeight))}_fillCharTrueColor(M,L,k){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=g.TEXT_BASELINE,this._clipRow(k);let I=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(I=(0,_.tryDrawCustomChar)(this._ctx,M.getChars(),L*this._deviceCellWidth,k*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),I||this._ctx.fillText(M.getChars(),L*this._deviceCellWidth+this._deviceCharLeft,k*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(M,L,k){var I,V,N,B;const H=M.getChars();if(this._cellColorResolver.resolve(M,L,this._bufferService.buffer.ydisp+k),!this._charAtlas)return;let z;z=H&&H.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(H,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(M.getCode()||y.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),z.size.x&&z.size.y&&(this._ctx.save(),this._clipRow(k),this._bitmapGenerator[z.texturePage]&&this._charAtlas.pages[z.texturePage].canvas!==this._bitmapGenerator[z.texturePage].canvas&&((V=(I=this._bitmapGenerator[z.texturePage])===null||I===void 0?void 0:I.bitmap)===null||V===void 0||V.close(),delete this._bitmapGenerator[z.texturePage]),this._charAtlas.pages[z.texturePage].version!==((N=this._bitmapGenerator[z.texturePage])===null||N===void 0?void 0:N.version)&&(this._bitmapGenerator[z.texturePage]||(this._bitmapGenerator[z.texturePage]=new D(this._charAtlas.pages[z.texturePage].canvas)),this._bitmapGenerator[z.texturePage].refresh(),this._bitmapGenerator[z.texturePage].version=this._charAtlas.pages[z.texturePage].version),this._ctx.drawImage(((B=this._bitmapGenerator[z.texturePage])===null||B===void 0?void 0:B.bitmap)||this._charAtlas.pages[z.texturePage].canvas,z.texturePosition.x,z.texturePosition.y,z.size.x,z.size.y,L*this._deviceCellWidth+this._deviceCharLeft-z.offset.x,k*this._deviceCellHeight+this._deviceCharTop-z.offset.y,z.size.x,z.size.y),this._ctx.restore())}_clipRow(M){this._ctx.beginPath(),this._ctx.rect(0,M*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(M,L){return`${L?"italic":""} ${M?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}l.BaseRenderLayer=x;class D{get bitmap(){return this._bitmap}constructor(M){this.canvas=M,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var M;(M=this._bitmap)===null||M===void 0||M.close(),this._bitmap=void 0,b.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){var M;this._state===0&&((M=this._bitmap)===null||M===void 0||M.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(L=>{this._state===2?this.refresh():this._bitmap=L,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasRenderer=void 0;const d=h(627),f=h(56),g=h(374),_=h(345),E=h(859),A=h(873),w=h(43),m=h(630),b=h(744);class y extends E.Disposable{constructor(D,R,M,L,k,I,V,N,B,H,z){super(),this._terminal=D,this._screenElement=R,this._bufferService=L,this._charSizeService=k,this._optionsService=I,this._coreBrowserService=B,this._themeService=z,this._onRequestRedraw=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new _.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new _.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const W=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new b.TextRenderLayer(this._terminal,this._screenElement,0,W,this._bufferService,this._optionsService,V,H,this._coreBrowserService,z),new m.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,H,this._optionsService,z),new w.LinkRenderLayer(this._terminal,this._screenElement,2,M,this._bufferService,this._optionsService,H,this._coreBrowserService,z),new A.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,N,this._coreBrowserService,H,z)];for(const Q of this._renderLayers)(0,_.forwardEvent)(Q.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,g.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,f.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(Q,X)=>this._setCanvasDevicePixelDimensions(Q,X))),this.register((0,E.toDisposable)(()=>{for(const Q of this._renderLayers)Q.dispose();(0,d.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(D,R){this._updateDimensions();for(const M of this._renderLayers)M.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(D=>D.handleBlur())}handleFocus(){this._runOperation(D=>D.handleFocus())}handleSelectionChanged(D,R,M=!1){this._runOperation(L=>L.handleSelectionChanged(D,R,M)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(D=>D.handleCursorMove())}clear(){this._runOperation(D=>D.reset())}_runOperation(D){for(const R of this._renderLayers)D(R)}renderRows(D,R){for(const M of this._renderLayers)M.handleGridChanged(D,R)}clearTextureAtlas(){for(const D of this._renderLayers)D.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*D),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(D,R){this.dimensions.device.canvas.height=R,this.dimensions.device.canvas.width=D;for(const M of this._renderLayers)M.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}l.CanvasRenderer=y},873:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorRenderLayer=void 0;const d=h(457),f=h(859),g=h(399),_=h(782),E=h(903);class A extends E.BaseRenderLayer{constructor(m,b,y,x,D,R,M,L,k,I){super(m,b,"cursor",y,!0,I,D,R,k,L),this._onRequestRedraw=x,this._coreService=M,this._cursorBlinkStateManager=this.register(new f.MutableDisposable),this._cell=new _.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(R.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(m){super.resize(m),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var m;this._clearCursor(),(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new d.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.restartBlinkAnimation()}handleGridChanged(m,b){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(m){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const b=this._bufferService.buffer.ybase+this._bufferService.buffer.y,y=b-this._bufferService.buffer.ydisp;if(y<0||y>=this._bufferService.rows)return void this._clearCursor();const x=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(b).loadCell(x,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const D=this._optionsService.rawOptions.cursorStyle,R=this._optionsService.rawOptions.cursorInactiveStyle;return R&&R!=="none"&&this._cursorRenderers[R](x,y,this._cell),this._ctx.restore(),this._state.x=x,this._state.y=y,this._state.isFocused=!1,this._state.style=D,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===x&&this._state.y===y&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](x,y,this._cell),this._ctx.restore(),this._state.x=x,this._state.y=y,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(g.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(m,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(m,b,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(m,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(m,b,y.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(y,m,b),this._ctx.restore()}_renderUnderlineCursor(m,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(m,b),this._ctx.restore()}_renderOutlineCursor(m,b,y){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(m,b,y.getWidth(),1),this._ctx.restore()}}l.CursorRenderLayer=A},574:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GridCache=void 0,l.GridCache=class{constructor(){this.cache=[]}resize(h,d){for(let f=0;f<h;f++){this.cache.length<=f&&this.cache.push([]);for(let g=this.cache[f].length;g<d;g++)this.cache[f].push(void 0);this.cache[f].length=d}this.cache.length=h}clear(){for(let h=0;h<this.cache.length;h++)for(let d=0;d<this.cache[h].length;d++)this.cache[h][d]=void 0}}},43:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;const d=h(197),f=h(237),g=h(903);class _ extends g.BaseRenderLayer{constructor(A,w,m,b,y,x,D,R,M){super(A,w,"link",m,!0,M,y,x,D,R),this.register(b.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(b.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(A){super.resize(A),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const A=this._state.y2-this._state.y1-1;A>0&&this._clearCells(0,this._state.y1+1,this._state.cols,A),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(A){if(A.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:A.fg&&(0,d.is256Color)(A.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[A.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,A.y1===A.y2)this._fillBottomLineAtCells(A.x1,A.y1,A.x2-A.x1);else{this._fillBottomLineAtCells(A.x1,A.y1,A.cols-A.x1);for(let w=A.y1+1;w<A.y2;w++)this._fillBottomLineAtCells(0,w,A.cols);this._fillBottomLineAtCells(0,A.y2,A.x2)}this._state=A}_handleHideLinkUnderline(A){this._clearCurrentLink()}}l.LinkRenderLayer=_},630:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionRenderLayer=void 0;const d=h(903);class f extends d.BaseRenderLayer{constructor(_,E,A,w,m,b,y,x){super(_,E,"selection",A,!0,x,w,y,b,m),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(_){super.resize(_),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(_,E,A){super.handleSelectionChanged(_,E,A),this._redrawSelection(_,E,A)}_redrawSelection(_,E,A){if(!this._didStateChange(_,E,A,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!_||!E)return void this._clearState();const w=_[1]-this._bufferService.buffer.ydisp,m=E[1]-this._bufferService.buffer.ydisp,b=Math.max(w,0),y=Math.min(m,this._bufferService.rows-1);if(b>=this._bufferService.rows||y<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,A){const x=_[0],D=E[0]-x,R=y-b+1;this._fillCells(x,b,D,R)}else{const x=w===b?_[0]:0,D=b===m?E[0]:this._bufferService.cols;this._fillCells(x,b,D-x,1);const R=Math.max(y-b-1,0);if(this._fillCells(0,b+1,this._bufferService.cols,R),b!==y){const M=m===y?E[0]:this._bufferService.cols;this._fillCells(0,y,M,1)}}this._state.start=[_[0],_[1]],this._state.end=[E[0],E[1]],this._state.columnSelectMode=A,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(_,E,A,w){return!this._areCoordinatesEqual(_,this._state.start)||!this._areCoordinatesEqual(E,this._state.end)||A!==this._state.columnSelectMode||w!==this._state.ydisp}_areCoordinatesEqual(_,E){return!(!_||!E)&&_[0]===E[0]&&_[1]===E[1]}}l.SelectionRenderLayer=f},744:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextRenderLayer=void 0;const d=h(577),f=h(147),g=h(782),_=h(855),E=h(903),A=h(574);class w extends E.BaseRenderLayer{constructor(b,y,x,D,R,M,L,k,I,V){super(b,y,"text",x,D,V,R,M,k,I),this._characterJoinerService=L,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new g.CellData,this._state=new A.GridCache,this.register(M.onSpecificOptionChange("allowTransparency",N=>this._setTransparency(N)))}resize(b){super.resize(b);const y=this._getFont(!1,!1);this._characterWidth===b.device.char.width&&this._characterFont===y||(this._characterWidth=b.device.char.width,this._characterFont=y,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(b,y,x){for(let D=b;D<=y;D++){const R=D+this._bufferService.buffer.ydisp,M=this._bufferService.buffer.lines.get(R),L=this._characterJoinerService.getJoinedCharacters(R);for(let k=0;k<this._bufferService.cols;k++){M.loadCell(k,this._workCell);let I=this._workCell,V=!1,N=k;if(I.getWidth()!==0){if(L.length>0&&k===L[0][0]){V=!0;const B=L.shift();I=new d.JoinedCellData(this._workCell,M.translateToString(!0,B[0],B[1]),B[1]-B[0]),N=B[1]-1}!V&&this._isOverlapping(I)&&N<M.length-1&&M.getCodePoint(N+1)===_.NULL_CELL_CODE&&(I.content&=-12582913,I.content|=8388608),x(I,k,D),k=N}}}}_drawBackground(b,y){const x=this._ctx,D=this._bufferService.cols;let R=0,M=0,L=null;x.save(),this._forEachCell(b,y,(k,I,V)=>{let N=null;k.isInverse()?N=k.isFgDefault()?this._themeService.colors.foreground.css:k.isFgRGB()?`rgb(${f.AttributeData.toColorRGB(k.getFgColor()).join(",")})`:this._themeService.colors.ansi[k.getFgColor()].css:k.isBgRGB()?N=`rgb(${f.AttributeData.toColorRGB(k.getBgColor()).join(",")})`:k.isBgPalette()&&(N=this._themeService.colors.ansi[k.getBgColor()].css);let B=!1;this._decorationService.forEachDecorationAtCell(I,this._bufferService.buffer.ydisp+V,void 0,H=>{H.options.layer!=="top"&&B||(H.backgroundColorRGB&&(N=H.backgroundColorRGB.css),B=H.options.layer==="top")}),L===null&&(R=I,M=V),V!==M?(x.fillStyle=L||"",this._fillCells(R,M,D-R,1),R=I,M=V):L!==N&&(x.fillStyle=L||"",this._fillCells(R,M,I-R,1),R=I,M=V),L=N}),L!==null&&(x.fillStyle=L,this._fillCells(R,M,D-R,1)),x.restore()}_drawForeground(b,y){this._forEachCell(b,y,(x,D,R)=>this._drawChars(x,D,R))}handleGridChanged(b,y){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,b,this._bufferService.cols,y-b+1),this._drawBackground(b,y),this._drawForeground(b,y))}_isOverlapping(b){if(b.getWidth()!==1||b.getCode()<256)return!1;const y=b.getChars();if(this._characterOverlapCache.hasOwnProperty(y))return this._characterOverlapCache[y];this._ctx.save(),this._ctx.font=this._characterFont;const x=Math.floor(this._ctx.measureText(y).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[y]=x,x}}l.TextRenderLayer=w},274:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellColorResolver=void 0;let h,d=0,f=0,g=!1,_=!1,E=!1;l.CellColorResolver=class{constructor(A,w,m,b,y){this._terminal=A,this._selectionRenderModel=w,this._decorationService=m,this._coreBrowserService=b,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(A,w,m){this.result.bg=A.bg,this.result.fg=A.fg,this.result.ext=268435456&A.bg?A.extended.ext:0,f=0,d=0,_=!1,g=!1,E=!1,h=this._themeService.colors,this._decorationService.forEachDecorationAtCell(w,m,"bottom",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,_=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),E=this._selectionRenderModel.isCellSelected(this._terminal,w,m),E&&(f=(this._coreBrowserService.isFocused?h.selectionBackgroundOpaque:h.selectionInactiveBackgroundOpaque).rgba>>8&16777215,_=!0,h.selectionForeground&&(d=h.selectionForeground.rgba>>8&16777215,g=!0)),this._decorationService.forEachDecorationAtCell(w,m,"top",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,_=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),_&&(f=E?-16777216&A.bg&-134217729|f|50331648:-16777216&A.bg|f|50331648),g&&(d=-16777216&A.fg&-67108865|d|50331648),67108864&this.result.fg&&(_&&!g&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&h.background.rgba>>8|50331648,g=!0),!_&&g&&(f=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&h.foreground.rgba>>8|50331648,_=!0)),h=void 0,this.result.bg=_?f:this.result.bg,this.result.fg=g?d:this.result.fg}}},627:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireTextureAtlas=void 0;const d=h(509),f=h(197),g=[];l.acquireTextureAtlas=function(_,E,A,w,m,b,y,x){const D=(0,f.generateConfig)(w,m,b,y,E,A,x);for(let L=0;L<g.length;L++){const k=g[L],I=k.ownedBy.indexOf(_);if(I>=0){if((0,f.configEquals)(k.config,D))return k.atlas;k.ownedBy.length===1?(k.atlas.dispose(),g.splice(L,1)):k.ownedBy.splice(I,1);break}}for(let L=0;L<g.length;L++){const k=g[L];if((0,f.configEquals)(k.config,D))return k.ownedBy.push(_),k.atlas}const R=_._core,M={atlas:new d.TextureAtlas(document,D,R.unicodeService),config:D,ownedBy:[_]};return g.push(M),M.atlas},l.removeTerminalFromCache=function(_){for(let E=0;E<g.length;E++){const A=g[E].ownedBy.indexOf(_);if(A!==-1){g[E].ownedBy.length===1?(g[E].atlas.dispose(),g.splice(E,1)):g[E].ownedBy.splice(A,1);break}}}},197:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;const d=h(160);l.generateConfig=function(f,g,_,E,A,w,m){const b={foreground:w.foreground,background:w.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:w.ansi.slice(),contrastCache:w.contrastCache,halfContrastCache:w.halfContrastCache};return{customGlyphs:A.customGlyphs,devicePixelRatio:m,letterSpacing:A.letterSpacing,lineHeight:A.lineHeight,deviceCellWidth:f,deviceCellHeight:g,deviceCharWidth:_,deviceCharHeight:E,fontFamily:A.fontFamily,fontSize:A.fontSize,fontWeight:A.fontWeight,fontWeightBold:A.fontWeightBold,allowTransparency:A.allowTransparency,drawBoldTextInBrightColors:A.drawBoldTextInBrightColors,minimumContrastRatio:A.minimumContrastRatio,colors:b}},l.configEquals=function(f,g){for(let _=0;_<f.colors.ansi.length;_++)if(f.colors.ansi[_].rgba!==g.colors.ansi[_].rgba)return!1;return f.devicePixelRatio===g.devicePixelRatio&&f.customGlyphs===g.customGlyphs&&f.lineHeight===g.lineHeight&&f.letterSpacing===g.letterSpacing&&f.fontFamily===g.fontFamily&&f.fontSize===g.fontSize&&f.fontWeight===g.fontWeight&&f.fontWeightBold===g.fontWeightBold&&f.allowTransparency===g.allowTransparency&&f.deviceCharWidth===g.deviceCharWidth&&f.deviceCharHeight===g.deviceCharHeight&&f.drawBoldTextInBrightColors===g.drawBoldTextInBrightColors&&f.minimumContrastRatio===g.minimumContrastRatio&&f.colors.foreground.rgba===g.colors.foreground.rgba&&f.colors.background.rgba===g.colors.background.rgba},l.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(399);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorBlinkStateManager=void 0,l.CursorBlinkStateManager=class{constructor(h,d){this._renderCallback=h,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(h=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},h)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tryDrawCustomChar=l.powerlineDefinitions=l.boxDrawingDefinitions=l.blockElementDefinitions=void 0;const d=h(374);l.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const f={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};l.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"║":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╒":{1:(w,m)=>`M.5,1 L.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╓":{1:(w,m)=>`M${.5-w},1 L${.5-w},.5 L1,.5 M${.5+w},.5 L${.5+w},1`},"╔":{1:(w,m)=>`M1,${.5-m} L${.5-w},${.5-m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╕":{1:(w,m)=>`M0,${.5-m} L.5,${.5-m} L.5,1 M0,${.5+m} L.5,${.5+m}`},"╖":{1:(w,m)=>`M${.5+w},1 L${.5+w},.5 L0,.5 M${.5-w},.5 L${.5-w},1`},"╗":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5+w},${.5-m} L${.5+w},1`},"╘":{1:(w,m)=>`M.5,0 L.5,${.5+m} L1,${.5+m} M.5,${.5-m} L1,${.5-m}`},"╙":{1:(w,m)=>`M1,.5 L${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╚":{1:(w,m)=>`M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0 M1,${.5+m} L${.5-w},${.5+m} L${.5-w},0`},"╛":{1:(w,m)=>`M0,${.5+m} L.5,${.5+m} L.5,0 M0,${.5-m} L.5,${.5-m}`},"╜":{1:(w,m)=>`M0,.5 L${.5+w},.5 L${.5+w},0 M${.5-w},.5 L${.5-w},0`},"╝":{1:(w,m)=>`M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M0,${.5+m} L${.5+w},${.5+m} L${.5+w},0`},"╞":{1:(w,m)=>`M.5,0 L.5,1 M.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╟":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1 M${.5+w},.5 L1,.5`},"╠":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╡":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L.5,${.5-m} M0,${.5+m} L.5,${.5+m}`},"╢":{1:(w,m)=>`M0,.5 L${.5-w},.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╣":{1:(w,m)=>`M${.5+w},0 L${.5+w},1 M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0`},"╤":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m} M.5,${.5+m} L.5,1`},"╥":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},1 M${.5+w},.5 L${.5+w},1`},"╦":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╧":{1:(w,m)=>`M.5,0 L.5,${.5-m} M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╨":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╩":{1:(w,m)=>`M0,${.5+m} L1,${.5+m} M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╪":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╫":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╬":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,1,.5`},"╮":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,0,.5`},"╯":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,0,.5`},"╰":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,1,.5`}},l.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.tryDrawCustomChar=function(w,m,b,y,x,D,R,M){const L=l.blockElementDefinitions[m];if(L)return function(N,B,H,z,W,Q){for(let X=0;X<B.length;X++){const G=B[X],q=W/8,Y=Q/8;N.fillRect(H+G.x*q,z+G.y*Y,G.w*q,G.h*Y)}}(w,L,b,y,x,D),!0;const k=f[m];if(k)return function(N,B,H,z,W,Q){let X=g.get(B);X||(X=new Map,g.set(B,X));const G=N.fillStyle;if(typeof G!="string")throw new Error(`Unexpected fillStyle type "${G}"`);let q=X.get(G);if(!q){const Y=B[0].length,K=B.length,se=document.createElement("canvas");se.width=Y,se.height=K;const Se=(0,d.throwIfFalsy)(se.getContext("2d")),be=new ImageData(Y,K);let xe,Ee,J,ne;if(G.startsWith("#"))xe=parseInt(G.slice(1,3),16),Ee=parseInt(G.slice(3,5),16),J=parseInt(G.slice(5,7),16),ne=G.length>7&&parseInt(G.slice(7,9),16)||1;else{if(!G.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${G}" when drawing pattern glyph`);[xe,Ee,J,ne]=G.substring(5,G.length-1).split(",").map(de=>parseFloat(de))}for(let de=0;de<K;de++)for(let ue=0;ue<Y;ue++)be.data[4*(de*Y+ue)]=xe,be.data[4*(de*Y+ue)+1]=Ee,be.data[4*(de*Y+ue)+2]=J,be.data[4*(de*Y+ue)+3]=B[de][ue]*(255*ne);Se.putImageData(be,0,0),q=(0,d.throwIfFalsy)(N.createPattern(se,null)),X.set(G,q)}N.fillStyle=q,N.fillRect(H,z,W,Q)}(w,k,b,y,x,D),!0;const I=l.boxDrawingDefinitions[m];if(I)return function(N,B,H,z,W,Q,X){N.strokeStyle=N.fillStyle;for(const[G,q]of Object.entries(B)){let Y;N.beginPath(),N.lineWidth=X*Number.parseInt(G),Y=typeof q=="function"?q(.15,.15/Q*W):q;for(const K of Y.split(" ")){const se=K[0],Se=E[se];if(!Se){console.error(`Could not find drawing instructions for "${se}"`);continue}const be=K.substring(1).split(",");be[0]&&be[1]&&Se(N,A(be,W,Q,H,z,!0,X))}N.stroke(),N.closePath()}}(w,I,b,y,x,D,M),!0;const V=l.powerlineDefinitions[m];return!!V&&(function(N,B,H,z,W,Q,X,G){var q,Y;const K=new Path2D;K.rect(H,z,W,Q),N.clip(K),N.beginPath();const se=X/12;N.lineWidth=G*se;for(const Se of B.d.split(" ")){const be=Se[0],xe=E[be];if(!xe){console.error(`Could not find drawing instructions for "${be}"`);continue}const Ee=Se.substring(1).split(",");Ee[0]&&Ee[1]&&xe(N,A(Ee,W,Q,H,z,!1,G,((q=B.leftPadding)!==null&&q!==void 0?q:0)*(se/2),((Y=B.rightPadding)!==null&&Y!==void 0?Y:0)*(se/2)))}B.type===1?(N.strokeStyle=N.fillStyle,N.stroke()):N.fill(),N.closePath()}(w,V,b,y,x,D,R,M),!0)};const g=new Map;function _(w,m,b=0){return Math.max(Math.min(w,m),b)}const E={C:(w,m)=>w.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]),L:(w,m)=>w.lineTo(m[0],m[1]),M:(w,m)=>w.moveTo(m[0],m[1])};function A(w,m,b,y,x,D,R,M=0,L=0){const k=w.map(I=>parseFloat(I)||parseInt(I));if(k.length<2)throw new Error("Too few arguments for instruction");for(let I=0;I<k.length;I+=2)k[I]*=m-M*R-L*R,D&&k[I]!==0&&(k[I]=_(Math.round(k[I]+.5)-.5,m,0)),k[I]+=y+M*R;for(let I=1;I<k.length;I+=2)k[I]*=b,D&&k[I]!==0&&(k[I]=_(Math.round(k[I]+.5)-.5,b,0)),k[I]+=x;return k}},56:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.observeDevicePixelDimensions=void 0;const d=h(859);l.observeDevicePixelDimensions=function(f,g,_){let E=new g.ResizeObserver(A=>{const w=A.find(y=>y.target===f);if(!w)return;if(!("devicePixelContentBoxSize"in w))return E?.disconnect(),void(E=void 0);const m=w.devicePixelContentBoxSize[0].inlineSize,b=w.devicePixelContentBoxSize[0].blockSize;m>0&&b>0&&_(m,b)});try{E.observe(f,{box:["device-pixel-content-box"]})}catch{E.disconnect(),E=void 0}return(0,d.toDisposable)(()=>E?.disconnect())}},374:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class h{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,g,_,E=!1){if(this.selectionStart=g,this.selectionEnd=_,!g||!_||g[0]===_[0]&&g[1]===_[1])return void this.clear();const A=g[1]-f.buffer.active.viewportY,w=_[1]-f.buffer.active.viewportY,m=Math.max(A,0),b=Math.min(w,f.rows-1);m>=f.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=E,this.viewportStartRow=A,this.viewportEndRow=w,this.viewportCappedStartRow=m,this.viewportCappedEndRow=b,this.startCol=g[0],this.endCol=_[0])}isCellSelected(f,g,_){return!!this.hasSelection&&(_-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?g>=this.startCol&&_>=this.viewportCappedStartRow&&g<this.endCol&&_<=this.viewportCappedEndRow:g<this.startCol&&_>=this.viewportCappedStartRow&&g>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&g>=this.startCol&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&g>=this.startCol)}}l.createSelectionRenderModel=function(){return new h}},509:function(c,l,h){var d=this&&this.__decorate||function(V,N,B,H){var z,W=arguments.length,Q=W<3?N:H===null?H=Object.getOwnPropertyDescriptor(N,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(V,N,B,H);else for(var X=V.length-1;X>=0;X--)(z=V[X])&&(Q=(W<3?z(Q):W>3?z(N,B,Q):z(N,B))||Q);return W>3&&Q&&Object.defineProperty(N,B,Q),Q};Object.defineProperty(l,"__esModule",{value:!0}),l.TextureAtlas=void 0;const f=h(237),g=h(860),_=h(374),E=h(160),A=h(345),w=h(485),m=h(385),b=h(147),y=h(855),x=h(776),D={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let R;class M{get pages(){return this._pages}constructor(N,B,H){this._document=N,this._config=B,this._unicodeService=H,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new A.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new A.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=I(N,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,_.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const N of this.pages)N.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const N=new m.IdleTaskQueue;for(let B=33;B<126;B++)N.enqueue(()=>{if(!this._cacheMap.get(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){const H=this._drawToCache(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);this._cacheMap.set(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,H)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const N of this._pages)N.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(M.maxAtlasPages&&this._pages.length>=Math.max(4,M.maxAtlasPages)){const B=this._pages.filter(q=>2*q.canvas.width<=(M.maxTextureSize||4096)).sort((q,Y)=>Y.canvas.width!==q.canvas.width?Y.canvas.width-q.canvas.width:Y.percentageUsed-q.percentageUsed);let H=-1,z=0;for(let q=0;q<B.length;q++)if(B[q].canvas.width!==z)H=q,z=B[q].canvas.width;else if(q-H==3)break;const W=B.slice(H,H+4),Q=W.map(q=>q.glyphs[0].texturePage).sort((q,Y)=>q>Y?1:-1),X=this.pages.length-W.length,G=this._mergePages(W,X);G.version++;for(let q=Q.length-1;q>=0;q--)this._deletePage(Q[q]);this.pages.push(G),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(G.canvas)}const N=new L(this._document,this._textureSize);return this._pages.push(N),this._activePages.push(N),this._onAddTextureAtlasCanvas.fire(N.canvas),N}_mergePages(N,B){const H=2*N[0].canvas.width,z=new L(this._document,H,N);for(const[W,Q]of N.entries()){const X=W*Q.canvas.width%H,G=Math.floor(W/2)*Q.canvas.height;z.ctx.drawImage(Q.canvas,X,G);for(const Y of Q.glyphs)Y.texturePage=B,Y.sizeClipSpace.x=Y.size.x/H,Y.sizeClipSpace.y=Y.size.y/H,Y.texturePosition.x+=X,Y.texturePosition.y+=G,Y.texturePositionClipSpace.x=Y.texturePosition.x/H,Y.texturePositionClipSpace.y=Y.texturePosition.y/H;this._onRemoveTextureAtlasCanvas.fire(Q.canvas);const q=this._activePages.indexOf(Q);q!==-1&&this._activePages.splice(q,1)}return z}_deletePage(N){this._pages.splice(N,1);for(let B=N;B<this._pages.length;B++){const H=this._pages[B];for(const z of H.glyphs)z.texturePage--;H.version++}}getRasterizedGlyphCombinedChar(N,B,H,z,W){return this._getFromCacheMap(this._cacheMapCombined,N,B,H,z,W)}getRasterizedGlyph(N,B,H,z,W){return this._getFromCacheMap(this._cacheMap,N,B,H,z,W)}_getFromCacheMap(N,B,H,z,W,Q=!1){return R=N.get(B,H,z,W),R||(R=this._drawToCache(B,H,z,W,Q),N.set(B,H,z,W,R)),R}_getColorFromAnsiIndex(N){if(N>=this._config.colors.ansi.length)throw new Error("No color found for idx "+N);return this._config.colors.ansi[N]}_getBackgroundColor(N,B,H,z){if(this._config.allowTransparency)return E.NULL_COLOR;let W;switch(N){case 16777216:case 33554432:W=this._getColorFromAnsiIndex(B);break;case 50331648:const Q=b.AttributeData.toColorRGB(B);W=E.rgba.toColor(Q[0],Q[1],Q[2]);break;default:W=H?E.color.opaque(this._config.colors.foreground):this._config.colors.background}return W}_getForegroundColor(N,B,H,z,W,Q,X,G,q,Y){const K=this._getMinimumContrastColor(N,B,H,z,W,Q,!1,q,G,Y);if(K)return K;let se;switch(W){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&q&&Q<8&&(Q+=8),se=this._getColorFromAnsiIndex(Q);break;case 50331648:const Se=b.AttributeData.toColorRGB(Q);se=E.rgba.toColor(Se[0],Se[1],Se[2]);break;default:se=X?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(se=E.color.opaque(se)),G&&(se=E.color.multiplyOpacity(se,f.DIM_OPACITY)),se}_resolveBackgroundRgba(N,B,H){switch(N){case 16777216:case 33554432:return this._getColorFromAnsiIndex(B).rgba;case 50331648:return B<<8;default:return H?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(N,B,H,z){switch(N){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&z&&B<8&&(B+=8),this._getColorFromAnsiIndex(B).rgba;case 50331648:return B<<8;default:return H?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(N,B,H,z,W,Q,X,G,q,Y){if(this._config.minimumContrastRatio===1||Y)return;const K=this._getContrastCache(q),se=K.getColor(N,z);if(se!==void 0)return se||void 0;const Se=this._resolveBackgroundRgba(B,H,X),be=this._resolveForegroundRgba(W,Q,X,G),xe=E.rgba.ensureContrastRatio(Se,be,this._config.minimumContrastRatio/(q?2:1));if(!xe)return void K.setColor(N,z,null);const Ee=E.rgba.toColor(xe>>24&255,xe>>16&255,xe>>8&255);return K.setColor(N,z,Ee),Ee}_getContrastCache(N){return N?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(N,B,H,z,W=!1){const Q=typeof N=="number"?String.fromCharCode(N):N,X=Math.min(this._config.deviceCellWidth*Math.max(Q.length,2)+4,this._textureSize);this._tmpCanvas.width<X&&(this._tmpCanvas.width=X);const G=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<G&&(this._tmpCanvas.height=G),this._tmpCtx.save(),this._workAttributeData.fg=H,this._workAttributeData.bg=B,this._workAttributeData.extended.ext=z,this._workAttributeData.isInvisible())return D;const q=!!this._workAttributeData.isBold(),Y=!!this._workAttributeData.isInverse(),K=!!this._workAttributeData.isDim(),se=!!this._workAttributeData.isItalic(),Se=!!this._workAttributeData.isUnderline(),be=!!this._workAttributeData.isStrikethrough(),xe=!!this._workAttributeData.isOverline();let Ee=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),ne=this._workAttributeData.getBgColor(),de=this._workAttributeData.getBgColorMode();if(Y){const De=Ee;Ee=ne,ne=De;const Pe=J;J=de,de=Pe}const ue=this._getBackgroundColor(de,ne,Y,K);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ue.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Fe=q?this._config.fontWeightBold:this._config.fontWeight,Ie=se?"italic":"";this._tmpCtx.font=`${Ie} ${Fe} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const ye=Q.length===1&&(0,_.isPowerlineGlyph)(Q.charCodeAt(0)),$e=Q.length===1&&(0,_.isRestrictedPowerlineGlyph)(Q.charCodeAt(0)),Oe=this._getForegroundColor(B,de,ne,H,J,Ee,Y,K,q,(0,_.excludeFromContrastRatioDemands)(Q.charCodeAt(0)));this._tmpCtx.fillStyle=Oe.css;const Le=$e?0:4;let He=!1;this._config.customGlyphs!==!1&&(He=(0,g.tryDrawCustomChar)(this._tmpCtx,Q,Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let tt,Ze=!ye;if(tt=typeof N=="number"?this._unicodeService.wcwidth(N):this._unicodeService.getStringCellWidth(N),Se){this._tmpCtx.save();const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Pe=De%2==1?.5:0;if(this._tmpCtx.lineWidth=De,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ze=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ze=!1;let vt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&vt<8&&(vt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(vt).css}this._tmpCtx.beginPath();const Je=Le,Ye=Math.ceil(Le+this._config.deviceCharHeight)-Pe-(W?2*De:0),Ct=Ye+De,Rt=Ye+2*De;for(let vt=0;vt<tt;vt++){this._tmpCtx.save();const ut=Je+vt*this._config.deviceCellWidth,nt=Je+(vt+1)*this._config.deviceCellWidth,Re=ut+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye),this._tmpCtx.moveTo(ut,Rt),this._tmpCtx.lineTo(nt,Rt);break;case 3:const it=De<=1?Rt:Math.ceil(Le+this._config.deviceCharHeight-De/2)-Pe,lt=De<=1?Ye:Math.ceil(Le+this._config.deviceCharHeight+De/2)-Pe,dt=new Path2D;dt.rect(ut,Ye,this._config.deviceCellWidth,Rt-Ye),this._tmpCtx.clip(dt),this._tmpCtx.moveTo(ut-this._config.deviceCellWidth/2,Ct),this._tmpCtx.bezierCurveTo(ut-this._config.deviceCellWidth/2,lt,ut,lt,ut,Ct),this._tmpCtx.bezierCurveTo(ut,it,Re,it,Re,Ct),this._tmpCtx.bezierCurveTo(Re,lt,nt,lt,nt,Ct),this._tmpCtx.bezierCurveTo(nt,it,nt+this._config.deviceCellWidth/2,it,nt+this._config.deviceCellWidth/2,Ct);break;case 4:this._tmpCtx.setLineDash([Math.round(De),Math.round(De)]),this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye);break;default:this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!He&&this._config.fontSize>=12&&!this._config.allowTransparency&&Q!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const vt=this._tmpCtx.measureText(Q);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in vt&&vt.actualBoundingBoxDescent>0){this._tmpCtx.save();const ut=new Path2D;ut.rect(Je,Ye-Math.ceil(De/2),this._config.deviceCellWidth*tt,Rt-Ye+Math.ceil(De/2)),this._tmpCtx.clip(ut),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ue.css,this._tmpCtx.strokeText(Q,Le,Le+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(xe){const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Pe=De%2==1?.5:0;this._tmpCtx.lineWidth=De,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Le,Le+Pe),this._tmpCtx.lineTo(Le+this._config.deviceCharWidth*tt,Le+Pe),this._tmpCtx.stroke()}if(He||this._tmpCtx.fillText(Q,Le,Le+this._config.deviceCharHeight),Q==="_"&&!this._config.allowTransparency){let De=k(this._tmpCtx.getImageData(Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight),ue,Oe,Ze);if(De)for(let Pe=1;Pe<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ue.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(Q,Le,Le+this._config.deviceCharHeight-Pe),De=k(this._tmpCtx.getImageData(Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight),ue,Oe,Ze),De);Pe++);}if(be){const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Pe=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=De,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Le,Le+Math.floor(this._config.deviceCharHeight/2)-Pe),this._tmpCtx.lineTo(Le+this._config.deviceCharWidth*tt,Le+Math.floor(this._config.deviceCharHeight/2)-Pe),this._tmpCtx.stroke()}this._tmpCtx.restore();const pt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let fe;if(fe=this._config.allowTransparency?function(De){for(let Pe=0;Pe<De.data.length;Pe+=4)if(De.data[Pe+3]>0)return!1;return!0}(pt):k(pt,ue,Oe,Ze),fe)return D;const Ne=this._findGlyphBoundingBox(pt,this._workBoundingBox,X,$e,He,Le);let we,ke;for(;;){if(this._activePages.length===0){const De=this._createNewPage();we=De,ke=De.currentRow,ke.height=Ne.size.y;break}we=this._activePages[this._activePages.length-1],ke=we.currentRow;for(const De of this._activePages)Ne.size.y<=De.currentRow.height&&(we=De,ke=De.currentRow);for(let De=this._activePages.length-1;De>=0;De--)for(const Pe of this._activePages[De].fixedRows)Pe.height<=ke.height&&Ne.size.y<=Pe.height&&(we=this._activePages[De],ke=Pe);if(ke.y+Ne.size.y>=we.canvas.height||ke.height>Ne.size.y+2){let De=!1;if(we.currentRow.y+we.currentRow.height+Ne.size.y>=we.canvas.height){let Pe;for(const Je of this._activePages)if(Je.currentRow.y+Je.currentRow.height+Ne.size.y<Je.canvas.height){Pe=Je;break}if(Pe)we=Pe;else if(M.maxAtlasPages&&this._pages.length>=M.maxAtlasPages&&ke.y+Ne.size.y<=we.canvas.height&&ke.height>=Ne.size.y&&ke.x+Ne.size.x<=we.canvas.width)De=!0;else{const Je=this._createNewPage();we=Je,ke=Je.currentRow,ke.height=Ne.size.y,De=!0}}De||(we.currentRow.height>0&&we.fixedRows.push(we.currentRow),ke={x:0,y:we.currentRow.y+we.currentRow.height,height:Ne.size.y},we.fixedRows.push(ke),we.currentRow={x:0,y:ke.y+ke.height,height:0})}if(ke.x+Ne.size.x<=we.canvas.width)break;ke===we.currentRow?(ke.x=0,ke.y+=ke.height,ke.height=0):we.fixedRows.splice(we.fixedRows.indexOf(ke),1)}return Ne.texturePage=this._pages.indexOf(we),Ne.texturePosition.x=ke.x,Ne.texturePosition.y=ke.y,Ne.texturePositionClipSpace.x=ke.x/we.canvas.width,Ne.texturePositionClipSpace.y=ke.y/we.canvas.height,Ne.sizeClipSpace.x/=we.canvas.width,Ne.sizeClipSpace.y/=we.canvas.height,ke.height=Math.max(ke.height,Ne.size.y),ke.x+=Ne.size.x,we.ctx.putImageData(pt,Ne.texturePosition.x-this._workBoundingBox.left,Ne.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Ne.size.x,Ne.size.y),we.addGlyph(Ne),we.version++,Ne}_findGlyphBoundingBox(N,B,H,z,W,Q){B.top=0;const X=z?this._config.deviceCellHeight:this._tmpCanvas.height,G=z?this._config.deviceCellWidth:H;let q=!1;for(let Y=0;Y<X;Y++){for(let K=0;K<G;K++){const se=Y*this._tmpCanvas.width*4+4*K+3;if(N.data[se]!==0){B.top=Y,q=!0;break}}if(q)break}B.left=0,q=!1;for(let Y=0;Y<Q+G;Y++){for(let K=0;K<X;K++){const se=K*this._tmpCanvas.width*4+4*Y+3;if(N.data[se]!==0){B.left=Y,q=!0;break}}if(q)break}B.right=G,q=!1;for(let Y=Q+G-1;Y>=Q;Y--){for(let K=0;K<X;K++){const se=K*this._tmpCanvas.width*4+4*Y+3;if(N.data[se]!==0){B.right=Y,q=!0;break}}if(q)break}B.bottom=X,q=!1;for(let Y=X-1;Y>=0;Y--){for(let K=0;K<G;K++){const se=Y*this._tmpCanvas.width*4+4*K+3;if(N.data[se]!==0){B.bottom=Y,q=!0;break}}if(q)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:B.right-B.left+1,y:B.bottom-B.top+1},sizeClipSpace:{x:B.right-B.left+1,y:B.bottom-B.top+1},offset:{x:-B.left+Q+(z||W?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-B.top+Q+(z||W?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}l.TextureAtlas=M,d([x.traceCall],M.prototype,"_drawToCache",null);class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(N){this._glyphs.push(N),this._usedPixels+=N.size.x*N.size.y}constructor(N,B,H){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],H)for(const z of H)this._glyphs.push(...z.glyphs),this._usedPixels+=z._usedPixels;this.canvas=I(N,B,B),this.ctx=(0,_.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function k(V,N,B,H){const z=N.rgba>>>24,W=N.rgba>>>16&255,Q=N.rgba>>>8&255,X=B.rgba>>>24,G=B.rgba>>>16&255,q=B.rgba>>>8&255,Y=Math.floor((Math.abs(z-X)+Math.abs(W-G)+Math.abs(Q-q))/12);let K=!0;for(let se=0;se<V.data.length;se+=4)V.data[se]===z&&V.data[se+1]===W&&V.data[se+2]===Q||H&&Math.abs(V.data[se]-z)+Math.abs(V.data[se+1]-W)+Math.abs(V.data[se+2]-Q)<Y?V.data[se+3]=0:K=!1;return K}function I(V,N,B){const H=V.createElement("canvas");return H.width=N,H.height=B,H}},577:function(c,l,h){var d=this&&this.__decorate||function(b,y,x,D){var R,M=arguments.length,L=M<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,x):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,y,x,D);else for(var k=b.length-1;k>=0;k--)(R=b[k])&&(L=(M<3?R(L):M>3?R(y,x,L):R(y,x))||L);return M>3&&L&&Object.defineProperty(y,x,L),L},f=this&&this.__param||function(b,y){return function(x,D){y(x,D,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const g=h(147),_=h(855),E=h(782),A=h(97);class w extends g.AttributeData{constructor(y,x,D){super(),this.content=0,this.combinedData="",this.fg=y.fg,this.bg=y.bg,this.combinedData=x,this._width=D}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(y){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let m=l.CharacterJoinerService=class _n{constructor(y){this._bufferService=y,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new E.CellData}register(y){const x={id:this._nextCharacterJoinerId++,handler:y};return this._characterJoiners.push(x),x.id}deregister(y){for(let x=0;x<this._characterJoiners.length;x++)if(this._characterJoiners[x].id===y)return this._characterJoiners.splice(x,1),!0;return!1}getJoinedCharacters(y){if(this._characterJoiners.length===0)return[];const x=this._bufferService.buffer.lines.get(y);if(!x||x.length===0)return[];const D=[],R=x.translateToString(!0);let M=0,L=0,k=0,I=x.getFg(0),V=x.getBg(0);for(let N=0;N<x.getTrimmedLength();N++)if(x.loadCell(N,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==V){if(N-M>1){const B=this._getJoinedRanges(R,k,L,x,M);for(let H=0;H<B.length;H++)D.push(B[H])}M=N,k=L,I=this._workCell.fg,V=this._workCell.bg}L+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-M>1){const N=this._getJoinedRanges(R,k,L,x,M);for(let B=0;B<N.length;B++)D.push(N[B])}return D}_getJoinedRanges(y,x,D,R,M){const L=y.substring(x,D);let k=[];try{k=this._characterJoiners[0].handler(L)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const V=this._characterJoiners[I].handler(L);for(let N=0;N<V.length;N++)_n._mergeRanges(k,V[N])}catch(V){console.error(V)}return this._stringRangesToCellRanges(k,R,M),k}_stringRangesToCellRanges(y,x,D){let R=0,M=!1,L=0,k=y[R];if(k){for(let I=D;I<this._bufferService.cols;I++){const V=x.getWidth(I),N=x.getString(I).length||_.WHITESPACE_CELL_CHAR.length;if(V!==0){if(!M&&k[0]<=L&&(k[0]=I,M=!0),k[1]<=L){if(k[1]=I,k=y[++R],!k)break;k[0]<=L?(k[0]=I,M=!0):M=!1}L+=N}}k&&(k[1]=this._bufferService.cols)}}static _mergeRanges(y,x){let D=!1;for(let R=0;R<y.length;R++){const M=y[R];if(D){if(x[1]<=M[0])return y[R-1][1]=x[1],y;if(x[1]<=M[1])return y[R-1][1]=Math.max(x[1],M[1]),y.splice(R,1),y;y.splice(R,1),R--}else{if(x[1]<=M[0])return y.splice(R,0,x),y;if(x[1]<=M[1])return M[0]=Math.min(x[0],M[0]),y;x[0]<M[1]&&(M[0]=Math.min(x[0],M[0]),D=!0)}}return D?y[y.length-1][1]=x[1]:y.push(x),y}};l.CharacterJoinerService=m=d([f(0,A.IBufferService)],m)},160:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(399);let f=0,g=0,_=0,E=0;var A,w,m,b,y;function x(R){const M=R.toString(16);return M.length<2?"0"+M:M}function D(R,M){return R<M?(M+.05)/(R+.05):(R+.05)/(M+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(R){R.toCss=function(M,L,k,I){return I!==void 0?`#${x(M)}${x(L)}${x(k)}${x(I)}`:`#${x(M)}${x(L)}${x(k)}`},R.toRgba=function(M,L,k,I=255){return(M<<24|L<<16|k<<8|I)>>>0}}(A||(l.channels=A={})),function(R){function M(L,k){return E=Math.round(255*k),[f,g,_]=y.toChannels(L.rgba),{css:A.toCss(f,g,_,E),rgba:A.toRgba(f,g,_,E)}}R.blend=function(L,k){if(E=(255&k.rgba)/255,E===1)return{css:k.css,rgba:k.rgba};const I=k.rgba>>24&255,V=k.rgba>>16&255,N=k.rgba>>8&255,B=L.rgba>>24&255,H=L.rgba>>16&255,z=L.rgba>>8&255;return f=B+Math.round((I-B)*E),g=H+Math.round((V-H)*E),_=z+Math.round((N-z)*E),{css:A.toCss(f,g,_),rgba:A.toRgba(f,g,_)}},R.isOpaque=function(L){return(255&L.rgba)==255},R.ensureContrastRatio=function(L,k,I){const V=y.ensureContrastRatio(L.rgba,k.rgba,I);if(V)return y.toColor(V>>24&255,V>>16&255,V>>8&255)},R.opaque=function(L){const k=(255|L.rgba)>>>0;return[f,g,_]=y.toChannels(k),{css:A.toCss(f,g,_),rgba:k}},R.opacity=M,R.multiplyOpacity=function(L,k){return E=255&L.rgba,M(L,E*k/255)},R.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(R){let M,L;if(!d.isNode){const k=document.createElement("canvas");k.width=1,k.height=1;const I=k.getContext("2d",{willReadFrequently:!0});I&&(M=I,M.globalCompositeOperation="copy",L=M.createLinearGradient(0,0,1,1))}R.toColor=function(k){if(k.match(/#[\da-f]{3,8}/i))switch(k.length){case 4:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),y.toColor(f,g,_);case 5:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),E=parseInt(k.slice(4,5).repeat(2),16),y.toColor(f,g,_,E);case 7:return{css:k,rgba:(parseInt(k.slice(1),16)<<8|255)>>>0};case 9:return{css:k,rgba:parseInt(k.slice(1),16)>>>0}}const I=k.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(I)return f=parseInt(I[1]),g=parseInt(I[2]),_=parseInt(I[3]),E=Math.round(255*(I[5]===void 0?1:parseFloat(I[5]))),y.toColor(f,g,_,E);if(!M||!L)throw new Error("css.toColor: Unsupported css format");if(M.fillStyle=L,M.fillStyle=k,typeof M.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(M.fillRect(0,0,1,1),[f,g,_,E]=M.getImageData(0,0,1,1).data,E!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,_,E),css:k}}}(m||(l.css=m={})),function(R){function M(L,k,I){const V=L/255,N=k/255,B=I/255;return .2126*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.7152*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}R.relativeLuminance=function(L){return M(L>>16&255,L>>8&255,255&L)},R.relativeLuminance2=M}(b||(l.rgb=b={})),function(R){function M(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z>0||W>0||Q>0);)z-=Math.max(0,Math.ceil(.1*z)),W-=Math.max(0,Math.ceil(.1*W)),Q-=Math.max(0,Math.ceil(.1*Q)),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}function L(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z<255||W<255||Q<255);)z=Math.min(255,z+Math.ceil(.1*(255-z))),W=Math.min(255,W+Math.ceil(.1*(255-W))),Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}R.ensureContrastRatio=function(k,I,V){const N=b.relativeLuminance(k>>8),B=b.relativeLuminance(I>>8);if(D(N,B)<V){if(B<N){const W=M(k,I,V),Q=D(N,b.relativeLuminance(W>>8));if(Q<V){const X=L(k,I,V);return Q>D(N,b.relativeLuminance(X>>8))?W:X}return W}const H=L(k,I,V),z=D(N,b.relativeLuminance(H>>8));if(z<V){const W=M(k,I,V);return z>D(N,b.relativeLuminance(W>>8))?H:W}return H}},R.reduceLuminance=M,R.increaseLuminance=L,R.toChannels=function(k){return[k>>24&255,k>>16&255,k>>8&255,255&k]},R.toColor=function(k,I,V,N){return{css:A.toCss(k,I,V,N),rgba:A.toRgba(k,I,V,N)}}}(y||(l.rgba=y={})),l.toPaddedHex=x,l.contrastRatio=D},345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},485:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,_){this._data[f]||(this._data[f]={}),this._data[f][g]=_}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,_,E){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,_,E)}get(d,f,g,_){var E;return(E=this._data.get(d,f))===null||E===void 0?void 0:E.get(g,_)}clear(){this._data.clear()}}},399:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},385:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(E){this._tasks.push(E),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(E){this._idleCallback=void 0;let A=0,w=0,m=E.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=E.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(E){return setTimeout(()=>E(this._createDeadline(16)))}_cancelCallback(E){clearTimeout(E)}_createDeadline(E){const A=Date.now()+E;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},147:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,_=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=_}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},782:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(133),f=h(855),g=h(147);class _ extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new _;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=_},855:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},133:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let _=d;_<f;++_){let E=h[_];E>65535?(E-=65536,g+=String.fromCharCode(55296+(E>>10))+String.fromCharCode(E%1024+56320)):g+=String.fromCharCode(E)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,_=0;if(this._interim){const E=h.charCodeAt(_++);56320<=E&&E<=57343?d[g++]=1024*(this._interim-55296)+E-56320+65536:(d[g++]=this._interim,d[g++]=E),this._interim=0}for(let E=_;E<f;++E){const A=h.charCodeAt(E);if(55296<=A&&A<=56319){if(++E>=f)return this._interim=A,g;const w=h.charCodeAt(E);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,_,E,A,w=0,m=0,b=0;if(this.interim[0]){let D=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let M,L=0;for(;(M=63&this.interim[++L])&&L<4;)R<<=6,R|=M;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=k-L;for(;b<I;){if(b>=f)return 0;if(M=h[b++],(192&M)!=128){b--,D=!0;break}this.interim[L++]=M,R<<=6,R|=63&M}D||(k===2?R<128?b--:d[w++]=R:k===3?R<2048||R>=55296&&R<=57343||R===65279||(d[w++]=R):R<65536||R>1114111||(d[w++]=R)),this.interim.fill(0)}const y=f-4;let x=b;for(;x<f;){for(;!(!(x<y)||128&(g=h[x])||128&(_=h[x+1])||128&(E=h[x+2])||128&(A=h[x+3]));)d[w++]=g,d[w++]=_,d[w++]=E,d[w++]=A,x+=4;if(g=h[x++],g<128)d[w++]=g;else if((224&g)==192){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(m=(31&g)<<6|63&_,m<128){x--;continue}d[w++]=m}else if((240&g)==224){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(m=(15&g)<<12|(63&_)<<6|63&E,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,this.interim[2]=E,w;if(A=h[x++],(192&A)!=128){x--;continue}if(m=(7&g)<<18|(63&_)<<12|(63&E)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},776:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(859),_=h(97),E={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=E[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,y){this._evalLazyOptionalParams(y),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...y)}trace(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}debug(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}info(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.INFO&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.info,m,b)}warn(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.WARN&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.warn,m,b)}error(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.error,m,b)}};l.LogService=w=d([f(0,_.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,y){if(typeof y.value!="function")throw new Error("not supported");const x=y.value;y.value=function(...D){if(A.logLevel!==_.LogLevelEnum.TRACE)return x.apply(this,D);A.trace(`GlyphRenderer#${x.name}(${D.map(M=>JSON.stringify(M)).join(", ")})`);const R=x.apply(this,D);return A.trace(`GlyphRenderer#${x.name} return`,R),R}}},726:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(_,E,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,_,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},97:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(726);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasAddon=void 0;const l=o(345),h=o(859),d=o(776),f=o(949);class g extends h.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var E;return(E=this._renderer)===null||E===void 0?void 0:E.textureAtlas}activate(E){const A=E._core;if(!E.element)return void this.register(A.onWillOpen(()=>this.activate(E)));this._terminal=E;const w=A.coreService,m=A.optionsService,b=A.screenElement,y=A.linkifier2,x=A,D=x._bufferService,R=x._renderService,M=x._characterJoinerService,L=x._charSizeService,k=x._coreBrowserService,I=x._decorationService,V=x._logService,N=x._themeService;(0,d.setTraceLogger)(V),this._renderer=new f.CanvasRenderer(E,b,y,D,L,m,M,w,k,I,N),this.register((0,l.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,l.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),R.setRenderer(this._renderer),R.handleResize(D.cols,D.rows),this.register((0,h.toDisposable)(()=>{var B;R.setRenderer(this._terminal._core._createRenderer()),R.handleResize(E.cols,E.rows),(B=this._renderer)===null||B===void 0||B.dispose(),this._renderer=void 0}))}}c.CanvasAddon=g})(),a})())})(xtermAddonCanvas);var xtermAddonCanvasExports=xtermAddonCanvas.exports,xtermAddonFit={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const a=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(a._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,a=o._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const c=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(l.getPropertyValue("height")),d=Math.max(0,parseInt(l.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),g=h-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),_=d-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-c;return{cols:Math.max(2,Math.floor(_/a.css.cell.width)),rows:Math.max(1,Math.floor(g/a.css.cell.height))}}}})(),r})())})(xtermAddonFit);var xtermAddonFitExports=xtermAddonFit.exports,xtermAddonSearch={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.SearchAddon=void 0;const l=o(345),h=o(859),d=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class f extends h.Disposable{constructor(_){var E;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new h.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new l.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(E=_?.highlightLimit)!==null&&E!==void 0?E:1e3}activate(_){this._terminal=_,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,h.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var _;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((_=this._lastSearchOptions)===null||_===void 0)&&_.decorations)&&(this._highlightTimeout=setTimeout(()=>{const E=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(E,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(_){this._selectedDecoration.clear(),(0,h.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),_||(this._cachedSearchTerm=void 0)}findNext(_,E){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=E,E?.decorations&&(this._cachedSearchTerm!==void 0&&_===this._cachedSearchTerm||this._highlightAllMatches(_,E));const A=this._findNextAndSelect(_,E);return this._fireResults(E),this._cachedSearchTerm=_,A}_highlightAllMatches(_,E){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!_||_.length===0)return void this.clearDecorations();E=E||{},this.clearDecorations(!0);const A=[];let w,m=this._find(_,0,0,E);for(;m&&(w?.row!==m.row||w?.col!==m.col)&&!(A.length>=this._highlightLimit);)w=m,A.push(w),m=this._find(_,w.col+w.term.length>=this._terminal.cols?w.row+1:w.row,w.col+w.term.length>=this._terminal.cols?0:w.col+1,E);for(const b of A){const y=this._createResultDecoration(b,E.decorations);y&&(this._highlightedLines.add(y.marker.line),this._highlightDecorations.push({decoration:y,match:b,dispose(){y.dispose()}}))}}_find(_,E,A,w){var m;if(!this._terminal||!_||_.length===0)return(m=this._terminal)===null||m===void 0||m.clearSelection(),void this.clearDecorations();if(A>this._terminal.cols)throw new Error(`Invalid col: ${A} to search in terminal of ${this._terminal.cols} cols`);let b;this._initLinesCache();const y={startRow:E,startCol:A};if(b=this._findInLine(_,y,w),!b)for(let x=E+1;x<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=x,y.startCol=0,b=this._findInLine(_,y,w),!b);x++);return b}_findNextAndSelect(_,E){var A;if(!this._terminal||!_||_.length===0)return(A=this._terminal)===null||A===void 0||A.clearSelection(),this.clearDecorations(),!1;const w=this._terminal.getSelectionPosition();this._terminal.clearSelection();let m=0,b=0;w&&(this._cachedSearchTerm===_?(m=w.end.x,b=w.end.y):(m=w.start.x,b=w.start.y)),this._initLinesCache();const y={startRow:b,startCol:m};let x=this._findInLine(_,y,E);if(!x)for(let D=b+1;D<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=D,y.startCol=0,x=this._findInLine(_,y,E),!x);D++);if(!x&&b!==0)for(let D=0;D<b&&(y.startRow=D,y.startCol=0,x=this._findInLine(_,y,E),!x);D++);return!x&&w&&(y.startRow=w.start.y,y.startCol=0,x=this._findInLine(_,y,E)),this._selectResult(x,E?.decorations,E?.noScroll)}findPrevious(_,E){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=E,E?.decorations&&(this._cachedSearchTerm!==void 0&&_===this._cachedSearchTerm||this._highlightAllMatches(_,E));const A=this._findPreviousAndSelect(_,E);return this._fireResults(E),this._cachedSearchTerm=_,A}_fireResults(_){if(_?.decorations){let E=-1;if(this._selectedDecoration.value){const A=this._selectedDecoration.value.match;for(let w=0;w<this._highlightDecorations.length;w++){const m=this._highlightDecorations[w].match;if(m.row===A.row&&m.col===A.col&&m.size===A.size){E=w;break}}}this._onDidChangeResults.fire({resultIndex:E,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(_,E){var A;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!_||_.length===0)return(A=this._terminal)===null||A===void 0||A.clearSelection(),this.clearDecorations(),!1;const w=this._terminal.getSelectionPosition();this._terminal.clearSelection();let m=this._terminal.buffer.active.baseY+this._terminal.rows-1,b=this._terminal.cols;const y=!0;this._initLinesCache();const x={startRow:m,startCol:b};let D;if(w&&(x.startRow=m=w.start.y,x.startCol=b=w.start.x,this._cachedSearchTerm!==_&&(D=this._findInLine(_,x,E,!1),D||(x.startRow=m=w.end.y,x.startCol=b=w.end.x))),D||(D=this._findInLine(_,x,E,y)),!D){x.startCol=Math.max(x.startCol,this._terminal.cols);for(let R=m-1;R>=0&&(x.startRow=R,D=this._findInLine(_,x,E,y),!D);R--);}if(!D&&m!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let R=this._terminal.buffer.active.baseY+this._terminal.rows-1;R>=m&&(x.startRow=R,D=this._findInLine(_,x,E,y),!D);R--);return this._selectResult(D,E?.decorations,E?.noScroll)}_initLinesCache(){const _=this._terminal;this._linesCache||(this._linesCache=new Array(_.buffer.active.length),this._cursorMoveListener=_.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=_.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(_,E,A){return(_===0||d.includes(E[_-1]))&&(_+A.length===E.length||d.includes(E[_+A.length]))}_findInLine(_,E,A={},w=!1){var m;const b=this._terminal,y=E.startRow,x=E.startCol,D=b.buffer.active.getLine(y);if(D?.isWrapped)return w?void(E.startCol+=b.cols):(E.startRow--,E.startCol+=b.cols,this._findInLine(_,E,A));let R=(m=this._linesCache)===null||m===void 0?void 0:m[y];R||(R=this._translateBufferLineToStringWithWrap(y,!0),this._linesCache&&(this._linesCache[y]=R));const[M,L]=R,k=this._bufferColsToStringOffset(y,x),I=A.caseSensitive?_:_.toLowerCase(),V=A.caseSensitive?M:M.toLowerCase();let N=-1;if(A.regex){const B=RegExp(I,"g");let H;if(w)for(;H=B.exec(V.slice(0,k));)N=B.lastIndex-H[0].length,_=H[0],B.lastIndex-=_.length-1;else H=B.exec(V.slice(k)),H&&H[0].length>0&&(N=k+(B.lastIndex-H[0].length),_=H[0])}else w?k-I.length>=0&&(N=V.lastIndexOf(I,k-I.length)):N=V.indexOf(I,k);if(N>=0){if(A.wholeWord&&!this._isWholeWord(N,V,_))return;let B=0;for(;B<L.length-1&&N>=L[B+1];)B++;let H=B;for(;H<L.length-1&&N+_.length>=L[H+1];)H++;const z=N-L[B],W=N+_.length-L[H],Q=this._stringLengthToBufferSize(y+B,z);return{term:_,col:Q,row:y+B,size:this._stringLengthToBufferSize(y+H,W)-Q+b.cols*(H-B)}}}_stringLengthToBufferSize(_,E){const A=this._terminal.buffer.active.getLine(_);if(!A)return 0;for(let w=0;w<E;w++){const m=A.getCell(w);if(!m)break;const b=m.getChars();b.length>1&&(E-=b.length-1);const y=A.getCell(w+1);y&&y.getWidth()===0&&E++}return E}_bufferColsToStringOffset(_,E){const A=this._terminal;let w=_,m=0,b=A.buffer.active.getLine(w);for(;E>0&&b;){for(let y=0;y<E&&y<A.cols;y++){const x=b.getCell(y);if(!x)break;x.getWidth()&&(m+=x.getCode()===0?1:x.getChars().length)}if(w++,b=A.buffer.active.getLine(w),b&&!b.isWrapped)break;E-=A.cols}return m}_translateBufferLineToStringWithWrap(_,E){var A;const w=this._terminal,m=[],b=[0];let y=w.buffer.active.getLine(_);for(;y;){const x=w.buffer.active.getLine(_+1),D=!!x&&x.isWrapped;let R=y.translateToString(!D&&E);if(D&&x){const M=y.getCell(y.length-1);M&&M.getCode()===0&&M.getWidth()===1&&((A=x.getCell(0))===null||A===void 0?void 0:A.getWidth())===2&&(R=R.slice(0,-1))}if(m.push(R),!D)break;b.push(b[b.length-1]+R.length),_++,y=x}return[m.join(""),b]}_selectResult(_,E,A){const w=this._terminal;if(this._selectedDecoration.clear(),!_)return w.clearSelection(),!1;if(w.select(_.col,_.row,_.size),E){const m=w.registerMarker(-w.buffer.active.baseY-w.buffer.active.cursorY+_.row);if(m){const b=w.registerDecoration({marker:m,x:_.col,width:_.size,backgroundColor:E.activeMatchBackground,layer:"top",overviewRulerOptions:{color:E.activeMatchColorOverviewRuler}});if(b){const y=[];y.push(m),y.push(b.onRender(x=>this._applyStyles(x,E.activeMatchBorder,!0))),y.push(b.onDispose(()=>(0,h.disposeArray)(y))),this._selectedDecoration.value={decoration:b,match:_,dispose(){b.dispose()}}}}}if(!A&&(_.row>=w.buffer.active.viewportY+w.rows||_.row<w.buffer.active.viewportY)){let m=_.row-w.buffer.active.viewportY;m-=Math.floor(w.rows/2),w.scrollLines(m)}return!0}_applyStyles(_,E,A){_.classList.contains("xterm-find-result-decoration")||(_.classList.add("xterm-find-result-decoration"),E&&(_.style.outline=`1px solid ${E}`)),A&&_.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(_,E){const A=this._terminal,w=A.registerMarker(-A.buffer.active.baseY-A.buffer.active.cursorY+_.row);if(!w)return;const m=A.registerDecoration({marker:w,x:_.col,width:_.size,backgroundColor:E.matchBackground,overviewRulerOptions:this._highlightedLines.has(w.line)?void 0:{color:E.matchOverviewRuler,position:"center"}});if(m){const b=[];b.push(w),b.push(m.onRender(y=>this._applyStyles(y,E.matchBorder,!1))),b.push(m.onDispose(()=>(0,h.disposeArray)(b)))}return m}}c.SearchAddon=f})(),a})())})(xtermAddonSearch);var xtermAddonSearchExports=xtermAddonSearch.exports,xtermAddonUnicode11={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(commonjsGlobal,()=>(()=>{var r={433:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV11=void 0;const h=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],d=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],f=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],g=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let _;function E(A,w){let m,b=0,y=w.length-1;if(A<w[0][0]||A>w[y][1])return!1;for(;y>=b;)if(m=b+y>>1,A>w[m][1])b=m+1;else{if(!(A<w[m][0]))return!0;y=m-1}return!1}l.UnicodeV11=class{constructor(){if(this.version="11",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160);for(let A=0;A<h.length;++A)_.fill(0,h[A][0],h[A][1]+1);for(let A=0;A<f.length;++A)_.fill(2,f[A][0],f[A][1]+1)}}wcwidth(A){return A<32?0:A<127?1:A<65536?_[A]:E(A,d)?0:E(A,g)?2:1}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.Unicode11Addon=void 0;const l=o(433);c.Unicode11Addon=class{activate(h){h.unicode.register(new l.UnicodeV11)}dispose(){}}})(),a})())})(xtermAddonUnicode11);var xtermAddonUnicode11Exports=xtermAddonUnicode11.exports,xtermAddonWebLinks={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={6:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(d,f,g,_={}){this._terminal=d,this._regex=f,this._handler=g,this._options=_}provideLinks(d,f){const g=h.computeLink(d,this._regex,this._terminal,this._handler);f(this._addCallbacks(g))}_addCallbacks(d){return d.map(f=>(f.leave=this._options.leave,f.hover=(g,_)=>{if(this._options.hover){const{range:E}=f;this._options.hover(g,_,E)}},f))}};class h{static computeLink(f,g,_,E){const A=new RegExp(g.source,(g.flags||"")+"g"),[w,m]=h._getWindowedLineStrings(f-1,_),b=w.join("");let y;const x=[];for(;y=A.exec(b);){const D=y[0];try{const V=new URL(D),N=decodeURI(V.toString());if(D!==N&&D+"/"!==N)continue}catch{continue}const[R,M]=h._mapStrIdx(_,m,0,y.index),[L,k]=h._mapStrIdx(_,R,M,D.length);if(R===-1||M===-1||L===-1||k===-1)continue;const I={start:{x:M+1,y:R+1},end:{x:k,y:L+1}};x.push({range:I,text:D,activate:E})}return x}static _getWindowedLineStrings(f,g){let _,E=f,A=f,w=0,m="";const b=[];if(_=g.buffer.active.getLine(f)){const y=_.translateToString(!0);if(_.isWrapped&&y[0]!==" "){for(w=0;(_=g.buffer.active.getLine(--E))&&w<2048&&(m=_.translateToString(!0),w+=m.length,b.push(m),_.isWrapped&&m.indexOf(" ")===-1););b.reverse()}for(b.push(y),w=0;(_=g.buffer.active.getLine(++A))&&_.isWrapped&&w<2048&&(m=_.translateToString(!0),w+=m.length,b.push(m),m.indexOf(" ")===-1););}return[b,E]}static _mapStrIdx(f,g,_,E){const A=f.buffer.active,w=A.getNullCell();let m=_;for(;E;){const b=A.getLine(g);if(!b)return[-1,-1];for(let y=m;y<b.length;++y){b.getCell(y,w);const x=w.getChars();if(w.getWidth()&&(E-=x.length||1,y===b.length-1&&x==="")){const D=A.getLine(g+1);D&&D.isWrapped&&(D.getCell(0,w),w.getWidth()===2&&(E+=1))}if(E<0)return[g,y]}g++,m=0}return[g,m]}}l.LinkComputer=h}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.WebLinksAddon=void 0;const l=o(6),h=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(f,g){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=g}else console.warn("Opening link blocked as opener could not be cleared")}c.WebLinksAddon=class{constructor(f=d,g={}){this._handler=f,this._options=g}activate(f){this._terminal=f;const g=this._options,_=g.urlRegex||h;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,_,this._handler,g))}dispose(){var f;(f=this._linkProvider)===null||f===void 0||f.dispose()}}})(),a})())})(xtermAddonWebLinks);var xtermAddonWebLinksExports=xtermAddonWebLinks.exports,xtermAddonWebgl={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={965:function(c,l,h){var d=this&&this.__decorate||function(L,k,I,V){var N,B=arguments.length,H=B<3?k:V===null?V=Object.getOwnPropertyDescriptor(k,I):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(L,k,I,V);else for(var z=L.length-1;z>=0;z--)(N=L[z])&&(H=(B<3?N(H):B>3?N(k,I,H):N(k,I))||H);return B>3&&H&&Object.defineProperty(k,I,H),H};Object.defineProperty(l,"__esModule",{value:!0}),l.GlyphRenderer=void 0;const f=h(374),g=h(509),_=h(855),E=h(859),A=h(776),w=h(381),m=11,b=m*Float32Array.BYTES_PER_ELEMENT;let y,x=0,D=0,R=0;class M extends E.Disposable{constructor(k,I,V){super(),this._terminal=k,this._gl=I,this._dimensions=V,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const N=this._gl;g.TextureAtlas.maxAtlasPages===void 0&&(g.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(N.getParameter(N.MAX_TEXTURE_IMAGE_UNITS))),g.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(N.getParameter(N.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(N,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(X){let G="";for(let q=1;q<X;q++)G+=` else if (v_texpage == ${q}) { outColor = texture(u_texture[${q}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${X}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${G}
}`}(g.TextureAtlas.maxAtlasPages))),this.register((0,E.toDisposable)(()=>N.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(N.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(N.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(N.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=N.createVertexArray(),N.bindVertexArray(this._vertexArrayObject);const B=new Float32Array([0,0,1,0,0,1,1,1]),H=N.createBuffer();this.register((0,E.toDisposable)(()=>N.deleteBuffer(H))),N.bindBuffer(N.ARRAY_BUFFER,H),N.bufferData(N.ARRAY_BUFFER,B,N.STATIC_DRAW),N.enableVertexAttribArray(0),N.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const z=new Uint8Array([0,1,2,3]),W=N.createBuffer();this.register((0,E.toDisposable)(()=>N.deleteBuffer(W))),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,W),N.bufferData(N.ELEMENT_ARRAY_BUFFER,z,N.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(N.createBuffer()),this.register((0,E.toDisposable)(()=>N.deleteBuffer(this._attributesBuffer))),N.bindBuffer(N.ARRAY_BUFFER,this._attributesBuffer),N.enableVertexAttribArray(2),N.vertexAttribPointer(2,2,N.FLOAT,!1,b,0),N.vertexAttribDivisor(2,1),N.enableVertexAttribArray(3),N.vertexAttribPointer(3,2,N.FLOAT,!1,b,2*Float32Array.BYTES_PER_ELEMENT),N.vertexAttribDivisor(3,1),N.enableVertexAttribArray(4),N.vertexAttribPointer(4,1,N.FLOAT,!1,b,4*Float32Array.BYTES_PER_ELEMENT),N.vertexAttribDivisor(4,1),N.enableVertexAttribArray(5),N.vertexAttribPointer(5,2,N.FLOAT,!1,b,5*Float32Array.BYTES_PER_ELEMENT),N.vertexAttribDivisor(5,1),N.enableVertexAttribArray(6),N.vertexAttribPointer(6,2,N.FLOAT,!1,b,7*Float32Array.BYTES_PER_ELEMENT),N.vertexAttribDivisor(6,1),N.enableVertexAttribArray(1),N.vertexAttribPointer(1,2,N.FLOAT,!1,b,9*Float32Array.BYTES_PER_ELEMENT),N.vertexAttribDivisor(1,1),N.useProgram(this._program);const Q=new Int32Array(g.TextureAtlas.maxAtlasPages);for(let X=0;X<g.TextureAtlas.maxAtlasPages;X++)Q[X]=X;N.uniform1iv(this._textureLocation,Q),N.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let X=0;X<g.TextureAtlas.maxAtlasPages;X++){const G=new w.GLTexture((0,f.throwIfFalsy)(N.createTexture()));this.register((0,E.toDisposable)(()=>N.deleteTexture(G.texture))),N.activeTexture(N.TEXTURE0+X),N.bindTexture(N.TEXTURE_2D,G.texture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texImage2D(N.TEXTURE_2D,0,N.RGBA,1,1,0,N.RGBA,N.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[X]=G}N.enable(N.BLEND),N.blendFunc(N.SRC_ALPHA,N.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(k,I,V,N,B,H,z,W){this._updateCell(this._vertices.attributes,k,I,V,N,B,H,z,W)}_updateCell(k,I,V,N,B,H,z,W,Q){x=(V*this._terminal.cols+I)*m,N!==_.NULL_CELL_CODE&&N!==void 0?this._atlas&&(y=W&&W.length>1?this._atlas.getRasterizedGlyphCombinedChar(W,B,H,z,!1):this._atlas.getRasterizedGlyph(N,B,H,z,!1),D=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),B!==Q&&y.offset.x>D?(R=y.offset.x-D,k[x]=-(y.offset.x-R)+this._dimensions.device.char.left,k[x+1]=-y.offset.y+this._dimensions.device.char.top,k[x+2]=(y.size.x-R)/this._dimensions.device.canvas.width,k[x+3]=y.size.y/this._dimensions.device.canvas.height,k[x+4]=y.texturePage,k[x+5]=y.texturePositionClipSpace.x+R/this._atlas.pages[y.texturePage].canvas.width,k[x+6]=y.texturePositionClipSpace.y,k[x+7]=y.sizeClipSpace.x-R/this._atlas.pages[y.texturePage].canvas.width,k[x+8]=y.sizeClipSpace.y):(k[x]=-y.offset.x+this._dimensions.device.char.left,k[x+1]=-y.offset.y+this._dimensions.device.char.top,k[x+2]=y.size.x/this._dimensions.device.canvas.width,k[x+3]=y.size.y/this._dimensions.device.canvas.height,k[x+4]=y.texturePage,k[x+5]=y.texturePositionClipSpace.x,k[x+6]=y.texturePositionClipSpace.y,k[x+7]=y.sizeClipSpace.x,k[x+8]=y.sizeClipSpace.y)):k.fill(0,x,x+m-1-2)}clear(){const k=this._terminal,I=k.cols*k.rows*m;this._vertices.count!==I?this._vertices.attributes=new Float32Array(I):this._vertices.attributes.fill(0);let V=0;for(;V<this._vertices.attributesBuffers.length;V++)this._vertices.count!==I?this._vertices.attributesBuffers[V]=new Float32Array(I):this._vertices.attributesBuffers[V].fill(0);this._vertices.count=I,V=0;for(let N=0;N<k.rows;N++)for(let B=0;B<k.cols;B++)this._vertices.attributes[V+9]=B/k.cols,this._vertices.attributes[V+10]=N/k.rows,V+=m}handleResize(){const k=this._gl;k.useProgram(this._program),k.viewport(0,0,k.canvas.width,k.canvas.height),k.uniform2f(this._resolutionLocation,k.canvas.width,k.canvas.height),this.clear()}render(k){if(!this._atlas)return;const I=this._gl;I.useProgram(this._program),I.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const V=this._vertices.attributesBuffers[this._activeBuffer];let N=0;for(let B=0;B<k.lineLengths.length;B++){const H=B*this._terminal.cols*m,z=this._vertices.attributes.subarray(H,H+k.lineLengths[B]*m);V.set(z,N),N+=z.length}I.bindBuffer(I.ARRAY_BUFFER,this._attributesBuffer),I.bufferData(I.ARRAY_BUFFER,V.subarray(0,N),I.STREAM_DRAW);for(let B=0;B<this._atlas.pages.length;B++)this._atlas.pages[B].version!==this._atlasTextures[B].version&&this._bindAtlasPageTexture(I,this._atlas,B);I.drawElementsInstanced(I.TRIANGLE_STRIP,4,I.UNSIGNED_BYTE,0,N/m)}setAtlas(k){this._atlas=k;for(const I of this._atlasTextures)I.version=-1}_bindAtlasPageTexture(k,I,V){k.activeTexture(k.TEXTURE0+V),k.bindTexture(k.TEXTURE_2D,this._atlasTextures[V].texture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,I.pages[V].canvas),k.generateMipmap(k.TEXTURE_2D),this._atlasTextures[V].version=I.pages[V].version}setDimensions(k){this._dimensions=k}}l.GlyphRenderer=M,d([A.traceCall],M.prototype,"updateCell",null)},742:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RectangleRenderer=void 0;const d=h(374),f=h(859),g=h(310),_=h(381),E=8*Float32Array.BYTES_PER_ELEMENT;class A{constructor(){this.attributes=new Float32Array(160),this.count=0}}let w=0,m=0,b=0,y=0,x=0,D=0,R=0;class M extends f.Disposable{constructor(k,I,V,N){super(),this._terminal=k,this._gl=I,this._dimensions=V,this._themeService=N,this._vertices=new A,this._verticesCursor=new A;const B=this._gl;this._program=(0,d.throwIfFalsy)((0,_.createProgram)(B,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,f.toDisposable)(()=>B.deleteProgram(this._program))),this._projectionLocation=(0,d.throwIfFalsy)(B.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=B.createVertexArray(),B.bindVertexArray(this._vertexArrayObject);const H=new Float32Array([0,0,1,0,0,1,1,1]),z=B.createBuffer();this.register((0,f.toDisposable)(()=>B.deleteBuffer(z))),B.bindBuffer(B.ARRAY_BUFFER,z),B.bufferData(B.ARRAY_BUFFER,H,B.STATIC_DRAW),B.enableVertexAttribArray(3),B.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const W=new Uint8Array([0,1,2,3]),Q=B.createBuffer();this.register((0,f.toDisposable)(()=>B.deleteBuffer(Q))),B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,Q),B.bufferData(B.ELEMENT_ARRAY_BUFFER,W,B.STATIC_DRAW),this._attributesBuffer=(0,d.throwIfFalsy)(B.createBuffer()),this.register((0,f.toDisposable)(()=>B.deleteBuffer(this._attributesBuffer))),B.bindBuffer(B.ARRAY_BUFFER,this._attributesBuffer),B.enableVertexAttribArray(0),B.vertexAttribPointer(0,2,B.FLOAT,!1,E,0),B.vertexAttribDivisor(0,1),B.enableVertexAttribArray(1),B.vertexAttribPointer(1,2,B.FLOAT,!1,E,2*Float32Array.BYTES_PER_ELEMENT),B.vertexAttribDivisor(1,1),B.enableVertexAttribArray(2),B.vertexAttribPointer(2,4,B.FLOAT,!1,E,4*Float32Array.BYTES_PER_ELEMENT),B.vertexAttribDivisor(2,1),this._updateCachedColors(N.colors),this.register(this._themeService.onChangeColors(X=>{this._updateCachedColors(X),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(k){const I=this._gl;I.useProgram(this._program),I.bindVertexArray(this._vertexArrayObject),I.uniformMatrix4fv(this._projectionLocation,!1,_.PROJECTION_MATRIX),I.bindBuffer(I.ARRAY_BUFFER,this._attributesBuffer),I.bufferData(I.ARRAY_BUFFER,k.attributes,I.DYNAMIC_DRAW),I.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,I.UNSIGNED_BYTE,0,k.count)}handleResize(){this._updateViewportRectangle()}setDimensions(k){this._dimensions=k}_updateCachedColors(k){this._bgFloat=this._colorToFloat32Array(k.background),this._cursorFloat=this._colorToFloat32Array(k.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(k){const I=this._terminal,V=this._vertices;let N,B,H,z,W,Q,X,G,q,Y,K,se=1;for(N=0;N<I.rows;N++){for(H=-1,z=0,W=0,Q=!1,B=0;B<I.cols;B++)X=(N*I.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,G=k.cells[X+g.RENDER_MODEL_BG_OFFSET],q=k.cells[X+g.RENDER_MODEL_FG_OFFSET],Y=!!(67108864&q),(G!==z||q!==W&&(Q||Y))&&((z!==0||Q&&W!==0)&&(K=8*se++,this._updateRectangle(V,K,W,z,H,B,N)),H=B,z=G,W=q,Q=Y);(z!==0||Q&&W!==0)&&(K=8*se++,this._updateRectangle(V,K,W,z,H,I.cols,N))}V.count=se}updateCursor(k){const I=this._verticesCursor,V=k.cursor;if(!V||V.style==="block")return void(I.count=0);let N,B=0;V.style!=="bar"&&V.style!=="outline"||(N=8*B++,this._addRectangleFloat(I.attributes,N,V.x*this._dimensions.device.cell.width,V.y*this._dimensions.device.cell.height,V.style==="bar"?V.dpr*V.cursorWidth:V.dpr,this._dimensions.device.cell.height,this._cursorFloat)),V.style!=="underline"&&V.style!=="outline"||(N=8*B++,this._addRectangleFloat(I.attributes,N,V.x*this._dimensions.device.cell.width,(V.y+1)*this._dimensions.device.cell.height-V.dpr,V.width*this._dimensions.device.cell.width,V.dpr,this._cursorFloat)),V.style==="outline"&&(N=8*B++,this._addRectangleFloat(I.attributes,N,V.x*this._dimensions.device.cell.width,V.y*this._dimensions.device.cell.height,V.width*this._dimensions.device.cell.width,V.dpr,this._cursorFloat),N=8*B++,this._addRectangleFloat(I.attributes,N,(V.x+V.width)*this._dimensions.device.cell.width-V.dpr,V.y*this._dimensions.device.cell.height,V.dpr,this._dimensions.device.cell.height,this._cursorFloat)),I.count=B}_updateRectangle(k,I,V,N,B,H,z){if(67108864&V)switch(50331648&V){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&V].rgba;break;case 50331648:w=(16777215&V)<<8;break;default:w=this._themeService.colors.foreground.rgba}else switch(50331648&N){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&N].rgba;break;case 50331648:w=(16777215&N)<<8;break;default:w=this._themeService.colors.background.rgba}k.attributes.length<I+4&&(k.attributes=(0,_.expandFloat32Array)(k.attributes,this._terminal.rows*this._terminal.cols*8)),m=B*this._dimensions.device.cell.width,b=z*this._dimensions.device.cell.height,y=(w>>24&255)/255,x=(w>>16&255)/255,D=(w>>8&255)/255,R=1,this._addRectangle(k.attributes,I,m,b,(H-B)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,y,x,D,R)}_addRectangle(k,I,V,N,B,H,z,W,Q,X){k[I]=V/this._dimensions.device.canvas.width,k[I+1]=N/this._dimensions.device.canvas.height,k[I+2]=B/this._dimensions.device.canvas.width,k[I+3]=H/this._dimensions.device.canvas.height,k[I+4]=z,k[I+5]=W,k[I+6]=Q,k[I+7]=X}_addRectangleFloat(k,I,V,N,B,H,z){k[I]=V/this._dimensions.device.canvas.width,k[I+1]=N/this._dimensions.device.canvas.height,k[I+2]=B/this._dimensions.device.canvas.width,k[I+3]=H/this._dimensions.device.canvas.height,k[I+4]=z[0],k[I+5]=z[1],k[I+6]=z[2],k[I+7]=z[3]}_colorToFloat32Array(k){return new Float32Array([(k.rgba>>24&255)/255,(k.rgba>>16&255)/255,(k.rgba>>8&255)/255,(255&k.rgba)/255])}}l.RectangleRenderer=M},310:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderModel=l.COMBINED_CHAR_BIT_MASK=l.RENDER_MODEL_EXT_OFFSET=l.RENDER_MODEL_FG_OFFSET=l.RENDER_MODEL_BG_OFFSET=l.RENDER_MODEL_INDICIES_PER_CELL=void 0;const d=h(296);l.RENDER_MODEL_INDICIES_PER_CELL=4,l.RENDER_MODEL_BG_OFFSET=1,l.RENDER_MODEL_FG_OFFSET=2,l.RENDER_MODEL_EXT_OFFSET=3,l.COMBINED_CHAR_BIT_MASK=2147483648,l.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(f,g){const _=f*g*l.RENDER_MODEL_INDICIES_PER_CELL;_!==this.cells.length&&(this.cells=new Uint32Array(_),this.lineLengths=new Uint32Array(g))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(c,l,h){var d=this&&this.__decorate||function(H,z,W,Q){var X,G=arguments.length,q=G<3?z:Q===null?Q=Object.getOwnPropertyDescriptor(z,W):Q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(H,z,W,Q);else for(var Y=H.length-1;Y>=0;Y--)(X=H[Y])&&(q=(G<3?X(q):G>3?X(z,W,q):X(z,W))||q);return G>3&&q&&Object.defineProperty(z,W,q),q};Object.defineProperty(l,"__esModule",{value:!0}),l.JoinedCellData=l.WebglRenderer=void 0;const f=h(820),g=h(274),_=h(627),E=h(457),A=h(56),w=h(374),m=h(345),b=h(859),y=h(147),x=h(782),D=h(855),R=h(776),M=h(965),L=h(742),k=h(310),I=h(733);class V extends b.Disposable{constructor(z,W,Q,X,G,q,Y,K,se){super(),this._terminal=z,this._characterJoinerService=W,this._charSizeService=Q,this._coreBrowserService=X,this._coreService=G,this._decorationService=q,this._optionsService=Y,this._themeService=K,this._cursorBlinkStateManager=new b.MutableDisposable,this._charAtlasDisposable=this.register(new b.MutableDisposable),this._model=new k.RenderModel,this._workCell=new x.CellData,this._rectangleRenderer=this.register(new b.MutableDisposable),this._glyphRenderer=this.register(new b.MutableDisposable),this._onChangeTextureAtlas=this.register(new m.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new m.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new m.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new m.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new g.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new I.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,Y,this._themeService)],this.dimensions=(0,w.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(Y.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const Se={antialias:!1,depth:!1,preserveDrawingBuffer:se};if(this._gl=this._canvas.getContext("webgl2",Se),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",be=>{console.log("webglcontextlost event received"),be.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(be)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",be=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,_.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,A.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(be,xe)=>this._setCanvasDevicePixelDimensions(be,xe))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,b.toDisposable)(()=>{var be;for(const xe of this._renderLayers)xe.dispose();(be=this._canvas.parentElement)===null||be===void 0||be.removeChild(this._canvas),(0,_.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var z;return(z=this._charAtlas)===null||z===void 0?void 0:z.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(z,W){var Q,X,G,q;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const Y of this._renderLayers)Y.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(Q=this._rectangleRenderer.value)===null||Q===void 0||Q.setDimensions(this.dimensions),(X=this._rectangleRenderer.value)===null||X===void 0||X.handleResize(),(G=this._glyphRenderer.value)===null||G===void 0||G.setDimensions(this.dimensions),(q=this._glyphRenderer.value)===null||q===void 0||q.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var z;for(const W of this._renderLayers)W.handleBlur(this._terminal);(z=this._cursorBlinkStateManager.value)===null||z===void 0||z.pause(),this._requestRedrawViewport()}handleFocus(){var z;for(const W of this._renderLayers)W.handleFocus(this._terminal);(z=this._cursorBlinkStateManager.value)===null||z===void 0||z.resume(),this._requestRedrawViewport()}handleSelectionChanged(z,W,Q){for(const X of this._renderLayers)X.handleSelectionChanged(this._terminal,z,W,Q);this._model.selection.update(this._terminal,z,W,Q),this._requestRedrawViewport()}handleCursorMove(){var z;for(const W of this._renderLayers)W.handleCursorMove(this._terminal);(z=this._cursorBlinkStateManager.value)===null||z===void 0||z.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new L.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new M.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var z;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const W=(0,_.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==W&&(this._onChangeTextureAtlas.fire(W.pages[0].canvas),this._charAtlasDisposable.value=(0,b.getDisposeArrayDisposable)([(0,m.forwardEvent)(W.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,m.forwardEvent)(W.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=W,this._charAtlas.warmUp(),(z=this._glyphRenderer.value)===null||z===void 0||z.setAtlas(this._charAtlas)}_clearModel(z){var W;this._model.clear(),z&&((W=this._glyphRenderer.value)===null||W===void 0||W.clear())}clearTextureAtlas(){var z;(z=this._charAtlas)===null||z===void 0||z.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var z;this._clearModel(!0);for(const W of this._renderLayers)W.reset(this._terminal);(z=this._cursorBlinkStateManager.value)===null||z===void 0||z.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(z){return-1}deregisterCharacterJoiner(z){return!1}renderRows(z,W){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const Q of this._renderLayers)Q.handleGridChanged(this._terminal,z,W);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(z,W),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new E.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(z,W){const Q=this._core;let X,G,q,Y,K,se,Se,be,xe,Ee,J,ne,de,ue=this._workCell;z=B(z,Q.rows-1,0),W=B(W,Q.rows-1,0);const Fe=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Ie=Math.min(this._terminal.buffer.active.cursorX,Q.cols-1);let ye=-1;const $e=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let Oe=!1;for(G=z;G<=W;G++)for(q=G+Q.buffer.ydisp,Y=Q.buffer.lines.get(q),this._model.lineLengths[G]=0,K=this._characterJoinerService.getJoinedCharacters(q),ne=0;ne<Q.cols;ne++)if(X=this._cellColorResolver.result.bg,Y.loadCell(ne,ue),ne===0&&(X=this._cellColorResolver.result.bg),se=!1,Se=ne,K.length>0&&ne===K[0][0]&&(se=!0,be=K.shift(),ue=new N(ue,Y.translateToString(!0,be[0],be[1]),be[1]-be[0]),Se=be[1]-1),xe=ue.getChars(),Ee=ue.getCode(),J=(G*Q.cols+ne)*k.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(ue,ne,q),$e&&q===Fe&&(ne===Ie&&(this._model.cursor={x:Ie,y:this._terminal.buffer.active.cursorY,width:ue.getWidth(),style:this._coreBrowserService.isFocused?Q.options.cursorStyle||"block":Q.options.cursorInactiveStyle,cursorWidth:Q.options.cursorWidth,dpr:this._devicePixelRatio},ye=Ie+ue.getWidth()-1),ne>=Ie&&ne<=ye&&(this._coreBrowserService.isFocused&&(Q.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&Q.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Ee!==D.NULL_CELL_CODE&&(this._model.lineLengths[G]=ne+1),(this._model.cells[J]!==Ee||this._model.cells[J+k.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[J+k.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[J+k.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Oe=!0,xe.length>1&&(Ee|=k.COMBINED_CHAR_BIT_MASK),this._model.cells[J]=Ee,this._model.cells[J+k.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[J+k.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[J+k.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(ne,G,Ee,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,xe,X),se))for(ue=this._workCell,ne++;ne<Se;ne++)de=(G*Q.cols+ne)*k.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(ne,G,D.NULL_CELL_CODE,0,0,0,D.NULL_CELL_CHAR,0),this._model.cells[de]=D.NULL_CELL_CODE,this._model.cells[de+k.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[de+k.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[de+k.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;Oe&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(z,W){this._canvas.width===z&&this._canvas.height===W||(this._canvas.width=z,this._canvas.height=W,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const z=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:z,end:z})}}l.WebglRenderer=V,d([R.traceCall],V.prototype,"renderRows",null);class N extends y.AttributeData{constructor(z,W,Q){super(),this.content=0,this.combinedData="",this.fg=z.fg,this.bg=z.bg,this.combinedData=W,this._width=Q}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(z){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function B(H,z,W=0){return Math.max(Math.min(H,z),W)}l.JoinedCellData=N},381:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GLTexture=l.expandFloat32Array=l.createShader=l.createProgram=l.PROJECTION_MATRIX=void 0;const d=h(374);function f(g,_,E){const A=(0,d.throwIfFalsy)(g.createShader(_));if(g.shaderSource(A,E),g.compileShader(A),g.getShaderParameter(A,g.COMPILE_STATUS))return A;console.error(g.getShaderInfoLog(A)),g.deleteShader(A)}l.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),l.createProgram=function(g,_,E){const A=(0,d.throwIfFalsy)(g.createProgram());if(g.attachShader(A,(0,d.throwIfFalsy)(f(g,g.VERTEX_SHADER,_))),g.attachShader(A,(0,d.throwIfFalsy)(f(g,g.FRAGMENT_SHADER,E))),g.linkProgram(A),g.getProgramParameter(A,g.LINK_STATUS))return A;console.error(g.getProgramInfoLog(A)),g.deleteProgram(A)},l.createShader=f,l.expandFloat32Array=function(g,_){const E=Math.min(2*g.length,_),A=new Float32Array(E);for(let w=0;w<g.length;w++)A[w]=g[w];return A},l.GLTexture=class{constructor(g){this.texture=g,this.version=-1}}},592:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;const d=h(627),f=h(237),g=h(374),_=h(859);class E extends _.Disposable{constructor(w,m,b,y,x,D,R,M){super(),this._container=m,this._alpha=x,this._coreBrowserService=D,this._optionsService=R,this._themeService=M,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${b}-layer`),this._canvas.style.zIndex=y.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(w,L),this.reset(w)})),this.register((0,_.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,g.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(w){}handleFocus(w){}handleCursorMove(w){}handleGridChanged(w,m,b){}handleSelectionChanged(w,m,b,y=!1){}_setTransparency(w,m){if(m===this._alpha)return;const b=this._canvas;this._alpha=m,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,b),this._refreshCharAtlas(w,this._themeService.colors),this.handleGridChanged(w,0,w.rows-1)}_refreshCharAtlas(w,m){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(w,this._optionsService.rawOptions,m,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(w,m){this._deviceCellWidth=m.device.cell.width,this._deviceCellHeight=m.device.cell.height,this._deviceCharWidth=m.device.char.width,this._deviceCharHeight=m.device.char.height,this._deviceCharLeft=m.device.char.left,this._deviceCharTop=m.device.char.top,this._canvas.width=m.device.canvas.width,this._canvas.height=m.device.canvas.height,this._canvas.style.width=`${m.css.canvas.width}px`,this._canvas.style.height=`${m.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(w,this._themeService.colors)}_fillBottomLineAtCells(w,m,b=1){this._ctx.fillRect(w*this._deviceCellWidth,(m+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,b*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(w,m,b,y){this._alpha?this._ctx.clearRect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,y*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,y*this._deviceCellHeight))}_fillCharTrueColor(w,m,b,y){this._ctx.font=this._getFont(w,!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipCell(b,y,m.getWidth()),this._ctx.fillText(m.getChars(),b*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(w,m,b){this._ctx.beginPath(),this._ctx.rect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(w,m,b){return`${b?"italic":""} ${m?w.options.fontWeightBold:w.options.fontWeight} ${w.options.fontSize*this._coreBrowserService.dpr}px ${w.options.fontFamily}`}}l.BaseRenderLayer=E},733:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;const d=h(197),f=h(237),g=h(592);class _ extends g.BaseRenderLayer{constructor(A,w,m,b,y,x,D){super(m,A,"link",w,!0,y,x,D),this.register(b.onShowLinkUnderline(R=>this._handleShowLinkUnderline(R))),this.register(b.onHideLinkUnderline(R=>this._handleHideLinkUnderline(R)))}resize(A,w){super.resize(A,w),this._state=void 0}reset(A){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const A=this._state.y2-this._state.y1-1;A>0&&this._clearCells(0,this._state.y1+1,this._state.cols,A),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(A){if(A.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:A.fg!==void 0&&(0,d.is256Color)(A.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[A.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,A.y1===A.y2)this._fillBottomLineAtCells(A.x1,A.y1,A.x2-A.x1);else{this._fillBottomLineAtCells(A.x1,A.y1,A.cols-A.x1);for(let w=A.y1+1;w<A.y2;w++)this._fillBottomLineAtCells(0,w,A.cols);this._fillBottomLineAtCells(0,A.y2,A.x2)}this._state=A}_handleHideLinkUnderline(A){this._clearCurrentLink()}}l.LinkRenderLayer=_},820:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(h,d,f,g){h.addEventListener(d,f,g);let _=!1;return{dispose:()=>{_||(_=!0,h.removeEventListener(d,f,g))}}}},274:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellColorResolver=void 0;let h,d=0,f=0,g=!1,_=!1,E=!1;l.CellColorResolver=class{constructor(A,w,m,b,y){this._terminal=A,this._selectionRenderModel=w,this._decorationService=m,this._coreBrowserService=b,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(A,w,m){this.result.bg=A.bg,this.result.fg=A.fg,this.result.ext=268435456&A.bg?A.extended.ext:0,f=0,d=0,_=!1,g=!1,E=!1,h=this._themeService.colors,this._decorationService.forEachDecorationAtCell(w,m,"bottom",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,_=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),E=this._selectionRenderModel.isCellSelected(this._terminal,w,m),E&&(f=(this._coreBrowserService.isFocused?h.selectionBackgroundOpaque:h.selectionInactiveBackgroundOpaque).rgba>>8&16777215,_=!0,h.selectionForeground&&(d=h.selectionForeground.rgba>>8&16777215,g=!0)),this._decorationService.forEachDecorationAtCell(w,m,"top",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,_=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),_&&(f=E?-16777216&A.bg&-134217729|f|50331648:-16777216&A.bg|f|50331648),g&&(d=-16777216&A.fg&-67108865|d|50331648),67108864&this.result.fg&&(_&&!g&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&h.background.rgba>>8|50331648,g=!0),!_&&g&&(f=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&h.foreground.rgba>>8|50331648,_=!0)),h=void 0,this.result.bg=_?f:this.result.bg,this.result.fg=g?d:this.result.fg}}},627:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireTextureAtlas=void 0;const d=h(509),f=h(197),g=[];l.acquireTextureAtlas=function(_,E,A,w,m,b,y,x){const D=(0,f.generateConfig)(w,m,b,y,E,A,x);for(let L=0;L<g.length;L++){const k=g[L],I=k.ownedBy.indexOf(_);if(I>=0){if((0,f.configEquals)(k.config,D))return k.atlas;k.ownedBy.length===1?(k.atlas.dispose(),g.splice(L,1)):k.ownedBy.splice(I,1);break}}for(let L=0;L<g.length;L++){const k=g[L];if((0,f.configEquals)(k.config,D))return k.ownedBy.push(_),k.atlas}const R=_._core,M={atlas:new d.TextureAtlas(document,D,R.unicodeService),config:D,ownedBy:[_]};return g.push(M),M.atlas},l.removeTerminalFromCache=function(_){for(let E=0;E<g.length;E++){const A=g[E].ownedBy.indexOf(_);if(A!==-1){g[E].ownedBy.length===1?(g[E].atlas.dispose(),g.splice(E,1)):g[E].ownedBy.splice(A,1);break}}}},197:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;const d=h(160);l.generateConfig=function(f,g,_,E,A,w,m){const b={foreground:w.foreground,background:w.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:w.ansi.slice(),contrastCache:w.contrastCache,halfContrastCache:w.halfContrastCache};return{customGlyphs:A.customGlyphs,devicePixelRatio:m,letterSpacing:A.letterSpacing,lineHeight:A.lineHeight,deviceCellWidth:f,deviceCellHeight:g,deviceCharWidth:_,deviceCharHeight:E,fontFamily:A.fontFamily,fontSize:A.fontSize,fontWeight:A.fontWeight,fontWeightBold:A.fontWeightBold,allowTransparency:A.allowTransparency,drawBoldTextInBrightColors:A.drawBoldTextInBrightColors,minimumContrastRatio:A.minimumContrastRatio,colors:b}},l.configEquals=function(f,g){for(let _=0;_<f.colors.ansi.length;_++)if(f.colors.ansi[_].rgba!==g.colors.ansi[_].rgba)return!1;return f.devicePixelRatio===g.devicePixelRatio&&f.customGlyphs===g.customGlyphs&&f.lineHeight===g.lineHeight&&f.letterSpacing===g.letterSpacing&&f.fontFamily===g.fontFamily&&f.fontSize===g.fontSize&&f.fontWeight===g.fontWeight&&f.fontWeightBold===g.fontWeightBold&&f.allowTransparency===g.allowTransparency&&f.deviceCharWidth===g.deviceCharWidth&&f.deviceCharHeight===g.deviceCharHeight&&f.drawBoldTextInBrightColors===g.drawBoldTextInBrightColors&&f.minimumContrastRatio===g.minimumContrastRatio&&f.colors.foreground.rgba===g.colors.foreground.rgba&&f.colors.background.rgba===g.colors.background.rgba},l.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(399);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorBlinkStateManager=void 0,l.CursorBlinkStateManager=class{constructor(h,d){this._renderCallback=h,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(h=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},h)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tryDrawCustomChar=l.powerlineDefinitions=l.boxDrawingDefinitions=l.blockElementDefinitions=void 0;const d=h(374);l.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const f={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};l.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"║":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╒":{1:(w,m)=>`M.5,1 L.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╓":{1:(w,m)=>`M${.5-w},1 L${.5-w},.5 L1,.5 M${.5+w},.5 L${.5+w},1`},"╔":{1:(w,m)=>`M1,${.5-m} L${.5-w},${.5-m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╕":{1:(w,m)=>`M0,${.5-m} L.5,${.5-m} L.5,1 M0,${.5+m} L.5,${.5+m}`},"╖":{1:(w,m)=>`M${.5+w},1 L${.5+w},.5 L0,.5 M${.5-w},.5 L${.5-w},1`},"╗":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5+w},${.5-m} L${.5+w},1`},"╘":{1:(w,m)=>`M.5,0 L.5,${.5+m} L1,${.5+m} M.5,${.5-m} L1,${.5-m}`},"╙":{1:(w,m)=>`M1,.5 L${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╚":{1:(w,m)=>`M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0 M1,${.5+m} L${.5-w},${.5+m} L${.5-w},0`},"╛":{1:(w,m)=>`M0,${.5+m} L.5,${.5+m} L.5,0 M0,${.5-m} L.5,${.5-m}`},"╜":{1:(w,m)=>`M0,.5 L${.5+w},.5 L${.5+w},0 M${.5-w},.5 L${.5-w},0`},"╝":{1:(w,m)=>`M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M0,${.5+m} L${.5+w},${.5+m} L${.5+w},0`},"╞":{1:(w,m)=>`M.5,0 L.5,1 M.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╟":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1 M${.5+w},.5 L1,.5`},"╠":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╡":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L.5,${.5-m} M0,${.5+m} L.5,${.5+m}`},"╢":{1:(w,m)=>`M0,.5 L${.5-w},.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╣":{1:(w,m)=>`M${.5+w},0 L${.5+w},1 M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0`},"╤":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m} M.5,${.5+m} L.5,1`},"╥":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},1 M${.5+w},.5 L${.5+w},1`},"╦":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╧":{1:(w,m)=>`M.5,0 L.5,${.5-m} M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╨":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╩":{1:(w,m)=>`M0,${.5+m} L1,${.5+m} M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╪":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╫":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╬":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,1,.5`},"╮":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,0,.5`},"╯":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,0,.5`},"╰":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,1,.5`}},l.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.tryDrawCustomChar=function(w,m,b,y,x,D,R,M){const L=l.blockElementDefinitions[m];if(L)return function(N,B,H,z,W,Q){for(let X=0;X<B.length;X++){const G=B[X],q=W/8,Y=Q/8;N.fillRect(H+G.x*q,z+G.y*Y,G.w*q,G.h*Y)}}(w,L,b,y,x,D),!0;const k=f[m];if(k)return function(N,B,H,z,W,Q){let X=g.get(B);X||(X=new Map,g.set(B,X));const G=N.fillStyle;if(typeof G!="string")throw new Error(`Unexpected fillStyle type "${G}"`);let q=X.get(G);if(!q){const Y=B[0].length,K=B.length,se=document.createElement("canvas");se.width=Y,se.height=K;const Se=(0,d.throwIfFalsy)(se.getContext("2d")),be=new ImageData(Y,K);let xe,Ee,J,ne;if(G.startsWith("#"))xe=parseInt(G.slice(1,3),16),Ee=parseInt(G.slice(3,5),16),J=parseInt(G.slice(5,7),16),ne=G.length>7&&parseInt(G.slice(7,9),16)||1;else{if(!G.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${G}" when drawing pattern glyph`);[xe,Ee,J,ne]=G.substring(5,G.length-1).split(",").map(de=>parseFloat(de))}for(let de=0;de<K;de++)for(let ue=0;ue<Y;ue++)be.data[4*(de*Y+ue)]=xe,be.data[4*(de*Y+ue)+1]=Ee,be.data[4*(de*Y+ue)+2]=J,be.data[4*(de*Y+ue)+3]=B[de][ue]*(255*ne);Se.putImageData(be,0,0),q=(0,d.throwIfFalsy)(N.createPattern(se,null)),X.set(G,q)}N.fillStyle=q,N.fillRect(H,z,W,Q)}(w,k,b,y,x,D),!0;const I=l.boxDrawingDefinitions[m];if(I)return function(N,B,H,z,W,Q,X){N.strokeStyle=N.fillStyle;for(const[G,q]of Object.entries(B)){let Y;N.beginPath(),N.lineWidth=X*Number.parseInt(G),Y=typeof q=="function"?q(.15,.15/Q*W):q;for(const K of Y.split(" ")){const se=K[0],Se=E[se];if(!Se){console.error(`Could not find drawing instructions for "${se}"`);continue}const be=K.substring(1).split(",");be[0]&&be[1]&&Se(N,A(be,W,Q,H,z,!0,X))}N.stroke(),N.closePath()}}(w,I,b,y,x,D,M),!0;const V=l.powerlineDefinitions[m];return!!V&&(function(N,B,H,z,W,Q,X,G){var q,Y;const K=new Path2D;K.rect(H,z,W,Q),N.clip(K),N.beginPath();const se=X/12;N.lineWidth=G*se;for(const Se of B.d.split(" ")){const be=Se[0],xe=E[be];if(!xe){console.error(`Could not find drawing instructions for "${be}"`);continue}const Ee=Se.substring(1).split(",");Ee[0]&&Ee[1]&&xe(N,A(Ee,W,Q,H,z,!1,G,((q=B.leftPadding)!==null&&q!==void 0?q:0)*(se/2),((Y=B.rightPadding)!==null&&Y!==void 0?Y:0)*(se/2)))}B.type===1?(N.strokeStyle=N.fillStyle,N.stroke()):N.fill(),N.closePath()}(w,V,b,y,x,D,R,M),!0)};const g=new Map;function _(w,m,b=0){return Math.max(Math.min(w,m),b)}const E={C:(w,m)=>w.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]),L:(w,m)=>w.lineTo(m[0],m[1]),M:(w,m)=>w.moveTo(m[0],m[1])};function A(w,m,b,y,x,D,R,M=0,L=0){const k=w.map(I=>parseFloat(I)||parseInt(I));if(k.length<2)throw new Error("Too few arguments for instruction");for(let I=0;I<k.length;I+=2)k[I]*=m-M*R-L*R,D&&k[I]!==0&&(k[I]=_(Math.round(k[I]+.5)-.5,m,0)),k[I]+=y+M*R;for(let I=1;I<k.length;I+=2)k[I]*=b,D&&k[I]!==0&&(k[I]=_(Math.round(k[I]+.5)-.5,b,0)),k[I]+=x;return k}},56:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.observeDevicePixelDimensions=void 0;const d=h(859);l.observeDevicePixelDimensions=function(f,g,_){let E=new g.ResizeObserver(A=>{const w=A.find(y=>y.target===f);if(!w)return;if(!("devicePixelContentBoxSize"in w))return E?.disconnect(),void(E=void 0);const m=w.devicePixelContentBoxSize[0].inlineSize,b=w.devicePixelContentBoxSize[0].blockSize;m>0&&b>0&&_(m,b)});try{E.observe(f,{box:["device-pixel-content-box"]})}catch{E.disconnect(),E=void 0}return(0,d.toDisposable)(()=>E?.disconnect())}},374:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class h{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,g,_,E=!1){if(this.selectionStart=g,this.selectionEnd=_,!g||!_||g[0]===_[0]&&g[1]===_[1])return void this.clear();const A=g[1]-f.buffer.active.viewportY,w=_[1]-f.buffer.active.viewportY,m=Math.max(A,0),b=Math.min(w,f.rows-1);m>=f.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=E,this.viewportStartRow=A,this.viewportEndRow=w,this.viewportCappedStartRow=m,this.viewportCappedEndRow=b,this.startCol=g[0],this.endCol=_[0])}isCellSelected(f,g,_){return!!this.hasSelection&&(_-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?g>=this.startCol&&_>=this.viewportCappedStartRow&&g<this.endCol&&_<=this.viewportCappedEndRow:g<this.startCol&&_>=this.viewportCappedStartRow&&g>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&g>=this.startCol&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&g>=this.startCol)}}l.createSelectionRenderModel=function(){return new h}},509:function(c,l,h){var d=this&&this.__decorate||function(V,N,B,H){var z,W=arguments.length,Q=W<3?N:H===null?H=Object.getOwnPropertyDescriptor(N,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(V,N,B,H);else for(var X=V.length-1;X>=0;X--)(z=V[X])&&(Q=(W<3?z(Q):W>3?z(N,B,Q):z(N,B))||Q);return W>3&&Q&&Object.defineProperty(N,B,Q),Q};Object.defineProperty(l,"__esModule",{value:!0}),l.TextureAtlas=void 0;const f=h(237),g=h(860),_=h(374),E=h(160),A=h(345),w=h(485),m=h(385),b=h(147),y=h(855),x=h(776),D={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let R;class M{get pages(){return this._pages}constructor(N,B,H){this._document=N,this._config=B,this._unicodeService=H,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new A.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new A.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=I(N,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,_.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const N of this.pages)N.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const N=new m.IdleTaskQueue;for(let B=33;B<126;B++)N.enqueue(()=>{if(!this._cacheMap.get(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){const H=this._drawToCache(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);this._cacheMap.set(B,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,H)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const N of this._pages)N.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(M.maxAtlasPages&&this._pages.length>=Math.max(4,M.maxAtlasPages)){const B=this._pages.filter(q=>2*q.canvas.width<=(M.maxTextureSize||4096)).sort((q,Y)=>Y.canvas.width!==q.canvas.width?Y.canvas.width-q.canvas.width:Y.percentageUsed-q.percentageUsed);let H=-1,z=0;for(let q=0;q<B.length;q++)if(B[q].canvas.width!==z)H=q,z=B[q].canvas.width;else if(q-H==3)break;const W=B.slice(H,H+4),Q=W.map(q=>q.glyphs[0].texturePage).sort((q,Y)=>q>Y?1:-1),X=this.pages.length-W.length,G=this._mergePages(W,X);G.version++;for(let q=Q.length-1;q>=0;q--)this._deletePage(Q[q]);this.pages.push(G),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(G.canvas)}const N=new L(this._document,this._textureSize);return this._pages.push(N),this._activePages.push(N),this._onAddTextureAtlasCanvas.fire(N.canvas),N}_mergePages(N,B){const H=2*N[0].canvas.width,z=new L(this._document,H,N);for(const[W,Q]of N.entries()){const X=W*Q.canvas.width%H,G=Math.floor(W/2)*Q.canvas.height;z.ctx.drawImage(Q.canvas,X,G);for(const Y of Q.glyphs)Y.texturePage=B,Y.sizeClipSpace.x=Y.size.x/H,Y.sizeClipSpace.y=Y.size.y/H,Y.texturePosition.x+=X,Y.texturePosition.y+=G,Y.texturePositionClipSpace.x=Y.texturePosition.x/H,Y.texturePositionClipSpace.y=Y.texturePosition.y/H;this._onRemoveTextureAtlasCanvas.fire(Q.canvas);const q=this._activePages.indexOf(Q);q!==-1&&this._activePages.splice(q,1)}return z}_deletePage(N){this._pages.splice(N,1);for(let B=N;B<this._pages.length;B++){const H=this._pages[B];for(const z of H.glyphs)z.texturePage--;H.version++}}getRasterizedGlyphCombinedChar(N,B,H,z,W){return this._getFromCacheMap(this._cacheMapCombined,N,B,H,z,W)}getRasterizedGlyph(N,B,H,z,W){return this._getFromCacheMap(this._cacheMap,N,B,H,z,W)}_getFromCacheMap(N,B,H,z,W,Q=!1){return R=N.get(B,H,z,W),R||(R=this._drawToCache(B,H,z,W,Q),N.set(B,H,z,W,R)),R}_getColorFromAnsiIndex(N){if(N>=this._config.colors.ansi.length)throw new Error("No color found for idx "+N);return this._config.colors.ansi[N]}_getBackgroundColor(N,B,H,z){if(this._config.allowTransparency)return E.NULL_COLOR;let W;switch(N){case 16777216:case 33554432:W=this._getColorFromAnsiIndex(B);break;case 50331648:const Q=b.AttributeData.toColorRGB(B);W=E.rgba.toColor(Q[0],Q[1],Q[2]);break;default:W=H?E.color.opaque(this._config.colors.foreground):this._config.colors.background}return W}_getForegroundColor(N,B,H,z,W,Q,X,G,q,Y){const K=this._getMinimumContrastColor(N,B,H,z,W,Q,!1,q,G,Y);if(K)return K;let se;switch(W){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&q&&Q<8&&(Q+=8),se=this._getColorFromAnsiIndex(Q);break;case 50331648:const Se=b.AttributeData.toColorRGB(Q);se=E.rgba.toColor(Se[0],Se[1],Se[2]);break;default:se=X?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(se=E.color.opaque(se)),G&&(se=E.color.multiplyOpacity(se,f.DIM_OPACITY)),se}_resolveBackgroundRgba(N,B,H){switch(N){case 16777216:case 33554432:return this._getColorFromAnsiIndex(B).rgba;case 50331648:return B<<8;default:return H?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(N,B,H,z){switch(N){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&z&&B<8&&(B+=8),this._getColorFromAnsiIndex(B).rgba;case 50331648:return B<<8;default:return H?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(N,B,H,z,W,Q,X,G,q,Y){if(this._config.minimumContrastRatio===1||Y)return;const K=this._getContrastCache(q),se=K.getColor(N,z);if(se!==void 0)return se||void 0;const Se=this._resolveBackgroundRgba(B,H,X),be=this._resolveForegroundRgba(W,Q,X,G),xe=E.rgba.ensureContrastRatio(Se,be,this._config.minimumContrastRatio/(q?2:1));if(!xe)return void K.setColor(N,z,null);const Ee=E.rgba.toColor(xe>>24&255,xe>>16&255,xe>>8&255);return K.setColor(N,z,Ee),Ee}_getContrastCache(N){return N?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(N,B,H,z,W=!1){const Q=typeof N=="number"?String.fromCharCode(N):N,X=Math.min(this._config.deviceCellWidth*Math.max(Q.length,2)+4,this._textureSize);this._tmpCanvas.width<X&&(this._tmpCanvas.width=X);const G=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<G&&(this._tmpCanvas.height=G),this._tmpCtx.save(),this._workAttributeData.fg=H,this._workAttributeData.bg=B,this._workAttributeData.extended.ext=z,this._workAttributeData.isInvisible())return D;const q=!!this._workAttributeData.isBold(),Y=!!this._workAttributeData.isInverse(),K=!!this._workAttributeData.isDim(),se=!!this._workAttributeData.isItalic(),Se=!!this._workAttributeData.isUnderline(),be=!!this._workAttributeData.isStrikethrough(),xe=!!this._workAttributeData.isOverline();let Ee=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),ne=this._workAttributeData.getBgColor(),de=this._workAttributeData.getBgColorMode();if(Y){const De=Ee;Ee=ne,ne=De;const Pe=J;J=de,de=Pe}const ue=this._getBackgroundColor(de,ne,Y,K);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ue.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Fe=q?this._config.fontWeightBold:this._config.fontWeight,Ie=se?"italic":"";this._tmpCtx.font=`${Ie} ${Fe} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const ye=Q.length===1&&(0,_.isPowerlineGlyph)(Q.charCodeAt(0)),$e=Q.length===1&&(0,_.isRestrictedPowerlineGlyph)(Q.charCodeAt(0)),Oe=this._getForegroundColor(B,de,ne,H,J,Ee,Y,K,q,(0,_.excludeFromContrastRatioDemands)(Q.charCodeAt(0)));this._tmpCtx.fillStyle=Oe.css;const Le=$e?0:4;let He=!1;this._config.customGlyphs!==!1&&(He=(0,g.tryDrawCustomChar)(this._tmpCtx,Q,Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let tt,Ze=!ye;if(tt=typeof N=="number"?this._unicodeService.wcwidth(N):this._unicodeService.getStringCellWidth(N),Se){this._tmpCtx.save();const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Pe=De%2==1?.5:0;if(this._tmpCtx.lineWidth=De,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ze=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ze=!1;let vt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&vt<8&&(vt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(vt).css}this._tmpCtx.beginPath();const Je=Le,Ye=Math.ceil(Le+this._config.deviceCharHeight)-Pe-(W?2*De:0),Ct=Ye+De,Rt=Ye+2*De;for(let vt=0;vt<tt;vt++){this._tmpCtx.save();const ut=Je+vt*this._config.deviceCellWidth,nt=Je+(vt+1)*this._config.deviceCellWidth,Re=ut+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye),this._tmpCtx.moveTo(ut,Rt),this._tmpCtx.lineTo(nt,Rt);break;case 3:const it=De<=1?Rt:Math.ceil(Le+this._config.deviceCharHeight-De/2)-Pe,lt=De<=1?Ye:Math.ceil(Le+this._config.deviceCharHeight+De/2)-Pe,dt=new Path2D;dt.rect(ut,Ye,this._config.deviceCellWidth,Rt-Ye),this._tmpCtx.clip(dt),this._tmpCtx.moveTo(ut-this._config.deviceCellWidth/2,Ct),this._tmpCtx.bezierCurveTo(ut-this._config.deviceCellWidth/2,lt,ut,lt,ut,Ct),this._tmpCtx.bezierCurveTo(ut,it,Re,it,Re,Ct),this._tmpCtx.bezierCurveTo(Re,lt,nt,lt,nt,Ct),this._tmpCtx.bezierCurveTo(nt,it,nt+this._config.deviceCellWidth/2,it,nt+this._config.deviceCellWidth/2,Ct);break;case 4:this._tmpCtx.setLineDash([Math.round(De),Math.round(De)]),this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye);break;default:this._tmpCtx.moveTo(ut,Ye),this._tmpCtx.lineTo(nt,Ye)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!He&&this._config.fontSize>=12&&!this._config.allowTransparency&&Q!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const vt=this._tmpCtx.measureText(Q);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in vt&&vt.actualBoundingBoxDescent>0){this._tmpCtx.save();const ut=new Path2D;ut.rect(Je,Ye-Math.ceil(De/2),this._config.deviceCellWidth*tt,Rt-Ye+Math.ceil(De/2)),this._tmpCtx.clip(ut),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ue.css,this._tmpCtx.strokeText(Q,Le,Le+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(xe){const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Pe=De%2==1?.5:0;this._tmpCtx.lineWidth=De,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Le,Le+Pe),this._tmpCtx.lineTo(Le+this._config.deviceCharWidth*tt,Le+Pe),this._tmpCtx.stroke()}if(He||this._tmpCtx.fillText(Q,Le,Le+this._config.deviceCharHeight),Q==="_"&&!this._config.allowTransparency){let De=k(this._tmpCtx.getImageData(Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight),ue,Oe,Ze);if(De)for(let Pe=1;Pe<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ue.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(Q,Le,Le+this._config.deviceCharHeight-Pe),De=k(this._tmpCtx.getImageData(Le,Le,this._config.deviceCellWidth,this._config.deviceCellHeight),ue,Oe,Ze),De);Pe++);}if(be){const De=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Pe=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=De,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Le,Le+Math.floor(this._config.deviceCharHeight/2)-Pe),this._tmpCtx.lineTo(Le+this._config.deviceCharWidth*tt,Le+Math.floor(this._config.deviceCharHeight/2)-Pe),this._tmpCtx.stroke()}this._tmpCtx.restore();const pt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let fe;if(fe=this._config.allowTransparency?function(De){for(let Pe=0;Pe<De.data.length;Pe+=4)if(De.data[Pe+3]>0)return!1;return!0}(pt):k(pt,ue,Oe,Ze),fe)return D;const Ne=this._findGlyphBoundingBox(pt,this._workBoundingBox,X,$e,He,Le);let we,ke;for(;;){if(this._activePages.length===0){const De=this._createNewPage();we=De,ke=De.currentRow,ke.height=Ne.size.y;break}we=this._activePages[this._activePages.length-1],ke=we.currentRow;for(const De of this._activePages)Ne.size.y<=De.currentRow.height&&(we=De,ke=De.currentRow);for(let De=this._activePages.length-1;De>=0;De--)for(const Pe of this._activePages[De].fixedRows)Pe.height<=ke.height&&Ne.size.y<=Pe.height&&(we=this._activePages[De],ke=Pe);if(ke.y+Ne.size.y>=we.canvas.height||ke.height>Ne.size.y+2){let De=!1;if(we.currentRow.y+we.currentRow.height+Ne.size.y>=we.canvas.height){let Pe;for(const Je of this._activePages)if(Je.currentRow.y+Je.currentRow.height+Ne.size.y<Je.canvas.height){Pe=Je;break}if(Pe)we=Pe;else if(M.maxAtlasPages&&this._pages.length>=M.maxAtlasPages&&ke.y+Ne.size.y<=we.canvas.height&&ke.height>=Ne.size.y&&ke.x+Ne.size.x<=we.canvas.width)De=!0;else{const Je=this._createNewPage();we=Je,ke=Je.currentRow,ke.height=Ne.size.y,De=!0}}De||(we.currentRow.height>0&&we.fixedRows.push(we.currentRow),ke={x:0,y:we.currentRow.y+we.currentRow.height,height:Ne.size.y},we.fixedRows.push(ke),we.currentRow={x:0,y:ke.y+ke.height,height:0})}if(ke.x+Ne.size.x<=we.canvas.width)break;ke===we.currentRow?(ke.x=0,ke.y+=ke.height,ke.height=0):we.fixedRows.splice(we.fixedRows.indexOf(ke),1)}return Ne.texturePage=this._pages.indexOf(we),Ne.texturePosition.x=ke.x,Ne.texturePosition.y=ke.y,Ne.texturePositionClipSpace.x=ke.x/we.canvas.width,Ne.texturePositionClipSpace.y=ke.y/we.canvas.height,Ne.sizeClipSpace.x/=we.canvas.width,Ne.sizeClipSpace.y/=we.canvas.height,ke.height=Math.max(ke.height,Ne.size.y),ke.x+=Ne.size.x,we.ctx.putImageData(pt,Ne.texturePosition.x-this._workBoundingBox.left,Ne.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Ne.size.x,Ne.size.y),we.addGlyph(Ne),we.version++,Ne}_findGlyphBoundingBox(N,B,H,z,W,Q){B.top=0;const X=z?this._config.deviceCellHeight:this._tmpCanvas.height,G=z?this._config.deviceCellWidth:H;let q=!1;for(let Y=0;Y<X;Y++){for(let K=0;K<G;K++){const se=Y*this._tmpCanvas.width*4+4*K+3;if(N.data[se]!==0){B.top=Y,q=!0;break}}if(q)break}B.left=0,q=!1;for(let Y=0;Y<Q+G;Y++){for(let K=0;K<X;K++){const se=K*this._tmpCanvas.width*4+4*Y+3;if(N.data[se]!==0){B.left=Y,q=!0;break}}if(q)break}B.right=G,q=!1;for(let Y=Q+G-1;Y>=Q;Y--){for(let K=0;K<X;K++){const se=K*this._tmpCanvas.width*4+4*Y+3;if(N.data[se]!==0){B.right=Y,q=!0;break}}if(q)break}B.bottom=X,q=!1;for(let Y=X-1;Y>=0;Y--){for(let K=0;K<G;K++){const se=Y*this._tmpCanvas.width*4+4*K+3;if(N.data[se]!==0){B.bottom=Y,q=!0;break}}if(q)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:B.right-B.left+1,y:B.bottom-B.top+1},sizeClipSpace:{x:B.right-B.left+1,y:B.bottom-B.top+1},offset:{x:-B.left+Q+(z||W?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-B.top+Q+(z||W?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}l.TextureAtlas=M,d([x.traceCall],M.prototype,"_drawToCache",null);class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(N){this._glyphs.push(N),this._usedPixels+=N.size.x*N.size.y}constructor(N,B,H){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],H)for(const z of H)this._glyphs.push(...z.glyphs),this._usedPixels+=z._usedPixels;this.canvas=I(N,B,B),this.ctx=(0,_.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function k(V,N,B,H){const z=N.rgba>>>24,W=N.rgba>>>16&255,Q=N.rgba>>>8&255,X=B.rgba>>>24,G=B.rgba>>>16&255,q=B.rgba>>>8&255,Y=Math.floor((Math.abs(z-X)+Math.abs(W-G)+Math.abs(Q-q))/12);let K=!0;for(let se=0;se<V.data.length;se+=4)V.data[se]===z&&V.data[se+1]===W&&V.data[se+2]===Q||H&&Math.abs(V.data[se]-z)+Math.abs(V.data[se+1]-W)+Math.abs(V.data[se+2]-Q)<Y?V.data[se+3]=0:K=!1;return K}function I(V,N,B){const H=V.createElement("canvas");return H.width=N,H.height=B,H}},160:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(399);let f=0,g=0,_=0,E=0;var A,w,m,b,y;function x(R){const M=R.toString(16);return M.length<2?"0"+M:M}function D(R,M){return R<M?(M+.05)/(R+.05):(R+.05)/(M+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(R){R.toCss=function(M,L,k,I){return I!==void 0?`#${x(M)}${x(L)}${x(k)}${x(I)}`:`#${x(M)}${x(L)}${x(k)}`},R.toRgba=function(M,L,k,I=255){return(M<<24|L<<16|k<<8|I)>>>0}}(A||(l.channels=A={})),function(R){function M(L,k){return E=Math.round(255*k),[f,g,_]=y.toChannels(L.rgba),{css:A.toCss(f,g,_,E),rgba:A.toRgba(f,g,_,E)}}R.blend=function(L,k){if(E=(255&k.rgba)/255,E===1)return{css:k.css,rgba:k.rgba};const I=k.rgba>>24&255,V=k.rgba>>16&255,N=k.rgba>>8&255,B=L.rgba>>24&255,H=L.rgba>>16&255,z=L.rgba>>8&255;return f=B+Math.round((I-B)*E),g=H+Math.round((V-H)*E),_=z+Math.round((N-z)*E),{css:A.toCss(f,g,_),rgba:A.toRgba(f,g,_)}},R.isOpaque=function(L){return(255&L.rgba)==255},R.ensureContrastRatio=function(L,k,I){const V=y.ensureContrastRatio(L.rgba,k.rgba,I);if(V)return y.toColor(V>>24&255,V>>16&255,V>>8&255)},R.opaque=function(L){const k=(255|L.rgba)>>>0;return[f,g,_]=y.toChannels(k),{css:A.toCss(f,g,_),rgba:k}},R.opacity=M,R.multiplyOpacity=function(L,k){return E=255&L.rgba,M(L,E*k/255)},R.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(R){let M,L;if(!d.isNode){const k=document.createElement("canvas");k.width=1,k.height=1;const I=k.getContext("2d",{willReadFrequently:!0});I&&(M=I,M.globalCompositeOperation="copy",L=M.createLinearGradient(0,0,1,1))}R.toColor=function(k){if(k.match(/#[\da-f]{3,8}/i))switch(k.length){case 4:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),y.toColor(f,g,_);case 5:return f=parseInt(k.slice(1,2).repeat(2),16),g=parseInt(k.slice(2,3).repeat(2),16),_=parseInt(k.slice(3,4).repeat(2),16),E=parseInt(k.slice(4,5).repeat(2),16),y.toColor(f,g,_,E);case 7:return{css:k,rgba:(parseInt(k.slice(1),16)<<8|255)>>>0};case 9:return{css:k,rgba:parseInt(k.slice(1),16)>>>0}}const I=k.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(I)return f=parseInt(I[1]),g=parseInt(I[2]),_=parseInt(I[3]),E=Math.round(255*(I[5]===void 0?1:parseFloat(I[5]))),y.toColor(f,g,_,E);if(!M||!L)throw new Error("css.toColor: Unsupported css format");if(M.fillStyle=L,M.fillStyle=k,typeof M.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(M.fillRect(0,0,1,1),[f,g,_,E]=M.getImageData(0,0,1,1).data,E!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,_,E),css:k}}}(m||(l.css=m={})),function(R){function M(L,k,I){const V=L/255,N=k/255,B=I/255;return .2126*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.7152*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))+.0722*(B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4))}R.relativeLuminance=function(L){return M(L>>16&255,L>>8&255,255&L)},R.relativeLuminance2=M}(b||(l.rgb=b={})),function(R){function M(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z>0||W>0||Q>0);)z-=Math.max(0,Math.ceil(.1*z)),W-=Math.max(0,Math.ceil(.1*W)),Q-=Math.max(0,Math.ceil(.1*Q)),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}function L(k,I,V){const N=k>>24&255,B=k>>16&255,H=k>>8&255;let z=I>>24&255,W=I>>16&255,Q=I>>8&255,X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));for(;X<V&&(z<255||W<255||Q<255);)z=Math.min(255,z+Math.ceil(.1*(255-z))),W=Math.min(255,W+Math.ceil(.1*(255-W))),Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),X=D(b.relativeLuminance2(z,W,Q),b.relativeLuminance2(N,B,H));return(z<<24|W<<16|Q<<8|255)>>>0}R.ensureContrastRatio=function(k,I,V){const N=b.relativeLuminance(k>>8),B=b.relativeLuminance(I>>8);if(D(N,B)<V){if(B<N){const W=M(k,I,V),Q=D(N,b.relativeLuminance(W>>8));if(Q<V){const X=L(k,I,V);return Q>D(N,b.relativeLuminance(X>>8))?W:X}return W}const H=L(k,I,V),z=D(N,b.relativeLuminance(H>>8));if(z<V){const W=M(k,I,V);return z>D(N,b.relativeLuminance(W>>8))?H:W}return H}},R.reduceLuminance=M,R.increaseLuminance=L,R.toChannels=function(k){return[k>>24&255,k>>16&255,k>>8&255,255&k]},R.toColor=function(k,I,V,N){return{css:A.toCss(k,I,V,N),rgba:A.toRgba(k,I,V,N)}}}(y||(l.rgba=y={})),l.toPaddedHex=x,l.contrastRatio=D},345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},485:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,_){this._data[f]||(this._data[f]={}),this._data[f][g]=_}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,_,E){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,_,E)}get(d,f,g,_){var E;return(E=this._data.get(d,f))===null||E===void 0?void 0:E.get(g,_)}clear(){this._data.clear()}}},399:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},385:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(E){this._tasks.push(E),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(E){this._idleCallback=void 0;let A=0,w=0,m=E.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=E.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(E){return setTimeout(()=>E(this._createDeadline(16)))}_cancelCallback(E){clearTimeout(E)}_createDeadline(E){const A=Date.now()+E;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},147:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,_=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=_}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},782:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(133),f=h(855),g=h(147);class _ extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new _;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=_},855:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},133:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let _=d;_<f;++_){let E=h[_];E>65535?(E-=65536,g+=String.fromCharCode(55296+(E>>10))+String.fromCharCode(E%1024+56320)):g+=String.fromCharCode(E)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,_=0;if(this._interim){const E=h.charCodeAt(_++);56320<=E&&E<=57343?d[g++]=1024*(this._interim-55296)+E-56320+65536:(d[g++]=this._interim,d[g++]=E),this._interim=0}for(let E=_;E<f;++E){const A=h.charCodeAt(E);if(55296<=A&&A<=56319){if(++E>=f)return this._interim=A,g;const w=h.charCodeAt(E);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,_,E,A,w=0,m=0,b=0;if(this.interim[0]){let D=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let M,L=0;for(;(M=63&this.interim[++L])&&L<4;)R<<=6,R|=M;const k=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=k-L;for(;b<I;){if(b>=f)return 0;if(M=h[b++],(192&M)!=128){b--,D=!0;break}this.interim[L++]=M,R<<=6,R|=63&M}D||(k===2?R<128?b--:d[w++]=R:k===3?R<2048||R>=55296&&R<=57343||R===65279||(d[w++]=R):R<65536||R>1114111||(d[w++]=R)),this.interim.fill(0)}const y=f-4;let x=b;for(;x<f;){for(;!(!(x<y)||128&(g=h[x])||128&(_=h[x+1])||128&(E=h[x+2])||128&(A=h[x+3]));)d[w++]=g,d[w++]=_,d[w++]=E,d[w++]=A,x+=4;if(g=h[x++],g<128)d[w++]=g;else if((224&g)==192){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(m=(31&g)<<6|63&_,m<128){x--;continue}d[w++]=m}else if((240&g)==224){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(m=(15&g)<<12|(63&_)<<6|63&E,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(x>=f)return this.interim[0]=g,w;if(_=h[x++],(192&_)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,w;if(E=h[x++],(192&E)!=128){x--;continue}if(x>=f)return this.interim[0]=g,this.interim[1]=_,this.interim[2]=E,w;if(A=h[x++],(192&A)!=128){x--;continue}if(m=(7&g)<<18|(63&_)<<12|(63&E)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},776:function(c,l,h){var d=this&&this.__decorate||function(m,b,y,x){var D,R=arguments.length,M=R<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,y):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,b,y,x);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(M=(R<3?D(M):R>3?D(b,y,M):D(b,y))||M);return R>3&&M&&Object.defineProperty(b,y,M),M},f=this&&this.__param||function(m,b){return function(y,x){b(y,x,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(859),_=h(97),E={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=E[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,y){this._evalLazyOptionalParams(y),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...y)}trace(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}debug(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.log,m,b)}info(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.INFO&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.info,m,b)}warn(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.WARN&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.warn,m,b)}error(m,...b){var y,x;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((x=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&x!==void 0?x:console.error,m,b)}};l.LogService=w=d([f(0,_.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,y){if(typeof y.value!="function")throw new Error("not supported");const x=y.value;y.value=function(...D){if(A.logLevel!==_.LogLevelEnum.TRACE)return x.apply(this,D);A.trace(`GlyphRenderer#${x.name}(${D.map(M=>JSON.stringify(M)).join(", ")})`);const R=x.apply(this,D);return A.trace(`GlyphRenderer#${x.name} return`,R),R}}},726:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(_,E,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,_,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},97:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(726);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.WebglAddon=void 0;const l=o(345),h=o(859),d=o(399),f=o(666),g=o(776);class _ extends h.Disposable{constructor(A){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=A,this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new l.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new l.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(A){const w=A._core;if(!A.element)return void this.register(w.onWillOpen(()=>this.activate(A)));this._terminal=A;const m=w.coreService,b=w.optionsService,y=w,x=y._renderService,D=y._characterJoinerService,R=y._charSizeService,M=y._coreBrowserService,L=y._decorationService,k=y._logService,I=y._themeService;(0,g.setTraceLogger)(k),this._renderer=this.register(new f.WebglRenderer(A,D,R,M,m,L,b,I,this._preserveDrawingBuffer)),this.register((0,l.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,l.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,l.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,l.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),x.setRenderer(this._renderer),this.register((0,h.toDisposable)(()=>{const V=this._terminal._core._renderService;V.setRenderer(this._terminal._core._createRenderer()),V.handleResize(A.cols,A.rows)}))}get textureAtlas(){var A;return(A=this._renderer)===null||A===void 0?void 0:A.textureAtlas}clearTextureAtlas(){var A;(A=this._renderer)===null||A===void 0||A.clearTextureAtlas()}}c.WebglAddon=_})(),a})())})(xtermAddonWebgl);var xtermAddonWebglExports=xtermAddonWebgl.exports,readline={},keymap$1={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.parseInput=s.InputType=void 0;var e;(function(o){o[o.Text=0]="Text",o[o.AltEnter=1]="AltEnter",o[o.ArrowUp=2]="ArrowUp",o[o.ArrowDown=3]="ArrowDown",o[o.ArrowLeft=4]="ArrowLeft",o[o.ArrowRight=5]="ArrowRight",o[o.Delete=6]="Delete",o[o.Backspace=7]="Backspace",o[o.CtrlA=8]="CtrlA",o[o.CtrlC=9]="CtrlC",o[o.CtrlD=10]="CtrlD",o[o.CtrlE=11]="CtrlE",o[o.CtrlK=12]="CtrlK",o[o.CtrlL=13]="CtrlL",o[o.CtrlQ=14]="CtrlQ",o[o.CtrlS=15]="CtrlS",o[o.CtrlU=16]="CtrlU",o[o.End=17]="End",o[o.Enter=18]="Enter",o[o.Home=19]="Home",o[o.ShiftEnter=20]="ShiftEnter",o[o.UnsupportedControlChar=21]="UnsupportedControlChar",o[o.UnsupportedEscape=22]="UnsupportedEscape"})(e=s.InputType||(s.InputType={}));function r(o){return Array.from(n(o))}s.parseInput=r;function*n(o){let a=[];const c=o[Symbol.iterator]();for(let l=c.next();!l.done;l=c.next()){const h=l.value;if(h.length>1){a.push(h);continue}const d=h.charCodeAt(0);if(a.length>0&&(d<32||d===127)&&(yield{inputType:e.Text,data:a},a=[]),d===27){const f=c.next();if(f.done){a.push("\x1B");continue}let g=e.UnsupportedEscape;if(f.value!=="["){switch(f.value){case"\r":g=e.AltEnter;break}yield{inputType:g,data:["\x1B",f.value]};continue}const _=c.next();if(_.done)continue;if(_.value>="0"&&_.value<="9"){let E=_.value;const A=c.next();if(A.done)return;if(A.value>="0"&&A.value<="9")E+=A.value;else if(A.value!=="~")continue;switch(E){case"3":g=e.Delete;break}yield{inputType:g,data:["\x1B","[",E,"~"]};continue}switch(_.value){case"A":g=e.ArrowUp;break;case"B":g=e.ArrowDown;break;case"C":g=e.ArrowRight;break;case"D":g=e.ArrowLeft;break;case"F":g=e.End;break;case"H":g=e.Home;break;case"\r":g=e.AltEnter;break}yield{inputType:g,data:["\x1B","[",_.value]};continue}if(d<32||d===127){let f=e.UnsupportedControlChar;switch(d){case 1:f=e.CtrlA;break;case 3:f=e.CtrlC;break;case 4:f=e.CtrlD;break;case 5:f=e.CtrlE;break;case 11:f=e.CtrlK;break;case 17:f=e.CtrlQ;break;case 19:f=e.CtrlS;break;case 21:f=e.CtrlU;break;case 13:f=e.Enter;break;case 127:f=e.Backspace;break;case 12:f=e.CtrlL;break}yield{inputType:f,data:[h]};continue}a.push(h)}a.length>0&&(yield{inputType:e.Text,data:a})}})(keymap$1);var state={},line={};Object.defineProperty(line,"__esModule",{value:!0});line.LineBuffer=void 0;class LineBuffer{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(e,r){this.buf=e,this.pos=r}insert(e){const r=e.length,n=this.pos===this.buf.length;return n?this.buf=this.buf+e:this.buf=this.buf.slice(0,this.pos)+e+this.buf.slice(this.pos),this.pos+=r,n}moveBack(e){const r=this.prevPos(e);return r!==void 0?(this.pos=r,!0):!1}moveForward(e){const r=this.nextPos(e);return r!==void 0?(this.pos=r,!0):!1}moveHome(){const e=this.startOfLine();return this.pos>e?(this.pos=e,!0):!1}moveEnd(){const e=this.endOfLine();return this.pos===e?!1:(this.pos=e,!0)}startOfLine(){const e=this.buf.slice(0,this.pos).lastIndexOf(`
`);return e!==-1?e+1:0}endOfLine(){const e=this.buf.slice(this.pos).indexOf(`
`);return e!==-1?this.pos+e:this.buf.length}moveLineUp(e){const r=this.buf.slice(0,this.pos).lastIndexOf(`
`);if(r===-1)return!1;const n=[...this.buf.slice(r+1,this.pos)].length;let o=this.buf.slice(0,r).lastIndexOf(`
`);o===-1?o=0:o=o+1;let a=r;for(let h=1;h<e&&o!==0;h++)a=o-1,o=this.buf.slice(0,a).lastIndexOf(`
`),o===-1?o=0:o=o+1;const c=[...this.buf.slice(o,a)].slice(0,n);let l=r;return c.length>0&&(l=c.map(h=>h.length).reduce((h,d)=>h+d,0),l=o+l),this.pos=l,!0}moveLineDown(e){const r=this.buf.slice(this.pos).indexOf(`
`);if(r===-1)return!1;let n=this.buf.slice(0,this.pos).lastIndexOf(`
`);n===-1?n=0:n+=1;const o=[...this.buf.slice(n,this.pos)].length;let a=this.pos+r+1,c=this.buf.slice(a).indexOf(`
`);c===-1?c=this.buf.length:c=a+c;for(let h=1;h<e&&c!==this.buf.length;h++)a=c+1,c=this.buf.slice(a).indexOf(`
`),c===-1?c=this.buf.length:c=a+c;const l=[...this.buf.slice(a,c)];return o<l.length?this.pos=l.slice(0,o).map(h=>h.length).reduce((h,d)=>h+d,0)+a:this.pos=c,!0}set_pos(e){this.pos=e}prevPos(e){if(this.pos===0)return;const r=this.buf.slice(0,this.pos);return this.pos-[...r].slice(-e).map(n=>n.length).reduce((n,o)=>n+o,0)}nextPos(e){if(this.pos===this.buf.length)return;const r=this.buf.slice(this.pos);return this.pos+[...r].slice(0,e).map(n=>n.length).reduce((n,o)=>n+o,0)}backspace(e){const r=this.prevPos(e);return r===void 0?!1:(this.buf=this.buf.slice(0,r)+this.buf.slice(this.pos),this.pos=r,!0)}delete(e){const r=this.nextPos(e);return r!==void 0?(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(r),!0):!1}deleteEndOfLine(){if(this.buf.length==0||this.pos==this.buf.length)return!1;const e=this.pos,r=this.endOfLine();return e==r?this.delete(1):this.buf=this.buf.slice(0,e)+this.buf.slice(r),!0}}line.LineBuffer=LineBuffer;var stringWidth$1={exports:{}},ansiRegex$1=({onlyFirst:s=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,s?void 0:"g")};const ansiRegex=ansiRegex$1;var stripAnsi$1=s=>typeof s=="string"?s.replace(ansiRegex(),""):s,isFullwidthCodePoint$2={exports:{}};const isFullwidthCodePoint$1=s=>Number.isNaN(s)?!1:s>=4352&&(s<=4447||s===9001||s===9002||11904<=s&&s<=12871&&s!==12351||12880<=s&&s<=19903||19968<=s&&s<=42182||43360<=s&&s<=43388||44032<=s&&s<=55203||63744<=s&&s<=64255||65040<=s&&s<=65049||65072<=s&&s<=65131||65281<=s&&s<=65376||65504<=s&&s<=65510||110592<=s&&s<=110593||127488<=s&&s<=127569||131072<=s&&s<=262141);isFullwidthCodePoint$2.exports=isFullwidthCodePoint$1;isFullwidthCodePoint$2.exports.default=isFullwidthCodePoint$1;var isFullwidthCodePointExports=isFullwidthCodePoint$2.exports,emojiRegex$1=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const stripAnsi=stripAnsi$1,isFullwidthCodePoint=isFullwidthCodePointExports,emojiRegex=emojiRegex$1,stringWidth=s=>{if(typeof s!="string"||s.length===0||(s=stripAnsi(s),s.length===0))return 0;s=s.replace(emojiRegex(),"  ");let e=0;for(let r=0;r<s.length;r++){const n=s.codePointAt(r);n<=31||n>=127&&n<=159||n>=768&&n<=879||(n>65535&&r++,e+=isFullwidthCodePoint(n)?2:1)}return e};stringWidth$1.exports=stringWidth;stringWidth$1.exports.default=stringWidth;var stringWidthExports=stringWidth$1.exports,__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(state,"__esModule",{value:!0});state.State=state.Layout=state.Position=void 0;const line_1=line,string_width_1$1=__importDefault$1(stringWidthExports);class Position{constructor(e,r){e!==void 0?this.row=e:this.row=0,r!==void 0?this.col=r:this.col=0}}state.Position=Position;class Layout{constructor(e){this.promptSize=e,this.cursor=new Position,this.end=new Position}}state.Layout=Layout;class State{constructor(e,r,n,o){this.line=new line_1.LineBuffer,this.highlighting=!1,this.prompt=e,this.tty=r,this.highlighter=n,this.history=o,this.promptSize=r.calculatePosition(e,new Position),this.layout=new Layout(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):this.highlighting?(this.highlighting=!1,!0):!1}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new Position,this.layout.end=new Position,this.refresh()}editInsert(e){const r=this.line.insert(e),n=e.includes(`
`);if(r&&!n){const o=(0,string_width_1$1.default)(e);o>0&&this.layout.cursor.col+o<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=o,this.layout.end.col+=o,this.tty.write(e)):this.refresh()}else this.refresh()}update(e){this.line.update(e,e.length),this.refresh()}editBackspace(e){this.line.backspace(e)&&this.refresh()}editDelete(e){this.line.delete(e)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const e=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,e,this.highlighter),this.layout=e}moveCursorBack(e){this.line.moveBack(e)&&this.moveCursor()}moveCursorForward(e){this.line.moveForward(e)&&this.moveCursor()}moveCursorUp(e){this.line.moveLineUp(e)?this.moveCursor():this.previousHistory()}moveCursorDown(e){this.line.moveLineDown(e)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(this.history.cursor===-1&&this.line.length()>0)return;const e=this.history.prev();e!==void 0&&this.update(e)}nextHistory(){if(this.history.cursor===-1)return;const e=this.history.next();e!==void 0?this.update(e):this.update("")}moveCursor(){const e=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);e!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,e),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},e)))}}state.State=State;var history$1={};Object.defineProperty(history$1,"__esModule",{value:!0});history$1.History=void 0;class History{constructor(e){this.entries=[],this.cursor=-1,this.maxEntries=e}saveToLocalStorage(){const e=window?.localStorage;e!==void 0&&e.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const e=window?.localStorage;if(e!==void 0){const r=e.getItem("history");if(r==null)return;try{const n=JSON.parse(r);!Array.isArray(n)||n.find(o=>typeof o!="string")!==void 0?(this.entries=[],e.setItem("history","[]")):this.entries=n}catch{this.entries=[],e.setItem("history","[]")}}}append(e){this.resetCursor(),this.entries.includes(e)?(this.entries.splice(this.entries.indexOf(e),1),this.entries.unshift(e)):this.entries.unshift(e),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(this.cursor!==-1)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}}history$1.History=History;var tty={},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(tty,"__esModule",{value:!0});tty.Tty=void 0;const string_width_1=__importDefault(stringWidthExports);class Tty{constructor(e,r,n,o){this.tabWidth=n,this.col=e,this.row=r,this.out=o}write(e){return this.out.write(e)}print(e){return this.out.print(e)}println(e){return this.out.println(e)}clearScreen(){this.out.write("\x1B[H\x1B[2J")}calculatePosition(e,r){const n=Object.assign({},r);let o=0;return[...e].forEach(a=>{if(a===`
`){n.row+=1,n.col=0;return}let c=0;if(a==="	")c=this.tabWidth-n.col%this.tabWidth;else{let l;[l,o]=width(a,o),c=l}n.col+=c,n.col>this.col&&(n.row+=1,n.col=c)}),n.col===this.col&&(n.col=0,n.row+=1),n}computeLayout(e,r){const n=Object.assign({},e),o=r.pos,a=this.calculatePosition(r.buf.slice(0,r.pos),e),c=o===r.buf.length?Object.assign({},a):this.calculatePosition(r.buf.slice(o),a);return{promptSize:n,cursor:a,end:c}}refreshLine(e,r,n,o,a){const c=o.cursor,l=o.end;this.clearOldRows(n),this.write(a.highlightPrompt(e)),this.write(a.highlight(r.buf,r.pos)),l.col===0&&l.row>0&&r.buf[r.buf.length-1]!==`
`&&this.write(`
`);const h=l.row-c.row;h>0&&this.write(`\x1B[${h}A`),c.col>0?this.write(`\r\x1B[${c.col}C`):this.write("\r")}clearOldRows(e){const r=e.cursor.row,n=e.end.row,o=Math.max(n-r,0);o>0&&this.write(`\x1B[${o}B`);for(let a=0;a<n;a++)this.write("\r\x1B[0K\x1B[A");this.write("\r\x1B[0K")}moveCursor(e,r){if(r.row>e.row){const n=r.row-e.row;n===1?this.write("\x1B[B"):this.write(`\x1B[${n}B`)}else if(r.row<e.row){const n=e.row-r.row;n===1?this.write("\x1B[A"):this.write(`\x1B[${n}A`)}if(r.col>e.col){const n=r.col-e.col;n===1?this.write("\x1B[C"):this.write(`\x1B[${n}C`)}else if(r.col<e.col){const n=e.col-r.col;n===1?this.write("\x1B[D"):this.write(`\x1B[${n}D`)}}}tty.Tty=Tty;function width(s,e){return e===1?s==="["?[0,2]:[0,0]:e===2?s===";"||s[0]>="0"&&s[0]<="9"?[0,e]:[0,0]:s==="\x1B"?[0,1]:s===`
`?[0,e]:[(0,string_width_1.default)(s),e]}var highlight={};Object.defineProperty(highlight,"__esModule",{value:!0});highlight.IdentityHighlighter=void 0;class IdentityHighlighter{highlight(e,r){return e}highlightPrompt(e){return e}highlightChar(e,r){return!1}}highlight.IdentityHighlighter=IdentityHighlighter;Object.defineProperty(readline,"__esModule",{value:!0});var Readline_1=readline.Readline=void 0;const keymap_1=keymap$1,state_1=state,history_1=history$1,tty_1=tty,highlight_1=highlight;class Readline{constructor(){this.highlighter=new highlight_1.IdentityHighlighter,this.history=new history_1.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new state_1.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=e=>{},this.history.restoreFromLocalStorage()}activate(e){this.term=e,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}appendHistory(e){this.history.append(e)}setHighlighter(e){this.highlighter=e}setCheckHandler(e){this.checkHandler=e}setCtrlCHandler(e){this.ctrlCHandler=e}setPauseHandler(e){this.pauseHandler=e}writeReady(){return!this.highWater}write(e){e===`
`?e=`\r
`:(e=e.replace(/^\n/,`\r
`),e=e.replace(/([^\r])\n/g,`$1\r
`));const r=e.length;this.watermark+=r,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(e,()=>{this.watermark=Math.max(this.watermark-r,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(e){return this.write(e)}println(e){return this.write(e+`\r
`)}output(){return this}tty(){var e,r;return((r=(e=this.term)===null||e===void 0?void 0:e.options)===null||r===void 0?void 0:r.tabStopWidth)!==void 0?new tty_1.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new tty_1.Tty(0,0,8,this.output())}read(e){return new Promise((r,n)=>{if(this.term===void 0){n("addon is not active");return}this.state=new state_1.State(e,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:e,resolve:r,reject:n}})}handleKeyEvent(e){return e.key==="Enter"&&e.shiftKey?(e.type==="keydown"&&this.readKey({inputType:keymap_1.InputType.ShiftEnter,data:["\r"]}),!1):!0}readData(e){const r=(0,keymap_1.parseInput)(e);if(r.length>1||r[0].inputType===keymap_1.InputType.Text&&r[0].data.length>1){this.readPaste(r);return}this.readKey(r[0])}readPaste(e){const r=e.map(n=>n.inputType===keymap_1.InputType.Enter?{inputType:keymap_1.InputType.Text,data:[`
`]}:n);for(const n of r)n.inputType===keymap_1.InputType.Text?this.state.editInsert(n.data.join("")):this.readKey(n)}readKey(e){var r,n,o;if(this.activeRead===void 0){switch(e.inputType){case keymap_1.InputType.CtrlC:this.ctrlCHandler();break;case keymap_1.InputType.CtrlL:this.write("\x1B[H\x1B[2J");break}return}switch(e.inputType){case keymap_1.InputType.Text:this.state.editInsert(e.data.join(""));break;case keymap_1.InputType.AltEnter:case keymap_1.InputType.ShiftEnter:this.state.editInsert(`
`);break;case keymap_1.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),(r=this.term)===null||r===void 0||r.write(`\r
`),this.history.append(this.state.buffer()),(n=this.activeRead)===null||n===void 0||n.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert(`
`);break;case keymap_1.InputType.CtrlC:this.state.moveCursorToEnd(),(o=this.term)===null||o===void 0||o.write(`^C\r
`),this.state=new state_1.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case keymap_1.InputType.CtrlS:this.pauseHandler(!1);break;case keymap_1.InputType.CtrlU:this.state.update("");break;case keymap_1.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case keymap_1.InputType.CtrlQ:this.pauseHandler(!0);break;case keymap_1.InputType.CtrlL:this.state.clearScreen();break;case keymap_1.InputType.Home:case keymap_1.InputType.CtrlA:this.state.moveCursorHome();break;case keymap_1.InputType.End:case keymap_1.InputType.CtrlE:this.state.moveCursorEnd();break;case keymap_1.InputType.Backspace:this.state.editBackspace(1);break;case keymap_1.InputType.Delete:case keymap_1.InputType.CtrlD:this.state.editDelete(1);break;case keymap_1.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case keymap_1.InputType.ArrowRight:this.state.moveCursorForward(1);break;case keymap_1.InputType.ArrowUp:this.state.moveCursorUp(1);break;case keymap_1.InputType.ArrowDown:this.state.moveCursorDown(1);break;case keymap_1.InputType.UnsupportedControlChar:case keymap_1.InputType.UnsupportedEscape:break}}}Readline_1=readline.Readline=Readline;const ADDON_MARKER_NAME="xterm-search-bar__addon";class SearchBarAddon{options;terminal;searchAddon;searchBarElement;searchKey;constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement){this.searchBarElement.style.visibility="visible",this.searchBarElement.querySelector("input").select();return}this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,e.className=ADDON_MARKER_NAME;const r=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(r.style.position)||(r.style.position="relative"),r.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",n=>{this.searchKey=n.target.value,this.searchAddon.findNext(this.searchKey,{incremental:n.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,r,n){const o=this.terminal.element.parentElement;o.addEventListener(r,a=>{let c=a.target;for(;c!==document.querySelector(e);){if(c===o){c=null;break}c=c.parentElement}c===document.querySelector(e)&&(n.call(this,a),a.stopPropagation())})}addNewStyle(e){let r=document.getElementById(ADDON_MARKER_NAME);r||(r=document.createElement("style"),r.type="text/css",r.id=ADDON_MARKER_NAME,document.getElementsByTagName("head")[0].appendChild(r)),r.appendChild(document.createTextNode(e))}}var ansiColors={exports:{}},symbols={exports:{}},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,function(s){var e={};const r=typeof process<"u"&&e.TERM_PROGRAM==="Hyper",n=typeof process<"u"&&process.platform==="win32",o=typeof process<"u"&&process.platform==="linux",a={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},c=Object.assign({},a,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),l=Object.assign({},a,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:o?"▸":"❯",pointerSmall:o?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});s.exports=n&&!r?c:l,Reflect.defineProperty(s.exports,"common",{enumerable:!1,value:a}),Reflect.defineProperty(s.exports,"windows",{enumerable:!1,value:c}),Reflect.defineProperty(s.exports,"other",{enumerable:!1,value:l})}(symbols)),symbols.exports}var define_process_env_default$1={};const isObject=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),ANSI_REGEX=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,hasColor=()=>typeof process<"u"?define_process_env_default$1.FORCE_COLOR!=="0":!1,create=()=>{const s={enabled:hasColor(),visible:!0,styles:{},keys:{}},e=a=>{let c=a.open=`\x1B[${a.codes[0]}m`,l=a.close=`\x1B[${a.codes[1]}m`,h=a.regex=new RegExp(`\\u001b\\[${a.codes[1]}m`,"g");return a.wrap=(d,f)=>{d.includes(l)&&(d=d.replace(h,l+c));let g=c+d+l;return f?g.replace(/\r*\n/g,`${l}$&${c}`):g},a},r=(a,c,l)=>typeof a=="function"?a(c):a.wrap(c,l),n=(a,c)=>{if(a===""||a==null)return"";if(s.enabled===!1)return a;if(s.visible===!1)return"";let l=""+a,h=l.includes(`
`),d=c.length;for(d>0&&c.includes("unstyle")&&(c=[...new Set(["unstyle",...c])].reverse());d-- >0;)l=r(s.styles[c[d]],l,h);return l},o=(a,c,l)=>{s.styles[a]=e({name:a,codes:c}),(s.keys[l]||(s.keys[l]=[])).push(a),Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,set(d){s.alias(a,d)},get(){let d=f=>n(f,d.stack);return Reflect.setPrototypeOf(d,s),d.stack=this.stack?this.stack.concat(a):[a],d}})};return o("reset",[0,0],"modifier"),o("bold",[1,22],"modifier"),o("dim",[2,22],"modifier"),o("italic",[3,23],"modifier"),o("underline",[4,24],"modifier"),o("inverse",[7,27],"modifier"),o("hidden",[8,28],"modifier"),o("strikethrough",[9,29],"modifier"),o("black",[30,39],"color"),o("red",[31,39],"color"),o("green",[32,39],"color"),o("yellow",[33,39],"color"),o("blue",[34,39],"color"),o("magenta",[35,39],"color"),o("cyan",[36,39],"color"),o("white",[37,39],"color"),o("gray",[90,39],"color"),o("grey",[90,39],"color"),o("bgBlack",[40,49],"bg"),o("bgRed",[41,49],"bg"),o("bgGreen",[42,49],"bg"),o("bgYellow",[43,49],"bg"),o("bgBlue",[44,49],"bg"),o("bgMagenta",[45,49],"bg"),o("bgCyan",[46,49],"bg"),o("bgWhite",[47,49],"bg"),o("blackBright",[90,39],"bright"),o("redBright",[91,39],"bright"),o("greenBright",[92,39],"bright"),o("yellowBright",[93,39],"bright"),o("blueBright",[94,39],"bright"),o("magentaBright",[95,39],"bright"),o("cyanBright",[96,39],"bright"),o("whiteBright",[97,39],"bright"),o("bgBlackBright",[100,49],"bgBright"),o("bgRedBright",[101,49],"bgBright"),o("bgGreenBright",[102,49],"bgBright"),o("bgYellowBright",[103,49],"bgBright"),o("bgBlueBright",[104,49],"bgBright"),o("bgMagentaBright",[105,49],"bgBright"),o("bgCyanBright",[106,49],"bgBright"),o("bgWhiteBright",[107,49],"bgBright"),s.ansiRegex=ANSI_REGEX,s.hasColor=s.hasAnsi=a=>(s.ansiRegex.lastIndex=0,typeof a=="string"&&a!==""&&s.ansiRegex.test(a)),s.alias=(a,c)=>{let l=typeof c=="string"?s[c]:c;if(typeof l!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");l.stack||(Reflect.defineProperty(l,"name",{value:a}),s.styles[a]=l,l.stack=[a]),Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,set(h){s.alias(a,h)},get(){let h=d=>n(d,h.stack);return Reflect.setPrototypeOf(h,s),h.stack=this.stack?this.stack.concat(l.stack):l.stack,h}})},s.theme=a=>{if(!isObject(a))throw new TypeError("Expected theme to be an object");for(let c of Object.keys(a))s.alias(c,a[c]);return s},s.alias("unstyle",a=>typeof a=="string"&&a!==""?(s.ansiRegex.lastIndex=0,a.replace(s.ansiRegex,"")):""),s.alias("noop",a=>a),s.none=s.clear=s.noop,s.stripColor=s.unstyle,s.symbols=requireSymbols(),s.define=o,s};ansiColors.exports=create();ansiColors.exports.create=create;var ansiColorsExports=ansiColors.exports;const ansi=getDefaultExportFromCjs(ansiColorsExports);ansi.enabled=!0;const format={...ansi,peerID:ansi.redBright,grey50:s=>`\x1B[0m\x1B[38;5;244m${s}`};var fontfaceobserver_standalone={exports:{}};(function(s){(function(){function e(w,m){document.addEventListener?w.addEventListener("scroll",m,!1):w.attachEvent("scroll",m)}function r(w){document.body?w():document.addEventListener?document.addEventListener("DOMContentLoaded",function m(){document.removeEventListener("DOMContentLoaded",m),w()}):document.attachEvent("onreadystatechange",function m(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",m),w())})}function n(w){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(w)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function o(w,m){w.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+m+";"}function a(w){var m=w.g.offsetWidth,b=m+100;return w.j.style.width=b+"px",w.i.scrollLeft=b,w.h.scrollLeft=w.h.scrollWidth+100,w.l!==m?(w.l=m,!0):!1}function c(w,m){function b(){var x=y;a(x)&&x.g.parentNode!==null&&m(x.l)}var y=w;e(w.h,b),e(w.i,b),a(w)}function l(w,m,b){m=m||{},b=b||window,this.family=w,this.style=m.style||"normal",this.weight=m.weight||"normal",this.stretch=m.stretch||"normal",this.context=b}var h=null,d=null,f=null,g=null;function _(w){return d===null&&(E(w)&&/Apple/.test(window.navigator.vendor)?(w=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!w&&603>parseInt(w[1],10)):d=!1),d}function E(w){return g===null&&(g=!!w.document.fonts),g}function A(w,m){var b=w.style,y=w.weight;if(f===null){var x=document.createElement("div");try{x.style.font="condensed 100px sans-serif"}catch{}f=x.style.font!==""}return[b,y,f?w.stretch:"","100px",m].join(" ")}l.prototype.load=function(w,m){var b=this,y=w||"BESbswy",x=0,D=m||3e3,R=new Date().getTime();return new Promise(function(M,L){if(E(b.context)&&!_(b.context)){var k=new Promise(function(V,N){function B(){new Date().getTime()-R>=D?N(Error(""+D+"ms timeout exceeded")):b.context.document.fonts.load(A(b,'"'+b.family+'"'),y).then(function(H){1<=H.length?V():setTimeout(B,25)},N)}B()}),I=new Promise(function(V,N){x=setTimeout(function(){N(Error(""+D+"ms timeout exceeded"))},D)});Promise.race([I,k]).then(function(){clearTimeout(x),M(b)},L)}else r(function(){function V(){var se;(se=W!=-1&&Q!=-1||W!=-1&&X!=-1||Q!=-1&&X!=-1)&&((se=W!=Q&&W!=X&&Q!=X)||(h===null&&(se=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),h=!!se&&(536>parseInt(se[1],10)||parseInt(se[1],10)===536&&11>=parseInt(se[2],10))),se=h&&(W==G&&Q==G&&X==G||W==q&&Q==q&&X==q||W==Y&&Q==Y&&X==Y)),se=!se),se&&(K.parentNode!==null&&K.parentNode.removeChild(K),clearTimeout(x),M(b))}function N(){if(new Date().getTime()-R>=D)K.parentNode!==null&&K.parentNode.removeChild(K),L(Error(""+D+"ms timeout exceeded"));else{var se=b.context.document.hidden;(se===!0||se===void 0)&&(W=B.g.offsetWidth,Q=H.g.offsetWidth,X=z.g.offsetWidth,V()),x=setTimeout(N,50)}}var B=new n(y),H=new n(y),z=new n(y),W=-1,Q=-1,X=-1,G=-1,q=-1,Y=-1,K=document.createElement("div");K.dir="ltr",o(B,A(b,"sans-serif")),o(H,A(b,"serif")),o(z,A(b,"monospace")),K.appendChild(B.g),K.appendChild(H.g),K.appendChild(z.g),b.context.document.body.appendChild(K),G=B.g.offsetWidth,q=H.g.offsetWidth,Y=z.g.offsetWidth,N(),c(B,function(se){W=se,V()}),o(B,A(b,'"'+b.family+'",sans-serif')),c(H,function(se){Q=se,V()}),o(H,A(b,'"'+b.family+'",serif')),c(z,function(se){X=se,V()}),o(z,A(b,'"'+b.family+'",monospace'))})})},s.exports=l})()})(fontfaceobserver_standalone);var fontfaceobserver_standaloneExports=fontfaceobserver_standalone.exports;const FontFaceObserver=getDefaultExportFromCjs(fontfaceobserver_standaloneExports);function loadWebFont(s){const e=s.options.fontFamily,r=new FontFaceObserver(e).load(null,5e3),n=new FontFaceObserver(e,{weight:"bold"}).load(null,5e3);return Promise.all([r,n]).then(()=>{},()=>{s.options.fontFamily="Courier"})}const CARRIAGE_RETURN="\r",CURSOR_UP="\x1B[1A",ERASE_IN_LINE="\x1B[2K";class Term extends xtermExports.Terminal{fitAddon;searchAddon;webglAddon;canvasAddon;searchBarAddon;webLinksAddon;ligaturesAddon;readlineAddon;mpyc;isLivePanelVisible=!0;livePanel="";livePanelLines=0;currentLivePanelMessage="";terminalContainer;scrollAreaClone;scrollArea;viewportDiv;calculateWrappedLines(e){const r=e.split(`
`);let n=0;for(const o of r){const a=o.length;n+=Math.ceil(a/this.cols)||1}return n}updateLivePanel(e){const r=this.calculateWrappedLines(e);this.write("\x1B7"),this.write(`\x1B[${this.rows-this.livePanelLines+1};1H`);for(let n=0;n<this.livePanelLines;n++)this.write("\x1B[2K"),n<this.livePanelLines-1&&this.write("\x1B[1B\x1B[1G");this.livePanelLines=r,this.currentLivePanelMessage=e,this.write(`\x1B[${this.rows-r+1};1H`),this.write(e),this.write("\x1B8")}writeAboveLivePanel(e){const r=this.currentLivePanelMessage;this.clearLivePanel(),this.write("\x1B7");const n=this.calculateWrappedLines(e);this.write(`\x1B[${this.rows-this.livePanelLines-n+1};1H`),this.write(e),this.write("\x1B8"),this.updateLivePanel(r)}clearLivePanel(){this.write(`\x1B[${this.rows-this.livePanelLines+1};1H`);for(let e=0;e<this.livePanelLines;e++)this.write("\x1B[2K"),e<this.livePanelLines-1&&this.write("\x1B[1B\x1B[1G");this.livePanelLines=0}constructor(e,r){let n=$(e);super({screenReaderMode:!1,cols:80,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,windowOptions:{},cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.mpyc=r,this.terminalContainer=$("#terminal-container"),this.scrollAreaClone=$("div.xterm-scroll-area-clone"),this.onResize(a=>{this.updateTermSizeEnv()}),this.fitAddon=new xtermAddonFitExports.FitAddon,this.searchAddon=new xtermAddonSearchExports.SearchAddon,this.searchBarAddon=new SearchBarAddon({searchAddon:this.searchAddon}),this.webLinksAddon=new xtermAddonWebLinksExports.WebLinksAddon,this.readlineAddon=new Readline_1,this.readlineAddon.setCheckHandler(a=>!a.trimEnd().endsWith("&&")),this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new xtermAddonWebglExports.WebglAddon,this.loadAddon(this.webglAddon)}catch(a){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",a),this.canvasAddon=new xtermAddonCanvasExports.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new xtermAddonUnicode11Exports.Unicode11Addon),this.unicode.activeVersion="11",loadWebFont(this).then(()=>{this.open(n),this.viewportDiv=$("#terminal-container .xterm-viewport"),this.scrollArea=this.viewportDiv.querySelector("div.xterm-scroll-area"),$(`${e} textarea`).readOnly=!0,new ResizeObserver(()=>{this.scrollAreaClone.style.height=this.scrollArea.clientHeight+"px",this.scrollAreaClone.style.width=this.scrollArea.clientWidth+"px"}).observe(this.scrollArea),this.fit(),scrollSync(this.terminalContainer,this.viewportDiv)}),this.mpyc.runtime.setReadlineFn(a=>this.readlineAddon.read(a)),this.attachCustomKeyEventHandler(a=>{if(a.type==="keydown"){if(a.ctrlKey&&a.key=="c"&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if(a.key=="h")return this.mpyc.runtime.toggleStats(),a.preventDefault(),!1;if(a.key=="r")return this.mpyc.runtime.resetStats(),a.preventDefault(),!1;if(a.ctrlKey&&a.key=="f")return this.searchBarAddon.show(),a.preventDefault(),!1}return!0}),document.addEventListener("keyup",a=>{a.key=="Escape"&&this.searchBarAddon.hidden()}),new ResizeObserver(()=>{this.fit()}).observe(document.querySelector(".split-panel-terminal"))}time(){return format.cyan.dim(`[${new Date().toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(format.italic.grey(e),format.gray("⚒"))}infoChar=isMobile?"ⓘ":"🛈";info(e){this._log(format.greenBright(e),format.greenBright(this.infoChar))}_log(e,r=" "){e=`${this.time()}  ${r}  ${e}`,this._write_liveln(e)}_write_liveln(e){this.isLivePanelVisible&&(this.writeln(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_write_live(e){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return e==""?"":`${CARRIAGE_RETURN}${CURSOR_UP}${(CURSOR_UP+ERASE_IN_LINE).repeat(this._height(e)-1)}`}live(e){this.isLivePanelVisible&&(e=`
${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,format.green(format.symbols.check))}warn(e){this._log(format.italic(e),format.yellow(format.symbols.warning))}chatMe(e){e=`${format.green("Me")}: ${e}`,this._log(e)}chat(e,r){r=`${format.peerID(safe(e.substring(0,8)))}: ${r}`,this._log(r)}error(e){this._log(format.redBright(e),format.red(format.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${format.red(format.symbols.cross)}  ${format.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}__fit=()=>{console.log("fitting terminal");const e=this.fitAddon.proposeDimensions();if(!e||!this||isNaN(e.cols)||isNaN(e.rows)||(e.rows=Math.max(e.rows,12),e.cols=Math.max(e.cols,this.cols),e.cols==this.cols&&e.rows==this.rows))return;const r=this._core;console.log("resizing terminal to ",e.cols,e.rows),r._renderService.clear(),this.resize(e.cols,e.rows),this.refresh(0,this.rows-1),this.updateTermSizeEnv()};fit=debounce(this.__fit);updateTermSizeEnv=debounce(()=>{console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})})}const scrollSync=(s,e)=>{let r=!1,n=!1;s.addEventListener("scroll",function(o){r||(n=!0,e.scrollTop=s.scrollTop),r=!1}),e.addEventListener("scroll",function(o){n||(r=!0,s.scrollTop=e.scrollTop),n=!1})};var browser$1={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};utils$1.getSymbolTotalCodewords=function(e){return CODEWORDS_COUNT[e]};utils$1.getBCHDigit=function(s){let e=0;for(;s!==0;)e++,s>>>=1;return e};utils$1.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=e};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(e){return toSJISFunction(e)};var errorCorrectionLevel={};(function(s){s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+r)}}s.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},s.from=function(n,o){if(s.isValid(n))return n;try{return e(n)}catch{return o}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(s){const e=Math.floor(s/8);return(this.buffer[e]>>>7-s%8&1)===1},put:function(s,e){for(let r=0;r<e;r++)this.putBit((s>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),s&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}BitMatrix$1.prototype.set=function(s,e,r,n){const o=s*this.size+e;this.data[o]=r,n&&(this.reservedBit[o]=!0)};BitMatrix$1.prototype.get=function(s,e){return this.data[s*this.size+e]};BitMatrix$1.prototype.xor=function(s,e,r){this.data[s*this.size+e]^=r};BitMatrix$1.prototype.isReserved=function(s,e){return this.reservedBit[s*this.size+e]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(s){const e=utils$1.getSymbolSize;s.getRowColCoords=function(n){if(n===1)return[];const o=Math.floor(n/7)+2,a=e(n),c=a===145?26:Math.ceil((a-13)/(2*o-2))*2,l=[a-7];for(let h=1;h<o-1;h++)l[h]=l[h-1]-c;return l.push(6),l.reverse()},s.getPositions=function(n){const o=[],a=s.getRowColCoords(n),c=a.length;for(let l=0;l<c;l++)for(let h=0;h<c;h++)l===0&&h===0||l===0&&h===c-1||l===c-1&&h===0||o.push([a[l],a[h]]);return o}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(e){const r=getSymbolSize(e);return[[0,0],[r-FINDER_PATTERN_SIZE,0],[0,r-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};s.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},s.from=function(o){return s.isValid(o)?parseInt(o,10):void 0},s.getPenaltyN1=function(o){const a=o.size;let c=0,l=0,h=0,d=null,f=null;for(let g=0;g<a;g++){l=h=0,d=f=null;for(let _=0;_<a;_++){let E=o.get(g,_);E===d?l++:(l>=5&&(c+=e.N1+(l-5)),d=E,l=1),E=o.get(_,g),E===f?h++:(h>=5&&(c+=e.N1+(h-5)),f=E,h=1)}l>=5&&(c+=e.N1+(l-5)),h>=5&&(c+=e.N1+(h-5))}return c},s.getPenaltyN2=function(o){const a=o.size;let c=0;for(let l=0;l<a-1;l++)for(let h=0;h<a-1;h++){const d=o.get(l,h)+o.get(l,h+1)+o.get(l+1,h)+o.get(l+1,h+1);(d===4||d===0)&&c++}return c*e.N2},s.getPenaltyN3=function(o){const a=o.size;let c=0,l=0,h=0;for(let d=0;d<a;d++){l=h=0;for(let f=0;f<a;f++)l=l<<1&2047|o.get(d,f),f>=10&&(l===1488||l===93)&&c++,h=h<<1&2047|o.get(f,d),f>=10&&(h===1488||h===93)&&c++}return c*e.N3},s.getPenaltyN4=function(o){let a=0;const c=o.data.length;for(let h=0;h<c;h++)a+=o.data[h];return Math.abs(Math.ceil(a*100/c/5)-10)*e.N4};function r(n,o,a){switch(n){case s.Patterns.PATTERN000:return(o+a)%2===0;case s.Patterns.PATTERN001:return o%2===0;case s.Patterns.PATTERN010:return a%3===0;case s.Patterns.PATTERN011:return(o+a)%3===0;case s.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case s.Patterns.PATTERN101:return o*a%2+o*a%3===0;case s.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case s.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}s.applyMask=function(o,a){const c=a.size;for(let l=0;l<c;l++)for(let h=0;h<c;h++)a.isReserved(h,l)||a.xor(h,l,r(o,h,l))},s.getBestMask=function(o,a){const c=Object.keys(s.Patterns).length;let l=0,h=1/0;for(let d=0;d<c;d++){a(d),s.applyMask(d,o);const f=s.getPenaltyN1(o)+s.getPenaltyN2(o)+s.getPenaltyN3(o)+s.getPenaltyN4(o);s.applyMask(d,o),f<h&&(h=f,l=d)}return l}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(e,r){switch(r){case ECLevel$1.L:return EC_BLOCKS_TABLE[(e-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(e-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(e-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(e-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(e,r){switch(r){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(e-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(e-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(e-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(e-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)EXP_TABLE[r]=e,LOG_TABLE[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)EXP_TABLE[r]=EXP_TABLE[r-255]})();galoisField.log=function(e){if(e<1)throw new Error("log("+e+")");return LOG_TABLE[e]};galoisField.exp=function(e){return EXP_TABLE[e]};galoisField.mul=function(e,r){return e===0||r===0?0:EXP_TABLE[LOG_TABLE[e]+LOG_TABLE[r]]};(function(s){const e=galoisField;s.mul=function(n,o){const a=new Uint8Array(n.length+o.length-1);for(let c=0;c<n.length;c++)for(let l=0;l<o.length;l++)a[c+l]^=e.mul(n[c],o[l]);return a},s.mod=function(n,o){let a=new Uint8Array(n);for(;a.length-o.length>=0;){const c=a[0];for(let h=0;h<o.length;h++)a[h]^=e.mul(o[h],c);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},s.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let a=0;a<n;a++)o=s.mul(o,new Uint8Array([1,e.exp(a)]));return o}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(e){this.degree=e,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Polynomial.mod(r,this.genPoly),o=this.degree-n.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(n,o),a}return n};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(e){return TEST_KANJI.test(e)};regex.testNumeric=function(e){return TEST_NUMERIC.test(e)};regex.testAlphanumeric=function(e){return TEST_ALPHANUMERIC.test(e)};(function(s){const e=versionCheck,r=regex;s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(a,c){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?a.ccBits[0]:c<27?a.ccBits[1]:a.ccBits[2]},s.getBestModeForData=function(a){return r.testNumeric(a)?s.NUMERIC:r.testAlphanumeric(a)?s.ALPHANUMERIC:r.testKanji(a)?s.KANJI:s.BYTE},s.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},s.isValid=function(a){return a&&a.bit&&a.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+o)}}s.from=function(a,c){if(s.isValid(a))return a;try{return n(a)}catch{return c}}})(mode);(function(s){const e=utils$1,r=errorCorrectionCode,n=errorCorrectionLevel,o=mode,a=versionCheck,c=7973,l=e.getBCHDigit(c);function h(_,E,A){for(let w=1;w<=40;w++)if(E<=s.getCapacity(w,A,_))return w}function d(_,E){return o.getCharCountIndicator(_,E)+4}function f(_,E){let A=0;return _.forEach(function(w){const m=d(w.mode,E);A+=m+w.getBitsLength()}),A}function g(_,E){for(let A=1;A<=40;A++)if(f(_,A)<=s.getCapacity(A,E,o.MIXED))return A}s.from=function(E,A){return a.isValid(E)?parseInt(E,10):A},s.getCapacity=function(E,A,w){if(!a.isValid(E))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=o.BYTE);const m=e.getSymbolTotalCodewords(E),b=r.getTotalCodewordsCount(E,A),y=(m-b)*8;if(w===o.MIXED)return y;const x=y-d(w,E);switch(w){case o.NUMERIC:return Math.floor(x/10*3);case o.ALPHANUMERIC:return Math.floor(x/11*2);case o.KANJI:return Math.floor(x/13);case o.BYTE:default:return Math.floor(x/8)}},s.getBestVersionForData=function(E,A){let w;const m=n.from(A,n.M);if(Array.isArray(E)){if(E.length>1)return g(E,m);if(E.length===0)return 1;w=E[0]}else w=E;return h(w.mode,w.getLength(),m)},s.getEncodedBits=function(E){if(!a.isValid(E)||E<7)throw new Error("Invalid QR Code version");let A=E<<12;for(;e.getBCHDigit(A)-l>=0;)A^=c<<e.getBCHDigit(A)-l;return E<<12|A}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(e,r){const n=e.bit<<3|r;let o=n<<10;for(;Utils$3.getBCHDigit(o)-G15_BCH>=0;)o^=G15<<Utils$3.getBCHDigit(o)-G15_BCH;return(n<<10|o)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(s){this.mode=Mode$4.NUMERIC,this.data=s.toString()}NumericData.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(e){let r,n,o;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),o=parseInt(n,10),e.put(o,10);const a=this.data.length-r;a>0&&(n=this.data.substr(r),o=parseInt(n,10),e.put(o,a*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(s){this.mode=Mode$3.ALPHANUMERIC,this.data=s}AlphanumericData.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=ALPHA_NUM_CHARS.indexOf(this.data[r])*45;n+=ALPHA_NUM_CHARS.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(ALPHA_NUM_CHARS.indexOf(this.data[r]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(e){for(var r=[],n=e.length,o=0;o<n;o++){var a=e.charCodeAt(o);if(a>=55296&&a<=56319&&n>o+1){var c=e.charCodeAt(o+1);c>=56320&&c<=57343&&(a=(a-55296)*1024+c-56320+65536,o+=1)}if(a<128){r.push(a);continue}if(a<2048){r.push(a>>6|192),r.push(a&63|128);continue}if(a<55296||a>=57344&&a<65536){r.push(a>>12|224),r.push(a>>6&63|128),r.push(a&63|128);continue}if(a>=65536&&a<=1114111){r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(s){this.mode=Mode$2.BYTE,typeof s=="string"&&(s=encodeUtf8(s)),this.data=new Uint8Array(s)}ByteData.getBitsLength=function(e){return e*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(s){for(let e=0,r=this.data.length;e<r;e++)s.put(this.data[e],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(s){this.mode=Mode$1.KANJI,this.data=s}KanjiData.getBitsLength=function(e){return e*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(s){let e;for(e=0;e<this.data.length;e++){let r=Utils$2.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),s.put(r,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(s){var e={single_source_shortest_paths:function(r,n,o){var a={},c={};c[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var h,d,f,g,_,E,A,w,m;!l.empty();){h=l.pop(),d=h.value,g=h.cost,_=r[d]||{};for(f in _)_.hasOwnProperty(f)&&(E=_[f],A=g+E,w=c[f],m=typeof c[f]>"u",(m||w>A)&&(c[f]=A,l.push(f,A),a[f]=d))}if(typeof o<"u"&&typeof c[o]>"u"){var b=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(b)}return a},extract_shortest_path_from_predecessor_list:function(r,n){for(var o=[],a=n;a;)o.push(a),r[a],a=r[a];return o.reverse(),o},find_path:function(r,n,o){var a=e.single_source_shortest_paths(r,n,o);return e.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,o={},a;r=r||{};for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o.queue=[],o.sorter=r.sorter||n.default_sorter,o},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var o={value:r,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};s.exports=e})(dijkstra);var dijkstraExports=dijkstra.exports;(function(s){const e=mode,r=numericData,n=alphanumericData,o=byteData,a=kanjiData,c=regex,l=utils$1,h=dijkstraExports;function d(b){return unescape(encodeURIComponent(b)).length}function f(b,y,x){const D=[];let R;for(;(R=b.exec(x))!==null;)D.push({data:R[0],index:R.index,mode:y,length:R[0].length});return D}function g(b){const y=f(c.NUMERIC,e.NUMERIC,b),x=f(c.ALPHANUMERIC,e.ALPHANUMERIC,b);let D,R;return l.isKanjiModeEnabled()?(D=f(c.BYTE,e.BYTE,b),R=f(c.KANJI,e.KANJI,b)):(D=f(c.BYTE_KANJI,e.BYTE,b),R=[]),y.concat(x,D,R).sort(function(L,k){return L.index-k.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function _(b,y){switch(y){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return a.getBitsLength(b);case e.BYTE:return o.getBitsLength(b)}}function E(b){return b.reduce(function(y,x){const D=y.length-1>=0?y[y.length-1]:null;return D&&D.mode===x.mode?(y[y.length-1].data+=x.data,y):(y.push(x),y)},[])}function A(b){const y=[];for(let x=0;x<b.length;x++){const D=b[x];switch(D.mode){case e.NUMERIC:y.push([D,{data:D.data,mode:e.ALPHANUMERIC,length:D.length},{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.ALPHANUMERIC:y.push([D,{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.KANJI:y.push([D,{data:D.data,mode:e.BYTE,length:d(D.data)}]);break;case e.BYTE:y.push([{data:D.data,mode:e.BYTE,length:d(D.data)}])}}return y}function w(b,y){const x={},D={start:{}};let R=["start"];for(let M=0;M<b.length;M++){const L=b[M],k=[];for(let I=0;I<L.length;I++){const V=L[I],N=""+M+I;k.push(N),x[N]={node:V,lastCount:0},D[N]={};for(let B=0;B<R.length;B++){const H=R[B];x[H]&&x[H].node.mode===V.mode?(D[H][N]=_(x[H].lastCount+V.length,V.mode)-_(x[H].lastCount,V.mode),x[H].lastCount+=V.length):(x[H]&&(x[H].lastCount=V.length),D[H][N]=_(V.length,V.mode)+4+e.getCharCountIndicator(V.mode,y))}}R=k}for(let M=0;M<R.length;M++)D[R[M]].end=0;return{map:D,table:x}}function m(b,y){let x;const D=e.getBestModeForData(b);if(x=e.from(y,D),x!==e.BYTE&&x.bit<D.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(x)+`.
 Suggested mode is: `+e.toString(D));switch(x===e.KANJI&&!l.isKanjiModeEnabled()&&(x=e.BYTE),x){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new a(b);case e.BYTE:return new o(b)}}s.fromArray=function(y){return y.reduce(function(x,D){return typeof D=="string"?x.push(m(D,null)):D.data&&x.push(m(D.data,D.mode)),x},[])},s.fromString=function(y,x){const D=g(y,l.isKanjiModeEnabled()),R=A(D),M=w(R,x),L=h.find_path(M.map,"start","end"),k=[];for(let I=1;I<L.length-1;I++)k.push(M.table[L[I]].node);return s.fromArray(E(k))},s.rawSplit=function(y){return s.fromArray(g(y,l.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(s,e){const r=s.size,n=FinderPattern.getPositions(e);for(let o=0;o<n.length;o++){const a=n[o][0],c=n[o][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||r<=a+l))for(let h=-1;h<=7;h++)c+h<=-1||r<=c+h||(l>=0&&l<=6&&(h===0||h===6)||h>=0&&h<=6&&(l===0||l===6)||l>=2&&l<=4&&h>=2&&h<=4?s.set(a+l,c+h,!0,!0):s.set(a+l,c+h,!1,!0))}}function setupTimingPattern(s){const e=s.size;for(let r=8;r<e-8;r++){const n=r%2===0;s.set(r,6,n,!0),s.set(6,r,n,!0)}}function setupAlignmentPattern(s,e){const r=AlignmentPattern.getPositions(e);for(let n=0;n<r.length;n++){const o=r[n][0],a=r[n][1];for(let c=-2;c<=2;c++)for(let l=-2;l<=2;l++)c===-2||c===2||l===-2||l===2||c===0&&l===0?s.set(o+c,a+l,!0,!0):s.set(o+c,a+l,!1,!0)}}function setupVersionInfo(s,e){const r=s.size,n=Version.getEncodedBits(e);let o,a,c;for(let l=0;l<18;l++)o=Math.floor(l/3),a=l%3+r-8-3,c=(n>>l&1)===1,s.set(o,a,c,!0),s.set(a,o,c,!0)}function setupFormatInfo(s,e,r){const n=s.size,o=FormatInfo.getEncodedBits(e,r);let a,c;for(a=0;a<15;a++)c=(o>>a&1)===1,a<6?s.set(a,8,c,!0):a<8?s.set(a+1,8,c,!0):s.set(n-15+a,8,c,!0),a<8?s.set(8,n-a-1,c,!0):a<9?s.set(8,15-a-1+1,c,!0):s.set(8,15-a-1,c,!0);s.set(n-8,8,1,!0)}function setupData(s,e){const r=s.size;let n=-1,o=r-1,a=7,c=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let h=0;h<2;h++)if(!s.isReserved(o,l-h)){let d=!1;c<e.length&&(d=(e[c]>>>a&1)===1),s.set(o,l-h,d),a--,a===-1&&(c++,a=7)}if(o+=n,o<0||r<=o){o-=n,n=-n;break}}}function createData(s,e,r){const n=new BitBuffer;r.forEach(function(h){n.put(h.mode.bit,4),n.put(h.getLength(),Mode.getCharCountIndicator(h.mode,s)),h.write(n)});const o=Utils$1.getSymbolTotalCodewords(s),a=ECCode.getTotalCodewordsCount(s,e),c=(o-a)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(c-n.getLengthInBits())/8;for(let h=0;h<l;h++)n.put(h%2?17:236,8);return createCodewords(n,s,e)}function createCodewords(s,e,r){const n=Utils$1.getSymbolTotalCodewords(e),o=ECCode.getTotalCodewordsCount(e,r),a=n-o,c=ECCode.getBlocksCount(e,r),l=n%c,h=c-l,d=Math.floor(n/c),f=Math.floor(a/c),g=f+1,_=d-f,E=new ReedSolomonEncoder(_);let A=0;const w=new Array(c),m=new Array(c);let b=0;const y=new Uint8Array(s.buffer);for(let L=0;L<c;L++){const k=L<h?f:g;w[L]=y.slice(A,A+k),m[L]=E.encode(w[L]),A+=k,b=Math.max(b,k)}const x=new Uint8Array(n);let D=0,R,M;for(R=0;R<b;R++)for(M=0;M<c;M++)R<w[M].length&&(x[D++]=w[M][R]);for(R=0;R<_;R++)for(M=0;M<c;M++)x[D++]=m[M][R];return x}function createSymbol(s,e,r,n){let o;if(Array.isArray(s))o=Segments.fromArray(s);else if(typeof s=="string"){let d=e;if(!d){const f=Segments.rawSplit(s);d=Version.getBestVersionForData(f,r)}o=Segments.fromString(s,d||40)}else throw new Error("Invalid data");const a=Version.getBestVersionForData(o,r);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const c=createData(e,r,o),l=Utils$1.getSymbolSize(e),h=new BitMatrix(l);return setupFinderPattern(h,e),setupTimingPattern(h),setupAlignmentPattern(h,e),setupFormatInfo(h,r,0),e>=7&&setupVersionInfo(h,e),setupData(h,c),isNaN(n)&&(n=MaskPattern.getBestMask(h,setupFormatInfo.bind(null,h,r))),MaskPattern.applyMask(n,h),setupFormatInfo(h,r,n),{modules:h,version:e,errorCorrectionLevel:r,maskPattern:n,segments:o}}qrcode.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=ECLevel.M,o,a;return typeof r<"u"&&(n=ECLevel.from(r.errorCorrectionLevel,ECLevel.M),o=Version.from(r.version),a=MaskPattern.from(r.maskPattern),r.toSJISFunc&&Utils$1.setToSJISFunction(r.toSJISFunc)),createSymbol(e,o,n,a)};var canvas={},utils={};(function(s){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}s.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:a,scale:a?4:c,margin:o,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},s.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},s.getImageWidth=function(n,o){const a=s.getScale(n,o);return Math.floor((n+o.margin*2)*a)},s.qrToImageData=function(n,o,a){const c=o.modules.size,l=o.modules.data,h=s.getScale(c,a),d=Math.floor((c+a.margin*2)*h),f=a.margin*h,g=[a.color.light,a.color.dark];for(let _=0;_<d;_++)for(let E=0;E<d;E++){let A=(_*d+E)*4,w=a.color.light;if(_>=f&&E>=f&&_<d-f&&E<d-f){const m=Math.floor((_-f)/h),b=Math.floor((E-f)/h);w=g[l[m*c+b]?1:0]}n[A++]=w.r,n[A++]=w.g,n[A++]=w.b,n[A]=w.a}}})(utils);(function(s){const e=utils;function r(o,a,c){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=c,a.width=c,a.style.height=c+"px",a.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}s.render=function(a,c,l){let h=l,d=c;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),c||(d=n()),h=e.getOptions(h);const f=e.getImageWidth(a.modules.size,h),g=d.getContext("2d"),_=g.createImageData(f,f);return e.qrToImageData(_.data,a,h),r(g,d,f),g.putImageData(_,0,0),d},s.renderToDataURL=function(a,c,l){let h=l;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),h||(h={});const d=s.render(a,c,h),f=h.type||"image/png",g=h.rendererOpts||{};return d.toDataURL(f,g.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(s,e){const r=s.a/255,n=e+'="'+s.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function svgCmd(s,e,r){let n=s+e;return typeof r<"u"&&(n+=" "+r),n}function qrToPath(s,e,r){let n="",o=0,a=!1,c=0;for(let l=0;l<s.length;l++){const h=Math.floor(l%e),d=Math.floor(l/e);!h&&!a&&(a=!0),s[l]?(c++,l>0&&h>0&&s[l-1]||(n+=a?svgCmd("M",h+r,.5+d+r):svgCmd("m",o,0),o=0,a=!1),h+1<e&&s[l+1]||(n+=svgCmd("h",c),c=0)):o++}return n}svgTag.render=function(e,r,n){const o=Utils.getOptions(r),a=e.modules.size,c=e.modules.data,l=a+o.margin*2,h=o.color.light.a?"<path "+getColorAttrib(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+getColorAttrib(o.color.dark,"stroke")+' d="'+qrToPath(c,a,o.margin)+'"/>',f='viewBox="0 0 '+l+" "+l+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+h+d+`</svg>
`;return typeof n=="function"&&n(null,_),_};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(s,e,r,n,o){const a=[].slice.call(arguments,1),c=a.length,l=typeof a[c-1]=="function";if(!l&&!canPromise())throw new Error("Callback required as last argument");if(l){if(c<2)throw new Error("Too few arguments provided");c===2?(o=r,r=e,e=n=void 0):c===3&&(e.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=r,r=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=e,e=n=void 0):c===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(h,d){try{const f=QRCode.create(r,n);h(s(f,e,n))}catch(f){d(f)}})}try{const h=QRCode.create(r,n);o(null,s(h,e,n))}catch(h){o(h)}}browser$1.create=QRCode.create;browser$1.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser$1.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser$1.toString=renderCanvas.bind(null,function(s,e,r){return SvgRenderer.render(s,r)});const QR_CANVAS_CLASS="qr-canvas",QR_URL_SPAN_CLASS="qr-url-span",QR_CANVAS_SELECTOR=`div.tooltip-inner>canvas.${QR_CANVAS_CLASS}`,QR_URL_SPAN_SELECTOR=`div.tooltip-inner>span.${QR_URL_SPAN_CLASS}`;function makeQRButton(s,e){let r=document.querySelector(s);new Tooltip(r,{html:!0,allowList:{...Tooltip.Default.allowList,span:["style"],canvas:[]},title:`
            <canvas class="${QR_CANVAS_CLASS}"></canvas>
            <br />
            <span class="${QR_URL_SPAN_CLASS}" style='font-size: 10px !important;'></span>
        `}),r.addEventListener("shown.bs.tooltip",()=>{let n=new URL("./",window.location.href),o=`${n}?peer=${e()}`,a=`${n}?peer=<br/>${e()}`;browser$1.toCanvas(document.querySelector(QR_CANVAS_SELECTOR),o,{errorCorrectionLevel:"H"}).then(c=>{document.querySelector(QR_URL_SPAN_SELECTOR).innerHTML=safe(a)}).catch(c=>{})}),r.addEventListener("click",()=>{document.querySelector(QR_CANVAS_SELECTOR).toBlob(n=>{navigator.clipboard.write([new ClipboardItem({[n.type]:n})])})})}let Text$1=class bn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){let o=[];return this.decompose(0,e,o,2),n.length&&n.decompose(0,n.length,o,3),this.decompose(r,this.length,o,1),TextNode.from(o,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){let n=[];return this.decompose(e,r,n,0),TextNode.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),a=new RawTextCursor(e);for(let c=r,l=r;;){if(o.next(c),a.next(c),c=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(l+=o.value.length,o.done||l>=n)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,r=this.length){return new PartialTextCursor(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let o=this.line(e).from;n=this.iterRange(o,Math.max(o,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new LineCursor(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?bn.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}};class TextLeaf extends Text$1{constructor(e,r=textLength(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,o){for(let a=0;;a++){let c=this.text[a],l=o+c.length;if((r?n:l)>=e)return new Line(o,l,n,c);o=l+1,n++}}decompose(e,r,n,o){let a=e<=0&&r>=this.length?this:new TextLeaf(sliceText(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(o&1){let c=n.pop(),l=appendText(a.text,c.text.slice(),0,a.length);if(l.length<=32)n.push(new TextLeaf(l,c.length+a.length));else{let h=l.length>>1;n.push(new TextLeaf(l.slice(0,h)),new TextLeaf(l.slice(h)))}}else n.push(a)}replace(e,r,n){if(!(n instanceof TextLeaf))return super.replace(e,r,n);let o=appendText(this.text,appendText(n.text,sliceText(this.text,0,e)),r),a=this.length+n.length-(r-e);return o.length<=32?new TextLeaf(o,a):TextNode.from(TextLeaf.split(o,[]),a)}sliceString(e,r=this.length,n=`
`){let o="";for(let a=0,c=0;a<=r&&c<this.text.length;c++){let l=this.text[c],h=a+l.length;a>e&&c&&(o+=n),e<h&&r>a&&(o+=l.slice(Math.max(0,e-a),r-a)),a=h+1}return o}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],o=-1;for(let a of e)n.push(a),o+=a.length+1,n.length==32&&(r.push(new TextLeaf(n,o)),n=[],o=-1);return o>-1&&r.push(new TextLeaf(n,o)),r}}class TextNode extends Text$1{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,o){for(let a=0;;a++){let c=this.children[a],l=o+c.length,h=n+c.lines-1;if((r?h:l)>=e)return c.lineInner(e,r,n,o);o=l+1,n=h+1}}decompose(e,r,n,o){for(let a=0,c=0;c<=r&&a<this.children.length;a++){let l=this.children[a],h=c+l.length;if(e<=h&&r>=c){let d=o&((c<=e?1:0)|(h>=r?2:0));c>=e&&h<=r&&!d?n.push(l):l.decompose(e-c,r-c,n,d)}c=h+1}}replace(e,r,n){if(n.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let c=this.children[o],l=a+c.length;if(e>=a&&r<=l){let h=c.replace(e-a,r-a,n),d=this.lines-c.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let f=this.children.slice();return f[o]=h,new TextNode(f,this.length-(r-e)+n.length)}return super.replace(a,l,h)}a=l+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){let o="";for(let a=0,c=0;a<this.children.length&&c<=r;a++){let l=this.children[a],h=c+l.length;c>e&&a&&(o+=n),e<h&&r>c&&(o+=l.sliceString(e-c,r-c,n)),c=h+1}return o}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof TextNode))return 0;let n=0,[o,a,c,l]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=r,a+=r){if(o==c||a==l)return n;let h=this.children[o],d=e.children[a];if(h!=d)return n+h.scanIdentical(d,r);n+=h.length+1}}static from(e,r=e.reduce((n,o)=>n+o.length+1,-1)){let n=0;for(let E of e)n+=E.lines;if(n<32){let E=[];for(let A of e)A.flatten(E);return new TextLeaf(E,r)}let o=Math.max(32,n>>5),a=o<<1,c=o>>1,l=[],h=0,d=-1,f=[];function g(E){let A;if(E.lines>a&&E instanceof TextNode)for(let w of E.children)g(w);else E.lines>c&&(h>c||!h)?(_(),l.push(E)):E instanceof TextLeaf&&h&&(A=f[f.length-1])instanceof TextLeaf&&E.lines+A.lines<=32?(h+=E.lines,d+=E.length+1,f[f.length-1]=new TextLeaf(A.text.concat(E.text),A.length+1+E.length)):(h+E.lines>o&&_(),h+=E.lines,d+=E.length+1,f.push(E))}function _(){h!=0&&(l.push(f.length==1?f[0]:TextNode.from(f,d)),d=-1,h=f.length=0)}for(let E of e)g(E);return _(),l.length==1?l[0]:new TextNode(l,r)}}Text$1.empty=new TextLeaf([""],0);function textLength(s){let e=-1;for(let r of s)e+=r.length+1;return e}function appendText(s,e,r=0,n=1e9){for(let o=0,a=0,c=!0;a<s.length&&o<=n;a++){let l=s[a],h=o+l.length;h>=r&&(h>n&&(l=l.slice(0,n-o)),o<r&&(l=l.slice(r-o)),c?(e[e.length-1]+=l,c=!1):e.push(l)),o=h+1}return e}function sliceText(s,e,r){return appendText(s,[""],e,r)}class RawTextCursor{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],a=this.offsets[n],c=a>>1,l=o instanceof TextLeaf?o.text.length:o.children.length;if(c==(r>0?l:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let h=o.text[c+(r<0?-1:0)];if(this.offsets[n]+=r,h.length>Math.max(0,e))return this.value=e==0?h:r>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=o.children[c+(r<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(r>0?1:(h instanceof TextLeaf?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*r,this.value=o.length<=n?o:r<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:o}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text$1.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,r,n,o){this.from=e,this.to=r,this.number=n,this.text=o}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<extend.length;s++)extend[s]+=extend[s-1];function isExtendingChar(s){for(let e=1;e<extend.length;e+=2)if(extend[e]>s)return extend[e-1]<=s;return!1}function isRegionalIndicator(s){return s>=127462&&s<=127487}const ZWJ=8205;function findClusterBreak(s,e,r=!0,n=!0){return(r?nextClusterBreak:prevClusterBreak)(s,e,n)}function nextClusterBreak(s,e,r){if(e==s.length)return e;e&&surrogateLow(s.charCodeAt(e))&&surrogateHigh(s.charCodeAt(e-1))&&e--;let n=codePointAt(s,e);for(e+=codePointSize(n);e<s.length;){let o=codePointAt(s,e);if(n==ZWJ||o==ZWJ||r&&isExtendingChar(o))e+=codePointSize(o),n=o;else if(isRegionalIndicator(o)){let a=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt(s,c));)a++,c-=2;if(a%2==0)break;e+=2}else break}return e}function prevClusterBreak(s,e,r){for(;e>0;){let n=nextClusterBreak(s,e-2,r);if(n<e)return n;e--}return 0}function surrogateLow(s){return s>=56320&&s<57344}function surrogateHigh(s){return s>=55296&&s<56320}function codePointAt(s,e){let r=s.charCodeAt(e);if(!surrogateHigh(r)||e+1==s.length)return r;let n=s.charCodeAt(e+1);return surrogateLow(n)?(r-55296<<10)+(n-56320)+65536:r}function fromCodePoint(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function codePointSize(s){return s<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,o=0;r<this.sections.length;){let a=this.sections[r++],c=this.sections[r++];c<0?(e(n,o,a),o+=a):o+=c,n+=a}}iterChangedRanges(e,r=!1){iterChanges(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],o=this.sections[r++];o<0?e.push(n,o):e.push(o,n)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,r=!1){return e.empty?this:mapSet(this,e,r)}mapPos(e,r=-1,n=MapMode.Simple){let o=0,a=0;for(let c=0;c<this.sections.length;){let l=this.sections[c++],h=this.sections[c++],d=o+l;if(h<0){if(d>e)return a+(e-o);a+=l}else{if(n!=MapMode.Simple&&d>=e&&(n==MapMode.TrackDel&&o<e&&d>e||n==MapMode.TrackBefore&&o<e||n==MapMode.TrackAfter&&d>e))return null;if(d>e||d==e&&r<0&&!l)return e==o||r<0?a:a+h;a+=h}o=d}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e,r=e){for(let n=0,o=0;n<this.sections.length&&o<=r;){let a=this.sections[n++],c=this.sections[n++],l=o+a;if(c>=0&&o<=r&&l>=e)return o<e&&l>r?"cover":!0;o=l}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],o=this.sections[r++];e+=(e?" ":"")+n+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(r,n,o,a,c)=>e=e.replace(o,o+(n-r),c),!1),e}mapDesc(e,r=!1){return mapSet(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let o=0,a=0;o<r.length;o+=2){let c=r[o],l=r[o+1];if(l>=0){r[o]=l,r[o+1]=c;let h=o>>1;for(;n.length<h;)n.push(Text$1.empty);n.push(c?e.slice(a,a+c):Text$1.empty)}a+=c}return new ChangeSet(r,n)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,r=!1){return e.empty?this:mapSet(this,e,r,!0)}iterChanges(e,r=!1){iterChanges(this,e,r)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let r=[],n=[],o=[],a=new SectionIter(this);e:for(let c=0,l=0;;){let h=c==e.length?1e9:e[c++];for(;l<h||l==h&&a.len==0;){if(a.done)break e;let f=Math.min(a.len,h-l);addSection(o,f,-1);let g=a.ins==-1?-1:a.off==0?a.ins:0;addSection(r,f,g),g>0&&addInsert(n,r,a.text),a.forward(f),l+=f}let d=e[c++];for(;l<d;){if(a.done)break e;let f=Math.min(a.len,d-l);addSection(r,f,-1),addSection(o,f,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(f),l+=f}}return{changes:new ChangeSet(r,n),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],o=this.sections[r+1];o<0?e.push(n):o==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let o=[],a=[],c=0,l=null;function h(f=!1){if(!f&&!o.length)return;c<r&&addSection(o,r-c,-1);let g=new ChangeSet(o,a);l=l?l.compose(g.map(l)):g,o=[],a=[],c=0}function d(f){if(Array.isArray(f))for(let g of f)d(g);else if(f instanceof ChangeSet){if(f.length!=r)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${r})`);h(),l=l?l.compose(f.map(l)):f}else{let{from:g,to:_=g,insert:E}=f;if(g>_||g<0||_>r)throw new RangeError(`Invalid change range ${g} to ${_} (in doc of length ${r})`);let A=E?typeof E=="string"?Text$1.of(E.split(n||DefaultSplit)):E:Text$1.empty,w=A.length;if(g==_&&w==0)return;g<c&&h(),g>c&&addSection(o,g-c,-1),addSection(o,_-g,w),addInsert(a,o,A),c=_}}return d(e),h(!l),l}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")r.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((c,l)=>l&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)r.push(a[0],0);else{for(;n.length<o;)n.push(Text$1.empty);n[o]=Text$1.of(a.slice(1)),r.push(a[0],n[o].length)}}}return new ChangeSet(r,n)}static createSet(e,r){return new ChangeSet(e,r)}}function addSection(s,e,r,n=!1){if(e==0&&r<=0)return;let o=s.length-2;o>=0&&r<=0&&r==s[o+1]?s[o]+=e:e==0&&s[o]==0?s[o+1]+=r:n?(s[o]+=e,s[o+1]+=r):s.push(e,r)}function addInsert(s,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<s.length)s[s.length-1]=s[s.length-1].append(r);else{for(;s.length<n;)s.push(Text$1.empty);s.push(r)}}function iterChanges(s,e,r){let n=s.inserted;for(let o=0,a=0,c=0;c<s.sections.length;){let l=s.sections[c++],h=s.sections[c++];if(h<0)o+=l,a+=l;else{let d=o,f=a,g=Text$1.empty;for(;d+=l,f+=h,h&&n&&(g=g.append(n[c-2>>1])),!(r||c==s.sections.length||s.sections[c+1]<0);)l=s.sections[c++],h=s.sections[c++];e(o,d,a,f,g),o=d,a=f}}}function mapSet(s,e,r,n=!1){let o=[],a=n?[]:null,c=new SectionIter(s),l=new SectionIter(e);for(let h=-1;;)if(c.ins==-1&&l.ins==-1){let d=Math.min(c.len,l.len);addSection(o,d,-1),c.forward(d),l.forward(d)}else if(l.ins>=0&&(c.ins<0||h==c.i||c.off==0&&(l.len<c.len||l.len==c.len&&!r))){let d=l.len;for(addSection(o,l.ins,-1);d;){let f=Math.min(c.len,d);c.ins>=0&&h<c.i&&c.len<=f&&(addSection(o,0,c.ins),a&&addInsert(a,o,c.text),h=c.i),c.forward(f),d-=f}l.next()}else if(c.ins>=0){let d=0,f=c.len;for(;f;)if(l.ins==-1){let g=Math.min(f,l.len);d+=g,f-=g,l.forward(g)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;addSection(o,d,h<c.i?c.ins:0),a&&h<c.i&&addInsert(a,o,c.text),h=c.i,c.forward(c.len-f)}else{if(c.done&&l.done)return a?ChangeSet.createSet(o,a):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}function composeSets(s,e,r=!1){let n=[],o=r?[]:null,a=new SectionIter(s),c=new SectionIter(e);for(let l=!1;;){if(a.done&&c.done)return o?ChangeSet.createSet(n,o):ChangeDesc.create(n);if(a.ins==0)addSection(n,a.len,0,l),a.next();else if(c.len==0&&!c.done)addSection(n,0,c.ins,l),o&&addInsert(o,n,c.text),c.next();else{if(a.done||c.done)throw new Error("Mismatched change set lengths");{let h=Math.min(a.len2,c.len),d=n.length;if(a.ins==-1){let f=c.ins==-1?-1:c.off?0:c.ins;addSection(n,h,f,l),o&&f&&addInsert(o,n,c.text)}else c.ins==-1?(addSection(n,a.off?0:a.len,h,l),o&&addInsert(o,n,a.textBit(h))):(addSection(n,a.off?0:a.len,c.off?0:c.ins,l),o&&!c.off&&addInsert(o,n,c.text));l=(a.ins>h||c.ins>=0&&c.len>h)&&(l||n.length>d),a.forward2(h),c.forward(h)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?Text$1.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?Text$1.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,o;return this.empty?n=o=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new SelectionRange(n,o,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return EditorSelection.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return EditorSelection.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,r,n){return new SelectionRange(e,r,n)}}class EditorSelection{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:EditorSelection.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,r=!0){return EditorSelection.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,EditorSelection.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(r=>SelectionRange.fromJSON(r)),e.main)}static single(e,r=e){return new EditorSelection([EditorSelection.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=n:a.from<n)return EditorSelection.normalized(e.slice(),r);n=a.to}return new EditorSelection(e,r)}static cursor(e,r=0,n,o){return SelectionRange.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(o??16777215)<<6)}static range(e,r,n,o){let a=(n??16777215)<<6|(o==null?7:Math.min(6,o));return r<e?SelectionRange.create(r,e,48|a):SelectionRange.create(e,r,(r>e?8:0)|a)}static normalized(e,r=0){let n=e[r];e.sort((o,a)=>o.from-a.from),r=e.indexOf(n);for(let o=1;o<e.length;o++){let a=e[o],c=e[o-1];if(a.empty?a.from<=c.to:a.from<c.to){let l=c.from,h=Math.max(a.to,c.to);o<=r&&r--,e.splice(--o,2,a.anchor>a.head?EditorSelection.range(h,l):EditorSelection.range(l,h))}}return new EditorSelection(e,r)}}function checkSelection(s,e){for(let r of s.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,r,n,o,a){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Facet(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function sameArray$1(s,e){return s==e||s.length==e.length&&s.every((r,n)=>r===e[n])}class FacetProvider{constructor(e,r,n,o){this.dependencies=e,this.facet=r,this.type=n,this.value=o,this.id=nextID++}dynamicSlot(e){var r;let n=this.value,o=this.facet.compareInput,a=this.id,c=e[a]>>1,l=this.type==2,h=!1,d=!1,f=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?d=!0:((r=e[g.id])!==null&&r!==void 0?r:1)&1||f.push(e[g.id]);return{create(g){return g.values[c]=n(g),1},update(g,_){if(h&&_.docChanged||d&&(_.docChanged||_.selection)||ensureAll(g,f)){let E=n(g);if(l?!compareArray(E,g.values[c],o):!o(E,g.values[c]))return g.values[c]=E,1}return 0},reconfigure:(g,_)=>{let E,A=_.config.address[a];if(A!=null){let w=getAddr(_,A);if(this.dependencies.every(m=>m instanceof Facet?_.facet(m)===g.facet(m):m instanceof StateField?_.field(m,!1)==g.field(m,!1):!0)||(l?compareArray(E=n(g),w,o):o(E=n(g),w)))return g.values[c]=w,0}else E=n(g);return g.values[c]=E,1}}}}function compareArray(s,e,r){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!r(s[n],e[n]))return!1;return!0}function ensureAll(s,e){let r=!1;for(let n of e)ensureAddr(s,n)&1&&(r=!0);return r}function dynamicFacetSlot(s,e,r){let n=r.map(h=>s[h.id]),o=r.map(h=>h.type),a=n.filter(h=>!(h&1)),c=s[e.id]>>1;function l(h){let d=[];for(let f=0;f<n.length;f++){let g=getAddr(h,n[f]);if(o[f]==2)for(let _ of g)d.push(_);else d.push(g)}return e.combine(d)}return{create(h){for(let d of n)ensureAddr(h,d);return h.values[c]=l(h),1},update(h,d){if(!ensureAll(h,a))return 0;let f=l(h);return e.compare(f,h.values[c])?0:(h.values[c]=f,1)},reconfigure(h,d){let f=ensureAll(h,n),g=d.config.facets[e.id],_=d.facet(e);if(g&&!f&&sameArray$1(r,g))return h.values[c]=_,0;let E=l(h);return e.compare(E,_)?(h.values[c]=_,0):(h.values[c]=E,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,r,n,o,a){this.id=e,this.createF=r,this.updateF=n,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let r=new StateField(nextID++,e.create,e.update,e.compare||((n,o)=>n===o),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(initField).find(n=>n.field==this);return(r?.create||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,o)=>{let a=n.values[r],c=this.updateF(a,o);return this.compareF(a,c)?0:(n.values[r]=c,1)},reconfigure:(n,o)=>o.config.address[this.id]!=null?(n.values[r]=o.field(this),0):(n.values[r]=this.create(n),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(s){return e=>new PrecExtension(e,s)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,r){this.inner=e,this.prec=r}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,r){this.compartment=e,this.inner=r}}class Configuration{constructor(e,r,n,o,a,c){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=o,this.staticValues=a,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let o=[],a=Object.create(null),c=new Map;for(let _ of flatten(e,r,c))_ instanceof StateField?o.push(_):(a[_.facet.id]||(a[_.facet.id]=[])).push(_);let l=Object.create(null),h=[],d=[];for(let _ of o)l[_.id]=d.length<<1,d.push(E=>_.slot(E));let f=n?.config.facets;for(let _ in a){let E=a[_],A=E[0].facet,w=f&&f[_]||[];if(E.every(m=>m.type==0))if(l[A.id]=h.length<<1|1,sameArray$1(w,E))h.push(n.facet(A));else{let m=A.combine(E.map(b=>b.value));h.push(n&&A.compare(m,n.facet(A))?n.facet(A):m)}else{for(let m of E)m.type==0?(l[m.id]=h.length<<1|1,h.push(m.value)):(l[m.id]=d.length<<1,d.push(b=>m.dynamicSlot(b)));l[A.id]=d.length<<1,d.push(m=>dynamicFacetSlot(m,A,E))}}let g=d.map(_=>_(l));return new Configuration(e,c,g,l,h,a)}}function flatten(s,e,r){let n=[[],[],[],[],[]],o=new Map;function a(c,l){let h=o.get(c);if(h!=null){if(h<=l)return;let d=n[h].indexOf(c);d>-1&&n[h].splice(d,1),c instanceof CompartmentInstance&&r.delete(c.compartment)}if(o.set(c,l),Array.isArray(c))for(let d of c)a(d,l);else if(c instanceof CompartmentInstance){if(r.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(c.compartment)||c.inner;r.set(c.compartment,d),a(d,l)}else if(c instanceof PrecExtension)a(c.inner,c.prec);else if(c instanceof StateField)n[l].push(c),c.provides&&a(c.provides,l);else if(c instanceof FacetProvider)n[l].push(c),c.facet.extensions&&a(c.facet.extensions,Prec_.default);else{let d=c.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(d,l)}}return a(s,Prec_.default),n.reduce((c,l)=>c.concat(l))}function ensureAddr(s,e){if(e&1)return 2;let r=e>>1,n=s.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[r]=4;let o=s.computeSlot(s,s.config.dynamicSlots[r]);return s.status[r]=2|o}function getAddr(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:s=>s.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:s=>s.length?s[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:s=>s.length?s[0]:!1});class Annotation{constructor(e,r){this.type=e,this.value=r}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new StateEffect(this.type,r)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let o of e){let a=o.map(r);a&&n.push(a)}return n}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,r,n,o,a,c){this.startState=e,this.changes=r,this.selection=n,this.effects=o,this.annotations=a,this.scrollIntoView=c,this._doc=null,this._state=null,n&&checkSelection(n,r.newLength),a.some(l=>l.type==Transaction.time)||(this.annotations=a.concat(Transaction.time.of(Date.now())))}static create(e,r,n,o,a,c){return new Transaction(e,r,n,o,a,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Transaction.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(s,e){let r=[];for(let n=0,o=0;;){let a,c;if(n<s.length&&(o==e.length||e[o]>=s[n]))a=s[n++],c=s[n++];else if(o<e.length)a=e[o++],c=e[o++];else return r;!r.length||r[r.length-1]<a?r.push(a,c):r[r.length-1]<c&&(r[r.length-1]=c)}}function mergeTransaction(s,e,r){var n;let o,a,c;return r?(o=e.changes,a=ChangeSet.empty(e.changes.length),c=s.changes.compose(e.changes)):(o=e.changes.map(s.changes),a=s.changes.mapDesc(e.changes,!0),c=s.changes.compose(o)),{changes:c,selection:e.selection?e.selection.map(a):(n=s.selection)===null||n===void 0?void 0:n.map(o),effects:StateEffect.mapEffects(s.effects,o).concat(StateEffect.mapEffects(e.effects,a)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(s,e,r){let n=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],r,s.facet(lineSeparator)),selection:n&&(n instanceof EditorSelection?n:EditorSelection.single(n.anchor,n.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(s,e,r){let n=resolveTransactionInner(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(r=!1);let c=!!e[a].sequential;n=mergeTransaction(n,resolveTransactionInner(s,e[a],c?n.changes.newLength:s.doc.length),c)}let o=Transaction.create(s,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return extendTransaction(r?filterTransaction(o):o)}function filterTransaction(s){let e=s.startState,r=!0;for(let o of e.facet(changeFilter)){let a=o(s);if(a===!1){r=!1;break}Array.isArray(a)&&(r=r===!0?a:joinRanges(r,a))}if(r!==!0){let o,a;if(r===!1)a=s.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let c=s.changes.filter(r);o=c.changes,a=c.filtered.mapDesc(c.changes).invertedDesc}s=Transaction.create(e,o,s.selection&&s.selection.map(a),StateEffect.mapEffects(s.effects,a),s.annotations,s.scrollIntoView)}let n=e.facet(transactionFilter);for(let o=n.length-1;o>=0;o--){let a=n[o](s);a instanceof Transaction?s=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Transaction?s=a[0]:s=resolveTransaction(e,asArray$1(a),!1)}return s}function extendTransaction(s){let e=s.startState,r=e.facet(transactionExtender),n=s;for(let o=r.length-1;o>=0;o--){let a=r[o](s);a&&Object.keys(a).length&&(n=mergeTransaction(n,resolveTransactionInner(e,a,s.changes.newLength),!0))}return n==s?s:Transaction.create(e,s.changes,s.selection,n.effects,n.annotations,n.scrollIntoView)}const none$2=[];function asArray$1(s){return s==null?none$2:Array.isArray(s)?s:[s]}var CharCategory=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(s){if(wordChar)return wordChar.test(s);for(let e=0;e<s.length;e++){let r=s[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(s){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let r=0;r<s.length;r++)if(e.indexOf(s[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,r,n,o,a,c){this.config=e,this.doc=r,this.selection=n,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,c&&(c._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ensureAddr(this,l<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,n),getAddr(this,n)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:o}=r;for(let l of e.effects)l.is(Compartment.reconfigure)?(r&&(o=new Map,r.compartments.forEach((h,d)=>o.set(d,h)),r=null),o.set(l.value.compartment,l.value.extension)):l.is(StateEffect.reconfigure)?(r=null,n=l.value):l.is(StateEffect.appendConfig)&&(r=null,n=asArray$1(n).concat(l.value));let a;r?a=e.startState.values.slice():(r=Configuration.resolve(n,o,this),a=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let c=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(r,e.newDoc,c,a,(l,h)=>h.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:EditorSelection.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),o=this.changes(n.changes),a=[n.range],c=asArray$1(n.effects);for(let l=1;l<r.ranges.length;l++){let h=e(r.ranges[l]),d=this.changes(h.changes),f=d.map(o);for(let _=0;_<l;_++)a[_]=a[_].map(f);let g=o.mapDesc(d,!0);a.push(h.range.map(g)),o=o.compose(f),c=StateEffect.mapEffects(c,f).concat(StateEffect.mapEffects(asArray$1(h.effects),g))}return{changes:o,selection:EditorSelection.create(a,r.mainIndex),effects:c}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text$1.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(ensureAddr(this,r),getAddr(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let o=e[n];o instanceof StateField&&this.config.address[o.id]!=null&&(r[n]=o.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let c=n[a],l=e[a];o.push(c.init(h=>c.spec.fromJSON(l,h)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:r.extensions?o.concat([r.extensions]):o})}static create(e={}){let r=Configuration.resolve(e.extensions||[],new Map),n=e.doc instanceof Text$1?e.doc:Text$1.of((e.doc||"").split(r.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,n.length),r.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(r,n,o,r.dynamicSlots.map(()=>null),(a,c)=>c.create(a),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...r){for(let n of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>r.length?n:r[a-1]})),e}languageDataAt(e,r,n=-1){let o=[];for(let a of this.facet(languageData))for(let c of a(this,r,n))Object.prototype.hasOwnProperty.call(c,e)&&o.push(c[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),c=e-n,l=e-n;for(;c>0;){let h=findClusterBreak(r,c,!1);if(a(r.slice(h,c))!=CharCategory.Word)break;c=h}for(;l<o;){let h=findClusterBreak(r,l);if(a(r.slice(l,h))!=CharCategory.Word)break;l=h}return c==l?null:EditorSelection.range(c+n,l+n)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:s=>s.length?s[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(s,e){let r=Object.keys(s),n=Object.keys(e);return r.length==n.length&&r.every(o=>s[o]==e[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(s,e,r={}){let n={};for(let o of s)for(let a of Object.keys(o)){let c=o[a],l=n[a];if(l===void 0)n[a]=c;else if(!(l===c||c===void 0))if(Object.hasOwnProperty.call(r,a))n[a]=r[a](l,c);else throw new Error("Config merge conflict for field "+a)}for(let o in e)n[o]===void 0&&(n[o]=e[o]);return n}class RangeValue{eq(e){return this==e}range(e,r=e){return Range$1.create(e,r,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class yn{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new yn(e,r,n)}};function cmpRange(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Chunk{constructor(e,r,n,o){this.from=e,this.to=r,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,o=0){let a=n?this.to:this.from;for(let c=o,l=a.length;;){if(c==l)return c;let h=c+l>>1,d=a[h]-e||(n?this.value[h].endSide:this.value[h].startSide)-r;if(h==c)return d>=0?c:l;d>=0?l=h:c=h+1}}between(e,r,n,o){for(let a=this.findIndex(r,-1e9,!0),c=this.findIndex(n,1e9,!1,a);a<c;a++)if(o(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,r){let n=[],o=[],a=[],c=-1,l=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],f=this.from[h]+e,g=this.to[h]+e,_,E;if(f==g){let A=r.mapPos(f,d.startSide,d.mapMode);if(A==null||(_=E=A,d.startSide!=d.endSide&&(E=r.mapPos(f,d.endSide),E<_)))continue}else if(_=r.mapPos(f,d.startSide),E=r.mapPos(g,d.endSide),_>E||_==E&&d.startSide>0&&d.endSide<=0)continue;(E-_||d.endSide-d.startSide)<0||(c<0&&(c=_),d.point&&(l=Math.max(l,E-_)),n.push(d),o.push(_-c),a.push(E-c))}return{mapped:n.length?new Chunk(o,a,n,l):null,pos:c}}}class RangeSet{constructor(e,r,n,o){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=o}static create(e,r,n,o){return new RangeSet(e,r,n,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:o=0,filterTo:a=this.length}=e,c=e.filter;if(r.length==0&&!c)return this;if(n&&(r=r.slice().sort(cmpRange)),this.isEmpty)return r.length?RangeSet.of(r):this;let l=new LayerCursor(this,null,-1).goto(0),h=0,d=[],f=new RangeSetBuilder;for(;l.value||h<r.length;)if(h<r.length&&(l.from-r[h].from||l.startSide-r[h].value.startSide)>=0){let g=r[h++];f.addInner(g.from,g.to,g.value)||d.push(g)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==r.length||this.chunkEnd(l.chunkIndex)<r[h].from)&&(!c||o>this.chunkEnd(l.chunkIndex)||a<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!c||o>l.to||a<l.from||c(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||d.push(Range$1.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!d.length?RangeSet.empty:this.nextLayer.update({add:d,filter:c,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],o=-1;for(let c=0;c<this.chunk.length;c++){let l=this.chunkPos[c],h=this.chunk[c],d=e.touchesRange(l,l+h.length);if(d===!1)o=Math.max(o,h.maxPoint),r.push(h),n.push(e.mapPos(l));else if(d===!0){let{mapped:f,pos:g}=h.map(l,e);f&&(o=Math.max(o,f.maxPoint),r.push(f),n.push(g))}}let a=this.nextLayer.map(e);return r.length==0?a:new RangeSet(n,r,a||RangeSet.empty,o)}between(e,r,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],c=this.chunk[o];if(r>=a&&e<=a+c.length&&c.between(a,e-a,r-a,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return HeapCursor.from(e).goto(r)}static compare(e,r,n,o,a=-1){let c=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),l=r.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),h=findSharedChunks(c,l,n),d=new SpanCursor(c,h,a),f=new SpanCursor(l,h,a);n.iterGaps((g,_,E)=>compare(d,g,f,_,E,o)),n.empty&&n.length==0&&compare(d,0,f,0,0,o)}static eq(e,r,n=0,o){o==null&&(o=999999999);let a=e.filter(f=>!f.isEmpty&&r.indexOf(f)<0),c=r.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(a.length!=c.length)return!1;if(!a.length)return!0;let l=findSharedChunks(a,c),h=new SpanCursor(a,l,0).goto(n),d=new SpanCursor(c,l,0).goto(n);for(;;){if(h.to!=d.to||!sameValues(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>o)return!0;h.next(),d.next()}}static spans(e,r,n,o,a=-1){let c=new SpanCursor(e,null,a).goto(r),l=r,h=c.openStart;for(;;){let d=Math.min(c.to,n);if(c.point){let f=c.activeForPoint(c.to),g=c.pointFrom<r?f.length+1:Math.min(f.length,h);o.point(l,d,c.point,f,g,c.pointRank),h=Math.min(c.openEnd(d),f.length)}else d>l&&(o.span(l,d,c.active,h),h=c.openEnd(d));if(c.to>n)return h+(c.point&&c.to>n?1:0);l=c.to,c.next()}}static of(e,r=!1){let n=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:r?lazySort(e):e)n.add(o.from,o.to,o.value);return n.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(s){if(s.length>1)for(let e=s[0],r=1;r<s.length;r++){let n=s[r];if(cmpRange(e,n)>0)return s.slice().sort(cmpRange);e=n}return s}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,r,n)}addInner(e,r,n){let o=e-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function findSharedChunks(s,e,r){let n=new Map;for(let a of s)for(let c=0;c<a.chunk.length;c++)a.chunk[c].maxPoint<=0&&n.set(a.chunk[c],a.chunkPos[c]);let o=new Set;for(let a of e)for(let c=0;c<a.chunk.length;c++){let l=n.get(a.chunk[c]);l!=null&&(r?r.mapPos(l):l)==a.chunkPos[c]&&!r?.touchesRange(l,l+a.chunk[c].length)&&o.add(a.chunk[c])}return o}class LayerCursor{constructor(e,r,n,o=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,r=null,n=-1){let o=[];for(let a=0;a<e.length;a++)for(let c=e[a];!c.isEmpty;c=c.nextLayer)c.maxPoint>=n&&o.push(new LayerCursor(c,r,n,a));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(s,e){for(let r=s[e];;){let n=(e<<1)+1;if(n>=s.length)break;let o=s[n];if(n+1<s.length&&o.compare(s[n+1])>=0&&(o=s[n+1],n++),r.compare(o)<0)break;s[n]=r,s[e]=o,e=n}}class SpanCursor{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:o,rank:a}=this.cursor;for(;r<this.activeRank.length&&this.activeRank[r]<=a;)r++;insert(this.active,r,n),insert(this.activeTo,r,o),insert(this.activeRank,r,a),e&&insert(e,r,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&remove(n,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let o=n.length-1;o>=0&&n[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function compare(s,e,r,n,o,a){s.goto(e),r.goto(n);let c=n+o,l=n,h=n-e;for(;;){let d=s.to+h-r.to||s.endSide-r.endSide,f=d<0?s.to+h:r.to,g=Math.min(f,c);if(s.point||r.point?s.point&&r.point&&(s.point==r.point||s.point.eq(r.point))&&sameValues(s.activeForPoint(s.to),r.activeForPoint(r.to))||a.comparePoint(l,g,s.point,r.point):g>l&&!sameValues(s.active,r.active)&&a.compareRange(l,g,s.active,r.active),f>c)break;l=f,d<=0&&s.next(),d>=0&&r.next()}}function sameValues(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!=e[r]&&!s[r].eq(e[r]))return!1;return!0}function remove(s,e){for(let r=e,n=s.length-1;r<n;r++)s[r]=s[r+1];s.pop()}function insert(s,e,r){for(let n=s.length-1;n>=e;n--)s[n+1]=s[n];s[e]=r}function findMinIndex(s,e){let r=-1,n=1e9;for(let o=0;o<e.length;o++)(e[o]-n||s[o].endSide-s[r].endSide)<0&&(r=o,n=e[o]);return r}function countColumn(s,e,r=s.length){let n=0;for(let o=0;o<r;)s.charCodeAt(o)==9?(n+=e-n%e,o++):(n++,o=findClusterBreak(s,o));return n}function findColumn(s,e,r,n){for(let o=0,a=0;;){if(a>=e)return o;if(o==s.length)break;a+=s.charCodeAt(o)==9?r-a%r:1,o=findClusterBreak(s,o)}return n===!0?-1:s.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,r){this.rules=[];let{finish:n}=r||{};function o(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function a(c,l,h,d){let f=[],g=/^@(\w+)\b/.exec(c[0]),_=g&&g[1]=="keyframes";if(g&&l==null)return h.push(c[0]+";");for(let E in l){let A=l[E];if(/&/.test(E))a(E.split(/,\s*/).map(w=>c.map(m=>w.replace(/&/,m))).reduce((w,m)=>w.concat(m)),A,h);else if(A&&typeof A=="object"){if(!g)throw new RangeError("The value of a property ("+E+") should be a primitive value.");a(o(E),A,f,_)}else A!=null&&f.push(E.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+A+";")}(f.length||_)&&h.push((n&&!g&&!d?c.map(n):c).join(", ")+" {"+f.join(" ")+"}")}for(let c in e)a(o(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,r,n){let o=e[SET],a=n&&n.nonce;o?a&&o.setNonce(a):o=new StyleSet(e,a),o.mount(Array.isArray(r)?r:[r])}}let adoptedSet=new Map;class StyleSet{constructor(e,r){let n=e.ownerDocument||e,o=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let a=adoptedSet.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[SET]=a;this.sheet=new o.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],adoptedSet.set(n,this)}else{this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[SET]=this}mount(e){let r=this.sheet,n=0,o=0;for(let a=0;a<e.length;a++){let c=e[a],l=this.modules.indexOf(c);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,c),r)for(let h=0;h<c.rules.length;h++)r.insertRule(c.rules[h],n++)}else{for(;o<l;)n+=this.modules[o++].rules.length;n+=c.rules.length,o++}}if(!r){let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var e=mac&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||ie$1&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",r=!e&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function getSelection(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function contains(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hasSelection(s,e){if(!e.anchorNode)return!1;try{return contains(s,e.anchorNode)}catch{return!1}}function clientRectsFor(s){return s.nodeType==3?textRange(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function isEquivalentPosition(s,e,r,n){return r?scanFor(s,e,r,n,-1)||scanFor(s,e,r,n,1):!1}function domIndex(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function scanFor(s,e,r,n,o){for(;;){if(s==r&&e==n)return!0;if(e==(o<0?0:maxOffset(s))){if(s.nodeName=="DIV")return!1;let a=s.parentNode;if(!a||a.nodeType!=1)return!1;e=domIndex(s)+(o<0?0:1),s=a}else if(s.nodeType==1){if(s=s.childNodes[e+(o<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=o<0?maxOffset(s):0}else return!1}}function maxOffset(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function flattenRect(s,e){let r=e?s.left:s.right;return{left:r,right:r,top:s.top,bottom:s.bottom}}function windowRect(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function scrollRectIntoView(s,e,r,n,o,a,c,l){let h=s.ownerDocument,d=h.defaultView||window;for(let f=s,g=!1;f&&!g;)if(f.nodeType==1){let _,E=f==h.body,A=1,w=1;if(E)_=windowRect(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(g=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let y=f.getBoundingClientRect();A=y.width/f.offsetWidth,w=y.height/f.offsetHeight,_={left:y.left,right:y.left+f.clientWidth*A,top:y.top,bottom:y.top+f.clientHeight*w}}let m=0,b=0;if(o=="nearest")e.top<_.top?(b=-(_.top-e.top+c),r>0&&e.bottom>_.bottom+b&&(b=e.bottom-_.bottom+b+c)):e.bottom>_.bottom&&(b=e.bottom-_.bottom+c,r<0&&e.top-b<_.top&&(b=-(_.top+b-e.top+c)));else{let y=e.bottom-e.top,x=_.bottom-_.top;b=(o=="center"&&y<=x?e.top+y/2-x/2:o=="start"||o=="center"&&r<0?e.top-c:e.bottom-x+c)-_.top}if(n=="nearest"?e.left<_.left?(m=-(_.left-e.left+a),r>0&&e.right>_.right+m&&(m=e.right-_.right+m+a)):e.right>_.right&&(m=e.right-_.right+a,r<0&&e.left<_.left+m&&(m=-(_.left+m-e.left+a))):m=(n=="center"?e.left+(e.right-e.left)/2-(_.right-_.left)/2:n=="start"==l?e.left-a:e.right-(_.right-_.left)+a)-_.left,m||b)if(E)d.scrollBy(m,b);else{let y=0,x=0;if(b){let D=f.scrollTop;f.scrollTop+=b/w,x=(f.scrollTop-D)*w}if(m){let D=f.scrollLeft;f.scrollLeft+=m/A,y=(f.scrollLeft-D)*A}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-m)<1&&(n="nearest"),x&&Math.abs(x-b)<1&&(o="nearest")}if(E)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function scrollableParent(s){let e=s.ownerDocument;for(let r=s.parentNode;r&&r!=e.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?maxOffset(r):0),n,Math.min(e.focusOffset,n?maxOffset(n):0))}set(e,r,n,o){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let e=[];for(let r=s;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let r=0;r<e.length;){let n=e[r++],o=e[r++],a=e[r++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let scratchRange;function textRange(s,e,r=e){let n=scratchRange||(scratchRange=document.createRange());return n.setEnd(s,r),n.setStart(s,e),n}function dispatchKey(s,e,r){let n={key:e,code:e,keyCode:r,which:r,cancelable:!0},o=new KeyboardEvent("keydown",n);o.synthetic=!0,s.dispatchEvent(o);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,s.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function getRoot(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function clearAttributes(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function atElementStart(s,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,maxOffset(r));;)if(n){if(r.nodeType!=1)return!1;let o=r.childNodes[n-1];o.contentEditable=="false"?n--:(r=o,n=maxOffset(r))}else{if(r==s)return!0;n=domIndex(r),r=r.parentNode}}function isScrolledToBottom(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}class DOMPos{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new DOMPos(e.parentNode,domIndex(e),r)}static after(e,r){return new DOMPos(e.parentNode,domIndex(e)+1,r)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,o=null,a;for(let c of this.children){if(c.flags&7){if(!c.dom&&(a=o?o.nextSibling:n.firstChild)){let l=ContentView.get(a);(!l||!l.parent&&l.canReuseDOM(c))&&c.reuseDOM(a)}c.sync(e,r),c.flags&=-8}if(a=o?o.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&a!=c.dom&&(r.written=!0),c.dom.parentNode==n)for(;a&&a!=c.dom;)a=rm$1(a);else n.insertBefore(c.dom,a);o=c.dom}for(a=o?o.nextSibling:n.firstChild,a&&r&&r.node==n&&(r.written=!0);a;)a=rm$1(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let o=maxOffset(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ContentView.get(n);)n=n.nextSibling;if(!n)return this.length;for(let o=0,a=0;;o++){let c=this.children[o];if(c.dom==n)return a;a+=c.length+c.breakAfter}}domBoundsAround(e,r,n=0){let o=-1,a=-1,c=-1,l=-1;for(let h=0,d=n,f=n;h<this.children.length;h++){let g=this.children[h],_=d+g.length;if(d<e&&_>r)return g.domBoundsAround(e,r,d);if(_>=e&&o==-1&&(o=h,a=d),d>r&&g.dom.parentNode==this.dom){c=h,l=f;break}f=_,d=_+g.breakAfter}return{from:a,to:l<0?n+this.length:l,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=noChildren){this.markDirty();for(let o=e;o<r;o++){let a=this.children[o];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,r-e,...n);for(let o=0;o<n.length;o++)n[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,o,a,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ChildCursor{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function replaceRange(s,e,r,n,o,a,c,l,h){let{children:d}=s,f=d.length?d[e]:null,g=a.length?a[a.length-1]:null,_=g?g.breakAfter:c;if(!(e==n&&f&&!c&&!_&&a.length<2&&f.merge(r,o,a.length?g:null,r==0,l,h))){if(n<d.length){let E=d[n];E&&(o<E.length||E.breakAfter&&g?.breakAfter)?(e==n&&(E=E.split(o),o=0),!_&&g&&E.merge(0,o,g,!0,0,h)?a[a.length-1]=E:((o||E.children.length&&!E.children[0].length)&&E.merge(0,o,null,!1,0,h),a.push(E))):E?.breakAfter&&(g?g.breakAfter=1:c=1),n++}for(f&&(f.breakAfter=c,r>0&&(!c&&a.length&&f.merge(r,f.length,a[0],!1,l,0)?f.breakAfter=a.shift().breakAfter:(r<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(r,f.length,null,!1,l,0),e++));e<n&&a.length;)if(d[n-1].become(a[a.length-1]))n--,a.pop(),h=a.length?0:l;else if(d[e].become(a[0]))e++,a.shift(),l=a.length?0:h;else break;!a.length&&e&&n<d.length&&!d[e-1].breakAfter&&d[n].merge(0,0,d[e-1],!1,l,h)&&e--,(e<n||a.length)&&s.replaceChildren(e,n,a)}}function mergeChildrenInto(s,e,r,n,o,a){let c=s.childCursor(),{i:l,off:h}=c.findPos(r,1),{i:d,off:f}=c.findPos(e,-1),g=e-r;for(let _ of n)g+=_.length;s.length+=g,replaceRange(s,d,f,l,h,n,0,o,a)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof TextView)||this.length-(r-e)+n.length>MaxJoinLen||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return textCoords(this.dom,e,r)}}class MarkView extends ContentView{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let o of r)o.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,o,a,c){return n&&(!(n instanceof MarkView&&n.mark.eq(this.mark))||e&&a<=0||r<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,r,n?n.children:[],a-1,c-1),this.markDirty(),!0)}split(e){let r=[],n=0,o=-1,a=0;for(let l of this.children){let h=n+l.length;h>e&&r.push(n<e?l.split(e-n):l),o<0&&n>=e&&(o=a),n=h,a++}let c=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,r,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,r){return coordsInChildren(this,e,r)}}function textCoords(s,e,r){let n=s.nodeValue.length;e>n&&(e=n);let o=e,a=e,c=0;e==0&&r<0||e==n&&r>=0?browser.chrome||browser.gecko||(e?(o--,c=1):a<n&&(a++,c=-1)):r<0?o--:a<n&&a++;let l=textRange(s,o,a).getClientRects();if(!l.length)return null;let h=l[(c?c<0:r>=0)?0:l.length-1];return browser.safari&&!c&&h.width==0&&(h=Array.prototype.find.call(l,d=>d.width)||h),c?flattenRect(h,c<0):h||null}class WidgetView extends ContentView{static create(e,r,n){return new WidgetView(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,r,n,o,a,c){return n&&(!(n instanceof WidgetView)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&c<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text$1.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):Text$1.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let c=this.side?this.side<0:e>0;for(let l=c?o.length-1:0;a=o[l],!(e>0?l==0:l==o.length-1||a.top<a.bottom);l+=c?-1:1);return flattenRect(a,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text$1.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(s,e){let r=s.dom,{children:n}=s,o=0;for(let a=0;o<n.length;o++){let c=n[o],l=a+c.length;if(!(l==a&&c.getSide()<=0)){if(e>a&&e<l&&c.dom.parentNode==r)return c.domAtPos(e-a);if(e<=a)break;a=l}}for(let a=o;a>0;a--){let c=n[a-1];if(c.dom.parentNode==r)return c.domAtPos(c.length)}for(let a=o;a<n.length;a++){let c=n[a];if(c.dom.parentNode==r)return c.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(s,e,r){let n,{children:o}=s;r>0&&e instanceof MarkView&&o.length&&(n=o[o.length-1])instanceof MarkView&&n.mark.eq(e.mark)?joinInlineInto(n,e.children[0],r-1):(o.push(e),e.setParent(s)),s.length+=e.length}function coordsInChildren(s,e,r){let n=null,o=-1,a=null,c=-1;function l(d,f){for(let g=0,_=0;g<d.children.length&&_<=f;g++){let E=d.children[g],A=_+E.length;A>=f&&(E.children.length?l(E,f-_):(!a||a.isHidden&&r>0)&&(A>f||_==A&&E.getSide()>0)?(a=E,c=f-_):(_<f||_==A&&E.getSide()<0&&!E.isHidden)&&(n=E,o=f-_)),_=A}}l(s,e);let h=(r<0?n:a)||n||a;return h?h.coordsAt(Math.max(0,h==n?o:c),r):fallbackRect(s)}function fallbackRect(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let r=clientRectsFor(e);return r[r.length-1]||null}function combineAttrs(s,e){for(let r in s)r=="class"&&e.class?e.class+=" "+s.class:r=="style"&&e.style?e.style+=";"+s.style:e[r]=s[r];return e}const noAttrs=Object.create(null);function attrsEq(s,e,r){if(s==e)return!0;s||(s=noAttrs),e||(e=noAttrs);let n=Object.keys(s),o=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=o.length-(r&&o.indexOf(r)>-1?1:0))return!1;for(let a of n)if(a!=r&&(o.indexOf(a)==-1||s[a]!==e[a]))return!1;return!0}function updateAttrs(s,e,r){let n=!1;if(e)for(let o in e)r&&o in r||(n=!0,o=="style"?s.style.cssText="":s.removeAttribute(o));if(r)for(let o in r)e&&e[o]==r[o]||(n=!0,o=="style"?s.style.cssText=r[o]:s.setAttribute(o,r[o]));return n}function getAttrs(s){let e=Object.create(null);for(let r=0;r<s.attributes.length;r++){let n=s.attributes[r];e[n.name]=n.value}return e}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,o,a,c){if(n){if(!(n instanceof LineView))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),mergeChildrenInto(this,e,r,n?n.children:[],a,c),!0}split(e){let r=new LineView;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:o}=this.childPos(e);o&&(r.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)r.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){joinInlineInto(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=combineAttrs(r,this.attrs||{})),n&&(this.attrs=combineAttrs({class:n},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((n=ContentView.get(o))===null||n===void 0?void 0:n.isEditable)==!1&&(!browser.ios||!this.children.some(a=>a instanceof TextView))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof TextView)||/[^ -~]/.test(n.text))return null;let o=clientRectsFor(n.dom);if(o.length!=1)return null;e+=o[0].width,r=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=coordsInChildren(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:o}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-o.lineHeight)<2&&o.textHeight<a){let c=(a-o.textHeight)/2;return{top:n.top+c,bottom:n.bottom-c,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,r){for(let n=0,o=0;n<e.children.length;n++){let a=e.children[n],c=o+a.length;if(c>=r){if(a instanceof LineView)return a;if(c>r)break}o=c+a.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,o,a,c){return n&&(!(n instanceof BlockWidgetView)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&c<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new BlockWidgetView(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text$1.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){return this.widget.coordsAt(this.dom,e,r)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class WidgetType{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}destroy(e){}}var BlockType=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,r,n,o){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new PointDecoration(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,o;if(e.isBlockGap)n=-5e8,o=4e8;else{let{start:a,end:c}=getInclusive(e,r);n=(a?r?-3e8:-1:5e8)-1,o=(c?r?2e8:1:-6e8)+1}return new PointDecoration(e,n,o,r,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,r=!1){return RangeSet.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:r,end:n}=getInclusive(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,r,n,o,a,c){super(r,n,a,e),this.block=o,this.isReplace=c,this.mapMode=o?r<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}PointDecoration.prototype.point=!0;function getInclusive(s,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=s;return r==null&&(r=s.inclusive),n==null&&(n=s.inclusive),{start:r??e,end:n??e}}function widgetsEq(s,e){return s==e||!!(s&&e&&s.compare(e))}function addRange(s,e,r,n=0){let o=r.length-1;o>=0&&r[o]+n>=s?r[o]=Math.max(r[o],e):r.push(s,e)}class ContentBuilder{constructor(e,r,n,o){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),r),n),this.atCursorPos=!0,this.textOff+=o,e-=o,n=0}}span(e,r,n,o){this.buildText(r-e,n,o),this.pos=r,this.openStart<0&&(this.openStart=o)}point(e,r,n,o,a,c){if(this.disallowBlockEffectsFor[c]&&n instanceof PointDecoration){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=r-e;if(n instanceof PointDecoration)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(n.widget||new NullWidget("div"),l,n));else{let h=WidgetView.create(n.widget||new NullWidget("span"),l,l?0:n.startSide),d=this.atCursorPos&&!h.isEditable&&a<=o.length&&(e<r||n.startSide>0),f=!h.isEditable&&(e<r||a>o.length||n.startSide<=0),g=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),d&&(g.append(wrapMarks(new WidgetBufferView(1),o),a),a=o.length+Math.max(0,a-o.length)),g.append(wrapMarks(h,o),a),this.atCursorPos=f,this.pendingBuffer=f?e<r||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=a)}static build(e,r,n,o,a){let c=new ContentBuilder(e,r,n,a);return c.openEnd=RangeSet.spans(o,r,n,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(s,e){for(let r of e)s=new MarkView(r,[s],s.length);return s}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:s=>s.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:s=>s.some(e=>e)});class ScrollTarget{constructor(e,r="nearest",n="nearest",o=5,a=5,c=!1){this.range=e,this.y=r,this.x=n,this.yMargin=o,this.xMargin=a,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(s,e)=>s.map(e)});function logException(s,e,r){let n=s.facet(exceptionSink);n.length?n[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const editable=Facet.define({combine:s=>s.length?s[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,r,n,o,a){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=o,this.extension=a(this)}static define(e,r){const{eventHandlers:n,eventObservers:o,provide:a,decorations:c}=r||{};return new ViewPlugin(nextPluginID++,e,n,o,l=>{let h=[viewPlugin.of(l)];return c&&h.push(decorations.of(d=>{let f=d.plugin(l);return f?c(f):Decoration.none})),a&&h.push(a(l)),h})}static fromClass(e,r){return ViewPlugin.define(n=>new e(n),r)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(logException(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){logException(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){logException(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(s,e,r){let n=s.state.facet(bidiIsolatedRanges);if(!n.length)return n;let o=n.map(c=>c instanceof Function?c(s):c),a=[];return RangeSet.spans(o,e,r,{point(){},span(c,l,h,d){let f=a;for(let g=h.length-1;g>=0;g--,d--){let _=h[g].spec.bidiIsolate,E;if(_!=null)if(d>0&&f.length&&(E=f[f.length-1]).to==c&&E.direction==_)E.to=l,f=E.inner;else{let A={from:c,to:l,direction:_,inner:[]};f.push(A),f=A.inner}}}}),a}const scrollMargins=Facet.define();function getScrollMargins(s){let e=0,r=0,n=0,o=0;for(let a of s.state.facet(scrollMargins)){let c=a(s);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(r=Math.max(r,c.right)),c.top!=null&&(n=Math.max(n,c.top)),c.bottom!=null&&(o=Math.max(o,c.bottom)))}return{left:e,right:r,top:n,bottom:o}}const styleModule=Facet.define();class ChangedRange{constructor(e,r,n,o){this.fromA=e,this.toA=r,this.fromB=n,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let o=e[r-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let o=0,a=0,c=0,l=0;;o++){let h=o==e.length?null:e[o],d=c-l,f=h?h.fromB:1e9;for(;a<r.length&&r[a]<f;){let g=r[a],_=r[a+1],E=Math.max(l,g),A=Math.min(f,_);if(E<=A&&new ChangedRange(E+d,A+d,E,A).addToSet(n),_>f)break;a+=2}if(!h)return n;new ChangedRange(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),c=h.toA,l=h.toB}}}class ViewUpdate{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,c,l,h)=>o.push(new ChangedRange(a,c,l,h))),this.changedRanges=o}static create(e,r,n){return new ViewUpdate(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(s){let e=[];for(let r=0;r<s.length;r++)e.push(1<<+s[r]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),r=s.charCodeAt(1);Brackets[e]=r,Brackets[r]=-e}function charType(s){return s<=247?LowTypes[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?ArabicTypes[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:s==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}static find(e,r,n,o){let a=-1;for(let c=0;c<e.length;c++){let l=e[c];if(l.from<=r&&l.to>=r){if(l.level==n)return c;(a<0||(o!=0?o<0?l.from<r:l.to>r:e[a].level>l.level))&&(a=c)}}if(a<0)throw new RangeError("Index out of range");return a}}function isolatesEq(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++){let n=s[r],o=e[r];if(n.from!=o.from||n.to!=o.to||n.direction!=o.direction||!isolatesEq(n.inner,o.inner))return!1}return!0}const types=[];function computeCharTypes(s,e,r,n,o){for(let a=0;a<=n.length;a++){let c=a?n[a-1].to:e,l=a<n.length?n[a].from:r,h=a?256:o;for(let d=c,f=h,g=h;d<l;d++){let _=charType(s.charCodeAt(d));_==512?_=f:_==8&&g==4&&(_=16),types[d]=_==4?2:_,_&7&&(g=_),f=_}for(let d=c,f=h,g=h;d<l;d++){let _=types[d];if(_==128)d<l-1&&f==types[d+1]&&f&24?_=types[d]=f:types[d]=256;else if(_==64){let E=d+1;for(;E<l&&types[E]==64;)E++;let A=d&&f==8||E<r&&types[E]==8?g==1?1:8:256;for(let w=d;w<E;w++)types[w]=A;d=E-1}else _==8&&g==1&&(types[d]=1);f=_,_&7&&(g=_)}}}function processBracketPairs(s,e,r,n,o){let a=o==1?2:1;for(let c=0,l=0,h=0;c<=n.length;c++){let d=c?n[c-1].to:e,f=c<n.length?n[c].from:r;for(let g=d,_,E,A;g<f;g++)if(E=Brackets[_=s.charCodeAt(g)])if(E<0){for(let w=l-3;w>=0;w-=3)if(BracketStack[w+1]==-E){let m=BracketStack[w+2],b=m&2?o:m&4?m&1?a:o:0;b&&(types[g]=types[BracketStack[w]]=b),l=w;break}}else{if(BracketStack.length==189)break;BracketStack[l++]=g,BracketStack[l++]=_,BracketStack[l++]=h}else if((A=types[g])==2||A==1){let w=A==o;h=w?0:1;for(let m=l-3;m>=0;m-=3){let b=BracketStack[m+2];if(b&2)break;if(w)BracketStack[m+2]|=2;else{if(b&4)break;BracketStack[m+2]|=4}}}}}function processNeutrals(s,e,r,n){for(let o=0,a=n;o<=r.length;o++){let c=o?r[o-1].to:s,l=o<r.length?r[o].from:e;for(let h=c;h<l;){let d=types[h];if(d==256){let f=h+1;for(;;)if(f==l){if(o==r.length)break;f=r[o++].to,l=o<r.length?r[o].from:e}else if(types[f]==256)f++;else break;let g=a==1,_=(f<e?types[f]:n)==1,E=g==_?g?1:2:n;for(let A=f,w=o,m=w?r[w-1].to:s;A>h;)A==m&&(A=r[--w].from,m=w?r[w-1].to:s),types[--A]=E;h=f}else a=d,h++}}}function emitSpans(s,e,r,n,o,a,c){let l=n%2?2:1;if(n%2==o%2)for(let h=e,d=0;h<r;){let f=!0,g=!1;if(d==a.length||h<a[d].from){let w=types[h];w!=l&&(f=!1,g=w==16)}let _=!f&&l==1?[]:null,E=f?n:n+1,A=h;e:for(;;)if(d<a.length&&A==a[d].from){if(g)break e;let w=a[d];if(!f)for(let m=w.to,b=d+1;;){if(m==r)break e;if(b<a.length&&a[b].from==m)m=a[b++].to;else{if(types[m]==l)break e;break}}if(d++,_)_.push(w);else{w.from>h&&c.push(new BidiSpan(h,w.from,E));let m=w.direction==LTR!=!(E%2);computeSectionOrder(s,m?n+1:n,o,w.inner,w.from,w.to,c),h=w.to}A=w.to}else{if(A==r||(f?types[A]!=l:types[A]==l))break;A++}_?emitSpans(s,h,A,n+1,o,_,c):h<A&&c.push(new BidiSpan(h,A,E)),h=A}else for(let h=r,d=a.length;h>e;){let f=!0,g=!1;if(!d||h>a[d-1].to){let w=types[h-1];w!=l&&(f=!1,g=w==16)}let _=!f&&l==1?[]:null,E=f?n:n+1,A=h;e:for(;;)if(d&&A==a[d-1].to){if(g)break e;let w=a[--d];if(!f)for(let m=w.from,b=d;;){if(m==e)break e;if(b&&a[b-1].to==m)m=a[--b].from;else{if(types[m-1]==l)break e;break}}if(_)_.push(w);else{w.to<h&&c.push(new BidiSpan(w.to,h,E));let m=w.direction==LTR!=!(E%2);computeSectionOrder(s,m?n+1:n,o,w.inner,w.from,w.to,c),h=w.from}A=w.from}else{if(A==e||(f?types[A-1]!=l:types[A-1]==l))break;A--}_?emitSpans(s,A,h,n+1,o,_,c):A<h&&c.push(new BidiSpan(A,h,E)),h=A}}function computeSectionOrder(s,e,r,n,o,a,c){let l=e%2?2:1;computeCharTypes(s,o,a,n,l),processBracketPairs(s,o,a,n,l),processNeutrals(o,a,n,l),emitSpans(s,o,a,e,r,n,c)}function computeOrder(s,e,r){if(!s)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!r.length&&!BidiRE.test(s))return trivialOrder(s.length);if(r.length)for(;s.length>types.length;)types[types.length]=256;let n=[],o=e==LTR?0:1;return computeSectionOrder(s,o,o,r,0,s.length,n),n}function trivialOrder(s){return[new BidiSpan(0,s,0)]}let movedOver="";function moveVisually(s,e,r,n,o){var a;let c=n.head-s.from,l=-1;if(c==0){if(!o||!s.length)return null;e[0].level!=r&&(c=e[0].side(!1,r),l=0)}else if(c==s.length){if(o)return null;let _=e[e.length-1];_.level!=r&&(c=_.side(!0,r),l=e.length-1)}l<0&&(l=BidiSpan.find(e,c,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc));let h=e[l];c==h.side(o,r)&&(h=e[l+=o?1:-1],c=h.side(!o,r));let d=o==(h.dir==r),f=findClusterBreak(s.text,c,d);if(movedOver=s.text.slice(Math.min(c,f),Math.max(c,f)),f!=h.side(o,r))return EditorSelection.cursor(f+s.from,d?-1:1,h.level);let g=l==(o?e.length-1:0)?null:e[l+(o?1:-1)];return!g&&h.level!=r?EditorSelection.cursor(o?s.to:s.from,o?-1:1,r):g&&g.level<h.level?EditorSelection.cursor(g.side(!o,r)+s.from,o?1:-1,g.level):EditorSelection.cursor(f+s.from,o?-1:1,h.level)}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:f})=>f<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let o=-1;this.view.inputState.composing>=0&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?o=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let a=o>-1?findCompositionRange(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:f}=this.hasComposition;n=new ChangedRange(d,f,e.changes.mapPos(d,-1),e.changes.mapPos(f,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(browser.ie||browser.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,l=this.updateDeco(),h=findChangedDeco(c,l,e.changes);return n=ChangedRange.extendWithRanges(n,h),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||o.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&a.push(c.dom);o.updateGaps(a)}updateChildren(e,r,n){let o=n?n.range.addToSet(e.slice()):e,a=this.childCursor(r);for(let c=o.length-1;;c--){let l=c>=0?o[c]:null;if(!l)break;let{fromA:h,toA:d,fromB:f,toB:g}=l,_,E,A,w;if(n&&n.range.fromB<g&&n.range.toB>f){let D=ContentBuilder.build(this.view.state.doc,f,n.range.fromB,this.decorations,this.dynamicDecorationMap),R=ContentBuilder.build(this.view.state.doc,n.range.toB,g,this.decorations,this.dynamicDecorationMap);E=D.breakAtStart,A=D.openStart,w=R.openEnd;let M=this.compositionView(n);R.breakAtStart?M.breakAfter=1:R.content.length&&M.merge(M.length,M.length,R.content[0],!1,R.openStart,0)&&(M.breakAfter=R.content[0].breakAfter,R.content.shift()),D.content.length&&M.merge(0,0,D.content[D.content.length-1],!0,0,D.openEnd)&&D.content.pop(),_=D.content.concat(M).concat(R.content)}else({content:_,breakAtStart:E,openStart:A,openEnd:w}=ContentBuilder.build(this.view.state.doc,f,g,this.decorations,this.dynamicDecorationMap));let{i:m,off:b}=a.findPos(d,1),{i:y,off:x}=a.findPos(h,-1);replaceRange(this,y,x,m,b,_,E,A,w)}n&&this.fixCompositionDOM(n)}compositionView(e){let r=new TextView(e.text.nodeValue);r.flags|=8;for(let{deco:o}of e.marks)r=new MarkView(o,[r],r.length);let n=new LineView;return n.append(r,0),n}fixCompositionDOM(e){let r=(a,c)=>{c.flags|=8|(c.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(c);let l=ContentView.get(a);l&&l!=c&&(l.dom=null),c.setDOM(a)},n=this.childPos(e.range.fromB,1),o=this.children[n.i];r(e.line,o);for(let a=e.marks.length-1;a>=-1;a--)n=o.childPos(n.off,1),o=o.children[n.i],r(a>=0?e.marks[a].node:e.text,o)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,a=!o&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||r||a))return;let c=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(browser.gecko&&l.empty&&!this.hasComposition&&betweenUneditable(h)){let g=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(g,h.node.childNodes[h.offset]||null)),h=d=new DOMPos(g,0),c=!0}let f=this.view.observer.selectionRange;(c||!f.focusNode||!isEquivalentPosition(h.node,h.offset,f.anchorNode,f.anchorOffset)||!isEquivalentPosition(d.node,d.offset,f.focusNode,f.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(f.focusNode)&&inUneditable(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let g=getSelection(this.view.root);if(g)if(l.empty){if(browser.gecko){let _=nextToUneditable(h.node,h.offset);if(_&&_!=3){let E=nearbyTextNode(h.node,h.offset,_==1?1:-1);E&&(h=new DOMPos(E.node,E.offset))}}g.collapse(h.node,h.offset),l.bidiLevel!=null&&g.caretBidiLevel!==void 0&&(g.caretBidiLevel=l.bidiLevel)}else if(g.extend){g.collapse(h.node,h.offset);try{g.extend(d.node,d.offset)}catch{}}else{let _=document.createRange();l.anchor>l.head&&([h,d]=[d,h]),_.setEnd(d.node,d.offset),_.setStart(h.node,h.offset),g.removeAllRanges(),g.addRange(_)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new DOMPos(f.anchorNode,f.anchorOffset),this.impreciseHead=d.precise?null:new DOMPos(f.focusNode,f.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=getSelection(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let c=LineView.find(this,r.head);if(!c)return;let l=c.posAtStart;if(r.head==l||r.head==l+c.length)return;let h=this.coordsAt(r.head,-1),d=this.coordsAt(r.head,1);if(!h||!d||h.bottom>d.top)return;let f=this.domAtPos(r.head+r.assoc);n.collapse(f.node,f.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=r.from&&n.collapse(o,a)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let o=e.offset;!n&&o<r.childNodes.length;o++){let a=ContentView.get(r.childNodes[o]);a instanceof LineView&&(n=a.domAtPos(0))}for(let o=e.offset-1;!n&&o>=0;o--){let a=ContentView.get(r.childNodes[o]);a instanceof LineView&&(n=a.domAtPos(a.length))}return n?new DOMPos(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=ContentView.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let o=this.children[r];if(n<o.length||o instanceof LineView)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,o=0;for(let a=this.length,c=this.children.length-1;c>=0;c--){let l=this.children[c],h=a-l.breakAfter,d=h-l.length;if(h<e)break;d<=e&&(d<e||l.covers(-1))&&(h>e||l.covers(1))&&(!n||l instanceof LineView&&!(n instanceof LineView&&r>=0))&&(n=l,o=d),a=d}return n?n.coordsAt(e-o,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),o=this.children[r];if(!(o instanceof LineView))return null;for(;o.children.length;){let{i:l,off:h}=o.childPos(n,1);for(;;l++){if(l==o.children.length)return null;if((o=o.children[l]).length)break}n=h}if(!(o instanceof TextView))return null;let a=findClusterBreak(o.text,n);if(a==n)return null;let c=textRange(o.dom,n,a).getClientRects();for(let l=0;l<c.length;l++){let h=c[l];if(l==c.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:o}=e,a=this.view.contentDOM.clientWidth,c=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==Direction.LTR;for(let d=0,f=0;f<this.children.length;f++){let g=this.children[f],_=d+g.length;if(_>o)break;if(d>=n){let E=g.dom.getBoundingClientRect();if(r.push(E.height),c){let A=g.dom.lastChild,w=A?clientRectsFor(A):[];if(w.length){let m=w[w.length-1],b=h?m.right-E.left:E.right-m.left;b>l&&(l=b,this.minWidth=a,this.minWidthFrom=d,this.minWidthTo=_)}}}d=_+g.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let a of this.children)if(a instanceof LineView){let c=a.measureTextSize();if(c)return c}let e=document.createElement("div"),r,n,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=clientRectsFor(e.firstChild)[0];r=e.getBoundingClientRect().height,n=a?a.width/27:7,o=a?a.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:o}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new ChildCursor(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,o=0;;o++){let a=o==r.viewports.length?null:r.viewports[o],c=a?a.from-1:this.length;if(c>n){let l=(r.lineBlockAt(c).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,c))}if(!a)break;n=a.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((r,n)=>(this.dynamicDecorationMap[n]=typeof r=="function")?r(this.view):r);for(let r=e.length;r<e.length+3;r++)this.dynamicDecorationMap[r]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),o;if(!n)return;!r.empty&&(o=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,o.left),top:Math.min(n.top,o.top),right:Math.max(n.right,o.right),bottom:Math.max(n.bottom,o.bottom)});let a=getScrollMargins(this.view),c={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:l,offsetHeight:h}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Direction.LTR)}}function betweenUneditable(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function findCompositionNode(s,e){let r=s.observer.selectionRange,n=r.focusNode&&nearbyTextNode(r.focusNode,r.focusOffset,0);if(!n)return null;let o=e-n.offset;return{from:o,to:o+n.node.nodeValue.length,node:n.node}}function findCompositionRange(s,e,r){let n=findCompositionNode(s,r);if(!n)return null;let{node:o,from:a,to:c}=n,l=o.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(n.from,n.to)!=l)return null;let h=e.invertedDesc,d=new ChangedRange(h.mapPos(a),h.mapPos(c),a,c),f=[];for(let g=o.parentNode;;g=g.parentNode){let _=ContentView.get(g);if(_ instanceof MarkView)f.push({node:g,deco:_.mark});else{if(_ instanceof LineView||g.nodeName=="DIV"&&g.parentNode==s.contentDOM)return{range:d,text:o,marks:f,line:g};if(g!=s.contentDOM)f.push({node:g,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(g),tagName:g.tagName.toLowerCase()})});else return null}}}function nearbyTextNode(s,e,r){if(r<=0)for(let n=s,o=e;;){if(n.nodeType==3)return{node:n,offset:o};if(n.nodeType==1&&o>0)n=n.childNodes[o-1],o=maxOffset(n);else break}if(r>=0)for(let n=s,o=e;;){if(n.nodeType==3)return{node:n,offset:o};if(n.nodeType==1&&o<n.childNodes.length&&r>=0)n=n.childNodes[o],o=0;else break}return null}function nextToUneditable(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,r){addRange(e,r,this.changes)}comparePoint(e,r){addRange(e,r,this.changes)}};function findChangedDeco(s,e,r){let n=new DecorationComparator$1;return RangeSet.compare(s,e,r,n),n.changes}function inUneditable(s,e){for(let r=s;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function touchesComposition(s,e){let r=!1;return e&&s.iterChangedRanges((n,o)=>{n<e.to&&o>e.from&&(r=!0)}),r}function groupAt(s,e,r=1){let n=s.charCategorizer(e),o=s.doc.lineAt(e),a=e-o.from;if(o.length==0)return EditorSelection.cursor(e);a==0?r=1:a==o.length&&(r=-1);let c=a,l=a;r<0?c=findClusterBreak(o.text,a,!1):l=findClusterBreak(o.text,a);let h=n(o.text.slice(c,l));for(;c>0;){let d=findClusterBreak(o.text,c,!1);if(n(o.text.slice(d,c))!=h)break;c=d}for(;l<o.length;){let d=findClusterBreak(o.text,l);if(n(o.text.slice(l,d))!=h)break;l=d}return EditorSelection.range(c+o.from,l+o.from)}function getdx(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function getdy(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function yOverlap(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function upTop(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function upBot(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function domPosAtCoords(s,e,r){let n,o,a,c,l=!1,h,d,f,g;for(let A=s.firstChild;A;A=A.nextSibling){let w=clientRectsFor(A);for(let m=0;m<w.length;m++){let b=w[m];o&&yOverlap(o,b)&&(b=upTop(upBot(b,o.bottom),o.top));let y=getdx(e,b),x=getdy(r,b);if(y==0&&x==0)return A.nodeType==3?domPosInText(A,e,r):domPosAtCoords(A,e,r);if(!n||c>x||c==x&&a>y){n=A,o=b,a=y,c=x;let D=x?r<b.top?-1:1:y?e<b.left?-1:1:0;l=!D||(D>0?m<w.length-1:m>0)}y==0?r>b.bottom&&(!f||f.bottom<b.bottom)?(h=A,f=b):r<b.top&&(!g||g.top>b.top)&&(d=A,g=b):f&&yOverlap(f,b)?f=upBot(f,b.bottom):g&&yOverlap(g,b)&&(g=upTop(g,b.top))}}if(f&&f.bottom>=r?(n=h,o=f):g&&g.top<=r&&(n=d,o=g),!n)return{node:s,offset:0};let _=Math.max(o.left,Math.min(o.right,e));if(n.nodeType==3)return domPosInText(n,_,r);if(l&&n.contentEditable!="false")return domPosAtCoords(n,_,r);let E=Array.prototype.indexOf.call(s.childNodes,n)+(e>=(o.left+o.right)/2?1:0);return{node:s,offset:E}}function domPosInText(s,e,r){let n=s.nodeValue.length,o=-1,a=1e9,c=0;for(let l=0;l<n;l++){let h=textRange(s,l,l+1).getClientRects();for(let d=0;d<h.length;d++){let f=h[d];if(f.top==f.bottom)continue;c||(c=e-f.left);let g=(f.top>r?f.top-r:r-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&g<a){let _=e>=(f.left+f.right)/2,E=_;if((browser.chrome||browser.gecko)&&textRange(s,l).getBoundingClientRect().left==f.right&&(E=!_),g<=0)return{node:s,offset:l+(E?1:0)};o=l+(E?1:0),a=g}}}return{node:s,offset:o>-1?o:c>0?s.nodeValue.length:0}}function posAtCoords(s,e,r,n=-1){var o,a;let c=s.contentDOM.getBoundingClientRect(),l=c.top+s.viewState.paddingTop,h,{docHeight:d}=s.viewState,{x:f,y:g}=e,_=g-l;if(_<0)return 0;if(_>d)return s.state.doc.length;for(let D=s.viewState.heightOracle.textHeight/2,R=!1;h=s.elementAtHeight(_),h.type!=BlockType.Text;)for(;_=n>0?h.bottom+D:h.top-D,!(_>=0&&_<=d);){if(R)return r?null:0;R=!0,n=-n}g=l+_;let E=h.from;if(E<s.viewport.from)return s.viewport.from==0?0:r?null:posAtCoordsImprecise(s,c,h,f,g);if(E>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:r?null:posAtCoordsImprecise(s,c,h,f,g);let A=s.dom.ownerDocument,w=s.root.elementFromPoint?s.root:A,m=w.elementFromPoint(f,g);m&&!s.contentDOM.contains(m)&&(m=null),m||(f=Math.max(c.left+1,Math.min(c.right-1,f)),m=w.elementFromPoint(f,g),m&&!s.contentDOM.contains(m)&&(m=null));let b,y=-1;if(m&&((o=s.docView.nearest(m))===null||o===void 0?void 0:o.isEditable)!=!1){if(A.caretPositionFromPoint){let D=A.caretPositionFromPoint(f,g);D&&({offsetNode:b,offset:y}=D)}else if(A.caretRangeFromPoint){let D=A.caretRangeFromPoint(f,g);D&&({startContainer:b,startOffset:y}=D,(!s.contentDOM.contains(b)||browser.safari&&isSuspiciousSafariCaretResult(b,y,f)||browser.chrome&&isSuspiciousChromeCaretResult(b,y,f))&&(b=void 0))}}if(!b||!s.docView.dom.contains(b)){let D=LineView.find(s.docView,E);if(!D)return _>h.top+h.height/2?h.to:h.from;({node:b,offset:y}=domPosAtCoords(D.dom,f,g))}let x=s.docView.nearest(b);if(!x)return null;if(x.isWidget&&((a=x.dom)===null||a===void 0?void 0:a.nodeType)==1){let D=x.dom.getBoundingClientRect();return e.y<D.top||e.y<=D.bottom&&e.x<=(D.left+D.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(b,y)+x.posAtStart}function posAtCoordsImprecise(s,e,r,n,o){let a=Math.round((n-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&r.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,h=Math.floor((o-r.top-(s.defaultLineHeight-l)*.5)/l);a+=h*s.viewState.heightOracle.lineLength}let c=s.state.sliceDoc(r.from,r.to);return r.from+findColumn(c,a,s.state.tabSize)}function isSuspiciousSafariCaretResult(s,e,r){let n;if(s.nodeType!=3||e!=(n=s.nodeValue.length))return!1;for(let o=s.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(s,n-1,n).getBoundingClientRect().left>r}function isSuspiciousChromeCaretResult(s,e,r){if(e!=0)return!1;for(let o=s;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let n=s.nodeType==1?s.getBoundingClientRect():textRange(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function blockAt(s,e){let r=s.lineBlockAt(e);if(Array.isArray(r.type)){for(let n of r.type)if(n.to>e||n.to==e&&(n.to==r.to||n.type==BlockType.Text))return n}return r}function moveToLineBoundary(s,e,r,n){let o=blockAt(s,e.head),a=!n||o.type!=BlockType.Text||!(s.lineWrapping||o.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(a){let c=s.dom.getBoundingClientRect(),l=s.textDirectionAt(o.from),h=s.posAtCoords({x:r==(l==Direction.LTR)?c.right-1:c.left+1,y:(a.top+a.bottom)/2});if(h!=null)return EditorSelection.cursor(h,r?-1:1)}return EditorSelection.cursor(r?o.to:o.from,r?-1:1)}function moveByChar(s,e,r,n){let o=s.state.doc.lineAt(e.head),a=s.bidiSpans(o),c=s.textDirectionAt(o.from);for(let l=e,h=null;;){let d=moveVisually(o,a,c,l,r),f=movedOver;if(!d){if(o.number==(r?s.state.doc.lines:1))return l;f=`
`,o=s.state.doc.line(o.number+(r?1:-1)),a=s.bidiSpans(o),d=EditorSelection.cursor(r?o.from:o.to)}if(h){if(!h(f))return l}else{if(!n)return d;h=n(f)}l=d}}function byGroup(s,e,r){let n=s.state.charCategorizer(e),o=n(r);return a=>{let c=n(a);return o==CharCategory.Space&&(o=c),o==c}}function moveVertically(s,e,r,n){let o=e.head,a=r?1:-1;if(o==(r?s.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let c=e.goalColumn,l,h=s.contentDOM.getBoundingClientRect(),d=s.coordsAtPos(o,e.assoc||-1),f=s.documentTop;if(d)c==null&&(c=d.left-h.left),l=a<0?d.top:d.bottom;else{let E=s.viewState.lineBlockAt(o);c==null&&(c=Math.min(h.right-h.left,s.defaultCharacterWidth*(o-E.from))),l=(a<0?E.top:E.bottom)+f}let g=h.left+c,_=n??s.viewState.heightOracle.textHeight>>1;for(let E=0;;E+=10){let A=l+(_+E)*a,w=posAtCoords(s,{x:g,y:A},!1,a);if(A<h.top||A>h.bottom||(a<0?w<o:w>o)){let m=s.docView.coordsForChar(w),b=!m||A<m.top?-1:1;return EditorSelection.cursor(w,b,void 0,c)}}}function skipAtomicRanges(s,e,r){for(;;){let n=0;for(let o of s)o.between(e-1,e+1,(a,c,l)=>{if(e>a&&e<c){let h=n||r||(e-a<c-e?-1:1);e=h<0?a:c,n=h}});if(!n)return e}}function skipAtoms(s,e,r){let n=skipAtomicRanges(s.state.facet(atomicRanges).map(o=>o(s)),r.from,e.head>r.from?-1:1);return n==r.from?r:EditorSelection.cursor(n,n<r.from?1:-1)}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,r){let n=this.handlers[e];if(n){for(let o of n.observers)o(this.view,r);for(let o of n.handlers){if(r.defaultPrevented)break;if(o(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=computeHandlers(e),n=this.handlers,o=this.view.contentDOM;for(let a in r)if(a!="scroll"){let c=!r[a].handlers.length,l=n[a];l&&c!=!l.handlers.length&&(o.removeEventListener(a,this.handleEvent),l=null),l||o.addEventListener(a,this.handleEvent,{passive:c})}for(let a in n)a!="scroll"&&!r[a]&&o.removeEventListener(a,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=PendingKeys.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(s,e){return(r,n)=>{try{return e.call(s,n,r)}catch(o){logException(r.state,o)}}}function computeHandlers(s){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of s){let o=n.spec;if(o&&o.domEventHandlers)for(let a in o.domEventHandlers){let c=o.domEventHandlers[a];c&&r(a).handlers.push(bindHandler(n.value,c))}if(o&&o.domEventObservers)for(let a in o.domEventObservers){let c=o.domEventObservers[a];c&&r(a).observers.push(bindHandler(n.value,c))}}for(let n in handlers)r(n).handlers.push(handlers[n]);for(let n in observers)r(n).observers.push(observers[n]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(s){return Math.max(0,s)*.7+8}function dist(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class MouseSelection{constructor(e,r,n,o){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=scrollableParent(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,r),this.dragging=isInPrimarySelection(e,r)&&getClickType(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var r;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,o=0,a=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},c=getScrollMargins(this.view);e.clientX-c.left<=a.left+dragScrollMargin?n=-dragScrollSpeed(a.left-e.clientX):e.clientX+c.right>=a.right-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-a.right)),e.clientY-c.top<=a.top+dragScrollMargin?o=-dragScrollSpeed(a.top-e.clientY):e.clientY+c.bottom>=a.bottom-dragScrollMargin&&(o=dragScrollSpeed(e.clientY-a.bottom)),this.setScrollSpeed(n,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let r=null;for(let n=0;n<e.ranges.length;n++){let o=e.ranges[n],a=null;if(o.empty){let c=skipAtomicRanges(this.atoms,o.from,0);c!=o.from&&(a=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,o.from,-1),l=skipAtomicRanges(this.atoms,o.to,1);(c!=o.from||l!=o.to)&&(a=EditorSelection.range(o.from==o.anchor?c:l,o.from==o.head?c:l))}a&&(r||(r=e.ranges.slice()),r[n]=a)}return r?EditorSelection.create(r,e.mainIndex):e}select(e){let{view:r}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection)||n.main.assoc!=r.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(s,e){let r=s.state.facet(clickAddsSelectionRange);return r.length?r[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(s,e){let r=s.state.facet(dragMovesSelection$1);return r.length?r[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(s,e){let{main:r}=s.state.selection;if(r.empty)return!1;let n=getSelection(s.root);if(!n||n.rangeCount==0)return!0;let o=n.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let c=o[a];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=s.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=ContentView.get(r))&&n.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(s){let e=s.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{s.focus(),r.remove(),doPaste(s,r.value)},50)}function doPaste(s,e){let{state:r}=s,n,o=1,a=r.toText(e),c=a.lines==r.selection.ranges.length;if(lastLinewiseCopy!=null&&r.selection.ranges.every(h=>h.empty)&&lastLinewiseCopy==a.toString()){let h=-1;n=r.changeByRange(d=>{let f=r.doc.lineAt(d.from);if(f.from==h)return{range:d};h=f.from;let g=r.toText((c?a.line(o++).text:e)+r.lineBreak);return{changes:{from:f.from,insert:g},range:EditorSelection.cursor(d.from+g.length)}})}else c?n=r.changeByRange(h=>{let d=a.line(o++);return{changes:{from:h.from,to:h.to,insert:d.text},range:EditorSelection.cursor(h.from+d.length)}}):n=r.replaceSelection(a);s.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};handlers.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now()),!1);observers.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of s.state.facet(mouseSelectionStyle))if(r=n(s,e),r)break;if(!r&&e.button==0&&(r=basicMouseSelection(s,e)),r){let n=!s.hasFocus;s.inputState.startMouseSelection(new MouseSelection(s,e,r,n)),n&&s.observer.ignore(()=>focusPreventScroll(s.contentDOM));let o=s.inputState.mouseSelection;if(o)return o.start(e),o.dragging===!1}return!1};function rangeForClick(s,e,r,n){if(n==1)return EditorSelection.cursor(e,r);if(n==2)return groupAt(s.state,e,r);{let o=LineView.find(s.docView,e),a=s.state.doc.lineAt(o?o.posAtEnd:e),c=o?o.posAtStart:a.from,l=o?o.posAtEnd:a.to;return l<s.state.doc.length&&l==a.to&&l++,EditorSelection.range(c,l)}}let insideY=(s,e)=>s>=e.top&&s<=e.bottom,inside=(s,e,r)=>insideY(e,r)&&s>=r.left&&s<=r.right;function findPositionSide(s,e,r,n){let o=LineView.find(s.docView,e);if(!o)return 1;let a=e-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let c=o.coordsAt(a,-1);if(c&&inside(r,n,c))return-1;let l=o.coordsAt(a,1);return l&&inside(r,n,l)?1:c&&insideY(n,c)?-1:1}function queryPos(s,e){let r=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:findPositionSide(s,r,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(s){if(!BadMouseDetail)return s.detail;let e=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=s,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||r>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(s,e){let r=queryPos(s,e),n=getClickType(e),o=s.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),o=o.map(a.changes))},get(a,c,l){let h=queryPos(s,a),d,f=rangeForClick(s,h.pos,h.bias,n);if(r.pos!=h.pos&&!c){let g=rangeForClick(s,r.pos,r.bias,n),_=Math.min(g.from,f.from),E=Math.max(g.to,f.to);f=_<f.from?EditorSelection.range(_,E):EditorSelection.range(E,_)}return c?o.replaceRange(o.main.extend(f.from,f.to)):l&&n==1&&o.ranges.length>1&&(d=removeRangeAround(o,h.pos))?d:l?o.addRange(f):EditorSelection.create([f])}}}function removeRangeAround(s,e){for(let r=0;r<s.ranges.length;r++){let{from:n,to:o}=s.ranges[r];if(n<=e&&o>=e)return EditorSelection.create(s.ranges.slice(0,r).concat(s.ranges.slice(r+1)),s.mainIndex==r?0:s.mainIndex-(s.mainIndex>r?1:0))}return null}handlers.dragstart=(s,e)=>{let{selection:{main:r}}=s.state;if(e.target.draggable){let o=s.docView.nearest(e.target);if(o&&o.isWidget){let a=o.posAtStart,c=a+o.length;(a>=r.to||c<=r.from)&&(r=EditorSelection.range(a,c))}}let{inputState:n}=s;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(r.from,r.to)),e.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=s=>(s.inputState.draggedContent=null,!1);function dropText(s,e,r,n){if(!r)return;let o=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=s.inputState,c=n&&a&&dragMovesSelection(s,e)?{from:a.from,to:a.to}:null,l={from:o,insert:r},h=s.state.changes(c?[c,l]:l);s.focus(),s.dispatch({changes:h,selection:{anchor:h.mapPos(o,-1),head:h.mapPos(o,1)},userEvent:c?"move.drop":"input.drop"}),s.inputState.draggedContent=null}handlers.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),o=0,a=()=>{++o==r.length&&dropText(s,e,n.filter(c=>c!=null).join(s.state.lineBreak),!1)};for(let c=0;c<r.length;c++){let l=new FileReader;l.onerror=a,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[c]=l.result),a()},l.readAsText(r[c])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return dropText(s,e,n,!0),!0}return!1};handlers.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let r=brokenClipboardAPI?null:e.clipboardData;return r?(doPaste(s,r.getData("text/plain")||r.getData("text/uri-text")),!0):(capturePaste(s),!1)};function captureCopy(s,e){let r=s.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),s.focus()},50)}function copiedRange(s){let e=[],r=[],n=!1;for(let o of s.selection.ranges)o.empty||(e.push(s.sliceDoc(o.from,o.to)),r.push(o));if(!e.length){let o=-1;for(let{from:a}of s.selection.ranges){let c=s.doc.lineAt(a);c.number>o&&(e.push(c.text),r.push({from:c.from,to:Math.min(s.doc.length,c.to+1)})),o=c.number}n=!0}return{text:e.join(s.lineBreak),ranges:r,linewise:n}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(s,e)=>{let{text:r,ranges:n,linewise:o}=copiedRange(s.state);if(!r&&!o)return!1;lastLinewiseCopy=o?r:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=brokenClipboardAPI?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",r),!0):(captureCopy(s,r),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(s,e){let r=[];for(let n of s.facet(focusChangeEffect)){let o=n(s,e);o&&r.push(o)}return r?s.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let r=focusChangeTransaction(s.state,e);r?s.dispatch(r):s.update([])}},10)}observers.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),updateForFocusChange(s)};observers.blur=s=>{s.observer.clearSelectionRange(),updateForFocusChange(s)};observers.compositionstart=observers.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)};observers.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,browser.chrome&&browser.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50)};observers.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(s,e)=>{var r;let n;if(browser.chrome&&browser.android&&(n=PendingKeys.find(o=>o.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(s){appliedFirefoxHack.has(s)||(appliedFirefoxHack.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text$1.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let o=e[n];o<0?n++:this.heightSamples[Math.floor(o*10)]||(r=!0,this.heightSamples[Math.floor(o*10)]=!0)}return r}refresh(e,r,n,o,a,c){let l=wrappingWhiteSpace.indexOf(e)>-1,h=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=r,this.charWidth=n,this.textHeight=o,this.lineLength=a,h){this.heightSamples={};for(let d=0;d<c.length;d++){let f=c[d];f<0?d++:this.heightSamples[Math.floor(f*10)]=!0}}return h}}class MeasuredHeights{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,r,n,o,a){this.from=e,this.length=r,this.top=n,this.height=o,this._content=a}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var QueryType$1=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,r){this.height!=r&&(Math.abs(this.height-r)>Epsilon&&(e.heightChanged=!0),this.height=r)}replace(e,r,n){return HeightMap.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,o){let a=this,c=n.doc;for(let l=o.length-1;l>=0;l--){let{fromA:h,toA:d,fromB:f,toB:g}=o[l],_=a.lineAt(h,QueryType$1.ByPosNoHeight,n.setDoc(r),0,0),E=_.to>=d?_:a.lineAt(d,QueryType$1.ByPosNoHeight,n,0,0);for(g+=E.to-d,d=E.to;l>0&&_.from<=o[l-1].toA;)h=o[l-1].fromA,f=o[l-1].fromB,l--,h<_.from&&(_=a.lineAt(h,QueryType$1.ByPosNoHeight,n,0,0));f+=_.from-h,h=_.from;let A=NodeBuilder.build(n.setDoc(c),e,f,g);a=a.replace(h,d,A)}return a.updateHeight(n,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,o=0,a=0;for(;;)if(r==n)if(o>a*2){let l=e[r-1];l.break?e.splice(--r,1,l.left,null,l.right):e.splice(--r,1,l.left,l.right),n+=1+l.break,o-=l.size}else if(a>o*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,a-=l.size}else break;else if(o<a){let l=e[r++];l&&(o+=l.size)}else{let l=e[--n];l&&(a+=l.size)}let c=0;return e[r-1]==null?(c=1,r--):e[r]==null&&(c=1,n++),new HeightMapBranch(HeightMap.of(e.slice(0,r)),c,HeightMap.of(e.slice(n)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,o){return new BlockInfo(o,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,o,a){return this.blockAt(0,n,o,a)}forEachLine(e,r,n,o,a,c){e<=a+this.length&&r>=a&&c(this.blockAt(0,n,o,a))}updateHeight(e,r=0,n=!1,o){return o&&o.from<=r&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,o){return new BlockInfo(o,this.length,n,this.height,this.breaks)}replace(e,r,n){let o=n[0];return n.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(n)}updateHeight(e,r=0,n=!1,o){return o&&o.from<=r&&o.more?this.setHeight(e,o.heights[o.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,o=e.doc.lineAt(r+this.length).number,a=o-n+1,c,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*a);c=h/a,this.length>a+1&&(l=(this.height-h)/(this.length-a-1))}else c=this.height/a;return{firstLine:n,lastLine:o,perLine:c,perChar:l}}blockAt(e,r,n,o){let{firstLine:a,lastLine:c,perLine:l,perChar:h}=this.heightMetrics(r,o);if(r.lineWrapping){let d=o+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),f=r.doc.lineAt(d),g=l+f.length*h,_=Math.max(n,e-g/2);return new BlockInfo(f.from,f.length,_,g,0)}else{let d=Math.max(0,Math.min(c-a,Math.floor((e-n)/l))),{from:f,length:g}=r.doc.line(a+d);return new BlockInfo(f,g,n+l*d,l,0)}}lineAt(e,r,n,o,a){if(r==QueryType$1.ByHeight)return this.blockAt(e,n,o,a);if(r==QueryType$1.ByPosNoHeight){let{from:E,to:A}=n.doc.lineAt(e);return new BlockInfo(E,A-E,0,0,0)}let{firstLine:c,perLine:l,perChar:h}=this.heightMetrics(n,a),d=n.doc.lineAt(e),f=l+d.length*h,g=d.number-c,_=o+l*g+h*(d.from-a-g);return new BlockInfo(d.from,d.length,Math.max(o,Math.min(_,o+this.height-f)),f,0)}forEachLine(e,r,n,o,a,c){e=Math.max(e,a),r=Math.min(r,a+this.length);let{firstLine:l,perLine:h,perChar:d}=this.heightMetrics(n,a);for(let f=e,g=o;f<=r;){let _=n.doc.lineAt(f);if(f==e){let A=_.number-l;g+=h*A+d*(e-a-A)}let E=h+d*_.length;c(new BlockInfo(_.from,_.length,g,E,0)),g+=E,f=_.to+1}}replace(e,r,n){let o=this.length-r;if(o>0){let a=n[n.length-1];a instanceof HeightMapGap?n[n.length-1]=new HeightMapGap(a.length+o):n.push(null,new HeightMapGap(o-1))}if(e>0){let a=n[0];a instanceof HeightMapGap?n[0]=new HeightMapGap(e+a.length):n.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(n)}decomposeLeft(e,r){r.push(new HeightMapGap(e-1),null)}decomposeRight(e,r){r.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,r=0,n=!1,o){let a=r+this.length;if(o&&o.from<=r+this.length&&o.more){let c=[],l=Math.max(r,o.from),h=-1;for(o.from>r&&c.push(new HeightMapGap(o.from-r-1).updateHeight(e,r));l<=a&&o.more;){let f=e.doc.lineAt(l).length;c.length&&c.push(null);let g=o.heights[o.index++];h==-1?h=g:Math.abs(g-h)>=Epsilon&&(h=-2);let _=new HeightMapText(f,g);_.outdated=!1,c.push(_),l+=f+1}l<=a&&c.push(null,new HeightMapGap(a-l).updateHeight(e,l));let d=HeightMap.of(c);return(h<0||Math.abs(d.height-this.height)>=Epsilon||Math.abs(h-this.heightMetrics(e,r).perLine)>=Epsilon)&&(e.heightChanged=!0),d}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,o){let a=n+this.left.height;return e<a?this.left.blockAt(e,r,n,o):this.right.blockAt(e,r,a,o+this.left.length+this.break)}lineAt(e,r,n,o,a){let c=o+this.left.height,l=a+this.left.length+this.break,h=r==QueryType$1.ByHeight?e<c:e<l,d=h?this.left.lineAt(e,r,n,o,a):this.right.lineAt(e,r,n,c,l);if(this.break||(h?d.to<l:d.from>l))return d;let f=r==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return h?d.join(this.right.lineAt(l,f,n,c,l)):this.left.lineAt(l,f,n,o,a).join(d)}forEachLine(e,r,n,o,a,c){let l=o+this.left.height,h=a+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,r,n,o,a,c),r>=h&&this.right.forEachLine(e,r,n,l,h,c);else{let d=this.lineAt(h,QueryType$1.ByPos,n,o,a);e<d.from&&this.left.forEachLine(e,d.from-1,n,o,a,c),d.to>=e&&d.from<=r&&c(d),r>d.to&&this.right.forEachLine(d.to+1,r,n,l,h,c)}}replace(e,r,n){let o=this.left.length+this.break;if(r<o)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,r-o,n));let a=[];e>0&&this.decomposeLeft(e,a);let c=a.length;for(let l of n)a.push(l);if(e>0&&mergeGaps(a,c-1),r<this.length){let l=a.length;this.decomposeRight(r,a),mergeGaps(a,l)}return HeightMap.of(a)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,o=n+this.break;if(e>=o)return this.right.decomposeRight(e-o,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<o&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?HeightMap.of(this.break?[e,null,r]:[e,r]):(this.left=e,this.right=r,this.height=e.height+r.height,this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,o){let{left:a,right:c}=this,l=r+a.length+this.break,h=null;return o&&o.from<=r+a.length&&o.more?h=a=a.updateHeight(e,r,n,o):a.updateHeight(e,r,n),o&&o.from<=l+c.length&&o.more?h=c=c.updateHeight(e,l,n,o):c.updateHeight(e,l,n),h?this.balanced(a,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(s,e){let r,n;s[e]==null&&(r=s[e-1])instanceof HeightMapGap&&(n=s[e+1])instanceof HeightMapGap&&s.splice(e-1,3,new HeightMapGap(r.length+1+n.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let c=r-e;n.block?this.addBlock(new HeightMapBlock(c,o,n)):(c||a||o>=relevantWidgetHeight)&&this.addLineDeco(o,a,c)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new HeightMapGap(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let r=new HeightMapText(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,n),n+=o?o.length:1;return this.nodes}static build(e,r,n,o){let a=new NodeBuilder(n,e);return RangeSet.spans(r,n,o,a,0),a.finish(n)}}function heightRelevantDecoChanges(s,e,r){let n=new DecorationComparator;return RangeSet.compare(s,e,r,n,0),n.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,o){(e<r||n&&n.heightRelevant||o&&o.heightRelevant)&&addRange(e,r,this.changes,5)}}function visiblePixelRange(s,e){let r=s.getBoundingClientRect(),n=s.ownerDocument,o=n.defaultView||window,a=Math.max(0,r.left),c=Math.min(o.innerWidth,r.right),l=Math.max(0,r.top),h=Math.min(o.innerHeight,r.bottom);for(let d=s.parentNode;d&&d!=n.body;)if(d.nodeType==1){let f=d,g=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&g.overflow!="visible"){let _=f.getBoundingClientRect();a=Math.max(a,_.left),c=Math.min(c,_.right),l=Math.max(l,_.top),h=d==s.parentNode?_.bottom:Math.min(h,_.bottom)}d=g.position=="absolute"||g.position=="fixed"?f.offsetParent:f.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:a-r.left,right:Math.max(a,c)-r.left,top:l-(r.top+e),bottom:Math.max(l,h)-(r.top+e)}}function fullPixelRange(s,e){let r=s.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class LineGap{constructor(e,r,n){this.from=e,this.to=r,this.size=n}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let o=e[n],a=r[n];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e,r){return Decoration.replace({widget:new LineGapWidget(this.size*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(contentAttributes).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(r),this.stateDeco=e.facet(decorations).filter(n=>typeof n!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let o=n?r.head:r.anchor;if(!e.some(({from:a,to:c})=>o>=a&&o<=c)){let{from:a,to:c}=this.lineBlockAt(o);e.push(new Viewport(a,c))}}this.viewports=e.sort((n,o)=>n.from-o.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(f=>typeof f!="function");let o=e.changedRanges,a=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(n,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=c&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<h.from||r.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,r));let d=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),d&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),o=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(a),l=r.getBoundingClientRect(),h=c||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,f=0;if(l.width&&l.height){let D=l.width/r.offsetWidth,R=l.height/r.offsetHeight;(D>.995&&D<1.005||!isFinite(D)||Math.abs(l.width-r.offsetWidth)<1)&&(D=1),(R>.995&&R<1.005||!isFinite(R)||Math.abs(l.height-r.offsetHeight)<1)&&(R=1),(this.scaleX!=D||this.scaleY!=R)&&(this.scaleX=D,this.scaleY=R,d|=8,c=h=!0)}let g=(parseInt(n.paddingTop)||0)*this.scaleY,_=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=_)&&(this.paddingTop=g,this.paddingBottom=_,d|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8);let E=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=E&&(this.scrollAnchorHeight=-1,this.scrollTop=E),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let A=(this.printing?fullPixelRange:visiblePixelRange)(r,this.paddingTop),w=A.top-this.pixelViewport.top,m=A.bottom-this.pixelViewport.bottom;this.pixelViewport=A;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let y=l.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=8),h){let D=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(D)&&(c=!0),c||o.lineWrapping&&Math.abs(y-this.contentDOMWidth)>o.charWidth){let{lineHeight:R,charWidth:M,textHeight:L}=e.docView.measureTextSize();c=R>0&&o.refresh(a,R,M,L,y/M,D),c&&(e.docView.minWidth=0,d|=8)}w>0&&m>0?f=Math.max(w,m):w<0&&m<0&&(f=Math.min(w,m)),o.heightChanged=!1;for(let R of this.viewports){let M=R.from==this.viewport.from?D:e.docView.measureVisibleLineHeights(R);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,c,new MeasuredHeights(R.from,M))}o.heightChanged&&(d|=2)}let x=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(f,this.scrollTarget)),this.updateForViewport(),(d&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:c,visibleBottom:l}=this,h=new Viewport(o.lineAt(c-n*1e3,QueryType$1.ByHeight,a,0,0).from,o.lineAt(l+(1-n)*1e3,QueryType$1.ByHeight,a,0,0).to);if(r){let{head:d}=r.range;if(d<h.from||d>h.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=o.lineAt(d,QueryType$1.ByPos,a,0,0),_;r.y=="center"?_=(g.top+g.bottom)/2-f/2:r.y=="start"||r.y=="nearest"&&d<h.from?_=g.top:_=g.bottom-f,h=new Viewport(o.lineAt(_-1e3/2,QueryType$1.ByHeight,a,0,0).from,o.lineAt(_+f+1e3/2,QueryType$1.ByHeight,a,0,0).to)}}return h}mapViewport(e,r){let n=r.mapPos(e.from,-1),o=r.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:l}=this;return(e==0||o<=c-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||a>=l+Math.max(10,Math.min(n,250)))&&o>c-2*1e3&&a<l+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let o of e)r.touchesRange(o.from,o.to)||n.push(new LineGap(r.mapPos(o.from),r.mapPos(o.to),o.size));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,a=o>>1,c=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!n)return[];let l=[],h=(d,f,g,_)=>{if(f-d<a)return;let E=this.state.selection.main,A=[E.from];E.empty||A.push(E.to);for(let m of A)if(m>d&&m<f){h(d,m-10,g,_),h(m+10,f,g,_);return}let w=find(e,m=>m.from>=g.from&&m.to<=g.to&&Math.abs(m.from-d)<a&&Math.abs(m.to-f)<a&&!A.some(b=>m.from<b&&m.to>b));if(!w){if(f<g.to&&r&&n&&r.visibleRanges.some(m=>m.from<=f&&m.to>=f)){let m=r.moveToLineBoundary(EditorSelection.cursor(f),!1,!0).head;m>d&&(f=m)}w=new LineGap(d,f,this.gapSize(g,d,f,_))}l.push(w)};for(let d of this.viewportLines){if(d.length<c)continue;let f=lineStructure(d.from,d.to,this.stateDeco);if(f.total<c)continue;let g=this.scrollTarget?this.scrollTarget.range.head:null,_,E;if(n){let A=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(g!=null){let b=findFraction(f,g),y=((this.visibleBottom-this.visibleTop)/2+A)/d.height;w=b-y,m=b+y}else w=(this.visibleTop-d.top-A)/d.height,m=(this.visibleBottom-d.top+A)/d.height;_=findPosition(f,w),E=findPosition(f,m)}else{let A=f.total*this.heightOracle.charWidth,w=o*this.heightOracle.charWidth,m,b;if(g!=null){let y=findFraction(f,g),x=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/A;m=y-x,b=y+x}else m=(this.pixelViewport.left-w)/A,b=(this.pixelViewport.right+w)/A;_=findPosition(f,m),E=findPosition(f,b)}_>d.from&&h(d.from,_,d,f),E<d.to&&h(E,d.to,d,f)}return l}gapSize(e,r,n,o){let a=findFraction(o,n)-findFraction(o,r);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(o,a){r.push({from:o,to:a})},point(){}},20);let n=r.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=r[a].from||o.to!=r[a].to);return this.visibleRanges=r,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,r){this.from=e,this.to=r}}function lineStructure(s,e,r){let n=[],o=s,a=0;return RangeSet.spans(r,s,e,{span(){},point(c,l){c>o&&(n.push({from:o,to:c}),a+=c-o),o=l}},20),o<e&&(n.push({from:o,to:e}),a+=e-o),{total:a,ranges:n}}function findPosition({total:s,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(s*r);for(let o=0;;o++){let{from:a,to:c}=e[o],l=c-a;if(n<=l)return a+n;n-=l}}function findFraction(s,e){let r=0;for(let{from:n,to:o}of s.ranges){if(e<=o){r+=e-n;break}r+=o-n}return r/s.total}function find(s,e){for(let r of s)if(e(r))return r}const IdScaler={toDOM(s){return s},fromDOM(s){return s},scale:1};class BigScaler{constructor(e,r,n){let o=0,a=0,c=0;this.viewports=n.map(({from:l,to:h})=>{let d=r.lineAt(l,QueryType$1.ByPos,e,0,0).top,f=r.lineAt(h,QueryType$1.ByPos,e,0,0).bottom;return o+=f-d,{from:l,to:h,top:d,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(r.height-o);for(let l of this.viewports)l.domTop=c+(l.top-a)*this.scale,c=l.domBottom=l.domTop+(l.bottom-l.top),a=l.bottom}toDOM(e){for(let r=0,n=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.top)return o+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,o=a.domBottom}}fromDOM(e){for(let r=0,n=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.domTop)return n+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,o=a.domBottom}}}function scaleBlock(s,e){if(e.scale==1)return s;let r=e.toDOM(s.top),n=e.toDOM(s.bottom);return new BlockInfo(s.from,s.length,r,n-r,Array.isArray(s._content)?s._content.map(o=>scaleBlock(o,e)):s._content)}const theme=Facet.define({combine:s=>s.join(" ")}),darkTheme=Facet.define({combine:s=>s.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(s,e,r){return new StyleModule(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,o=>{if(o=="&")return s;if(!r||!r[o])throw new RangeError(`Unsupported selector: ${o}`);return r[o]}):s+" "+n}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="￿";class DOMReader{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let o=e;;){this.findPointBefore(n,o);let a=this.text.length;this.readNode(o);let c=o.nextSibling;if(c==r)break;let l=ContentView.get(o),h=ContentView.get(c);(l&&h?l.breakAfter:(l?l.breakAfter:isBlockElement(o))||isBlockElement(c)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>a)&&this.lineBreak(),o=c}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,c=1,l;if(this.lineSeparator?(a=r.indexOf(this.lineSeparator,n),c=this.lineSeparator.length):(l=o.exec(r))&&(a=l.index,c=l[0].length),this.append(r.slice(n,a<0?r.length:a)),a<0)break;if(this.lineBreak(),c>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=c-1);n=a+c}}readNode(e){if(e.cmIgnore)return;let r=ContentView.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let o=n.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(isAtEnd(e,n.node,n.offset)?r:0))}}function isAtEnd(s,e,r){for(;;){if(!e||r<maxOffset(e))return!1;if(e==s)return!0;r=domIndex(e)+1,e=e.parentNode}}function isBlockElement(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}let DOMPoint$1=class{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}};class DOMChange{constructor(e,r,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let l=a||c?[]:selectionPoints(e),h=new DOMReader(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=selectionFromPoints(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!contains(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=c&&c.node==l.anchorNode&&c.offset==l.anchorOffset||!contains(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=EditorSelection.single(d,h)}}}function applyDOMChange(s,e){let r,{newSel:n}=e,o=s.state.selection.main,a=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:l}=e.bounds,h=o.from,d=null;(a===8||browser.android&&e.text.length<l-c)&&(h=o.to,d="end");let f=findDiff(s.state.doc.sliceString(c,l,LineBreakPlaceholder),e.text,h-c,d);f&&(browser.chrome&&a==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&f.toB--,r={from:c+f.from,to:c+f.toA,insert:Text$1.of(e.text.slice(f.from,f.toB).split(LineBreakPlaceholder))})}else n&&(!s.hasFocus&&s.state.facet(editable)||n.main.eq(o))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!o.empty&&n&&n.main.empty?r={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,o.to)}:r&&r.from>=o.from&&r.to<=o.to&&(r.from!=o.from||r.to!=o.to)&&o.to-o.from-(r.to-r.from)<=4?r={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,r.from).append(r.insert).append(s.state.doc.slice(r.to,o.to))}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==o.head-1&&/^\. ?$/.test(r.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:o.from,to:o.to,insert:Text$1.of([" "])}):browser.chrome&&r&&r.from==r.to&&r.from==o.head&&r.insert.toString()==`
 `&&s.lineWrapping&&(n&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:o.from,to:o.to,insert:Text$1.of([" "])}),r){if(browser.ios&&s.inputState.flushIOSKey()||browser.android&&(r.from==o.from&&r.to==o.to&&r.insert.length==1&&r.insert.lines==2&&dispatchKey(s.contentDOM,"Enter",13)||(r.from==o.from-1&&r.to==o.to&&r.insert.length==0||a==8&&r.insert.length<r.to-r.from&&r.to>o.head)&&dispatchKey(s.contentDOM,"Backspace",8)||r.from==o.from&&r.to==o.to+1&&r.insert.length==0&&dispatchKey(s.contentDOM,"Delete",46)))return!0;let c=r.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let l,h=()=>l||(l=applyDefaultInsert(s,r,n));return s.state.facet(inputHandler$1).some(d=>d(s,r.from,r.to,c,h))||s.dispatch(h()),!0}else if(n&&!n.main.eq(o)){let c=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(c=!0),l=s.inputState.lastSelectionOrigin),s.dispatch({selection:n,scrollIntoView:c,userEvent:l}),!0}else return!1}function applyDefaultInsert(s,e,r){let n,o=s.state,a=o.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let l=a.from<e.from?o.sliceDoc(a.from,e.from):"",h=a.to>e.to?o.sliceDoc(e.to,a.to):"";n=o.replaceSelection(s.state.toText(l+e.insert.sliceString(0,void 0,s.state.lineBreak)+h))}else{let l=o.changes(e),h=r&&r.main.to<=l.newLength?r.main:void 0;if(o.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let d=s.state.sliceDoc(e.from,e.to),f,g=r&&findCompositionNode(s,r.main.head);if(g){let A=e.insert.length-(e.to-e.from);f={from:g.from,to:g.to-A}}else f=s.state.doc.lineAt(a.head);let _=a.to-e.to,E=a.to-a.from;n=o.changeByRange(A=>{if(A.from==a.from&&A.to==a.to)return{changes:l,range:h||A.map(l)};let w=A.to-_,m=w-d.length;if(A.to-A.from!=E||s.state.sliceDoc(m,w)!=d||A.to>=f.from&&A.from<=f.to)return{range:A};let b=o.changes({from:m,to:w,insert:e.insert}),y=A.to-a.to;return{changes:b,range:h?EditorSelection.range(Math.max(0,h.anchor+y),Math.max(0,h.head+y)):A.map(b)}})}else n={changes:l,selection:h&&o.selection.replaceRange(h)}}let c="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,c+=".compose",s.inputState.compositionFirstChange&&(c+=".start",s.inputState.compositionFirstChange=!1)),o.update(n,{userEvent:c,scrollIntoView:!0})}function findDiff(s,e,r,n){let o=Math.min(s.length,e.length),a=0;for(;a<o&&s.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==o&&s.length==e.length)return null;let c=s.length,l=e.length;for(;c>0&&l>0&&s.charCodeAt(c-1)==e.charCodeAt(l-1);)c--,l--;if(n=="end"){let h=Math.max(0,a-Math.min(c,l));r-=c+h-a}if(c<a&&s.length<e.length){let h=r<=a&&r>=c?a-r:0;a-=h,l=a+(l-c),c=a}else if(l<a){let h=r<=a&&r>=l?a-r:0;a-=h,c=a+(c-l),l=a}return{from:a,toA:c,toB:l}}function selectionPoints(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:o,focusOffset:a}=s.observer.selectionRange;return r&&(e.push(new DOMPoint$1(r,n)),(o!=r||a!=n)&&e.push(new DOMPoint$1(o,a))),e}function selectionFromPoints(s,e){if(s.length==0)return null;let r=s[0].pos,n=s.length==2?s[1].pos:r;return r>-1&&n>-1?EditorSelection.single(r+e,n+e):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(editable)?n.root.activeElement!=this.dom:!hasSelection(n.dom,o))return;let a=o.anchorNode&&n.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!n.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=browser.safari&&e.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!r||this.selectionRange.eq(r))return!1;let n=hasSelection(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&dispatchKey(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,o=!1;for(let a of e){let c=this.readMutation(a);c&&(c.typeOver&&(o=!0),r==-1?{from:r,to:n}=c:(r=Math.min(c.from,r),n=Math.max(c.to,n)))}return{from:r,to:n,typeOver:o}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new DOMChange(this.view,e,r,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,o=applyDOMChange(this.view,r);return this.view.state==n&&this.view.update([]),o}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=findChild(r,e.previousSibling||e.target.previousSibling,-1),o=findChild(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:o?r.posBefore(o):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(s,e,r){for(;e;){let n=ContentView.get(e);if(n&&n.parent==s)return n;let o=e.parentNode;e=o!=s.dom?o:r>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(s){let e=null;function r(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",r,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",r,!0),!e)return null;let n=e.startContainer,o=e.startOffset,a=e.endContainer,c=e.endOffset,l=s.docView.domAtPos(s.state.selection.main.anchor);return isEquivalentPosition(l.node,l.offset,a,c)&&([n,o,a,c]=[a,c,n,o]),{anchorNode:n,anchorOffset:o,focusNode:a,focusOffset:c}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(o=>r(o,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(n=>new PluginInstance(n));for(let n of this.plugins)n.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let r=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,o,a=this.state;for(let _ of e){if(_.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=_.state}if(this.destroyed){this.viewState.state=a;return}let c=this.hasFocus,l=0,h=null;e.some(_=>_.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,l=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,h=focusChangeTransaction(a,c),h||(l=1));let d=this.observer.delayedAndroidKey,f=null;if(d?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(f=null)):this.observer.clear(),a.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(a);o=ViewUpdate.create(this,a,e),o.flags|=l;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let _ of e){if(g&&(g=g.map(_.changes)),_.scrollIntoView){let{main:E}=_.state.selection;g=new ScrollTarget(E.empty?E:EditorSelection.cursor(E.head,E.head>E.anchor?-1:1))}for(let E of _.effects)E.is(scrollIntoView$1)&&(g=E.value.clip(this.state))}this.viewState.update(o,g),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),r=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(_=>_.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||n||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let _ of this.state.facet(updateListener))try{_(o)}catch(E){logException(this.state,E,"update listener")}(h||f)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),f&&!applyDOMChange(this,f)&&d.force&&dispatchKey(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(n=>new PluginInstance(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(viewPlugin),n=e.state.facet(viewPlugin);if(r!=n){let o=[];for(let a of n){let c=r.indexOf(a);if(c<0)o.push(new PluginInstance(a));else{let l=this.plugins[c];l.mustUpdate=e,o.push(l)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,o=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:c}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(c<0)if(isScrolledToBottom(n))a=-1,c=this.viewState.heightMap.height;else{let E=this.viewState.scrollAnchorAt(o);a=E.from,c=E.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let f=d.map(E=>{try{return E.read(this)}catch(A){return logException(this.state,A),BadMeasure}}),g=ViewUpdate.create(this,this.state,[]),_=!1;g.flags|=h,r?r.flags|=h:r=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),_=this.docView.update(g));for(let E=0;E<d.length;E++)if(f[E]!=BadMeasure)try{let A=d[E];A.write&&A.write(f[E],this)}catch(A){logException(this.state,A)}if(_&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let A=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-c;if(A>1||A<-1){o=o+A,n.scrollTop=o/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let l of this.state.facet(updateListener))l(r)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,r);let n=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,r),a=updateAttrs(this.dom,this.editorAttrs,e);return o||a});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let o of n.effects)if(o.is(EditorView.announce)){r&&(this.announceDOM.textContent=""),r=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return skipAtoms(this,e,moveByChar(this,e,r,n))}moveByGroup(e,r){return skipAtoms(this,e,moveByChar(this,e,r,n=>byGroup(this,e.head,n)))}moveToLineBoundary(e,r,n=!0){return moveToLineBoundary(this,e,r,n)}moveVertically(e,r,n){return skipAtoms(this,e,moveVertically(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),posAtCoords(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o),c=a[BidiSpan.find(a,e-o.from,-1,r)];return flattenRect(n,c.dir==Direction.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let r=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==r&&(a.fresh||isolatesEq(a.isolates,n=getIsolatedRanges(this,e.from,e.to))))return a.order;n||(n=getIsolatedRanges(this,e.from,e.to));let o=computeOrder(e.text,r,n);return this.bidiCache.push(new CachedOrder(e.from,e.to,r,n,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(n.from),"start","start",n.top-e,r,!0))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=StyleModule.newName(),o=[theme.of(n),styleModule.of(buildTheme(`.${n}`,e))];return r&&r.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),o=n&&ContentView.get(n)||ContentView.get(e);return((r=o?.rootView)===null||r===void 0?void 0:r.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:s=>s.length?s[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,r,n,o,a,c){this.from=e,this.to=r,this.dir=n,this.isolates=o,this.fresh=a,this.order=c}static update(e,r){if(r.empty&&!e.some(a=>a.fresh))return e;let n=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let c=e[a];c.dir==o&&!r.touchesRange(c.from,c.to)&&n.push(new CachedOrder(r.mapPos(c.from,1),r.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return n}}function attrsFromFacet(s,e,r){for(let n=s.state.facet(e),o=n.length-1;o>=0;o--){let a=n[o],c=typeof a=="function"?a(s):a;c&&combineAttrs(c,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(s,e){const r=s.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let o,a,c,l;for(let h=0;h<r.length-1;++h){const d=r[h];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))o=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))c=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return o&&(n="Alt-"+n),a&&(n="Ctrl-"+n),l&&(n="Meta-"+n),c&&(n="Shift-"+n),n}function modifiers(s,e,r){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),r!==!1&&e.shiftKey&&(s="Shift-"+s),s}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(s,e){return runHandlers(getKeymap(e.state),s,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(s){let e=s.facet(keymap),r=Keymaps.get(e);return r||Keymaps.set(e,r=buildKeymap(e.reduce((n,o)=>n.concat(o),[]))),r}function runScopeHandlers(s,e,r){return runHandlers(getKeymap(s.state),e,s,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(s,e=currentPlatform){let r=Object.create(null),n=Object.create(null),o=(c,l)=>{let h=n[c];if(h==null)n[c]=l;else if(h!=l)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},a=(c,l,h,d,f)=>{var g,_;let E=r[c]||(r[c]=Object.create(null)),A=l.split(/ (?!$)/).map(b=>normalizeKeyName(b,e));for(let b=1;b<A.length;b++){let y=A.slice(0,b).join(" ");o(y,!0),E[y]||(E[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let D=storedPrefix={view:x,prefix:y,scope:c};return setTimeout(()=>{storedPrefix==D&&(storedPrefix=null)},PrefixTimeout),!0}]})}let w=A.join(" ");o(w,!1);let m=E[w]||(E[w]={preventDefault:!1,stopPropagation:!1,run:((_=(g=E._any)===null||g===void 0?void 0:g.run)===null||_===void 0?void 0:_.slice())||[]});h&&m.run.push(h),d&&(m.preventDefault=!0),f&&(m.stopPropagation=!0)};for(let c of s){let l=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let d of l){let f=r[d]||(r[d]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let g in f)f[g].run.push(c.any)}let h=c[e]||c.key;if(h)for(let d of l)a(d,h,c.run,c.preventDefault,c.stopPropagation),c.shift&&a(d,"Shift-"+h,c.shift,c.preventDefault,c.stopPropagation)}return r}function runHandlers(s,e,r,n){let o=keyName(e),a=codePointAt(o,0),c=codePointSize(a)==o.length&&o!=" ",l="",h=!1,d=!1,f=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==n&&(l=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(d=!0,storedPrefix=null));let g=new Set,_=m=>{if(m){for(let b of m.run)if(!g.has(b)&&(g.add(b),b(r,e)))return m.stopPropagation&&(f=!0),!0;m.preventDefault&&(m.stopPropagation&&(f=!0),d=!0)}return!1},E=s[n],A,w;return E&&(_(E[l+modifiers(o,e,!c)])?h=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(A=base[e.keyCode])&&A!=o?(_(E[l+modifiers(A,e,!0)])||e.shiftKey&&(w=shift[e.keyCode])!=o&&w!=A&&_(E[l+modifiers(w,e,!1)]))&&(h=!0):c&&e.shiftKey&&_(E[l+modifiers(o,e,!0)])&&(h=!0),!h&&_(E._any)&&(h=!0)),d&&(h=!0),h&&f&&e.stopPropagation(),h}class RectangleMarker{constructor(e,r,n,o,a){this.className=e,this.left=r,this.top=n,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let o=e.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let a=getBase(e);return[new RectangleMarker(r,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return rectanglesForRange(e,r,n)}}function getBase(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Direction.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function wrappedLine(s,e,r){let n=EditorSelection.cursor(e);return{from:Math.max(r.from,s.moveToLineBoundary(n,!1,!0).from),to:Math.min(r.to,s.moveToLineBoundary(n,!0,!0).from),type:BlockType.Text}}function rectanglesForRange(s,e,r){if(r.to<=s.viewport.from||r.from>=s.viewport.to)return[];let n=Math.max(r.from,s.viewport.from),o=Math.min(r.to,s.viewport.to),a=s.textDirection==Direction.LTR,c=s.contentDOM,l=c.getBoundingClientRect(),h=getBase(s),d=c.querySelector(".cm-line"),f=d&&window.getComputedStyle(d),g=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),_=l.right-(f?parseInt(f.paddingRight):0),E=blockAt(s,n),A=blockAt(s,o),w=E.type==BlockType.Text?E:null,m=A.type==BlockType.Text?A:null;if(w&&(s.lineWrapping||E.widgetLineBreaks)&&(w=wrappedLine(s,n,w)),m&&(s.lineWrapping||A.widgetLineBreaks)&&(m=wrappedLine(s,o,m)),w&&m&&w.from==m.from)return y(x(r.from,r.to,w));{let R=w?x(r.from,null,w):D(E,!1),M=m?x(null,r.to,m):D(A,!0),L=[];return(w||E).to<(m||A).from-(w&&m?1:0)||E.widgetLineBreaks>1&&R.bottom+s.defaultLineHeight/2<M.top?L.push(b(g,R.bottom,_,M.top)):R.bottom<M.top&&s.elementAtHeight((R.bottom+M.top)/2).type==BlockType.Text&&(R.bottom=M.top=(R.bottom+M.top)/2),y(R).concat(L).concat(y(M))}function b(R,M,L,k){return new RectangleMarker(e,R-h.left,M-h.top-.01,L-R,k-M+.01)}function y({top:R,bottom:M,horizontal:L}){let k=[];for(let I=0;I<L.length;I+=2)k.push(b(L[I],R,L[I+1],M));return k}function x(R,M,L){let k=1e9,I=-1e9,V=[];function N(z,W,Q,X,G){let q=s.coordsAtPos(z,z==L.to?-2:2),Y=s.coordsAtPos(Q,Q==L.from?2:-2);!q||!Y||(k=Math.min(q.top,Y.top,k),I=Math.max(q.bottom,Y.bottom,I),G==Direction.LTR?V.push(a&&W?g:q.left,a&&X?_:Y.right):V.push(!a&&X?g:Y.left,!a&&W?_:q.right))}let B=R??L.from,H=M??L.to;for(let z of s.visibleRanges)if(z.to>B&&z.from<H)for(let W=Math.max(z.from,B),Q=Math.min(z.to,H);;){let X=s.state.doc.lineAt(W);for(let G of s.bidiSpans(X)){let q=G.from+X.from,Y=G.to+X.from;if(q>=Q)break;Y>W&&N(Math.max(q,W),R==null&&q<=B,Math.min(Y,Q),M==null&&Y>=H,G.dir)}if(W=X.to+1,W>=Q)break}return V.length==0&&N(B,R==null,H,M==null,s.textDirection),{top:k,bottom:I,horizontal:V}}function D(R,M){let L=l.top+(M?R.top:R.bottom);return{top:L,bottom:L,horizontal:[]}}}function sameMarker(s,e){return s.constructor==e.constructor&&s.eq(e)}class LayerView{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let r=0,n=e.facet(layerOrder);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!sameMarker(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let o of e)o.update&&r&&o.constructor&&this.drawn[n].constructor&&o.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(o.draw(),r);for(;r;){let o=r.nextSibling;r.remove(),r=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(s){return[ViewPlugin.define(e=>new LayerView(e,s)),layerOrder.of(s)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(s){return combineConfig(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function drawSelection(s={}){return[selectionConfig.of(s),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(s){return s.startState.facet(selectionConfig)!=s.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(s){let{state:e}=s,r=e.facet(selectionConfig),n=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||CanHidePrimary:r.drawRangeCursor){let c=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let h of RectangleMarker.forRange(s,c,l))n.push(h)}}return n},update(s,e){s.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=configChanged(s);return r&&setBlinkRate(s.state,e),s.docChanged||s.selectionSet||r},mount(s,e){setBlinkRate(e.state,s)},class:"cm-cursorLayer"});function setBlinkRate(s,e){e.style.animationDuration=s.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(s,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||configChanged(s)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important",themeSpec[".cm-content"]={caretColor:"transparent !important"});const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(s,e){return s==null?null:e.mapPos(s)}}),dropCursorPos=StateField.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((r,n)=>n.is(setDropCursorPos)?n.value:r,s)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let r=s.state.field(dropCursorPos);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(dropCursorPos)!=r||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(dropCursorPos),r=e!=null&&s.coordsAtPos(e);if(!r)return null;let n=s.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+s.scrollDOM.scrollLeft*s.scaleX,top:r.top-n.top+s.scrollDOM.scrollTop*s.scaleY,height:r.bottom-r.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/r+"px",this.cursor.style.height=s.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(dropCursorPos)!=s&&this.view.dispatch({effects:setDropCursorPos.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(s,e,r,n,o){e.lastIndex=0;for(let a=s.iterRange(r,n),c=r,l;!a.next().done;c+=a.value.length)if(!a.lineBreak)for(;l=e.exec(a.value);)o(c+l.index,l)}function matchRanges(s,e){let r=s.visibleRanges;if(r.length==1&&r[0].from==s.viewport.from&&r[0].to==s.viewport.to)return r;let n=[];for(let{from:o,to:a}of r)o=Math.max(s.state.doc.lineAt(o).from,o-e),a=Math.min(s.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=o?n[n.length-1].to=a:n.push({from:o,to:a});return n}class MatchDecorator{constructor(e){const{regexp:r,decoration:n,decorate:o,boundary:a,maxLength:c=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,o)this.addMatch=(l,h,d,f)=>o(f,d,d+l[0].length,l,h);else if(typeof n=="function")this.addMatch=(l,h,d,f)=>{let g=n(l,h,d);g&&f(d,d+l[0].length,g)};else if(n)this.addMatch=(l,h,d,f)=>f(d,d+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=c}createDeco(e){let r=new RangeSetBuilder,n=r.add.bind(r);for(let{from:o,to:a}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,o,a,(c,l)=>this.addMatch(l,e,c,n));return r.finish()}updateDeco(e,r){let n=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((a,c,l,h)=>{h>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),o=Math.max(h,o))}),e.viewportChanged||o-n>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,r.map(e.changes),n,o):r}updateRange(e,r,n,o){for(let a of e.visibleRanges){let c=Math.max(a.from,n),l=Math.min(a.to,o);if(l>c){let h=e.state.doc.lineAt(c),d=h.to<l?e.state.doc.lineAt(l):h,f=Math.max(a.from,h.from),g=Math.min(a.to,d.to);if(this.boundary){for(;c>h.from;c--)if(this.boundary.test(h.text[c-1-h.from])){f=c;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){g=l;break}}let _=[],E,A=(w,m,b)=>_.push(b.range(w,m));if(h==d)for(this.regexp.lastIndex=f-h.from;(E=this.regexp.exec(h.text))&&E.index<g-h.from;)this.addMatch(E,e,E.index+h.from,A);else iterMatches(e.state.doc,this.regexp,f,g,(w,m)=>this.addMatch(m,e,w,A));r=r.update({filterFrom:f,filterTo:g,filter:(w,m)=>w<f||m>g,add:_})}}return r}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var s;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(s){let e=combineConfig(s,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(s={}){return[specialCharConfig.of(s),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new MatchDecorator({regexp:s.specialChars,decoration:(e,r,n)=>{let{doc:o}=r.state,a=codePointAt(e[0],0);if(a==9){let c=o.lineAt(n),l=r.state.tabSize,h=countColumn(c.text,l,n-c.from);return Decoration.replace({widget:new TabWidget((l-h%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=Decoration.replace({widget:new SpecialCharWidget(s,a)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(specialCharConfig);s.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const DefaultPlaceholder="•";function placeholder$1(s){return s>=32?DefaultPlaceholder:s==10?"␤":String.fromCharCode(9216+s)}class SpecialCharWidget extends WidgetType{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=placeholder$1(this.code),n=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,r);if(o)return o;let a=document.createElement("span");return a.textContent=r,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,r=[];for(let n of s.state.selection.ranges){let o=s.lineBlockAt(n.head);o.from>e&&(r.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(r)}},{decorations:s=>s.decorations}),MaxOff=2e3;function rectangleFor(s,e,r){let n=Math.min(e.line,r.line),o=Math.max(e.line,r.line),a=[];if(e.off>MaxOff||r.off>MaxOff||e.col<0||r.col<0){let c=Math.min(e.off,r.off),l=Math.max(e.off,r.off);for(let h=n;h<=o;h++){let d=s.doc.line(h);d.length<=l&&a.push(EditorSelection.range(d.from+c,d.to+l))}}else{let c=Math.min(e.col,r.col),l=Math.max(e.col,r.col);for(let h=n;h<=o;h++){let d=s.doc.line(h),f=findColumn(d.text,c,s.tabSize,!0);if(f<0)a.push(EditorSelection.cursor(d.to));else{let g=findColumn(d.text,l,s.tabSize);a.push(EditorSelection.range(d.from+f,d.from+g))}}}return a}function absoluteColumn(s,e){let r=s.coordsAtPos(s.viewport.from);return r?Math.round(Math.abs((r.left-e)/s.defaultCharacterWidth)):-1}function getPos(s,e){let r=s.posAtCoords({x:e.clientX,y:e.clientY},!1),n=s.state.doc.lineAt(r),o=r-n.from,a=o>MaxOff?-1:o==n.length?absoluteColumn(s,e.clientX):countColumn(n.text,s.state.tabSize,r-n.from);return{line:n.number,col:a,off:o}}function rectangleSelectionStyle(s,e){let r=getPos(s,e),n=s.state.selection;return r?{update(o){if(o.docChanged){let a=o.changes.mapPos(o.startState.doc.line(r.line).from),c=o.state.doc.lineAt(a);r={line:c.number,col:r.col,off:Math.min(r.off,c.length)},n=n.map(o.changes)}},get(o,a,c){let l=getPos(s,o);if(!l)return n;let h=rectangleFor(s.state,r,l);return h.length?c?EditorSelection.create(h.concat(n.ranges)):EditorSelection.create(h):n}}:null}function rectangularSelection(s){let e=s?.eventFilter||(r=>r.altKey&&r.button==0);return EditorView.mouseSelectionStyle.of((r,n)=>e(n)?rectangleSelectionStyle(r,n):null)}const keys={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(s={}){let[e,r]=keys[s.key||"Alt"],n=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==e||r(o))},keyup(o){(o.keyCode==e||!r(o))&&this.set(!1)},mousemove(o){this.set(r(o))}}});return[n,EditorView.contentAttributes.of(o=>{var a;return!((a=o.plugin(n))===null||a===void 0)&&a.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,r,n){this.facet=r,this.createTooltipView=n,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(n)}update(e,r){var n;let o=e.state.facet(this.facet),a=o.filter(h=>h);if(o===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let c=[],l=r?[]:null;for(let h=0;h<a.length;h++){let d=a[h],f=-1;if(d){for(let g=0;g<this.tooltips.length;g++){let _=this.tooltips[g];_&&_.create==d.create&&(f=g)}if(f<0)c[h]=this.createTooltipView(d),l&&(l[h]=!!d.above);else{let g=c[h]=this.tooltipViews[f];l&&(l[h]=r[f]),g.update&&g.update(e)}}}for(let h of this.tooltipViews)c.indexOf(h)<0&&(h.dom.remove(),(n=h.destroy)===null||n===void 0||n.call(h));return r&&(l.forEach((h,d)=>r[d]=h),r.length=l.length),this.input=o,this.tooltips=a,this.tooltipViews=c,!0}}function windowSpace(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const tooltipConfig=Facet.define({combine:s=>{var e,r,n;return{position:browser.ios?"absolute":((e=s.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=s.find(o=>o.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=s.find(o=>o.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(s,showTooltip,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let r=e||s.geometryChanged,n=s.state.facet(tooltipConfig);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=Outside,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(s=r.destroy)===null||s===void 0||s.call(r);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,r=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(browser.gecko)n=o.offsetParent!=this.container.ownerDocument.body;else if(this.view.scaleX!=1||this.view.scaleY!=1)n=!0;else if(o.style.top==Outside&&o.style.left=="0px"){let a=o.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(e=o.width/this.parent.offsetWidth,r=o.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:r}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((o,a)=>{let c=this.manager.tooltipViews[a];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:r,makeAbsolute:n}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:r,space:n,scaleX:o,scaleY:a}=s,c=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:f}=d,g=s.pos[l],_=s.size[l];if(!g||g.bottom<=Math.max(r.top,n.top)||g.top>=Math.min(r.bottom,n.bottom)||g.right<Math.max(r.left,n.left)-.1||g.left>Math.min(r.right,n.right)+.1){f.style.top=Outside;continue}let E=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,A=E?7:0,w=_.right-_.left,m=(e=knownHeight.get(d))!==null&&e!==void 0?e:_.bottom-_.top,b=d.offset||noOffset,y=this.view.textDirection==Direction.LTR,x=_.width>n.right-n.left?y?n.left:n.right-_.width:y?Math.min(g.left-(E?14:0)+b.x,n.right-w):Math.max(n.left,g.left-w+(E?14:0)-b.x),D=this.above[l];!h.strictSide&&(D?g.top-(_.bottom-_.top)-b.y<n.top:g.bottom+(_.bottom-_.top)+b.y>n.bottom)&&D==n.bottom-g.bottom>g.top-n.top&&(D=this.above[l]=!D);let R=(D?g.top-n.top:n.bottom-g.bottom)-A;if(R<m&&d.resize!==!1){if(R<this.view.defaultLineHeight){f.style.top=Outside;continue}knownHeight.set(d,m),f.style.height=(m=R)/a+"px"}else f.style.height&&(f.style.height="");let M=D?g.top-m-A-b.y:g.bottom+A+b.y,L=x+w;if(d.overlap!==!0)for(let k of c)k.left<L&&k.right>x&&k.top<M+m&&k.bottom>M&&(M=D?k.top-m-2-A:k.bottom+A+2);if(this.position=="absolute"?(f.style.top=(M-s.parent.top)/a+"px",f.style.left=(x-s.parent.left)/o+"px"):(f.style.top=M/a+"px",f.style.left=x/o+"px"),E){let k=g.left+(y?b.x:-b.x)-(x+14-7);E.style.left=k/o+"px"}d.overlap!==!0&&c.push({left:x,top:M,right:L,bottom:M+m}),f.classList.toggle("cm-tooltip-above",D),f.classList.toggle("cm-tooltip-below",!D),d.positioned&&d.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{static create(e){return new HoverTooltipHost(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,r=>this.createHostedView(r))}createHostedView(e){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(r.dom),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let o=n[e];if(o!==void 0){if(r===void 0)r=o;else if(r!==o)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],s=>{let e=s.facet(showHoverTooltip).filter(r=>r);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class HoverPlugin{constructor(e,r,n,o,a){this.view=e,this.source=r,this.field=n,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.nearest(r.target);if(!n)return;let o,a=1;if(n instanceof WidgetView)o=n.posAtStart;else{if(o=e.posAtCoords(r),o==null)return;let l=e.coordsAtPos(o);if(!l||r.y<l.top||r.y>l.bottom||r.x<l.left-e.defaultCharacterWidth||r.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(o)).find(f=>f.from<=o&&f.to>=o),d=h&&h.dir==Direction.RTL?-1:1;a=r.x<l.left?-d:d}let c=this.source(e,o,a);if(c?.then){let l=this.pending={pos:o};c.then(h=>{this.pending==l&&(this.pending=null,h&&e.dispatch({effects:this.setHover.of(h)}))},h=>logException(e.state,h,"hover tooltip"))}else c&&e.dispatch({effects:this.setHover.of(c)})}get tooltip(){let e=this.view.plugin(tooltipPlugin),r=e?e.manager.tooltips.findIndex(n=>n.create==HoverTooltipHost.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:o}=this;if(n&&o&&!isInTooltip(o.dom,e)||this.pending){let{pos:a}=n||this.pending,c=(r=n?.end)!==null&&r!==void 0?r:a;(a==c?this.view.posAtCoords(this.lastMove)!=a:!isOverRange(this.view,a,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(s,e){let r=s.getBoundingClientRect();return e.clientX>=r.left-tooltipMargin&&e.clientX<=r.right+tooltipMargin&&e.clientY>=r.top-tooltipMargin&&e.clientY<=r.bottom+tooltipMargin}function isOverRange(s,e,r,n,o,a){let c=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(c.left>n||c.right<n||c.top>o||Math.min(c.bottom,l)<o)return!1;let h=s.posAtCoords({x:n,y:o},!1);return h>=e&&h<=r}function hoverTooltip(s,e={}){let r=StateEffect.define(),n=StateField.define({create(){return null},update(o,a){if(o&&(e.hideOnChange&&(a.docChanged||a.selection)||e.hideOn&&e.hideOn(a,o)))return null;if(o&&a.docChanged){let c=a.changes.mapPos(o.pos,-1,MapMode.TrackDel);if(c==null)return null;let l=Object.assign(Object.create(null),o);l.pos=c,o.end!=null&&(l.end=a.changes.mapPos(o.end)),o=l}for(let c of a.effects)c.is(r)&&(o=c.value),c.is(closeHoverTooltipEffect)&&(o=null);return o},provide:o=>showHoverTooltip.from(o)});return[n,ViewPlugin.define(o=>new HoverPlugin(o,s,n,r,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(s,e){let r=s.plugin(tooltipPlugin);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(s){let e,r;for(let n of s)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function getPanel(s,e){let r=s.plugin(panelPlugin),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(s){this.input=s.state.facet(showPanel),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(s));let e=s.state.facet(panelConfig);this.top=new PanelGroup(s,!0,e.topContainer),this.bottom=new PanelGroup(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(s){let e=s.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=s.state.facet(showPanel);if(r!=this.input){let n=r.filter(h=>h),o=[],a=[],c=[],l=[];for(let h of n){let d=this.specs.indexOf(h),f;d<0?(f=h(s.view),l.push(f)):(f=this.panels[d],f.update&&f.update(s)),o.push(f),(f.top?a:c).push(f)}this.specs=n,this.panels=o,this.top.sync(a),this.bottom.sync(c);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>EditorView.scrollMargins.of(e=>{let r=e.plugin(s);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(s){let e=s.nextSibling;return s.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(s){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),s))]}const unfixGutters=Facet.define({combine:s=>s.some(e=>e)});function gutters(s){let e=[gutterView];return s&&s.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(activeGutters).map(e=>new SingleGutterView(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,r=s.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let r=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),n=[],o=this.gutters.map(a=>new UpdateContext(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let c=!0;for(let l of a.type)if(l.type==BlockType.Text&&c){advanceCursor(r,n,l.from);for(let h of o)h.line(this.view,l,n);c=!1}else if(l.widget)for(let h of o)h.widget(this.view,l)}else if(a.type==BlockType.Text){advanceCursor(r,n,a.from);for(let c of o)c.line(this.view,a,n)}else if(a.widget)for(let c of o)c.widget(this.view,a);for(let a of o)a.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(activeGutters),r=s.state.facet(activeGutters),n=s.docChanged||s.heightChanged||s.viewportChanged||!RangeSet.eq(s.startState.facet(gutterLineClass),s.state.facet(gutterLineClass),s.view.viewport.from,s.view.viewport.to);if(e==r)for(let o of this.gutters)o.update(s)&&(n=!0);else{n=!0;let o=[];for(let a of r){let c=e.indexOf(a);c<0?o.push(new SingleGutterView(this.view,a)):(this.gutters[c].update(s),o.push(this.gutters[c]))}for(let a of this.gutters)a.dom.remove(),o.indexOf(a)<0&&a.destroy();for(let a of o)this.dom.appendChild(a.dom);this.gutters=o}return n}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>EditorView.scrollMargins.of(e=>{let r=e.plugin(s);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==Direction.LTR?{left:r.dom.offsetWidth*e.scaleX}:{right:r.dom.offsetWidth*e.scaleX}})});function asArray(s){return Array.isArray(s)?s:[s]}function advanceCursor(s,e,r){for(;s.value&&s.from<=r;)s.from==r&&e.push(s.value),s.next()}class UpdateContext{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=RangeSet.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:o}=this,a=(r.top-this.height)/e.scaleY,c=r.height/e.scaleY;if(this.i==o.elements.length){let l=new GutterElement(e,c,a,n);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,c,a,n);this.height=r.bottom,this.i++}line(e,r,n){let o=[];advanceCursor(this.cursor,o,r.from),n.length&&(o=o.concat(n));let a=this.gutter.config.lineMarker(e,r,o);a&&o.unshift(a);let c=this.gutter;o.length==0&&!c.config.renderEmptyElements||this.addElement(e,r,o)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r);n&&this.addElement(e,r,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class SingleGutterView{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,o=>{let a=o.target,c;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let h=a.getBoundingClientRect();c=(h.top+h.bottom)/2}else c=o.clientY;let l=e.lineBlockAtHeight(c-e.documentTop);r.domEventHandlers[n](e,l,o)&&o.preventDefault()});this.markers=asArray(r.markers(e)),r.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let n=e.view.viewport;return!RangeSet.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,r,n,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,o)}update(e,r,n,o){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,r){let n="cm-gutterElement",o=this.dom.firstChild;for(let a=0,c=0;;){let l=c,h=a<r.length?r[a++]:null,d=!1;if(h){let f=h.elementClass;f&&(n+=" "+f);for(let g=c;g<this.markers.length;g++)if(this.markers[g].compare(h)){l=g,d=!0;break}}else l=this.markers.length;for(;c<l;){let f=this.markers[c++];if(f.toDOM){f.destroy(o);let g=o.nextSibling;o.remove(),o=g}}if(!h)break;h.toDOM&&(d?o=o.nextSibling:this.dom.insertBefore(h.toDOM(e),o)),d&&c++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function sameMarkers(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(!s[r].compare(e[r]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(s){return combineConfig(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let o in r){let a=n[o],c=r[o];n[o]=a?(l,h,d)=>a(l,h,d)||c(l,h,d):c}return n}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(s,e){return s.state.facet(lineNumberConfig).formatNumber(e,s.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,r,n){return n.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(r.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,r){let n=formatNumber(r.view,maxLineNumber(r.view.state.doc.lines));return n==e.number?e:new NumberMarker(n)},domEventHandlers:s.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(s={}){return[lineNumberConfig.of(s),gutters(),lineNumberGutter]}function maxLineNumber(s){let e=9;for(;e<s;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],s=>{let e=[],r=-1;for(let n of s.selection.ranges){let o=s.doc.lineAt(n.head).from;o>r&&(r=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,r){this.from=e,this.to=r}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}NodeProp.closedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.group=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,r,n,o=0){this.name=e,this.props=r,this.id=n,this.flags=o}static define(e){let r=e.props&&e.props.length?Object.create(null):noProps,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",r,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[a[0].id]=a[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(NodeProp.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let o of n.split(" "))r[o]=e[n];return n=>{for(let o=n.prop(NodeProp.group),a=-1;a<(o?o.length:0);a++){let c=r[a<0?n.name:o[a]];if(c)return c}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let o=null;for(let a of e){let c=a(n);c&&(o||(o=Object.assign({},n.props)),o[c[0].id]=c[1])}r.push(o?new NodeType(n.name,o,n.id,n.flags):n)}return new NodeSet(r)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,r,n,o,a){if(this.type=e,this.children=r,this.positions=n,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[c,l]of a)this.props[typeof c=="number"?c:c.id]=l}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let o=n.toString();o&&(r&&(r+=","),r+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,r=0,n=0){let o=CachedNode.get(this)||this.topNode,a=new TreeCursor(o);return a.moveTo(e,r),CachedNode.set(this,a._tree),a}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,r=0){let n=resolveNode(CachedNode.get(this)||this.topNode,e,r,!1);return CachedNode.set(this,n),n}resolveInner(e,r=0){let n=resolveNode(CachedInnerNode.get(this)||this.topNode,e,r,!0);return CachedInnerNode.set(this,n),n}resolveStack(e,r=0){return stackIterator(this,e,r)}iterate(e){let{enter:r,leave:n,from:o=0,to:a=this.length}=e,c=e.mode||0,l=(c&IterMode.IncludeAnonymous)>0;for(let h=this.cursor(c|IterMode.IncludeAnonymous);;){let d=!1;if(h.from<=a&&h.to>=o&&(!l&&h.type.isAnonymous||r(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(l||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,o)=>new Tree(this.type,r,n,o,this.propValues),e.makeTree||((r,n,o)=>new Tree(NodeType.none,r,n,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return NodeType.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],o=this.set.types[r],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let c=[];for(;e<n;)c.push(this.childString(e)),e=this.buffer[e+3];return a+"("+c.join(",")+")"}findChild(e,r,n,o,a){let{buffer:c}=this,l=-1;for(let h=e;h!=r&&!(checkSide(a,o,c[h+1],c[h+2])&&(l=h,n>0));h=c[h+3]);return l}slice(e,r,n){let o=this.buffer,a=new Uint16Array(r-e),c=0;for(let l=e,h=0;l<r;){a[h++]=o[l++],a[h++]=o[l++]-n;let d=a[h++]=o[l++]-n;a[h++]=o[l++]-e,c=Math.max(c,d)}return new TreeBuffer(a,c,this.set)}}function checkSide(s,e,r,n){switch(s){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function resolveNode(s,e,r,n){for(var o;s.from==s.to||(r<1?s.from>=e:s.from>e)||(r>-1?s.to<=e:s.to<e);){let c=!n&&s instanceof TreeNode&&s.index<0?null:s.parent;if(!c)return s;s=c}let a=n?0:IterMode.IgnoreOverlays;if(n)for(let c=s,l=c.parent;l;c=l,l=c.parent)c instanceof TreeNode&&c.index<0&&((o=l.enter(e,r,a))===null||o===void 0?void 0:o.from)!=c.from&&(s=l);for(;;){let c=s.enter(e,r,a);if(!c)return s;s=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,r=null,n=null){let o=getChildren(this,e,r,n);return o.length?o[0]:null}getChildren(e,r=null,n=null){return getChildren(this,e,r,n)}resolve(e,r=0){return resolveNode(this,e,r,!1)}resolveInner(e,r=0){return resolveNode(this,e,r,!0)}matchContext(e){return matchNodeContext(this,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let o=r.lastChild;if(!o||o.to!=r.to)break;o.type.isError&&o.from==o.to?(n=r,r=o.prevSibling):r=o}return n}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,r,n,o){super(),this._tree=e,this.from=r,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,o,a=0){for(let c=this;;){for(let{children:l,positions:h}=c._tree,d=r>0?l.length:-1;e!=d;e+=r){let f=l[e],g=h[e]+c.from;if(checkSide(o,n,g,g+f.length)){if(f instanceof TreeBuffer){if(a&IterMode.ExcludeBuffers)continue;let _=f.findChild(0,f.buffer.length,r,n-g,o);if(_>-1)return new BufferNode(new BufferContext(c,f,e,g),null,_)}else if(a&IterMode.IncludeAnonymous||!f.type.isAnonymous||hasChild(f)){let _;if(!(a&IterMode.IgnoreMounts)&&(_=MountedTree.get(f))&&!_.overlay)return new TreeNode(_.tree,g,e,c);let E=new TreeNode(f,g,e,c);return a&IterMode.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(r<0?f.children.length-1:0,r,n,o)}}}if(a&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+r:e=r<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let o;if(!(n&IterMode.IgnoreOverlays)&&(o=MountedTree.get(this._tree))&&o.overlay){let a=e-this.from;for(let{from:c,to:l}of o.overlay)if((r>0?c<=a:c<a)&&(r<0?l>=a:l>a))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(s,e,r,n){let o=s.cursor(),a=[];if(!o.firstChild())return a;if(r!=null){for(;!o.type.is(r);)if(!o.nextSibling())return a}for(;;){if(n!=null&&o.type.is(n))return a;if(o.type.is(e)&&a.push(o.node),!o.nextSibling())return n==null?a:[]}}function matchNodeContext(s,e,r=e.length-1){for(let n=s.parent;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class BufferContext{constructor(e,r,n,o){this.parent=e,this.buffer=r,this.index=n,this.start=o}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.context.start,n);return a<0?null:new BufferNode(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return a<0?null:new BufferNode(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,o=this.index+4,a=n.buffer[this.index+3];if(a>o){let c=n.buffer[this.index+1];e.push(n.slice(o,a,c)),r.push(0)}return new Tree(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(s){if(!s.length)return null;let e=0,r=s[0];for(let a=1;a<s.length;a++){let c=s[a];(c.from>r.from||c.to<r.to)&&(r=c,e=a)}let n=r instanceof TreeNode&&r.index<0?null:r.parent,o=s.slice();return n?o[e]=n:o.splice(e,1),new StackIterator(o,r)}class StackIterator{constructor(e,r){this.heads=e,this.node=r}get next(){return iterStack(this.heads)}}function stackIterator(s,e,r){let n=s.resolveInner(e,r),o=null;for(let a=n instanceof TreeNode?n:n.context.parent;a;a=a.parent)if(a.index<0){let c=a.parent;(o||(o=[n])).push(c.resolve(e,r)),a=c}else{let c=MountedTree.get(a.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let l=new TreeNode(c.tree,c.overlay[0].from+a.from,-1,a);(o||(o=[n])).push(resolveNode(l,e,r,!1))}}return o?iterStack(o):n}class TreeCursor{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:o}=this.buffer;return this.type=r||o.set.types[o.buffer[e]],this.from=n+o.buffer[e+1],this.to=n+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let o=n<0?0:this.stack[n]+4;if(this.index!=o)return this.yieldBuf(r.findChild(o,this.index,-1,0,4))}else{let o=r.buffer[this.index+3];if(o<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(o)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:r,parent:n}=o)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let a=r+e,c=e<0?-1:n._tree.children.length;a!=c;a+=e){let l=n._tree.children[a];if(this.mode&IterMode.IncludeAnonymous||l instanceof TreeBuffer||!l.type.isAnonymous||hasChild(l))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let o=this.index,a=this.stack.length;a>=0;){for(let c=e;c;c=c._parent)if(c.index==o){if(o==this.index)return c;r=c,n=a+1;break e}o=this.stack[--a]}for(let o=n;o<this.stack.length;o++)r=new BufferNode(this.buffer,r,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;o&&r&&r(this),o=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return matchNodeContext(this.node,e,o);let c=n[r.buffer[this.stack[a]]];if(!c.isAnonymous){if(e[o]&&e[o]!=c.name)return!1;o--}}return!0}}function hasChild(s){return s.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(s){var e;let{buffer:r,nodeSet:n,maxBufferLength:o=DefaultBufferLength,reused:a=[],minRepeatType:c=n.types.length}=s,l=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,h=n.types,d=0,f=0;function g(R,M,L,k,I,V){let{id:N,start:B,end:H,size:z}=l,W=f;for(;z<0;)if(l.next(),z==-1){let Y=a[N];L.push(Y),k.push(B-R);return}else if(z==-3){d=N;return}else if(z==-4){f=N;return}else throw new RangeError(`Unrecognized record size: ${z}`);let Q=h[N],X,G,q=B-R;if(H-B<=o&&(G=m(l.pos-M,I))){let Y=new Uint16Array(G.size-G.skip),K=l.pos-G.size,se=Y.length;for(;l.pos>K;)se=b(G.start,Y,se);X=new TreeBuffer(Y,H-G.start,n),q=G.start-R}else{let Y=l.pos-z;l.next();let K=[],se=[],Se=N>=c?N:-1,be=0,xe=H;for(;l.pos>Y;)Se>=0&&l.id==Se&&l.size>=0?(l.end<=xe-o&&(A(K,se,B,be,l.end,xe,Se,W),be=K.length,xe=l.end),l.next()):V>2500?_(B,Y,K,se):g(B,Y,K,se,Se,V+1);if(Se>=0&&be>0&&be<K.length&&A(K,se,B,be,B,xe,Se,W),K.reverse(),se.reverse(),Se>-1&&be>0){let Ee=E(Q);X=balanceRange(Q,K,se,0,K.length,0,H-B,Ee,Ee)}else X=w(Q,K,se,H-B,W-H)}L.push(X),k.push(q)}function _(R,M,L,k){let I=[],V=0,N=-1;for(;l.pos>M;){let{id:B,start:H,end:z,size:W}=l;if(W>4)l.next();else{if(N>-1&&H<N)break;N<0&&(N=z-o),I.push(B,H,z),V++,l.next()}}if(V){let B=new Uint16Array(V*4),H=I[I.length-2];for(let z=I.length-3,W=0;z>=0;z-=3)B[W++]=I[z],B[W++]=I[z+1]-H,B[W++]=I[z+2]-H,B[W++]=W;L.push(new TreeBuffer(B,I[2]-H,n)),k.push(H-R)}}function E(R){return(M,L,k)=>{let I=0,V=M.length-1,N,B;if(V>=0&&(N=M[V])instanceof Tree){if(!V&&N.type==R&&N.length==k)return N;(B=N.prop(NodeProp.lookAhead))&&(I=L[V]+N.length+B)}return w(R,M,L,k,I)}}function A(R,M,L,k,I,V,N,B){let H=[],z=[];for(;R.length>k;)H.push(R.pop()),z.push(M.pop()+L-I);R.push(w(n.types[N],H,z,V-I,B-V)),M.push(I-L)}function w(R,M,L,k,I=0,V){if(d){let N=[NodeProp.contextHash,d];V=V?[N].concat(V):[N]}if(I>25){let N=[NodeProp.lookAhead,I];V=V?[N].concat(V):[N]}return new Tree(R,M,L,k,V)}function m(R,M){let L=l.fork(),k=0,I=0,V=0,N=L.end-o,B={size:0,start:0,skip:0};e:for(let H=L.pos-R;L.pos>H;){let z=L.size;if(L.id==M&&z>=0){B.size=k,B.start=I,B.skip=V,V+=4,k+=4,L.next();continue}let W=L.pos-z;if(z<0||W<H||L.start<N)break;let Q=L.id>=c?4:0,X=L.start;for(L.next();L.pos>W;){if(L.size<0)if(L.size==-3)Q+=4;else break e;else L.id>=c&&(Q+=4);L.next()}I=X,k+=z,V+=Q}return(M<0||k==R)&&(B.size=k,B.start=I,B.skip=V),B.size>4?B:void 0}function b(R,M,L){let{id:k,start:I,end:V,size:N}=l;if(l.next(),N>=0&&k<c){let B=L;if(N>4){let H=l.pos-(N-4);for(;l.pos>H;)L=b(R,M,L)}M[--L]=B,M[--L]=V-R,M[--L]=I-R,M[--L]=k}else N==-3?d=k:N==-4&&(f=k);return L}let y=[],x=[];for(;l.pos>0;)g(s.start||0,s.bufferStart||0,y,x,-1,0);let D=(e=s.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Tree(h[s.topID],y.reverse(),x.reverse(),D)}const nodeSizeCache=new WeakMap;function nodeSize(s,e){if(!s.isAnonymous||e instanceof TreeBuffer||e.type!=s)return 1;let r=nodeSizeCache.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=s||!(n instanceof Tree)){r=1;break}r+=nodeSize(s,n)}nodeSizeCache.set(e,r)}return r}function balanceRange(s,e,r,n,o,a,c,l,h){let d=0;for(let A=n;A<o;A++)d+=nodeSize(s,e[A]);let f=Math.ceil(d*1.5/8),g=[],_=[];function E(A,w,m,b,y){for(let x=m;x<b;){let D=x,R=w[x],M=nodeSize(s,A[x]);for(x++;x<b;x++){let L=nodeSize(s,A[x]);if(M+L>=f)break;M+=L}if(x==D+1){if(M>f){let L=A[D];E(L.children,L.positions,0,L.children.length,w[D]+y);continue}g.push(A[D])}else{let L=w[x-1]+A[x-1].length-R;g.push(balanceRange(s,A,w,D,x,R,L,null,h))}_.push(R+y-a)}}return E(e,r,n,o,0),(l||h)(g,_,c)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let o=this.map.get(e);o||this.map.set(e,o=new Map),o.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,r):e instanceof TreeNode&&this.map.set(e.tree,r)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,r,n,o,a=!1,c=!1){this.from=e,this.to=r,this.tree=n,this.offset=o,this.open=(a?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let o=[new TreeFragment(0,e.length,e,0,!1,n)];for(let a of r)a.to>e.length&&o.push(a);return o}static applyChanges(e,r,n=128){if(!r.length)return e;let o=[],a=1,c=e.length?e[0]:null;for(let l=0,h=0,d=0;;l++){let f=l<r.length?r[l]:null,g=f?f.fromA:1e9;if(g-h>=n)for(;c&&c.from<g;){let _=c;if(h>=_.from||g<=_.to||d){let E=Math.max(_.from,h)-d,A=Math.min(_.to,g)-d;_=E>=A?null:new TreeFragment(E,A,_.tree,_.offset+d,l>0,!!f)}if(_&&o.push(_),c.to>g)break;c=a<e.length?e[a++]:null}if(!f)break;h=f.toA,d=f.toA-f.toB}return o}}class Parser{startParse(e,r,n){return typeof e=="string"&&(e=new StringInput(e)),n=n?n.length?n.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let o=this.startParse(e,r,n);for(;;){let a=o.advance();if(a)return a}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,r,n){this.set=e,this.base=r,this.modified=n,this.id=nextTagID++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let r=new Tag([],null,[]);if(r.set.push(r),e)for(let n of e.set)r.set.push(n);return r}static defineModifier(){let e=new Modifier;return r=>r.modified.indexOf(e)>-1?r:Modifier.get(r.base||r,r.modified.concat(e).sort((n,o)=>n.id-o.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(l=>l.base==e&&sameArray(r,l.modified));if(n)return n;let o=[],a=new Tag(o,e,r);for(let l of r)l.instances.push(a);let c=powerSet(r);for(let l of e.set)if(!l.modified.length)for(let h of c)o.push(Modifier.get(l,h));return a}}function sameArray(s,e){return s.length==e.length&&s.every((r,n)=>r==e[n])}function powerSet(s){let e=[[]];for(let r=0;r<s.length;r++)for(let n=0,o=e.length;n<o;n++)e.push(e[n].concat(s[r]));return e.sort((r,n)=>n.length-r.length)}function styleTags(s){let e=Object.create(null);for(let r in s){let n=s[r];Array.isArray(n)||(n=[n]);for(let o of r.split(" "))if(o){let a=[],c=2,l=o;for(let g=0;;){if(l=="..."&&g>0&&g+3==o.length){c=1;break}let _=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!_)throw new RangeError("Invalid path: "+o);if(a.push(_[0]=="*"?"":_[0][0]=='"'?JSON.parse(_[0]):_[0]),g+=_[0].length,g==o.length)break;let E=o[g++];if(g==o.length&&E=="!"){c=0;break}if(E!="/")throw new RangeError("Invalid path: "+o);l=o.slice(g)}let h=a.length-1,d=a[h];if(!d)throw new RangeError("Invalid path: "+o);let f=new Rule(n,c,h>0?a.slice(0,h):null);e[d]=f.sort(e[d])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,r,n,o){this.tags=e,this.mode=r,this.context=n,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(s,e){let r=Object.create(null);for(let a of s)if(!Array.isArray(a.tag))r[a.tag.id]=a.class;else for(let c of a.tag)r[c.id]=a.class;let{scope:n,all:o=null}=e||{};return{style:a=>{let c=o;for(let l of a)for(let h of l.set){let d=r[h.id];if(d){c=c?c+" "+d:d;break}}return c},scope:n}}function highlightTags(s,e){let r=null;for(let n of s){let o=n.style(e);o&&(r=r?r+" "+o:o)}return r}function highlightTree(s,e,r,n=0,o=s.length){let a=new HighlightBuilder(n,Array.isArray(e)?e:[e],r);a.highlightRange(s.cursor(),n,o,"",a.highlighters),a.flush(o)}class HighlightBuilder{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,o,a){let{type:c,from:l,to:h}=e;if(l>=n||h<=r)return;c.isTop&&(a=this.highlighters.filter(E=>!E.scope||E.scope(c)));let d=o,f=getStyleTags(e)||Rule.empty,g=highlightTags(a,f.tags);if(g&&(d&&(d+=" "),d+=g,f.mode==1&&(o+=(o?" ":"")+g)),this.startSpan(Math.max(r,l),d),f.opaque)return;let _=e.tree&&e.tree.prop(NodeProp.mounted);if(_&&_.overlay){let E=e.node.enter(_.overlay[0].from+l,1),A=this.highlighters.filter(m=>!m.scope||m.scope(_.tree.type)),w=e.firstChild();for(let m=0,b=l;;m++){let y=m<_.overlay.length?_.overlay[m]:null,x=y?y.from+l:h,D=Math.max(r,b),R=Math.min(n,x);if(D<R&&w)for(;e.from<R&&(this.highlightRange(e,D,R,o,a),this.startSpan(Math.min(R,e.to),d),!(e.to>=x||!e.nextSibling())););if(!y||x>n)break;b=y.to+l,b>r&&(this.highlightRange(E.cursor(),Math.max(r,y.from+l),Math.min(n,b),"",A),this.startSpan(Math.min(n,b),d))}w&&e.parent()}else if(e.firstChild()){_&&(o="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,o,a),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}}function getStyleTags(s){let e=s.type.prop(ruleNodeProp);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(s){return Facet.define({combine:s?e=>e.concat(s):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,r,n=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=r,this.extension=[language.of(this),EditorState.languageData.of((a,c,l)=>{let h=topNodeAt(a,c,l),d=h.type.prop(languageDataProp);if(!d)return[];let f=a.facet(d),g=h.type.prop(sublanguageProp);if(g){let _=h.resolve(c-h.from,l);for(let E of g)if(E.test(_,a)){let A=a.facet(E.facet);return E.type=="replace"?A:A.concat(f)}}return f})].concat(n)}isActiveAt(e,r,n=-1){return topNodeAt(e,r,n).type.prop(languageDataProp)==this.data}findRegions(e){let r=e.facet(language);if(r?.data==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],o=(a,c)=>{if(a.prop(languageDataProp)==this.data){n.push({from:c,to:c+a.length});return}let l=a.prop(NodeProp.mounted);if(l){if(l.tree.prop(languageDataProp)==this.data){if(l.overlay)for(let h of l.overlay)n.push({from:h.from+c,to:h.to+c});else n.push({from:c,to:c+a.length});return}else if(l.overlay){let h=n.length;if(o(l.tree,l.overlay[0].from+c),n.length>h)return}}for(let h=0;h<a.children.length;h++){let d=a.children[h];d instanceof Tree&&o(d,a.positions[h]+c)}};return o(syntaxTree(e),0),n}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(s,e,r){let n=s.facet(language),o=syntaxTree(s).topNode;if(!n||n.allowsNesting)for(let a=o;a;a=a.enter(e,r,IterMode.ExcludeBuffers))a.type.isTop&&(o=a);return o}class LRLanguage extends Language{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=defineLanguageFacet(e.languageData);return new LRLanguage(r,e.parser.configure({props:[languageDataProp.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new LRLanguage(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(s){let e=s.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let currentContext=null;class ParseContext{constructor(e,r,n=[],o,a,c,l,h){this.parser=e,this.state=r,this.fragments=n,this.tree=o,this.treeLen=a,this.viewport=c,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new ParseContext(e,r,[],Tree.empty,0,n,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Tree.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=currentContext;currentContext=this;try{return e()}finally{currentContext=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=cutFragments(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:o,treeLen:a,viewport:c,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,f,g,_)=>h.push({fromA:d,toA:f,fromB:g,toB:_})),n=TreeFragment.applyChanges(n,h),o=Tree.empty,a=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let f=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);f<g&&l.push({from:f,to:g})}}}return new ParseContext(this.parser,r,n,o,a,c,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:o,to:a}=this.skipped[n];o<e.to&&a>e.from&&(this.fragments=cutFragments(this.fragments,o,a),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends Parser{createParse(r,n,o){let a=o[0].from,c=o[o.length-1].to;return{parsedPos:a,advance(){let h=currentContext;if(h){for(let d of o)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return currentContext}}function cutFragments(s,e,r){return TreeFragment.applyChanges(s,[{fromA:e,toA:r,fromB:e,toB:r}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new LanguageState(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=ParseContext.create(e.facet(language).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new LanguageState(n)}}Language.state=StateField.define({create:LanguageState.init,update(s,e){for(let r of e.effects)if(r.is(Language.setState))return r.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):s.apply(e)}});let requestIdle=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=s=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(Language.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(Language.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,a=n.field(Language.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),l=a.context.treeLen<o&&n.doc.length>o+1e3,h=a.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,o+(l?0:1e5));this.chunkBudget-=Date.now()-r,(h||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(a.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>logException(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(s){return s.length?s[0]:null},enables:s=>[Language.state,parseWorker,EditorView.contentAttributes.compute([s],e=>{let r=e.facet(s);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function getIndentUnit(s){let e=s.facet(indentUnit);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function indentString(s,e){let r="",n=s.tabSize,o=s.facet(indentUnit)[0];if(o=="	"){for(;e>=n;)r+="	",e-=n;o=" "}for(let a=0;a<e;a++)r+=o;return r}function getIndentation(s,e){s instanceof EditorState&&(s=new IndentContext(s));for(let n of s.state.facet(indentService)){let o=n(s,e);if(o!==void 0)return o}let r=syntaxTree(s.state);return r.length>=e?syntaxIndentation(s,r,e):null}class IndentContext{constructor(e,r={}){this.state=e,this.options=r,this.unit=getIndentUnit(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=n.from&&o<=n.to?a&&o==e?{text:"",from:e}:(r<0?o<e:o<=e)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(e,r);return n.slice(e-o,Math.min(n.length,e+100-o))}column(e,r=1){let{text:n,from:o}=this.lineAt(e,r),a=this.countColumn(n,e-o),c=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return c>-1&&(a+=c-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,r=e.length){return countColumn(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:o}=this.lineAt(e,r),a=this.options.overrideIndentation;if(a){let c=a(o);if(c>-1)return c}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(s,e,r){let n=e.resolveStack(r),o=n.node.enterUnfinishedNodesBefore(r);if(o!=n.node){let a=[];for(let c=o;c!=n.node;c=c.parent)a.push(c);for(let c=a.length-1;c>=0;c--)n={node:a[c],next:n}}return indentFor(n,s,r)}function indentFor(s,e,r){for(let n=s;n;n=n.next){let o=indentStrategy(n.node);if(o)return o(TreeIndentContext.create(e,r,n))}return 0}function ignoreClosed(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function indentStrategy(s){let e=s.type.prop(indentNodeProp);if(e)return e;let r=s.firstChild,n;if(r&&(n=r.type.prop(NodeProp.closedBy))){let o=s.lastChild,a=o&&n.indexOf(o.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,a&&!ignoreClosed(c)?o.from:void 0)}return s.parent==null?topIndent$1:null}function topIndent$1(){return 0}class TreeIndentContext extends IndentContext{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new TreeIndentContext(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(isParent(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(s,e){for(let r=e;r;r=r.parent)if(s==r)return!0;return!1}function bracketedAligned(s){let e=s.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let o=s.options.simulateBreak,a=s.state.doc.lineAt(r.from),c=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let l=r.to;;){let h=e.childAfter(l);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<c?r:null;l=h.to}}function delimitedIndent({closing:s,align:e=!0,units:r=1}){return n=>delimitedStrategy(n,e,r,s)}function delimitedStrategy(s,e,r,n,o){let a=s.textAfter,c=a.match(/^\s*/)[0].length,l=n&&a.slice(c,c+n.length)==n||o==s.pos+c,h=e?bracketedAligned(s):null;return h?l?s.column(h.from):s.column(h.to):s.baseIndent+(l?0:s.unit*r)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let r=s.newDoc,{head:n}=s.newSelection.main,o=r.lineAt(n);if(n>o.from+DontIndentBeyond)return s;let a=r.sliceString(o.from,n);if(!e.some(d=>d.test(a)))return s;let{state:c}=s,l=-1,h=[];for(let{head:d}of c.selection.ranges){let f=c.doc.lineAt(d);if(f.from==l)continue;l=f.from;let g=getIndentation(c,f.from);if(g==null)continue;let _=/^\s*/.exec(f.text)[0],E=indentString(c,g);_!=E&&h.push({from:f.from,to:f.from+_.length,insert:E})}return h.length?[s,{changes:h,sequential:!0}]:s})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(s){let e=s.firstChild,r=s.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?s.to:r.from}:null}function syntaxFolding(s,e,r){let n=syntaxTree(s);if(n.length<r)return null;let o=n.resolveStack(r,1),a=null;for(let c=o;c;c=c.next){let l=c.node;if(l.to<=r||l.from>r)continue;if(a&&l.from<e)break;let h=l.type.prop(foldNodeProp);if(h&&(l.to<n.length-50||n.length==s.doc.length||!isUnfinished(l))){let d=h(l,s);d&&d.from<=r&&d.from>=e&&d.to>r&&(a=d)}}return a}function isUnfinished(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function foldable(s,e,r){for(let n of s.facet(foldService)){let o=n(s,e,r);if(o)return o}return syntaxFolding(s,e,r)}function mapRange(s,e){let r=e.mapPos(s.from,1),n=e.mapPos(s.to,-1);return r>=n?void 0:{from:r,to:n}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(s){let e=[];for(let{head:r}of s.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(s.lineBlockAt(r));return e}const foldState=StateField.define({create(){return Decoration.none},update(s,e){s=s.map(e.changes);for(let r of e.effects)if(r.is(foldEffect)&&!foldExists(s,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(foldConfig),o=n?Decoration.replace({widget:new PreparedFoldWidget(n(e.state,r.value))}):foldWidget;s=s.update({add:[o.range(r.value.from,r.value.to)]})}else r.is(unfoldEffect)&&(s=s.update({filter:(n,o)=>r.value.from!=n||r.value.to!=o,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:n}=e.selection.main;s.between(n,n,(o,a)=>{o<n&&a>n&&(r=!0)}),r&&(s=s.update({filterFrom:n,filterTo:n,filter:(o,a)=>a<=n||o>=n}))}return s},provide:s=>EditorView.decorations.from(s),toJSON(s,e){let r=[];return s.between(0,e.doc.length,(n,o)=>{r.push(n,o)}),r},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<s.length;){let n=s[r++],o=s[r++];if(typeof n!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(n,o))}return Decoration.set(e,!0)}});function findFold(s,e,r){var n;let o=null;return(n=s.field(foldState,!1))===null||n===void 0||n.between(e,r,(a,c)=>{(!o||o.from>a)&&(o={from:a,to:c})}),o}function foldExists(s,e,r){let n=!1;return s.between(e,e,(o,a)=>{o==e&&a==r&&(n=!0)}),n}function maybeEnable(s,e){return s.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=s=>{for(let e of selectedLines(s)){let r=foldable(s.state,e.from,e.to);if(r)return s.dispatch({effects:maybeEnable(s.state,[foldEffect.of(r),announceFold(s,r)])}),!0}return!1},unfoldCode=s=>{if(!s.state.field(foldState,!1))return!1;let e=[];for(let r of selectedLines(s)){let n=findFold(s.state,r.from,r.to);n&&e.push(unfoldEffect.of(n),announceFold(s,n,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function announceFold(s,e,r=!0){let n=s.state.doc.lineAt(e.from).number,o=s.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${s.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${s.state.phrase("to")} ${o}.`)}const foldAll=s=>{let{state:e}=s,r=[];for(let n=0;n<e.doc.length;){let o=s.lineBlockAt(n),a=foldable(e,o.from,o.to);a&&r.push(foldEffect.of(a)),n=(a?s.lineBlockAt(a.to):o).to+1}return r.length&&s.dispatch({effects:maybeEnable(s.state,r)}),!!r.length},unfoldAll=s=>{let e=s.state.field(foldState,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,s.state.doc.length,(n,o)=>{r.push(unfoldEffect.of({from:n,to:o}))}),s.dispatch({effects:r}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(s){return combineConfig(s,defaultConfig)}});function codeFolding(s){let e=[foldState,baseTheme$1$1];return s&&e.push(foldConfig.of(s)),e}function widgetToDOM(s,e){let{state:r}=s,n=r.facet(foldConfig),o=c=>{let l=s.lineBlockAt(s.posAtDOM(c.target)),h=findFold(s.state,l.from,l.to);h&&s.dispatch({effects:unfoldEffect.of(h)}),c.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,o,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",r.phrase("folded code")),a.title=r.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=o,a}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(s){return widgetToDOM(s,null)}}});class PreparedFoldWidget extends WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return widgetToDOM(e,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function foldGutter(s={}){let e=Object.assign(Object.assign({},foldGutterDefaults),s),r=new FoldMarker(e,!0),n=new FoldMarker(e,!1),o=ViewPlugin.fromClass(class{constructor(c){this.from=c.viewport.from,this.markers=this.buildMarkers(c)}update(c){(c.docChanged||c.viewportChanged||c.startState.facet(language)!=c.state.facet(language)||c.startState.field(foldState,!1)!=c.state.field(foldState,!1)||syntaxTree(c.startState)!=syntaxTree(c.state)||e.foldingChanged(c))&&(this.markers=this.buildMarkers(c.view))}buildMarkers(c){let l=new RangeSetBuilder;for(let h of c.viewportLineBlocks){let d=findFold(c.state,h.from,h.to)?n:foldable(c.state,h.from,h.to)?r:null;d&&l.add(h.from,h.from,d)}return l.finish()}}),{domEventHandlers:a}=e;return[o,gutter({class:"cm-foldGutter",markers(c){var l;return((l=c.plugin(o))===null||l===void 0?void 0:l.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(c,l,h)=>{if(a.click&&a.click(c,l,h))return!0;let d=findFold(c.state,l.from,l.to);if(d)return c.dispatch({effects:unfoldEffect.of(d)}),!0;let f=foldable(c.state,l.from,l.to);return f?(c.dispatch({effects:foldEffect.of(f)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,r){this.specs=e;let n;function o(l){let h=StyleModule.newName();return(n||(n=Object.create(null)))["."+h]=l,h}const a=typeof r.all=="string"?r.all:r.all?o(r.all):void 0,c=r.scope;this.scope=c instanceof Language?l=>l.prop(languageDataProp)==c.data:c?l=>l==c:void 0,this.style=tagHighlighter(e.map(l=>({tag:l.tag,class:l.class||o(Object.assign({},l,{tag:null}))})),{all:a}).style,this.module=n?new StyleModule(n):null,this.themeType=r.themeType}static define(e,r){return new HighlightStyle(e,r||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(s){return s.length?[s[0]]:null}});function getHighlighters(s){let e=s.facet(highlighterFacet);return e.length?e:s.facet(fallbackHighlighter)}function syntaxHighlighting(s,e){let r=[treeHighlighter],n;return s instanceof HighlightStyle&&(s.module&&r.push(EditorView.styleModule.of(s.module)),n=s.themeType),e?.fallback?r.push(fallbackHighlighter.of(s)):n?r.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(n=="dark")?[s]:[])):r.push(highlighterFacet.of(s)),r}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let r=syntaxTree(e.state),n=getHighlighters(e.state),o=n!=getHighlighters(e.startState);r.length<e.view.viewport.to&&!o&&r.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(r!=this.tree||e.viewportChanged||o)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,r){if(!r||!this.tree.length)return Decoration.none;let n=new RangeSetBuilder;for(let{from:o,to:a}of e.visibleRanges)highlightTree(this.tree,r,(c,l,h)=>{n.add(c,l,this.markCache[h]||(this.markCache[h]=Decoration.mark({class:h})))},o,a);return n.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:s=>s.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(s){return combineConfig(s,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(s){let e=[],r=s.matched?matchingMark:nonmatchingMark;return e.push(r.range(s.start.from,s.start.to)),s.end&&e.push(r.range(s.end.from,s.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let r=[],n=e.state.facet(bracketMatchingConfig);for(let o of e.state.selection.ranges){if(!o.empty)continue;let a=matchBrackets(e.state,o.head,-1,n)||o.head>0&&matchBrackets(e.state,o.head-1,1,n)||n.afterCursor&&(matchBrackets(e.state,o.head,1,n)||o.head<e.state.doc.length&&matchBrackets(e.state,o.head+1,-1,n));a&&(r=r.concat(n.renderMatch(a,e.state)))}return Decoration.set(r,!0)},provide:s=>EditorView.decorations.from(s)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(s={}){return[bracketMatchingConfig.of(s),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(s,e,r){let n=s.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(n)return n;if(s.name.length==1){let o=r.indexOf(s.name);if(o>-1&&o%2==(e<0?1:0))return[r[o+e]]}return null}function findHandle(s){let e=s.type.prop(bracketMatchingHandle);return e?e(s.node):s}function matchBrackets(s,e,r,n={}){let o=n.maxScanDistance||DefaultScanDist,a=n.brackets||DefaultBrackets,c=syntaxTree(s),l=c.resolveInner(e,r);for(let h=l;h;h=h.parent){let d=matchingNodes(h.type,r,a);if(d&&h.from<h.to){let f=findHandle(h);if(f&&(r>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return matchMarkedBrackets(s,e,r,h,f,d,a)}}return matchPlainBrackets(s,e,r,c,l.type,o,a)}function matchMarkedBrackets(s,e,r,n,o,a,c){let l=n.parent,h={from:o.from,to:o.to},d=0,f=l?.cursor();if(f&&(r<0?f.childBefore(n.from):f.childAfter(n.to)))do if(r<0?f.to<=n.from:f.from>=n.to){if(d==0&&a.indexOf(f.type.name)>-1&&f.from<f.to){let g=findHandle(f);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(matchingNodes(f.type,r,c))d++;else if(matchingNodes(f.type,-r,c)){if(d==0){let g=findHandle(f);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}d--}}while(r<0?f.prevSibling():f.nextSibling());return{start:h,matched:!1}}function matchPlainBrackets(s,e,r,n,o,a,c){let l=r<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),h=c.indexOf(l);if(h<0||h%2==0!=r>0)return null;let d={from:r<0?e-1:e,to:r>0?e+1:e},f=s.doc.iterRange(e,r>0?s.doc.length:0),g=0;for(let _=0;!f.next().done&&_<=a;){let E=f.value;r<0&&(_+=E.length);let A=e+_*r;for(let w=r>0?0:E.length-1,m=r>0?E.length:-1;w!=m;w+=r){let b=c.indexOf(E[w]);if(!(b<0||n.resolveInner(A+w,1).type!=o))if(b%2==0==r>0)g++;else{if(g==1)return{start:d,end:{from:A+w,to:A+w+1},matched:b>>1==h>>1};g--}}r>0&&(_+=E.length)}return f.done?{start:d,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[s]=createTokenType(noTokens,e);function warnForPart(s,e){warned.indexOf(s)>-1||(warned.push(s),console.warn(e))}function createTokenType(s,e){let r=[];for(let l of e.split(" ")){let h=[];for(let d of l.split(".")){let f=s[d]||tags[d];f?typeof f=="function"?h.length?h=h.map(f):warnForPart(d,`Modifier ${d} used at start of tag`):h.length?warnForPart(d,`Tag ${d} used as modifier`):h=Array.isArray(f)?f:[f]:warnForPart(d,`Unknown highlighting tag ${d}`)}for(let d of h)r.push(d)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),o=n+" "+r.map(l=>l.id),a=byTag[o];if(a)return a.id;let c=byTag[o]=NodeType.define({id:typeArray.length,name:n,props:[styleTags({[n]:r})]});return typeArray.push(c),c.id}const toggleComment=s=>{let{state:e}=s,r=e.doc.lineAt(e.selection.main.from),n=getConfig(s.state,r.from);return n.line?toggleLineComment(s):n.block?toggleBlockCommentByLine(s):!1};function command(s,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let o=s(e,r);return o?(n(r.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((s,e)=>changeBlockComment(s,e,selectedLineRanges(e)),0);function getConfig(s,e){let r=s.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(s,{open:e,close:r},n,o){let a=s.sliceDoc(n-SearchMargin,n),c=s.sliceDoc(o,o+SearchMargin),l=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(c)[0].length,d=a.length-l;if(a.slice(d-e.length,d)==e&&c.slice(h,h+r.length)==r)return{open:{pos:n-l,margin:l&&1},close:{pos:o+h,margin:h&&1}};let f,g;o-n<=2*SearchMargin?f=g=s.sliceDoc(n,o):(f=s.sliceDoc(n,n+SearchMargin),g=s.sliceDoc(o-SearchMargin,o));let _=/^\s*/.exec(f)[0].length,E=/\s*$/.exec(g)[0].length,A=g.length-E-r.length;return f.slice(_,_+e.length)==e&&g.slice(A,A+r.length)==r?{open:{pos:n+_+e.length,margin:/\s/.test(f.charAt(_+e.length))?1:0},close:{pos:o-E-r.length,margin:/\s/.test(g.charAt(A-1))?1:0}}:null}function selectedLineRanges(s){let e=[];for(let r of s.selection.ranges){let n=s.doc.lineAt(r.from),o=r.to<=n.to?n:s.doc.lineAt(r.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=o.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:o.to})}return e}function changeBlockComment(s,e,r=e.selection.ranges){let n=r.map(a=>getConfig(e,a.from).block);if(!n.every(a=>a))return null;let o=r.map((a,c)=>findBlockComment(e,n[c],a.from,a.to));if(s!=2&&!o.every(a=>a))return{changes:e.changes(r.map((a,c)=>o[c]?[]:[{from:a.from,insert:n[c].open+" "},{from:a.to,insert:" "+n[c].close}]))};if(s!=1&&o.some(a=>a)){let a=[];for(let c=0,l;c<o.length;c++)if(l=o[c]){let h=n[c],{open:d,close:f}=l;a.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:f.pos-f.margin,to:f.pos+h.close.length})}return{changes:a}}return null}function changeLineComment(s,e,r=e.selection.ranges){let n=[],o=-1;for(let{from:a,to:c}of r){let l=n.length,h=1e9,d=getConfig(e,a).line;if(d){for(let f=a;f<=c;){let g=e.doc.lineAt(f);if(g.from>o&&(a==c||c>g.from)){o=g.from;let _=/^\s*/.exec(g.text)[0].length,E=_==g.length,A=g.text.slice(_,_+d.length)==d?_:-1;_<g.text.length&&_<h&&(h=_),n.push({line:g,comment:A,token:d,indent:_,empty:E,single:!1})}f=g.to+1}if(h<1e9)for(let f=l;f<n.length;f++)n[f].indent<n[f].line.text.length&&(n[f].indent=h);n.length==l+1&&(n[l].single=!0)}}if(s!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:l,token:h,indent:d,empty:f,single:g}of n)(g||!f)&&a.push({from:l.from+d,insert:h+" "});let c=e.changes(a);return{changes:c,selection:e.selection.map(c,1)}}else if(s!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:c,comment:l,token:h}of n)if(l>=0){let d=c.from+l,f=d+h.length;c.text[f-c.from]==" "&&f++,a.push({from:d,to:f})}return{changes:a}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(s){return combineConfig(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,o)=>e(n,o)||r(n,o)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(s,e){let r=e.state.facet(historyConfig),n=e.annotation(fromHistory);if(n){let h=HistEvent.fromTransaction(e,n.selection),d=n.side,f=d==0?s.undone:s.done;return h?f=updateBranch(f,f.length,r.minDepth,h):f=addSelection(f,e.startState.selection),new HistoryState(d==0?n.rest:f,d==0?f:n.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(s=s.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let a=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),l=e.annotation(Transaction.userEvent);return a?s=s.addChanges(a,c,l,r,e):e.selection&&(s=s.addSelection(e.startState.selection,c,l,r.newGroupDelay)),(o=="full"||o=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new HistoryState(s.done.map(HistEvent.fromJSON),s.undone.map(HistEvent.fromJSON))}});function history(s={}){return[historyField_,historyConfig.of(s),EditorView.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return n?(e.preventDefault(),n(r)):!1}})]}function cmd(s,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let o=r.field(historyField_,!1);if(!o)return!1;let a=o.pop(s,r,e);return a?(n(a),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,r,n,o,a){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,r){let n=none$1;for(let o of e.startState.facet(invertedEffects)){let a=o(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(s,e,r,n){let o=e+1>r+20?e-r-1:0,a=s.slice(o,e);return a.push(n),a}function isAdjacent(s,e){let r=[],n=!1;return s.iterChangedRanges((o,a)=>r.push(o,a)),e.iterChangedRanges((o,a,c,l)=>{for(let h=0;h<r.length;){let d=r[h++],f=r[h++];l>=d&&c<=f&&(n=!0)}}),n}function eqSelectionShape(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function conc(s,e){return s.length?e.length?s.concat(e):s:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(s,e){if(s.length){let r=s[s.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return n.length&&n[n.length-1].eq(e)?s:(n.push(e),updateBranch(s,s.length-1,1e9,r.setSelAfter(n)))}else return[HistEvent.selection([e])]}function popSelection(s){let e=s[s.length-1],r=s.slice();return r[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function addMappingToBranch(s,e){if(!s.length)return s;let r=s.length,n=none$1;for(;r;){let o=mapEvent(s[r-1],e,n);if(o.changes&&!o.changes.empty||o.effects.length){let a=s.slice(0,r);return a[r-1]=o,a}else e=o.mapped,r--,n=o.selectionsAfter}return n.length?[HistEvent.selection(n)]:none$1}function mapEvent(s,e,r){let n=conc(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):none$1,r);if(!s.changes)return HistEvent.selection(n);let o=s.changes.map(e),a=e.mapDesc(s.changes,!0),c=s.mapped?s.mapped.composeDesc(a):a;return new HistEvent(o,StateEffect.mapEffects(s.effects,e),c,s.startSelection.map(a),n)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,r,n=0,o=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,r,n,o,a){let c=this.done,l=c[c.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||joinableUserEvent.test(n))&&(!l.selectionsAfter.length&&r-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,isAdjacent(l.changes,e.changes))||n=="input.type.compose")?c=updateBranch(c,c.length-1,o.minDepth,new HistEvent(e.changes.compose(l.changes),conc(e.effects,l.effects),l.mapped,l.startSelection,none$1)):c=updateBranch(c,c.length,o.minDepth,e),new HistoryState(c,none$1,r,n)}addSelection(e,r,n,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return a.length>0&&r-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&eqSelectionShape(a[a.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,r,n)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let o=e==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1],c=a.selectionsAfter[0]||r.selection;if(n&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=o.length==1?none$1:o.slice(0,o.length-1);return a.mapped&&(l=addMappingToBranch(l,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:fromHistory.of({side:e,rest:l,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(s,e){return EditorSelection.create(s.ranges.map(e),s.mainIndex)}function setSel(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:s,dispatch:e},r){let n=updateSel(s.selection,r);return n.eq(s.selection)?!1:(e(setSel(s,n)),!0)}function rangeEnd(s,e){return EditorSelection.cursor(e?s.to:s.from)}function cursorByChar(s,e){return moveSel(s,r=>r.empty?s.moveByChar(r,e):rangeEnd(r,e))}function ltrAtCursor(s){return s.textDirectionAt(s.state.selection.main.head)==Direction.LTR}const cursorCharLeft=s=>cursorByChar(s,!ltrAtCursor(s)),cursorCharRight=s=>cursorByChar(s,ltrAtCursor(s));function cursorByGroup(s,e){return moveSel(s,r=>r.empty?s.moveByGroup(r,e):rangeEnd(r,e))}const cursorGroupLeft=s=>cursorByGroup(s,!ltrAtCursor(s)),cursorGroupRight=s=>cursorByGroup(s,ltrAtCursor(s));function interestingNode(s,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(s,e,r){let n=syntaxTree(s).resolveInner(e.head),o=r?NodeProp.closedBy:NodeProp.openedBy;for(let h=e.head;;){let d=r?n.childAfter(h):n.childBefore(h);if(!d)break;interestingNode(s,d,o)?n=d:h=r?d.to:d.from}let a=n.type.prop(o),c,l;return a&&(c=r?matchBrackets(s,n.from,1):matchBrackets(s,n.to,-1))&&c.matched?l=r?c.end.to:c.end.from:l=r?n.to:n.from,EditorSelection.cursor(l,r?-1:1)}const cursorSyntaxLeft=s=>moveSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),cursorSyntaxRight=s=>moveSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function cursorByLine(s,e){return moveSel(s,r=>{if(!r.empty)return rangeEnd(r,e);let n=s.moveVertically(r,e);return n.head!=r.head?n:s.moveToLineBoundary(r,e)})}const cursorLineUp=s=>cursorByLine(s,!1),cursorLineDown=s=>cursorByLine(s,!0);function pageInfo(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,r=0,n=0,o;if(e){for(let a of s.state.facet(EditorView.scrollMargins)){let c=a(s);c?.top&&(r=Math.max(c?.top,r)),c?.bottom&&(n=Math.max(c?.bottom,n))}o=s.scrollDOM.clientHeight-r-n}else o=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(s.defaultLineHeight,o-5)}}function cursorByPage(s,e){let r=pageInfo(s),{state:n}=s,o=updateSel(n.selection,c=>c.empty?s.moveVertically(c,e,r.height):rangeEnd(c,e));if(o.eq(n.selection))return!1;let a;if(r.selfScroll){let c=s.coordsAtPos(n.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),h=l.top+r.marginTop,d=l.bottom-r.marginBottom;c&&c.top>h&&c.bottom<d&&(a=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:c.top-h}))}return s.dispatch(setSel(n,o),{effects:a}),!0}const cursorPageUp=s=>cursorByPage(s,!1),cursorPageDown=s=>cursorByPage(s,!0);function moveByLineBoundary(s,e,r){let n=s.lineBlockAt(e.head),o=s.moveToLineBoundary(e,r);if(o.head==e.head&&o.head!=(r?n.to:n.from)&&(o=s.moveToLineBoundary(e,r,!1)),!r&&o.head==n.from&&n.length){let a=/^\s*/.exec(s.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(o=EditorSelection.cursor(n.from+a))}return o}const cursorLineBoundaryForward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!0)),cursorLineBoundaryBackward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!1)),cursorLineBoundaryLeft=s=>moveSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),cursorLineBoundaryRight=s=>moveSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),cursorLineStart=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from,1)),cursorLineEnd=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to,-1));function toMatchingBracket(s,e,r){let n=!1,o=updateSel(s.selection,a=>{let c=matchBrackets(s,a.head,-1)||matchBrackets(s,a.head,1)||a.head>0&&matchBrackets(s,a.head-1,1)||a.head<s.doc.length&&matchBrackets(s,a.head+1,-1);if(!c||!c.end)return a;n=!0;let l=c.start.from==a.head?c.end.to:c.end.from;return r?EditorSelection.range(a.anchor,l):EditorSelection.cursor(l)});return n?(e(setSel(s,o)),!0):!1}const cursorMatchingBracket=({state:s,dispatch:e})=>toMatchingBracket(s,e,!1);function extendSel(s,e){let r=updateSel(s.state.selection,n=>{let o=e(n);return EditorSelection.range(n.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return r.eq(s.state.selection)?!1:(s.dispatch(setSel(s.state,r)),!0)}function selectByChar(s,e){return extendSel(s,r=>s.moveByChar(r,e))}const selectCharLeft=s=>selectByChar(s,!ltrAtCursor(s)),selectCharRight=s=>selectByChar(s,ltrAtCursor(s));function selectByGroup(s,e){return extendSel(s,r=>s.moveByGroup(r,e))}const selectGroupLeft=s=>selectByGroup(s,!ltrAtCursor(s)),selectGroupRight=s=>selectByGroup(s,ltrAtCursor(s)),selectSyntaxLeft=s=>extendSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),selectSyntaxRight=s=>extendSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function selectByLine(s,e){return extendSel(s,r=>s.moveVertically(r,e))}const selectLineUp=s=>selectByLine(s,!1),selectLineDown=s=>selectByLine(s,!0);function selectByPage(s,e){return extendSel(s,r=>s.moveVertically(r,e,pageInfo(s).height))}const selectPageUp=s=>selectByPage(s,!1),selectPageDown=s=>selectByPage(s,!0),selectLineBoundaryForward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!0)),selectLineBoundaryBackward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!1)),selectLineBoundaryLeft=s=>extendSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),selectLineBoundaryRight=s=>extendSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),selectLineStart=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from)),selectLineEnd=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to)),cursorDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:0})),!0),cursorDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.doc.length})),!0),selectDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:0})),!0),selectDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),selectAll=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),selectLine=({state:s,dispatch:e})=>{let r=selectedLineBlocks(s).map(({from:n,to:o})=>EditorSelection.range(n,Math.min(o+1,s.doc.length)));return e(s.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:s,dispatch:e})=>{let r=updateSel(s.selection,n=>{var o;let a=syntaxTree(s).resolveStack(n.from,1);for(let c=a;c;c=c.next){let{node:l}=c;if((l.from<n.from&&l.to>=n.to||l.to>n.to&&l.from<=n.from)&&(!((o=l.parent)===null||o===void 0)&&o.parent))return EditorSelection.range(l.to,l.from)}return n});return e(setSel(s,r)),!0},simplifySelection=({state:s,dispatch:e})=>{let r=s.selection,n=null;return r.ranges.length>1?n=EditorSelection.create([r.main]):r.main.empty||(n=EditorSelection.create([EditorSelection.cursor(r.main.head)])),n?(e(setSel(s,n)),!0):!1};function deleteBy(s,e){if(s.state.readOnly)return!1;let r="delete.selection",{state:n}=s,o=n.changeByRange(a=>{let{from:c,to:l}=a;if(c==l){let h=e(a);h<c?(r="delete.backward",h=skipAtomic(s,h,!1)):h>c&&(r="delete.forward",h=skipAtomic(s,h,!0)),c=Math.min(c,h),l=Math.max(l,h)}else c=skipAtomic(s,c,!1),l=skipAtomic(s,l,!0);return c==l?{range:a}:{changes:{from:c,to:l},range:EditorSelection.cursor(c,c<a.head?-1:1)}});return o.changes.empty?!1:(s.dispatch(n.update(o,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?EditorView.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(s,e,r){if(s instanceof EditorView)for(let n of s.state.facet(EditorView.atomicRanges).map(o=>o(s)))n.between(e,e,(o,a)=>{o<e&&a>e&&(e=r?a:o)});return e}const deleteByChar=(s,e)=>deleteBy(s,r=>{let n=r.from,{state:o}=s,a=o.doc.lineAt(n),c,l;if(!e&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,n-a.from))){if(c[c.length-1]=="	")return n-1;let h=countColumn(c,o.tabSize),d=h%getIndentUnit(o)||getIndentUnit(o);for(let f=0;f<d&&c[c.length-1-f]==" ";f++)n--;l=n}else l=findClusterBreak(a.text,n-a.from,e,e)+a.from,l==n&&a.number!=(e?o.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,n-a.from))&&(l=findClusterBreak(a.text,l-a.from,!1,!1)+a.from);return l}),deleteCharBackward=s=>deleteByChar(s,!1),deleteCharForward=s=>deleteByChar(s,!0),deleteByGroup=(s,e)=>deleteBy(s,r=>{let n=r.head,{state:o}=s,a=o.doc.lineAt(n),c=o.charCategorizer(n);for(let l=null;;){if(n==(e?a.to:a.from)){n==r.head&&a.number!=(e?o.doc.lines:1)&&(n+=e?1:-1);break}let h=findClusterBreak(a.text,n-a.from,e)+a.from,d=a.text.slice(Math.min(n,h)-a.from,Math.max(n,h)-a.from),f=c(d);if(l!=null&&f!=l)break;(d!=" "||n!=r.head)&&(l=f),n=h}return n}),deleteGroupBackward=s=>deleteByGroup(s,!1),deleteGroupForward=s=>deleteByGroup(s,!0),deleteToLineEnd=s=>deleteBy(s,e=>{let r=s.lineBlockAt(e.head).to;return e.head<r?r:Math.min(s.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=s=>deleteBy(s,e=>{let r=s.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),deleteLineBoundaryForward=s=>deleteBy(s,e=>{let r=s.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(s.state.doc.length,e.head+1)}),splitLine=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=s.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Text$1.of(["",""])},range:EditorSelection.cursor(n.from)}));return e(s.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=s.changeByRange(n=>{if(!n.empty||n.from==0||n.from==s.doc.length)return{range:n};let o=n.from,a=s.doc.lineAt(o),c=o==a.from?o-1:findClusterBreak(a.text,o-a.from,!1)+a.from,l=o==a.to?o+1:findClusterBreak(a.text,o-a.from,!0)+a.from;return{changes:{from:c,to:l,insert:s.doc.slice(o,l).append(s.doc.slice(c,o))},range:EditorSelection.cursor(l)}});return r.changes.empty?!1:(e(s.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(s){let e=[],r=-1;for(let n of s.selection.ranges){let o=s.doc.lineAt(n.from),a=s.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=s.doc.lineAt(n.to-1)),r>=o.number){let c=e[e.length-1];c.to=a.to,c.ranges.push(n)}else e.push({from:o.from,to:a.to,ranges:[n]});r=a.number+1}return e}function moveLine(s,e,r){if(s.readOnly)return!1;let n=[],o=[];for(let a of selectedLineBlocks(s)){if(r?a.to==s.doc.length:a.from==0)continue;let c=s.doc.lineAt(r?a.to+1:a.from-1),l=c.length+1;if(r){n.push({from:a.to,to:c.to},{from:a.from,insert:c.text+s.lineBreak});for(let h of a.ranges)o.push(EditorSelection.range(Math.min(s.doc.length,h.anchor+l),Math.min(s.doc.length,h.head+l)))}else{n.push({from:c.from,to:a.from},{from:a.to,insert:s.lineBreak+c.text});for(let h of a.ranges)o.push(EditorSelection.range(h.anchor-l,h.head-l))}}return n.length?(e(s.update({changes:n,scrollIntoView:!0,selection:EditorSelection.create(o,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:s,dispatch:e})=>moveLine(s,e,!1),moveLineDown=({state:s,dispatch:e})=>moveLine(s,e,!0);function copyLine(s,e,r){if(s.readOnly)return!1;let n=[];for(let o of selectedLineBlocks(s))r?n.push({from:o.from,insert:s.doc.slice(o.from,o.to)+s.lineBreak}):n.push({from:o.to,insert:s.lineBreak+s.doc.slice(o.from,o.to)});return e(s.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:s,dispatch:e})=>copyLine(s,e,!1),copyLineDown=({state:s,dispatch:e})=>copyLine(s,e,!0),deleteLine=s=>{if(s.state.readOnly)return!1;let{state:e}=s,r=e.changes(selectedLineBlocks(e).map(({from:o,to:a})=>(o>0?o--:a<e.doc.length&&a++,{from:o,to:a}))),n=updateSel(e.selection,o=>s.moveVertically(o,!0)).map(r);return s.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=syntaxTree(s).resolveInner(e),n=r.childBefore(e),o=r.childAfter(e),a;return n&&o&&n.to<=e&&o.from>=e&&(a=n.type.prop(NodeProp.closedBy))&&a.indexOf(o.name)>-1&&s.doc.lineAt(n.to).from==s.doc.lineAt(o.from).from&&!/\S/.test(s.sliceDoc(n.to,o.from))?{from:n.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(s){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(o=>{let{from:a,to:c}=o,l=e.doc.lineAt(a),h=!s&&a==c&&isBetweenBrackets(e,a);s&&(a=c=(c<=l.to?l:e.doc.lineAt(c)).to);let d=new IndentContext(e,{simulateBreak:a,simulateDoubleBreak:!!h}),f=getIndentation(d,a);for(f==null&&(f=countColumn(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));c<l.to&&/\s/.test(l.text[c-l.from]);)c++;h?{from:a,to:c}=h:a>l.from&&a<l.from+100&&!/\S/.test(l.text.slice(0,a))&&(a=l.from);let g=["",indentString(e,f)];return h&&g.push(indentString(e,d.lineIndent(l.from,-1))),{changes:{from:a,to:c,insert:Text$1.of(g)},range:EditorSelection.cursor(a+1+g[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(s,e){let r=-1;return s.changeByRange(n=>{let o=[];for(let c=n.from;c<=n.to;){let l=s.doc.lineAt(c);l.number>r&&(n.empty||n.to>l.from)&&(e(l,o,n),r=l.number),c=l.to+1}let a=s.changes(o);return{changes:o,range:EditorSelection.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const indentSelection=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=Object.create(null),n=new IndentContext(s,{overrideIndentation:a=>{let c=r[a];return c??-1}}),o=changeBySelectedLine(s,(a,c,l)=>{let h=getIndentation(n,a.from);if(h==null)return;/\S/.test(a.text)||(h=0);let d=/^\s*/.exec(a.text)[0],f=indentString(s,h);(d!=f||l.from<a.from+d.length)&&(r[a.from]=h,c.push({from:a.from,to:a.from+d.length,insert:f}))});return o.changes.empty||e(s.update(o,{userEvent:"indent"})),!0},indentMore=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(r,n)=>{n.push({from:r.from,insert:s.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(r,n)=>{let o=/^\s*/.exec(r.text)[0];if(!o)return;let a=countColumn(o,s.tabSize),c=0,l=indentString(s,Math.max(0,a-getIndentUnit(s)));for(;c<o.length&&c<l.length&&o.charCodeAt(c)==l.charCodeAt(c);)c++;n.push({from:r.from+c,to:r.from+o.length,insert:l.slice(c)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};var define_process_env_default={};class Stack{constructor(e,r,n,o,a,c,l,h,d,f=0,g){this.p=e,this.stack=r,this.state=n,this.reducePos=o,this.pos=a,this.score=c,this.buffer=l,this.bufferBase=h,this.curContext=d,this.lookAhead=f,this.parent=g}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,n=0){let o=e.parser.context;return new Stack(e,[],r,n,n,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var r;let n=e>>19,o=e&65535,{parser:a}=this.p,c=a.dynamicPrecedence(o);if(c&&(this.score+=c),n==0){this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),this.reduceContext(o,this.reducePos);return}let l=this.stack.length-(n-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,d=this.reducePos-h;d>=2e3&&!(!((r=this.p.parser.nodeSet.types[o])===null||r===void 0)&&r.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=d));let f=l?this.stack[l-1]:0,g=this.bufferBase+this.buffer.length-f;if(o<a.minRepeatTerm||e&131072){let _=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,h,_,g+4,!0)}if(e&262144)this.state=this.stack[l];else{let _=this.stack[l-3];this.state=a.getGoto(_,o,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(o,h)}storeNode(e,r,n,o=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let c=this,l=this.buffer.length;if(l==0&&c.parent&&(l=c.bufferBase-c.parent.bufferBase,c=c.parent),l>0&&c.buffer[l-4]==0&&c.buffer[l-1]>-1){if(r==n)return;if(c.buffer[l-2]>=r){c.buffer[l-2]=n;return}}}if(!a||this.pos==n)this.buffer.push(e,r,n,o);else{let c=this.buffer.length;if(c>0&&this.buffer[c-4]!=0)for(;c>0&&this.buffer[c-2]>n;)this.buffer[c]=this.buffer[c-4],this.buffer[c+1]=this.buffer[c-3],this.buffer[c+2]=this.buffer[c-2],this.buffer[c+3]=this.buffer[c-1],c-=4,o>4&&(o-=4);this.buffer[c]=e,this.buffer[c+1]=r,this.buffer[c+2]=n,this.buffer[c+3]=o}}shift(e,r,n,o){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=o,this.shiftContext(r,n),r<=this.p.parser.maxNode&&this.buffer.push(r,n,o,4);else{let a=e,{parser:c}=this.p;(o>this.pos||r<=c.maxNode)&&(this.pos=o,c.stateFlag(a,1)||(this.reducePos=o)),this.pushState(a,n),this.shiftContext(r,n),r<=c.maxNode&&this.buffer.push(r,n,o,4)}}apply(e,r,n,o){e&65536?this.reduce(e):this.shift(e,r,n,o)}useNode(e,r){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(r,o),this.buffer.push(n,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let n=e.buffer.slice(r),o=e.bufferBase+r;for(;e&&o==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,r){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,r,4),this.storeNode(0,this.pos,r,n?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(e){for(let r=new SimulatedStack(this);;){let n=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,e);if(n==0)return!1;if(!(n&65536))return!0;r.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let o=[];for(let a=0,c;a<r.length;a+=2)(c=r[a+1])!=this.state&&this.p.parser.hasAction(c,e)&&o.push(r[a],c);if(this.stack.length<120)for(let a=0;o.length<8&&a<r.length;a+=2){let c=r[a+1];o.some((l,h)=>h&1&&l==c)||o.push(r[a],c)}r=o}let n=[];for(let o=0;o<r.length&&n.length<4;o+=2){let a=r[o+1];if(a==this.state)continue;let c=this.split();c.pushState(a,this.pos),c.storeNode(0,c.pos,c.pos,4,!0),c.shiftContext(r[o],this.pos),c.reducePos=this.pos,c.score-=200,n.push(c)}return n}forceReduce(){let{parser:e}=this.p,r=e.stateSlot(this.state,5);if(!(r&65536))return!1;if(!e.validAction(this.state,r)){let n=r>>19,o=r&65535,a=this.stack.length-n*3;if(a<0||e.getGoto(this.stack[a],o,!1)<0){let c=this.findForcedReduction();if(c==null)return!1;r=c}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:e}=this.p,r=[],n=(o,a)=>{if(!r.includes(o))return r.push(o),e.allActions(o,c=>{if(!(c&393216))if(c&65536){let l=(c>>19)-a;if(l>1){let h=c&65535,d=this.stack.length-l*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return l<<19|65536|h}}else{let l=n(c,a+1);if(l!=null)return l}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(r)))}reduceContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(r)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let r=new StackContext(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.strict?e.hash(r):0}}class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let r=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=o}}class StackBufferCursor{constructor(e,r,n){this.stack=e,this.pos=r,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,r=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,r,r-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(s,e=Uint16Array){if(typeof s!="string")return s;let r=null;for(let n=0,o=0;n<s.length;){let a=0;for(;;){let c=s.charCodeAt(n++),l=!1;if(c==126){a=65535;break}c>=92&&c--,c>=34&&c--;let h=c-32;if(h>=46&&(h-=46,l=!0),a+=h,l)break;a*=46}r?r[o++]=a:r=new e(a)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,r){this.input=e,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(e,r){let n=this.range,o=this.rangeIndex,a=this.pos+e;for(;a<n.from;){if(!o)return null;let c=this.ranges[--o];a-=n.from-c.to,n=c}for(;r<0?a>n.to:a>=n.to;){if(o==this.ranges.length-1)return null;let c=this.ranges[++o];a+=c.from-n.to,n=c}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let r of this.ranges)if(r.to>e)return Math.max(e,r.from);return this.end}peek(e){let r=this.chunkOff+e,n,o;if(r>=0&&r<this.chunk.length)n=this.pos+e,o=this.chunk.charCodeAt(r);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(n=a,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let c=this.rangeIndex,l=this.range;for(;l.to<=n;)l=this.ranges[++c];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-n)),o=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),o}acceptToken(e,r=0){let n=r?this.resolveOffset(r,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),r=this.pos+e.length;this.chunk=r>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,r){if(r?(this.token=r,r.start=e,r.lookAhead=e+1,r.value=r.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,r){if(e>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,r-this.chunkPos);if(e>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,r-this.chunk2Pos);if(e>=this.range.from&&r<=this.range.to)return this.input.read(e,r);let n="";for(let o of this.ranges){if(o.from>=r)break;o.to>e&&(n+=this.input.read(Math.max(o.from,e),Math.min(o.to,r)))}return n}}class TokenGroup{constructor(e,r){this.data=e,this.id=r}token(e,r){let{parser:n}=r.p;readToken(this.data,e,r,this.id,n.data,n.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,r={}){this.token=e,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function readToken(s,e,r,n,o,a){let c=0,l=1<<n,{dialect:h}=r.p.parser;e:for(;l&s[c];){let d=s[c+1];for(let E=c+3;E<d;E+=2)if((s[E+1]&l)>0){let A=s[E];if(h.allows(A)&&(e.token.value==-1||e.token.value==A||overrides(A,e.token.value,o,a))){e.acceptToken(A);break}}let f=e.next,g=0,_=s[c+2];if(e.next<0&&_>g&&s[d+_*3-3]==65535){c=s[d+_*3-1];continue e}for(;g<_;){let E=g+_>>1,A=d+E+(E<<1),w=s[A],m=s[A+1]||65536;if(f<w)_=E;else if(f>=m)g=E+1;else{c=s[A+2],e.advance();continue e}}break}}function findOffset(s,e,r){for(let n=e,o;(o=s[n])!=65535;n++)if(o==r)return n-e;return-1}function overrides(s,e,r,n){let o=findOffset(r,n,e);return o<0||findOffset(r,n,s)<o}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(s,e,r){let n=s.cursor(IterMode.IncludeAnonymous);for(n.moveTo(e);;)if(!(r<0?n.childBefore(e):n.childAfter(e)))for(;;){if((r<0?n.to<e:n.from>e)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(s.length,Math.max(n.from+1,e+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:s.length}}class FragmentCursor{constructor(e,r){this.fragments=e,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let n=this.trees[r],o=this.index[r];if(o==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=n.children[o],c=this.start[r]+n.positions[o];if(c>e)return this.nextStart=c,null;if(a instanceof Tree){if(c==e){if(c<this.safeFrom)return null;let l=c+a.length;if(l<=this.safeTo){let h=a.prop(NodeProp.lookAhead);if(!h||l+h<this.fragment.to)return a}}this.index[r]++,c+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(c),this.index.push(0))}else this.index[r]++,this.nextStart=c+a.length}}}class TokenCache{constructor(e,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new CachedToken)}getActions(e){let r=0,n=null,{parser:o}=e.p,{tokenizers:a}=o,c=o.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<a.length;d++){if(!(1<<d&c))continue;let f=a[d],g=this.tokens[d];if(!(n&&!f.fallback)&&((f.contextual||g.start!=e.pos||g.mask!=c||g.context!=l)&&(this.updateCachedToken(g,f,e),g.mask=c,g.context=l),g.lookAhead>g.end+25&&(h=Math.max(g.lookAhead,h)),g.value!=0)){let _=r;if(g.extended>-1&&(r=this.addActions(e,g.extended,g.end,r)),r=this.addActions(e,g.value,g.end,r),!f.extend&&(n=g,r>_))break}}for(;this.actions.length>r;)this.actions.pop();return h&&e.setLookAhead(h),!n&&e.pos==this.stream.end&&(n=new CachedToken,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,r=this.addActions(e,n.value,n.end,r)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let r=new CachedToken,{pos:n,p:o}=e;return r.start=n,r.end=Math.min(n+1,o.stream.end),r.value=n==o.stream.end?o.parser.eofTerm:0,r}updateCachedToken(e,r,n){let o=this.stream.clipPos(n.pos);if(r.token(this.stream.reset(o,e),n),e.value>-1){let{parser:a}=n.p;for(let c=0;c<a.specialized.length;c++)if(a.specialized[c]==e.value){let l=a.specializers[c](this.stream.read(e.start,e.end),n);if(l>=0&&n.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,r,n,o){for(let a=0;a<o;a+=3)if(this.actions[a]==e)return o;return this.actions[o++]=e,this.actions[o++]=r,this.actions[o++]=n,o}addActions(e,r,n,o){let{state:a}=e,{parser:c}=e.p,{data:l}=c;for(let h=0;h<2;h++)for(let d=c.stateSlot(a,h?2:1);;d+=3){if(l[d]==65535)if(l[d+1]==1)d=pair(l,d+2);else{o==0&&l[d+1]==2&&(o=this.putAction(pair(l,d+2),r,n,o));break}l[d]==r&&(o=this.putAction(pair(l,d+1),r,n,o))}return o}}class Parse{constructor(e,r,n,o){this.parser=e,this.input=r,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(r,o),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:a}=o[0];this.stacks=[Stack.start(this,e.top[0],a)],this.fragments=n.length&&this.stream.end-a>e.bufferLength*4?new FragmentCursor(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,r=this.minStackPos,n=this.stacks=[],o,a;if(this.bigReductionCount>300&&e.length==1){let[c]=e;for(;c.forceReduce()&&c.stack.length&&c.stack[c.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let c=0;c<e.length;c++){let l=e[c];for(;;){if(this.tokens.mainToken=null,l.pos>r)n.push(l);else{if(this.advanceStack(l,n,e))continue;{o||(o=[],a=[]),o.push(l);let h=this.tokens.getMainToken(l);a.push(h.value,h.end)}}break}}if(!n.length){let c=o&&findFinished(o);if(c)return verbose&&console.log("Finish with "+this.stackID(c)),this.stackToTree(c);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&o){let c=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,a,n);if(c)return verbose&&console.log("Force-finish "+this.stackID(c)),this.stackToTree(c.forceAll())}if(this.recovering){let c=this.recovering==1?1:this.recovering*3;if(n.length>c)for(n.sort((l,h)=>h.score-l.score);n.length>c;)n.pop();n.some(l=>l.reducePos>r)&&this.recovering--}else if(n.length>1){e:for(let c=0;c<n.length-1;c++){let l=n[c];for(let h=c+1;h<n.length;h++){let d=n[h];if(l.sameState(d)||l.buffer.length>500&&d.buffer.length>500)if((l.score-d.score||l.buffer.length-d.buffer.length)>0)n.splice(h--,1);else{n.splice(c--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let c=1;c<n.length;c++)n[c].pos<this.minStackPos&&(this.minStackPos=n[c].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,r,n){let o=e.pos,{parser:a}=this,c=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,f=d?e.curContext.hash:0;for(let g=this.fragments.nodeAt(o);g;){let _=this.parser.nodeSet.types[g.type.id]==g.type?a.getGoto(e.state,g.type.id):-1;if(_>-1&&g.length&&(!d||(g.prop(NodeProp.contextHash)||0)==f))return e.useNode(g,_),verbose&&console.log(c+this.stackID(e)+` (via reuse of ${a.getName(g.type.id)})`),!0;if(!(g instanceof Tree)||g.children.length==0||g.positions[0]>0)break;let E=g.children[0];if(E instanceof Tree&&g.positions[0]==0)g=E;else break}}let l=a.stateSlot(e.state,4);if(l>0)return e.reduce(l),verbose&&console.log(c+this.stackID(e)+` (via always-reduce ${a.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let f=h[d++],g=h[d++],_=h[d++],E=d==h.length||!n,A=E?e:e.split(),w=this.tokens.mainToken;if(A.apply(f,g,w?w.start:A.pos,_),verbose&&console.log(c+this.stackID(A)+` (via ${f&65536?`reduce of ${a.getName(f&65535)}`:"shift"} for ${a.getName(g)} @ ${o}${A==e?"":", split"})`),E)return!0;A.pos>o?r.push(A):n.push(A)}return!1}advanceFully(e,r){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return pushStackDedup(e,r),!0}}runRecovery(e,r,n){let o=null,a=!1;for(let c=0;c<e.length;c++){let l=e[c],h=r[c<<1],d=r[(c<<1)+1],f=verbose?this.stackID(l)+" -> ":"";if(l.deadEnd&&(a||(a=!0,l.restart(),verbose&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,n))))continue;let g=l.split(),_=f;for(let E=0;g.forceReduce()&&E<10&&(verbose&&console.log(_+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,n));E++)verbose&&(_=this.stackID(g)+" -> ");for(let E of l.recoverByInsert(h))verbose&&console.log(f+this.stackID(E)+" (via recover-insert)"),this.advanceFully(E,n);this.stream.end>l.pos?(d==l.pos&&(d++,h=0),l.recoverByDelete(h,d),verbose&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),pushStackDedup(l,n)):(!o||o.score<l.score)&&(o=l)}return o}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let r=(stackIDs||(stackIDs=new WeakMap)).get(e);return r||stackIDs.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}}function pushStackDedup(s,e){for(let r=0;r<e.length;r++){let n=e[r];if(n.pos==s.pos&&n.sameState(s)){e[r].score<s.score&&(e[r]=s);return}}e.push(s)}class Dialect{constructor(e,r,n){this.source=e,this.flags=r,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const id=s=>s;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let r=e.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let l=0;l<e.repeatNodeCount;l++)r.push("");let n=Object.keys(e.topRules).map(l=>e.topRules[l][1]),o=[];for(let l=0;l<r.length;l++)o.push([]);function a(l,h,d){o[l].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];typeof h=="string"&&(h=NodeProp[h]);for(let d=1;d<l.length;){let f=l[d++];if(f>=0)a(f,h,l[d++]);else{let g=l[d+-f];for(let _=-f;_>0;_--)a(l[d++],h,g);d++}}}this.nodeSet=new NodeSet(r.map((l,h)=>NodeType.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:o[h],top:n.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let c=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new TokenGroup(c,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,r,n){let o=new Parse(this,e,r,n);for(let a of this.wrappers)o=a(o,e,r,n);return o}getGoto(e,r,n=!1){let o=this.goto;if(r>=o[0])return-1;for(let a=o[r+1];;){let c=o[a++],l=c&1,h=o[a++];if(l&&n)return h;for(let d=a+(c>>1);a<d;a++)if(o[a]==e)return h;if(l)return-1}}hasAction(e,r){let n=this.data;for(let o=0;o<2;o++)for(let a=this.stateSlot(e,o?2:1),c;;a+=3){if((c=n[a])==65535)if(n[a+1]==1)c=n[a=pair(n,a+2)];else{if(n[a+1]==2)return pair(n,a+2);break}if(c==r||c==0)return pair(n,a+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}validAction(e,r){return!!this.allActions(e,n=>n==r?!0:null)}allActions(e,r){let n=this.stateSlot(e,4),o=n?r(n):void 0;for(let a=this.stateSlot(e,1);o==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=pair(this.data,a+2);else break;o=r(pair(this.data,a+1))}return o}nextStates(e){let r=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=pair(this.data,n+2);else break;if(!(this.data[n+2]&1)){let o=this.data[n+1];r.some((a,c)=>c&1&&a==o)||r.push(this.data[n],o)}}return r}configure(e){let r=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=n}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(n=>{let o=e.tokenizers.find(a=>a.from==n);return o?o.to:n})),e.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((n,o)=>{let a=e.specializers.find(l=>l.from==n.external);if(!a)return n;let c=Object.assign(Object.assign({},n),{external:a.to});return r.specializers[o]=getSpecializer(c),c})),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){let r=Object.keys(this.dialects),n=r.map(()=>!1);if(e)for(let a of e.split(" ")){let c=r.indexOf(a);c>=0&&(n[c]=!0)}let o=null;for(let a=0;a<r.length;a++)if(!n[a])for(let c=this.dialects[r[a]],l;(l=this.data[c++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[l]=1;return new Dialect(e,n,o)}static deserialize(e){return new LRParser(e)}}function pair(s,e){return s[e]|s[e+1]<<16}function findFinished(s){let e=null;for(let r of s){let n=r.p.stoppedAt;(r.pos==r.p.stream.end||n!=null&&r.pos>n)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}function getSpecializer(s){if(s.external){let e=s.extend?1:0;return(r,n)=>s.external(r,n)<<1|e}return s.get}const printKeyword=1,indent=201,dedent=202,newline$1=203,blankLineStart=204,newlineBracketed=205,eof=206,formatString1Content=207,formatString1Brace=2,formatString1End=208,formatString2Content=209,formatString2Brace=3,formatString2End=210,formatString1lContent=211,formatString1lBrace=4,formatString1lEnd=212,formatString2lContent=213,formatString2lBrace=5,formatString2lEnd=214,ParenL=26,ParenthesizedExpression=27,TupleExpression=51,ComprehensionExpression=52,BracketL=57,ArrayExpression=58,ArrayComprehensionExpression=59,BraceL=61,DictionaryExpression=62,DictionaryComprehensionExpression=63,SetExpression=64,SetComprehensionExpression=65,ArgList=67,subscript=251,FormatString=74,importList=270,TypeParamList=115,ParamList=133,SequencePattern=154,MappingPattern=155,PatternArgList=158,newline=10,carriageReturn=13,space=32,tab=9,hash=35,parenOpen=40,dot=46,braceOpen=123,singleQuote=39,doubleQuote=34,backslash=92,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,FormatString,DictionaryExpression,DictionaryComprehensionExpression,SequencePattern,MappingPattern,PatternArgList,TypeParamList]);function isLineBreak(s){return s==newline||s==carriageReturn}const newlines=new ExternalTokenizer((s,e)=>{let r;if(s.next<0)s.acceptToken(eof);else if(e.context.depth<0)isLineBreak(s.next)&&s.acceptToken(newlineBracketed,1);else if(((r=s.peek(-1))<0||isLineBreak(r))&&e.canShift(blankLineStart)){let n=0;for(;s.next==space||s.next==tab;)s.advance(),n++;(s.next==newline||s.next==carriageReturn||s.next==hash)&&s.acceptToken(blankLineStart,-n)}else isLineBreak(s.next)&&s.acceptToken(newline$1,1)},{contextual:!0}),indentation=new ExternalTokenizer((s,e)=>{let r=e.context.depth;if(r<0)return;let n=s.peek(-1);if(n==newline||n==carriageReturn){let o=0,a=0;for(;;){if(s.next==space)o++;else if(s.next==tab)o+=8-o%8;else break;s.advance(),a++}o!=r&&s.next!=newline&&s.next!=carriageReturn&&s.next!=hash&&(o<r?s.acceptToken(dedent,-a):s.acceptToken(indent))}});function IndentLevel(s,e){this.parent=s,this.depth=e,this.hash=(s?s.hash+s.hash<<8:0)+e+(e<<4)}const topIndent=new IndentLevel(null,0);function countIndent(s){let e=0;for(let r=0;r<s.length;r++)e+=s.charCodeAt(r)==tab?8-e%8:1;return e}const trackIndent=new ContextTracker({start:topIndent,reduce(s,e){return s.depth<0&&bracketed.has(e)?s.parent:s},shift(s,e,r,n){return e==indent?new IndentLevel(s,countIndent(n.read(n.pos,r.pos))):e==dedent?s.parent:e==ParenL||e==BracketL||e==BraceL?new IndentLevel(s,-1):s},hash(s){return s.hash}}),legacyPrint=new ExternalTokenizer(s=>{for(let e=0;e<5;e++){if(s.next!="print".charCodeAt(e))return;s.advance()}if(!/\w/.test(String.fromCharCode(s.next)))for(let e=0;;e++){let r=s.peek(e);if(!(r==space||r==tab)){r!=parenOpen&&r!=dot&&r!=newline&&r!=carriageReturn&&r!=hash&&s.acceptToken(printKeyword);return}}});function formatString(s,e,r,n,o){return new ExternalTokenizer(a=>{let c=a.pos;for(;!(a.next<0);)if(a.next==braceOpen)if(a.peek(1)==braceOpen)a.advance(2);else{if(a.pos==c){a.acceptToken(n,1);return}break}else if(a.next==backslash)a.advance(),a.next>=0&&a.advance();else if(a.next==s&&(e==1||a.peek(1)==s&&a.peek(2)==s)){if(a.pos==c){a.acceptToken(o,e);return}break}else a.advance();a.pos>c&&a.acceptToken(r)})}const formatString1=formatString(singleQuote,1,formatString1Content,formatString1Brace,formatString1End),formatString2=formatString(doubleQuote,1,formatString2Content,formatString2Brace,formatString2End),formatString1l=formatString(singleQuote,3,formatString1lContent,formatString1lBrace,formatString1lEnd),formatString2l=formatString(doubleQuote,3,formatString2lContent,formatString2lBrace,formatString2lEnd),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},parser=LRParser.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"⚠ print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:trackIndent,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[legacyPrint,indentation,newlines,formatString1,formatString2,formatString1l,formatString2l,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:s=>spec_identifier[s]||-1}],tokenPrec:7372});class CompletionContext{constructor(e,r,n){this.state=e,this.pos=r,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let r=syntaxTree(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),o=r.text.slice(n-r.from,this.pos-r.from),a=o.search(ensureAnchor(e,!1));return a<0?null:{from:n+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,r){e=="abort"&&this.abortListeners&&this.abortListeners.push(r)}}function toSet(s){let e=Object.keys(s).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(s){let e=Object.create(null),r=Object.create(null);for(let{label:o}of s){e[o[0]]=!0;for(let a=1;a<o.length;a++)r[o[a]]=!0}let n=toSet(e)+toSet(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function completeFromList(s){let e=s.map(o=>typeof o=="string"?{label:o}:o),[r,n]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let a=o.matchBefore(n);return a||o.explicit?{from:a?a.from:o.pos,options:e,validFor:r}:null}}function ifNotIn(s,e){return r=>{for(let n=syntaxTree(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(s.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class Option{constructor(e,r,n,o){this.completion=e,this.source=r,this.match=n,this.score=o}}function cur(s){return s.selection.main.from}function ensureAnchor(s,e){var r;let{source:n}=s,o=e&&n[0]!="^",a=n[n.length-1]!="$";return!o&&!a?s:new RegExp(`${o?"^":""}(?:${n})${a?"$":""}`,(r=s.flags)!==null&&r!==void 0?r:s.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(s,e,r,n){let{main:o}=s.selection,a=r-o.from,c=n-o.from;return Object.assign(Object.assign({},s.changeByRange(l=>l!=o&&r!=n&&s.sliceDoc(l.from+a,l.from+c)!=s.sliceDoc(r,n)?{range:l}:{changes:{from:l.from+a,to:n==o.from?l.to:l.from+c,insert:e},range:EditorSelection.cursor(l.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(s){if(!Array.isArray(s))return s;let e=SourceCache.get(s);return e||SourceCache.set(s,e=completeFromList(s)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=codePointAt(e,r),o=codePointSize(n);this.chars.push(n);let a=e.slice(r,r+o),c=a.toUpperCase();this.folded.push(codePointAt(c==a?a.toLowerCase():c,0)),r+=o}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:r,folded:n,any:o,precise:a,byWord:c}=this;if(r.length==1){let y=codePointAt(e,0),x=codePointSize(y),D=x==e.length?0:-100;if(y!=r[0])if(y==n[0])D+=-200;else return!1;return this.ret(D,[0,x])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=r.length,d=0;if(l<0){for(let y=0,x=Math.min(e.length,200);y<x&&d<h;){let D=codePointAt(e,y);(D==r[d]||D==n[d])&&(o[d++]=y),y+=codePointSize(D)}if(d<h)return!1}let f=0,g=0,_=!1,E=0,A=-1,w=-1,m=/[a-z]/.test(e),b=!0;for(let y=0,x=Math.min(e.length,200),D=0;y<x&&g<h;){let R=codePointAt(e,y);l<0&&(f<h&&R==r[f]&&(a[f++]=y),E<h&&(R==r[E]||R==n[E]?(E==0&&(A=y),w=y+1,E++):E=0));let M,L=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(M=fromCodePoint(R))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!y||L==1&&m||D==0&&L!=0)&&(r[g]==R||n[g]==R&&(_=!0)?c[g++]=y:c.length&&(b=!1)),D=L,y+=codePointSize(R)}return g==h&&c[0]==0&&b?this.result(-100+(_?-200:0),c,e):E==h&&A==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):E==h?this.ret(-900-e.length,[A,w]):g==h?this.result(-100+(_?-200:0)+-700+(b?0:-1100),c,e):r.length==2?!1:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,r,n){let o=[],a=0;for(let c of r){let l=c+(this.astral?codePointSize(codePointAt(n,c)):1);a&&o[a-1]==c?o[a-1]=l:(o[a++]=c,o[a++]=l)}return this.ret(e-n.length,o)}}const completionConfig=Facet.define({combine(s){return combineConfig(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>joinClass(e(n),r(n)),optionClass:(e,r)=>n=>joinClass(e(n),r(n)),addToOptions:(e,r)=>e.concat(r)})}});function joinClass(s,e){return s?e?s+" "+e:s:e}function defaultPositionInfo(s,e,r,n,o,a){let c=s.textDirection==Direction.RTL,l=c,h=!1,d="top",f,g,_=e.left-o.left,E=o.right-e.right,A=n.right-n.left,w=n.bottom-n.top;if(l&&_<Math.min(A,E)?l=!1:!l&&E<Math.min(A,_)&&(l=!0),A<=(l?_:E))f=Math.max(o.top,Math.min(r.top,o.bottom-w))-e.top,g=Math.min(400,l?_:E);else{h=!0,g=Math.min(400,(c?e.right:o.right-e.left)-30);let y=o.bottom-e.bottom;y>=w||y>e.top?f=r.bottom-e.top:(d="bottom",f=e.bottom-r.top)}let m=(e.bottom-e.top)/a.offsetHeight,b=(e.right-e.left)/a.offsetWidth;return{style:`${d}: ${f/m}px; max-width: ${g/b}px`,class:"cm-completionInfo-"+(h?c?"left-narrow":"right-narrow":l?"left":"right")}}function optionContent(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,o,a){let c=document.createElement("span");c.className="cm-completionLabel";let l=r.displayLabel||r.label,h=0;for(let d=0;d<a.length;){let f=a[d++],g=a[d++];f>h&&c.appendChild(document.createTextNode(l.slice(h,f)));let _=c.appendChild(document.createElement("span"));_.appendChild(document.createTextNode(l.slice(f,g))),_.className="cm-completionMatchedText",h=g}return h<l.length&&c.appendChild(document.createTextNode(l.slice(h))),c},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function rangeAroundSelected(s,e,r){if(s<=r)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let o=Math.floor(e/r);return{from:o*r,to:(o+1)*r}}let n=Math.floor((s-e)/r);return{from:s-(n+1)*r,to:s-n*r}}class CompletionTooltip{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let o=e.state.field(r),{options:a,selected:c}=o.open,l=e.state.facet(completionConfig);this.optionContent=optionContent(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=rangeAroundSelected(a.length,c,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=e.state.field(r).open;for(let f=h.target,g;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(g=/-(\d+)$/.exec(f.id))&&+g[1]<d.length){this.applyCompletion(e,d[+g[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(completionConfig).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(a,o.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=o){let{options:a,selected:c,disabled:l}=n.open;(!o.open||o.open.options!=a)&&(this.range=rangeAroundSelected(a.length,c,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),l!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=rangeAroundSelected(r.options.length,r.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(r.options,e.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:n}=r.options[r.selected],{info:o}=n;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(n);if(!a)return;"then"in a?a.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,n)}).catch(c=>logException(this.view.state,c,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:a}=e;n.appendChild(o),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)n.nodeName!="LI"||!n.id?o--:o==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return r&&scrollIntoView(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let c=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:c.innerWidth,bottom:c.innerHeight}}return o.top>Math.min(a.bottom,r.bottom)-10||o.bottom<Math.max(a.top,r.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,r,o,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const o=document.createElement("ul");o.id=r,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let c=n.from;c<n.to;c++){let{completion:l,match:h}=e[c],{section:d}=l;if(d){let _=typeof d=="string"?d:d.name;if(_!=a&&(c>n.from||n.from==0))if(a=_,typeof d!="string"&&d.header)o.appendChild(d.header(d));else{let E=o.appendChild(document.createElement("completion-section"));E.textContent=_}}const f=o.appendChild(document.createElement("li"));f.id=r+"-"+c,f.setAttribute("role","option");let g=this.optionClass(l);g&&(f.className=g);for(let _ of this.optionContent){let E=_(l,this.view.state,this.view,h);E&&f.appendChild(E)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(s,e){return r=>new CompletionTooltip(r,s,e)}function scrollIntoView(s,e){let r=s.getBoundingClientRect(),n=e.getBoundingClientRect(),o=r.height/s.offsetHeight;n.top<r.top?s.scrollTop-=(r.top-n.top)/o:n.bottom>r.bottom&&(s.scrollTop+=(n.bottom-r.bottom)/o)}function score(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function sortOptions(s,e){let r=[],n=null,o=h=>{r.push(h);let{section:d}=h.completion;if(d){n||(n=[]);let f=typeof d=="string"?d:d.name;n.some(g=>g.name==f)||n.push(typeof d=="string"?{name:f}:d)}};for(let h of s)if(h.hasResult()){let d=h.result.getMatch;if(h.result.filter===!1)for(let f of h.result.options)o(new Option(f,h.source,d?d(f):[],1e9-r.length));else{let f=new FuzzyMatcher(e.sliceDoc(h.from,h.to));for(let g of h.result.options)if(f.match(g.label)){let _=g.displayLabel?d?d(g,f.matched):[]:f.matched;o(new Option(g,h.source,_,f.score+(g.boost||0)))}}}if(n){let h=Object.create(null),d=0,f=(g,_)=>{var E,A;return((E=g.rank)!==null&&E!==void 0?E:1e9)-((A=_.rank)!==null&&A!==void 0?A:1e9)||(g.name<_.name?-1:1)};for(let g of n.sort(f))d-=1e5,h[g.name]=d;for(let g of r){let{section:_}=g.completion;_&&(g.score+=h[typeof _=="string"?_:_.name])}}let a=[],c=null,l=e.facet(completionConfig).compareCompletions;for(let h of r.sort((d,f)=>f.score-d.score||l(d.completion,f.completion))){let d=h.completion;!c||c.label!=d.label||c.detail!=d.detail||c.type!=null&&d.type!=null&&c.type!=d.type||c.apply!=d.apply||c.boost!=d.boost?a.push(h):score(h.completion)>score(c)&&(a[a.length-1]=h),c=h.completion}return a}class CompletionDialog{constructor(e,r,n,o,a,c){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=o,this.selected=a,this.disabled=c}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,o,a){let c=sortOptions(e,r);if(!c.length)return o&&e.some(h=>h.state==1)?new CompletionDialog(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let l=r.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=l&&o.selected!=-1){let h=o.options[o.selected].completion;for(let d=0;d<c.length;d++)if(c[d].completion==h){l=d;break}}return new CompletionDialog(c,makeAttrs(n,l),{pos:e.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:createTooltip,above:a.aboveCursor},o?o.timestamp:Date.now(),l,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(completionConfig),a=(n.override||r.languageDataAt("autocomplete",cur(r)).map(asSource)).map(l=>(this.active.find(d=>d.source==l)||new ActiveSource(l,this.active.some(d=>d.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((l,h)=>l==this.active[h])&&(a=this.active);let c=this.open;c&&e.docChanged&&(c=c.map(e.changes)),e.selection||a.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!sameResults(a,this.active)?c=CompletionDialog.build(a,r,this.id,c,n):c&&c.disabled&&!a.some(l=>l.state==1)&&(c=null),!c&&a.every(l=>l.state!=1)&&a.some(l=>l.hasResult())&&(a=a.map(l=>l.hasResult()?new ActiveSource(l.source,0):l));for(let l of e.effects)l.is(setSelectedEffect)&&(c=c&&c.setSelected(l.value,this.id));return a==this.active&&c==this.open?this:new CompletionState(a,this.id,c)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(s,e){if(s==e)return!0;for(let r=0,n=0;;){for(;r<s.length&&!s[r].hasResult;)r++;for(;n<e.length&&!e[n].hasResult;)n++;let o=r==s.length,a=n==e.length;if(o||a)return o==a;if(s[r++].result!=e[n++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(s,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(r["aria-activedescendant"]=s+"-"+e),r}const none=[];function getUserEvent(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,r,n=-1){this.source=e,this.state=r,this.explicitPos=n}hasResult(){return!1}update(e,r){let n=getUserEvent(e),o=this;n?o=o.handleUserEvent(e,n,r):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new ActiveSource(o.source,0));for(let a of e.effects)if(a.is(startCompletionEffect))o=new ActiveSource(o.source,1,a.value?cur(e.state):-1);else if(a.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(a.is(setActiveEffect))for(let c of a.value)c.source==o.source&&(o=c);return o}handleUserEvent(e,r,n){return r=="delete"||!n.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,r,n,o,a){super(e,2,r),this.result=n,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,r,n){var o;let a=e.changes.mapPos(this.from),c=e.changes.mapPos(this.to,1),l=cur(e.state);if((this.explicitPos<0?l<=a:l<this.from)||l>c||r=="delete"&&cur(e.startState)==this.from)return new ActiveSource(this.source,r=="input"&&n.activateOnTyping?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),d;return checkValid(this.result.validFor,e.state,a,c)?new ActiveResult(this.source,h,this.result,a,c):this.result.update&&(d=this.result.update(this.result,a,c,new CompletionContext(e.state,l,h>=0)))?new ActiveResult(this.source,h,d,d.from,(o=d.to)!==null&&o!==void 0?o:cur(e.state)):new ActiveSource(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(s,e,r,n){if(!s)return!1;let o=e.sliceDoc(r,n);return typeof s=="function"?s(o,r,n,e):ensureAnchor(s,!0).test(o)}const setActiveEffect=StateEffect.define({map(s,e){return s.map(r=>r.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(s,e){return s.update(e)},provide:s=>[showTooltip.from(s,e=>e.tooltip),EditorView.contentAttributes.from(s,e=>e.attrs)]});function applyCompletion(s,e){const r=e.completion.apply||e.completion.label;let n=s.state.field(completionState).active.find(o=>o.source==e.source);return n instanceof ActiveResult?(typeof r=="string"?s.dispatch(Object.assign(Object.assign({},insertCompletionText(s.state,r,n.from,n.to)),{annotations:pickedCompletion.of(e.completion)})):r(s,e.completion,n.from,n.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(s,e="option"){return r=>{let n=r.state.field(completionState,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let o=1,a;e=="page"&&(a=getTooltip(r,n.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:c}=n.open.options,l=n.open.selected>-1?n.open.selected+o*(s?1:-1):s?0:c-1;return l<0?l=e=="page"?0:c-1:l>=c&&(l=e=="page"?c-1:0),r.dispatch({effects:setSelectedEffect.of(l)}),!0}}const acceptCompletion=s=>{let e=s.state.field(completionState,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(completionConfig).interactionDelay?!1:applyCompletion(s,e.open.options[e.open.selected])},startCompletion=s=>s.state.field(completionState,!1)?(s.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=s=>{let e=s.state.field(completionState,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(s.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(completionState).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(completionState);if(!s.selectionSet&&!s.docChanged&&s.startState.field(completionState)==e)return;let r=s.transactions.some(n=>(n.selection||n.docChanged)&&!getUserEvent(n));for(let n=0;n<this.running.length;n++){let o=this.running[n];if(r||o.updates.length+s.transactions.length>MaxUpdateCount&&Date.now()-o.time>MinAbortTime){for(let a of o.context.abortListeners)try{a()}catch(c){logException(this.view.state,c)}o.context.abortListeners=null,this.running.splice(n--,1)}else o.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(o=>o.active.source==n.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let n of s.transactions)getUserEvent(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(completionState);for(let r of e.active)r.state==1&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r)}startQuery(s){let{state:e}=this.view,r=cur(e),n=new CompletionContext(e,r,s.explicitPos==r),o=new RunningQuery(s,n);this.running.push(o),Promise.resolve(s.source(n)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,a)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(completionConfig);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(o.done===void 0)continue;if(this.running.splice(n--,1),o.done){let c=new ActiveResult(o.active.source,o.active.explicitPos,o.done,o.done.from,(s=o.done.to)!==null&&s!==void 0?s:cur(o.updates.length?o.updates[0].startState:this.view.state));for(let l of o.updates)c=c.update(l,r);if(c.hasResult()){e.push(c);continue}}let a=this.view.state.field(completionState).active.find(c=>c.source==o.active.source);if(a&&a.state==1)if(o.done==null){let c=new ActiveSource(o.active.source,0);for(let l of o.updates)c=c.update(l,r);c.state!=1&&e.push(c)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let r=e.open&&getTooltip(this.view,e.open.tooltip);(!r||!r.dom.contains(s.relatedTarget))&&this.view.dispatch({effects:closeCompletionEffect.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,r,n,o){this.field=e,this.line=r,this.from=n,this.to=o}}class FieldRange{constructor(e,r,n){this.field=e,this.from=r,this.to=n}map(e){let r=e.mapPos(this.from,-1,MapMode.TrackDel),n=e.mapPos(this.to,1,MapMode.TrackDel);return r==null||n==null?null:new FieldRange(this.field,r,n)}}class Snippet{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let n=[],o=[r],a=e.doc.lineAt(r),c=/^\s*/.exec(a.text)[0];for(let h of this.lines){if(n.length){let d=c,f=/^\t*/.exec(h)[0].length;for(let g=0;g<f;g++)d+=e.facet(indentUnit);o.push(r+d.length-f),h=d+h.slice(f)}n.push(h),r+=h.length+1}let l=this.fieldPositions.map(h=>new FieldRange(h.field,o[h.line]+h.from,o[h.line]+h.to));return{text:n,ranges:l}}static parse(e){let r=[],n=[],o=[],a;for(let c of e.split(/\r\n?|\n/)){for(;a=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(c);){let l=a[1]?+a[1]:null,h=a[2]||a[3]||"",d=-1;for(let f=0;f<r.length;f++)(l!=null?r[f].seq==l:h&&r[f].name==h)&&(d=f);if(d<0){let f=0;for(;f<r.length&&(l==null||r[f].seq!=null&&r[f].seq<l);)f++;r.splice(f,0,{seq:l,name:h}),d=f;for(let g of o)g.field>=d&&g.field++}o.push(new FieldPos(d,n.length,a.index,a.index+h.length)),c=c.slice(0,a.index)+h+c.slice(a.index+a[0].length)}for(let l;l=/\\([{}])/.exec(c);){c=c.slice(0,l.index)+l[1]+c.slice(l.index+l[0].length);for(let h of o)h.line==n.length&&h.from>l.index&&(h.from--,h.to--)}n.push(c)}return new Snippet(n,o)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,r){this.ranges=e,this.active=r,this.deco=Decoration.set(e.map(n=>(n.from==n.to?fieldMarker:fieldRange).range(n.from,n.to)))}map(e){let r=[];for(let n of this.ranges){let o=n.map(e);if(!o)return null;r.push(o)}return new ActiveSnippet(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const setActive=StateEffect.define({map(s,e){return s&&s.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(s,e){for(let r of e.effects){if(r.is(setActive))return r.value;if(r.is(moveToField)&&s)return new ActiveSnippet(s.ranges,r.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>EditorView.decorations.from(s,e=>e?e.deco:Decoration.none)});function fieldSelection(s,e){return EditorSelection.create(s.filter(r=>r.field==e).map(r=>EditorSelection.range(r.from,r.to)))}function snippet(s){let e=Snippet.parse(s);return(r,n,o,a)=>{let{text:c,ranges:l}=e.instantiate(r.state,o),h={changes:{from:o,to:a,insert:Text$1.of(c)},scrollIntoView:!0,annotations:n?pickedCompletion.of(n):void 0};if(l.length&&(h.selection=fieldSelection(l,0)),l.length>1){let d=new ActiveSnippet(l,0),f=h.effects=[setActive.of(d)];r.state.field(snippetState,!1)===void 0&&f.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}r.dispatch(r.state.update(h))}}function moveField(s){return({state:e,dispatch:r})=>{let n=e.field(snippetState,!1);if(!n||s<0&&n.active==0)return!1;let o=n.active+s,a=s>0&&!n.ranges.some(c=>c.field==o+s);return r(e.update({selection:fieldSelection(n.ranges,o),effects:setActive.of(a?null:new ActiveSnippet(n.ranges,o)),scrollIntoView:!0})),!0}}const clearSnippet=({state:s,dispatch:e})=>s.field(snippetState,!1)?(e(s.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(s){return s.length?s[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],s=>s.facet(snippetKeymap)));function snippetCompletion(s,e){return Object.assign(Object.assign({},e),{apply:snippet(s)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(s,e){let r=e.state.field(snippetState,!1),n;if(!r||(n=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let o=r.ranges.find(a=>a.from<=n&&a.to>=n);return!o||o.field==r.active?!1:(e.dispatch({selection:fieldSelection(r.ranges,o.field),effects:setActive.of(r.ranges.some(a=>a.field>o.field)?new ActiveSnippet(r.ranges,o.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(s,e){let r=e.mapPos(s,-1,MapMode.TrackAfter);return r??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(s,e){if(s=s.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(closeBracketEffect)&&(s=s.update({add:[closedBracket.range(r.value,r.value+1)]}));return s}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(s){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==s)return definedClosing.charAt(e+1);return fromCodePoint(s<128?s:s+1)}function config(s,e){return s.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((s,e,r,n)=>{if((android?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let o=s.state.selection.main;if(n.length>2||n.length==2&&codePointSize(codePointAt(n,0))==1||e!=o.from||r!=o.to)return!1;let a=insertBracket(s.state,n);return a?(s.dispatch(a),!0):!1}),deleteBracketPair=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=config(s,s.selection.main.head).brackets||defaults.brackets,o=null,a=s.changeByRange(c=>{if(c.empty){let l=prevChar(s.doc,c.head);for(let h of n)if(h==l&&nextChar(s.doc,c.head)==closing(codePointAt(h,0)))return{changes:{from:c.head-h.length,to:c.head+h.length},range:EditorSelection.cursor(c.head-h.length)}}return{range:o=c}});return o||e(s.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(s,e){let r=config(s,s.selection.main.head),n=r.brackets||defaults.brackets;for(let o of n){let a=closing(codePointAt(o,0));if(e==o)return a==o?handleSame(s,o,n.indexOf(o+o+o)>-1,r):handleOpen(s,o,a,r.before||defaults.before);if(e==a&&closedBracketAt(s,s.selection.main.from))return handleClose(s,o,a)}return null}function closedBracketAt(s,e){let r=!1;return s.field(bracketState).between(0,s.doc.length,n=>{n==e&&(r=!0)}),r}function nextChar(s,e){let r=s.sliceString(e,e+2);return r.slice(0,codePointSize(codePointAt(r,0)))}function prevChar(s,e){let r=s.sliceString(e-2,e);return codePointSize(codePointAt(r,0))==r.length?r:r.slice(1)}function handleOpen(s,e,r,n){let o=null,a=s.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:r,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let l=nextChar(s.doc,c.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+r,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:o=c}});return o?null:s.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(s,e,r){let n=null,o=s.changeByRange(a=>a.empty&&nextChar(s.doc,a.head)==r?{changes:{from:a.head,to:a.head+r.length,insert:r},range:EditorSelection.cursor(a.head+r.length)}:n={range:a});return n?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(s,e,r,n){let o=n.stringPrefixes||defaults.stringPrefixes,a=null,c=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:closeBracketEffect.of(l.to+e.length),range:EditorSelection.range(l.anchor+e.length,l.head+e.length)};let h=l.head,d=nextChar(s.doc,h),f;if(d==e){if(nodeStart(s,h))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(closedBracketAt(s,h)){let _=r&&s.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+_.length,insert:_},range:EditorSelection.cursor(h+_.length)}}}else{if(r&&s.sliceDoc(h-2*e.length,h)==e+e&&(f=canStartStringAt(s,h-2*e.length,o))>-1&&nodeStart(s,f))return{changes:{insert:e+e+e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(s.charCategorizer(h)(d)!=CharCategory.Word&&canStartStringAt(s,h,o)>-1&&!probablyInString(s,h,e,o))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)}}return{range:a=l}});return a?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(s,e){let r=syntaxTree(s).resolveInner(e+1);return r.parent&&r.from==e}function probablyInString(s,e,r,n){let o=syntaxTree(s).resolveInner(e,-1),a=n.reduce((c,l)=>Math.max(c,l.length),0);for(let c=0;c<5;c++){let l=s.sliceDoc(o.from,Math.min(o.to,o.from+r.length+a)),h=l.indexOf(r);if(!h||h>-1&&n.indexOf(l.slice(0,h))>-1){let f=o.firstChild;for(;f&&f.from==o.from&&f.to-f.from>r.length+h;){if(s.sliceDoc(f.to-r.length,f.to)==r)return!1;f=f.firstChild}return!0}let d=o.to==e&&o.parent;if(!d)break;o=d}return!1}function canStartStringAt(s,e,r){let n=s.charCategorizer(e);if(n(s.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of r){let a=e-o.length;if(s.sliceDoc(a,e)==o&&n(s.sliceDoc(a-1,a))!=CharCategory.Word)return a}return-1}function autocompletion(s={}){return[completionState,completionConfig.of(s),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],s=>s.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID(s){return(e,r,n)=>{if(n)return!1;let o=e.node.getChild("VariableName");return o&&r(o,s),!0}}const gatherCompletions={FunctionDefinition:defID("function"),ClassDefinition:defID("class"),ForStatement(s,e,r){if(r){for(let n=s.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")e(n,"variable");else if(n.name=="in")break}},ImportStatement(s,e){var r,n;let{node:o}=s,a=((r=o.firstChild)===null||r===void 0?void 0:r.name)=="from";for(let c=o.getChild("import");c;c=c.nextSibling)c.name=="VariableName"&&((n=c.nextSibling)===null||n===void 0?void 0:n.name)!="as"&&e(c,a?"variable":"namespace")},AssignStatement(s,e){for(let r=s.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name==":"||r.name=="AssignOp")break},ParamList(s,e){for(let r=null,n=s.node.firstChild;n;n=n.nextSibling)n.name=="VariableName"&&(!r||!/\*|AssignOp/.test(r.name))&&e(n,"variable"),r=n},CapturePattern:defID("variable"),AsPattern:defID("variable"),__proto__:null};function getScope(s,e){let r=cache.get(e);if(r)return r;let n=[],o=!0;function a(c,l){let h=s.sliceString(c.from,c.to);n.push({label:h,type:l})}return e.cursor(IterMode.IncludeAnonymous).iterate(c=>{if(c.name){let l=gatherCompletions[c.name];if(l&&l(c,a,o)||!o&&ScopeNodes.has(c.name))return!1;o=!1}else if(c.to-c.from>8192){for(let l of getScope(s,c.node))n.push(l);return!1}}),cache.set(e,n),n}const Identifier=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete=["String","FormatString","Comment","PropertyName"];function localCompletionSource(s){let e=syntaxTree(s.state).resolveInner(s.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let r=e.name=="VariableName"||e.to-e.from<20&&Identifier.test(s.state.sliceDoc(e.from,e.to));if(!r&&!s.explicit)return null;let n=[];for(let o=e;o;o=o.parent)ScopeNodes.has(o.name)&&(n=n.concat(getScope(s.state.doc,o)));return{options:n,from:r?e.from:s.pos,validFor:Identifier}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(s=>({label:s,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(s=>({label:s,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(s=>({label:s,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(s=>({label:s,type:"function"}))),snippets=[snippetCompletion("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete,completeFromList(globals.concat(snippets)));function indentBody(s,e){let r=s.baseIndentFor(e),n=s.lineAt(s.pos,-1),o=n.from+n.text.length;return/^\s*($|#)/.test(n.text)&&s.node.to<o+100&&!/\S/.test(s.state.sliceDoc(o,s.node.to))&&s.lineIndent(s.pos,-1)<=r||/^\s*(else:|elif |except |finally:)/.test(s.textAfter)&&s.lineIndent(s.pos,-1)>r?null:r+s.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser.configure({props:[indentNodeProp.add({Body:s=>{var e;return(e=indentBody(s,s.node))!==null&&e!==void 0?e:s.continue()},IfStatement:s=>/^\s*(else:|elif )/.test(s.textAfter)?s.baseIndent:s.continue(),TryStatement:s=>/^\s*(except |finally:|else:)/.test(s.textAfter)?s.baseIndent:s.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:s=>{if(s.pos+/\s*/.exec(s.textAfter)[0].length>=s.node.to){let e=null;for(let r=s.node,n=r.to;r=r.lastChild,!(!r||r.to!=n);)r.type.name=="Body"&&(e=r);if(e){let r=indentBody(s,e);if(r!=null)return r}}return s.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(s,e)=>({from:s.from+1,to:s.to-(s.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function crelt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var o=r[n];typeof o=="string"?s.setAttribute(n,o):o!=null&&(s[n]=o)}e++}for(;e<arguments.length;e++)add(s,arguments[e]);return s}function add(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)add(s,e[r]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class SearchCursor{constructor(e,r,n=0,o=e.length,a,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,o),this.bufferStart=n,this.normalize=a?l=>a(basicNormalize(l)):basicNormalize,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=fromCodePoint(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(r);for(let a=0,c=n;;a++){let l=o.charCodeAt(a),h=this.match(l,c);if(a==o.length-1){if(h)return this.value=h,this;break}c==n&&a<r.length&&r.charCodeAt(a)==l&&c++}}}match(e,r){let n=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],c=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[o+1],to:r+1}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:r,to:r+1}:this.matches.push(1,r)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,r,n,o=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new MultilineRegExpCursor(e,r,n,o,a);this.re=new RegExp(r,baseFlags+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let c=e.lineAt(o);this.curLineStart=c.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,o=n+r[0].length;if(this.matchPos=toCharEnd(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,r)))return this.value={from:n,to:o,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let o=flattened.get(e);if(!o||o.from>=n||o.to<=r){let l=new FlattenedDoc(r,e.sliceString(r,n));return flattened.set(e,l),l}if(o.from==r&&o.to==n)return o;let{text:a,from:c}=o;return c>r&&(a=e.sliceString(r,c)+a,c=r),o.to<n&&(a+=e.sliceString(o.to,n)),flattened.set(e,new FlattenedDoc(c,a)),new FlattenedDoc(r,a.slice(r-c,n-c))}}class MultilineRegExpCursor{constructor(e,r,n,o,a){this.text=e,this.to=a,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(r,baseFlags+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,o=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,o,r)))return this.value={from:n,to:o,match:r},this.matchPos=toCharEnd(this.text,o+(n==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(s){try{return new RegExp(s,baseFlags),!0}catch{return!1}}function toCharEnd(s,e){if(e>=s.length)return e;let r=s.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function createLineDialog(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),r=crelt("input",{class:"cm-textfield",name:"line",value:e}),n=crelt("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),s.dispatch({effects:dialogEffect.of(!1)}),s.focus()):a.keyCode==13&&(a.preventDefault(),o())},onsubmit:a=>{a.preventDefault(),o()}},crelt("label",s.state.phrase("Go to line"),": ",r)," ",crelt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function o(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!a)return;let{state:c}=s,l=c.doc.lineAt(c.selection.main.head),[,h,d,f,g]=a,_=f?+f.slice(1):0,E=d?+d:l.number;if(d&&g){let m=E/100;h&&(m=m*(h=="-"?-1:1)+l.number/c.doc.lines),E=Math.round(c.doc.lines*m)}else d&&h&&(E=E*(h=="-"?-1:1)+l.number);let A=c.doc.line(Math.max(1,Math.min(c.doc.lines,E))),w=EditorSelection.cursor(A.from+Math.max(0,Math.min(_,A.length)));s.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(w.from,{y:"center"})],selection:w}),s.focus()}return{dom:n}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(s,e){for(let r of e.effects)r.is(dialogEffect)&&(s=r.value);return s},provide:s=>showPanel.from(s,e=>e?createLineDialog:null)}),gotoLine=s=>{let e=getPanel(s,createLineDialog);if(!e){let r=[dialogEffect.of(!0)];s.state.field(dialogField,!1)==null&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),s.dispatch({effects:r}),e=getPanel(s,createLineDialog)}return e&&e.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(s){return combineConfig(s,defaultHighlightOptions,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(s){let e=[defaultTheme,matchHighlighter];return s&&e.push(highlightConfig.of(s)),e}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(s,e,r,n){return(r==0||s(e.sliceDoc(r-1,r))!=CharCategory.Word)&&(n==e.doc.length||s(e.sliceDoc(n,n+1))!=CharCategory.Word)}function insideWord(s,e,r,n){return s(e.sliceDoc(r,r+1))==CharCategory.Word&&s(e.sliceDoc(n-1,n))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(highlightConfig),{state:r}=s,n=r.selection;if(n.ranges.length>1)return Decoration.none;let o=n.main,a,c=null;if(o.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let h=r.wordAt(o.head);if(!h)return Decoration.none;c=r.charCategorizer(o.head),a=r.sliceDoc(h.from,h.to)}else{let h=o.to-o.from;if(h<e.minSelectionLength||h>200)return Decoration.none;if(e.wholeWords){if(a=r.sliceDoc(o.from,o.to),c=r.charCategorizer(o.head),!(insideWordBoundaries(c,r,o.from,o.to)&&insideWord(c,r,o.from,o.to)))return Decoration.none}else if(a=r.sliceDoc(o.from,o.to).trim(),!a)return Decoration.none}let l=[];for(let h of s.visibleRanges){let d=new SearchCursor(r.doc,a,h.from,h.to);for(;!d.next().done;){let{from:f,to:g}=d.value;if((!c||insideWordBoundaries(c,r,f,g))&&(o.empty&&f<=o.from&&g>=o.to?l.push(mainMatchDeco.range(f,g)):(f>=o.to||g<=o.from)&&l.push(matchDeco.range(f,g)),l.length>e.maxMatches))return Decoration.none}}return Decoration.set(l)}},{decorations:s=>s.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:s,dispatch:e})=>{let{selection:r}=s,n=EditorSelection.create(r.ranges.map(o=>s.wordAt(o.head)||EditorSelection.cursor(o.head)),r.mainIndex);return n.eq(r)?!1:(e(s.update({selection:n})),!0)};function findNextOccurrence(s,e){let{main:r,ranges:n}=s.selection,o=s.wordAt(r.head),a=o&&o.from==r.from&&o.to==r.to;for(let c=!1,l=new SearchCursor(s.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(c)return null;l=new SearchCursor(s.doc,e,0,Math.max(0,n[n.length-1].from-1)),c=!0}else{if(c&&n.some(h=>h.from==l.value.from))continue;if(a){let h=s.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const selectNextOccurrence=({state:s,dispatch:e})=>{let{ranges:r}=s.selection;if(r.some(a=>a.from===a.to))return selectWord({state:s,dispatch:e});let n=s.sliceDoc(r[0].from,r[0].to);if(s.selection.ranges.some(a=>s.sliceDoc(a.from,a.to)!=n))return!1;let o=findNextOccurrence(s,n);return o?(e(s.update({selection:s.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(s){return combineConfig(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,r=0,n){let o=e.doc?e:EditorState.create({doc:e});return n==null&&(n=o.doc.length),this.regexp?regexpCursor(this,o,r,n):stringCursor(this,o,r,n)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(s,e,r,n){return new SearchCursor(e.doc,s.unquoted,r,n,s.caseSensitive?void 0:o=>o.toLowerCase(),s.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(s,e){return(r,n,o,a)=>((a>r||a+o.length<n)&&(a=Math.max(0,r-2),o=s.sliceString(a,Math.min(s.length,n+2))),(e(charBefore(o,r-a))!=CharCategory.Word||e(charAfter(o,r-a))!=CharCategory.Word)&&(e(charAfter(o,n-a))!=CharCategory.Word||e(charBefore(o,n-a))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,r,n){let o=stringCursor(this.spec,e,n,e.doc.length).nextOverlapping();return o.done&&(o=stringCursor(this.spec,e,0,r).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,r,n){for(let o=n;;){let a=Math.max(r,o-1e4-this.spec.unquoted.length),c=stringCursor(this.spec,e,a,o),l=null;for(;!c.nextOverlapping().done;)l=c.value;if(l)return l;if(a==r)return null;o-=1e4}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=r)return null;o.push(n.value)}return o}highlight(e,r,n,o){let a=stringCursor(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}function regexpCursor(s,e,r,n){return new RegExpCursor(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function charBefore(s,e){return s.slice(findClusterBreak(s,e,!1),e)}function charAfter(s,e){return s.slice(e,findClusterBreak(s,e))}function regexpWordTest(s){return(e,r,n)=>!n[0].length||(s(charBefore(n.input,n.index))!=CharCategory.Word||s(charAfter(n.input,n.index))!=CharCategory.Word)&&(s(charAfter(n.input,n.index+n[0].length))!=CharCategory.Word||s(charBefore(n.input,n.index+n[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,r,n){let o=regexpCursor(this.spec,e,n,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,r).next()),o.done?null:o.value}prevMatchInRange(e,r,n){for(let o=1;;o++){let a=Math.max(r,n-o*1e4),c=regexpCursor(this.spec,e,a,n),l=null;for(;!c.next().done;)l=c.value;if(l&&(a==r||l.from>a+10))return l;if(a==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:r)}matchAll(e,r){let n=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=r)return null;o.push(n.value)}return o}highlight(e,r,n,o){let a=regexpCursor(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(s){return new SearchState(defaultQuery(s).create(),null)},update(s,e){for(let r of e.effects)r.is(setSearchQuery)?s=new SearchState(r.value.create(),s.panel):r.is(togglePanel$1)&&(s=new SearchState(s.query,r.value?createSearchPanel:null));return s},provide:s=>showPanel.from(s,e=>e.panel)});class SearchState{constructor(e,r){this.query=e,this.panel=r}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(searchState))}update(s){let e=s.state.field(searchState);(e!=s.startState.field(searchState)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Decoration.none;let{view:r}=this,n=new RangeSetBuilder;for(let o=0,a=r.visibleRanges,c=a.length;o<c;o++){let{from:l,to:h}=a[o];for(;o<c-1&&h>a[o+1].from-2*250;)h=a[++o].to;s.highlight(r.state,l,h,(d,f)=>{let g=r.state.selection.ranges.some(_=>_.from==d&&_.to==f);n.add(d,f,g?selectedMatchMark:matchMark)})}return n.finish()}},{decorations:s=>s.decorations});function searchCommand(s){return e=>{let r=e.state.field(searchState,!1);return r&&r.query.spec.valid?s(e,r):openSearchPanel(e)}}const findNext=searchCommand((s,{query:e})=>{let{to:r}=s.state.selection.main,n=e.nextMatch(s.state,r,r);if(!n)return!1;let o=EditorSelection.single(n.from,n.to),a=s.state.facet(searchConfigFacet);return s.dispatch({selection:o,effects:[announceMatch(s,n),a.scrollToMatch(o.main,s)],userEvent:"select.search"}),selectSearchInput(s),!0}),findPrevious=searchCommand((s,{query:e})=>{let{state:r}=s,{from:n}=r.selection.main,o=e.prevMatch(r,n,n);if(!o)return!1;let a=EditorSelection.single(o.from,o.to),c=s.state.facet(searchConfigFacet);return s.dispatch({selection:a,effects:[announceMatch(s,o),c.scrollToMatch(a.main,s)],userEvent:"select.search"}),selectSearchInput(s),!0}),selectMatches=searchCommand((s,{query:e})=>{let r=e.matchAll(s.state,1e3);return!r||!r.length?!1:(s.dispatch({selection:EditorSelection.create(r.map(n=>EditorSelection.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:s,dispatch:e})=>{let r=s.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:o}=r.main,a=[],c=0;for(let l=new SearchCursor(s.doc,s.sliceDoc(n,o));!l.next().done;){if(a.length>1e3)return!1;l.value.from==n&&(c=a.length),a.push(EditorSelection.range(l.value.from,l.value.to))}return e(s.update({selection:EditorSelection.create(a,c),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((s,{query:e})=>{let{state:r}=s,{from:n,to:o}=r.selection.main;if(r.readOnly)return!1;let a=e.nextMatch(r,n,n);if(!a)return!1;let c=[],l,h,d=[];if(a.from==n&&a.to==o&&(h=r.toText(e.getReplacement(a)),c.push({from:a.from,to:a.to,insert:h}),a=e.nextMatch(r,a.from,a.to),d.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),a){let f=c.length==0||c[0].from>=a.to?0:a.to-a.from-h.length;l=EditorSelection.single(a.from-f,a.to-f),d.push(announceMatch(s,a)),d.push(r.facet(searchConfigFacet).scrollToMatch(l.main,s))}return s.dispatch({changes:c,selection:l,effects:d,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((s,{query:e})=>{if(s.state.readOnly)return!1;let r=e.matchAll(s.state,1e9).map(o=>{let{from:a,to:c}=o;return{from:a,to:c,insert:e.getReplacement(o)}});if(!r.length)return!1;let n=s.state.phrase("replaced $ matches",r.length)+".";return s.dispatch({changes:r,effects:EditorView.announce.of(n),userEvent:"input.replace.all"}),!0});function createSearchPanel(s){return s.state.facet(searchConfigFacet).createPanel(s)}function defaultQuery(s,e){var r,n,o,a,c;let l=s.selection.main,h=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!h)return e;let d=s.facet(searchConfigFacet);return new SearchQuery({search:((r=e?.literal)!==null&&r!==void 0?r:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:d.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:d.literal,regexp:(a=e?.regexp)!==null&&a!==void 0?a:d.regexp,wholeWord:(c=e?.wholeWord)!==null&&c!==void 0?c:d.wholeWord})}function getSearchInput(s){let e=getPanel(s,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(s){let e=getSearchInput(s);e&&e==s.root.activeElement&&e.select()}const openSearchPanel=s=>{let e=s.state.field(searchState,!1);if(e&&e.panel){let r=getSearchInput(s);if(r&&r!=s.root.activeElement){let n=defaultQuery(s.state,e.query.spec);n.valid&&s.dispatch({effects:setSearchQuery.of(n)}),r.focus(),r.select()}}else s.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(s.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=s=>{let e=s.state.field(searchState,!1);if(!e||!e.panel)return!1;let r=getPanel(s,createSearchPanel);return r&&r.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let r=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:r.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:r.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(o,a,c){return crelt("button",{class:"cm-button",name:o,onclick:a,type:"button"},c)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,n("next",()=>findNext(e),[phrase(e,"next")]),n("prev",()=>findPrevious(e),[phrase(e,"previous")]),n("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,n("replace",()=>replaceNext(e),[phrase(e,"replace")]),n("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(setSearchQuery)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(s,e){return s.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(s,{from:e,to:r}){let n=s.state.doc.lineAt(e),o=s.state.doc.lineAt(r).to,a=Math.max(n.from,e-AnnounceMargin),c=Math.min(o,r+AnnounceMargin),l=s.state.sliceDoc(a,c);if(a!=n.from){for(let h=0;h<AnnounceMargin;h++)if(!Break.test(l[h+1])&&Break.test(l[h])){l=l.slice(h);break}}if(c!=o){for(let h=l.length-1;h>l.length-AnnounceMargin;h--)if(!Break.test(l[h-1])&&Break.test(l[h])){l=l.slice(0,h);break}}return EditorView.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${n.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class LintState{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let o=e,a=n.facet(lintConfig).markerFilter;a&&(o=a(o));let c=Decoration.set(o.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?Decoration.widget({widget:new DiagnosticWidget(l),diagnostic:l}).range(l.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new LintState(c,r,findDiagnostic(c))}}function findDiagnostic(s,e=null,r=0){let n=null;return s.between(r,1e9,(o,a,{spec:c})=>{if(!(e&&c.diagnostic!=e))return n=new SelectedDiagnostic(o,a,c.diagnostic),!1}),n}function hideTooltip(s,e){let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(n=>n.is(setDiagnosticsEffect))||s.changes.touchesRange(r.from,r.to))}function maybeEnableLint(s,e){return s.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(s,e){if(e.docChanged){let r=s.diagnostics.map(e.changes),n=null;if(s.selected){let o=e.changes.mapPos(s.selected.from,1);n=findDiagnostic(r,s.selected.diagnostic,o)||findDiagnostic(r,null,o)}s=new LintState(r,s.panel,n)}for(let r of e.effects)r.is(setDiagnosticsEffect)?s=LintState.init(r.value,s.panel,e.state):r.is(togglePanel)?s=new LintState(s.diagnostics,r.value?LintPanel.open:null,s.selected):r.is(movePanelSelection)&&(s=new LintState(s.diagnostics,s.panel,r.value));return s},provide:s=>[showPanel.from(s,e=>e.panel),EditorView.decorations.from(s,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(s,e,r){let{diagnostics:n}=s.state.field(lintState),o=[],a=2e8,c=0;n.between(e-(r<0?1:0),e+(r>0?1:0),(h,d,{spec:f})=>{e>=h&&e<=d&&(h==d||(e>h||r>0)&&(e<d||r<0))&&(o.push(f.diagnostic),a=Math.min(h,a),c=Math.max(d,c))});let l=s.state.facet(lintConfig).tooltipFilter;return l&&(o=l(o)),o.length?{pos:a,end:c,above:s.state.doc.lineAt(a).to<c,create(){return{dom:diagnosticsTooltip(s,o)}}}:null}function diagnosticsTooltip(s,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(r=>renderDiagnostic(s,r,!1)))}const openLintPanel=s=>{let e=s.state.field(lintState,!1);(!e||!e.panel)&&s.dispatch({effects:maybeEnableLint(s.state,[togglePanel.of(!0)])});let r=getPanel(s,LintPanel.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=s=>{let e=s.state.field(lintState,!1);return!e||!e.panel?!1:(s.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=s=>{let e=s.state.field(lintState,!1);if(!e)return!1;let r=s.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(s.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},combineConfig(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r}))}});function assignKeys(s){let e=[];if(s)e:for(let{name:r}of s){for(let n=0;n<r.length;n++){let o=r[n];if(/[a-zA-Z]/.test(o)&&!e.some(a=>a.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(s,e,r){var n;let o=r?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,c)=>{let l=!1,h=_=>{if(_.preventDefault(),l)return;l=!0;let E=findDiagnostic(s.state.field(lintState).diagnostics,e);E&&a.apply(s,E.from,E.to)},{name:d}=a,f=o[c]?d.indexOf(o[c]):-1,g=f<0?d:[d.slice(0,f),crelt("u",d.slice(f,f+1)),d.slice(f+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${d}${f<0?"":` (access key "${o[c]})"`}.`},g)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let r=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],c=assignKeys(a.actions);for(let l=0;l<c.length;l++)if(c[l].toUpperCase().charCodeAt(0)==o.keyCode){let h=findDiagnostic(this.view.state.field(lintState).diagnostics,a);h&&a.actions[l].apply(e,h.from,h.to)}}else return;o.preventDefault()},n=o=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(o.target)&&this.moveSelection(a)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(lintState),n=0,o=!1,a=null;for(e.between(0,this.view.state.doc.length,(c,l,{spec:h})=>{let d=-1,f;for(let g=n;g<this.items.length;g++)if(this.items[g].diagnostic==h.diagnostic){d=g;break}d<0?(f=new PanelItem(this.view,h.diagnostic),this.items.splice(n,0,f),o=!0):(f=this.items[d],d>n&&(this.items.splice(n,d-n),o=!0)),r&&f.diagnostic==r.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),a=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:l})=>{let h=l.height/this.list.offsetHeight;c.top<l.top?this.list.scrollTop-=(l.top-c.top)/h:c.bottom>l.bottom&&(this.list.scrollTop+=(c.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(lintState),n=findDiagnostic(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:movePanelSelection.of(n)})}static open(e){return new LintPanel(e)}}function svg(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function underline(s){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],s=>{let{selected:e,panel:r}=s.field(lintState);return!e||!r||e.from==e.to?Decoration.none:Decoration.set([activeMark.range(e.from,e.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])],createTheme=({variant:s,settings:e,styles:r})=>{const n=EditorView.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:s==="dark"}),o=HighlightStyle.define(r);return[n,syntaxHighlighting(o)]};createTheme({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:tags.comment,color:"#404080"},{tag:[tags.string,tags.regexp],color:"#999999"},{tag:tags.number,color:"#7090B0"},{tag:[tags.bool,tags.null],color:"#8080A0"},{tag:[tags.punctuation,tags.derefOperator],color:"#805080"},{tag:tags.keyword,color:"#60B0FF"},{tag:tags.definitionKeyword,color:"#B0FFF0"},{tag:tags.moduleKeyword,color:"#60B0FF"},{tag:tags.operator,color:"#A0A0FF"},{tag:[tags.variableName,tags.self],color:"#008080"},{tag:tags.operatorKeyword,color:"#A0A0FF"},{tag:tags.controlKeyword,color:"#80A0FF"},{tag:tags.className,color:"#70E080"},{tag:[tags.function(tags.propertyName),tags.propertyName],color:"#50A0A0"},{tag:tags.tagName,color:"#009090"},{tag:tags.modifier,color:"#B0FFF0"},{tag:[tags.squareBracket,tags.attributeName],color:"#D0D0FF"}]});createTheme({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:tags.comment,color:"#787b8099"},{tag:tags.string,color:"#86b300"},{tag:tags.regexp,color:"#4cbf99"},{tag:[tags.number,tags.bool,tags.null],color:"#ffaa33"},{tag:tags.variableName,color:"#5c6166"},{tag:[tags.definitionKeyword,tags.modifier],color:"#fa8d3e"},{tag:[tags.keyword,tags.special(tags.brace)],color:"#fa8d3e"},{tag:tags.operator,color:"#ed9366"},{tag:tags.separator,color:"#5c6166b3"},{tag:tags.punctuation,color:"#5c6166"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#f2ae49"},{tag:[tags.className,tags.definition(tags.typeName)],color:"#22a4e6"},{tag:[tags.tagName,tags.typeName,tags.self,tags.labelName],color:"#55b4d4"},{tag:tags.angleBracket,color:"#55b4d480"},{tag:tags.attributeName,color:"#f2ae49"}]});createTheme({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:tags.comment,color:"#6E6E6E"},{tag:[tags.string,tags.regexp,tags.special(tags.brace)],color:"#5C81B3"},{tag:tags.number,color:"#C1E1B8"},{tag:tags.bool,color:"#53667D"},{tag:[tags.definitionKeyword,tags.modifier,tags.function(tags.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[tags.keyword,tags.moduleKeyword,tags.operatorKeyword,tags.operator],color:"#697A8E",fontWeight:"bold"},{tag:[tags.variableName,tags.attributeName],color:"#708E67"},{tag:[tags.function(tags.variableName),tags.definition(tags.propertyName),tags.derefOperator],color:"#fff"},{tag:tags.tagName,color:"#A3D295"}]});createTheme({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:tags.comment,color:"#666666"},{tag:[tags.string,tags.special(tags.brace)],color:"#54BE0D"},{tag:tags.regexp,color:"#E9C062"},{tag:tags.number,color:"#CF6A4C"},{tag:[tags.keyword,tags.operator],color:"#5EA6EA"},{tag:tags.variableName,color:"#7587A6"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F9EE98"},{tag:[tags.propertyName,tags.function(tags.variableName)],color:"#937121"},{tag:[tags.typeName,tags.angleBracket,tags.tagName],color:"#9B859D"}]});const birdsOfParadise=createTheme({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:tags.comment,color:"#6B4E32"},{tag:[tags.keyword,tags.operator,tags.derefOperator],color:"#EF5D32"},{tag:tags.className,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.typeName,tags.propertyName,tags.function(tags.variableName),tags.definition(tags.variableName)],color:"#EFAC32"},{tag:tags.definition(tags.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:tags.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.number,tags.bool],color:"#6C99BB"},{tag:[tags.variableName,tags.self],color:"#7DAF9C"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#D9D762"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#EFCB43"}]});createTheme({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:tags.comment,color:"#404040"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#00D8FF"},{tag:tags.number,color:"#E62286"},{tag:[tags.variableName,tags.attributeName,tags.self],color:"#E62286",fontWeight:"bold"},{tag:tags.function(tags.variableName),color:"#fff",fontWeight:"bold"}]});createTheme({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:tags.comment,color:"#BCC8BA"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#5D90CD"},{tag:[tags.number,tags.bool,tags.null],color:"#46A609"},{tag:tags.keyword,color:"#AF956F"},{tag:[tags.definitionKeyword,tags.modifier],color:"#C52727"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#606060"},{tag:tags.self,color:"#000"}]});createTheme({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:tags.comment,color:"#0088FF"},{tag:tags.string,color:"#3AD900"},{tag:tags.regexp,color:"#80FFC2"},{tag:[tags.number,tags.bool,tags.null],color:"#FF628C"},{tag:[tags.definitionKeyword,tags.modifier],color:"#FFEE80"},{tag:tags.variableName,color:"#CCCCCC"},{tag:tags.self,color:"#FF80E1"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.definition(tags.typeName),tags.labelName],color:"#FFDD00"},{tag:[tags.keyword,tags.operator],color:"#FF9D00"},{tag:[tags.propertyName,tags.typeName],color:"#80FFBB"},{tag:tags.special(tags.brace),color:"#EDEF7D"},{tag:tags.attributeName,color:"#9EFFFF"},{tag:tags.derefOperator,color:"#fff"}]});createTheme({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:tags.comment,color:"#AEAEAE"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#8DFF8E"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.function(tags.definition(tags.variableName)),tags.definition(tags.typeName)],color:"#A3EBFF"},{tag:[tags.number,tags.bool,tags.null],color:"#62E9BD"},{tag:[tags.keyword,tags.operator],color:"#2BF1DC"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F8FBB1"},{tag:[tags.variableName,tags.self],color:"#B683CA"},{tag:[tags.angleBracket,tags.tagName,tags.typeName,tags.propertyName],color:"#60A4F1"},{tag:tags.derefOperator,color:"#E0E0E0"},{tag:tags.attributeName,color:"#7BACCA"}]});createTheme({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:tags.comment,color:"#6272a4"},{tag:[tags.string,tags.special(tags.brace)],color:"#f1fa8c"},{tag:[tags.number,tags.self,tags.bool,tags.null],color:"#bd93f9"},{tag:[tags.keyword,tags.operator],color:"#ff79c6"},{tag:[tags.definitionKeyword,tags.typeName],color:"#8be9fd"},{tag:tags.definition(tags.typeName),color:"#f8f8f2"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.attributeName],color:"#50fa7b"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:tags.comment,color:"#AAAAAA"},{tag:[tags.keyword,tags.operator,tags.typeName,tags.tagName,tags.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[tags.attributeName,tags.definition(tags.propertyName)],color:"#4F9FD0"},{tag:[tags.className,tags.string,tags.special(tags.brace)],color:"#CF4F5F"},{tag:tags.number,color:"#CF4F5F",fontWeight:"bold"},{tag:tags.variableName,fontWeight:"bold"}]});createTheme({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags.null,tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"}]});createTheme({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:tags.comment,color:"#9893a5"},{tag:[tags.bool,tags.null],color:"#286983"},{tag:tags.number,color:"#d7827e"},{tag:tags.className,color:"#d7827e"},{tag:[tags.angleBracket,tags.tagName,tags.typeName],color:"#56949f"},{tag:tags.attributeName,color:"#907aa9"},{tag:tags.punctuation,color:"#797593"},{tag:[tags.keyword,tags.modifier],color:"#286983"},{tag:[tags.string,tags.regexp],color:"#ea9d34"},{tag:tags.variableName,color:"#d7827e"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:tags.comment,color:"#CFCFCF"},{tag:[tags.number,tags.bool,tags.null],color:"#E66C29"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.labelName,tags.definition(tags.typeName)],color:"#2EB43B"},{tag:tags.keyword,color:"#D8B229"},{tag:tags.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#925A47"},{tag:tags.string,color:"#704D3D"},{tag:tags.typeName,color:"#2F8996"},{tag:[tags.variableName,tags.propertyName],color:"#77ACB0"},{tag:tags.self,color:"#77ACB0",fontWeight:"bold"},{tag:tags.regexp,color:"#E3965E"},{tag:[tags.tagName,tags.angleBracket],color:"#BAA827"},{tag:tags.attributeName,color:"#B06520"},{tag:tags.derefOperator,color:"#000"}]});createTheme({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:tags.comment,color:"#93A1A1"},{tag:tags.string,color:"#2AA198"},{tag:tags.regexp,color:"#D30102"},{tag:tags.number,color:"#D33682"},{tag:tags.variableName,color:"#268BD2"},{tag:[tags.keyword,tags.operator,tags.punctuation],color:"#859900"},{tag:[tags.definitionKeyword,tags.modifier],color:"#073642",fontWeight:"bold"},{tag:[tags.className,tags.self,tags.definition(tags.propertyName)],color:"#268BD2"},{tag:tags.function(tags.variableName),color:"#268BD2"},{tag:[tags.bool,tags.null],color:"#B58900"},{tag:tags.tagName,color:"#268BD2",fontWeight:"bold"},{tag:tags.angleBracket,color:"#93A1A1"},{tag:tags.attributeName,color:"#93A1A1"},{tag:tags.typeName,color:"#859900"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:tags.comment,color:"#8E908C"},{tag:[tags.variableName,tags.self,tags.propertyName,tags.attributeName,tags.regexp],color:"#C82829"},{tag:[tags.number,tags.bool,tags.null],color:"#F5871F"},{tag:[tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#C99E00"},{tag:[tags.string,tags.special(tags.brace)],color:"#718C00"},{tag:tags.operator,color:"#3E999F"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#4271AE"},{tag:tags.keyword,color:"#8959A8"},{tag:tags.derefOperator,color:"#4D4D4C"}]});class Editor extends EditorView{constructor(e,r,n){const o=new Compartment;let a=[indentUnit.of("    "),basicSetup,o.of(python()),keymap.of([...defaultKeymap,indentWithTab]),Prec.highest(keymap.of([{key:"Ctrl-Enter",run:()=>(n.runMPC(this.getCode(),r.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(n.runMPC(this.getCode(),r.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),r.selectedIndex!=0&&(r.selectedIndex=0,r.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Ctrl-d",run:copyLineDown,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:moveLineUp,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:moveLineDown,preventDefault:!0},{key:"Ctrl-y",run:deleteLine,preventDefault:!0}]))];a.push(birdsOfParadise),super({extensions:a,parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}async function fetchSelectedDemo(s){var e;return s.selectedIndex==0?e=localStorage.customCode||"":e=await(await fetch(s.value)).text(),e}function ensureStorageSchema(s){console.log("Storage schema generation:",localStorage.gen),localStorage.gen||=0,localStorage.gen<s&&(console.log(`Clearing schema, latest generation: ${s}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=s)}const __isTabDuplicate=()=>{addEventListener("beforeunload",function(){delete sessionStorage.__lock});let s=!1;return sessionStorage.__lock&&(s=!0),sessionStorage.__lock=1,s},isTabDuplicate=__isTabDuplicate();function loadPeerID(){localStorage.tabCount||=0;let s=parseInt(localStorage.tabCount)+1;return localStorage.tabCount=s,addEventListener("beforeunload",function(){setTabState("lock","");let e=parseInt(localStorage.tabCount);e>0&&(localStorage.tabCount=e-1)}),isTabDuplicate&&console.warn("tab is duplicate"),(!sessionStorage.tabID||isTabDuplicate||getTabState("lock",sessionStorage.tabID)!="")&&(sessionStorage.tabID=selectTabID(),sessionStorage.myPeerID=getTabState("myPeerID")),setTabState("lock","locked"),console.log("tab id: "+sessionStorage.tabID),sessionStorage.myPeerID}function selectTabID(){for(let s=1;s<=1e3;s++)if(getTabState("lock",s)=="")return s}function getTabState(s,e=sessionStorage.tabID){return localStorage[`tabState:${e}:`+s]||""}function setTabState(s,e,r=sessionStorage.tabID){sessionStorage[s]=e,localStorage[`tabState:${r}:`+s]=e}var Html5QrcodeSupportedFormats;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Html5QrcodeSupportedFormats||(Html5QrcodeSupportedFormats={}));var html5QrcodeSupportedFormatsTextMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"QR_CODE"],[Html5QrcodeSupportedFormats.AZTEC,"AZTEC"],[Html5QrcodeSupportedFormats.CODABAR,"CODABAR"],[Html5QrcodeSupportedFormats.CODE_39,"CODE_39"],[Html5QrcodeSupportedFormats.CODE_93,"CODE_93"],[Html5QrcodeSupportedFormats.CODE_128,"CODE_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"DATA_MATRIX"],[Html5QrcodeSupportedFormats.MAXICODE,"MAXICODE"],[Html5QrcodeSupportedFormats.ITF,"ITF"],[Html5QrcodeSupportedFormats.EAN_13,"EAN_13"],[Html5QrcodeSupportedFormats.EAN_8,"EAN_8"],[Html5QrcodeSupportedFormats.PDF_417,"PDF_417"],[Html5QrcodeSupportedFormats.RSS_14,"RSS_14"],[Html5QrcodeSupportedFormats.RSS_EXPANDED,"RSS_EXPANDED"],[Html5QrcodeSupportedFormats.UPC_A,"UPC_A"],[Html5QrcodeSupportedFormats.UPC_E,"UPC_E"],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DecodedTextType;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(DecodedTextType||(DecodedTextType={}));function isValidHtml5QrcodeSupportedFormats(s){return Object.values(Html5QrcodeSupportedFormats).includes(s)}var Html5QrcodeScanType;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Html5QrcodeScanType||(Html5QrcodeScanType={}));var Html5QrcodeConstants=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[Html5QrcodeScanType.SCAN_TYPE_CAMERA,Html5QrcodeScanType.SCAN_TYPE_FILE],s}(),QrcodeResultFormat=function(){function s(e,r){this.format=e,this.formatName=r}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!html5QrcodeSupportedFormatsTextMap.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,html5QrcodeSupportedFormatsTextMap.get(e))},s}(),Html5QrcodeResultFactory=function(){function s(){}return s.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s}(),Html5QrcodeErrorTypes;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Html5QrcodeErrorTypes||(Html5QrcodeErrorTypes={}));var Html5QrcodeErrorFactory=function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:Html5QrcodeErrorTypes.UNKWOWN_ERROR}},s}(),BaseLoggger=function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s}();function isNullOrUndefined(s){return typeof s>"u"||s===null}var Html5QrcodeStrings=function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),VideoConstraintsUtil=function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(o),c=Object.keys(e),l=0,h=c;l<h.length;l++){var d=h[l];if(a.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},s}(),zxingJs_umd$1={exports:{}};(function(s,e){(function(r,n){n(e)})(commonjsGlobal,function(r){function n(te){return te==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,u){te.__proto__=u}||function(te,u){for(var p in u)u.hasOwnProperty(p)&&(te[p]=u[p])};function a(te,u){o(te,u);function p(){this.constructor=te}te.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}function c(te,u){var p=Object.setPrototypeOf;p?p(te,u):te.__proto__=u}function l(te,u){u===void 0&&(u=te.constructor);var p=Error.captureStackTrace;p&&p(te,u)}var h=function(te){a(u,te);function u(p){var v=this.constructor,S=te.call(this,p)||this;return Object.defineProperty(S,"name",{value:v.name,enumerable:!1}),c(S,v.prototype),l(S),S}return u}(Error);class d extends h{constructor(u=void 0){super(u),this.message=u}getKind(){return this.constructor.kind}}d.kind="Exception";class f extends d{}f.kind="ArgumentException";class g extends d{}g.kind="IllegalArgumentException";class _{constructor(u){if(this.binarizer=u,u===null)throw new g("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(u,p){return this.binarizer.getBlackRow(u,p)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(u,p,v,S){const O=this.binarizer.getLuminanceSource().crop(u,p,v,S);return new _(this.binarizer.createBinarizer(O))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(u))}rotateCounterClockwise45(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(u))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends d{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class A{constructor(u){this.source=u}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(u,p,v,S,O){for(;O--;)v[S++]=u[p++]}static currentTimeMillis(){return Date.now()}}class m extends d{}m.kind="IndexOutOfBoundsException";class b extends m{constructor(u=void 0,p=void 0){super(p),this.index=u,this.message=p}}b.kind="ArrayIndexOutOfBoundsException";class y{static fill(u,p){for(let v=0,S=u.length;v<S;v++)u[v]=p}static fillWithin(u,p,v,S){y.rangeCheck(u.length,p,v);for(let O=p;O<v;O++)u[O]=S}static rangeCheck(u,p,v){if(p>v)throw new g("fromIndex("+p+") > toIndex("+v+")");if(p<0)throw new b(p);if(v>u)throw new b(v)}static asList(...u){return u}static create(u,p,v){return Array.from({length:u}).map(O=>Array.from({length:p}).fill(v))}static createInt32Array(u,p,v){return Array.from({length:u}).map(O=>Int32Array.from({length:p}).fill(v))}static equals(u,p){if(!u||!p||!u.length||!p.length||u.length!==p.length)return!1;for(let v=0,S=u.length;v<S;v++)if(u[v]!==p[v])return!1;return!0}static hashCode(u){if(u===null)return 0;let p=1;for(const v of u)p=31*p+v;return p}static fillUint8Array(u,p){for(let v=0;v!==u.length;v++)u[v]=p}static copyOf(u,p){return u.slice(0,p)}static copyOfUint8Array(u,p){if(u.length<=p){const v=new Uint8Array(p);return v.set(u),v}return u.slice(0,p)}static copyOfRange(u,p,v){const S=v-p,O=new Int32Array(S);return w.arraycopy(u,p,O,0,S),O}static binarySearch(u,p,v){v===void 0&&(v=y.numberComparator);let S=0,O=u.length-1;for(;S<=O;){const T=O+S>>1,P=v(p,u[T]);if(P>0)S=T+1;else if(P<0)O=T-1;else return T}return-S-1}static numberComparator(u,p){return u-p}}class x{static numberOfTrailingZeros(u){let p;if(u===0)return 32;let v=31;return p=u<<16,p!==0&&(v-=16,u=p),p=u<<8,p!==0&&(v-=8,u=p),p=u<<4,p!==0&&(v-=4,u=p),p=u<<2,p!==0&&(v-=2,u=p),v-(u<<1>>>31)}static numberOfLeadingZeros(u){if(u===0)return 32;let p=1;return u>>>16||(p+=16,u<<=16),u>>>24||(p+=8,u<<=8),u>>>28||(p+=4,u<<=4),u>>>30||(p+=2,u<<=2),p-=u>>>31,p}static toHexString(u){return u.toString(16)}static toBinaryString(u){return String(parseInt(String(u),2))}static bitCount(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),u=u+(u>>>4)&252645135,u=u+(u>>>8),u=u+(u>>>16),u&63}static truncDivision(u,p){return Math.trunc(u/p)}static parseInt(u,p=void 0){return parseInt(u,p)}}x.MIN_VALUE_32_BITS=-2147483648,x.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(u,p){u===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=u,p==null?this.bits=D.makeArray(u):this.bits=p)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(u){if(u>this.bits.length*32){const p=D.makeArray(u);w.arraycopy(this.bits,0,p,0,this.bits.length),this.bits=p}}get(u){return(this.bits[Math.floor(u/32)]&1<<(u&31))!==0}set(u){this.bits[Math.floor(u/32)]|=1<<(u&31)}flip(u){this.bits[Math.floor(u/32)]^=1<<(u&31)}getNextSet(u){const p=this.size;if(u>=p)return p;const v=this.bits;let S=Math.floor(u/32),O=v[S];O&=~((1<<(u&31))-1);const T=v.length;for(;O===0;){if(++S===T)return p;O=v[S]}const P=S*32+x.numberOfTrailingZeros(O);return P>p?p:P}getNextUnset(u){const p=this.size;if(u>=p)return p;const v=this.bits;let S=Math.floor(u/32),O=~v[S];O&=~((1<<(u&31))-1);const T=v.length;for(;O===0;){if(++S===T)return p;O=~v[S]}const P=S*32+x.numberOfTrailingZeros(O);return P>p?p:P}setBulk(u,p){this.bits[Math.floor(u/32)]=p}setRange(u,p){if(p<u||u<0||p>this.size)throw new g;if(p===u)return;p--;const v=Math.floor(u/32),S=Math.floor(p/32),O=this.bits;for(let T=v;T<=S;T++){const P=T>v?0:u&31,j=(2<<(T<S?31:p&31))-(1<<P);O[T]|=j}}clear(){const u=this.bits.length,p=this.bits;for(let v=0;v<u;v++)p[v]=0}isRange(u,p,v){if(p<u||u<0||p>this.size)throw new g;if(p===u)return!0;p--;const S=Math.floor(u/32),O=Math.floor(p/32),T=this.bits;for(let P=S;P<=O;P++){const F=P>S?0:u&31,Z=(2<<(P<O?31:p&31))-(1<<F)&4294967295;if((T[P]&Z)!==(v?Z:0))return!1}return!0}appendBit(u){this.ensureCapacity(this.size+1),u&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(u,p){if(p<0||p>32)throw new g("Num bits must be between 0 and 32");this.ensureCapacity(this.size+p);for(let v=p;v>0;v--)this.appendBit((u>>v-1&1)===1)}appendBitArray(u){const p=u.size;this.ensureCapacity(this.size+p);for(let v=0;v<p;v++)this.appendBit(u.get(v))}xor(u){if(this.size!==u.size)throw new g("Sizes don't match");const p=this.bits;for(let v=0,S=p.length;v<S;v++)p[v]^=u.bits[v]}toBytes(u,p,v,S){for(let O=0;O<S;O++){let T=0;for(let P=0;P<8;P++)this.get(u)&&(T|=1<<7-P),u++;p[v+O]=T}}getBitArray(){return this.bits}reverse(){const u=new Int32Array(this.bits.length),p=Math.floor((this.size-1)/32),v=p+1,S=this.bits;for(let O=0;O<v;O++){let T=S[O];T=T>>1&1431655765|(T&1431655765)<<1,T=T>>2&858993459|(T&858993459)<<2,T=T>>4&252645135|(T&252645135)<<4,T=T>>8&16711935|(T&16711935)<<8,T=T>>16&65535|(T&65535)<<16,u[p-O]=T}if(this.size!==v*32){const O=v*32-this.size;let T=u[0]>>>O;for(let P=1;P<v;P++){const F=u[P];T|=F<<32-O,u[P-1]=T,T=F>>>O}u[v-1]=T}this.bits=u}static makeArray(u){return new Int32Array(Math.floor((u+31)/32))}equals(u){if(!(u instanceof D))return!1;const p=u;return this.size===p.size&&y.equals(this.bits,p.bits)}hashCode(){return 31*this.size+y.hashCode(this.bits)}toString(){let u="";for(let p=0,v=this.size;p<v;p++)p&7||(u+=" "),u+=this.get(p)?"X":".";return u}clone(){return new D(this.size,this.bits.slice())}}var R;(function(te){te[te.OTHER=0]="OTHER",te[te.PURE_BARCODE=1]="PURE_BARCODE",te[te.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",te[te.TRY_HARDER=3]="TRY_HARDER",te[te.CHARACTER_SET=4]="CHARACTER_SET",te[te.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",te[te.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",te[te.ASSUME_GS1=7]="ASSUME_GS1",te[te.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",te[te.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",te[te.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(R||(R={}));var M=R;class L extends d{static getFormatInstance(){return new L}}L.kind="FormatException";var k;(function(te){te[te.Cp437=0]="Cp437",te[te.ISO8859_1=1]="ISO8859_1",te[te.ISO8859_2=2]="ISO8859_2",te[te.ISO8859_3=3]="ISO8859_3",te[te.ISO8859_4=4]="ISO8859_4",te[te.ISO8859_5=5]="ISO8859_5",te[te.ISO8859_6=6]="ISO8859_6",te[te.ISO8859_7=7]="ISO8859_7",te[te.ISO8859_8=8]="ISO8859_8",te[te.ISO8859_9=9]="ISO8859_9",te[te.ISO8859_10=10]="ISO8859_10",te[te.ISO8859_11=11]="ISO8859_11",te[te.ISO8859_13=12]="ISO8859_13",te[te.ISO8859_14=13]="ISO8859_14",te[te.ISO8859_15=14]="ISO8859_15",te[te.ISO8859_16=15]="ISO8859_16",te[te.SJIS=16]="SJIS",te[te.Cp1250=17]="Cp1250",te[te.Cp1251=18]="Cp1251",te[te.Cp1252=19]="Cp1252",te[te.Cp1256=20]="Cp1256",te[te.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",te[te.UTF8=22]="UTF8",te[te.ASCII=23]="ASCII",te[te.Big5=24]="Big5",te[te.GB18030=25]="GB18030",te[te.EUC_KR=26]="EUC_KR"})(k||(k={}));class I{constructor(u,p,v,...S){this.valueIdentifier=u,this.name=v,typeof p=="number"?this.values=Int32Array.from([p]):this.values=p,this.otherEncodingNames=S,I.VALUE_IDENTIFIER_TO_ECI.set(u,this),I.NAME_TO_ECI.set(v,this);const O=this.values;for(let T=0,P=O.length;T!==P;T++){const F=O[T];I.VALUES_TO_ECI.set(F,this)}for(const T of S)I.NAME_TO_ECI.set(T,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(u){if(u<0||u>=900)throw new L("incorect value");const p=I.VALUES_TO_ECI.get(u);if(p===void 0)throw new L("incorect value");return p}static getCharacterSetECIByName(u){const p=I.NAME_TO_ECI.get(u);if(p===void 0)throw new L("incorect value");return p}equals(u){if(!(u instanceof I))return!1;const p=u;return this.getName()===p.getName()}}I.VALUE_IDENTIFIER_TO_ECI=new Map,I.VALUES_TO_ECI=new Map,I.NAME_TO_ECI=new Map,I.Cp437=new I(k.Cp437,Int32Array.from([0,2]),"Cp437"),I.ISO8859_1=new I(k.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),I.ISO8859_2=new I(k.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),I.ISO8859_3=new I(k.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),I.ISO8859_4=new I(k.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),I.ISO8859_5=new I(k.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),I.ISO8859_6=new I(k.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),I.ISO8859_7=new I(k.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),I.ISO8859_8=new I(k.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),I.ISO8859_9=new I(k.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),I.ISO8859_10=new I(k.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),I.ISO8859_11=new I(k.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),I.ISO8859_13=new I(k.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),I.ISO8859_14=new I(k.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),I.ISO8859_15=new I(k.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),I.ISO8859_16=new I(k.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),I.SJIS=new I(k.SJIS,20,"SJIS","Shift_JIS"),I.Cp1250=new I(k.Cp1250,21,"Cp1250","windows-1250"),I.Cp1251=new I(k.Cp1251,22,"Cp1251","windows-1251"),I.Cp1252=new I(k.Cp1252,23,"Cp1252","windows-1252"),I.Cp1256=new I(k.Cp1256,24,"Cp1256","windows-1256"),I.UnicodeBigUnmarked=new I(k.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),I.UTF8=new I(k.UTF8,26,"UTF8","UTF-8"),I.ASCII=new I(k.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),I.Big5=new I(k.Big5,28,"Big5"),I.GB18030=new I(k.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),I.EUC_KR=new I(k.EUC_KR,30,"EUC_KR","EUC-KR");class V extends d{}V.kind="UnsupportedOperationException";class N{static decode(u,p){const v=this.encodingName(p);return this.customDecoder?this.customDecoder(u,v):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(v)?this.decodeFallback(u,v):new TextDecoder(v).decode(u)}static shouldDecodeOnFallback(u){return!N.isBrowser()&&u==="ISO-8859-1"}static encode(u,p){const v=this.encodingName(p);return this.customEncoder?this.customEncoder(u,v):typeof TextEncoder>"u"?this.encodeFallback(u):new TextEncoder().encode(u)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(u){return typeof u=="string"?u:u.getName()}static encodingCharacterSet(u){return u instanceof I?u:I.getCharacterSetECIByName(u)}static decodeFallback(u,p){const v=this.encodingCharacterSet(p);if(N.isDecodeFallbackSupported(v)){let S="";for(let O=0,T=u.length;O<T;O++){let P=u[O].toString(16);P.length<2&&(P="0"+P),S+="%"+P}return decodeURIComponent(S)}if(v.equals(I.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(u.buffer));throw new V(`Encoding ${this.encodingName(p)} not supported by fallback.`)}static isDecodeFallbackSupported(u){return u.equals(I.UTF8)||u.equals(I.ISO8859_1)||u.equals(I.ASCII)}static encodeFallback(u){const v=btoa(unescape(encodeURIComponent(u))).split(""),S=[];for(let O=0;O<v.length;O++)S.push(v[O].charCodeAt(0));return new Uint8Array(S)}}class B{static castAsNonUtf8Char(u,p=null){const v=p?p.getName():this.ISO88591;return N.decode(new Uint8Array([u]),v)}static guessEncoding(u,p){if(p!=null&&p.get(M.CHARACTER_SET)!==void 0)return p.get(M.CHARACTER_SET).toString();const v=u.length;let S=!0,O=!0,T=!0,P=0,F=0,j=0,Z=0,re=0,ae=0,ve=0,Me=0,Be=0,Ue=0,Qe=0;const xt=u.length>3&&u[0]===239&&u[1]===187&&u[2]===191;for(let wt=0;wt<v&&(S||O||T);wt++){const bt=u[wt]&255;T&&(P>0?bt&128?P--:T=!1:bt&128&&(bt&64?(P++,bt&32?(P++,bt&16?(P++,bt&8?T=!1:Z++):j++):F++):T=!1)),S&&(bt>127&&bt<160?S=!1:bt>159&&(bt<192||bt===215||bt===247)&&Qe++),O&&(re>0?bt<64||bt===127||bt>252?O=!1:re--:bt===128||bt===160||bt>239?O=!1:bt>160&&bt<224?(ae++,Me=0,ve++,ve>Be&&(Be=ve)):bt>127?(re++,ve=0,Me++,Me>Ue&&(Ue=Me)):(ve=0,Me=0))}return T&&P>0&&(T=!1),O&&re>0&&(O=!1),T&&(xt||F+j+Z>0)?B.UTF8:O&&(B.ASSUME_SHIFT_JIS||Be>=3||Ue>=3)?B.SHIFT_JIS:S&&O?Be===2&&ae===2||Qe*10>=v?B.SHIFT_JIS:B.ISO88591:S?B.ISO88591:O?B.SHIFT_JIS:T?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(u,...p){let v=-1;function S(T,P,F,j,Z,re){if(T==="%%")return"%";if(p[++v]===void 0)return;T=j?parseInt(j.substr(1)):void 0;let ae=Z?parseInt(Z.substr(1)):void 0,ve;switch(re){case"s":ve=p[v];break;case"c":ve=p[v][0];break;case"f":ve=parseFloat(p[v]).toFixed(T);break;case"p":ve=parseFloat(p[v]).toPrecision(T);break;case"e":ve=parseFloat(p[v]).toExponential(T);break;case"x":ve=parseInt(p[v]).toString(ae||16);break;case"d":ve=parseFloat(parseInt(p[v],ae||10).toPrecision(T)).toFixed(0);break}ve=typeof ve=="object"?JSON.stringify(ve):(+ve).toString(ae);let Me=parseInt(F),Be=F&&F[0]+""=="0"?"0":" ";for(;ve.length<Me;)ve=P!==void 0?ve+Be:Be+ve;return ve}let O=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(O,S)}static getBytes(u,p){return N.encode(u,p)}static getCharCode(u,p=0){return u.charCodeAt(p)}static getCharAt(u){return String.fromCharCode(u)}}B.SHIFT_JIS=I.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=I.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=I.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class H{constructor(u=""){this.value=u}enableDecoding(u){return this.encoding=u,this}append(u){return typeof u=="string"?this.value+=u.toString():this.encoding?this.value+=B.castAsNonUtf8Char(u,this.encoding):this.value+=String.fromCharCode(u),this}appendChars(u,p,v){for(let S=p;p<p+v;S++)this.append(u[S]);return this}length(){return this.value.length}charAt(u){return this.value.charAt(u)}deleteCharAt(u){this.value=this.value.substr(0,u)+this.value.substring(u+1)}setCharAt(u,p){this.value=this.value.substr(0,u)+p+this.value.substr(u+1)}substring(u,p){return this.value.substring(u,p)}setLengthToZero(){this.value=""}toString(){return this.value}insert(u,p){this.value=this.value.substr(0,u)+p+this.value.substr(u+p.length)}}class z{constructor(u,p,v,S){if(this.width=u,this.height=p,this.rowSize=v,this.bits=S,p==null&&(p=u),this.height=p,u<1||p<1)throw new g("Both dimensions must be greater than 0");v==null&&(v=Math.floor((u+31)/32)),this.rowSize=v,S==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(u){const p=u.length,v=u[0].length,S=new z(v,p);for(let O=0;O<p;O++){const T=u[O];for(let P=0;P<v;P++)T[P]&&S.set(P,O)}return S}static parseFromString(u,p,v){if(u===null)throw new g("stringRepresentation cannot be null");const S=new Array(u.length);let O=0,T=0,P=-1,F=0,j=0;for(;j<u.length;)if(u.charAt(j)===`
`||u.charAt(j)==="\r"){if(O>T){if(P===-1)P=O-T;else if(O-T!==P)throw new g("row lengths do not match");T=O,F++}j++}else if(u.substring(j,j+p.length)===p)j+=p.length,S[O]=!0,O++;else if(u.substring(j,j+v.length)===v)j+=v.length,S[O]=!1,O++;else throw new g("illegal character encountered: "+u.substring(j));if(O>T){if(P===-1)P=O-T;else if(O-T!==P)throw new g("row lengths do not match");F++}const Z=new z(P,F);for(let re=0;re<O;re++)S[re]&&Z.set(Math.floor(re%P),Math.floor(re/P));return Z}get(u,p){const v=p*this.rowSize+Math.floor(u/32);return(this.bits[v]>>>(u&31)&1)!==0}set(u,p){const v=p*this.rowSize+Math.floor(u/32);this.bits[v]|=1<<(u&31)&4294967295}unset(u,p){const v=p*this.rowSize+Math.floor(u/32);this.bits[v]&=~(1<<(u&31)&4294967295)}flip(u,p){const v=p*this.rowSize+Math.floor(u/32);this.bits[v]^=1<<(u&31)&4294967295}xor(u){if(this.width!==u.getWidth()||this.height!==u.getHeight()||this.rowSize!==u.getRowSize())throw new g("input matrix dimensions do not match");const p=new D(Math.floor(this.width/32)+1),v=this.rowSize,S=this.bits;for(let O=0,T=this.height;O<T;O++){const P=O*v,F=u.getRow(O,p).getBitArray();for(let j=0;j<v;j++)S[P+j]^=F[j]}}clear(){const u=this.bits,p=u.length;for(let v=0;v<p;v++)u[v]=0}setRegion(u,p,v,S){if(p<0||u<0)throw new g("Left and top must be nonnegative");if(S<1||v<1)throw new g("Height and width must be at least 1");const O=u+v,T=p+S;if(T>this.height||O>this.width)throw new g("The region must fit inside the matrix");const P=this.rowSize,F=this.bits;for(let j=p;j<T;j++){const Z=j*P;for(let re=u;re<O;re++)F[Z+Math.floor(re/32)]|=1<<(re&31)&4294967295}}getRow(u,p){p==null||p.getSize()<this.width?p=new D(this.width):p.clear();const v=this.rowSize,S=this.bits,O=u*v;for(let T=0;T<v;T++)p.setBulk(T*32,S[O+T]);return p}setRow(u,p){w.arraycopy(p.getBitArray(),0,this.bits,u*this.rowSize,this.rowSize)}rotate180(){const u=this.getWidth(),p=this.getHeight();let v=new D(u),S=new D(u);for(let O=0,T=Math.floor((p+1)/2);O<T;O++)v=this.getRow(O,v),S=this.getRow(p-1-O,S),v.reverse(),S.reverse(),this.setRow(O,S),this.setRow(p-1-O,v)}getEnclosingRectangle(){const u=this.width,p=this.height,v=this.rowSize,S=this.bits;let O=u,T=p,P=-1,F=-1;for(let j=0;j<p;j++)for(let Z=0;Z<v;Z++){const re=S[j*v+Z];if(re!==0){if(j<T&&(T=j),j>F&&(F=j),Z*32<O){let ae=0;for(;!(re<<31-ae&4294967295);)ae++;Z*32+ae<O&&(O=Z*32+ae)}if(Z*32+31>P){let ae=31;for(;!(re>>>ae);)ae--;Z*32+ae>P&&(P=Z*32+ae)}}}return P<O||F<T?null:Int32Array.from([O,T,P-O+1,F-T+1])}getTopLeftOnBit(){const u=this.rowSize,p=this.bits;let v=0;for(;v<p.length&&p[v]===0;)v++;if(v===p.length)return null;const S=v/u;let O=v%u*32;const T=p[v];let P=0;for(;!(T<<31-P&4294967295);)P++;return O+=P,Int32Array.from([O,S])}getBottomRightOnBit(){const u=this.rowSize,p=this.bits;let v=p.length-1;for(;v>=0&&p[v]===0;)v--;if(v<0)return null;const S=Math.floor(v/u);let O=Math.floor(v%u)*32;const T=p[v];let P=31;for(;!(T>>>P);)P--;return O+=P,Int32Array.from([O,S])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(u){if(!(u instanceof z))return!1;const p=u;return this.width===p.width&&this.height===p.height&&this.rowSize===p.rowSize&&y.equals(this.bits,p.bits)}hashCode(){let u=this.width;return u=31*u+this.width,u=31*u+this.height,u=31*u+this.rowSize,u=31*u+y.hashCode(this.bits),u}toString(u="X ",p="  ",v=`
`){return this.buildToString(u,p,v)}buildToString(u,p,v){let S=new H;for(let O=0,T=this.height;O<T;O++){for(let P=0,F=this.width;P<F;P++)S.append(this.get(P,O)?u:p);S.append(v)}return S.toString()}clone(){return new z(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends d{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class Q extends A{constructor(u){super(u),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(u,p){const v=this.getLuminanceSource(),S=v.getWidth();p==null||p.getSize()<S?p=new D(S):p.clear(),this.initArrays(S);const O=v.getRow(u,this.luminances),T=this.buckets;for(let F=0;F<S;F++)T[(O[F]&255)>>Q.LUMINANCE_SHIFT]++;const P=Q.estimateBlackPoint(T);if(S<3)for(let F=0;F<S;F++)(O[F]&255)<P&&p.set(F);else{let F=O[0]&255,j=O[1]&255;for(let Z=1;Z<S-1;Z++){const re=O[Z+1]&255;(j*4-F-re)/2<P&&p.set(Z),F=j,j=re}}return p}getBlackMatrix(){const u=this.getLuminanceSource(),p=u.getWidth(),v=u.getHeight(),S=new z(p,v);this.initArrays(p);const O=this.buckets;for(let F=1;F<5;F++){const j=Math.floor(v*F/5),Z=u.getRow(j,this.luminances),re=Math.floor(p*4/5);for(let ae=Math.floor(p/5);ae<re;ae++){const ve=Z[ae]&255;O[ve>>Q.LUMINANCE_SHIFT]++}}const T=Q.estimateBlackPoint(O),P=u.getMatrix();for(let F=0;F<v;F++){const j=F*p;for(let Z=0;Z<p;Z++)(P[j+Z]&255)<T&&S.set(Z,F)}return S}createBinarizer(u){return new Q(u)}initArrays(u){this.luminances.length<u&&(this.luminances=new Uint8ClampedArray(u));const p=this.buckets;for(let v=0;v<Q.LUMINANCE_BUCKETS;v++)p[v]=0}static estimateBlackPoint(u){const p=u.length;let v=0,S=0,O=0;for(let Z=0;Z<p;Z++)u[Z]>O&&(S=Z,O=u[Z]),u[Z]>v&&(v=u[Z]);let T=0,P=0;for(let Z=0;Z<p;Z++){const re=Z-S,ae=u[Z]*re*re;ae>P&&(T=Z,P=ae)}if(S>T){const Z=S;S=T,T=Z}if(T-S<=p/16)throw new W;let F=T-1,j=-1;for(let Z=T-1;Z>S;Z--){const re=Z-S,ae=re*re*(T-Z)*(v-u[Z]);ae>j&&(F=Z,j=ae)}return F<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class X extends Q{constructor(u){super(u),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const u=this.getLuminanceSource(),p=u.getWidth(),v=u.getHeight();if(p>=X.MINIMUM_DIMENSION&&v>=X.MINIMUM_DIMENSION){const S=u.getMatrix();let O=p>>X.BLOCK_SIZE_POWER;p&X.BLOCK_SIZE_MASK&&O++;let T=v>>X.BLOCK_SIZE_POWER;v&X.BLOCK_SIZE_MASK&&T++;const P=X.calculateBlackPoints(S,O,T,p,v),F=new z(p,v);X.calculateThresholdForBlock(S,O,T,p,v,P,F),this.matrix=F}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(u){return new X(u)}static calculateThresholdForBlock(u,p,v,S,O,T,P){const F=O-X.BLOCK_SIZE,j=S-X.BLOCK_SIZE;for(let Z=0;Z<v;Z++){let re=Z<<X.BLOCK_SIZE_POWER;re>F&&(re=F);const ae=X.cap(Z,2,v-3);for(let ve=0;ve<p;ve++){let Me=ve<<X.BLOCK_SIZE_POWER;Me>j&&(Me=j);const Be=X.cap(ve,2,p-3);let Ue=0;for(let xt=-2;xt<=2;xt++){const wt=T[ae+xt];Ue+=wt[Be-2]+wt[Be-1]+wt[Be]+wt[Be+1]+wt[Be+2]}const Qe=Ue/25;X.thresholdBlock(u,Me,re,Qe,S,P)}}}static cap(u,p,v){return u<p?p:u>v?v:u}static thresholdBlock(u,p,v,S,O,T){for(let P=0,F=v*O+p;P<X.BLOCK_SIZE;P++,F+=O)for(let j=0;j<X.BLOCK_SIZE;j++)(u[F+j]&255)<=S&&T.set(p+j,v+P)}static calculateBlackPoints(u,p,v,S,O){const T=O-X.BLOCK_SIZE,P=S-X.BLOCK_SIZE,F=new Array(v);for(let j=0;j<v;j++){F[j]=new Int32Array(p);let Z=j<<X.BLOCK_SIZE_POWER;Z>T&&(Z=T);for(let re=0;re<p;re++){let ae=re<<X.BLOCK_SIZE_POWER;ae>P&&(ae=P);let ve=0,Me=255,Be=0;for(let Qe=0,xt=Z*S+ae;Qe<X.BLOCK_SIZE;Qe++,xt+=S){for(let wt=0;wt<X.BLOCK_SIZE;wt++){const bt=u[xt+wt]&255;ve+=bt,bt<Me&&(Me=bt),bt>Be&&(Be=bt)}if(Be-Me>X.MIN_DYNAMIC_RANGE)for(Qe++,xt+=S;Qe<X.BLOCK_SIZE;Qe++,xt+=S)for(let wt=0;wt<X.BLOCK_SIZE;wt++)ve+=u[xt+wt]&255}let Ue=ve>>X.BLOCK_SIZE_POWER*2;if(Be-Me<=X.MIN_DYNAMIC_RANGE&&(Ue=Me/2,j>0&&re>0)){const Qe=(F[j-1][re]+2*F[j][re-1]+F[j-1][re-1])/4;Me<Qe&&(Ue=Qe)}F[j][re]=Ue}}return F}}X.BLOCK_SIZE_POWER=3,X.BLOCK_SIZE=1<<X.BLOCK_SIZE_POWER,X.BLOCK_SIZE_MASK=X.BLOCK_SIZE-1,X.MINIMUM_DIMENSION=X.BLOCK_SIZE*5,X.MIN_DYNAMIC_RANGE=24;class G{constructor(u,p){this.width=u,this.height=p}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(u,p,v,S){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const u=new Uint8ClampedArray(this.width);let p=new H;for(let v=0;v<this.height;v++){const S=this.getRow(v,u);for(let O=0;O<this.width;O++){const T=S[O]&255;let P;T<64?P="#":T<128?P="+":T<192?P=".":P=" ",p.append(P)}p.append(`
`)}return p.toString()}}class q extends G{constructor(u){super(u.getWidth(),u.getHeight()),this.delegate=u}getRow(u,p){const v=this.delegate.getRow(u,p),S=this.getWidth();for(let O=0;O<S;O++)v[O]=255-(v[O]&255);return v}getMatrix(){const u=this.delegate.getMatrix(),p=this.getWidth()*this.getHeight(),v=new Uint8ClampedArray(p);for(let S=0;S<p;S++)v[S]=255-(u[S]&255);return v}isCropSupported(){return this.delegate.isCropSupported()}crop(u,p,v,S){return new q(this.delegate.crop(u,p,v,S))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new q(this.delegate.rotateCounterClockwise45())}}class Y extends G{constructor(u){super(u.width,u.height),this.canvas=u,this.tempCanvasElement=null,this.buffer=Y.makeBufferFromCanvasImageData(u)}static makeBufferFromCanvasImageData(u){const p=u.getContext("2d").getImageData(0,0,u.width,u.height);return Y.toGrayscaleBuffer(p.data,u.width,u.height)}static toGrayscaleBuffer(u,p,v){const S=new Uint8ClampedArray(p*v);for(let O=0,T=0,P=u.length;O<P;O+=4,T++){let F;if(u[O+3]===0)F=255;else{const Z=u[O],re=u[O+1],ae=u[O+2];F=306*Z+601*re+117*ae+512>>10}S[T]=F}return S}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const v=this.getWidth(),S=u*v;return p===null?p=this.buffer.slice(S,S+v):(p.length<v&&(p=new Uint8ClampedArray(v)),p.set(this.buffer.slice(S,S+v))),p}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(u,p,v,S){return super.crop(u,p,v,S),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const u=this.canvas.ownerDocument.createElement("canvas");u.width=this.canvas.width,u.height=this.canvas.height,this.tempCanvasElement=u}return this.tempCanvasElement}rotate(u){const p=this.getTempCanvasElement(),v=p.getContext("2d"),S=u*Y.DEGREE_TO_RADIANS,O=this.canvas.width,T=this.canvas.height,P=Math.ceil(Math.abs(Math.cos(S))*O+Math.abs(Math.sin(S))*T),F=Math.ceil(Math.abs(Math.sin(S))*O+Math.abs(Math.cos(S))*T);return p.width=P,p.height=F,v.translate(P/2,F/2),v.rotate(S),v.drawImage(this.canvas,O/-2,T/-2),this.buffer=Y.makeBufferFromCanvasImageData(p),this}invert(){return new q(this)}}Y.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(u,p,v){this.deviceId=u,this.label=p,this.kind="videoinput",this.groupId=v||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var se=(globalThis||commonjsGlobal||self||window||void 0)&&(globalThis||commonjsGlobal||self||window||void 0).__awaiter||function(te,u,p,v){function S(O){return O instanceof p?O:new p(function(T){T(O)})}return new(p||(p=Promise))(function(O,T){function P(Z){try{j(v.next(Z))}catch(re){T(re)}}function F(Z){try{j(v.throw(Z))}catch(re){T(re)}}function j(Z){Z.done?O(Z.value):S(Z.value).then(P,F)}j((v=v.apply(te,u||[])).next())})};class Se{constructor(u,p=500,v){this.reader=u,this.timeBetweenScansMillis=p,this._hints=v,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(u){this._timeBetweenDecodingAttempts=u<0?0:u}set hints(u){this._hints=u||null}get hints(){return this._hints}listVideoInputDevices(){return se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const u=yield navigator.mediaDevices.enumerateDevices(),p=[];for(const v of u){const S=v.kind==="video"?"videoinput":v.kind;if(S!=="videoinput")continue;const O=v.deviceId||v.id,T=v.label||`Video device ${p.length+1}`,P=v.groupId,F={deviceId:O,label:T,kind:S,groupId:P};p.push(F)}return p})}getVideoInputDevices(){return se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(p=>new K(p.deviceId,p.label))})}findDeviceById(u){return se(this,void 0,void 0,function*(){const p=yield this.listVideoInputDevices();return p?p.find(v=>v.deviceId===u):null})}decodeFromInputVideoDevice(u,p){return se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(u,p)})}decodeOnceFromVideoDevice(u,p){return se(this,void 0,void 0,function*(){this.reset();let v;u?v={deviceId:{exact:u}}:v={facingMode:"environment"};const S={video:v};return yield this.decodeOnceFromConstraints(S,p)})}decodeOnceFromConstraints(u,p){return se(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeOnceFromStream(v,p)})}decodeOnceFromStream(u,p){return se(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(u,p);return yield this.decodeOnce(v)})}decodeFromInputVideoDeviceContinuously(u,p,v){return se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(u,p,v)})}decodeFromVideoDevice(u,p,v){return se(this,void 0,void 0,function*(){let S;u?S={deviceId:{exact:u}}:S={facingMode:"environment"};const O={video:S};return yield this.decodeFromConstraints(O,p,v)})}decodeFromConstraints(u,p,v){return se(this,void 0,void 0,function*(){const S=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeFromStream(S,p,v)})}decodeFromStream(u,p,v){return se(this,void 0,void 0,function*(){this.reset();const S=yield this.attachStreamToVideo(u,p);return yield this.decodeContinuously(S,v)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(u,p){return se(this,void 0,void 0,function*(){const v=this.prepareVideoElement(p);return this.addVideoSource(v,u),this.videoElement=v,this.stream=u,yield this.playVideoOnLoadAsync(v),v})}playVideoOnLoadAsync(u){return new Promise((p,v)=>this.playVideoOnLoad(u,()=>p()))}playVideoOnLoad(u,p){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(u),u.addEventListener("ended",this.videoEndedListener),u.addEventListener("canplay",this.videoCanPlayListener),u.addEventListener("playing",p),this.tryPlayVideo(u)}isVideoPlaying(u){return u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2}tryPlayVideo(u){return se(this,void 0,void 0,function*(){if(this.isVideoPlaying(u)){console.warn("Trying to play video that is already playing.");return}try{yield u.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(u,p){const v=document.getElementById(u);if(!v)throw new f(`element with id '${u}' not found`);if(v.nodeName.toLowerCase()!==p.toLowerCase())throw new f(`element with id '${u}' must be an ${p} element`);return v}decodeFromImage(u,p){if(!u&&!p)throw new f("either imageElement with a src set or an url must be provided");return p&&!u?this.decodeFromImageUrl(p):this.decodeFromImageElement(u)}decodeFromVideo(u,p){if(!u&&!p)throw new f("Either an element with a src set or an URL must be provided");return p&&!u?this.decodeFromVideoUrl(p):this.decodeFromVideoElement(u)}decodeFromVideoContinuously(u,p,v){if(u===void 0&&p===void 0)throw new f("Either an element with a src set or an URL must be provided");return p&&!u?this.decodeFromVideoUrlContinuously(p,v):this.decodeFromVideoElementContinuously(u,v)}decodeFromImageElement(u){if(!u)throw new f("An image element must be provided.");this.reset();const p=this.prepareImageElement(u);this.imageElement=p;let v;return this.isImageLoaded(p)?v=this.decodeOnce(p,!1,!0):v=this._decodeOnLoadImage(p),v}decodeFromVideoElement(u){const p=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideo(p)}decodeFromVideoElementContinuously(u,p){const v=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideoContinuously(v,p)}_decodeFromVideoElementSetup(u){if(!u)throw new f("A video element must be provided.");this.reset();const p=this.prepareVideoElement(u);return this.videoElement=p,p}decodeFromImageUrl(u){if(!u)throw new f("An URL must be provided.");this.reset();const p=this.prepareImageElement();this.imageElement=p;const v=this._decodeOnLoadImage(p);return p.src=u,v}decodeFromVideoUrl(u){if(!u)throw new f("An URL must be provided.");this.reset();const p=this.prepareVideoElement(),v=this.decodeFromVideoElement(p);return p.src=u,v}decodeFromVideoUrlContinuously(u,p){if(!u)throw new f("An URL must be provided.");this.reset();const v=this.prepareVideoElement(),S=this.decodeFromVideoElementContinuously(v,p);return v.src=u,S}_decodeOnLoadImage(u){return new Promise((p,v)=>{this.imageLoadedListener=()=>this.decodeOnce(u,!1,!0).then(p,v),u.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(u){return se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(u),yield this.decodeOnce(u)})}_decodeOnLoadVideoContinuously(u,p){return se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(u),this.decodeContinuously(u,p)})}isImageLoaded(u){return!(!u.complete||u.naturalWidth===0)}prepareImageElement(u){let p;return typeof u>"u"&&(p=document.createElement("img"),p.width=200,p.height=200),typeof u=="string"&&(p=this.getMediaElement(u,"img")),u instanceof HTMLImageElement&&(p=u),p}prepareVideoElement(u){let p;return!u&&typeof document<"u"&&(p=document.createElement("video"),p.width=200,p.height=200),typeof u=="string"&&(p=this.getMediaElement(u,"video")),u instanceof HTMLVideoElement&&(p=u),p.setAttribute("autoplay","true"),p.setAttribute("muted","true"),p.setAttribute("playsinline","true"),p}decodeOnce(u,p=!0,v=!0){this._stopAsyncDecode=!1;const S=(O,T)=>{if(this._stopAsyncDecode){T(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const P=this.decode(u);O(P)}catch(P){const F=p&&P instanceof W,Z=(P instanceof E||P instanceof L)&&v;if(F||Z)return setTimeout(S,this._timeBetweenDecodingAttempts,O,T);T(P)}};return new Promise((O,T)=>S(O,T))}decodeContinuously(u,p){this._stopContinuousDecode=!1;const v=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const S=this.decode(u);p(S,null),setTimeout(v,this.timeBetweenScansMillis)}catch(S){p(null,S);const O=S instanceof E||S instanceof L,T=S instanceof W;(O||T)&&setTimeout(v,this._timeBetweenDecodingAttempts)}};v()}decode(u){const p=this.createBinaryBitmap(u);return this.decodeBitmap(p)}_isHTMLVideoElement(u){return u.videoWidth!==0}drawFrameOnCanvas(u,p,v){p||(p={sx:0,sy:0,sWidth:u.videoWidth,sHeight:u.videoHeight,dx:0,dy:0,dWidth:u.videoWidth,dHeight:u.videoHeight}),v||(v=this.captureCanvasContext),v.drawImage(u,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}drawImageOnCanvas(u,p,v=this.captureCanvasContext){p||(p={sx:0,sy:0,sWidth:u.naturalWidth,sHeight:u.naturalHeight,dx:0,dy:0,dWidth:u.naturalWidth,dHeight:u.naturalHeight}),v||(v=this.captureCanvasContext),v.drawImage(u,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}createBinaryBitmap(u){this.getCaptureCanvasContext(u),this._isHTMLVideoElement(u)?this.drawFrameOnCanvas(u):this.drawImageOnCanvas(u);const p=this.getCaptureCanvas(u),v=new Y(p),S=new X(v);return new _(S)}getCaptureCanvasContext(u){if(!this.captureCanvasContext){const v=this.getCaptureCanvas(u).getContext("2d");this.captureCanvasContext=v}return this.captureCanvasContext}getCaptureCanvas(u){if(!this.captureCanvas){const p=this.createCaptureCanvas(u);this.captureCanvas=p}return this.captureCanvas}decodeBitmap(u){return this.reader.decode(u,this._hints)}createCaptureCanvas(u){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const p=document.createElement("canvas");let v,S;return typeof u<"u"&&(u instanceof HTMLVideoElement?(v=u.videoWidth,S=u.videoHeight):u instanceof HTMLImageElement&&(v=u.naturalWidth||u.width,S=u.naturalHeight||u.height)),p.style.width=v+"px",p.style.height=S+"px",p.width=v,p.height=S,p}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(u=>u.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(u,p){try{u.srcObject=p}catch{u.src=URL.createObjectURL(p)}}cleanVideoSource(u){try{u.srcObject=null}catch{u.src=""}this.videoElement.removeAttribute("src")}}class be{constructor(u,p,v=p==null?0:8*p.length,S,O,T=w.currentTimeMillis()){this.text=u,this.rawBytes=p,this.numBits=v,this.resultPoints=S,this.format=O,this.timestamp=T,this.text=u,this.rawBytes=p,v==null?this.numBits=p==null?0:8*p.length:this.numBits=v,this.resultPoints=S,this.format=O,this.resultMetadata=null,T==null?this.timestamp=w.currentTimeMillis():this.timestamp=T}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(u,p){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(u,p)}putAllMetadata(u){u!==null&&(this.resultMetadata===null?this.resultMetadata=u:this.resultMetadata=new Map(u))}addResultPoints(u){const p=this.resultPoints;if(p===null)this.resultPoints=u;else if(u!==null&&u.length>0){const v=new Array(p.length+u.length);w.arraycopy(p,0,v,0,p.length),w.arraycopy(u,0,v,p.length,u.length),this.resultPoints=v}}getTimestamp(){return this.timestamp}toString(){return this.text}}var xe;(function(te){te[te.AZTEC=0]="AZTEC",te[te.CODABAR=1]="CODABAR",te[te.CODE_39=2]="CODE_39",te[te.CODE_93=3]="CODE_93",te[te.CODE_128=4]="CODE_128",te[te.DATA_MATRIX=5]="DATA_MATRIX",te[te.EAN_8=6]="EAN_8",te[te.EAN_13=7]="EAN_13",te[te.ITF=8]="ITF",te[te.MAXICODE=9]="MAXICODE",te[te.PDF_417=10]="PDF_417",te[te.QR_CODE=11]="QR_CODE",te[te.RSS_14=12]="RSS_14",te[te.RSS_EXPANDED=13]="RSS_EXPANDED",te[te.UPC_A=14]="UPC_A",te[te.UPC_E=15]="UPC_E",te[te.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xe||(xe={}));var Ee=xe,J;(function(te){te[te.OTHER=0]="OTHER",te[te.ORIENTATION=1]="ORIENTATION",te[te.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",te[te.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",te[te.ISSUE_NUMBER=4]="ISSUE_NUMBER",te[te.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",te[te.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",te[te.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",te[te.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",te[te.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",te[te.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(J||(J={}));var ne=J;class de{constructor(u,p,v,S,O=-1,T=-1){this.rawBytes=u,this.text=p,this.byteSegments=v,this.ecLevel=S,this.structuredAppendSequenceNumber=O,this.structuredAppendParity=T,this.numBits=u==null?0:8*u.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(u){this.numBits=u}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(u){this.errorsCorrected=u}getErasures(){return this.erasures}setErasures(u){this.erasures=u}getOther(){return this.other}setOther(u){this.other=u}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ue{exp(u){return this.expTable[u]}log(u){if(u===0)throw new g;return this.logTable[u]}static addOrSubtract(u,p){return u^p}}class Fe{constructor(u,p){if(p.length===0)throw new g;this.field=u;const v=p.length;if(v>1&&p[0]===0){let S=1;for(;S<v&&p[S]===0;)S++;S===v?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(v-S),w.arraycopy(p,S,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);const p=this.coefficients;let v;if(u===1){v=0;for(let T=0,P=p.length;T!==P;T++){const F=p[T];v=ue.addOrSubtract(v,F)}return v}v=p[0];const S=p.length,O=this.field;for(let T=1;T<S;T++)v=ue.addOrSubtract(O.multiply(u,v),p[T]);return v}addOrSubtract(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero())return u;if(u.isZero())return this;let p=this.coefficients,v=u.coefficients;if(p.length>v.length){const T=p;p=v,v=T}let S=new Int32Array(v.length);const O=v.length-p.length;w.arraycopy(v,0,S,0,O);for(let T=O;T<v.length;T++)S[T]=ue.addOrSubtract(p[T-O],v[T]);return new Fe(this.field,S)}multiply(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero()||u.isZero())return this.field.getZero();const p=this.coefficients,v=p.length,S=u.coefficients,O=S.length,T=new Int32Array(v+O-1),P=this.field;for(let F=0;F<v;F++){const j=p[F];for(let Z=0;Z<O;Z++)T[F+Z]=ue.addOrSubtract(T[F+Z],P.multiply(j,S[Z]))}return new Fe(P,T)}multiplyScalar(u){if(u===0)return this.field.getZero();if(u===1)return this;const p=this.coefficients.length,v=this.field,S=new Int32Array(p),O=this.coefficients;for(let T=0;T<p;T++)S[T]=v.multiply(O[T],u);return new Fe(v,S)}multiplyByMonomial(u,p){if(u<0)throw new g;if(p===0)return this.field.getZero();const v=this.coefficients,S=v.length,O=new Int32Array(S+u),T=this.field;for(let P=0;P<S;P++)O[P]=T.multiply(v[P],p);return new Fe(T,O)}divide(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(u.isZero())throw new g("Divide by 0");const p=this.field;let v=p.getZero(),S=this;const O=u.getCoefficient(u.getDegree()),T=p.inverse(O);for(;S.getDegree()>=u.getDegree()&&!S.isZero();){const P=S.getDegree()-u.getDegree(),F=p.multiply(S.getCoefficient(S.getDegree()),T),j=u.multiplyByMonomial(P,F),Z=p.buildMonomial(P,F);v=v.addOrSubtract(Z),S=S.addOrSubtract(j)}return[v,S]}toString(){let u="";for(let p=this.getDegree();p>=0;p--){let v=this.getCoefficient(p);if(v!==0){if(v<0?(u+=" - ",v=-v):u.length>0&&(u+=" + "),p===0||v!==1){const S=this.field.log(v);S===0?u+="1":S===1?u+="a":(u+="a^",u+=S)}p!==0&&(p===1?u+="x":(u+="x^",u+=p))}}return u}}class Ie extends d{}Ie.kind="ArithmeticException";class ye extends ue{constructor(u,p,v){super(),this.primitive=u,this.size=p,this.generatorBase=v;const S=new Int32Array(p);let O=1;for(let P=0;P<p;P++)S[P]=O,O*=2,O>=p&&(O^=u,O&=p-1);this.expTable=S;const T=new Int32Array(p);for(let P=0;P<p-1;P++)T[S[P]]=P;this.logTable=T,this.zero=new Fe(this,Int32Array.from([0])),this.one=new Fe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,p){if(u<0)throw new g;if(p===0)return this.zero;const v=new Int32Array(u+1);return v[0]=p,new Fe(this,v)}inverse(u){if(u===0)throw new Ie;return this.expTable[this.size-this.logTable[u]-1]}multiply(u,p){return u===0||p===0?0:this.expTable[(this.logTable[u]+this.logTable[p])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+x.toHexString(this.primitive)+","+this.size+")"}equals(u){return u===this}}ye.AZTEC_DATA_12=new ye(4201,4096,1),ye.AZTEC_DATA_10=new ye(1033,1024,1),ye.AZTEC_DATA_6=new ye(67,64,1),ye.AZTEC_PARAM=new ye(19,16,1),ye.QR_CODE_FIELD_256=new ye(285,256,0),ye.DATA_MATRIX_FIELD_256=new ye(301,256,1),ye.AZTEC_DATA_8=ye.DATA_MATRIX_FIELD_256,ye.MAXICODE_FIELD_64=ye.AZTEC_DATA_6;class $e extends d{}$e.kind="ReedSolomonException";class Oe extends d{}Oe.kind="IllegalStateException";class Le{constructor(u){this.field=u}decode(u,p){const v=this.field,S=new Fe(v,u),O=new Int32Array(p);let T=!0;for(let ve=0;ve<p;ve++){const Me=S.evaluateAt(v.exp(ve+v.getGeneratorBase()));O[O.length-1-ve]=Me,Me!==0&&(T=!1)}if(T)return;const P=new Fe(v,O),F=this.runEuclideanAlgorithm(v.buildMonomial(p,1),P,p),j=F[0],Z=F[1],re=this.findErrorLocations(j),ae=this.findErrorMagnitudes(Z,re);for(let ve=0;ve<re.length;ve++){const Me=u.length-1-v.log(re[ve]);if(Me<0)throw new $e("Bad error location");u[Me]=ye.addOrSubtract(u[Me],ae[ve])}}runEuclideanAlgorithm(u,p,v){if(u.getDegree()<p.getDegree()){const ve=u;u=p,p=ve}const S=this.field;let O=u,T=p,P=S.getZero(),F=S.getOne();for(;T.getDegree()>=(v/2|0);){let ve=O,Me=P;if(O=T,P=F,O.isZero())throw new $e("r_{i-1} was zero");T=ve;let Be=S.getZero();const Ue=O.getCoefficient(O.getDegree()),Qe=S.inverse(Ue);for(;T.getDegree()>=O.getDegree()&&!T.isZero();){const xt=T.getDegree()-O.getDegree(),wt=S.multiply(T.getCoefficient(T.getDegree()),Qe);Be=Be.addOrSubtract(S.buildMonomial(xt,wt)),T=T.addOrSubtract(O.multiplyByMonomial(xt,wt))}if(F=Be.multiply(P).addOrSubtract(Me),T.getDegree()>=O.getDegree())throw new Oe("Division algorithm failed to reduce polynomial?")}const j=F.getCoefficient(0);if(j===0)throw new $e("sigmaTilde(0) was zero");const Z=S.inverse(j),re=F.multiplyScalar(Z),ae=T.multiplyScalar(Z);return[re,ae]}findErrorLocations(u){const p=u.getDegree();if(p===1)return Int32Array.from([u.getCoefficient(1)]);const v=new Int32Array(p);let S=0;const O=this.field;for(let T=1;T<O.getSize()&&S<p;T++)u.evaluateAt(T)===0&&(v[S]=O.inverse(T),S++);if(S!==p)throw new $e("Error locator degree does not match number of roots");return v}findErrorMagnitudes(u,p){const v=p.length,S=new Int32Array(v),O=this.field;for(let T=0;T<v;T++){const P=O.inverse(p[T]);let F=1;for(let j=0;j<v;j++)if(T!==j){const Z=O.multiply(p[j],P),re=Z&1?Z&-2:Z|1;F=O.multiply(F,re)}S[T]=O.multiply(u.evaluateAt(P),O.inverse(F)),O.getGeneratorBase()!==0&&(S[T]=O.multiply(S[T],P))}return S}}var He;(function(te){te[te.UPPER=0]="UPPER",te[te.LOWER=1]="LOWER",te[te.MIXED=2]="MIXED",te[te.DIGIT=3]="DIGIT",te[te.PUNCT=4]="PUNCT",te[te.BINARY=5]="BINARY"})(He||(He={}));class tt{decode(u){this.ddata=u;let p=u.getBits(),v=this.extractBits(p),S=this.correctBits(v),O=tt.convertBoolArrayToByteArray(S),T=tt.getEncodedData(S),P=new de(O,T,null,null);return P.setNumBits(S.length),P}static highLevelDecode(u){return this.getEncodedData(u)}static getEncodedData(u){let p=u.length,v=He.UPPER,S=He.UPPER,O="",T=0;for(;T<p;)if(S===He.BINARY){if(p-T<5)break;let P=tt.readCode(u,T,5);if(T+=5,P===0){if(p-T<11)break;P=tt.readCode(u,T,11)+31,T+=11}for(let F=0;F<P;F++){if(p-T<8){T=p;break}const j=tt.readCode(u,T,8);O+=B.castAsNonUtf8Char(j),T+=8}S=v}else{let P=S===He.DIGIT?4:5;if(p-T<P)break;let F=tt.readCode(u,T,P);T+=P;let j=tt.getCharacter(S,F);j.startsWith("CTRL_")?(v=S,S=tt.getTable(j.charAt(5)),j.charAt(6)==="L"&&(v=S)):(O+=j,S=v)}return O}static getTable(u){switch(u){case"L":return He.LOWER;case"P":return He.PUNCT;case"M":return He.MIXED;case"D":return He.DIGIT;case"B":return He.BINARY;case"U":default:return He.UPPER}}static getCharacter(u,p){switch(u){case He.UPPER:return tt.UPPER_TABLE[p];case He.LOWER:return tt.LOWER_TABLE[p];case He.MIXED:return tt.MIXED_TABLE[p];case He.PUNCT:return tt.PUNCT_TABLE[p];case He.DIGIT:return tt.DIGIT_TABLE[p];default:throw new Oe("Bad table")}}correctBits(u){let p,v;this.ddata.getNbLayers()<=2?(v=6,p=ye.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(v=8,p=ye.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(v=10,p=ye.AZTEC_DATA_10):(v=12,p=ye.AZTEC_DATA_12);let S=this.ddata.getNbDatablocks(),O=u.length/v;if(O<S)throw new L;let T=u.length%v,P=new Int32Array(O);for(let ae=0;ae<O;ae++,T+=v)P[ae]=tt.readCode(u,T,v);try{new Le(p).decode(P,O-S)}catch(ae){throw new L(ae)}let F=(1<<v)-1,j=0;for(let ae=0;ae<S;ae++){let ve=P[ae];if(ve===0||ve===F)throw new L;(ve===1||ve===F-1)&&j++}let Z=new Array(S*v-j),re=0;for(let ae=0;ae<S;ae++){let ve=P[ae];if(ve===1||ve===F-1)Z.fill(ve>1,re,re+v-1),re+=v-1;else for(let Me=v-1;Me>=0;--Me)Z[re++]=(ve&1<<Me)!==0}return Z}extractBits(u){let p=this.ddata.isCompact(),v=this.ddata.getNbLayers(),S=(p?11:14)+v*4,O=new Int32Array(S),T=new Array(this.totalBitsInLayer(v,p));if(p)for(let P=0;P<O.length;P++)O[P]=P;else{let P=S+1+2*x.truncDivision(x.truncDivision(S,2)-1,15),F=S/2,j=x.truncDivision(P,2);for(let Z=0;Z<F;Z++){let re=Z+x.truncDivision(Z,15);O[F-Z-1]=j-re-1,O[F+Z]=j+re+1}}for(let P=0,F=0;P<v;P++){let j=(v-P)*4+(p?9:12),Z=P*2,re=S-1-Z;for(let ae=0;ae<j;ae++){let ve=ae*2;for(let Me=0;Me<2;Me++)T[F+ve+Me]=u.get(O[Z+Me],O[Z+ae]),T[F+2*j+ve+Me]=u.get(O[Z+ae],O[re-Me]),T[F+4*j+ve+Me]=u.get(O[re-Me],O[re-ae]),T[F+6*j+ve+Me]=u.get(O[re-ae],O[Z+Me])}F+=j*8}return T}static readCode(u,p,v){let S=0;for(let O=p;O<p+v;O++)S<<=1,u[O]&&(S|=1);return S}static readByte(u,p){let v=u.length-p;return v>=8?tt.readCode(u,p,8):tt.readCode(u,p,v)<<8-v}static convertBoolArrayToByteArray(u){let p=new Uint8Array((u.length+7)/8);for(let v=0;v<p.length;v++)p[v]=tt.readByte(u,8*v);return p}totalBitsInLayer(u,p){return((p?88:112)+16*u)*u}}tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(u){return u===NaN?0:u<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:u>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:u+(u<0?-.5:.5)|0}static distance(u,p,v,S){const O=u-v,T=p-S;return Math.sqrt(O*O+T*T)}static sum(u){let p=0;for(let v=0,S=u.length;v!==S;v++){const O=u[v];p+=O}return p}}class pt{static floatToIntBits(u){return u}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(u,p){this.x=u,this.y=p}getX(){return this.x}getY(){return this.y}equals(u){if(u instanceof fe){const p=u;return this.x===p.x&&this.y===p.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(u){const p=this.distance(u[0],u[1]),v=this.distance(u[1],u[2]),S=this.distance(u[0],u[2]);let O,T,P;if(v>=p&&v>=S?(T=u[0],O=u[1],P=u[2]):S>=v&&S>=p?(T=u[1],O=u[0],P=u[2]):(T=u[2],O=u[0],P=u[1]),this.crossProductZ(O,T,P)<0){const F=O;O=P,P=F}u[0]=O,u[1]=T,u[2]=P}static distance(u,p){return Ze.distance(u.x,u.y,p.x,p.y)}static crossProductZ(u,p,v){const S=p.x,O=p.y;return(v.x-S)*(u.y-O)-(v.y-O)*(u.x-S)}}class Ne{constructor(u,p){this.bits=u,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class we extends Ne{constructor(u,p,v,S,O){super(u,p),this.compact=v,this.nbDatablocks=S,this.nbLayers=O}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ke{constructor(u,p,v,S){this.image=u,this.height=u.getHeight(),this.width=u.getWidth(),p==null&&(p=ke.INIT_SIZE),v==null&&(v=u.getWidth()/2|0),S==null&&(S=u.getHeight()/2|0);const O=p/2|0;if(this.leftInit=v-O,this.rightInit=v+O,this.upInit=S-O,this.downInit=S+O,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let u=this.leftInit,p=this.rightInit,v=this.upInit,S=this.downInit,O=!1,T=!0,P=!1,F=!1,j=!1,Z=!1,re=!1;const ae=this.width,ve=this.height;for(;T;){T=!1;let Me=!0;for(;(Me||!F)&&p<ae;)Me=this.containsBlackPoint(v,S,p,!1),Me?(p++,T=!0,F=!0):F||p++;if(p>=ae){O=!0;break}let Be=!0;for(;(Be||!j)&&S<ve;)Be=this.containsBlackPoint(u,p,S,!0),Be?(S++,T=!0,j=!0):j||S++;if(S>=ve){O=!0;break}let Ue=!0;for(;(Ue||!Z)&&u>=0;)Ue=this.containsBlackPoint(v,S,u,!1),Ue?(u--,T=!0,Z=!0):Z||u--;if(u<0){O=!0;break}let Qe=!0;for(;(Qe||!re)&&v>=0;)Qe=this.containsBlackPoint(u,p,v,!0),Qe?(v--,T=!0,re=!0):re||v--;if(v<0){O=!0;break}T&&(P=!0)}if(!O&&P){const Me=p-u;let Be=null;for(let wt=1;Be===null&&wt<Me;wt++)Be=this.getBlackPointOnSegment(u,S-wt,u+wt,S);if(Be==null)throw new W;let Ue=null;for(let wt=1;Ue===null&&wt<Me;wt++)Ue=this.getBlackPointOnSegment(u,v+wt,u+wt,v);if(Ue==null)throw new W;let Qe=null;for(let wt=1;Qe===null&&wt<Me;wt++)Qe=this.getBlackPointOnSegment(p,v+wt,p-wt,v);if(Qe==null)throw new W;let xt=null;for(let wt=1;xt===null&&wt<Me;wt++)xt=this.getBlackPointOnSegment(p,S-wt,p-wt,S);if(xt==null)throw new W;return this.centerEdges(xt,Be,Qe,Ue)}else throw new W}getBlackPointOnSegment(u,p,v,S){const O=Ze.round(Ze.distance(u,p,v,S)),T=(v-u)/O,P=(S-p)/O,F=this.image;for(let j=0;j<O;j++){const Z=Ze.round(u+j*T),re=Ze.round(p+j*P);if(F.get(Z,re))return new fe(Z,re)}return null}centerEdges(u,p,v,S){const O=u.getX(),T=u.getY(),P=p.getX(),F=p.getY(),j=v.getX(),Z=v.getY(),re=S.getX(),ae=S.getY(),ve=ke.CORR;return O<this.width/2?[new fe(re-ve,ae+ve),new fe(P+ve,F+ve),new fe(j-ve,Z-ve),new fe(O+ve,T-ve)]:[new fe(re+ve,ae+ve),new fe(P+ve,F-ve),new fe(j-ve,Z+ve),new fe(O-ve,T-ve)]}containsBlackPoint(u,p,v,S){const O=this.image;if(S){for(let T=u;T<=p;T++)if(O.get(T,v))return!0}else for(let T=u;T<=p;T++)if(O.get(v,T))return!0;return!1}}ke.INIT_SIZE=10,ke.CORR=1;class De{static checkAndNudgePoints(u,p){const v=u.getWidth(),S=u.getHeight();let O=!0;for(let T=0;T<p.length&&O;T+=2){const P=Math.floor(p[T]),F=Math.floor(p[T+1]);if(P<-1||P>v||F<-1||F>S)throw new W;O=!1,P===-1?(p[T]=0,O=!0):P===v&&(p[T]=v-1,O=!0),F===-1?(p[T+1]=0,O=!0):F===S&&(p[T+1]=S-1,O=!0)}O=!0;for(let T=p.length-2;T>=0&&O;T-=2){const P=Math.floor(p[T]),F=Math.floor(p[T+1]);if(P<-1||P>v||F<-1||F>S)throw new W;O=!1,P===-1?(p[T]=0,O=!0):P===v&&(p[T]=v-1,O=!0),F===-1?(p[T+1]=0,O=!0):F===S&&(p[T+1]=S-1,O=!0)}}}class Pe{constructor(u,p,v,S,O,T,P,F,j){this.a11=u,this.a21=p,this.a31=v,this.a12=S,this.a22=O,this.a32=T,this.a13=P,this.a23=F,this.a33=j}static quadrilateralToQuadrilateral(u,p,v,S,O,T,P,F,j,Z,re,ae,ve,Me,Be,Ue){const Qe=Pe.quadrilateralToSquare(u,p,v,S,O,T,P,F);return Pe.squareToQuadrilateral(j,Z,re,ae,ve,Me,Be,Ue).times(Qe)}transformPoints(u){const p=u.length,v=this.a11,S=this.a12,O=this.a13,T=this.a21,P=this.a22,F=this.a23,j=this.a31,Z=this.a32,re=this.a33;for(let ae=0;ae<p;ae+=2){const ve=u[ae],Me=u[ae+1],Be=O*ve+F*Me+re;u[ae]=(v*ve+T*Me+j)/Be,u[ae+1]=(S*ve+P*Me+Z)/Be}}transformPointsWithValues(u,p){const v=this.a11,S=this.a12,O=this.a13,T=this.a21,P=this.a22,F=this.a23,j=this.a31,Z=this.a32,re=this.a33,ae=u.length;for(let ve=0;ve<ae;ve++){const Me=u[ve],Be=p[ve],Ue=O*Me+F*Be+re;u[ve]=(v*Me+T*Be+j)/Ue,p[ve]=(S*Me+P*Be+Z)/Ue}}static squareToQuadrilateral(u,p,v,S,O,T,P,F){const j=u-v+O-P,Z=p-S+T-F;if(j===0&&Z===0)return new Pe(v-u,O-v,u,S-p,T-S,p,0,0,1);{const re=v-O,ae=P-O,ve=S-T,Me=F-T,Be=re*Me-ae*ve,Ue=(j*Me-ae*Z)/Be,Qe=(re*Z-j*ve)/Be;return new Pe(v-u+Ue*v,P-u+Qe*P,u,S-p+Ue*S,F-p+Qe*F,p,Ue,Qe,1)}}static quadrilateralToSquare(u,p,v,S,O,T,P,F){return Pe.squareToQuadrilateral(u,p,v,S,O,T,P,F).buildAdjoint()}buildAdjoint(){return new Pe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(u){return new Pe(this.a11*u.a11+this.a21*u.a12+this.a31*u.a13,this.a11*u.a21+this.a21*u.a22+this.a31*u.a23,this.a11*u.a31+this.a21*u.a32+this.a31*u.a33,this.a12*u.a11+this.a22*u.a12+this.a32*u.a13,this.a12*u.a21+this.a22*u.a22+this.a32*u.a23,this.a12*u.a31+this.a22*u.a32+this.a32*u.a33,this.a13*u.a11+this.a23*u.a12+this.a33*u.a13,this.a13*u.a21+this.a23*u.a22+this.a33*u.a23,this.a13*u.a31+this.a23*u.a32+this.a33*u.a33)}}class Je extends De{sampleGrid(u,p,v,S,O,T,P,F,j,Z,re,ae,ve,Me,Be,Ue,Qe,xt,wt){const bt=Pe.quadrilateralToQuadrilateral(S,O,T,P,F,j,Z,re,ae,ve,Me,Be,Ue,Qe,xt,wt);return this.sampleGridWithTransform(u,p,v,bt)}sampleGridWithTransform(u,p,v,S){if(p<=0||v<=0)throw new W;const O=new z(p,v),T=new Float32Array(2*p);for(let P=0;P<v;P++){const F=T.length,j=P+.5;for(let Z=0;Z<F;Z+=2)T[Z]=Z/2+.5,T[Z+1]=j;S.transformPoints(T),De.checkAndNudgePoints(u,T);try{for(let Z=0;Z<F;Z+=2)u.get(Math.floor(T[Z]),Math.floor(T[Z+1]))&&O.set(Z/2,P)}catch{throw new W}}return O}}class Ye{static setGridSampler(u){Ye.gridSampler=u}static getInstance(){return Ye.gridSampler}}Ye.gridSampler=new Je;class Ct{constructor(u,p){this.x=u,this.y=p}toResultPoint(){return new fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Rt{constructor(u){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=u}detect(){return this.detectMirror(!1)}detectMirror(u){let p=this.getMatrixCenter(),v=this.getBullsEyeCorners(p);if(u){let T=v[0];v[0]=v[2],v[2]=T}this.extractParameters(v);let S=this.sampleGrid(this.image,v[this.shift%4],v[(this.shift+1)%4],v[(this.shift+2)%4],v[(this.shift+3)%4]),O=this.getMatrixCornerPoints(v);return new we(S,O,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(u){if(!this.isValidPoint(u[0])||!this.isValidPoint(u[1])||!this.isValidPoint(u[2])||!this.isValidPoint(u[3]))throw new W;let p=2*this.nbCenterLayers,v=new Int32Array([this.sampleLine(u[0],u[1],p),this.sampleLine(u[1],u[2],p),this.sampleLine(u[2],u[3],p),this.sampleLine(u[3],u[0],p)]);this.shift=this.getRotation(v,p);let S=0;for(let T=0;T<4;T++){let P=v[(this.shift+T)%4];this.compact?(S<<=7,S+=P>>1&127):(S<<=10,S+=(P>>2&992)+(P>>1&31))}let O=this.getCorrectedParameterData(S,this.compact);this.compact?(this.nbLayers=(O>>6)+1,this.nbDataBlocks=(O&63)+1):(this.nbLayers=(O>>11)+1,this.nbDataBlocks=(O&2047)+1)}getRotation(u,p){let v=0;u.forEach((S,O,T)=>{let P=(S>>p-2<<1)+(S&1);v=(v<<3)+P}),v=((v&1)<<11)+(v>>1);for(let S=0;S<4;S++)if(x.bitCount(v^this.EXPECTED_CORNER_BITS[S])<=2)return S;throw new W}getCorrectedParameterData(u,p){let v,S;p?(v=7,S=2):(v=10,S=4);let O=v-S,T=new Int32Array(v);for(let F=v-1;F>=0;--F)T[F]=u&15,u>>=4;try{new Le(ye.AZTEC_PARAM).decode(T,O)}catch{throw new W}let P=0;for(let F=0;F<S;F++)P=(P<<4)+T[F];return P}getBullsEyeCorners(u){let p=u,v=u,S=u,O=u,T=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let re=this.getFirstDifferent(p,T,1,-1),ae=this.getFirstDifferent(v,T,1,1),ve=this.getFirstDifferent(S,T,-1,1),Me=this.getFirstDifferent(O,T,-1,-1);if(this.nbCenterLayers>2){let Be=this.distancePoint(Me,re)*this.nbCenterLayers/(this.distancePoint(O,p)*(this.nbCenterLayers+2));if(Be<.75||Be>1.25||!this.isWhiteOrBlackRectangle(re,ae,ve,Me))break}p=re,v=ae,S=ve,O=Me,T=!T}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let P=new fe(p.getX()+.5,p.getY()-.5),F=new fe(v.getX()+.5,v.getY()+.5),j=new fe(S.getX()-.5,S.getY()+.5),Z=new fe(O.getX()-.5,O.getY()-.5);return this.expandSquare([P,F,j,Z],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let u,p,v,S;try{let P=new ke(this.image).detect();u=P[0],p=P[1],v=P[2],S=P[3]}catch{let F=this.image.getWidth()/2,j=this.image.getHeight()/2;u=this.getFirstDifferent(new Ct(F+7,j-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Ct(F+7,j+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Ct(F-7,j+7),!1,-1,1).toResultPoint(),S=this.getFirstDifferent(new Ct(F-7,j-7),!1,-1,-1).toResultPoint()}let O=Ze.round((u.getX()+S.getX()+p.getX()+v.getX())/4),T=Ze.round((u.getY()+S.getY()+p.getY()+v.getY())/4);try{let P=new ke(this.image,15,O,T).detect();u=P[0],p=P[1],v=P[2],S=P[3]}catch{u=this.getFirstDifferent(new Ct(O+7,T-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Ct(O+7,T+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Ct(O-7,T+7),!1,-1,1).toResultPoint(),S=this.getFirstDifferent(new Ct(O-7,T-7),!1,-1,-1).toResultPoint()}return O=Ze.round((u.getX()+S.getX()+p.getX()+v.getX())/4),T=Ze.round((u.getY()+S.getY()+p.getY()+v.getY())/4),new Ct(O,T)}getMatrixCornerPoints(u){return this.expandSquare(u,2*this.nbCenterLayers,this.getDimension())}sampleGrid(u,p,v,S,O){let T=Ye.getInstance(),P=this.getDimension(),F=P/2-this.nbCenterLayers,j=P/2+this.nbCenterLayers;return T.sampleGrid(u,P,P,F,F,j,F,j,j,F,j,p.getX(),p.getY(),v.getX(),v.getY(),S.getX(),S.getY(),O.getX(),O.getY())}sampleLine(u,p,v){let S=0,O=this.distanceResultPoint(u,p),T=O/v,P=u.getX(),F=u.getY(),j=T*(p.getX()-u.getX())/O,Z=T*(p.getY()-u.getY())/O;for(let re=0;re<v;re++)this.image.get(Ze.round(P+re*j),Ze.round(F+re*Z))&&(S|=1<<v-re-1);return S}isWhiteOrBlackRectangle(u,p,v,S){let O=3;u=new Ct(u.getX()-O,u.getY()+O),p=new Ct(p.getX()-O,p.getY()-O),v=new Ct(v.getX()+O,v.getY()-O),S=new Ct(S.getX()+O,S.getY()+O);let T=this.getColor(S,u);if(T===0)return!1;let P=this.getColor(u,p);return P!==T||(P=this.getColor(p,v),P!==T)?!1:(P=this.getColor(v,S),P===T)}getColor(u,p){let v=this.distancePoint(u,p),S=(p.getX()-u.getX())/v,O=(p.getY()-u.getY())/v,T=0,P=u.getX(),F=u.getY(),j=this.image.get(u.getX(),u.getY()),Z=Math.ceil(v);for(let ae=0;ae<Z;ae++)P+=S,F+=O,this.image.get(Ze.round(P),Ze.round(F))!==j&&T++;let re=T/v;return re>.1&&re<.9?0:re<=.1===j?1:-1}getFirstDifferent(u,p,v,S){let O=u.getX()+v,T=u.getY()+S;for(;this.isValid(O,T)&&this.image.get(O,T)===p;)O+=v,T+=S;for(O-=v,T-=S;this.isValid(O,T)&&this.image.get(O,T)===p;)O+=v;for(O-=v;this.isValid(O,T)&&this.image.get(O,T)===p;)T+=S;return T-=S,new Ct(O,T)}expandSquare(u,p,v){let S=v/(2*p),O=u[0].getX()-u[2].getX(),T=u[0].getY()-u[2].getY(),P=(u[0].getX()+u[2].getX())/2,F=(u[0].getY()+u[2].getY())/2,j=new fe(P+S*O,F+S*T),Z=new fe(P-S*O,F-S*T);O=u[1].getX()-u[3].getX(),T=u[1].getY()-u[3].getY(),P=(u[1].getX()+u[3].getX())/2,F=(u[1].getY()+u[3].getY())/2;let re=new fe(P+S*O,F+S*T),ae=new fe(P-S*O,F-S*T);return[j,re,Z,ae]}isValid(u,p){return u>=0&&u<this.image.getWidth()&&p>0&&p<this.image.getHeight()}isValidPoint(u){let p=Ze.round(u.getX()),v=Ze.round(u.getY());return this.isValid(p,v)}distancePoint(u,p){return Ze.distance(u.getX(),u.getY(),p.getX(),p.getY())}distanceResultPoint(u,p){return Ze.distance(u.getX(),u.getY(),p.getX(),p.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(x.truncDivision(this.nbLayers-4,8)+1)+15}}class vt{decode(u,p=null){let v=null,S=new Rt(u.getBlackMatrix()),O=null,T=null;try{let Z=S.detectMirror(!1);O=Z.getPoints(),this.reportFoundResultPoints(p,O),T=new tt().decode(Z)}catch(Z){v=Z}if(T==null)try{let Z=S.detectMirror(!0);O=Z.getPoints(),this.reportFoundResultPoints(p,O),T=new tt().decode(Z)}catch(Z){throw v??Z}let P=new be(T.getText(),T.getRawBytes(),T.getNumBits(),O,Ee.AZTEC,w.currentTimeMillis()),F=T.getByteSegments();F!=null&&P.putMetadata(ne.BYTE_SEGMENTS,F);let j=T.getECLevel();return j!=null&&P.putMetadata(ne.ERROR_CORRECTION_LEVEL,j),P}reportFoundResultPoints(u,p){if(u!=null){let v=u.get(M.NEED_RESULT_POINT_CALLBACK);v!=null&&p.forEach((S,O,T)=>{v.foundPossibleResultPoint(S)})}}reset(){}}class ut extends Se{constructor(u=500){super(new vt,u)}}class nt{decode(u,p){try{return this.doDecode(u,p)}catch{if(p&&p.get(M.TRY_HARDER)===!0&&u.isRotateSupported()){const O=u.rotateCounterClockwise(),T=this.doDecode(O,p),P=T.getResultMetadata();let F=270;P!==null&&P.get(ne.ORIENTATION)===!0&&(F=F+P.get(ne.ORIENTATION)%360),T.putMetadata(ne.ORIENTATION,F);const j=T.getResultPoints();if(j!==null){const Z=O.getHeight();for(let re=0;re<j.length;re++)j[re]=new fe(Z-j[re].getY()-1,j[re].getX())}return T}else throw new W}}reset(){}doDecode(u,p){const v=u.getWidth(),S=u.getHeight();let O=new D(v);const T=p&&p.get(M.TRY_HARDER)===!0,P=Math.max(1,S>>(T?8:5));let F;T?F=S:F=15;const j=Math.trunc(S/2);for(let Z=0;Z<F;Z++){const re=Math.trunc((Z+1)/2),ae=(Z&1)===0,ve=j+P*(ae?re:-re);if(ve<0||ve>=S)break;try{O=u.getBlackRow(ve,O)}catch{continue}for(let Me=0;Me<2;Me++){if(Me===1&&(O.reverse(),p&&p.get(M.NEED_RESULT_POINT_CALLBACK)===!0)){const Be=new Map;p.forEach((Ue,Qe)=>Be.set(Qe,Ue)),Be.delete(M.NEED_RESULT_POINT_CALLBACK),p=Be}try{const Be=this.decodeRow(ve,O,p);if(Me===1){Be.putMetadata(ne.ORIENTATION,180);const Ue=Be.getResultPoints();Ue!==null&&(Ue[0]=new fe(v-Ue[0].getX()-1,Ue[0].getY()),Ue[1]=new fe(v-Ue[1].getX()-1,Ue[1].getY()))}return Be}catch{}}}throw new W}static recordPattern(u,p,v){const S=v.length;for(let j=0;j<S;j++)v[j]=0;const O=u.getSize();if(p>=O)throw new W;let T=!u.get(p),P=0,F=p;for(;F<O;){if(u.get(F)!==T)v[P]++;else{if(++P===S)break;v[P]=1,T=!T}F++}if(!(P===S||P===S-1&&F===O))throw new W}static recordPatternInReverse(u,p,v){let S=v.length,O=u.get(p);for(;p>0&&S>=0;)u.get(--p)!==O&&(S--,O=!O);if(S>=0)throw new W;nt.recordPattern(u,p+1,v)}static patternMatchVariance(u,p,v){const S=u.length;let O=0,T=0;for(let j=0;j<S;j++)O+=u[j],T+=p[j];if(O<T)return Number.POSITIVE_INFINITY;const P=O/T;v*=P;let F=0;for(let j=0;j<S;j++){const Z=u[j],re=p[j]*P,ae=Z>re?Z-re:re-Z;if(ae>v)return Number.POSITIVE_INFINITY;F+=ae}return F/O}}class Re extends nt{static findStartPattern(u){const p=u.getSize(),v=u.getNextSet(0);let S=0,O=Int32Array.from([0,0,0,0,0,0]),T=v,P=!1;const F=6;for(let j=v;j<p;j++)if(u.get(j)!==P)O[S]++;else{if(S===F-1){let Z=Re.MAX_AVG_VARIANCE,re=-1;for(let ae=Re.CODE_START_A;ae<=Re.CODE_START_C;ae++){const ve=nt.patternMatchVariance(O,Re.CODE_PATTERNS[ae],Re.MAX_INDIVIDUAL_VARIANCE);ve<Z&&(Z=ve,re=ae)}if(re>=0&&u.isRange(Math.max(0,T-(j-T)/2),T,!1))return Int32Array.from([T,j,re]);T+=O[0]+O[1],O=O.slice(2,O.length-1),O[S-1]=0,O[S]=0,S--}else S++;O[S]=1,P=!P}throw new W}static decodeCode(u,p,v){nt.recordPattern(u,v,p);let S=Re.MAX_AVG_VARIANCE,O=-1;for(let T=0;T<Re.CODE_PATTERNS.length;T++){const P=Re.CODE_PATTERNS[T],F=this.patternMatchVariance(p,P,Re.MAX_INDIVIDUAL_VARIANCE);F<S&&(S=F,O=T)}if(O>=0)return O;throw new W}decodeRow(u,p,v){const S=v&&v.get(M.ASSUME_GS1)===!0,O=Re.findStartPattern(p),T=O[2];let P=0;const F=new Uint8Array(20);F[P++]=T;let j;switch(T){case Re.CODE_START_A:j=Re.CODE_CODE_A;break;case Re.CODE_START_B:j=Re.CODE_CODE_B;break;case Re.CODE_START_C:j=Re.CODE_CODE_C;break;default:throw new L}let Z=!1,re=!1,ae="",ve=O[0],Me=O[1];const Be=Int32Array.from([0,0,0,0,0,0]);let Ue=0,Qe=0,xt=T,wt=0,bt=!0,ur=!1,nr=!1;for(;!Z;){const Hi=re;switch(re=!1,Ue=Qe,Qe=Re.decodeCode(p,Be,Me),F[P++]=Qe,Qe!==Re.CODE_STOP&&(bt=!0),Qe!==Re.CODE_STOP&&(wt++,xt+=wt*Qe),ve=Me,Me+=Be.reduce((un,dn)=>un+dn,0),Qe){case Re.CODE_START_A:case Re.CODE_START_B:case Re.CODE_START_C:throw new L}switch(j){case Re.CODE_CODE_A:if(Qe<64)nr===ur?ae+=String.fromCharCode(32+Qe):ae+=String.fromCharCode(32+Qe+128),nr=!1;else if(Qe<96)nr===ur?ae+=String.fromCharCode(Qe-64):ae+=String.fromCharCode(Qe+64),nr=!1;else switch(Qe!==Re.CODE_STOP&&(bt=!1),Qe){case Re.CODE_FNC_1:S&&(ae.length===0?ae+="]C1":ae+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_A:!ur&&nr?(ur=!0,nr=!1):ur&&nr?(ur=!1,nr=!1):nr=!0;break;case Re.CODE_SHIFT:re=!0,j=Re.CODE_CODE_B;break;case Re.CODE_CODE_B:j=Re.CODE_CODE_B;break;case Re.CODE_CODE_C:j=Re.CODE_CODE_C;break;case Re.CODE_STOP:Z=!0;break}break;case Re.CODE_CODE_B:if(Qe<96)nr===ur?ae+=String.fromCharCode(32+Qe):ae+=String.fromCharCode(32+Qe+128),nr=!1;else switch(Qe!==Re.CODE_STOP&&(bt=!1),Qe){case Re.CODE_FNC_1:S&&(ae.length===0?ae+="]C1":ae+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_B:!ur&&nr?(ur=!0,nr=!1):ur&&nr?(ur=!1,nr=!1):nr=!0;break;case Re.CODE_SHIFT:re=!0,j=Re.CODE_CODE_A;break;case Re.CODE_CODE_A:j=Re.CODE_CODE_A;break;case Re.CODE_CODE_C:j=Re.CODE_CODE_C;break;case Re.CODE_STOP:Z=!0;break}break;case Re.CODE_CODE_C:if(Qe<100)Qe<10&&(ae+="0"),ae+=Qe;else switch(Qe!==Re.CODE_STOP&&(bt=!1),Qe){case Re.CODE_FNC_1:S&&(ae.length===0?ae+="]C1":ae+="");break;case Re.CODE_CODE_A:j=Re.CODE_CODE_A;break;case Re.CODE_CODE_B:j=Re.CODE_CODE_B;break;case Re.CODE_STOP:Z=!0;break}break}Hi&&(j=j===Re.CODE_CODE_A?Re.CODE_CODE_B:Re.CODE_CODE_A)}const Ur=Me-ve;if(Me=p.getNextUnset(Me),!p.isRange(Me,Math.min(p.getSize(),Me+(Me-ve)/2),!1))throw new W;if(xt-=wt*Ue,xt%103!==Ue)throw new E;const ri=ae.length;if(ri===0)throw new W;ri>0&&bt&&(j===Re.CODE_CODE_C?ae=ae.substring(0,ri-2):ae=ae.substring(0,ri-1));const ii=(O[1]+O[0])/2,Sr=ve+Ur/2,zr=F.length,ai=new Uint8Array(zr);for(let Hi=0;Hi<zr;Hi++)ai[Hi]=F[Hi];const $i=[new fe(ii,u),new fe(Sr,u)];return new be(ae,ai,0,$i,Ee.CODE_128,new Date().getTime())}}Re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Re.MAX_AVG_VARIANCE=.25,Re.MAX_INDIVIDUAL_VARIANCE=.7,Re.CODE_SHIFT=98,Re.CODE_CODE_C=99,Re.CODE_CODE_B=100,Re.CODE_CODE_A=101,Re.CODE_FNC_1=102,Re.CODE_FNC_2=97,Re.CODE_FNC_3=96,Re.CODE_FNC_4_A=101,Re.CODE_FNC_4_B=100,Re.CODE_START_A=103,Re.CODE_START_B=104,Re.CODE_START_C=105,Re.CODE_STOP=106;class it extends nt{constructor(u=!1,p=!1){super(),this.usingCheckDigit=u,this.extendedMode=p,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(u,p,v){let S=this.counters;S.fill(0),this.decodeRowResult="";let O=it.findAsteriskPattern(p,S),T=p.getNextSet(O[1]),P=p.getSize(),F,j;do{it.recordPattern(p,T,S);let Be=it.toNarrowWidePattern(S);if(Be<0)throw new W;F=it.patternToChar(Be),this.decodeRowResult+=F,j=T;for(let Ue of S)T+=Ue;T=p.getNextSet(T)}while(F!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Z=0;for(let Be of S)Z+=Be;let re=T-j-Z;if(T!==P&&re*2<Z)throw new W;if(this.usingCheckDigit){let Be=this.decodeRowResult.length-1,Ue=0;for(let Qe=0;Qe<Be;Qe++)Ue+=it.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Qe));if(this.decodeRowResult.charAt(Be)!==it.ALPHABET_STRING.charAt(Ue%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,Be)}if(this.decodeRowResult.length===0)throw new W;let ae;this.extendedMode?ae=it.decodeExtended(this.decodeRowResult):ae=this.decodeRowResult;let ve=(O[1]+O[0])/2,Me=j+Z/2;return new be(ae,null,0,[new fe(ve,u),new fe(Me,u)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(u,p){let v=u.getSize(),S=u.getNextSet(0),O=0,T=S,P=!1,F=p.length;for(let j=S;j<v;j++)if(u.get(j)!==P)p[O]++;else{if(O===F-1){if(this.toNarrowWidePattern(p)===it.ASTERISK_ENCODING&&u.isRange(Math.max(0,T-Math.floor((j-T)/2)),T,!1))return[T,j];T+=p[0]+p[1],p.copyWithin(0,2,2+O-1),p[O-1]=0,p[O]=0,O--}else O++;p[O]=1,P=!P}throw new W}static toNarrowWidePattern(u){let p=u.length,v=0,S;do{let O=2147483647;for(let F of u)F<O&&F>v&&(O=F);v=O,S=0;let T=0,P=0;for(let F=0;F<p;F++){let j=u[F];j>v&&(P|=1<<p-1-F,S++,T+=j)}if(S===3){for(let F=0;F<p&&S>0;F++){let j=u[F];if(j>v&&(S--,j*2>=T))return-1}return P}}while(S>3);return-1}static patternToChar(u){for(let p=0;p<it.CHARACTER_ENCODINGS.length;p++)if(it.CHARACTER_ENCODINGS[p]===u)return it.ALPHABET_STRING.charAt(p);if(u===it.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(u){let p=u.length,v="";for(let S=0;S<p;S++){let O=u.charAt(S);if(O==="+"||O==="$"||O==="%"||O==="/"){let T=u.charAt(S+1),P="\0";switch(O){case"+":if(T>="A"&&T<="Z")P=String.fromCharCode(T.charCodeAt(0)+32);else throw new L;break;case"$":if(T>="A"&&T<="Z")P=String.fromCharCode(T.charCodeAt(0)-64);else throw new L;break;case"%":if(T>="A"&&T<="E")P=String.fromCharCode(T.charCodeAt(0)-38);else if(T>="F"&&T<="J")P=String.fromCharCode(T.charCodeAt(0)-11);else if(T>="K"&&T<="O")P=String.fromCharCode(T.charCodeAt(0)+16);else if(T>="P"&&T<="T")P=String.fromCharCode(T.charCodeAt(0)+43);else if(T==="U")P="\0";else if(T==="V")P="@";else if(T==="W")P="`";else if(T==="X"||T==="Y"||T==="Z")P="";else throw new L;break;case"/":if(T>="A"&&T<="O")P=String.fromCharCode(T.charCodeAt(0)-32);else if(T==="Z")P=":";else throw new L;break}v+=P,S++}else v+=O}return v}}it.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",it.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],it.ASTERISK_ENCODING=148;class lt extends nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(u,p,v){let S=this.decodeStart(p),O=this.decodeEnd(p),T=new H;lt.decodeMiddle(p,S[1],O[0],T);let P=T.toString(),F=null;v!=null&&(F=v.get(M.ALLOWED_LENGTHS)),F==null&&(F=lt.DEFAULT_ALLOWED_LENGTHS);let j=P.length,Z=!1,re=0;for(let Me of F){if(j===Me){Z=!0;break}Me>re&&(re=Me)}if(!Z&&j>re&&(Z=!0),!Z)throw new L;const ae=[new fe(S[1],u),new fe(O[0],u)];return new be(P,null,0,ae,Ee.ITF,new Date().getTime())}static decodeMiddle(u,p,v,S){let O=new Int32Array(10),T=new Int32Array(5),P=new Int32Array(5);for(O.fill(0),T.fill(0),P.fill(0);p<v;){nt.recordPattern(u,p,O);for(let j=0;j<5;j++){let Z=2*j;T[j]=O[Z],P[j]=O[Z+1]}let F=lt.decodeDigit(T);S.append(F.toString()),F=this.decodeDigit(P),S.append(F.toString()),O.forEach(function(j){p+=j})}}decodeStart(u){let p=lt.skipWhiteSpace(u),v=lt.findGuardPattern(u,p,lt.START_PATTERN);return this.narrowLineWidth=(v[1]-v[0])/4,this.validateQuietZone(u,v[0]),v}validateQuietZone(u,p){let v=this.narrowLineWidth*10;v=v<p?v:p;for(let S=p-1;v>0&&S>=0&&!u.get(S);S--)v--;if(v!==0)throw new W}static skipWhiteSpace(u){const p=u.getSize(),v=u.getNextSet(0);if(v===p)throw new W;return v}decodeEnd(u){u.reverse();try{let p=lt.skipWhiteSpace(u),v;try{v=lt.findGuardPattern(u,p,lt.END_PATTERN_REVERSED[0])}catch(O){O instanceof W&&(v=lt.findGuardPattern(u,p,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(u,v[0]);let S=v[0];return v[0]=u.getSize()-v[1],v[1]=u.getSize()-S,v}finally{u.reverse()}}static findGuardPattern(u,p,v){let S=v.length,O=new Int32Array(S),T=u.getSize(),P=!1,F=0,j=p;O.fill(0);for(let Z=p;Z<T;Z++)if(u.get(Z)!==P)O[F]++;else{if(F===S-1){if(nt.patternMatchVariance(O,v,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[j,Z];j+=O[0]+O[1],w.arraycopy(O,2,O,0,F-1),O[F-1]=0,O[F]=0,F--}else F++;O[F]=1,P=!P}throw new W}static decodeDigit(u){let p=lt.MAX_AVG_VARIANCE,v=-1,S=lt.PATTERNS.length;for(let O=0;O<S;O++){let T=lt.PATTERNS[O],P=nt.patternMatchVariance(u,T,lt.MAX_INDIVIDUAL_VARIANCE);P<p?(p=P,v=O):P===p&&(v=-1)}if(v>=0)return v%10;throw new W}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class dt extends nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(u){let p=!1,v,S=0,O=Int32Array.from([0,0,0]);for(;!p;){O=Int32Array.from([0,0,0]),v=dt.findGuardPattern(u,S,!1,this.START_END_PATTERN,O);let T=v[0];S=v[1];let P=T-(S-T);P>=0&&(p=u.isRange(P,T,!1))}return v}static checkChecksum(u){return dt.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let p=u.length;if(p===0)return!1;let v=parseInt(u.charAt(p-1),10);return dt.getStandardUPCEANChecksum(u.substring(0,p-1))===v}static getStandardUPCEANChecksum(u){let p=u.length,v=0;for(let S=p-1;S>=0;S-=2){let O=u.charAt(S).charCodeAt(0)-48;if(O<0||O>9)throw new L;v+=O}v*=3;for(let S=p-2;S>=0;S-=2){let O=u.charAt(S).charCodeAt(0)-48;if(O<0||O>9)throw new L;v+=O}return(1e3-v)%10}static decodeEnd(u,p){return dt.findGuardPattern(u,p,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(u,p,v,S){return this.findGuardPattern(u,p,v,S,new Int32Array(S.length))}static findGuardPattern(u,p,v,S,O){let T=u.getSize();p=v?u.getNextUnset(p):u.getNextSet(p);let P=0,F=p,j=S.length,Z=v;for(let re=p;re<T;re++)if(u.get(re)!==Z)O[P]++;else{if(P===j-1){if(nt.patternMatchVariance(O,S,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return Int32Array.from([F,re]);F+=O[0]+O[1];let ae=O.slice(2,O.length-1);for(let ve=0;ve<P-1;ve++)O[ve]=ae[ve];O[P-1]=0,O[P]=0,P--}else P++;O[P]=1,Z=!Z}throw new W}static decodeDigit(u,p,v,S){this.recordPattern(u,v,p);let O=this.MAX_AVG_VARIANCE,T=-1,P=S.length;for(let F=0;F<P;F++){let j=S[F],Z=nt.patternMatchVariance(p,j,dt.MAX_INDIVIDUAL_VARIANCE);Z<O&&(O=Z,T=F)}if(T>=0)return T;throw new W}}dt.MAX_AVG_VARIANCE=.48,dt.MAX_INDIVIDUAL_VARIANCE=.7,dt.START_END_PATTERN=Int32Array.from([1,1,1]),dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class yt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,p,v){let S=this.decodeRowStringBuffer,O=this.decodeMiddle(p,v,S),T=S.toString(),P=yt.parseExtensionString(T),F=[new fe((v[0]+v[1])/2,u),new fe(O,u)],j=new be(T,null,0,F,Ee.UPC_EAN_EXTENSION,new Date().getTime());return P!=null&&j.putAllMetadata(P),j}decodeMiddle(u,p,v){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let O=u.getSize(),T=p[1],P=0;for(let j=0;j<5&&T<O;j++){let Z=dt.decodeDigit(u,S,T,dt.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let re of S)T+=re;Z>=10&&(P|=1<<4-j),j!==4&&(T=u.getNextSet(T),T=u.getNextUnset(T))}if(v.length!==5)throw new W;let F=this.determineCheckDigit(P);if(yt.extensionChecksum(v.toString())!==F)throw new W;return T}static extensionChecksum(u){let p=u.length,v=0;for(let S=p-2;S>=0;S-=2)v+=u.charAt(S).charCodeAt(0)-48;v*=3;for(let S=p-1;S>=0;S-=2)v+=u.charAt(S).charCodeAt(0)-48;return v*=3,v%10}determineCheckDigit(u){for(let p=0;p<10;p++)if(u===this.CHECK_DIGIT_ENCODINGS[p])return p;throw new W}static parseExtensionString(u){if(u.length!==5)return null;let p=yt.parseExtension5String(u);return p==null?null:new Map([[ne.SUGGESTED_PRICE,p]])}static parseExtension5String(u){let p;switch(u.charAt(0)){case"0":p="£";break;case"5":p="$";break;case"9":switch(u){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}p="";break;default:p="";break}let v=parseInt(u.substring(1)),S=(v/100).toString(),O=v%100,T=O<10?"0"+O:O.toString();return p+S+"."+T}}class at{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,p,v){let S=this.decodeRowStringBuffer,O=this.decodeMiddle(p,v,S),T=S.toString(),P=at.parseExtensionString(T),F=[new fe((v[0]+v[1])/2,u),new fe(O,u)],j=new be(T,null,0,F,Ee.UPC_EAN_EXTENSION,new Date().getTime());return P!=null&&j.putAllMetadata(P),j}decodeMiddle(u,p,v){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let O=u.getSize(),T=p[1],P=0;for(let F=0;F<2&&T<O;F++){let j=dt.decodeDigit(u,S,T,dt.L_AND_G_PATTERNS);v+=String.fromCharCode(48+j%10);for(let Z of S)T+=Z;j>=10&&(P|=1<<1-F),F!==1&&(T=u.getNextSet(T),T=u.getNextUnset(T))}if(v.length!==2)throw new W;if(parseInt(v.toString())%4!==P)throw new W;return T}static parseExtensionString(u){return u.length!==2?null:new Map([[ne.ISSUE_NUMBER,parseInt(u)]])}}class qe{static decodeRow(u,p,v){let S=dt.findGuardPattern(p,v,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new yt().decodeRow(u,p,S)}catch{return new at().decodeRow(u,p,S)}}}qe.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class et extends dt{constructor(){super(),this.decodeRowStringBuffer="",et.L_AND_G_PATTERNS=et.L_PATTERNS.map(u=>Int32Array.from(u));for(let u=10;u<20;u++){let p=et.L_PATTERNS[u-10],v=new Int32Array(p.length);for(let S=0;S<p.length;S++)v[S]=p[p.length-S-1];et.L_AND_G_PATTERNS[u]=v}}decodeRow(u,p,v){let S=et.findStartGuardPattern(p),O=v==null?null:v.get(M.NEED_RESULT_POINT_CALLBACK);if(O!=null){const bt=new fe((S[0]+S[1])/2,u);O.foundPossibleResultPoint(bt)}let T=this.decodeMiddle(p,S,this.decodeRowStringBuffer),P=T.rowOffset,F=T.resultString;if(O!=null){const bt=new fe(P,u);O.foundPossibleResultPoint(bt)}let j=this.decodeEnd(p,P);if(O!=null){const bt=new fe((j[0]+j[1])/2,u);O.foundPossibleResultPoint(bt)}let Z=j[1],re=Z+(Z-j[0]);if(re>=p.getSize()||!p.isRange(Z,re,!1))throw new W;let ae=F.toString();if(ae.length<8)throw new L;if(!et.checkChecksum(ae))throw new E;let ve=(S[1]+S[0])/2,Me=(j[1]+j[0])/2,Be=this.getBarcodeFormat(),Ue=[new fe(ve,u),new fe(Me,u)],Qe=new be(ae,null,0,Ue,Be,new Date().getTime()),xt=0;try{let bt=qe.decodeRow(u,p,j[1]);Qe.putMetadata(ne.UPC_EAN_EXTENSION,bt.getText()),Qe.putAllMetadata(bt.getResultMetadata()),Qe.addResultPoints(bt.getResultPoints()),xt=bt.getText().length}catch{}let wt=v==null?null:v.get(M.ALLOWED_EAN_EXTENSIONS);if(wt!=null){let bt=!1;for(let ur in wt)if(xt.toString()===ur){bt=!0;break}if(!bt)throw new W}return Qe}decodeEnd(u,p){return et.findGuardPattern(u,p,!1,et.START_END_PATTERN,new Int32Array(et.START_END_PATTERN.length).fill(0))}static checkChecksum(u){return et.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let p=u.length;if(p===0)return!1;let v=parseInt(u.charAt(p-1),10);return et.getStandardUPCEANChecksum(u.substring(0,p-1))===v}static getStandardUPCEANChecksum(u){let p=u.length,v=0;for(let S=p-1;S>=0;S-=2){let O=u.charAt(S).charCodeAt(0)-48;if(O<0||O>9)throw new L;v+=O}v*=3;for(let S=p-2;S>=0;S-=2){let O=u.charAt(S).charCodeAt(0)-48;if(O<0||O>9)throw new L;v+=O}return(1e3-v)%10}}class ft extends et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,p,v){let S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let O=u.getSize(),T=p[1],P=0;for(let j=0;j<6&&T<O;j++){let Z=et.decodeDigit(u,S,T,et.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let re of S)T+=re;Z>=10&&(P|=1<<5-j)}v=ft.determineFirstDigit(v,P),T=et.findGuardPattern(u,T,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0))[1];for(let j=0;j<6&&T<O;j++){let Z=et.decodeDigit(u,S,T,et.L_PATTERNS);v+=String.fromCharCode(48+Z);for(let re of S)T+=re}return{rowOffset:T,resultString:v}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(u,p){for(let v=0;v<10;v++)if(p===this.FIRST_DIGIT_ENCODINGS[v])return u=String.fromCharCode(48+v)+u,u;throw new W}}ft.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class St extends et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,p,v){const S=this.decodeMiddleCounters;S[0]=0,S[1]=0,S[2]=0,S[3]=0;let O=u.getSize(),T=p[1];for(let F=0;F<4&&T<O;F++){let j=et.decodeDigit(u,S,T,et.L_PATTERNS);v+=String.fromCharCode(48+j);for(let Z of S)T+=Z}T=et.findGuardPattern(u,T,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<4&&T<O;F++){let j=et.decodeDigit(u,S,T,et.L_PATTERNS);v+=String.fromCharCode(48+j);for(let Z of S)T+=Z}return{rowOffset:T,resultString:v}}getBarcodeFormat(){return Ee.EAN_8}}class Ut extends et{constructor(){super(...arguments),this.ean13Reader=new ft}getBarcodeFormat(){return Ee.UPC_A}decode(u,p){return this.maybeReturnResult(this.ean13Reader.decode(u))}decodeRow(u,p,v){return this.maybeReturnResult(this.ean13Reader.decodeRow(u,p,v))}decodeMiddle(u,p,v){return this.ean13Reader.decodeMiddle(u,p,v)}maybeReturnResult(u){let p=u.getText();if(p.charAt(0)==="0"){let v=new be(p.substring(1),null,null,u.getResultPoints(),Ee.UPC_A);return u.getResultMetadata()!=null&&v.putAllMetadata(u.getResultMetadata()),v}else throw new W}reset(){this.ean13Reader.reset()}}class Ft extends et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(u,p,v){const S=this.decodeMiddleCounters.map(j=>j);S[0]=0,S[1]=0,S[2]=0,S[3]=0;const O=u.getSize();let T=p[1],P=0;for(let j=0;j<6&&T<O;j++){const Z=Ft.decodeDigit(u,S,T,Ft.L_AND_G_PATTERNS);v+=String.fromCharCode(48+Z%10);for(let re of S)T+=re;Z>=10&&(P|=1<<5-j)}let F=Ft.determineNumSysAndCheckDigit(v,P);return{rowOffset:T,resultString:F}}decodeEnd(u,p){return Ft.findGuardPatternWithoutCounters(u,p,!0,Ft.MIDDLE_END_PATTERN)}checkChecksum(u){return et.checkChecksum(Ft.convertUPCEtoUPCA(u))}static determineNumSysAndCheckDigit(u,p){for(let v=0;v<=1;v++)for(let S=0;S<10;S++)if(p===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[v][S]){let O=String.fromCharCode(48+v),T=String.fromCharCode(48+S);return O+u+T}throw W.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(u){const p=u.slice(1,7).split("").map(O=>O.charCodeAt(0)),v=new H;v.append(u.charAt(0));let S=p[5];switch(S){case 0:case 1:case 2:v.appendChars(p,0,2),v.append(S),v.append("0000"),v.appendChars(p,2,3);break;case 3:v.appendChars(p,0,3),v.append("00000"),v.appendChars(p,3,2);break;case 4:v.appendChars(p,0,4),v.append("00000"),v.append(p[4]);break;default:v.appendChars(p,0,5),v.append("0000"),v.append(S);break}return u.length>=8&&v.append(u.charAt(7)),v.toString()}}Ft.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ft.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Zt extends nt{constructor(u){super();let p=u==null?null:u.get(M.POSSIBLE_FORMATS),v=[];n(p)?(v.push(new ft),v.push(new Ut),v.push(new St),v.push(new Ft)):(p.indexOf(Ee.EAN_13)>-1&&v.push(new ft),p.indexOf(Ee.UPC_A)>-1&&v.push(new Ut),p.indexOf(Ee.EAN_8)>-1&&v.push(new St),p.indexOf(Ee.UPC_E)>-1&&v.push(new Ft)),this.readers=v}decodeRow(u,p,v){for(let S of this.readers)try{const O=S.decodeRow(u,p,v),T=O.getBarcodeFormat()===Ee.EAN_13&&O.getText().charAt(0)==="0",P=v==null?null:v.get(M.POSSIBLE_FORMATS),F=P==null||P.includes(Ee.UPC_A);if(T&&F){const j=O.getRawBytes(),Z=new be(O.getText().substring(1),j,j?j.length:null,O.getResultPoints(),Ee.UPC_A);return Z.putAllMetadata(O.getResultMetadata()),Z}return O}catch{}throw new W}reset(){for(let u of this.readers)u.reset()}}class qt extends nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(u,p){for(let v=0;v<p.length;v++)if(nt.patternMatchVariance(u,p[v],qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return v;throw new W}static count(u){return Ze.sum(new Int32Array(u))}static increment(u,p){let v=0,S=p[0];for(let O=1;O<u.length;O++)p[O]>S&&(S=p[O],v=O);u[v]++}static decrement(u,p){let v=0,S=p[0];for(let O=1;O<u.length;O++)p[O]<S&&(S=p[O],v=O);u[v]--}static isFinderPattern(u){let p=u[0]+u[1],v=p+u[2]+u[3],S=p/v;if(S>=qt.MIN_FINDER_PATTERN_RATIO&&S<=qt.MAX_FINDER_PATTERN_RATIO){let O=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER;for(let P of u)P>T&&(T=P),P<O&&(O=P);return T<10*O}return!1}}qt.MAX_AVG_VARIANCE=.2,qt.MAX_INDIVIDUAL_VARIANCE=.45,qt.MIN_FINDER_PATTERN_RATIO=9.5/12,qt.MAX_FINDER_PATTERN_RATIO=12.5/14;class tr{constructor(u,p){this.value=u,this.checksumPortion=p}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(u){if(!(u instanceof tr))return!1;const p=u;return this.value===p.value&&this.checksumPortion===p.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xr{constructor(u,p,v,S,O){this.value=u,this.startEnd=p,this.value=u,this.startEnd=p,this.resultPoints=new Array,this.resultPoints.push(new fe(v,O)),this.resultPoints.push(new fe(S,O))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(u){if(!(u instanceof xr))return!1;const p=u;return this.value===p.value}hashCode(){return this.value}}class fr{constructor(){}static getRSSvalue(u,p,v){let S=0;for(let F of u)S+=F;let O=0,T=0,P=u.length;for(let F=0;F<P-1;F++){let j;for(j=1,T|=1<<F;j<u[F];j++,T&=~(1<<F)){let Z=fr.combins(S-j-1,P-F-2);if(v&&T===0&&S-j-(P-F-1)>=P-F-1&&(Z-=fr.combins(S-j-(P-F),P-F-2)),P-F-1>1){let re=0;for(let ae=S-j-(P-F-2);ae>p;ae--)re+=fr.combins(S-j-ae-1,P-F-3);Z-=re*(P-1-F)}else S-j>p&&Z--;O+=Z}S-=j}return O}static combins(u,p){let v,S;u-p>p?(S=p,v=u-p):(S=u-p,v=p);let O=1,T=1;for(let P=u;P>v;P--)O*=P,T<=S&&(O/=T,T++);for(;T<=S;)O/=T,T++;return O}}class qr{static buildBitArray(u){let p=u.length*2-1;u[u.length-1].getRightChar()==null&&(p-=1);let v=12*p,S=new D(v),O=0,P=u[0].getRightChar().getValue();for(let F=11;F>=0;--F)P&1<<F&&S.set(O),O++;for(let F=1;F<u.length;++F){let j=u[F],Z=j.getLeftChar().getValue();for(let re=11;re>=0;--re)Z&1<<re&&S.set(O),O++;if(j.getRightChar()!=null){let re=j.getRightChar().getValue();for(let ae=11;ae>=0;--ae)re&1<<ae&&S.set(O),O++}}return S}}class Vr{constructor(u,p){p?this.decodedInformation=null:(this.finished=u,this.decodedInformation=p)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Kt{constructor(u){this.newPosition=u}getNewPosition(){return this.newPosition}}class Wt extends Kt{constructor(u,p){super(u),this.value=p}getValue(){return this.value}isFNC1(){return this.value===Wt.FNC1}}Wt.FNC1="$";class Pt extends Kt{constructor(u,p,v){super(u),v?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=p}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class rt extends Kt{constructor(u,p,v){if(super(u),p<0||p>10||v<0||v>10)throw new L;this.firstDigit=p,this.secondDigit=v}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===rt.FNC1}isSecondDigitFNC1(){return this.secondDigit===rt.FNC1}isAnyFNC1(){return this.firstDigit===rt.FNC1||this.secondDigit===rt.FNC1}}rt.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(u){if(!u)return null;if(u.length<2)throw new W;let p=u.substring(0,2);for(let O of je.TWO_DIGIT_DATA_LENGTH)if(O[0]===p)return O[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,O[2],u):je.processFixedAI(2,O[1],u);if(u.length<3)throw new W;let v=u.substring(0,3);for(let O of je.THREE_DIGIT_DATA_LENGTH)if(O[0]===v)return O[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,O[2],u):je.processFixedAI(3,O[1],u);for(let O of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(O[0]===v)return O[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,O[2],u):je.processFixedAI(4,O[1],u);if(u.length<4)throw new W;let S=u.substring(0,4);for(let O of je.FOUR_DIGIT_DATA_LENGTH)if(O[0]===S)return O[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,O[2],u):je.processFixedAI(4,O[1],u);throw new W}static processFixedAI(u,p,v){if(v.length<u)throw new W;let S=v.substring(0,u);if(v.length<u+p)throw new W;let O=v.substring(u,u+p),T=v.substring(u+p),P="("+S+")"+O,F=je.parseFieldsInGeneralPurpose(T);return F==null?P:P+F}static processVariableAI(u,p,v){let S=v.substring(0,u),O;v.length<u+p?O=v.length:O=u+p;let T=v.substring(u,O),P=v.substring(O),F="("+S+")"+T,j=je.parseFieldsInGeneralPurpose(P);return j==null?F:F+j}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Xe{constructor(u){this.buffer=new H,this.information=u}decodeAllCodes(u,p){let v=p,S=null;do{let O=this.decodeGeneralPurposeField(v,S),T=je.parseFieldsInGeneralPurpose(O.getNewString());if(T!=null&&u.append(T),O.isRemaining()?S=""+O.getRemainingValue():S=null,v===O.getNewPosition())break;v=O.getNewPosition()}while(!0);return u.toString()}isStillNumeric(u){if(u+7>this.information.getSize())return u+4<=this.information.getSize();for(let p=u;p<u+3;++p)if(this.information.get(p))return!0;return this.information.get(u+3)}decodeNumeric(u){if(u+7>this.information.getSize()){let O=this.extractNumericValueFromBitArray(u,4);return O===0?new rt(this.information.getSize(),rt.FNC1,rt.FNC1):new rt(this.information.getSize(),O-1,rt.FNC1)}let p=this.extractNumericValueFromBitArray(u,7),v=(p-8)/11,S=(p-8)%11;return new rt(u+7,v,S)}extractNumericValueFromBitArray(u,p){return Xe.extractNumericValueFromBitArray(this.information,u,p)}static extractNumericValueFromBitArray(u,p,v){let S=0;for(let O=0;O<v;++O)u.get(p+O)&&(S|=1<<v-O-1);return S}decodeGeneralPurposeField(u,p){this.buffer.setLengthToZero(),p!=null&&this.buffer.append(p),this.current.setPosition(u);let v=this.parseBlocks();return v!=null&&v.isRemaining()?new Pt(this.current.getPosition(),this.buffer.toString(),v.getRemainingValue()):new Pt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let u,p;do{let v=this.current.getPosition();if(this.current.isAlpha()?(p=this.parseAlphaBlock(),u=p.isFinished()):this.current.isIsoIec646()?(p=this.parseIsoIec646Block(),u=p.isFinished()):(p=this.parseNumericBlock(),u=p.isFinished()),!(v!==this.current.getPosition())&&!u)break}while(!u);return p.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let u=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFirstDigitFNC1()){let p;return u.isSecondDigitFNC1()?p=new Pt(this.current.getPosition(),this.buffer.toString()):p=new Pt(this.current.getPosition(),this.buffer.toString(),u.getSecondDigit()),new Vr(!0,p)}if(this.buffer.append(u.getFirstDigit()),u.isSecondDigitFNC1()){let p=new Pt(this.current.getPosition(),this.buffer.toString());return new Vr(!0,p)}this.buffer.append(u.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let u=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let p=new Pt(this.current.getPosition(),this.buffer.toString());return new Vr(!0,p)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let u=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let p=new Pt(this.current.getPosition(),this.buffer.toString());return new Vr(!0,p)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vr(!1)}isStillIsoIec646(u){if(u+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(u,5);if(p>=5&&p<16)return!0;if(u+7>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(u,7);if(v>=64&&v<116)return!0;if(u+8>this.information.getSize())return!1;let S=this.extractNumericValueFromBitArray(u,8);return S>=232&&S<253}decodeIsoIec646(u){let p=this.extractNumericValueFromBitArray(u,5);if(p===15)return new Wt(u+5,Wt.FNC1);if(p>=5&&p<15)return new Wt(u+5,"0"+(p-5));let v=this.extractNumericValueFromBitArray(u,7);if(v>=64&&v<90)return new Wt(u+7,""+(v+1));if(v>=90&&v<116)return new Wt(u+7,""+(v+7));let S=this.extractNumericValueFromBitArray(u,8),O;switch(S){case 232:O="!";break;case 233:O='"';break;case 234:O="%";break;case 235:O="&";break;case 236:O="'";break;case 237:O="(";break;case 238:O=")";break;case 239:O="*";break;case 240:O="+";break;case 241:O=",";break;case 242:O="-";break;case 243:O=".";break;case 244:O="/";break;case 245:O=":";break;case 246:O=";";break;case 247:O="<";break;case 248:O="=";break;case 249:O=">";break;case 250:O="?";break;case 251:O="_";break;case 252:O=" ";break;default:throw new L}return new Wt(u+8,O)}isStillAlpha(u){if(u+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(u,5);if(p>=5&&p<16)return!0;if(u+6>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(u,6);return v>=16&&v<63}decodeAlphanumeric(u){let p=this.extractNumericValueFromBitArray(u,5);if(p===15)return new Wt(u+5,Wt.FNC1);if(p>=5&&p<15)return new Wt(u+5,"0"+(p-5));let v=this.extractNumericValueFromBitArray(u,6);if(v>=32&&v<58)return new Wt(u+6,""+(v+33));let S;switch(v){case 58:S="*";break;case 59:S=",";break;case 60:S="-";break;case 61:S=".";break;case 62:S="/";break;default:throw new Oe("Decoding invalid alphanumeric value: "+v)}return new Wt(u+6,S)}isAlphaTo646ToAlphaLatch(u){if(u+1>this.information.getSize())return!1;for(let p=0;p<5&&p+u<this.information.getSize();++p)if(p===2){if(!this.information.get(u+2))return!1}else if(this.information.get(u+p))return!1;return!0}isAlphaOr646ToNumericLatch(u){if(u+3>this.information.getSize())return!1;for(let p=u;p<u+3;++p)if(this.information.get(p))return!1;return!0}isNumericToAlphaNumericLatch(u){if(u+1>this.information.getSize())return!1;for(let p=0;p<4&&p+u<this.information.getSize();++p)if(this.information.get(u+p))return!1;return!0}}class _e{constructor(u){this.information=u,this.generalDecoder=new Xe(u)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class It extends _e{constructor(u){super(u)}encodeCompressedGtin(u,p){u.append("(01)");let v=u.length();u.append("9"),this.encodeCompressedGtinWithoutAI(u,p,v)}encodeCompressedGtinWithoutAI(u,p,v){for(let S=0;S<4;++S){let O=this.getGeneralDecoder().extractNumericValueFromBitArray(p+10*S,10);O/100===0&&u.append("0"),O/10===0&&u.append("0"),u.append(O)}It.appendCheckDigit(u,v)}static appendCheckDigit(u,p){let v=0;for(let S=0;S<13;S++){let O=u.charAt(S+p).charCodeAt(0)-48;v+=S&1?O:3*O}v=10-v%10,v===10&&(v=0),u.append(v)}}It.GTIN_SIZE=40;class ir extends It{constructor(u){super(u)}parseInformation(){let u=new H;u.append("(01)");let p=u.length(),v=this.getGeneralDecoder().extractNumericValueFromBitArray(ir.HEADER_SIZE,4);return u.append(v),this.encodeCompressedGtinWithoutAI(u,ir.HEADER_SIZE+4,p),this.getGeneralDecoder().decodeAllCodes(u,ir.HEADER_SIZE+44)}}ir.HEADER_SIZE=4;class rr extends _e{constructor(u){super(u)}parseInformation(){let u=new H;return this.getGeneralDecoder().decodeAllCodes(u,rr.HEADER_SIZE)}}rr.HEADER_SIZE=5;class Mt extends It{constructor(u){super(u)}encodeCompressedWeight(u,p,v){let S=this.getGeneralDecoder().extractNumericValueFromBitArray(p,v);this.addWeightCode(u,S);let O=this.checkWeight(S),T=1e5;for(let P=0;P<5;++P)O/T===0&&u.append("0"),T/=10;u.append(O)}}class Ot extends Mt{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Mt.GTIN_SIZE+Ot.WEIGHT_SIZE)throw new W;let u=new H;return this.encodeCompressedGtin(u,Ot.HEADER_SIZE),this.encodeCompressedWeight(u,Ot.HEADER_SIZE+Mt.GTIN_SIZE,Ot.WEIGHT_SIZE),u.toString()}}Ot.HEADER_SIZE=5,Ot.WEIGHT_SIZE=15;class Et extends Ot{constructor(u){super(u)}addWeightCode(u,p){u.append("(3103)")}checkWeight(u){return u}}class st extends Ot{constructor(u){super(u)}addWeightCode(u,p){p<1e4?u.append("(3202)"):u.append("(3203)")}checkWeight(u){return u<1e4?u:u-1e4}}class ot extends It{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<ot.HEADER_SIZE+It.GTIN_SIZE)throw new W;let u=new H;this.encodeCompressedGtin(u,ot.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(ot.HEADER_SIZE+It.GTIN_SIZE,ot.LAST_DIGIT_SIZE);u.append("(392"),u.append(p),u.append(")");let v=this.getGeneralDecoder().decodeGeneralPurposeField(ot.HEADER_SIZE+It.GTIN_SIZE+ot.LAST_DIGIT_SIZE,null);return u.append(v.getNewString()),u.toString()}}ot.HEADER_SIZE=8,ot.LAST_DIGIT_SIZE=2;class gt extends It{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<gt.HEADER_SIZE+It.GTIN_SIZE)throw new W;let u=new H;this.encodeCompressedGtin(u,gt.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+It.GTIN_SIZE,gt.LAST_DIGIT_SIZE);u.append("(393"),u.append(p),u.append(")");let v=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+It.GTIN_SIZE+gt.LAST_DIGIT_SIZE,gt.FIRST_THREE_DIGITS_SIZE);v/100==0&&u.append("0"),v/10==0&&u.append("0"),u.append(v);let S=this.getGeneralDecoder().decodeGeneralPurposeField(gt.HEADER_SIZE+It.GTIN_SIZE+gt.LAST_DIGIT_SIZE+gt.FIRST_THREE_DIGITS_SIZE,null);return u.append(S.getNewString()),u.toString()}}gt.HEADER_SIZE=8,gt.LAST_DIGIT_SIZE=2,gt.FIRST_THREE_DIGITS_SIZE=10;class Tt extends Mt{constructor(u,p,v){super(u),this.dateCode=v,this.firstAIdigits=p}parseInformation(){if(this.getInformation().getSize()!=Tt.HEADER_SIZE+Tt.GTIN_SIZE+Tt.WEIGHT_SIZE+Tt.DATE_SIZE)throw new W;let u=new H;return this.encodeCompressedGtin(u,Tt.HEADER_SIZE),this.encodeCompressedWeight(u,Tt.HEADER_SIZE+Tt.GTIN_SIZE,Tt.WEIGHT_SIZE),this.encodeCompressedDate(u,Tt.HEADER_SIZE+Tt.GTIN_SIZE+Tt.WEIGHT_SIZE),u.toString()}encodeCompressedDate(u,p){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(p,Tt.DATE_SIZE);if(v==38400)return;u.append("("),u.append(this.dateCode),u.append(")");let S=v%32;v/=32;let O=v%12+1;v/=12;let T=v;T/10==0&&u.append("0"),u.append(T),O/10==0&&u.append("0"),u.append(O),S/10==0&&u.append("0"),u.append(S)}addWeightCode(u,p){u.append("("),u.append(this.firstAIdigits),u.append(p/1e5),u.append(")")}checkWeight(u){return u%1e5}}Tt.HEADER_SIZE=8,Tt.WEIGHT_SIZE=20,Tt.DATE_SIZE=16;function Vt(te){try{if(te.get(1))return new ir(te);if(!te.get(2))return new rr(te);switch(Xe.extractNumericValueFromBitArray(te,1,4)){case 4:return new Et(te);case 5:return new st(te)}switch(Xe.extractNumericValueFromBitArray(te,1,5)){case 12:return new ot(te);case 13:return new gt(te)}switch(Xe.extractNumericValueFromBitArray(te,1,7)){case 56:return new Tt(te,"310","11");case 57:return new Tt(te,"320","11");case 58:return new Tt(te,"310","13");case 59:return new Tt(te,"320","13");case 60:return new Tt(te,"310","15");case 61:return new Tt(te,"320","15");case 62:return new Tt(te,"310","17");case 63:return new Tt(te,"320","17")}}catch(u){throw console.log(u),new Oe("unknown decoder: "+te)}}class Bt{constructor(u,p,v,S){this.leftchar=u,this.rightchar=p,this.finderpattern=v,this.maybeLast=S}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(u,p){return u instanceof Bt?Bt.equalsOrNull(u.leftchar,p.leftchar)&&Bt.equalsOrNull(u.rightchar,p.rightchar)&&Bt.equalsOrNull(u.finderpattern,p.finderpattern):!1}static equalsOrNull(u,p){return u===null?p===null:Bt.equals(u,p)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Lt{constructor(u,p,v){this.pairs=u,this.rowNumber=p,this.wasReversed=v}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(u){return this.checkEqualitity(this,u)}toString(){return"{ "+this.pairs+" }"}equals(u,p){return u instanceof Lt?this.checkEqualitity(u,p)&&u.wasReversed===p.wasReversed:!1}checkEqualitity(u,p){if(!u||!p)return;let v;return u.forEach((S,O)=>{p.forEach(T=>{S.getLeftChar().getValue()===T.getLeftChar().getValue()&&S.getRightChar().getValue()===T.getRightChar().getValue()&&S.getFinderPatter().getValue()===T.getFinderPatter().getValue()&&(v=!0)})}),v}}class Ge extends qt{constructor(u){super(...arguments),this.pairs=new Array(Ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=u===!0}decodeRow(u,p,v){this.pairs.length=0,this.startFromEven=!1;try{return Ge.constructResult(this.decodeRow2pairs(u,p))}catch(S){this.verbose&&console.log(S)}return this.pairs.length=0,this.startFromEven=!0,Ge.constructResult(this.decodeRow2pairs(u,p))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(u,p){let v=!1;for(;!v;)try{this.pairs.push(this.retrieveNextPair(p,this.pairs,u))}catch(O){if(O instanceof W){if(!this.pairs.length)throw new W;v=!0}}if(this.checkChecksum())return this.pairs;let S;if(this.rows.length?S=!0:S=!1,this.storeRow(u,!1),S){let O=this.checkRowsBoolean(!1);if(O!=null||(O=this.checkRowsBoolean(!0),O!=null))return O}throw new W}checkRowsBoolean(u){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,u&&(this.rows=this.rows.reverse());let p=null;try{p=this.checkRows(new Array,0)}catch(v){this.verbose&&console.log(v)}return u&&(this.rows=this.rows.reverse()),p}checkRows(u,p){for(let v=p;v<this.rows.length;v++){let S=this.rows[v];this.pairs.length=0;for(let T of u)this.pairs.push(T.getPairs());if(this.pairs.push(S.getPairs()),!Ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let O=new Array(u);O.push(S);try{return this.checkRows(O,v+1)}catch(T){this.verbose&&console.log(T)}}throw new W}static isValidSequence(u){for(let p of Ge.FINDER_PATTERN_SEQUENCES){if(u.length>p.length)continue;let v=!0;for(let S=0;S<u.length;S++)if(u[S].getFinderPattern().getValue()!=p[S]){v=!1;break}if(v)return!0}return!1}storeRow(u,p){let v=0,S=!1,O=!1;for(;v<this.rows.length;){let T=this.rows[v];if(T.getRowNumber()>u){O=T.isEquivalent(this.pairs);break}S=T.isEquivalent(this.pairs),v++}O||S||Ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(v,new Lt(this.pairs,u,p)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(u,p){for(let v of p)if(v.getPairs().length!==u.length){for(let S of v.getPairs())for(let O of u)if(Bt.equals(S,O))break}}static isPartialRow(u,p){for(let v of p){let S=!0;for(let O of u){let T=!1;for(let P of v.getPairs())if(O.equals(P)){T=!0;break}if(!T){S=!1;break}}if(S)return!0}return!1}getRows(){return this.rows}static constructResult(u){let p=qr.buildBitArray(u),S=Vt(p).parseInformation(),O=u[0].getFinderPattern().getResultPoints(),T=u[u.length-1].getFinderPattern().getResultPoints(),P=[O[0],O[1],T[0],T[1]];return new be(S,null,null,P,Ee.RSS_EXPANDED,null)}checkChecksum(){let u=this.pairs.get(0),p=u.getLeftChar(),v=u.getRightChar();if(v==null)return!1;let S=v.getChecksumPortion(),O=2;for(let P=1;P<this.pairs.size();++P){let F=this.pairs.get(P);S+=F.getLeftChar().getChecksumPortion(),O++;let j=F.getRightChar();j!=null&&(S+=j.getChecksumPortion(),O++)}return S%=211,211*(O-4)+S==p.getValue()}static getNextSecondBar(u,p){let v;return u.get(p)?(v=u.getNextUnset(p),v=u.getNextSet(v)):(v=u.getNextSet(p),v=u.getNextUnset(v)),v}retrieveNextPair(u,p,v){let S=p.length%2==0;this.startFromEven&&(S=!S);let O,T=!0,P=-1;do this.findNextPair(u,p,P),O=this.parseFoundFinderPattern(u,v,S),O==null?P=Ge.getNextSecondBar(u,this.startEnd[0]):T=!1;while(T);let F=this.decodeDataCharacter(u,O,S,!0);if(!this.isEmptyPair(p)&&p[p.length-1].mustBeLast())throw new W;let j;try{j=this.decodeDataCharacter(u,O,S,!1)}catch(Z){j=null,this.verbose&&console.log(Z)}return new Bt(F,j,O,!0)}isEmptyPair(u){return u.length===0}findNextPair(u,p,v){let S=this.getDecodeFinderCounters();S[0]=0,S[1]=0,S[2]=0,S[3]=0;let O=u.getSize(),T;v>=0?T=v:this.isEmptyPair(p)?T=0:T=p[p.length-1].getFinderPattern().getStartEnd()[1];let P=p.length%2!=0;this.startFromEven&&(P=!P);let F=!1;for(;T<O&&(F=!u.get(T),!!F);)T++;let j=0,Z=T;for(let re=T;re<O;re++)if(u.get(re)!=F)S[j]++;else{if(j==3){if(P&&Ge.reverseCounters(S),Ge.isFinderPattern(S)){this.startEnd[0]=Z,this.startEnd[1]=re;return}P&&Ge.reverseCounters(S),Z+=S[0]+S[1],S[0]=S[2],S[1]=S[3],S[2]=0,S[3]=0,j--}else j++;S[j]=1,F=!F}throw new W}static reverseCounters(u){let p=u.length;for(let v=0;v<p/2;++v){let S=u[v];u[v]=u[p-v-1],u[p-v-1]=S}}parseFoundFinderPattern(u,p,v){let S,O,T;if(v){let j=this.startEnd[0]-1;for(;j>=0&&!u.get(j);)j--;j++,S=this.startEnd[0]-j,O=j,T=this.startEnd[1]}else O=this.startEnd[0],T=u.getNextUnset(this.startEnd[1]+1),S=T-this.startEnd[1];let P=this.getDecodeFinderCounters();w.arraycopy(P,0,P,1,P.length-1),P[0]=S;let F;try{F=this.parseFinderValue(P,Ge.FINDER_PATTERNS)}catch{return null}return new xr(F,[O,T],O,T,p)}decodeDataCharacter(u,p,v,S){let O=this.getDataCharacterCounters();for(let Sr=0;Sr<O.length;Sr++)O[Sr]=0;if(S)Ge.recordPatternInReverse(u,p.getStartEnd()[0],O);else{Ge.recordPattern(u,p.getStartEnd()[1],O);for(let Sr=0,zr=O.length-1;Sr<zr;Sr++,zr--){let ai=O[Sr];O[Sr]=O[zr],O[zr]=ai}}let T=17,P=Ze.sum(new Int32Array(O))/T,F=(p.getStartEnd()[1]-p.getStartEnd()[0])/15;if(Math.abs(P-F)/F>.3)throw new W;let j=this.getOddCounts(),Z=this.getEvenCounts(),re=this.getOddRoundingErrors(),ae=this.getEvenRoundingErrors();for(let Sr=0;Sr<O.length;Sr++){let zr=1*O[Sr]/P,ai=zr+.5;if(ai<1){if(zr<.3)throw new W;ai=1}else if(ai>8){if(zr>8.7)throw new W;ai=8}let $i=Sr/2;Sr&1?(Z[$i]=ai,ae[$i]=zr-ai):(j[$i]=ai,re[$i]=zr-ai)}this.adjustOddEvenCounts(T);let ve=4*p.getValue()+(v?0:2)+(S?0:1)-1,Me=0,Be=0;for(let Sr=j.length-1;Sr>=0;Sr--){if(Ge.isNotA1left(p,v,S)){let zr=Ge.WEIGHTS[ve][2*Sr];Be+=j[Sr]*zr}Me+=j[Sr]}let Ue=0;for(let Sr=Z.length-1;Sr>=0;Sr--)if(Ge.isNotA1left(p,v,S)){let zr=Ge.WEIGHTS[ve][2*Sr+1];Ue+=Z[Sr]*zr}let Qe=Be+Ue;if(Me&1||Me>13||Me<4)throw new W;let xt=(13-Me)/2,wt=Ge.SYMBOL_WIDEST[xt],bt=9-wt,ur=fr.getRSSvalue(j,wt,!0),nr=fr.getRSSvalue(Z,bt,!1),Ur=Ge.EVEN_TOTAL_SUBSET[xt],ri=Ge.GSUM[xt],ii=ur*Ur+nr+ri;return new tr(ii,Qe)}static isNotA1left(u,p,v){return!(u.getValue()==0&&p&&v)}adjustOddEvenCounts(u){let p=Ze.sum(new Int32Array(this.getOddCounts())),v=Ze.sum(new Int32Array(this.getEvenCounts())),S=!1,O=!1;p>13?O=!0:p<4&&(S=!0);let T=!1,P=!1;v>13?P=!0:v<4&&(T=!0);let F=p+v-u,j=(p&1)==1,Z=(v&1)==0;if(F==1)if(j){if(Z)throw new W;O=!0}else{if(!Z)throw new W;P=!0}else if(F==-1)if(j){if(Z)throw new W;S=!0}else{if(!Z)throw new W;T=!0}else if(F==0){if(j){if(!Z)throw new W;p<v?(S=!0,P=!0):(O=!0,T=!0)}else if(Z)throw new W}else throw new W;if(S){if(O)throw new W;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(O&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(P)throw new W;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}P&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ge.SYMBOL_WIDEST=[7,5,4,3,1],Ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ge.GSUM=[0,348,1388,2948,3988],Ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ge.FINDER_PAT_A=0,Ge.FINDER_PAT_B=1,Ge.FINDER_PAT_C=2,Ge.FINDER_PAT_D=3,Ge.FINDER_PAT_E=4,Ge.FINDER_PAT_F=5,Ge.FINDER_PATTERN_SEQUENCES=[[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_C,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_C],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F]],Ge.MAX_PAIRS=11;class Gt extends tr{constructor(u,p,v){super(u,p),this.count=0,this.finderPattern=v}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends qt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(u,p,v){const S=this.decodePair(p,!1,u,v);$t.addOrTally(this.possibleLeftPairs,S),p.reverse();let O=this.decodePair(p,!0,u,v);$t.addOrTally(this.possibleRightPairs,O),p.reverse();for(let T of this.possibleLeftPairs)if(T.getCount()>1){for(let P of this.possibleRightPairs)if(P.getCount()>1&&$t.checkChecksum(T,P))return $t.constructResult(T,P)}throw new W}static addOrTally(u,p){if(p==null)return;let v=!1;for(let S of u)if(S.getValue()===p.getValue()){S.incrementCount(),v=!0;break}v||u.push(p)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(u,p){let v=4537077*u.getValue()+p.getValue(),S=new String(v).toString(),O=new H;for(let j=13-S.length;j>0;j--)O.append("0");O.append(S);let T=0;for(let j=0;j<13;j++){let Z=O.charAt(j).charCodeAt(0)-48;T+=j&1?Z:3*Z}T=10-T%10,T===10&&(T=0),O.append(T.toString());let P=u.getFinderPattern().getResultPoints(),F=p.getFinderPattern().getResultPoints();return new be(O.toString(),null,0,[P[0],P[1],F[0],F[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(u,p){let v=(u.getChecksumPortion()+16*p.getChecksumPortion())%79,S=9*u.getFinderPattern().getValue()+p.getFinderPattern().getValue();return S>72&&S--,S>8&&S--,v===S}decodePair(u,p,v,S){try{let O=this.findFinderPattern(u,p),T=this.parseFoundFinderPattern(u,v,p,O),P=S==null?null:S.get(M.NEED_RESULT_POINT_CALLBACK);if(P!=null){let Z=(O[0]+O[1])/2;p&&(Z=u.getSize()-1-Z),P.foundPossibleResultPoint(new fe(Z,v))}let F=this.decodeDataCharacter(u,T,!0),j=this.decodeDataCharacter(u,T,!1);return new Gt(1597*F.getValue()+j.getValue(),F.getChecksumPortion()+4*j.getChecksumPortion(),T)}catch{return null}}decodeDataCharacter(u,p,v){let S=this.getDataCharacterCounters();for(let Ue=0;Ue<S.length;Ue++)S[Ue]=0;if(v)nt.recordPatternInReverse(u,p.getStartEnd()[0],S);else{nt.recordPattern(u,p.getStartEnd()[1]+1,S);for(let Ue=0,Qe=S.length-1;Ue<Qe;Ue++,Qe--){let xt=S[Ue];S[Ue]=S[Qe],S[Qe]=xt}}let O=v?16:15,T=Ze.sum(new Int32Array(S))/O,P=this.getOddCounts(),F=this.getEvenCounts(),j=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let Ue=0;Ue<S.length;Ue++){let Qe=S[Ue]/T,xt=Math.floor(Qe+.5);xt<1?xt=1:xt>8&&(xt=8);let wt=Math.floor(Ue/2);Ue&1?(F[wt]=xt,Z[wt]=Qe-xt):(P[wt]=xt,j[wt]=Qe-xt)}this.adjustOddEvenCounts(v,O);let re=0,ae=0;for(let Ue=P.length-1;Ue>=0;Ue--)ae*=9,ae+=P[Ue],re+=P[Ue];let ve=0,Me=0;for(let Ue=F.length-1;Ue>=0;Ue--)ve*=9,ve+=F[Ue],Me+=F[Ue];let Be=ae+3*ve;if(v){if(re&1||re>12||re<4)throw new W;let Ue=(12-re)/2,Qe=$t.OUTSIDE_ODD_WIDEST[Ue],xt=9-Qe,wt=fr.getRSSvalue(P,Qe,!1),bt=fr.getRSSvalue(F,xt,!0),ur=$t.OUTSIDE_EVEN_TOTAL_SUBSET[Ue],nr=$t.OUTSIDE_GSUM[Ue];return new tr(wt*ur+bt+nr,Be)}else{if(Me&1||Me>10||Me<4)throw new W;let Ue=(10-Me)/2,Qe=$t.INSIDE_ODD_WIDEST[Ue],xt=9-Qe,wt=fr.getRSSvalue(P,Qe,!0),bt=fr.getRSSvalue(F,xt,!1),ur=$t.INSIDE_ODD_TOTAL_SUBSET[Ue],nr=$t.INSIDE_GSUM[Ue];return new tr(bt*ur+wt+nr,Be)}}findFinderPattern(u,p){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let S=u.getSize(),O=!1,T=0;for(;T<S&&(O=!u.get(T),p!==O);)T++;let P=0,F=T;for(let j=T;j<S;j++)if(u.get(j)!==O)v[P]++;else{if(P===3){if(qt.isFinderPattern(v))return[F,j];F+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,P--}else P++;v[P]=1,O=!O}throw new W}parseFoundFinderPattern(u,p,v,S){let O=u.get(S[0]),T=S[0]-1;for(;T>=0&&O!==u.get(T);)T--;T++;const P=S[0]-T,F=this.getDecodeFinderCounters(),j=new Int32Array(F.length);w.arraycopy(F,0,j,1,F.length-1),j[0]=P;const Z=this.parseFinderValue(j,$t.FINDER_PATTERNS);let re=T,ae=S[1];return v&&(re=u.getSize()-1-re,ae=u.getSize()-1-ae),new xr(Z,[T,S[1]],re,ae,p)}adjustOddEvenCounts(u,p){let v=Ze.sum(new Int32Array(this.getOddCounts())),S=Ze.sum(new Int32Array(this.getEvenCounts())),O=!1,T=!1,P=!1,F=!1;u?(v>12?T=!0:v<4&&(O=!0),S>12?F=!0:S<4&&(P=!0)):(v>11?T=!0:v<5&&(O=!0),S>10?F=!0:S<4&&(P=!0));let j=v+S-p,Z=(v&1)===(u?1:0),re=(S&1)===1;if(j===1)if(Z){if(re)throw new W;T=!0}else{if(!re)throw new W;F=!0}else if(j===-1)if(Z){if(re)throw new W;O=!0}else{if(!re)throw new W;P=!0}else if(j===0){if(Z){if(!re)throw new W;v<S?(O=!0,F=!0):(T=!0,P=!0)}else if(re)throw new W}else throw new W;if(O){if(T)throw new W;qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(T&&qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),P){if(F)throw new W;qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}F&&qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class dr extends nt{constructor(u,p){super(),this.readers=[],this.verbose=p===!0;const v=u?u.get(M.POSSIBLE_FORMATS):null,S=u&&u.get(M.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;v?((v.includes(Ee.EAN_13)||v.includes(Ee.UPC_A)||v.includes(Ee.EAN_8)||v.includes(Ee.UPC_E))&&this.readers.push(new Zt(u)),v.includes(Ee.CODE_39)&&this.readers.push(new it(S)),v.includes(Ee.CODE_128)&&this.readers.push(new Re),v.includes(Ee.ITF)&&this.readers.push(new lt),v.includes(Ee.RSS_14)&&this.readers.push(new $t),v.includes(Ee.RSS_EXPANDED)&&this.readers.push(new Ge(this.verbose))):(this.readers.push(new Zt(u)),this.readers.push(new it),this.readers.push(new Zt(u)),this.readers.push(new Re),this.readers.push(new lt),this.readers.push(new $t),this.readers.push(new Ge(this.verbose)))}decodeRow(u,p,v){for(let S=0;S<this.readers.length;S++)try{return this.readers[S].decodeRow(u,p,v)}catch{}throw new W}reset(){this.readers.forEach(u=>u.reset())}}class Ar extends Se{constructor(u=500,p){super(new dr(p),u,p)}}class Qt{constructor(u,p,v){this.ecCodewords=u,this.ecBlocks=[p],v&&this.ecBlocks.push(v)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Xt{constructor(u,p){this.count=u,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Jt{constructor(u,p,v,S,O,T){this.versionNumber=u,this.symbolSizeRows=p,this.symbolSizeColumns=v,this.dataRegionSizeRows=S,this.dataRegionSizeColumns=O,this.ecBlocks=T;let P=0;const F=T.getECCodewords(),j=T.getECBlocks();for(let Z of j)P+=Z.getCount()*(Z.getDataCodewords()+F);this.totalCodewords=P}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(u,p){if(u&1||p&1)throw new L;for(let v of Jt.VERSIONS)if(v.symbolSizeRows===u&&v.symbolSizeColumns===p)return v;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Jt(1,10,10,8,8,new Qt(5,new Xt(1,3))),new Jt(2,12,12,10,10,new Qt(7,new Xt(1,5))),new Jt(3,14,14,12,12,new Qt(10,new Xt(1,8))),new Jt(4,16,16,14,14,new Qt(12,new Xt(1,12))),new Jt(5,18,18,16,16,new Qt(14,new Xt(1,18))),new Jt(6,20,20,18,18,new Qt(18,new Xt(1,22))),new Jt(7,22,22,20,20,new Qt(20,new Xt(1,30))),new Jt(8,24,24,22,22,new Qt(24,new Xt(1,36))),new Jt(9,26,26,24,24,new Qt(28,new Xt(1,44))),new Jt(10,32,32,14,14,new Qt(36,new Xt(1,62))),new Jt(11,36,36,16,16,new Qt(42,new Xt(1,86))),new Jt(12,40,40,18,18,new Qt(48,new Xt(1,114))),new Jt(13,44,44,20,20,new Qt(56,new Xt(1,144))),new Jt(14,48,48,22,22,new Qt(68,new Xt(1,174))),new Jt(15,52,52,24,24,new Qt(42,new Xt(2,102))),new Jt(16,64,64,14,14,new Qt(56,new Xt(2,140))),new Jt(17,72,72,16,16,new Qt(36,new Xt(4,92))),new Jt(18,80,80,18,18,new Qt(48,new Xt(4,114))),new Jt(19,88,88,20,20,new Qt(56,new Xt(4,144))),new Jt(20,96,96,22,22,new Qt(68,new Xt(4,174))),new Jt(21,104,104,24,24,new Qt(56,new Xt(6,136))),new Jt(22,120,120,18,18,new Qt(68,new Xt(6,175))),new Jt(23,132,132,20,20,new Qt(62,new Xt(8,163))),new Jt(24,144,144,22,22,new Qt(62,new Xt(8,156),new Xt(2,155))),new Jt(25,8,18,6,16,new Qt(7,new Xt(1,5))),new Jt(26,8,32,6,14,new Qt(11,new Xt(1,10))),new Jt(27,12,26,10,24,new Qt(14,new Xt(1,16))),new Jt(28,12,36,10,16,new Qt(18,new Xt(1,22))),new Jt(29,16,36,14,16,new Qt(24,new Xt(1,32))),new Jt(30,16,48,14,22,new Qt(28,new Xt(1,49)))]}}Jt.VERSIONS=Jt.buildVersions();class Fr{constructor(u){const p=u.getHeight();if(p<8||p>144||p&1)throw new L;this.version=Fr.readVersion(u),this.mappingBitMatrix=this.extractDataRegion(u),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(u){const p=u.getHeight(),v=u.getWidth();return Jt.getVersionForDimensions(p,v)}readCodewords(){const u=new Int8Array(this.version.getTotalCodewords());let p=0,v=4,S=0;const O=this.mappingBitMatrix.getHeight(),T=this.mappingBitMatrix.getWidth();let P=!1,F=!1,j=!1,Z=!1;do if(v===O&&S===0&&!P)u[p++]=this.readCorner1(O,T)&255,v-=2,S+=2,P=!0;else if(v===O-2&&S===0&&T&3&&!F)u[p++]=this.readCorner2(O,T)&255,v-=2,S+=2,F=!0;else if(v===O+4&&S===2&&!(T&7)&&!j)u[p++]=this.readCorner3(O,T)&255,v-=2,S+=2,j=!0;else if(v===O-2&&S===0&&(T&7)===4&&!Z)u[p++]=this.readCorner4(O,T)&255,v-=2,S+=2,Z=!0;else{do v<O&&S>=0&&!this.readMappingMatrix.get(S,v)&&(u[p++]=this.readUtah(v,S,O,T)&255),v-=2,S+=2;while(v>=0&&S<T);v+=1,S+=3;do v>=0&&S<T&&!this.readMappingMatrix.get(S,v)&&(u[p++]=this.readUtah(v,S,O,T)&255),v+=2,S-=2;while(v<O&&S>=0);v+=3,S+=1}while(v<O||S<T);if(p!==this.version.getTotalCodewords())throw new L;return u}readModule(u,p,v,S){return u<0&&(u+=v,p+=4-(v+4&7)),p<0&&(p+=S,u+=4-(S+4&7)),this.readMappingMatrix.set(p,u),this.mappingBitMatrix.get(p,u)}readUtah(u,p,v,S){let O=0;return this.readModule(u-2,p-2,v,S)&&(O|=1),O<<=1,this.readModule(u-2,p-1,v,S)&&(O|=1),O<<=1,this.readModule(u-1,p-2,v,S)&&(O|=1),O<<=1,this.readModule(u-1,p-1,v,S)&&(O|=1),O<<=1,this.readModule(u-1,p,v,S)&&(O|=1),O<<=1,this.readModule(u,p-2,v,S)&&(O|=1),O<<=1,this.readModule(u,p-1,v,S)&&(O|=1),O<<=1,this.readModule(u,p,v,S)&&(O|=1),O}readCorner1(u,p){let v=0;return this.readModule(u-1,0,u,p)&&(v|=1),v<<=1,this.readModule(u-1,1,u,p)&&(v|=1),v<<=1,this.readModule(u-1,2,u,p)&&(v|=1),v<<=1,this.readModule(0,p-2,u,p)&&(v|=1),v<<=1,this.readModule(0,p-1,u,p)&&(v|=1),v<<=1,this.readModule(1,p-1,u,p)&&(v|=1),v<<=1,this.readModule(2,p-1,u,p)&&(v|=1),v<<=1,this.readModule(3,p-1,u,p)&&(v|=1),v}readCorner2(u,p){let v=0;return this.readModule(u-3,0,u,p)&&(v|=1),v<<=1,this.readModule(u-2,0,u,p)&&(v|=1),v<<=1,this.readModule(u-1,0,u,p)&&(v|=1),v<<=1,this.readModule(0,p-4,u,p)&&(v|=1),v<<=1,this.readModule(0,p-3,u,p)&&(v|=1),v<<=1,this.readModule(0,p-2,u,p)&&(v|=1),v<<=1,this.readModule(0,p-1,u,p)&&(v|=1),v<<=1,this.readModule(1,p-1,u,p)&&(v|=1),v}readCorner3(u,p){let v=0;return this.readModule(u-1,0,u,p)&&(v|=1),v<<=1,this.readModule(u-1,p-1,u,p)&&(v|=1),v<<=1,this.readModule(0,p-3,u,p)&&(v|=1),v<<=1,this.readModule(0,p-2,u,p)&&(v|=1),v<<=1,this.readModule(0,p-1,u,p)&&(v|=1),v<<=1,this.readModule(1,p-3,u,p)&&(v|=1),v<<=1,this.readModule(1,p-2,u,p)&&(v|=1),v<<=1,this.readModule(1,p-1,u,p)&&(v|=1),v}readCorner4(u,p){let v=0;return this.readModule(u-3,0,u,p)&&(v|=1),v<<=1,this.readModule(u-2,0,u,p)&&(v|=1),v<<=1,this.readModule(u-1,0,u,p)&&(v|=1),v<<=1,this.readModule(0,p-2,u,p)&&(v|=1),v<<=1,this.readModule(0,p-1,u,p)&&(v|=1),v<<=1,this.readModule(1,p-1,u,p)&&(v|=1),v<<=1,this.readModule(2,p-1,u,p)&&(v|=1),v<<=1,this.readModule(3,p-1,u,p)&&(v|=1),v}extractDataRegion(u){const p=this.version.getSymbolSizeRows(),v=this.version.getSymbolSizeColumns();if(u.getHeight()!==p)throw new g("Dimension of bitMatrix must match the version size");const S=this.version.getDataRegionSizeRows(),O=this.version.getDataRegionSizeColumns(),T=p/S|0,P=v/O|0,F=T*S,j=P*O,Z=new z(j,F);for(let re=0;re<T;++re){const ae=re*S;for(let ve=0;ve<P;++ve){const Me=ve*O;for(let Be=0;Be<S;++Be){const Ue=re*(S+2)+1+Be,Qe=ae+Be;for(let xt=0;xt<O;++xt){const wt=ve*(O+2)+1+xt;if(u.get(wt,Ue)){const bt=Me+xt;Z.set(bt,Qe)}}}}}return Z}}class Qr{constructor(u,p){this.numDataCodewords=u,this.codewords=p}static getDataBlocks(u,p){const v=p.getECBlocks();let S=0;const O=v.getECBlocks();for(let Be of O)S+=Be.getCount();const T=new Array(S);let P=0;for(let Be of O)for(let Ue=0;Ue<Be.getCount();Ue++){const Qe=Be.getDataCodewords(),xt=v.getECCodewords()+Qe;T[P++]=new Qr(Qe,new Uint8Array(xt))}const j=T[0].codewords.length-v.getECCodewords(),Z=j-1;let re=0;for(let Be=0;Be<Z;Be++)for(let Ue=0;Ue<P;Ue++)T[Ue].codewords[Be]=u[re++];const ae=p.getVersionNumber()===24,ve=ae?8:P;for(let Be=0;Be<ve;Be++)T[Be].codewords[j-1]=u[re++];const Me=T[0].codewords.length;for(let Be=j;Be<Me;Be++)for(let Ue=0;Ue<P;Ue++){const Qe=ae?(Ue+8)%P:Ue,xt=ae&&Qe>7?Be-1:Be;T[Qe].codewords[xt]=u[re++]}if(re!==u.length)throw new g;return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Yr{constructor(u){this.bytes=u,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(u){if(u<1||u>32||u>this.available())throw new g(""+u);let p=0,v=this.bitOffset,S=this.byteOffset;const O=this.bytes;if(v>0){const T=8-v,P=u<T?u:T,F=T-P,j=255>>8-P<<F;p=(O[S]&j)>>F,u-=P,v+=P,v===8&&(v=0,S++)}if(u>0){for(;u>=8;)p=p<<8|O[S]&255,S++,u-=8;if(u>0){const T=8-u,P=255>>T<<T;p=p<<u|(O[S]&P)>>T,v+=u}}return this.bitOffset=v,this.byteOffset=S,p}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var cr;(function(te){te[te.PAD_ENCODE=0]="PAD_ENCODE",te[te.ASCII_ENCODE=1]="ASCII_ENCODE",te[te.C40_ENCODE=2]="C40_ENCODE",te[te.TEXT_ENCODE=3]="TEXT_ENCODE",te[te.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",te[te.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",te[te.BASE256_ENCODE=6]="BASE256_ENCODE"})(cr||(cr={}));class $r{static decode(u){const p=new Yr(u),v=new H,S=new H,O=new Array;let T=cr.ASCII_ENCODE;do if(T===cr.ASCII_ENCODE)T=this.decodeAsciiSegment(p,v,S);else{switch(T){case cr.C40_ENCODE:this.decodeC40Segment(p,v);break;case cr.TEXT_ENCODE:this.decodeTextSegment(p,v);break;case cr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(p,v);break;case cr.EDIFACT_ENCODE:this.decodeEdifactSegment(p,v);break;case cr.BASE256_ENCODE:this.decodeBase256Segment(p,v,O);break;default:throw new L}T=cr.ASCII_ENCODE}while(T!==cr.PAD_ENCODE&&p.available()>0);return S.length()>0&&v.append(S.toString()),new de(u,v.toString(),O.length===0?null:O,null)}static decodeAsciiSegment(u,p,v){let S=!1;do{let O=u.readBits(8);if(O===0)throw new L;if(O<=128)return S&&(O+=128),p.append(String.fromCharCode(O-1)),cr.ASCII_ENCODE;if(O===129)return cr.PAD_ENCODE;if(O<=229){const T=O-130;T<10&&p.append("0"),p.append(""+T)}else switch(O){case 230:return cr.C40_ENCODE;case 231:return cr.BASE256_ENCODE;case 232:p.append("");break;case 233:case 234:break;case 235:S=!0;break;case 236:p.append("[)>05"),v.insert(0,"");break;case 237:p.append("[)>06"),v.insert(0,"");break;case 238:return cr.ANSIX12_ENCODE;case 239:return cr.TEXT_ENCODE;case 240:return cr.EDIFACT_ENCODE;case 241:break;default:if(O!==254||u.available()!==0)throw new L;break}}while(u.available()>0);return cr.ASCII_ENCODE}static decodeC40Segment(u,p){let v=!1;const S=[];let O=0;do{if(u.available()===8)return;const T=u.readBits(8);if(T===254)return;this.parseTwoBytes(T,u.readBits(8),S);for(let P=0;P<3;P++){const F=S[P];switch(O){case 0:if(F<3)O=F+1;else if(F<this.C40_BASIC_SET_CHARS.length){const j=this.C40_BASIC_SET_CHARS[F];v?(p.append(String.fromCharCode(j.charCodeAt(0)+128)),v=!1):p.append(j)}else throw new L;break;case 1:v?(p.append(String.fromCharCode(F+128)),v=!1):p.append(String.fromCharCode(F)),O=0;break;case 2:if(F<this.C40_SHIFT2_SET_CHARS.length){const j=this.C40_SHIFT2_SET_CHARS[F];v?(p.append(String.fromCharCode(j.charCodeAt(0)+128)),v=!1):p.append(j)}else switch(F){case 27:p.append("");break;case 30:v=!0;break;default:throw new L}O=0;break;case 3:v?(p.append(String.fromCharCode(F+224)),v=!1):p.append(String.fromCharCode(F+96)),O=0;break;default:throw new L}}}while(u.available()>0)}static decodeTextSegment(u,p){let v=!1,S=[],O=0;do{if(u.available()===8)return;const T=u.readBits(8);if(T===254)return;this.parseTwoBytes(T,u.readBits(8),S);for(let P=0;P<3;P++){const F=S[P];switch(O){case 0:if(F<3)O=F+1;else if(F<this.TEXT_BASIC_SET_CHARS.length){const j=this.TEXT_BASIC_SET_CHARS[F];v?(p.append(String.fromCharCode(j.charCodeAt(0)+128)),v=!1):p.append(j)}else throw new L;break;case 1:v?(p.append(String.fromCharCode(F+128)),v=!1):p.append(String.fromCharCode(F)),O=0;break;case 2:if(F<this.TEXT_SHIFT2_SET_CHARS.length){const j=this.TEXT_SHIFT2_SET_CHARS[F];v?(p.append(String.fromCharCode(j.charCodeAt(0)+128)),v=!1):p.append(j)}else switch(F){case 27:p.append("");break;case 30:v=!0;break;default:throw new L}O=0;break;case 3:if(F<this.TEXT_SHIFT3_SET_CHARS.length){const j=this.TEXT_SHIFT3_SET_CHARS[F];v?(p.append(String.fromCharCode(j.charCodeAt(0)+128)),v=!1):p.append(j),O=0}else throw new L;break;default:throw new L}}}while(u.available()>0)}static decodeAnsiX12Segment(u,p){const v=[];do{if(u.available()===8)return;const S=u.readBits(8);if(S===254)return;this.parseTwoBytes(S,u.readBits(8),v);for(let O=0;O<3;O++){const T=v[O];switch(T){case 0:p.append("\r");break;case 1:p.append("*");break;case 2:p.append(">");break;case 3:p.append(" ");break;default:if(T<14)p.append(String.fromCharCode(T+44));else if(T<40)p.append(String.fromCharCode(T+51));else throw new L;break}}}while(u.available()>0)}static parseTwoBytes(u,p,v){let S=(u<<8)+p-1,O=Math.floor(S/1600);v[0]=O,S-=O*1600,O=Math.floor(S/40),v[1]=O,v[2]=S-O*40}static decodeEdifactSegment(u,p){do{if(u.available()<=16)return;for(let v=0;v<4;v++){let S=u.readBits(6);if(S===31){const O=8-u.getBitOffset();O!==8&&u.readBits(O);return}S&32||(S|=64),p.append(String.fromCharCode(S))}}while(u.available()>0)}static decodeBase256Segment(u,p,v){let S=1+u.getByteOffset();const O=this.unrandomize255State(u.readBits(8),S++);let T;if(O===0?T=u.available()/8|0:O<250?T=O:T=250*(O-249)+this.unrandomize255State(u.readBits(8),S++),T<0)throw new L;const P=new Uint8Array(T);for(let F=0;F<T;F++){if(u.available()<8)throw new L;P[F]=this.unrandomize255State(u.readBits(8),S++)}v.push(P);try{p.append(N.decode(P,B.ISO88591))}catch(F){throw new Oe("Platform does not support required encoding: "+F.message)}}static unrandomize255State(u,p){const v=149*p%255+1,S=u-v;return S>=0?S:S+256}}$r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$r.TEXT_SHIFT2_SET_CHARS=$r.C40_SHIFT2_SET_CHARS,$r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Xr{constructor(){this.rsDecoder=new Le(ye.DATA_MATRIX_FIELD_256)}decode(u){const p=new Fr(u),v=p.getVersion(),S=p.readCodewords(),O=Qr.getDataBlocks(S,v);let T=0;for(let j of O)T+=j.getNumDataCodewords();const P=new Uint8Array(T),F=O.length;for(let j=0;j<F;j++){const Z=O[j],re=Z.getCodewords(),ae=Z.getNumDataCodewords();this.correctErrors(re,ae);for(let ve=0;ve<ae;ve++)P[ve*F+j]=re[ve]}return $r.decode(P)}correctErrors(u,p){const v=new Int32Array(u);try{this.rsDecoder.decode(v,u.length-p)}catch{throw new E}for(let S=0;S<p;S++)u[S]=v[S]}}class Cr{constructor(u){this.image=u,this.rectangleDetector=new ke(this.image)}detect(){const u=this.rectangleDetector.detect();let p=this.detectSolid1(u);if(p=this.detectSolid2(p),p[3]=this.correctTopRight(p),!p[3])throw new W;p=this.shiftToModuleCenter(p);const v=p[0],S=p[1],O=p[2],T=p[3];let P=this.transitionsBetween(v,T)+1,F=this.transitionsBetween(O,T)+1;(P&1)===1&&(P+=1),(F&1)===1&&(F+=1),4*P<7*F&&4*F<7*P&&(P=F=Math.max(P,F));let j=Cr.sampleGrid(this.image,v,S,O,T,P,F);return new Ne(j,[v,S,O,T])}static shiftPoint(u,p,v){let S=(p.getX()-u.getX())/(v+1),O=(p.getY()-u.getY())/(v+1);return new fe(u.getX()+S,u.getY()+O)}static moveAway(u,p,v){let S=u.getX(),O=u.getY();return S<p?S-=1:S+=1,O<v?O-=1:O+=1,new fe(S,O)}detectSolid1(u){let p=u[0],v=u[1],S=u[3],O=u[2],T=this.transitionsBetween(p,v),P=this.transitionsBetween(v,S),F=this.transitionsBetween(S,O),j=this.transitionsBetween(O,p),Z=T,re=[O,p,v,S];return Z>P&&(Z=P,re[0]=p,re[1]=v,re[2]=S,re[3]=O),Z>F&&(Z=F,re[0]=v,re[1]=S,re[2]=O,re[3]=p),Z>j&&(re[0]=S,re[1]=O,re[2]=p,re[3]=v),re}detectSolid2(u){let p=u[0],v=u[1],S=u[2],O=u[3],T=this.transitionsBetween(p,O),P=Cr.shiftPoint(v,S,(T+1)*4),F=Cr.shiftPoint(S,v,(T+1)*4),j=this.transitionsBetween(P,p),Z=this.transitionsBetween(F,O);return j<Z?(u[0]=p,u[1]=v,u[2]=S,u[3]=O):(u[0]=v,u[1]=S,u[2]=O,u[3]=p),u}correctTopRight(u){let p=u[0],v=u[1],S=u[2],O=u[3],T=this.transitionsBetween(p,O),P=this.transitionsBetween(v,O),F=Cr.shiftPoint(p,v,(P+1)*4),j=Cr.shiftPoint(S,v,(T+1)*4);T=this.transitionsBetween(F,O),P=this.transitionsBetween(j,O);let Z=new fe(O.getX()+(S.getX()-v.getX())/(T+1),O.getY()+(S.getY()-v.getY())/(T+1)),re=new fe(O.getX()+(p.getX()-v.getX())/(P+1),O.getY()+(p.getY()-v.getY())/(P+1));if(!this.isValid(Z))return this.isValid(re)?re:null;if(!this.isValid(re))return Z;let ae=this.transitionsBetween(F,Z)+this.transitionsBetween(j,Z),ve=this.transitionsBetween(F,re)+this.transitionsBetween(j,re);return ae>ve?Z:re}shiftToModuleCenter(u){let p=u[0],v=u[1],S=u[2],O=u[3],T=this.transitionsBetween(p,O)+1,P=this.transitionsBetween(S,O)+1,F=Cr.shiftPoint(p,v,P*4),j=Cr.shiftPoint(S,v,T*4);T=this.transitionsBetween(F,O)+1,P=this.transitionsBetween(j,O)+1,(T&1)===1&&(T+=1),(P&1)===1&&(P+=1);let Z=(p.getX()+v.getX()+S.getX()+O.getX())/4,re=(p.getY()+v.getY()+S.getY()+O.getY())/4;p=Cr.moveAway(p,Z,re),v=Cr.moveAway(v,Z,re),S=Cr.moveAway(S,Z,re),O=Cr.moveAway(O,Z,re);let ae,ve;return F=Cr.shiftPoint(p,v,P*4),F=Cr.shiftPoint(F,O,T*4),ae=Cr.shiftPoint(v,p,P*4),ae=Cr.shiftPoint(ae,S,T*4),j=Cr.shiftPoint(S,O,P*4),j=Cr.shiftPoint(j,v,T*4),ve=Cr.shiftPoint(O,S,P*4),ve=Cr.shiftPoint(ve,p,T*4),[F,ae,j,ve]}isValid(u){return u.getX()>=0&&u.getX()<this.image.getWidth()&&u.getY()>0&&u.getY()<this.image.getHeight()}static sampleGrid(u,p,v,S,O,T,P){return Ye.getInstance().sampleGrid(u,T,P,.5,.5,T-.5,.5,T-.5,P-.5,.5,P-.5,p.getX(),p.getY(),O.getX(),O.getY(),S.getX(),S.getY(),v.getX(),v.getY())}transitionsBetween(u,p){let v=Math.trunc(u.getX()),S=Math.trunc(u.getY()),O=Math.trunc(p.getX()),T=Math.trunc(p.getY()),P=Math.abs(T-S)>Math.abs(O-v);if(P){let Be=v;v=S,S=Be,Be=O,O=T,T=Be}let F=Math.abs(O-v),j=Math.abs(T-S),Z=-F/2,re=S<T?1:-1,ae=v<O?1:-1,ve=0,Me=this.image.get(P?S:v,P?v:S);for(let Be=v,Ue=S;Be!==O;Be+=ae){let Qe=this.image.get(P?Ue:Be,P?Be:Ue);if(Qe!==Me&&(ve++,Me=Qe),Z+=j,Z>0){if(Ue===T)break;Ue+=re,Z-=F}}return ve}}class Mr{constructor(){this.decoder=new Xr}decode(u,p=null){let v,S;if(p!=null&&p.has(M.PURE_BARCODE)){const j=Mr.extractPureBits(u.getBlackMatrix());v=this.decoder.decode(j),S=Mr.NO_POINTS}else{const j=new Cr(u.getBlackMatrix()).detect();v=this.decoder.decode(j.getBits()),S=j.getPoints()}const O=v.getRawBytes(),T=new be(v.getText(),O,8*O.length,S,Ee.DATA_MATRIX,w.currentTimeMillis()),P=v.getByteSegments();P!=null&&T.putMetadata(ne.BYTE_SEGMENTS,P);const F=v.getECLevel();return F!=null&&T.putMetadata(ne.ERROR_CORRECTION_LEVEL,F),T}reset(){}static extractPureBits(u){const p=u.getTopLeftOnBit(),v=u.getBottomRightOnBit();if(p==null||v==null)throw new W;const S=this.moduleSize(p,u);let O=p[1];const T=v[1];let P=p[0];const j=(v[0]-P+1)/S,Z=(T-O+1)/S;if(j<=0||Z<=0)throw new W;const re=S/2;O+=re,P+=re;const ae=new z(j,Z);for(let ve=0;ve<Z;ve++){const Me=O+ve*S;for(let Be=0;Be<j;Be++)u.get(P+Be*S,Me)&&ae.set(Be,ve)}return ae}static moduleSize(u,p){const v=p.getWidth();let S=u[0];const O=u[1];for(;S<v&&p.get(S,O);)S++;if(S===v)throw new W;const T=S-u[0];if(T===0)throw new W;return T}}Mr.NO_POINTS=[];class li extends Se{constructor(u=500){super(new Mr,u)}}var Jr;(function(te){te[te.L=0]="L",te[te.M=1]="M",te[te.Q=2]="Q",te[te.H=3]="H"})(Jr||(Jr={}));class br{constructor(u,p,v){this.value=u,this.stringValue=p,this.bits=v,br.FOR_BITS.set(v,this),br.FOR_VALUE.set(u,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(u){switch(u){case"L":return br.L;case"M":return br.M;case"Q":return br.Q;case"H":return br.H;default:throw new f(u+"not available")}}toString(){return this.stringValue}equals(u){if(!(u instanceof br))return!1;const p=u;return this.value===p.value}static forBits(u){if(u<0||u>=br.FOR_BITS.size)throw new g;return br.FOR_BITS.get(u)}}br.FOR_BITS=new Map,br.FOR_VALUE=new Map,br.L=new br(Jr.L,"L",1),br.M=new br(Jr.M,"M",0),br.Q=new br(Jr.Q,"Q",3),br.H=new br(Jr.H,"H",2);class Pr{constructor(u){this.errorCorrectionLevel=br.forBits(u>>3&3),this.dataMask=u&7}static numBitsDiffering(u,p){return x.bitCount(u^p)}static decodeFormatInformation(u,p){const v=Pr.doDecodeFormatInformation(u,p);return v!==null?v:Pr.doDecodeFormatInformation(u^Pr.FORMAT_INFO_MASK_QR,p^Pr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(u,p){let v=Number.MAX_SAFE_INTEGER,S=0;for(const O of Pr.FORMAT_INFO_DECODE_LOOKUP){const T=O[0];if(T===u||T===p)return new Pr(O[1]);let P=Pr.numBitsDiffering(u,T);P<v&&(S=O[1],v=P),u!==p&&(P=Pr.numBitsDiffering(p,T),P<v&&(S=O[1],v=P))}return v<=3?new Pr(S):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(u){if(!(u instanceof Pr))return!1;const p=u;return this.errorCorrectionLevel===p.errorCorrectionLevel&&this.dataMask===p.dataMask}}Pr.FORMAT_INFO_MASK_QR=21522,Pr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class We{constructor(u,...p){this.ecCodewordsPerBlock=u,this.ecBlocks=p}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let u=0;const p=this.ecBlocks;for(const v of p)u+=v.getCount();return u}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ge{constructor(u,p){this.count=u,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class zt{constructor(u,p,...v){this.versionNumber=u,this.alignmentPatternCenters=p,this.ecBlocks=v;let S=0;const O=v[0].getECCodewordsPerBlock(),T=v[0].getECBlocks();for(const P of T)S+=P.getCount()*(P.getDataCodewords()+O);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(u){return this.ecBlocks[u.getValue()]}static getProvisionalVersionForDimension(u){if(u%4!==1)throw new L;try{return this.getVersionForNumber((u-17)/4)}catch{throw new L}}static getVersionForNumber(u){if(u<1||u>40)throw new g;return zt.VERSIONS[u-1]}static decodeVersionInformation(u){let p=Number.MAX_SAFE_INTEGER,v=0;for(let S=0;S<zt.VERSION_DECODE_INFO.length;S++){const O=zt.VERSION_DECODE_INFO[S];if(O===u)return zt.getVersionForNumber(S+7);const T=Pr.numBitsDiffering(u,O);T<p&&(v=S+7,p=T)}return p<=3?zt.getVersionForNumber(v):null}buildFunctionPattern(){const u=this.getDimensionForVersion(),p=new z(u);p.setRegion(0,0,9,9),p.setRegion(u-8,0,8,9),p.setRegion(0,u-8,9,8);const v=this.alignmentPatternCenters.length;for(let S=0;S<v;S++){const O=this.alignmentPatternCenters[S]-2;for(let T=0;T<v;T++)S===0&&(T===0||T===v-1)||S===v-1&&T===0||p.setRegion(this.alignmentPatternCenters[T]-2,O,5,5)}return p.setRegion(6,9,1,u-17),p.setRegion(9,6,u-17,1),this.versionNumber>6&&(p.setRegion(u-11,0,3,6),p.setRegion(0,u-11,6,3)),p}toString(){return""+this.versionNumber}}zt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),zt.VERSIONS=[new zt(1,new Int32Array(0),new We(7,new ge(1,19)),new We(10,new ge(1,16)),new We(13,new ge(1,13)),new We(17,new ge(1,9))),new zt(2,Int32Array.from([6,18]),new We(10,new ge(1,34)),new We(16,new ge(1,28)),new We(22,new ge(1,22)),new We(28,new ge(1,16))),new zt(3,Int32Array.from([6,22]),new We(15,new ge(1,55)),new We(26,new ge(1,44)),new We(18,new ge(2,17)),new We(22,new ge(2,13))),new zt(4,Int32Array.from([6,26]),new We(20,new ge(1,80)),new We(18,new ge(2,32)),new We(26,new ge(2,24)),new We(16,new ge(4,9))),new zt(5,Int32Array.from([6,30]),new We(26,new ge(1,108)),new We(24,new ge(2,43)),new We(18,new ge(2,15),new ge(2,16)),new We(22,new ge(2,11),new ge(2,12))),new zt(6,Int32Array.from([6,34]),new We(18,new ge(2,68)),new We(16,new ge(4,27)),new We(24,new ge(4,19)),new We(28,new ge(4,15))),new zt(7,Int32Array.from([6,22,38]),new We(20,new ge(2,78)),new We(18,new ge(4,31)),new We(18,new ge(2,14),new ge(4,15)),new We(26,new ge(4,13),new ge(1,14))),new zt(8,Int32Array.from([6,24,42]),new We(24,new ge(2,97)),new We(22,new ge(2,38),new ge(2,39)),new We(22,new ge(4,18),new ge(2,19)),new We(26,new ge(4,14),new ge(2,15))),new zt(9,Int32Array.from([6,26,46]),new We(30,new ge(2,116)),new We(22,new ge(3,36),new ge(2,37)),new We(20,new ge(4,16),new ge(4,17)),new We(24,new ge(4,12),new ge(4,13))),new zt(10,Int32Array.from([6,28,50]),new We(18,new ge(2,68),new ge(2,69)),new We(26,new ge(4,43),new ge(1,44)),new We(24,new ge(6,19),new ge(2,20)),new We(28,new ge(6,15),new ge(2,16))),new zt(11,Int32Array.from([6,30,54]),new We(20,new ge(4,81)),new We(30,new ge(1,50),new ge(4,51)),new We(28,new ge(4,22),new ge(4,23)),new We(24,new ge(3,12),new ge(8,13))),new zt(12,Int32Array.from([6,32,58]),new We(24,new ge(2,92),new ge(2,93)),new We(22,new ge(6,36),new ge(2,37)),new We(26,new ge(4,20),new ge(6,21)),new We(28,new ge(7,14),new ge(4,15))),new zt(13,Int32Array.from([6,34,62]),new We(26,new ge(4,107)),new We(22,new ge(8,37),new ge(1,38)),new We(24,new ge(8,20),new ge(4,21)),new We(22,new ge(12,11),new ge(4,12))),new zt(14,Int32Array.from([6,26,46,66]),new We(30,new ge(3,115),new ge(1,116)),new We(24,new ge(4,40),new ge(5,41)),new We(20,new ge(11,16),new ge(5,17)),new We(24,new ge(11,12),new ge(5,13))),new zt(15,Int32Array.from([6,26,48,70]),new We(22,new ge(5,87),new ge(1,88)),new We(24,new ge(5,41),new ge(5,42)),new We(30,new ge(5,24),new ge(7,25)),new We(24,new ge(11,12),new ge(7,13))),new zt(16,Int32Array.from([6,26,50,74]),new We(24,new ge(5,98),new ge(1,99)),new We(28,new ge(7,45),new ge(3,46)),new We(24,new ge(15,19),new ge(2,20)),new We(30,new ge(3,15),new ge(13,16))),new zt(17,Int32Array.from([6,30,54,78]),new We(28,new ge(1,107),new ge(5,108)),new We(28,new ge(10,46),new ge(1,47)),new We(28,new ge(1,22),new ge(15,23)),new We(28,new ge(2,14),new ge(17,15))),new zt(18,Int32Array.from([6,30,56,82]),new We(30,new ge(5,120),new ge(1,121)),new We(26,new ge(9,43),new ge(4,44)),new We(28,new ge(17,22),new ge(1,23)),new We(28,new ge(2,14),new ge(19,15))),new zt(19,Int32Array.from([6,30,58,86]),new We(28,new ge(3,113),new ge(4,114)),new We(26,new ge(3,44),new ge(11,45)),new We(26,new ge(17,21),new ge(4,22)),new We(26,new ge(9,13),new ge(16,14))),new zt(20,Int32Array.from([6,34,62,90]),new We(28,new ge(3,107),new ge(5,108)),new We(26,new ge(3,41),new ge(13,42)),new We(30,new ge(15,24),new ge(5,25)),new We(28,new ge(15,15),new ge(10,16))),new zt(21,Int32Array.from([6,28,50,72,94]),new We(28,new ge(4,116),new ge(4,117)),new We(26,new ge(17,42)),new We(28,new ge(17,22),new ge(6,23)),new We(30,new ge(19,16),new ge(6,17))),new zt(22,Int32Array.from([6,26,50,74,98]),new We(28,new ge(2,111),new ge(7,112)),new We(28,new ge(17,46)),new We(30,new ge(7,24),new ge(16,25)),new We(24,new ge(34,13))),new zt(23,Int32Array.from([6,30,54,78,102]),new We(30,new ge(4,121),new ge(5,122)),new We(28,new ge(4,47),new ge(14,48)),new We(30,new ge(11,24),new ge(14,25)),new We(30,new ge(16,15),new ge(14,16))),new zt(24,Int32Array.from([6,28,54,80,106]),new We(30,new ge(6,117),new ge(4,118)),new We(28,new ge(6,45),new ge(14,46)),new We(30,new ge(11,24),new ge(16,25)),new We(30,new ge(30,16),new ge(2,17))),new zt(25,Int32Array.from([6,32,58,84,110]),new We(26,new ge(8,106),new ge(4,107)),new We(28,new ge(8,47),new ge(13,48)),new We(30,new ge(7,24),new ge(22,25)),new We(30,new ge(22,15),new ge(13,16))),new zt(26,Int32Array.from([6,30,58,86,114]),new We(28,new ge(10,114),new ge(2,115)),new We(28,new ge(19,46),new ge(4,47)),new We(28,new ge(28,22),new ge(6,23)),new We(30,new ge(33,16),new ge(4,17))),new zt(27,Int32Array.from([6,34,62,90,118]),new We(30,new ge(8,122),new ge(4,123)),new We(28,new ge(22,45),new ge(3,46)),new We(30,new ge(8,23),new ge(26,24)),new We(30,new ge(12,15),new ge(28,16))),new zt(28,Int32Array.from([6,26,50,74,98,122]),new We(30,new ge(3,117),new ge(10,118)),new We(28,new ge(3,45),new ge(23,46)),new We(30,new ge(4,24),new ge(31,25)),new We(30,new ge(11,15),new ge(31,16))),new zt(29,Int32Array.from([6,30,54,78,102,126]),new We(30,new ge(7,116),new ge(7,117)),new We(28,new ge(21,45),new ge(7,46)),new We(30,new ge(1,23),new ge(37,24)),new We(30,new ge(19,15),new ge(26,16))),new zt(30,Int32Array.from([6,26,52,78,104,130]),new We(30,new ge(5,115),new ge(10,116)),new We(28,new ge(19,47),new ge(10,48)),new We(30,new ge(15,24),new ge(25,25)),new We(30,new ge(23,15),new ge(25,16))),new zt(31,Int32Array.from([6,30,56,82,108,134]),new We(30,new ge(13,115),new ge(3,116)),new We(28,new ge(2,46),new ge(29,47)),new We(30,new ge(42,24),new ge(1,25)),new We(30,new ge(23,15),new ge(28,16))),new zt(32,Int32Array.from([6,34,60,86,112,138]),new We(30,new ge(17,115)),new We(28,new ge(10,46),new ge(23,47)),new We(30,new ge(10,24),new ge(35,25)),new We(30,new ge(19,15),new ge(35,16))),new zt(33,Int32Array.from([6,30,58,86,114,142]),new We(30,new ge(17,115),new ge(1,116)),new We(28,new ge(14,46),new ge(21,47)),new We(30,new ge(29,24),new ge(19,25)),new We(30,new ge(11,15),new ge(46,16))),new zt(34,Int32Array.from([6,34,62,90,118,146]),new We(30,new ge(13,115),new ge(6,116)),new We(28,new ge(14,46),new ge(23,47)),new We(30,new ge(44,24),new ge(7,25)),new We(30,new ge(59,16),new ge(1,17))),new zt(35,Int32Array.from([6,30,54,78,102,126,150]),new We(30,new ge(12,121),new ge(7,122)),new We(28,new ge(12,47),new ge(26,48)),new We(30,new ge(39,24),new ge(14,25)),new We(30,new ge(22,15),new ge(41,16))),new zt(36,Int32Array.from([6,24,50,76,102,128,154]),new We(30,new ge(6,121),new ge(14,122)),new We(28,new ge(6,47),new ge(34,48)),new We(30,new ge(46,24),new ge(10,25)),new We(30,new ge(2,15),new ge(64,16))),new zt(37,Int32Array.from([6,28,54,80,106,132,158]),new We(30,new ge(17,122),new ge(4,123)),new We(28,new ge(29,46),new ge(14,47)),new We(30,new ge(49,24),new ge(10,25)),new We(30,new ge(24,15),new ge(46,16))),new zt(38,Int32Array.from([6,32,58,84,110,136,162]),new We(30,new ge(4,122),new ge(18,123)),new We(28,new ge(13,46),new ge(32,47)),new We(30,new ge(48,24),new ge(14,25)),new We(30,new ge(42,15),new ge(32,16))),new zt(39,Int32Array.from([6,26,54,82,110,138,166]),new We(30,new ge(20,117),new ge(4,118)),new We(28,new ge(40,47),new ge(7,48)),new We(30,new ge(43,24),new ge(22,25)),new We(30,new ge(10,15),new ge(67,16))),new zt(40,Int32Array.from([6,30,58,86,114,142,170]),new We(30,new ge(19,118),new ge(6,119)),new We(28,new ge(18,47),new ge(31,48)),new We(30,new ge(34,24),new ge(34,25)),new We(30,new ge(20,15),new ge(61,16)))];var Ir;(function(te){te[te.DATA_MASK_000=0]="DATA_MASK_000",te[te.DATA_MASK_001=1]="DATA_MASK_001",te[te.DATA_MASK_010=2]="DATA_MASK_010",te[te.DATA_MASK_011=3]="DATA_MASK_011",te[te.DATA_MASK_100=4]="DATA_MASK_100",te[te.DATA_MASK_101=5]="DATA_MASK_101",te[te.DATA_MASK_110=6]="DATA_MASK_110",te[te.DATA_MASK_111=7]="DATA_MASK_111"})(Ir||(Ir={}));class Zr{constructor(u,p){this.value=u,this.isMasked=p}unmaskBitMatrix(u,p){for(let v=0;v<p;v++)for(let S=0;S<p;S++)this.isMasked(v,S)&&u.flip(S,v)}}Zr.values=new Map([[Ir.DATA_MASK_000,new Zr(Ir.DATA_MASK_000,(te,u)=>(te+u&1)===0)],[Ir.DATA_MASK_001,new Zr(Ir.DATA_MASK_001,(te,u)=>(te&1)===0)],[Ir.DATA_MASK_010,new Zr(Ir.DATA_MASK_010,(te,u)=>u%3===0)],[Ir.DATA_MASK_011,new Zr(Ir.DATA_MASK_011,(te,u)=>(te+u)%3===0)],[Ir.DATA_MASK_100,new Zr(Ir.DATA_MASK_100,(te,u)=>(Math.floor(te/2)+Math.floor(u/3)&1)===0)],[Ir.DATA_MASK_101,new Zr(Ir.DATA_MASK_101,(te,u)=>te*u%6===0)],[Ir.DATA_MASK_110,new Zr(Ir.DATA_MASK_110,(te,u)=>te*u%6<3)],[Ir.DATA_MASK_111,new Zr(Ir.DATA_MASK_111,(te,u)=>(te+u+te*u%3&1)===0)]]);class Yi{constructor(u){const p=u.getHeight();if(p<21||(p&3)!==1)throw new L;this.bitMatrix=u}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let u=0;for(let O=0;O<6;O++)u=this.copyBit(O,8,u);u=this.copyBit(7,8,u),u=this.copyBit(8,8,u),u=this.copyBit(8,7,u);for(let O=5;O>=0;O--)u=this.copyBit(8,O,u);const p=this.bitMatrix.getHeight();let v=0;const S=p-7;for(let O=p-1;O>=S;O--)v=this.copyBit(8,O,v);for(let O=p-8;O<p;O++)v=this.copyBit(O,8,v);if(this.parsedFormatInfo=Pr.decodeFormatInformation(u,v),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const u=this.bitMatrix.getHeight(),p=Math.floor((u-17)/4);if(p<=6)return zt.getVersionForNumber(p);let v=0;const S=u-11;for(let T=5;T>=0;T--)for(let P=u-9;P>=S;P--)v=this.copyBit(P,T,v);let O=zt.decodeVersionInformation(v);if(O!==null&&O.getDimensionForVersion()===u)return this.parsedVersion=O,O;v=0;for(let T=5;T>=0;T--)for(let P=u-9;P>=S;P--)v=this.copyBit(T,P,v);if(O=zt.decodeVersionInformation(v),O!==null&&O.getDimensionForVersion()===u)return this.parsedVersion=O,O;throw new L}copyBit(u,p,v){return(this.isMirror?this.bitMatrix.get(p,u):this.bitMatrix.get(u,p))?v<<1|1:v<<1}readCodewords(){const u=this.readFormatInformation(),p=this.readVersion(),v=Zr.values.get(u.getDataMask()),S=this.bitMatrix.getHeight();v.unmaskBitMatrix(this.bitMatrix,S);const O=p.buildFunctionPattern();let T=!0;const P=new Uint8Array(p.getTotalCodewords());let F=0,j=0,Z=0;for(let re=S-1;re>0;re-=2){re===6&&re--;for(let ae=0;ae<S;ae++){const ve=T?S-1-ae:ae;for(let Me=0;Me<2;Me++)O.get(re-Me,ve)||(Z++,j<<=1,this.bitMatrix.get(re-Me,ve)&&(j|=1),Z===8&&(P[F++]=j,Z=0,j=0))}T=!T}if(F!==p.getTotalCodewords())throw new L;return P}remask(){if(this.parsedFormatInfo===null)return;const u=Zr.values[this.parsedFormatInfo.getDataMask()],p=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,p)}setMirror(u){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=u}mirror(){const u=this.bitMatrix;for(let p=0,v=u.getWidth();p<v;p++)for(let S=p+1,O=u.getHeight();S<O;S++)u.get(p,S)!==u.get(S,p)&&(u.flip(S,p),u.flip(p,S))}}class bi{constructor(u,p){this.numDataCodewords=u,this.codewords=p}static getDataBlocks(u,p,v){if(u.length!==p.getTotalCodewords())throw new g;const S=p.getECBlocksForLevel(v);let O=0;const T=S.getECBlocks();for(const Me of T)O+=Me.getCount();const P=new Array(O);let F=0;for(const Me of T)for(let Be=0;Be<Me.getCount();Be++){const Ue=Me.getDataCodewords(),Qe=S.getECCodewordsPerBlock()+Ue;P[F++]=new bi(Ue,new Uint8Array(Qe))}const j=P[0].codewords.length;let Z=P.length-1;for(;Z>=0&&P[Z].codewords.length!==j;)Z--;Z++;const re=j-S.getECCodewordsPerBlock();let ae=0;for(let Me=0;Me<re;Me++)for(let Be=0;Be<F;Be++)P[Be].codewords[Me]=u[ae++];for(let Me=Z;Me<F;Me++)P[Me].codewords[re]=u[ae++];const ve=P[0].codewords.length;for(let Me=re;Me<ve;Me++)for(let Be=0;Be<F;Be++){const Ue=Be<Z?Me:Me+1;P[Be].codewords[Ue]=u[ae++]}return P}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ei;(function(te){te[te.TERMINATOR=0]="TERMINATOR",te[te.NUMERIC=1]="NUMERIC",te[te.ALPHANUMERIC=2]="ALPHANUMERIC",te[te.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",te[te.BYTE=4]="BYTE",te[te.ECI=5]="ECI",te[te.KANJI=6]="KANJI",te[te.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",te[te.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",te[te.HANZI=9]="HANZI"})(ei||(ei={}));class jt{constructor(u,p,v,S){this.value=u,this.stringValue=p,this.characterCountBitsForVersions=v,this.bits=S,jt.FOR_BITS.set(S,this),jt.FOR_VALUE.set(u,this)}static forBits(u){const p=jt.FOR_BITS.get(u);if(p===void 0)throw new g;return p}getCharacterCountBits(u){const p=u.getVersionNumber();let v;return p<=9?v=0:p<=26?v=1:v=2,this.characterCountBitsForVersions[v]}getValue(){return this.value}getBits(){return this.bits}equals(u){if(!(u instanceof jt))return!1;const p=u;return this.value===p.value}toString(){return this.stringValue}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.TERMINATOR=new jt(ei.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),jt.NUMERIC=new jt(ei.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),jt.ALPHANUMERIC=new jt(ei.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),jt.STRUCTURED_APPEND=new jt(ei.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),jt.BYTE=new jt(ei.BYTE,"BYTE",Int32Array.from([8,16,16]),4),jt.ECI=new jt(ei.ECI,"ECI",Int32Array.from([0,0,0]),7),jt.KANJI=new jt(ei.KANJI,"KANJI",Int32Array.from([8,10,12]),8),jt.FNC1_FIRST_POSITION=new jt(ei.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),jt.FNC1_SECOND_POSITION=new jt(ei.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),jt.HANZI=new jt(ei.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Or{static decode(u,p,v,S){const O=new Yr(u);let T=new H;const P=new Array;let F=-1,j=-1;try{let Z=null,re=!1,ae;do{if(O.available()<4)ae=jt.TERMINATOR;else{const ve=O.readBits(4);ae=jt.forBits(ve)}switch(ae){case jt.TERMINATOR:break;case jt.FNC1_FIRST_POSITION:case jt.FNC1_SECOND_POSITION:re=!0;break;case jt.STRUCTURED_APPEND:if(O.available()<16)throw new L;F=O.readBits(8),j=O.readBits(8);break;case jt.ECI:const ve=Or.parseECIValue(O);if(Z=I.getCharacterSetECIByValue(ve),Z===null)throw new L;break;case jt.HANZI:const Me=O.readBits(4),Be=O.readBits(ae.getCharacterCountBits(p));Me===Or.GB2312_SUBSET&&Or.decodeHanziSegment(O,T,Be);break;default:const Ue=O.readBits(ae.getCharacterCountBits(p));switch(ae){case jt.NUMERIC:Or.decodeNumericSegment(O,T,Ue);break;case jt.ALPHANUMERIC:Or.decodeAlphanumericSegment(O,T,Ue,re);break;case jt.BYTE:Or.decodeByteSegment(O,T,Ue,Z,P,S);break;case jt.KANJI:Or.decodeKanjiSegment(O,T,Ue);break;default:throw new L}break}}while(ae!==jt.TERMINATOR)}catch{throw new L}return new de(u,T.toString(),P.length===0?null:P,v===null?null:v.toString(),F,j)}static decodeHanziSegment(u,p,v){if(v*13>u.available())throw new L;const S=new Uint8Array(2*v);let O=0;for(;v>0;){const T=u.readBits(13);let P=T/96<<8&4294967295|T%96;P<959?P+=41377:P+=42657,S[O]=P>>8&255,S[O+1]=P&255,O+=2,v--}try{p.append(N.decode(S,B.GB2312))}catch(T){throw new L(T)}}static decodeKanjiSegment(u,p,v){if(v*13>u.available())throw new L;const S=new Uint8Array(2*v);let O=0;for(;v>0;){const T=u.readBits(13);let P=T/192<<8&4294967295|T%192;P<7936?P+=33088:P+=49472,S[O]=P>>8,S[O+1]=P,O+=2,v--}try{p.append(N.decode(S,B.SHIFT_JIS))}catch(T){throw new L(T)}}static decodeByteSegment(u,p,v,S,O,T){if(8*v>u.available())throw new L;const P=new Uint8Array(v);for(let j=0;j<v;j++)P[j]=u.readBits(8);let F;S===null?F=B.guessEncoding(P,T):F=S.getName();try{p.append(N.decode(P,F))}catch(j){throw new L(j)}O.push(P)}static toAlphaNumericChar(u){if(u>=Or.ALPHANUMERIC_CHARS.length)throw new L;return Or.ALPHANUMERIC_CHARS[u]}static decodeAlphanumericSegment(u,p,v,S){const O=p.length();for(;v>1;){if(u.available()<11)throw new L;const T=u.readBits(11);p.append(Or.toAlphaNumericChar(Math.floor(T/45))),p.append(Or.toAlphaNumericChar(T%45)),v-=2}if(v===1){if(u.available()<6)throw new L;p.append(Or.toAlphaNumericChar(u.readBits(6)))}if(S)for(let T=O;T<p.length();T++)p.charAt(T)==="%"&&(T<p.length()-1&&p.charAt(T+1)==="%"?p.deleteCharAt(T+1):p.setCharAt(T,""))}static decodeNumericSegment(u,p,v){for(;v>=3;){if(u.available()<10)throw new L;const S=u.readBits(10);if(S>=1e3)throw new L;p.append(Or.toAlphaNumericChar(Math.floor(S/100))),p.append(Or.toAlphaNumericChar(Math.floor(S/10)%10)),p.append(Or.toAlphaNumericChar(S%10)),v-=3}if(v===2){if(u.available()<7)throw new L;const S=u.readBits(7);if(S>=100)throw new L;p.append(Or.toAlphaNumericChar(Math.floor(S/10))),p.append(Or.toAlphaNumericChar(S%10))}else if(v===1){if(u.available()<4)throw new L;const S=u.readBits(4);if(S>=10)throw new L;p.append(Or.toAlphaNumericChar(S))}}static parseECIValue(u){const p=u.readBits(8);if(!(p&128))return p&127;if((p&192)===128){const v=u.readBits(8);return(p&63)<<8&4294967295|v}if((p&224)===192){const v=u.readBits(16);return(p&31)<<16&4294967295|v}throw new L}}Or.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Or.GB2312_SUBSET=1;class yi{constructor(u){this.mirrored=u}isMirrored(){return this.mirrored}applyMirroredCorrection(u){if(!this.mirrored||u===null||u.length<3)return;const p=u[0];u[0]=u[2],u[2]=p}}class Xi{constructor(){this.rsDecoder=new Le(ye.QR_CODE_FIELD_256)}decodeBooleanArray(u,p){return this.decodeBitMatrix(z.parseFromBooleanArray(u),p)}decodeBitMatrix(u,p){const v=new Yi(u);let S=null;try{return this.decodeBitMatrixParser(v,p)}catch(O){S=O}try{v.remask(),v.setMirror(!0),v.readVersion(),v.readFormatInformation(),v.mirror();const O=this.decodeBitMatrixParser(v,p);return O.setOther(new yi(!0)),O}catch(O){throw S!==null?S:O}}decodeBitMatrixParser(u,p){const v=u.readVersion(),S=u.readFormatInformation().getErrorCorrectionLevel(),O=u.readCodewords(),T=bi.getDataBlocks(O,v,S);let P=0;for(const Z of T)P+=Z.getNumDataCodewords();const F=new Uint8Array(P);let j=0;for(const Z of T){const re=Z.getCodewords(),ae=Z.getNumDataCodewords();this.correctErrors(re,ae);for(let ve=0;ve<ae;ve++)F[j++]=re[ve]}return Or.decode(F,v,S,p)}correctErrors(u,p){const v=new Int32Array(u);try{this.rsDecoder.decode(v,u.length-p)}catch{throw new E}for(let S=0;S<p;S++)u[S]=v[S]}}class Ri extends fe{constructor(u,p,v){super(u,p),this.estimatedModuleSize=v}aboutEquals(u,p,v){if(Math.abs(p-this.getY())<=u&&Math.abs(v-this.getX())<=u){const S=Math.abs(u-this.estimatedModuleSize);return S<=1||S<=this.estimatedModuleSize}return!1}combineEstimate(u,p,v){const S=(this.getX()+p)/2,O=(this.getY()+u)/2,T=(this.estimatedModuleSize+v)/2;return new Ri(S,O,T)}}class Mi{constructor(u,p,v,S,O,T,P){this.image=u,this.startX=p,this.startY=v,this.width=S,this.height=O,this.moduleSize=T,this.resultPointCallback=P,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const u=this.startX,p=this.height,v=this.width,S=u+v,O=this.startY+p/2,T=new Int32Array(3),P=this.image;for(let F=0;F<p;F++){const j=O+(F&1?-Math.floor((F+1)/2):Math.floor((F+1)/2));T[0]=0,T[1]=0,T[2]=0;let Z=u;for(;Z<S&&!P.get(Z,j);)Z++;let re=0;for(;Z<S;){if(P.get(Z,j))if(re===1)T[1]++;else if(re===2){if(this.foundPatternCross(T)){const ae=this.handlePossibleCenter(T,j,Z);if(ae!==null)return ae}T[0]=T[2],T[1]=1,T[2]=0,re=1}else T[++re]++;else re===1&&re++,T[re]++;Z++}if(this.foundPatternCross(T)){const ae=this.handlePossibleCenter(T,j,S);if(ae!==null)return ae}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(u,p){return p-u[2]-u[1]/2}foundPatternCross(u){const p=this.moduleSize,v=p/2;for(let S=0;S<3;S++)if(Math.abs(p-u[S])>=v)return!1;return!0}crossCheckVertical(u,p,v,S){const O=this.image,T=O.getHeight(),P=this.crossCheckStateCount;P[0]=0,P[1]=0,P[2]=0;let F=u;for(;F>=0&&O.get(p,F)&&P[1]<=v;)P[1]++,F--;if(F<0||P[1]>v)return NaN;for(;F>=0&&!O.get(p,F)&&P[0]<=v;)P[0]++,F--;if(P[0]>v)return NaN;for(F=u+1;F<T&&O.get(p,F)&&P[1]<=v;)P[1]++,F++;if(F===T||P[1]>v)return NaN;for(;F<T&&!O.get(p,F)&&P[2]<=v;)P[2]++,F++;if(P[2]>v)return NaN;const j=P[0]+P[1]+P[2];return 5*Math.abs(j-S)>=2*S?NaN:this.foundPatternCross(P)?Mi.centerFromEnd(P,F):NaN}handlePossibleCenter(u,p,v){const S=u[0]+u[1]+u[2],O=Mi.centerFromEnd(u,v),T=this.crossCheckVertical(p,O,2*u[1],S);if(!isNaN(T)){const P=(u[0]+u[1]+u[2])/3;for(const j of this.possibleCenters)if(j.aboutEquals(P,T,O))return j.combineEstimate(T,O,P);const F=new Ri(O,T,P);this.possibleCenters.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return null}}class xi extends fe{constructor(u,p,v,S){super(u,p),this.estimatedModuleSize=v,this.count=S,S===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(u,p,v){if(Math.abs(p-this.getY())<=u&&Math.abs(v-this.getX())<=u){const S=Math.abs(u-this.estimatedModuleSize);return S<=1||S<=this.estimatedModuleSize}return!1}combineEstimate(u,p,v){const S=this.count+1,O=(this.count*this.getX()+p)/S,T=(this.count*this.getY()+u)/S,P=(this.count*this.estimatedModuleSize+v)/S;return new xi(O,T,P,S)}}class Zi{constructor(u){this.bottomLeft=u[0],this.topLeft=u[1],this.topRight=u[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Br{constructor(u,p){this.image=u,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=p}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(u){const p=u!=null&&u.get(M.TRY_HARDER)!==void 0,v=u!=null&&u.get(M.PURE_BARCODE)!==void 0,S=this.image,O=S.getHeight(),T=S.getWidth();let P=Math.floor(3*O/(4*Br.MAX_MODULES));(P<Br.MIN_SKIP||p)&&(P=Br.MIN_SKIP);let F=!1;const j=new Int32Array(5);for(let re=P-1;re<O&&!F;re+=P){j[0]=0,j[1]=0,j[2]=0,j[3]=0,j[4]=0;let ae=0;for(let ve=0;ve<T;ve++)if(S.get(ve,re))(ae&1)===1&&ae++,j[ae]++;else if(ae&1)j[ae]++;else if(ae===4)if(Br.foundPatternCross(j)){if(this.handlePossibleCenter(j,re,ve,v)===!0)if(P=2,this.hasSkipped===!0)F=this.haveMultiplyConfirmedCenters();else{const Be=this.findRowSkip();Be>j[2]&&(re+=Be-j[2]-P,ve=T-1)}else{j[0]=j[2],j[1]=j[3],j[2]=j[4],j[3]=1,j[4]=0,ae=3;continue}ae=0,j[0]=0,j[1]=0,j[2]=0,j[3]=0,j[4]=0}else j[0]=j[2],j[1]=j[3],j[2]=j[4],j[3]=1,j[4]=0,ae=3;else j[++ae]++;Br.foundPatternCross(j)&&this.handlePossibleCenter(j,re,T,v)===!0&&(P=j[0],this.hasSkipped&&(F=this.haveMultiplyConfirmedCenters()))}const Z=this.selectBestPatterns();return fe.orderBestPatterns(Z),new Zi(Z)}static centerFromEnd(u,p){return p-u[4]-u[3]-u[2]/2}static foundPatternCross(u){let p=0;for(let O=0;O<5;O++){const T=u[O];if(T===0)return!1;p+=T}if(p<7)return!1;const v=p/7,S=v/2;return Math.abs(v-u[0])<S&&Math.abs(v-u[1])<S&&Math.abs(3*v-u[2])<3*S&&Math.abs(v-u[3])<S&&Math.abs(v-u[4])<S}getCrossCheckStateCount(){const u=this.crossCheckStateCount;return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u}crossCheckDiagonal(u,p,v,S){const O=this.getCrossCheckStateCount();let T=0;const P=this.image;for(;u>=T&&p>=T&&P.get(p-T,u-T);)O[2]++,T++;if(u<T||p<T)return!1;for(;u>=T&&p>=T&&!P.get(p-T,u-T)&&O[1]<=v;)O[1]++,T++;if(u<T||p<T||O[1]>v)return!1;for(;u>=T&&p>=T&&P.get(p-T,u-T)&&O[0]<=v;)O[0]++,T++;if(O[0]>v)return!1;const F=P.getHeight(),j=P.getWidth();for(T=1;u+T<F&&p+T<j&&P.get(p+T,u+T);)O[2]++,T++;if(u+T>=F||p+T>=j)return!1;for(;u+T<F&&p+T<j&&!P.get(p+T,u+T)&&O[3]<v;)O[3]++,T++;if(u+T>=F||p+T>=j||O[3]>=v)return!1;for(;u+T<F&&p+T<j&&P.get(p+T,u+T)&&O[4]<v;)O[4]++,T++;if(O[4]>=v)return!1;const Z=O[0]+O[1]+O[2]+O[3]+O[4];return Math.abs(Z-S)<2*S&&Br.foundPatternCross(O)}crossCheckVertical(u,p,v,S){const O=this.image,T=O.getHeight(),P=this.getCrossCheckStateCount();let F=u;for(;F>=0&&O.get(p,F);)P[2]++,F--;if(F<0)return NaN;for(;F>=0&&!O.get(p,F)&&P[1]<=v;)P[1]++,F--;if(F<0||P[1]>v)return NaN;for(;F>=0&&O.get(p,F)&&P[0]<=v;)P[0]++,F--;if(P[0]>v)return NaN;for(F=u+1;F<T&&O.get(p,F);)P[2]++,F++;if(F===T)return NaN;for(;F<T&&!O.get(p,F)&&P[3]<v;)P[3]++,F++;if(F===T||P[3]>=v)return NaN;for(;F<T&&O.get(p,F)&&P[4]<v;)P[4]++,F++;if(P[4]>=v)return NaN;const j=P[0]+P[1]+P[2]+P[3]+P[4];return 5*Math.abs(j-S)>=2*S?NaN:Br.foundPatternCross(P)?Br.centerFromEnd(P,F):NaN}crossCheckHorizontal(u,p,v,S){const O=this.image,T=O.getWidth(),P=this.getCrossCheckStateCount();let F=u;for(;F>=0&&O.get(F,p);)P[2]++,F--;if(F<0)return NaN;for(;F>=0&&!O.get(F,p)&&P[1]<=v;)P[1]++,F--;if(F<0||P[1]>v)return NaN;for(;F>=0&&O.get(F,p)&&P[0]<=v;)P[0]++,F--;if(P[0]>v)return NaN;for(F=u+1;F<T&&O.get(F,p);)P[2]++,F++;if(F===T)return NaN;for(;F<T&&!O.get(F,p)&&P[3]<v;)P[3]++,F++;if(F===T||P[3]>=v)return NaN;for(;F<T&&O.get(F,p)&&P[4]<v;)P[4]++,F++;if(P[4]>=v)return NaN;const j=P[0]+P[1]+P[2]+P[3]+P[4];return 5*Math.abs(j-S)>=S?NaN:Br.foundPatternCross(P)?Br.centerFromEnd(P,F):NaN}handlePossibleCenter(u,p,v,S){const O=u[0]+u[1]+u[2]+u[3]+u[4];let T=Br.centerFromEnd(u,v),P=this.crossCheckVertical(p,Math.floor(T),u[2],O);if(!isNaN(P)&&(T=this.crossCheckHorizontal(Math.floor(T),Math.floor(P),u[2],O),!isNaN(T)&&(!S||this.crossCheckDiagonal(Math.floor(P),Math.floor(T),u[2],O)))){const F=O/7;let j=!1;const Z=this.possibleCenters;for(let re=0,ae=Z.length;re<ae;re++){const ve=Z[re];if(ve.aboutEquals(F,P,T)){Z[re]=ve.combineEstimate(P,T,F),j=!0;break}}if(!j){const re=new xi(T,P,F);Z.push(re),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(re)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let p=null;for(const v of this.possibleCenters)if(v.getCount()>=Br.CENTER_QUORUM)if(p==null)p=v;else return this.hasSkipped=!0,Math.floor((Math.abs(p.getX()-v.getX())-Math.abs(p.getY()-v.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let u=0,p=0;const v=this.possibleCenters.length;for(const T of this.possibleCenters)T.getCount()>=Br.CENTER_QUORUM&&(u++,p+=T.getEstimatedModuleSize());if(u<3)return!1;const S=p/v;let O=0;for(const T of this.possibleCenters)O+=Math.abs(T.getEstimatedModuleSize()-S);return O<=.05*p}selectBestPatterns(){const u=this.possibleCenters.length;if(u<3)throw new W;const p=this.possibleCenters;let v;if(u>3){let S=0,O=0;for(const F of this.possibleCenters){const j=F.getEstimatedModuleSize();S+=j,O+=j*j}v=S/u;let T=Math.sqrt(O/u-v*v);p.sort((F,j)=>{const Z=Math.abs(j.getEstimatedModuleSize()-v),re=Math.abs(F.getEstimatedModuleSize()-v);return Z<re?-1:Z>re?1:0});const P=Math.max(.2*v,T);for(let F=0;F<p.length&&p.length>3;F++){const j=p[F];Math.abs(j.getEstimatedModuleSize()-v)>P&&(p.splice(F,1),F--)}}if(p.length>3){let S=0;for(const O of p)S+=O.getEstimatedModuleSize();v=S/p.length,p.sort((O,T)=>{if(T.getCount()===O.getCount()){const P=Math.abs(T.getEstimatedModuleSize()-v),F=Math.abs(O.getEstimatedModuleSize()-v);return P<F?1:P>F?-1:0}else return T.getCount()-O.getCount()}),p.splice(3)}return[p[0],p[1],p[2]]}}Br.CENTER_QUORUM=2,Br.MIN_SKIP=3,Br.MAX_MODULES=57;class Ei{constructor(u){this.image=u}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(u){this.resultPointCallback=u==null?null:u.get(M.NEED_RESULT_POINT_CALLBACK);const v=new Br(this.image,this.resultPointCallback).find(u);return this.processFinderPatternInfo(v)}processFinderPatternInfo(u){const p=u.getTopLeft(),v=u.getTopRight(),S=u.getBottomLeft(),O=this.calculateModuleSize(p,v,S);if(O<1)throw new W("No pattern found in proccess finder.");const T=Ei.computeDimension(p,v,S,O),P=zt.getProvisionalVersionForDimension(T),F=P.getDimensionForVersion()-7;let j=null;if(P.getAlignmentPatternCenters().length>0){const ve=v.getX()-p.getX()+S.getX(),Me=v.getY()-p.getY()+S.getY(),Be=1-3/F,Ue=Math.floor(p.getX()+Be*(ve-p.getX())),Qe=Math.floor(p.getY()+Be*(Me-p.getY()));for(let xt=4;xt<=16;xt<<=1)try{j=this.findAlignmentInRegion(O,Ue,Qe,xt);break}catch(wt){if(!(wt instanceof W))throw wt}}const Z=Ei.createTransform(p,v,S,j,T),re=Ei.sampleGrid(this.image,Z,T);let ae;return j===null?ae=[S,p,v]:ae=[S,p,v,j],new Ne(re,ae)}static createTransform(u,p,v,S,O){const T=O-3.5;let P,F,j,Z;return S!==null?(P=S.getX(),F=S.getY(),j=T-3,Z=j):(P=p.getX()-u.getX()+v.getX(),F=p.getY()-u.getY()+v.getY(),j=T,Z=T),Pe.quadrilateralToQuadrilateral(3.5,3.5,T,3.5,j,Z,3.5,T,u.getX(),u.getY(),p.getX(),p.getY(),P,F,v.getX(),v.getY())}static sampleGrid(u,p,v){return Ye.getInstance().sampleGridWithTransform(u,v,v,p)}static computeDimension(u,p,v,S){const O=Ze.round(fe.distance(u,p)/S),T=Ze.round(fe.distance(u,v)/S);let P=Math.floor((O+T)/2)+7;switch(P&3){case 0:P++;break;case 2:P--;break;case 3:throw new W("Dimensions could be not found.")}return P}calculateModuleSize(u,p,v){return(this.calculateModuleSizeOneWay(u,p)+this.calculateModuleSizeOneWay(u,v))/2}calculateModuleSizeOneWay(u,p){const v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(p.getX()),Math.floor(p.getY())),S=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(u.getX()),Math.floor(u.getY()));return isNaN(v)?S/7:isNaN(S)?v/7:(v+S)/14}sizeOfBlackWhiteBlackRunBothWays(u,p,v,S){let O=this.sizeOfBlackWhiteBlackRun(u,p,v,S),T=1,P=u-(v-u);P<0?(T=u/(u-P),P=0):P>=this.image.getWidth()&&(T=(this.image.getWidth()-1-u)/(P-u),P=this.image.getWidth()-1);let F=Math.floor(p-(S-p)*T);return T=1,F<0?(T=p/(p-F),F=0):F>=this.image.getHeight()&&(T=(this.image.getHeight()-1-p)/(F-p),F=this.image.getHeight()-1),P=Math.floor(u+(P-u)*T),O+=this.sizeOfBlackWhiteBlackRun(u,p,P,F),O-1}sizeOfBlackWhiteBlackRun(u,p,v,S){const O=Math.abs(S-p)>Math.abs(v-u);if(O){let ve=u;u=p,p=ve,ve=v,v=S,S=ve}const T=Math.abs(v-u),P=Math.abs(S-p);let F=-T/2;const j=u<v?1:-1,Z=p<S?1:-1;let re=0;const ae=v+j;for(let ve=u,Me=p;ve!==ae;ve+=j){const Be=O?Me:ve,Ue=O?ve:Me;if(re===1===this.image.get(Be,Ue)){if(re===2)return Ze.distance(ve,Me,u,p);re++}if(F+=P,F>0){if(Me===S)break;Me+=Z,F-=T}}return re===2?Ze.distance(v+j,S,u,p):NaN}findAlignmentInRegion(u,p,v,S){const O=Math.floor(S*u),T=Math.max(0,p-O),P=Math.min(this.image.getWidth()-1,p+O);if(P-T<u*3)throw new W("Alignment top exceeds estimated module size.");const F=Math.max(0,v-O),j=Math.min(this.image.getHeight()-1,v+O);if(j-F<u*3)throw new W("Alignment bottom exceeds estimated module size.");return new Mi(this.image,T,F,P-T,j-F,u,this.resultPointCallback).find()}}class Lr{constructor(){this.decoder=new Xi}getDecoder(){return this.decoder}decode(u,p){let v,S;if(p!=null&&p.get(M.PURE_BARCODE)!==void 0){const F=Lr.extractPureBits(u.getBlackMatrix());v=this.decoder.decodeBitMatrix(F,p),S=Lr.NO_POINTS}else{const F=new Ei(u.getBlackMatrix()).detect(p);v=this.decoder.decodeBitMatrix(F.getBits(),p),S=F.getPoints()}v.getOther()instanceof yi&&v.getOther().applyMirroredCorrection(S);const O=new be(v.getText(),v.getRawBytes(),void 0,S,Ee.QR_CODE,void 0),T=v.getByteSegments();T!==null&&O.putMetadata(ne.BYTE_SEGMENTS,T);const P=v.getECLevel();return P!==null&&O.putMetadata(ne.ERROR_CORRECTION_LEVEL,P),v.hasStructuredAppend()&&(O.putMetadata(ne.STRUCTURED_APPEND_SEQUENCE,v.getStructuredAppendSequenceNumber()),O.putMetadata(ne.STRUCTURED_APPEND_PARITY,v.getStructuredAppendParity())),O}reset(){}static extractPureBits(u){const p=u.getTopLeftOnBit(),v=u.getBottomRightOnBit();if(p===null||v===null)throw new W;const S=this.moduleSize(p,u);let O=p[1],T=v[1],P=p[0],F=v[0];if(P>=F||O>=T)throw new W;if(T-O!==F-P&&(F=P+(T-O),F>=u.getWidth()))throw new W;const j=Math.round((F-P+1)/S),Z=Math.round((T-O+1)/S);if(j<=0||Z<=0)throw new W;if(Z!==j)throw new W;const re=Math.floor(S/2);O+=re,P+=re;const ae=P+Math.floor((j-1)*S)-F;if(ae>0){if(ae>re)throw new W;P-=ae}const ve=O+Math.floor((Z-1)*S)-T;if(ve>0){if(ve>re)throw new W;O-=ve}const Me=new z(j,Z);for(let Be=0;Be<Z;Be++){const Ue=O+Math.floor(Be*S);for(let Qe=0;Qe<j;Qe++)u.get(P+Math.floor(Qe*S),Ue)&&Me.set(Qe,Be)}return Me}static moduleSize(u,p){const v=p.getHeight(),S=p.getWidth();let O=u[0],T=u[1],P=!0,F=0;for(;O<S&&T<v;){if(P!==p.get(O,T)){if(++F===5)break;P=!P}O++,T++}if(O===S||T===v)throw new W;return(O-u[0])/7}}Lr.NO_POINTS=new Array;class Yt{PDF417Common(){}static getBitCountSum(u){return Ze.sum(u)}static toIntArray(u){if(u==null||!u.length)return Yt.EMPTY_INT_ARRAY;const p=new Int32Array(u.length);let v=0;for(const S of u)p[v++]=S;return p}static getCodeword(u){const p=y.binarySearch(Yt.SYMBOL_TABLE,u&262143);return p<0?-1:(Yt.CODEWORD_TABLE[p]-1)%Yt.NUMBER_OF_CODEWORDS}}Yt.NUMBER_OF_CODEWORDS=929,Yt.MAX_CODEWORDS_IN_BARCODE=Yt.NUMBER_OF_CODEWORDS-1,Yt.MIN_ROWS_IN_BARCODE=3,Yt.MAX_ROWS_IN_BARCODE=90,Yt.MODULES_IN_CODEWORD=17,Yt.MODULES_IN_STOP_PATTERN=18,Yt.BARS_IN_MODULE=8,Yt.EMPTY_INT_ARRAY=new Int32Array([]),Yt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Yt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class yr{constructor(u,p){this.bits=u,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class sr{static detectMultiple(u,p,v){let S=u.getBlackMatrix(),O=sr.detect(v,S);return O.length||(S=S.clone(),S.rotate180(),O=sr.detect(v,S)),new yr(S,O)}static detect(u,p){const v=new Array;let S=0,O=0,T=!1;for(;S<p.getHeight();){const P=sr.findVertices(p,S,O);if(P[0]==null&&P[3]==null){if(!T)break;T=!1,O=0;for(const F of v)F[1]!=null&&(S=Math.trunc(Math.max(S,F[1].getY()))),F[3]!=null&&(S=Math.max(S,Math.trunc(F[3].getY())));S+=sr.ROW_STEP;continue}if(T=!0,v.push(P),!u)break;P[2]!=null?(O=Math.trunc(P[2].getX()),S=Math.trunc(P[2].getY())):(O=Math.trunc(P[4].getX()),S=Math.trunc(P[4].getY()))}return v}static findVertices(u,p,v){const S=u.getHeight(),O=u.getWidth(),T=new Array(8);return sr.copyToResult(T,sr.findRowsWithPattern(u,S,O,p,v,sr.START_PATTERN),sr.INDEXES_START_PATTERN),T[4]!=null&&(v=Math.trunc(T[4].getX()),p=Math.trunc(T[4].getY())),sr.copyToResult(T,sr.findRowsWithPattern(u,S,O,p,v,sr.STOP_PATTERN),sr.INDEXES_STOP_PATTERN),T}static copyToResult(u,p,v){for(let S=0;S<v.length;S++)u[v[S]]=p[S]}static findRowsWithPattern(u,p,v,S,O,T){const P=new Array(4);let F=!1;const j=new Int32Array(T.length);for(;S<p;S+=sr.ROW_STEP){let re=sr.findGuardPattern(u,O,S,v,!1,T,j);if(re!=null){for(;S>0;){const ae=sr.findGuardPattern(u,O,--S,v,!1,T,j);if(ae!=null)re=ae;else{S++;break}}P[0]=new fe(re[0],S),P[1]=new fe(re[1],S),F=!0;break}}let Z=S+1;if(F){let re=0,ae=Int32Array.from([Math.trunc(P[0].getX()),Math.trunc(P[1].getX())]);for(;Z<p;Z++){const ve=sr.findGuardPattern(u,ae[0],Z,v,!1,T,j);if(ve!=null&&Math.abs(ae[0]-ve[0])<sr.MAX_PATTERN_DRIFT&&Math.abs(ae[1]-ve[1])<sr.MAX_PATTERN_DRIFT)ae=ve,re=0;else{if(re>sr.SKIPPED_ROW_COUNT_MAX)break;re++}}Z-=re+1,P[2]=new fe(ae[0],Z),P[3]=new fe(ae[1],Z)}return Z-S<sr.BARCODE_MIN_HEIGHT&&y.fill(P,null),P}static findGuardPattern(u,p,v,S,O,T,P){y.fillWithin(P,0,P.length,0);let F=p,j=0;for(;u.get(F,v)&&F>0&&j++<sr.MAX_PIXEL_DRIFT;)F--;let Z=F,re=0,ae=T.length;for(let ve=O;Z<S;Z++)if(u.get(Z,v)!==ve)P[re]++;else{if(re===ae-1){if(sr.patternMatchVariance(P,T,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return new Int32Array([F,Z]);F+=P[0]+P[1],w.arraycopy(P,2,P,0,re-1),P[re-1]=0,P[re]=0,re--}else re++;P[re]=1,ve=!ve}return re===ae-1&&sr.patternMatchVariance(P,T,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE?new Int32Array([F,Z-1]):null}static patternMatchVariance(u,p,v){let S=u.length,O=0,T=0;for(let j=0;j<S;j++)O+=u[j],T+=p[j];if(O<T)return 1/0;let P=O/T;v*=P;let F=0;for(let j=0;j<S;j++){let Z=u[j],re=p[j]*P,ae=Z>re?Z-re:re-Z;if(ae>v)return 1/0;F+=ae}return F/O}}sr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),sr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),sr.MAX_AVG_VARIANCE=.42,sr.MAX_INDIVIDUAL_VARIANCE=.8,sr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),sr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),sr.MAX_PIXEL_DRIFT=3,sr.MAX_PATTERN_DRIFT=5,sr.SKIPPED_ROW_COUNT_MAX=25,sr.ROW_STEP=5,sr.BARCODE_MIN_HEIGHT=10;class Tr{constructor(u,p){if(p.length===0)throw new g;this.field=u;let v=p.length;if(v>1&&p[0]===0){let S=1;for(;S<v&&p[S]===0;)S++;S===v?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(v-S),w.arraycopy(p,S,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);if(u===1){let S=0;for(let O of this.coefficients)S=this.field.add(S,O);return S}let p=this.coefficients[0],v=this.coefficients.length;for(let S=1;S<v;S++)p=this.field.add(this.field.multiply(u,p),this.coefficients[S]);return p}add(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero())return u;if(u.isZero())return this;let p=this.coefficients,v=u.coefficients;if(p.length>v.length){let T=p;p=v,v=T}let S=new Int32Array(v.length),O=v.length-p.length;w.arraycopy(v,0,S,0,O);for(let T=O;T<v.length;T++)S[T]=this.field.add(p[T-O],v[T]);return new Tr(this.field,S)}subtract(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");return u.isZero()?this:this.add(u.negative())}multiply(u){return u instanceof Tr?this.multiplyOther(u):this.multiplyScalar(u)}multiplyOther(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero()||u.isZero())return new Tr(this.field,new Int32Array([0]));let p=this.coefficients,v=p.length,S=u.coefficients,O=S.length,T=new Int32Array(v+O-1);for(let P=0;P<v;P++){let F=p[P];for(let j=0;j<O;j++)T[P+j]=this.field.add(T[P+j],this.field.multiply(F,S[j]))}return new Tr(this.field,T)}negative(){let u=this.coefficients.length,p=new Int32Array(u);for(let v=0;v<u;v++)p[v]=this.field.subtract(0,this.coefficients[v]);return new Tr(this.field,p)}multiplyScalar(u){if(u===0)return new Tr(this.field,new Int32Array([0]));if(u===1)return this;let p=this.coefficients.length,v=new Int32Array(p);for(let S=0;S<p;S++)v[S]=this.field.multiply(this.coefficients[S],u);return new Tr(this.field,v)}multiplyByMonomial(u,p){if(u<0)throw new g;if(p===0)return new Tr(this.field,new Int32Array([0]));let v=this.coefficients.length,S=new Int32Array(v+u);for(let O=0;O<v;O++)S[O]=this.field.multiply(this.coefficients[O],p);return new Tr(this.field,S)}toString(){let u=new H;for(let p=this.getDegree();p>=0;p--){let v=this.getCoefficient(p);v!==0&&(v<0?(u.append(" - "),v=-v):u.length()>0&&u.append(" + "),(p===0||v!==1)&&u.append(v),p!==0&&(p===1?u.append("x"):(u.append("x^"),u.append(p))))}return u.toString()}}class Ki{add(u,p){return(u+p)%this.modulus}subtract(u,p){return(this.modulus+u-p)%this.modulus}exp(u){return this.expTable[u]}log(u){if(u===0)throw new g;return this.logTable[u]}inverse(u){if(u===0)throw new Ie;return this.expTable[this.modulus-this.logTable[u]-1]}multiply(u,p){return u===0||p===0?0:this.expTable[(this.logTable[u]+this.logTable[p])%(this.modulus-1)]}getSize(){return this.modulus}equals(u){return u===this}}class Wi extends Ki{constructor(u,p){super(),this.modulus=u,this.expTable=new Int32Array(u),this.logTable=new Int32Array(u);let v=1;for(let S=0;S<u;S++)this.expTable[S]=v,v=v*p%u;for(let S=0;S<u-1;S++)this.logTable[this.expTable[S]]=S;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,p){if(u<0)throw new g;if(p===0)return this.zero;let v=new Int32Array(u+1);return v[0]=p,new Tr(this,v)}}Wi.PDF417_GF=new Wi(Yt.NUMBER_OF_CODEWORDS,3);class Vi{constructor(){this.field=Wi.PDF417_GF}decode(u,p,v){let S=new Tr(this.field,u),O=new Int32Array(p),T=!1;for(let Me=p;Me>0;Me--){let Be=S.evaluateAt(this.field.exp(Me));O[p-Me]=Be,Be!==0&&(T=!0)}if(!T)return 0;let P=this.field.getOne();if(v!=null)for(const Me of v){let Be=this.field.exp(u.length-1-Me),Ue=new Tr(this.field,new Int32Array([this.field.subtract(0,Be),1]));P=P.multiply(Ue)}let F=new Tr(this.field,O),j=this.runEuclideanAlgorithm(this.field.buildMonomial(p,1),F,p),Z=j[0],re=j[1],ae=this.findErrorLocations(Z),ve=this.findErrorMagnitudes(re,Z,ae);for(let Me=0;Me<ae.length;Me++){let Be=u.length-1-this.field.log(ae[Me]);if(Be<0)throw E.getChecksumInstance();u[Be]=this.field.subtract(u[Be],ve[Me])}return ae.length}runEuclideanAlgorithm(u,p,v){if(u.getDegree()<p.getDegree()){let ae=u;u=p,p=ae}let S=u,O=p,T=this.field.getZero(),P=this.field.getOne();for(;O.getDegree()>=Math.round(v/2);){let ae=S,ve=T;if(S=O,T=P,S.isZero())throw E.getChecksumInstance();O=ae;let Me=this.field.getZero(),Be=S.getCoefficient(S.getDegree()),Ue=this.field.inverse(Be);for(;O.getDegree()>=S.getDegree()&&!O.isZero();){let Qe=O.getDegree()-S.getDegree(),xt=this.field.multiply(O.getCoefficient(O.getDegree()),Ue);Me=Me.add(this.field.buildMonomial(Qe,xt)),O=O.subtract(S.multiplyByMonomial(Qe,xt))}P=Me.multiply(T).subtract(ve).negative()}let F=P.getCoefficient(0);if(F===0)throw E.getChecksumInstance();let j=this.field.inverse(F),Z=P.multiply(j),re=O.multiply(j);return[Z,re]}findErrorLocations(u){let p=u.getDegree(),v=new Int32Array(p),S=0;for(let O=1;O<this.field.getSize()&&S<p;O++)u.evaluateAt(O)===0&&(v[S]=this.field.inverse(O),S++);if(S!==p)throw E.getChecksumInstance();return v}findErrorMagnitudes(u,p,v){let S=p.getDegree(),O=new Int32Array(S);for(let j=1;j<=S;j++)O[S-j]=this.field.multiply(j,p.getCoefficient(j));let T=new Tr(this.field,O),P=v.length,F=new Int32Array(P);for(let j=0;j<P;j++){let Z=this.field.inverse(v[j]),re=this.field.subtract(0,u.evaluateAt(Z)),ae=this.field.inverse(T.evaluateAt(Z));F[j]=this.field.multiply(re,ae)}return F}}class ni{constructor(u,p,v,S,O){u instanceof ni?this.constructor_2(u):this.constructor_1(u,p,v,S,O)}constructor_1(u,p,v,S,O){const T=p==null||v==null,P=S==null||O==null;if(T&&P)throw new W;T?(p=new fe(0,S.getY()),v=new fe(0,O.getY())):P&&(S=new fe(u.getWidth()-1,p.getY()),O=new fe(u.getWidth()-1,v.getY())),this.image=u,this.topLeft=p,this.bottomLeft=v,this.topRight=S,this.bottomRight=O,this.minX=Math.trunc(Math.min(p.getX(),v.getX())),this.maxX=Math.trunc(Math.max(S.getX(),O.getX())),this.minY=Math.trunc(Math.min(p.getY(),S.getY())),this.maxY=Math.trunc(Math.max(v.getY(),O.getY()))}constructor_2(u){this.image=u.image,this.topLeft=u.getTopLeft(),this.bottomLeft=u.getBottomLeft(),this.topRight=u.getTopRight(),this.bottomRight=u.getBottomRight(),this.minX=u.getMinX(),this.maxX=u.getMaxX(),this.minY=u.getMinY(),this.maxY=u.getMaxY()}static merge(u,p){return u==null?p:p==null?u:new ni(u.image,u.topLeft,u.bottomLeft,p.topRight,p.bottomRight)}addMissingRows(u,p,v){let S=this.topLeft,O=this.bottomLeft,T=this.topRight,P=this.bottomRight;if(u>0){let F=v?this.topLeft:this.topRight,j=Math.trunc(F.getY()-u);j<0&&(j=0);let Z=new fe(F.getX(),j);v?S=Z:T=Z}if(p>0){let F=v?this.bottomLeft:this.bottomRight,j=Math.trunc(F.getY()+p);j>=this.image.getHeight()&&(j=this.image.getHeight()-1);let Z=new fe(F.getX(),j);v?O=Z:P=Z}return new ni(this.image,S,O,T,P)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ji{constructor(u,p,v,S){this.columnCount=u,this.errorCorrectionLevel=S,this.rowCountUpperPart=p,this.rowCountLowerPart=v,this.rowCount=p+v}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ai{constructor(){this.buffer=""}static form(u,p){let v=-1;function S(T,P,F,j,Z,re){if(T==="%%")return"%";if(p[++v]===void 0)return;T=j?parseInt(j.substr(1)):void 0;let ae=Z?parseInt(Z.substr(1)):void 0,ve;switch(re){case"s":ve=p[v];break;case"c":ve=p[v][0];break;case"f":ve=parseFloat(p[v]).toFixed(T);break;case"p":ve=parseFloat(p[v]).toPrecision(T);break;case"e":ve=parseFloat(p[v]).toExponential(T);break;case"x":ve=parseInt(p[v]).toString(ae||16);break;case"d":ve=parseFloat(parseInt(p[v],ae||10).toPrecision(T)).toFixed(0);break}ve=typeof ve=="object"?JSON.stringify(ve):(+ve).toString(ae);let Me=parseInt(F),Be=F&&F[0]+""=="0"?"0":" ";for(;ve.length<Me;)ve=P!==void 0?ve+Be:Be+ve;return ve}let O=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(O,S)}format(u,...p){this.buffer+=Ai.form(u,p)}toString(){return this.buffer}}class wi{constructor(u){this.boundingBox=new ni(u),this.codewords=new Array(u.getMaxY()-u.getMinY()+1)}getCodewordNearby(u){let p=this.getCodeword(u);if(p!=null)return p;for(let v=1;v<wi.MAX_NEARBY_DISTANCE;v++){let S=this.imageRowToCodewordIndex(u)-v;if(S>=0&&(p=this.codewords[S],p!=null)||(S=this.imageRowToCodewordIndex(u)+v,S<this.codewords.length&&(p=this.codewords[S],p!=null)))return p}return null}imageRowToCodewordIndex(u){return u-this.boundingBox.getMinY()}setCodeword(u,p){this.codewords[this.imageRowToCodewordIndex(u)]=p}getCodeword(u){return this.codewords[this.imageRowToCodewordIndex(u)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const u=new Ai;let p=0;for(const v of this.codewords){if(v==null){u.format("%3d:    |   %n",p++);continue}u.format("%3d: %3d|%3d%n",p++,v.getRowNumber(),v.getValue())}return u.toString()}}wi.MAX_NEARBY_DISTANCE=5;class Oi{constructor(){this.values=new Map}setValue(u){u=Math.trunc(u);let p=this.values.get(u);p==null&&(p=0),p++,this.values.set(u,p)}getValue(){let u=-1,p=new Array;for(const[v,S]of this.values.entries()){const O={getKey:()=>v,getValue:()=>S};O.getValue()>u?(u=O.getValue(),p=[],p.push(O.getKey())):O.getValue()===u&&p.push(O.getKey())}return Yt.toIntArray(p)}getConfidence(u){return this.values.get(u)}}class zi extends wi{constructor(u,p){super(u),this._isLeft=p}setRowNumbers(){for(let u of this.getCodewords())u?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(u){let p=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(p,u);let v=this.getBoundingBox(),S=this._isLeft?v.getTopLeft():v.getTopRight(),O=this._isLeft?v.getBottomLeft():v.getBottomRight(),T=this.imageRowToCodewordIndex(Math.trunc(S.getY())),P=this.imageRowToCodewordIndex(Math.trunc(O.getY())),F=-1,j=1,Z=0;for(let re=T;re<P;re++){if(p[re]==null)continue;let ae=p[re],ve=ae.getRowNumber()-F;if(ve===0)Z++;else if(ve===1)j=Math.max(j,Z),Z=1,F=ae.getRowNumber();else if(ve<0||ae.getRowNumber()>=u.getRowCount()||ve>re)p[re]=null;else{let Me;j>2?Me=(j-2)*ve:Me=ve;let Be=Me>=re;for(let Ue=1;Ue<=Me&&!Be;Ue++)Be=p[re-Ue]!=null;Be?p[re]=null:(F=ae.getRowNumber(),Z=1)}}}getRowHeights(){let u=this.getBarcodeMetadata();if(u==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(u);let p=new Int32Array(u.getRowCount());for(let v of this.getCodewords())if(v!=null){let S=v.getRowNumber();if(S>=p.length)continue;p[S]++}return p}adjustIncompleteIndicatorColumnRowNumbers(u){let p=this.getBoundingBox(),v=this._isLeft?p.getTopLeft():p.getTopRight(),S=this._isLeft?p.getBottomLeft():p.getBottomRight(),O=this.imageRowToCodewordIndex(Math.trunc(v.getY())),T=this.imageRowToCodewordIndex(Math.trunc(S.getY())),P=this.getCodewords(),F=-1;for(let j=O;j<T;j++){if(P[j]==null)continue;let Z=P[j];Z.setRowNumberAsRowIndicatorColumn();let re=Z.getRowNumber()-F;re===0||(re===1?F=Z.getRowNumber():Z.getRowNumber()>=u.getRowCount()?P[j]=null:F=Z.getRowNumber())}}getBarcodeMetadata(){let u=this.getCodewords(),p=new Oi,v=new Oi,S=new Oi,O=new Oi;for(let P of u){if(P==null)continue;P.setRowNumberAsRowIndicatorColumn();let F=P.getValue()%30,j=P.getRowNumber();switch(this._isLeft||(j+=2),j%3){case 0:v.setValue(F*3+1);break;case 1:O.setValue(F/3),S.setValue(F%3);break;case 2:p.setValue(F+1);break}}if(p.getValue().length===0||v.getValue().length===0||S.getValue().length===0||O.getValue().length===0||p.getValue()[0]<1||v.getValue()[0]+S.getValue()[0]<Yt.MIN_ROWS_IN_BARCODE||v.getValue()[0]+S.getValue()[0]>Yt.MAX_ROWS_IN_BARCODE)return null;let T=new Ji(p.getValue()[0],v.getValue()[0],S.getValue()[0],O.getValue()[0]);return this.removeIncorrectCodewords(u,T),T}removeIncorrectCodewords(u,p){for(let v=0;v<u.length;v++){let S=u[v];if(u[v]==null)continue;let O=S.getValue()%30,T=S.getRowNumber();if(T>p.getRowCount()){u[v]=null;continue}switch(this._isLeft||(T+=2),T%3){case 0:O*3+1!==p.getRowCountUpperPart()&&(u[v]=null);break;case 1:(Math.trunc(O/3)!==p.getErrorCorrectionLevel()||O%3!==p.getRowCountLowerPart())&&(u[v]=null);break;case 2:O+1!==p.getColumnCount()&&(u[v]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ti{constructor(u,p){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=u,this.barcodeColumnCount=u.getColumnCount(),this.boundingBox=p,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let u=Yt.MAX_CODEWORDS_IN_BARCODE,p;do p=u,u=this.adjustRowNumbersAndGetCount();while(u>0&&u<p);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(u){u?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let u=this.adjustRowNumbersByRow();if(u===0)return 0;for(let p=1;p<this.barcodeColumnCount+1;p++){let v=this.detectionResultColumns[p].getCodewords();for(let S=0;S<v.length;S++)v[S]!=null&&(v[S].hasValidRowNumber()||this.adjustRowNumbers(p,S,v))}return u}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let u=this.detectionResultColumns[0].getCodewords(),p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<u.length;v++)if(u[v]!=null&&p[v]!=null&&u[v].getRowNumber()===p[v].getRowNumber())for(let S=1;S<=this.barcodeColumnCount;S++){let O=this.detectionResultColumns[S].getCodewords()[v];O!=null&&(O.setRowNumber(u[v].getRowNumber()),O.hasValidRowNumber()||(this.detectionResultColumns[S].getCodewords()[v]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let u=0,p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<p.length;v++){if(p[v]==null)continue;let S=p[v].getRowNumber(),O=0;for(let T=this.barcodeColumnCount+1;T>0&&O<this.ADJUST_ROW_NUMBER_SKIP;T--){let P=this.detectionResultColumns[T].getCodewords()[v];P!=null&&(O=Ti.adjustRowNumberIfValid(S,O,P),P.hasValidRowNumber()||u++)}}return u}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let u=0,p=this.detectionResultColumns[0].getCodewords();for(let v=0;v<p.length;v++){if(p[v]==null)continue;let S=p[v].getRowNumber(),O=0;for(let T=1;T<this.barcodeColumnCount+1&&O<this.ADJUST_ROW_NUMBER_SKIP;T++){let P=this.detectionResultColumns[T].getCodewords()[v];P!=null&&(O=Ti.adjustRowNumberIfValid(S,O,P),P.hasValidRowNumber()||u++)}}return u}static adjustRowNumberIfValid(u,p,v){return v==null||v.hasValidRowNumber()||(v.isValidRowNumber(u)?(v.setRowNumber(u),p=0):++p),p}adjustRowNumbers(u,p,v){if(!this.detectionResultColumns[u-1])return;let S=v[p],O=this.detectionResultColumns[u-1].getCodewords(),T=O;this.detectionResultColumns[u+1]!=null&&(T=this.detectionResultColumns[u+1].getCodewords());let P=new Array(14);P[2]=O[p],P[3]=T[p],p>0&&(P[0]=v[p-1],P[4]=O[p-1],P[5]=T[p-1]),p>1&&(P[8]=v[p-2],P[10]=O[p-2],P[11]=T[p-2]),p<v.length-1&&(P[1]=v[p+1],P[6]=O[p+1],P[7]=T[p+1]),p<v.length-2&&(P[9]=v[p+2],P[12]=O[p+2],P[13]=T[p+2]);for(let F of P)if(Ti.adjustRowNumber(S,F))return}static adjustRowNumber(u,p){return p==null?!1:p.hasValidRowNumber()&&p.getBucket()===u.getBucket()?(u.setRowNumber(p.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(u){this.boundingBox=u}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(u,p){this.detectionResultColumns[u]=p}getDetectionResultColumn(u){return this.detectionResultColumns[u]}toString(){let u=this.detectionResultColumns[0];u==null&&(u=this.detectionResultColumns[this.barcodeColumnCount+1]);let p=new Ai;for(let v=0;v<u.getCodewords().length;v++){p.format("CW %3d:",v);for(let S=0;S<this.barcodeColumnCount+2;S++){if(this.detectionResultColumns[S]==null){p.format("    |   ");continue}let O=this.detectionResultColumns[S].getCodewords()[v];if(O==null){p.format("    |   ");continue}p.format(" %3d|%3d",O.getRowNumber(),O.getValue())}p.format("%n")}return p.toString()}}class Di{constructor(u,p,v,S){this.rowNumber=Di.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(u),this.endX=Math.trunc(p),this.bucket=Math.trunc(v),this.value=Math.trunc(S)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(u){return u!==Di.BARCODE_ROW_UNKNOWN&&this.bucket===u%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(u){this.rowNumber=u}toString(){return this.rowNumber+"|"+this.value}}Di.BARCODE_ROW_UNKNOWN=-1;class jr{static initialize(){for(let u=0;u<Yt.SYMBOL_TABLE.length;u++){let p=Yt.SYMBOL_TABLE[u],v=p&1;for(let S=0;S<Yt.BARS_IN_MODULE;S++){let O=0;for(;(p&1)===v;)O+=1,p>>=1;v=p&1,jr.RATIOS_TABLE[u]||(jr.RATIOS_TABLE[u]=new Array(Yt.BARS_IN_MODULE)),jr.RATIOS_TABLE[u][Yt.BARS_IN_MODULE-S-1]=Math.fround(O/Yt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(u){let p=jr.getDecodedCodewordValue(jr.sampleBitCounts(u));return p!==-1?p:jr.getClosestDecodedValue(u)}static sampleBitCounts(u){let p=Ze.sum(u),v=new Int32Array(Yt.BARS_IN_MODULE),S=0,O=0;for(let T=0;T<Yt.MODULES_IN_CODEWORD;T++){let P=p/(2*Yt.MODULES_IN_CODEWORD)+T*p/Yt.MODULES_IN_CODEWORD;O+u[S]<=P&&(O+=u[S],S++),v[S]++}return v}static getDecodedCodewordValue(u){let p=jr.getBitValue(u);return Yt.getCodeword(p)===-1?-1:p}static getBitValue(u){let p=0;for(let v=0;v<u.length;v++)for(let S=0;S<u[v];S++)p=p<<1|(v%2===0?1:0);return Math.trunc(p)}static getClosestDecodedValue(u){let p=Ze.sum(u),v=new Array(Yt.BARS_IN_MODULE);if(p>1)for(let T=0;T<v.length;T++)v[T]=Math.fround(u[T]/p);let S=pt.MAX_VALUE,O=-1;this.bSymbolTableReady||jr.initialize();for(let T=0;T<jr.RATIOS_TABLE.length;T++){let P=0,F=jr.RATIOS_TABLE[T];for(let j=0;j<Yt.BARS_IN_MODULE;j++){let Z=Math.fround(F[j]-v[j]);if(P+=Math.fround(Z*Z),P>=S)break}P<S&&(S=P,O=Yt.SYMBOL_TABLE[T])}return O}}jr.bSymbolTableReady=!1,jr.RATIOS_TABLE=new Array(Yt.SYMBOL_TABLE.length).map(te=>new Array(Yt.BARS_IN_MODULE));class ji{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(u){this.segmentIndex=u}getFileId(){return this.fileId}setFileId(u){this.fileId=u}getOptionalData(){return this.optionalData}setOptionalData(u){this.optionalData=u}isLastSegment(){return this.lastSegment}setLastSegment(u){this.lastSegment=u}getSegmentCount(){return this.segmentCount}setSegmentCount(u){this.segmentCount=u}getSender(){return this.sender||null}setSender(u){this.sender=u}getAddressee(){return this.addressee||null}setAddressee(u){this.addressee=u}getFileName(){return this.fileName}setFileName(u){this.fileName=u}getFileSize(){return this.fileSize}setFileSize(u){this.fileSize=u}getChecksum(){return this.checksum}setChecksum(u){this.checksum=u}getTimestamp(){return this.timestamp}setTimestamp(u){this.timestamp=u}}class Li{static parseLong(u,p=void 0){return parseInt(u,p)}}class Nt extends d{}Nt.kind="NullPointerException";class or{writeBytes(u){this.writeBytesOffset(u,0,u.length)}writeBytesOffset(u,p,v){if(u==null)throw new Nt;if(p<0||p>u.length||v<0||p+v>u.length||p+v<0)throw new m;if(v===0)return;for(let S=0;S<v;S++)this.write(u[p+S])}flush(){}close(){}}class kt extends d{}class he extends or{constructor(u=32){if(super(),this.count=0,u<0)throw new g("Negative initial size: "+u);this.buf=new Uint8Array(u)}ensureCapacity(u){u-this.buf.length>0&&this.grow(u)}grow(u){let v=this.buf.length<<1;if(v-u<0&&(v=u),v<0){if(u<0)throw new kt;v=x.MAX_VALUE}this.buf=y.copyOfUint8Array(this.buf,v)}write(u){this.ensureCapacity(this.count+1),this.buf[this.count]=u,this.count+=1}writeBytesOffset(u,p,v){if(p<0||p>u.length||v<0||p+v-u.length>0)throw new m;this.ensureCapacity(this.count+v),w.arraycopy(u,p,this.buf,this.count,v),this.count+=v}writeTo(u){u.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return y.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(u){return u?typeof u=="string"?this.toString_string(u):this.toString_number(u):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(u){return new String(this.buf).toString()}toString_number(u){return new String(this.buf).toString()}close(){}}var oe;(function(te){te[te.ALPHA=0]="ALPHA",te[te.LOWER=1]="LOWER",te[te.MIXED=2]="MIXED",te[te.PUNCT=3]="PUNCT",te[te.ALPHA_SHIFT=4]="ALPHA_SHIFT",te[te.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(oe||(oe={}));function Ae(){if(typeof window<"u")return window.BigInt||null;if(typeof commonjsGlobal<"u")return commonjsGlobal.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ve;function _t(te){if(typeof Ve>"u"&&(Ve=Ae()),Ve===null)throw new Error("BigInt is not supported!");return Ve(te)}function ct(){let te=[];te[0]=_t(1);let u=_t(900);te[1]=u;for(let p=2;p<16;p++)te[p]=te[p-1]*u;return te}class Te{static decode(u,p){let v=new H(""),S=I.ISO8859_1;v.enableDecoding(S);let O=1,T=u[O++],P=new ji;for(;O<u[0];){switch(T){case Te.TEXT_COMPACTION_MODE_LATCH:O=Te.textCompaction(u,O,v);break;case Te.BYTE_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH_6:O=Te.byteCompaction(T,u,S,O,v);break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(u[O++]);break;case Te.NUMERIC_COMPACTION_MODE_LATCH:O=Te.numericCompaction(u,O,v);break;case Te.ECI_CHARSET:I.getCharacterSetECIByValue(u[O++]);break;case Te.ECI_GENERAL_PURPOSE:O+=2;break;case Te.ECI_USER_DEFINED:O++;break;case Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:O=Te.decodeMacroBlock(u,O,P);break;case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Te.MACRO_PDF417_TERMINATOR:throw new L;default:O--,O=Te.textCompaction(u,O,v);break}if(O<u.length)T=u[O++];else throw L.getFormatInstance()}if(v.length()===0)throw L.getFormatInstance();let F=new de(null,v.toString(),null,p);return F.setOther(P),F}static decodeMacroBlock(u,p,v){if(p+Te.NUMBER_OF_SEQUENCE_CODEWORDS>u[0])throw L.getFormatInstance();let S=new Int32Array(Te.NUMBER_OF_SEQUENCE_CODEWORDS);for(let P=0;P<Te.NUMBER_OF_SEQUENCE_CODEWORDS;P++,p++)S[P]=u[p];v.setSegmentIndex(x.parseInt(Te.decodeBase900toBase10(S,Te.NUMBER_OF_SEQUENCE_CODEWORDS)));let O=new H;p=Te.textCompaction(u,p,O),v.setFileId(O.toString());let T=-1;for(u[p]===Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(T=p+1);p<u[0];)switch(u[p]){case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(p++,u[p]){case Te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let P=new H;p=Te.textCompaction(u,p+1,P),v.setFileName(P.toString());break;case Te.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let F=new H;p=Te.textCompaction(u,p+1,F),v.setSender(F.toString());break;case Te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let j=new H;p=Te.textCompaction(u,p+1,j),v.setAddressee(j.toString());break;case Te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Z=new H;p=Te.numericCompaction(u,p+1,Z),v.setSegmentCount(x.parseInt(Z.toString()));break;case Te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let re=new H;p=Te.numericCompaction(u,p+1,re),v.setTimestamp(Li.parseLong(re.toString()));break;case Te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ae=new H;p=Te.numericCompaction(u,p+1,ae),v.setChecksum(x.parseInt(ae.toString()));break;case Te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ve=new H;p=Te.numericCompaction(u,p+1,ve),v.setFileSize(Li.parseLong(ve.toString()));break;default:throw L.getFormatInstance()}break;case Te.MACRO_PDF417_TERMINATOR:p++,v.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(T!==-1){let P=p-T;v.isLastSegment()&&P--,v.setOptionalData(y.copyOfRange(u,T,T+P))}return p}static textCompaction(u,p,v){let S=new Int32Array((u[0]-p)*2),O=new Int32Array((u[0]-p)*2),T=0,P=!1;for(;p<u[0]&&!P;){let F=u[p++];if(F<Te.TEXT_COMPACTION_MODE_LATCH)S[T]=F/30,S[T+1]=F%30,T+=2;else switch(F){case Te.TEXT_COMPACTION_MODE_LATCH:S[T++]=Te.TEXT_COMPACTION_MODE_LATCH;break;case Te.BYTE_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH_6:case Te.NUMERIC_COMPACTION_MODE_LATCH:case Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Te.MACRO_PDF417_TERMINATOR:p--,P=!0;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S[T]=Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,F=u[p++],O[T]=F,T++;break}}return Te.decodeTextCompaction(S,O,T,v),p}static decodeTextCompaction(u,p,v,S){let O=oe.ALPHA,T=oe.ALPHA,P=0;for(;P<v;){let F=u[P],j="";switch(O){case oe.ALPHA:if(F<26)j=String.fromCharCode(65+F);else switch(F){case 26:j=" ";break;case Te.LL:O=oe.LOWER;break;case Te.ML:O=oe.MIXED;break;case Te.PS:T=O,O=oe.PUNCT_SHIFT;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(p[P]);break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break;case oe.LOWER:if(F<26)j=String.fromCharCode(97+F);else switch(F){case 26:j=" ";break;case Te.AS:T=O,O=oe.ALPHA_SHIFT;break;case Te.ML:O=oe.MIXED;break;case Te.PS:T=O,O=oe.PUNCT_SHIFT;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(p[P]);break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break;case oe.MIXED:if(F<Te.PL)j=Te.MIXED_CHARS[F];else switch(F){case Te.PL:O=oe.PUNCT;break;case 26:j=" ";break;case Te.LL:O=oe.LOWER;break;case Te.AL:O=oe.ALPHA;break;case Te.PS:T=O,O=oe.PUNCT_SHIFT;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(p[P]);break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break;case oe.PUNCT:if(F<Te.PAL)j=Te.PUNCT_CHARS[F];else switch(F){case Te.PAL:O=oe.ALPHA;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(p[P]);break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break;case oe.ALPHA_SHIFT:if(O=T,F<26)j=String.fromCharCode(65+F);else switch(F){case 26:j=" ";break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break;case oe.PUNCT_SHIFT:if(O=T,F<Te.PAL)j=Te.PUNCT_CHARS[F];else switch(F){case Te.PAL:O=oe.ALPHA;break;case Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:S.append(p[P]);break;case Te.TEXT_COMPACTION_MODE_LATCH:O=oe.ALPHA;break}break}j!==""&&S.append(j),P++}}static byteCompaction(u,p,v,S,O){let T=new he,P=0,F=0,j=!1;switch(u){case Te.BYTE_COMPACTION_MODE_LATCH:let Z=new Int32Array(6),re=p[S++];for(;S<p[0]&&!j;)switch(Z[P++]=re,F=900*F+re,re=p[S++],re){case Te.TEXT_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH:case Te.NUMERIC_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH_6:case Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Te.MACRO_PDF417_TERMINATOR:S--,j=!0;break;default:if(P%5===0&&P>0){for(let ae=0;ae<6;++ae)T.write(Number(_t(F)>>_t(8*(5-ae))));F=0,P=0}break}S===p[0]&&re<Te.TEXT_COMPACTION_MODE_LATCH&&(Z[P++]=re);for(let ae=0;ae<P;ae++)T.write(Z[ae]);break;case Te.BYTE_COMPACTION_MODE_LATCH_6:for(;S<p[0]&&!j;){let ae=p[S++];if(ae<Te.TEXT_COMPACTION_MODE_LATCH)P++,F=900*F+ae;else switch(ae){case Te.TEXT_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH:case Te.NUMERIC_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH_6:case Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Te.MACRO_PDF417_TERMINATOR:S--,j=!0;break}if(P%5===0&&P>0){for(let ve=0;ve<6;++ve)T.write(Number(_t(F)>>_t(8*(5-ve))));F=0,P=0}}break}return O.append(N.decode(T.toByteArray(),v)),S}static numericCompaction(u,p,v){let S=0,O=!1,T=new Int32Array(Te.MAX_NUMERIC_CODEWORDS);for(;p<u[0]&&!O;){let P=u[p++];if(p===u[0]&&(O=!0),P<Te.TEXT_COMPACTION_MODE_LATCH)T[S]=P,S++;else switch(P){case Te.TEXT_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH:case Te.BYTE_COMPACTION_MODE_LATCH_6:case Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Te.MACRO_PDF417_TERMINATOR:p--,O=!0;break}(S%Te.MAX_NUMERIC_CODEWORDS===0||P===Te.NUMERIC_COMPACTION_MODE_LATCH||O)&&S>0&&(v.append(Te.decodeBase900toBase10(T,S)),S=0)}return p}static decodeBase900toBase10(u,p){let v=_t(0);for(let O=0;O<p;O++)v+=Te.EXP900[p-O-1]*_t(u[O]);let S=v.toString();if(S.charAt(0)!=="1")throw new L;return S.substring(1)}}Te.TEXT_COMPACTION_MODE_LATCH=900,Te.BYTE_COMPACTION_MODE_LATCH=901,Te.NUMERIC_COMPACTION_MODE_LATCH=902,Te.BYTE_COMPACTION_MODE_LATCH_6=924,Te.ECI_USER_DEFINED=925,Te.ECI_GENERAL_PURPOSE=926,Te.ECI_CHARSET=927,Te.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Te.MACRO_PDF417_TERMINATOR=922,Te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Te.MAX_NUMERIC_CODEWORDS=15,Te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Te.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Te.PL=25,Te.LL=27,Te.AS=27,Te.ML=28,Te.AL=28,Te.PS=29,Te.PAL=29,Te.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Te.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Te.EXP900=Ae()?ct():[],Te.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ht{constructor(){}static decode(u,p,v,S,O,T,P){let F=new ni(u,p,v,S,O),j=null,Z=null,re;for(let Me=!0;;Me=!1){if(p!=null&&(j=ht.getRowIndicatorColumn(u,F,p,!0,T,P)),S!=null&&(Z=ht.getRowIndicatorColumn(u,F,S,!1,T,P)),re=ht.merge(j,Z),re==null)throw W.getNotFoundInstance();let Be=re.getBoundingBox();if(Me&&Be!=null&&(Be.getMinY()<F.getMinY()||Be.getMaxY()>F.getMaxY()))F=Be;else break}re.setBoundingBox(F);let ae=re.getBarcodeColumnCount()+1;re.setDetectionResultColumn(0,j),re.setDetectionResultColumn(ae,Z);let ve=j!=null;for(let Me=1;Me<=ae;Me++){let Be=ve?Me:ae-Me;if(re.getDetectionResultColumn(Be)!==void 0)continue;let Ue;Be===0||Be===ae?Ue=new zi(F,Be===0):Ue=new wi(F),re.setDetectionResultColumn(Be,Ue);let Qe=-1,xt=Qe;for(let wt=F.getMinY();wt<=F.getMaxY();wt++){if(Qe=ht.getStartColumn(re,Be,wt,ve),Qe<0||Qe>F.getMaxX()){if(xt===-1)continue;Qe=xt}let bt=ht.detectCodeword(u,F.getMinX(),F.getMaxX(),ve,Qe,wt,T,P);bt!=null&&(Ue.setCodeword(wt,bt),xt=Qe,T=Math.min(T,bt.getWidth()),P=Math.max(P,bt.getWidth()))}}return ht.createDecoderResult(re)}static merge(u,p){if(u==null&&p==null)return null;let v=ht.getBarcodeMetadata(u,p);if(v==null)return null;let S=ni.merge(ht.adjustBoundingBox(u),ht.adjustBoundingBox(p));return new Ti(v,S)}static adjustBoundingBox(u){if(u==null)return null;let p=u.getRowHeights();if(p==null)return null;let v=ht.getMax(p),S=0;for(let P of p)if(S+=v-P,P>0)break;let O=u.getCodewords();for(let P=0;S>0&&O[P]==null;P++)S--;let T=0;for(let P=p.length-1;P>=0&&(T+=v-p[P],!(p[P]>0));P--);for(let P=O.length-1;T>0&&O[P]==null;P--)T--;return u.getBoundingBox().addMissingRows(S,T,u.isLeft())}static getMax(u){let p=-1;for(let v of u)p=Math.max(p,v);return p}static getBarcodeMetadata(u,p){let v;if(u==null||(v=u.getBarcodeMetadata())==null)return p==null?null:p.getBarcodeMetadata();let S;return p==null||(S=p.getBarcodeMetadata())==null?v:v.getColumnCount()!==S.getColumnCount()&&v.getErrorCorrectionLevel()!==S.getErrorCorrectionLevel()&&v.getRowCount()!==S.getRowCount()?null:v}static getRowIndicatorColumn(u,p,v,S,O,T){let P=new zi(p,S);for(let F=0;F<2;F++){let j=F===0?1:-1,Z=Math.trunc(Math.trunc(v.getX()));for(let re=Math.trunc(Math.trunc(v.getY()));re<=p.getMaxY()&&re>=p.getMinY();re+=j){let ae=ht.detectCodeword(u,0,u.getWidth(),S,Z,re,O,T);ae!=null&&(P.setCodeword(re,ae),S?Z=ae.getStartX():Z=ae.getEndX())}}return P}static adjustCodewordCount(u,p){let v=p[0][1],S=v.getValue(),O=u.getBarcodeColumnCount()*u.getBarcodeRowCount()-ht.getNumberOfECCodeWords(u.getBarcodeECLevel());if(S.length===0){if(O<1||O>Yt.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();v.setValue(O)}else S[0]!==O&&v.setValue(O)}static createDecoderResult(u){let p=ht.createBarcodeMatrix(u);ht.adjustCodewordCount(u,p);let v=new Array,S=new Int32Array(u.getBarcodeRowCount()*u.getBarcodeColumnCount()),O=[],T=new Array;for(let F=0;F<u.getBarcodeRowCount();F++)for(let j=0;j<u.getBarcodeColumnCount();j++){let Z=p[F][j+1].getValue(),re=F*u.getBarcodeColumnCount()+j;Z.length===0?v.push(re):Z.length===1?S[re]=Z[0]:(T.push(re),O.push(Z))}let P=new Array(O.length);for(let F=0;F<P.length;F++)P[F]=O[F];return ht.createDecoderResultFromAmbiguousValues(u.getBarcodeECLevel(),S,Yt.toIntArray(v),Yt.toIntArray(T),P)}static createDecoderResultFromAmbiguousValues(u,p,v,S,O){let T=new Int32Array(S.length),P=100;for(;P-- >0;){for(let F=0;F<T.length;F++)p[S[F]]=O[F][T[F]];try{return ht.decodeCodewords(p,u,v)}catch(F){if(!(F instanceof E))throw F}if(T.length===0)throw E.getChecksumInstance();for(let F=0;F<T.length;F++)if(T[F]<O[F].length-1){T[F]++;break}else if(T[F]=0,F===T.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(u){let p=Array.from({length:u.getBarcodeRowCount()},()=>new Array(u.getBarcodeColumnCount()+2));for(let S=0;S<p.length;S++)for(let O=0;O<p[S].length;O++)p[S][O]=new Oi;let v=0;for(let S of u.getDetectionResultColumns()){if(S!=null){for(let O of S.getCodewords())if(O!=null){let T=O.getRowNumber();if(T>=0){if(T>=p.length)continue;p[T][v].setValue(O.getValue())}}}v++}return p}static isValidBarcodeColumn(u,p){return p>=0&&p<=u.getBarcodeColumnCount()+1}static getStartColumn(u,p,v,S){let O=S?1:-1,T=null;if(ht.isValidBarcodeColumn(u,p-O)&&(T=u.getDetectionResultColumn(p-O).getCodeword(v)),T!=null)return S?T.getEndX():T.getStartX();if(T=u.getDetectionResultColumn(p).getCodewordNearby(v),T!=null)return S?T.getStartX():T.getEndX();if(ht.isValidBarcodeColumn(u,p-O)&&(T=u.getDetectionResultColumn(p-O).getCodewordNearby(v)),T!=null)return S?T.getEndX():T.getStartX();let P=0;for(;ht.isValidBarcodeColumn(u,p-O);){p-=O;for(let F of u.getDetectionResultColumn(p).getCodewords())if(F!=null)return(S?F.getEndX():F.getStartX())+O*P*(F.getEndX()-F.getStartX());P++}return S?u.getBoundingBox().getMinX():u.getBoundingBox().getMaxX()}static detectCodeword(u,p,v,S,O,T,P,F){O=ht.adjustCodewordStartColumn(u,p,v,S,O,T);let j=ht.getModuleBitCount(u,p,v,S,O,T);if(j==null)return null;let Z,re=Ze.sum(j);if(S)Z=O+re;else{for(let Me=0;Me<j.length/2;Me++){let Be=j[Me];j[Me]=j[j.length-1-Me],j[j.length-1-Me]=Be}Z=O,O=Z-re}if(!ht.checkCodewordSkew(re,P,F))return null;let ae=jr.getDecodedValue(j),ve=Yt.getCodeword(ae);return ve===-1?null:new Di(O,Z,ht.getCodewordBucketNumber(ae),ve)}static getModuleBitCount(u,p,v,S,O,T){let P=O,F=new Int32Array(8),j=0,Z=S?1:-1,re=S;for(;(S?P<v:P>=p)&&j<F.length;)u.get(P,T)===re?(F[j]++,P+=Z):(j++,re=!re);return j===F.length||P===(S?v:p)&&j===F.length-1?F:null}static getNumberOfECCodeWords(u){return 2<<u}static adjustCodewordStartColumn(u,p,v,S,O,T){let P=O,F=S?-1:1;for(let j=0;j<2;j++){for(;(S?P>=p:P<v)&&S===u.get(P,T);){if(Math.abs(O-P)>ht.CODEWORD_SKEW_SIZE)return O;P+=F}F=-F,S=!S}return P}static checkCodewordSkew(u,p,v){return p-ht.CODEWORD_SKEW_SIZE<=u&&u<=v+ht.CODEWORD_SKEW_SIZE}static decodeCodewords(u,p,v){if(u.length===0)throw L.getFormatInstance();let S=1<<p+1,O=ht.correctErrors(u,v,S);ht.verifyCodewordCount(u,S);let T=Te.decode(u,""+p);return T.setErrorsCorrected(O),T.setErasures(v.length),T}static correctErrors(u,p,v){if(p!=null&&p.length>v/2+ht.MAX_ERRORS||v<0||v>ht.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return ht.errorCorrection.decode(u,v,p)}static verifyCodewordCount(u,p){if(u.length<4)throw L.getFormatInstance();let v=u[0];if(v>u.length)throw L.getFormatInstance();if(v===0)if(p<u.length)u[0]=u.length-p;else throw L.getFormatInstance()}static getBitCountForCodeword(u){let p=new Int32Array(8),v=0,S=p.length-1;for(;!((u&1)!==v&&(v=u&1,S--,S<0));)p[S]++,u>>=1;return p}static getCodewordBucketNumber(u){return u instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(u):this.getCodewordBucketNumber_number(u)}static getCodewordBucketNumber_number(u){return ht.getCodewordBucketNumber(ht.getBitCountForCodeword(u))}static getCodewordBucketNumber_Int32Array(u){return(u[0]-u[2]+u[4]-u[6]+9)%9}static toString(u){let p=new Ai;for(let v=0;v<u.length;v++){p.format("Row %2d: ",v);for(let S=0;S<u[v].length;S++){let O=u[v][S];O.getValue().length===0?p.format("        ",null):p.format("%4d(%2d)",O.getValue()[0],O.getConfidence(O.getValue()[0]))}p.format("%n")}return p.toString()}}ht.CODEWORD_SKEW_SIZE=2,ht.MAX_ERRORS=3,ht.MAX_EC_CODEWORDS=512,ht.errorCorrection=new Vi;class Dt{decode(u,p=null){let v=Dt.decode(u,p,!1);if(v==null||v.length===0||v[0]==null)throw W.getNotFoundInstance();return v[0]}decodeMultiple(u,p=null){try{return Dt.decode(u,p,!0)}catch(v){throw v instanceof L||v instanceof E?W.getNotFoundInstance():v}}static decode(u,p,v){const S=new Array,O=sr.detectMultiple(u,p,v);for(const T of O.getPoints()){const P=ht.decode(O.getBits(),T[4],T[5],T[6],T[7],Dt.getMinCodewordWidth(T),Dt.getMaxCodewordWidth(T)),F=new be(P.getText(),P.getRawBytes(),void 0,T,Ee.PDF_417);F.putMetadata(ne.ERROR_CORRECTION_LEVEL,P.getECLevel());const j=P.getOther();j!=null&&F.putMetadata(ne.PDF417_EXTRA_METADATA,j),S.push(F)}return S.map(T=>T)}static getMaxWidth(u,p){return u==null||p==null?0:Math.trunc(Math.abs(u.getX()-p.getX()))}static getMinWidth(u,p){return u==null||p==null?x.MAX_VALUE:Math.trunc(Math.abs(u.getX()-p.getX()))}static getMaxCodewordWidth(u){return Math.floor(Math.max(Math.max(Dt.getMaxWidth(u[0],u[4]),Dt.getMaxWidth(u[6],u[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.max(Dt.getMaxWidth(u[1],u[5]),Dt.getMaxWidth(u[7],u[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(u){return Math.floor(Math.min(Math.min(Dt.getMinWidth(u[0],u[4]),Dt.getMinWidth(u[6],u[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.min(Dt.getMinWidth(u[1],u[5]),Dt.getMinWidth(u[7],u[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ar extends d{}ar.kind="ReaderException";class gr{constructor(u,p){this.verbose=u===!0,p&&this.setHints(p)}decode(u,p){return p&&this.setHints(p),this.decodeInternal(u)}decodeWithState(u){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(u)}setHints(u){this.hints=u;const p=!n(u)&&u.get(M.TRY_HARDER)===!0,v=n(u)?null:u.get(M.POSSIBLE_FORMATS),S=new Array;if(!n(v)){const O=v.some(T=>T===Ee.UPC_A||T===Ee.UPC_E||T===Ee.EAN_13||T===Ee.EAN_8||T===Ee.CODABAR||T===Ee.CODE_39||T===Ee.CODE_93||T===Ee.CODE_128||T===Ee.ITF||T===Ee.RSS_14||T===Ee.RSS_EXPANDED);O&&!p&&S.push(new dr(u,this.verbose)),v.includes(Ee.QR_CODE)&&S.push(new Lr),v.includes(Ee.DATA_MATRIX)&&S.push(new Mr),v.includes(Ee.AZTEC)&&S.push(new vt),v.includes(Ee.PDF_417)&&S.push(new Dt),O&&p&&S.push(new dr(u,this.verbose))}S.length===0&&(p||S.push(new dr(u,this.verbose)),S.push(new Lr),S.push(new Mr),S.push(new vt),S.push(new Dt),p&&S.push(new dr(u,this.verbose))),this.readers=S}reset(){if(this.readers!==null)for(const u of this.readers)u.reset()}decodeInternal(u){if(this.readers===null)throw new ar("No readers where selected, nothing can be read.");for(const p of this.readers)try{return p.decode(u,this.hints)}catch(v){if(v instanceof ar)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class Dr extends Se{constructor(u=null,p=500){const v=new gr;v.setHints(u),super(v,p)}decodeBitmap(u){return this.reader.decodeWithState(u)}}class Hr extends Se{constructor(u=500){super(new Dt,u)}}class lr extends Se{constructor(u=500){super(new Lr,u)}}var kr;(function(te){te[te.ERROR_CORRECTION=0]="ERROR_CORRECTION",te[te.CHARACTER_SET=1]="CHARACTER_SET",te[te.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",te[te.MIN_SIZE=3]="MIN_SIZE",te[te.MAX_SIZE=4]="MAX_SIZE",te[te.MARGIN=5]="MARGIN",te[te.PDF417_COMPACT=6]="PDF417_COMPACT",te[te.PDF417_COMPACTION=7]="PDF417_COMPACTION",te[te.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",te[te.AZTEC_LAYERS=9]="AZTEC_LAYERS",te[te.QR_VERSION=10]="QR_VERSION"})(kr||(kr={}));var mr=kr;class Wr{constructor(u){this.field=u,this.cachedGenerators=[],this.cachedGenerators.push(new Fe(u,Int32Array.from([1])))}buildGenerator(u){const p=this.cachedGenerators;if(u>=p.length){let v=p[p.length-1];const S=this.field;for(let O=p.length;O<=u;O++){const T=v.multiply(new Fe(S,Int32Array.from([1,S.exp(O-1+S.getGeneratorBase())])));p.push(T),v=T}}return p[u]}encode(u,p){if(p===0)throw new g("No error correction bytes");const v=u.length-p;if(v<=0)throw new g("No data bytes provided");const S=this.buildGenerator(p),O=new Int32Array(v);w.arraycopy(u,0,O,0,v);let T=new Fe(this.field,O);T=T.multiplyByMonomial(p,1);const F=T.divide(S)[1].getCoefficients(),j=p-F.length;for(let Z=0;Z<j;Z++)u[v+Z]=0;w.arraycopy(F,0,u,v+j,F.length)}}class wr{constructor(){}static applyMaskPenaltyRule1(u){return wr.applyMaskPenaltyRule1Internal(u,!0)+wr.applyMaskPenaltyRule1Internal(u,!1)}static applyMaskPenaltyRule2(u){let p=0;const v=u.getArray(),S=u.getWidth(),O=u.getHeight();for(let T=0;T<O-1;T++){const P=v[T];for(let F=0;F<S-1;F++){const j=P[F];j===P[F+1]&&j===v[T+1][F]&&j===v[T+1][F+1]&&p++}}return wr.N2*p}static applyMaskPenaltyRule3(u){let p=0;const v=u.getArray(),S=u.getWidth(),O=u.getHeight();for(let T=0;T<O;T++)for(let P=0;P<S;P++){const F=v[T];P+6<S&&F[P]===1&&F[P+1]===0&&F[P+2]===1&&F[P+3]===1&&F[P+4]===1&&F[P+5]===0&&F[P+6]===1&&(wr.isWhiteHorizontal(F,P-4,P)||wr.isWhiteHorizontal(F,P+7,P+11))&&p++,T+6<O&&v[T][P]===1&&v[T+1][P]===0&&v[T+2][P]===1&&v[T+3][P]===1&&v[T+4][P]===1&&v[T+5][P]===0&&v[T+6][P]===1&&(wr.isWhiteVertical(v,P,T-4,T)||wr.isWhiteVertical(v,P,T+7,T+11))&&p++}return p*wr.N3}static isWhiteHorizontal(u,p,v){p=Math.max(p,0),v=Math.min(v,u.length);for(let S=p;S<v;S++)if(u[S]===1)return!1;return!0}static isWhiteVertical(u,p,v,S){v=Math.max(v,0),S=Math.min(S,u.length);for(let O=v;O<S;O++)if(u[O][p]===1)return!1;return!0}static applyMaskPenaltyRule4(u){let p=0;const v=u.getArray(),S=u.getWidth(),O=u.getHeight();for(let F=0;F<O;F++){const j=v[F];for(let Z=0;Z<S;Z++)j[Z]===1&&p++}const T=u.getHeight()*u.getWidth();return Math.floor(Math.abs(p*2-T)*10/T)*wr.N4}static getDataMaskBit(u,p,v){let S,O;switch(u){case 0:S=v+p&1;break;case 1:S=v&1;break;case 2:S=p%3;break;case 3:S=(v+p)%3;break;case 4:S=Math.floor(v/2)+Math.floor(p/3)&1;break;case 5:O=v*p,S=(O&1)+O%3;break;case 6:O=v*p,S=(O&1)+O%3&1;break;case 7:O=v*p,S=O%3+(v+p&1)&1;break;default:throw new g("Invalid mask pattern: "+u)}return S===0}static applyMaskPenaltyRule1Internal(u,p){let v=0;const S=p?u.getHeight():u.getWidth(),O=p?u.getWidth():u.getHeight(),T=u.getArray();for(let P=0;P<S;P++){let F=0,j=-1;for(let Z=0;Z<O;Z++){const re=p?T[P][Z]:T[Z][P];re===j?F++:(F>=5&&(v+=wr.N1+(F-5)),F=1,j=re)}F>=5&&(v+=wr.N1+(F-5))}return v}}wr.N1=3,wr.N2=3,wr.N3=40,wr.N4=10;class vi{constructor(u,p){this.width=u,this.height=p;const v=new Array(p);for(let S=0;S!==p;S++)v[S]=new Uint8Array(u);this.bytes=v}getHeight(){return this.height}getWidth(){return this.width}get(u,p){return this.bytes[p][u]}getArray(){return this.bytes}setNumber(u,p,v){this.bytes[p][u]=v}setBoolean(u,p,v){this.bytes[p][u]=v?1:0}clear(u){for(const p of this.bytes)y.fill(p,u)}equals(u){if(!(u instanceof vi))return!1;const p=u;if(this.width!==p.width||this.height!==p.height)return!1;for(let v=0,S=this.height;v<S;++v){const O=this.bytes[v],T=p.bytes[v];for(let P=0,F=this.width;P<F;++P)if(O[P]!==T[P])return!1}return!0}toString(){const u=new H;for(let p=0,v=this.height;p<v;++p){const S=this.bytes[p];for(let O=0,T=this.width;O<T;++O)switch(S[O]){case 0:u.append(" 0");break;case 1:u.append(" 1");break;default:u.append("  ");break}u.append(`
`)}return u.toString()}}class ci{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const u=new H;return u.append(`<<
`),u.append(" mode: "),u.append(this.mode?this.mode.toString():"null"),u.append(`
 ecLevel: `),u.append(this.ecLevel?this.ecLevel.toString():"null"),u.append(`
 version: `),u.append(this.version?this.version.toString():"null"),u.append(`
 maskPattern: `),u.append(this.maskPattern.toString()),this.matrix?(u.append(`
 matrix:
`),u.append(this.matrix.toString())):u.append(`
 matrix: null
`),u.append(`>>
`),u.toString()}setMode(u){this.mode=u}setECLevel(u){this.ecLevel=u}setVersion(u){this.version=u}setMaskPattern(u){this.maskPattern=u}setMatrix(u){this.matrix=u}static isValidMaskPattern(u){return u>=0&&u<ci.NUM_MASK_PATTERNS}}ci.NUM_MASK_PATTERNS=8;class hr extends d{}hr.kind="WriterException";class Ht{constructor(){}static clearMatrix(u){u.clear(255)}static buildMatrix(u,p,v,S,O){Ht.clearMatrix(O),Ht.embedBasicPatterns(v,O),Ht.embedTypeInfo(p,S,O),Ht.maybeEmbedVersionInfo(v,O),Ht.embedDataBits(u,S,O)}static embedBasicPatterns(u,p){Ht.embedPositionDetectionPatternsAndSeparators(p),Ht.embedDarkDotAtLeftBottomCorner(p),Ht.maybeEmbedPositionAdjustmentPatterns(u,p),Ht.embedTimingPatterns(p)}static embedTypeInfo(u,p,v){const S=new D;Ht.makeTypeInfoBits(u,p,S);for(let O=0,T=S.getSize();O<T;++O){const P=S.get(S.getSize()-1-O),F=Ht.TYPE_INFO_COORDINATES[O],j=F[0],Z=F[1];if(v.setBoolean(j,Z,P),O<8){const re=v.getWidth()-O-1,ae=8;v.setBoolean(re,ae,P)}else{const ae=v.getHeight()-7+(O-8);v.setBoolean(8,ae,P)}}}static maybeEmbedVersionInfo(u,p){if(u.getVersionNumber()<7)return;const v=new D;Ht.makeVersionInfoBits(u,v);let S=6*3-1;for(let O=0;O<6;++O)for(let T=0;T<3;++T){const P=v.get(S);S--,p.setBoolean(O,p.getHeight()-11+T,P),p.setBoolean(p.getHeight()-11+T,O,P)}}static embedDataBits(u,p,v){let S=0,O=-1,T=v.getWidth()-1,P=v.getHeight()-1;for(;T>0;){for(T===6&&(T-=1);P>=0&&P<v.getHeight();){for(let F=0;F<2;++F){const j=T-F;if(!Ht.isEmpty(v.get(j,P)))continue;let Z;S<u.getSize()?(Z=u.get(S),++S):Z=!1,p!==255&&wr.getDataMaskBit(p,j,P)&&(Z=!Z),v.setBoolean(j,P,Z)}P+=O}O=-O,P+=O,T-=2}if(S!==u.getSize())throw new hr("Not all bits consumed: "+S+"/"+u.getSize())}static findMSBSet(u){return 32-x.numberOfLeadingZeros(u)}static calculateBCHCode(u,p){if(p===0)throw new g("0 polynomial");const v=Ht.findMSBSet(p);for(u<<=v-1;Ht.findMSBSet(u)>=v;)u^=p<<Ht.findMSBSet(u)-v;return u}static makeTypeInfoBits(u,p,v){if(!ci.isValidMaskPattern(p))throw new hr("Invalid mask pattern");const S=u.getBits()<<3|p;v.appendBits(S,5);const O=Ht.calculateBCHCode(S,Ht.TYPE_INFO_POLY);v.appendBits(O,10);const T=new D;if(T.appendBits(Ht.TYPE_INFO_MASK_PATTERN,15),v.xor(T),v.getSize()!==15)throw new hr("should not happen but we got: "+v.getSize())}static makeVersionInfoBits(u,p){p.appendBits(u.getVersionNumber(),6);const v=Ht.calculateBCHCode(u.getVersionNumber(),Ht.VERSION_INFO_POLY);if(p.appendBits(v,12),p.getSize()!==18)throw new hr("should not happen but we got: "+p.getSize())}static isEmpty(u){return u===255}static embedTimingPatterns(u){for(let p=8;p<u.getWidth()-8;++p){const v=(p+1)%2;Ht.isEmpty(u.get(p,6))&&u.setNumber(p,6,v),Ht.isEmpty(u.get(6,p))&&u.setNumber(6,p,v)}}static embedDarkDotAtLeftBottomCorner(u){if(u.get(8,u.getHeight()-8)===0)throw new hr;u.setNumber(8,u.getHeight()-8,1)}static embedHorizontalSeparationPattern(u,p,v){for(let S=0;S<8;++S){if(!Ht.isEmpty(v.get(u+S,p)))throw new hr;v.setNumber(u+S,p,0)}}static embedVerticalSeparationPattern(u,p,v){for(let S=0;S<7;++S){if(!Ht.isEmpty(v.get(u,p+S)))throw new hr;v.setNumber(u,p+S,0)}}static embedPositionAdjustmentPattern(u,p,v){for(let S=0;S<5;++S){const O=Ht.POSITION_ADJUSTMENT_PATTERN[S];for(let T=0;T<5;++T)v.setNumber(u+T,p+S,O[T])}}static embedPositionDetectionPattern(u,p,v){for(let S=0;S<7;++S){const O=Ht.POSITION_DETECTION_PATTERN[S];for(let T=0;T<7;++T)v.setNumber(u+T,p+S,O[T])}}static embedPositionDetectionPatternsAndSeparators(u){const p=Ht.POSITION_DETECTION_PATTERN[0].length;Ht.embedPositionDetectionPattern(0,0,u),Ht.embedPositionDetectionPattern(u.getWidth()-p,0,u),Ht.embedPositionDetectionPattern(0,u.getWidth()-p,u);const v=8;Ht.embedHorizontalSeparationPattern(0,v-1,u),Ht.embedHorizontalSeparationPattern(u.getWidth()-v,v-1,u),Ht.embedHorizontalSeparationPattern(0,u.getWidth()-v,u);const S=7;Ht.embedVerticalSeparationPattern(S,0,u),Ht.embedVerticalSeparationPattern(u.getHeight()-S-1,0,u),Ht.embedVerticalSeparationPattern(S,u.getHeight()-S,u)}static maybeEmbedPositionAdjustmentPatterns(u,p){if(u.getVersionNumber()<2)return;const v=u.getVersionNumber()-1,S=Ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[v];for(let O=0,T=S.length;O!==T;O++){const P=S[O];if(P>=0)for(let F=0;F!==T;F++){const j=S[F];j>=0&&Ht.isEmpty(p.get(j,P))&&Ht.embedPositionAdjustmentPattern(j-2,P-2,p)}}}}Ht.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ht.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ht.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ht.VERSION_INFO_POLY=7973,Ht.TYPE_INFO_POLY=1335,Ht.TYPE_INFO_MASK_PATTERN=21522;class si{constructor(u,p){this.dataBytes=u,this.errorCorrectionBytes=p}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pr{constructor(){}static calculateMaskPenalty(u){return wr.applyMaskPenaltyRule1(u)+wr.applyMaskPenaltyRule2(u)+wr.applyMaskPenaltyRule3(u)+wr.applyMaskPenaltyRule4(u)}static encode(u,p,v=null){let S=pr.DEFAULT_BYTE_MODE_ENCODING;const O=v!==null&&v.get(mr.CHARACTER_SET)!==void 0;O&&(S=v.get(mr.CHARACTER_SET).toString());const T=this.chooseMode(u,S),P=new D;if(T===jt.BYTE&&(O||pr.DEFAULT_BYTE_MODE_ENCODING!==S)){const wt=I.getCharacterSetECIByName(S);wt!==void 0&&this.appendECI(wt,P)}this.appendModeInfo(T,P);const F=new D;this.appendBytes(u,T,F,S);let j;if(v!==null&&v.get(mr.QR_VERSION)!==void 0){const wt=Number.parseInt(v.get(mr.QR_VERSION).toString(),10);j=zt.getVersionForNumber(wt);const bt=this.calculateBitsNeeded(T,P,F,j);if(!this.willFit(bt,j,p))throw new hr("Data too big for requested version")}else j=this.recommendVersion(p,T,P,F);const Z=new D;Z.appendBitArray(P);const re=T===jt.BYTE?F.getSizeInBytes():u.length;this.appendLengthInfo(re,j,T,Z),Z.appendBitArray(F);const ae=j.getECBlocksForLevel(p),ve=j.getTotalCodewords()-ae.getTotalECCodewords();this.terminateBits(ve,Z);const Me=this.interleaveWithECBytes(Z,j.getTotalCodewords(),ve,ae.getNumBlocks()),Be=new ci;Be.setECLevel(p),Be.setMode(T),Be.setVersion(j);const Ue=j.getDimensionForVersion(),Qe=new vi(Ue,Ue),xt=this.chooseMaskPattern(Me,p,j,Qe);return Be.setMaskPattern(xt),Ht.buildMatrix(Me,p,j,xt,Qe),Be.setMatrix(Qe),Be}static recommendVersion(u,p,v,S){const O=this.calculateBitsNeeded(p,v,S,zt.getVersionForNumber(1)),T=this.chooseVersion(O,u),P=this.calculateBitsNeeded(p,v,S,T);return this.chooseVersion(P,u)}static calculateBitsNeeded(u,p,v,S){return p.getSize()+u.getCharacterCountBits(S)+v.getSize()}static getAlphanumericCode(u){return u<pr.ALPHANUMERIC_TABLE.length?pr.ALPHANUMERIC_TABLE[u]:-1}static chooseMode(u,p=null){if(I.SJIS.getName()===p&&this.isOnlyDoubleByteKanji(u))return jt.KANJI;let v=!1,S=!1;for(let O=0,T=u.length;O<T;++O){const P=u.charAt(O);if(pr.isDigit(P))v=!0;else if(this.getAlphanumericCode(P.charCodeAt(0))!==-1)S=!0;else return jt.BYTE}return S?jt.ALPHANUMERIC:v?jt.NUMERIC:jt.BYTE}static isOnlyDoubleByteKanji(u){let p;try{p=N.encode(u,I.SJIS)}catch{return!1}const v=p.length;if(v%2!==0)return!1;for(let S=0;S<v;S+=2){const O=p[S]&255;if((O<129||O>159)&&(O<224||O>235))return!1}return!0}static chooseMaskPattern(u,p,v,S){let O=Number.MAX_SAFE_INTEGER,T=-1;for(let P=0;P<ci.NUM_MASK_PATTERNS;P++){Ht.buildMatrix(u,p,v,P,S);let F=this.calculateMaskPenalty(S);F<O&&(O=F,T=P)}return T}static chooseVersion(u,p){for(let v=1;v<=40;v++){const S=zt.getVersionForNumber(v);if(pr.willFit(u,S,p))return S}throw new hr("Data too big")}static willFit(u,p,v){const S=p.getTotalCodewords(),T=p.getECBlocksForLevel(v).getTotalECCodewords(),P=S-T,F=(u+7)/8;return P>=F}static terminateBits(u,p){const v=u*8;if(p.getSize()>v)throw new hr("data bits cannot fit in the QR Code"+p.getSize()+" > "+v);for(let T=0;T<4&&p.getSize()<v;++T)p.appendBit(!1);const S=p.getSize()&7;if(S>0)for(let T=S;T<8;T++)p.appendBit(!1);const O=u-p.getSizeInBytes();for(let T=0;T<O;++T)p.appendBits(T&1?17:236,8);if(p.getSize()!==v)throw new hr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(u,p,v,S,O,T){if(S>=v)throw new hr("Block ID too large");const P=u%v,F=v-P,j=Math.floor(u/v),Z=j+1,re=Math.floor(p/v),ae=re+1,ve=j-re,Me=Z-ae;if(ve!==Me)throw new hr("EC bytes mismatch");if(v!==F+P)throw new hr("RS blocks mismatch");if(u!==(re+ve)*F+(ae+Me)*P)throw new hr("Total bytes mismatch");S<F?(O[0]=re,T[0]=ve):(O[0]=ae,T[0]=Me)}static interleaveWithECBytes(u,p,v,S){if(u.getSizeInBytes()!==v)throw new hr("Number of bits and data bytes does not match");let O=0,T=0,P=0;const F=new Array;for(let Z=0;Z<S;++Z){const re=new Int32Array(1),ae=new Int32Array(1);pr.getNumDataBytesAndNumECBytesForBlockID(p,v,S,Z,re,ae);const ve=re[0],Me=new Uint8Array(ve);u.toBytes(8*O,Me,0,ve);const Be=pr.generateECBytes(Me,ae[0]);F.push(new si(Me,Be)),T=Math.max(T,ve),P=Math.max(P,Be.length),O+=re[0]}if(v!==O)throw new hr("Data bytes does not match offset");const j=new D;for(let Z=0;Z<T;++Z)for(const re of F){const ae=re.getDataBytes();Z<ae.length&&j.appendBits(ae[Z],8)}for(let Z=0;Z<P;++Z)for(const re of F){const ae=re.getErrorCorrectionBytes();Z<ae.length&&j.appendBits(ae[Z],8)}if(p!==j.getSizeInBytes())throw new hr("Interleaving error: "+p+" and "+j.getSizeInBytes()+" differ.");return j}static generateECBytes(u,p){const v=u.length,S=new Int32Array(v+p);for(let T=0;T<v;T++)S[T]=u[T]&255;new Wr(ye.QR_CODE_FIELD_256).encode(S,p);const O=new Uint8Array(p);for(let T=0;T<p;T++)O[T]=S[v+T];return O}static appendModeInfo(u,p){p.appendBits(u.getBits(),4)}static appendLengthInfo(u,p,v,S){const O=v.getCharacterCountBits(p);if(u>=1<<O)throw new hr(u+" is bigger than "+((1<<O)-1));S.appendBits(u,O)}static appendBytes(u,p,v,S){switch(p){case jt.NUMERIC:pr.appendNumericBytes(u,v);break;case jt.ALPHANUMERIC:pr.appendAlphanumericBytes(u,v);break;case jt.BYTE:pr.append8BitBytes(u,v,S);break;case jt.KANJI:pr.appendKanjiBytes(u,v);break;default:throw new hr("Invalid mode: "+p)}}static getDigit(u){return u.charCodeAt(0)-48}static isDigit(u){const p=pr.getDigit(u);return p>=0&&p<=9}static appendNumericBytes(u,p){const v=u.length;let S=0;for(;S<v;){const O=pr.getDigit(u.charAt(S));if(S+2<v){const T=pr.getDigit(u.charAt(S+1)),P=pr.getDigit(u.charAt(S+2));p.appendBits(O*100+T*10+P,10),S+=3}else if(S+1<v){const T=pr.getDigit(u.charAt(S+1));p.appendBits(O*10+T,7),S+=2}else p.appendBits(O,4),S++}}static appendAlphanumericBytes(u,p){const v=u.length;let S=0;for(;S<v;){const O=pr.getAlphanumericCode(u.charCodeAt(S));if(O===-1)throw new hr;if(S+1<v){const T=pr.getAlphanumericCode(u.charCodeAt(S+1));if(T===-1)throw new hr;p.appendBits(O*45+T,11),S+=2}else p.appendBits(O,6),S++}}static append8BitBytes(u,p,v){let S;try{S=N.encode(u,v)}catch(O){throw new hr(O)}for(let O=0,T=S.length;O!==T;O++){const P=S[O];p.appendBits(P,8)}}static appendKanjiBytes(u,p){let v;try{v=N.encode(u,I.SJIS)}catch(O){throw new hr(O)}const S=v.length;for(let O=0;O<S;O+=2){const T=v[O]&255,P=v[O+1]&255,F=T<<8&4294967295|P;let j=-1;if(F>=33088&&F<=40956?j=F-33088:F>=57408&&F<=60351&&(j=F-49472),j===-1)throw new hr("Invalid byte sequence");const Z=(j>>8)*192+(j&255);p.appendBits(Z,13)}}static appendECI(u,p){p.appendBits(jt.ECI.getBits(),4),p.appendBits(u.getValue(),8)}}pr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pr.DEFAULT_BYTE_MODE_ENCODING=I.UTF8.getName();class ti{write(u,p,v,S=null){if(u.length===0)throw new g("Found empty contents");if(p<0||v<0)throw new g("Requested dimensions are too small: "+p+"x"+v);let O=br.L,T=ti.QUIET_ZONE_SIZE;S!==null&&(S.get(mr.ERROR_CORRECTION)!==void 0&&(O=br.fromString(S.get(mr.ERROR_CORRECTION).toString())),S.get(mr.MARGIN)!==void 0&&(T=Number.parseInt(S.get(mr.MARGIN).toString(),10)));const P=pr.encode(u,O,S);return this.renderResult(P,p,v,T)}writeToDom(u,p,v,S,O=null){typeof u=="string"&&(u=document.querySelector(u));const T=this.write(p,v,S,O);u&&u.appendChild(T)}renderResult(u,p,v,S){const O=u.getMatrix();if(O===null)throw new Oe;const T=O.getWidth(),P=O.getHeight(),F=T+S*2,j=P+S*2,Z=Math.max(p,F),re=Math.max(v,j),ae=Math.min(Math.floor(Z/F),Math.floor(re/j)),ve=Math.floor((Z-T*ae)/2),Me=Math.floor((re-P*ae)/2),Be=this.createSVGElement(Z,re);for(let Ue=0,Qe=Me;Ue<P;Ue++,Qe+=ae)for(let xt=0,wt=ve;xt<T;xt++,wt+=ae)if(O.get(xt,Ue)===1){const bt=this.createSvgRectElement(wt,Qe,ae,ae);Be.appendChild(bt)}return Be}createSVGElement(u,p){const v=document.createElementNS(ti.SVG_NS,"svg");return v.setAttributeNS(null,"height",u.toString()),v.setAttributeNS(null,"width",p.toString()),v}createSvgRectElement(u,p,v,S){const O=document.createElementNS(ti.SVG_NS,"rect");return O.setAttributeNS(null,"x",u.toString()),O.setAttributeNS(null,"y",p.toString()),O.setAttributeNS(null,"height",v.toString()),O.setAttributeNS(null,"width",S.toString()),O.setAttributeNS(null,"fill","#000000"),O}}ti.QUIET_ZONE_SIZE=4,ti.SVG_NS="http://www.w3.org/2000/svg";class hi{encode(u,p,v,S,O){if(u.length===0)throw new g("Found empty contents");if(p!==Ee.QR_CODE)throw new g("Can only encode QR_CODE, but got "+p);if(v<0||S<0)throw new g(`Requested dimensions are too small: ${v}x${S}`);let T=br.L,P=hi.QUIET_ZONE_SIZE;O!==null&&(O.get(mr.ERROR_CORRECTION)!==void 0&&(T=br.fromString(O.get(mr.ERROR_CORRECTION).toString())),O.get(mr.MARGIN)!==void 0&&(P=Number.parseInt(O.get(mr.MARGIN).toString(),10)));const F=pr.encode(u,T,O);return hi.renderResult(F,v,S,P)}static renderResult(u,p,v,S){const O=u.getMatrix();if(O===null)throw new Oe;const T=O.getWidth(),P=O.getHeight(),F=T+S*2,j=P+S*2,Z=Math.max(p,F),re=Math.max(v,j),ae=Math.min(Math.floor(Z/F),Math.floor(re/j)),ve=Math.floor((Z-T*ae)/2),Me=Math.floor((re-P*ae)/2),Be=new z(Z,re);for(let Ue=0,Qe=Me;Ue<P;Ue++,Qe+=ae)for(let xt=0,wt=ve;xt<T;xt++,wt+=ae)O.get(xt,Ue)===1&&Be.setRegion(wt,Qe,ae,ae);return Be}}hi.QUIET_ZONE_SIZE=4;class Pi{encode(u,p,v,S,O){let T;switch(p){case Ee.QR_CODE:T=new hi;break;default:throw new g("No encoder available for format "+p)}return T.encode(u,p,v,S,O)}}class Kr extends G{constructor(u,p,v,S,O,T,P,F){if(super(T,P),this.yuvData=u,this.dataWidth=p,this.dataHeight=v,this.left=S,this.top=O,S+T>p||O+P>v)throw new g("Crop rectangle does not fit within image data.");F&&this.reverseHorizontal(T,P)}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const v=this.getWidth();(p==null||p.length<v)&&(p=new Uint8ClampedArray(v));const S=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,S,p,0,v),p}getMatrix(){const u=this.getWidth(),p=this.getHeight();if(u===this.dataWidth&&p===this.dataHeight)return this.yuvData;const v=u*p,S=new Uint8ClampedArray(v);let O=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.yuvData,O,S,0,v),S;for(let T=0;T<p;T++){const P=T*u;w.arraycopy(this.yuvData,O,S,P,u),O+=this.dataWidth}return S}isCropSupported(){return!0}crop(u,p,v,S){return new Kr(this.yuvData,this.dataWidth,this.dataHeight,this.left+u,this.top+p,v,S,!1)}renderThumbnail(){const u=this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR,p=this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR,v=new Int32Array(u*p),S=this.yuvData;let O=this.top*this.dataWidth+this.left;for(let T=0;T<p;T++){const P=T*u;for(let F=0;F<u;F++){const j=S[O+F*Kr.THUMBNAIL_SCALE_FACTOR]&255;v[P+F]=4278190080|j*65793}O+=this.dataWidth*Kr.THUMBNAIL_SCALE_FACTOR}return v}getThumbnailWidth(){return this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(u,p){const v=this.yuvData;for(let S=0,O=this.top*this.dataWidth+this.left;S<p;S++,O+=this.dataWidth){const T=O+u/2;for(let P=O,F=O+u-1;P<T;P++,F--){const j=v[P];v[P]=v[F],v[F]=j}}}invert(){return new q(this)}}Kr.THUMBNAIL_SCALE_FACTOR=2;class Ci extends G{constructor(u,p,v,S,O,T,P){if(super(p,v),this.dataWidth=S,this.dataHeight=O,this.left=T,this.top=P,u.BYTES_PER_ELEMENT===4){const F=p*v,j=new Uint8ClampedArray(F);for(let Z=0;Z<F;Z++){const re=u[Z],ae=re>>16&255,ve=re>>7&510,Me=re&255;j[Z]=(ae+ve+Me)/4&255}this.luminances=j}else this.luminances=u;if(S===void 0&&(this.dataWidth=p),O===void 0&&(this.dataHeight=v),T===void 0&&(this.left=0),P===void 0&&(this.top=0),this.left+p>this.dataWidth||this.top+v>this.dataHeight)throw new g("Crop rectangle does not fit within image data.")}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const v=this.getWidth();(p==null||p.length<v)&&(p=new Uint8ClampedArray(v));const S=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,S,p,0,v),p}getMatrix(){const u=this.getWidth(),p=this.getHeight();if(u===this.dataWidth&&p===this.dataHeight)return this.luminances;const v=u*p,S=new Uint8ClampedArray(v);let O=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.luminances,O,S,0,v),S;for(let T=0;T<p;T++){const P=T*u;w.arraycopy(this.luminances,O,S,P,u),O+=this.dataWidth}return S}isCropSupported(){return!0}crop(u,p,v,S){return new Ci(this.luminances,v,S,this.dataWidth,this.dataHeight,this.left+u,this.top+p)}invert(){return new q(this)}}class Ii extends I{static forName(u){return this.getCharacterSetECIByName(u)}}class gi{}gi.ISO_8859_1=I.ISO8859_1;class ki{isCompact(){return this.compact}setCompact(u){this.compact=u}getSize(){return this.size}setSize(u){this.size=u}getLayers(){return this.layers}setLayers(u){this.layers=u}getCodeWords(){return this.codeWords}setCodeWords(u){this.codeWords=u}getMatrix(){return this.matrix}setMatrix(u){this.matrix=u}}class Bi{static singletonList(u){return[u]}static min(u,p){return u.sort(p)[0]}}class Ui{constructor(u){this.previous=u}getPrevious(){return this.previous}}class ui extends Ui{constructor(u,p,v){super(u),this.value=p,this.bitCount=v}appendTo(u,p){u.appendBits(this.value,this.bitCount)}add(u,p){return new ui(this,u,p)}addBinaryShift(u,p){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ui(this,u,p)}toString(){let u=this.value&(1<<this.bitCount)-1;return u|=1<<this.bitCount,"<"+x.toBinaryString(u|1<<this.bitCount).substring(1)+">"}}class Rr extends ui{constructor(u,p,v){super(u,0,0),this.binaryShiftStart=p,this.binaryShiftByteCount=v}appendTo(u,p){for(let v=0;v<this.binaryShiftByteCount;v++)(v===0||v===31&&this.binaryShiftByteCount<=62)&&(u.appendBits(31,5),this.binaryShiftByteCount>62?u.appendBits(this.binaryShiftByteCount-31,16):v===0?u.appendBits(Math.min(this.binaryShiftByteCount,31),5):u.appendBits(this.binaryShiftByteCount-31,5)),u.appendBits(p[this.binaryShiftStart+v],8)}addBinaryShift(u,p){return new Rr(this,u,p)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ni(te,u,p){return new Rr(te,u,p)}function Si(te,u,p){return new ui(te,u,p)}const en=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_i=0,Gi=1,oi=2,nn=3,di=4,ln=new ui(null,0,0),tn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function cn(te){for(let u of te)y.fill(u,-1);return te[_i][di]=0,te[Gi][di]=0,te[Gi][_i]=28,te[nn][di]=0,te[oi][di]=0,te[oi][_i]=15,te}const rn=cn(y.createInt32Array(6,6));class mi{constructor(u,p,v,S){this.token=u,this.mode=p,this.binaryShiftByteCount=v,this.bitCount=S}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(u,p){let v=this.bitCount,S=this.token;if(u!==this.mode){let T=tn[this.mode][u];S=Si(S,T&65535,T>>16),v+=T>>16}let O=u===oi?4:5;return S=Si(S,p,O),new mi(S,u,0,v+O)}shiftAndAppend(u,p){let v=this.token,S=this.mode===oi?4:5;return v=Si(v,rn[this.mode][u],S),v=Si(v,p,5),new mi(v,this.mode,0,this.bitCount+S+5)}addBinaryShiftChar(u){let p=this.token,v=this.mode,S=this.bitCount;if(this.mode===di||this.mode===oi){let P=tn[v][_i];p=Si(p,P&65535,P>>16),S+=P>>16,v=_i}let O=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,T=new mi(p,v,this.binaryShiftByteCount+1,S+O);return T.binaryShiftByteCount===2078&&(T=T.endBinaryShift(u+1)),T}endBinaryShift(u){if(this.binaryShiftByteCount===0)return this;let p=this.token;return p=Ni(p,u-this.binaryShiftByteCount,this.binaryShiftByteCount),new mi(p,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(u){let p=this.bitCount+(tn[this.mode][u.mode]>>16);return this.binaryShiftByteCount<u.binaryShiftByteCount?p+=mi.calculateBinaryShiftCost(u)-mi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>u.binaryShiftByteCount&&u.binaryShiftByteCount>0&&(p+=10),p<=u.bitCount}toBitArray(u){let p=[];for(let S=this.endBinaryShift(u.length).token;S!==null;S=S.getPrevious())p.unshift(S);let v=new D;for(const S of p)S.appendTo(v,u);return v}toString(){return B.format("%s bits=%d bytes=%d",en[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(u){return u.binaryShiftByteCount>62?21:u.binaryShiftByteCount>31?20:u.binaryShiftByteCount>0?10:0}}mi.INITIAL_STATE=new mi(ln,_i,0,0);function hn(te){const u=B.getCharCode(" "),p=B.getCharCode("."),v=B.getCharCode(",");te[_i][u]=1;const S=B.getCharCode("Z"),O=B.getCharCode("A");for(let ae=O;ae<=S;ae++)te[_i][ae]=ae-O+2;te[Gi][u]=1;const T=B.getCharCode("z"),P=B.getCharCode("a");for(let ae=P;ae<=T;ae++)te[Gi][ae]=ae-P+2;te[oi][u]=1;const F=B.getCharCode("9"),j=B.getCharCode("0");for(let ae=j;ae<=F;ae++)te[oi][ae]=ae-j+2;te[oi][v]=12,te[oi][p]=13;const Z=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ae=0;ae<Z.length;ae++)te[nn][B.getCharCode(Z[ae])]=ae;const re=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ae=0;ae<re.length;ae++)B.getCharCode(re[ae])>0&&(te[di][B.getCharCode(re[ae])]=ae);return te}const qi=hn(y.createInt32Array(5,256));class Fi{constructor(u){this.text=u}encode(){const u=B.getCharCode(" "),p=B.getCharCode(`
`);let v=Bi.singletonList(mi.INITIAL_STATE);for(let O=0;O<this.text.length;O++){let T,P=O+1<this.text.length?this.text[O+1]:0;switch(this.text[O]){case B.getCharCode("\r"):T=P===p?2:0;break;case B.getCharCode("."):T=P===u?3:0;break;case B.getCharCode(","):T=P===u?4:0;break;case B.getCharCode(":"):T=P===u?5:0;break;default:T=0}T>0?(v=Fi.updateStateListForPair(v,O,T),O++):v=this.updateStateListForChar(v,O)}return Bi.min(v,(O,T)=>O.getBitCount()-T.getBitCount()).toBitArray(this.text)}updateStateListForChar(u,p){const v=[];for(let S of u)this.updateStateForChar(S,p,v);return Fi.simplifyStates(v)}updateStateForChar(u,p,v){let S=this.text[p]&255,O=qi[u.getMode()][S]>0,T=null;for(let P=0;P<=di;P++){let F=qi[P][S];if(F>0){if(T==null&&(T=u.endBinaryShift(p)),!O||P===u.getMode()||P===oi){const j=T.latchAndAppend(P,F);v.push(j)}if(!O&&rn[u.getMode()][P]>=0){const j=T.shiftAndAppend(P,F);v.push(j)}}}if(u.getBinaryShiftByteCount()>0||qi[u.getMode()][S]===0){let P=u.addBinaryShiftChar(p);v.push(P)}}static updateStateListForPair(u,p,v){const S=[];for(let O of u)this.updateStateForPair(O,p,v,S);return this.simplifyStates(S)}static updateStateForPair(u,p,v,S){let O=u.endBinaryShift(p);if(S.push(O.latchAndAppend(di,v)),u.getMode()!==di&&S.push(O.shiftAndAppend(di,v)),v===3||v===4){let T=O.latchAndAppend(oi,16-v).latchAndAppend(oi,1);S.push(T)}if(u.getBinaryShiftByteCount()>0){let T=u.addBinaryShiftChar(p).addBinaryShiftChar(p+1);S.push(T)}}static simplifyStates(u){let p=[];for(const v of u){let S=!0;for(const O of p){if(O.isBetterThanOrEqualTo(v)){S=!1;break}v.isBetterThanOrEqualTo(O)&&(p=p.filter(T=>T!==O))}S&&p.push(v)}return p}}class vr{constructor(){}static encodeBytes(u){return vr.encode(u,vr.DEFAULT_EC_PERCENT,vr.DEFAULT_AZTEC_LAYERS)}static encode(u,p,v){let S=new Fi(u).encode(),O=x.truncDivision(S.getSize()*p,100)+11,T=S.getSize()+O,P,F,j,Z,re;if(v!==vr.DEFAULT_AZTEC_LAYERS){if(P=v<0,F=Math.abs(v),F>(P?vr.MAX_NB_BITS_COMPACT:vr.MAX_NB_BITS))throw new g(B.format("Illegal value %s for layers",v));j=vr.totalBitsInLayer(F,P),Z=vr.WORD_SIZE[F];let bt=j-j%Z;if(re=vr.stuffBits(S,Z),re.getSize()+O>bt)throw new g("Data to large for user specified layer");if(P&&re.getSize()>Z*64)throw new g("Data to large for user specified layer")}else{Z=0,re=null;for(let bt=0;;bt++){if(bt>vr.MAX_NB_BITS)throw new g("Data too large for an Aztec code");if(P=bt<=3,F=P?bt+1:bt,j=vr.totalBitsInLayer(F,P),T>j)continue;(re==null||Z!==vr.WORD_SIZE[F])&&(Z=vr.WORD_SIZE[F],re=vr.stuffBits(S,Z));let ur=j-j%Z;if(!(P&&re.getSize()>Z*64)&&re.getSize()+O<=ur)break}}let ae=vr.generateCheckWords(re,j,Z),ve=re.getSize()/Z,Me=vr.generateModeMessage(P,F,ve),Be=(P?11:14)+F*4,Ue=new Int32Array(Be),Qe;if(P){Qe=Be;for(let bt=0;bt<Ue.length;bt++)Ue[bt]=bt}else{Qe=Be+1+2*x.truncDivision(x.truncDivision(Be,2)-1,15);let bt=x.truncDivision(Be,2),ur=x.truncDivision(Qe,2);for(let nr=0;nr<bt;nr++){let Ur=nr+x.truncDivision(nr,15);Ue[bt-nr-1]=ur-Ur-1,Ue[bt+nr]=ur+Ur+1}}let xt=new z(Qe);for(let bt=0,ur=0;bt<F;bt++){let nr=(F-bt)*4+(P?9:12);for(let Ur=0;Ur<nr;Ur++){let ri=Ur*2;for(let ii=0;ii<2;ii++)ae.get(ur+ri+ii)&&xt.set(Ue[bt*2+ii],Ue[bt*2+Ur]),ae.get(ur+nr*2+ri+ii)&&xt.set(Ue[bt*2+Ur],Ue[Be-1-bt*2-ii]),ae.get(ur+nr*4+ri+ii)&&xt.set(Ue[Be-1-bt*2-ii],Ue[Be-1-bt*2-Ur]),ae.get(ur+nr*6+ri+ii)&&xt.set(Ue[Be-1-bt*2-Ur],Ue[bt*2+ii])}ur+=nr*8}if(vr.drawModeMessage(xt,P,Qe,Me),P)vr.drawBullsEye(xt,x.truncDivision(Qe,2),5);else{vr.drawBullsEye(xt,x.truncDivision(Qe,2),7);for(let bt=0,ur=0;bt<x.truncDivision(Be,2)-1;bt+=15,ur+=16)for(let nr=x.truncDivision(Qe,2)&1;nr<Qe;nr+=2)xt.set(x.truncDivision(Qe,2)-ur,nr),xt.set(x.truncDivision(Qe,2)+ur,nr),xt.set(nr,x.truncDivision(Qe,2)-ur),xt.set(nr,x.truncDivision(Qe,2)+ur)}let wt=new ki;return wt.setCompact(P),wt.setSize(Qe),wt.setLayers(F),wt.setCodeWords(ve),wt.setMatrix(xt),wt}static drawBullsEye(u,p,v){for(let S=0;S<v;S+=2)for(let O=p-S;O<=p+S;O++)u.set(O,p-S),u.set(O,p+S),u.set(p-S,O),u.set(p+S,O);u.set(p-v,p-v),u.set(p-v+1,p-v),u.set(p-v,p-v+1),u.set(p+v,p-v),u.set(p+v,p-v+1),u.set(p+v,p+v-1)}static generateModeMessage(u,p,v){let S=new D;return u?(S.appendBits(p-1,2),S.appendBits(v-1,6),S=vr.generateCheckWords(S,28,4)):(S.appendBits(p-1,5),S.appendBits(v-1,11),S=vr.generateCheckWords(S,40,4)),S}static drawModeMessage(u,p,v,S){let O=x.truncDivision(v,2);if(p)for(let T=0;T<7;T++){let P=O-3+T;S.get(T)&&u.set(P,O-5),S.get(T+7)&&u.set(O+5,P),S.get(20-T)&&u.set(P,O+5),S.get(27-T)&&u.set(O-5,P)}else for(let T=0;T<10;T++){let P=O-5+T+x.truncDivision(T,5);S.get(T)&&u.set(P,O-7),S.get(T+10)&&u.set(O+7,P),S.get(29-T)&&u.set(P,O+7),S.get(39-T)&&u.set(O-7,P)}}static generateCheckWords(u,p,v){let S=u.getSize()/v,O=new Wr(vr.getGF(v)),T=x.truncDivision(p,v),P=vr.bitsToWords(u,v,T);O.encode(P,T-S);let F=p%v,j=new D;j.appendBits(0,F);for(const Z of Array.from(P))j.appendBits(Z,v);return j}static bitsToWords(u,p,v){let S=new Int32Array(v),O,T;for(O=0,T=u.getSize()/p;O<T;O++){let P=0;for(let F=0;F<p;F++)P|=u.get(O*p+F)?1<<p-F-1:0;S[O]=P}return S}static getGF(u){switch(u){case 4:return ye.AZTEC_PARAM;case 6:return ye.AZTEC_DATA_6;case 8:return ye.AZTEC_DATA_8;case 10:return ye.AZTEC_DATA_10;case 12:return ye.AZTEC_DATA_12;default:throw new g("Unsupported word size "+u)}}static stuffBits(u,p){let v=new D,S=u.getSize(),O=(1<<p)-2;for(let T=0;T<S;T+=p){let P=0;for(let F=0;F<p;F++)(T+F>=S||u.get(T+F))&&(P|=1<<p-1-F);(P&O)===O?(v.appendBits(P&O,p),T--):P&O?v.appendBits(P,p):(v.appendBits(P|1,p),T--)}return v}static totalBitsInLayer(u,p){return((p?88:112)+16*u)*u}}vr.DEFAULT_EC_PERCENT=33,vr.DEFAULT_AZTEC_LAYERS=0,vr.MAX_NB_BITS=32,vr.MAX_NB_BITS_COMPACT=4,vr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qi{encode(u,p,v,S){return this.encodeWithHints(u,p,v,S,null)}encodeWithHints(u,p,v,S,O){let T=gi.ISO_8859_1,P=vr.DEFAULT_EC_PERCENT,F=vr.DEFAULT_AZTEC_LAYERS;return O!=null&&(O.has(mr.CHARACTER_SET)&&(T=Ii.forName(O.get(mr.CHARACTER_SET).toString())),O.has(mr.ERROR_CORRECTION)&&(P=x.parseInt(O.get(mr.ERROR_CORRECTION).toString())),O.has(mr.AZTEC_LAYERS)&&(F=x.parseInt(O.get(mr.AZTEC_LAYERS).toString()))),Qi.encodeLayers(u,p,v,S,T,P,F)}static encodeLayers(u,p,v,S,O,T,P){if(p!==Ee.AZTEC)throw new g("Can only encode AZTEC, but got "+p);let F=vr.encode(B.getBytes(u,O),T,P);return Qi.renderResult(F,v,S)}static renderResult(u,p,v){let S=u.getMatrix();if(S==null)throw new Oe;let O=S.getWidth(),T=S.getHeight(),P=Math.max(p,O),F=Math.max(v,T),j=Math.min(P/O,F/T),Z=(P-O*j)/2,re=(F-T*j)/2,ae=new z(P,F);for(let ve=0,Me=re;ve<T;ve++,Me+=j)for(let Be=0,Ue=Z;Be<O;Be++,Ue+=j)S.get(Be,ve)&&ae.setRegion(Ue,Me,j,j);return ae}}r.AbstractExpandedDecoder=_e,r.ArgumentException=f,r.ArithmeticException=Ie,r.AztecCode=ki,r.AztecCodeReader=vt,r.AztecCodeWriter=Qi,r.AztecDecoder=tt,r.AztecDetector=Rt,r.AztecDetectorResult=we,r.AztecEncoder=vr,r.AztecHighLevelEncoder=Fi,r.AztecPoint=Ct,r.BarcodeFormat=Ee,r.Binarizer=A,r.BinaryBitmap=_,r.BitArray=D,r.BitMatrix=z,r.BitSource=Yr,r.BrowserAztecCodeReader=ut,r.BrowserBarcodeReader=Ar,r.BrowserCodeReader=Se,r.BrowserDatamatrixCodeReader=li,r.BrowserMultiFormatReader=Dr,r.BrowserPDF417Reader=Hr,r.BrowserQRCodeReader=lr,r.BrowserQRCodeSvgWriter=ti,r.CharacterSetECI=I,r.ChecksumException=E,r.Code128Reader=Re,r.Code39Reader=it,r.DataMatrixDecodedBitStreamParser=$r,r.DataMatrixReader=Mr,r.DecodeHintType=M,r.DecoderResult=de,r.DefaultGridSampler=Je,r.DetectorResult=Ne,r.EAN13Reader=ft,r.EncodeHintType=mr,r.Exception=d,r.FormatException=L,r.GenericGF=ye,r.GenericGFPoly=Fe,r.GlobalHistogramBinarizer=Q,r.GridSampler=De,r.GridSamplerInstance=Ye,r.HTMLCanvasElementLuminanceSource=Y,r.HybridBinarizer=X,r.ITFReader=lt,r.IllegalArgumentException=g,r.IllegalStateException=Oe,r.InvertedLuminanceSource=q,r.LuminanceSource=G,r.MathUtils=Ze,r.MultiFormatOneDReader=dr,r.MultiFormatReader=gr,r.MultiFormatWriter=Pi,r.NotFoundException=W,r.OneDReader=nt,r.PDF417DecodedBitStreamParser=Te,r.PDF417DecoderErrorCorrection=Vi,r.PDF417Reader=Dt,r.PDF417ResultMetadata=ji,r.PerspectiveTransform=Pe,r.PlanarYUVLuminanceSource=Kr,r.QRCodeByteMatrix=vi,r.QRCodeDataMask=Zr,r.QRCodeDecodedBitStreamParser=Or,r.QRCodeDecoderErrorCorrectionLevel=br,r.QRCodeDecoderFormatInformation=Pr,r.QRCodeEncoder=pr,r.QRCodeEncoderQRCode=ci,r.QRCodeMaskUtil=wr,r.QRCodeMatrixUtil=Ht,r.QRCodeMode=jt,r.QRCodeReader=Lr,r.QRCodeVersion=zt,r.QRCodeWriter=hi,r.RGBLuminanceSource=Ci,r.RSS14Reader=$t,r.RSSExpandedReader=Ge,r.ReaderException=ar,r.ReedSolomonDecoder=Le,r.ReedSolomonEncoder=Wr,r.ReedSolomonException=$e,r.Result=be,r.ResultMetadataType=ne,r.ResultPoint=fe,r.StringUtils=B,r.UnsupportedOperationException=V,r.VideoInputDevice=K,r.WhiteRectangleDetector=ke,r.WriterException=hr,r.ZXingArrays=y,r.ZXingCharset=Ii,r.ZXingInteger=x,r.ZXingStandardCharsets=gi,r.ZXingStringBuilder=H,r.ZXingStringEncoding=N,r.ZXingSystem=w,r.createAbstractExpandedDecoder=Vt,Object.defineProperty(r,"__esModule",{value:!0})})})(zxingJs_umd$1,zxingJs_umd$1.exports);var zxingJs_umdExports=zxingJs_umd$1.exports;const zxingJs_umd=getDefaultExportFromCjs(zxingJs_umdExports),ZXing=_mergeNamespaces({__proto__:null,default:zxingJs_umd},[zxingJs_umdExports]);var ZXingHtml5QrcodeDecoder=function(){function s(e,r,n){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,zxingJs_umdExports.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,zxingJs_umdExports.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,zxingJs_umdExports.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,zxingJs_umdExports.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,zxingJs_umdExports.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,zxingJs_umdExports.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,zxingJs_umdExports.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,zxingJs_umdExports.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,zxingJs_umdExports.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,zxingJs_umdExports.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,zxingJs_umdExports.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,zxingJs_umdExports.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,zxingJs_umdExports.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,zxingJs_umdExports.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,zxingJs_umdExports.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,zxingJs_umdExports.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,zxingJs_umdExports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var o=this.createZXingFormats(e),a=new Map;a.set(zxingJs_umdExports.DecodeHintType.POSSIBLE_FORMATS,o),a.set(zxingJs_umdExports.DecodeHintType.TRY_HARDER,!1),this.hints=a}return s.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,o){try{n(r.decode(e))}catch(a){o(a)}})},s.prototype.decode=function(e){var r=new zxingJs_umdExports.MultiFormatReader(this.verbose,this.hints),n=new zxingJs_umdExports.HTMLCanvasElementLuminanceSource(e),o=new zxingJs_umdExports.BinaryBitmap(new zxingJs_umdExports.HybridBinarizer(n)),a=r.decode(o);return{text:a.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,o){e.set(r,n)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var r=[],n=0,o=e;n<o.length;n++){var a=o[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),__awaiter$4=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$4=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BarcodeDetectorDelegate=function(){function s(e,r,n){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"qr_code"],[Html5QrcodeSupportedFormats.AZTEC,"aztec"],[Html5QrcodeSupportedFormats.CODABAR,"codabar"],[Html5QrcodeSupportedFormats.CODE_39,"code_39"],[Html5QrcodeSupportedFormats.CODE_93,"code_93"],[Html5QrcodeSupportedFormats.CODE_128,"code_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"data_matrix"],[Html5QrcodeSupportedFormats.ITF,"itf"],[Html5QrcodeSupportedFormats.EAN_13,"ean_13"],[Html5QrcodeSupportedFormats.EAN_8,"ean_8"],[Html5QrcodeSupportedFormats.PDF_417,"pdf417"],[Html5QrcodeSupportedFormats.UPC_A,"upc_a"],[Html5QrcodeSupportedFormats.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return __awaiter$4(this,void 0,void 0,function(){var r,n;return __generator$4(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=o.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,o=0,a=e;o<a.length;o++){var c=a[o],l=c.boundingBox.width*c.boundingBox.height;l>n&&(n=l,r=c)}if(!r)throw"No largest barcode found";return r},s.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,o=e;n<o.length;n++){var a=o[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,o){e.set(r,n)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),__awaiter$3=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$3=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Html5QrcodeShim=function(){function s(e,r,n,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&BarcodeDetectorDelegate.isSupported()?(this.primaryDecoder=new BarcodeDetectorDelegate(e,n,o),this.secondaryDecoder=new ZXingHtml5QrcodeDecoder(e,n,o)):this.primaryDecoder=new ZXingHtml5QrcodeDecoder(e,n,o)}return s.prototype.decodeAsync=function(e){return __awaiter$3(this,void 0,void 0,function(){var r;return __generator$3(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n;return __generator$3(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(n=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var o=n[r];e+=o}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),__extends$1=function(){var s=function(e,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},s(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),__awaiter$2=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$2=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},AbstractCameraCapability=function(){function s(e,r){this.name=e,this.track=r}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},s}(),AbstractRangeCameraCapability=function(s){__extends$1(e,s);function e(r,n){return s.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var o={advanced:[n]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(AbstractCameraCapability),ZoomFeatureImpl=function(s){__extends$1(e,s);function e(r){return s.call(this,"zoom",r)||this}return e}(AbstractRangeCameraCapability),TorchFeatureImpl=function(s){__extends$1(e,s);function e(r){return s.call(this,"torch",r)||this}return e}(AbstractCameraCapability),CameraCapabilitiesImpl=function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new ZoomFeatureImpl(this.track)},s.prototype.torchFeature=function(){return new TorchFeatureImpl(this.track)},s}(),RenderedCameraImpl=function(){function s(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,o),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,r,n,o){return __awaiter$2(this,void 0,void 0,function(){var a,c;return __generator$2(this,function(l){switch(l.label){case 0:return a=new s(e,r,o),n.aspectRatio?(c={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:l.sent(),l.label=2;case 2:return a.setupSurface(),[2,a]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var o=e.mediaStream.getVideoTracks(),a=o.length,c=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++c,c>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},s.prototype.getCapabilities=function(){return new CameraCapabilitiesImpl(this.getFirstTrackOrFail())},s}(),CameraImpl=function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,r,n){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(o){return[2,RenderedCameraImpl.create(e,this.mediaStream,r,n)]})})},s.create=function(e){return __awaiter$2(this,void 0,void 0,function(){var r,n;return __generator$2(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=o.sent(),[2,new s(n)]}})})},s}(),__awaiter$1=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$1=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CameraFactory=function(){function s(){}return s.failIfNotSupported=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(r){return[2,CameraImpl.create(e)]})})},s}(),__awaiter=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CameraRetriever=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=Html5QrcodeStrings.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return __awaiter(this,void 0,void 0,function(){var e,r,n,o,a,c,l;return __generator(this,function(h){switch(h.label){case 0:return e=function(d){for(var f=d.getVideoTracks(),g=0,_=f;g<_.length;g++){var E=_[g];E.enabled=!1,E.stop(),d.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),o=[],a=0,c=n;a<c.length;a++)l=c[a],l.kind==="videoinput"&&o.push({id:l.deviceId,label:l.label});return e(r),[2,o]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(a){for(var c=[],l=0,h=a;l<h.length;l++){var d=h[l];d.kind==="video"&&c.push({id:d.id,label:d.label})}e(c)},o=MediaStreamTrack;o.getSources(n)})},s}(),Html5QrcodeScannerState;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Html5QrcodeScannerState||(Html5QrcodeScannerState={}));var StateManagerImpl=function(){function s(){this.state=Html5QrcodeScannerState.NOT_STARTED,this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Html5QrcodeScannerState.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case Html5QrcodeScannerState.UNKNOWN:throw"Transition from unknown is not allowed";case Html5QrcodeScannerState.NOT_STARTED:this.failIfNewStateIs(e,[Html5QrcodeScannerState.PAUSED]);break;case Html5QrcodeScannerState.SCANNING:break;case Html5QrcodeScannerState.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,r){for(var n=0,o=r;n<o.length;n++){var a=o[n];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s}(),StateManagerProxy=function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Html5QrcodeScannerState.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Html5QrcodeScannerState.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Html5QrcodeScannerState.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Html5QrcodeScannerState.PAUSED},s}(),StateManagerFactory=function(){function s(){}return s.create=function(){return new StateManagerProxy(new StateManagerImpl)},s}(),__extends=function(){var s=function(e,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},s(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Constants=function(s){__extends(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Html5QrcodeConstants),InternalHtml5QrcodeConfig=function(){function s(e,r){this.logger=r,this.fps=Constants.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Constants.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},s.create=function(e,r){return new s(e,r)},s}(),Html5Qrcode=function(){function s(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new BaseLoggger(this.verbose),this.qrcode=new Html5QrcodeShim(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=StateManagerFactory.create()}return s.prototype.start=function(e,r,n,o){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;o?c=o:c=this.verbose?this.logger.log:function(){};var l=InternalHtml5QrcodeConfig.create(r,this.logger);this.clearElement();var h=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=h,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:Constants.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var g=this,_=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);return new Promise(function(E,A){var w=d?l.videoConstraints:g.createVideoConstraints(e);if(!w){_.cancel(),A("videoConstraints should be defined");return}var m={};(!d||l.aspectRatio)&&(m.aspectRatio=l.aspectRatio);var b={onRenderSurfaceReady:function(y,x){g.setupUi(y,x,l),g.isScanning=!0,g.foreverScan(l,n,c)}};CameraFactory.failIfNotSupported().then(function(y){y.create(w).then(function(x){return x.render(a.element,m,b).then(function(D){g.renderedCamera=D,_.execute(),E(null)}).catch(function(D){_.cancel(),A(D)})}).catch(function(x){_.cancel(),A(Html5QrcodeStrings.errorGettingUserMedia(x))})}).catch(function(y){_.cancel(),A(Html5QrcodeStrings.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED),this.showPausedState(),(isNullOrUndefined(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var a=document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),n(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),r.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},s.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var l=c.width,h=c.height,d=document.getElementById(n.elementId),f=d.clientWidth?d.clientWidth:Constants.DEFAULT_WIDTH,g=Math.max(d.clientHeight?d.clientHeight:h,Constants.FILE_SCAN_MIN_HEIGHT),_=n.computeCanvasDrawConfig(l,h,f,g);if(r){var E=n.createCanvasElement(f,g,"qr-canvas-visible");E.style.display="inline-block",d.appendChild(E);var A=E.getContext("2d");if(!A)throw"Unable to get 2d context from canvas";A.canvas.width=f,A.canvas.height=g,A.drawImage(c,0,0,l,h,_.x,_.y,_.width,_.height)}var w=Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING,m=Math.max(c.width,_.width),b=Math.max(c.height,_.height),y=m+2*w,x=b+2*w,D=n.createCanvasElement(y,x);d.appendChild(D);var R=D.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=y,R.canvas.height=x,R.drawImage(c,0,0,l,h,w,w,m,b);try{n.qrcode.decodeRobustlyAsync(D).then(function(M){o(Html5QrcodeResultFactory.createFromQrcodeResult(M))}).catch(a)}catch(M){a("QR code parse error, error = ".concat(M))}},c.onerror=a,c.onabort=a,c.onstalled=a,c.onsuspend=a,c.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return CameraRetriever.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!VideoConstraintsUtil.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var r=[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],o=0,a=e.formatsToSupport;o<a.length;o++){var c=a[o];isValidHtml5QrcodeSupportedFormats(c)?n.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(isNullOrUndefined(e))return!0;if(!isNullOrUndefined(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(isNullOrUndefined(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return isNullOrUndefined(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,r,n){var o=this,a=n.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(e,r,a),l=function(d){if(d<Constants.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Constants.MIN_QR_BOX_SIZE,"px.")},h=function(d){return d>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};l(c.width),l(c.height),c.width=h(c.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return n},s.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var o=isNullOrUndefined(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(e,r,o);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=n.isShadedBoxEnabled()&&a.height<=r,l={x:0,y:0,width:e,height:r},h=c?this.getShadedRegionBounds(e,r,a):l,d=this.createCanvasElement(h.width,h.height),f={willReadFrequently:!0},g=d.getContext("2d",f);g.canvas.width=h.width,g.canvas.height=h.height,this.element.append(d),c&&this.possiblyInsertShadingElement(this.element,e,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=g,this.canvasElement=d},s.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Html5QrcodeStrings.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},s.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Html5QrcodeResultFactory.createFromQrcodeResult(o)),n.possiblyUpdateShaders(!0),!0}).catch(function(o){n.possiblyUpdateShaders(!1);var a=Html5QrcodeStrings.codeParseError(o);return r(a,Html5QrcodeErrorFactory.createFrom(a)),!1})},s.prototype.foreverScan=function(e,r,n){var o=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),c=a.videoWidth/a.clientWidth,l=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*c,d=this.qrRegion.height*l,f=this.qrRegion.x*c,g=this.qrRegion.y*l;this.context.drawImage(a,f,g,h,d,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,r,n)},o.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(E){!E&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(r,n).finally(function(){_()})):_()}).catch(function(E){o.logger.logError("Error happend while scanning context",E),_()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",o={user:!0,environment:!0},a="exact",c=function(A){if(A in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(A,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var h=Object.keys(e)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var d=e.facingMode;if(typeof d=="string"){if(c(d))return{facingMode:d}}else if(typeof d=="object")if(a in d){if(c(d["".concat(a)]))return{facingMode:{exact:d["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var f=typeof d;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var g=e.deviceId;if(typeof g=="string")return{deviceId:g};if(typeof g=="object"){if(a in g)return{deviceId:{exact:g["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var _=typeof g;throw"Invalid type of 'deviceId' = ".concat(_)}}}var E=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},s.prototype.computeCanvasDrawConfig=function(e,r,n,o){if(e<=n&&r<=o){var a=(n-e)/2,c=(o-r)/2;return{x:a,y:c,width:e,height:r}}else{var l=e,h=r;return e>n&&(r=n/e*r,e=n),r>o&&(e=o/r*e,r=o),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(h)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,o)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Constants.BORDER_SHADER_MATCH_COLOR:Constants.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,r,n){var o=e,a=r,c=document.createElement("canvas");return c.style.width="".concat(o,"px"),c.style.height="".concat(a,"px"),c.style.display="none",c.id=isNullOrUndefined(n)?"qr-canvas":n,c},s.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},s.prototype.possiblyInsertShadingElement=function(e,r,n,o){if(!(r-o.width<1||n-o.height<1)){var a=document.createElement("div");a.style.position="absolute";var c=(r-o.width)/2,l=(n-o.height)/2;if(a.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Constants.SHADED_REGION_ELEMENT_ID),r-o.width<11||n-o.height<11)this.hasBorderShaders=!1;else{var h=5,d=40;this.insertShaderBorders(a,d,h,-h,null,0,!0),this.insertShaderBorders(a,d,h,-h,null,0,!1),this.insertShaderBorders(a,d,h,null,-h,0,!0),this.insertShaderBorders(a,d,h,null,-h,0,!1),this.insertShaderBorders(a,h,d+h,-h,null,-h,!0),this.insertShaderBorders(a,h,d+h,null,-h,-h,!0),this.insertShaderBorders(a,h,d+h,-h,null,-h,!1),this.insertShaderBorders(a,h,d+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(a)}},s.prototype.insertShaderBorders=function(e,r,n,o,a,c,l){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Constants.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),o!==null&&(h.style.top="".concat(o,"px")),a!==null&&(h.style.bottom="".concat(a,"px")),l?h.style.left="".concat(c,"px"):h.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s}(),Html5QrcodeScannerStatus;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Html5QrcodeScannerStatus||(Html5QrcodeScannerStatus={}));var eruda$1={exports:{}};/*! eruda v3.0.1 https://eruda.liriliri.io/ */(function(module,exports){(function(s,e){module.exports=e()})(self,function(){return function(){var __webpack_modules__={422:function(s,e,r){r.d(e,{Z:function(){return ne}});var n=r(5671),o=r(3144),a=r(9340),c=r(2963),l=r(1120),h=r(2461),d=r.n(h),f=r(3990),g=r.n(f),_=r(6768),E=r.n(_),A=r(4331),w=r.n(A),m=r(5610),b=r.n(m),y=r(7483),x=r.n(y),D=r(6341),R=r.n(D),M=r(3875),L=r.n(M),k=r(6954),I=r.n(k);r(9585);function V(ue){var Fe="luna-".concat(ue,"-");function Ie(ye){return d()(w()(ye).split(/\s+/),function($e){return R()($e,Fe)?$e:$e.replace(/[\w-]+/,function(Oe){return"".concat(Fe).concat(Oe)})}).join(" ")}return function(ye){if(/<[^>]*>/g.test(ye))try{var $e=x().parse(ye);return N($e,function(Oe){Oe.attrs&&Oe.attrs.class&&(Oe.attrs.class=Ie(Oe.attrs.class))}),x().stringify($e)}catch{return Ie(ye)}return Ie(ye)}}function N(ue,Fe){for(var Ie=0,ye=ue.length;Ie<ye;Ie++){var $e=ue[Ie];Fe($e),$e.content&&N($e.content,Fe)}}b();function B(){var ue=I()();return ue==="os x"?"mac":ue}var H=r(1443),z=r.n(H),W=r(1512),Q=r.n(W),X=r(3783),G=r.n(X),q=r(6329),Y=r.n(q),K=r(4193),se=r.n(K),Se=r(5852),be=r.n(Se);function xe(ue){var Fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ie,ye=(0,l.Z)(ue);if(Fe){var $e=(0,l.Z)(this).constructor;Ie=Reflect.construct(ye,arguments,$e)}else Ie=ye.apply(this,arguments);return(0,c.Z)(this,Ie)}}var Ee=function(ue){(0,a.Z)(Ie,ue);var Fe=xe(Ie);function Ie(ye,$e){var Oe,Le=$e.compName,He=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,tt=He===void 0?"light":He;return(0,n.Z)(this,Ie),(Oe=Fe.call(this)).subComponents=[],Oe.compName=Le,Oe.c=V(Le),Oe.options={},Oe.container=ye,Oe.$container=Q()(ye),Oe.$container.addClass(["luna-".concat(Le),Oe.c("platform-".concat(B()))]),Oe.on("optionChange",function(Ze,pt,fe){var Ne=Oe.c;Ze==="theme"&&(Oe.$container.rmClass(Ne("theme-".concat(fe))).addClass(Ne("theme-".concat(pt))),G()(Oe.subComponents,function(we){return we.setOption("theme",pt)}))}),Oe.setOption("theme",tt),Oe}return(0,o.Z)(Ie,[{key:"destroy",value:function(){this.destroySubComponents();var ye=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ye("platform-".concat(B()))).rmClass(ye("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(ye,$e){var Oe=this,Le=this.options,He={};typeof ye=="string"?He[ye]=$e:He=ye,G()(He,function(tt,Ze){var pt=Le[Ze];Le[Ze]=tt,Oe.emit("optionChange",Ze,tt,pt)})}},{key:"getOption",value:function(ye){return this.options[ye]}},{key:"addSubComponent",value:function(ye){ye.setOption("theme",this.options.theme),this.subComponents.push(ye)}},{key:"removeSubComponent",value:function(ye){be()(this.subComponents,function($e){return $e===ye})}},{key:"destroySubComponents",value:function(){G()(this.subComponents,function(ye){return ye.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(ye){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};se()(ye,$e),Y()(this.options,ye)}},{key:"find",value:function(ye){return this.$container.find(this.c(ye))}}]),Ie}(z());function J(ue){var Fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ie,ye=(0,l.Z)(ue);if(Fe){var $e=(0,l.Z)(this).constructor;Ie=Reflect.construct(ye,arguments,$e)}else Ie=ye.apply(this,arguments);return(0,c.Z)(this,Ie)}}s=r.hmd(s);var ne=function(ue){(0,a.Z)(Ie,ue);var Fe=J(Ie);function Ie(ye){var $e,Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.Z)(this,Ie),($e=Fe.call(this,ye,{compName:"box-model"})).initOptions(Oe),$e.options.element&&$e.render(),$e.bindEvent(),$e}return(0,o.Z)(Ie,[{key:"bindEvent",value:function(){var ye=this;this.on("optionChange",function($e){$e==="element"&&ye.render()})}},{key:"render",value:function(){var ye=this.c,$e=this.getBoxModelData();this.$container.html(['<div class="'.concat(ye("box-model"),'">'),$e.position?'<div class="'.concat(ye("position"),'">'):"",$e.position?'<div class="'.concat(ye("label"),'">position</div><div class="').concat(ye("top"),'">').concat($e.position.top,'</div><br><div class="').concat(ye("left"),'">').concat($e.position.left,"</div>"):"",'<div class="'.concat(ye("margin"),'">'),'<div class="'.concat(ye("label"),'">margin</div><div class="').concat(ye("top"),'">').concat($e.margin.top,'</div><br><div class="').concat(ye("left"),'">').concat($e.margin.left,"</div>"),'<div class="'.concat(ye("border"),'">'),'<div class="'.concat(ye("label"),'">border</div><div class="').concat(ye("top"),'">').concat($e.border.top,'</div><br><div class="').concat(ye("left"),'">').concat($e.border.left,"</div>"),'<div class="'.concat(ye("padding"),'">'),'<div class="'.concat(ye("label"),'">padding</div><div class="').concat(ye("top"),'">').concat($e.padding.top,'</div><br><div class="').concat(ye("left"),'">').concat($e.padding.left,"</div>"),'<div class="'.concat(ye("content"),'">'),"<span>".concat($e.content.width,"</span>&nbsp;×&nbsp;<span>").concat($e.content.height,"</span>"),"</div>",'<div class="'.concat(ye("right"),'">').concat($e.padding.right,'</div><br><div class="').concat(ye("bottom"),'">').concat($e.padding.bottom,"</div>"),"</div>",'<div class="'.concat(ye("right"),'">').concat($e.border.right,'</div><br><div class="').concat(ye("bottom"),'">').concat($e.border.bottom,"</div>"),"</div>",'<div class="'.concat(ye("right"),'">').concat($e.margin.right,'</div><br><div class="').concat(ye("bottom"),'">').concat($e.margin.bottom,"</div>"),"</div>",$e.position?'<div class="'.concat(ye("right"),'">').concat($e.position.right,'</div><br><div class="').concat(ye("bottom"),'">').concat($e.position.bottom,"</div>"):"",$e.position?"</div>":"","</div>"].join(""))}},{key:"getBoxModelData",value:function(){var ye=this.options.element,$e=window.getComputedStyle(ye);function Oe(He){var tt=["top","left","right","bottom"];return He!=="position"&&(tt=d()(tt,function(Ze){return"".concat(He,"-").concat(Ze)})),He==="border"&&(tt=d()(tt,function(Ze){return"".concat(Ze,"-width")})),{top:de($e[tt[0]],He),left:de($e[tt[1]],He),right:de($e[tt[2]],He),bottom:de($e[tt[3]],He)}}var Le={margin:Oe("margin"),border:Oe("border"),padding:Oe("padding"),content:{width:de($e.width),height:de($e.height)}};return $e.position!=="static"&&(Le.position=Oe("position")),Le}}]),Ie}(Ee);function de(ue,Fe){if(g()(ue))return ue;if(!E()(ue))return"‒";var Ie,ye=(Ie=ue,L()(Ie.replace("px","")));return isNaN(ye)?ue:Fe==="position"?ye:ye===0?"‒":ye}(function(ue,Fe){try{ue.exports=Fe,ue.exports.default=Fe}catch{}})(s,ne)},8816:function(s,e,r){r.d(e,{Z:function(){return jr}});var n=r(168),o=r(181);function a(Nt,or){return function(kt){if(Array.isArray(kt))return kt}(Nt)||function(kt,he){var oe=kt==null?null:typeof Symbol<"u"&&kt[Symbol.iterator]||kt["@@iterator"];if(oe!=null){var Ae,Ve,_t,ct,Te=[],ht=!0,Dt=!1;try{if(_t=(oe=oe.call(kt)).next,he===0){if(Object(oe)!==oe)return;ht=!1}else for(;!(ht=(Ae=_t.call(oe)).done)&&(Te.push(Ae.value),Te.length!==he);ht=!0);}catch(ar){Dt=!0,Ve=ar}finally{try{if(!ht&&oe.return!=null&&(ct=oe.return(),Object(ct)!==ct))return}finally{if(Dt)throw Ve}}return Te}}(Nt,or)||(0,o.Z)(Nt,or)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var c=r(5671),l=r(3144),h=r(1752),d=r(9340),f=r(2963),g=r(1120),_=r(7326),E=r(8901),A=r.n(E),w=r(3367),m=r.n(w),b=r(6341),y=r.n(b),x=r(6930),D=r.n(x),R=r(4187),M=r.n(R),L=r(3783),k=r.n(L),I=r(4858),V=r.n(I),N=r(8887),B=r.n(N),H=r(7756),z=r.n(H),W=r(3023),Q=r.n(W);function X(Nt){return Nt.constructor&&Nt.constructor.name?Nt.constructor.name:Q()({}.toString.call(Nt).replace(/(\[object )|]/g,""))}var G=r(2461),q=r.n(G),Y=r(4331),K=r.n(Y),se=r(5610),Se=r.n(se),be=r(7483),xe=r.n(be),Ee=r(3990),J=r.n(Ee),ne=r(3875),de=r.n(ne),ue=r(6954),Fe=r.n(ue),Ie=r(9585),ye=r.n(Ie);function $e(Nt){var or="luna-".concat(Nt,"-");function kt(he){return q()(K()(he).split(/\s+/),function(oe){return y()(oe,or)?oe:oe.replace(/[\w-]+/,function(Ae){return"".concat(or).concat(Ae)})}).join(" ")}return function(he){if(/<[^>]*>/g.test(he))try{var oe=xe().parse(he);return Oe(oe,function(Ae){Ae.attrs&&Ae.attrs.class&&(Ae.attrs.class=kt(Ae.attrs.class))}),xe().stringify(oe)}catch{return kt(he)}return kt(he)}}function Oe(Nt,or){for(var kt=0,he=Nt.length;kt<he;kt++){var oe=Nt[kt];or(oe),oe.content&&Oe(oe.content,or)}}Se();var Le=$e("console");function He(Nt){var or,kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=kt.topObj,oe=kt.level,Ae=oe===void 0?0:oe,Ve=kt.getterVal,_t=Ve!==void 0&&Ve,ct=kt.unenumerable,Te=ct===void 0||ct,ht="",Dt="",ar=[],gr=[],Dr="";he=he||Nt;var Hr={getterVal:_t,unenumerable:Te,level:Ae+1},lr=Ae===0,kr='<span class="'.concat(Le("key"),'">'),mr='<span class="'.concat(Le("number"),'">'),Wr='<span class="'.concat(Le("null"),'">'),wr='<span class="'.concat(Le("string"),'">'),vi='<span class="'.concat(Le("boolean"),'">'),ci='<span class="'.concat(Le("special"),'">'),hr=function(Rr){return A()(Rr).replace(/\\n/g,"↵").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Ht="</span>";function si(Rr){return Rr=m()(Rr),y()(tt,Rr)||D()(Rr,"Array[")?ci+hr(Rr)+Ht:(Rr.length>100&&(Rr=z()(Rr,100,{separator:" ",ellipsis:"…"})),wr+hr('"'.concat(Rr,'"'))+Ht)}function pr(Rr){if(or>5)Dr=", …";else{var Ni=function(en){return kr+hr(en)+Ht}(pt(Rr));if(!_t){var Si=Object.getOwnPropertyDescriptor(Nt,Rr);if(Si&&Si.get)return ar.push("".concat(Ni,": ").concat(si("(...)"))),void or++}ar.push("".concat(Ni,": ").concat(He(he[Rr],Hr))),or++}}try{Dt={}.toString.call(Nt)}catch{Dt="[object Object]"}var ti,hi=Dt=="[object Array]",Pi=Dt=="[object Object]",Kr=Dt=="[object Number]",Ci=Dt=="[object RegExp]",Ii=Dt=="[object Symbol]",gi=Dt=="[object Function]",ki=Dt=="[object Boolean]";if(Dt=="[object String]")ht=si(pt(Nt));else if(Ci)ti=pt(Nt.toString()),ht=wr+ti+Ht;else if(gi)ht=si("ƒ");else if(hi)if(lr){ht="[";var Bi=Nt.length,Ui="";Bi>100&&(Bi=100,Ui=", …");for(var ui=0;ui<Bi;ui++)ar.push("".concat(He(Nt[ui],Hr)));ht+=ar.join(", ")+Ui+"]"}else ht="Array(".concat(Nt.length,")");else if(Pi)Ze(Nt)&&(Nt=Object.getPrototypeOf(Nt)),gr=Te?Object.getOwnPropertyNames(Nt):Object.keys(Nt),lr?(or=1,ht="{",k()(gr,pr),ht+=ar.join(", ")+Dr+"}"):(ht=X(Nt))==="Object"&&(ht="{…}");else if(Kr)ht=Nt+"",ht=V()(ht,"Infinity")||ht==="NaN"?'"'.concat(ht,'"'):mr+ht+Ht;else if(ki)ht=vi+(Nt?"true":"false")+Ht;else if(Nt===null)ht=function(Rr){return Wr+Rr+Ht}("null");else if(Ii)ht=si("Symbol");else if(Nt===void 0)ht=si("undefined");else try{Ze(Nt)&&(Nt=Object.getPrototypeOf(Nt)),lr?(or=1,ht="{",gr=Te?Object.getOwnPropertyNames(Nt):Object.keys(Nt),k()(gr,pr),ht+=ar.join(", ")+Dr+"}"):(ht=X(Nt))==="Object"&&(ht="{…}")}catch{ht=si(Nt)}return ht}var tt=["(...)","undefined","Symbol","Object","ƒ"];function Ze(Nt){var or=B()(Object.getOwnPropertyNames(Nt)),kt=Object.getPrototypeOf(Nt);return or&&kt&&kt!==Object.prototype}function pt(Nt){return M()(Nt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var fe,Ne=r(8299),we=r(5564),ke=r(8209),De=r(242),Pe=r.n(De),Je=r(5166),Ye=r.n(Je),Ct=r(6768),Rt=r.n(Ct),vt=r(2749),ut=r.n(vt),nt=r(6997),Re=r.n(nt),it=r(4193),lt=r.n(it),dt=r(9833),yt=r.n(dt),at=r(9296),qe=r.n(at),et=r(8099),ft=r.n(et),St=r(6156),Ut=r.n(St),Ft=r(1286),Zt=r.n(Ft),qt=r(4777),tr=r.n(qt),xr=r(1352),fr=r.n(xr),qr=r(6472),Vr=r.n(qr),Kt=r(42),Wt=r.n(Kt),Pt=r(4675),rt=r.n(Pt),je=r(3063),Xe=r.n(je),_e=r(2533),It=r.n(_e),ir=r(1512),rr=r.n(ir),Mt=r(8613),Ot=r.n(Mt),Et=r(1443),st=r.n(Et),ot=r(6049),gt=r.n(ot),Tt=r(4400),Vt=r.n(Tt),Bt=r(2327),Lt=r.n(Bt),Ge=r(9963),Gt=r.n(Ge),$t=r(6837),dr=r.n($t),Ar=r(3988),Qt=r.n(Ar),Xt=r(3651),Jt=r.n(Xt),Fr=r(6053),Qr=r.n(Fr),Yr=r(1907),cr=r.n(Yr),$r=r(4891),Xr=r.n($r),Cr=r(5229),Mr=r.n(Cr),li=r(4696),Jr=r.n(li),br=r(9804),Pr=r.n(br),We=r(1754),ge=r.n(We);function zt(Nt){var or=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var kt,he=(0,g.Z)(Nt);if(or){var oe=(0,g.Z)(this).constructor;kt=Reflect.construct(he,arguments,oe)}else kt=he.apply(this,arguments);return(0,f.Z)(this,kt)}}var Ir=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Zr={comment:"",string:"",number:"",keyword:"",operator:""},Yi=function(Nt){(0,d.Z)(kt,Nt);var or=zt(kt);function kt(he,oe){var Ae,Ve=oe.type,_t=Ve===void 0?"log":Ve,ct=oe.args,Te=ct===void 0?[]:ct,ht=oe.id,Dt=oe.group,ar=oe.targetGroup,gr=oe.header,Dr=oe.ignoreFilter,Hr=Dr!==void 0&&Dr,lr=oe.accessGetter,kr=oe.unenumerable,mr=oe.lazyEvaluation;(0,c.Z)(this,kt),(Ae=or.call(this)).container=Ot()("div"),Ae.count=1,Ae.width=0,Ae.height=0,Ae.isHidden=!1,Ae.columns=[],Ae.elements={},Ae.objects={},Ae.console=he,Ae.type=_t,Ae.group=Dt,Ae.targetGroup=ar,Ae.args=Te,Ae.id=ht,Ae.header=gr,Ae.ignoreFilter=Hr,Ae.collapsed=!1,Ae.container.log=(0,_.Z)(Ae),Ae.height=0,Ae.width=0,Ae.$container=rr()(Ae.container),Ae.accessGetter=lr,Ae.unenumerable=kr,Ae.lazyEvaluation=mr;var Wr="info";switch(_t){case"debug":Wr="verbose";break;case"error":Wr="error";break;case"warn":Wr="warning"}return Ae.level=Wr,Ae.resizeSensor=new(Pe())(Ae.container),Ae.onResize=gt()(function(){ye()(Ae.container)?Ae.isHidden=!0:(Ae.isHidden||Ae.updateSize(!1),Ae.isHidden=!1)},16),Ae.formatMsg(),Ae.group&&Ae.checkGroup(),Ae.bindEvent(),Ae}return(0,l.Z)(kt,[{key:"checkGroup",value:function(){for(var he=this.group,oe=!1;he;){if(he.collapsed){oe=!0;break}he=he.parent}return oe!==this.collapsed&&(this.collapsed=oe,!0)}},{key:"updateIcon",value:function(he){var oe=this.console.c;return this.$container.find(oe(".icon-container")).find(oe(".icon")).rmAttr("class").addClass([oe("icon"),oe("icon-".concat(he))]),this}},{key:"addCount",value:function(){this.count++;var he=this.$container,oe=this.count,Ae=this.console.c,Ve=he.find(Ae(".count-container")),_t=he.find(Ae(".icon-container")),ct=Ve.find(Ae(".count"));return oe===2&&Ve.rmClass(Ae("hidden")),ct.text(m()(oe)),_t.addClass(Ae("hidden")),this}},{key:"groupEnd",value:function(){var he=this.$container,oe=this.console.c;return he.find(".".concat(oe("nesting-level"),":not(.").concat(oe("group-closed"),")")).last().addClass(oe("group-closed")),this}},{key:"updateTime",value:function(he){var oe=this.$container.find(this.console.c(".time-container"));return this.header&&(oe.find("span").eq(0).text(he),this.header.time=he),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!Qr()(this.args,function(he){return Ye()(he)})}},{key:"updateSize",value:function(){var he=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],oe=this.container.getBoundingClientRect(),Ae=oe.width,Ve=oe.height-1;this.height!==Ve&&(this.height=Ve,he||this.emit("updateHeight")),this.width!==Ae&&(this.width=Ae)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var he=this.args,oe="";k()(he,function(Ae,Ve){Ve!==0&&(oe+=" "),Ye()(Ae)?oe+=Vt()(Ae):oe+=m()(Ae)}),Lt()(oe)}},{key:"bindEvent",value:function(){var he=this,oe=this.console.c,Ae=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",oe(".dom-viewer"),function(Ve){return Ve.stopPropagation()}).on("click",oe(".preview"),function(Ve){Ve.stopPropagation();var _t=rr()(this).find(oe(".preview-icon-container")).find(oe(".icon")),ct="caret-down";_t.hasClass(oe("icon-caret-down"))&&(ct="caret-right"),_t.rmAttr("class").addClass([oe("icon"),oe("icon-".concat(ct))]),Ae.renderObjectViewer(this)}).on("click",function(){return he.click()})}},{key:"renderEl",value:function(){var he=this.elements,oe=this.console.c,Ae=this;this.$container.find(oe(".dom-viewer")).each(function(){var Ve=rr()(this).data("id");new ke.Z(this,{node:he[Ve],theme:Ae.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function(he){var oe=this.console,Ae=this.unenumerable,Ve=this.accessGetter,_t=this.lazyEvaluation,ct=oe.c,Te=rr()(he),ht=Te.data("id");if(ht){var Dt=this.objects[ht],ar=Te.find(ct(".json"));if(ar.hasClass(ct("hidden"))){if(ar.data("init")!=="true"){if(_t){var gr=new Ne.Z(ar.get(0),{unenumerable:Ae,accessGetter:Ve});gr.setOption("theme",oe.getOption("theme")),gr.set(Dt)}else{var Dr=new Ne.q(ar.get(0));Dr.setOption("theme",oe.getOption("theme")),Dr.set(Dt)}ar.data("init","true")}ar.rmClass(ct("hidden"))}else ar.addClass(ct("hidden"))}}},{key:"renderTable",value:function(he){var oe=this,Ae="__LunaConsoleValue",Ve=this.columns,_t=this.$container,ct=this.console,Te=ct.c,ht=_t.find(Te(".data-grid")),Dt=he[0],ar=new we.Z(ht.get(0),{columns:ft()([{id:"(index)",title:"(index)",sortable:!0}],q()(Ve,function(gr){return{id:gr,title:gr===Ae?"Value":gr,sortable:!0}})),theme:ct.getOption("theme")});k()(Dt,function(gr,Dr){var Hr={"(index)":m()(Dr)};Ve.forEach(function(lr){Ye()(gr)?Hr[lr]=lr===Ae?"":oe.formatTableVal(gr[lr]):Re()(gr)&&(Hr[lr]=lr===Ae?oe.formatTableVal(gr):"")}),ar.append(Hr)})}},{key:"extractObj",value:function(he){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ae=arguments.length>2?arguments[2]:void 0,Ve=this.accessGetter,_t=this.unenumerable;lt()(oe,{accessGetter:Ve,unenumerable:_t,symbol:_t,timeout:1e3}),function(ct,Te,ht){var Dt=Gt()(ct,Te);dr()(function(){return ht(Dt)})}(he,oe,function(ct){return Ae(JSON.parse(ct))})}},{key:"click",value:function(){var he=this.type,oe=this.$container,Ae=this.console,Ve=Ae.c;switch(he){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Ae.toggleGroup(this);break;case"error":oe.find(Ve(".stack")).toggleClass(Ve("hidden"))}}},{key:"formatMsg",value:function(){var he=this.args,oe=this.type,Ae=this.id,Ve=this.header,_t=this.group,ct=this.console.c;he=rt()(he);var Te,ht,Dt="";switch(oe!=="group"&&oe!=="groupCollapsed"||he.length===0&&(he=["console.group"]),oe){case"log":case"info":case"debug":Dt=this.formatCommon(he);break;case"dir":Dt=this.formatDir(he);break;case"warn":Te="warn",Dt=this.formatCommon(he);break;case"error":Rt()(he[0])&&he.length!==1&&(he=this.substituteStr(he)),ht=he[0],Te="error",ht=ut()(ht)?ht:new Error(this.formatCommon(he)),Dt=this.formatErr(ht);break;case"table":Dt=this.formatTable(he);break;case"html":Dt=he[0];break;case"input":Dt=this.formatJs(he[0]),Te="input";break;case"output":Dt=this.formatCommon(he),Te="output";break;case"groupCollapsed":Dt=this.formatCommon(he),Te="caret-right";break;case"group":Dt=this.formatCommon(he),Te="caret-down"}y()(["log","debug","warn"],oe)&&this.isSimple()&&(Dt=Qt()(Dt,function(ar){return'<a href="'.concat(ar,'" target="_blank">').concat(ar,"</a>")})),Dt=this.render({msg:Dt,type:oe,icon:Te,id:Ae,header:Ve,group:_t}),this.$container.addClass("".concat(ct("log-container"))).html(Dt),oe==="table"&&(B()(this.columns)||this.renderTable(he)),B()(this.elements)||this.renderEl(),this.$content=this.$container.find(ct(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function(he){var oe=this.console.c,Ae="",Ve="";if(he.group)for(var _t=he.group.indentLevel,ct=0;ct<_t;ct++)Ve+='<div class="'.concat(oe("nesting-level"),'"></div>');he.header&&(Ae+=cr()(fe||(fe=(0,n.Z)([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),oe("header"),Ve,oe("time-from-container"),he.header.time,he.header.from));var Te="";return he.icon&&(Te='<div class="'.concat(oe("icon-container"),'"><span class="').concat(oe("icon icon-"+he.icon),'"></span></div>')),Ae+=`
    <div class="`.concat(oe(he.type+" log-item"),`">
      `).concat(Ve,`
      `).concat(Te,`
      <div class="`).concat(oe("count-container hidden"),`">
        <div class="`).concat(oe("count"),`"></div>
      </div>    
      <div class="`).concat(oe("log-content-wrapper"),`">
        <div class="`).concat(oe("log-content"),'">').concat(he.msg,`</div>
      </div>
    </div>`)}},{key:"formatTable",value:function(he){var oe=he[0],Ae=he[1],Ve=[];return Rt()(Ae)&&(Ae=fr()(Ae)),Vr()(Ae)||(Ae=null),Ye()(oe)?(k()(oe,function(_t){Re()(_t)?Ve.push("__LunaConsoleValue"):Ye()(_t)&&(Ve=Ve.concat(It()(_t)))}),(Ve=Wt()(Ve)).sort(),Ae&&(Ve=Ve.filter(function(_t){return y()(Ae,_t)})),Ve.length>20&&(Ve=Ve.slice(0,20)),B()(Ve)?this.formatCommon(he):(this.columns=Ve,this.console.c('<div class="data-grid"></div>')+this.formatPreview(oe))):this.formatCommon(he)}},{key:"formatErr",value:function(he){var oe=he.stack?he.stack.split(`
`):[],Ae="".concat(he.message||oe[0],"<br/>");return oe=oe.map(function(Ve){return A()(Ve)}),Ae+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(oe.slice(1).join("<br/>"),"</div>").replace(Ir,function(Ve){return'<a href="'.concat(Ve,'" target="_blank">').concat(Ve,"</a>")})}},{key:"formatCommon",value:function(he){var oe=this.console.c,Ae=Rt()(he[0])&&he.length!==1;Ae&&(he=this.substituteStr(he));for(var Ve=0,_t=he.length;Ve<_t;Ve++){var ct=he[Ve];yt()(ct)?he[Ve]=this.formatEl(ct):tr()(ct)?he[Ve]=this.formatFn(ct):ge()(ct)?he[Ve]='<span class="'.concat(oe("regexp"),'">').concat(A()(m()(ct)),"</span>"):Ye()(ct)?he[Ve]=this.formatPreview(ct):Zt()(ct)?he[Ve]='<span class="'.concat(oe("undefined"),'">undefined</span>'):Ut()(ct)?he[Ve]='<span class="'.concat(oe("null"),'">null</span>'):J()(ct)?he[Ve]='<span class="'.concat(oe("number"),'">').concat(m()(ct),"</span>"):typeof ct=="bigint"?he[Ve]='<span class="'.concat(oe("number"),'">').concat(m()(ct),"n</span>"):Jr()(ct)?he[Ve]='<span class="'.concat(oe("boolean"),'">').concat(m()(ct),"</span>"):Pr()(ct)?he[Ve]='<span class="'.concat(oe("symbol"),'">').concat(A()(m()(ct)),"</span>"):(ct=m()(ct),Ve===0&&Ae||(ct=A()(ct)),ct.length>5e3&&(ct=z()(ct,5e3,{separator:" ",ellipsis:"…"})),he[Ve]=ct)}return he.join(" ")}},{key:"formatDir",value:function(he){return Ye()(he[0])?this.formatPreview(he[0]):this.formatCommon(he)}},{key:"formatTableVal",value:function(he){var oe=this.console.c;return Ye()(he)?"{…}":Re()(he)?Xr()('<div class="'.concat(oe("preview"),'">').concat(He(he),"</div>")):m()(he)}},{key:"formatPreview",value:function(he){var oe=this,Ae=this.console.c,Ve=Mr()();this.lazyEvaluation?this.objects[Ve]=he:this.extractObj(he,{},function(Te){oe.objects[Ve]=Te});var _t=y()(["dir","table"],this.type),ct=X(he);return ct==="Array"&&he.length>1?(ct="(".concat(he.length,")"),_t&&(ct="Array".concat(ct))):ct==="RegExp"?ct=m()(he):yt()(he)&&(ct=this.formatElName(he)),'<div class="'.concat(Ae("preview"),'" data-id="').concat(Ve,'">')+'<div class="'.concat(Ae("preview-container"),'">')+'<div class="'.concat(Ae("preview-icon-container"),'"><span class="').concat(Ae("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(Ae("preview-content-container"),'">')+'<span class="'.concat(Ae("descriptor"),'">').concat(A()(ct),"</span> ")+'<span class="'.concat(Ae("object-preview"),'">').concat(_t?"":He(he,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(Ae("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function(he){var oe=A()(he[0]),Ae=!1,Ve="";he.shift();for(var _t=0,ct=oe.length;_t<ct;_t++){var Te=oe[_t];if(Te==="%"&&he.length!==0){_t++;var ht=he.shift();switch(oe[_t]){case"i":case"d":Ve+=qe()(ht);break;case"f":Ve+=de()(ht);break;case"s":Ve+=m()(ht);break;case"O":Ye()(ht)?Ve+=this.formatPreview(ht):Ve+=m()(ht);break;case"o":yt()(ht)?Ve+=this.formatEl(ht):Ye()(ht)?Ve+=this.formatPreview(ht):Ve+=m()(ht);break;case"c":if(oe.length<=_t+1)break;Ae&&(Ve+="</span>"),Ae=!0,Ve+='<span style="'.concat(bi(ht),'">');break;default:_t--,he.unshift(ht),Ve+=Te}}else Ve+=Te}return Ae&&(Ve+="</span>"),he.unshift(Ve),he}},{key:"formatJs",value:function(he){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c(Jt()(he,"js",Zr)),"</pre>")}},{key:"formatFn",value:function(he){return'<pre style="display:inline">'.concat(this.formatJs(he.toString()),"</pre>")}},{key:"formatElName",value:function(he){var oe=he.id,Ae=he.className,Ve=he.tagName.toLowerCase();if(oe!==""&&(Ve+="#".concat(oe)),Rt()(Ae)){var _t="";k()(Ae.split(/\s+/g),function(ct){ct.trim()!==""&&(_t+=".".concat(ct))}),Ve+=_t}return Ve}},{key:"formatEl",value:function(he){var oe=Mr()();return this.elements[oe]=he,this.console.c('<div class="dom-viewer" data-id="'.concat(oe,'"></div>'))}}]),kt}(st());function bi(Nt){var or=(Nt=Xe()(Nt)).split(";"),kt={};k()(or,function(oe){if(y()(oe,":")){var Ae=a(oe.split(":"),2),Ve=Ae[0],_t=Ae[1];kt[K()(Ve)]=K()(_t)}}),kt.display="inline-block",kt["max-width"]="100%",delete kt.width,delete kt.height;var he="";return k()(kt,function(oe,Ae){he+="".concat(Ae,":").concat(oe,";")}),he}var ei=r(1194),jt=r.n(ei),Or=r(8847),yi=r.n(Or),Xi=r(6329),Ri=r.n(Xi),Mi=r(9001),xi=r.n(Mi),Zi=r(9702),Br=r.n(Zi),Ei=r(2439),Lr=r.n(Ei),Yt=r(8933),yr=r.n(Yt),sr=r(4407),Tr=r.n(sr),Ki=r(5852),Wi=r.n(Ki);function Vi(Nt){var or=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var kt,he=(0,g.Z)(Nt);if(or){var oe=(0,g.Z)(this).constructor;kt=Reflect.construct(he,arguments,oe)}else kt=he.apply(this,arguments);return(0,f.Z)(this,kt)}}var ni,Ji=function(Nt){(0,d.Z)(kt,Nt);var or=Vi(kt);function kt(he,oe){var Ae,Ve,_t=oe.compName,ct=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Te=ct===void 0?"light":ct;return(0,c.Z)(this,kt),(Ae=or.call(this)).subComponents=[],Ae.compName=_t,Ae.c=$e(_t),Ae.options={},Ae.container=he,Ae.$container=rr()(he),Ae.$container.addClass(["luna-".concat(_t),Ae.c("platform-".concat((Ve=Fe()(),Ve==="os x"?"mac":Ve)))]),Ae.on("optionChange",function(ht,Dt,ar){var gr=Ae.c;ht==="theme"&&(Ae.$container.rmClass(gr("theme-".concat(ar))).addClass(gr("theme-".concat(Dt))),k()(Ae.subComponents,function(Dr){return Dr.setOption("theme",Dt)}))}),Ae.setOption("theme",Te),Ae}return(0,l.Z)(kt,[{key:"destroy",value:function(){var he=this;this.destroySubComponents();var oe=this.$container,Ae=oe.attr("class");k()(Ae.split(/\s+/),function(Ve){D()(Ve,"luna-".concat(he.compName))&&oe.rmClass(Ve)}),oe.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(he,oe){var Ae=this,Ve=this.options,_t={};typeof he=="string"?_t[he]=oe:_t=he,k()(_t,function(ct,Te){var ht=Ve[Te];Ve[Te]=ct,Ae.emit("optionChange",Te,ct,ht)})}},{key:"getOption",value:function(he){return this.options[he]}},{key:"addSubComponent",value:function(he){he.setOption("theme",this.options.theme),this.subComponents.push(he)}},{key:"removeSubComponent",value:function(he){Wi()(this.subComponents,function(oe){return oe===he})}},{key:"destroySubComponents",value:function(){k()(this.subComponents,function(he){return he.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(he){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt()(he,oe),Ri()(this.options,he)}},{key:"find",value:function(he){return this.$container.find(this.c(he))}}]),kt}(st()),Ai=r(1571),wi=r.n(Ai);function Oi(Nt){var or=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var kt,he=(0,g.Z)(Nt);if(or){var oe=(0,g.Z)(this).constructor;kt=Reflect.construct(he,arguments,oe)}else kt=he.apply(this,arguments);return(0,f.Z)(this,kt)}}s=r.hmd(s);var zi=navigator.userAgent,Ti=zi.indexOf("Android")>-1||zi.indexOf("Adr")>-1,Di=0,jr=function(Nt){(0,d.Z)(kt,Nt);var or=Oi(kt);function kt(he){var oe,Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,c.Z)(this,kt),(oe=or.call(this,he,{compName:"console"},Ae)).spaceHeight=0,oe.topSpaceHeight=0,oe.bottomSpaceHeight=0,oe.lastScrollTop=0,oe.lastTimestamp=0,oe.speedToleranceFactor=100,oe.maxSpeedTolerance=2e3,oe.minSpeedTolerance=100,oe.logs=[],oe.displayLogs=[],oe.timer={},oe.counter={},oe.asyncList=[],oe.asyncTimer=null,oe.isAtBottom=!0,oe.groupStack=new(xi()),oe.selectedLog=null,oe.onScroll=function(){var Ve=oe.container,_t=Ve.scrollHeight,ct=Ve.offsetHeight,Te=Ve.scrollTop;if(!(Te<=0||ct+Te>_t)){var ht=!1;(_t===ct||Te===_t-ct)&&(ht=!0),oe.isAtBottom=ht;var Dt=oe.lastScrollTop,ar=oe.lastTimestamp,gr=yi()(),Dr=gr-ar,Hr=Te-Dt,lr=Math.abs(Hr/Dr)*oe.speedToleranceFactor;Dr>1e3&&(lr=1e3),lr>oe.maxSpeedTolerance&&(lr=oe.maxSpeedTolerance),lr<oe.minSpeedTolerance&&(lr=oe.minSpeedTolerance),oe.lastScrollTop=Te,oe.lastTimestamp=gr;var kr=0,mr=0;Dt<Te?(kr=oe.minSpeedTolerance,mr=lr):(kr=lr,mr=oe.minSpeedTolerance),oe.topSpaceHeight<Te-kr&&oe.topSpaceHeight+oe.el.offsetHeight>Te+ct+mr||oe.renderViewport({topTolerance:2*kr,bottomTolerance:2*mr})}},oe.initTpl(),oe.initOptions(Ae,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),oe.$el=oe.find(".logs"),oe.el=oe.$el.get(0),oe.$fakeEl=oe.find(".fake-logs"),oe.fakeEl=oe.$fakeEl.get(0),oe.$space=oe.find(".logs-space"),oe.space=oe.$space.get(0),Ti&&(oe.speedToleranceFactor=800,oe.maxSpeedTolerance=3e3,oe.minSpeedTolerance=800),oe.resizeSensor=new(Pe())(he),oe.renderViewport=Lr()(function(Ve){oe._renderViewport(Ve)},16),oe.global={copy:function(Ve){Rt()(Ve)||(Ve=JSON.stringify(Ve,null,2)),Lt()(Ve)},$:function(Ve){return document.querySelector(Ve)},$$:function(Ve){return fr()(document.querySelectorAll(Ve))},$x:function(Ve){return yr()(Ve)},clear:function(){oe.clear()},dir:function(Ve){oe.dir(Ve)},table:function(Ve,_t){oe.table(Ve,_t)},keys:It()},oe.bindEvent(),oe}return(0,l.Z)(kt,[{key:"setGlobal",value:function(he,oe){this.global[he]=oe}},{key:"destroy",value:function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(0,h.Z)((0,g.Z)(kt.prototype),"destroy",this).call(this)}},{key:"count",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",oe=this.counter;Zt()(oe[he])?oe[he]=1:oe[he]++,this.info("".concat(he,": ").concat(oe[he]))}},{key:"countReset",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.counter[he]=0}},{key:"assert",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||oe.shift()||(oe.length===0&&oe.unshift("console.assert"),oe.unshift("Assertion failed: "),this.insert("error",oe))}},{key:"log",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("log",oe)}},{key:"debug",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("debug",oe)}},{key:"dir",value:function(he){Zt()(he)||this.insert("dir",[he])}},{key:"table",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("table",oe)}},{key:"time",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";if(this.timer[he])return this.insert("warn",["Timer '".concat(he,"' already exists")]);this.timer[he]=jt()()}},{key:"timeLog",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",oe=this.timer[he];if(!oe)return this.insert("warn",["Timer '".concat(he,"' does not exist")]);this.info("".concat(he,": ").concat(jt()()-oe,"ms"))}},{key:"timeEnd",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.timeLog(he),delete this.timer[he]}},{key:"clear",value:function(){var he=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(xi()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),he?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("info",oe)}},{key:"error",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("error",oe)}},{key:"warn",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];B()(oe)||this.insert("warn",oe)}},{key:"group",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];this.insert({type:"group",args:oe,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];this.insert({type:"groupCollapsed",args:oe,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function(he){this.insert({type:"input",args:[he],ignoreFilter:!0});try{this.output(this.evalJs(he))}catch(oe){this.insert({type:"error",ignoreFilter:!0,args:[oe]})}}},{key:"html",value:function(){for(var he=arguments.length,oe=new Array(he),Ae=0;Ae<he;Ae++)oe[Ae]=arguments[Ae];this.insert("html",oe)}},{key:"toggleGroup",value:function(he){he.targetGroup.collapsed?this.openGroup(he):this.collapseGroup(he)}},{key:"output",value:function(he){this.insert({type:"output",args:[he],ignoreFilter:!0})}},{key:"render",value:function(){var he=this.logs,oe=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var Ae=0,Ve=he.length;Ae<Ve;Ae++)this.attachLog(he[Ae]);oe&&(y()(this.displayLogs,oe)||this.selectLog(null))}},{key:"insert",value:function(he,oe){var Ae,Ve=this.options,_t=Ve.showHeader,ct=Ve.asyncRender;if(_t&&(Ae={time:ji(),from:Li()}),ct)return this.insertAsync(he,oe,Ae);this.insertSync(he,oe,Ae)}},{key:"insertAsync",value:function(he,oe,Ae){this.asyncList.push([he,oe,Ae]),this.handleAsyncList()}},{key:"insertSync",value:function(he,oe,Ae){var Ve,_t=this,ct=this.logs,Te=this.groupStack,ht=this.options,Dt=ht.maxNum,ar=ht.accessGetter,gr=ht.unenumerable,Dr=ht.lazyEvaluation;if((Ve=Rt()(he)?{type:he,args:oe,header:Ae}:he).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(Te.size>0&&(Ve.group=Te.peek()),Ri()(Ve,{id:++Di,accessGetter:ar,unenumerable:gr,lazyEvaluation:Dr}),Ve.type==="group"||Ve.type==="groupCollapsed"){var Hr={id:Mr()("group"),collapsed:!1,parent:Te.peek(),indentLevel:Te.size+1};Ve.type==="groupCollapsed"&&(Hr.collapsed=!0),Ve.targetGroup=Hr,Te.push(Hr)}var lr=new Yi(this,Ve);lr.on("updateHeight",function(){_t.isAtBottom=!1,_t.renderViewport()});var kr=this.lastLog;if(kr&&!y()(["html","group","groupCollapsed"],lr.type)&&kr.type===lr.type&&lr.isSimple()&&kr.text()===lr.text()?(kr.addCount(),lr.header&&kr.updateTime(lr.header.time),lr=kr,this.detachLog(kr)):(ct.push(lr),this.lastLog=lr),Dt!==0&&ct.length>Dt){var mr=ct[0];this.detachLog(mr),ct.shift()}this.attachLog(lr),this.emit("insert",lr)}},{key:"updateTopSpace",value:function(he){this.topSpaceHeight=he,this.el.style.top=he+"px"}},{key:"updateBottomSpace",value:function(he){this.bottomSpaceHeight=he}},{key:"updateSpace",value:function(he){this.spaceHeight!==he&&(this.spaceHeight=he,this.space.style.height=he+"px")}},{key:"detachLog",value:function(he){var oe=this.displayLogs,Ae=oe.indexOf(he);Ae>-1&&(oe.splice(Ae,1),this.renderViewport())}},{key:"attachLog",value:function(he){if(this.filterLog(he)&&!he.collapsed){var oe=this.displayLogs;if(oe.length===0)return oe.push(he),void this.renderViewport();var Ae=Br()(oe);if(he.id>Ae.id)return oe.push(he),void this.renderViewport();for(var Ve,_t=0,ct=oe.length-1,Te=0;_t<=ct;){if((Ve=oe[Te=_t+Math.floor((ct-_t)/2)]).id===he.id)return;Ve.id<he.id?_t=Te+1:ct=Te-1}Ve.id<he.id?oe.splice(Te+1,0,he):oe.splice(Te,0,he),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var he=this,oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,Ae=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){he.asyncTimer=null;var Ve,_t,ct=!1,Te=Ae.length;Te<1e3?(_t=200,Ve=400):Te<5e3?(_t=500,Ve=800):Te<1e4?(_t=800,Ve=1e3):Te<25e3?(_t=1e3,Ve=1200):Te<5e4?(_t=1500,Ve=1500):(_t=2e3,Ve=2500),_t>Te&&(_t=Te,ct=!0);for(var ht=0;ht<_t;ht++){var Dt=a(Ae.shift(),3),ar=Dt[0],gr=Dt[1],Dr=Dt[2];he.insertSync(ar,gr,Dr)}ct||wi()(function(){return he.handleAsyncList(Ve)})},oe))}},{key:"injectGlobal",value:function(){k()(this.global,function(he,oe){window[oe]||(window[oe]=he)})}},{key:"clearGlobal",value:function(){k()(this.global,function(he,oe){window[oe]&&window[oe]===he&&delete window[oe]})}},{key:"evalJs",value:function(he){var oe;this.injectGlobal();try{oe=eval.call(window,"(".concat(he,")"))}catch{oe=eval.call(window,he)}return this.setGlobal("$_",oe),this.clearGlobal(),oe}},{key:"filterLog",value:function(he){var oe=this.options.level,Ae=this.options.filter;if(he.ignoreFilter)return!0;if(!y()(oe,he.level))return!1;if(Ae){if(tr()(Ae))return Ae(he);if(ge()(Ae))return Ae.test(Xe()(he.text()));if(Rt()(Ae)&&(Ae=K()(Ae)))return y()(Xe()(he.text()),Xe()(Ae))}return!0}},{key:"collapseGroup",value:function(he){he.targetGroup.collapsed=!0,he.updateIcon("caret-right"),this.updateGroup(he)}},{key:"openGroup",value:function(he){he.targetGroup.collapsed=!1,he.updateIcon("caret-down"),this.updateGroup(he)}},{key:"updateGroup",value:function(he){for(var oe=he.targetGroup,Ae=this.logs,Ve=Ae.length,_t=Ae.indexOf(he)+1;_t<Ve;){var ct=Ae[_t];if(!ct.checkGroup()&&ct.group===oe)break;ct.collapsed?this.detachLog(ct):this.attachLog(ct),_t++}}},{key:"selectLog",value:function(he){var oe;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),Ut()(he)?this.emit("deselect"):(this.selectedLog=he,(oe=this.selectedLog)===null||oe===void 0||oe.select(),this.emit("select",he))}},{key:"bindEvent",value:function(){var he=this,oe=this.$el,Ae=this.c;this.resizeSensor.addListener(this.renderViewport);var Ve=this;oe.on("click",Ae(".log-container"),function(){Ve.selectLog(this.log)}),this.on("optionChange",function(_t,ct){var Te=he.logs;switch(_t){case"maxNum":ct>0&&Te.length>ct&&(he.logs=Te.slice(Te.length-ct),he.render());break;case"filter":he.render();break;case"level":he.options.level=fr()(ct),he.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=he.topTolerance,Ae=oe===void 0?500:oe,Ve=he.bottomTolerance,_t=Ve===void 0?500:Ve,ct=this.el,Te=this.container,ht=this.space;if(!ye()(Te)){for(var Dt=Te.scrollTop,ar=Te.offsetHeight,gr=ht.getBoundingClientRect().width,Dr=Dt-Ae,Hr=Dt+ar+_t,lr=this.displayLogs,kr=0,mr=0,Wr=0,wr=lr.length,vi=this.fakeEl,ci=document.createDocumentFragment(),hr=[],Ht=0;Ht<wr;Ht++){var si=lr[Ht],pr=si.width;si.height!==0&&pr===gr||(ci.appendChild(si.container),hr.push(si))}if(hr.length>0){vi.appendChild(ci);for(var ti=0,hi=hr.length;ti<hi;ti++)hr[ti].updateSize();vi.textContent=""}for(var Pi=document.createDocumentFragment(),Kr=0;Kr<wr;Kr++){var Ci=lr[Kr],Ii=Ci.container,gi=Ci.height;Wr>Hr?mr+=gi:Wr+gi>Dr?Pi.appendChild(Ii):Wr<Dr&&(kr+=gi),Wr+=gi}for(this.updateSpace(Wr),this.updateTopSpace(kr),this.updateBottomSpace(mr);ct.firstChild;)ct.lastChild&&ct.removeChild(ct.lastChild);ct.appendChild(Pi);var ki=Te.scrollHeight;this.isAtBottom&&Dt<=ki-ar&&(Te.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(cr()(ni||(ni=(0,n.Z)([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))}}]),kt}(Ji),ji=function(){return Tr()("HH:MM:ss ")};function Li(){for(var Nt=new Error,or="",kt=Nt.stack?Nt.stack.split(`
`):"",he=0,oe=kt.length;he<oe;he++)if((or=kt[he]).indexOf("winConsole")>-1&&he<oe-1){or=kt[he+1];break}return or}(function(Nt,or){try{Nt.exports=or,Nt.exports.default=or}catch{}})(s,jr)},5564:function(s,e,r){r.d(e,{Z:function(){return fr}});var n=r(168),o=r(5671),a=r(3144),c=r(7326),l=r(1752),h=r(9340),d=r(2963),f=r(1120),g=r(1512),_=r.n(g),E=r(1907),A=r.n(E),w=r(1443),m=r.n(w),b=r(2461),y=r.n(b),x=r(4331),D=r.n(x),R=r(5610),M=r.n(R),L=r(7483),k=r.n(L),I=(r(3990),r(6341)),V=r.n(I),N=r(3875),B=r.n(N),H=r(6954),z=r.n(H);r(9585);function W(Kt){var Wt="luna-".concat(Kt,"-");function Pt(rt){return y()(D()(rt).split(/\s+/),function(je){return V()(je,Wt)?je:je.replace(/[\w-]+/,function(Xe){return"".concat(Wt).concat(Xe)})}).join(" ")}return function(rt){if(/<[^>]*>/g.test(rt))try{var je=k().parse(rt);return Q(je,function(Xe){Xe.attrs&&Xe.attrs.class&&(Xe.attrs.class=Pt(Xe.attrs.class))}),k().stringify(je)}catch{return Pt(rt)}return Pt(rt)}}function Q(Kt,Wt){for(var Pt=0,rt=Kt.length;Pt<rt;Pt++){var je=Kt[Pt];Wt(je),je.content&&Q(je.content,Wt)}}var X="ontouchstart"in M(),G="PointerEvent"in M(),q={start:"touchstart",move:"touchmove",end:"touchend"},Y={start:"mousedown",move:"mousemove",end:"mouseup"},K={start:"pointerdown",move:"pointermove",end:"pointerup"};function se(Kt){return G?K[Kt]:X?q[Kt]:Y[Kt]}function Se(Kt,Wt){var Pt=Kt==="x"?"clientX":"clientY";return Wt[Pt]?Wt[Pt]:Wt.changedTouches?Wt.changedTouches[0][Pt]:0}function be(Kt){return B()(Kt.replace("px",""))}var xe=r(3783),Ee=r.n(xe),J=r(6329),ne=r.n(J),de=r(4193),ue=r.n(de),Fe=r(5852),Ie=r.n(Fe),ye=r(6930),$e=r.n(ye);function Oe(Kt){var Wt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Pt,rt=(0,f.Z)(Kt);if(Wt){var je=(0,f.Z)(this).constructor;Pt=Reflect.construct(rt,arguments,je)}else Pt=rt.apply(this,arguments);return(0,d.Z)(this,Pt)}}var Le,He=function(Kt){(0,h.Z)(Pt,Kt);var Wt=Oe(Pt);function Pt(rt,je){var Xe,_e,It=je.compName,ir=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,rr=ir===void 0?"light":ir;return(0,o.Z)(this,Pt),(Xe=Wt.call(this)).subComponents=[],Xe.compName=It,Xe.c=W(It),Xe.options={},Xe.container=rt,Xe.$container=_()(rt),Xe.$container.addClass(["luna-".concat(It),Xe.c("platform-".concat((_e=z()(),_e==="os x"?"mac":_e)))]),Xe.on("optionChange",function(Mt,Ot,Et){var st=Xe.c;Mt==="theme"&&(Xe.$container.rmClass(st("theme-".concat(Et))).addClass(st("theme-".concat(Ot))),Ee()(Xe.subComponents,function(ot){return ot.setOption("theme",Ot)}))}),Xe.setOption("theme",rr),Xe}return(0,a.Z)(Pt,[{key:"destroy",value:function(){var rt=this;this.destroySubComponents();var je=this.$container,Xe=je.attr("class");Ee()(Xe.split(/\s+/),function(_e){$e()(_e,"luna-".concat(rt.compName))&&je.rmClass(_e)}),je.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(rt,je){var Xe=this,_e=this.options,It={};typeof rt=="string"?It[rt]=je:It=rt,Ee()(It,function(ir,rr){var Mt=_e[rr];_e[rr]=ir,Xe.emit("optionChange",rr,ir,Mt)})}},{key:"getOption",value:function(rt){return this.options[rt]}},{key:"addSubComponent",value:function(rt){rt.setOption("theme",this.options.theme),this.subComponents.push(rt)}},{key:"removeSubComponent",value:function(rt){Ie()(this.subComponents,function(je){return je===rt})}},{key:"destroySubComponents",value:function(){Ee()(this.subComponents,function(rt){return rt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(rt){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue()(rt,je),ne()(this.options,rt)}},{key:"find",value:function(rt){return this.$container.find(this.c(rt))}}]),Pt}(m()),tt=r(8901),Ze=r.n(tt),pt=r(8613),fe=r.n(pt),Ne=r(3367),we=r.n(Ne),ke=r(9833),De=r.n(ke),Pe=r(1286),Je=r.n(Pe),Ye=r(242),Ct=r.n(Ye),Rt=r(2439),vt=r.n(Rt),ut=r(6156),nt=r.n(ut),Re=r(4777),it=r.n(Re),lt=r(1754),dt=r.n(lt),yt=r(6768),at=r.n(yt),qe=r(3063),et=r.n(qe),ft=r(9882),St=r.n(ft),Ut=r(9853),Ft=r.n(Ut),Zt=r(6435),qt=r.n(Zt);function tr(Kt){var Wt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Pt,rt=(0,f.Z)(Kt);if(Wt){var je=(0,f.Z)(this).constructor;Pt=Reflect.construct(rt,arguments,je)}else Pt=rt.apply(this,arguments);return(0,d.Z)(this,Pt)}}s=r.hmd(s);var xr=_()(document),fr=function(Kt){(0,h.Z)(Pt,Kt);var Wt=tr(Pt);function Pt(rt,je){var Xe;(0,o.Z)(this,Pt),(Xe=Wt.call(this,rt,{compName:"data-grid"},je)).resizeIdx=0,Xe.resizeStartX=0,Xe.resizeStartLeft=0,Xe.resizeDeltaX=0,Xe.nodes=[],Xe.colWidthsInitialized=!1,Xe.colMap={},Xe.selectedNode=null,Xe.isAscending=!0,Xe.colWidths=[],Xe.onResizeColMove=function(Mt){var Ot=(0,c.Z)(Xe),Et=Ot.resizeIdx,st=Ot.$resizers,ot=Ot.colWidths,gt=Ot.$colgroup,Tt=Se("x",Mt=Mt.origEvent)-Xe.resizeStartX,Vt=ot[Et],Bt=ot[Et+1],Lt=qt()(24-Vt,0),Ge=Ft()(Bt-24,0);Tt=St()(Tt,Lt,Ge),gt.each(function(){var $t=_()(this).find("col");$t.eq(Et).css("width",Vt+Tt+"px"),$t.eq(Et+1).css("width",Bt-Tt+"px")}),Xe.resizeDeltaX=Tt;var Gt=Xe.resizeStartLeft+Tt;st.eq(Et).css("left","".concat(Gt,"px"))},Xe.onResizeColEnd=function(Mt){Xe.onResizeColMove(Mt);var Ot=(0,c.Z)(Xe),Et=Ot.c,st=Ot.colWidths,ot=Ot.resizeIdx,gt=Ot.resizeDeltaX,Tt=Xe.options.columns,Vt=Tt[ot],Bt=Tt[ot+1],Lt=st[ot]+gt,Ge=Lt+(st[ot+1]-gt),Gt=Vt.weight+Bt.weight,$t=Gt*(Lt/Ge),dr=Gt-$t;Vt.weight=$t,Bt.weight=dr,Xe.applyColWeights(),_()(document.body).rmClass(Et("resizing")),xr.off(se("move"),Xe.onResizeColMove),xr.off(se("end"),Xe.onResizeColEnd)},Xe.$container.attr("tabindex","0"),Xe.resizeSensor=new(Ct())(rt),Xe.onResize=vt()(function(){Xe.updateHeight(),Xe.updateWeights()},16),je.height&&(je.maxHeight=je.height,je.minHeight=je.height),Xe.initOptions(je,{minHeight:41,maxHeight:1/0,filter:""});var _e=Xe.options,It=_e.columns,ir=_e.minHeight,rr=_e.maxHeight;return Ee()(It,function(Mt){ue()(Mt,{sortable:!1}),Xe.colMap[Mt.id]=Mt}),rr<ir&&Xe.setOption("maxHeight",ir),Xe.initTpl(),Xe.$headerRow=Xe.find(".header").find("tr"),Xe.$fillerRow=Xe.find(".filler-row"),Xe.fillerRow=Xe.$fillerRow.get(0),Xe.$tableBody=Xe.find(".data").find("tbody"),Xe.tableBody=Xe.$tableBody.get(0),Xe.$colgroup=Xe.$container.find("colgroup"),Xe.$dataContainer=Xe.find(".data-container"),Xe.renderHeader(),Xe.renderResizers(),Xe.updateWeights(),Xe.updateHeight(),Xe.bindEvent(),Xe}return(0,a.Z)(Pt,[{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(Pt.prototype),"destroy",this).call(this),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(rt){var je=this.nodes,Xe=je.indexOf(rt);Xe>-1&&(rt.detach(),je.splice(Xe,1),rt===this.selectedNode&&this.selectNode(je[Xe]||je[Xe-1]||null),this.updateHeight())}},{key:"append",value:function(rt,je){var Xe=new qr(this,rt,je);return this.nodes.push(Xe),this.sortId?this.sortNodes(this.sortId,this.isAscending):this.filterNode(Xe)&&(this.tableBody.insertBefore(Xe.container,this.fillerRow),this.updateHeight()),Xe}},{key:"clear",value:function(){Ee()(this.nodes,function(rt){return rt.detach()}),this.nodes=[],this.selectNode(null),this.updateHeight()}},{key:"updateHeight",value:function(){var rt=this.$fillerRow,je=this.c,Xe=this.$container,_e=this.options,It=_e.maxHeight,ir=_e.minHeight;this.$dataContainer.css({height:"auto"});var rr=this.$headerRow.offset().height+be(Xe.css("border-top-width"))+be(Xe.css("border-bottom-width"));(ir-=rr)<0&&(ir=0),It-=rr;var Mt=this.$dataContainer.find(je(".node")),Ot=Mt.length,Et=0;Ot>0&&(Et=Mt.offset().height*Ot),Et>ir?rt.hide():rt.show(),Et<ir?Et=ir:Et>=It&&(Et=It),this.$dataContainer.css({height:Et})}},{key:"selectNode",value:function(rt){var je;(nt()(rt)||rt!=null&&rt.selectable)&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null),nt()(rt)?this.emit("deselect"):(this.selectedNode=rt,(je=this.selectedNode)===null||je===void 0||je.select(),this.emit("select",rt)))}},{key:"onResizeColStart",value:function(rt){var je=this.c,Xe=this.resizeIdx,_e=this.$resizers;rt.stopPropagation(),rt.preventDefault(),rt=rt.origEvent,this.resizeStartX=Se("x",rt),this.resizeStartLeft=be(_e.eq(Xe).css("left")),_()(document.body).addClass(je("resizing")),xr.on(se("move"),this.onResizeColMove),xr.on(se("end"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var rt=this,je=this.c,Xe=this.$headerRow,_e=this.$tableBody,It=this.$resizers;this.resizeSensor.addListener(this.onResize);var ir=this;_e.on("click",je(".node"),function(){ir.selectNode(this.dataGridNode)}),Xe.on("click",je(".sortable"),function(rr){rr.stopPropagation();var Mt=_()(this),Ot=Mt.data("id"),Et=Mt.data("order")!=="descending";Mt.data("order",Et?"descending":"ascending"),ir.sortNodes(Ot,Et),Xe.find("th").each(function(){var st=_()(this);st.data("id")!==Ot&&st.rmAttr("data-order")})}),It.on(se("start"),function(rr){var Mt=_()(this);ir.resizeIdx=B()(Mt.data("idx")),ir.onResizeColStart(rr)}),this.on("optionChange",function(rr){switch(rr){case"minHeight":case"maxHeight":rt.updateHeight();break;case"filter":rt.renderData()}})}},{key:"sortNodes",value:function(rt,je){var Xe=this.colMap[rt].comparator||Vr;this.nodes.sort(function(_e,It){var ir=_e.data[rt],rr=It.data[rt];return De()(ir)&&(ir=ir.innerText),De()(rr)&&(rr=rr.innerText),je?Xe(ir,rr):Xe(rr,ir)}),this.renderData(),this.sortId=rt,this.isAscending=je}},{key:"updateWeights",value:function(){var rt=this.container,je=this.$headerRow,Xe=this.options.columns,_e=rt.offsetWidth;if(!this.colWidthsInitialized&&_e){for(var It=0,ir=Xe.length;It<ir;It++){var rr=Xe[It];if(!rr.weight){var Mt=je.find("th").get(It).offsetWidth;rr.weight=100*Mt/_e}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var rt=this.container,je=this.$colgroup,Xe=this.options.columns,_e=rt.offsetWidth;if(!(_e<=0)){for(var It=0,ir=Xe.length,rr=0;rr<ir;rr++)It+=Xe[rr].weight;var Mt="",Ot=0,Et=0;this.colWidths=[];for(var st=0;st<ir;st++){var ot=(Ot+=Xe[st].weight)*_e/It|0,gt=Math.max(ot-Et,14);Et=ot,Mt+='<col style="width:'.concat(gt,'px"></col>'),this.colWidths[st]=gt}je.html(Mt),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var rt=this.colWidths,je=[],Xe=rt.length-1,_e=0;_e<Xe;_e++)je[_e]=(je[_e-1]||0)+rt[_e];for(var It=0;It<Xe;It++)this.$resizers.eq(It).css("left",je[It]+"px")}},{key:"renderData",value:function(){var rt=this,je=this.tableBody,Xe=this.nodes,_e=this.fillerRow;Ee()(Xe,function(It){return It.detach()}),Ee()(Xe,function(It){rt.filterNode(It)&&je.insertBefore(It.container,_e)}),this.selectedNode&&!this.filterNode(this.selectedNode)&&this.selectNode(null),this.updateHeight()}},{key:"filterNode",value:function(rt){var je=this.options.filter;if(je){if(it()(je))return je(rt);if(dt()(je))return je.test(rt.text());if(at()(je)&&(je=D()(je)))return V()(et()(rt.text()),et()(je))}return!0}},{key:"renderHeader",value:function(){var rt=this.c,je="",Xe="";Ee()(this.options.columns,function(_e){var It=Ze()(_e.title);_e.sortable?je+=rt('<th class="sortable" data-id="'.concat(_e.id,'">').concat(It,"</th>")):je+="<th>".concat(It,"</th>"),Xe+="<td></td>"}),this.$headerRow.html(je),this.$fillerRow.html(Xe)}},{key:"renderResizers",value:function(){for(var rt="",je=this.options.columns.length-1,Xe=0;Xe<je;Xe++)rt+=this.c('<div class="resizer" data-idx="'.concat(Xe,'"></div>'));this.$container.append(rt),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(A()(Le||(Le=(0,n.Z)([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))}}]),Pt}(He),qr=function(){function Kt(Wt,Pt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{selectable:!1};(0,o.Z)(this,Kt),this.container=fe()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=_()(this.container),this.$container.addClass(Wt.c("node")),this.dataGrid=Wt,this.data=Pt,rt.selectable&&(this.selectable=rt.selectable),this.render()}return(0,a.Z)(Kt,[{key:"text",value:function(){return this.$container.text()}},{key:"detach",value:function(){this.$container.remove()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var Wt=this.data,Pt=this.$container,rt=this.container,je=this.dataGrid.getOption("columns");Pt.html(""),Ee()(je,function(Xe){var _e=fe()("td"),It=Wt[Xe.id];Je()(It)||(De()(It)?_e.appendChild(It):_e.innerText=we()(It)),rt.appendChild(_e)})}}]),Kt}();function Vr(Kt,Wt){if(Kt=we()(Kt),Wt=we()(Wt),$e()(Kt,"_")&&!$e()(Wt,"_"))return 1;if($e()(Wt,"_")&&!$e()(Kt,"_"))return-1;for(var Pt,rt,je,Xe,_e=/^\d+|^\D+/;;){if(!Kt)return Wt?-1:0;if(!Wt)return 1;if(Pt=Kt.match(_e)[0],rt=Wt.match(_e)[0],je=!isNaN(Pt),Xe=!isNaN(rt),je&&!Xe)return-1;if(Xe&&!je)return 1;if(je&&Xe){var It=Pt-rt;if(It)return It;if(Pt.length!==rt.length)return+Pt||+rt?rt.length-Pt.length:Pt.length-rt.length}else if(Pt!==rt)return Pt<rt?-1:1;Kt=Kt.substring(Pt.length),Wt=Wt.substring(rt.length)}}(function(Kt,Wt){try{Kt.exports=Wt,Kt.exports.default=Wt}catch{}})(s,fr)},8209:function(s,e,r){r.d(e,{Z:function(){return Ye}});var n=r(168),o=r(4942),a=r(5671),c=r(3144),l=r(7326),h=r(9340),d=r(2963),f=r(1120),g=r(1443),_=r.n(g),E=r(1512),A=r.n(E),w=r(2461),m=r.n(w),b=r(4331),y=r.n(b),x=r(5610),D=r.n(x),R=r(7483),M=r.n(R),L=(r(3990),r(6341)),k=r.n(L),I=(r(3875),r(6954)),V=r.n(I);r(9585);function N(vt){var ut="luna-".concat(vt,"-");function nt(Re){return m()(y()(Re).split(/\s+/),function(it){return k()(it,ut)?it:it.replace(/[\w-]+/,function(lt){return"".concat(ut).concat(lt)})}).join(" ")}return function(Re){if(/<[^>]*>/g.test(Re))try{var it=M().parse(Re);return B(it,function(lt){lt.attrs&&lt.attrs.class&&(lt.attrs.class=nt(lt.attrs.class))}),M().stringify(it)}catch{return nt(Re)}return nt(Re)}}function B(vt,ut){for(var nt=0,Re=vt.length;nt<Re;nt++){var it=vt[nt];ut(it),it.content&&B(it.content,ut)}}var H="ontouchstart"in D();function z(){var vt=V()();return vt==="os x"?"mac":vt}var W=r(3783),Q=r.n(W),X=r(6329),G=r.n(X),q=r(4193),Y=r.n(q),K=r(5852),se=r.n(K);function Se(vt){var ut=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var nt,Re=(0,f.Z)(vt);if(ut){var it=(0,f.Z)(this).constructor;nt=Reflect.construct(Re,arguments,it)}else nt=Re.apply(this,arguments);return(0,d.Z)(this,nt)}}var be,xe=function(vt){(0,h.Z)(nt,vt);var ut=Se(nt);function nt(Re,it){var lt,dt=it.compName,yt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,at=yt===void 0?"light":yt;return(0,a.Z)(this,nt),(lt=ut.call(this)).subComponents=[],lt.compName=dt,lt.c=N(dt),lt.options={},lt.container=Re,lt.$container=A()(Re),lt.$container.addClass(["luna-".concat(dt),lt.c("platform-".concat(z()))]),lt.on("optionChange",function(qe,et,ft){var St=lt.c;qe==="theme"&&(lt.$container.rmClass(St("theme-".concat(ft))).addClass(St("theme-".concat(et))),Q()(lt.subComponents,function(Ut){return Ut.setOption("theme",et)}))}),lt.setOption("theme",at),lt}return(0,c.Z)(nt,[{key:"destroy",value:function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat(z()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Re,it){var lt=this,dt=this.options,yt={};typeof Re=="string"?yt[Re]=it:yt=Re,Q()(yt,function(at,qe){var et=dt[qe];dt[qe]=at,lt.emit("optionChange",qe,at,et)})}},{key:"getOption",value:function(Re){return this.options[Re]}},{key:"addSubComponent",value:function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)}},{key:"removeSubComponent",value:function(Re){se()(this.subComponents,function(it){return it===Re})}},{key:"destroySubComponents",value:function(){Q()(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Re){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y()(Re,it),G()(this.options,Re)}},{key:"find",value:function(Re){return this.$container.find(this.c(Re))}}]),nt}(_()),Ee=r(8613),J=r.n(Ee),ne=r(5972),de=r.n(ne),ue=r(1907),Fe=r.n(ue),Ie=r(1352),ye=r.n(Ie),$e=r(2289),Oe=r.n($e),Le=r(3651),He=r.n(Le),tt=r(7756),Ze=r.n(tt),pt=r(8901),fe=r.n(pt),Ne=r(1672),we=r.n(Ne);function ke(vt,ut){var nt=Object.keys(vt);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(vt);ut&&(Re=Re.filter(function(it){return Object.getOwnPropertyDescriptor(vt,it).enumerable})),nt.push.apply(nt,Re)}return nt}function De(vt){for(var ut=1;ut<arguments.length;ut++){var nt=arguments[ut]!=null?arguments[ut]:{};ut%2?ke(Object(nt),!0).forEach(function(Re){(0,o.Z)(vt,Re,nt[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(nt)):ke(Object(nt)).forEach(function(Re){Object.defineProperty(vt,Re,Object.getOwnPropertyDescriptor(nt,Re))})}return vt}function Pe(vt){var ut=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var nt,Re=(0,f.Z)(vt);if(ut){var it=(0,f.Z)(this).constructor;nt=Reflect.construct(Re,arguments,it)}else nt=Re.apply(this,arguments);return(0,d.Z)(this,nt)}}s=r.hmd(s);var Je={comment:"",string:"",number:"",keyword:"",operator:""},Ye=function(vt){(0,h.Z)(nt,vt);var ut=Pe(nt);function nt(Re){var it,lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,a.Z)(this,nt),(it=ut.call(this,Re,{compName:"dom-viewer"},lt)).isExpanded=!1,it.childNodes=[],it.childNodeDomViewers=[],it.toggle=function(){it.isExpanded?it.collapse():it.expand()},it.initOptions(lt,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:Re,rootDomViewer:(0,l.Z)(it),ignore:function(){return!1}}),it.initTpl(),it.bindEvent(),it.options.isEndTag||it.initObserver(),it}return(0,c.Z)(nt,[{key:"select",value:function(Re){var it=this.c,lt=this.options;if(!Re||Re&&lt.node===Re)return this.$tag.hasClass(it("selected"))?void 0:(A()(this.options.rootContainer).find(it(".selected")).rmClass(it("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(it("selected")),void lt.rootDomViewer.emit("select",lt.node));if(Re.nodeType===Node.ELEMENT_NODE)for(var dt=Re,yt=Re.parentElement;yt;){if(yt===lt.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf(dt)].select(Re);break}dt=yt,yt=yt.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"expand",value:function(){this.isExpandable()&&!this.isExpanded&&(this.isExpanded=!0,this.renderExpandTag(),this.renderChildNodes())}},{key:"collapse",value:function(){this.isExpandable()&&this.isExpanded&&(this.isExpanded=!1,this.renderCollapseTag())}},{key:"destroy",value:function(){var Re=this.c;this.$tag.hasClass(Re("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(Re("platform-".concat(z()))).rmClass(Re("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var Re=this.$tag,it=this.c,lt=this.options.node;Re.html(this.renderHtmlTag(De(De({},Ct(lt)),{},{hasTail:!1,hasToggleButton:!0}))),Re.addClass(it("expanded")),this.$children.rmClass(it("hidden"))}},{key:"renderCollapseTag",value:function(){var Re=this.$tag,it=this.c,lt=this.options.node;this.$children.addClass(it("hidden")),this.$tag.html(this.renderHtmlTag(De(De({},Ct(lt)),{},{hasTail:!0,hasToggleButton:!0}))),Re.rmClass(it("expanded"))}},{key:"initObserver",value:function(){var Re=this;this.observer=new(Oe())(function(it){Q()(it,function(lt){Re.handleMutation(lt)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(Re){var it=this.$tag,lt=this.c,dt=this.options,yt=dt.node,at=dt.ignore;if(k()(["attributes","childList"],Re.type)){if(Re.type==="childList"){if(we()(Re.addedNodes,at)&&we()(Re.removedNodes,at))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(lt("hidden")),it.html(this.renderHtmlTag(De(De({},Ct(yt)),{},{hasTail:!1}))))}else Re.type==="characterData"&&(yt.nodeType===Node.TEXT_NODE?it.html(this.renderTextNode(yt)):yt.nodeType===Node.COMMENT_NODE&&it.html(this.renderHtmlComment(yt.nodeValue)))}},{key:"bindEvent",value:function(){var Re=this,it=this.c,lt=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&lt.on("click",it(".toggle"),function(dt){dt.stopPropagation(),Re.toggle()}),H?lt.on("click",function(){return Re.select()}):lt.on("mousedown",function(){return Re.select()})}},{key:"isExpandable",value:function(){return this.options.node.nodeType===Node.ELEMENT_NODE&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var Re=this.options,it=Re.rootContainer,lt=Re.ignore,dt=this.options.node,yt=ye()(dt.childNodes);return yt=de()(yt,function(at){if(at.nodeType===Node.TEXT_NODE||at.nodeType===Node.COMMENT_NODE){var qe=at.nodeValue;if(y()(qe)==="")return!1}return at!==it&&!lt(at)})}},{key:"initTpl",value:function(){var Re=this.container,it=this.c,lt=this.options,dt=lt.node,yt=lt.isEndTag,at=A()(J()("li"));if(at.addClass(it("tree-item")),this.$tag=at,yt)at.html(it('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat(dt.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(dt.nodeType===Node.ELEMENT_NODE){var qe=this.isExpandable(),et=De(De({},Ct(dt)),{},{hasTail:qe,hasToggleButton:qe});at.html(this.renderHtmlTag(et))}else if(dt.nodeType===Node.TEXT_NODE)at.html(this.renderTextNode(dt));else{if(dt.nodeType!==Node.COMMENT_NODE)return;var ft=dt.nodeValue;if(ft.trim()==="")return;at.html(this.renderHtmlComment(ft))}if(Re.appendChild(at.get(0)),dt.nodeType===dt.ELEMENT_NODE){var St=A()(J()("ul"));St.addClass([it("children"),it("hidden")]),Re.appendChild(St.get(0)),this.$children=St}}},{key:"renderChildNodes",value:function(){var Re=this,it=this.options.node,lt=this.options,dt=lt.rootContainer,yt=lt.ignore,at=lt.rootDomViewer,qe=this.$children.get(0),et=this.childNodes,ft=this.childNodeDomViewers;Q()(ft,function(Ft){Ft.detach(),Re.removeSubComponent(Ft)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var St=this.getChildNodes();this.childNodes=St;var Ut=[];this.childNodeDomViewers=Ut,Q()(St,function(Ft,Zt){var qt,tr=et.indexOf(Ft);(qt=tr>-1?ft[tr]:new nt(qe,{node:Ft,parent:Re,rootContainer:dt,rootDomViewer:at,ignore:yt})).attach(),Ut[Zt]=qt,Re.addSubComponent(qt)}),Q()(ft,function(Ft){Ft.isAttached()||Ft.destroy()}),it&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new nt(qe,{node:it,parent:this,isEndTag:!0,rootContainer:dt,rootDomViewer:at,ignore:yt}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(Re){var it=m()(Re.attributes,function(yt){var at=yt.name,qe=yt.value,et=yt.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat(fe()(at),"</span>").concat(qe?'="<span class="attribute-value'.concat(et?" attribute-underline":"",'">').concat(fe()(qe),'</span>"'):"","</span>")}).join(""),lt="";Re.hasTail?lt="".concat(Re.hasTail?"…":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(Re.tagName,"</span>&gt;</span>"):this.isExpandable()||(lt='<span class="html-tag">&lt;<span class="tag-name">/'.concat(Re.tagName,"</span>&gt;</span>"));var dt="";return Re.hasToggleButton&&(dt='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c(Fe()(be||(be=(0,n.Z)([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),dt,Re.tagName,it,lt))}},{key:"renderTextNode",value:function(Re){var it=this.c,lt=Re.nodeValue,dt=Re.parentElement,yt='<span class="text-node">',at='</span><span class="selection"></span>';if(dt&&lt.length<1e4){if(dt.tagName==="STYLE")return it("".concat(yt).concat(He()(lt,"css",Je)).concat(at));if(dt.tagName==="SCRIPT")return it("".concat(yt).concat(He()(lt,"js",Je)).concat(at))}return it('"'.concat(yt).concat(fe()(Ze()(lt,1e4,{separator:" ",ellipsis:"…"}))).concat(at,'"'))}},{key:"renderHtmlComment",value:function(Re){return this.c('<span class="html-comment">&lt;!-- '.concat(fe()(Re),' --&gt;</span><span class="selection"></span>'))}}]),nt}(xe);function Ct(vt){var ut={tagName:"",attributes:[]};ut.tagName=vt.tagName.toLocaleLowerCase();var nt=[];return Q()(vt.attributes,function(Re){var it=Re.name,lt=Re.value;nt.push({name:it,value:lt,isLink:Rt(vt,it)})}),ut.attributes=nt,ut}function Rt(vt,ut){var nt=vt.tagName;return(nt==="SCRIPT"||nt==="IMAGE"||nt==="VIDEO"||nt==="AUDIO")&&ut==="src"||nt==="LINK"&&ut==="href"}(function(vt,ut){try{vt.exports=ut,vt.exports.default=ut}catch{}})(s,Ye)},129:function(s,e,r){r.d(e,{Z:function(){return $e}});var n=r(907),o=r(181);function a(pt){return function(fe){if(Array.isArray(fe))return(0,n.Z)(fe)}(pt)||function(fe){if(typeof Symbol<"u"&&fe[Symbol.iterator]!=null||fe["@@iterator"]!=null)return Array.from(fe)}(pt)||(0,o.Z)(pt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var c=r(168),l=r(5671),h=r(3144),d=r(7326),f=r(1752),g=r(9340),_=r(2963),E=r(1120),A=r(1443),w=r.n(A),m=r(1512),b=r.n(m),y=r(2461),x=r.n(y),D=r(4331),R=r.n(D),M=r(5610),L=r.n(M),k=r(7483),I=r.n(k),V=(r(3990),r(6341)),N=r.n(V),B=(r(3875),r(6954)),H=r.n(B);r(9585);function z(pt){var fe="luna-".concat(pt,"-");function Ne(we){return x()(R()(we).split(/\s+/),function(ke){return N()(ke,fe)?ke:ke.replace(/[\w-]+/,function(De){return"".concat(fe).concat(De)})}).join(" ")}return function(we){if(/<[^>]*>/g.test(we))try{var ke=I().parse(we);return W(ke,function(De){De.attrs&&De.attrs.class&&(De.attrs.class=Ne(De.attrs.class))}),I().stringify(ke)}catch{return Ne(we)}return Ne(we)}}function W(pt,fe){for(var Ne=0,we=pt.length;Ne<we;Ne++){var ke=pt[Ne];fe(ke),ke.content&&W(ke.content,fe)}}L();var Q=r(3783),X=r.n(Q),G=r(6329),q=r.n(G),Y=r(4193),K=r.n(Y),se=r(5852),Se=r.n(se),be=r(6930),xe=r.n(be);function Ee(pt){var fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ne,we=(0,E.Z)(pt);if(fe){var ke=(0,E.Z)(this).constructor;Ne=Reflect.construct(we,arguments,ke)}else Ne=we.apply(this,arguments);return(0,_.Z)(this,Ne)}}var J,ne=function(pt){(0,g.Z)(Ne,pt);var fe=Ee(Ne);function Ne(we,ke){var De,Pe,Je=ke.compName,Ye=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ct=Ye===void 0?"light":Ye;return(0,l.Z)(this,Ne),(De=fe.call(this)).subComponents=[],De.compName=Je,De.c=z(Je),De.options={},De.container=we,De.$container=b()(we),De.$container.addClass(["luna-".concat(Je),De.c("platform-".concat((Pe=H()(),Pe==="os x"?"mac":Pe)))]),De.on("optionChange",function(Rt,vt,ut){var nt=De.c;Rt==="theme"&&(De.$container.rmClass(nt("theme-".concat(ut))).addClass(nt("theme-".concat(vt))),X()(De.subComponents,function(Re){return Re.setOption("theme",vt)}))}),De.setOption("theme",Ct),De}return(0,h.Z)(Ne,[{key:"destroy",value:function(){var we=this;this.destroySubComponents();var ke=this.$container,De=ke.attr("class");X()(De.split(/\s+/),function(Pe){xe()(Pe,"luna-".concat(we.compName))&&ke.rmClass(Pe)}),ke.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(we,ke){var De=this,Pe=this.options,Je={};typeof we=="string"?Je[we]=ke:Je=we,X()(Je,function(Ye,Ct){var Rt=Pe[Ct];Pe[Ct]=Ye,De.emit("optionChange",Ct,Ye,Rt)})}},{key:"getOption",value:function(we){return this.options[we]}},{key:"addSubComponent",value:function(we){we.setOption("theme",this.options.theme),this.subComponents.push(we)}},{key:"removeSubComponent",value:function(we){Se()(this.subComponents,function(ke){return ke===we})}},{key:"destroySubComponents",value:function(){X()(this.subComponents,function(we){return we.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(we){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K()(we,ke),q()(this.options,we)}},{key:"find",value:function(we){return this.$container.find(this.c(we))}}]),Ne}(w()),de=r(1907),ue=r.n(de),Fe=r(8613),Ie=r.n(Fe);function ye(pt){var fe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ne,we=(0,E.Z)(pt);if(fe){var ke=(0,E.Z)(this).constructor;Ne=Reflect.construct(we,arguments,ke)}else Ne=we.apply(this,arguments);return(0,_.Z)(this,Ne)}}s=r.hmd(s);var $e=function(pt){(0,g.Z)(Ne,pt);var fe=ye(Ne);function Ne(we){var ke,De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,l.Z)(this,Ne),(ke=fe.call(this,we,{compName:"modal"},De)).render=function(){var Pe=(0,d.Z)(ke),Je=Pe.options,Ye=Pe.c,Ct=Pe.$body;Je.title?(Ct.rmClass(Ye("no-title")),ke.$title.text(Je.title)):Ct.addClass(Ye("no-title")),Je.footer?(Ct.rmClass(Ye("no-footer")),ke.$footer.html("").append(Je.footer)):Ct.addClass(Ye("no-footer")),Je.showClose?ke.$close.show():ke.$close.hide(),ke.$body.css("width",Je.width+"px"),ke.$content.html("").append(Je.content)},ke.hide(),ke.initOptions(De,{title:"",content:"",footer:"",showClose:!0,width:Ze()}),ke.initTpl(),ke.$title=ke.find(".title"),ke.$content=ke.find(".content"),ke.$body=ke.find(".body"),ke.$footer=ke.find(".footer"),ke.$close=ke.find(".icon-close"),ke.bindEvent(),ke}return(0,h.Z)(Ne,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){(0,f.Z)((0,E.Z)(Ne.prototype),"destroy",this).call(this),this.$container.rmClass(this.c("hidden"))}},{key:"bindEvent",value:function(){var we=this;this.$body.on("click",this.c(".icon-close"),function(){return we.hide()}),this.on("optionChange",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c(ue()(J||(J=(0,c.Z)([`
      <div class="body">
        <span class="icon icon-close"></span>
        <div class="title"></div>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
      `])))))}}],[{key:"alert",value:function(we){var ke=He(),De=ke.c;ke.setOption({title:"",content:we,width:Ze(),footer:tt({OK:{type:"primary",onclick:function(){ke.hide()}}},De)}),ke.show()}},{key:"confirm",value:function(we){return new Promise(function(ke){var De=He(),Pe=De.c;De.setOption({title:"",content:we,width:Ze(),footer:tt({Cancel:{type:"secondary",onclick:function(){De.hide(),ke(!1)}},OK:{type:"primary",onclick:function(){De.hide(),ke(!0)}}},Pe)}),De.show()})}},{key:"prompt",value:function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(De){var Pe=He(),Je=Pe.c,Ye=Ie()("input"+Je(".input"),{value:ke});function Ct(){Pe.hide(),De(Ye.value)}b()(Ye).on("keypress",function(vt){(vt=vt.origEvent).key==="Enter"&&Ct()}),Pe.setOption({title:we,content:Ye,width:Ze(),footer:tt({Cancel:{type:"secondary",onclick:function(){Pe.hide(),De(null)}},OK:{type:"primary",onclick:Ct}},Je)}),Pe.show();var Rt=Ye.value.length;Ye.setSelectionRange(Rt,Rt),Ye.focus()})}},{key:"setContainer",value:function(we){Le=we}}]),Ne}(ne),Oe=null,Le=null;function He(){return Le||(Le=Ie()("div"),document.body.append(Le)),Oe||(Oe=new $e(Le,{showClose:!1})),Oe}function tt(pt,fe){var Ne=x()(pt,function(we,ke){return Ie()(fe(".button")+fe("."+we.type),{onclick:we.onclick},ke)});return Ie().apply(void 0,[fe(".button-group"),{}].concat(a(Ne)))}function Ze(){return window.innerWidth<500?window.innerWidth-32:500}(function(pt,fe){try{pt.exports=fe,pt.exports.default=fe}catch{}})(s,$e)},8299:function(s,e,r){r.d(e,{q:function(){return _e},Z:function(){return rr}});var n=r(1002),o=r(5671),a=r(3144),c=r(7326),l=r(1752),h=r(9340),d=r(2963),f=r(1120),g=r(415),_=r.n(g),E=r(3990),A=r.n(E),w=r(4696),m=r.n(w),b=r(3063),y=r.n(b),x=r(5166),D=r.n(x),R=r(6472),M=r.n(R),L=r(3023),k=r.n(L),I=r(2533),V=r.n(I),N=r(3783),B=r.n(N),H=r(300),z=r.n(H),W=r(4321),Q=r.n(W),X=r(3085),G=r.n(X),q=r(1512),Y=r.n(q),K=r(801),se=r.n(K),Se=r(7756),be=r.n(Se),xe=r(6768),Ee=r.n(xe),J=r(1116),ne=r.n(J),de=r(5972),ue=r.n(de),Fe=r(996),Ie=r.n(Fe),ye=r(3367),$e=r.n(ye),Oe=r(1214),Le=r.n(Oe),He=r(6339),tt=r.n(He),Ze=r(6329),pt=r.n(Ze),fe=function(){function Mt(){(0,o.Z)(this,Mt),this.id=0,this.visited=[]}return(0,a.Z)(Mt,[{key:"set",value:function(Ot,Et){var st=this.visited,ot=this.id,gt={id:ot,val:Ot};return pt()(gt,Et),st.push(gt),this.id++,ot}},{key:"get",value:function(Ot){for(var Et=this.visited,st=0,ot=Et.length;st<ot;st++){var gt=Et[st];if(Ot===gt.val)return gt}return!1}}]),Mt}(),Ne=r(4331),we=r.n(Ne),ke=r(8901),De=r.n(ke),Pe=function(Mt){return De()($e()(Mt)).replace(/\n/g,"↵").replace(/\f|\r|\t/g,"")};function Je(Mt){return Mt.length>500&&(Mt=Mt.slice(0,500)+"..."),"ƒ "+we()(function(Ot){var Et=Ot.match(Ye);return Et?Et[0]:Ot}(Mt).replace("function",""))}var Ye=/function(.*?)\((.*?)\)/,Ct=r(6930),Rt=r.n(Ct),vt=r(5229),ut=r.n(vt),nt=r(3875),Re=r.n(nt),it=r(9433),lt=r.n(it),dt=r(1443),yt=r.n(dt),at=r(2461),qe=r.n(at),et=r(5610),ft=r.n(et),St=r(7483),Ut=r.n(St),Ft=r(6341),Zt=r.n(Ft),qt=r(6954),tr=r.n(qt);r(9585);function xr(Mt){var Ot="luna-".concat(Mt,"-");function Et(st){return qe()(we()(st).split(/\s+/),function(ot){return Zt()(ot,Ot)?ot:ot.replace(/[\w-]+/,function(gt){return"".concat(Ot).concat(gt)})}).join(" ")}return function(st){if(/<[^>]*>/g.test(st))try{var ot=Ut().parse(st);return fr(ot,function(gt){gt.attrs&&gt.attrs.class&&(gt.attrs.class=Et(gt.attrs.class))}),Ut().stringify(ot)}catch{return Et(st)}return Et(st)}}function fr(Mt,Ot){for(var Et=0,st=Mt.length;Et<st;Et++){var ot=Mt[Et];Ot(ot),ot.content&&fr(ot.content,Ot)}}ft();function qr(){var Mt=tr()();return Mt==="os x"?"mac":Mt}var Vr=r(4193),Kt=r.n(Vr),Wt=r(5852),Pt=r.n(Wt);function rt(Mt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Et,st=(0,f.Z)(Mt);if(Ot){var ot=(0,f.Z)(this).constructor;Et=Reflect.construct(st,arguments,ot)}else Et=st.apply(this,arguments);return(0,d.Z)(this,Et)}}var je=function(Mt){(0,h.Z)(Et,Mt);var Ot=rt(Et);function Et(st,ot){var gt,Tt=ot.compName,Vt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Bt=Vt===void 0?"light":Vt;return(0,o.Z)(this,Et),(gt=Ot.call(this)).subComponents=[],gt.compName=Tt,gt.c=xr(Tt),gt.options={},gt.container=st,gt.$container=Y()(st),gt.$container.addClass(["luna-".concat(Tt),gt.c("platform-".concat(qr()))]),gt.on("optionChange",function(Lt,Ge,Gt){var $t=gt.c;Lt==="theme"&&(gt.$container.rmClass($t("theme-".concat(Gt))).addClass($t("theme-".concat(Ge))),B()(gt.subComponents,function(dr){return dr.setOption("theme",Ge)}))}),gt.setOption("theme",Bt),gt}return(0,a.Z)(Et,[{key:"destroy",value:function(){this.destroySubComponents();var st=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(st("platform-".concat(qr()))).rmClass(st("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(st,ot){var gt=this,Tt=this.options,Vt={};typeof st=="string"?Vt[st]=ot:Vt=st,B()(Vt,function(Bt,Lt){var Ge=Tt[Lt];Tt[Lt]=Bt,gt.emit("optionChange",Lt,Bt,Ge)})}},{key:"getOption",value:function(st){return this.options[st]}},{key:"addSubComponent",value:function(st){st.setOption("theme",this.options.theme),this.subComponents.push(st)}},{key:"removeSubComponent",value:function(st){Pt()(this.subComponents,function(ot){return ot===st})}},{key:"destroySubComponents",value:function(){B()(this.subComponents,function(st){return st.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(st){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt()(st,ot),pt()(this.options,st)}},{key:"find",value:function(st){return this.$container.find(this.c(st))}}]),Et}(yt());function Xe(Mt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Et,st=(0,f.Z)(Mt);if(Ot){var ot=(0,f.Z)(this).constructor;Et=Reflect.construct(st,arguments,ot)}else Et=st.apply(this,arguments);return(0,d.Z)(this,Et)}}var _e=function(Mt){(0,h.Z)(Et,Mt);var Ot=Xe(Et);function Et(st){var ot;return(0,o.Z)(this,Et),(ot=Ot.call(this,st,{compName:"object-viewer"})).onItemClick=function(gt){var Tt=(0,c.Z)(ot),Vt=Tt.map,Bt=Tt.c,Lt=Y()(gt.curTarget),Ge=Lt.data("object-id"),Gt=Lt.find("span").eq(0);if(!Lt.data("first-level")&&(Ge&&(Lt.find("ul").html(ot.objToHtml(Vt[Ge],!1)),Lt.rmAttr("data-object-id")),gt.stopImmediatePropagation(),Gt.hasClass(Bt("expanded")))){var $t=Lt.find("ul").eq(0);Gt.hasClass(Bt("collapsed"))?(Gt.rmClass(Bt("collapsed")),$t.show()):(Gt.addClass(Bt("collapsed")),$t.hide()),ot.emit("change")}},ot.bindEvent(),ot}return(0,a.Z)(Et,[{key:"set",value:function(st){Ee()(st)&&(st=JSON.parse(st)),this.data={id:ut()("json"),enumerable:{0:st}},this.map={},It(this.map,this.data),this.render()}},{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(Et.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(st,ot){var gt=this,Tt="";return B()(["enumerable","unenumerable","symbol"],function(Vt){if(st[Vt]){var Bt=V()(st[Vt]);tt()(Bt);for(var Lt=0,Ge=Bt.length;Lt<Ge;Lt++){var Gt=Bt[Lt];Tt+=gt.createEl(Gt,st[Vt][Gt],Vt,ot)}}}),st.proto&&(Tt===""?Tt=this.objToHtml(st.proto):Tt+=this.createEl("[[Prototype]]",st.proto,"proto")),Tt}},{key:"createEl",value:function(st,ot,gt){var Tt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Vt=this.c,Bt=(0,n.Z)(ot);if(ot===null)return"<li>".concat(Ar(st),'<span class="').concat(Vt("null"),'">null</span></li>');if(A()(ot)||m()(ot))return"<li>".concat(Ar(st),'<span class="').concat(Vt(Bt),'">').concat(Pe(ot),"</span></li>");if(ot.type==="RegExp"&&(Bt="regexp"),ot.type==="Number"&&(Bt="number"),ot.type==="Number"||ot.type==="RegExp")return"<li>".concat(Ar(st),'<span class="').concat(Vt(Bt),'">').concat(Pe(ot.value),"</span></li>");if(ot.type==="Undefined"||ot.type==="Symbol")return"<li>".concat(Ar(st),'<span class="').concat(Vt("special"),'">').concat(y()(ot.type),"</span></li>");if(ot==="(...)")return"<li>".concat(Ar(st),'<span class="').concat(Vt("special"),'">').concat(ot,"</span></li>");if(D()(ot)){var Lt=ot.id,Ge=ot.reference,Gt=function(Qt){var Xt=Qt.type,Jt=Qt.value;if(Xt)return Xt==="Function"?Je(Jt):Xt==="Array"&&Qt.unenumerable?"Array(".concat(Qt.unenumerable.length,")"):Qt.type}(ot)||k()(Bt),$t=Tt?"":'<span class="'.concat(Vt("expanded collapsed"),'"><span class="').concat(Vt("icon icon-caret-right"),'"></span><span class="').concat(Vt("icon icon-caret-down"),'"></span></span>'),dr="<li ".concat(Tt?'data-first-level="true"':""," ").concat('data-object-id="'+(Ge||Lt)+'"',">").concat($t).concat(Ar(st),'<span class="').concat(Vt("open"),'">').concat(Tt?"":Gt,'</span><ul class="').concat(Vt(Bt),'" ').concat(Tt?"":'style="display:none"',">");return Tt&&(dr+=this.objToHtml(this.map[Lt])),dr+'</ul><span class="'.concat(Vt("close"),'"></span></li>')}function Ar(Qt){if(Tt||D()(ot)&&ot.jsonSplitArr)return"";var Xt=Vt("key");return gt==="unenumerable"||gt==="symbol"?Xt=Vt("key-lighter"):gt==="proto"&&(Xt=Vt("key-special")),'<span class="'.concat(Xt,'">').concat(Pe(Qt),"</span>: ")}return Ee()(ot)&&ot.length>1e4&&(ot=be()(ot,50,{separator:" ",ellipsis:"…"})),"<li>".concat(Ar(st),'<span class="').concat(Vt((0,n.Z)(ot)),'">"').concat(Pe(ot),'"</span></li>')}},{key:"render",value:function(){var st=this.map[this.data.id];this.$container.html(this.objToHtml(st,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),Et}(je);function It(Mt,Ot){var Et=Ot.id;if(Et||Et===0){if(Ot.type&&Rt()(Ot.type,"Array")&&Ot.enumerable){var st=function(Bt,Lt,Ge){var Gt=[],$t={};return B()(Bt.enumerable,function(dr,Ar){var Qt=Re()(Ar);lt()(Qt)?$t[Ar]=dr:Gt[Qt]=dr}),Gt.enumerable=$t,Gt.type=Ge,Gt.id=Lt,Bt.unenumerable&&(Gt.unenumerable=Bt.unenumerable),Bt.symbol&&(Gt.symbol=Bt.symbol),Bt.proto&&(Gt.proto=Bt.proto),Gt}(Ot,Et,Ot.type);st.length>100&&(Ot=function(Bt){var Lt=0,Ge={};B()(Ie()(Bt,100),function($t){var dr={},Ar=Lt;dr.type="["+Ar,dr.enumerable={},B()($t,function(Xt){dr.enumerable[Lt]=Xt,Lt+=1});var Qt=Lt-1;dr.type+=(Qt-Ar>0?" … "+Qt:"")+"]",dr.id=ut()("json"),dr.jsonSplitArr=!0,Ge[Lt]=dr});var Gt={};return Gt.enumerable=Ge,Gt.id=Bt.id,Gt.type=Bt.type,Bt.unenumerable&&(Gt.unenumerable=Bt.unenumerable),Bt.symbol&&(Gt.symbol=Bt.symbol),Bt.proto&&(Gt.proto=Bt.proto),Gt}(st))}Mt[Et]=Ot;var ot=[];B()(["enumerable","unenumerable","symbol"],function(Bt){if(Ot[Bt])for(var Lt in Ot[Bt])ot.push(Ot[Bt][Lt])}),Ot.proto&&ot.push(Ot.proto);for(var gt=0,Tt=ot.length;gt<Tt;gt++){var Vt=ot[gt];D()(Vt)&&It(Mt,Vt)}}}function ir(Mt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Et,st=(0,f.Z)(Mt);if(Ot){var ot=(0,f.Z)(this).constructor;Et=Reflect.construct(st,arguments,ot)}else Et=st.apply(this,arguments);return(0,d.Z)(this,Et)}}s=r.hmd(s);var rr=function(Mt){(0,h.Z)(Et,Mt);var Ot=ir(Et);function Et(st){var ot,gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,Et),(ot=Ot.call(this,st,{compName:"object-viewer"})).onItemClick=function(Tt){var Vt=(0,c.Z)(ot),Bt=Vt.map,Lt=Vt.c,Ge=Y()(Tt.curTarget),Gt=Ge.data("object-id"),$t=Ge.find("span").eq(0);if(!Ge.data("first-level")&&(Gt&&(Ge.find("ul").html(ot.objToHtml(Bt[Gt],!1)),Ge.rmAttr("data-object-id")),Tt.stopImmediatePropagation(),$t.hasClass(Lt("expanded")))){var dr=Ge.find("ul").eq(0);$t.hasClass(Lt("collapsed"))?($t.rmClass(Lt("collapsed")),dr.show()):($t.addClass(Lt("collapsed")),dr.hide()),ot.emit("change")}},ot.initOptions(gt,{unenumerable:!1,accessGetter:!1}),ot.bindEvent(),ot}return(0,a.Z)(Et,[{key:"set",value:function(st){this.data=[st],this.visitor=new fe,this.map={},this.render()}},{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(Et.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(st,ot){var gt=this,Tt=this.visitor,Vt=st,Bt=!1,Lt=Tt.get(st);Lt&&Lt.self&&(Vt=Lt.self);var Ge="",Gt=["enumerable"],$t=V()(st),dr=[],Ar=[],Qt=[],Xt={};if(this.options.unenumerable&&!ot&&(Gt.push("unenumerable"),Gt.push("symbol"),dr=se()(ne()(st,{prototype:!1,unenumerable:!0}),$t),Ar=ue()(ne()(st,{prototype:!1,symbol:!0}),function(cr){return(0,n.Z)(cr)==="symbol"})),M()(st)&&st.length>100){Gt.unshift("virtual"),Bt=!0;var Jt=0,Fr={};B()(Ie()(st,100),function(cr){var $r=Object.create(null),Xr=Jt,Cr="["+Xr;B()(cr,function(li){$r[Jt]=li,Fr[Jt]=!0,Jt++});var Mr=Jt-1;Xt[Cr+=(Mr-Xr>0?" … "+Mr:"")+"]"]=$r}),Qt=V()(Xt),$t=ue()($t,function(cr){return!Fr[cr]})}B()(Gt,function(cr){var $r=[];$r=cr==="symbol"?Ar:cr==="unenumerable"?dr:cr==="virtual"?Qt:$t,Bt||tt()($r);for(var Xr=0,Cr=$r.length;Xr<Cr;Xr++){var Mr=$e()($r[Xr]),li="",Jr=Object.getOwnPropertyDescriptor(st,Mr),br=Jr&&Jr.get,Pr=Jr&&Jr.set;if(br&&!gt.options.accessGetter)li="(...)";else try{li=cr==="virtual"?Xt[Mr]:Vt[Mr],Q()(li)&&li.catch(Le())}catch(We){li=We instanceof Error?We.message:$e()(We)}Ge+=gt.createEl(Mr,st,li,cr,ot),br&&(Ge+=gt.createEl("get ".concat(Mr),st,Jr.get,cr,ot)),Pr&&(Ge+=gt.createEl("set ".concat(Mr),st,Jr.set,cr,ot))}});var Qr=_()(st);if(!ot&&Qr)if(Ge===""){var Yr=Tt.set(Qr,{self:st});this.map[Yr]=Qr,Ge=this.objToHtml(Qr)}else Ge+=this.createEl("[[Prototype]]",Vt||st,Qr,"proto");return Ge}},{key:"createEl",value:function(st,ot,gt,Tt){var Vt=arguments.length>4&&arguments[4]!==void 0&&arguments[4],Bt=this.visitor,Lt=this.c,Ge=(0,n.Z)(gt),Gt=G()(gt,!1);if(Tt==="virtual"&&(Gt=st),gt===null)return"<li>".concat(Fr(st),'<span class="').concat(Lt("null"),'">null</span></li>');if(A()(gt)||m()(gt))return"<li>".concat(Fr(st),'<span class="').concat(Lt(Ge),'">').concat(Pe(gt),"</span></li>");if(Gt==="RegExp"&&(Ge="regexp"),Gt==="Number"&&(Ge="number"),Gt==="Undefined"||Gt==="Symbol")return"<li>".concat(Fr(st),'<span class="').concat(Lt("special"),'">').concat(y()(Gt),"</span></li>");if(gt==="(...)")return"<li>".concat(Fr(st),'<span class="').concat(Lt("special"),'">').concat(gt,"</span></li>");if(D()(gt)){var $t,dr=Bt.get(gt);if(dr)$t=dr.id;else{var Ar={};Tt==="proto"&&(Ar.self=ot),$t=Bt.set(gt,Ar),this.map[$t]=gt}var Qt="Object";Qt=Ge==="regexp"?'<span class="'.concat(Lt(Ge),'">').concat(Pe(gt)):Pe(function(Qr,Yr){if(Yr)return Yr==="Function"?Je(z()(Qr)):Yr==="Array"?"Array(".concat(Qr.length,")"):Yr}(gt,Gt)||k()(Ge));var Xt=Vt?"":'<span class="'.concat(Lt("expanded collapsed"),'"><span class="').concat(Lt("icon icon-caret-right"),'"></span><span class="').concat(Lt("icon icon-caret-down"),'"></span></span>'),Jt="<li ".concat(Vt?'data-first-level="true"':""," ").concat('data-object-id="'+$t+'"',">").concat(Xt).concat(Fr(st),'<span class="').concat(Lt("open"),'">').concat(Vt?"":Qt,'</span><ul class="').concat(Lt(Ge),'" ').concat(Vt?"":'style="display:none"',">");return Vt&&(Jt+=this.objToHtml(gt)),Jt+'</ul><span class="'.concat(Lt("close"),'"></span></li>')}function Fr(Qr){if(Vt||D()(gt)&&Tt==="virtual")return"";var Yr=Lt("key");return Tt==="unenumerable"||Tt==="symbol"?Yr=Lt("key-lighter"):Tt==="proto"&&(Yr=Lt("key-special")),'<span class="'.concat(Yr,'">').concat(Pe(Qr),"</span>: ")}return Ee()(gt)&&gt.length>1e4&&(gt=be()(gt,50,{separator:" ",ellipsis:"…"})),"<li>".concat(Fr(st),'<span class="').concat(Lt((0,n.Z)(gt)),'">"').concat(Pe(gt),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),Et}(je);rr.Static=_e,function(Mt,Ot){try{Mt.exports=Ot,Mt.exports.default=Ot}catch{}}(s,rr)},8692:function(s,e,r){r.d(e,{Z:function(){return Je}});var n=r(7326),o=r(5671),a=r(3144),c=r(9340),l=r(2963),h=r(1120),d=r(1512),f=r.n(d),g=r(8613),_=r.n(g),E=r(8901),A=r.n(E),w=r(5229),m=r.n(w),b=r(5166),y=r.n(b),x=r(4193),D=r.n(x),R=r(2461),M=r.n(R),L=r(3875),k=r.n(L),I=r(3367),V=r.n(I),N=r(4777),B=r.n(N),H=r(9702),z=r.n(H),W=r(1754),Q=r.n(W),X=r(6768),G=r.n(X),q=r(4331),Y=r.n(q),K=r(6341),se=r.n(K),Se=r(3063),be=r.n(Se),xe=r(6156),Ee=r.n(xe),J=r(3783),ne=r.n(J),de=r(1443),ue=r.n(de),Fe=r(5610),Ie=r.n(Fe),ye=r(7483),$e=r.n(ye),Oe=(r(3990),r(6954)),Le=r.n(Oe);r(9585);function He(dt){var yt="luna-".concat(dt,"-");function at(qe){return M()(Y()(qe).split(/\s+/),function(et){return se()(et,yt)?et:et.replace(/[\w-]+/,function(ft){return"".concat(yt).concat(ft)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var et=$e().parse(qe);return tt(et,function(ft){ft.attrs&&ft.attrs.class&&(ft.attrs.class=at(ft.attrs.class))}),$e().stringify(et)}catch{return at(qe)}return at(qe)}}function tt(dt,yt){for(var at=0,qe=dt.length;at<qe;at++){var et=dt[at];yt(et),et.content&&tt(et.content,yt)}}Ie();function Ze(){var dt=Le()();return dt==="os x"?"mac":dt}var pt=r(6329),fe=r.n(pt),Ne=r(5852),we=r.n(Ne);function ke(dt){var yt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var at,qe=(0,h.Z)(dt);if(yt){var et=(0,h.Z)(this).constructor;at=Reflect.construct(qe,arguments,et)}else at=qe.apply(this,arguments);return(0,l.Z)(this,at)}}var De=function(dt){(0,c.Z)(at,dt);var yt=ke(at);function at(qe,et){var ft,St=et.compName,Ut=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ft=Ut===void 0?"light":Ut;return(0,o.Z)(this,at),(ft=yt.call(this)).subComponents=[],ft.compName=St,ft.c=He(St),ft.options={},ft.container=qe,ft.$container=f()(qe),ft.$container.addClass(["luna-".concat(St),ft.c("platform-".concat(Ze()))]),ft.on("optionChange",function(Zt,qt,tr){var xr=ft.c;Zt==="theme"&&(ft.$container.rmClass(xr("theme-".concat(tr))).addClass(xr("theme-".concat(qt))),ne()(ft.subComponents,function(fr){return fr.setOption("theme",qt)}))}),ft.setOption("theme",Ft),ft}return(0,a.Z)(at,[{key:"destroy",value:function(){this.destroySubComponents();var qe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(qe("platform-".concat(Ze()))).rmClass(qe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(qe,et){var ft=this,St=this.options,Ut={};typeof qe=="string"?Ut[qe]=et:Ut=qe,ne()(Ut,function(Ft,Zt){var qt=St[Zt];St[Zt]=Ft,ft.emit("optionChange",Zt,Ft,qt)})}},{key:"getOption",value:function(qe){return this.options[qe]}},{key:"addSubComponent",value:function(qe){qe.setOption("theme",this.options.theme),this.subComponents.push(qe)}},{key:"removeSubComponent",value:function(qe){we()(this.subComponents,function(et){return et===qe})}},{key:"destroySubComponents",value:function(){ne()(this.subComponents,function(qe){return qe.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(qe){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};D()(qe,et),fe()(this.options,qe)}},{key:"find",value:function(qe){return this.$container.find(this.c(qe))}}]),at}(ue());function Pe(dt){var yt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var at,qe=(0,h.Z)(dt);if(yt){var et=(0,h.Z)(this).constructor;at=Reflect.construct(qe,arguments,et)}else at=qe.apply(this,arguments);return(0,l.Z)(this,at)}}s=r.hmd(s);var Je=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe){var et,ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,at),(et=yt.call(this,qe,{compName:"setting"},ft)).items=[],et.selectedItem=null,et.initOptions(ft,{separatorCollapse:!0,filter:""}),et.bindEvent(),et}return(0,a.Z)(at,[{key:"appendTitle",value:function(qe){var et=new Ct(this,qe);return this.append(et),et}},{key:"appendSeparator",value:function(){var qe=this.items,et=this.options.separatorCollapse,ft=z()(qe);if(et&&ft instanceof Rt)return ft;var St=new Rt(this);return this.append(St),St}},{key:"appendNumber",value:function(qe,et,ft,St,Ut){y()(St)&&(Ut=St,St="");var Ft=new ut(this,qe,et,ft,St,Ut);return this.append(Ft),Ft}},{key:"appendButton",value:function(qe,et,ft){B()(et)&&(ft=et,et="");var St=new lt(this,qe,et,ft);return this.append(St),St}},{key:"appendInput",value:function(qe,et,ft){var St=new vt(this,qe,et,ft,arguments.length>3&&arguments[3]!==void 0?arguments[3]:"");return this.append(St),St}},{key:"appendCheckbox",value:function(qe,et,ft,St){St||(St=ft,ft="");var Ut=new Re(this,qe,et,ft,St);return this.append(Ut),Ut}},{key:"appendSelect",value:function(qe,et,ft,St,Ut){y()(St)&&(Ut=St,St="");var Ft=new it(this,qe,et,ft,St,Ut);return this.append(Ft),Ft}},{key:"remove",value:function(qe){var et=this.items,ft=et.indexOf(qe);ft>-1&&(qe.detach(),et.splice(ft,1),qe===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){ne()(this.items,function(qe){return qe.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(qe){var et;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),Ee()(qe)||(this.selectedItem=qe,(et=this.selectedItem)===null||et===void 0||et.select())}},{key:"renderSettings",value:function(){var qe=this,et=this.items;ne()(et,function(ft){return ft.detach()}),ne()(et,function(ft){qe.filterItem(ft)&&qe.$container.append(ft.container)})}},{key:"bindEvent",value:function(){var qe=this,et=this.c;this.on("optionChange",function(St){St==="filter"&&qe.renderSettings()});var ft=this;this.$container.on("click",et(".item"),function(){ft.selectItem(this.settingItem)})}},{key:"filterItem",value:function(qe){var et=this.options.filter;if(et){if(B()(et))return et(qe);if(Q()(et))return et.test(qe.text());if(G()(et)&&(et=Y()(et)))return se()(be()(qe.text()),be()(et))}return!0}},{key:"append",value:function(qe){this.items.push(qe),this.filterItem(qe)&&this.$container.append(qe.container)}}]),at}(De),Ye=function(){function dt(yt,at,qe,et){(0,o.Z)(this,dt),this.container=_()("div",{tabindex:"0"}),this.setting=yt,this.container.settingItem=this,this.$container=f()(this.container),this.$container.addClass(yt.c("item")).addClass(yt.c("item-".concat(et))),this.key=at,this.value=qe}return(0,a.Z)(dt,[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function(yt){this.setting.emit("change",this.key,yt,this.value),this.value=yt}}]),dt}(),Ct=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et){var ft;return(0,o.Z)(this,at),(ft=yt.call(this,qe,"","","title")).$container.text(et),ft}return(0,a.Z)(at)}(Ye),Rt=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe){return(0,o.Z)(this,at),yt.call(this,qe,"","","separator")}return(0,a.Z)(at)}(Ye),vt=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et,ft,St,Ut){var Ft;(0,o.Z)(this,at),Ft=yt.call(this,qe,et,ft,"input");var Zt=qe.c;Ft.$container.html('<div class="'.concat(Zt("title"),'">').concat(A()(St),`</div>
      <div class="`).concat(Zt("description"),'">').concat(Ut,`</div>
      <div class="`).concat(Zt("control"),`">
        <input type="text"></input>
      </div>`));var qt=Ft.$container.find("input");return qt.val(ft),qt.on("change",function(){return Ft.onChange(qt.val())}),Ft}return(0,a.Z)(at)}(Ye),ut=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et,ft,St,Ut){var Ft,Zt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};(0,o.Z)(this,at),Ft=yt.call(this,qe,et,ft,"number"),D()(Zt,{min:0,max:10,step:1});var qt=(0,n.Z)(Ft).$container,tr=qe.c,xr=!!Zt.range;delete Zt.range;var fr=Zt.min,qr=Zt.max,Vr='<input type="'.concat(xr?"range":"number",'"').concat(M()(Zt,function(rt,je){return" ".concat(je,'="').concat(rt,'"')}),"></input>");xr&&(Vr="".concat(fr,'<div class="').concat(tr("range-container"),`">
        <div class="`).concat(tr("range-track"),`">
          <div class="`).concat(tr("range-track-bar"),`">
            <div class="`).concat(tr("range-track-progress"),'" style="width: ').concat(nt(ft,fr,qr),`%;"></div>
          </div>
        </div>
        `).concat(Vr,`
      </div><span class="`).concat(tr("value"),'">').concat(ft,"</span>/").concat(qr)),qt.html('<div class="'.concat(tr("title"),'">').concat(A()(St),`</div>
      <div class="`).concat(tr("description"),'">').concat(Ut,`</div>
      <div class="`).concat(tr("control"),'">').concat(Vr,"</div>"));var Kt=qt.find(tr(".value")),Wt=qt.find("input"),Pt=qt.find(tr(".range-track-progress"));return Wt.val(V()(ft)),Wt.on("change",function(){var rt=k()(Wt.val());Ft.onChange(rt)}),Wt.on("input",function(){var rt=k()(Wt.val());Pt.css("width",nt(rt,fr,qr)+"%"),Kt.text(V()(rt))}),Ft}return(0,a.Z)(at)}(Ye),nt=function(dt,yt,at){return((dt-yt)/(at-yt)*100).toFixed(2)},Re=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et,ft,St,Ut){var Ft;(0,o.Z)(this,at),Ft=yt.call(this,qe,et,ft,"checkbox");var Zt=qe.c,qt=m()(qe.c("checkbox-"));Ft.$container.html('<div class="'.concat(Zt("title"),'">').concat(A()(St),`</div>
      <div class="`).concat(Zt("control"),`">
        <input type="checkbox" id="`).concat(qt,`"></input>
        <label for="`).concat(qt,'">').concat(Ut,`</label>
      </div>`));var tr=Ft.$container.find("input"),xr=tr.get(0);return xr.checked=ft,tr.on("change",function(){return Ft.onChange(xr.checked)}),Ft}return(0,a.Z)(at)}(Ye),it=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et,ft,St,Ut,Ft){var Zt;(0,o.Z)(this,at),Zt=yt.call(this,qe,et,ft,"select");var qt=qe.c;Zt.$container.html('<div class="'.concat(qt("title"),'">').concat(A()(St),`</div>
      <div class="`).concat(qt("description"),'">').concat(Ut,`</div>
      <div class="`).concat(qt("control"),`">
        <div class="`).concat(qt("select"),`">
          <select>
            `).concat(M()(Ft,function(xr,fr){return'<option value="'.concat(A()(xr),'"').concat(xr===ft?" selected":"",">").concat(A()(fr),"</option>")}).join(""),`
          </select>
        </div>
      </div>`));var tr=Zt.$container.find("select");return tr.on("change",function(){return Zt.onChange(tr.val())}),Zt}return(0,a.Z)(at)}(Ye),lt=function(dt){(0,c.Z)(at,dt);var yt=Pe(at);function at(qe,et,ft,St){var Ut;return(0,o.Z)(this,at),ft||(ft=et,et=""),(Ut=yt.call(this,qe,"","","button")).$container.html(qe.c('<div class="title">'.concat(A()(et),`</div>
      <div class="control">
        <button>`).concat(A()(ft),`</button>
      </div>`))),Ut.$container.find("button").on("click",St),Ut}return(0,a.Z)(at)}(Ye);(function(dt,yt){try{dt.exports=yt,dt.exports.default=yt}catch{}})(s,Je)},7638:function(s,e,r){r.d(e,{Z:function(){return Fe}});var n=r(168),o=r(5671),a=r(3144),c=r(9340),l=r(2963),h=r(1120),d=r(1443),f=r.n(d),g=r(1512),_=r.n(g),E=r(2461),A=r.n(E),w=r(4331),m=r.n(w),b=r(5610),y=r.n(b),x=r(7483),D=r.n(x),R=r(3990),M=r.n(R),L=r(6341),k=r.n(L),I=(r(3875),r(6954)),V=r.n(I);r(9585);function N(Ie){var ye="luna-".concat(Ie,"-");function $e(Oe){return A()(m()(Oe).split(/\s+/),function(Le){return k()(Le,ye)?Le:Le.replace(/[\w-]+/,function(He){return"".concat(ye).concat(He)})}).join(" ")}return function(Oe){if(/<[^>]*>/g.test(Oe))try{var Le=D().parse(Oe);return B(Le,function(He){He.attrs&&He.attrs.class&&(He.attrs.class=$e(He.attrs.class))}),D().stringify(Le)}catch{return $e(Oe)}return $e(Oe)}}function B(Ie,ye){for(var $e=0,Oe=Ie.length;$e<Oe;$e++){var Le=Ie[$e];ye(Le),Le.content&&B(Le.content,ye)}}var H;y();function z(){var Ie=V()();return Ie==="os x"?"mac":Ie}var W=r(3783),Q=r.n(W),X=r(6329),G=r.n(X),q=r(4193),Y=r.n(q),K=r(5852),se=r.n(K);function Se(Ie){var ye=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var $e,Oe=(0,h.Z)(Ie);if(ye){var Le=(0,h.Z)(this).constructor;$e=Reflect.construct(Oe,arguments,Le)}else $e=Oe.apply(this,arguments);return(0,l.Z)(this,$e)}}var be,xe=function(Ie){(0,c.Z)($e,Ie);var ye=Se($e);function $e(Oe,Le){var He,tt=Le.compName,Ze=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,pt=Ze===void 0?"light":Ze;return(0,o.Z)(this,$e),(He=ye.call(this)).subComponents=[],He.compName=tt,He.c=N(tt),He.options={},He.container=Oe,He.$container=_()(Oe),He.$container.addClass(["luna-".concat(tt),He.c("platform-".concat(z()))]),He.on("optionChange",function(fe,Ne,we){var ke=He.c;fe==="theme"&&(He.$container.rmClass(ke("theme-".concat(we))).addClass(ke("theme-".concat(Ne))),Q()(He.subComponents,function(De){return De.setOption("theme",Ne)}))}),He.setOption("theme",pt),He}return(0,a.Z)($e,[{key:"destroy",value:function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat(z()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Oe,Le){var He=this,tt=this.options,Ze={};typeof Oe=="string"?Ze[Oe]=Le:Ze=Oe,Q()(Ze,function(pt,fe){var Ne=tt[fe];tt[fe]=pt,He.emit("optionChange",fe,pt,Ne)})}},{key:"getOption",value:function(Oe){return this.options[Oe]}},{key:"addSubComponent",value:function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)}},{key:"removeSubComponent",value:function(Oe){se()(this.subComponents,function(Le){return Le===Oe})}},{key:"destroySubComponents",value:function(){Q()(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Oe){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y()(Oe,Le),G()(this.options,Oe)}},{key:"find",value:function(Oe){return this.$container.find(this.c(Oe))}}]),$e}(f()),Ee=r(1907),J=r.n(Ee),ne=r(8901),de=r.n(ne);function ue(Ie){var ye=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var $e,Oe=(0,h.Z)(Ie);if(ye){var Le=(0,h.Z)(this).constructor;$e=Reflect.construct(Oe,arguments,Le)}else $e=Oe.apply(this,arguments);return(0,l.Z)(this,$e)}}s=r.hmd(s);var Fe=function(Ie){(0,c.Z)($e,Ie);var ye=ue($e);function $e(Oe){var Le,He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,$e),(Le=ye.call(this,Oe,{compName:"tab"},He)).initOptions(He,{height:30}),Le.initTpl(),Le.$tabs=Le.find(".tabs"),Le.tabs=Le.$tabs.get(0),Le.$slider=Le.find(".slider"),Le.bindEvent(),Le.updateHeight(),Le}return(0,a.Z)($e,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(Oe,Le){var He=this.c,tt=this.$tabs,Ze=this.options.height-1,pt=tt.find(He(".item")),fe=pt.length,Ne='<div class="'.concat(this.c("item"),'" data-id="').concat(de()(Le.id),'" style="height: ').concat(Ze,"px; line-height: ").concat(Ze,'px;">').concat(de()(Le.title),"</div>");Oe>fe-1?tt.append(Ne):pt.eq(Oe).before(Ne),this.updateSlider()}},{key:"append",value:function(Oe){this.insert(this.length,Oe)}},{key:"remove",value:function(Oe){var Le=this.c,He=this;this.$tabs.find(Le(".item")).each(function(){var tt=_()(this);if(tt.data("id")===Oe){if(tt.hasClass(Le("selected")))if(He.length>0){var Ze=He.$tabs.find(Le(".item")).eq(0).data("id");He.select(Ze)}else He.emit("deselect");tt.remove()}}),this.updateSlider()}},{key:"select",value:function(Oe){var Le=this.c,He=this;this.$tabs.find(Le(".item")).each(function(){var tt=_()(this);tt.data("id")===Oe?(tt.addClass(Le("selected")),He.updateSlider(),He.scrollToSelected(),He.emit("select",Oe)):tt.rmClass(Le("selected"))})}},{key:"scrollToSelected",value:function(){var Oe,Le=this.$tabs,He=this.tabs,tt=this.c,Ze=Le.find(tt(".selected")).get(0),pt=Ze.offsetLeft,fe=Ze.offsetWidth,Ne=He.offsetWidth,we=He.scrollLeft;pt<we?Oe=pt:pt+fe>Ne+we&&(Oe=pt+fe-Ne),M()(Oe)&&(He.scrollLeft=Oe)}},{key:"hideScrollbar",value:function(){var Oe=this.$tabs;if(getComputedStyle(this.tabs,"::-webkit-scrollbar").display!=="none"){var Le=function(){if(M()(H))return H;if(!document)return 16;var He=document.createElement("div"),tt=document.createElement("div");He.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),tt.setAttribute("style","height: 200px"),He.appendChild(tt);var Ze=document.body||document.documentElement;return Ze.appendChild(He),H=He.offsetWidth-He.clientWidth,Ze.removeChild(He),H}();Oe.css("height",this.options.height-1+Le+"px")}}},{key:"updateSlider",value:function(){var Oe=this.$slider,Le=this.$tabs,He=this.c,tt=Le.find(He(".selected")).get(0);tt?Oe.css({width:tt.offsetWidth,left:tt.offsetLeft-Le.get(0).scrollLeft}):Oe.css({width:0})}},{key:"updateHeight",value:function(){var Oe=this.options.height,Le=Oe-1;this.find(".tabs-container").css("height",Oe+"px"),this.find(".item").css({height:Le,lineHeight:Le}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var Oe=this,Le=this.tabs,He=this.c;this.on("optionChange",function(Ze){Ze==="height"&&Oe.updateHeight()});var tt=this;this.$tabs.on("wheel",function(Ze){Ze.preventDefault(),Le.scrollLeft+=Ze.origEvent.deltaY}).on("click",He(".item"),function(){var Ze=_()(this);tt.select(Ze.data("id"))}).on("scroll",function(){Oe.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c(J()(be||(be=(0,n.Z)([`
        <div class="tabs-container">
          <div class="tabs"></div>
        </div>
        <div class="slider"></div>
      `])))))}}]),$e}(xe);(function(Ie,ye){try{Ie.exports=ye,Ie.exports.default=ye}catch{}})(s,Fe)},7049:function(s,e,r){r.d(e,{Z:function(){return fe}});var n=r(5671),o=r(3144),a=r(7326),c=r(1752),l=r(9340),h=r(2963),d=r(1120),f=r(1443),g=r.n(f),_=r(1512),E=r.n(_),A=r(2461),w=r.n(A),m=r(4331),b=r.n(m),y=r(5610),x=r.n(y),D=r(7483),R=r.n(D),M=(r(3990),r(6341)),L=r.n(M),k=(r(3875),r(6954)),I=r.n(k);r(9585);function V(we){var ke="luna-".concat(we,"-");function De(Pe){return w()(b()(Pe).split(/\s+/),function(Je){return L()(Je,ke)?Je:Je.replace(/[\w-]+/,function(Ye){return"".concat(ke).concat(Ye)})}).join(" ")}return function(Pe){if(/<[^>]*>/g.test(Pe))try{var Je=R().parse(Pe);return N(Je,function(Ye){Ye.attrs&&Ye.attrs.class&&(Ye.attrs.class=De(Ye.attrs.class))}),R().stringify(Je)}catch{return De(Pe)}return De(Pe)}}function N(we,ke){for(var De=0,Pe=we.length;De<Pe;De++){var Je=we[De];ke(Je),Je.content&&N(Je.content,ke)}}var B="ontouchstart"in x();function H(){var we=I()();return we==="os x"?"mac":we}var z=r(3783),W=r.n(z),Q=r(6329),X=r.n(Q),G=r(4193),q=r.n(G),Y=r(5852),K=r.n(Y);function se(we){var ke=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var De,Pe=(0,d.Z)(we);if(ke){var Je=(0,d.Z)(this).constructor;De=Reflect.construct(Pe,arguments,Je)}else De=Pe.apply(this,arguments);return(0,h.Z)(this,De)}}var Se=function(we){(0,l.Z)(De,we);var ke=se(De);function De(Pe,Je){var Ye,Ct=Je.compName,Rt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,vt=Rt===void 0?"light":Rt;return(0,n.Z)(this,De),(Ye=ke.call(this)).subComponents=[],Ye.compName=Ct,Ye.c=V(Ct),Ye.options={},Ye.container=Pe,Ye.$container=E()(Pe),Ye.$container.addClass(["luna-".concat(Ct),Ye.c("platform-".concat(H()))]),Ye.on("optionChange",function(ut,nt,Re){var it=Ye.c;ut==="theme"&&(Ye.$container.rmClass(it("theme-".concat(Re))).addClass(it("theme-".concat(nt))),W()(Ye.subComponents,function(lt){return lt.setOption("theme",nt)}))}),Ye.setOption("theme",vt),Ye}return(0,o.Z)(De,[{key:"destroy",value:function(){this.destroySubComponents();var Pe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Pe("platform-".concat(H()))).rmClass(Pe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Pe,Je){var Ye=this,Ct=this.options,Rt={};typeof Pe=="string"?Rt[Pe]=Je:Rt=Pe,W()(Rt,function(vt,ut){var nt=Ct[ut];Ct[ut]=vt,Ye.emit("optionChange",ut,vt,nt)})}},{key:"getOption",value:function(Pe){return this.options[Pe]}},{key:"addSubComponent",value:function(Pe){Pe.setOption("theme",this.options.theme),this.subComponents.push(Pe)}},{key:"removeSubComponent",value:function(Pe){K()(this.subComponents,function(Je){return Je===Pe})}},{key:"destroySubComponents",value:function(){W()(this.subComponents,function(Pe){return Pe.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Pe){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q()(Pe,Je),X()(this.options,Pe)}},{key:"find",value:function(Pe){return this.$container.find(this.c(Pe))}}]),De}(g()),be=r(9702),xe=r.n(be),Ee=r(8887),J=r.n(Ee),ne=r(2439),de=r.n(ne),ue=r(6049),Fe=r.n(ue),Ie=r(2327),ye=r.n(Ie),$e=r(8901),Oe=r.n($e),Le=r(7387),He=r.n(Le),tt=r(6677),Ze=r.n(tt);function pt(we){var ke=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var De,Pe=(0,d.Z)(we);if(ke){var Je=(0,d.Z)(this).constructor;De=Reflect.construct(Pe,arguments,Je)}else De=Pe.apply(this,arguments);return(0,h.Z)(this,De)}}s=r.hmd(s);var fe=function(we){(0,l.Z)(De,we);var ke=pt(De);function De(Pe){var Je,Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.Z)(this,De),(Je=ke.call(this,Pe,{compName:"text-viewer"},Ye)).lineNum=0,Je.copy=function(){var Ct=(0,a.Z)(Je).c,Rt=Je.options,vt=Rt.text,ut=Rt.escape;ye()(ut?vt:He()(Ze()(vt)));var nt=Je.$copy.find(Ct(".icon"));nt.addClass(Ct("icon-check")).rmClass(Ct("icon-copy")),setTimeout(function(){nt.rmClass(Ct("icon-check")).addClass(Ct("icon-copy"))},1e3)},Je._updateCopyPos=function(){var Ct=(0,a.Z)(Je).container;Je.$copy.css({top:Ct.scrollTop+5,right:5-Ct.scrollLeft})},Je.initOptions(Ye,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),Je.render=de()(function(){return Je._render()},16),Je.updateCopyPos=Fe()(function(){return Je._updateCopyPos()},300),Je.initTpl(),Je.$text=Je.find(".text"),Je.$copy=Je.find(".copy"),B&&Je.$copy.css("opacity","1"),Je.options.text&&Je.render(),Je.bindEvent(),Je.updateHeight(),Je}return(0,o.Z)(De,[{key:"append",value:function(Pe){var Je=this,Ye=this.options,Ct=this.$copy,Rt=this.c,vt=this.$text,ut=Ye.showLineNumbers;if(this.options.text+=Pe,!ut)return this.$text.append(Ye.escape?Oe()(Pe):Pe);var nt=function(it){return it.length===0?[]:it.split(Ne)}(Pe);J()(nt)&&(nt=["&nbsp;"]),b()(xe()(nt))||nt.pop();var Re="";W()(nt,function(it,lt){Je.lineNum+=1,Re+='<div class="'.concat(Rt("table-row"),'"><div class="').concat(Rt("line-number"),'">').concat(Je.lineNum,'</div><div class="').concat(Rt("line-text"),'">').concat(Ye.escape?Oe()(it):it||" ","</div></div>")}),vt.find(Rt(".table")).append(Re),Ct.hide(),vt.offset().height>40&&Ct.show(),this.updateCopyPos()}},{key:"destroy",value:function(){this.$container.off("scroll",this.updateCopyPos),(0,c.Z)((0,d.Z)(De.prototype),"destroy",this).call(this)}},{key:"updateHeight",value:function(){var Pe=this.options.maxHeight;Pe>0&&Pe!==1/0?this.$text.css("max-height",Pe):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var Pe=this;this.on("optionChange",function(Je){Je==="maxHeight"?Pe.updateHeight():Pe.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var Pe=this.c,Je=this.$text,Ye=this.options,Ct=Ye.text,Rt=Ye.wrapLongLines,vt=Ye.showLineNumbers;Rt?Je.addClass(Pe("wrap-long-lines")):Je.rmClass(Pe("wrap-long-lines")),vt?Je.addClass(Pe("line-numbers")):Je.rmClass(Pe("line-numbers")),Je.html('<div class="'.concat(Pe("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(Ct)}}]),De}(Se),Ne=/\r\n|\r|\n/g;(function(we,ke){try{we.exports=ke,we.exports.default=ke}catch{}})(s,fe)},6672:function(s,e,r){r.d(e,{Z:function(){return Fn}});var n={};r.r(n),r.d(n,{classPrefix:function(){return _e},drag:function(){return ot},escapeJsonStr:function(){return Vr},evalCss:function(){return Xe},eventClient:function(){return gt},eventPage:function(){return Tt},getFileName:function(){return Wt},hasSafeArea:function(){return qr},isChobitsuEl:function(){return je},isErudaEl:function(){return rt},pxToNum:function(){return Pt},safeStorage:function(){return Kt}});var o=r(5671),a=r(3144),c=r(7326),l=r(9340),h=r(2963),d=r(1120),f=r(4942),g=r(1443),_=r.n(g),E=new(_());E.ADD="ADD",E.SHOW="SHOW",E.SCALE="SCALE";var A=E,w=r(1752),m=r(7496),b=r.n(m)()({init:function(me){this._$el=me},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),y=r(1512),x=r.n(y),D=r(125),R=r.n(D),M=r(5229),L=r.n(M),k=r(3783),I=r.n(k),V=r(5972),N=r.n(V),B=r(6768),H=r.n(B),z=r(6341),W=r.n(z),Q=r(4675),X=r.n(Q),G=r(3367),q=r.n(G),Y=r(2533),K=r.n(Y),se=r(7622),Se=r.n(se),be=r(4193),xe=r.n(be),Ee=r(6329),J=r.n(Ee),ne=r(6472),de=r.n(ne),ue=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Fe=ue.length;function Ie(me){for(var pe={},ce=0;ce<Fe;ce++)pe[ue[ce]]=me[ce];return pe}function ye(me){return de()(me)&&(me=Ie(me)),me.darkerBackground||(me.darkerBackground=me.contrast),J()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},me)}function $e(me){return de()(me)&&(me=Ie(me)),me.darkerBackground||(me.darkerBackground=me.contrast),J()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},me)}var Oe=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],Le={Light:$e({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:ye({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":ye(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":ye(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":$e(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":ye(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":ye(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":ye(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:ye(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":ye(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":ye(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":$e(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":ye(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":$e(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:$e(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":ye(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":$e(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},He=[],tt=1,Ze=Le.Light,pt=function me(pe,ce){pe=q()(pe);for(var U=0,ee=He.length;U<ee;U++)if(He[U].css===pe)return;ce=ce||me.container||document.head;var le=document.createElement("style");le.type="text/css",ce.appendChild(le);var Ce={css:pe,el:le,container:ce};return Ne(Ce),He.push(Ce),Ce};function fe(){I()(He,function(me){return Ne(me)})}function Ne(me){var pe=me.css,ce=me.el;pe=(pe=pe.replace(/(\d+)px/g,function(ee,le){return+le*tt+"px"})).replace(/_/g,"eruda-");var U=K()(Le.Light);I()(U,function(ee){pe=pe.replace(new RegExp("var\\(--".concat(Se()(ee),"\\)"),"g"),Ze[ee])}),ce.innerText=pe}pt.setScale=function(me){tt=me,fe()},pt.setTheme=function(me){Ze=H()(me)?Le[me]||Le.Light:xe()(me,Le.Light),fe()},pt.getCurTheme=function(){return Ze},pt.getThemes=function(){return Le},pt.clear=function(){I()(He,function(me){var pe=me.container,ce=me.el;return pe.removeChild(ce)}),He=[]},pt.remove=function(me){He=N()(He,function(pe){return pe!==me}),me.container.removeChild(me.el)};var we=pt,ke=r(8692);function De(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Pe=function(me){(0,l.Z)(ce,me);var pe=De(ce);function ce(){var U;return(0,o.Z)(this,ce),(U=pe.call(this))._style=we(r(8011)),U.name="settings",U._settings=[],U}return(0,a.Z)(ce,[{key:"init",value:function(U){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._setting=new ke.Z(U.get(0)),this._bindEvent()}},{key:"remove",value:function(U,ee){var le=this;if(H()(U)){var Ce=this;this._$el.find(".luna-setting-item-title").each(function(){x()(this).text()===U&&Ce._setting.remove(this.settingItem)})}else this._settings=N()(this._settings,function(ze){return ze.config!==U||ze.key!==ee||(le._setting.remove(ze.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),we.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(U,ee,le){var Ce=this._genId(),ze=this._setting.appendCheckbox(Ce,!!U.get(ee),le);return this._settings.push({config:U,key:ee,id:Ce,item:ze}),this}},{key:"select",value:function(U,ee,le,Ce){var ze=this._genId(),Ke={};I()(Ce,function(At){return Ke[At]=At});var mt=this._setting.appendSelect(ze,U.get(ee),"",le,Ke);return this._settings.push({config:U,key:ee,id:ze,item:mt}),this}},{key:"range",value:function(U,ee,le,Ce){var ze=Ce.min,Ke=ze===void 0?0:ze,mt=Ce.max,At=mt===void 0?1:mt,er=Ce.step,_r=er===void 0?.1:er,Er=this._genId(),Nr=this._setting.appendNumber(Er,U.get(ee),le,{max:At,min:Ke,step:_r,range:!0});return this._settings.push({config:U,key:ee,min:Ke,max:At,step:_r,id:Er,item:Nr}),this}},{key:"button",value:function(U,ee){return this._setting.appendButton(U,ee),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(U){return this._setting.appendTitle(U),this}},{key:"_cleanSeparator",value:function(){var U=X()(this._$el.get(0).children);function ee(ze){return W()(ze.getAttribute("class"),"luna-setting-item-separator")}for(var le=0,Ce=U.length;le<Ce-1;le++)ee(U[le])&&ee(U[le+1])&&x()(U[le]).remove()}},{key:"_genId",value:function(){return L()("eruda-settings")}},{key:"_getSetting",value:function(U){var ee;return I()(this._settings,function(le){le.id===U&&(ee=le)}),ee}},{key:"_bindEvent",value:function(){var U=this;this._setting.on("change",function(ee,le){var Ce=U._getSetting(ee);Ce.config.set(Ce.key,le)})}}],[{key:"createCfg",value:function(U,ee){return new(R())("eruda-"+U,ee)}}]),ce}(b),Je=r(6837),Ye=r.n(Je),Ct=r(442),Rt=r.n(Ct),vt=r(6334),ut=r.n(vt),nt=r(4187),Re=r.n(nt),it=r(1286),lt=r.n(it),dt=r(9702),yt=r.n(dt),at=r(2461),qe=r.n(at),et=r(5026),ft=r.n(et),St=r(5610),Ut=r.n(St),Ft=r(3875),Zt=r.n(Ft),qt=r(4331),tr=r.n(qt),xr=r(7483),fr=r.n(xr);function qr(){var me=!1,pe=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(pe.style.paddingBottom="env(safe-area-inset-bottom)",me=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(pe.style.paddingBottom="constant(safe-area-inset-bottom)",me=!0),me){document.body.appendChild(pe);var ce=parseInt(window.getComputedStyle(pe).paddingBottom);if(document.body.removeChild(pe),ce>0)return!0}return!1}function Vr(me){return Re()(me).replace(/\\'/g,"'").replace(/\t/g,"\\t")}function Kt(me,pe){var ce;switch(lt()(pe)&&(pe=!0),me){case"local":ce=window.localStorage;break;case"session":ce=window.sessionStorage}try{var U="test-localStorage-"+Date.now();ce.setItem(U,U);var ee=ce.getItem(U);if(ce.removeItem(U),ee!==U)throw new Error}catch{return pe?ft():void 0}return ce}function Wt(me){var pe=yt()(me.split("/"));return pe===""&&(pe=(me=new(ut())(me)).hostname),pe}function Pt(me){return Zt()(me.replace("px",""))}function rt(me){for(;me;){if(me.id==="eruda")return!0;me=me.parentNode}return!1}function je(me){for(;me;){var pe="";if(me.getAttribute&&(pe=me.getAttribute("class")||""),W()(pe,"__chobitsu-hide__"))return!0;me=me.parentNode}return!1}var Xe=we;function _e(me){if(/<[^>]*>/g.test(me))try{var pe=fr().parse(me);return It(pe,function(ce){ce.attrs&&ce.attrs.class&&(ce.attrs.class=ir(ce.attrs.class))}),fr().stringify(pe)}catch{return ir(me)}return ir(me)}function It(me,pe){for(var ce=0,U=me.length;ce<U;ce++){var ee=me[ce];pe(ee),ee.content&&It(ee.content,pe)}}function ir(me){var pe="eruda-";return qe()(tr()(me).split(/\s+/),function(ce){return W()(ce,pe)?ce:ce.replace(/[\w-]+/,function(U){return"".concat(pe).concat(U)})}).join(" ")}var rr="ontouchstart"in Ut(),Mt="PointerEvent"in Ut(),Ot={start:"touchstart",move:"touchmove",end:"touchend"},Et={start:"mousedown",move:"mousemove",end:"mouseup"},st={start:"pointerdown",move:"pointermove",end:"pointerup"};function ot(me){return Mt?st[me]:rr?Ot[me]:Et[me]}function gt(me,pe){var ce=me==="x"?"clientX":"clientY";return pe[ce]?pe[ce]:pe.changedTouches?pe.changedTouches[0][ce]:0}function Tt(me,pe){var ce=me==="x"?"pageX":"pageY";return pe[ce]?pe[ce]:pe.changedTouches?pe.changedTouches[0][ce]:0}function Vt(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Bt,Lt=x()(document),Ge=function(me){(0,l.Z)(ce,me);var pe=Vt(ce);function ce(U){var ee;return(0,o.Z)(this,ce),ee=pe.call(this),(0,f.Z)((0,c.Z)(ee),"_onDragStart",function(le){var Ce=ee._$el;Ce.addClass(_e("active")),ee._isClick=!0,le=le.origEvent,ee._startX=gt("x",le),ee._oldX=Pt(Ce.css("left")),ee._oldY=Pt(Ce.css("top")),ee._startY=gt("y",le),Lt.on(ot("move"),ee._onDragMove),Lt.on(ot("end"),ee._onDragEnd)}),(0,f.Z)((0,c.Z)(ee),"_onDragMove",function(le){var Ce=ee._$el.get(0).offsetWidth,ze=ee._$container.get(0).offsetWidth,Ke=ee._$container.get(0).offsetHeight,mt=gt("x",le=le.origEvent)-ee._startX,At=gt("y",le)-ee._startY;(Math.abs(mt)>3||Math.abs(At)>3)&&(ee._isClick=!1);var er=ee._oldX+mt,_r=ee._oldY+At;er<0?er=0:er>ze-Ce&&(er=ze-Ce),_r<0?_r=0:_r>Ke-Ce&&(_r=Ke-Ce),ee._$el.css({left:er,top:_r})}),(0,f.Z)((0,c.Z)(ee),"_onDragEnd",function(le){var Ce=ee._$el;ee._isClick&&ee.emit("click"),ee._onDragMove(le),Lt.off(ot("move"),ee._onDragMove),Lt.off(ot("end"),ee._onDragEnd);var ze=ee.config;ze.get("rememberPos")&&ze.set("pos",{x:Pt(Ce.css("left")),y:Pt(Ce.css("top"))}),Ce.rmClass("eruda-active")}),ee._style=we(r(9195)),ee._$container=U,ee._initTpl(),ee._bindEvent(),ee._registerListener(),ee}return(0,a.Z)(ce,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(U){this._isOutOfRange(U)&&(U=this._getDefPos()),this._$el.css({left:U.x,top:U.y}),this.config.set("pos",U)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){we.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(U){U=U||this.config.get("pos");var ee=this._getDefPos();return U.x>ee.x+10||U.x<0||U.y<0||U.y>ee.y+10}},{key:"_registerListener",value:function(){var U=this;this._scaleListener=function(){return Ye()(function(){U._isOutOfRange()&&U._resetPos()})},A.on(A.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){A.off(A.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var U=this._$container;U.append(_e('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=U.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(U){var ee=this.config,le=ee.get("pos"),Ce=this._getDefPos();ee.get("rememberPos")&&!U||(le=Ce),this.setPos(le)}},{key:"_bindEvent",value:function(){var U=this;this._$el.on(ot("start"),this._onDragStart),Rt().on("change",function(){return U._resetPos(!0)}),window.addEventListener("resize",function(){return U._resetPos()})}},{key:"initCfg",value:function(U){var ee=this.config=Pe.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});U.switch(ee,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var U=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-U,y:window.innerHeight-U}}}]),ce}(_()),Gt=r(4989),$t=Bt=new(r.n(Gt)())("[Eruda]","warn");Bt.formatter=function(me,pe){return pe.unshift(this.name),pe};var dr=r(3990),Ar=r.n(dr),Qt=r(2520),Xt=r.n(Qt),Jt=r(6930),Fr=r.n(Jt),Qr=r(4270),Yr=r.n(Qr),cr=r(6093),$r=r.n(cr),Xr=r(129),Cr=r(7638);function Mr(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var li=function(me){(0,l.Z)(ce,me);var pe=Mr(ce);function ce(U){var ee,le=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).defaults,Ce=le===void 0?{}:le;return(0,o.Z)(this,ce),ee=pe.call(this),(0,f.Z)((0,c.Z)(ee),"_checkSafeArea",function(){var ze=(0,c.Z)(ee).$container;qr()?ze.addClass(_e("safe-area")):ze.rmClass(_e("safe-area"))}),(0,f.Z)((0,c.Z)(ee),"_updateTabHeight",function(ze){ee._tab.setOption("height",40*ze),Ye()(function(){ee._tab.updateSlider()})}),ee._defCfg=J()({transparency:1,displaySize:80,theme:Xt()()?"Dark":"Light"},Ce),ee._style=we(r(13)),ee.$container=U,ee._isShow=!1,ee._opacity=1,ee._tools={},ee._isResizing=!1,ee._resizeTimer=null,ee._resizeStartY=0,ee._resizeStartSize=0,ee._initTpl(),ee._initTab(),ee._initNotification(),ee._initModal(),Yr()(function(){return ee._checkSafeArea()}),ee._bindEvent(),ee}return(0,a.Z)(ce,[{key:"show",value:function(){var U=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){U._$el.css("opacity",U._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var U=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return U._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(U){var ee=this._tab;if(!(U instanceof b)){var le=new b,Ce=le.init,ze=le.show,Ke=le.hide,mt=le.destroy;xe()(U,{init:Ce,show:ze,hide:Ke,destroy:mt})}var At=U.name;return At?(At=At.toLowerCase(),this._tools[At]?$t.warn("Tool ".concat(At," already exists")):(this._$tools.prepend('<div id="'.concat(_e(At),'" class="').concat(_e(At+" tool"),'"></div>')),U.init(this._$tools.find(".".concat(_e(At),".").concat(_e("tool"))),this),U.active=!1,this._tools[At]=U,At==="settings"?ee.append({id:At,title:At}):ee.insert(ee.length-1,{id:At,title:At}),this)):$t.error("You must specify a name for a tool")}},{key:"remove",value:function(U){var ee=this._tools;if(!ee[U])return $t.warn("Tool ".concat(U," doesn't exist"));this._tab.remove(U);var le=ee[U];if(delete ee[U],le.active){var Ce=K()(ee);Ce.length>0&&this.showTool(ee[yt()(Ce)].name)}return le.destroy(),this}},{key:"removeAll",value:function(){var U=this;return I()(this._tools,function(ee){return U.remove(ee.name)}),this}},{key:"get",value:function(U){var ee=this._tools[U];if(ee)return ee}},{key:"showTool",value:function(U){if(this._curTool===U)return this;this._curTool=U;var ee=this._tools,le=ee[U];if(le){var Ce={};return I()(ee,function(ze){ze.active&&(Ce=ze,ze.active=!1,ze.hide())}),le.active=!0,le.show(),this._tab.select(U),this.emit("showTool",U,Ce),this}}},{key:"initCfg",value:function(U){var ee=this,le=this.config=Pe.createCfg("dev-tools",this._defCfg);this._setTransparency(le.get("transparency")),this._setDisplaySize(le.get("displaySize")),this._setTheme(le.get("theme")),le.on("change",function(Ce,ze){switch(Ce){case"transparency":return ee._setTransparency(ze);case"displaySize":return ee._setDisplaySize(ze);case"theme":return ee._setTheme(ze)}}),U.separator().select(le,"theme","Theme",K()(we.getThemes())).range(le,"transparency","Transparency",{min:.2,max:1,step:.01}).range(le,"displaySize","Display Size",{min:40,max:100,step:1}).button("Restore defaults and reload",function(){var Ce=Kt("local"),ze=JSON.parse(JSON.stringify(Ce));I()(ze,function(Ke,mt){H()(Ke)&&Fr()(mt,"eruda")&&Ce.removeItem(mt)}),window.location.reload()}).separator()}},{key:"notify",value:function(U,ee){this._notification.notify(U,ee)}},{key:"destroy",value:function(){we.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),A.off(A.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(U){var ee=this.$container;(function(le){return W()(Oe,le)})(U)?ee.addClass(_e("dark")):ee.rmClass(_e("dark")),we.setTheme(U)}},{key:"_setTransparency",value:function(U){Ar()(U)&&(this._opacity=U,this._isShow&&this._$el.css({opacity:U}))}},{key:"_setDisplaySize",value:function(U){Ar()(U)&&this._$el.css({height:U+"%"})}},{key:"_initTpl",value:function(){var U=this.$container;U.append(_e(`
      <div class="dev-tools">
        <div class="resizer"></div>
        <div class="tab"></div>
        <div class="tools"></div>
        <div class="notification"></div>
        <div class="modal"></div>
      </div>
      `)),this._$el=U.find(_e(".dev-tools")),this._$tools=this._$el.find(_e(".tools"))}},{key:"_initTab",value:function(){var U=this;this._tab=new Cr.Z(this._$el.find(_e(".tab")).get(0),{height:40}),this._tab.on("select",function(ee){return U.showTool(ee)})}},{key:"_initNotification",value:function(){this._notification=new($r())(this._$el.find(_e(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){Xr.Z.setContainer(this._$el.find(_e(".modal")).get(0))}},{key:"_bindEvent",value:function(){var U=this,ee=this._$el.find(_e(".resizer")),le=this._$el.find(_e(".nav-bar")),Ce=x()(document),ze=function(mt){if(U._isResizing){mt.preventDefault(),mt.stopPropagation(),mt=mt.origEvent;var At=(U._resizeStartY-gt("y",mt))/window.innerHeight*100,er=U._resizeStartSize+At;er<40?er=40:er>100&&(er=100),U.config.set("displaySize",Zt()(er.toFixed(2)))}},Ke=function mt(){clearTimeout(U._resizeTimer),U._isResizing=!1,ee.css("height",10),Ce.off(ot("move"),ze),Ce.off(ot("end"),mt)};ee.css("height",10),ee.on(ot("start"),function(mt){mt.preventDefault(),mt.stopPropagation(),mt=mt.origEvent,U._isResizing=!0,U._resizeStartSize=U.config.get("displaySize"),U._resizeStartY=gt("y",mt),ee.css("height","100%"),Ce.on(ot("move"),ze),Ce.on(ot("end"),Ke)}),le.on("contextmenu",function(mt){return mt.preventDefault()}),this.$container.on("click",function(mt){return mt.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),A.on(A.SCALE,this._updateTabHeight)}}]),ce}(_()),Jr=r(1214),br=r.n(Jr),Pr=r(4777),We=r.n(Pr),ge=r(1754),zt=r.n(ge),Ir=r(5484),Zr=r.n(Ir),Yi=r(3023),bi=r.n(Yi),ei=r(9585),jt=r.n(ei),Or=r(6156),yi=r.n(Or),Xi=r(8816);function Ri(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}Zr().start();var Mi=function(me){(0,l.Z)(ce,me);var pe=Ri(ce);function ce(){var U,ee=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).name,le=ee===void 0?"console":ee;return(0,o.Z)(this,ce),U=pe.call(this),(0,f.Z)((0,c.Z)(U),"_handleShow",function(){jt()(U._$el.get(0))||U._logger.renderViewport()}),(0,f.Z)((0,c.Z)(U),"_handleErr",function(Ce){U._logger.error(Ce)}),_().mixin((0,c.Z)(U)),U.name=le,U._selectedLog=null,U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var U=this,ee=this._origConsole={},le=window.console;return xi.forEach(function(Ce){var ze=ee[Ce]=br();le[Ce]&&(ze=ee[Ce]=le[Ce].bind(le)),le[Ce]=function(){U[Ce].apply(U,arguments),ze.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(U,ee){this._logger.setGlobal(U,ee)}},{key:"restoreConsole",value:function(){var U=this;return this._origConsole?(xi.forEach(function(ee){return window.console[ee]=U._origConsole[ee]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return Zr().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return Zr().rmListener(this._handleErr),this}},{key:"filter",value:function(U){var ee=this._$filterText,le=this._logger;H()(U)?(ee.text(U),le.setOption("filter",tr()(U))):zt()(U)?(ee.text(q()(U)),le.setOption("filter",U)):We()(U)&&(ee.text("ƒ"),le.setOption("filter",U))}},{key:"destroy",value:function(){this._logger.destroy(),(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&we.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(U){var ee=this._$el,le=ee.find(_e(".js-input"));U?(le.show(),ee.rmClass(_e("js-input-hidden"))):(le.hide(),ee.addClass(_e("js-input-hidden")))}},{key:"_appendTpl",value:function(){var U=this._$el;this._style=we(r(3191)),U.append(_e(`
      <div class="control">
        <span class="icon-clear clear-console"></span>
        <span class="level active" data-level="all">All</span>
        <span class="level" data-level="info">Info</span>
        <span class="level" data-level="warning">Warning</span>
        <span class="level" data-level="error">Error</span>
        <span class="filter-text"></span>
        <span class="icon-filter filter"></span>
        <span class="icon-copy icon-disabled copy"></span>
      </div>
      <div class="logs-container"></div>
      <div class="js-input">
        <div class="buttons">
          <div class="button cancel">Cancel</div>
          <div class="button execute">Execute</div>
        </div>
        <span class="icon-arrow-right"></span>
        <textarea></textarea>
      </div>
    `));var ee=U.find(_e(".js-input")),le=ee.find("textarea"),Ce=ee.find(_e(".buttons"));J()(this,{_$control:U.find(_e(".control")),_$logs:U.find(_e(".logs-container")),_$inputContainer:ee,_$input:le,_$inputBtns:Ce,_$filterText:U.find(_e(".filter-text"))})}},{key:"_initLogger",value:function(){var U=this.config,ee=U.get("maxLogNum");ee=ee==="infinite"?0:+ee;var le=this._$control.find(_e(".level")),Ce=new Xi.Z(this._$logs.get(0),{asyncRender:U.get("asyncRender"),maxNum:ee,showHeader:U.get("displayExtraInfo"),unenumerable:U.get("displayUnenumerable"),accessGetter:U.get("displayGetterVal"),lazyEvaluation:U.get("lazyEvaluation")});Ce.on("optionChange",function(ze,Ke){ze==="level"&&le.each(function(){var mt=x()(this),At=mt.data("level");mt[At===Ke||At==="all"&&de()(Ke)?"addClass":"rmClass"](_e("active"))})}),U.get("overrideConsole")&&this.overrideConsole(),this._logger=Ce}},{key:"_exposeLogger",value:function(){var U=this,ee=this._logger;["html"].concat(xi).forEach(function(le){return U[le]=function(){for(var Ce=arguments.length,ze=new Array(Ce),Ke=0;Ke<Ce;Ke++)ze[Ke]=arguments[Ke];return ee[le].apply(ee,ze),U.emit.apply(U,[le].concat(ze)),U}})}},{key:"_bindEvent",value:function(){var U=this,ee=this._container,le=this._$input,Ce=this._$inputBtns,ze=this._$control,Ke=this._logger,mt=this.config;ze.on("click",_e(".clear-console"),function(){return Ke.clear(!0)}).on("click",_e(".level"),function(){var At=x()(this).data("level");At==="all"&&(At=["verbose","info","warning","error"]),Ke.setOption("level",At)}).on("click",_e(".filter"),function(){Xr.Z.prompt("Filter").then(function(At){yi()(At)||U.filter(At)})}).on("click",_e(".copy"),function(){U._selectedLog.copy(),ee.notify("Copied")}),Ce.on("click",_e(".cancel"),function(){return U._hideInput()}).on("click",_e(".execute"),function(){var At=le.val().trim();At!==""&&(Ke.evaluate(At),le.val("").get(0).blur(),U._hideInput())}),le.on("focusin",function(){return U._showInput()}),Ke.on("insert",function(At){At.type==="error"&&mt.get("displayIfErr")&&ee.showTool("console").show()}),Ke.on("select",function(At){U._selectedLog=At,ze.find(_e(".icon-copy")).rmClass(_e("icon-disabled"))}),Ke.on("deselect",function(){U._selectedLog=null,ze.find(_e(".icon-copy")).addClass(_e("icon-disabled"))}),ee.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(_e("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(_e("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var U=this.config,ee=this._container.get("settings");ee&&ee.remove(U,"asyncRender").remove(U,"jsExecution").remove(U,"catchGlobalErr").remove(U,"overrideConsole").remove(U,"displayExtraInfo").remove(U,"displayUnenumerable").remove(U,"displayGetterVal").remove(U,"lazyEvaluation").remove(U,"displayIfErr").remove(U,"maxLogNum").remove(bi()(this.name))}},{key:"_initCfg",value:function(){var U=this,ee=this._container,le=this.config=Pe.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(le.get("jsExecution")),le.get("catchGlobalErr")&&this.catchGlobalErr(),le.on("change",function(ze,Ke){var mt=U._logger;switch(ze){case"asyncRender":return mt.setOption("asyncRender",Ke);case"jsExecution":return U._enableJsExecution(Ke);case"catchGlobalErr":return Ke?U.catchGlobalErr():U.ignoreGlobalErr();case"overrideConsole":return Ke?U.overrideConsole():U.restoreConsole();case"maxLogNum":return mt.setOption("maxNum",Ke==="infinite"?0:+Ke);case"displayExtraInfo":return mt.setOption("showHeader",Ke);case"displayUnenumerable":return mt.setOption("unenumerable",Ke);case"displayGetterVal":return mt.setOption("accessGetter",Ke);case"lazyEvaluation":return mt.setOption("lazyEvaluation",Ke)}});var Ce=ee.get("settings");Ce&&Ce.text(bi()(this.name)).switch(le,"asyncRender","Asynchronous Rendering").switch(le,"jsExecution","Enable JavaScript Execution").switch(le,"catchGlobalErr","Catch Global Errors").switch(le,"overrideConsole","Override Console").switch(le,"displayIfErr","Auto Display If Error Occurs").switch(le,"displayExtraInfo","Display Extra Information").switch(le,"displayUnenumerable","Display Unenumerable Properties").switch(le,"displayGetterVal","Access Getter Value").switch(le,"lazyEvaluation","Lazy Evaluation").select(le,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),ce}(b),xi=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],Zi=r(4677),Br=r.n(Zi),Ei=r(8887),Lr=r.n(Ei),Yt=r(8901),yr=r.n(Yt),sr=r(2327),Tr=r.n(sr),Ki=r(4219),Wi=r.n(Ki),Vi=r(7756),ni=r.n(Vi);function Ji(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Ai=function(me){(0,l.Z)(ce,me);var pe=Ji(ce);function ce(U,ee){var le;return(0,o.Z)(this,ce),le=pe.call(this),(0,f.Z)((0,c.Z)(le),"_copyRes",function(){var Ce=le._detailData,ze="".concat(Ce.method," ").concat(Ce.url," ").concat(Ce.status,`
`);Lr()(Ce.data)||(ze+=`
Request Data

`,ze+="".concat(Ce.data,`
`)),Lr()(Ce.reqHeaders)||(ze+=`
Request Headers

`,I()(Ce.reqHeaders,function(Ke,mt){return ze+="".concat(mt,": ").concat(Ke,`
`)})),Lr()(Ce.resHeaders)||(ze+=`
Response Headers

`,I()(Ce.resHeaders,function(Ke,mt){return ze+="".concat(mt,": ").concat(Ke,`
`)})),Ce.resTxt&&(ze+=`
`.concat(Ce.resTxt,`
`)),Tr()(ze),le._devtools.notify("Copied")}),le._$container=U,le._devtools=ee,le._detailData={},le._bindEvent(),le}return(0,a.Z)(ce,[{key:"show",value:function(U){U.resTxt&&tr()(U.resTxt)===""&&delete U.resTxt,Lr()(U.resHeaders)&&delete U.resHeaders,Lr()(U.reqHeaders)&&delete U.reqHeaders;var ee="";U.data&&(ee='<pre class="'.concat(_e("data"),'">').concat(yr()(U.data),"</pre>"));var le="<tr><td>Empty</td></tr>";U.reqHeaders&&(le=qe()(U.reqHeaders,function(At,er){return`<tr>
          <td class="`.concat(_e("key"),'">').concat(yr()(er),`</td>
          <td>`).concat(yr()(At),`</td>
        </tr>`)}).join(""));var Ce="<tr><td>Empty</td></tr>";U.resHeaders&&(Ce=qe()(U.resHeaders,function(At,er){return`<tr>
          <td class="`.concat(_e("key"),'">').concat(yr()(er),`</td>
          <td>`).concat(yr()(At),`</td>
        </tr>`)}).join(""));var ze="";if(U.resTxt){var Ke=U.resTxt;Ke.length>wi&&(Ke=ni()(Ke,wi)),ze='<pre class="'.concat(_e("response"),'">').concat(yr()(Ke),"</pre>")}var mt='<div class="'.concat(_e("control"),`">
      <span class="`).concat(_e("icon-arrow-left back"),`"></span>
      <span class="`).concat(_e("icon-delete back"),`"></span>
      <span class="`).concat(_e("url"),'">').concat(yr()(U.url),`</span>
      <span class="`).concat(_e("icon-copy copy-res"),`"></span>
    </div>
    <div class="`).concat(_e("http"),`">
      `).concat(ee,`
      <div class="`).concat(_e("section"),`">
        <h2>Response Headers</h2>
        <table class="`).concat(_e("headers"),`">
          <tbody>
            `).concat(Ce,`
          </tbody>
        </table>
      </div>
      <div class="`).concat(_e("section"),`">
        <h2>Request Headers</h2>
        <table class="`).concat(_e("headers"),`">
          <tbody>
            `).concat(le,`
          </tbody>
        </table>
      </div>
      `).concat(ze,`
    </div>`);this._$container.html(mt).show(),this._detailData=U}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var U=this,ee=this._devtools;this._$container.on("click",_e(".back"),function(){return U.hide()}).on("click",_e(".copy-res"),this._copyRes).on("click",_e(".http .response"),function(){var Ce=U._detailData,ze=Ce.resTxt;if(Wi()(ze))return le("object",ze);switch(Ce.subType){case"css":return le("css",ze);case"html":return le("html",ze);case"javascript":return le("js",ze);case"json":return le("object",ze)}return Ce.type==="image"?le("img",Ce.url):void 0});var le=function(Ce,ze){var Ke=ee.get("sources");Ke&&(Ke.set(Ce,ze),ee.showTool("sources"))}}}]),ce}(_()),wi=1e5,Oi=r(2439),zi=r.n(Oi),Ti=r(9143),Di=r.n(Ti),jr=r(2139),ji=r(8689),Li=r(7935),Nt=r(9119);function or(me,pe){var ce=Object.keys(me);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(me);pe&&(U=U.filter(function(ee){return Object.getOwnPropertyDescriptor(me,ee).enumerable})),ce.push.apply(ce,U)}return ce}function kt(me){for(var pe=1;pe<arguments.length;pe++){var ce=arguments[pe]!=null?arguments[pe]:{};pe%2?or(Object(ce),!0).forEach(function(U){(0,f.Z)(me,U,ce[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(ce)):or(Object(ce)).forEach(function(U){Object.defineProperty(me,U,Object.getOwnPropertyDescriptor(ce,U))})}return me}var he=new(Di());he.register("Network",jr),he.register("Overlay",ji),he.register("DOM",kt(kt({},Li),{},{getNodeId:Li.getDOMNodeId,getNode:Li.getDOMNode})),he.register("Storage",Nt);var oe=he,Ae=r(5564),Ve=r(242),_t=r.n(Ve),ct=r(2765),Te=r.n(ct),ht=r(6954),Dt=r.n(ht),ar=r(7913),gr=r.n(ar);function Dr(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Hr=function(me){(0,l.Z)(ce,me);var pe=Dr(ce);function ce(){var U;return(0,o.Z)(this,ce),U=pe.call(this),(0,f.Z)((0,c.Z)(U),"_reqWillBeSent",function(ee){if(U._isRecording){var le,Ce={name:Wt(ee.request.url),url:ee.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:ee.request.postData,method:ee.request.method,startTime:1e3*ee.timestamp,time:0,resTxt:"",done:!1,reqHeaders:ee.request.headers||{},resHeaders:{}};Ce.render=function(){var ze={name:Ce.name,method:Ce.method,status:Ce.status,type:Ce.subType,size:Ce.size,time:Ce.displayTime};le?(le.data=ze,le.render()):(le=U._requestDataGrid.append(ze,{selectable:!0}),x()(le.container).data("id",ee.requestId)),Ce.hasErr&&x()(le.container).addClass(_e("request-error"))},Ce.render(),U._requests[ee.requestId]=Ce}}),(0,f.Z)((0,c.Z)(U),"_resReceivedExtraInfo",function(ee){var le=U._requests[ee.requestId];U._isRecording&&le&&(le.resHeaders=ee.headers,U._updateType(le),le.render())}),(0,f.Z)((0,c.Z)(U),"_resReceived",function(ee){var le=U._requests[ee.requestId];if(U._isRecording&&le){var Ce=ee.response,ze=Ce.status,Ke=Ce.headers;le.status=ze,(ze<200||ze>=300)&&(le.hasErr=!0),Ke&&(le.resHeaders=Ke,U._updateType(le)),le.render()}}),(0,f.Z)((0,c.Z)(U),"_loadingFinished",function(ee){var le=U._requests[ee.requestId];if(U._isRecording&&le){var Ce=1e3*ee.timestamp;le.time=Ce-le.startTime,le.displayTime=Br()(le.time),le.size=ee.encodedDataLength,le.done=!0,le.resTxt=oe.domain("Network").getResponseBody({requestId:ee.requestId}).body,le.render()}}),(0,f.Z)((0,c.Z)(U),"_copyCurl",function(){var ee=U._selectedRequest;Tr()(function(le){var Ce=Dt()();Ce==="windows"&&(Ce="win");var ze=[],Ke=gr()(["accept-encoding","host","method","path","scheme","version"]),mt=Ce==="win"?function(pi){var on=/[\r\n]/.test(pi)?'^"':'"';return on+pi.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'\/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,`^

`)+on}:function(pi){return/[\0-\x1F\x7F-\x9F!]|\'/.test(pi)?"$'"+pi.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(on){for(var an=on.charCodeAt(0).toString(16);an.length<4;)an="0"+an;return"\\u"+an})+"'":"'"+pi+"'"};ze.push(mt(le.url()).replace(/[[{}\]]/g,"\\$&"));var At="GET",er=[],_r=le.requestFormData();_r&&(er.push("--data-raw "+mt(_r)),Ke["content-length"]=!0,At="POST"),le.requestMethod!==At&&ze.push("-X "+mt(le.requestMethod));for(var Er=le.requestHeaders(),Nr=0;Nr<Er.length;Nr++){var Gr=Er[Nr],fi=Gr.name.replace(/^:/,"");Ke[fi.toLowerCase()]||ze.push("-H "+mt(fi+": "+Gr.value))}return(ze=ze.concat(er)).push("--compressed"),"curl "+ze.join(ze.length>=3?Ce==="win"?` ^
  `:` \\
  `:" ")}({requestMethod:ee.method,url:function(){return ee.url},requestFormData:function(){return ee.data},requestHeaders:function(){var le=ee.reqHeaders||{};return J()(le,{"User-Agent":navigator.userAgent,Referer:location.href}),qe()(le,function(Ce,ze){return{name:ze,value:Ce}})}})),U._container.notify("Copied")}),(0,f.Z)((0,c.Z)(U),"_toggleRecording",function(){U._$control.find(_e(".record")).toggleClass(_e("recording")),U._isRecording=!U._isRecording}),(0,f.Z)((0,c.Z)(U),"_showDetail",function(){U._selectedRequest&&(U._splitMode&&U._$network.css("width","50%"),U._detail.show(U._selectedRequest))}),(0,f.Z)((0,c.Z)(U),"_updateScale",function(ee){U._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*ee,"px)"))}),U._style=we(r(3180)),U.name="network",U._requests={},U._selectedRequest=null,U._isRecording=!0,U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._initTpl(),this._detail=new Ai(this._$detail,ee),this._splitMediaQuery=new(Te())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new Ae.Z(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new(_t())(U.get(0)),this._bindEvent()}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"show",this).call(this),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var U=[];return I()(this._requests,function(ee){U.push(ee)}),U}},{key:"_updateDataGridHeight",value:function(){var U=this._$el.offset().height-this._$control.offset().height;this._requestDataGrid.setOption({minHeight:U,maxHeight:U})}},{key:"_updateType",value:function(U){var ee=function(ze){if(!ze)return"unknown";var Ke=ze.split(";")[0].split("/");return{type:Ke[0],subType:yt()(Ke)}}(U.resHeaders["content-type"]||""),le=ee.type,Ce=ee.subType;U.type=le,U.subType=Ce}},{key:"_updateButtons",value:function(){var U=this._$control,ee=U.find(_e(".show-detail")),le=U.find(_e(".copy-curl")),Ce=_e("icon-disabled");ee.addClass(Ce),le.addClass(Ce),this._selectedRequest&&(ee.rmClass(Ce),le.rmClass(Ce))}},{key:"_bindEvent",value:function(){var U=this,ee=this._$control,le=this._$filterText,Ce=this._requestDataGrid,ze=this;ee.on("click",_e(".clear-request"),function(){return U.clear()}).on("click",_e(".show-detail"),this._showDetail).on("click",_e(".copy-curl"),this._copyCurl).on("click",_e(".record"),this._toggleRecording).on("click",_e(".filter"),function(){Xr.Z.prompt("Filter").then(function(mt){yi()(mt)||(le.text(mt),Ce.setOption("filter",tr()(mt)))})}),Ce.on("select",function(mt){var At=x()(mt.container).data("id"),er=ze._requests[At];U._selectedRequest=er,U._updateButtons(),U._splitMode&&U._showDetail()}),Ce.on("deselect",function(){U._selectedRequest=null,U._updateButtons(),U._detail.hide()}),this._resizeSensor.addListener(zi()(function(){return U._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){U._detail.hide(),U._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){U._detail.hide(),U._splitMode=!1}),this._detail.on("hide",function(){U._splitMode&&U._$network.css("width","100%")}),oe.domain("Network").enable();var Ke=oe.domain("Network");Ke.on("requestWillBeSent",this._reqWillBeSent),Ke.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ke.on("responseReceived",this._resReceived),Ke.on("loadingFinished",this._loadingFinished),A.on(A.SCALE,this._updateScale)}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),this._resizeSensor.destroy(),we.remove(this._style),this._splitMediaQuery.removeAllListeners();var U=oe.domain("Network");U.off("requestWillBeSent",this._reqWillBeSent),U.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),U.off("responseReceived",this._resReceived),U.off("loadingFinished",this._loadingFinished),A.off(A.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var U=this._$el;U.html(_e(`<div class="network">
        <div class="control">
          <span class="icon-record record recording"></span>
          <span class="icon-clear clear-request"></span>
          <span class="icon-eye icon-disabled show-detail"></span>
          <span class="icon-copy icon-disabled copy-curl"></span>
          <span class="filter-text"></span>
          <span class="icon-filter filter"></span>
        </div>
        <div class="requests"></div>
      </div>
      <div class="detail"></div>`)),this._$network=U.find(_e(".network")),this._$detail=U.find(_e(".detail")),this._$requests=U.find(_e(".requests")),this._$control=U.find(_e(".control")),this._$filterText=U.find(_e(".filter-text"))}}]),ce}(b),lr=r(9833),kr=r.n(lr),mr=r(9956),Wr=r.n(mr),wr=r(8209),vi=r(3063),ci=r.n(vi),hr=r(3487),Ht=r.n(hr),si=r(42),pr=r.n(si),ti=r(4696),hi=r.n(ti),Pi=r(7653),Kr=r.n(Pi),Ci=r(8613),Ii=r.n(Ci),gi=r(2289),ki=r.n(gi),Bi=r(3629),Ui=r.n(Bi);function ui(me){for(var pe={},ce=0,U=me.length;ce<U;ce++){var ee=me[ce];me[ee]!=="initial"&&(pe[ee]=me[ee])}return function(le){return Ui()(le,{comparator:function(Ce,ze){for(var Ke=Ce.length,mt=ze.length,At=Ke>mt?mt:Ke,er=0;er<At;er++){var _r=en(Ce.charCodeAt(er),ze.charCodeAt(er));if(_r!==0)return _r}return Ke>mt?1:Ke<mt?-1:0}})}(pe)}var Rr=Element.prototype,Ni=function(){return!1};Rr.webkitMatchesSelector?Ni=function(me,pe){return me.webkitMatchesSelector(pe)}:Rr.mozMatchesSelector&&(Ni=function(me,pe){return me.mozMatchesSelector(pe)});var Si=function(){function me(pe){(0,o.Z)(this,me),this._el=pe}return(0,a.Z)(me,[{key:"getComputedStyle",value:function(){return ui(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var pe=this,ce=[];return I()(document.styleSheets,function(U){try{if(!U.cssRules)return}catch{return}I()(U.cssRules,function(ee){var le=!1;try{le=pe._elMatchesSel(ee.selectorText)}catch{}le&&ce.push({selectorText:ee.selectorText,style:ui(ee.style)})})}),ce}},{key:"_elMatchesSel",value:function(pe){return Ni(this._el,pe)}}]),me}();function en(me,pe){return(me=_i(me))>(pe=_i(pe))?1:me<pe?-1:0}function _i(me){return me===45?123:me}var Gi=r(422);function oi(me){var pe=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).noAttr,ce=pe!==void 0&&pe;if(me.nodeType===Node.TEXT_NODE)return'<span class="'.concat(_e("tag-name-color"),'">(text)</span>');if(me.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(_e("tag-name-color"),'"><!--></span>');var U=me.id,ee=me.className,le=me.attributes,Ce='<span class="eruda-tag-name-color">'.concat(me.tagName.toLowerCase(),"</span>");if(U!==""&&(Ce+='<span class="eruda-function-color">#'.concat(U,"</span>")),H()(ee)){var ze="";I()(ee.split(/\s+/g),function(Ke){Ke.trim()!==""&&(ze+=".".concat(Ke))}),Ce+='<span class="eruda-attribute-name-color">'.concat(ze,"</span>")}return ce||I()(le,function(Ke){var mt=Ke.name;mt!=="id"&&mt!=="class"&&mt!=="style"&&(Ce+=' <span class="eruda-attribute-name-color">'.concat(mt,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(Ke.value,'</span><span class="eruda-operator-color">"</span>'))}),Ce}var nn=function(){function me(pe,ce){var U=this;(0,o.Z)(this,me),(0,f.Z)(this,"hide",function(){U._$container.hide(),U._disableObserver(),oe.domain("Overlay").hideHighlight()}),this._$container=pe,this._devtools=ce,this._curEl=document.documentElement,this._bindEvent(),this._initObserver(),this._initCfg(),this._initTpl()}return(0,a.Z)(me,[{key:"show",value:function(pe){this._curEl=pe,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render();var ce=oe.domain("DOM").getNodeId({node:pe}).nodeId;oe.domain("Overlay").highlightNode({nodeId:ce,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var pe=Fi(),ce=this._origAddEvent=pe.addEventListener,U=this._origRmEvent=pe.removeEventListener;pe.addEventListener=function(ee,le,Ce){(function(ze,Ke,mt){var At=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!kr()(ze)||!We()(mt)||!hi()(At))){var er=ze.erudaEvents=ze.erudaEvents||{};er[Ke]=er[Ke]||[],er[Ke].push({listener:mt,listenerStr:mt.toString(),useCapture:At})}})(this,ee,le,Ce),ce.apply(this,arguments)},pe.removeEventListener=function(ee,le,Ce){(function(ze,Ke,mt){var At=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!kr()(ze)||!We()(mt)||!hi()(At))){var er=ze.erudaEvents;if(!(!er||!er[Ke])){for(var _r=er[Ke],Er=0,Nr=_r.length;Er<Nr;Er++)if(_r[Er].listener===mt){_r.splice(Er,1);break}_r.length===0&&delete er[Ke],K()(er).length===0&&delete ze.erudaEvents}}})(this,ee,le,Ce),U.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var pe=Fi();this._origAddEvent&&(pe.addEventListener=this._origAddEvent),this._origRmEvent&&(pe.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var pe=this._$container,ce='<div class="'.concat(_e("control"),`">
      <span class="`).concat(_e("icon-arrow-left back"),`"></span>
      <span class="`).concat(_e("element-name"),`"></span>
      <span class="`).concat(_e("icon-refresh refresh"),`"></span>
    </div>
    <div class="`).concat(_e("element"),`">
      <div class="`).concat(_e("attributes section"),`"></div>
      <div class="`).concat(_e("styles section"),`"></div>
      <div class="`).concat(_e("computed-style section"),`"></div>
      <div class="`).concat(_e("listeners section"),`"></div>
    </div>`);pe.html(ce),this._$elementName=pe.find(_e(".element-name")),this._$attributes=pe.find(_e(".attributes")),this._$styles=pe.find(_e(".styles")),this._$listeners=pe.find(_e(".listeners")),this._$computedStyle=pe.find(_e(".computed-style"));var U=Ii()("div");this._$boxModel=x()(U),this._boxModel=new Gi.Z(U)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var pe=this._getData(this._curEl),ce=this._$attributes,U=this._$elementName,ee=this._$styles,le=this._$computedStyle,Ce=this._$listeners;U.html(pe.name);var ze="<tr><td>Empty</td></tr>";Lr()(pe.attributes)||(ze=qe()(pe.attributes,function(Er){var Nr=Er.name,Gr=Er.value;return`<tr>
          <td class="`.concat(_e("attribute-name-color"),'">').concat(yr()(Nr),`</td>
          <td class="`).concat(_e("string-color"),'">').concat(Gr,`</td>
        </tr>`)}).join("")),ze=`<h2>Attributes</h2>
    <div class="`.concat(_e("table-wrapper"),`">
      <table>
        <tbody>
          `).concat(ze,` 
        </tbody>
      </table>
    </div>`),ce.html(ze);var Ke="";if(Lr()(pe.styles))ee.hide();else{var mt=qe()(pe.styles,function(Er){var Nr=Er.selectorText,Gr=Er.style;return Gr=qe()(Gr,function(fi,pi){return'<div class="'.concat(_e("rule"),'"><span>').concat(yr()(pi),"</span>: ").concat(fi,";</div>")}).join(""),'<div class="'.concat(_e("style-rules"),`">
          <div>`).concat(yr()(Nr),` {</div>
            `).concat(Gr,`
          <div>}</div>
        </div>`)}).join("");Ke=`<h2>Styles</h2>
      <div class="`.concat(_e("style-wrapper"),`">
        `).concat(mt,`
      </div>`),ee.html(Ke).show()}var At="";if(pe.computedStyle){var er=_e(`<div class="btn toggle-all-computed-style">
        <span class="icon-expand"></span>
      </div>`);pe.rmDefComputedStyle&&(er=_e(`<div class="btn toggle-all-computed-style">
          <span class="icon-compress"></span>
        </div>`)),At=`<h2>
        Computed Style
        `.concat(er,`
        <div class="`).concat(_e("btn computed-style-search"),`">
          <span class="`).concat(_e("icon-filter"),`"></span>
        </div>
        `).concat(pe.computedStyleSearchKeyword?'<div class="'.concat(_e("btn filter-text"),'">').concat(yr()(pe.computedStyleSearchKeyword),"</div>"):"",`
      </h2>
      <div class="`).concat(_e("box-model"),`"></div>
      <div class="`).concat(_e("table-wrapper"),`">
        <table>
          <tbody>
          `).concat(qe()(pe.computedStyle,function(Er,Nr){return`<tr>
              <td class="`.concat(_e("key"),'">').concat(yr()(Nr),`</td>
              <td>`).concat(Er,`</td>
            </tr>`)}).join(""),`
          </tbody>
        </table>
      </div>`),le.html(At).show(),this._boxModel.setOption("element",this._curEl),le.find(_e(".box-model")).append(this._$boxModel.get(0))}else le.text("").hide();var _r="";pe.listeners?(_r=qe()(pe.listeners,function(Er,Nr){return Er=qe()(Er,function(Gr){var fi=Gr.useCapture,pi=Gr.listenerStr;return"<li ".concat(fi?'class="'.concat(_e("capture"),'"'):"",">").concat(yr()(pi),"</li>")}).join(""),'<div class="'.concat(_e("listener"),`">
          <div class="`).concat(_e("listener-type"),'">').concat(yr()(Nr),`</div>
          <ul class="`).concat(_e("listener-content"),`">
            `).concat(Er,`
          </ul>
        </div>`)}).join(""),_r=`<h2>Event Listeners</h2>
      <div class="`.concat(_e("listener-wrapper"),`">
        `).concat(_r,` 
      </div>`),Ce.html(_r).show()):Ce.hide(),this._$container.show()}},{key:"_getData",value:function(pe){var ce={},U=new Si(pe),ee=pe.className,le=pe.id,Ce=pe.attributes,ze=pe.tagName;ce.computedStyleSearchKeyword=this._computedStyleSearchKeyword,ce.attributes=ln(Ce),ce.name=oi({tagName:ze,id:le,className:ee,attributes:Ce});var Ke=pe.erudaEvents;if(Ke&&K()(Ke).length!==0&&(ce.listeners=Ke),hn(ze))return ce;var mt=U.getComputedStyle(),At=U.getMatchedCSSRules();At.unshift(function(_r){for(var Er={selectorText:"element.style",style:{}},Nr=0,Gr=_r.length;Nr<Gr;Nr++){var fi=_r[Nr];Er.style[fi]=_r[fi]}return Er}(pe.style)),At.forEach(function(_r){return di(_r.style)}),ce.styles=At,this._rmDefComputedStyle&&(mt=function(_r,Er){var Nr={},Gr=["display","width","height"];return I()(Er,function(fi){Gr=Gr.concat(K()(fi.style))}),Gr=pr()(Gr),I()(_r,function(fi,pi){W()(Gr,pi)&&(Nr[pi]=fi)}),Nr}(mt,At)),ce.rmDefComputedStyle=this._rmDefComputedStyle;var er=ci()(ce.computedStyleSearchKeyword);return er&&(mt=Ht()(mt,function(_r,Er){return W()(Er,er)||W()(_r,er)})),di(mt),ce.computedStyle=mt,ce}},{key:"_bindEvent",value:function(){var pe=this,ce=this._devtools;this._$container.on("click",_e(".toggle-all-computed-style"),function(){return pe._toggleAllComputedStyle()}).on("click",_e(".computed-style-search"),function(){Xr.Z.prompt("Filter").then(function(U){yi()(U)||(U=tr()(U),pe._computedStyleSearchKeyword=U,pe._render())})}).on("click",".eruda-listener-content",function(){var U=x()(this).text(),ee=ce.get("sources");ee&&(ee.set("js",U),ce.showTool("sources"))}).on("click",_e(".element-name"),function(){var U=ce.get("sources");U&&(U.set("object",pe._curEl),ce.showTool("sources"))}).on("click",_e(".back"),this.hide).on("click",_e(".refresh"),function(){pe._render(),ce.notify("Refreshed")})}},{key:"_initObserver",value:function(){var pe=this;this._observer=new(ki())(function(ce){I()(ce,function(U){return pe._handleMutation(U)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(pe){if(!rt(pe.target)&&pe.type==="attributes"){if(pe.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var pe=this.config,ce=this._devtools.get("settings");ce&&ce.remove(pe,"overrideEventTarget").remove(pe,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var pe=this,ce=this.config=Pe.createCfg("elements",{overrideEventTarget:!0});ce.get("overrideEventTarget")&&this.overrideEventTarget(),ce.on("change",function(ee,le){if(ee==="overrideEventTarget")return le?pe.overrideEventTarget():pe.restoreEventTarget()});var U=this._devtools.get("settings");U&&(U.text("Elements").switch(ce,"overrideEventTarget","Catch Event Listeners"),U.separator())}}]),me}();function di(me){I()(me,function(pe,ce){return me[ce]=rn(pe)})}var ln=function(me){return qe()(me,function(pe){var ce=pe.value,U=pe.name;return ce=yr()(ce),(U==="src"||U==="href")&&!Fr()(ce,"data")&&(ce=qi(ce)),U==="style"&&(ce=rn(ce)),{name:U,value:ce}})},tn=/rgba?\((.*?)\)/g,cn=/url\("?(.*?)"?\)/g;function rn(me){return(me=q()(me)).replace(tn,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(cn,function(pe,ce){return'url("'.concat(qi(ce),'")')})}var mi=["script","style","meta","title","link","head"],hn=function(me){return mi.indexOf(me.toLowerCase())>-1},qi=function(me){return'<a href="'.concat(me,'" target="_blank">').concat(me,"</a>")},Fi=function(){return Kr()(window,"EventTarget.prototype")||window.Node.prototype};function vr(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Qi=function(me){(0,l.Z)(ce,me);var pe=vr(ce);function ce(){var U;return(0,o.Z)(this,ce),U=pe.call(this),(0,f.Z)((0,c.Z)(U),"_showDetail",function(){U._isShow&&U._curNode&&(U._curNode.nodeType===Node.ELEMENT_NODE?U._detail.show(U._curNode):U._detail.show(U._curNode.parentNode))}),(0,f.Z)((0,c.Z)(U),"_back",function(){if(U._curNode!==U._htmlEl){for(var ee=U._curParentQueue,le=ee.shift();!te(le);)le=ee.shift();U.set(le)}}),(0,f.Z)((0,c.Z)(U),"_updateScale",function(ee){U._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*ee,"px)"))}),(0,f.Z)((0,c.Z)(U),"_deleteNode",function(){var ee=U._curNode;ee.parentNode&&ee.parentNode.removeChild(ee)}),(0,f.Z)((0,c.Z)(U),"_copyNode",function(){var ee=U._curNode;ee.nodeType===Node.ELEMENT_NODE?Tr()(ee.outerHTML):Tr()(ee.nodeValue),U._container.notify("Copied")}),(0,f.Z)((0,c.Z)(U),"_toggleSelect",function(){U._$el.find(_e(".select")).toggleClass(_e("active")),U._selectElement=!U._selectElement,U._selectElement?(oe.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!Wr()(),showRulers:!1,showAccessibilityInfo:!Wr()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),U._container.hide()):(oe.domain("Overlay").setInspectMode({mode:"none"}),oe.domain("Overlay").hideHighlight())}),(0,f.Z)((0,c.Z)(U),"_inspectNodeRequested",function(ee){var le=ee.backendNodeId;U._container.show(),U._toggleSelect();var Ce=oe.domain("DOM").getNode({nodeId:le}).node;U.select(Ce)}),(0,f.Z)((0,c.Z)(U),"_setNode",function(ee){if(ee!==U._curNode){U._curNode=ee,U._renderCrumbs();for(var le=[],Ce=ee.parentNode;Ce;)le.push(Ce),Ce=Ce.parentNode;U._curParentQueue=le,U._splitMode&&U._showDetail(),U._updateButtons(),U._updateHistory()}}),U._style=we(r(5896)),U.name="elements",U._selectElement=!1,U._observeElement=!0,U._history=[],_().mixin((0,c.Z)(U)),U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){var le=this;(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new nn(this._$detail,ee),this.config=this._detail.config,this._splitMediaQuery=new(Te())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new wr.Z(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(Ce){return rt(Ce)||je(Ce)}}),this._domViewer.expand(),this._bindEvent(),oe.domain("Overlay").enable(),Ye()(function(){return le._updateHistory()})}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"show",this).call(this),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"hide",this).call(this),this._isShow=!1,oe.domain("Overlay").hideHighlight()}},{key:"set",value:function(U){return this.select(U)}},{key:"select",value:function(U){return this._domViewer.select(U),this._setNode(U),this.emit("change",U),this}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),A.off(A.SCALE,this._updateScale),we.remove(this._style),this._detail.destroy(),oe.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),oe.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var U=this._$control,ee=U.find(_e(".show-detail")),le=U.find(_e(".copy-node")),Ce=U.find(_e(".delete-node")),ze=_e("icon-disabled");ee.addClass(ze),le.addClass(ze),Ce.addClass(ze);var Ke=this._curNode;Ke&&(Ke!==document.documentElement&&Ke!==document.body&&Ce.rmClass(ze),le.rmClass(ze),Ke.nodeType===Node.ELEMENT_NODE&&ee.rmClass(ze))}},{key:"_initTpl",value:function(){var U=this._$el;U.html(_e(`<div class="elements">
        <div class="control">
          <span class="icon icon-select select"></span>
          <span class="icon icon-eye show-detail"></span>
          <span class="icon icon-copy copy-node"></span>
          <span class="icon icon-delete delete-node"></span>
        </div>
        <div class="dom-viewer-container">
          <div class="dom-viewer"></div>
        </div>
        <div class="crumbs"></div>
      </div>
      <div class="detail"></div>`)),this._$detail=U.find(_e(".detail")),this._$domViewer=U.find(_e(".dom-viewer")),this._$control=U.find(_e(".control")),this._$crumbs=U.find(_e(".crumbs"))}},{key:"_renderCrumbs",value:function(){var U=function(le){for(var Ce=[],ze=0;le;)Ce.push({text:oi(le,{noAttr:!0}),idx:ze++}),le=le.parentElement;return Ce.reverse()}(this._curNode),ee="";Lr()(U)||(ee=qe()(U,function(le){var Ce=le.text,ze=le.idx;return'<li class="'.concat(_e("crumb"),'" data-idx="').concat(ze,'">').concat(Ce,"</div></li>")}).join("")),this._$crumbs.html(ee)}},{key:"_bindEvent",value:function(){var U=this,ee=this;this._$el.on("click",_e(".crumb"),function(){for(var le=Zt()(x()(this).data("idx")),Ce=ee._curNode;le--&&Ce.parentElement;)Ce=Ce.parentElement;te(Ce)&&ee.select(Ce)}),this._$control.on("click",_e(".select"),this._toggleSelect).on("click",_e(".show-detail"),this._showDetail).on("click",_e(".copy-node"),this._copyNode).on("click",_e(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),oe.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){U._splitMode=!0,U._showDetail()}),this._splitMediaQuery.on("unmatch",function(){U._splitMode=!1,U._detail.hide()}),A.on(A.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var U=this._container.get("console");if(U){var ee=this._history;ee.unshift(this._curNode),ee.length>5&&ee.pop();for(var le=0;le<5;le++)U.setGlobal("$".concat(le),ee[le])}}}]),ce}(b),te=function(me){return kr()(me)&&me.parentNode},u=r(8847),p=r.n(u),v=r(9622),S=r.n(v),O=null,T=[{name:"Border All",fn:function(){if(O)return we.remove(O),void(O=null);O=we("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var me=new(ut());me.setQuery("timestamp",p()()),window.location.replace(me.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){Xr.Z.prompt("Enter the text").then(function(me){me&&tr()(me)!==""&&function(pe){var ce=document.body,U=new RegExp(pe,"ig");P(ce,function(ee){var le=x()(ee);if(le.hasClass("eruda-search-highlight-block"))return document.createTextNode(le.text())}),P(ce,function(ee){if(ee.nodeType===3){var le=ee.nodeValue;if((le=le.replace(U,function(ze){return'<span class="eruda-keyword">'.concat(ze,"</span>")}))!==ee.nodeValue){var Ce=x()(document.createElement("div"));return Ce.html(le),Ce.addClass("eruda-search-highlight-block"),Ce.get(0)}}})}(me)})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var me=document.body;me.contentEditable=me.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var me=document.body,pe=document.documentElement,ce=x()(me);if(ce.data("scaled"))window.scrollTo(0,+ce.data("scaled")),ce.rmAttr("data-scaled"),ce.css("transform","none");else{var U=Math.max(me.scrollHeight,me.offsetHeight,pe.clientHeight,pe.scrollHeight,pe.offsetHeight),ee=Math.max(document.documentElement.clientHeight,window.innerHeight||0),le=ee/U;ce.css("transform","scale(".concat(le,")")),ce.data("scaled",window.scrollY),window.scrollTo(0,U/2-ee/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Monitor Plugin",fn:function(){F("monitor")},desc:"Display page fps and memory"},{name:"Load Features Plugin",fn:function(){F("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){F("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){F("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){F("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){F("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){F("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){F("touches")},desc:"Visualize screen touches"}];function P(me,pe){var ce=me.childNodes;if(!rt(me)){for(var U=0,ee=ce.length;U<ee;U++){var le=P(ce[U],pe);le&&me.replaceChild(le,ce[U])}return pe(me)}}function F(me){var pe="eruda"+bi()(me);if(!window[pe]){var ce=location.protocol;Fr()(ce,"http")||(ce="http:"),S()("".concat(ce,"//cdn.jsdelivr.net/npm/eruda-").concat(me,"@").concat(j[me]),function(U){if(!U||!window[pe])return $t.error("Fail to load plugin "+me);A.emit(A.ADD,window[pe]),A.emit(A.SHOW,me)})}}we(r(7346),document.head);var j={monitor:"1.0.0",features:"2.0.0",timing:"2.0.1",code:"2.1.0",benchmark:"2.0.1",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"},Z=r(5852),re=r.n(Z);function ae(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var ve=function(me){(0,l.Z)(ce,me);var pe=ae(ce);function ce(){var U;return(0,o.Z)(this,ce),(U=pe.call(this))._style=we(r(5571)),U.name="snippets",U._snippets=[],U}return(0,a.Z)(ce,[{key:"init",value:function(U){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),we.remove(this._style)}},{key:"add",value:function(U,ee,le){return this._snippets.push({name:U,fn:ee,desc:le}),this._render(),this}},{key:"remove",value:function(U){return re()(this._snippets,function(ee){return ee.name===U}),this._render(),this}},{key:"run",value:function(U){for(var ee=this._snippets,le=0,Ce=ee.length;le<Ce;le++)ee[le].name===U&&this._run(le);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var U=this;this._$el.on("click",".eruda-run",function(){var ee=x()(this).data("idx");U._run(ee)})}},{key:"_run",value:function(U){this._snippets[U].fn.call(null)}},{key:"_addDefSnippets",value:function(){var U=this;I()(T,function(ee){U.add(ee.name,ee.fn,ee.desc)})}},{key:"_render",value:function(){var U=qe()(this._snippets,function(ee,le){return'<div class="'.concat(_e("section run"),'" data-idx="').concat(le,`">
        <h2 class="`).concat(_e("name"),'">').concat(yr()(ee.name),`
          <div class="`).concat(_e("btn"),`">
            <span class="`).concat(_e("icon-play"),`"></span>
          </div>
        </h2>
        <div class="`).concat(_e("description"),`">
          `).concat(yr()(ee.desc),`
        </div>
      </div>`)}).join("");this._renderHtml(U)}},{key:"_renderHtml",value:function(U){U!==this._lastHtml&&(this._lastHtml=U,this._$el.html(U))}}]),ce}(b),Me=r(4224),Be=r.n(Me),Ue=r(8991),Qe=r.n(Ue),xt=r(1352),wt=r.n(xt),bt=r(8099),ur=r.n(bt),nr=function(){function me(pe,ce,U,ee){var le=this;(0,o.Z)(this,me),(0,f.Z)(this,"_updateGridHeight",function(Ce){le._dataGrid.setOption({minHeight:60*Ce,maxHeight:223*Ce})}),this._type=ee,this._$container=pe,this._devtools=ce,this._resources=U,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new Ae.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,a.Z)(me,[{key:"destroy",value:function(){A.off(A.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var pe=this._dataGrid;this._refreshStorage(),pe.clear(),I()(this._storeData,function(ce){var U=ce.key,ee=ce.val;pe.append({key:U,value:ee},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var pe=this._resources,ce=Kt(this._type,!1);if(ce){var U=[];ce=JSON.parse(JSON.stringify(ce)),I()(ce,function(ee,le){H()(ee)&&(pe.config.get("hideErudaSetting")&&(Fr()(le,"eruda")||le==="active-eruda")||U.push({key:le,val:ni()(ee,200)}))}),this._storeData=U}}},{key:"_updateButtons",value:function(){var pe=this._$container,ce=pe.find(_e(".show-detail")),U=pe.find(_e(".delete-storage")),ee=pe.find(_e(".copy-storage")),le=_e("btn-disabled");ce.addClass(le),U.addClass(le),ee.addClass(le),this._selectedItem&&(ce.rmClass(le),U.rmClass(le),ee.rmClass(le))}},{key:"_initTpl",value:function(){var pe=this._$container,ce=this._type;pe.html(_e(`<h2 class="title">
      `.concat(ce==="local"?"Local":"Session",` Storage
      <div class="btn refresh-storage">
        <span class="icon icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-storage btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-storage btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-storage">
        <span class="icon icon-clear"></span>
      </div>
      <div class="btn filter">
        <span class="icon icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`))),this._$dataGrid=pe.find(_e(".data-grid")),this._$filterText=pe.find(_e(".filter-text"))}},{key:"_getVal",value:function(pe){return this._type==="local"?localStorage.getItem(pe):sessionStorage.getItem(pe)}},{key:"_bindEvent",value:function(){var pe=this,ce=this._type,U=this._devtools;function ee(le,Ce){var ze=U.get("sources");if(ze)return ze.set(le,Ce),U.showTool("sources"),!0}this._$container.on("click",_e(".refresh-storage"),function(){U.notify("Refreshed"),pe.refresh()}).on("click",_e(".clear-storage"),function(){I()(pe._storeData,function(le){ce==="local"?localStorage.removeItem(le.key):sessionStorage.removeItem(le.key)}),pe.refresh()}).on("click",_e(".show-detail"),function(){var le=pe._selectedItem,Ce=pe._getVal(le);try{ee("object",JSON.parse(Ce))}catch{ee("raw",Ce)}}).on("click",_e(".copy-storage"),function(){var le=pe._selectedItem;Tr()(pe._getVal(le)),U.notify("Copied")}).on("click",_e(".filter"),function(){Xr.Z.prompt("Filter").then(function(le){yi()(le)||(le=tr()(le),pe._$filterText.text(le),pe._dataGrid.setOption("filter",le))})}).on("click",_e(".delete-storage"),function(){var le=pe._selectedItem;ce==="local"?localStorage.removeItem(le):sessionStorage.removeItem(le),pe.refresh()}),this._dataGrid.on("select",function(le){pe._selectedItem=le.data.key,pe._updateButtons()}).on("deselect",function(){pe._selectedItem=null,pe._updateButtons()}),A.on(A.SCALE,this._updateGridHeight)}}]),me}();function Ur(me,pe){me.rmClass(_e("ok")).rmClass(_e("danger")).rmClass(_e("warn")).addClass(_e(pe))}function ri(me,pe){if(pe===0)return"";var ce=0,U=0;switch(me){case"cookie":ce=30,U=60;break;case"script":ce=5,U=10;break;case"stylesheet":ce=4,U=8;break;case"image":ce=50,U=100}return pe>=U?"danger":pe>=ce?"warn":"ok"}var ii=function(){function me(pe,ce){(0,o.Z)(this,me),this._$container=pe,this._devtools=ce,this._selectedItem=null,this._initTpl(),this._dataGrid=new Ae.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,a.Z)(me,[{key:"refresh",value:function(){var pe=this._$container,ce=this._dataGrid,U=oe.domain("Network").getCookies().cookies,ee=qe()(U,function(le){return{key:le.name,val:le.value}});ce.clear(),I()(ee,function(le){var Ce=le.key,ze=le.val;ce.append({key:Ce,value:ze},{selectable:!0})}),Ur(pe,ri("cookie",ee.length))}},{key:"_initTpl",value:function(){var pe=this._$container;pe.html(_e(`<h2 class="title">
      Cookie
      <div class="btn refresh-cookie">
        <span class="icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-cookie btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-cookie btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-cookie">
        <span class="icon-clear"></span>
      </div>
      <div class="btn filter" data-type="cookie">
        <span class="icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`)),this._$dataGrid=pe.find(_e(".data-grid")),this._$filterText=pe.find(_e(".filter-text"))}},{key:"_updateButtons",value:function(){var pe=this._$container,ce=pe.find(_e(".show-detail")),U=pe.find(_e(".delete-cookie")),ee=pe.find(_e(".copy-cookie")),le=_e("btn-disabled");ce.addClass(le),U.addClass(le),ee.addClass(le),this._selectedItem&&(ce.rmClass(le),U.rmClass(le),ee.rmClass(le))}},{key:"_getVal",value:function(pe){for(var ce=oe.domain("Network").getCookies().cookies,U=0,ee=ce.length;U<ee;U++)if(ce[U].name===pe)return ce[U].value;return""}},{key:"_bindEvent",value:function(){var pe=this,ce=this._devtools;function U(ee,le){var Ce=ce.get("sources");if(Ce)return Ce.set(ee,le),ce.showTool("sources"),!0}this._$container.on("click",_e(".refresh-cookie"),function(){ce.notify("Refreshed"),pe.refresh()}).on("click",_e(".clear-cookie"),function(){oe.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),pe.refresh()}).on("click",_e(".delete-cookie"),function(){var ee=pe._selectedItem;oe.domain("Network").deleteCookies({name:ee}),pe.refresh()}).on("click",_e(".show-detail"),function(){var ee=pe._selectedItem,le=pe._getVal(ee);try{U("object",JSON.parse(le))}catch{U("raw",le)}}).on("click",_e(".copy-cookie"),function(){var ee=pe._selectedItem;Tr()(pe._getVal(ee)),ce.notify("Copied")}).on("click",_e(".filter"),function(){Xr.Z.prompt("Filter").then(function(ee){yi()(ee)||(ee=tr()(ee),pe._filter=ee,pe._$filterText.text(ee),pe._dataGrid.setOption("filter",ee))})}),this._dataGrid.on("select",function(ee){pe._selectedItem=ee.data.key,pe._updateButtons()}).on("deselect",function(){pe._selectedItem=null,pe._updateButtons()})}}]),me}();function Sr(me,pe){var ce=typeof Symbol<"u"&&me[Symbol.iterator]||me["@@iterator"];if(!ce){if(Array.isArray(me)||(ce=function(Ke,mt){if(Ke){if(typeof Ke=="string")return zr(Ke,mt);var At=Object.prototype.toString.call(Ke).slice(8,-1);if(At==="Object"&&Ke.constructor&&(At=Ke.constructor.name),At==="Map"||At==="Set")return Array.from(Ke);if(At==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(At))return zr(Ke,mt)}}(me))||pe&&me&&typeof me.length=="number"){ce&&(me=ce);var U=0,ee=function(){};return{s:ee,n:function(){return U>=me.length?{done:!0}:{done:!1,value:me[U++]}},e:function(Ke){throw Ke},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,Ce=!0,ze=!1;return{s:function(){ce=ce.call(me)},n:function(){var Ke=ce.next();return Ce=Ke.done,Ke},e:function(Ke){ze=!0,le=Ke},f:function(){try{Ce||ce.return==null||ce.return()}finally{if(ze)throw le}}}}function zr(me,pe){(pe==null||pe>me.length)&&(pe=me.length);for(var ce=0,U=new Array(pe);ce<pe;ce++)U[ce]=me[ce];return U}function ai(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var $i=function(me){(0,l.Z)(ce,me);var pe=ai(ce);function ce(){var U;return(0,o.Z)(this,ce),(U=pe.call(this))._style=we(r(2488)),U.name="resources",U._hideErudaSetting=!1,U._observeElement=!0,U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._initTpl(),this._localStorage=new nr(this._$localStorage,ee,this,"local"),this._sessionStorage=new nr(this._$sessionStorage,ee,this,"session"),this._cookie=new ii(this._$cookie,ee),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),we.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var U=[];x()("script").each(function(){var Ke=this.src;Ke!==""&&U.push(Ke)});var ee=ri("script",(U=pr()(U)).length),le="<li>Empty</li>";Lr()(U)||(le=qe()(U,function(Ke){return Ke=yr()(Ke),'<li><a href="'.concat(Ke,'" target="_blank" class="').concat(_e("js-link"),'">').concat(Ke,"</a></li>")}).join(""));var Ce='<h2 class="'.concat(_e("title"),`">
      Script
      <div class="`).concat(_e("btn refresh-script"),`">
        <span class="`).concat(_e("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(_e("link-list"),`">
      `).concat(le,`
    </ul>`),ze=this._$script;return Ur(ze,ee),ze.html(Ce),this}},{key:"refreshStylesheet",value:function(){var U=[];x()("link").each(function(){this.rel==="stylesheet"&&U.push(this.href)});var ee=ri("stylesheet",(U=pr()(U)).length),le="<li>Empty</li>";Lr()(U)||(le=qe()(U,function(Ke){return Ke=yr()(Ke),' <li><a href="'.concat(Ke,'" target="_blank" class="').concat(_e("css-link"),'">').concat(Ke,"</a></li>")}).join(""));var Ce='<h2 class="'.concat(_e("title"),`">
      Stylesheet
      <div class="`).concat(_e("btn refresh-stylesheet"),`">
        <span class="`).concat(_e("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(_e("link-list"),`">
      `).concat(le,`
    </ul>`),ze=this._$stylesheet;return Ur(ze,ee),ze.html(Ce),this}},{key:"refreshIframe",value:function(){var U=[];x()("iframe").each(function(){var Ce=x()(this).attr("src");Ce&&U.push(Ce)}),U=pr()(U);var ee="<li>Empty</li>";Lr()(U)||(ee=qe()(U,function(Ce){return Ce=yr()(Ce),'<li><a href="'.concat(Ce,'" target="_blank" class="').concat(_e("iframe-link"),'">').concat(Ce,"</a></li>")}).join(""));var le='<h2 class="'.concat(_e("title"),`">
      Iframe
      <div class="`).concat(_e("btn refresh-iframe"),`">
        <span class="`).concat(_e("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(_e("link-list"),`">
      `).concat(ee,`
    </ul>`);return this._$iframe.html(le),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var U=[],ee=this._performance=window.webkitPerformance||window.performance;ee&&ee.getEntries?this._performance.getEntries().forEach(function(mt){if(mt.initiatorType==="img"||un(mt.name)){if(W()(mt.name,"exclude=true"))return;U.push(mt.name)}}):x()("img").each(function(){var mt=x()(this),At=mt.attr("src");mt.data("exclude")!=="true"&&U.push(At)}),(U=pr()(U)).sort();var le=ri("image",U.length),Ce="<li>Empty</li>";Lr()(U)||(Ce=qe()(U,function(mt){return'<li class="'.concat(_e("image"),`">
          <img src="`).concat(yr()(mt),'" data-exclude="true" class="').concat(_e("img-link"),`"/>
        </li>`)}).join(""));var ze='<h2 class="'.concat(_e("title"),`">
      Image
      <div class="`).concat(_e("btn refresh-image"),`">
        <span class="`).concat(_e("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(_e("image-list"),`">
      `).concat(Ce,`
    </ul>`),Ke=this._$image;return Ur(Ke,le),Ke.html(ze),this}},{key:"show",value:function(){return(0,w.Z)((0,d.Z)(ce.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),(0,w.Z)((0,d.Z)(ce.prototype),"hide",this).call(this)}},{key:"_initTpl",value:function(){var U=this._$el;U.html(_e(`<div class="section local-storage"></div>
      <div class="section session-storage"></div>
      <div class="section cookie"></div>
      <div class="section script"></div>
      <div class="section stylesheet"></div>
      <div class="section iframe"></div>
      <div class="section image"></div>`)),this._$localStorage=U.find(_e(".local-storage")),this._$sessionStorage=U.find(_e(".session-storage")),this._$cookie=U.find(_e(".cookie")),this._$script=U.find(_e(".script")),this._$stylesheet=U.find(_e(".stylesheet")),this._$iframe=U.find(_e(".iframe")),this._$image=U.find(_e(".image"))}},{key:"_bindEvent",value:function(){var U=this,ee=this._$el,le=this._container;function Ce(Ke,mt){var At=le.get("sources");if(At)return At.set(Ke,mt),le.showTool("sources"),!0}function ze(Ke){return function(mt){if(le.get("sources")){mt.preventDefault();var At=x()(this).attr("href");Ke!=="iframe"&&Be()(location.href,At)?Qe()({url:At,success:function(er){Ce(Ke,er)},dataType:"raw"}):Ce("iframe",At)}}}ee.on("click",".eruda-refresh-script",function(){le.notify("Refreshed"),U.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){le.notify("Refreshed"),U.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){le.notify("Refreshed"),U.refreshIframe()}).on("click",".eruda-refresh-image",function(){le.notify("Refreshed"),U.refreshImage()}).on("click",".eruda-img-link",function(){Ce("img",x()(this).attr("src"))}).on("click",".eruda-css-link",ze("css")).on("click",".eruda-js-link",ze("js")).on("click",".eruda-iframe-link",ze("iframe"))}},{key:"_rmCfg",value:function(){var U=this.config,ee=this._container.get("settings");ee&&ee.remove(U,"hideErudaSetting").remove(U,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var U=this,ee=this.config=Pe.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});ee.get("hideErudaSetting")&&(this._hideErudaSetting=!0),ee.get("observeElement")||(this._observeElement=!1),ee.on("change",function(le,Ce){switch(le){case"hideErudaSetting":return void(U._hideErudaSetting=Ce);case"observeElement":return U._observeElement=Ce,Ce?U._enableObserver():U._disableObserver()}}),this._container.get("settings").text("Resources").switch(ee,"hideErudaSetting","Hide Eruda Setting").switch(ee,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var U=this;this._observer=new(ki())(function(ee){I()(ee,function(le){U._handleMutation(le)})})}},{key:"_handleMutation",value:function(U){var ee=this;if(!rt(U.target)){var le=function(mt){var At=function(er){return er.tagName?er.tagName.toLowerCase():""}(mt);switch(At){case"script":ee.refreshScript();break;case"img":ee.refreshImage();break;case"link":ee.refreshStylesheet()}};if(U.type==="attributes")le(U.target);else if(U.type==="childList"){le(U.target);var Ce,ze=wt()(U.addedNodes),Ke=Sr(ze=ur()(ze,wt()(U.removedNodes)));try{for(Ke.s();!(Ce=Ke.n()).done;)le(Ce.value)}catch(mt){Ke.e(mt)}finally{Ke.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),ce}(b),Hi=/\.(jpeg|jpg|gif|png)$/,un=function(me){return Hi.test(me)},dn=r(4541),fn=r.n(dn),pn=fn()(),xn=[{name:"Location",val:function(){return yr()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(Dt()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(pn.name+" "+pn.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.0.1</a>'},{name:"Backers",val:function(){return'<a rel="noreferrer noopener" href="https://opencollective.com/eruda" target="_blank"><img data-exclude="true" style="width: 100%;"src="https://opencollective.com/eruda/backers.svg?width='.concat(1.5*window.innerWidth,'&exclude=true"></a>')}}],wn=r(550),Cn=r.n(wn);function Sn(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var En=function(me){(0,l.Z)(ce,me);var pe=Sn(ce);function ce(){var U;return(0,o.Z)(this,ce),(U=pe.call(this))._style=we(r(879)),U.name="info",U._infos=[],U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),we.remove(this._style)}},{key:"add",value:function(U,ee){var le=this._infos,Ce=!1;return I()(le,function(ze){U===ze.name&&(ze.val=ee,Ce=!0)}),Ce||le.push({name:U,val:ee}),this._render(),this}},{key:"get",value:function(U){var ee,le=this._infos;return lt()(U)?Cn()(le):(I()(le,function(Ce){U===Ce.name&&(ee=Ce.val)}),ee)}},{key:"remove",value:function(U){for(var ee=this._infos,le=ee.length-1;le>=0;le--)ee[le].name===U&&ee.splice(le,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var U=this;I()(xn,function(ee){return U.add(ee.name,ee.val)})}},{key:"_render",value:function(){var U=[];I()(this._infos,function(le){var Ce=le.name,ze=le.val;We()(ze)&&(ze=ze()),U.push({name:Ce,val:ze})});var ee="<ul>".concat(qe()(U,function(le){return'<li><h2 class="'.concat(_e("title"),'">').concat(yr()(le.name),'<span class="').concat(_e("icon-copy copy"),'"></span></h2><div class="').concat(_e("content"),'">').concat(le.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(ee)}},{key:"_bindEvent",value:function(){var U=this._container;this._$el.on("click",_e(".copy"),function(){var ee=x()(this).parent().parent(),le=ee.find(_e(".title")).text(),Ce=ee.find(_e(".content")).text();Tr()("".concat(le,": ").concat(Ce)),U.notify("Copied")})}},{key:"_renderHtml",value:function(U){U!==this._lastHtml&&(this._lastHtml=U,this._$el.html(U))}}]),ce}(b),An=r(8299),On=r(8368),Tn=r.n(On),Dn=r(3651),kn=r.n(Dn),gn=r(7049);function Rn(me){var pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ce,U=(0,d.Z)(me);if(pe){var ee=(0,d.Z)(this).constructor;ce=Reflect.construct(U,arguments,ee)}else ce=U.apply(this,arguments);return(0,h.Z)(this,ce)}}var Mn=function(me){(0,l.Z)(ce,me);var pe=Rn(ce);function ce(){var U;return(0,o.Z)(this,ce),(U=pe.call(this))._style=we(r(1344)),U.name="sources",U._showLineNum=!0,U}return(0,a.Z)(ce,[{key:"init",value:function(U,ee){(0,w.Z)((0,d.Z)(ce.prototype),"init",this).call(this,U),this._container=ee,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(ce.prototype),"destroy",this).call(this),we.remove(this._style),this._rmCfg()}},{key:"set",value:function(U,ee){if(U==="img"){this._isFetchingData=!0;var le=new Image,Ce=this;return le.onload=function(){Ce._isFetchingData=!1,Ce._data={type:"img",val:{width:this.width,height:this.height,src:ee}},Ce._render()},le.onerror=function(){Ce._isFetchingData=!1},void(le.src=ee)}return this._data={type:U,val:ee},this._render(),this}},{key:"show",value:function(){return(0,w.Z)((0,d.Z)(ce.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var U=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,Qe()({url:location.href,success:function(ee){return U._html=ee},error:function(){return U._html="Sorry, unable to fetch source code:("},complete:function(){U._isGettingHtml=!1,U._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var U=this;this._container.on("showTool",function(ee,le){ee!==U.name&&le.name===U.name&&delete U._data})}},{key:"_rmCfg",value:function(){var U=this.config,ee=this._container.get("settings");ee&&ee.remove(U,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var U=this,ee=this.config=Pe.createCfg("sources",{showLineNum:!0});ee.get("showLineNum")||(this._showLineNum=!1),ee.on("change",function(le,Ce){le!=="showLineNum"||(U._showLineNum=Ce)}),this._container.get("settings").text("Sources").switch(ee,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var U=this._data.val,ee=U.width,le=U.height,Ce=U.src;this._renderHtml('<div class="'.concat(_e("image"),`">
      <div class="`).concat(_e("breadcrumb"),'">').concat(yr()(Ce),`</div>
      <div class="`).concat(_e("img-container"),`" data-exclude="true">
        <img src="`).concat(yr()(Ce),`">
      </div>
      <div class="`).concat(_e("img-info"),'">').concat(yr()(ee)," × ").concat(yr()(le),`</div>
    </div>`))}},{key:"_renderCode",value:function(){var U=this._data;this._renderHtml('<div class="'.concat(_e("code"),'" data-type="').concat(U.type,'"></div>'),!1);var ee=U.val,le=U.val.length;le>sn&&(ee=ni()(ee,sn)),le<Ln?(ee=kn()(ee,U.type,{comment:"",string:"",number:"",keyword:"",operator:""}),I()(["comment","string","number","keyword","operator"],function(ze){ee=Tn()(ee,'class="'.concat(ze,'"'),'class="'.concat(_e(ze),'"'))})):ee=yr()(ee);var Ce=this._$el.find(_e(".code")).get(0);new gn.Z(Ce,{text:ee,escape:!1,wrapLongLines:!0,showLineNumbers:U.val.length<mn&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(_e("json"),'"></ul>'),!1);var U=this._data.val;try{H()(U)&&(U=JSON.parse(U))}catch{}new An.Z(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(U)}},{key:"_renderRaw",value:function(){var U=this._data;this._renderHtml('<div class="'.concat(_e("raw-wrapper"),`">
      <div class="`).concat(_e("raw"),`"></div>
    </div>`));var ee=U.val,le=this._$el.find(_e(".raw")).get(0);ee.length>sn&&(ee=ni()(ee,sn)),new gn.Z(le,{text:ee,wrapLongLines:!0,showLineNumbers:ee.length<mn&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(yr()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(U){var ee=this;(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&U===this._lastHtml||(this._lastHtml=U,this._$el.html(U),setTimeout(function(){return ee._$el.get(0).scrollTop=0},0))}}]),ce}(b),Ln=3e4,mn=8e4,sn=1e5,Pn=r(5166),In=r.n(Pn),Bn=r(3514),Nn=r.n(Bn),Fn={init:function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=me.container,ce=me.tool,U=me.autoScale,ee=U===void 0||U,le=me.useShadowDom,Ce=le===void 0||le,ze=me.defaults,Ke=ze===void 0?{}:ze;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(pe,Ce),this._initStyle(),this._initDevTools(Ke),this._initEntryBtn(),this._initSettings(),this._initTools(ce),this._registerListener(),ee&&this._autoScale())},_isInit:!1,version:"3.0.1",util:n,chobitsu:oe,Tool:b,Console:Mi,Elements:Qi,Network:Hr,Sources:Mn,Resources:$i,Info:En,Snippets:ve,Settings:Pe,get:function(me){if(this._checkInit()){if(me==="entryBtn")return this._entryBtn;var pe=this._devTools;return me?pe.get(me):pe}},add:function(me){if(this._checkInit())return We()(me)&&(me=me(this)),this._devTools.add(me),this},remove:function(me){return this._devTools.remove(me),this},show:function(me){if(this._checkInit()){var pe=this._devTools;return me?pe.showTool(me):pe.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),x()(this._container).remove(),we.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(me){return Ar()(me)?(this._scale=me,A.emit(A.SCALE,me),this):this._scale},position:function(me){var pe=this._entryBtn;return In()(me)?(pe.setPos(me),this):pe.getPos()},_autoScale:function(){Wr()()&&this.scale(1/Nn()())},_registerListener:function(){var me=this;this._addListener=function(){return me.add.apply(me,arguments)},this._showListener=function(){return me.show.apply(me,arguments)},A.on(A.ADD,this._addListener),A.on(A.SHOW,this._showListener),A.on(A.SCALE,we.setScale)},_unregisterListener:function(){A.off(A.ADD,this._addListener),A.off(A.SHOW,this._showListener),A.off(A.SCALE,we.setScale)},_checkInit:function(){return this._isInit||$t.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(me,pe){var ce,U;me||(me=document.createElement("div"),document.documentElement.appendChild(me)),me.id="eruda",me.style.all="initial",this._container=me,pe&&(me.attachShadow?ce=me.attachShadow({mode:"open"}):me.createShadowRoot&&(ce=me.createShadowRoot()),ce&&(we.container=document.head,we(r(5357)+r(9327)+r(4821)+r(8903)+r(5777)),U=document.createElement("div"),ce.appendChild(U),this._shadowRoot=ce)),this._shadowRoot||(U=document.createElement("div"),me.appendChild(U)),J()(U,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),fn()().name==="ios"&&U.setAttribute("ontouchstart",""),this._$el=x()(U)},_initDevTools:function(me){this._devTools=new li(this._$el,{defaults:me})},_initStyle:function(){var me="eruda-style-container",pe=this._$el;this._shadowRoot?(we.container=this._shadowRoot,we(":host { all: initial }")):(pe.append('<div class="'.concat(me,'"></div>')),we.container=pe.find(".".concat(me)).get(0)),we(r(8020)+r(4821)+r(9327)+r(7591)+r(4987)+r(8903)+r(5512)+r(2156)+r(5777)+r(7871)+r(6833)+r(8516)+r(5357))},_initEntryBtn:function(){var me=this;this._entryBtn=new Ge(this._$el),this._entryBtn.on("click",function(){return me._devTools.toggle()})},_initSettings:function(){var me=this._devTools,pe=new Pe;me.add(pe),this._entryBtn.initCfg(pe),me.initCfg(pe)},_initTools:function(){var me=this,pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];pe=wt()(pe);var ce=this._devTools;pe.forEach(function(U){var ee=me[bi()(U)];try{ee&&ce.add(new ee)}catch(le){Ye()(function(){$t.error("Something wrong when initializing tool ".concat(U,":"),le.message)})}}),ce.showTool(pe[0]||"settings")}}},2027:function(s,e,r){var n=r(6672).Z;s.exports=n,s.exports.default=n},6610:function(s,e,r){r.r(e),e.default={}},9143:function(s,e,r){var n=this&&this.__awaiter||function(E,A,w,m){return new(w||(w=Promise))(function(b,y){function x(M){try{R(m.next(M))}catch(L){y(L)}}function D(M){try{R(m.throw(M))}catch(L){y(L)}}function R(M){var L;M.done?b(M.value):(L=M.value,L instanceof w?L:new w(function(k){k(L)})).then(x,D)}R((m=m.apply(E,A||[])).next())})},o=this&&this.__generator||function(E,A){var w,m,b,y,x={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return y={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function D(R){return function(M){return function(L){if(w)throw new TypeError("Generator is already executing.");for(;x;)try{if(w=1,m&&(b=2&L[0]?m.return:L[0]?m.throw||((b=m.return)&&b.call(m),0):m.next)&&!(b=b.call(m,L[1])).done)return b;switch(m=0,b&&(L=[2&L[0],b.value]),L[0]){case 0:case 1:b=L;break;case 4:return x.label++,{value:L[1],done:!1};case 5:x.label++,m=L[1],L=[0];continue;case 7:L=x.ops.pop(),x.trys.pop();continue;default:if(b=x.trys,!((b=b.length>0&&b[b.length-1])||L[0]!==6&&L[0]!==2)){x=0;continue}if(L[0]===3&&(!b||L[1]>b[0]&&L[1]<b[3])){x.label=L[1];break}if(L[0]===6&&x.label<b[1]){x.label=b[1],b=L;break}if(b&&x.label<b[2]){x.label=b[2],x.ops.push(L);break}b[2]&&x.ops.pop(),x.trys.pop();continue}L=A.call(E,x)}catch(k){L=[6,k],m=0}finally{w=b=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([R,M])}}},a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(3276)),l=a(r(1214)),h=a(r(5936)),d=a(r(3783)),f=a(r(1443)),g=r(316),_=function(){function E(){var A=this;this.resolves=new Map,this.domains=new Map,this.onMessage=l.default,c.default.on("message",function(w){var m=JSON.parse(w),b=A.resolves.get(m.id);if(b&&b(m.result),!m.id){var y=m.method.split("."),x=y[0],D=y[1],R=A.domains.get(x);R&&R.emit(D,m.params)}A.onMessage(w)})}return E.prototype.domain=function(A){return this.domains.get(A)},E.prototype.setOnMessage=function(A){this.onMessage=A},E.prototype.sendMessage=function(A,w){var m=this;w===void 0&&(w={});var b=h.default();return this.sendRawMessage(JSON.stringify({id:b,method:A,params:w})),new Promise(function(y){m.resolves.set(b,y)})},E.prototype.sendRawMessage=function(A){return n(this,void 0,void 0,function(){var w,m,b,y,x,D,R;return o(this,function(M){switch(M.label){case 0:w=JSON.parse(A),m=w.method,b=w.params,y=w.id,x={id:y},M.label=1;case 1:return M.trys.push([1,3,,4]),D=x,[4,this.callMethod(m,b)];case 2:return D.result=M.sent(),[3,4];case 3:return(R=M.sent())instanceof g.ErrorWithCode?x.error={message:R.message,code:R.code}:R instanceof Error&&(x.error={message:R.message}),[3,4];case 4:return c.default.emit("message",JSON.stringify(x)),[2]}})})},E.prototype.register=function(A,w){var m=this.domains,b=m.get(A);b||(b={},f.default.mixin(b)),d.default(w,function(y,x){b[x]=y}),m.set(A,b)},E.prototype.callMethod=function(A,w){return n(this,void 0,void 0,function(){var m,b,y,x;return o(this,function(D){if(m=A.split("."),b=m[0],y=m[1],(x=this.domain(b))&&x[y])return[2,x[y](w)||{}];throw Error(A+" unimplemented")})})},E}();e.default=_},7935:function(s,e,r){var n=this&&this.__createBinding||(Object.create?function(z,W,Q,X){X===void 0&&(X=Q),Object.defineProperty(z,X,{enumerable:!0,get:function(){return W[Q]}})}:function(z,W,Q,X){X===void 0&&(X=Q),z[X]=W[Q]}),o=this&&this.__setModuleDefault||(Object.create?function(z,W){Object.defineProperty(z,"default",{enumerable:!0,value:W})}:function(z,W){z.default=W}),a=this&&this.__importStar||function(z){if(z&&z.__esModule)return z;var W={};if(z!=null)for(var Q in z)Q!=="default"&&Object.hasOwnProperty.call(z,Q)&&n(W,z,Q);return o(W,z),W},c=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(e,"__esModule",{value:!0}),e.getDOMNode=e.getDOMNodeId=e.setOuterHTML=e.setNodeValue=e.setInspectedNode=e.setAttributeValue=e.setAttributesAsText=e.resolveNode=e.requestNode=e.requestChildNodes=e.removeNode=e.pushNodesByBackendIdsToFrontend=e.discardSearchResults=e.pushNodesToFrontend=e.getSearchResults=e.performSearch=e.moveTo=e.getOuterHTML=e.getDocument=e.enable=e.copyTo=e.collectClassNamesFromSubtree=void 0;var l=c(r(3276)),h=a(r(2049)),d=r(2049),f=a(r(7923)),g=c(r(6126)),_=c(r(1512)),E=c(r(6156)),A=c(r(8887)),w=c(r(7483)),m=c(r(2461)),b=c(r(42)),y=c(r(6341)),x=c(r(3063)),D=c(r(3783)),R=c(r(1352)),M=c(r(8933)),L=c(r(8099)),k=r(1628),I=r(316);e.collectClassNamesFromSubtree=function(z){var W=d.getNode(z.nodeId),Q=[];return H(W,function(X){if(X.nodeType===1){var G=X.getAttribute("class");if(G)for(var q=0,Y=G.split(/\s+/);q<Y.length;q++){var K=Y[q];Q.push(K)}}}),{classNames:b.default(Q)}},e.copyTo=function(z){var W=z.nodeId,Q=z.targetNodeId,X=d.getNode(W),G=d.getNode(Q),q=X.cloneNode(!0);G.appendChild(q)},e.enable=function(){g.default.observe(),h.clear()},e.getDocument=function(){return{root:h.wrap(document,{depth:2})}},e.getOuterHTML=function(z){return{outerHTML:d.getNode(z.nodeId).outerHTML}},e.moveTo=function(z){var W=z.nodeId,Q=z.targetNodeId,X=d.getNode(W);d.getNode(Q).appendChild(X)};var V=new Map;function N(z){for(var W=[z],Q=z.parentNode;Q&&(W.push(Q),!(G=d.getNodeId(Q)));)Q=Q.parentNode;for(;W.length;){var X=W.pop(),G=d.getNodeId(X);l.default.trigger("DOM.setChildNodes",{parentId:G,nodes:h.getChildNodes(X,1)})}return d.getNodeId(z)}e.performSearch=function(z){var W=x.default(z.query),Q=[];try{Q=L.default(Q,R.default(document.querySelectorAll(W)))}catch{}try{Q=L.default(Q,M.default(W))}catch{}H(document,function(G){var q=G.nodeType;if(q===1){var Y=G.localName;if(y.default("<"+Y+" ",W)||y.default("</"+Y+">",W))return void Q.push(G);var K=[];D.default(G.attributes,function(be){var xe=be.name,Ee=be.value;return K.push(xe,Ee)});for(var se=0,Se=K.length;se<Se;se++)if(y.default(x.default(K[se]),W)){Q.push(G);break}}else q===3&&y.default(x.default(G.nodeValue),W)&&Q.push(G)});var X=I.createId();return V.set(X,Q),{searchId:X,resultCount:Q.length}},e.getSearchResults=function(z){var W=z.searchId,Q=z.fromIndex,X=z.toIndex,G=V.get(W).slice(Q,X);return{nodeIds:m.default(G,function(q){var Y=d.getNodeId(q);return Y||N(q)})}},e.pushNodesToFrontend=N,e.discardSearchResults=function(z){V.delete(z.searchId)},e.pushNodesByBackendIdsToFrontend=function(z){return{nodeIds:z.backendNodeIds}},e.removeNode=function(z){var W=d.getNode(z.nodeId);_.default(W).remove()},e.requestChildNodes=function(z){var W=z.nodeId,Q=z.depth,X=Q===void 0?1:Q,G=d.getNode(W);l.default.trigger("DOM.setChildNodes",{parentId:W,nodes:h.getChildNodes(G,X)})},e.requestNode=function(z){var W=f.getObj(z.objectId);return{nodeId:d.getNodeId(W)}},e.resolveNode=function(z){var W=d.getNode(z.nodeId);return{object:f.wrap(W)}},e.setAttributesAsText=function(z){var W,Q=z.name,X=z.text,G=z.nodeId,q=d.getNode(G);Q&&q.removeAttribute(Q),_.default(q).attr((W="<div "+(W=X)+"></div>",w.default.parse(W)[0].attrs))},e.setAttributeValue=function(z){var W=z.nodeId,Q=z.name,X=z.value;d.getNode(W).setAttribute(Q,X)};var B=[];function H(z,W){for(var Q=h.filterNodes(z.childNodes),X=0,G=Q.length;X<G;X++){var q=Q[X];W(q),H(q,W)}}e.setInspectedNode=function(z){var W=d.getNode(z.nodeId);B.unshift(W),B.length>5&&B.pop();for(var Q=0;Q<5;Q++)k.setGlobal("$"+Q,B[Q])},e.setNodeValue=function(z){var W=z.nodeId,Q=z.value;d.getNode(W).nodeValue=Q},e.setOuterHTML=function(z){var W=z.nodeId,Q=z.outerHTML;d.getNode(W).outerHTML=Q},e.getDOMNodeId=function(z){var W=z.node;return{nodeId:h.getOrCreateNodeId(W)}},e.getDOMNode=function(z){var W=z.nodeId;return{node:d.getNode(W)}},g.default.on("attributes",function(z,W){var Q=d.getNodeId(z);if(Q){var X=z.getAttribute(W);E.default(X)?l.default.trigger("DOM.attributeRemoved",{nodeId:Q,name:W}):l.default.trigger("DOM.attributeModified",{nodeId:Q,name:W,value:X})}}),g.default.on("childList",function(z,W,Q){var X=d.getNodeId(z);if(X){if(W=h.filterNodes(W),Q=h.filterNodes(Q),!A.default(W)){be();for(var G=0,q=W.length;G<q;G++){var Y=W[G],K=h.getPreviousNode(Y),se=K?d.getNodeId(K):0,Se={node:h.wrap(Y,{depth:0}),parentNodeId:X,previousNodeId:se};l.default.trigger("DOM.childNodeInserted",Se)}}if(!A.default(Q))for(G=0,q=Q.length;G<q;G++){if(Y=Q[G],!d.getNodeId(Y)){be();break}l.default.trigger("DOM.childNodeRemoved",{nodeId:d.getNodeId(Y),parentNodeId:X})}}function be(){l.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:h.wrap(z,{depth:0}).childNodeCount,nodeId:X})}}),g.default.on("characterData",function(z){var W=d.getNodeId(z);W&&l.default.trigger("DOM.characterDataModified",{characterData:z.nodeValue,nodeId:W})})},2139:function(s,e,r){var n=this&&this.__spreadArrays||function(){for(var w=0,m=0,b=arguments.length;m<b;m++)w+=arguments[m].length;var y=Array(w),x=0;for(m=0;m<b;m++)for(var D=arguments[m],R=0,M=D.length;R<M;R++,x++)y[x]=D[R];return y},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.getResponseBody=e.enable=e.getCookies=e.deleteCookies=void 0;var a=o(r(4331)),c=o(r(3783)),l=o(r(1420)),h=o(r(5031)),d=o(r(8763)),f=o(r(8740)),g=o(r(6341)),_=r(2636),E=o(r(3276));e.deleteCookies=function(w){h.default(w.name)},e.getCookies=function(){var w=[],m=document.cookie;return a.default(m)!==""&&c.default(m.split(";"),function(b){b=b.split("=");var y=a.default(b.shift());b=l.default(b.join("=")),w.push({name:y,value:b})}),{cookies:w}};var A=new Map;e.enable=d.default(function(){var w=window.XMLHttpRequest.prototype,m=w.send,b=w.open,y=w.setRequestHeader;w.open=function(R,M){if(!function(I){return!g.default(I,"__chobitsu-hide__=true")}(M))return b.apply(this,arguments);var L=this,k=L.chobitsuRequest=new _.XhrRequest(L,R,M);k.on("send",function(I,V){var N={method:V.method,url:V.url,headers:V.reqHeaders};V.data&&(N.postData=V.data),E.default.trigger("Network.requestWillBeSent",{requestId:I,type:"XHR",request:N,timestamp:V.time/1e3})}),k.on("headersReceived",function(I,V){E.default.trigger("Network.responseReceivedExtraInfo",{requestId:I,blockedCookies:[],headers:V.resHeaders})}),k.on("done",function(I,V){E.default.trigger("Network.responseReceived",{requestId:I,type:"XHR",response:{status:V.status},timestamp:V.time/1e3}),A.set(I,V.resTxt),E.default.trigger("Network.loadingFinished",{requestId:I,encodedDataLength:V.size,timestamp:V.time/1e3})}),L.addEventListener("readystatechange",function(){switch(L.readyState){case 2:return k.handleHeadersReceived();case 4:return k.handleDone()}}),b.apply(this,arguments)},w.send=function(R){var M=this.chobitsuRequest;M&&M.handleSend(R),m.apply(this,arguments)},w.setRequestHeader=function(R,M){var L=this.chobitsuRequest;L&&L.handleReqHeadersSet(R,M),y.apply(this,arguments)};var x=!1;if(window.fetch&&(x=f.default(window.fetch)),!x&&navigator.serviceWorker&&(x=!0),x){var D=window.fetch;window.fetch=function(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];var L=new(_.FetchRequest.bind.apply(_.FetchRequest,n([void 0],R)));L.on("send",function(I,V){var N={method:V.method,url:V.url,headers:V.reqHeaders};V.data&&(N.postData=V.data),E.default.trigger("Network.requestWillBeSent",{requestId:I,type:"Fetch",request:N,timestamp:V.time/1e3})}),L.on("done",function(I,V){E.default.trigger("Network.responseReceived",{requestId:I,type:"Fetch",response:{status:V.status,headers:V.resHeaders},timestamp:V.time/1e3}),A.set(I,V.resTxt),E.default.trigger("Network.loadingFinished",{requestId:I,encodedDataLength:V.size,timestamp:V.time/1e3})});var k=D.apply(void 0,R);return L.send(k),k}}}),e.getResponseBody=function(w){return{base64Encoded:!1,body:A.get(w.requestId)}}},8689:function(s,e,r){var n=this&&this.__createBinding||(Object.create?function(xe,Ee,J,ne){ne===void 0&&(ne=J),Object.defineProperty(xe,ne,{enumerable:!0,get:function(){return Ee[J]}})}:function(xe,Ee,J,ne){ne===void 0&&(ne=J),xe[ne]=Ee[J]}),o=this&&this.__setModuleDefault||(Object.create?function(xe,Ee){Object.defineProperty(xe,"default",{enumerable:!0,value:Ee})}:function(xe,Ee){xe.default=Ee}),a=this&&this.__importStar||function(xe){if(xe&&xe.__esModule)return xe;var Ee={};if(xe!=null)for(var J in xe)J!=="default"&&Object.hasOwnProperty.call(xe,J)&&n(Ee,xe,J);return o(Ee,xe),Ee},c=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(e,"__esModule",{value:!0}),e.setInspectMode=e.setShowViewportSizeOnResize=e.hideHighlight=e.highlightNode=e.disable=e.enable=void 0;var l,h,d=r(2049),f=r(7935),g=c(r(1512)),_=c(r(8613)),E=c(r(642)),A=c(r(4193)),w=c(r(6329)),m=c(r(3276)),b=c(r(5610)),y=c(r(3474)),x=c(r(4210)),D=c(r(7715)),R=a(r(7923)),M=!1,L=!1,k=x.default("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),I="ontouchstart"in b.default,V=r(2777).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function N(xe){var Ee,J=xe.nodeId,ne=xe.highlightConfig,de=xe.objectId;J&&(Ee=d.getNode(J)),de&&(Ee=R.getObj(de)),Ee.nodeType!==1&&Ee.nodeType!==3||(A.default(ne,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),k||w.default(ne,{showInfo:!1}),l.highlight(Ee,ne))}function B(){l.hide()}e.enable=function(){if(!L){var xe=_.default("div",{class:"__chobitsu-hide__",style:{all:"initial"}});h=g.default(xe),document.documentElement.appendChild(xe);var Ee=null,J=null;if(xe.attachShadow?J=xe.attachShadow({mode:"open"}):xe.createShadowRoot&&(J=xe.createShadowRoot()),J){var ne=document.createElement("style");ne.textContent=V,ne.type="text/css",J.appendChild(ne),Ee=document.createElement("div"),J.appendChild(Ee)}else Ee=document.createElement("div"),xe.appendChild(Ee),M||(E.default(V),M=!0);l=new D.default(Ee,{monitorResize:y.default(b.default.ResizeObserver),showInfo:k}),window.addEventListener("resize",se),L=!0}},e.disable=function(){l.destroy(),h.remove(),window.removeEventListener("resize",se),L=!1},e.highlightNode=N,e.hideHighlight=B;var H=!1;e.setShowViewportSizeOnResize=function(xe){H=xe.show};var z={},W="none";function Q(xe){if(I){var Ee=xe.touches[0]||xe.changedTouches[0];return document.elementFromPoint(Ee.clientX,Ee.clientY)}return document.elementFromPoint(xe.clientX,xe.clientY)}e.setInspectMode=function(xe){z=xe.highlightConfig,W=xe.mode};var X=-1;function G(xe){if(W!=="none"){var Ee=Q(xe);if(Ee&&d.isValidNode(Ee)){var J=d.getNodeId(Ee);J||(J=f.pushNodesToFrontend(Ee)),N({nodeId:J,highlightConfig:z}),J!==X&&(m.default.trigger("Overlay.nodeHighlightRequested",{nodeId:J}),X=J)}}}function q(xe){if(W!=="none"){xe.preventDefault(),xe.stopImmediatePropagation();var Ee=Q(xe);m.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:d.getNodeId(Ee)}),X=-1,B()}}function Y(xe,Ee){document.documentElement.addEventListener(xe,Ee,!0)}I?(Y("touchstart",G),Y("touchmove",G),Y("touchend",q)):(Y("mousemove",G),Y("mouseout",function(){W!=="none"&&B()}),Y("click",q));var K=_.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function se(){H&&(be.text(window.innerWidth+"px × "+window.innerHeight+"px"),Se?clearTimeout(Se):document.documentElement.appendChild(K),Se=setTimeout(function(){be.remove(),Se=null},1e3))}var Se,be=g.default(K)},9119:function(s,e,r){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.getTrustTokens=e.clearDataForOrigin=e.getUsageAndQuota=void 0;var o=n(r(3783)),a=n(r(5031)),c=n(r(615)),l=r(2139),h=c.default("local"),d=c.default("session");e.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},e.clearDataForOrigin=function(f){var g=f.storageTypes.split(",");o.default(g,function(_){if(_==="cookies"){var E=l.getCookies().cookies;o.default(E,function(A){var w=A.name;return a.default(w)})}else _==="local_storage"&&(h.clear(),d.clear())})},e.getTrustTokens=function(){return{tokens:[]}}},3276:function(s,e,r){var n,o=this&&this.__extends||(n=function(l,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var g in f)f.hasOwnProperty(g)&&(d[g]=f[g])},n(l,h)},function(l,h){function d(){this.constructor=l}n(l,h),l.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var c=function(l){function h(){return l!==null&&l.apply(this,arguments)||this}return o(h,l),h.prototype.trigger=function(d,f){this.emit("message",JSON.stringify({method:d,params:f}))},h}(a(r(1443)).default);e.default=new c},1628:function(s,e,r){var n=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=void 0;var o=n(r(6768)),a=n(r(2327)),c=n(r(1352)),l=n(r(2533)),h=n(r(8933)),d=n(r(3783)),f={copy:function(g){o.default(g)||(g=JSON.stringify(g,null,2)),a.default(g)},$:function(g){return document.querySelector(g)},$$:function(g){return c.default(document.querySelectorAll(g))},$x:function(g){return h.default(g)},keys:l.default};e.setGlobal=function(g,_){f[g]=_},e.default=function(g){var _;d.default(f,function(E,A){window[A]||(window[A]=E)});try{_=eval.call(window,"("+g+")")}catch{_=eval.call(window,g)}return d.default(f,function(E,A){window[A]&&window[A]===E&&delete window[A]}),_}},6126:function(s,e,r){var n,o=this&&this.__extends||(n=function(d,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var E in _)_.hasOwnProperty(E)&&(g[E]=_[E])},n(d,f)},function(d,f){function g(){this.constructor=d}n(d,f),d.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}),a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(3783)),h=function(d){function f(){var g=d.call(this)||this;return g.observer=new MutationObserver(function(_){l.default(_,function(E){return g.handleMutation(E)})}),g}return o(f,d),f.prototype.observe=function(){var g=this.observer;g.disconnect(),g.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},f.prototype.handleMutation=function(g){g.type==="attributes"?this.emit("attributes",g.target,g.attributeName):g.type==="childList"?this.emit("childList",g.target,g.addedNodes,g.removedNodes):g.type==="characterData"&&this.emit("characterData",g.target)},f}(c.default);e.default=new h},2049:function(s,e,r){var n=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=e.isValidNode=e.filterNodes=e.getPreviousNode=e.getChildNodes=e.wrap=e.getNodeId=e.clear=e.getOrCreateNodeId=void 0;var o=n(r(2461)),a=n(r(5972)),c=n(r(3783)),l=n(r(4331)),h=n(r(6341)),d=n(r(6329)),f=r(316),g=new Map,_=new Map,E=1;function A(x){var D=_.get(x);return D||(D=E++,_.set(x,D),g.set(D,x),D)}function w(x,D){var R=(D===void 0?{}:D).depth,M=R===void 0?1:R,L=A(x),k={nodeName:x.nodeName,nodeType:x.nodeType,localName:x.localName||"",nodeValue:x.nodeValue||"",nodeId:L,backendNodeId:L};if(x.parentNode&&(k.parentId=A(x.parentNode)),x.nodeType===10)return d.default(k,{publicId:"",systemId:""});if(x.attributes){var I=[];c.default(x.attributes,function(B){var H=B.name,z=B.value;return I.push(H,z)}),k.attributes=I}var V=b(x.childNodes);k.childNodeCount=V.length;var N=k.childNodeCount===1&&V[0].nodeType===3;return(M>0||N)&&(k.children=m(x,M)),k}function m(x,D){var R=b(x.childNodes);return o.default(R,function(M){return w(M,{depth:D-1})})}function b(x){return a.default(x,function(D){return y(D)})}function y(x){if(x.nodeType===1){var D=x.getAttribute("class")||"";if(h.default(D,"__chobitsu-hide__")||h.default(D,"html2canvas-container"))return!1}var R=!(x.nodeType===3&&l.default(x.nodeValue||"")==="");return R&&x.parentNode?y(x.parentNode):R}e.getOrCreateNodeId=A,e.clear=function(){g.clear(),_.clear()},e.getNodeId=function(x){return _.get(x)},e.wrap=w,e.getChildNodes=m,e.getPreviousNode=function(x){var D=x.previousSibling;if(D){for(;!y(D)&&D.previousSibling;)D=D.previousSibling;return D&&y(D)?D:void 0}},e.filterNodes=b,e.isValidNode=y,e.getNode=function(x){var D=g.get(x);if(!D||D.nodeType===10)throw f.createErr(-32e3,"Could not find node with given id");return D}},7923:function(s,e,r){var n=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(e,"__esModule",{value:!0}),e.getProperties=e.releaseObj=e.getObj=e.wrap=e.clear=void 0;var o=n(r(3367)),a=n(r(6156)),c=n(r(6472)),l=n(r(4777)),h=n(r(9833)),d=n(r(2749)),f=n(r(3708)),g=n(r(7470)),_=n(r(1754)),E=n(r(3085)),A=n(r(2533)),w=n(r(300)),m=n(r(1116)),b=n(r(8740)),y=n(r(415)),x=n(r(9804)),D=n(r(6257)),R=new Map,M=new Map,L=new Map,k=new Map,I=1;function V(Y,K){var se=M.get(Y);return se||(se=JSON.stringify({injectedScriptId:0,id:I++}),M.set(Y,se),R.set(se,Y),L.set(se,K),se)}function N(Y,K){var se=K===void 0?{}:K,Se=se.generatePreview,be=Se!==void 0&&Se,xe=se.self,Ee=xe===void 0?Y:xe,J=X(Y),ne=J.type,de=J.subtype;return ne==="undefined"?J:ne==="string"||ne==="boolean"||de==="null"?(J.value=Y,J):(J.description=Q(Y,Ee),ne==="number"?(J.value=Y,J):ne==="symbol"?(J.objectId=V(Y,Ee),J):(J.className=ne==="function"?"Function":de==="array"?"Array":de==="map"?"Map":de==="set"?"Set":de==="regexp"?"RegExp":de==="error"?Y.name:E.default(Y,!1),be&&(J.preview=z(Y,Ee)),J.objectId=V(Y,Ee),J))}function B(Y){return R.get(Y)}e.clear=function(){R.clear(),M.clear(),L.clear()},e.wrap=N,e.getObj=B,e.releaseObj=function(Y){var K=B(Y);M.delete(K),L.delete(Y),R.delete(Y)},e.getProperties=function(Y){for(var K=Y.accessorPropertiesOnly,se=Y.objectId,Se=Y.ownProperties,be=Y.generatePreview,xe=[],Ee={prototype:!Se,unenumerable:!0,symbol:!K},J=R.get(se),ne=L.get(se),de=m.default(J,Ee),ue=y.default(J),Fe=0,Ie=de.length;Fe<Ie;Fe++){var ye=de[Fe],$e=void 0;try{$e=ne[ye]}catch{}var Oe={name:o.default(ye),isOwn:D.default(ne,ye)},Le=Object.getOwnPropertyDescriptor(J,ye);if(!Le&&ue&&(Le=Object.getOwnPropertyDescriptor(ue,ye)),Le){if(K&&!Le.get&&!Le.set)continue;Oe.configurable=Le.configurable,Oe.enumerable=Le.enumerable,Oe.writable=Le.writable,Le.get&&(Oe.get=N(Le.get)),Le.set&&(Oe.set=N(Le.set))}ue&&D.default(ue,ye)&&Oe.enumerable&&(Oe.isOwn=!0);var He=!0;!Oe.isOwn&&Oe.get&&(He=!1),He&&(x.default(ye)?(Oe.symbol=N(ye),Oe.value={type:"undefined"}):Oe.value=N($e,{generatePreview:be})),K&&l.default($e)&&b.default($e)||xe.push(Oe)}if(!ue||Se||q(J)||xe.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:D.default(J,"__proto__"),value:N(ue,{self:ne}),writable:!1}),K)return{result:xe};var tt=[];if(ue&&!q(J)&&tt.push({name:"[[Prototype]]",value:N(ue,{self:ne})}),f.default(J)||g.default(J)){var Ze=function(pt){for(var fe=k.get(pt),Ne=fe?B(fe):[],we=pt.entries(),ke=we.next().value;ke;)f.default(pt)?Ne.push(new G(ke[1],ke[0])):Ne.push(new G(ke[1])),ke=we.next().value;return Ne}(J);tt.push({name:"[[Entries]]",value:N(Ze)})}return{internalProperties:tt,result:xe}};var H=5;function z(Y,K){K===void 0&&(K=Y);var se=X(Y);se.description=Q(Y,K);var Se=!1,be=[],xe=A.default(Y),Ee=xe.length;Ee>H&&(Ee=H,Se=!0);for(var J=0;J<Ee;J++){var ne=xe[J];be.push(W(ne,K[ne]))}if(se.properties=be,f.default(Y)){for(var de=[],ue=(J=0,Y.keys()),Fe=ue.next().value;Fe;){if(J>H){Se=!0;break}de.push({key:z(Fe),value:z(Y.get(Fe))}),J++,Fe=ue.next().value}se.entries=de}else if(g.default(Y)){var Ie=[],ye=(J=0,Y.keys());for(Fe=ye.next().value;Fe;){if(J>H){Se=!0;break}Ie.push({value:z(Fe)}),J++,Fe=ye.next().value}se.entries=Ie}return se.overflow=Se,se}function W(Y,K){var se=X(K);se.name=Y;var Se,be=se.subtype;return Se=se.type==="object"?be==="null"?"null":be==="array"?"Array("+K.length+")":be==="map"?"Map("+K.size+")":be==="set"?"Set("+K.size+")":E.default(K,!1):o.default(K),se.value=Se,se}function Q(Y,K){K===void 0&&(K=Y);var se=X(Y),Se=se.type,be=se.subtype;return Se==="string"?Y:Se==="number"||Se==="symbol"?o.default(Y):Se==="function"?w.default(Y):be==="array"?"Array("+Y.length+")":be==="map"?"Map("+K.size+")":be==="set"?"Set("+K.size+")":be==="regexp"?o.default(Y):be==="error"?Y.stack:be==="internal#entry"?Y.name?'{"'+o.default(Y.name)+'" => "'+o.default(Y.value)+'"}':'"'+o.default(Y.value)+'"':E.default(Y,!1)}function X(Y){var K=typeof Y,se="object";if(Y instanceof G)se="internal#entry";else if(a.default(Y))se="null";else if(c.default(Y))se="array";else if(_.default(Y))se="regexp";else if(d.default(Y))se="error";else if(f.default(Y))se="map";else if(g.default(Y))se="set";else try{h.default(Y)&&(se="node")}catch{}return{type:K,subtype:se}}var G=function(Y,K){K&&(this.name=K),this.value=Y};function q(Y){return Y instanceof G||!!(Y[0]&&Y[0]instanceof G)}},2636:function(s,e,r){var n,o=this&&this.__extends||(n=function(H,z){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Q){W.__proto__=Q}||function(W,Q){for(var X in Q)Q.hasOwnProperty(X)&&(W[X]=Q[X])},n(H,z)},function(H,z){function W(){this.constructor=H}n(H,z),H.prototype=z===null?Object.create(z):(W.prototype=z.prototype,new W)}),a=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(e,"__esModule",{value:!0}),e.fullUrl=e.FetchRequest=e.XhrRequest=void 0;var c=a(r(1443)),l=a(r(6768)),h=a(r(9702)),d=a(r(6334)),f=a(r(8887)),g=a(r(4331)),_=a(r(8847)),E=a(r(3783)),A=a(r(6930)),w=a(r(3875)),m=r(316),b=function(H){function z(W,Q,X){var G=H.call(this)||this;return G.xhr=W,G.reqHeaders={},G.method=Q,G.url=k(X),G.id=m.createId(),G}return o(z,H),z.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},z.prototype.handleSend=function(W){l.default(W)||(W=""),W={name:I(this.url),url:this.url,data:W,time:_.default(),reqHeaders:this.reqHeaders,method:this.method},f.default(this.reqHeaders)||(W.reqHeaders=this.reqHeaders),this.emit("send",this.id,W)},z.prototype.handleReqHeadersSet=function(W,Q){W&&Q&&(this.reqHeaders[W]=Q)},z.prototype.handleHeadersReceived=function(){var W=this.xhr,Q=V(W.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:Q.type,subType:Q.subType,size:M(W,!0,this.url),time:_.default(),resHeaders:R(W)})},z.prototype.handleDone=function(){var W,Q,X,G=this,q=this.xhr,Y=q.responseType,K="",se=function(){G.emit("done",G.id,{status:q.status,size:M(q,!1,G.url),time:_.default(),resTxt:K})},Se=V(q.getResponseHeader("Content-Type")||"");Y!=="blob"||Se.type!=="text"&&Se.subType!=="javascript"&&Se.subType!=="json"?(Y!==""&&Y!=="text"||(K=q.responseText),Y==="json"&&(K=JSON.stringify(q.response)),se()):(W=q.response,Q=function(be,xe){xe&&(K=xe),se()},(X=new FileReader).onload=function(){Q(null,X.result)},X.onerror=function(be){Q(be)},X.readAsText(W))},z}(c.default);e.XhrRequest=b;var y=function(H){function z(W,Q){Q===void 0&&(Q={});var X=H.call(this)||this;return W instanceof window.Request&&(W=W.url),X.url=k(W),X.id=m.createId(),X.options=Q,X.reqHeaders=Q.headers||{},X.method=Q.method||"GET",X}return o(z,H),z.prototype.send=function(W){var Q=this,X=this.options,G=l.default(X.body)?X.body:"";this.emit("send",this.id,{name:I(this.url),url:this.url,data:G,reqHeaders:this.reqHeaders,time:_.default(),method:this.method}),W.then(function(q){var Y=V((q=q.clone()).headers.get("Content-Type"));return q.text().then(function(K){var se={type:Y.type,subType:Y.subType,time:_.default(),size:x(q,K),resTxt:K,resHeaders:D(q),status:q.status};f.default(Q.reqHeaders)||(se.reqHeaders=Q.reqHeaders),Q.emit("done",Q.id,se)}),q})},z}(c.default);function x(H,z){var W=H.headers.get("Content-length");return W?w.default(W):B(z)}function D(H){var z={};return H.headers.forEach(function(W,Q){return z[Q]=W}),z}function R(H){var z=H.getAllResponseHeaders().split(`
`),W={};return E.default(z,function(Q){if((Q=g.default(Q))!==""){var X=Q.split(":",2),G=X[0],q=X[1];W[G]=g.default(q)}}),W}function M(H,z,W){var Q=0;function X(){if(!z){var G=H.responseType,q="";G!==""&&G!=="text"||(q=H.responseText),q&&(Q=B(q))}}if(function(G){return!A.default(G,N)}(W))X();else try{Q=w.default(H.getResponseHeader("Content-Length"))}catch{X()}return Q===0&&X(),Q}e.FetchRequest=y;var L=document.createElement("a");function k(H){return L.href=H,L.protocol+"//"+L.host+L.pathname+L.search+L.hash}function I(H){var z=h.default(H.split("/"));return z.indexOf("?")>-1&&(z=g.default(z.split("?")[0])),z===""&&(z=new d.default(H).hostname),z}function V(H){if(!H)return{type:"unknown",subType:"unknown"};var z=H.split(";")[0].split("/");return{type:z[0],subType:h.default(z)}}e.fullUrl=k;var N=window.location.origin;function B(H){var z=encodeURIComponent(H).match(/%[89ABab]/g);return H.length+(z?z.length:0)}},316:function(s,e,r){var n,o=this&&this.__extends||(n=function(y,x){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,R){D.__proto__=R}||function(D,R){for(var M in R)R.hasOwnProperty(M)&&(D[M]=R[M])},n(y,x)},function(y,x){function D(){this.constructor=y}n(y,x),y.prototype=x===null?Object.create(x):(D.prototype=x.prototype,new D)}),a=this&&this.__awaiter||function(y,x,D,R){return new(D||(D=Promise))(function(M,L){function k(N){try{V(R.next(N))}catch(B){L(B)}}function I(N){try{V(R.throw(N))}catch(B){L(B)}}function V(N){var B;N.done?M(N.value):(B=N.value,B instanceof D?B:new D(function(H){H(B)})).then(k,I)}V((R=R.apply(y,x||[])).next())})},c=this&&this.__generator||function(y,x){var D,R,M,L,k={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return L={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function I(V){return function(N){return function(B){if(D)throw new TypeError("Generator is already executing.");for(;k;)try{if(D=1,R&&(M=2&B[0]?R.return:B[0]?R.throw||((M=R.return)&&M.call(R),0):R.next)&&!(M=M.call(R,B[1])).done)return M;switch(R=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return k.label++,{value:B[1],done:!1};case 5:k.label++,R=B[1],B=[0];continue;case 7:B=k.ops.pop(),k.trys.pop();continue;default:if(M=k.trys,!((M=M.length>0&&M[M.length-1])||B[0]!==6&&B[0]!==2)){k=0;continue}if(B[0]===3&&(!M||B[1]>M[0]&&B[1]<M[3])){k.label=B[1];break}if(B[0]===6&&k.label<M[1]){k.label=M[1],M=B;break}if(M&&k.label<M[2]){k.label=M[2],k.ops.push(B);break}M[2]&&k.ops.pop(),k.trys.pop();continue}B=x.call(y,k)}catch(H){B=[6,H],R=0}finally{D=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([V,N])}}},l=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBase64Content=e.getTextContent=e.getOrigin=e.getUrl=e.createErr=e.ErrorWithCode=e.getAbsoluteUrl=e.createId=void 0;var h=l(r(5229)),d=l(r(1216)),f=l(r(6930)),g=l(r(6334)),_=l(r(1792)),E=l(r(6610)),A=d.default(1e3,9999)+".";e.createId=function(){return h.default(A)},e.getAbsoluteUrl=function(y){var x=document.createElement("a");return x.href=y,x.href};var w=function(y){function x(D,R){var M=this.constructor,L=y.call(this,R)||this;return L.code=D,Object.setPrototypeOf(L,M.prototype),L}return o(x,y),x}(Error);function m(y,x,D){return D===void 0&&(D=""),a(this,void 0,void 0,function(){var R;return c(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,8]),(R=new g.default(y)).setQuery("__chobitsu-hide__","true"),[4,E.default.get(R.toString(),{responseType:x})];case 1:return[2,M.sent().data];case 2:if(M.sent(),!D)return[3,7];M.label=3;case 3:return M.trys.push([3,6,,7]),[4,E.default.get(b(D,y),{responseType:x})];case 4:return[4,M.sent().data];case 5:return[2,M.sent()];case 6:return M.sent(),[3,7];case 7:return[3,8];case 8:return[2,x==="arraybuffer"?new ArrayBuffer(0):""]}})})}function b(y,x){var D=new g.default(y);return D.setQuery("url",x),D.setQuery("__chobitsu-hide__","true"),D.toString()}e.ErrorWithCode=w,e.createErr=function(y,x){return new w(y,x)},e.getUrl=function(){var y=location.href;return f.default(y,"about:")?parent.location.href:y},e.getOrigin=function(){var y=location.origin;return y==="null"?parent.location.origin:y},e.getTextContent=function(y,x){return x===void 0&&(x=""),a(this,void 0,void 0,function(){return c(this,function(D){switch(D.label){case 0:return[4,m(y,"text",x)];case 1:return[2,D.sent()]}})})},e.getBase64Content=function(y,x){return x===void 0&&(x=""),a(this,void 0,void 0,function(){var D;return c(this,function(R){switch(R.label){case 0:return D=_.default,[4,m(y,"arraybuffer",x)];case 1:return[2,D.apply(void 0,[R.sent(),"base64"])]}})})}},3191:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 10px 10px 35px}#_console ._control [class*=' _icon-'],#_console ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=' _icon-']._active,#_console ._control [class*=' _icon-']:active,#_console ._control [class^='_icon-']._active,#_console ._control [class^='_icon-']:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}",""]),s.exports=e},13:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),s.exports=e},5896:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 0}#_elements ._control [class*=' _icon-'],#_elements ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=' _icon-']._active,#_elements ._control [class*=' _icon-']:active,#_elements ._control [class^='_icon-']._active,#_elements ._control [class^='_icon-']:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}",""]),s.exports=e},9195:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),s.exports=e},879:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},3180:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px;border-bottom:none}#_network ._control [class*=' _icon-'],#_network ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=' _icon-']._active,#_network ._control [class*=' _icon-']:active,#_network ._control [class^='_icon-']._active,#_network ._control [class^='_icon-']:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}",""]),s.exports=e},2488:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding:10px!important}#_resources ._image-list:after{content:'';display:block;clear:both}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},8011:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),s.exports=e},5571:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},7346:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),s.exports=e},1344:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),s.exports=e},8020:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:'';content:none}._container table{border-collapse:collapse;border-spacing:0}",""]),s.exports=e},8516:function(s,e,r){(e=r(3645)(!1)).push([s.id,`.luna-console{background:var(--background)}.luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}.luna-console-log-item a{color:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}.luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}.luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}.luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}.luna-console-preview .luna-console-key{color:var(--var-color)}.luna-console-preview .luna-console-number{color:var(--number-color)}.luna-console-preview .luna-console-null{color:var(--operator-color)}.luna-console-preview .luna-console-string{color:var(--string-color)}.luna-console-preview .luna-console-boolean{color:var(--keyword-color)}.luna-console-preview .luna-console-special{color:var(--operator-color)}.luna-console-preview .luna-console-keyword{color:var(--keyword-color)}.luna-console-preview .luna-console-operator{color:var(--operator-color)}.luna-console-preview .luna-console-comment{color:var(--comment-color)}.luna-object-viewer{color:var(--primary);font-size:12px!important}.luna-object-viewer-null{color:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{color:var(--string-color)}.luna-object-viewer-number{color:var(--number-color)}.luna-object-viewer-boolean{color:var(--keyword-color)}.luna-object-viewer-special{color:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}.luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}.luna-notification{pointer-events:none!important;padding:10px;z-index:1000}.luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}.luna-notification-upper{margin-bottom:10px}.luna-notification-lower{margin-top:10px}.luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}.luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{background:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}.luna-dom-viewer{color:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}.luna-dom-viewer-children{margin:0;padding-left:15px!important}.luna-modal{z-index:9999999}.luna-modal-body,.luna-modal-input{color:var(--foreground);background:var(--background)}.luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}.luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}.luna-modal-button-group .luna-modal-primary{background:var(--accent)}.luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}.luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}.luna-tab-tabs-container{border-color:var(--border)}.luna-tab-item.luna-tab-selected,.luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}.luna-tab-slider{background:var(--accent)}.luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}.luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-copy,.luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}.luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}.luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}.luna-setting{color:var(--foreground);background:var(--background)}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:var(--darker-background)}.luna-setting-item.luna-setting-selected:focus{outline:0}.luna-setting-item-title{font-size:14px}.luna-setting-item-separator{border-color:var(--border)}.luna-setting-item-checkbox input{border-color:var(--border)}.luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}.luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}.luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}.luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:var(--darker-background)}.luna-setting-item-button button:active{border:1px solid var(--accent)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}.luna-box-model{background:0 0}.luna-box-model-position{color:var(--foreground)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=' _icon-'],._container h2 [class^='_icon-']{font-weight:400}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}`,""]),s.exports=e},6833:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-box-model{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;display:inline-block;color:#222;font-size:12px;text-align:center;white-space:nowrap}.luna-box-model.luna-box-model-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-box-model.luna-box-model-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color:#a5a5a5;background-color:#242424}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px}.luna-box-model-position{border:1px grey dotted}.luna-box-model-margin{color:#333;border:1px dashed;background:rgba(246,178,107,.66)}.luna-box-model-border{color:#333;border:1px #000 solid;background:rgba(255,229,153,.66)}.luna-box-model-padding{color:#333;border:1px grey dashed;background:rgba(147,196,125,.55)}.luna-box-model-content{color:#333;border:1px grey solid;min-width:100px;background:rgba(111,168,220,.66)}",""]),s.exports=e},9327:function(s,e,r){(e=r(3645)(!1)).push([s.id,`@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{content:'\\f101'}.luna-console-icon-input:before{content:'\\f102'}.luna-console-icon-output:before{content:'\\f103'}.luna-console-icon-warn:before{content:'\\f104'}.luna-console-icon-caret-down:before{content:'\\f105'}.luna-console-icon-caret-right:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}`,""]),s.exports=e},4987:function(s,e,r){(e=r(3645)(!1)).push([s.id,'.luna-data-grid{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;font-size:12px;border:1px solid #ccc;overflow:hidden;outline:0}.luna-data-grid.luna-data-grid-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background-color:#242424}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background:#242424;border-color:#3d3d3d}.luna-data-grid table{width:100%;height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid #ccc;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid #ccc;text-align:left;background:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{background:#e6e6e6}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selected{color:#fff;background:#1a73e8}.luna-data-grid:focus.luna-data-grid-theme-dark .luna-data-grid-node.luna-data-grid-selected{background:#0e639c}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto}.luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#ddd}.luna-data-grid-data-container tr:nth-child(even){background:#f2f7fd}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{background:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background:#0b2544}',""]),s.exports=e},8903:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{content:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{content:'\\f102'}.luna-dom-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:0 0;overflow-x:hidden;word-wrap:break-word;padding:0 0 0 12px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;cursor:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#a5a5a5;background-color:#242424}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#f2f7fd}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{display:none}.luna-dom-viewer-html-tag{color:#881280}.luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:-10000px;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{color:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}",""]),s.exports=e},5512:function(s,e,r){(e=r(3645)(!1)).push([s.id,`@font-face{font-family:luna-modal-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-modal-icon-'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:'\\f101'}.luna-modal{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}.luna-modal.luna-modal-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-modal.luna-modal-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color:#a5a5a5;background-color:#242424}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;background:#fff;max-height:100%;display:flex;flex-direction:column;border-radius:4px}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;background:#e9ecef;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{background:#1a73e8;content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{color:#1a73e8;border:1px solid #ccc;background:#fff}.luna-modal-button.luna-modal-primary{color:#fff;background:#1a73e8}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid #ccc;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-dark{color:#a5a5a5}.luna-modal-theme-dark .luna-modal-body{background:#242424}`,""]),s.exports=e},7591:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-notification{position:fixed;top:0;left:0;width:100%;height:100%;padding:20px;box-sizing:border-box;pointer-events:none;display:flex;flex-direction:column;font-size:14px;font-family:Arial,Helvetica,sans-serif}.luna-notification-item{display:flex;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);padding:10px 16px;color:#333;background:#fff}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-theme-dark .luna-notification-item{box-shadow:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);color:#a5a5a5;background:#242424}",""]),s.exports=e},4821:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),s.exports=e},7871:function(s,e,r){(e=r(3645)(!1)).push([s.id,`.luna-setting{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;min-width:320px}.luna-setting.luna-setting-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-setting.luna-setting-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:#f3f3f3}.luna-setting-item.luna-setting-selected:focus{outline:1px solid #1a73e8}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description{line-height:1.4em}.luna-setting-item .luna-setting-description *{margin:0}.luna-setting-item .luna-setting-description strong{font-weight:600}.luna-setting-item .luna-setting-description a{background-color:transparent;color:#0969da;text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-size:18px;font-weight:600}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:100%}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#ccc;border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;background:#1a73e8;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:0 0;height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid #ccc;background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid #ccc;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked{background-color:#1a73e8;border-color:#1a73e8}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;background:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;padding:2px 8px;padding-right:18px;outline:0;color:#333;border-radius:0;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #333;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;background:#fff;border:1px solid #ccc;padding:2px 8px;color:#1a73e8;font-size:14px;border-radius:2px}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:#f3f3f3}.luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-item-separator{border-bottom:1px solid #ccc}.luna-setting-theme-dark{color-scheme:dark;color:#a5a5a5;background:#242424}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a{background-color:transparent;color:#58a6ff}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-input input{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{color:#a5a5a5;border-color:#3d3d3d;background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-button button{background:#242424;border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#3d3d3d;background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}`,""]),s.exports=e},2156:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-tab{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;overflow:hidden;width:100%}.luna-tab.luna-tab-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-tab.luna-tab-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color:#a5a5a5;background-color:#242424}.luna-tab-tabs-container{border-bottom:1px solid #ccc}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{cursor:pointer;display:inline-block;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item:hover{background:#f3f3f3}.luna-tab-slider{transition:left .3s,width .3s;height:1px;background:#1a73e8;position:absolute;bottom:0;left:0}",""]),s.exports=e},5777:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),s.exports=e},5357:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),s.exports=e},3645:function(s){s.exports=function(e){var r=[];return r.toString=function(){return this.map(function(n){var o=function(a,c){var l=a[1]||"",h=a[3];if(!h)return l;if(c&&typeof btoa=="function"){var d=(g=h,_=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),E="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(_),"/*# ".concat(E," */")),f=h.sources.map(function(A){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(A," */")});return[l].concat(f).concat([d]).join(`
`)}var g,_,E;return[l].join(`
`)}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(o,"}"):o}).join("")},r.i=function(n,o,a){typeof n=="string"&&(n=[[null,n,""]]);var c={};if(a)for(var l=0;l<this.length;l++){var h=this[l][0];h!=null&&(c[h]=!0)}for(var d=0;d<n.length;d++){var f=[].concat(n[d]);a&&c[f[0]]||(o&&(f[2]?f[2]="".concat(o," and ").concat(f[2]):f[2]=o),r.push(f))}},r}},1512:function(s,e,r){var n=r(3244),o=r(6906),a=r(7665),c=r(975),l=r(4991),h=r(4209),d=r(9702),f=r(6757),g=r(8381),_=r(5543),E=r(7781),A=r(8908),w=r(1286),m=r(6768);e=function(y){return new n(y)},n.methods({offset:function(){return o(this)},hide:function(){return this.css("display","none")},show:function(){return a(this),this},first:function(){return e(this[0])},last:function(){return e(d(this))},get:function(y){return this[y]},eq:function(y){return e(this[y])},on:function(y,x,D){return _.on(this,y,x,D),this},off:function(y,x,D){return _.off(this,y,x,D),this},html:function(y){var x=h.html(this,y);return w(y)?x:this},text:function(y){var x=h.text(this,y);return w(y)?x:this},val:function(y){var x=h.val(this,y);return w(y)?x:this},css:function(y,x){var D=c(this,y,x);return b(y,x)?D:this},attr:function(y,x){var D=l(this,y,x);return b(y,x)?D:this},data:function(y,x){var D=g(this,y,x);return b(y,x)?D:this},rmAttr:function(y){return l.remove(this,y),this},remove:function(){return f(this),this},addClass:function(y){return E.add(this,y),this},rmClass:function(y){return E.remove(this,y),this},toggleClass:function(y){return E.toggle(this,y),this},hasClass:function(y){return E.has(this,y)},parent:function(){return e(this[0].parentNode)},append:function(y){return A.append(this,y),this},prepend:function(y){return A.prepend(this,y),this},before:function(y){return A.before(this,y),this},after:function(y){return A.after(this,y),this}});var b=function(y,x){return w(x)&&m(y)};s.exports=e},4991:function(s,e,r){var n=r(1352),o=r(5166),a=r(6768),c=r(3783),l=r(1286),h=r(2341);(e=function(d,f,g){if(d=h(d),l(g)&&a(f))return function(E,A){return E.getAttribute(A)}(d[0],f);var _=f;o(_)||((_={})[f]=g),function(E,A){c(E,function(w){c(A,function(m,b){w.setAttribute(b,m)})})}(d,_)}).remove=function(d,f){d=h(d),f=n(f),c(d,function(g){c(f,function(_){g.removeAttribute(_)})})},s.exports=e},7781:function(s,e,r){var n=r(1352),o=r(6053),a=r(2341),c=r(6768),l=r(3783);function h(d){return c(d)?d.split(/\s+/):n(d)}e={add:function(d,f){d=a(d);var g=h(f);l(d,function(_){var E=[];l(g,function(A){e.has(_,A)||E.push(A)}),E.length!==0&&(_.className+=(_.className?" ":"")+E.join(" "))})},has:function(d,f){d=a(d);var g=new RegExp("(^|\\s)"+f+"(\\s|$)");return o(d,function(_){return g.test(_.className)})},toggle:function(d,f){d=a(d),l(d,function(g){if(!e.has(g,f))return e.add(g,f);e.remove(g,f)})},remove:function(d,f){d=a(d);var g=h(f);l(d,function(_){l(g,function(E){_.classList.remove(E)})})}},s.exports=e},975:function(s,e,r){var n=r(6768),o=r(5166),a=r(7622),c=r(1286),l=r(6341),h=r(3990),d=r(2341),f=r(747),g=r(3783);e=function(E,A,w){if(E=d(E),c(w)&&n(A))return function(b,y){return b.style[f(y)]||getComputedStyle(b,"").getPropertyValue(y)}(E[0],A);var m=A;o(m)||((m={})[A]=w),function(b,y){g(b,function(x){var D=";";g(y,function(R,M){M=f.dash(M),D+=M+":"+function(L,k){var I=h(k)&&!l(_,a(L));return I?k+"px":k}(M,R)+";"}),x.style.cssText+=D})}(E,m)};var _=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];s.exports=e},8381:function(s,e,r){var n=r(4991),o=r(6768),a=r(5166),c=r(3783);r(2341),e=function(l,h,d){var f=h;return o(h)&&(f="data-"+h),a(h)&&(f={},c(h,function(g,_){f["data-"+_]=g})),n(l,f,d)},s.exports=e},5543:function(s,e,r){var n=r(2443),o=r(1286),a=r(2341),c=r(3783);function l(h){return function(d,f,g,_){d=a(d),o(_)&&(_=g,g=void 0),c(d,function(E){n[h](E,f,g,_)})}}e={on:l("add"),off:l("remove")},s.exports=e},8908:function(s,e,r){var n=r(3783),o=r(2341),a=r(6768);function c(l){return function(h,d){h=o(h),n(h,function(f){if(a(d))f.insertAdjacentHTML(l,d);else{var g=f.parentNode;switch(l){case"beforebegin":g&&g.insertBefore(d,f);break;case"afterend":g&&g.insertBefore(d,f.nextSibling);break;case"beforeend":f.appendChild(d);break;case"afterbegin":f.prepend(d)}}})}}e={before:c("beforebegin"),after:c("afterend"),append:c("beforeend"),prepend:c("afterbegin")},s.exports=e},6906:function(s,e,r){var n=r(2341);e=function(o){var a=(o=n(o))[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:Math.round(a.width),height:Math.round(a.height)}},s.exports=e},4209:function(s,e,r){var n=r(1286),o=r(3783),a=r(2341);function c(l){return function(h,d){var f=(h=a(h))[0];if(n(d))return f?f[l]:"";f&&o(h,function(g){g[l]=d})}}e={html:c("innerHTML"),text:c("textContent"),val:c("value")},s.exports=e},6757:function(s,e,r){var n=r(3783),o=r(2341);e=function(a){a=o(a),n(a,function(c){var l=c.parentNode;l&&l.removeChild(c)})},s.exports=e},2341:function(s,e,r){var n=r(6768),o=r(1352),a=r(3244);e=function(c){return o(n(c)?new a(c):c)},s.exports=e},7665:function(s,e,r){var n=r(3783),o=r(2341);e=function(c){c=o(c),n(c,function(l){(function(h){return getComputedStyle(h,"").getPropertyValue("display")=="none"})(l)&&(l.style.display=function(h){var d,f;return a[h]||(d=document.createElement(h),document.documentElement.appendChild(d),f=getComputedStyle(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),f=="none"&&(f="block"),a[h]=f),a[h]}(l.nodeName))})};var a={};s.exports=e},7496:function(s,e,r){var n=r(6329),o=r(1352),a=r(5022),c=r(7653),l=r(9537),h=(e=function(d,f){return h.extend(d,f)}).Base=function d(f,g,_){_=_||{};var E=g.className||c(g,"initialize.name")||"";delete g.className;var A=function(){var w=o(arguments);return this.initialize&&this.initialize.apply(this,w)||this};if(!l)try{A=new Function("toArr","return function "+E+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(o)}catch{}return a(A,f),A.prototype.constructor=A,A.extend=function(w,m){return d(A,w,m)},A.inherits=function(w){a(A,w)},A.methods=function(w){return n(A.prototype,w),A},A.statics=function(w){return n(A,w),A},A.methods(g).statics(_),A}(Object,{className:"Base",callSuper:function(d,f,g){return d.prototype[f].apply(this,g)},toString:function(){return this.constructor.name}});s.exports=e},3009:function(s,e,r){var n=r(7496),o=r(6768),a=r(9882),c=r(3279),l=r(5925),h=r(5044);e=n({initialize:function(A){o(A)&&(A=e.parse(A)),this.model=A.model,this.val=A.val},toRgb:function(){var A=this.val;this.model==="hsl"&&(A=l(A));var w="rgba";return A[3]===1&&(w="rgb",A=A.slice(0,3)),w+"("+A.join(", ")+")"},toHex:function(){var A=this.val;this.model==="hsl"&&(A=l(A));var w=h.encode(A.slice(0,3));return w[0]===w[1]&&w[2]===w[3]&&w[4]===w[5]&&(w=w[0]+w[2]+w[5]),"#"+w},toHsl:function(){var A=this.val;this.model==="rgb"&&(A=c(A));var w="hsla";return A[3]===1&&(w="hsl",A=A.slice(0,3)),A[1]=A[1]+"%",A[2]=A[2]+"%",w+"("+A.join(", ")+")"}},{parse:function(A){var w,m,b=[0,0,0,1],y="rgb";if(m=A.match(d))for(m=m[1],w=0;w<3;w++)b[w]=parseInt(m[w]+m[w],16);else if(m=A.match(f))for(m=m[1],w=0;w<3;w++){var x=2*w;b[w]=parseInt(m.slice(x,x+2),16)}else if(m=A.match(g)){for(w=0;w<3;w++)b[w]=parseInt(m[w+1],0);m[4]&&(b[3]=parseFloat(m[4]))}else if(m=A.match(_)){for(w=0;w<3;w++)b[w]=Math.round(2.55*parseFloat(m[w+1]));m[4]&&(b[3]=parseFloat(m[4]))}else(m=A.match(E))&&(y="hsl",b=[(parseFloat(m[1])%360+360)%360,a(parseFloat(m[2]),0,100),a(parseFloat(m[3]),0,100),a(parseFloat(m[4]),0,1)]);return{val:b,model:y}}});var d=/^#([a-fA-F0-9]{3})$/,f=/^#([a-fA-F0-9]{6})$/,g=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,_=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,E=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;s.exports=e},1443:function(s,e,r){var n=r(7496),o=r(6257),a=r(3783),c=r(9677),l=r(8763),h=r(4675);e=n({initialize:function(){this._events=this._events||{}},on:function(d,f){return this._events[d]=this._events[d]||[],this._events[d].push(f),this},off:function(d,f){var g=this._events;if(o(g,d)){var _=g[d].indexOf(f);return _>-1&&g[d].splice(_,1),this}},once:function(d,f){return this.on(d,l(f)),this},emit:function(d){var f=this;if(o(this._events,d)){var g=c(arguments,1),_=h(this._events[d]);return a(_,function(E){return E.apply(f,g)},this),this}},removeAllListeners:function(d){return d?delete this._events[d]:this._events={},this}},{mixin:function(d){a(["on","off","once","emit","removeAllListeners"],function(f){d[f]=e.prototype[f]}),d._events=d._events||{}}}),s.exports=e},9640:function(s,e,r){var n=r(7496),o=r(4454),a=r(6472),c=r(3783),l=r(2533);e=n({initialize:function(h){a(h)?(this.size=h.length,c(h,function(d,f){this[d]=f},this)):(this.size=l(h).length,c(h,function(d,f){this[f]=d},this)),o(this)}}),s.exports=e},125:function(s,e,r){var n=r(5128),o=r(615),a=r(8887),c=r(4400),l=r(4193),h=r(5166),d=o("local");e=n.extend({initialize:function(f,g){this._name=f,g=g||{};var _=d.getItem(f);try{_=JSON.parse(_)}catch{_={}}h(_)||(_={}),g=l(_,g),this.callSuper(n,"initialize",[g])},save:function(f){if(a(f))return d.removeItem(this._name);d.setItem(this._name,c(f))}}),s.exports=e},4989:function(s,e,r){var n=r(1443),o=r(9640),a=r(1352),c=r(1286),l=r(4675),h=r(6768),d=r(3990);e=n.extend({initialize:function(f,g){this.name=f,this.setLevel(c(g)?e.level.DEBUG:g),this.callSuper(n,"initialize",arguments)},setLevel:function(f){return h(f)?((f=e.level[f.toUpperCase()])&&(this._level=f),this):(d(f)&&(this._level=f),this)},getLevel:function(){return this._level},formatter:function(f,g){return g},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(f,g){return(g=a(g)).length===0?this:(this.emit("all",f,l(g)),e.level[f.toUpperCase()]<this._level||(this.emit(f,l(g)),(f==="debug"?console.log:console[f]).apply(console,this.formatter(f,g))),this)}},{level:new o({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),s.exports=e},2765:function(s,e,r){var n=r(1443);e=n.extend({className:"MediaQuery",initialize:function(o){var a=this;this.callSuper(n,"initialize"),this._listener=function(){a.emit(a.isMatch()?"match":"unmatch")},this.setQuery(o)},setQuery:function(o){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(o),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),s.exports=e},2289:function(s,e,r){var n=r(7496);(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(e=n({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),s.exports=e},242:function(s,e,r){var n=r(8985),o=r(8613),a=r(5543),c=r(975),l=r(6341),h=r(6329),d=r(5610);e=d.ResizeObserver?n.extend({initialize:function(f){var g=this;if(f._resizeSensor)return f._resizeSensor;this.callSuper(n,"initialize");var _=new d.ResizeObserver(function(){return g.emit()});_.observe(f),f._resizeSensor=this,this._resizeObserver=_,this._el=f},destroy:function(){var f=this._el;f._resizeSensor&&(this.rmAllListeners(),delete f._resizeSensor,this._resizeObserver.unobserve(f))}}):n.extend({initialize:function(f){if(f._resizeSensor)return f._resizeSensor;this.callSuper(n,"initialize"),this._el=f,f._resizeSensor=this,l(["absolute","relative","fixed","sticky"],c(f,"position"))||c(f,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var f=this._el;f._resizeSensor&&(this.rmAllListeners(),delete f._resizeSensor,f.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var f=this._el,g={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},_={position:"absolute",left:"0px",top:"0px",transition:"0s"},E=o("div",{style:_}),A=o("div.resize-sensor-expand",{style:g},E),w=o("div.resize-sensor-shrink",{style:g},o("div",{style:h({width:"200%",height:"200%"},_)})),m=o("div.resize-sensor",{dir:"ltr",style:g},A,w);this._expandEl=A,this._expandChildEl=E,this._shrinkEl=w,this._resizeSensorEl=m,f.appendChild(m),this._resetExpandShrink()},_bindEvent:function(){var f=this;a.on(this._expandEl,"scroll",function(){return f._onScroll()}),a.on(this._shrinkEl,"scroll",function(){return f._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var f=this._el,g=f.offsetWidth,_=f.offsetHeight;c(this._expandChildEl,{width:g+10,height:_+10}),h(this._expandEl,{scrollLeft:g+10,scrollTop:_+10}),h(this._shrinkEl,{scrollLeft:g+10,scrollTop:_+10})}}),s.exports=e},3244:function(s,e,r){var n=r(7496),o=r(6768),a=r(3783),c=r(9971),l=new(e=n({className:"Select",initialize:function(h){return this.length=0,h?o(h)?l.find(h):void(h.nodeType&&(this[0]=h,this.length=1)):this},find:function(h){var d=new e;return this.each(function(){c(d,this.querySelectorAll(h))}),d},each:function(h){return a(this,function(d,f){h.call(d,f,d)}),this}}))(document);s.exports=e},8985:function(s,e,r){var n=r(7496),o=r(4675),a=r(3783),c=r(1352);e=n({initialize:function(){this._listeners=[]},addListener:function(l){this._listeners.push(l)},rmListener:function(l){var h=this._listeners.indexOf(l);h>-1&&this._listeners.splice(h,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var l=this,h=c(arguments),d=o(this._listeners);a(d,function(f){return f.apply(l,h)},this)}},{mixin:function(l){a(["addListener","rmListener","emit","rmAllListeners"],function(h){l[h]=e.prototype[h]}),l._listeners=l._listeners||[]}}),s.exports=e},9001:function(s,e,r){var n=r(7496),o=r(1527);e=n({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(a){return this._items.push(a),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(a,c){c=arguments.length>1?c:this;for(var l=this._items,h=this.size-1,d=0;h>=0;h--,d++)a.call(c,l[h],d,this)},toArr:function(){return o(this._items)}}),s.exports=e},5128:function(s,e,r){var n=r(1443),o=r(6768),a=r(5166),c=r(3783),l=r(1352);e=n.extend({initialize:function(h){this.callSuper(n,"initialize",arguments),this._data=h||{},this.save(this._data)},set:function(h,d){var f;o(h)?(f={})[h]=d:a(h)&&(f=h);var g=this;c(f,function(_,E){var A=g._data[E];g._data[E]=_,g.emit("change",E,_,A)}),this.save(this._data)},get:function(h){var d=this._data;if(o(h))return d[h];var f={};return c(h,function(g){f[g]=d[g]}),f},remove:function(h){h=l(h);var d=this._data;c(h,function(f){delete d[f]}),this.save(d)},clear:function(){this._data={},this.save(this._data)},each:function(h){c(this._data,h)},save:function(h){this._data=h}}),s.exports=e},6334:function(s,e,r){var n=r(7496),o=r(6329),a=r(4331),c=r(1745),l=r(8887),h=r(3783),d=r(6472),f=r(1352),g=r(2727),_=r(5166),E=r(3367);e=n({className:"Url",initialize:function(b){!b&&g&&(b=window.location.href),o(this,e.parse(b||""))},setQuery:function(b,y){var x=this.query;return _(b)?h(b,function(D,R){x[R]=E(D)}):x[b]=E(y),this},rmQuery:function(b){var y=this.query;return d(b)||(b=f(b)),h(b,function(x){delete y[x]}),this},toString:function(){return e.stringify(this)}},{parse:function(b){var y={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},x=a(b),D=!1,R=x.match(A);if(R&&(R=R[0],y.protocol=R.toLowerCase(),x=x.substr(R.length)),R&&(D=x.substr(0,2)==="//")&&(x=x.slice(2),y.slashes=!0),D){for(var M=x,L=-1,k=0,I=m.length;k<I;k++){var V=x.indexOf(m[k]);V!==-1&&(L===-1||V<L)&&(L=V)}L>-1&&(M=x.slice(0,L),x=x.slice(L));var N=M.lastIndexOf("@");N!==-1&&(y.auth=decodeURIComponent(M.slice(0,N)),M=M.slice(N+1)),y.hostname=M;var B=M.match(w);B&&((B=B[0])!==":"&&(y.port=B.substr(1)),y.hostname=M.substr(0,M.length-B.length))}var H=x.indexOf("#");H!==-1&&(y.hash=x.substr(H),x=x.slice(0,H));var z=x.indexOf("?");return z!==-1&&(y.query=c.parse(x.substr(z+1)),x=x.slice(0,z)),y.pathname=x||"/",y},stringify:function(b){var y=b.protocol+(b.slashes?"//":"")+(b.auth?encodeURIComponent(b.auth)+"@":"")+b.hostname+(b.port?":"+b.port:"")+b.pathname;return l(b.query)||(y+="?"+c.stringify(b.query)),b.hash&&(y+=b.hash),y}});var A=/^([a-z0-9.+-]+:)/i,w=/:[0-9]*$/,m=["/","?","#"];s.exports=e},8991:function(s,e,r){var n=r(4777),o=r(1214),a=r(4193),c=r(5166),l=r(1745);function h(d,f,g,_){return n(f)&&(_=g,g=f,f={}),{url:d,data:f,success:g,dataType:_}}(e=function(d){a(d,e.setting);var f,g=d.type,_=d.url,E=d.data,A=d.dataType,w=d.success,m=d.error,b=d.timeout,y=d.complete,x=d.xhr();return x.onreadystatechange=function(){if(x.readyState===4){var D;clearTimeout(f);var R=x.status;if(R>=200&&R<300||R===304){D=x.responseText,A==="xml"&&(D=x.responseXML);try{A==="json"&&(D=JSON.parse(D))}catch{}w(D,x)}else m(x);y(x)}},g==="GET"?(E=l.stringify(E))&&(_+=_.indexOf("?")>-1?"&"+E:"?"+E):d.contentType==="application/x-www-form-urlencoded"?c(E)&&(E=l.stringify(E)):d.contentType==="application/json"&&c(E)&&(E=JSON.stringify(E)),x.open(g,_,!0),x.setRequestHeader("Content-Type",d.contentType),b>0&&(f=setTimeout(function(){x.onreadystatechange=o,x.abort(),m(x,"timeout"),y(x)},b)),x.send(g==="GET"?null:E),x}).setting={type:"GET",success:o,error:o,complete:o,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},e.get=function(){return e(h.apply(null,arguments))},e.post=function(){var d=h.apply(null,arguments);return d.type="POST",e(d)},s.exports=e},1116:function(s,e,r){var n=r(2533),o=r(415),a=r(42),c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols;e=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=d.prototype,g=f===void 0||f,_=d.unenumerable,E=_!==void 0&&_,A=d.symbol,w=A!==void 0&&A,m=[];if((E||w)&&c){var b=n;E&&c&&(b=c);do m=m.concat(b(h)),w&&l&&(m=m.concat(l(h)));while(g&&(h=o(h))&&h!==Object.prototype);m=a(m)}else if(g)for(var y in h)m.push(y);else m=n(h);return m},s.exports=e},7913:function(s,e,r){var n=r(3783),o=r(1286),a=r(4777);e=function(c,l){o(l)&&(l=!0);var h=a(l),d={};return n(c,function(f){d[f]=h?l(f):l}),d},s.exports=e},3901:function(s,e){e={encode:function(c){var l,h,d=[],f=c.length,g=f%3;f-=g;for(var _=0;_<f;_+=3)d.push((l=(c[_]<<16)+(c[_+1]<<8)+c[_+2],n[l>>18&63]+n[l>>12&63]+n[l>>6&63]+n[63&l]));return f=c.length,g===1?(h=c[f-1],d.push(n[h>>2]),d.push(n[h<<4&63]),d.push("==")):g===2&&(h=(c[f-2]<<8)+c[f-1],d.push(n[h>>10]),d.push(n[h>>4&63]),d.push(n[h<<2&63]),d.push("=")),d.join("")},decode:function(c){var l=c.length,h=0;c[l-2]==="="?h=2:c[l-1]==="="&&(h=1);var d,f,g,_,E,A,w,m=new Array(3*l/4-h);for(l=h>0?l-4:l,d=0,f=0;d<l;d+=4){var b=(g=c[d],_=c[d+1],E=c[d+2],A=c[d+3],r[g.charCodeAt(0)]<<18|r[_.charCodeAt(0)]<<12|r[E.charCodeAt(0)]<<6|r[A.charCodeAt(0)]);m[f++]=b>>16&255,m[f++]=b>>8&255,m[f++]=255&b}return h===2?(w=r[c.charCodeAt(d)]<<2|r[c.charCodeAt(d+1)]>>4,m[f++]=255&w):h===1&&(w=r[c.charCodeAt(d)]<<10|r[c.charCodeAt(d+1)]<<4|r[c.charCodeAt(d+2)]>>2,m[f++]=w>>8&255,m[f++]=255&w),m}};for(var r=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;o++)r[n.charCodeAt(o)]=o;s.exports=e},5637:function(s,e){e=function(r,n){var o;return function(){return--r>0&&(o=n.apply(this,arguments)),r<=1&&(n=null),o}},s.exports=e},7494:function(s,e,r){var n=r(8935);function o(a,c){this[c]=a.replace(/\w/,function(l){return l.toUpperCase()})}e=function(a){var c=n(a),l=c[0];return c.shift(),c.forEach(o,c),l+=c.join("")},s.exports=e},1694:function(s,e,r){var n=r(6257),o=r(6472);e=function(l,h){if(o(l))return l;if(h&&n(h,l))return[l];var d=[];return l.replace(a,function(f,g,_,E){d.push(_?E.replace(c,"$1"):g||f)}),d};var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g;s.exports=e},996:function(s,e){e=function(r,n){var o=[];n=n||1;for(var a=0,c=Math.ceil(r.length/n);a<c;a++){var l=a*n,h=l+n;o.push(r.slice(l,h))}return o},s.exports=e},9882:function(s,e,r){var n=r(1286);e=function(o,a,c){return n(c)&&(c=a,a=void 0),!n(a)&&o<a?a:o>c?c:o},s.exports=e},4675:function(s,e,r){var n=r(5166),o=r(6472),a=r(6329);e=function(c){return n(c)?o(c)?c.slice():a({},c):c},s.exports=e},550:function(s,e,r){var n=r(5166),o=r(4777),a=r(6472),c=r(8820);e=function(l){return a(l)?l.map(function(h){return e(h)}):n(l)&&!o(l)?c(l,function(h){return e(h)}):l},s.exports=e},8099:function(s,e,r){var n=r(1352);e=function(){for(var o=n(arguments),a=[],c=0,l=o.length;c<l;c++)a=a.concat(n(o[c]));return a},s.exports=e},6341:function(s,e,r){var n=r(496),o=r(6768),a=r(1369),c=r(2578);e=function(l,h){return o(l)?l.indexOf(h)>-1:(a(l)||(l=c(l)),n(l,h)>=0)},s.exports=e},1792:function(s,e,r){var n=r(6768),o=r(3901),a=r(385),c=r(6472),l=r(2349),h=r(3085),d=r(3063);(e=function(f,g){var _;if(g=d(g),n(f))_=new Uint8Array(o.decode(f));else if(a(f))f=f.slice(0),_=new Uint8Array(f);else if(c(f))_=new Uint8Array(f);else if(h(f)==="uint8array")_=f.slice(0);else if(l(f)){_=new Uint8Array(f.length);for(var E=0;E<f.length;E++)_[E]=f[E]}if(_)switch(g){case"base64":_=o.encode(_);break;case"arraybuffer":_=_.buffer;break;case"array":_=[].slice.call(_);break;case"buffer":_=Buffer.from(_);break;case"blob":_=new Blob([_.buffer])}return _}).blobToArrBuffer=function(f){return new Promise(function(g,_){var E=new FileReader;E.onload=function(A){g(A.target.result)},E.onerror=function(A){_(A)},E.readAsArrayBuffer(f)})},s.exports=e},6299:function(s,e,r){var n=r(4193),o=r(3990),a=r(1286),c=r(1420),l={path:"/"};function h(d,f,g){if(!a(f)){if(g=n(g=g||{},l),o(g.expires)){var _=new Date;_.setMilliseconds(_.getMilliseconds()+864e5*g.expires),g.expires=_}return f=encodeURIComponent(f),d=encodeURIComponent(d),document.cookie=[d,"=",f,g.expires&&"; expires="+g.expires.toUTCString(),g.path&&"; path="+g.path,g.domain&&"; domain="+g.domain,g.secure?"; secure":""].join(""),e}for(var E=document.cookie?document.cookie.split("; "):[],A=d?void 0:{},w=0,m=E.length;w<m;w++){var b=E[w],y=b.split("="),x=c(y.shift());if(b=y.join("="),b=c(b),d===x){A=b;break}d||(A[x]=b)}return A}e={get:h,set:h,remove:function(d,f){return(f=f||{}).expires=-1,h(d,"",f)}},s.exports=e},2327:function(s,e,r){var n=r(6329),o=r(1214);e=function(a,c){c=c||o;var l=document.createElement("textarea"),h=document.body;n(l.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),l.value=a,h.appendChild(l),l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,a.length);try{document.execCommand("copy"),c()}catch(d){c(d)}finally{h.removeChild(l)}},s.exports=e},1662:function(s,e,r){var n=r(5166);e=function(a){if(!n(a))return{};if(o)return o(a);function c(){}return c.prototype=a,new c};var o=Object.create;s.exports=e},4427:function(s,e,r){var n=r(1286),o=r(3783);e=function(a,c){return function(l){return o(arguments,function(h,d){if(d!==0){var f=a(h);o(f,function(g){c&&!n(l[g])||(l[g]=h[g])})}}),l}},s.exports=e},4210:function(s,e,r){var n=r(1475),o=r(1286),a=r(7494);e=n(function(l,h){return o(h)?(l=a(l),!o(c[l])):(c.cssText="",c.cssText=l+":"+h,!!c.length)},function(l,h){return l+" "+h});var c=document.createElement("p").style;s.exports=e},4407:function(s,e,r){var n=r(6768),o=r(2106),a=r(3367),c=r(5351);e=function(_,E,A,w){arguments.length===1&&n(_)&&!f.test(_)&&(E=_,_=void 0),_=_||new Date,o(_)||(_=new Date(_));var m=(E=a(e.masks[E]||E||e.masks.default)).slice(0,4);m!=="UTC:"&&m!=="GMT:"||(E=E.slice(4),A=!0,m==="GMT:"&&(w=!0));var b=A?"getUTC":"get",y=_[b+"Date"](),x=_[b+"Day"](),D=_[b+"Month"](),R=_[b+"FullYear"](),M=_[b+"Hours"](),L=_[b+"Minutes"](),k=_[b+"Seconds"](),I=_[b+"Milliseconds"](),V=A?0:_.getTimezoneOffset(),N={d:y,dd:l(y),ddd:e.i18n.dayNames[x],dddd:e.i18n.dayNames[x+7],m:D+1,mm:l(D+1),mmm:e.i18n.monthNames[D],mmmm:e.i18n.monthNames[D+12],yy:a(R).slice(2),yyyy:R,h:M%12||12,hh:l(M%12||12),H:M,HH:l(M),M:L,MM:l(L),s:k,ss:l(k),l:l(I,3),L:l(Math.round(I/10)),t:M<12?"a":"p",tt:M<12?"am":"pm",T:M<12?"A":"P",TT:M<12?"AM":"PM",Z:w?"GMT":A?"UTC":(a(_).match(d)||[""]).pop().replace(g,""),o:(V>0?"-":"+")+l(100*Math.floor(Math.abs(V)/60)+Math.abs(V)%60,4),S:["th","st","nd","rd"][y%10>3?0:(y%100-y%10!=10)*y%10]};return E.replace(h,function(B){return B in N?N[B]:B.slice(1,B.length-1)})};var l=function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return c(a(_),E,"0")},h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/\d/,g=/[^-+\dA-Z]/g;e.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},s.exports=e},6049:function(s,e){e=function(r,n,o){var a;return function(){var c=this,l=arguments;o||clearTimeout(a),o&&a||(a=setTimeout(function(){a=null,r.apply(c,l)},n))}},s.exports=e},1420:function(s,e,r){var n=r(3783),o=r(8166),a=r(2461),c=r(5742);function l(d){return+("0x"+d)}e=function(d){try{return decodeURIComponent(d)}catch{var f=d.match(h);return f&&n(f,function(_){d=d.replace(_,function(E){E=E.split("%").slice(1);var A=a(E,l);return E=o.encode(A),E=c.decode(E,!0),E}(_))}),d}};var h=/(%[a-f0-9]{2})+/gi;s.exports=e},4193:function(s,e,r){e=r(4427)(r(1116),!0),s.exports=e},9803:function(s,e,r){var n=r(1694),o=r(6768),a=r(5166),c=r(3783);function l(h,d,f){for(var g=n(d,h),_=g.pop();d=g.shift();)h[d]||(h[d]={}),h=h[d];Object.defineProperty(h,_,f)}e=function(h,d,f){return o(d)?l(h,d,f):a(d)&&c(d,function(g,_){l(h,_,g)}),h},s.exports=e},2443:function(s,e,r){var n=r(7496),o=r(6341);function a(){return!0}function c(){return!1}function l(d){var f,g=this.events[d.type],_=h.call(this,d,g);d=new e.Event(d);for(var E,A,w=0;(A=_[w++])&&!d.isPropagationStopped();)for(d.curTarget=A.el,E=0;(f=A.handlers[E++])&&!d.isImmediatePropagationStopped();)f.handler.apply(A.el,[d])===!1&&(d.preventDefault(),d.stopPropagation())}function h(d,f){var g,_,E,A,w=d.target,m=[],b=f.delegateCount;if(w.nodeType)for(;w!==this;w=w.parentNode||this){for(_=[],A=0;A<b;A++)_[g=(E=f[A]).selector+" "]===void 0&&(_[g]=o(this.querySelectorAll(g),w)),_[g]&&_.push(E);_.length&&m.push({el:w,handlers:_})}return b<f.length&&m.push({el:this,handlers:f.slice(b)}),m}e={add:function(d,f,g,_){var E,A={selector:g,handler:_};d.events||(d.events={}),(E=d.events[f])||((E=d.events[f]=[]).delegateCount=0,d.addEventListener(f,function(){l.apply(d,arguments)},!1)),g?E.splice(E.delegateCount++,0,A):E.push(A)},remove:function(d,f,g,_){var E=d.events;if(E&&E[f])for(var A,w=E[f],m=w.length;m--;)A=w[m],g&&A.selector!=g||A.handler!=_||(w.splice(m,1),A.selector&&w.delegateCount--)},Event:n({className:"Event",initialize:function(d){this.origEvent=d},isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var d=this.origEvent;this.isDefaultPrevented=a,d&&d.preventDefault&&d.preventDefault()},stopPropagation:function(){var d=this.origEvent;this.isPropagationStopped=a,d&&d.stopPropagation&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.origEvent;this.isImmediatePropagationStopped=a,d&&d.stopImmediatePropagation&&d.stopImmediatePropagation(),this.stopPropagation()}})},s.exports=e},4541:function(s,e,r){var n=r(2727),o=r(9296),a=r(2533);e=function(f){var g=d(f=(f=f||(n?navigator.userAgent:"")).toLowerCase(),"msie ");if(g)return{version:g,name:"ie"};if(l.test(f))return{version:11,name:"ie"};for(var _=0,E=h.length;_<E;_++){var A=h[_],w=f.match(c[A]);if(w!=null){var m=o(w[1].split(".")[0]);return A==="opera"&&(m=d(f,"version/")||m),{name:A,version:m}}}return{name:"unknown",version:-1}};var c={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},l=/trident\/7\./,h=a(c);function d(f,g){var _=f.indexOf(g);if(_>-1)return o(f.substring(_+g.length,f.indexOf(".",_)))}s.exports=e},6954:function(s,e,r){var n=r(2727);e=function(o){if(o=(o=o||(n?navigator.userAgent:"")).toLowerCase(),a("windows phone"))return"windows phone";if(a("win"))return"windows";if(a("android"))return"android";if(a("ipad")||a("iphone")||a("ipod"))return"ios";if(a("mac"))return"os x";if(a("linux"))return"linux";function a(c){return o.indexOf(c)>-1}return"unknown"},s.exports=e},801:function(s,e,r){var n=r(1137),o=r(288),a=r(5972),c=r(6341);e=n(function(l,h){return h=o(h),a(l,function(d){return!c(h,d)})}),s.exports=e},3783:function(s,e,r){var n=r(1369),o=r(2533),a=r(3955);e=function(c,l,h){var d,f;if(l=a(l,h),n(c))for(d=0,f=c.length;d<f;d++)l(c[d],d,c);else{var g=o(c);for(d=0,f=g.length;d<f;d++)l(c[g[d]],g[d],c)}return c},s.exports=e},4858:function(s,e){e=function(r,n){var o=r.length-n.length;return o>=0&&r.indexOf(n,o)===o},s.exports=e},8901:function(s,e,r){var n=r(2533),o=(e=function(d){return c.test(d)?d.replace(l,h):d}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a="(?:"+n(o).join("|")+")",c=new RegExp(a),l=new RegExp(a,"g"),h=function(d){return o[d]};s.exports=e},4187:function(s,e,r){var n=r(3367);e=function(a){return n(a).replace(o,function(c){switch(c){case'"':case"'":case"\\":return"\\"+c;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var o=/["'\\\n\r\u2028\u2029]/g;s.exports=e},2337:function(s,e){e=function(r){return r.replace(/\W/g,"\\$&")},s.exports=e},642:function(s,e){e=function(r){var n=document.createElement("style");return n.textContent=r,n.type="text/css",document.head.appendChild(n),n},s.exports=e},1672:function(s,e,r){var n=r(2838),o=r(1369),a=r(2533);e=function(c,l,h){l=n(l,h);for(var d=!o(c)&&a(c),f=(d||c).length,g=0;g<f;g++){var _=d?d[g]:g;if(!l(c[_],_,c))return!1}return!0},s.exports=e},6329:function(s,e,r){e=r(4427)(r(1116)),s.exports=e},3021:function(s,e,r){var n=r(2533);e=r(4427)(n),s.exports=e},2581:function(s,e,r){var n=r(42),o=r(4331),a=r(2461),c=r(1352);e=function(h){var d=c(h.match(l));return n(a(d,function(f){return o(f)}))};var l=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;s.exports=e},5972:function(s,e,r){var n=r(2838),o=r(3783);e=function(a,c,l){var h=[];return c=n(c,l),o(a,function(d,f,g){c(d,f,g)&&h.push(d)}),h},s.exports=e},2244:function(s,e,r){var n=r(2267),o=r(4072),a=r(1369),c=r(1286);e=function(l,h,d){var f=(a(l)?o:n)(l,h,d);if(!c(f)&&f!==-1)return l[f]},s.exports=e},4072:function(s,e,r){var n=r(2838);e=function(o,a,c,l){l=l||1,a=n(a,c);for(var h=o.length,d=l>0?0:h-1;d>=0&&d<h;){if(a(o[d],d,o))return d;d+=l}return-1},s.exports=e},2267:function(s,e,r){var n=r(2838),o=r(2533);e=function(a,c,l){c=n(c,l);for(var h,d=o(a),f=0,g=d.length;f<g;f++)if(c(a[h=d[f]],h,a))return h},s.exports=e},288:function(s,e,r){var n=r(6472);function o(a,c){for(var l,h=a.length,d=-1;h--;)l=a[++d],n(l)?o(l,c):c.push(l);return c}e=function(a){return o(a,[])},s.exports=e},4454:function(s,e,r){var n=r(2533);e=function(o){return Object.freeze?Object.freeze(o):(n(o).forEach(function(a){Object.getOwnPropertyDescriptor(o,a).configurable&&Object.defineProperty(o,a,{writable:!1,configurable:!1})}),o)},s.exports=e},415:function(s,e,r){var n=r(5166),o=r(4777),a=Object.getPrototypeOf,c={}.constructor;e=function(l){if(n(l)){if(a)return a(l);var h=l.__proto__;return h||h===null?h:o(l.constructor)?l.constructor.prototype:l instanceof c?c.prototype:void 0}},s.exports=e},8613:function(s,e,r){var n=r(9833),o=r(6768),a=r(6930),c=r(7781),l=r(975),h=r(3783),d=r(4777);e=function(f,g){for(var _=arguments.length,E=new Array(_>2?_-2:0),A=2;A<_;A++)E[A-2]=arguments[A];(n(g)||o(g))&&(E.unshift(g),g=null),g||(g={});var w=function(D){for(var R="div",M="",L=[],k=[],I="",V=0,N=D.length;V<N;V++){var B=D[V];B==="#"||B==="."?(k.push(I),I=B):I+=B}k.push(I);for(var H=0,z=k.length;H<z;H++)(I=k[H])&&(a(I,"#")?M=I.slice(1):a(I,".")?L.push(I.slice(1)):R=I);return{tagName:R,id:M,classes:L}}(f),m=w.tagName,b=w.id,y=w.classes,x=document.createElement(m);return b&&x.setAttribute("id",b),c.add(x,y),h(E,function(D){o(D)?x.appendChild(document.createTextNode(D)):n(D)&&x.appendChild(D)}),h(g,function(D,R){o(D)?x.setAttribute(R,D):d(D)&&a(R,"on")?x.addEventListener(R.slice(2),D,!1):R==="style"&&l(x,D)}),x},s.exports=e},6257:function(s,e){var r=Object.prototype.hasOwnProperty;e=function(n,o){return r.call(n,o)},s.exports=e},5044:function(s,e,r){var n=r(7348);e={encode:function(o){for(var a=[],c=0,l=o.length;c<l;c++){var h=o[c];a.push((h>>>4).toString(16)),a.push((15&h).toString(16))}return a.join("")},decode:function(o){var a=[],c=o.length;n(c)&&c--;for(var l=0;l<c;l+=2)a.push(parseInt(o.substr(l,2),16));return a}},s.exports=e},3651:function(s,e,r){var n=r(3783),o=r(4193);e=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o(d,a),l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"),h=c[h];var f=0,g=[];n(h,function(E){E.language&&(l=l.replace(E.re,function(A,w){return w?(g[f++]=e(w,E.language,d),A.replace(w,"___subtmpl"+(f-1)+"___")):A}))}),n(h,function(E,A){c[E.language]||(l=l.replace(E.re,"___"+A+"___$1___end"+A+"___"))});var _=[];return l=l.replace(/___(?!subtmpl)\w+?___/g,function(E){var A=E.substr(3,3)==="end",w=(A?E.substr(6):E.substr(3)).replace(/_/g,""),m=_.length>0?_[_.length-1]:null;return!A&&(m==null||w==m||m!=null&&h[m]&&h[m].embed!=null&&h[m].embed.indexOf(w)>-1)?(_.push(w),E):A&&w==m?(_.pop(),E):""}),n(h,function(E,A){var w=d[E.style]?' style="'.concat(d[E.style],'"'):"";l=l.replace(new RegExp("___end"+A+"___","g"),"</span>").replace(new RegExp("___"+A+"___","g"),'<span class="'.concat(E.style,'"').concat(w,">"))}),n(h,function(E){E.language&&(l=l.replace(/___subtmpl\d+___/g,function(A){var w=parseInt(A.replace(/___subtmpl(\d+)___/,"$1"),10);return g[w]}))}),l};var a={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},c={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};c.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:c.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},c.css={comment:c.js.comment,string:c.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},s.exports=e},5925:function(s,e){e=function(n){var o,a,c,l=n[0]/360,h=n[1]/100,d=n[2]/100,f=[];if(n[3]&&(f[3]=n[3]),h===0)return c=r(255*d),f[0]=f[1]=f[2]=c,f;for(var g=2*d-(o=d<.5?d*(1+h):d+h-d*h),_=0;_<3;_++)(a=l+.3333333333333333*-(_-1))<0&&a++,a>1&&a--,c=6*a<1?g+6*(o-g)*a:2*a<1?o:3*a<2?g+(o-g)*(.6666666666666666-a)*6:g,f[_]=r(255*c);return f};var r=Math.round;s.exports=e},7483:function(s,e,r){var n=r(8702),o=r(9001),a=r(6472),c=r(3783),l=r(6768),h=r(8820),d=function(g){return g.replace(/&quot;/g,'"')},f=function(g){return g.replace(/"/g,"&quot;")};e={parse:function(g){var _=[],E=new o;return n(g,{start:function(A,w){w=h(w,function(m){return d(m)}),E.push({tag:A,attrs:w})},end:function(){var A=E.pop();if(E.size){var w=E.peek();a(w.content)||(w.content=[]),w.content.push(A)}else _.push(A)},comment:function(A){var w="<!--".concat(A,"-->"),m=E.peek();m?(m.content||(m.content=[]),m.content.push(w)):_.push(w)},text:function(A){var w=E.peek();w?(w.content||(w.content=[]),w.content.push(A)):_.push(A)}}),_},stringify:function g(_){var E="";return a(_)?c(_,function(A){return E+=g(A)}):l(_)?E=_:(E+="<".concat(_.tag),c(_.attrs,function(A,w){return E+=" ".concat(w,'="').concat(f(A),'"')}),E+=">",_.content&&(E+=g(_.content)),E+="</".concat(_.tag,">")),E}},s.exports=e},6362:function(s,e){e=function(r){return r},s.exports=e},496:function(s,e){e=function(r,n,o){return Array.prototype.indexOf.call(r,n,o)},s.exports=e},5022:function(s,e,r){var n=r(1662);e=function(o,a){o.prototype=n(a.prototype)},s.exports=e},7190:function(s,e,r){var n=r(3783);e=function(o){var a={};return n(o,function(c,l){a[c]=l}),a},s.exports=e},7403:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Arguments]"},s.exports=e},6472:function(s,e,r){var n=r(106);e=Array.isArray?Array.isArray:function(o){return n(o)==="[object Array]"},s.exports=e},385:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object ArrayBuffer]"},s.exports=e},1369:function(s,e,r){var n=r(3990),o=r(4777),a=Math.pow(2,53)-1;e=function(c){if(!c)return!1;var l=c.length;return n(l)&&l>=0&&l<=a&&!o(c)},s.exports=e},4696:function(s,e){e=function(r){return r===!0||r===!1},s.exports=e},2727:function(s,e){e=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,s.exports=e},2349:function(s,e,r){var n=r(4777);e=function(o){return o!=null&&(!!o._isBuffer||o.constructor&&n(o.constructor.isBuffer)&&o.constructor.isBuffer(o))},s.exports=e},2520:function(s,e,r){var n=new(r(2765))("(prefers-color-scheme: dark)");e=function(){return n.isMatch()},s.exports=e},2106:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Date]"},s.exports=e},9833:function(s,e){e=function(r){return!(!r||r.nodeType!==1)},s.exports=e},8887:function(s,e,r){var n=r(1369),o=r(6472),a=r(6768),c=r(7403),l=r(2533);e=function(h){return h==null||(n(h)&&(o(h)||a(h)||c(h))?h.length===0:l(h).length===0)},s.exports=e},2749:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Error]"},s.exports=e},4777:function(s,e,r){var n=r(106);e=function(o){var a=n(o);return a==="[object Function]"||a==="[object GeneratorFunction]"||a==="[object AsyncFunction]"},s.exports=e},9585:function(s,e,r){var n=r(5610),o=n.getComputedStyle,a=n.document;function c(l,h){return l.right<h.left||l.left>h.right||l.bottom<h.top||l.top>h.bottom}e=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=h.display,f=d===void 0||d,g=h.visibility,_=g!==void 0&&g,E=h.opacity,A=E!==void 0&&E,w=h.size,m=w!==void 0&&w,b=h.viewport,y=b!==void 0&&b,x=h.overflow,D=x!==void 0&&x,R=o(l);if(f){var M=l.tagName;if(M==="BODY"||M==="HTML"||R.position==="fixed"){if(R.display==="none")return!0;for(var L=l;L=L.parentElement;)if(o(L).display==="none")return!0}else if(l.offsetParent===null)return!0}if(_&&R.visibility==="hidden")return!0;if(A){if(R.opacity==="0")return!0;for(var k=l;k=k.parentElement;)if(o(k).opacity==="0")return!0}var I=l.getBoundingClientRect();if(m&&(I.width===0||I.height===0))return!0;if(y)return c(I,{top:0,left:0,right:a.documentElement.clientWidth,bottom:a.documentElement.clientHeight});if(D)for(var V=l;V=V.parentElement;){var N=o(V).overflow;if((N==="scroll"||N==="hidden")&&c(I,V.getBoundingClientRect()))return!0}return!1},s.exports=e},2246:function(s,e,r){var n=r(3990);e=function(o){return n(o)&&o%1==0},s.exports=e},4219:function(s,e){e=function(r){try{return JSON.parse(r),!0}catch{return!1}},s.exports=e},3708:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Map]"},s.exports=e},7949:function(s,e,r){var n=r(2533);e=function(o,a){var c=n(a),l=c.length;if(o==null)return!l;o=Object(o);for(var h=0;h<l;h++){var d=c[h];if(a[d]!==o[d]||!(d in o))return!1}return!0},s.exports=e},9537:function(s,e,r){var n=r(4777);e=typeof wx<"u"&&n(wx.openLocation),s.exports=e},9956:function(s,e,r){var n=r(2727),o=r(1475),a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;e=o(function(l){return l=l||(n?navigator.userAgent:""),a.test(l)||c.test(l.substr(0,4))}),s.exports=e},9433:function(s,e,r){var n=r(3990);e=function(o){return n(o)&&o!==+o},s.exports=e},8740:function(s,e,r){var n=r(5166),o=r(4777),a=r(300);e=function(d){return!!n(d)&&(o(d)?l.test(a(d)):h.test(a(d)))};var c=Object.prototype.hasOwnProperty,l=new RegExp("^"+a(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=/^\[object .+?Constructor\]$/;s.exports=e},2763:function(s,e){e=function(r){return r==null},s.exports=e},1965:function(s,e,r){var n=r(106);e=typeof process<"u"&&n(process)==="[object process]",s.exports=e},6156:function(s,e){e=function(r){return r===null},s.exports=e},3990:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Number]"},s.exports=e},5166:function(s,e){e=function(r){var n=typeof r;return!!r&&(n==="function"||n==="object")},s.exports=e},7348:function(s,e,r){var n=r(2246);e=function(o){return!!n(o)&&o%2!=0},s.exports=e},6997:function(s,e){e=function(r){var n=typeof r;return r==null||n!=="function"&&n!=="object"},s.exports=e},4321:function(s,e,r){var n=r(5166),o=r(4777);e=function(a){return n(a)&&o(a.then)&&o(a.catch)},s.exports=e},1754:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object RegExp]"},s.exports=e},7470:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Set]"},s.exports=e},3843:function(s,e){e=function(r){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.defComparator,o=0,a=r.length;o<a-1;o++)if(n(r[o],r[o+1])>0)return!1;return!0},e.defComparator=function(r,n){return r<n?-1:r>n?1:0},s.exports=e},6768:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object String]"},s.exports=e},9804:function(s,e){e=function(r){return typeof r=="symbol"},s.exports=e},1286:function(s,e){e=function(r){return r===void 0},s.exports=e},7622:function(s,e,r){var n=r(8935);e=function(o){return n(o).join("-")},s.exports=e},2533:function(s,e,r){var n=r(6257);e=Object.keys?Object.keys:function(o){var a=[];for(var c in o)n(o,c)&&a.push(c);return a},s.exports=e},9702:function(s,e){e=function(r){var n=r?r.length:0;if(n)return r[n-1]},s.exports=e},3988:function(s,e,r){var n=r(2581),o=r(3783),a=r(2337);function c(l){return'<a href="'+l+'">'+l+"</a>"}e=function(l,h){h=h||c;var d=n(l);return o(d,function(f){l=l.replace(new RegExp(a(f),"g"),h)}),l},s.exports=e},9622:function(s,e){e=function(r,n){var o=document.createElement("script");o.src=r,o.onload=function(){var a=o.readyState&&o.readyState!="complete"&&o.readyState!="loaded";n&&n(!a)},o.onerror=function(){n(!1)},document.body.appendChild(o)},s.exports=e},3063:function(s,e,r){var n=r(3367);e=function(o){return n(o).toLocaleLowerCase()},s.exports=e},5351:function(s,e,r){var n=r(4552),o=r(3367);e=function(a,c,l){var h=(a=o(a)).length;return l=l||" ",h<c&&(a=(n(l,c-h)+a).slice(-c)),a},s.exports=e},7767:function(s,e){var r=/^\s+/;e=function(n,o){if(o==null)return n.trimLeft?n.trimLeft():n.replace(r,"");for(var a,c,l=0,h=n.length,d=o.length,f=!0;f&&l<h;)for(f=!1,a=-1,c=n.charAt(l);++a<d;)if(c===o[a]){f=!0,l++;break}return l>=h?"":n.substr(l,h)},s.exports=e},2461:function(s,e,r){var n=r(2838),o=r(2533),a=r(1369);e=function(c,l,h){l=n(l,h);for(var d=!a(c)&&o(c),f=(d||c).length,g=Array(f),_=0;_<f;_++){var E=d?d[_]:_;g[_]=l(c[E],E,c)}return g},s.exports=e},8820:function(s,e,r){var n=r(2838),o=r(2533);e=function(a,c,l){c=n(c,l);for(var h=o(a),d=h.length,f={},g=0;g<d;g++){var _=h[g];f[_]=c(a[_],_,a)}return f},s.exports=e},4491:function(s,e,r){var n=r(3021),o=r(7949);e=function(a){return a=n({},a),function(c){return o(c,a)}},s.exports=e},9853:function(s,e){e=function(){for(var r=arguments,n=r[0],o=1,a=r.length;o<a;o++)r[o]>n&&(n=r[o]);return n},s.exports=e},5026:function(s,e,r){var n=r(2533);e={getItem:function(d){return(a[d]?o[d]:this[d])||null},setItem:function(d,f){a[d]?o[d]=f:this[d]=f},removeItem:function(d){a[d]?delete o[d]:delete this[d]},key:function(d){var f=c();return d>=0&&d<f.length?f[d]:null},clear:function(){for(var d,f=l(),g=0;d=f[g];g++)delete this[d];f=h();for(var _,E=0;_=f[E];E++)delete o[_]}},Object.defineProperty(e,"length",{enumerable:!1,configurable:!0,get:function(){return c().length}});var o={},a={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function c(){return l().concat(h())}function l(){return n(e).filter(function(d){return!a[d]})}function h(){return n(o)}s.exports=e},1475:function(s,e,r){var n=r(6257);e=function(o,a){var c=function(l){var h=c.cache,d=""+(a?a.apply(this,arguments):l);return n(h,d)||(h[d]=o.apply(this,arguments)),h[d]};return c.cache={},c},s.exports=e},9971:function(s,e,r){e=r(1137)(function(n,o){for(var a=n.length,c=0,l=o.length;c<l;c++)for(var h=o[c],d=0,f=h.length;d<f;d++)n[a++]=h[d];return n.length=a,n}),s.exports=e},8573:function(s,e,r){var n=r(3783),o=r(6768),a=r(1286),c=r(6341),l=r(6472),h=r(5166),d=r(1352);(e=function(E,A){if(a(E))return w={},g(function(b,y){w[b]=y}),w;var w;if(o(E)&&a(A)||l(E))return function(b){if(!o(b)){var y={};return g(function(D,R){c(b,D)&&(y[D]=R)}),y}var x=_(b);if(x)return x.getAttribute("content")}(E);var m=E;h(m)||((m={})[E]=A),function(b){n(b,function(y,x){var D=_(x);if(D)return D.setAttribute("content",y);(D=f.createElement("meta")).setAttribute("name",x),D.setAttribute("content",y),f.head.appendChild(D)})}(m)}).remove=function(E){E=d(E),n(E,function(A){var w=_(A);w&&f.head.removeChild(w)})};var f=document;function g(E){var A=f.querySelectorAll("meta");n(A,function(w){var m=w.getAttribute("name"),b=w.getAttribute("content");m&&b&&E(m,b)})}function _(E){return f.querySelector('meta[name="'+E+'"]')}s.exports=e},6435:function(s,e){e=function(){for(var r=arguments,n=r[0],o=1,a=r.length;o<a;o++)r[o]<n&&(n=r[o]);return n},s.exports=e},4677:function(s,e,r){var n=r(3875),o=r(6768);e=function(h){if(o(h)){var d=h.match(l);return d?n(d[1])*a[d[2]||"ms"]:0}for(var f=h,g="ms",_=0,E=c.length;_<E;_++)if(f>=a[c[_]]){g=c[_];break}return+(f/a[g]).toFixed(2)+g};var a={ms:1,s:1e3};a.m=60*a.s,a.h=60*a.m,a.d=24*a.h,a.y=365.25*a.d;var c=["y","d","h","m","s"],l=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;s.exports=e},6339:function(s,e,r){var n=r(6930),o=r(5610),a=r(3367);function c(l,h){if(l=a(l),h=a(h),n(l,"_")&&!n(h,"_"))return 1;if(n(h,"_")&&!n(l,"_"))return-1;for(var d,f,g,_,E=/^\d+|^\D+/;;){if(!l)return h?-1:0;if(!h)return 1;if(d=l.match(E)[0],f=h.match(E)[0],g=!o.isNaN(d),_=!o.isNaN(f),g&&!_)return-1;if(_&&!g)return 1;if(g&&_){var A=d-f;if(A)return A;if(d.length!==f.length)return+d||+f?f.length-d.length:d.length-f.length}else if(d!==f)return d<f?-1:1;l=l.substring(d.length),h=h.substring(f.length)}}e=function(l){return l.sort(c)},s.exports=e},6837:function(s,e){function r(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}e=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(n){setImmediate(r(n))}:function(n){setTimeout(r(n),0)},s.exports=e},1214:function(s,e){e=function(){},s.exports=e},8847:function(s,e){e=Date.now?Date.now:function(){return new Date().getTime()},s.exports=e},106:function(s,e){var r=Object.prototype.toString;e=function(n){return r.call(n)},s.exports=e},8763:function(s,e,r){e=r(4198)(r(5637),2),s.exports=e},3955:function(s,e,r){var n=r(1286);e=function(o,a,c){if(n(a))return o;switch(c??3){case 1:return function(l){return o.call(a,l)};case 3:return function(l,h,d){return o.call(a,l,h,d)};case 4:return function(l,h,d,f){return o.call(a,l,h,d,f)}}return function(){return o.apply(a,arguments)}},s.exports=e},442:function(s,e,r){var n=r(1443),o=r(7653),a=window.screen;e={get:function(){if(a){var c=o(a,"orientation.type");if(c)return c.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},n.mixin(e),window.addEventListener("orientationchange",function(){setTimeout(function(){e.emit("change",e.get())},200)},!1),s.exports=e},8702:function(s,e,r){var n=r(9702),o=r(7913),a=r(6930),c=r(3063);e=function(_,E){for(var A,w=[],m=_;_;){if(A=!0,n(w)&&g[n(w)]){var b=new RegExp("</".concat(n(w),"[^>]*>")).exec(_);if(b){var y=_.substring(0,b.index);_=_.substring(b.index+b[0].length),y&&E.text&&E.text(y)}V("",n(w))}else{if(a(_,"<!--")){var x=_.indexOf("-->");x>=0&&(E.comment&&E.comment(_.substring(4,x)),_=_.substring(x+3),A=!1)}else if(a(_,"<!")){var D=_.match(l);D&&(E.text&&E.text(_.substring(0,D[0].length)),_=_.substring(D[0].length),A=!1)}else if(a(_,"</")){var R=_.match(h);R&&(_=_.substring(R[0].length),R[0].replace(h,V),A=!1)}else if(a(_,"<")){var M=_.match(d);M&&(_=_.substring(M[0].length),M[0].replace(d,I),A=!1)}if(A){var L=_.indexOf("<"),k=L<0?_:_.substring(0,L);_=L<0?"":_.substring(L),E.text&&E.text(k)}}if(m===_)throw Error("Parse Error: "+_);m=_}function I(N,B,H,z){if(B=c(B),(z=!!z)||w.push(B),E.start){var W={};H.replace(f,function(Q,X,G,q,Y){W[X]=G||q||Y||""}),E.start(B,W,z)}}function V(N,B){var H;if(B=c(B))for(H=w.length-1;H>=0&&w[H]!==B;H--);else H=0;if(H>=0){for(var z=w.length-1;z>=H;z--)E.end&&E.end(w[z]);w.length=H}}V()};var l=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,h=/^<\/([-A-Za-z0-9_]+)[^>]*>/,d=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,f=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,g=o("script,style".split(","));s.exports=e},4198:function(s,e,r){var n=r(1137),o=r(1352);e=n(function(a,c){return function(){var l=[];return l=(l=l.concat(c)).concat(o(arguments)),a.apply(this,l)}}),s.exports=e},1194:function(s,e,r){var n,o=r(8847),a=r(5610),c=a.performance,l=a.process;if(c&&c.now)e=function(){return c.now()};else if(l&&l.hrtime){var h=function(){var d=l.hrtime();return 1e9*d[0]+d[1]};n=h()-1e9*l.uptime(),e=function(){return(h()-n)/1e6}}else n=o(),e=function(){return o()-n};s.exports=e},3487:function(s,e,r){var n=r(6768),o=r(6472),a=r(6341),c=r(3783);e=function(l,h,d){if(n(h)&&(h=[h]),o(h)){var f=h;h=function(E,A){return a(f,A)}}var g={},_=function(E,A){h(E,A)&&(g[A]=E)};return d&&(_=function(E,A){h(E,A)||(g[A]=E)}),c(l,_),g},s.exports=e},747:function(s,e,r){var n=r(1475),o=r(7494),a=r(3023),c=r(6257),l=r(7622);(e=n(function(g){if(g=g.replace(d,""),g=o(g),c(f,g))return g;for(var _=h.length;_--;){var E=h[_]+a(g);if(c(f,E))return E}return g})).dash=n(function(g){var _=e(g);return(d.test(_)?"-":"")+l(_)});var h=["O","ms","Moz","Webkit"],d=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,f=document.createElement("p").style;s.exports=e},2994:function(s,e,r){var n=r(6472),o=r(7653);e=function(a){return n(a)?function(l){return o(l,a)}:(c=a,function(l){return l?.[c]});var c},s.exports=e},1745:function(s,e,r){var n=r(4331),o=r(3783),a=r(1286),c=r(6472),l=r(2461),h=r(8887),d=r(5972),f=r(5166);e={parse:function(_){var E={};return _=n(_).replace(g,""),o(_.split("&"),function(A){var w=A.split("="),m=w.shift(),b=w.length>0?w.join("="):null;m=decodeURIComponent(m),b=decodeURIComponent(b),a(E[m])?E[m]=b:c(E[m])?E[m].push(b):E[m]=[E[m],b]}),E},stringify:function(_,E){return d(l(_,function(A,w){return f(A)&&h(A)?"":c(A)?e.stringify(A,w):encodeURIComponent(E||w)+"="+encodeURIComponent(A)}),function(A){return A.length>0}).join("&")}};var g=/^(\?|#|&)/g;s.exports=e},1571:function(s,e,r){var n,o,a=r(8847),c=r(2727),l=0;if(c){n=window.requestAnimationFrame,o=window.cancelAnimationFrame;for(var h=["ms","moz","webkit","o"],d=0,f=h.length;d<f&&!n;d++)n=window[h[d]+"RequestAnimationFrame"],o=window[h[d]+"CancelAnimationFrame"]||window[h[d]+"CancelRequestAnimationFrame"];n&&(n=n.bind(window),o=o.bind(window))}o=o||function(g){clearTimeout(g)},(n=n||function(g){var _=a(),E=Math.max(0,16-(_-l)),A=setTimeout(function(){g(_+E)},E);return l=_+E,A}).cancel=o,e=n,s.exports=e},1216:function(s,e){e=function(r,n,o){n==null&&(n=r,r=0);var a=Math.random();return o||r%1||n%1?Math.min(r+a*(n-r+parseFloat("1e-"+((a+"").length-1))),n):r+Math.floor(a*(n-r+1))},s.exports=e},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(s){for(var e=new Uint8Array(s),r=0;r<s;r++)e[r]=random(0,255);return e},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(s){var e=new Uint8Array(s);return crypto.getRandomValues(e),e})):isNode&&(crypto=eval("require")("crypto"),exports=function(s){return crypto.randomBytes(s)}),module.exports=exports},4270:function(s,e){var r,n=[],o=document,a=o.documentElement.doScroll,c="DOMContentLoaded",l=(a?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);l||o.addEventListener(c,r=function(){for(o.removeEventListener(c,r),l=1;r=n.shift();)r()}),e=function(h){l?setTimeout(h,0):n.push(h)},s.exports=e},5852:function(s,e,r){var n=r(2838);e=function(o,a,c){var l=[];a=n(a,c);for(var h=-1,d=o.length;++h<d;){var f=h-l.length,g=o[f];a(g,h,o)&&(l.push(g),o.splice(f,1))}return l},s.exports=e},4552:function(s,e){e=function(r,n){var o="";if(n<1)return"";for(;n>0;)1&n&&(o+=r),n>>=1,r+=r;return o},s.exports=e},8368:function(s,e,r){var n=r(2337);e=function(o,a,c){return o.replace(new RegExp(n(a),"g"),c)},s.exports=e},1137:function(s,e){e=function(r,n){return n=n==null?r.length-1:+n,function(){var o,a=Math.max(arguments.length-n,0),c=new Array(a);for(o=0;o<a;o++)c[o]=arguments[o+n];switch(n){case 0:return r.call(this,c);case 1:return r.call(this,arguments[0],c);case 2:return r.call(this,arguments[0],arguments[1],c)}var l=new Array(n+1);for(o=0;o<n;o++)l[o]=arguments[o];return l[n]=c,r.apply(this,l)}},s.exports=e},1527:function(s,e){e=function(r){var n=r.length,o=Array(n);n--;for(var a=0;a<=n;a++)o[n-a]=r[a];return o},s.exports=e},3279:function(s,e){e=function(a){var c,l,h=a[0]/255,d=a[1]/255,f=a[2]/255,g=r(h,d,f),_=n(h,d,f),E=_-g;(c=r(60*(c=_===g?0:h===_?(d-f)/E:d===_?2+(f-h)/E:4+(h-d)/E),360))<0&&(c+=360);var A=(g+_)/2;l=_===g?0:A<=.5?E/(_+g):E/(2-_-g);var w=[o(c),o(100*l),o(100*A)];return a[3]&&(w[3]=a[3]),w};var r=Math.min,n=Math.max,o=Math.round;s.exports=e},5031:function(s,e,r){var n=r(6299);e=function(o){var a,c=window.location,l=c.hostname,h=c.pathname,d=l.split("."),f=h.split("/"),g="",_=f.length;if(!b())for(var E=d.length-1;E>=0;E--){var A=d[E];if(A!==""){if(b({domain:g=g===""?A:A+"."+g,path:a="/"})||b({domain:g}))return;for(var w=0;w<_;w++){var m=f[w];if(m!==""&&(b({domain:g,path:a+=m})||b({path:a})||b({domain:g,path:a+="/"})||b({path:a})))return}}}function b(y){return y=y||{},n.remove(o,y),!n.get(o)}},s.exports=e},5610:function(s,e,r){e=r(2727)?window:r.g,s.exports=e},3597:function(s,e){e=function(r,n){if(n==null){if(r.trimRight)return r.trimRight();n=` \r
	\f\v`}for(var o,a,c=r.length-1,l=n.length,h=!0;h&&c>=0;)for(h=!1,o=-1,a=r.charAt(c);++o<l;)if(a===n[o]){h=!0,c--;break}return c>=0?r.substring(0,c+1):""},s.exports=e},2838:function(s,e,r){var n=r(4777),o=r(5166),a=r(6472),c=r(3955),l=r(4491),h=r(6362),d=r(2994);e=function(f,g,_){return f==null?h:n(f)?c(f,g,_):o(f)&&!a(f)?l(f):d(f)},s.exports=e},7653:function(s,e,r){var n=r(1286),o=r(1694);e=function(a,c){var l;for(l=(c=o(c,a)).shift();!n(l);){if((a=a[l])==null)return;l=c.shift()}return a},s.exports=e},8079:function(s,e,r){var n=r(1694),o=r(1286),a=r(3367),c=r(9804),l=r(6768);e=function(h,d,f){var g,_=(d=n(d,h)).pop();for(g=d.shift();!o(g);){if(l(g)||c(g)||(g=a(g)),g==="__proto__"||g==="constructor"||g==="prototype")return;h[g]||(h[g]={}),h=h[g],g=d.shift()}h[_]=f},s.exports=e},615:function(s,e,r){var n=r(5026);e=function(o){var a;switch(o=o||"local"){case"local":a=window.localStorage;break;case"session":a=window.sessionStorage}try{var c="test-localStorage-"+Date.now();a.setItem(c,c);var l=a.getItem(c);if(a.removeItem(c),l!==c)throw new Error}catch{return n}return a},s.exports=e},4224:function(s,e,r){var n=r(6334);e=function(o,a){return o=new n(o),a=new n(a),o.port=0|o.port||(o.protocol==="https"?443:80),a.port=0|a.port||(a.protocol==="https"?443:80),o.protocol===a.protocol&&o.hostname===a.hostname&&o.port===a.port},s.exports=e},9677:function(s,e){e=function(r,n,o){var a=r.length;n=n==null?0:n<0?Math.max(a+n,0):Math.min(n,a),o=o==null?a:o<0?Math.max(a+o,0):Math.min(o,a);for(var c=[];n<o;)c.push(r[n++]);return c},s.exports=e},6053:function(s,e,r){var n=r(2838),o=r(1369),a=r(2533);e=function(c,l,h){l=n(l,h);for(var d=!o(c)&&a(c),f=(d||c).length,g=0;g<f;g++){var _=d?d[g]:g;if(l(c[_],_,c))return!0}return!1},s.exports=e},3629:function(s,e,r){var n=r(3843),o=r(4193),a=r(2533),c=r(6472),l=r(5166);e=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(f,h);var g=f.deep,_=f.comparator,E=[],A=[];return function w(m){var b,y=E.indexOf(m);if(y>-1)return A[y];if(c(m)){b=[],E.push(m),A.push(b);for(var x=0,D=m.length;x<D;x++){var R=m[x];g&&l(R)?b[x]=w(R):b[x]=R}}else{b={},E.push(m),A.push(b);for(var M=a(m).sort(_),L=0,k=M.length;L<k;L++){var I=M[L],V=m[I];g&&l(V)?b[I]=w(V):b[I]=V}}return b}(d)};var h={deep:!1,comparator:n.defComparator};s.exports=e},8935:function(s,e){var r=/([A-Z])/g,n=/[_.\- ]+/g,o=/(^-)|(-$)/g;e=function(a){return(a=a.replace(r,"-$1").toLowerCase().replace(n,"-").replace(o,"")).split("-")},s.exports=e},6930:function(s,e){e=function(r,n){return r.indexOf(n)===0},s.exports=e},4400:function(s,e,r){var n=r(3085),o=r(3023),a=r(3367),c=r(1286),l=r(4777),h=r(1754);e=function(d,f){return JSON.stringify(d,(g=[],_=[],function(E,A){if(g.length>0){var w=g.indexOf(this);w>-1?(g.splice(w+1),_.splice(w,1/0,E)):(g.push(this),_.push(E));var m=g.indexOf(A);m>-1&&(A=g[0]===A?"[Circular ~]":"[Circular ~."+_.slice(0,m).join(".")+"]")}else g.push(A);return h(A)||l(A)?A="["+o(n(A))+" "+a(A)+"]":c(A)&&(A=null),A}),f);var g,_},s.exports=e},9963:function(s,e,r){var n=r(4187),o=r(3085),a=r(3367),c=r(4858),l=r(300),h=r(2533),d=r(3783),f=r(7496),g=r(415),_=r(801),E=r(6329),A=r(4321),w=r(5972),m=r(8847),b=r(1116),y=r(6341),x=r(5166),D=r(9537),R=r(1662),M=r(6930),L=r(8079),k=r(9803),I=r(3487),V=r(1369);function N(G,q,Y,K){var se=[];return d(q,function(Se){var be,xe=Object.getOwnPropertyDescriptor(Y,Se),Ee=xe&&xe.get,J=xe&&xe.set;if(!K.accessGetter&&Ee)be="(...)";else try{if(be=Y[Se],y(K.ignore,be))return;A(be)&&be.catch(function(){})}catch(ne){be=ne.message}se.push("".concat(B(Se),":").concat(e(be,K))),Ee&&se.push("".concat(B("get "+a(Se)),":").concat(e(xe.get,K))),J&&se.push("".concat(B("set "+a(Se)),":").concat(e(xe.set,K)))}),'"'.concat(G,'":{')+se.join(",")+"}"}function B(G){return'"'.concat(z(G),'"')}function H(G){return'"'.concat(z(a(G)),'"')}function z(G){return n(G).replace(/\\'/g,"'").replace(/\t/g,"\\t")}e=function(G){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=q.self,K=q.startTime,se=K===void 0?m():K,Se=q.timeout,be=Se===void 0?0:Se,xe=q.depth,Ee=xe===void 0?0:xe,J=q.curDepth,ne=J===void 0?1:J,de=q.visitor,ue=de===void 0?new W:de,Fe=q.unenumerable,Ie=Fe!==void 0&&Fe,ye=q.symbol,$e=ye!==void 0&&ye,Oe=q.accessGetter,Le=Oe!==void 0&&Oe,He=q.ignore,tt=He===void 0?[]:He,Ze="",pt={visitor:ue,unenumerable:Ie,symbol:$e,accessGetter:Le,depth:Ee,curDepth:ne+1,timeout:be,startTime:se,ignore:tt},fe=o(G,!1);if(fe==="String")Ze=H(G);else if(fe==="Number")Ze=a(G),c(Ze,"Infinity")&&(Ze='{"value":"'.concat(Ze,'","type":"Number"}'));else if(fe==="NaN")Ze='{"value":"NaN","type":"Number"}';else if(fe==="Boolean")Ze=G?"true":"false";else if(fe==="Null")Ze="null";else if(fe==="Undefined")Ze='{"type":"Undefined"}';else if(fe==="Symbol"){var Ne="Symbol";try{Ne=a(G)}catch{}Ze='{"value":'.concat(H(Ne),',"type":"Symbol"}')}else{if(be&&m()-se>be)return H("Timeout");if(Ee&&ne>Ee)return H("{...}");Ze="{";var we,ke=[],De=ue.get(G);if(De?(we=De.id,ke.push('"reference":'.concat(we))):(we=ue.set(G),ke.push('"id":'.concat(we))),ke.push('"type":"'.concat(fe,'"')),c(fe,"Function")?ke.push('"value":'.concat(H(l(G)))):fe==="RegExp"&&ke.push('"value":'.concat(H(G))),!De){var Pe=h(G);if(Pe.length&&ke.push(N("enumerable",Pe,Y||G,pt)),Ie){var Je=_(b(G,{prototype:!1,unenumerable:!0}),Pe);Je.length&&ke.push(N("unenumerable",Je,Y||G,pt))}if($e){var Ye=w(b(G,{prototype:!1,symbol:!0}),function(vt){return typeof vt=="symbol"});Ye.length&&ke.push(N("symbol",Ye,Y||G,pt))}var Ct=g(G);if(Ct&&!y(tt,Ct)){var Rt='"proto":'.concat(e(Ct,E(pt,{self:Y||G})));ke.push(Rt)}}Ze+=ke.join(",")+"}"}return Ze};var W=f({initialize:function(){this.id=1,this.visited=[]},set:function(G){var q=this.visited,Y=this.id,K={id:Y,val:G};return q.push(K),this.id++,Y},get:function(G){for(var q=this.visited,Y=0,K=q.length;Y<K;Y++){var se=q[Y];if(G===se.val)return se}return!1}});function Q(G,q){var Y=q.map;if(!x(G))return G;var K=G.id,se=G.type,Se=G.value,be=G.proto,xe=G.reference,Ee=G.enumerable,J=G.unenumerable;if(xe)return G;if(se==="Number")return Se==="Infinity"?Number.POSITIVE_INFINITY:Se==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(se!=="Undefined"){var ne,de,ue;if(se==="Function")(ne=function(){}).toString=function(){return Se},be&&Object.setPrototypeOf(ne,Q(be,q));else if(se==="RegExp")ue=(de=Se).lastIndexOf("/"),ne=new RegExp(de.slice(1,ue),de.slice(ue+1));else{var Fe;se!=="Object"?(Fe=D?function(){}:new Function(se,""),be&&(Fe.prototype=Q(be,q)),ne=new Fe):ne=R(be?Q(be,q):null)}var Ie,ye={};return Ee&&(V(Ee)&&(Ie=Ee.length,delete Ee.length),Ee=I(Ee,function(Oe,Le){return!$e(Ee,Oe,Le)}),d(Ee,function(Oe,Le){(ye[Le]||{}).get||(ne[Le]=Q(Oe,q))}),Ie&&(ne.length=Ie)),J&&(J=I(J,function(Oe,Le){return!$e(J,Oe,Le)}),d(J,function(Oe,Le){var He=ye[Le]||{};if(!He.get)if(Oe=Q(Oe,q),x(Oe)&&Oe.reference){var tt=Oe.reference;Oe=function(){return Y[tt]},He.get=Oe}else He.value=Oe;He.enumerable=!1,ye[Le]=He})),k(ne,ye),Y[K]=ne,ne}function $e(Oe,Le,He){He=a(He);var tt=!1;return d(["get","set"],function(Ze){if(M(He,Ze+" ")){var pt=He.replace(Ze+" ","");Oe[pt]&&((Le=Q(Le,q))==="Timeout"&&(Le=X),L(ye,[pt,Ze],Le),tt=!0)}}),tt}}function X(){return"Timeout"}e.parse=function(G){var q={},Y=Q(JSON.parse(G),{map:q});return function(K){d(K,function(se){for(var Se=h(se),be=0,xe=Se.length;be<xe;be++){var Ee=Se[be];if(x(se[Ee])){var J=se[Ee].reference;J&&K[J]&&(se[Ee]=K[J])}}var ne=g(se);ne&&ne.reference&&K[ne.reference]&&Object.setPrototypeOf(se,K[ne.reference])})}(q),Y},s.exports=e},6677:function(s,e){var r=/<[^>]*>/g;e=function(n){return n.replace(r,"")},s.exports=e},1907:function(s,e,r){var n=r(6768),o=r(1352),a=r(6435),c=r(2461),l=r(4331);e=function(d){n(d)&&(d=o(d));for(var f="",g=arguments.length,_=new Array(g>1?g-1:0),E=1;E<g;E++)_[E-1]=arguments[E];for(var A=0,w=d.length;A<w;A++)f+=d[A],_[A]&&(f+=_[A]);for(var m=f.split(`
`),b=[],y=0,x=m.length;y<x;y++){var D=m[y].match(h);D&&b.push(D[1].length)}var R=b.length>0?a.apply(null,b):0;return l(c(m,function(M){return M[0]===" "?M.slice(R):M}).join(`
`))};var h=/^(\s+)\S+/;s.exports=e},2439:function(s,e,r){var n=r(6049);e=function(o,a){return n(o,a,!0)},s.exports=e},1352:function(s,e,r){var n=r(1369),o=r(2461),a=r(6472),c=r(6768);e=function(l){return l?a(l)?l:n(l)&&!c(l)?o(l):[l]:[]},s.exports=e},3474:function(s,e,r){var n=r(6768);e=function(o){return n(o)?(o=o.toLowerCase())!=="0"&&o!==""&&o!=="false":!!o},s.exports=e},4891:function(s,e){var r=document;if(e=function(o){var a=r.createElement("body");return a.innerHTML=o,a.childNodes[0]},r.createRange&&r.body){var n=r.createRange();n.selectNode(r.body),n.createContextualFragment&&(e=function(o){return n.createContextualFragment(o).childNodes[0]})}s.exports=e},9296:function(s,e,r){var n=r(3875);e=function(o){return o?(o=n(o))-o%1:o===0?o:0},s.exports=e},3875:function(s,e,r){var n=r(3990),o=r(5166),a=r(4777),c=r(6768);e=function(l){if(n(l))return l;if(o(l)){var h=a(l.valueOf)?l.valueOf():l;l=o(h)?h+"":h}return c(l)?+l:l===0?l:+l},s.exports=e},300:function(s,e,r){var n=r(2763);e=function(a){if(n(a))return"";try{return o.call(a)}catch{}try{return a+""}catch{}return""};var o=Function.prototype.toString;s.exports=e},3367:function(s,e){e=function(r){return r==null?"":r.toString()},s.exports=e},4331:function(s,e,r){var n=r(7767),o=r(3597);e=function(a,c){return c==null&&a.trim?a.trim():n(o(a,c),c)},s.exports=e},7756:function(s,e,r){var n=r(4193),o=r(1286);e=function(c,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n(h,a);var d=h.ellipsis,f=h.separator;if(l>c.length)return c;var g=l-d.length;if(g<1)return d;var _=c.slice(0,g);if(o(f))return _+d;if(c.indexOf(f,g)!==g){var E=_.lastIndexOf(f);E>-1&&(_=_.slice(0,E))}return _+d};var a={ellipsis:"..."};s.exports=e},3085:function(s,e,r){var n=r(106),o=r(9433),a=r(3063),c=r(2349);e=function(h){var d,f=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return h===null&&(d="Null"),h===void 0&&(d="Undefined"),o(h)&&(d="NaN"),c(h)&&(d="Buffer"),d||(d=n(h).match(l))&&(d=d[1]),d?f?a(d):d:""};var l=/^\[object\s+(.*?)]$/;s.exports=e},8166:function(s,e,r){var n=r(996),o=r(2461);e={encode:function(a){return a.length<32768?String.fromCodePoint.apply(String,a):o(n(a,32767),function(c){return String.fromCodePoint.apply(String,c)}).join("")},decode:function(a){for(var c=[],l=0,h=a.length;l<h;){var d=a.charCodeAt(l++);if(d>=55296&&d<=56319&&l<h){var f=a.charCodeAt(l++);(64512&f)==56320?c.push(((1023&d)<<10)+(1023&f)+65536):(c.push(d),l--)}else c.push(d)}return c}},s.exports=e},5484:function(s,e,r){var n=r(2727),o=r(8985),a=!1;function c(l){a&&e.emit(l)}e={start:function(){a=!0},stop:function(){a=!1}},o.mixin(e),n?(window.addEventListener("error",function(l){if(l.error)c(l.error);else if(l.message){var h=new Error(l.message);h.stack="Error: ".concat(l.message,` 
 at `).concat(l.filename,":").concat(l.lineno,":").concat(l.colno),c(h)}}),window.addEventListener("unhandledrejection",function(l){c(l.reason)})):(process.on("uncaughtException",c),process.on("unhandledRejection",c)),s.exports=e},7387:function(s,e,r){var n=r(8901),o=r(2533);e=function(f){return l.test(f)?f.replace(h,d):f};var a=r(7190)(n.map),c="(?:"+o(a).join("|")+")",l=new RegExp(c),h=new RegExp(c,"g");function d(f){return a[f]}s.exports=e},5229:function(s,e){var r=0;e=function(n){var o=++r+"";return n?n+o:o},s.exports=e},42:function(s,e,r){var n=r(5972);function o(a,c){return a===c}e=function(a,c){return c=c||o,n(a,function(l,h,d){for(var f=d.length;++h<f;)if(c(l,d[h]))return!1;return!0})},s.exports=e},4502:function(s,e,r){var n=r(3367);e=function(o){return n(o).toLocaleUpperCase()},s.exports=e},3023:function(s,e){e=function(r){return r.length<1?r:r[0].toUpperCase()+r.slice(1)},s.exports=e},5742:function(s,e,r){var n=r(8166);e={encode:function(m){for(var b=n.decode(m),y="",x=0,D=b.length;x<D;x++)y+=E(b[x]);return y},decode:function(m,b){o=n.decode(m),a=0,c=o.length,l=0,h=0,d=0,f=128,g=191;for(var y,x=[];(y=A(b))!==!1;)x.push(y);return n.encode(x)}};var o,a,c,l,h,d,f,g,_=String.fromCharCode;function E(m){if(!(4294967168&m))return _(m);var b,y,x="";for(4294965248&m?4294901760&m?!(4292870144&m)&&(b=3,y=240):(b=2,y=224):(b=1,y=192),x+=_((m>>6*b)+y);b>0;)x+=_(128|63&m>>6*(b-1)),b--;return x}function A(m){for(;;){if(a>=c&&d){if(m)return w();throw new Error("Invalid byte index")}if(a===c)return!1;var b=o[a];if(a++,d){if(b<f||b>g){if(m)return a--,w();throw new Error("Invalid continuation byte")}if(f=128,g=191,l=l<<6|63&b,++h===d){var y=l;return l=0,d=0,h=0,y}}else{if(!(128&b))return b;if((224&b)==192)d=1,l=31&b;else if((240&b)==224)b===224&&(f=160),b===237&&(g=159),d=2,l=15&b;else{if((248&b)!=240){if(m)return w();throw new Error("Invalid UTF-8 detected")}b===240&&(f=144),b===244&&(g=143),d=3,l=7&b}}}}function w(){var m=a-h-1;return a=m+1,l=0,d=0,h=0,f=128,g=191,o[m]}s.exports=e},5936:function(s,e,r){var n=r(3366);e=function(){var c=n(16);return c[6]=15&c[6]|64,c[8]=63&c[8]|128,o[c[0]]+o[c[1]]+o[c[2]]+o[c[3]]+"-"+o[c[4]]+o[c[5]]+"-"+o[c[6]]+o[c[7]]+"-"+o[c[8]]+o[c[9]]+"-"+o[c[10]]+o[c[11]]+o[c[12]]+o[c[13]]+o[c[14]]+o[c[15]]};for(var o=[],a=0;a<256;a++)o[a]=(a+256).toString(16).substr(1);s.exports=e},2578:function(s,e,r){var n=r(3783);e=function(o){var a=[];return n(o,function(c){a.push(c)}),a},s.exports=e},3514:function(s,e,r){var n=r(8573),o=r(9882),a=r(4331),c=r(3783),l=r(2461),h=r(9433);e=function(){var d=n("viewport");if(!d)return 1;d=l(d.split(","),function(A){return a(A)});var f=.25,g=5,_=1;c(d,function(A){var w=(A=A.split("="))[0];A=A[1],w==="initial-scale"&&(_=+A),w==="maximum-scale"&&(g=+A),w==="minimum-scale"&&(f=+A)});var E=o(_,f,g);return h(E)?1:E},s.exports=e},8933:function(s,e){e=function(r){for(var n=[],o=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),a=0;a<o.snapshotLength;a++)n.push(o.snapshotItem(a));return n},s.exports=e},3577:function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(s,e,r){var n,o=this&&this.__extends||(n=function(H,z){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Q){W.__proto__=Q}||function(W,Q){for(var X in Q)Object.prototype.hasOwnProperty.call(Q,X)&&(W[X]=Q[X])},n(H,z)},function(H,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function W(){this.constructor=H}n(H,z),H.prototype=z===null?Object.create(z):(W.prototype=z.prototype,new W)}),a=this&&this.__assign||function(){return a=Object.assign||function(H){for(var z,W=1,Q=arguments.length;W<Q;W++)for(var X in z=arguments[W])Object.prototype.hasOwnProperty.call(z,X)&&(H[X]=z[X]);return H},a.apply(this,arguments)},c=this&&this.__values||function(H){var z=typeof Symbol=="function"&&Symbol.iterator,W=z&&H[z],Q=0;if(W)return W.call(H);if(H&&typeof H.length=="number")return{next:function(){return H&&Q>=H.length&&(H=void 0),{value:H&&H[Q++],done:!H}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(e,"__esModule",{value:!0});var h=l(r(1160)),d=r(7669),f=r(2062),g=l(r(242)),_=l(r(2439)),E=l(r(3063)),A=l(r(3783)),w=l(r(3009)),m=l(r(5044)),b=l(r(4502)),y=l(r(6329)),x=l(r(7494)),D=l(r(6341)),R=l(r(3875)),M=l(r(3577)),L=l(r(6768));r(8169);var k=function(H){function z(W,Q){Q===void 0&&(Q={});var X=H.call(this,W,{compName:"dom-highlighter"},Q)||this;return X.overlay=new d.HighlightOverlay(window),X.reset=function(){var G=document.documentElement.clientWidth,q=document.documentElement.clientHeight;X.overlay.reset({viewportSize:{width:G,height:q},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},X.initOptions(Q,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),X.overlay.setContainer(W),X.overlay.setPlatform("mac"),X.redraw=(0,_.default)(function(){X.reset(),X.draw()},16),X.redraw(),X.bindEvent(),X}return o(z,H),z.prototype.highlight=function(W,Q){Q&&(0,y.default)(this.options,Q),this.target=W,W instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new g.default(W),this.resizeSensor.addListener(this.redraw)),this.redraw()},z.prototype.hide=function(){this.target=null,this.redraw()},z.prototype.intercept=function(W){this.interceptor=W},z.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),H.prototype.destroy.call(this)},z.prototype.draw=function(){var W=this.target;W&&(W instanceof Text?this.drawText(W):this.drawElement(W))},z.prototype.drawText=function(W){var Q=this.options,X=document.createRange();X.selectNode(W);var G=X.getBoundingClientRect(),q=G.left,Y=G.top,K=G.width,se=G.height;X.detach();var Se={paths:[{path:this.rectToPath({left:q,top:Y,width:K,height:se}),fillColor:N(Q.contentColor),name:"content"}],showExtensionLines:Q.showExtensionLines,showRulers:Q.showRulers};Q.showInfo&&(Se.elementInfo={tagName:"#text",nodeWidth:K,nodeHeight:se}),this.overlay.drawHighlight(Se)},z.prototype.drawElement=function(W){var Q={paths:this.getPaths(W),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(Q.elementInfo=this.getElementInfo(W)),this.interceptor){var X=this.interceptor(Q);X&&(Q=X)}this.overlay.drawHighlight(Q)},z.prototype.getPaths=function(W){var Q=this.options,X=window.getComputedStyle(W),G=W.getBoundingClientRect(),q=G.left,Y=G.top,K=G.width,se=G.height,Se=function(Le){return(0,f.pxToNum)(X.getPropertyValue(Le))},be=Se("margin-left"),xe=Se("margin-right"),Ee=Se("margin-top"),J=Se("margin-bottom"),ne=Se("border-left-width"),de=Se("border-right-width"),ue=Se("border-top-width"),Fe=Se("border-bottom-width"),Ie=Se("padding-left"),ye=Se("padding-right"),$e=Se("padding-top"),Oe=Se("padding-bottom");return[{path:this.rectToPath({left:q+ne+Ie,top:Y+ue+$e,width:K-ne-Ie-de-ye,height:se-ue-$e-Fe-Oe}),fillColor:N(Q.contentColor),name:"content"},{path:this.rectToPath({left:q+ne,top:Y+ue,width:K-ne-de,height:se-ue-Fe}),fillColor:N(Q.paddingColor),name:"padding"},{path:this.rectToPath({left:q,top:Y,width:K,height:se}),fillColor:N(Q.borderColor),name:"border"},{path:this.rectToPath({left:q-be,top:Y-Ee,width:K+be+xe,height:se+Ee+J}),fillColor:N(Q.marginColor),name:"margin"}]},z.prototype.getElementInfo=function(W){var Q=W.getBoundingClientRect(),X=Q.width,G=Q.height,q=W.getAttribute("class")||"";q=q.split(/\s+/).map(function(K){return"."+K}).join("");var Y={tagName:(0,E.default)(W.tagName),className:q,idValue:W.id,nodeWidth:X,nodeHeight:G};return this.options.showStyles&&(Y.style=this.getStyles(W)),this.options.showAccessibilityInfo&&(0,y.default)(Y,this.getAccessibilityInfo(W)),Y},z.prototype.getStyles=function(W){for(var Q=window.getComputedStyle(W),X=!1,G=W.childNodes,q=0,Y=G.length;q<Y;q++)G[q].nodeType===3&&(X=!0);var K=[];return X&&K.push("color","font-family","font-size","line-height"),K.push("padding","margin","background-color"),B(Q,K)},z.prototype.getAccessibilityInfo=function(W){var Q=window.getComputedStyle(W);return a({showAccessibilityInfo:!0,contrast:a({contrastAlgorithm:"aa",textOpacity:.1},B(Q,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(W)},this.getAccessibleNameAndRole(W))},z.prototype.isFocusable=function(W){var Q=(0,E.default)(W.tagName);if((0,D.default)(["a","button","input","textarea","select","details"],Q))return!0;var X=W.getAttribute("tabindex");return!!(X&&(0,R.default)(X)>-1)},z.prototype.getAccessibleNameAndRole=function(W){var Q=W.getAttribute("labelledby")||W.getAttribute("aria-label"),X=W.getAttribute("role"),G=(0,E.default)(W.tagName);return M.default.forEach(function(q){var Y,K;if(!X){var se=q[0],Se=q[2];if(se===G){if(Se)try{for(var be=c(Se),xe=be.next();!xe.done;xe=be.next()){var Ee=xe.value;if(W.getAttribute(Ee[0])!==Ee[1])return}}catch(J){Y={error:J}}finally{try{xe&&!xe.done&&(K=be.return)&&K.call(be)}finally{if(Y)throw Y.error}}X=q[1]}}}),{accessibleName:Q||W.getAttribute("title")||"",accessibleRole:X||"generic"}},z.prototype.bindEvent=function(){var W=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return W.redraw()})},z.prototype.rectToPath=function(W){var Q=W.left,X=W.top,G=W.width,q=W.height,Y=[];return Y.push("M",Q,X),Y.push("L",Q+G,X),Y.push("L",Q+G,X+q),Y.push("L",Q,X+q),Y.push("Z"),Y},z}(h.default);e.default=k,s.exports=k,s.exports.default=k;var I=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,V=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function N(H){return(0,L.default)(H)?H:H.a?"rgba(".concat(H.r,", ").concat(H.g,", ").concat(H.b,", ").concat(H.a,")"):"rgb(".concat(H.r,", ").concat(H.g,", ").concat(H.b,")")}function B(H,z,W){W===void 0&&(W=!1);var Q={};return(0,A.default)(z,function(X){var G,q=H[X==="text-opacity"?"color":X];q&&(G=q,(I.test(G)||V.test(G))&&(q=function(Y){var K=w.default.parse(Y),se=K.val[3]||1;return K.val=K.val.slice(0,3),K.val.push(Math.round(255*se)),"#"+(0,b.default)(m.default.encode(K.val))}(q),X==="text-opacity"&&(q=q.slice(7),q=m.default.decode(q)[0]/255)),W&&(X=(0,x.default)(X)),Q[X]=q)}),Q}},9706:function(s,e){var r=this&&this.__read||function(N,B){var H=typeof Symbol=="function"&&N[Symbol.iterator];if(!H)return N;var z,W,Q=H.call(N),X=[];try{for(;(B===void 0||B-- >0)&&!(z=Q.next()).done;)X.push(z.value)}catch(G){W={error:G}}finally{try{z&&!z.done&&(H=Q.return)&&H.call(Q)}finally{if(W)throw W.error}}return X},n=this&&this.__values||function(N){var B=typeof Symbol=="function"&&Symbol.iterator,H=B&&N[B],z=0;if(H)return H.call(N);if(N&&typeof N.length=="number")return{next:function(){return N&&z>=N.length&&(N=void 0),{value:N&&N[z++],done:!N}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(N,B){var H=N[3];return[(1-H)*B[0]+H*N[0],(1-H)*B[1]+H*N[1],(1-H)*B[2]+H*N[2],H+B[3]*(1-H)]}function a(N){var B=r(N,3),H=B[0],z=B[1],W=B[2];return .2126*(H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4))+.7152*(z<=.03928?z/12.92:Math.pow((z+.055)/1.055,2.4))+.0722*(W<=.03928?W/12.92:Math.pow((W+.055)/1.055,2.4))}Object.defineProperty(e,"__esModule",{value:!0}),e.getContrastThreshold=e.isLargeFont=e.getAPCAThreshold=e.desiredLuminanceAPCA=e.contrastRatioByLuminanceAPCA=e.contrastRatioAPCA=e.luminanceAPCA=e.contrastRatio=e.luminance=e.rgbaToHsla=e.blendColors=void 0,e.blendColors=o,e.rgbaToHsla=function(N){var B=r(N,4),H=B[0],z=B[1],W=B[2],Q=B[3],X=Math.max(H,z,W),G=Math.min(H,z,W),q=X-G,Y=X+G,K=.5*Y;return[G===X?0:H===X?(.16666666666666666*(z-W)/q+1)%1:z===X?.16666666666666666*(W-H)/q+.3333333333333333:.16666666666666666*(H-z)/q+.6666666666666666,K===0||K===1?0:K<=.5?q/Y:q/(2-Y),K,Q]},e.luminance=a,e.contrastRatio=function(N,B){var H=a(o(N,B)),z=a(B);return(Math.max(H,z)+.05)/(Math.min(H,z)+.05)};var c=2.4,l=.55,h=.58,d=.62,f=.57,g=.03,_=1.45,E=1.25,A=1.25,w=5e-4,m=.078,b=12.82051282051282,y=.06,x=.001;function D(N){var B=r(N,3),H=B[0],z=B[1],W=B[2];return .2126729*Math.pow(H,c)+.7151522*Math.pow(z,c)+.072175*Math.pow(W,c)}function R(N){return N>g?N:N+Math.pow(g-N,_)}function M(N,B){if(N=R(N),B=R(B),Math.abs(N-B)<w)return 0;var H=0;return 100*(H=B>=N?(H=(Math.pow(B,l)-Math.pow(N,h))*E)<x?0:H<m?H-H*b*y:H-y:(H=(Math.pow(B,d)-Math.pow(N,f))*A)>-x?0:H>-m?H-H*b*y:H+y)}e.luminanceAPCA=D,e.contrastRatioAPCA=function(N,B){return M(D(N),D(B))},e.contrastRatioByLuminanceAPCA=M,e.desiredLuminanceAPCA=function(N,B,H){function z(){return H?Math.pow(Math.abs(Math.pow(N,d)-(-B-y)/A),1/f):Math.pow(Math.abs(Math.pow(N,l)-(B+y)/E),1/h)}N=R(N),B/=100;var W=z();return(W<0||W>1)&&(H=!H,W=z()),W};var L=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function k(N,B){var H=72*parseFloat(N.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(B)!==-1?H>=14:H>=18}L.reverse(),e.getAPCAThreshold=function(N,B){var H,z,W,Q,X=parseFloat(N.replace("px","")),G=parseFloat(B);try{for(var q=n(L),Y=q.next();!Y.done;Y=q.next()){var K=r(Y.value),se=K[0],Se=K.slice(1);if(X>=se)try{for(var be=(W=void 0,n([900,800,700,600,500,400,300,200,100].entries())),xe=be.next();!xe.done;xe=be.next()){var Ee=r(xe.value,2),J=Ee[0];if(G>=Ee[1]){var ne=Se[Se.length-1-J];return ne===-1?null:ne}}}catch(de){W={error:de}}finally{try{xe&&!xe.done&&(Q=be.return)&&Q.call(be)}finally{if(W)throw W.error}}}}catch(de){H={error:de}}finally{try{Y&&!Y.done&&(z=q.return)&&z.call(q)}finally{if(H)throw H.error}}return null},e.isLargeFont=k;var I={aa:3,aaa:4.5},V={aa:4.5,aaa:7};e.getContrastThreshold=function(N,B){return k(N,B)?I:V}},9434:function(s,e){var r=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,g=f&&d[f],_=0;if(g)return g.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&_>=d.length&&(d=void 0),{value:d&&d[_++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(d,f){var g=typeof Symbol=="function"&&d[Symbol.iterator];if(!g)return d;var _,E,A=g.call(d),w=[];try{for(;(f===void 0||f-- >0)&&!(_=A.next()).done;)w.push(_.value)}catch(m){E={error:m}}finally{try{_&&!_.done&&(g=A.return)&&g.call(A)}finally{if(E)throw E.error}}return w},o=this&&this.__spreadArray||function(d,f,g){if(g||arguments.length===2)for(var _,E=0,A=f.length;E<A;E++)!_&&E in f||(_||(_=Array.prototype.slice.call(f,0,E)),_[E]=f[E]);return d.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(e,"__esModule",{value:!0}),e.adoptStyleSheet=e.constrainNumber=e.ellipsify=e.createElement=e.createTextChild=e.createChild=e.log=e.Overlay=void 0;var a=function(){function d(f,g){g===void 0&&(g=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=f,this._document=f.document,Array.isArray(g)||(g=[g]),this.style=g}return d.prototype.setCanvas=function(f){this.canvas=f,this._context=f.getContext("2d")},d.prototype.install=function(){var f,g;try{for(var _=r(this.style),E=_.next();!E.done;E=_.next())h(E.value)}catch(A){f={error:A}}finally{try{E&&!E.done&&(g=_.return)&&g.call(_)}finally{if(f)throw f.error}}this._installed=!0},d.prototype.uninstall=function(){var f,g,_=function(w){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(m){return m!==w})};try{for(var E=r(this.style),A=E.next();!A.done;A=E.next())_(A.value)}catch(w){f={error:w}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(f)throw f.error}}this._installed=!1},d.prototype.reset=function(f){f&&(this.viewportSize=f.viewportSize,this.visualViewportSize=f.visualViewportSize,this.deviceScaleFactor=f.deviceScaleFactor,this.pageScaleFactor=f.pageScaleFactor,this.pageZoomFactor=f.pageZoomFactor,this.emulationScaleFactor=f.emulationScaleFactor,this.scrollX=Math.round(f.scrollX),this.scrollY=Math.round(f.scrollY)),this.resetCanvas()},d.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},d.prototype.setPlatform=function(f){this.platform=f,this._installed||this.install()},d.prototype.dispatch=function(f){this[f.shift()].apply(this,f)},d.prototype.eventHasCtrlOrMeta=function(f){return this.platform==="mac"?f.metaKey&&!f.ctrlKey:f.ctrlKey&&!f.metaKey},Object.defineProperty(d.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),d}();function c(d,f,g){var _=l(f,g);return _.addEventListener("click",function(E){E.stopPropagation()},!1),d.appendChild(_),_}function l(d,f){var g=document.createElement(d);if(f){var _=f.split(/\s+/);_=_.map(function(E){return"luna-dom-highlighter-"+E}),g.className=_.join(" ")}return g}function h(d){document.adoptedStyleSheets=o(o([],n(document.adoptedStyleSheets),!1),[d],!1)}e.Overlay=a,e.log=function(d){var f=document.getElementById("log");f||((f=c(document.body,"div")).id="log"),c(f,"div").textContent=d},e.createChild=c,e.createTextChild=function(d,f){var g=document.createTextNode(f);return d.appendChild(g),g},e.createElement=l,e.ellipsify=function(d,f){return d.length<=f?String(d):d.substr(0,f-1)+"…"},e.constrainNumber=function(d,f,g){return d<f?d=f:d>g&&(d=g),d},e.adoptStyleSheet=h},1521:function(s,e,r){var n=this&&this.__values||function(b){var y=typeof Symbol=="function"&&Symbol.iterator,x=y&&b[y],D=0;if(x)return x.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&D>=b.length&&(b=void 0),{value:b&&b[D++],done:!b}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(b,y){var x=typeof Symbol=="function"&&b[Symbol.iterator];if(!x)return b;var D,R,M=x.call(b),L=[];try{for(;(y===void 0||y-- >0)&&!(D=M.next()).done;)L.push(D.value)}catch(k){R={error:k}}finally{try{D&&!D.done&&(x=M.return)&&x.call(M)}finally{if(R)throw R.error}}return L},a=this&&this.__spreadArray||function(b,y,x){if(x||arguments.length===2)for(var D,R=0,M=y.length;R<M;R++)!D&&R in y||(D||(D=Array.prototype.slice.call(y,0,R)),D[R]=y[R]);return b.concat(D||Array.prototype.slice.call(y))},c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.drawPath=e.formatColor=e.formatRgba=e.parseHexa=e.createPathForQuad=e.hatchFillPath=e.applyMatrixToPoint=e.emptyBounds=e.buildPath=e.fillPathWithBoxStyle=e.drawPathWithLineStyle=void 0;var l=c(r(4858)),h=r(9706);function d(b,y,x){var D=0;function R(k){for(var I=[],V=0;V<k;++V){var N=Math.round(b[D++]*x);y.maxX=Math.max(y.maxX,N),y.minX=Math.min(y.minX,N);var B=Math.round(b[D++]*x);y.maxY=Math.max(y.maxY,B),y.minY=Math.min(y.minY,B),y.leftmostXForY[B]=Math.min(y.leftmostXForY[B]||Number.MAX_VALUE,N),y.rightmostXForY[B]=Math.max(y.rightmostXForY[B]||Number.MIN_VALUE,N),y.topmostYForX[N]=Math.min(y.topmostYForX[N]||Number.MAX_VALUE,B),y.bottommostYForX[N]=Math.max(y.bottommostYForX[N]||Number.MIN_VALUE,B),y.allPoints.push({x:N,y:B}),I.push(N,B)}return I}for(var M=b.length,L=new Path2D;D<M;)switch(b[D++]){case"M":L.moveTo.apply(L,R(1));break;case"L":L.lineTo.apply(L,R(1));break;case"C":L.bezierCurveTo.apply(L,R(3));break;case"Q":L.quadraticCurveTo.apply(L,R(2));break;case"Z":L.closePath()}return L}e.drawPathWithLineStyle=function(b,y,x,D){D===void 0&&(D=1),x&&x.color&&(b.save(),b.translate(.5,.5),b.lineWidth=D,x.pattern==="dashed"&&b.setLineDash([3,3]),x.pattern==="dotted"&&b.setLineDash([2,2]),b.strokeStyle=x.color,b.stroke(y),b.restore())},e.fillPathWithBoxStyle=function(b,y,x,D,R){R&&(b.save(),R.fillColor&&(b.fillStyle=R.fillColor,b.fill(y)),R.hatchColor&&A(b,y,x,10,R.hatchColor,D,!1),b.restore())},e.buildPath=d,e.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},e.applyMatrixToPoint=function(b,y){var x=new DOMPoint(b.x,b.y);return{x:(x=x.matrixTransform(y)).x,y:x.y}};var f,g=5,_=3,E="";function A(b,y,x,D,R,M,L){if((b.canvas.width<x.maxX-x.minX||b.canvas.height<x.maxY-x.minY)&&(x={minX:0,maxX:b.canvas.width,minY:0,maxY:b.canvas.height,allPoints:[]}),!f||R!==E){E=R;var k=document.createElement("canvas");k.width=D,k.height=g+_;var I=k.getContext("2d");I.clearRect(0,0,k.width,k.height),I.rect(0,0,1,g),I.fillStyle=R,I.fill(),f=b.createPattern(k,"repeat")}b.save();var V=new DOMMatrix;f.setTransform(V.scale(L?-1:1,1).rotate(0,0,-45+M)),b.fillStyle=f,b.fill(y),b.restore()}function w(b){return(b.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(y){return parseInt(y,16)/255})}function m(b,y){if(y==="rgb"){var x=o(b,4),D=x[0],R=x[1],M=x[2],L=x[3];return"rgb(".concat((255*D).toFixed()," ").concat((255*R).toFixed()," ").concat((255*M).toFixed()).concat(L===1?"":" / "+Math.round(100*L)/100,")")}if(y==="hsl"){var k=o((0,h.rgbaToHsla)(b),4),I=k[0],V=k[1],N=k[2];return L=k[3],"hsl(".concat(Math.round(360*I),"deg ").concat(Math.round(100*V)," ").concat(Math.round(100*N)).concat(L===1?"":" / "+Math.round(100*L)/100,")")}throw new Error("NOT_REACHED")}e.hatchFillPath=A,e.createPathForQuad=function(b,y,x,D){var R,M,L=["M",b.p1.x,b.p1.y,"L",b.p2.x,b.p2.y,"L",b.p3.x,b.p3.y,"L",b.p4.x,b.p4.y];try{for(var k=n(y),I=k.next();!I.done;I=k.next()){var V=I.value;L=a(a([],o(L),!1),["L",V.p4.x,V.p4.y,"L",V.p3.x,V.p3.y,"L",V.p2.x,V.p2.y,"L",V.p1.x,V.p1.y,"L",V.p4.x,V.p4.y,"L",b.p4.x,b.p4.y],!1)}}catch(N){R={error:N}}finally{try{I&&!I.done&&(M=k.return)&&M.call(k)}finally{if(R)throw R.error}}return L.push("Z"),d(L,x,D)},e.parseHexa=w,e.formatRgba=m,e.formatColor=function(b,y){return y==="rgb"||y==="hsl"?m(w(b),y):(0,l.default)(b,"FF")?b.substr(0,7):b},e.drawPath=function(b,y,x,D,R,M,L){b.save();var k=d(y,M,L);return x&&(b.fillStyle=x,b.fill(k)),D&&(R==="dashed"&&b.setLineDash([3,3]),R==="dotted"&&b.setLineDash([2,2]),b.lineWidth=2,b.strokeStyle=D,b.stroke(k)),b.restore(),k}},7669:function(s,e,r){var n,o=this&&this.__extends||(n=function(w,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(b[x]=y[x])},n(w,m)},function(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function b(){this.constructor=w}n(w,m),w.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}),a=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.HighlightOverlay=void 0;var c=a(r(4858)),l=r(9706),h=r(9434),d=r(1521),f=function(w){function m(){var b=w!==null&&w.apply(this,arguments)||this;return b.gridLabelState={gridLayerCounter:0},b}return o(m,w),m.prototype.setContainer=function(b){this._container=b},m.prototype.setPlatform=function(b){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+b),w.prototype.setPlatform.call(this,b)},Object.defineProperty(m.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),m.prototype.reset=function(b){w.prototype.reset.call(this,b),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},m.prototype.install=function(){var b=this.document.createElement("canvas");b.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(b);var y=this.document.createElement("div");this.container.appendChild(y),this.tooltip=y,this.setCanvas(b),w.prototype.install.call(this)},m.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",w.prototype.uninstall.call(this)},m.prototype.drawHighlight=function(b){this.context.save();for(var y=(0,d.emptyBounds)(),x=b.paths.slice();x.length;){var D=x.pop();D&&(this.context.save(),(0,d.drawPath)(this.context,D.path,D.fillColor,D.outlineColor,void 0,y,this.emulationScaleFactor),x.length&&(this.context.globalCompositeOperation="destination-out",(0,d.drawPath)(this.context,x[x.length-1].path,"red",void 0,void 0,y,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var R=!!(b.paths.length&&b.showRulers&&y.minX<20&&y.maxX+20<this.canvasWidth),M=!!(b.paths.length&&b.showRulers&&y.minY<20&&y.maxY+20<this.canvasHeight);return b.showRulers&&this.drawAxis(this.context,R,M),b.paths.length&&(b.showExtensionLines&&function(L,k,I,V,N,B,H,z){L.save();var W=H,Q=z;if(L.strokeStyle=N||A,L.lineWidth=1,L.translate(.5,.5),B&&L.setLineDash([3,3]),I)for(var X in k.rightmostXForY)L.beginPath(),L.moveTo(W,Number(X)),L.lineTo(k.rightmostXForY[X],Number(X)),L.stroke();else for(var X in k.leftmostXForY)L.beginPath(),L.moveTo(0,Number(X)),L.lineTo(k.leftmostXForY[X],Number(X)),L.stroke();if(V)for(var G in k.bottommostYForX)L.beginPath(),L.moveTo(Number(G),Q),L.lineTo(Number(G),k.topmostYForX[G]),L.stroke();else for(var G in k.topmostYForX)L.beginPath(),L.moveTo(Number(G),0),L.lineTo(Number(G),k.topmostYForX[G]),L.stroke();L.restore()}(this.context,y,R,M,void 0,!1,this.canvasWidth,this.canvasHeight),b.elementInfo&&function(L,k,I,V,N,B){L.innerHTML="";var H=(0,h.createChild)(L,"div"),z=(0,h.createChild)(H,"div","tooltip-content"),W=function(Oe,Le){var He=(0,h.createElement)("div","element-info"),tt=(0,h.createChild)(He,"div","element-info-header"),Ze=function(ft){return ft.layoutObjectName&&(0,c.default)(ft.layoutObjectName,"Grid")?"grid":ft.layoutObjectName&&ft.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(Oe);Ze&&(0,h.createChild)(tt,"div","element-layout-type ".concat(Ze));var pt=(0,h.createChild)(tt,"div","element-description");(0,h.createChild)(pt,"span","material-tag-name").textContent=Oe.tagName;var fe=(0,h.createChild)(pt,"span","material-node-id"),Ne=80;fe.textContent=Oe.idValue?"#"+(0,h.ellipsify)(Oe.idValue,Ne):"",fe.classList.toggle("hidden",!Oe.idValue);var we=(0,h.createChild)(pt,"span","material-class-name");fe.textContent.length<Ne&&(we.textContent=(0,h.ellipsify)(Oe.className||"",Ne-fe.textContent.length)),we.classList.toggle("hidden",!Oe.className);var ke=(0,h.createChild)(tt,"div","dimensions");(0,h.createChild)(ke,"span","material-node-width").textContent=String(Math.round(100*Oe.nodeWidth)/100),(0,h.createTextChild)(ke,"×"),(0,h.createChild)(ke,"span","material-node-height").textContent=String(Math.round(100*Oe.nodeHeight)/100);var De,Pe=Oe.style||{};Oe.isLockedAncestor&&at("Showing content-visibility ancestor",""),Oe.isLocked&&at("Descendants are skipped due to content-visibility","");var Je=Pe.color;Je&&Je!=="#00000000"&&qe("Color",Je,Le);var Ye=Pe["font-family"],Ct=Pe["font-size"];Ye&&Ct!=="0px"&&at("Font","".concat(Ct," ").concat(Ye));var Rt=Pe["background-color"];Rt&&Rt!=="#00000000"&&qe("Background",Rt,Le);var vt=Pe.margin;vt&&vt!=="0px"&&at("Margin",vt);var ut=Pe.padding;ut&&ut!=="0px"&&at("Padding",ut);var nt=Oe.contrast?Oe.contrast.backgroundColor:null,Re=Je&&Je!=="#00000000"&&nt&&nt!=="#00000000";Oe.showAccessibilityInfo&&(lt("Accessibility"),Re&&Pe.color&&Oe.contrast&&et(Pe.color,Oe.contrast),at("Name",Oe.accessibleName),at("Role",Oe.accessibleRole),yt("Keyboard-focusable",Oe.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function it(){De||(De=(0,h.createChild)(He,"div","element-info-body"))}function lt(ft){it();var St=(0,h.createChild)(De,"div","element-info-row element-info-section");(0,h.createChild)(St,"div","section-name").textContent=ft,(0,h.createChild)((0,h.createChild)(St,"div","separator-container"),"div","separator")}function dt(ft,St,Ut){it();var Ft=(0,h.createChild)(De,"div","element-info-row");return St&&Ft.classList.add(St),(0,h.createChild)(Ft,"div","element-info-name").textContent=ft,(0,h.createChild)(Ft,"div","element-info-gap"),(0,h.createChild)(Ft,"div",Ut||"")}function yt(ft,St){(0,h.createChild)(dt(ft,"","element-info-value-icon"),"div",St)}function at(ft,St){(0,h.createTextChild)(dt(ft,"","element-info-value-text"),St)}function qe(ft,St,Ut){var Ft=dt(ft,"","element-info-value-color"),Zt=(0,h.createChild)(Ft,"div","color-swatch");(0,h.createChild)(Zt,"div","color-swatch-inner").style.backgroundColor=St,(0,h.createTextChild)(Ft,(0,d.formatColor)(St,Ut))}function et(ft,St){var Ut=(0,d.parseHexa)(ft),Ft=(0,d.parseHexa)(St.backgroundColor);Ut[3]*=St.textOpacity;var Zt=dt("Contrast","","element-info-value-contrast"),qt=(0,h.createChild)(Zt,"div","contrast-text");qt.style.color=(0,d.formatRgba)(Ut,"rgb"),qt.style.backgroundColor=St.backgroundColor,qt.textContent="Aa";var tr=(0,h.createChild)(Zt,"span");if(St.contrastAlgorithm==="apca"){var xr=(0,l.contrastRatioAPCA)(Ut,Ft),fr=(0,l.getAPCAThreshold)(St.fontSize,St.fontWeight);tr.textContent=String(Math.floor(100*xr)/100)+"%",(0,h.createChild)(Zt,"div",fr===null||Math.abs(xr)<fr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(St.contrastAlgorithm==="aa"||St.contrastAlgorithm==="aaa"){var qr=(0,l.contrastRatio)(Ut,Ft);fr=(0,l.getContrastThreshold)(St.fontSize,St.fontWeight)[St.contrastAlgorithm],tr.textContent=String(Math.floor(100*qr)/100),(0,h.createChild)(Zt,"div",qr<fr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return He}(k,I);z.appendChild(W);var Q,X=z.offsetWidth,G=z.offsetHeight,q=8,Y=2,K=2*q,se=q+2,Se=Y+se,be=N-Y-se-K,xe=V.maxX-V.minX<K+2*se;if(xe)Q=.5*(V.minX+V.maxX)-q;else{var Ee=V.minX+se,J=V.maxX-se-K;Q=Ee>Se&&Ee<be?Ee:(0,h.constrainNumber)(Se,Ee,J)}var ne=Q<Se||Q>be,de=Q-se;de=(0,h.constrainNumber)(de,Y,N-X-Y);var ue=V.minY-q-G,Fe=!0;ue<0?(ue=Math.min(B-G,V.maxY+q),Fe=!1):V.minY>B&&(ue=B-q-G);var Ie=de>=V.minX&&de+X<=V.maxX&&ue>=V.minY&&ue+G<=V.maxY,ye=de<V.maxX&&de+X>V.minX&&ue<V.maxY&&ue+G>V.minY;if(ye&&!Ie)return void(z.style.display="none");if(z.style.top=ue+"px",z.style.left=de+"px",!ne){var $e=(0,h.createChild)(z,"div","tooltip-arrow");$e.style.clipPath=Fe?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",$e.style.top=(Fe?G-1:-q)+"px",$e.style.left=Q-de+"px"}}(this.tooltip,b.elementInfo,b.colorFormat,y,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:y}},m.prototype.drawAxis=function(b,y,x){b.save();var D=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,R=this.scrollX*this.pageScaleFactor,M=this.scrollY*this.pageScaleFactor;function L(X){return Math.round(X*D)}function k(X){return Math.round(X/D)}var I=this.canvasWidth/D,V=this.canvasHeight/D,N=50;b.save(),b.fillStyle=E,x?b.fillRect(0,L(V)-15,L(I),L(V)):b.fillRect(0,0,L(I),15),b.globalCompositeOperation="destination-out",b.fillStyle="red",y?b.fillRect(L(I)-15,0,L(I),L(V)):b.fillRect(0,0,15,L(V)),b.restore(),b.fillStyle=E,y?b.fillRect(L(I)-15,0,L(I),L(V)):b.fillRect(0,0,15,L(V)),b.lineWidth=1,b.strokeStyle=_,b.fillStyle=_,b.save(),b.translate(-R,.5-M);for(var B=V+k(M),H=100;H<B;H+=100)b.save(),b.translate(R,L(H)),b.rotate(-Math.PI/2),b.fillText(String(H),2,y?L(I)-7:13),b.restore();b.translate(.5,-.5);for(var z=I+k(R),W=100;W<z;W+=100)b.save(),b.fillText(String(W),L(W)+2,x?M+L(V)-7:M+13),b.restore();for(b.restore(),b.save(),y&&(b.translate(L(I),0),b.scale(-1,1)),b.translate(-R,.5-M),B=V+k(M),H=N;H<B;H+=N){b.beginPath(),b.moveTo(R,L(H));var Q=H%100?5:8;b.lineTo(R+Q,L(H)),b.stroke()}for(b.strokeStyle=g,H=5;H<B;H+=5)H%N&&(b.beginPath(),b.moveTo(R,L(H)),b.lineTo(R+5,L(H)),b.stroke());for(b.restore(),b.save(),x&&(b.translate(0,L(V)),b.scale(1,-1)),b.translate(.5-R,-M),z=I+k(R),W=N;W<z;W+=N)b.beginPath(),b.moveTo(L(W),M),Q=W%100?5:8,b.lineTo(L(W),M+Q),b.stroke();for(b.strokeStyle=g,W=5;W<z;W+=5)W%N&&(b.beginPath(),b.moveTo(L(W),M),b.lineTo(L(W),M+5),b.stroke());b.restore(),b.restore()},m}(h.Overlay);e.HighlightOverlay=f;var g="rgba(0,0,0,0.2)",_="rgba(0,0,0,0.7)",E="rgba(255, 255, 255, 0.8)",A="rgba(128, 128, 128, 0.3)"},1160:function(s,e,r){var n,o=this&&this.__extends||(n=function(A,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(m[y]=b[y])},n(A,w)},function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function m(){this.constructor=A}n(A,w),A.prototype=w===null?Object.create(w):(m.prototype=w.prototype,new m)}),a=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(1512)),h=r(2062),d=a(r(3783)),f=a(r(6329)),g=a(r(4193)),_=a(r(5852)),E=function(A){function w(m,b,y){var x=b.compName,D=(y===void 0?{}:y).theme,R=D===void 0?"light":D,M=A.call(this)||this;return M.subComponents=[],M.compName=x,M.c=(0,h.classPrefix)(x),M.options={},M.container=m,M.$container=(0,l.default)(m),M.$container.addClass(["luna-".concat(x),M.c("platform-".concat((0,h.getPlatform)()))]),M.on("optionChange",function(L,k,I){var V=M.c;L==="theme"&&(M.$container.rmClass(V("theme-".concat(I))).addClass(V("theme-".concat(k))),(0,d.default)(M.subComponents,function(N){return N.setOption("theme",k)}))}),M.setOption("theme",R),M}return o(w,A),w.prototype.destroy=function(){this.destroySubComponents();var m=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(m("platform-".concat((0,h.getPlatform)()))).rmClass(m("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},w.prototype.setOption=function(m,b){var y=this,x=this.options,D={};typeof m=="string"?D[m]=b:D=m,(0,d.default)(D,function(R,M){var L=x[M];x[M]=R,y.emit("optionChange",M,R,L)})},w.prototype.getOption=function(m){return this.options[m]},w.prototype.addSubComponent=function(m){m.setOption("theme",this.options.theme),this.subComponents.push(m)},w.prototype.removeSubComponent=function(m){(0,_.default)(this.subComponents,function(b){return b===m})},w.prototype.destroySubComponents=function(){(0,d.default)(this.subComponents,function(m){return m.destroy()}),this.subComponents=[]},w.prototype.initOptions=function(m,b){b===void 0&&(b={}),(0,g.default)(m,b),(0,f.default)(this.options,m)},w.prototype.find=function(m){return this.$container.find(this.c(m))},w}(c.default);e.default=E},2062:function(s,e,r){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.resetCanvasSize=e.getPlatform=e.pxToNum=e.executeAfterTransition=e.hasVerticalScrollbar=e.measuredScrollbarWidth=e.eventPage=e.eventClient=e.drag=e.classPrefix=void 0;var o=n(r(2461)),a=n(r(4331)),c=n(r(5610)),l=n(r(7483)),h=n(r(3990)),d=n(r(6341)),f=n(r(3875)),g=n(r(6954)),_=n(r(9585));function E(y,x){for(var D=0,R=y.length;D<R;D++){var M=y[D];x(M),M.content&&E(M.content,x)}}e.classPrefix=function(y){var x="luna-".concat(y,"-");function D(R){return(0,o.default)((0,a.default)(R).split(/\s+/),function(M){return(0,d.default)(M,x)?M:M.replace(/[\w-]+/,function(L){return"".concat(x).concat(L)})}).join(" ")}return function(R){if(/<[^>]*>/g.test(R))try{var M=l.default.parse(R);return E(M,function(L){L.attrs&&L.attrs.class&&(L.attrs.class=D(L.attrs.class))}),l.default.stringify(M)}catch{return D(R)}return D(R)}};var A,w="ontouchstart"in c.default,m={start:"touchstart",move:"touchmove",end:"touchend"},b={start:"mousedown",move:"mousemove",end:"mouseup"};e.drag=function(y){return w?m[y]:b[y]},e.eventClient=function(y,x){var D=y==="x"?"clientX":"clientY";return x[D]?x[D]:x.changedTouches?x.changedTouches[0][D]:0},e.eventPage=function(y,x){var D=y==="x"?"pageX":"pageY";return x[D]?x[D]:x.changedTouches?x.changedTouches[0][D]:0},e.measuredScrollbarWidth=function(){if((0,h.default)(A))return A;if(!document)return 16;var y=document.createElement("div"),x=document.createElement("div");return y.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),x.setAttribute("style","height: 200px"),y.appendChild(x),document.body.appendChild(y),A=y.offsetWidth-y.clientWidth,document.body.removeChild(y),A},e.hasVerticalScrollbar=function(y){return y.scrollHeight>y.offsetHeight},e.executeAfterTransition=function(y,x){if((0,_.default)(y))return x();var D=function(R){R.target===y&&(y.removeEventListener("transitionend",D),x())};y.addEventListener("transitionend",D)},e.pxToNum=function(y){return(0,f.default)(y.replace("px",""))},e.getPlatform=function(){var y=(0,g.default)();return y==="os x"?"mac":y},e.resetCanvasSize=function(y){y.width=Math.round(y.offsetWidth*window.devicePixelRatio),y.height=Math.round(y.offsetHeight*window.devicePixelRatio)}},6093:function(s,e,r){var n,o=this&&this.__extends||(n=function(_,E){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var m in w)Object.prototype.hasOwnProperty.call(w,m)&&(A[m]=w[m])},n(_,E)},function(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function A(){this.constructor=_}n(_,E),_.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)}),a=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1512)),l=a(r(5229)),h=a(r(2244)),d=a(r(8613)),f=function(_){function E(A,w){w===void 0&&(w={});var m=_.call(this,A,{compName:"notification"},w)||this;return m.notifications=[],m.initOptions(w,{position:{x:"right",y:"bottom"},duration:2e3}),m.initTpl(),m}return o(E,_),E.prototype.notify=function(A,w){var m=this;w===void 0&&(w={duration:this.options.duration});var b=new g(this,A);this.notifications.push(b),this.add(b),setTimeout(function(){return m.remove(b.id)},w.duration)},E.prototype.dismissAll=function(){for(var A=this.notifications,w=A[0];w;)this.remove(w.id),w=A[0]},E.prototype.add=function(A){this.container.appendChild(A.container)},E.prototype.remove=function(A){var w=this.notifications,m=(0,h.default)(w,function(y){return y.id===A});if(m){m.destroy();var b=w.indexOf(m);w.splice(b,1)}},E.prototype.initTpl=function(){var A=this.$container,w=this.options.position,m=w.x,b=w.y,y="flex-end",x="flex-end";switch(m){case"center":x="center";break;case"left":x="flex-start"}b==="top"&&(y="flex-start"),A.attr("style","justify-content: ".concat(y,"; align-items: ").concat(x))},E}(a(r(5404)).default);e.default=f;var g=function(){function _(E,A){this.container=(0,d.default)("div"),this.$container=(0,c.default)(this.container),this.notification=E,this.content=A,this.id=(0,l.default)("luna-notification-"),this.$container.attr({id:this.id,class:E.c("item ".concat(E.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return _.prototype.destroy=function(){this.$container.remove()},_.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},_}();s.exports=f,s.exports.default=f},5404:function(s,e,r){var n,o=this&&this.__extends||(n=function(A,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(m[y]=b[y])},n(A,w)},function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function m(){this.constructor=A}n(A,w),A.prototype=w===null?Object.create(w):(m.prototype=w.prototype,new m)}),a=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(1512)),h=r(164),d=a(r(3783)),f=a(r(6329)),g=a(r(4193)),_=a(r(5852)),E=function(A){function w(m,b,y){var x=b.compName,D=(y===void 0?{}:y).theme,R=D===void 0?"light":D,M=A.call(this)||this;return M.subComponents=[],M.compName=x,M.c=(0,h.classPrefix)(x),M.options={},M.container=m,M.$container=(0,l.default)(m),M.$container.addClass(["luna-".concat(x),M.c("platform-".concat((0,h.getPlatform)()))]),M.on("optionChange",function(L,k,I){var V=M.c;L==="theme"&&(M.$container.rmClass(V("theme-".concat(I))).addClass(V("theme-".concat(k))),(0,d.default)(M.subComponents,function(N){return N.setOption("theme",k)}))}),M.setOption("theme",R),M}return o(w,A),w.prototype.destroy=function(){this.destroySubComponents();var m=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(m("platform-".concat((0,h.getPlatform)()))).rmClass(m("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},w.prototype.setOption=function(m,b){var y=this,x=this.options,D={};typeof m=="string"?D[m]=b:D=m,(0,d.default)(D,function(R,M){var L=x[M];x[M]=R,y.emit("optionChange",M,R,L)})},w.prototype.getOption=function(m){return this.options[m]},w.prototype.addSubComponent=function(m){m.setOption("theme",this.options.theme),this.subComponents.push(m)},w.prototype.removeSubComponent=function(m){(0,_.default)(this.subComponents,function(b){return b===m})},w.prototype.destroySubComponents=function(){(0,d.default)(this.subComponents,function(m){return m.destroy()}),this.subComponents=[]},w.prototype.initOptions=function(m,b){b===void 0&&(b={}),(0,g.default)(m,b),(0,f.default)(this.options,m)},w.prototype.find=function(m){return this.$container.find(this.c(m))},w}(c.default);e.default=E},164:function(s,e,r){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.resetCanvasSize=e.getPlatform=e.pxToNum=e.executeAfterTransition=e.hasVerticalScrollbar=e.measuredScrollbarWidth=e.eventClient=e.drag=e.classPrefix=void 0;var o=n(r(2461)),a=n(r(4331)),c=n(r(5610)),l=n(r(7483)),h=n(r(3990)),d=n(r(6341)),f=n(r(3875)),g=n(r(6954)),_=n(r(9585));function E(y,x){for(var D=0,R=y.length;D<R;D++){var M=y[D];x(M),M.content&&E(M.content,x)}}e.classPrefix=function(y){var x="luna-".concat(y,"-");function D(R){return(0,o.default)((0,a.default)(R).split(/\s+/),function(M){return(0,d.default)(M,x)?M:M.replace(/[\w-]+/,function(L){return"".concat(x).concat(L)})}).join(" ")}return function(R){if(/<[^>]*>/g.test(R))try{var M=l.default.parse(R);return E(M,function(L){L.attrs&&L.attrs.class&&(L.attrs.class=D(L.attrs.class))}),l.default.stringify(M)}catch{return D(R)}return D(R)}};var A,w="ontouchstart"in c.default,m={start:"touchstart",move:"touchmove",end:"touchend"},b={start:"mousedown",move:"mousemove",end:"mouseup"};e.drag=function(y){return w?m[y]:b[y]},e.eventClient=function(y,x){var D=y==="x"?"clientX":"clientY";return x[D]?x[D]:x.changedTouches?x.changedTouches[0][D]:0},e.measuredScrollbarWidth=function(){if((0,h.default)(A))return A;if(!document)return 16;var y=document.createElement("div"),x=document.createElement("div");return y.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),x.setAttribute("style","height: 200px"),y.appendChild(x),document.body.appendChild(y),A=y.offsetWidth-y.clientWidth,document.body.removeChild(y),A},e.hasVerticalScrollbar=function(y){return y.scrollHeight>y.offsetHeight},e.executeAfterTransition=function(y,x){if((0,_.default)(y))return x();var D=function(R){R.target===y&&(y.removeEventListener("transitionend",D),x())};y.addEventListener("transitionend",D)},e.pxToNum=function(y){return(0,f.default)(y.replace("px",""))},e.getPlatform=function(){var y=(0,g.default)();return y==="os x"?"mac":y},e.resetCanvasSize=function(y){y.width=Math.round(y.offsetWidth*window.devicePixelRatio),y.height=Math.round(y.offsetHeight*window.devicePixelRatio)}},8169:function(s,e,r){r.r(e),r.d(e,{default:function(){return m}});var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,c=function(b){var y=[],x=String(b).trim();return x[0]!=="M"&&x[0]!=="m"||x.replace(o,function(D,R,M){var L=R.toLowerCase(),k=function(V){var N=V.match(a);return N?N.map(Number):[]}(M),I=R;if(L==="m"&&k.length>2&&(y.push([I].concat(k.splice(0,2))),L="l",I=I==="m"?"l":"L"),k.length<n[L])return"";for(y.push([I].concat(k.splice(0,n[L])));k.length>=n[L]&&k.length&&n[L];)y.push([I].concat(k.splice(0,n[L])));return""}),y};function l(b,y){for(var x=0;x<y.length;x++){var D=y[x];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}function h(b){return function(y){if(Array.isArray(y))return d(y)}(b)||function(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}(b)||function(y,x){if(y){if(typeof y=="string")return d(y,x);var D=Object.prototype.toString.call(y).slice(8,-1);if(D==="Object"&&y.constructor&&(D=y.constructor.name),D==="Map"||D==="Set")return Array.from(y);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return d(y,x)}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(b,y){(y==null||y>b.length)&&(y=b.length);for(var x=0,D=new Array(y);x<y;x++)D[x]=b[x];return D}var f=c;function g(b,y){var x=b.x*Math.cos(y)-b.y*Math.sin(y),D=b.y*Math.cos(y)+b.x*Math.sin(y);b.x=x,b.y=D}function _(b,y){b.x*=y,b.y*=y}var E=function(b){if(b!==void 0&&b.CanvasRenderingContext2D&&(!b.Path2D||!function(L){var k=L.document.createElement("canvas").getContext("2d"),I=new L.Path2D("M0 0 L1 1");return k.strokeStyle="red",k.lineWidth=1,k.stroke(I),k.getImageData(0,0,1,1).data[0]===255}(b))){var y=function(){function L(V){var N;(function(B,H){if(!(B instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.segments=[],V&&V instanceof L?(N=this.segments).push.apply(N,h(V.segments)):V&&(this.segments=f(V))}var k,I;return k=L,(I=[{key:"addPath",value:function(V){var N;V&&V instanceof L&&(N=this.segments).push.apply(N,h(V.segments))}},{key:"moveTo",value:function(V,N){this.segments.push(["M",V,N])}},{key:"lineTo",value:function(V,N){this.segments.push(["L",V,N])}},{key:"arc",value:function(V,N,B,H,z,W){this.segments.push(["AC",V,N,B,H,z,!!W])}},{key:"arcTo",value:function(V,N,B,H,z){this.segments.push(["AT",V,N,B,H,z])}},{key:"ellipse",value:function(V,N,B,H,z,W,Q,X){this.segments.push(["E",V,N,B,H,z,W,Q,!!X])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(V,N,B,H,z,W){this.segments.push(["C",V,N,B,H,z,W])}},{key:"quadraticCurveTo",value:function(V,N,B,H){this.segments.push(["Q",V,N,B,H])}},{key:"rect",value:function(V,N,B,H){this.segments.push(["R",V,N,B,H])}}])&&l(k.prototype,I),Object.defineProperty(k,"prototype",{writable:!1}),L}(),x=b.CanvasRenderingContext2D.prototype.fill,D=b.CanvasRenderingContext2D.prototype.stroke;b.CanvasRenderingContext2D.prototype.fill=function(){for(var L=arguments.length,k=new Array(L),I=0;I<L;I++)k[I]=arguments[I];var V="nonzero";k.length===0||k.length===1&&typeof k[0]=="string"?x.apply(this,k):(arguments.length===2&&(V=k[1]),M(this,k[0].segments),x.call(this,V))},b.CanvasRenderingContext2D.prototype.stroke=function(L){L?(M(this,L.segments),D.call(this)):D.call(this)};var R=b.CanvasRenderingContext2D.prototype.isPointInPath;b.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var L=arguments.length,k=new Array(L),I=0;I<L;I++)k[I]=arguments[I];if(k[0].constructor.name==="Path2D"){var V=k[1],N=k[2],B=k[3]||"nonzero";return M(this,k[0].segments),R.apply(this,[V,N,B])}return R.apply(this,k)},b.Path2D=y}function M(L,k){var I,V,N,B,H,z,W,Q,X,G,q,Y,K,se,Se,be,xe,Ee,J,ne,de,ue,Fe,Ie,ye,$e,Oe,Le,He,tt={x:0,y:0},Ze={x:0,y:0};L.beginPath();for(var pt=0;pt<k.length;++pt){var fe=k[pt];switch((ne=fe[0])!=="S"&&ne!=="s"&&ne!=="C"&&ne!=="c"&&(ue=null,Fe=null),ne!=="T"&&ne!=="t"&&ne!=="Q"&&ne!=="q"&&(Ie=null,ye=null),ne){case"m":case"M":ne==="m"?(q+=fe[1],K+=fe[2]):(q=fe[1],K=fe[2]),ne!=="M"&&tt||(tt={x:q,y:K}),L.moveTo(q,K);break;case"l":q+=fe[1],K+=fe[2],L.lineTo(q,K);break;case"L":q=fe[1],K=fe[2],L.lineTo(q,K);break;case"H":q=fe[1],L.lineTo(q,K);break;case"h":q+=fe[1],L.lineTo(q,K);break;case"V":K=fe[1],L.lineTo(q,K);break;case"v":K+=fe[1],L.lineTo(q,K);break;case"a":case"A":ne==="a"?(q+=fe[6],K+=fe[7]):(q=fe[6],K=fe[7]),be=fe[1],xe=fe[2],W=fe[3]*Math.PI/180,N=!!fe[4],B=!!fe[5],H={x:q,y:K},g(z={x:(Ze.x-H.x)/2,y:(Ze.y-H.y)/2},-W),(Q=z.x*z.x/(be*be)+z.y*z.y/(xe*xe))>1&&(be*=Q=Math.sqrt(Q),xe*=Q),X=be*be*xe*xe,G=be*be*z.y*z.y+xe*xe*z.x*z.x,_(de={x:be*z.y/xe,y:-xe*z.x/be},B!==N?Math.sqrt((X-G)/G)||0:-Math.sqrt((X-G)/G)||0),V=Math.atan2((z.y-de.y)/xe,(z.x-de.x)/be),I=Math.atan2(-(z.y+de.y)/xe,-(z.x+de.x)/be),g(de,W),Oe=de,Le=(H.x+Ze.x)/2,He=(H.y+Ze.y)/2,Oe.x+=Le,Oe.y+=He,L.save(),L.translate(de.x,de.y),L.rotate(W),L.scale(be,xe),L.arc(0,0,1,V,I,!B),L.restore();break;case"C":ue=fe[3],Fe=fe[4],q=fe[5],K=fe[6],L.bezierCurveTo(fe[1],fe[2],ue,Fe,q,K);break;case"c":L.bezierCurveTo(fe[1]+q,fe[2]+K,fe[3]+q,fe[4]+K,fe[5]+q,fe[6]+K),ue=fe[3]+q,Fe=fe[4]+K,q+=fe[5],K+=fe[6];break;case"S":ue!==null&&Fe!==null||(ue=q,Fe=K),L.bezierCurveTo(2*q-ue,2*K-Fe,fe[1],fe[2],fe[3],fe[4]),ue=fe[1],Fe=fe[2],q=fe[3],K=fe[4];break;case"s":ue!==null&&Fe!==null||(ue=q,Fe=K),L.bezierCurveTo(2*q-ue,2*K-Fe,fe[1]+q,fe[2]+K,fe[3]+q,fe[4]+K),ue=fe[1]+q,Fe=fe[2]+K,q+=fe[3],K+=fe[4];break;case"Q":Ie=fe[1],ye=fe[2],q=fe[3],K=fe[4],L.quadraticCurveTo(Ie,ye,q,K);break;case"q":Ie=fe[1]+q,ye=fe[2]+K,q+=fe[3],K+=fe[4],L.quadraticCurveTo(Ie,ye,q,K);break;case"T":Ie!==null&&ye!==null||(Ie=q,ye=K),Ie=2*q-Ie,ye=2*K-ye,q=fe[1],K=fe[2],L.quadraticCurveTo(Ie,ye,q,K);break;case"t":Ie!==null&&ye!==null||(Ie=q,ye=K),Ie=2*q-Ie,ye=2*K-ye,q+=fe[1],K+=fe[2],L.quadraticCurveTo(Ie,ye,q,K);break;case"z":case"Z":q=tt.x,K=tt.y,tt=void 0,L.closePath();break;case"AC":q=fe[1],K=fe[2],Se=fe[3],V=fe[4],I=fe[5],$e=fe[6],L.arc(q,K,Se,V,I,$e);break;case"AT":Y=fe[1],se=fe[2],q=fe[3],K=fe[4],Se=fe[5],L.arcTo(Y,se,q,K,Se);break;case"E":q=fe[1],K=fe[2],be=fe[3],xe=fe[4],W=fe[5],V=fe[6],I=fe[7],$e=fe[8],L.save(),L.translate(q,K),L.rotate(W),L.scale(be,xe),L.arc(0,0,1,V,I,$e),L.restore();break;case"R":q=fe[1],K=fe[2],Ee=fe[3],J=fe[4],tt={x:q,y:K},L.rect(q,K,Ee,J)}Ze.x=q,Ze.y=K}}},A=c,w=E;typeof window<"u"&&w(window);var m={path2dPolyfill:w,parsePath:A}},2777:function(s){s.exports=`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}

/*# sourceMappingURL=luna-dom-highlighter.css.map*/`},907:function(s,e,r){function n(o,a){(a==null||a>o.length)&&(a=o.length);for(var c=0,l=new Array(a);c<a;c++)l[c]=o[c];return l}r.d(e,{Z:function(){return n}})},7326:function(s,e,r){function n(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}r.d(e,{Z:function(){return n}})},5671:function(s,e,r){function n(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}r.d(e,{Z:function(){return n}})},3144:function(s,e,r){r.d(e,{Z:function(){return a}});var n=r(9142);function o(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,(0,n.Z)(d.key),d)}}function a(c,l,h){return l&&o(c.prototype,l),h&&o(c,h),Object.defineProperty(c,"prototype",{writable:!1}),c}},4942:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(9142);function o(a,c,l){return(c=(0,n.Z)(c))in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,a}},1752:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(1120);function o(){return o=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,c,l){var h=function(f,g){for(;!Object.prototype.hasOwnProperty.call(f,g)&&(f=(0,n.Z)(f))!==null;);return f}(a,c);if(h){var d=Object.getOwnPropertyDescriptor(h,c);return d.get?d.get.call(arguments.length<3?a:l):d.value}},o.apply(this,arguments)}},1120:function(s,e,r){function n(o){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},n(o)}r.d(e,{Z:function(){return n}})},9340:function(s,e,r){function n(a,c){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,h){return l.__proto__=h,l},n(a,c)}function o(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&n(a,c)}r.d(e,{Z:function(){return o}})},2963:function(s,e,r){r.d(e,{Z:function(){return a}});var n=r(1002),o=r(7326);function a(c,l){if(l&&((0,n.Z)(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(c)}},168:function(s,e,r){function n(o,a){return a||(a=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}}))}r.d(e,{Z:function(){return n}})},9142:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(1002);function o(a){var c=function(l,h){if((0,n.Z)(l)!=="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,h||"default");if((0,n.Z)(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}(a,"string");return(0,n.Z)(c)==="symbol"?c:String(c)}},1002:function(s,e,r){function n(o){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},n(o)}r.d(e,{Z:function(){return n}})},181:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(907);function o(a,c){if(a){if(typeof a=="string")return(0,n.Z)(a,c);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?(0,n.Z)(a,c):void 0}}}},__webpack_module_cache__={};function __webpack_require__(s){var e=__webpack_module_cache__[s];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[s]={id:s,loaded:!1,exports:{}};return __webpack_modules__[s].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(s,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.hmd=function(s){return(s=Object.create(s)).children||(s.children=[]),Object.defineProperty(s,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+s.id)}}),s},__webpack_require__.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},__webpack_require__.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(2027);return __webpack_exports__}()})})(eruda$1);var erudaExports=eruda$1.exports;const eruda=getDefaultExportFromCjs(erudaExports);var erudaFeatures$1={exports:{}};/*! eruda-features v2.0.0 https://github.com/liriliri/eruda-features#readme */(function(module,exports){(function(s,e){module.exports=e()})(typeof self<"u"?self:commonjsGlobal,function(){return function(s){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return s[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=s,e.c=r,e.d=function(n,o,a){e.o(n,o)||Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:a})},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="/assets/",e(e.s=47)}([function(s,e){var r=s.exports={version:"2.5.1"};typeof __e=="number"&&(__e=r)},function(s,e,r){function n(b){return g[b]}function o(b){for(var y=1;y<arguments.length;y++)for(var x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&(b[x]=arguments[y][x]);return b}function a(b,y){for(var x=0,D=b.length;x<D;x++)if(b[x]===y)return x;return-1}function c(b){if(typeof b!="string"){if(b&&b.toHTML)return b.toHTML();if(b==null)return"";if(!b)return b+"";b=""+b}return E.test(b)?b.replace(_,n):b}function l(b){return!b&&b!==0||!(!m(b)||b.length!==0)}function h(b){var y=o({},b);return y._parent=b,y}function d(b,y){return b.path=y,b}function f(b,y){return(b?b+".":"")+y}e.__esModule=!0,e.extend=o,e.indexOf=a,e.escapeExpression=c,e.isEmpty=l,e.createFrame=h,e.blockParams=d,e.appendContextPath=f;var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},_=/[&<>"'`=]/g,E=/[&<>"'`=]/,A=Object.prototype.toString;e.toString=A;var w=function(b){return typeof b=="function"};w(/x/)&&(e.isFunction=w=function(b){return typeof b=="function"&&A.call(b)==="[object Function]"}),e.isFunction=w;var m=Array.isArray||function(b){return!(!b||typeof b!="object")&&A.call(b)==="[object Array]"};e.isArray=m},function(s,e){var r=s.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=r)},function(s,e){var r={}.hasOwnProperty;s.exports=function(n,o){return r.call(n,o)}},function(s,e,r){var n=r(10),o=r(37),a=r(19),c=Object.defineProperty;e.f=r(5)?Object.defineProperty:function(l,h,d){if(n(l),h=a(h,!0),n(d),o)try{return c(l,h,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(l[h]=d.value),l}},function(s,e,r){s.exports=!r(12)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(s,e,r){var n=r(63),o=r(16);s.exports=function(a){return n(o(a))}},function(s,e,r){var n=r(2),o=r(0),a=r(36),c=r(8),l=function(h,d,f){var g,_,E,A=h&l.F,w=h&l.G,m=h&l.S,b=h&l.P,y=h&l.B,x=h&l.W,D=w?o:o[d]||(o[d]={}),R=D.prototype,M=w?n:m?n[d]:(n[d]||{}).prototype;w&&(f=d);for(g in f)(_=!A&&M&&M[g]!==void 0)&&g in D||(E=_?M[g]:f[g],D[g]=w&&typeof M[g]!="function"?f[g]:y&&_?a(E,n):x&&M[g]==E?function(L){var k=function(I,V,N){if(this instanceof L){switch(arguments.length){case 0:return new L;case 1:return new L(I);case 2:return new L(I,V)}return new L(I,V,N)}return L.apply(this,arguments)};return k.prototype=L.prototype,k}(E):b&&typeof E=="function"?a(Function.call,E):E,b&&((D.virtual||(D.virtual={}))[g]=E,h&l.R&&R&&!R[g]&&c(R,g,E)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,s.exports=l},function(s,e,r){var n=r(4),o=r(15);s.exports=r(5)?function(a,c,l){return n.f(a,c,o(1,l))}:function(a,c,l){return a[c]=l,a}},function(s,e,r){var n=r(18)("wks"),o=r(14),a=r(2).Symbol,c=typeof a=="function";(s.exports=function(l){return n[l]||(n[l]=c&&a[l]||(c?a:o)("Symbol."+l))}).store=n},function(s,e,r){var n=r(11);s.exports=function(o){if(!n(o))throw TypeError(o+" is not an object!");return o}},function(s,e){s.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},function(s,e){s.exports=function(r){try{return!!r()}catch{return!0}}},function(s,e,r){function n(a,c){var l=c&&c.loc,h=void 0,d=void 0;l&&(h=l.start.line,d=l.start.column,a+=" - "+h+":"+d);for(var f=Error.prototype.constructor.call(this,a),g=0;g<o.length;g++)this[o[g]]=f[o[g]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{l&&(this.lineNumber=h,Object.defineProperty?Object.defineProperty(this,"column",{value:d,enumerable:!0}):this.column=d)}catch{}}e.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,s.exports=e.default},function(s,e){var r=0,n=Math.random();s.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++r+n).toString(36))}},function(s,e){s.exports=function(r,n){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:n}}},function(s,e){s.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}},function(s,e,r){var n=r(18)("keys"),o=r(14);s.exports=function(a){return n[a]||(n[a]=o(a))}},function(s,e,r){var n=r(2),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});s.exports=function(a){return o[a]||(o[a]={})}},function(s,e,r){var n=r(11);s.exports=function(o,a){if(!n(o))return o;var c,l;if(a&&typeof(c=o.toString)=="function"&&!n(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!n(l=c.call(o))||!a&&typeof(c=o.toString)=="function"&&!n(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(s,e,r){function n(d){return d&&d.__esModule?d:{default:d}}e.__esModule=!0;var o=r(57),a=n(o),c=r(72),l=n(c),h=typeof l.default=="function"&&typeof a.default=="symbol"?function(d){return typeof d}:function(d){return d&&typeof l.default=="function"&&d.constructor===l.default&&d!==l.default.prototype?"symbol":typeof d};e.default=typeof l.default=="function"&&h(a.default)==="symbol"?function(d){return d===void 0?"undefined":h(d)}:function(d){return d&&typeof l.default=="function"&&d.constructor===l.default&&d!==l.default.prototype?"symbol":d===void 0?"undefined":h(d)}},function(s,e){var r=Math.ceil,n=Math.floor;s.exports=function(o){return isNaN(o=+o)?0:(o>0?n:r)(o)}},function(s,e){s.exports=!0},function(s,e){s.exports={}},function(s,e,r){var n=r(10),o=r(62),a=r(26),c=r(17)("IE_PROTO"),l=function(){},h=function(){var d,f=r(38)("iframe"),g=a.length;for(f.style.display="none",r(67).appendChild(f),f.src="javascript:",d=f.contentWindow.document,d.open(),d.write("<script>document.F=Object<\/script>"),d.close(),h=d.F;g--;)delete h.prototype[a[g]];return h()};s.exports=Object.create||function(d,f){var g;return d!==null?(l.prototype=n(d),g=new l,l.prototype=null,g[c]=d):g=h(),f===void 0?g:o(g,f)}},function(s,e,r){var n=r(41),o=r(26);s.exports=Object.keys||function(a){return n(a,o)}},function(s,e){s.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(s,e,r){var n=r(4).f,o=r(3),a=r(9)("toStringTag");s.exports=function(c,l,h){c&&!o(c=h?c:c.prototype,a)&&n(c,a,{configurable:!0,value:l})}},function(s,e,r){e.f=r(9)},function(s,e,r){var n=r(2),o=r(0),a=r(22),c=r(28),l=r(4).f;s.exports=function(h){var d=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});h.charAt(0)=="_"||h in d||l(d,h,{value:c.f(h)})}},function(s,e){e.f={}.propertyIsEnumerable},function(s,e,r){var n=r(30),o=r(15),a=r(6),c=r(19),l=r(3),h=r(37),d=Object.getOwnPropertyDescriptor;e.f=r(5)?d:function(f,g){if(f=a(f),g=c(g,!0),h)try{return d(f,g)}catch{}if(l(f,g))return o(!n.f.call(f,g),f[g])}},function(s,e,r){s.exports={default:r(48),__esModule:!0}},function(s,e,r){var n=r(16);s.exports=function(o){return Object(n(o))}},function(s,e,r){var n=r(3),o=r(33),a=r(17)("IE_PROTO"),c=Object.prototype;s.exports=Object.getPrototypeOf||function(l){return l=o(l),n(l,a)?l[a]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?c:null}},function(s,e,r){var n=r(7),o=r(0),a=r(12);s.exports=function(c,l){var h=(o.Object||{})[c]||Object[c],d={};d[c]=l(h),n(n.S+n.F*a(function(){h(1)}),"Object",d)}},function(s,e,r){var n=r(50);s.exports=function(o,a,c){if(n(o),a===void 0)return o;switch(c){case 1:return function(l){return o.call(a,l)};case 2:return function(l,h){return o.call(a,l,h)};case 3:return function(l,h,d){return o.call(a,l,h,d)}}return function(){return o.apply(a,arguments)}}},function(s,e,r){s.exports=!r(5)&&!r(12)(function(){return Object.defineProperty(r(38)("div"),"a",{get:function(){return 7}}).a!=7})},function(s,e,r){var n=r(11),o=r(2).document,a=n(o)&&n(o.createElement);s.exports=function(c){return a?o.createElement(c):{}}},function(s,e,r){var n=r(22),o=r(7),a=r(40),c=r(8),l=r(3),h=r(23),d=r(61),f=r(27),g=r(34),_=r(9)("iterator"),E=!([].keys&&"next"in[].keys()),A=function(){return this};s.exports=function(w,m,b,y,x,D,R){d(b,m,y);var M,L,k,I=function(G){if(!E&&G in H)return H[G];switch(G){case"keys":case"values":return function(){return new b(this,G)}}return function(){return new b(this,G)}},V=m+" Iterator",N=x=="values",B=!1,H=w.prototype,z=H[_]||H["@@iterator"]||x&&H[x],W=z||I(x),Q=x?N?I("entries"):W:void 0,X=m=="Array"&&H.entries||z;if(X&&(k=g(X.call(new w)))!==Object.prototype&&k.next&&(f(k,V,!0),n||l(k,_)||c(k,_,A)),N&&z&&z.name!=="values"&&(B=!0,W=function(){return z.call(this)}),n&&!R||!E&&!B&&H[_]||c(H,_,W),h[m]=W,h[V]=A,x)if(M={values:N?W:I("values"),keys:D?W:I("keys"),entries:Q},R)for(L in M)L in H||a(H,L,M[L]);else o(o.P+o.F*(E||B),m,M);return M}},function(s,e,r){s.exports=r(8)},function(s,e,r){var n=r(3),o=r(6),a=r(64)(!1),c=r(17)("IE_PROTO");s.exports=function(l,h){var d,f=o(l),g=0,_=[];for(d in f)d!=c&&n(f,d)&&_.push(d);for(;h.length>g;)n(f,d=h[g++])&&(~a(_,d)||_.push(d));return _}},function(s,e){var r={}.toString;s.exports=function(n){return r.call(n).slice(8,-1)}},function(s,e){e.f=Object.getOwnPropertySymbols},function(s,e,r){var n=r(41),o=r(26).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(a){return n(a,o)}},function(s,e,r){var n=r(98);s.exports=(n.default||n).template({1:function(o,a,c,l,h){var d,f,g=a??(o.nullContext||{}),_=c.helperMissing,E=o.escapeExpression;return`        <li>
            <a href="http://caniuse.com/#search=`+E((f=(f=c.key||h&&h.key)!=null?f:_,typeof f=="function"?f.call(g,{name:"key",hash:{},data:h}):f))+'" target="_blank" class="eruda-inner-wrapper '+((d=c.if.call(g,a,{name:"if",hash:{},fn:o.program(2,h,0),inverse:o.noop,data:h}))!=null?d:"")+`">
                `+E((f=(f=c.key||h&&h.key)!=null?f:_,typeof f=="function"?f.call(g,{name:"key",hash:{},data:h}):f))+`
            </a>
        </li>
`},2:function(o,a,c,l,h){return"eruda-ok"},compiler:[7,">= 4.0.0"],main:function(o,a,c,l,h){var d;return`<ul>
`+((d=c.each.call(a??(o.nullContext||{}),a!=null?a.features:a,{name:"each",hash:{},fn:o.program(1,h,0),inverse:o.noop,data:h}))!=null?d:"")+`</ul>
<a class="eruda-html5test" target="_blank" href="http://html5test.com">Go to HTML5 Test</a>`},useData:!0})},function(s,e,r){function n(A){return A&&A.__esModule?A:{default:A}}function o(A,w,m){this.helpers=A||{},this.partials=w||{},this.decorators=m||{},h.registerDefaultHelpers(this),d.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=o;var a=r(1),c=r(13),l=n(c),h=r(100),d=r(108),f=r(110),g=n(f);e.VERSION="4.0.11",e.COMPILER_REVISION=7;var _={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=_,o.prototype={constructor:o,logger:g.default,log:g.default.log,registerHelper:function(A,w){if(a.toString.call(A)==="[object Object]"){if(w)throw new l.default("Arg not supported with multiple helpers");a.extend(this.helpers,A)}else this.helpers[A]=w},unregisterHelper:function(A){delete this.helpers[A]},registerPartial:function(A,w){if(a.toString.call(A)==="[object Object]")a.extend(this.partials,A);else{if(w===void 0)throw new l.default('Attempting to register a partial called "'+A+'" as undefined');this.partials[A]=w}},unregisterPartial:function(A){delete this.partials[A]},registerDecorator:function(A,w){if(a.toString.call(A)==="[object Object]"){if(w)throw new l.default("Arg not supported with multiple decorators");a.extend(this.decorators,A)}else this.decorators[A]=w},unregisterDecorator:function(A){delete this.decorators[A]}};var E=g.default.log;e.log=E,e.createFrame=a.createFrame,e.logger=g.default},function(s,e,r){function n(R){return R&&R.__esModule?R:{default:R}}var o=r(32),a=n(o),c=r(51),l=n(c),h=r(52),d=n(h),f=r(56),g=n(f),_=r(82),E=n(_),A=r(86),w=n(A),m=r(94),b=n(m),y=r(95),x=y["feature-detects"],D=y["special-names"];s.exports=function(R){var M=R.util.evalCss;return new(function(L){function k(){(0,l.default)(this,k);var I=(0,g.default)(this,(k.__proto__||(0,a.default)(k)).call(this));return I.name="features",I._style=M(r(96)),I._tpl=r(45),I._features={},I._isInit=!1,I}return(0,w.default)(k,L),(0,d.default)(k,[{key:"init",value:function(I,V){(0,E.default)(k.prototype.__proto__||(0,a.default)(k.prototype),"init",this).call(this,I,V),I.html(r(45)())}},{key:"show",value:function(){(0,E.default)(k.prototype.__proto__||(0,a.default)(k.prototype),"show",this).call(this),this._isInit||this._initFeatures()}},{key:"hide",value:function(){(0,E.default)(k.prototype.__proto__||(0,a.default)(k.prototype),"hide",this).call(this)}},{key:"destroy",value:function(){(0,E.default)(k.prototype.__proto__||(0,a.default)(k.prototype),"destroy",this).call(this),M.remove(this._style)}},{key:"_initFeatures",value:function(){var I=this;this._isInit=!0,b.default.testRunner();var V=0,N=x.length;x.forEach(function(B){D[B]&&(B=D[B]),B=B.replace(/\//g,""),b.default.on(B,function(H){I._features[B]=H,++V===N&&I._render()})})}},{key:"_render",value:function(){this._$el.html(this._tpl({features:this._features}))}}]),k}(R.Tool))}},function(s,e,r){r(49),s.exports=r(0).Object.getPrototypeOf},function(s,e,r){var n=r(33),o=r(34);r(35)("getPrototypeOf",function(){return function(a){return o(n(a))}})},function(s,e){s.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}},function(s,e,r){e.__esModule=!0,e.default=function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}},function(s,e,r){e.__esModule=!0;var n=r(53),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(){function a(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,o.default)(c,d.key,d)}}return function(c,l,h){return l&&a(c.prototype,l),h&&a(c,h),c}}()},function(s,e,r){s.exports={default:r(54),__esModule:!0}},function(s,e,r){r(55);var n=r(0).Object;s.exports=function(o,a,c){return n.defineProperty(o,a,c)}},function(s,e,r){var n=r(7);n(n.S+n.F*!r(5),"Object",{defineProperty:r(4).f})},function(s,e,r){e.__esModule=!0;var n=r(20),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||(c===void 0?"undefined":(0,o.default)(c))!=="object"&&typeof c!="function"?a:c}},function(s,e,r){s.exports={default:r(58),__esModule:!0}},function(s,e,r){r(59),r(68),s.exports=r(28).f("iterator")},function(s,e,r){var n=r(60)(!0);r(39)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,a=this._t,c=this._i;return c>=a.length?{value:void 0,done:!0}:(o=n(a,c),this._i+=o.length,{value:o,done:!1})})},function(s,e,r){var n=r(21),o=r(16);s.exports=function(a){return function(c,l){var h,d,f=String(o(c)),g=n(l),_=f.length;return g<0||g>=_?a?"":void 0:(h=f.charCodeAt(g),h<55296||h>56319||g+1===_||(d=f.charCodeAt(g+1))<56320||d>57343?a?f.charAt(g):h:a?f.slice(g,g+2):d-56320+(h-55296<<10)+65536)}}},function(s,e,r){var n=r(24),o=r(15),a=r(27),c={};r(8)(c,r(9)("iterator"),function(){return this}),s.exports=function(l,h,d){l.prototype=n(c,{next:o(1,d)}),a(l,h+" Iterator")}},function(s,e,r){var n=r(4),o=r(10),a=r(25);s.exports=r(5)?Object.defineProperties:function(c,l){o(c);for(var h,d=a(l),f=d.length,g=0;f>g;)n.f(c,h=d[g++],l[h]);return c}},function(s,e,r){var n=r(42);s.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return n(o)=="String"?o.split(""):Object(o)}},function(s,e,r){var n=r(6),o=r(65),a=r(66);s.exports=function(c){return function(l,h,d){var f,g=n(l),_=o(g.length),E=a(d,_);if(c&&h!=h){for(;_>E;)if((f=g[E++])!=f)return!0}else for(;_>E;E++)if((c||E in g)&&g[E]===h)return c||E||0;return!c&&-1}}},function(s,e,r){var n=r(21),o=Math.min;s.exports=function(a){return a>0?o(n(a),9007199254740991):0}},function(s,e,r){var n=r(21),o=Math.max,a=Math.min;s.exports=function(c,l){return c=n(c),c<0?o(c+l,0):a(c,l)}},function(s,e,r){var n=r(2).document;s.exports=n&&n.documentElement},function(s,e,r){r(69);for(var n=r(2),o=r(8),a=r(23),c=r(9)("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),h=0;h<l.length;h++){var d=l[h],f=n[d],g=f&&f.prototype;g&&!g[c]&&o(g,c,d),a[d]=a.Array}},function(s,e,r){var n=r(70),o=r(71),a=r(23),c=r(6);s.exports=r(39)(Array,"Array",function(l,h){this._t=c(l),this._i=0,this._k=h},function(){var l=this._t,h=this._k,d=this._i++;return!l||d>=l.length?(this._t=void 0,o(1)):h=="keys"?o(0,d):h=="values"?o(0,l[d]):o(0,[d,l[d]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(s,e){s.exports=function(){}},function(s,e){s.exports=function(r,n){return{value:n,done:!!r}}},function(s,e,r){s.exports={default:r(73),__esModule:!0}},function(s,e,r){r(74),r(79),r(80),r(81),s.exports=r(0).Symbol},function(s,e,r){var n=r(2),o=r(3),a=r(5),c=r(7),l=r(40),h=r(75).KEY,d=r(12),f=r(18),g=r(27),_=r(14),E=r(9),A=r(28),w=r(29),m=r(76),b=r(77),y=r(10),x=r(6),D=r(19),R=r(15),M=r(24),L=r(78),k=r(31),I=r(4),V=r(25),N=k.f,B=I.f,H=L.f,z=n.Symbol,W=n.JSON,Q=W&&W.stringify,X=E("_hidden"),G=E("toPrimitive"),q={}.propertyIsEnumerable,Y=f("symbol-registry"),K=f("symbols"),se=f("op-symbols"),Se=Object.prototype,be=typeof z=="function",xe=n.QObject,Ee=!xe||!xe.prototype||!xe.prototype.findChild,J=a&&d(function(){return M(B({},"a",{get:function(){return B(this,"a",{value:7}).a}})).a!=7})?function(fe,Ne,we){var ke=N(Se,Ne);ke&&delete Se[Ne],B(fe,Ne,we),ke&&fe!==Se&&B(Se,Ne,ke)}:B,ne=function(fe){var Ne=K[fe]=M(z.prototype);return Ne._k=fe,Ne},de=be&&typeof z.iterator=="symbol"?function(fe){return typeof fe=="symbol"}:function(fe){return fe instanceof z},ue=function(fe,Ne,we){return fe===Se&&ue(se,Ne,we),y(fe),Ne=D(Ne,!0),y(we),o(K,Ne)?(we.enumerable?(o(fe,X)&&fe[X][Ne]&&(fe[X][Ne]=!1),we=M(we,{enumerable:R(0,!1)})):(o(fe,X)||B(fe,X,R(1,{})),fe[X][Ne]=!0),J(fe,Ne,we)):B(fe,Ne,we)},Fe=function(fe,Ne){y(fe);for(var we,ke=m(Ne=x(Ne)),De=0,Pe=ke.length;Pe>De;)ue(fe,we=ke[De++],Ne[we]);return fe},Ie=function(fe,Ne){return Ne===void 0?M(fe):Fe(M(fe),Ne)},ye=function(fe){var Ne=q.call(this,fe=D(fe,!0));return!(this===Se&&o(K,fe)&&!o(se,fe))&&(!(Ne||!o(this,fe)||!o(K,fe)||o(this,X)&&this[X][fe])||Ne)},$e=function(fe,Ne){if(fe=x(fe),Ne=D(Ne,!0),fe!==Se||!o(K,Ne)||o(se,Ne)){var we=N(fe,Ne);return!we||!o(K,Ne)||o(fe,X)&&fe[X][Ne]||(we.enumerable=!0),we}},Oe=function(fe){for(var Ne,we=H(x(fe)),ke=[],De=0;we.length>De;)o(K,Ne=we[De++])||Ne==X||Ne==h||ke.push(Ne);return ke},Le=function(fe){for(var Ne,we=fe===Se,ke=H(we?se:x(fe)),De=[],Pe=0;ke.length>Pe;)!o(K,Ne=ke[Pe++])||we&&!o(Se,Ne)||De.push(K[Ne]);return De};be||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var fe=_(arguments.length>0?arguments[0]:void 0),Ne=function(we){this===Se&&Ne.call(se,we),o(this,X)&&o(this[X],fe)&&(this[X][fe]=!1),J(this,fe,R(1,we))};return a&&Ee&&J(Se,fe,{configurable:!0,set:Ne}),ne(fe)},l(z.prototype,"toString",function(){return this._k}),k.f=$e,I.f=ue,r(44).f=L.f=Oe,r(30).f=ye,r(43).f=Le,a&&!r(22)&&l(Se,"propertyIsEnumerable",ye,!0),A.f=function(fe){return ne(E(fe))}),c(c.G+c.W+c.F*!be,{Symbol:z});for(var He="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;He.length>tt;)E(He[tt++]);for(var Ze=V(E.store),pt=0;Ze.length>pt;)w(Ze[pt++]);c(c.S+c.F*!be,"Symbol",{for:function(fe){return o(Y,fe+="")?Y[fe]:Y[fe]=z(fe)},keyFor:function(fe){if(!de(fe))throw TypeError(fe+" is not a symbol!");for(var Ne in Y)if(Y[Ne]===fe)return Ne},useSetter:function(){Ee=!0},useSimple:function(){Ee=!1}}),c(c.S+c.F*!be,"Object",{create:Ie,defineProperty:ue,defineProperties:Fe,getOwnPropertyDescriptor:$e,getOwnPropertyNames:Oe,getOwnPropertySymbols:Le}),W&&c(c.S+c.F*(!be||d(function(){var fe=z();return Q([fe])!="[null]"||Q({a:fe})!="{}"||Q(Object(fe))!="{}"})),"JSON",{stringify:function(fe){if(fe!==void 0&&!de(fe)){for(var Ne,we,ke=[fe],De=1;arguments.length>De;)ke.push(arguments[De++]);return Ne=ke[1],typeof Ne=="function"&&(we=Ne),!we&&b(Ne)||(Ne=function(Pe,Je){if(we&&(Je=we.call(this,Pe,Je)),!de(Je))return Je}),ke[1]=Ne,Q.apply(W,ke)}}}),z.prototype[G]||r(8)(z.prototype,G,z.prototype.valueOf),g(z,"Symbol"),g(Math,"Math",!0),g(n.JSON,"JSON",!0)},function(s,e,r){var n=r(14)("meta"),o=r(11),a=r(3),c=r(4).f,l=0,h=Object.isExtensible||function(){return!0},d=!r(12)(function(){return h(Object.preventExtensions({}))}),f=function(w){c(w,n,{value:{i:"O"+ ++l,w:{}}})},g=function(w,m){if(!o(w))return typeof w=="symbol"?w:(typeof w=="string"?"S":"P")+w;if(!a(w,n)){if(!h(w))return"F";if(!m)return"E";f(w)}return w[n].i},_=function(w,m){if(!a(w,n)){if(!h(w))return!0;if(!m)return!1;f(w)}return w[n].w},E=function(w){return d&&A.NEED&&h(w)&&!a(w,n)&&f(w),w},A=s.exports={KEY:n,NEED:!1,fastKey:g,getWeak:_,onFreeze:E}},function(s,e,r){var n=r(25),o=r(43),a=r(30);s.exports=function(c){var l=n(c),h=o.f;if(h)for(var d,f=h(c),g=a.f,_=0;f.length>_;)g.call(c,d=f[_++])&&l.push(d);return l}},function(s,e,r){var n=r(42);s.exports=Array.isArray||function(o){return n(o)=="Array"}},function(s,e,r){var n=r(6),o=r(44).f,a={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(h){try{return o(h)}catch{return c.slice()}};s.exports.f=function(h){return c&&a.call(h)=="[object Window]"?l(h):o(n(h))}},function(s,e){},function(s,e,r){r(29)("asyncIterator")},function(s,e,r){r(29)("observable")},function(s,e,r){function n(h){return h&&h.__esModule?h:{default:h}}e.__esModule=!0;var o=r(32),a=n(o),c=r(83),l=n(c);e.default=function h(d,f,g){d===null&&(d=Function.prototype);var _=(0,l.default)(d,f);if(_===void 0){var E=(0,a.default)(d);return E===null?void 0:h(E,f,g)}if("value"in _)return _.value;var A=_.get;if(A!==void 0)return A.call(g)}},function(s,e,r){s.exports={default:r(84),__esModule:!0}},function(s,e,r){r(85);var n=r(0).Object;s.exports=function(o,a){return n.getOwnPropertyDescriptor(o,a)}},function(s,e,r){var n=r(6),o=r(31).f;r(35)("getOwnPropertyDescriptor",function(){return function(a,c){return o(n(a),c)}})},function(s,e,r){function n(f){return f&&f.__esModule?f:{default:f}}e.__esModule=!0;var o=r(87),a=n(o),c=r(91),l=n(c),h=r(20),d=n(h);e.default=function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+(g===void 0?"undefined":(0,d.default)(g)));f.prototype=(0,l.default)(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(a.default?(0,a.default)(f,g):f.__proto__=g)}},function(s,e,r){s.exports={default:r(88),__esModule:!0}},function(s,e,r){r(89),s.exports=r(0).Object.setPrototypeOf},function(s,e,r){var n=r(7);n(n.S,"Object",{setPrototypeOf:r(90).set})},function(s,e,r){var n=r(11),o=r(10),a=function(c,l){if(o(c),!n(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};s.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,l,h){try{h=r(36)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),h(c,[]),l=!(c instanceof Array)}catch{l=!0}return function(d,f){return a(d,f),l?d.__proto__=f:h(d,f),d}}({},!1):void 0),check:a}},function(s,e,r){s.exports={default:r(92),__esModule:!0}},function(s,e,r){r(93);var n=r(0).Object;s.exports=function(o,a){return n.create(o,a)}},function(s,e,r){var n=r(7);n(n.S,"Object",{create:r(24)})},function(module,exports,__webpack_require__){function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function is(s,e){return(s===void 0?"undefined":(0,_typeof3.default)(s))===e}function testRunner(){var s,e,r,n,o,a,c;for(var l in tests)if(tests.hasOwnProperty(l)){if(s=[],e=tests[l],e.name&&(s.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(r=0;r<e.options.aliases.length;r++)s.push(e.options.aliases[r].toLowerCase());for(n=is(e.fn,"function")?e.fn():e.fn,o=0;o<s.length;o++)a=s[o],c=a.split("."),c.length===1?Modernizr[c[0]]=n:(!Modernizr[c[0]]||Modernizr[c[0]]instanceof Boolean||(Modernizr[c[0]]=new Boolean(Modernizr[c[0]])),Modernizr[c[0]][c[1]]=n),classes.push((n?"":"no-")+c.join("-"))}}function createElement(){return typeof document.createElement!="function"?document.createElement(arguments[0]):isSVG?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}function contains(s,e){return!!~(""+s).indexOf(e)}function getBody(){var s=document.body;return s||(s=createElement(isSVG?"svg":"body"),s.fake=!0),s}function injectElementWithStyles(s,e,r,n){var o,a,c,l,h="modernizr",d=createElement("div"),f=getBody();if(parseInt(r,10))for(;r--;)c=createElement("div"),c.id=n?n[r]:h+(r+1),d.appendChild(c);return o=createElement("style"),o.type="text/css",o.id="s"+h,(f.fake?f:d).appendChild(o),f.appendChild(d),o.styleSheet?o.styleSheet.cssText=s:o.appendChild(document.createTextNode(s)),d.id=h,f.fake&&(f.style.background="",f.style.overflow="hidden",l=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(f)),a=e(d,s),f.fake?(f.parentNode.removeChild(f),docElement.style.overflow=l,docElement.offsetHeight):d.parentNode.removeChild(d),!!a}function domToCSS(s){return s.replace(/([A-Z])/g,function(e,r){return"-"+r.toLowerCase()}).replace(/^ms-/,"-ms-")}function computedStyle(s,e,r){var n;if("getComputedStyle"in window){n=getComputedStyle.call(window,s,e);var o=window.console;if(n!==null)r&&(n=n.getPropertyValue(r));else if(o){var a=o.error?"error":"log";o[a].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else n=!e&&s.currentStyle&&s.currentStyle[r];return n}function nativeTestProps(s,e){var r=s.length;if("CSS"in window&&"supports"in window.CSS){for(;r--;)if(window.CSS.supports(domToCSS(s[r]),e))return!0;return!1}if("CSSSupportsRule"in window){for(var n=[];r--;)n.push("("+domToCSS(s[r])+":"+e+")");return n=n.join(" or "),injectElementWithStyles("@supports ("+n+") { #modernizr { position: absolute; } }",function(o){return computedStyle(o,null,"position")=="absolute"})}}function cssToDOM(s){return s.replace(/([a-z])-([a-z])/g,function(e,r,n){return r+n.toUpperCase()}).replace(/^-/,"")}function testProps(s,e,r,n){function o(){c&&(delete mStyle.style,delete mStyle.modElem)}if(n=!is(n,"undefined")&&n,!is(r,"undefined")){var a=nativeTestProps(s,r);if(!is(a,"undefined"))return a}for(var c,l,h,d,f,g=["modernizr","tspan","samp"];!mStyle.style&&g.length;)c=!0,mStyle.modElem=createElement(g.shift()),mStyle.style=mStyle.modElem.style;for(h=s.length,l=0;l<h;l++)if(d=s[l],f=mStyle.style[d],contains(d,"-")&&(d=cssToDOM(d)),mStyle.style[d]!==void 0){if(n||is(r,"undefined"))return o(),e!="pfx"||d;try{mStyle.style[d]=r}catch{}if(mStyle.style[d]!=f)return o(),e!="pfx"||d}return o(),!1}function fnBind(s,e){return function(){return s.apply(e,arguments)}}function testDOMProps(s,e,r){var n;for(var o in s)if(s[o]in e)return r===!1?s[o]:(n=e[s[o]],is(n,"function")?fnBind(n,r||e):n);return!1}function testPropsAll(s,e,r,n,o){var a=s.charAt(0).toUpperCase()+s.slice(1),c=(s+" "+cssomPrefixes.join(a+" ")+a).split(" ");return is(e,"string")||is(e,"undefined")?testProps(c,e,n,o):(c=(s+" "+domPrefixes.join(a+" ")+a).split(" "),testDOMProps(c,e,r))}function testAllProps(s,e,r){return testPropsAll(s,void 0,void 0,e,r)}function setClasses(s){var e=docElement.className,r=Modernizr._config.classPrefix||"";if(isSVG&&(e=e.baseVal),Modernizr._config.enableJSClass){var n=new RegExp("(^|\\s)"+r+"no-js(\\s|$)");e=e.replace(n,"$1"+r+"js$2")}Modernizr._config.enableClasses&&(e+=" "+r+s.join(" "+r),isSVG?docElement.className.baseVal=e:docElement.className=e)}function addTest(s,e){if((s===void 0?"undefined":(0,_typeof3.default)(s))=="object")for(var r in s)hasOwnProp(s,r)&&addTest(r,s[r]);else{s=s.toLowerCase();var n=s.split("."),o=Modernizr[n[0]];if(n.length==2&&(o=o[n[1]]),o!==void 0)return Modernizr;e=typeof e=="function"?e():e,n.length==1?Modernizr[n[0]]=e:(!Modernizr[n[0]]||Modernizr[n[0]]instanceof Boolean||(Modernizr[n[0]]=new Boolean(Modernizr[n[0]])),Modernizr[n[0]][n[1]]=e),setClasses([(e&&e!=0?"":"no-")+n.join("-")]),Modernizr._trigger(s,e)}return Modernizr}function detectDeleteDatabase(s,e){var r=s.deleteDatabase(e);r.onsuccess=function(){addTest("indexeddb.deletedatabase",!0)},r.onerror=function(){addTest("indexeddb.deletedatabase",!1)}}var _typeof2=__webpack_require__(20),_typeof3=_interopRequireDefault(_typeof2),tests=[],ModernizrProto={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!1,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(s,e){var r=this;setTimeout(function(){e(r[s])},0)},addTest:function(s,e,r){tests.push({name:s,fn:e,options:r})},addAsyncTest:function(s){tests.push({name:null,fn:s})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var classes=[],docElement=document.documentElement,isSVG=docElement.nodeName.toLowerCase()==="svg";/*!
{
  "name" : "HTML5 Audio Element",
  "property": "audio",
  "tags" : ["html5", "audio", "media"]
}
!*/Modernizr.addTest("audio",function(){var s=createElement("audio"),e=!1;try{e=!!s.canPlayType,e&&(e=new Boolean(e),e.ogg=s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),e.mp3=s.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,""),e.opus=s.canPlayType('audio/ogg; codecs="opus"')||s.canPlayType('audio/webm; codecs="opus"').replace(/^no$/,""),e.wav=s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e.m4a=(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""))}catch{}return e}),Modernizr.addTest("canvas",function(){var s=createElement("canvas");return!(!s.getContext||!s.getContext("2d"))}),Modernizr.addTest("cookies",function(){try{document.cookie="cookietest=1";var s=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",s}catch{return!1}});var omPrefixes="Moz O ms Webkit",cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];ModernizrProto._cssomPrefixes=cssomPrefixes;var modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style});var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];ModernizrProto._domPrefixes=domPrefixes,ModernizrProto.testAllProps=testPropsAll,ModernizrProto.testAllProps=testAllProps,Modernizr.addTest("cssanimations",testAllProps("animationName","a",!0)),Modernizr.addTest("boxshadow",testAllProps("boxShadow","1px 1px",!0)),Modernizr.addTest("boxsizing",testAllProps("boxSizing","border-box",!0)&&(document.documentMode===void 0||document.documentMode>7));var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];ModernizrProto._prefixes=prefixes,Modernizr.addTest("csscalc",function(){var s=createElement("a");return s.style.cssText="width:"+prefixes.join("calc(10px);width:"),!!s.style.length}),Modernizr.addTest("flexbox",testAllProps("flexBasis","1px",!0)),Modernizr.addTest("csstransforms",function(){return navigator.userAgent.indexOf("Android 2.")===-1&&testAllProps("transform","scale(1)",!0)});var testStyles=ModernizrProto.testStyles=injectElementWithStyles,newSyntax="CSS"in window&&"supports"in window.CSS,oldSyntax="supportsCSS"in window;Modernizr.addTest("supports",newSyntax||oldSyntax),Modernizr.addTest("csstransforms3d",function(){var s=!!testAllProps("perspective","1px",!0),e=Modernizr._config.usePrefixes;if(s&&(!e||"webkitPerspective"in docElement.style)){var r;Modernizr.supports?r="@supports (perspective: 1px)":(r="@media (transform-3d)",e&&(r+=",(-webkit-transform-3d)")),r+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",testStyles("#modernizr{width:0;height:0}"+r,function(n){s=n.offsetWidth===7&&n.offsetHeight===18})}return s}),Modernizr.addTest("csstransitions",testAllProps("transition","all",!0)),Modernizr.addTest("promises",function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var s;return new window.Promise(function(e){s=e}),typeof s=="function"}()}),Modernizr.addTest("filereader",!!(window.File&&window.FileList&&window.FileReader));var atRule=function(s){var e,r=prefixes.length,n=window.CSSRule;if(n!==void 0){if(!s)return!1;if(s=s.replace(/^@/,""),(e=s.replace(/-/g,"_").toUpperCase()+"_RULE")in n)return"@"+s;for(var o=0;o<r;o++){var a=prefixes[o];if(a.toUpperCase()+"_"+e in n)return"@-"+a.toLowerCase()+"-"+s}return!1}};ModernizrProto.atRule=atRule;var prefixed=ModernizrProto.prefixed=function(s,e,r){return s.indexOf("@")===0?atRule(s):(s.indexOf("-")!=-1&&(s=cssToDOM(s)),e?testPropsAll(s,e,r):testPropsAll(s,"pfx"))};/*!
{
  "name": "Filesystem API",
  "property": "filesystem",
  "caniuse": "filesystem",
  "notes": [{
    "name": "W3 Draft",
    "href": "http://dev.w3.org/2009/dap/file-system/file-dir-sys.html"
  }],
  "authors": ["Eric Bidelman (@ebidel)"],
  "tags": ["file"],
  "builderAliases": ["file_filesystem"],
  "knownBugs": ["The API will be present in Chrome incognito, but will throw an exception. See crbug.com/93417"]
}
!*/Modernizr.addTest("filesystem",!!prefixed("requestFileSystem",window)),Modernizr.addTest("placeholder","placeholder"in createElement("input")&&"placeholder"in createElement("textarea")),Modernizr.addTest("fullscreen",!(!prefixed("exitFullscreen",document,!1)&&!prefixed("cancelFullScreen",document,!1))),Modernizr.addTest("geolocation","geolocation"in navigator);var hasEvent=function(){function s(r,n){var o;return!!r&&(n&&typeof n!="string"||(n=createElement(n||"div")),r="on"+r,o=r in n,!o&&e&&(n.setAttribute||(n=createElement("div")),n.setAttribute(r,""),o=typeof n[r]=="function",n[r]!==void 0&&(n[r]=void 0),n.removeAttribute(r)),o)}var e=!("onblur"in document.documentElement);return s}();ModernizrProto.hasEvent=hasEvent,Modernizr.addTest("hashchange",function(){return hasEvent("hashchange",window)!==!1&&(document.documentMode===void 0||document.documentMode>7)}),Modernizr.addTest("history",function(){var s=navigator.userAgent;return(s.indexOf("Android 2.")===-1&&s.indexOf("Android 4.0")===-1||s.indexOf("Mobile Safari")===-1||s.indexOf("Chrome")!==-1||s.indexOf("Windows Phone")!==-1||location.protocol==="file:")&&window.history&&"pushState"in window.history});var hasOwnProp;(function(){var s={}.hasOwnProperty;hasOwnProp=is(s,"undefined")||is(s.call,"undefined")?function(e,r){return r in e&&is(e.constructor.prototype[r],"undefined")}:function(e,r){return s.call(e,r)}})(),ModernizrProto._l={},ModernizrProto.on=function(s,e){this._l[s]||(this._l[s]=[]),this._l[s].push(e),Modernizr.hasOwnProperty(s)&&setTimeout(function(){Modernizr._trigger(s,Modernizr[s])},0)},ModernizrProto._trigger=function(s,e){if(this._l[s]){var r=this._l[s];setTimeout(function(){var n;for(n=0;n<r.length;n++)(0,r[n])(e)},0),delete this._l[s]}},Modernizr._q.push(function(){ModernizrProto.addTest=addTest}),Modernizr.addAsyncTest(function(){function s(n,o,a){function c(h){var d=!(!h||h.type!=="load")&&l.width==1;addTest(n,n==="webp"&&d?new Boolean(d):d),a&&a(h)}var l=new Image;l.onerror=c,l.onload=c,l.src=o}var e=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],r=e.shift();s(r.name,r.uri,function(n){if(n&&n.type==="load")for(var o=0;o<e.length;o++)s(e[o].name,e[o].uri)})}),Modernizr.addAsyncTest(function(){var s=new Image;s.onerror=function(){addTest("webpalpha",!1)},s.onload=function(){addTest("webpalpha",s.width==1)},s.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="}),Modernizr.addAsyncTest(function(){var s;try{s=prefixed("indexedDB",window)}catch{}if(s){var e="modernizr-"+Math.random(),r=s.open(e);r.onerror=function(){r.error&&r.error.name==="InvalidStateError"?addTest("indexeddb",!1):(addTest("indexeddb",!0),detectDeleteDatabase(s,e))},r.onsuccess=function(){addTest("indexeddb",!0),detectDeleteDatabase(s,e)}}else addTest("indexeddb",!1)}),Modernizr.addTest("json","JSON"in window&&"parse"in JSON&&"stringify"in JSON),Modernizr.addTest("fetch","fetch"in window),Modernizr.addTest("xhr2","XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest),Modernizr.addTest("notification",function(){if(!window.Notification||!window.Notification.requestPermission)return!1;if(window.Notification.permission==="granted")return!0;try{new window.Notification("")}catch(s){if(s.name==="TypeError")return!1}return!0}),Modernizr.addTest("performance",!!prefixed("performance",window)),Modernizr.addTest("pointerevents",function(){var s=!1,e=domPrefixes.length;for(s=Modernizr.hasEvent("pointerdown");e--&&!s;)hasEvent(domPrefixes[e]+"pointerdown")&&(s=!0);return s}),Modernizr.addTest("queryselector","querySelector"in document&&"querySelectorAll"in document),Modernizr.addTest("scriptasync","async"in createElement("script")),Modernizr.addTest("scriptdefer","defer"in createElement("script")),Modernizr.addTest("serviceworker","serviceWorker"in navigator),Modernizr.addTest("localstorage",function(){var s="modernizr";try{return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch{return!1}}),Modernizr.addTest("sessionstorage",function(){var s="modernizr";try{return sessionStorage.setItem(s,s),sessionStorage.removeItem(s),!0}catch{return!1}}),Modernizr.addTest("websqldatabase","openDatabase"in window),Modernizr.addTest("stylescoped","scoped"in createElement("style")),Modernizr.addTest("svg",!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("templatestrings",function(){var supports;try{eval("``"),supports=!0}catch(s){}return!!supports}),Modernizr.addTest("touchevents",function(){var s;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)s=!0;else{var e=["@media (",prefixes.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");testStyles(e,function(r){s=r.offsetTop===9})}return s}),Modernizr.addTest("typedarrays","ArrayBuffer"in window);/*!
{
  "name": "Blob URLs",
  "property": "bloburls",
  "caniuse": "bloburls",
  "notes": [{
    "name": "W3C Working Draft",
    "href": "https://www.w3.org/TR/FileAPI/#creating-revoking"
  }],
  "tags": ["file", "url"],
  "authors": ["Ron Waldon (@jokeyrhyme)"]
}
!*/var url=prefixed("URL",window,!1);url=url&&window[url],Modernizr.addTest("bloburls",url&&"revokeObjectURL"in url&&"createObjectURL"in url),Modernizr.addAsyncTest(function(){function s(){var r=new Image;r.onerror=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=!1},r.onload=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=r.width==1&&r.height==1};for(var n="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";n.length<33e3;)n=`\r
`+n;r.src="data:image/gif;base64,"+n}navigator.userAgent.indexOf("MSIE 7.")!==-1&&setTimeout(function(){addTest("datauri",!1)},10);var e=new Image;e.onerror=function(){addTest("datauri",!1)},e.onload=function(){e.width==1&&e.height==1?s():addTest("datauri",!1)},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),Modernizr.addTest("video",function(){var s=createElement("video"),e=!1;try{e=!!s.canPlayType,e&&(e=new Boolean(e),e.ogg=s.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=s.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=s.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),e.vp9=s.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),e.hls=s.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch{}return e}),Modernizr.addTest("webgl",function(){var s=createElement("canvas"),e="probablySupportsContext"in s?"probablySupportsContext":"supportsContext";return e in s?s[e]("webgl")||s[e]("experimental-webgl"):"WebGLRenderingContext"in window});/*!
{
  "name": "WebSockets Support",
  "property": "websockets",
  "authors": ["Phread [fearphage]", "Mike Sherov [mikesherov]", "Burak Yigit Kaya [BYK]"],
  "caniuse": "websockets",
  "tags": ["html5"],
  "warnings": [
    "This test will reject any old version of WebSockets even if it is not prefixed such as in Safari 5.1"
  ],
  "notes": [{
    "name": "CLOSING State and Spec",
    "href": "https://www.w3.org/TR/websockets/#the-websocket-interface"
  }],
  "polyfills": [
    "sockjs",
    "socketio",
    "kaazing-websocket-gateway",
    "websocketjs",
    "atmosphere",
    "graceful-websocket",
    "portal",
    "datachannel"
  ]
}
!*/var supports=!1;try{supports="WebSocket"in window&&window.WebSocket.CLOSING===2}catch(s){}Modernizr.addTest("websockets",supports),Modernizr.testRunner=testRunner,delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();module.exports=Modernizr},function(s,e){s.exports={"feature-detects":["audio","canvas","cookies","css/animations","css/boxshadow","css/boxsizing","css/calc","css/flexbox","css/transforms","css/transforms3d","css/transitions","es6/promises","file/api","file/filesystem","forms/placeholder","fullscreen-api","geolocation","hashchange","history","img/webp","img/webp-alpha","indexeddb","json","network/fetch","network/xhr2","notification","performance","pointerevents","queryselector","script/async","script/defer","serviceworker","storage/localstorage","storage/sessionstorage","storage/websqldatabase","style/scoped","svg","templatestrings","touchevents","typed-arrays","url/bloburls","url/data-uri","video","webgl","websockets"],"special-names":{"css/boxshadow":"boxshadow","css/boxsizing":"boxsizing","css/flexbox":"flexbox","es6/promises":"promises","file/api":"filereader","file/filesystem":"filesystem","forms/placeholder":"placeholder","fullscreen-api":"fullscreen","img/webp":"webp","img/webp-alpha":"webpalpha","network/fetch":"fetch","network/xhr2":"xhr2","storage/localstorage":"localstorage","storage/sessionstorage":"sessionstorage","storage/websqldatabase":"websqldatabase","typed-arrays":"typedarrays","url/bloburls":"bloburls","url/data-uri":"datauri"}}},function(s,e,r){e=s.exports=r(97)(void 0),e.push([s.i,'.eruda-dev-tools .eruda-tools .eruda-features{padding-bottom:40px;padding-top:5px}.eruda-dev-tools .eruda-tools .eruda-features ul{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}.eruda-dev-tools .eruda-tools .eruda-features ul:after{content:"";display:block;clear:both}.eruda-dev-tools .eruda-tools .eruda-features ul li{width:33.3%;float:left;padding:5px}.eruda-dev-tools .eruda-tools .eruda-features ul li .eruda-inner-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;font-size:12px;text-decoration:underline;display:block;padding:10px;text-align:center;color:var(--console-error-foreground);background:var(--console-error-background);border:1px solid var(--console-error-border)}.eruda-dev-tools .eruda-tools .eruda-features ul li .eruda-inner-wrapper.eruda-ok{background:var(--darker-background);border:1px solid var(--border);color:var(--foreground)}.eruda-dev-tools .eruda-tools .eruda-features .eruda-html5test{position:absolute;left:0;bottom:0;color:var(--fore-ground);border-top:1px solid var(--border);width:100%;background:var(--darker-background);display:block;height:40px;line-height:40px;text-decoration:none;text-align:center;margin-top:10px}.eruda-dev-tools .eruda-tools .eruda-features .eruda-html5test:active{color:var(--select-foreground)}',""])},function(s,e){function r(o,a){var c=o[1]||"",l=o[3];if(!l)return c;if(a&&typeof btoa=="function"){var h=n(l);return[c].concat(l.sources.map(function(d){return"/*# sourceURL="+l.sourceRoot+d+" */"})).concat([h]).join(`
`)}return[c].join(`
`)}function n(o){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"}s.exports=function(o){var a=[];return a.toString=function(){return this.map(function(c){var l=r(c,o);return c[2]?"@media "+c[2]+"{"+l+"}":l}).join("")},a.i=function(c,l){typeof c=="string"&&(c=[[null,c,""]]);for(var h={},d=0;d<this.length;d++){var f=this[d][0];typeof f=="number"&&(h[f]=!0)}for(d=0;d<c.length;d++){var g=c[d];typeof g[0]=="number"&&h[g[0]]||(l&&!g[2]?g[2]=l:l&&(g[2]="("+g[2]+") and ("+l+")"),a.push(g))}},a}},function(s,e,r){s.exports=r(99).default},function(s,e,r){function n(x){return x&&x.__esModule?x:{default:x}}function o(x){if(x&&x.__esModule)return x;var D={};if(x!=null)for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&(D[R]=x[R]);return D.default=x,D}function a(){var x=new l.HandlebarsEnvironment;return E.extend(x,l),x.SafeString=d.default,x.Exception=g.default,x.Utils=E,x.escapeExpression=E.escapeExpression,x.VM=w,x.template=function(D){return w.template(D,x)},x}e.__esModule=!0;var c=r(46),l=o(c),h=r(111),d=n(h),f=r(13),g=n(f),_=r(1),E=o(_),A=r(112),w=o(A),m=r(113),b=n(m),y=a();y.create=a,b.default(y),y.default=y,e.default=y,s.exports=e.default},function(s,e,r){function n(x){return x&&x.__esModule?x:{default:x}}function o(x){c.default(x),h.default(x),f.default(x),_.default(x),A.default(x),m.default(x),y.default(x)}e.__esModule=!0,e.registerDefaultHelpers=o;var a=r(101),c=n(a),l=r(102),h=n(l),d=r(103),f=n(d),g=r(104),_=n(g),E=r(105),A=n(E),w=r(106),m=n(w),b=r(107),y=n(b)},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("blockHelperMissing",function(a,c){var l=c.inverse,h=c.fn;if(a===!0)return h(this);if(a===!1||a==null)return l(this);if(n.isArray(a))return a.length>0?(c.ids&&(c.ids=[c.name]),o.helpers.each(a,c)):l(this);if(c.data&&c.ids){var d=n.createFrame(c.data);d.contextPath=n.appendContextPath(c.data.contextPath,c.name),c={data:d}}return h(a,c)})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1),o=r(13),a=function(c){return c&&c.__esModule?c:{default:c}}(o);e.default=function(c){c.registerHelper("each",function(l,h){function d(x,D,R){A&&(A.key=x,A.index=D,A.first=D===0,A.last=!!R,w&&(A.contextPath=w+x)),E+=f(l[x],{data:A,blockParams:n.blockParams([l[x],x],[w+x,null])})}if(!h)throw new a.default("Must pass iterator to #each");var f=h.fn,g=h.inverse,_=0,E="",A=void 0,w=void 0;if(h.data&&h.ids&&(w=n.appendContextPath(h.data.contextPath,h.ids[0])+"."),n.isFunction(l)&&(l=l.call(this)),h.data&&(A=n.createFrame(h.data)),l&&typeof l=="object")if(n.isArray(l))for(var m=l.length;_<m;_++)_ in l&&d(_,_,_===l.length-1);else{var b=void 0;for(var y in l)l.hasOwnProperty(y)&&(b!==void 0&&d(b,_-1),b=y,_++);b!==void 0&&d(b,_-1,!0)}return _===0&&(E=g(this)),E})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(13),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(a){a.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("if",function(a,c){return n.isFunction(a)&&(a=a.call(this)),!c.hash.includeZero&&!a||n.isEmpty(a)?c.inverse(this):c.fn(this)}),o.registerHelper("unless",function(a,c){return o.helpers.if.call(this,a,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},s.exports=e.default},function(s,e,r){e.__esModule=!0,e.default=function(n){n.registerHelper("log",function(){for(var o=[void 0],a=arguments[arguments.length-1],c=0;c<arguments.length-1;c++)o.push(arguments[c]);var l=1;a.hash.level!=null?l=a.hash.level:a.data&&a.data.level!=null&&(l=a.data.level),o[0]=l,n.log.apply(n,o)})},s.exports=e.default},function(s,e,r){e.__esModule=!0,e.default=function(n){n.registerHelper("lookup",function(o,a){return o&&o[a]})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("with",function(a,c){n.isFunction(a)&&(a=a.call(this));var l=c.fn;if(n.isEmpty(a))return c.inverse(this);var h=c.data;return c.data&&c.ids&&(h=n.createFrame(c.data),h.contextPath=n.appendContextPath(c.data.contextPath,c.ids[0])),l(a,{data:h,blockParams:n.blockParams([a],[h&&h.contextPath])})})},s.exports=e.default},function(s,e,r){function n(c){a.default(c)}e.__esModule=!0,e.registerDefaultDecorators=n;var o=r(109),a=function(c){return c&&c.__esModule?c:{default:c}}(o)},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerDecorator("inline",function(a,c,l,h){var d=a;return c.partials||(c.partials={},d=function(f,g){var _=l.partials;l.partials=n.extend({},_,c.partials);var E=a(f,g);return l.partials=_,E}),c.partials[h.args[0]]=h.fn,d})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if(typeof a=="string"){var c=n.indexOf(o.methodMap,a.toLowerCase());a=c>=0?c:parseInt(a,10)}return a},log:function(a){if(a=o.lookupLevel(a),typeof console<"u"&&o.lookupLevel(o.level)<=a){var c=o.methodMap[a];console[c]||(c="log");for(var l=arguments.length,h=Array(l>1?l-1:0),d=1;d<l;d++)h[d-1]=arguments[d];console[c].apply(console,h)}}};e.default=o,s.exports=e.default},function(s,e,r){function n(o){this.string=o}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,s.exports=e.default},function(s,e,r){function n(m){var b=m&&m[0]||1,y=w.COMPILER_REVISION;if(b!==y){if(b<y){var x=w.REVISION_CHANGES[y],D=w.REVISION_CHANGES[b];throw new A.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+x+") or downgrade your runtime to an older version ("+D+").")}throw new A.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+m[1]+").")}}function o(m,b){function y(R,M,L){L.hash&&(M=_.extend({},M,L.hash),L.ids&&(L.ids[0]=!0)),R=b.VM.resolvePartial.call(this,R,M,L);var k=b.VM.invokePartial.call(this,R,M,L);if(k==null&&b.compile&&(L.partials[L.name]=b.compile(R,m.compilerOptions,b),k=L.partials[L.name](M,L)),k!=null){if(L.indent){for(var I=k.split(`
`),V=0,N=I.length;V<N&&(I[V]||V+1!==N);V++)I[V]=L.indent+I[V];k=I.join(`
`)}return k}throw new A.default("The partial "+L.name+" could not be compiled when running in runtime-only mode")}function x(R){function M(N){return""+m.main(D,N,D.helpers,D.partials,k,V,I)}var L=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],k=L.data;x._setup(L),!L.partial&&m.useData&&(k=d(R,k));var I=void 0,V=m.useBlockParams?[]:void 0;return m.useDepths&&(I=L.depths?R!=L.depths[0]?[R].concat(L.depths):L.depths:[R]),(M=f(m.main,M,D,L.depths||[],k,V))(R,L)}if(!b)throw new A.default("No environment passed to template");if(!m||!m.main)throw new A.default("Unknown template object: "+typeof m);m.main.decorator=m.main_d,b.VM.checkRevision(m.compiler);var D={strict:function(R,M){if(!(M in R))throw new A.default('"'+M+'" not defined in '+R);return R[M]},lookup:function(R,M){for(var L=R.length,k=0;k<L;k++)if(R[k]&&R[k][M]!=null)return R[k][M]},lambda:function(R,M){return typeof R=="function"?R.call(M):R},escapeExpression:_.escapeExpression,invokePartial:y,fn:function(R){var M=m[R];return M.decorator=m[R+"_d"],M},programs:[],program:function(R,M,L,k,I){var V=this.programs[R],N=this.fn(R);return M||I||k||L?V=a(this,R,N,M,L,k,I):V||(V=this.programs[R]=a(this,R,N)),V},data:function(R,M){for(;R&&M--;)R=R._parent;return R},merge:function(R,M){var L=R||M;return R&&M&&R!==M&&(L=_.extend({},M,R)),L},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:m.compiler};return x.isTop=!0,x._setup=function(R){R.partial?(D.helpers=R.helpers,D.partials=R.partials,D.decorators=R.decorators):(D.helpers=D.merge(R.helpers,b.helpers),m.usePartial&&(D.partials=D.merge(R.partials,b.partials)),(m.usePartial||m.useDecorators)&&(D.decorators=D.merge(R.decorators,b.decorators)))},x._child=function(R,M,L,k){if(m.useBlockParams&&!L)throw new A.default("must pass block params");if(m.useDepths&&!k)throw new A.default("must pass parent depths");return a(D,R,m[R],M,0,L,k)},x}function a(m,b,y,x,D,R,M){function L(k){var I=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],V=M;return!M||k==M[0]||k===m.nullContext&&M[0]===null||(V=[k].concat(M)),y(m,k,m.helpers,m.partials,I.data||x,R&&[I.blockParams].concat(R),V)}return L=f(y,L,m,M,x,R),L.program=b,L.depth=M?M.length:0,L.blockParams=D||0,L}function c(m,b,y){return m?m.call||y.name||(y.name=m,m=y.partials[m]):m=y.name==="@partial-block"?y.data["partial-block"]:y.partials[y.name],m}function l(m,b,y){var x=y.data&&y.data["partial-block"];y.partial=!0,y.ids&&(y.data.contextPath=y.ids[0]||y.data.contextPath);var D=void 0;if(y.fn&&y.fn!==h&&function(){y.data=w.createFrame(y.data);var R=y.fn;D=y.data["partial-block"]=function(M){var L=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return L.data=w.createFrame(L.data),L.data["partial-block"]=x,R(M,L)},R.partials&&(y.partials=_.extend({},y.partials,R.partials))}(),m===void 0&&D&&(m=D),m===void 0)throw new A.default("The partial "+y.name+" could not be found");if(m instanceof Function)return m(b,y)}function h(){return""}function d(m,b){return b&&"root"in b||(b=b?w.createFrame(b):{},b.root=m),b}function f(m,b,y,x,D,R){if(m.decorator){var M={};b=m.decorator(b,M,y,x&&x[0],D,R,x),_.extend(b,M)}return b}e.__esModule=!0,e.checkRevision=n,e.template=o,e.wrapProgram=a,e.resolvePartial=c,e.invokePartial=l,e.noop=h;var g=r(1),_=function(m){if(m&&m.__esModule)return m;var b={};if(m!=null)for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(b[y]=m[y]);return b.default=m,b}(g),E=r(13),A=function(m){return m&&m.__esModule?m:{default:m}}(E),w=r(46)},function(s,e,r){(function(n){e.__esModule=!0,e.default=function(o){var a=n!==void 0?n:window,c=a.Handlebars;o.noConflict=function(){return a.Handlebars===o&&(a.Handlebars=c),o}},s.exports=e.default}).call(e,r(114))},function(s,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(r=window)}s.exports=r}])})})(erudaFeatures$1);var erudaFeaturesExports=erudaFeatures$1.exports;const erudaFeatures=getDefaultExportFromCjs(erudaFeaturesExports);var global=typeof window<"u"?window:null,ssr=global===null,document$1=ssr?void 0:global.document,addEventListener$1="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect="getBoundingClientRect",gutterStartDragging="_a",aGutterSize="_b",bGutterSize="_c",HORIZONTAL="horizontal",NOOP=function(){return!1},calc=ssr?"calc":["","-webkit-","-moz-","-o-"].filter(function(s){var e=document$1.createElement("div");return e.style.cssText="width:"+s+"calc(9px)",!!e.style.length}).shift()+"calc",isString=function(s){return typeof s=="string"||s instanceof String},elementOrSelector=function(s){if(isString(s)){var e=document$1.querySelector(s);if(!e)throw new Error("Selector "+s+" did not match a DOM element");return e}return s},getOption=function(s,e,r){var n=s[e];return n!==void 0?n:r},getGutterSize=function(s,e,r,n){if(e){if(n==="end")return 0;if(n==="center")return s/2}else if(r){if(n==="start")return 0;if(n==="center")return s/2}return s},defaultGutterFn=function(s,e){var r=document$1.createElement("div");return r.className="gutter gutter-"+e,r},defaultElementStyleFn=function(s,e,r){var n={};return isString(e)?n[s]=e:n[s]=calc+"("+e+"% - "+r+"px)",n},defaultGutterStyleFn=function(s,e){var r;return r={},r[s]=e+"px",r},Split=function(s,e){if(e===void 0&&(e={}),ssr)return{};var r=s,n,o,a,c,l,h;Array.from&&(r=Array.from(r));var d=elementOrSelector(r[0]),f=d.parentNode,g=getComputedStyle?getComputedStyle(f):null,_=g?g.flexDirection:null,E=getOption(e,"sizes")||r.map(function(){return 100/r.length}),A=getOption(e,"minSize",100),w=Array.isArray(A)?A:r.map(function(){return A}),m=getOption(e,"maxSize",1/0),b=Array.isArray(m)?m:r.map(function(){return m}),y=getOption(e,"expandToMin",!1),x=getOption(e,"gutterSize",10),D=getOption(e,"gutterAlign","center"),R=getOption(e,"snapOffset",30),M=Array.isArray(R)?R:r.map(function(){return R}),L=getOption(e,"dragInterval",1),k=getOption(e,"direction",HORIZONTAL),I=getOption(e,"cursor",k===HORIZONTAL?"col-resize":"row-resize"),V=getOption(e,"gutter",defaultGutterFn),N=getOption(e,"elementStyle",defaultElementStyleFn),B=getOption(e,"gutterStyle",defaultGutterStyleFn);k===HORIZONTAL?(n="width",o="clientX",a="left",c="right",l="clientWidth"):k==="vertical"&&(n="height",o="clientY",a="top",c="bottom",l="clientHeight");function H(ne,de,ue,Fe){var Ie=N(n,de,ue,Fe);Object.keys(Ie).forEach(function(ye){ne.style[ye]=Ie[ye]})}function z(ne,de,ue){var Fe=B(n,de,ue);Object.keys(Fe).forEach(function(Ie){ne.style[Ie]=Fe[Ie]})}function W(){return h.map(function(ne){return ne.size})}function Q(ne){return"touches"in ne?ne.touches[0][o]:ne[o]}function X(ne){var de=h[this.a],ue=h[this.b],Fe=de.size+ue.size;de.size=ne/this.size*Fe,ue.size=Fe-ne/this.size*Fe,H(de.element,de.size,this[aGutterSize],de.i),H(ue.element,ue.size,this[bGutterSize],ue.i)}function G(ne){var de,ue=h[this.a],Fe=h[this.b];this.dragging&&(de=Q(ne)-this.start+(this[aGutterSize]-this.dragOffset),L>1&&(de=Math.round(de/L)*L),de<=ue.minSize+ue.snapOffset+this[aGutterSize]?de=ue.minSize+this[aGutterSize]:de>=this.size-(Fe.minSize+Fe.snapOffset+this[bGutterSize])&&(de=this.size-(Fe.minSize+this[bGutterSize])),de>=ue.maxSize-ue.snapOffset+this[aGutterSize]?de=ue.maxSize+this[aGutterSize]:de<=this.size-(Fe.maxSize-Fe.snapOffset+this[bGutterSize])&&(de=this.size-(Fe.maxSize+this[bGutterSize])),X.call(this,de),getOption(e,"onDrag",NOOP)(W()))}function q(){var ne=h[this.a].element,de=h[this.b].element,ue=ne[getBoundingClientRect](),Fe=de[getBoundingClientRect]();this.size=ue[n]+Fe[n]+this[aGutterSize]+this[bGutterSize],this.start=ue[a],this.end=ue[c]}function Y(ne){if(!getComputedStyle)return null;var de=getComputedStyle(ne);if(!de)return null;var ue=ne[l];return ue===0?null:(k===HORIZONTAL?ue-=parseFloat(de.paddingLeft)+parseFloat(de.paddingRight):ue-=parseFloat(de.paddingTop)+parseFloat(de.paddingBottom),ue)}function K(ne){var de=Y(f);if(de===null||w.reduce(function(ye,$e){return ye+$e},0)>de)return ne;var ue=0,Fe=[],Ie=ne.map(function(ye,$e){var Oe=de*ye/100,Le=getGutterSize(x,$e===0,$e===ne.length-1,D),He=w[$e]+Le;return Oe<He?(ue+=He-Oe,Fe.push(0),He):(Fe.push(Oe-He),Oe)});return ue===0?ne:Ie.map(function(ye,$e){var Oe=ye;if(ue>0&&Fe[$e]-ue>0){var Le=Math.min(ue,Fe[$e]-ue);ue-=Le,Oe=ye-Le}return Oe/de*100})}function se(){var ne=this,de=h[ne.a].element,ue=h[ne.b].element;ne.dragging&&getOption(e,"onDragEnd",NOOP)(W()),ne.dragging=!1,global[removeEventListener]("mouseup",ne.stop),global[removeEventListener]("touchend",ne.stop),global[removeEventListener]("touchcancel",ne.stop),global[removeEventListener]("mousemove",ne.move),global[removeEventListener]("touchmove",ne.move),ne.stop=null,ne.move=null,de[removeEventListener]("selectstart",NOOP),de[removeEventListener]("dragstart",NOOP),ue[removeEventListener]("selectstart",NOOP),ue[removeEventListener]("dragstart",NOOP),de.style.userSelect="",de.style.webkitUserSelect="",de.style.MozUserSelect="",de.style.pointerEvents="",ue.style.userSelect="",ue.style.webkitUserSelect="",ue.style.MozUserSelect="",ue.style.pointerEvents="",ne.gutter.style.cursor="",ne.parent.style.cursor="",document$1.body.style.cursor=""}function Se(ne){if(!("button"in ne&&ne.button!==0)){var de=this,ue=h[de.a].element,Fe=h[de.b].element;de.dragging||getOption(e,"onDragStart",NOOP)(W()),ne.preventDefault(),de.dragging=!0,de.move=G.bind(de),de.stop=se.bind(de),global[addEventListener$1]("mouseup",de.stop),global[addEventListener$1]("touchend",de.stop),global[addEventListener$1]("touchcancel",de.stop),global[addEventListener$1]("mousemove",de.move),global[addEventListener$1]("touchmove",de.move),ue[addEventListener$1]("selectstart",NOOP),ue[addEventListener$1]("dragstart",NOOP),Fe[addEventListener$1]("selectstart",NOOP),Fe[addEventListener$1]("dragstart",NOOP),ue.style.userSelect="none",ue.style.webkitUserSelect="none",ue.style.MozUserSelect="none",ue.style.pointerEvents="none",Fe.style.userSelect="none",Fe.style.webkitUserSelect="none",Fe.style.MozUserSelect="none",Fe.style.pointerEvents="none",de.gutter.style.cursor=I,de.parent.style.cursor=I,document$1.body.style.cursor=I,q.call(de),de.dragOffset=Q(ne)-de.end}}E=K(E);var be=[];h=r.map(function(ne,de){var ue={element:elementOrSelector(ne),size:E[de],minSize:w[de],maxSize:b[de],snapOffset:M[de],i:de},Fe;if(de>0&&(Fe={a:de-1,b:de,dragging:!1,direction:k,parent:f},Fe[aGutterSize]=getGutterSize(x,de-1===0,!1,D),Fe[bGutterSize]=getGutterSize(x,!1,de===r.length-1,D),_==="row-reverse"||_==="column-reverse")){var Ie=Fe.a;Fe.a=Fe.b,Fe.b=Ie}if(de>0){var ye=V(de,k,ue.element);z(ye,x,de),Fe[gutterStartDragging]=Se.bind(Fe),ye[addEventListener$1]("mousedown",Fe[gutterStartDragging]),ye[addEventListener$1]("touchstart",Fe[gutterStartDragging]),f.insertBefore(ye,ue.element),Fe.gutter=ye}return H(ue.element,ue.size,getGutterSize(x,de===0,de===r.length-1,D),de),de>0&&be.push(Fe),ue});function xe(ne){var de=ne.i===be.length,ue=de?be[ne.i-1]:be[ne.i];q.call(ue);var Fe=de?ue.size-ne.minSize-ue[bGutterSize]:ne.minSize+ue[aGutterSize];X.call(ue,Fe)}h.forEach(function(ne){var de=ne.element[getBoundingClientRect]()[n];de<ne.minSize&&(y?xe(ne):ne.minSize=de)});function Ee(ne){var de=K(ne);de.forEach(function(ue,Fe){if(Fe>0){var Ie=be[Fe-1],ye=h[Ie.a],$e=h[Ie.b];ye.size=de[Fe-1],$e.size=ue,H(ye.element,ye.size,Ie[aGutterSize],ye.i),H($e.element,$e.size,Ie[bGutterSize],$e.i)}})}function J(ne,de){be.forEach(function(ue){if(de!==!0?ue.parent.removeChild(ue.gutter):(ue.gutter[removeEventListener]("mousedown",ue[gutterStartDragging]),ue.gutter[removeEventListener]("touchstart",ue[gutterStartDragging])),ne!==!0){var Fe=N(n,ue.a.size,ue[aGutterSize]);Object.keys(Fe).forEach(function(Ie){h[ue.a].element.style[Ie]="",h[ue.b].element.style[Ie]=""})}})}return{setSizes:Ee,getSizes:W,collapse:function(de){xe(h[de])},destroy:J,parent:f,pairs:be}};function makeSplitJS(s){var e=localStorage.getItem("split-sizes"),r;e?r=JSON.parse(e):r=[50,50],Split(s,{sizes:r,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,onDragEnd:function(n){localStorage.setItem("split-sizes",JSON.stringify(n))}})}class Controller{mpyc;editor;term;demoSelect;hostPeerIDInput;chatInput;myPeerIDEl;knownPeersEl;resetPeerIDButton;runMPyCButton;runMPyCAsyncButton;stopMPyCButton;connectToPeerButton;sendMessageButton;clearTerminalButton;showQRCodeButton;scanQRInput;versionDiv;toggleStatsEl;qrScanner;scanQRCodeButton;qrScannerModal;qrScannerModalDiv;closeQRScannerButton;constructor(e,r){this.mpyc=e,this.demoSelect=$(r.demoSelectSelector),this.hostPeerIDInput=$(r.hostPeerIDInputSelector),this.chatInput=$(r.chatInputSelector),this.myPeerIDEl=$(r.myPeerIDSelector),this.knownPeersEl=$(r.peersDivSelector),this.resetPeerIDButton=$(r.resetPeerIDButtonSelector),this.runMPyCButton=$(r.runMPyCButtonSelector),this.runMPyCAsyncButton=$(r.runMPyCAsyncButtonSelector),this.stopMPyCButton=$(r.stopMPyCButtonSelector),this.connectToPeerButton=$(r.connectToPeerButtonSelector),this.sendMessageButton=$(r.sendMessageButtonSelector),this.clearTerminalButton=$(r.clearTerminalButtonSelector),this.showQRCodeButton=$(r.showQRCodeButtonSelector),this.scanQRInput=$(r.scanQRInputSelector),this.toggleStatsEl=$(r.toggleStatsSelector),this.versionDiv=$(r.versionSelector),this.scanQRCodeButton=$("#scanQRCodeButton"),this.closeQRScannerButton=$("#closeQRCodeScannerButton"),this.qrScannerModalDiv=$("#qrScannerModal"),this.qrScannerModal=new Modal(this.qrScannerModalDiv),this.term=new Term(r.terminalSelector,e),this.editor=new Editor(r.editorSelector,this.demoSelect,e),this.init(e,r)}init(e,r){this.term.info(`Initializing ${format.green("PeerJS")}...`),this.term.info(`Initializing ${format.green(e.runtime.type())} runtime...`),this.updateHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",debounce(()=>{try{let o=new URL(this.hostPeerIDInput.value).searchParams.get("peer");o&&(this.hostPeerIDInput.value=o)}catch{}})),$$('[data-bs-toggle="tooltip"]').forEach(n=>new Tooltip(n,{trigger:"hover"})),this.setupMPyCEvents(e),this.setupButtonEvents(e,r),this.setupDemoSelector(),makeSplitJS(r.splitPanelSelectors),this.setupGlobals()}setupMPyCEvents(e){addEventListener("error",r=>{this.term.error(r.error)}),e.on("transport:ready",async r=>{this.myPeerIDEl.value=safe(r),setTabState("myPeerID",r),console.log("Peer ID: "+r),this.term.success(`${format.green("PeerJS")} ready with ID: ${format.peerID(r)}`),this.updatePeersDiv()}),e.on("transport:closed",async()=>{this.term.error("PeerJS closed.")}),e.on("transport:error",async r=>{this.term.warn(`PeerJS failed: ${r.message}`),console.warn(`PeerJS failed: ${r.message}
${r.stack}`),r.message==="Lost connection to server."&&setTimeout(()=>{this.mpyc.transport.reconnect()},1e3)}),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",async r=>{this.term.error(r.error)}),e.on("runtime:messageerror",async r=>{this.term.error(r.data)}),e.on("runtime:exec:done",async()=>{this.updatePeersDiv()}),e.on("runtime:exec:init",async()=>{this.updatePeersDiv()}),e.on("runtime:display",async r=>{this.term.display(r)}),e.on("runtime:display:error",async r=>{this.term.displayError(r)}),e.on("runtime:display:stats",async r=>{this.term.live(r)}),e.on("runtime:ready",async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${format.green(e.runtime.type())} runtime ready.`)})}closeQRScanner(){this.qrScanner.stop(),this.qrScannerModal.hide()}setupButtonEvents(e,r){this.resetPeerIDButton.addEventListener("click",async()=>{delete sessionStorage.myPeerID,this.term.writeln("Restarting PeerJS..."),e.resetTransport(()=>new PeerJSTransport)}),this.stopMPyCButton.addEventListener("click",async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()}),this.runMPyCButton.addEventListener("click",async o=>{e.runMPC(this.editor.getCode(),this.demoSelect.value,o.ctrlKey||o.shiftKey)}),this.connectToPeerButton.addEventListener("click",async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)}),this.sendMessageButton.addEventListener("click",async()=>{this.sendChatMessage()}),this.clearTerminalButton.addEventListener("click",async()=>{this.term.clear()}),this.closeQRScannerButton.addEventListener("click",async()=>{this.closeQRScanner()}),this.scanQRCodeButton.addEventListener("click",async()=>{const o={fps:10,qrbox:{width:150,height:150}},a=(c,l)=>{this.hostPeerIDInput.value=c,this.hostPeerIDInput.dispatchEvent(new Event("input")),this.closeQRScanner()};this.qrScanner.start({facingMode:"environment"},o,a,void 0),this.qrScannerModal.show()}),this.qrScannerModalDiv.addEventListener("hidden.bs.modal",async()=>{this.qrScanner.stop()}),isMobileFn(navigator.userAgent)&&(this.scanQRCodeButton.hidden=!1,this.setupEruda(),this.qrScanner=new Html5Qrcode("qrScannerEl",{formatsToSupport:[Html5QrcodeSupportedFormats.QR_CODE],verbose:!1})),this.toggleStatsEl.addEventListener("click",async()=>{this.toggleStatsEl.checked?(setStorage("showStats","true"),Tooltip.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(setStorage("showStats","false"),Tooltip.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())});const n=getStorage("showStats");this.toggleStatsEl.checked=n==="true",this.toggleStatsEl.dispatchEvent(new Event("click")),this.chatInput.addEventListener("keypress",async o=>{let a=o;if(a.key==="Enter"&&!a.shiftKey)return a.preventDefault(),this.sendChatMessage()}),makeQRButton(r.showQRCodeButtonSelector,()=>this.myPeerIDEl.value),new CopyButton(r.myPeerIDSelector,r.copyPeerIDButtonSelector)}setupEruda(){let e=document.createElement("div");document.body.prepend(e),eruda.init({container:e,autoScale:!0,tool:["console","elements","network","info","resources"]}),eruda.add(erudaFeatures),eruda.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.clearTabCount=()=>{delete localStorage.tabCount},window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}onPeerConnectedHook=async e=>{this.term.success(`Connected to: ${format.peerID(e)}`),this.updatePeersDiv()};async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach((e,r)=>{let n=`
        <span class="position-relative end-0">
            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>
        </span>`;this.knownPeersEl.innerHTML+=`
        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> 
            <span class="" style="user-select:none">${r}: </span>
            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${safe(e)}</span> 
            ${n}
        </li>`})}onPeerDisconnectedHook=async e=>{this.term.error(`Disconnected from: ${format.peerID(e)}`),this.updatePeersDiv()};onPeerConnectionErrorHook=async({peerID:e,err:r})=>{this.term.error(`Failed to connect to: ${format.peerID(e)}: ${r.message}`),this.updatePeersDiv()};setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),r=n=>{n.matches?($("#mpc-demos").hidden=!0,$("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,$("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),$("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),$("#chatFooter").insertAdjacentElement("beforeend",$("#chatInputGroup"))):($("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),$("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),$("#mpc-demos").hidden=!1,$("#connectedPartiesLabel").hidden=!1,$("#chatSidebar").insertAdjacentElement("beforeend",$("#chatInputGroup")),this.demoSelect.size=window.innerHeight/(4*21))};e.addEventListener("change",r),r(e),this.demoSelect.addEventListener("change",async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex;let n=await fetchSelectedDemo(this.demoSelect);this.editor.updateCode(n)}),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.demoSelect.dispatchEvent(new Event("change"))}updateHostPeerIDInput(){var n=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return n&&(this.hostPeerIDInput.value=n,localStorage.hostPeerID=n),n}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}processChatMessage=async({peerID:e,data:r})=>{if(r.type!="user:chat"){console.warn("unknown message type",r);return}this.term.chat(e,r.payload)}}function main(){ensureStorageSchema(18);let s=loadPeerID();document.title+=` - (${sessionStorage.tabID})`;const e=()=>{try{return new PeerJSTransport(s)}catch(o){return console.warn(o),new PeerJSTransport}},r=()=>new PyScriptWorkerRuntime(void 0,"./config.toml");let n=new MPCManager(e,r);new Controller(n,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",runMPyCAsyncButtonSelector:"button#startAsyncButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",showQRCodeButtonSelector:"#show-qr",scanQRInputSelector:"#scan-qr",splitPanelSelectors:[".split-panel-editor",".split-panel-terminal"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})}main();
//# sourceMappingURL=index-jKM-EkdD.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}