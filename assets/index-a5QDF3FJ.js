import"./modulepreload-polyfill-xwJNGKPl.js";/* empty css              */import{g as e,c as t}from"./eruda-ryTR8S5D.js";import{p as i}from"./purify.es-OzhzM8Al.js";import{$ as r,a as s,b as n}from"./browser-U9-pnh-J.js";import{P as o,N as a,a as c,D as l,b as h,T as u,I as d,s as p,t as f,L as g,c as m,i as _,d as O,e as v,f as y,g as b,h as w,j as D,k as C,l as x,E as S,H as T,m as E,n as P,o as k,p as R,q as A,r as L,u as M,v as F,w as $,x as I,y as B,z as Q}from"./codemirror-i28QVf7B.js";import{H as j,a as q}from"./html5QRcode-NOr1poZi.js";import{x as W}from"./xterm-nEczMHu1.js";function N(e,t){for(var i=0;i<t.length;i++){const r=t[i];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const i=Object.getOwnPropertyDescriptor(r,t);i&&Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}document.title="MPyC Web (test)";var U={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1707818031797,time:"13/2/2024, 10:53:51",revision:"042faa0"};!function(){let e=U;console.log("buildInfo",e);let t=document.querySelector("#version");t.innerText=`v${e.version}-${e.revision}`,t.innerText+="-dirty",t.innerText+=` (${e.time})`}();const z=new WeakMap,X=new WeakMap,Y=new WeakMap;var V={};const H=Symbol("anyProducer"),G=Promise.resolve(),Z=Symbol("listenerAdded"),J=Symbol("listenerRemoved");let K=!1,ee=!1;const te=e=>"string"==typeof e||"symbol"==typeof e||"number"==typeof e;function ie(e){if(!te(e))throw new TypeError("`eventName` must be a string, symbol, or number")}function re(e){if("function"!=typeof e)throw new TypeError("listener must be a function")}function se(e,t){const i=X.get(e);if(i.has(t))return i.get(t)}function ne(e,t){const i=te(t)?t:H,r=Y.get(e);if(r.has(i))return r.get(i)}function oe(e,t){t=Array.isArray(t)?t:[t];let i=!1,r=()=>{},s=[];const n={enqueue(e){s.push(e),r()},finish(){i=!0,r()}};for(const o of t){let t=ne(e,o);if(!t){t=new Set;Y.get(e).set(o,t)}t.add(n)}return{async next(){return s?0===s.length?i?(s=void 0,this.next()):(await new Promise((e=>{r=e})),this.next()):{done:!1,value:await s.shift()}:{done:!0}},async return(i){s=void 0;for(const r of t){const t=ne(e,r);if(t&&(t.delete(n),0===t.size)){Y.get(e).delete(r)}}return r(),arguments.length>0?{done:!0,value:await i}:{done:!0}},[Symbol.asyncIterator](){return this}}}function ae(e){if(void 0===e)return ue;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const t of e)if(!ue.includes(t)){if("string"!=typeof t)throw new TypeError("`methodNames` element must be a string");throw new Error(`${t} is not Emittery method`)}return e}const ce=e=>e===Z||e===J;function le(e,t,i){if(ce(t))try{K=!0,e.emit(t,i)}finally{K=!1}}class he{static mixin(e,t){return t=ae(t),i=>{if("function"!=typeof i)throw new TypeError("`target` must be function");for(const e of t)if(void 0!==i.prototype[e])throw new Error(`The property \`${e}\` already exists on \`target\``);Object.defineProperty(i.prototype,e,{enumerable:!1,get:function(){return Object.defineProperty(this,e,{enumerable:!1,value:new he}),this[e]}});const r=t=>function(...i){return this[e][t](...i)};for(const e of t)Object.defineProperty(i.prototype,e,{enumerable:!1,value:r(e)});return i}}static get isDebugEnabled(){if("object"!=typeof V)return ee;const{env:e}=globalThis.process??{env:{}};return"emittery"===e.DEBUG||"*"===e.DEBUG||ee}static set isDebugEnabled(e){ee=e}constructor(e={}){z.set(this,new Set),X.set(this,new Map),Y.set(this,new Map),Y.get(this).set(H,new Set),this.debug=e.debug??{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(e,t,i,r)=>{try{r=JSON.stringify(r)}catch{r=`Object with the following keys failed to stringify: ${Object.keys(r).join(",")}`}"symbol"!=typeof i&&"number"!=typeof i||(i=i.toString());const s=new Date,n=`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}.${s.getMilliseconds()}`;console.log(`[${n}][emittery:${e}][${t}] Event Name: ${i}\n\tdata: ${r}`)})}logIfDebugEnabled(e,t,i){(he.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,i)}on(e,t){re(t),e=Array.isArray(e)?e:[e];for(const i of e){ie(i);let e=se(this,i);if(!e){e=new Set;X.get(this).set(i,e)}e.add(t),this.logIfDebugEnabled("subscribe",i,void 0),ce(i)||le(this,Z,{eventName:i,listener:t})}return this.off.bind(this,e,t)}off(e,t){re(t),e=Array.isArray(e)?e:[e];for(const i of e){ie(i);const e=se(this,i);if(e&&(e.delete(t),0===e.size)){X.get(this).delete(i)}this.logIfDebugEnabled("unsubscribe",i,void 0),ce(i)||le(this,J,{eventName:i,listener:t})}}once(e){let t;const i=new Promise((i=>{t=this.on(e,(e=>{t(),i(e)}))}));return i.off=t,i}events(e){e=Array.isArray(e)?e:[e];for(const t of e)ie(t);return oe(this,e)}async emit(e,t){if(ie(e),ce(e)&&!K)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,t),function(e,t,i){const r=Y.get(e);if(r.has(t))for(const s of r.get(t))s.enqueue(i);if(r.has(H)){const e=Promise.all([t,i]);for(const t of r.get(H))t.enqueue(e)}}(this,e,t);const i=se(this,e)??new Set,r=z.get(this),s=[...i],n=ce(e)?[]:[...r];await G,await Promise.all([...s.map((async e=>{if(i.has(e))return e(t)})),...n.map((async i=>{if(r.has(i))return i(e,t)}))])}async emitSerial(e,t){if(ie(e),ce(e)&&!K)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,t);const i=se(this,e)??new Set,r=z.get(this),s=[...i],n=[...r];await G;for(const o of s)i.has(o)&&await o(t);for(const o of n)r.has(o)&&await o(e,t)}onAny(e){return re(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),z.get(this).add(e),le(this,Z,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return oe(this)}offAny(e){re(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),le(this,J,{listener:e}),z.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),te(t)){const e=se(this,t);e&&e.clear();const i=ne(this,t);if(i){for(const e of i)e.finish();i.clear()}}else{z.get(this).clear();for(const[e,t]of X.get(this).entries())t.clear(),X.get(this).delete(e);for(const[e,t]of Y.get(this).entries()){for(const e of t)e.finish();t.clear(),Y.get(this).delete(e)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const i of e)if(te(i))t+=z.get(this).size+(se(this,i)?.size??0)+(ne(this,i)?.size??0)+(ne(this)?.size??0);else{void 0!==i&&ie(i),t+=z.get(this).size;for(const e of X.get(this).values())t+=e.size;for(const e of Y.get(this).values())t+=e.size}return t}bindMethods(e,t){if("object"!=typeof e||null===e)throw new TypeError("`target` must be an object");t=ae(t);for(const i of t){if(void 0!==e[i])throw new Error(`The property \`${i}\` already exists on \`target\``);Object.defineProperty(e,i,{enumerable:!1,value:this[i].bind(this)})}}}const ue=Object.getOwnPropertyNames(he.prototype).filter((e=>"constructor"!==e));Object.defineProperty(he,"listenerAdded",{value:Z,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(he,"listenerRemoved",{value:J,writable:!1,enumerable:!0,configurable:!1});class de extends he{transport;peerIDToPID=new Map;pidToPeerID=new Map;peersReady=new Map;runtime;running=!1;runtimeFactory;transportFactory;env={};constructor(e,t,i={}){super(),this.transport=this.newTransport(e),this.runtime=this.newRuntime(t),this.env=i}newTransport(e){this.transportFactory=e,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const t=e();return this.addTransportEvents(t),t}newRuntime(e=this.runtimeFactory){this.runtimeFactory=e;const t=e();return this.addRuntimeEvents(t),t}addTransportEvents(e){e.on("ready",(e=>{this.emit("transport:ready",e)})),e.on("closed",(()=>{this.emit("transport:closed")})),e.on("error",(e=>{this.emit("transport:error",e)})),e.on("conn:ready",(e=>{this.emit("transport:conn:ready",e)})),e.on("conn:disconnected",(e=>{this.emit("transport:conn:disconnected",e)})),e.on("conn:error",(({peerID:e,err:t})=>{this.emit("transport:conn:error",{peerID:e,err:t})})),e.on("conn:data",(({peerID:e,data:t})=>{switch(t.type){case"mpyc:ready":this.processReadyMessage(e,t.payload);break;case"mpyc:runtime":this.processRuntimeMessage(e,t.payload);break;default:this.emit("transport:conn:data:custom",{peerID:e,data:t})}}))}addRuntimeEvents(e){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach((t=>{((e,t,i)=>{e.on(i,(e=>{t.emit(`runtime:${i}`,e)}))})(e,this,t)})),e.on("ready",(()=>{this.emit("runtime:ready")})),e.on("send",(({type:e,pid:t,payload:i})=>{this.sendMPCMessage(e,t,i)}))}runMPC(e,t,i=!0){this.running=!0;let r=this.transport.getPeers(!0),s=r.findIndex((e=>e===this.transport.id()));for(let n=0;n<r.length;n++)this.peerIDToPID.set(r[n],n),this.pidToPeerID.set(n,r[n]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:s,filename:t,parties:r,is_async:i,no_async:!i,code:e})}reset(e=this.transportFactory,t=this.runtimeFactory){this.resetTransport(e),this.resetRuntime(t)}resetTransport(e=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(e)}resetRuntime(e=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(e),this.running=!1}sendMPCMessage(e,t,i){let r=this.pidToPeerID.get(t);this.transport.send(r,`mpyc:${e}`,i)}processReadyMessage=(e,t)=>{if(this.peersReady.set(e,!0),!this.running)return void console.log("ignoring mpc ready message because we are not running");let i=this.peerIDToPID.get(e);this.runtime.processReadyMessage(i,t)};processRuntimeMessage=(e,t)=>{if(!this.running)return void console.log("ignoring mpc runtime message because we are not running");let i=this.peerIDToPID.get(e);this.runtime.processRuntimeMessage(i,t)}}const pe="object"==typeof self?self:globalThis,fe=e=>((e,t)=>{const i=(t,i)=>(e.set(i,t),t),r=s=>{if(e.has(s))return e.get(s);const[n,o]=t[s];switch(n){case 0:case-1:return i(o,s);case 1:{const e=i([],s);for(const t of o)e.push(r(t));return e}case 2:{const e=i({},s);for(const[t,i]of o)e[r(t)]=r(i);return e}case 3:return i(new Date(o),s);case 4:{const{source:e,flags:t}=o;return i(new RegExp(e,t),s)}case 5:{const e=i(new Map,s);for(const[t,i]of o)e.set(r(t),r(i));return e}case 6:{const e=i(new Set,s);for(const t of o)e.add(r(t));return e}case 7:{const{name:e,message:t}=o;return i(new pe[e](t),s)}case 8:return i(BigInt(o),s);case"BigInt":return i(Object(BigInt(o)),s)}return i(new pe[n](o),s)};return r})(new Map,e)(0),ge="",{toString:me}={},{keys:_e}=Object,Oe=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const i=me.call(e).slice(8,-1);switch(i){case"Array":return[1,ge];case"Object":return[2,ge];case"Date":return[3,ge];case"RegExp":return[4,ge];case"Map":return[5,ge];case"Set":return[6,ge]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},ve=([e,t])=>0===e&&("function"===t||"symbol"===t),ye=(e,{json:t,lossy:i}={})=>{const r=[];return((e,t,i,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return i.set(t,s),s},n=r=>{if(i.has(r))return i.get(r);let[o,a]=Oe(r);switch(o){case 0:{let t=r;switch(a){case"bigint":o=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+a);t=null;break;case"undefined":return s([-1],r)}return s([o,t],r)}case 1:{if(a)return s([a,[...r]],r);const e=[],t=s([o,e],r);for(const i of r)e.push(n(i));return t}case 2:{if(a)switch(a){case"BigInt":return s([a,r.toString()],r);case"Boolean":case"Number":case"String":return s([a,r.valueOf()],r)}if(t&&"toJSON"in r)return n(r.toJSON());const i=[],c=s([o,i],r);for(const t of _e(r))!e&&ve(Oe(r[t]))||i.push([n(t),n(r[t])]);return c}case 3:return s([o,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([o,{source:e,flags:t}],r)}case 5:{const t=[],i=s([o,t],r);for(const[s,o]of r)(e||!ve(Oe(s))&&!ve(Oe(o)))&&t.push([n(s),n(o)]);return i}case 6:{const t=[],i=s([o,t],r);for(const s of r)!e&&ve(Oe(s))||t.push(n(s));return i}}const{message:c}=r;return s([o,{name:a,message:c}],r)};return n})(!(t||i),!!t,new Map,r)(e),r},{parse:be,stringify:we}=JSON,De={json:!0,lossy:!0},Ce=Object.freeze(Object.defineProperty({__proto__:null,parse:e=>fe(be(e)),stringify:e=>we(ye(e,De))},Symbol.toStringTag,{value:"Module"})),xe="58800b0f-b2cb-4c43-8c1b-48a9a6d9d246",Se="M"+xe,Te="T"+xe,Ee="array",Pe="function",ke="null",Re="number",Ae="object",Le="string",Me="symbol",Fe="undefined",$e="apply",Ie="construct",Be="defineProperty",Qe="deleteProperty",je="get",qe="getOwnPropertyDescriptor",We="getPrototypeOf",Ne="has",Ue="isExtensible",ze="ownKeys",Xe="preventExtensions",Ye="set",Ve="setPrototypeOf",He="delete",{isArray:Ge}=Array;let{SharedArrayBuffer:Ze,window:Je}=globalThis,{notify:Ke,wait:et,waitAsync:tt}=Atomics,it=null;tt||(tt=e=>({value:new Promise((t=>{let i=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");i.onmessage=t,i.postMessage(e)}))}));try{new Ze(4)}catch(r_){Ze=ArrayBuffer;const e=new WeakMap;if(Je){const t=new Map,{prototype:{postMessage:i}}=Worker,r=async e=>{const i=e.data?.[xe];if(!Ge(i)){e.stopImmediatePropagation();const{id:r,sb:s}=i;t.get(r)(s)}};it=function(t,...s){const n=t?.[xe];if(Ge(n)){const[t,i]=n;e.set(i,t),this.addEventListener("message",r)}return i.call(this,t,...s)},tt=i=>({value:new Promise((r=>{t.set(e.get(i),r)})).then((r=>{t.delete(e.get(i)),e.delete(i);for(let e=0;e<r.length;e++)i[e]=r[e];return"ok"}))})}else{const t=(e,t)=>({[xe]:{id:e,sb:t}});Ke=i=>{postMessage(t(e.get(i),i))},addEventListener("message",(async t=>{const i=t.data?.[xe];if(Ge(i)){const[t,r]=i;e.set(r,t)}}))}}
/*! (c) Andrea Giammarchi - ISC */const{Int32Array:rt,Map:st,Uint16Array:nt}=globalThis,{BYTES_PER_ELEMENT:ot}=rt,{BYTES_PER_ELEMENT:at}=nt,ct=new WeakSet,lt=new WeakMap,ht={value:{then:e=>e()}};let ut=0;const dt=(e,{parse:t=JSON.parse,stringify:i=JSON.stringify,transform:r,interrupt:s}=JSON)=>{if(!lt.has(e)){const n=it||e.postMessage,o=(t,...i)=>n.call(e,{[xe]:i},{transfer:t}),a=typeof s===Pe?s:s?.handler,c=s?.delay||42,l=new TextDecoder("utf-16"),h=(e,t)=>e?tt(t,0):(a?((e,t,i)=>{for(;"timed-out"===et(e,0,0,t);)i()})(t,c,a):et(t,0),ht);let u=!1;lt.set(e,new Proxy(new st,{[Ne]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[je]:(i,s)=>"then"===s?null:(...i)=>{const n=ut++;let a=new rt(new Ze(2*ot)),c=[];ct.has(i.at(-1)||c)&&ct.delete(c=i.pop()),o(c,n,a,s,r?i.map(r):i);const d=e!==globalThis;let p=0;return u&&d&&(p=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${s}(...args) is awaited`)),h(d,a).value.then((()=>{clearTimeout(p);const e=a[1];if(!e)return;const i=at*e;return a=new rt(new Ze(i+i%ot)),o([],n,a),h(d,a).value.then((()=>t(l.decode(new nt(a.buffer).slice(0,e)))))}))},[Ye](t,s,n){const o=typeof n;if(o!==Pe)throw new Error(`Unable to assign ${s} as ${o}`);if(!t.size){const s=new st;e.addEventListener("message",(async e=>{const n=e.data?.[xe];if(Ge(n)){e.stopImmediatePropagation();const[o,a,...c]=n;let l;if(c.length){const[e,n]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...n);if(void 0!==c){const e=i(r?r(c):c);s.set(o,e),a[1]=e.length}}catch(r_){l=r_}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);a[0]=1}else{const e=s.get(o);s.delete(o);for(let t=new nt(a.buffer),i=0;i<e.length;i++)t[i]=e.charCodeAt(i)}if(Ke(a,0),l)throw l}}))}return!!t.set(s,n)}}))}return lt.get(e)};dt.transfer=(...e)=>(ct.add(e),e);const{isArray:pt}=Array,ft=(e,t)=>t,gt=e=>typeof e===Pe?(e=>e())(e):e;function mt(){return this}const _t=(e,t)=>e===Ee?[t]:{t:e,v:t},Ot=(e,t=ft)=>{let i=typeof e,r=e;return i===Ae&&(pt(e)?(i=Ee,r=e.at(0)):({t:i,v:r}=e)),t(i,r)},vt=(e,t)=>e===Pe?t:_t(e,t),yt=(e,t=vt)=>{const i=null===e?ke:typeof e;return t(i===Ae&&pt(e)?Ee:i,e)},bt=new FinalizationRegistry((([e,t,i])=>{i&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),wt=Object.create(null),Dt=(e,t,{debug:i,handler:r,return:s,token:n=e}=wt)=>{const o=s||new Proxy(e,r||wt),a=[o,[t,e,!!i]];return!1!==n&&a.push(n),bt.register(...a),o},{defineProperty:Ct,deleteProperty:xt,getOwnPropertyDescriptor:St,getPrototypeOf:Tt,isExtensible:Et,ownKeys:Pt,preventExtensions:kt,set:Rt,setPrototypeOf:At}=Reflect,{assign:Lt,create:Mt}=Object,Ft=Tt(Int8Array),$t=(e,t)=>{const{get:i,set:r,value:s}=e;return i&&(e.get=t(i)),r&&(e.set=t(r)),s&&(e.value=t(s)),e},It=e=>t=>yt(t,((t,i)=>{switch(t){case ke:return _t(ke,i);case Ae:if(i===globalThis)return _t(t,null);case Ee:case Pe:return e(t,i);case"boolean":case Re:case Le:case Fe:case"bigint":return _t(t,i);case Me:{if(Bt.has(i))return _t(t,Bt.get(i));let e=Symbol.keyFor(i);if(e)return _t(t,`.${e}`)}}throw new TypeError(`Unable to handle this ${t}: ${String(i)}`)})),Bt=new Map(Pt(Symbol).filter((e=>typeof Symbol[e]===Me)).map((e=>[Symbol[e],e]))),Qt=e=>{if(e.startsWith("."))return Symbol.for(e.slice(1));for(const[t,i]of Bt)if(i===e)return t},jt=e=>e,qt=((e,t)=>{const i=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;Ct(EventTarget.prototype,"addEventListener",{value(t,r,...s){return s.at(0)?.invoke&&(i.has(this)||i.set(this,new Map),i.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,r,...s)}})}const r=t&&(e=>{const{currentTarget:t,target:r,type:s}=e;for(const n of i.get(t||r)?.get(s)||[])e[n]()});return function(i,s,n,...o){let a=0,c=this?.transform||jt;const l=new Map,h=new Map,{[n]:u}=i,d=o.length?Lt(Mt(globalThis),...o):globalThis,p=It(((e,t)=>{if(!l.has(t)){let i;for(;h.has(i=a++););l.set(t,i),h.set(i,e===Pe?t:c(t))}return _t(e,l.get(t))})),f=e=>{u(He,_t(Le,e))},g=(e,i)=>{switch(e){case Ae:if(null==i)return d;case Ee:if(typeof i===Re)return h.get(i);if(!(i instanceof Ft))for(const e in i)i[e]=m(i[e]);return i;case Pe:if(typeof i===Le){const e=h.get(i)?.deref();if(e)return e;const s=function(...e){return t&&e.at(0)instanceof Event&&r(...e),u($e,_t(Pe,i),p(this),e.map(p))};return h.set(i,new WeakRef(s)),Dt(i,f,{return:s,token:!1})}return h.get(i);case Me:return Qt(i)}return i},m=e=>Ot(e,g),_={[$e]:(e,t,i)=>p(e.apply(t,i)),[Ie]:(e,t)=>p(new e(...t)),[Be]:(e,t,i)=>p(Ct(e,t,i)),[Qe]:(e,t)=>p(xt(e,t)),[We]:e=>p(Tt(e)),[je]:(e,t)=>p(e[t]),[qe]:(e,t)=>{const i=St(e,t);return i?_t(Ae,$t(i,p)):_t(Fe,i)},[Ne]:(e,t)=>p(t in e),[Ue]:e=>p(Et(e)),[ze]:e=>_t(Ee,Pt(e).map(p)),[Xe]:e=>p(kt(e)),[Ye]:(e,t,i)=>p(Rt(e,t,i)),[Ve]:(e,t)=>p(At(e,t)),[He](e){l.delete(h.get(e)),h.delete(e)}};return i[s]=(e,t,...i)=>{switch(e){case $e:i[0]=m(i[0]),i[1]=i[1].map(m);break;case Ie:i[0]=i[0].map(m);break;case Be:{const[e,t]=i;i[0]=m(e);const{get:r,set:s,value:n}=t;r&&(t.get=m(r)),s&&(t.set=m(s)),n&&(t.value=m(n));break}default:i=i.map(m)}return _[e](m(t),...i)},{proxy:i,[e.toLowerCase()]:d,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Wt=(e=>{let t=0;const i=new Map,r=new Map,s=Symbol();return function(n,o,a){const c=this?.transform||jt,{[o]:l}=n,h=new Map,u=e=>{h.delete(e),l(He,d(e))},d=It(((e,n)=>{if(s in n)return gt(n[s]);if(e===Pe){if(n=c(n),!r.has(n)){let e;for(;r.has(e=String(t++)););i.set(n,e),r.set(e,n)}return _t(e,i.get(n))}if(!(n instanceof Ft)){n=c(n);for(const e in n)n[e]=d(n[e])}return _t(e,n)})),p=(e,t,i)=>{const r=h.get(i)?.deref();if(r)return r;const s=t===Pe?(e=>mt.bind(e))(e):e,n=new Proxy(s,m);return h.set(i,new WeakRef(n)),Dt(i,u,{return:n,token:!1})},f=e=>Ot(e,((t,i)=>{switch(t){case Ae:if(null===i)return globalThis;case Ee:return typeof i===Re?p(e,t,i):i;case Pe:return typeof i===Le?r.get(i):p(e,t,i);case Me:return Qt(i)}return i})),g=(e,t,...i)=>f(l(e,gt(t),...i)),m={[$e]:(e,t,i)=>g($e,e,d(t),i.map(d)),[Ie]:(e,t)=>g(Ie,e,t.map(d)),[Be]:(e,t,i)=>{const{get:r,set:s,value:n}=i;return typeof r===Pe&&(i.get=d(r)),typeof s===Pe&&(i.set=d(s)),typeof n===Pe&&(i.value=d(n)),g(Be,e,d(t),i)},[Qe]:(e,t)=>g(Qe,e,d(t)),[We]:e=>g(We,e),[je]:(e,t)=>t===s?e:g(je,e,d(t)),[qe]:(e,t)=>{const i=g(qe,e,d(t));return i&&$t(i,f)},[Ne]:(e,t)=>t===s||g(Ne,e,d(t)),[Ue]:e=>g(Ue,e),[ze]:e=>g(ze,e).map(f),[Xe]:e=>g(Xe,e),[Ye]:(e,t,i)=>g(Ye,e,d(t),d(i)),[Ve]:(e,t)=>g(Ve,e,d(t))};n[a]=(e,t,s,n)=>{switch(e){case $e:return f(t).apply(f(s),n.map(f));case He:{const e=f(t);i.delete(r.get(e)),r.delete(e)}}};const _=new Proxy(_t(Ae,null),m);return{[e.toLowerCase()]:_,[`is${e}Proxy`]:e=>typeof e===Ae&&!!e&&s in e,proxy:n}}})("Window"),Nt=typeof Worker===Pe?Worker:class{},Ut=new WeakMap,zt=(e,...t)=>{const i=dt(e,...t);if(!Ut.has(i)){const r=e instanceof Nt?qt:Wt;Ut.set(i,r.call(t.at(0),i,Se,Te))}return Ut.get(i)};zt.transfer=dt.transfer;const Xt={},Yt=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link");r=Promise.all(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,i),t in Xt)return;Xt[t]=!0;const r=t.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(!!i)for(let i=e.length-1;i>=0;i--){const s=e[i];if(s.href===t&&(!r||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const n=document.createElement("link");return n.rel=r?"stylesheet":"modulepreload",r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r?new Promise(((e,i)=>{n.addEventListener("load",e),n.addEventListener("error",(()=>i(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}return r.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,i=new this((function(i,r){e=i,t=r}));return{resolve:e,reject:t,promise:i}});const Vt=e=>e.arrayBuffer(),Ht=e=>e.json(),Gt=e=>e.text();const Zt={object(...e){return this.string(function(e){for(var t=e[0],i=1,r=arguments.length;i<r;i++)t+=arguments[i]+e[i];return t}(...e))},string(e){for(const t of e.split(/[\r\n]+/))if(t.trim().length){/^(\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}},{replace:Jt}="",Kt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,ei={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},ti=e=>ei[e],ii=new WeakMap,ri=e=>{const t=e||console,i={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>i.stderr(...e),stdout:(...e)=>i.stdout(...e),async get(e){const t=await e;return ii.set(t,i),t}}},si=(e,...t)=>Zt[typeof e](e,...t),ni=e=>Jt.call(e,Kt,ti),{isArray:oi}=Array,{assign:ai,create:ci,defineProperties:li,defineProperty:hi,entries:ui}=Object,{all:di,resolve:pi}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),fi=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href;let gi=0;const mi=(e,t)=>({id:e.id||(e.id=`${t}-w${gi++}`),tag:e.tagName}),_i=(e,t,i,r=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${i}`,{bubbles:!0,detail:{worker:r}}))},Oi=(e,t,i,r)=>({type:t,config:i,interpreter:r,io:ii.get(r),run:(t,...i)=>e.run(r,t,...i),runAsync:(t,...i)=>e.runAsync(r,t,...i),runEvent:(...t)=>e.runEvent(r,...t)}),vi=(e,t)=>(i,r)=>{const s=e[t].bind(e);e[t]=(e,t,...n)=>s(e,`${r?i:t}\n${r?t:i}`,...n)},yi=Symbol.for("polyscript.js_modules"),bi=new Map;hi(globalThis,yi,{value:bi});const wi=new Proxy(bi,{get:(e,t)=>e.get(t),has:(e,t)=>e.has(t),ownKeys:e=>[...e.keys()]}),Di=(e,t)=>!t.startsWith("_"),Ci=(e,t)=>new Proxy(e,{has:Di,get:(e,i)=>e[t][i]}),xi=(e,t,i,r)=>{if("pyodide"===e)return;const s="polyscript.js_modules";for(const n of Reflect.ownKeys(r))t.registerJSModule(i,`${s}.${n}`,Ci(r,n));t.registerJSModule(i,s,r)},Si=(e,t)=>Yt((()=>import(e)),__vite__mapDeps([]),import.meta.url).then((e=>{bi.set(t,{...e})})),Ti=e=>new Promise(((t,i)=>{document.querySelector(`link[href="${e}"]`)&&t(),document.head.append(ai(document.createElement("link"),{rel:"stylesheet",href:e,onload:t,onerror:i}))})),Ei=e=>/\.css/i.test(new URL(e).pathname),Pi=!globalThis.window,ki=({FS:e,PATH:t,PATH_FS:i},r,s)=>{const n=i.resolve(r);return e.mkdirTree(t.dirname(n)),e.writeFile(n,new Uint8Array(s),{canOwn:!0})},Ri=e=>{const t=e.split("/");return t.pop(),t.join("/")},Ai=(e,t)=>{const i=[];for(const r of t.split("/"))"."!==r&&(i.push(r),r&&e.mkdir(i.join("/")))},Li=(e,t)=>{const i=[];for(const r of t.split("/"))switch(r){case"":case".":break;case"..":i.pop();break;default:i.push(r)}return[e.cwd()].concat(i).join("/").replace(/^\/+/,"/")},Mi=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Fi=(e,t)=>fetch(fi(t,$i.get(e))),$i=new WeakMap,Ii=(e,t,i)=>di((e=>{for(const{files:t,to_file:i,from:r=""}of e){if(void 0!==t&&void 0!==i)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(void 0===t&&void 0===i&&r.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${r}, please supply 'to_file' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:i,files:r})=>{if(oi(r))return r.map((i=>({url:Mi([e,i]),path:Mi([t,i])})));const s=i||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:Mi([t,s])}]}))})(i).map((({url:r,path:s})=>Fi(i,r).then(Vt).then((i=>e.writeFile(t,s,i)))))),Bi=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Qi=(e,t)=>e.replace(/\{.+?\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),ji=(e,t,i)=>di((e=>{const t=new Map,i=new Set,r=[];for(const[s,n]of ui(e))if(/^\{.+\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Qi(n,t))}else{const e=Qi(s,t),o=Bi(e,Qi(n||"./",t));if(i.has(o))throw new SyntaxError(`Duplicated destination: ${o}`);i.add(o),r.push({url:e,path:o})}return r})(i).map((({url:r,path:s})=>Fi(i,r).then(Vt).then((i=>e.writeFile(t,s,i)))))),qi=({main:e,worker:t})=>{const i=[];if(t&&Pi)for(let[r,s]of ui(t))r=fi(r,$i.get(t)),i.push(Si(r,s));if(e&&!Pi)for(let[r,s]of ui(e))r=fi(r,$i.get(e)),Ei(r)?Ti(r):i.push(Si(r,s));return di(i)},Wi=(e,t,i)=>{e.registerJsModule(t,i)},Ni=(e,t,...i)=>{try{return e.runPython(si(t),...i)}catch(r){ii.get(e).stderr(r)}},Ui=async(e,t,...i)=>{try{return await e.runPythonAsync(si(t),...i)}catch(r){ii.get(e).stderr(r)}},zi=async(e,t,i)=>{const[r,...s]=t.split(".");let n,o=e.globals.get(r);for(const c of s)[n,o]=[o,o[c]];try{await o.call(n,i)}catch(a){ii.get(e).stderr(a)}},Xi=(new TextEncoder).encode('from uio import StringIO\nimport sys\n\nclass Response:\n    def __init__(self, f):\n        self.raw = f\n        self.encoding = "utf-8"\n        self._cached = None\n\n    def close(self):\n        if self.raw:\n            self.raw.close()\n            self.raw = None\n        self._cached = None\n\n    @property\n    def content(self):\n        if self._cached is None:\n            try:\n                self._cached = self.raw.read()\n            finally:\n                self.raw.close()\n                self.raw = None\n        return self._cached\n\n    @property\n    def text(self):\n        return str(self.content, self.encoding)\n\n    def json(self):\n        import ujson\n\n        return ujson.loads(self.content)\n\n\n# TODO try to support streaming xhr requests, a-la pyodide-http\nHEADERS_TO_IGNORE = ("user-agent",)\n\n\ntry:\n    import js\nexcept Exception as err:\n    raise OSError("This version of urequests can only be used in the browser")\n\n# TODO try to support streaming xhr requests, a-la pyodide-http\n\nHEADERS_TO_IGNORE = ("user-agent",)\n\n\ndef request(\n    method,\n    url,\n    data=None,\n    json=None,\n    headers={},\n    stream=None,\n    auth=None,\n    timeout=None,\n    parse_headers=True,\n):\n    from js import XMLHttpRequest\n\n    xhr = XMLHttpRequest.new()\n    xhr.withCredentials = False\n\n    if auth is not None:\n        import ubinascii\n\n        username, password = auth\n        xhr.open(method, url, False, username, password)\n    else:\n        xhr.open(method, url, False)\n\n    for name, value in headers.items():\n        if name.lower() not in HEADERS_TO_IGNORE:\n            xhr.setRequestHeader(name, value)\n\n    if timeout:\n        xhr.timeout = int(timeout * 1000)\n\n    if json is not None:\n        assert data is None\n        import ujson\n\n        data = ujson.dumps(json)\n        # s.write(b"Content-Type: application/json\\r\\n")\n        xhr.setRequestHeader("Content-Type", "application/json")\n\n    xhr.send(data)\n\n    # Emulates the construction process in the original urequests\n    resp = Response(StringIO(xhr.responseText))\n    resp.status_code = xhr.status\n    resp.reason = xhr.statusText\n    resp.headers = xhr.getAllResponseHeaders()\n\n    return resp\n\n\n# Other methods - head, post, put, patch, delete - are not used by\n# mip and therefore not included\n\n\ndef get(url, **kw):\n    return request("GET", url, **kw)\n\n\n# Content below this line is from the Micropython MIP package and is covered\n# by the applicable MIT license:\n# \n# THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER \n# DEALINGS IN THE SOFTWARE.\n\n# MicroPython package installer\n# MIT license; Copyright (c) 2022 Jim Mussared\n\n\n_PACKAGE_INDEX = const("https://micropython.org/pi/v2")\n_CHUNK_SIZE = 128\n\n\n# This implements os.makedirs(os.dirname(path))\ndef _ensure_path_exists(path):\n    import os\n\n    split = path.split("/")\n\n    # Handle paths starting with "/".\n    if not split[0]:\n        split.pop(0)\n        split[0] = "/" + split[0]\n\n    prefix = ""\n    for i in range(len(split) - 1):\n        prefix += split[i]\n        try:\n            os.stat(prefix)\n        except:\n            os.mkdir(prefix)\n        prefix += "/"\n\n\n# Copy from src (stream) to dest (function-taking-bytes)\ndef _chunk(src, dest):\n    buf = memoryview(bytearray(_CHUNK_SIZE))\n    while True:\n        n = src.readinto(buf)\n        if n == 0:\n            break\n        dest(buf if n == _CHUNK_SIZE else buf[:n])\n\n\n# Check if the specified path exists and matches the hash.\ndef _check_exists(path, short_hash):\n    import os\n\n    try:\n        import binascii\n        import hashlib\n\n        with open(path, "rb") as f:\n            hs256 = hashlib.sha256()\n            _chunk(f, hs256.update)\n            existing_hash = str(binascii.hexlify(hs256.digest())[: len(short_hash)], "utf-8")\n            return existing_hash == short_hash\n    except:\n        return False\n\n\ndef _rewrite_url(url, branch=None):\n    if not branch:\n        branch = "HEAD"\n    if url.startswith("github:"):\n        url = url[7:].split("/")\n        url = (\n            "https://raw.githubusercontent.com/"\n            + url[0]\n            + "/"\n            + url[1]\n            + "/"\n            + branch\n            + "/"\n            + "/".join(url[2:])\n        )\n    return url\n\n\ndef _download_file(url, dest):\n    response = get(url)\n    try:\n        if response.status_code != 200:\n            print("Error", response.status_code, "requesting", url)\n            return False\n\n        print("Copying:", dest)\n        _ensure_path_exists(dest)\n        with open(dest, "wb") as f:\n            _chunk(response.raw, f.write)\n\n        return True\n    finally:\n        response.close()\n\n\ndef _install_json(package_json_url, index, target, version, mpy):\n    response = get(_rewrite_url(package_json_url, version))\n    try:\n        if response.status_code != 200:\n            print("Package not found:", package_json_url)\n            return False\n\n        package_json = response.json()\n    finally:\n        response.close()\n    for target_path, short_hash in package_json.get("hashes", ()):\n        fs_target_path = target + "/" + target_path\n        if _check_exists(fs_target_path, short_hash):\n            print("Exists:", fs_target_path)\n        else:\n            file_url = "{}/file/{}/{}".format(index, short_hash[:2], short_hash)\n            if not _download_file(file_url, fs_target_path):\n                print("File not found: {} {}".format(target_path, short_hash))\n                return False\n    for target_path, url in package_json.get("urls", ()):\n        fs_target_path = target + "/" + target_path\n        if not _download_file(_rewrite_url(url, version), fs_target_path):\n            print("File not found: {} {}".format(target_path, url))\n            return False\n    for dep, dep_version in package_json.get("deps", ()):\n        if not _install_package(dep, index, target, dep_version, mpy):\n            return False\n    return True\n\n\ndef _install_package(package, index, target, version, mpy):\n    if (\n        package.startswith("http://")\n        or package.startswith("https://")\n        or package.startswith("github:")\n    ):\n        if package.endswith(".py") or package.endswith(".mpy"):\n            print("Downloading {} to {}".format(package, target))\n            return _download_file(\n                _rewrite_url(package, version), target + "/" + package.rsplit("/")[-1]\n            )\n        else:\n            if not package.endswith(".json"):\n                if not package.endswith("/"):\n                    package += "/"\n                package += "package.json"\n            print("Installing {} to {}".format(package, target))\n    else:\n        if not version:\n            version = "latest"\n        print("Installing {} ({}) from {} to {}".format(package, version, index, target))\n\n        mpy_version = (\n            sys.implementation._mpy & 0xFF if mpy and hasattr(sys.implementation, "_mpy") else "py"\n        )\n\n        package = "{}/package/{}/{}/{}.json".format(index, mpy_version, package, version)\n\n    return _install_json(package, index, target, version, mpy)\n\n\ndef install(package, index=None, target=None, version=None, mpy=True):\n    if not target:\n        for p in sys.path:\n            if p.endswith("/lib"):\n                target = p\n                break\n        else:\n            print("Unable to find lib dir in sys.path")\n            return\n\n    if not index:\n        index = _PACKAGE_INDEX\n\n    if _install_package(package, index.rstrip("/"), target, version, mpy):\n        print("Done")\n    else:\n        print("Package may be partially installed")\n'),Yi={type:"micropython",module:(e="1.21.0-279")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,i){const{stderr:r,stdout:s,get:n}=ri();i=i.replace(/\.m?js$/,".wasm");const o=await n(e({stderr:r,stdout:s,url:i}));if(t.files&&await ji(this,o,t.files),t.fetch&&await Ii(this,o,t.fetch),t.js_modules&&await qi(t.js_modules),this.writeFile(o,"./mip.py",Xi),t.packages){const e=o.pyimport("mip");for(const i of t.packages)e.install(i)}return o},registerJSModule:Wi,run:Ni,runAsync:Ui,runEvent:zi,transform:(e,t)=>t instanceof e.PyProxy?e.PyProxy.toJs(t):t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:i}},r,s)=>ki({FS:e,PATH:t,PATH_FS:i},r,s)},Vi={dict_converter:Object.fromEntries};let Hi=!1;const Gi=e=>(...t)=>{try{return Hi=!0,e(...t)}finally{Hi=!1}};let Zi=!1;const Ji=()=>{if(Zi)return;Zi=!0;const e=new WeakMap,t=e=>e.destroy(),i=i=>{for(let s=0;s<i.length;s++){const n=i[s];if("function"==typeof n&&"copy"in n){Hi=!1;let o=e.get(n)?.deref();if(!o)try{o=Dt(n.copy(),t),e.set(n,new WeakRef(o))}catch(r){console.error(r)}o&&(i[s]=o),Hi=!0}}},{call:r}=Function,s=r.bind(r,r.apply);Object.defineProperties(Function.prototype,{apply:{value(e,t){return Hi&&i(t),s(this,e,t)}},call:{value(e,...t){return Hi&&i(t),s(this,e,t)}}})},Ki={type:"pyodide",module:(e="0.25.0")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,i){Pi||"auto"!==t.experimental_create_proxy||Ji();const{stderr:r,stdout:s,get:n}=ri(),o=i.slice(0,i.lastIndexOf("/")),a=await n(e({stderr:r,stdout:s,indexURL:o}));if(t.files&&await ji(this,a,t.files),t.fetch&&await Ii(this,a,t.fetch),t.js_modules&&await qi(t.js_modules),t.packages){await a.loadPackage("micropip");const e=await a.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return a},registerJSModule:Wi,run:Gi(Ni),runAsync:Gi(Ui),runEvent:Gi(zi),transform:({ffi:{PyProxy:e}},t)=>t instanceof e?t.toJs(Vi):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:i}},r,s)=>ki({FS:e,PATH:t,PATH_FS:i},r,s)},er="ruby-wasm-wasi",tr=er.replace(/\W+/g,"_"),ir={type:er,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,i){const r=await fetch(`${i.slice(0,i.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await r.arrayBuffer()),{vm:n}=await e(s);return t.files&&await ji(this,n,t.files),t.fetch&&await Ii(this,n,t.fetch),t.js_modules&&await qi(t.js_modules),n},registerJSModule(e,t,i){t=t.replace(/\W+/g,"__");const r=`__module_${tr}_${t}`;globalThis[r]=i,this.run(e,`require "js";$${t}=JS.global[:${r}]`),delete globalThis[r]},run:(e,t,...i)=>e.eval(si(t),...i),runAsync:(e,t,...i)=>e.evalAsync(si(t),...i),async runEvent(e,t,i){if(/^xworker\.(on\w+)$/.test(t)){const{$1:t}=RegExp,r=`__module_${tr}_event`;globalThis[r]=i,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${r}])`),delete globalThis[r]}else{const r=this.run(e,`method(:${t})`);await r.call(t,e.wrap(i))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${er}`)}},rr={type:"wasmoon",module:(e="1.16.0")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},i){const{stderr:r,stdout:s,get:n}=ri(),o=await n((new e).createEngine());return o.global.getTable(t.Base,(e=>{o.global.setField(e,"print",s),o.global.setField(e,"printErr",r)})),i.files&&await ji(this,o,i.files),i.fetch&&await Ii(this,o,i.fetch),i.js_modules&&await qi(i.js_modules),o},registerJSModule:(e,t,i)=>{e.global.set(t,i)},run:(e,t,...i)=>{try{return e.doStringSync(si(t),...i)}catch(r){ii.get(e).stderr(r)}},runAsync:async(e,t,...i)=>{try{return await e.doString(si(t),...i)}catch(r){ii.get(e).stderr(r)}},runEvent:async(e,t,i)=>{const[r,...s]=t.split(".");let n,o=e.global.get(r);for(const c of s)[n,o]=[o,o[c]];try{await o.call(n,i)}catch(a){ii.get(e).stderr(a)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,i)=>((e,t,i)=>(Ai(e,Ri(t)),t=Li(e,t),e.writeFile(t,new Uint8Array(i),{canOwn:!0})))(e,t,i)},sr=new Map,nr=new Map,or=[],ar=[],cr=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[i,...r]=t.split("@"),s=sr.get(i),n=/^(?:\.?\.?\/|https?:\/\/)/i.test(r)?r.join("@"):s.module(...r);e.set(t,{url:n,module:Yt((()=>import(n)),__vite__mapDeps([]),import.meta.url),engine:s.engine.bind(s)})}const{url:i,module:r,engine:s}=e.get(t);return(e,n)=>r.then((r=>{nr.set(t,e);for(const t of["files","fetch"]){const i=e?.[t];i&&$i.set(i,n)}for(const t of["main","worker"]){const i=e?.js_modules?.[t];i&&$i.set(i,n)}return s(r,e,i)}))}}),lr=e=>{for(const t of[].concat(e.type))sr.set(t,e),or.push(`script[type="${t}"]`),ar.push(`${t}-`)};for(const n_ of[Yi,Ki,ir,rr])lr(n_);const hr=async e=>(await Yt((()=>import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")),__vite__mapDeps([]),import.meta.url)).parse(e),ur=(e,t="./config.txt")=>{let i=typeof e;return"string"===i&&/\.(json|toml|txt)$/.test(e)?i=RegExp.$1:e=t,[fi(e),i]},dr=e=>{try{return JSON.parse(e)}catch(r_){return hr(e)}},pr=(e,t,i,r={})=>{if(t){const[e,s]=ur(t,i);"json"===s?r=fetch(e).then(Ht):"toml"===s?r=fetch(e).then(Gt).then(hr):"string"===s?r=dr(t):"object"===s&&t?r=t:"txt"===s&&"string"==typeof r&&(r=dr(r)),t=e}return pi(r).then((i=>cr[e](i,t)))},fr=(e,t="")=>`${e}@${t}`.replace(/@$/,"");function gr(e=this){return String(e).replace(/^(async\s*)?(\bfunction\b)?(.*?)\(/,((e,t,i,r)=>r&&!i?`${t||""}function ${r}(`:e))}const mr="BeforeRun",_r="AfterRun",Or=[`code${mr}`,`code${mr}Async`,`code${_r}`,`code${_r}Async`],vr=["onWorker","onReady",`on${mr}`,`on${mr}Async`,`on${_r}`,`on${_r}Async`];function yr(e,t){const{run:i,runAsync:r}=sr.get(this.type);return{...e,run:i.bind(this,t),runAsync:r.bind(this,t)}}const br=(e,t,i,r,s,n)=>{if(s||n){const o=yr.bind(e,t),a=r?"runAsync":"run",c=e[a];e[a]=r?async function(e,t,...r){s&&await s.call(this,o(e),i);const a=await c.call(this,e,t,...r);return n&&await n.call(this,o(e),i),a}:function(e,t,...r){s&&s.call(this,o(e),i);const a=c.call(this,e,t,...r);return n&&n.call(this,o(e),i),a}}};let wr=class{constructor(e,t={}){const{main:i,worker:r}=t;this.interpreter=e,this.onWorker=i?.onWorker;for(const s of vr.slice(1))this[s]=r?.[s];for(const s of Or)this[s]=r?.[s]}toJSON(){const e={};for(const t of vr.slice(1))this[t]&&(e[t]=gr(this[t]));for(const t of Or)this[t]&&(e[t]=si(this[t]()));return e}};const Dr=(...e)=>function(t,i){const r=new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,n)=>{const r=(e,n)=>(t.set(n,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=n[o];switch(a){case 0:case-1:return r(i,o);case 1:{const e=r([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=r({},o);for(const[t,n]of i)e[s(t)]=s(n);return e}case 3:return r(new Date(i),o);case 4:{const{source:e,flags:t}=i;return r(new RegExp(e,t),o)}case 5:{const e=r(new Map,o);for(const[t,n]of i)e.set(s(t),s(n));return e}case 6:{const e=r(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:n}=i;return r(new e[t](n),o)}case 8:return r(BigInt(i),o);case"BigInt":return r(Object(BigInt(i)),o)}return r(new e[a](i),o)};return s})(new Map,t)(0),n="",{toString:r}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=r.call(e).slice(8,-1);switch(s){case"Array":return[1,n];case"Object":return[2,n];case"Date":return[3,n];case"RegExp":return[4,n];case"Map":return[5,n];case"Set":return[6,n]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},c=r=>{if(n.has(r))return n.get(r);let[l,p]=o(r);switch(l){case 0:{let t=r;switch(p){case"bigint":l=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+p);t=null;break;case"undefined":return i([-1],r)}return i([l,t],r)}case 1:{if(p)return i([p,[...r]],r);const e=[],t=i([l,e],r);for(const t of r)e.push(c(t));return t}case 2:{if(p)switch(p){case"BigInt":return i([p,r.toString()],r);case"Boolean":case"Number":case"String":return i([p,r.valueOf()],r)}if(t&&"toJSON"in r)return c(r.toJSON());const n=[],u=i([l,n],r);for(const t of s(r))!e&&a(o(r[t]))||n.push([c(t),c(r[t])]);return u}case 3:return i([l,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([l,{source:e,flags:t}],r)}case 5:{const t=[],n=i([l,t],r);for(const[n,s]of r)(e||!a(o(n))&&!a(o(s)))&&t.push([c(n),c(s)]);return n}case 6:{const t=[],n=i([l,t],r);for(const n of r)!e&&a(o(n))||t.push(c(n));return n}}const{message:u}=r;return i([l,{name:p,message:u}],r)};return c})(!(t||n),!!t,new Map,r)(e),r},{parse:c,stringify:l}=JSON,p={json:!0,lossy:!0};var u=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,p))});const f="58800b0f-b2cb-4c43-8c1b-48a9a6d9d246",d="M"+f,h="T"+f,g="array",y="function",w="null",m="number",_="object",b="string",E="symbol",k="undefined",v="apply",T="construct",x="defineProperty",S="deleteProperty",A="get",O="getOwnPropertyDescriptor",j="getPrototypeOf",R="has",P="isExtensible",N="ownKeys",I="preventExtensions",M="set",$="setPrototypeOf",F="delete",{isArray:W}=Array;let{SharedArrayBuffer:H,window:C}=globalThis,{notify:L,wait:D,waitAsync:B}=Atomics,U=null;B||(B=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=t,n.postMessage(e)}))}));try{new H(4)}catch(e){H=ArrayBuffer;const t=new WeakMap;if(C){const e=new Map,{prototype:{postMessage:n}}=Worker,r=async t=>{const n=t.data?.[f];if(!W(n)){t.stopImmediatePropagation();const{id:r,sb:s}=n;e.get(r)(s)}};U=function(e,...s){const o=e?.[f];if(W(o)){const[e,n]=o;t.set(n,e),this.addEventListener("message",r)}return n.call(this,e,...s)},B=n=>({value:new Promise((r=>{e.set(t.get(n),r)})).then((r=>{e.delete(t.get(n)),t.delete(n);for(let e=0;e<r.length;e++)n[e]=r[e];return"ok"}))})}else{const e=(e,t)=>({[f]:{id:e,sb:t}});L=n=>{postMessage(e(t.get(n),n))},addEventListener("message",(async e=>{const n=e.data?.[f];if(W(n)){const[e,r]=n;t.set(r,e)}}))}}\n/*! (c) Andrea Giammarchi - ISC */const{Int32Array:J,Map:q,Uint16Array:G}=globalThis,{BYTES_PER_ELEMENT:K}=J,{BYTES_PER_ELEMENT:Y}=G,z=new WeakSet,X=new WeakMap,V={value:{then:e=>e()}};let Z=0;const Q=(e,{parse:t=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:s}=JSON)=>{if(!X.has(e)){const o=U||e.postMessage,a=(t,...n)=>o.call(e,{[f]:n},{transfer:t}),i=typeof s===y?s:s?.handler,c=s?.delay||42,l=new TextDecoder("utf-16"),p=(e,t)=>e?B(t,0):(i?((e,t,n)=>{for(;"timed-out"===D(e,0,0,t);)n()})(t,c,i):D(t,0),V);let u=!1;X.set(e,new Proxy(new q,{[R]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[A]:(n,s)=>"then"===s?null:(...n)=>{const o=Z++;let i=new J(new H(2*K)),c=[];z.has(n.at(-1)||c)&&z.delete(c=n.pop()),a(c,o,i,s,r?n.map(r):n);const f=e!==globalThis;let d=0;return u&&f&&(d=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${s}(...args) is awaited`)),p(f,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const n=Y*e;return i=new J(new H(n+n%K)),a([],o,i),p(f,i).value.then((()=>t(l.decode(new G(i.buffer).slice(0,e)))))}))},[M](t,s,o){const a=typeof o;if(a!==y)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new q;e.addEventListener("message",(async e=>{const o=e.data?.[f];if(W(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=n(r?r(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new G(i.buffer),n=0;n<e.length;n++)t[n]=e.charCodeAt(n)}if(L(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return X.get(e)};Q.transfer=(...e)=>(z.add(e),e);const{isArray:ee}=Array,te=(e,t)=>t,ne=e=>typeof e===y?(e=>e())(e):e;function re(){return this}const se=(e,t)=>e===g?[t]:{t:e,v:t},oe=(e,t=te)=>{let n=typeof e,r=e;return n===_&&(ee(e)?(n=g,r=e.at(0)):({t:n,v:r}=e)),t(n,r)},ae=(e,t)=>e===y?t:se(e,t),ie=(e,t=ae)=>{const n=null===e?w:typeof e;return t(n===_&&ee(e)?g:n,e)},ce=new FinalizationRegistry((([e,t,n])=>{n&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),le=Object.create(null),pe=(e,t,{debug:n,handler:r,return:s,token:o=e}=le)=>{const a=s||new Proxy(e,r||le),i=[a,[t,e,!!n]];return!1!==o&&i.push(o),ce.register(...i),a},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:de,getPrototypeOf:he,isExtensible:ge,ownKeys:ye,preventExtensions:we,set:me,setPrototypeOf:_e}=Reflect,{assign:be,create:Ee}=Object,ke=he(Int8Array),ve=(e,t)=>{const{get:n,set:r,value:s}=e;return n&&(e.get=t(n)),r&&(e.set=t(r)),s&&(e.value=t(s)),e},Te=e=>t=>ie(t,((t,n)=>{switch(t){case w:return se(w,n);case _:if(n===globalThis)return se(t,null);case g:case y:return e(t,n);case"boolean":case m:case b:case k:case"bigint":return se(t,n);case E:{if(xe.has(n))return se(t,xe.get(n));let e=Symbol.keyFor(n);if(e)return se(t,`.${e}`)}}throw new TypeError(`Unable to handle this ${t}: ${String(n)}`)})),xe=new Map(ye(Symbol).filter((e=>typeof Symbol[e]===E)).map((e=>[Symbol[e],e]))),Se=e=>{if(e.startsWith("."))return Symbol.for(e.slice(1));for(const[t,n]of xe)if(n===e)return t},Ae=e=>e;var Oe=((e,t)=>{const n=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,r,...s){return s.at(0)?.invoke&&(n.has(this)||n.set(this,new Map),n.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,r,...s)}})}const r=t&&(e=>{const{currentTarget:t,target:r,type:s}=e;for(const o of n.get(t||r)?.get(s)||[])e[o]()});return function(n,s,o,...a){let i=0,c=this?.transform||Ae;const l=new Map,p=new Map,{[o]:u}=n,f=a.length?be(Ee(globalThis),...a):globalThis,d=Te(((e,t)=>{if(!l.has(t)){let n;for(;p.has(n=i++););l.set(t,n),p.set(n,e===y?t:c(t))}return se(e,l.get(t))})),h=e=>{u(F,se(b,e))},w=(e,n)=>{switch(e){case _:if(null==n)return f;case g:if(typeof n===m)return p.get(n);if(!(n instanceof ke))for(const e in n)n[e]=W(n[e]);return n;case y:if(typeof n===b){const e=p.get(n)?.deref();if(e)return e;const s=function(...e){return t&&e.at(0)instanceof Event&&r(...e),u(v,se(y,n),d(this),e.map(d))};return p.set(n,new WeakRef(s)),pe(n,h,{return:s,token:!1})}return p.get(n);case E:return Se(n)}return n},W=e=>oe(e,w),H={[v]:(e,t,n)=>d(e.apply(t,n)),[T]:(e,t)=>d(new e(...t)),[x]:(e,t,n)=>d(ue(e,t,n)),[S]:(e,t)=>d(fe(e,t)),[j]:e=>d(he(e)),[A]:(e,t)=>d(e[t]),[O]:(e,t)=>{const n=de(e,t);return n?se(_,ve(n,d)):se(k,n)},[R]:(e,t)=>d(t in e),[P]:e=>d(ge(e)),[N]:e=>se(g,ye(e).map(d)),[I]:e=>d(we(e)),[M]:(e,t,n)=>d(me(e,t,n)),[$]:(e,t)=>d(_e(e,t)),[F](e){l.delete(p.get(e)),p.delete(e)}};return n[s]=(e,t,...n)=>{switch(e){case v:n[0]=W(n[0]),n[1]=n[1].map(W);break;case T:n[0]=n[0].map(W);break;case x:{const[e,t]=n;n[0]=W(e);const{get:r,set:s,value:o}=t;r&&(t.get=W(r)),s&&(t.set=W(s)),o&&(t.value=W(o));break}default:n=n.map(W)}return H[e](W(t),...n)},{proxy:n,[e.toLowerCase()]:f,[`is${e}Proxy`]:()=>!1}}})("Window",!0),je=(e=>{let t=0;const n=new Map,r=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||Ae,{[a]:l}=o,p=new Map,u=e=>{p.delete(e),l(F,f(e))},f=Te(((e,o)=>{if(s in o)return ne(o[s]);if(e===y){if(o=c(o),!r.has(o)){let e;for(;r.has(e=String(t++)););n.set(o,e),r.set(e,o)}return se(e,n.get(o))}if(!(o instanceof ke)){o=c(o);for(const e in o)o[e]=f(o[e])}return se(e,o)})),d=(e,t,n)=>{const r=p.get(n)?.deref();if(r)return r;const s=t===y?(e=>re.bind(e))(e):e,o=new Proxy(s,k);return p.set(n,new WeakRef(o)),pe(n,u,{return:o,token:!1})},h=e=>oe(e,((t,n)=>{switch(t){case _:if(null===n)return globalThis;case g:return typeof n===m?d(e,t,n):n;case y:return typeof n===b?r.get(n):d(e,t,n);case E:return Se(n)}return n})),w=(e,t,...n)=>h(l(e,ne(t),...n)),k={[v]:(e,t,n)=>w(v,e,f(t),n.map(f)),[T]:(e,t)=>w(T,e,t.map(f)),[x]:(e,t,n)=>{const{get:r,set:s,value:o}=n;return typeof r===y&&(n.get=f(r)),typeof s===y&&(n.set=f(s)),typeof o===y&&(n.value=f(o)),w(x,e,f(t),n)},[S]:(e,t)=>w(S,e,f(t)),[j]:e=>w(j,e),[A]:(e,t)=>t===s?e:w(A,e,f(t)),[O]:(e,t)=>{const n=w(O,e,f(t));return n&&ve(n,h)},[R]:(e,t)=>t===s||w(R,e,f(t)),[P]:e=>w(P,e),[N]:e=>w(N,e).map(h),[I]:e=>w(I,e),[M]:(e,t,n)=>w(M,e,f(t),f(n)),[$]:(e,t)=>w($,e,f(t))};o[i]=(e,t,s,o)=>{switch(e){case v:return h(t).apply(h(s),o.map(h));case F:{const e=h(t);n.delete(r.get(e)),r.delete(e)}}};const W=new Proxy(se(_,null),k);return{[e.toLowerCase()]:W,[`is${e}Proxy`]:e=>typeof e===_&&!!e&&s in e,proxy:o}}})("Window"),Re=typeof Worker===y?Worker:class{};const Pe=new WeakMap,Ne=(e,...t)=>{const n=Q(e,...t);if(!Pe.has(n)){const r=e instanceof Re?Oe:je;Pe.set(n,r.call(t.at(0),n,d,h))}return Pe.get(n)};Ne.transfer=Q.transfer;const Ie={object(...e){return this.string(function(e){for(var t=e[0],n=1,r=arguments.length;n<r;n++)t+=arguments[n]+e[n];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}},Me=new WeakMap,$e=e=>{const t=e||console,n={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>n.stderr(...e),stdout:(...e)=>n.stdout(...e),async get(e){const t=await e;return Me.set(t,n),t}}},Fe=(e,...t)=>Ie[typeof e](e,...t),{isArray:We}=Array,{assign:He,create:Ce,defineProperties:Le,defineProperty:De,entries:Be}=Object,{all:Ue,resolve:Je}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),qe=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,Ge=(e,t,n,r=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${n}`,{bubbles:!0,detail:{worker:r}}))},Ke=e=>Function(`\'use strict\';return (${e})`)(),Ye=Symbol.for("polyscript.js_modules"),ze=new Map;De(globalThis,Ye,{value:ze}),new Proxy(ze,{get:(e,t)=>e.get(t),has:(e,t)=>e.has(t),ownKeys:e=>[...e.keys()]});const Xe=(e,t)=>!t.startsWith("_"),Ve=(e,t)=>new Proxy(e,{has:Xe,get:(e,n)=>e[t][n]}),Ze=(e,t)=>import(e).then((e=>{ze.set(t,{...e})})),Qe=e=>new Promise(((t,n)=>{document.querySelector(`link[href="${e}"]`)&&t(),document.head.append(He(document.createElement("link"),{rel:"stylesheet",href:e,onload:t,onerror:n}))})),et=e=>/\\.css/i.test(new URL(e).pathname);Promise.withResolvers||(Promise.withResolvers=function(){var e,t,n=new this((function(n,r){e=n,t=r}));return{resolve:e,reject:t,promise:n}});const tt=e=>e.arrayBuffer(),nt=e=>e.json(),rt=e=>e.text(),st=!globalThis.window,ot=({FS:e,PATH:t,PATH_FS:n},r,s)=>{const o=n.resolve(r);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},at=e=>{const t=e.split("/");return t.pop(),t.join("/")},it=(e,t)=>{const n=[];for(const r of t.split("/"))"."!==r&&(n.push(r),r&&e.mkdir(n.join("/")))},ct=(e,t)=>{const n=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":n.pop();break;default:n.push(e)}return[e.cwd()].concat(n).join("/").replace(/^\\/+/,"/")},lt=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},pt=(e,t)=>fetch(qe(t,ut.get(e))),ut=new WeakMap,ft=(e,t,n)=>Ue((e=>{for(const{files:t,to_file:n,from:r=""}of e){if(void 0!==t&&void 0!==n)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===n&&r.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${r}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:n,files:r})=>{if(We(r))return r.map((n=>({url:lt([e,n]),path:lt([t,n])})));const s=n||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:lt([t,s])}]}))})(n).map((({url:r,path:s})=>pt(n,r).then(tt).then((n=>e.writeFile(t,s,n)))))),dt=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,ht=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),gt=(e,t,n)=>Ue((e=>{const t=new Map,n=new Set,r=[];for(const[s,o]of Be(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,ht(o,t))}else{const e=ht(s,t),a=dt(e,ht(o||"./",t));if(n.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);n.add(a),r.push({url:e,path:a})}return r})(n).map((({url:r,path:s})=>pt(n,r).then(tt).then((n=>e.writeFile(t,s,n)))))),yt=({main:e,worker:t})=>{const n=[];if(t&&st)for(let[e,r]of Be(t))e=qe(e,ut.get(t)),n.push(Ze(e,r));if(e&&!st)for(let[t,r]of Be(e))t=qe(t,ut.get(e)),et(t)?Qe(t):n.push(Ze(t,r));return Ue(n)},wt=(e,t)=>e.has(t),mt=e=>[...e.keys()];var _t=(e,t,n)=>{let r=globalThis[Ye],s="";if(n){s=ut.get(n);for(let[e,t]of Be(n)){let n=r.get(t);n&&!We(n)||(r.set(t,n||(n=[])),n.push(e))}}return((e,t,n,r)=>new Proxy(e,{has:wt,ownKeys:mt,get:(e,s)=>{let o=e.get(s);if(We(o)){let a=o;o=null;for(let e of a)e=qe(e,r),et(e)?n.importCSS(e):(n.importJS(e,s),o=t[Ye].get(s));e.set(s,o)}return o}}))(r,e,t,s)};const bt=(e,t,n)=>{e.registerJsModule(t,n)},Et=(e,t,...n)=>{try{return e.runPython(Fe(t),...n)}catch(t){Me.get(e).stderr(t)}},kt=async(e,t,...n)=>{try{return await e.runPythonAsync(Fe(t),...n)}catch(t){Me.get(e).stderr(t)}},vt=async(e,t,n)=>{const[r,...s]=t.split(".");let o,a=e.globals.get(r);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,n)}catch(t){Me.get(e).stderr(t)}};var Tt=(new TextEncoder).encode(\'from uio import StringIO\\nimport sys\\n\\nclass Response:\\n    def __init__(self, f):\\n        self.raw = f\\n        self.encoding = "utf-8"\\n        self._cached = None\\n\\n    def close(self):\\n        if self.raw:\\n            self.raw.close()\\n            self.raw = None\\n        self._cached = None\\n\\n    @property\\n    def content(self):\\n        if self._cached is None:\\n            try:\\n                self._cached = self.raw.read()\\n            finally:\\n                self.raw.close()\\n                self.raw = None\\n        return self._cached\\n\\n    @property\\n    def text(self):\\n        return str(self.content, self.encoding)\\n\\n    def json(self):\\n        import ujson\\n\\n        return ujson.loads(self.content)\\n\\n\\n# TODO try to support streaming xhr requests, a-la pyodide-http\\nHEADERS_TO_IGNORE = ("user-agent",)\\n\\n\\ntry:\\n    import js\\nexcept Exception as err:\\n    raise OSError("This version of urequests can only be used in the browser")\\n\\n# TODO try to support streaming xhr requests, a-la pyodide-http\\n\\nHEADERS_TO_IGNORE = ("user-agent",)\\n\\n\\ndef request(\\n    method,\\n    url,\\n    data=None,\\n    json=None,\\n    headers={},\\n    stream=None,\\n    auth=None,\\n    timeout=None,\\n    parse_headers=True,\\n):\\n    from js import XMLHttpRequest\\n\\n    xhr = XMLHttpRequest.new()\\n    xhr.withCredentials = False\\n\\n    if auth is not None:\\n        import ubinascii\\n\\n        username, password = auth\\n        xhr.open(method, url, False, username, password)\\n    else:\\n        xhr.open(method, url, False)\\n\\n    for name, value in headers.items():\\n        if name.lower() not in HEADERS_TO_IGNORE:\\n            xhr.setRequestHeader(name, value)\\n\\n    if timeout:\\n        xhr.timeout = int(timeout * 1000)\\n\\n    if json is not None:\\n        assert data is None\\n        import ujson\\n\\n        data = ujson.dumps(json)\\n        # s.write(b"Content-Type: application/json\\\\r\\\\n")\\n        xhr.setRequestHeader("Content-Type", "application/json")\\n\\n    xhr.send(data)\\n\\n    # Emulates the construction process in the original urequests\\n    resp = Response(StringIO(xhr.responseText))\\n    resp.status_code = xhr.status\\n    resp.reason = xhr.statusText\\n    resp.headers = xhr.getAllResponseHeaders()\\n\\n    return resp\\n\\n\\n# Other methods - head, post, put, patch, delete - are not used by\\n# mip and therefore not included\\n\\n\\ndef get(url, **kw):\\n    return request("GET", url, **kw)\\n\\n\\n# Content below this line is from the Micropython MIP package and is covered\\n# by the applicable MIT license:\\n# \\n# THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING \\n# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER \\n# DEALINGS IN THE SOFTWARE.\\n\\n# MicroPython package installer\\n# MIT license; Copyright (c) 2022 Jim Mussared\\n\\n\\n_PACKAGE_INDEX = const("https://micropython.org/pi/v2")\\n_CHUNK_SIZE = 128\\n\\n\\n# This implements os.makedirs(os.dirname(path))\\ndef _ensure_path_exists(path):\\n    import os\\n\\n    split = path.split("/")\\n\\n    # Handle paths starting with "/".\\n    if not split[0]:\\n        split.pop(0)\\n        split[0] = "/" + split[0]\\n\\n    prefix = ""\\n    for i in range(len(split) - 1):\\n        prefix += split[i]\\n        try:\\n            os.stat(prefix)\\n        except:\\n            os.mkdir(prefix)\\n        prefix += "/"\\n\\n\\n# Copy from src (stream) to dest (function-taking-bytes)\\ndef _chunk(src, dest):\\n    buf = memoryview(bytearray(_CHUNK_SIZE))\\n    while True:\\n        n = src.readinto(buf)\\n        if n == 0:\\n            break\\n        dest(buf if n == _CHUNK_SIZE else buf[:n])\\n\\n\\n# Check if the specified path exists and matches the hash.\\ndef _check_exists(path, short_hash):\\n    import os\\n\\n    try:\\n        import binascii\\n        import hashlib\\n\\n        with open(path, "rb") as f:\\n            hs256 = hashlib.sha256()\\n            _chunk(f, hs256.update)\\n            existing_hash = str(binascii.hexlify(hs256.digest())[: len(short_hash)], "utf-8")\\n            return existing_hash == short_hash\\n    except:\\n        return False\\n\\n\\ndef _rewrite_url(url, branch=None):\\n    if not branch:\\n        branch = "HEAD"\\n    if url.startswith("github:"):\\n        url = url[7:].split("/")\\n        url = (\\n            "https://raw.githubusercontent.com/"\\n            + url[0]\\n            + "/"\\n            + url[1]\\n            + "/"\\n            + branch\\n            + "/"\\n            + "/".join(url[2:])\\n        )\\n    return url\\n\\n\\ndef _download_file(url, dest):\\n    response = get(url)\\n    try:\\n        if response.status_code != 200:\\n            print("Error", response.status_code, "requesting", url)\\n            return False\\n\\n        print("Copying:", dest)\\n        _ensure_path_exists(dest)\\n        with open(dest, "wb") as f:\\n            _chunk(response.raw, f.write)\\n\\n        return True\\n    finally:\\n        response.close()\\n\\n\\ndef _install_json(package_json_url, index, target, version, mpy):\\n    response = get(_rewrite_url(package_json_url, version))\\n    try:\\n        if response.status_code != 200:\\n            print("Package not found:", package_json_url)\\n            return False\\n\\n        package_json = response.json()\\n    finally:\\n        response.close()\\n    for target_path, short_hash in package_json.get("hashes", ()):\\n        fs_target_path = target + "/" + target_path\\n        if _check_exists(fs_target_path, short_hash):\\n            print("Exists:", fs_target_path)\\n        else:\\n            file_url = "{}/file/{}/{}".format(index, short_hash[:2], short_hash)\\n            if not _download_file(file_url, fs_target_path):\\n                print("File not found: {} {}".format(target_path, short_hash))\\n                return False\\n    for target_path, url in package_json.get("urls", ()):\\n        fs_target_path = target + "/" + target_path\\n        if not _download_file(_rewrite_url(url, version), fs_target_path):\\n            print("File not found: {} {}".format(target_path, url))\\n            return False\\n    for dep, dep_version in package_json.get("deps", ()):\\n        if not _install_package(dep, index, target, dep_version, mpy):\\n            return False\\n    return True\\n\\n\\ndef _install_package(package, index, target, version, mpy):\\n    if (\\n        package.startswith("http://")\\n        or package.startswith("https://")\\n        or package.startswith("github:")\\n    ):\\n        if package.endswith(".py") or package.endswith(".mpy"):\\n            print("Downloading {} to {}".format(package, target))\\n            return _download_file(\\n                _rewrite_url(package, version), target + "/" + package.rsplit("/")[-1]\\n            )\\n        else:\\n            if not package.endswith(".json"):\\n                if not package.endswith("/"):\\n                    package += "/"\\n                package += "package.json"\\n            print("Installing {} to {}".format(package, target))\\n    else:\\n        if not version:\\n            version = "latest"\\n        print("Installing {} ({}) from {} to {}".format(package, version, index, target))\\n\\n        mpy_version = (\\n            sys.implementation._mpy & 0xFF if mpy and hasattr(sys.implementation, "_mpy") else "py"\\n        )\\n\\n        package = "{}/package/{}/{}/{}.json".format(index, mpy_version, package, version)\\n\\n    return _install_json(package, index, target, version, mpy)\\n\\n\\ndef install(package, index=None, target=None, version=None, mpy=True):\\n    if not target:\\n        for p in sys.path:\\n            if p.endswith("/lib"):\\n                target = p\\n                break\\n        else:\\n            print("Unable to find lib dir in sys.path")\\n            return\\n\\n    if not index:\\n        index = _PACKAGE_INDEX\\n\\n    if _install_package(package, index.rstrip("/"), target, version, mpy):\\n        print("Done")\\n    else:\\n        print("Package may be partially installed")\\n\');var xt={type:"micropython",module:(e="1.21.0-279")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,n){const{stderr:r,stdout:s,get:o}=$e();n=n.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:r,stdout:s,url:n}));if(t.files&&await gt(this,a,t.files),t.fetch&&await ft(this,a,t.fetch),t.js_modules&&await yt(t.js_modules),this.writeFile(a,"./mip.py",Tt),t.packages){const e=a.pyimport("mip");for(const n of t.packages)e.install(n)}return a},registerJSModule:bt,run:Et,runAsync:kt,runEvent:vt,transform:(e,t)=>t instanceof e.PyProxy?e.PyProxy.toJs(t):t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:n}},r,s)=>ot({FS:e,PATH:t,PATH_FS:n},r,s)};const St={dict_converter:Object.fromEntries};let At=!1;const Ot=e=>(...t)=>{try{return At=!0,e(...t)}finally{At=!1}};let jt=!1;const Rt=()=>{if(jt)return;jt=!0;const e=new WeakMap,t=e=>e.destroy(),n=n=>{for(let r=0;r<n.length;r++){const s=n[r];if("function"==typeof s&&"copy"in s){At=!1;let o=e.get(s)?.deref();if(!o)try{o=pe(s.copy(),t),e.set(s,new WeakRef(o))}catch(e){console.error(e)}o&&(n[r]=o),At=!0}}},{call:r}=Function,s=r.bind(r,r.apply);Object.defineProperties(Function.prototype,{apply:{value(e,t){return At&&n(t),s(this,e,t)}},call:{value(e,...t){return At&&n(t),s(this,e,t)}}})};var Pt={type:"pyodide",module:(e="0.25.0")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,n){st||"auto"!==t.experimental_create_proxy||Rt();const{stderr:r,stdout:s,get:o}=$e(),a=n.slice(0,n.lastIndexOf("/")),i=await o(e({stderr:r,stdout:s,indexURL:a}));if(t.files&&await gt(this,i,t.files),t.fetch&&await ft(this,i,t.fetch),t.js_modules&&await yt(t.js_modules),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:bt,run:Ot(Et),runAsync:Ot(kt),runEvent:Ot(vt),transform:({ffi:{PyProxy:e}},t)=>t instanceof e?t.toJs(St):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:n}},r,s)=>ot({FS:e,PATH:t,PATH_FS:n},r,s)};const Nt="ruby-wasm-wasi",It=Nt.replace(/\\W+/g,"_");var Mt={type:Nt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,n){const r=await fetch(`${n.slice(0,n.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await r.arrayBuffer()),{vm:o}=await e(s);return t.files&&await gt(this,o,t.files),t.fetch&&await ft(this,o,t.fetch),t.js_modules&&await yt(t.js_modules),o},registerJSModule(e,t,n){t=t.replace(/\\W+/g,"__");const r=`__module_${It}_${t}`;globalThis[r]=n,this.run(e,`require "js";$${t}=JS.global[:${r}]`),delete globalThis[r]},run:(e,t,...n)=>e.eval(Fe(t),...n),runAsync:(e,t,...n)=>e.evalAsync(Fe(t),...n),async runEvent(e,t,n){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,r=`__module_${It}_event`;globalThis[r]=n,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${r}])`),delete globalThis[r]}else{const r=this.run(e,`method(:${t})`);await r.call(t,e.wrap(n))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${Nt}`)}};var $t={type:"wasmoon",module:(e="1.16.0")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},n){const{stderr:r,stdout:s,get:o}=$e(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",r)})),n.files&&await gt(this,a,n.files),n.fetch&&await ft(this,a,n.fetch),n.js_modules&&await yt(n.js_modules),a},registerJSModule:(e,t,n)=>{e.global.set(t,n)},run:(e,t,...n)=>{try{return e.doStringSync(Fe(t),...n)}catch(t){Me.get(e).stderr(t)}},runAsync:async(e,t,...n)=>{try{return await e.doString(Fe(t),...n)}catch(t){Me.get(e).stderr(t)}},runEvent:async(e,t,n)=>{const[r,...s]=t.split(".");let o,a=e.global.get(r);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,n)}catch(t){Me.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,n)=>((e,t,n)=>(it(e,at(t)),t=ct(e,t),e.writeFile(t,new Uint8Array(n),{canOwn:!0})))(e,t,n)};const Ft=new Map,Wt=new Map,Ht=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[n,...r]=t.split("@"),s=Ft.get(n),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(r)?r.join("@"):s.module(...r);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:n,module:r,engine:s}=e.get(t);return(e,o)=>r.then((r=>{Wt.set(t,e);for(const t of["files","fetch"]){const n=e?.[t];n&&ut.set(n,o)}for(const t of["main","worker"]){const n=e?.js_modules?.[t];n&&ut.set(n,o)}return s(r,e,n)}))}}),Ct=e=>{for(const t of[].concat(e.type))Ft.set(t,e)};for(const e of[xt,Pt,Mt,$t])Ct(e);const Lt=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Dt=e=>{try{return JSON.parse(e)}catch(t){return Lt(e)}},Bt=(e,t,n,r={})=>{if(t){const[e,s]=((e,t="./config.txt")=>{let n=typeof e;return"string"===n&&/\\.(json|toml|txt)$/.test(e)?n=RegExp.$1:e=t,[qe(e),n]})(t,n);"json"===s?r=fetch(e).then(nt):"toml"===s?r=fetch(e).then(rt).then(Lt):"string"===s?r=Dt(t):"object"===s&&t?r=t:"txt"===s&&"string"==typeof r&&(r=Dt(r)),t=e}return Je(r).then((n=>Ht[e](n,t)))},Ut="BeforeRun",Jt="AfterRun",qt=[`code${Ut}`,`code${Ut}Async`,`code${Jt}`,`code${Jt}Async`],Gt=["onWorker","onReady",`on${Ut}`,`on${Ut}Async`,`on${Jt}`,`on${Jt}Async`];function Kt(e,t){const{run:n,runAsync:r}=Ft.get(this.type);return{...e,run:n.bind(this,t),runAsync:r.bind(this,t)}}const Yt=(e,t,n,r,s,o)=>{if(s||o){const a=Kt.bind(e,t),i=r?"runAsync":"run",c=e[i];e[i]=r?async function(e,t,...r){s&&await s.call(this,a(e),n);const i=await c.call(this,e,t,...r);return o&&await o.call(this,a(e),n),i}:function(e,t,...r){s&&s.call(this,a(e),n);const i=c.call(this,e,t,...r);return o&&o.call(this,a(e),n),i}}};let zt,Xt,Vt;const Zt=(e,t)=>{addEventListener(e,t||(async t=>{try{await zt,Xt(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Qt,stringify:en}=u,{proxy:tn,window:nn,isWindowProxy:rn}=Ne(self,{parse:Qt,stringify:en,transform:e=>Vt?Vt(e):e}),sn={sync:tn,window:nn,isWindowProxy:rn,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Zt("message",(({data:{options:e,config:t,configURL:n,code:r,hooks:s}})=>{zt=(async()=>{try{const{id:o,tag:a,type:i,custom:c,version:l,config:p,async:u}=e,f=((e,t="")=>`${e}@${t}`.replace(/@$/,""))(i,l),d=await Bt(f,t,n,p),{js_modules:h,sync_main_only:g}=Wt.get(f),y=h?.main;let w=!g;try{new SharedArrayBuffer(4),w=!0}catch(e){if(w)throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}const m=Ce(Ft.get(i)),_=((e,t,n,r)=>({type:t,config:n,interpreter:r,io:Me.get(r),run:(t,...n)=>e.run(r,t,...n),runAsync:(t,...n)=>e.runAsync(r,t,...n),runEvent:(...t)=>e.runEvent(r,...t)}))(m,c||i,p,d);let b="run";if(u&&(b+="Async"),s){const e=((e,t)=>(n,r)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${r?n:t}\\n${r?t:n}`,...o)})(m,b);let t,n,r="",o="";for(const e of qt){const t=s[e];if(t){const n=e.endsWith("Async");(n&&u||!n&&!u)&&(e.startsWith("codeBefore")?r=t:o=t)}}o&&e(o,!1),r&&e(r,!0);for(const e of Gt.slice(2)){const r=s[e];if(r){const s=e.endsWith("Async");if(s&&u||!s&&!u){const s=Ke(r);e.startsWith("onBefore")?t=s:n=s}}}Yt(m,_,sn,u,t,n)}let E,k,v,T=null,x="";w&&(({CustomEvent:E,document:k}=nn),T=o&&k.getElementById(o)||null,v=e=>Ge(T,c||i,e,!0,E));const S=_t(nn,tn,y);return((e,t,n,r)=>{if("pyodide"===e)return;const s="polyscript.js_modules";for(const e of Reflect.ownKeys(r))t.registerJSModule(n,`${s}.${e}`,Ve(r,e));t.registerJSModule(n,s,r)})(i,m,d,S),m.registerJSModule(d,"polyscript",{xworker:sn,currentScript:T,js_modules:S,get target(){return!x&&T&&("SCRIPT"===a?T.after(He(k.createElement(`script-${c||i}`),{id:x=`${o}-target`})):(x=o,T.replaceChildren(),T.style.display="block")),x}}),Xt=m.runEvent.bind(m,d),Vt=m.transform.bind(m,d),T&&v("ready"),s?.onReady&&Ke(s?.onReady).call(m,Kt.call(m,_,d),sn),await m[b](d,r),T&&v("done"),postMessage("polyscript:done"),d}catch(e){postMessage(e)}})(),Zt("error"),Zt("message"),Zt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),{postMessage:s}=r,n=this instanceof wr;if(e.length){const[t,r]=e;(i=ai({},i||{type:t,version:r})).type||(i.type=t)}const[o]=ur(i.config,i.configURL),a=fetch(t).then(Gt).then((e=>{const t=n?this.toJSON():void 0;s.call(r,{options:i,config:o,code:e,hooks:t})})),c=ai(zt(r,Ce).proxy,{importJS:Si,importCSS:Ti}),l=Promise.withResolvers();return li(r,{sync:{value:c},ready:{value:l.promise},postMessage:{value:(e,...t)=>a.then((()=>s.call(r,e,...t)))},onerror:{writable:!0,configurable:!0,value:console.error}}),r.addEventListener("message",(e=>{const{data:t}=e,i=t instanceof Error;(i||"polyscript:done"===t)&&(e.stopImmediatePropagation(),i?(l.reject(t),r.onerror(ci(e,{type:{value:"error"},error:{value:t}}))):l.resolve(r))})),n&&this.onWorker?.(this.interpreter,r),r},Cr=Dr();class xr extends he{peersReady=new Map;workerInitializing=!1;running=!1;env={};syncProxyPy;asyncProxyPy;constructor(e,t,i={}){super(),e.getEnv=this.getEnv.bind(this),this.syncProxyPy=e,this.asyncProxyPy=t,e.fetch=this.fetch.bind(this),t.onerror=e=>{console.warn("asyncProxyPy.onerror"),console.warn(e),this.emit("error",e)},t.onmessageerror=e=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(e),this.emit("messageerror",e)},t.onmessage=e=>{let t=e.data;if(!Array.isArray(t))return console.warn("asyncProxyPy.onmessage",t),void this.emit("display:error","invalid message from worker \n"+JSON.stringify(t,null,2)+"\n");const[i,...r]=t;switch(i){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[e]=r;this.emit("display:stats",e);break;case"proxy:js:mpc:msg:ready":let[t,i]=r;i.getBuffer&&(i=i.getBuffer()),this.emit("send",{type:"ready",pid:t,payload:i});break;case"proxy:js:mpc:msg:runtime":let[s,n]=r;n.getBuffer&&(n=n.getBuffer()),this.emit("send",{type:"runtime",pid:s,payload:n});break;case"proxy:js:display":let[o]=r;this.display(o);break;case"proxy:js:display:error":let[a]=r;this.displayError(a+"\n")}},this.env=i}exec=async e=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",e])}catch(t){console.error(t),this.emit("error",new ErrorEvent("runtime:error",{error:t}))}};run_mpc=async e=>{this.emit("exec:init"),e.filename||(e.filename="<exec>");try{console.log("run_mpc",e),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",e])}catch(t){console.error(t),this.emit("error",new ErrorEvent("runtime:error",{error:t}))}};processReadyMessage(e,t){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",e,t])}processRuntimeMessage(e,t){try{let i;if(t&&t instanceof Uint8Array&&(i=[t.buffer]),i)return void this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,t],i);this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,t])}catch(i){console.warn("runtime:error"),console.warn("runtime:error",i),this.emit("error",new ErrorEvent("runtime:error",{error:i}))}}updateEnv(e={}){this.env={...this.env,...e},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}fetch2=async e=>{console.log("fetching",e);let t=await fetch("./"+e),i=await t.arrayBuffer();return new Uint8Array(i)};fetch=async e=>{e.endsWith(".gz")&&(e+="ip"),console.log("js/fetch fetching",e);let t=await fetch(e),i=await t.arrayBuffer();return new Uint8Array(i)};getEnv=()=>this.env;readline=e=>{};destroy(){console.log("destroying worker"),this.running=!1,this._close()}display=e=>{this.emit("display",e)};displayError=e=>{this.emit("display:error",e)};resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}onerror=e=>{console.warn("MPCRuntime.onerror"),console.warn(e.error),this.emit("error",e)};onmessageerror=e=>{console.warn("MPCRuntime.onmessageerror"),console.warn(e),this.emit("messageerror",e)};setReadlineFn(e){this.readline=e,this.syncProxyPy.readline=e}}let Sr=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class Tr extends xr{_close(){this.worker.terminate()}worker;constructor(e){let t=Sr,i={packages:["mpyc-web"]};e?.startup&&""!=e?.startup&&(t=e.startup),e?.config&&"string"==typeof e?.config&&""!=e?.config&&(i=e.config),e?.config&&"object"==typeof e?.config&&(e.config.packages||=[],e.config.packages.push("numpy","gmpy2"),i={...i,...e.config});let r=function(e,t,i){let r={async:!0,type:"pyodide",version:"0.26.0a1",config:t};return console.log("creating a new worker"),Cr.call(new wr(null,i),e,r)}(t,i,{worker:{onReady:async(e,t)=>{console.log("worker onReady/init"),e.io.stderr=e=>{"string"!=typeof e&&(e=e.toString()),console.error(e),t.postMessage(["proxy:js:display:error",e])},e.io.stdout=e=>{t.postMessage(["proxy:js:display",e+"\n"])},t.postMessage(["proxy:js:init"]),self.wrap=e,self.pyodide=e.interpreter,console.log(self.pyodide),e.interpreter.setDebug(!0),self.runAsync=async(t,i)=>{try{return await e.interpreter.runPythonAsync(t,{filename:i})}catch(r){e.io.stderr(r)}},self.runAsync("\n                        import asyncio\n                        import js\n                        import sys\n                        from startup import *\n                    ","startup.py")}}});r.onmessageerror=e=>{console.error("worker.onmessageerror"),console.error(e)},r.onerror=e=>{console.error("worker.onerror"),console.error(e)},super(r.sync,r,e?.env),this.worker=r}type(){return"PyScript/Worker"}}const Er=(e,t=document)=>[...t.querySelectorAll(e)],Pr=(e,t=document)=>{const i=(new XPathEvaluator).createExpression(e).evaluate(t,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),r=[];for(let s=0,{snapshotLength:n}=i;s<n;s++)r.push(i.snapshotItem(s));return r},kr=e=>{const{src:t,worker:i}=e.attributes;if(i){let{value:r}=i;if(r)throw new SyntaxError("Invalid worker attribute");if(r=t?.value,!r){if(t)throw new SyntaxError("Invalid worker attribute");if(e.childElementCount){const{innerHTML:t,localName:i,type:s}=e,n=s||i.replace(/-script$/,"");r=ni(t),console.warn(`Deprecated: use <script type="${n}"> for an always safe content parsing:\n`,r)}else r=e.textContent;return URL.createObjectURL(new Blob([si(r)],{type:"text/plain"}))}return r}if(t&&e.textContent.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim())throw new SyntaxError("Invalid content")},Rr=(e,t)=>{const i=(e=>{let t=e;for(;t.parentNode;)t=t.parentNode;return t})(e);return i.getElementById(t)||((e,t=document)=>t.querySelector(e))(t,i)},Ar=new WeakMap,Lr={get(){let e=Ar.get(this);return e||(e=document.createElement(`${this.type}-script`),Ar.set(this,e),Br(this)),e},set(e){"string"==typeof e?Ar.set(this,Rr(this,e)):(Ar.set(this,e),Br(this))}},Mr=new WeakMap,Fr=new Map,$r=(e,t)=>{const i=e?.value;return i?t+i:""},Ir=(e,t,i,r,s,n,o=e)=>{if(!Fr.has(t)){const a={interpreter:pr(i,s,n),queue:pi(),XWorker:Dr(e,r)};Fr.set(t,a),Fr.has(e)||Fr.set(e,a),Fr.has(o)||Fr.set(o,a)}return Fr.get(t)},Br=async e=>{if(Mr.has(e)){const{target:t}=e;t&&(e.closest("head")?document.body.append(t):e.after(t))}else{const{attributes:{async:t,config:i,env:r,target:s,version:n},src:o,type:a}=e,c=n?.value,l=fr(a,c);let h=$r(i,"|");const u=$r(r,"")||`${l}${h}`;h=h.slice(1);const d=kr(e);if(d){const i=new(Dr(a,c))(d,{...mi(e,a),async:!!t,config:h});return void Mr.set(hi(e,"xworker",{value:i}),{xworker:i})}const p=$r(s,""),f=Ir(a,u,l,c,h);Mr.set(hi(e,"target",Lr),f),p&&Ar.set(e,Rr(e,p));const g=o?fetch(o).then(Gt):e.textContent;f.queue=f.queue.then((()=>(async(e,t,i,r)=>{const{type:s}=e,n=sr.get(s);n.experimental&&console.warn(`The ${s} interpreter is experimental`);const[o,a]=await di([Mr.get(e).interpreter,t]);try{hi(document,"currentScript",{configurable:!0,get:()=>e}),xi(s,n,o,wi),n.registerJSModule(o,"polyscript",{XWorker:i,currentScript:e,js_modules:wi}),_i(e,s,"ready");const t=n[r?"runAsync":"run"](o,a),c=_i.bind(null,e,s,"done");return r?t.then(c):c(),t}finally{delete document.currentScript}})(e,g,f.XWorker,!!t)))}},Qr=new Proxy(ci(null),{get:(e,t)=>new Promise(queueMicrotask).then((()=>jr(t)))}),jr=async e=>{if(Fr.has(e)){const{interpreter:t,queue:i}=Fr.get(e);return(await di([t,i]))[0]}const t=Fr.size?`Available interpreters are: ${[...Fr.keys()].map((e=>`"${e}"`)).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${e}" was not found. ${t}`)},qr=async e=>{const{type:t,currentTarget:i}=e;if(ar.length)for(let{name:r,value:s,ownerElement:n}of Pr(`./@*[${ar.map((e=>`name()="${e}${t}"`)).join(" or ")}]`,i)){r=r.slice(0,-(t.length+1));const i=await jr(n.getAttribute(`${r}-env`)||r);sr.get(r).runEvent(i,s,e)}},Wr=e=>{if(ar.length)for(let{name:t,ownerElement:i}of Pr(`.//@*[${ar.map((e=>`starts-with(name(),"${e}")`)).join(" or ")}]`,e)){const e=t.lastIndexOf("-"),r=t.slice(e+1);"env"!==r&&(i.addEventListener(r,qr),"disabled"in i&&!i.disabled&&(i.disabled=!0,Qr[t.slice(0,e)].then((()=>{i.disabled=!1}))))}},Nr=[],Ur=new Map,zr=new Map,Xr=e=>{for(const i of Nr)if(e.matches(i)){const r=Ur.get(i),s=Yr.get(r),{resolve:n}=zr.get(r),{options:o,known:a}=s;if(!a.has(e)){a.add(e);const{interpreter:i,configURL:c,config:l,version:h,env:u,onerror:d,hooks:p}=o;let f;try{const t=kr(e);if(t){const s=Cr.call(new wr(null,p),t,{...mi(e,r),version:h,configURL:c,type:i,custom:r,config:e.getAttribute("config")||l||{},async:e.hasAttribute("async")});return hi(e,"xworker",{value:s}),void n({type:r,xworker:s})}}catch(t){f=t}const g=fr(i,h),m=u||`${g}${l?`|${l}`:""}`,{interpreter:_,XWorker:O}=Ir(r,m,g,h,l,c,i);_.then((t=>{const o=ci(sr.get(i)),a=new wr(t,p),c=function(...e){return O.apply(a,e)},l={...Oi(o,r,structuredClone(nr.get(g)),t),XWorker:c};xi(i,o,t,wi),o.registerJSModule(t,"polyscript",{XWorker:c,currentScript:r.startsWith("_")?null:e,js_modules:wi});for(const i of["Run","RunAsync"]){const t=vi(o,`r${i.slice(1)}`);let r,s,n="",a="";for(const e of Or){const t=p?.main?.[e];t&&e.endsWith(i)&&(e.startsWith("codeBefore")?n=si(t()):a=si(t()))}a&&t(a,!1),n&&t(n,!0);for(let e=2;e<vr.length;e++){const t=vr[e],n=p?.main?.[t];n&&t.endsWith(i)&&(t.startsWith("onBefore")?r=n:s=n)}br(o,l,e,i.endsWith("Async"),r,s)}s.queue=s.queue.then((()=>(n(l),f&&d?.(f,e),p?.main?.onReady?.(l,e))))}))}}},Yr=new Map;let Vr=0;const Hr=e=>(zr.has(e)||zr.set(e,Promise.withResolvers()),zr.get(e).promise),[{define:Gr,whenDefined:Zr,env:Jr,Hook:Kr,XWorker:es},ts]=((e,t,i=globalThis)=>{const r=Symbol.for(e),s=r in i;return[s?i[r]:Object.defineProperty(i,r,{value:t})[r],s]})("polyscript",{define:(e,t)=>{let i=null==e;if(i)e="_ps"+Vr++;else if(sr.has(e)||Yr.has(e))throw new Error(`<script type="${e}"> already registered`);if(!sr.has(t?.interpreter))throw new Error("Unspecified interpreter");sr.set(e,sr.get(t.interpreter));const r=[`script[type="${e}"]`];if(Hr(e),i){const{hooks:i}=t,r=i?.main?.onReady;t={...t,hooks:{...i,main:{...i?.main,onReady(t,i){Nr.splice(Nr.indexOf(e),1),sr.delete(e),Yr.delete(e),zr.delete(e),i.remove(),r?.(t)}}}},document.head.append(ai(document.createElement("script"),{type:e}))}else r.push(`${e}-script`),ar.push(`${e}-`);for(const s of r)Ur.set(s,e);Nr.push(...r),Yr.set(e,{options:ai({env:e},t),known:new WeakSet,queue:Promise.resolve()}),i||Wr(document),Er(r.join(",")).forEach(Xr)},whenDefined:Hr,env:Qr,Hook:wr,XWorker:Cr});if(!ts){const e=new MutationObserver((e=>{const i=or.join(",");for(const{type:r,target:s,attributeName:n,addedNodes:o}of e)if("attributes"!==r)for(const e of o)1===e.nodeType&&(Wr(e),i&&e.matches(i)?Br(e):t(i,e,!0));else{const e=n.lastIndexOf("-")+1;if(e){const t=n.slice(0,e);for(const i of ar)if(t===i){const t=n.slice(e);if("env"!==t){const e=s.hasAttribute(n)?"add":"remove";s[`${e}EventListener`](t,qr)}break}}}})),t=(e,t,i)=>{e&&Er(e,t).forEach(Br),(e=Nr.join(","))&&(i&&Xr(t),Er(e,t).forEach(Xr))},i=t=>(e.observe(t,{childList:!0,subtree:!0,attributes:!0}),t),{attachShadow:r}=Element.prototype;ai(Element.prototype,{attachShadow(e){return i(r.call(this,e))}}),queueMicrotask((()=>{Wr(i(document)),t(or.join(","),document,!1)}))}class is{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function(e){let t=0;for(const s of e)t+=s.byteLength;const i=new Uint8Array(t);let r=0;for(const s of e){const e=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);i.set(e,r),r+=s.byteLength}return i}(e).buffer}}function rs(e){return new ns(e).unpack()}function ss(e){const t=new os,i=t.pack(e);return i instanceof Promise?i.then((()=>t.getBuffer())):t.getBuffer()}class ns{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i,r,s=0,n="";for(;s<e;)i=t[s],i<160?(r=i,s++):(192^i)<32?(r=(31&i)<<6|63&t[s+1],s+=2):(224^i)<16?(r=(15&i)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3):(r=(7&i)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4),n+=String.fromCodePoint(r);return this.index+=e,n}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){t[this.unpack()]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32();return(0===e>>31?1:-1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),t=(e>>20&2047)-1023;return(0===e>>31?1:-1)*((1048575&e|1048576)*2**(t-20)+this.unpack_uint32()*2**(t-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class os{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!=typeof e)throw new Error(`Type "${typeof e}" not yet supported`);if(null===e)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const t=this.pack_array(e);if(t instanceof Promise)return t.then((()=>this._bufferBuilder.flush()))}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const t=e;this.pack_bin(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then((e=>{this.pack_bin(new Uint8Array(e)),this._bufferBuilder.flush()}));if(t!=Object&&!t.toString().startsWith("class"))throw new Error(`Type "${t.toString()}" not yet supported`);{const t=this.pack_object(e);if(t instanceof Promise)return t.then((()=>this._bufferBuilder.flush()))}}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(i)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}const i=r=>{if(r<t){const t=this.pack(e[r]);return t instanceof Promise?t.then((()=>i(r+1))):i(r+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),r=e/2**i-1,s=Math.floor(r*2**52),n=2**32,o=t<<31|i+1023<<20|s/n&1048575,a=s%n;this._bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(a)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(i)}const r=i=>{if(i<t.length){const s=t[i];if(e.hasOwnProperty(s)){this.pack(s);const t=this.pack(e[s]);if(t instanceof Promise)return t.then((()=>r(i+1)))}return r(i+1)}};return r(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/2**32,i=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&i)>>>24),this._bufferBuilder.append((16711680&i)>>>16),this._bufferBuilder.append((65280&i)>>>8),this._bufferBuilder.append(255&i)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/2**32),i=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&i)>>>24),this._bufferBuilder.append((16711680&i)>>>16),this._bufferBuilder.append((65280&i)>>>8),this._bufferBuilder.append(255&i)}constructor(){this._bufferBuilder=new is,this._textEncoder=new TextEncoder}}let as=!0,cs=!0;function ls(e,t,i){const r=e.match(t);return r&&r.length>=i&&parseInt(r[i],10)}function hs(e,t,i){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return s.apply(this,arguments);const n=e=>{const t=i(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,n),s.apply(this,[e,n])};const n=r.removeEventListener;r.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return n.apply(this,arguments);if(!this._eventMap[t].has(i))return n.apply(this,arguments);const r=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,n.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function us(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(as=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ds(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(cs=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ps(){if("object"==typeof window){if(as)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function fs(e,t){cs&&console.warn(e+" is deprecated, please use "+t+" instead.")}function gs(e){return"[object Object]"===Object.prototype.toString.call(e)}function ms(e){return gs(e)?Object.keys(e).reduce((function(t,i){const r=gs(e[i]),s=r?ms(e[i]):e[i],n=r&&!Object.keys(s).length;return void 0===s||n?t:Object.assign(t,{[i]:s})}),{}):e}function _s(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?_s(e,e.get(t[r]),i):r.endsWith("Ids")&&t[r].forEach((t=>{_s(e,e.get(t),i)}))})))}function Os(e,t,i){const r=i?"outbound-rtp":"inbound-rtp",s=new Map;if(null===t)return s;const n=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&n.push(e)})),n.forEach((t=>{e.forEach((i=>{i.type===r&&i.trackId===t.id&&_s(e,i,s)}))})),s}const vs=ps;function ys(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((i=>{if("require"===i||"advanced"===i||"mediaSource"===i)return;const r="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const s=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[s("min",i)]=r.ideal,t.optional.push(e),e={},e[s("max",i)]=r.ideal,t.optional.push(e)):(e[s("",i)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[s("",i)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[s(e,i)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,s){if(t.version>=61)return s(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let n=e.video.facingMode;n=n&&("object"==typeof n?n:{ideal:n});const o=t.version<66;if(n&&("user"===n.exact||"environment"===n.exact||"user"===n.ideal||"environment"===n.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===n.exact||"environment"===n.ideal?t=["back","rear"]:"user"!==n.exact&&"user"!==n.ideal||(t=["front"]),t)return i.mediaDevices.enumerateDevices().then((i=>{let o=(i=i.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&i.length&&t.includes("back")&&(o=i[i.length-1]),o&&(e.video.deviceId=n.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),vs("chrome: "+JSON.stringify(e)),s(e)}))}e.video=r(e.video)}return vs("chrome: "+JSON.stringify(e)),s(e)},n=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(e,t,r){s(e,(e=>{i.webkitGetUserMedia(e,t,(e=>{r&&r(n(e))}))}))}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return s(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(n(e))))))}}}function bs(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ws(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(i=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.track.id)):{track:i.track};const s=new Event("track");s.track=i.track,s.receiver=r,s.transceiver={receiver:r},s.streams=[t.stream],this.dispatchEvent(s)})),t.stream.getTracks().forEach((i=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===i.id)):{track:i};const s=new Event("track");s.track=i,s.receiver=r,s.transceiver={receiver:r},s.streams=[t.stream],this.dispatchEvent(s)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else hs(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Ds(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let s=i.apply(this,arguments);return s||(s=t(this,e),this._senders.push(s)),s};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Cs(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const s=function(e){const t={};return e.result().forEach((e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{i[t]=e.stat(t)})),t[i.id]=i})),t},n=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){i(n(s(e)))};return t.apply(this,[r,e])}return new Promise(((e,i)=>{t.apply(this,[function(t){e(n(s(t)))},i])})).then(i,r)}}function xs(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Os(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),hs(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Os(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,r;return this.getSenders().forEach((i=>{i.track===e&&(t?r=!0:t=i)})),this.getReceivers().forEach((t=>(t.track===e&&(i?r=!0:i=t),t.track===e))),r||t&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ss(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(r)&&this._shimmedLocalStreams[i.id].push(r):this._shimmedLocalStreams[i.id]=[i,r],r};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();i.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),s.apply(this,arguments)}}function Ts(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ss(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};const s=e.RTCPeerConnection.prototype.removeStream;function n(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],s=e._streams[r.id];i=i.replace(new RegExp(s.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const s=this._streams[i.id];if(s)s.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[i.id]=r,this._reverseStreams[r.id]=i,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[t=>{const i=n(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then((e=>n(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],s=e._streams[r.id];i=i.replace(new RegExp(r.id,"g"),s.id)})),new RTCSessionDescription({type:t.type,sdp:i})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:n(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((i=>{this._streams[i].getTracks().find((t=>e.track===t))&&(t=this._streams[i])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Es(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Ps(e,t){hs(e,"negotiationneeded",(e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e}))}const ks=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Ps,shimAddTrackRemoveTrack:Ts,shimAddTrackRemoveTrackWithNative:Ss,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((t=>{const r=i.video&&i.video.width,s=i.video&&i.video.height,n=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:n||3}},r&&(i.video.mandatory.maxWidth=r),s&&(i.video.mandatory.maxHeight=s),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Ds,shimGetStats:Cs,shimGetUserMedia:ys,shimMediaStream:bs,shimOnTrack:ws,shimPeerConnection:Es,shimSenderReceiverGetStats:xs},Symbol.toStringTag,{value:"Module"}));function Rs(e,t){const i=e&&e.navigator,r=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,r){fs("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return"object"==typeof i&&"object"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,"autoGainControl","mozAutoGainControl"),e(i.audio,"noiseSuppression","mozNoiseSuppression")),t(i)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,"mozAutoGainControl","autoGainControl"),e(i,"mozNoiseSuppression","noiseSuppression"),i}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(i){return"audio"===this.kind&&"object"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,"autoGainControl","mozAutoGainControl"),e(i,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[i])}}}}function As(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ls(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,s,n]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!s)try{e.forEach((e=>{e.type=i[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(s,n)}}function Ms(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Fs(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),hs(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function $s(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){fs("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Is(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Bs(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const i=e.length>0;i&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(i){const{sender:t}=r,i=t.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(i).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function Qs(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function js(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function qs(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}const Ws=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Bs,shimCreateAnswer:qs,shimCreateOffer:js,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})},shimGetParameters:Qs,shimGetUserMedia:Rs,shimOnTrack:As,shimPeerConnection:Ls,shimRTCDataChannel:Is,shimReceiverGetStats:Fs,shimRemoveStream:$s,shimSenderGetStats:Ms},Symbol.toStringTag,{value:"Module"}));function Ns(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((i=>t.call(this,i,e))),e.getVideoTracks().forEach((i=>t.call(this,i,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...i){return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach((e=>{i.includes(e.track)&&this.removeTrack(e)}))})}}function Us(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}))}),t.apply(e,arguments)}}}function zs(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,r=t.createAnswer,s=t.setLocalDescription,n=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],s=i.apply(this,[r]);return t?(s.then(e,t),Promise.resolve()):s},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],s=r.apply(this,[i]);return t?(s.then(e,t),Promise.resolve()):s};let a=function(e,t,i){const r=s.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,i){const r=n.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,i){const r=o.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},t.addIceCandidate=a}function Xs(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(Ys(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,r){t.mediaDevices.getUserMedia(e).then(i,r)}.bind(t))}function Ys(e){return e&&void 0!==e.video?Object.assign({},e,{video:ms(e.video)}):e}function Vs(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let r=e.iceServers[i];void 0===r.urls&&r.url?(fs("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Hs(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Gs(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Zs(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Js=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Zs,shimCallbacksAPI:zs,shimConstraints:Ys,shimCreateOfferLegacy:Gs,shimGetUserMedia:Xs,shimLocalStreamsAPI:Ns,shimRTCIceServerUrls:Vs,shimRemoteStreamsAPI:Us,shimTrackEventTransceiver:Hs},Symbol.toStringTag,{value:"Module"}));var Ks={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){const i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((e=>0===e.indexOf(i)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const i={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":i.relatedAddress=t[r+1];break;case"rport":i.relatedPort=parseInt(t[r+1],10);break;case"tcptype":i.tcpType=t[r+1];break;case"ufrag":i.ufrag=t[r+1],i.usernameFragment=t[r+1];break;default:void 0===i[t[r]]&&(i[t[r]]=t[r+1])}return i},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const i=e.component;"rtp"===i?t.push(1):"rtcp"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let i;const r=e.substring(e.indexOf(" ")+1).split(";");for(let s=0;s<r.length;s++)i=r[s].trim().split("="),t[i[0].trim()]=i[1];return t},t.writeFmtp=function(e){let t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),i={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(i.attribute=e.substring(t+1,r),i.value=e.substring(r+1)):i.attribute=e.substring(t+1),i},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,i){return{role:"auto",fingerprints:t.matchPrefix(e+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){const r=t.matchPrefix(e+i,"a=ice-ufrag:")[0],s=t.matchPrefix(e+i,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");i.profile=r[2];for(let n=3;n<r.length;n++){const s=r[n],o=t.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(o){const r=t.parseRtpMap(o),n=t.matchPrefix(e,"a=fmtp:"+s+" ");switch(r.parameters=n.length?t.parseFmtp(n[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),i.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{i.headerExtensions.push(t.parseExtmap(e))}));const s=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return i.codecs.forEach((e=>{s.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),i},t.writeRtpDescription=function(e,i){let r="";r+="m="+e+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let s=0;return i.codecs.forEach((e=>{e.maxptime>s&&(s=e.maxptime)})),s>0&&(r+="a=maxptime:"+s+"\r\n"),i.headerExtensions&&i.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const i=[],r=t.parseRtpParameters(e),s=-1!==r.fecMechanisms.indexOf("RED"),n=-1!==r.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=o.length>0&&o[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(t.rtx={ssrc:c}),i.push(t),s&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:n?"red+ulpfec":"red"},i.push(t))}})),0===i.length&&a&&i.push({ssrc:a});let h=t.matchPrefix(e,"b=");return h.length&&(h=0===h[0].indexOf("b=TIAS:")?parseInt(h[0].substring(7),10):0===h[0].indexOf("b=AS:")?1e3*parseInt(h[0].substring(5),10)*.95-16e3:void 0,i.forEach((e=>{e.maxBitrate=h}))),i},t.parseRtcpParameters=function(e){const i={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const s=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=0===s.length;const n=t.matchPrefix(e,"a=rtcp-mux");return i.mux=n.length>0,i},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let i;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return s.length>0?(i=s[0].value.split(" "),{stream:i[0],track:i[1]}):void 0},t.parseSctpDescription=function(e){const i=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const n=t.matchPrefix(e,"a=sctp-port:");if(n.length>0)return{port:parseInt(n[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:s}}},t.writeSctpDescription=function(e,t){let i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,i,r){let s;const n=void 0!==i?i:2;s=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+s+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,i){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const i=t.splitLines(e)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(e){const i=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const i=t.splitLines(e);for(let t=0;t<i.length;t++)if(i[t].length<2||"="!==i[t].charAt(1))return!1;return!0},e.exports=t}(Ks);var en=Ks.exports;const tn=e(en),rn=N({__proto__:null,default:tn},[en]);function sn(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const i=new t(e),r=tn.parseCandidate(e.candidate);for(const e in r)e in i||Object.defineProperty(i,e,{value:r[e]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,hs(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function nn(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||hs(e,"icecandidate",(e=>{if(e.candidate){const t=tn.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function on(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=tn.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=tn.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i}(arguments[0]),i=function(e){let i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i}(e),r=function(e,i){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const s=tn.matchPrefix(e.sdp,"a=max-message-size:");return s.length>0?r=parseInt(s[0].substring(19),10):"firefox"===t.browser&&-1!==i&&(r=2147483637),r}(arguments[0],e);let s;s=0===i&&0===r?Number.POSITIVE_INFINITY:0===i||0===r?Math.max(i,r):Math.min(i,r);const n={};Object.defineProperty(n,"maxMessageSize",{get:()=>s}),this._sctp=n}return i.apply(this,arguments)}}function an(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const r=arguments[0],s=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&s>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},hs(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function cn(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}function ln(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const i=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function hn(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function un(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&0!==i.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return i.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return i.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>i.apply(this,[e])))})}const dn=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:ln,shimAddIceCandidateNullOrEmpty:hn,shimConnectionState:cn,shimMaxMessageSize:on,shimParameterlessSetLocalDescription:un,shimRTCIceCandidate:sn,shimRTCIceCandidateRelayProtocol:nn,shimSendThrowTypeError:an},Symbol.toStringTag,{value:"Module"}));const pn=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=ps,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=ls(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=ls(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ls(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),s={browserDetails:r,commonShim:dn,extractVersion:ls,disableLog:us,disableWarnings:ds,sdp:rn};switch(r.browser){case"chrome":if(!ks||!Es||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),s;if(null===r.version)return i("Chrome shim can not determine version, not shimming."),s;i("adapter.js shimming chrome."),s.browserShim=ks,hn(e,r),un(e),ys(e,r),bs(e),Es(e,r),ws(e),Ts(e,r),Ds(e),Cs(e),xs(e),Ps(e,r),sn(e),nn(e),cn(e),on(e,r),an(e),ln(e,r);break;case"firefox":if(!Ws||!Ls||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),s;i("adapter.js shimming firefox."),s.browserShim=Ws,hn(e,r),un(e),Rs(e,r),Ls(e,r),As(e),$s(e),Ms(e),Fs(e),Is(e),Bs(e),Qs(e),js(e),qs(e),sn(e),cn(e),on(e,r),an(e);break;case"safari":if(!Js||!t.shimSafari)return i("Safari shim is not included in this adapter release."),s;i("adapter.js shimming safari."),s.browserShim=Js,hn(e,r),un(e),Vs(e),Gs(e),zs(e),Ns(e),Us(e),Hs(e),Xs(e),Zs(e),sn(e),nn(e),on(e,r),an(e),ln(e,r);break;default:i("Unsupported browser!")}return s}({window:"undefined"==typeof window?void 0:window});let fn,gn,mn;try{fn=new TextDecoder}catch(s_){}let _n=0;const On=57342,vn=57343,yn=57337,bn={};let wn,Dn,Cn,xn,Sn,Tn,En,Pn={},kn=0,Rn=0,An=[],Ln=[],Mn={useRecords:!1,mapsAsObjects:!0},Fn=!1,$n=2;try{new Function("")}catch(s_){$n=1/0}class In{constructor(e){if(e&&(!e.keyMap&&!e._keyMap||e.useRecords||(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[t,i]of Object.entries(e.keyMap))this.mapKey.set(i,t)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let t=new Map;for(let[i,r]of Object.entries(e))t.set(this._keyMap.hasOwnProperty(i)?this._keyMap[i]:i,r);return t}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let t={};return e.forEach(((e,i)=>t[Wn(this._mapKey.has(i)?this._mapKey.get(i):i)]=e)),t}mapDecode(e,t){let i=this.decode(e);return this._keyMap&&"Array"===i.constructor.name?i.map((e=>this.decodeKeys(e))):i}decode(e,t){if(gn)return ao((()=>(co(),this?this.decode(e,t):In.prototype.decode.call(Mn,e,t))));mn=t>-1?t:e.length,_n=0,Rn=0,Dn=null,Cn=null,gn=e;try{Tn=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(s_){if(gn=null,e instanceof Uint8Array)throw s_;throw new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof In){if(Pn=this,Sn=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return wn=this.structures,Bn();(!wn||wn.length>0)&&(wn=[])}else Pn=Mn,(!wn||wn.length>0)&&(wn=[]),Sn=null;return Bn()}decodeMultiple(e,t){let i,r=0;try{let s=e.length;Fn=!0;let n=this?this.decode(e,s):fo.decode(e,s);if(!t){for(i=[n];_n<s;)r=_n,i.push(Bn());return i}if(!1===t(n))return;for(;_n<s;)if(r=_n,!1===t(Bn()))return}catch(s_){throw s_.lastPosition=r,s_.values=i,s_}finally{Fn=!1,co()}}}function Bn(){try{let e=Qn();if(Cn){if(_n>=Cn.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}_n=Cn.postBundlePosition,Cn=null}if(_n==mn)wn=null,gn=null,xn&&(xn=null);else{if(_n>mn){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!Fn)throw new Error("Data read, but end of buffer not reached")}return e}catch(s_){throw co(),(s_ instanceof RangeError||s_.message.startsWith("Unexpected end of buffer"))&&(s_.incomplete=!0),s_}}function Qn(){let e=gn[_n++],t=e>>5;if(e&=31,e>23)switch(e){case 24:e=gn[_n++];break;case 25:if(7==t)return function(){let e=gn[_n++],t=gn[_n++],i=(127&e)>>2;if(31===i)return t||3&e?NaN:128&e?-1/0:1/0;if(0===i){let i=((3&e)<<8|t)/(1<<24);return 128&e?-i:i}return Vn[3]=128&e|56+(i>>1),Vn[2]=(7&e)<<5|t>>3,Vn[1]=t<<5,Vn[0]=0,Yn[0]}();e=Tn.getUint16(_n),_n+=2;break;case 26:if(7==t){let e=Tn.getFloat32(_n);if(Pn.useFloat32>2){let t=lo[(127&gn[_n])<<1|gn[_n+1]>>7];return _n+=4,(t*e+(e>0?.5:-.5)>>0)/t}return _n+=4,e}e=Tn.getUint32(_n),_n+=4;break;case 27:if(7==t){let e=Tn.getFloat64(_n);return _n+=8,e}if(t>1){if(Tn.getUint32(_n)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=Tn.getUint32(_n+4)}else Pn.int64AsNumber?(e=4294967296*Tn.getUint32(_n),e+=Tn.getUint32(_n+4)):e=Tn.getBigUint64(_n);_n+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e,i=[],r=0;for(;(e=Qn())!=bn;)i[r++]=e;return 4==t?i:3==t?i.join(""):Buffer.concat(i);case 5:let s;if(Pn.mapsAsObjects){let e={};if(Pn.keyMap)for(;(s=Qn())!=bn;)e[Wn(Pn.decodeKey(s))]=Qn();else for(;(s=Qn())!=bn;)e[Wn(s)]=Qn();return e}{En&&(Pn.mapsAsObjects=!0,En=!1);let e=new Map;if(Pn.keyMap)for(;(s=Qn())!=bn;)e.set(Pn.decodeKey(s),Qn());else for(;(s=Qn())!=bn;)e.set(s,Qn());return e}case 7:return bn;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return i=e,Pn.copyBuffers?Uint8Array.prototype.slice.call(gn,_n,_n+=i):gn.subarray(_n,_n+=i);case 3:if(Rn>=_n)return Dn.slice(_n-kn,(_n+=e)-kn);if(0==Rn&&mn<140&&e<32){let t=e<16?Xn(e):function(e){let t=_n,i=new Array(e);for(let r=0;r<e;r++){const e=gn[_n++];if((128&e)>0)return void(_n=t);i[r]=e}return zn.apply(String,i)}(e);if(null!=t)return t}return Nn(e);case 4:let t=new Array(e);for(let i=0;i<e;i++)t[i]=Qn();return t;case 5:if(Pn.mapsAsObjects){let t={};if(Pn.keyMap)for(let i=0;i<e;i++)t[Wn(Pn.decodeKey(Qn()))]=Qn();else for(let i=0;i<e;i++)t[Wn(Qn())]=Qn();return t}{En&&(Pn.mapsAsObjects=!0,En=!1);let t=new Map;if(Pn.keyMap)for(let i=0;i<e;i++)t.set(Pn.decodeKey(Qn()),Qn());else for(let i=0;i<e;i++)t.set(Qn(),Qn());return t}case 6:if(e>=yn){let t=wn[8191&e];if(t)return t.read||(t.read=qn(t)),t.read();if(e<65536){if(e==vn){let e=no(),t=Qn(),i=Qn();Gn(t,i);let r={};if(Pn.keyMap)for(let s=2;s<e;s++){r[Wn(Pn.decodeKey(i[s-2]))]=Qn()}else for(let s=2;s<e;s++){r[Wn(i[s-2])]=Qn()}return r}if(e==On){let e=no(),t=Qn();for(let i=2;i<e;i++)Gn(t++,Qn());return Qn()}if(e==yn)return function(){let e=no(),t=_n+Qn();for(let r=2;r<e;r++){let e=no();_n+=e}let i=_n;return _n=t,Cn=[Un(no()),Un(no())],Cn.position0=0,Cn.position1=0,Cn.postBundlePosition=_n,_n=i,Qn()}();if(Pn.getShared&&(oo(),t=wn[8191&e],t))return t.read||(t.read=qn(t)),t.read()}}let r=An[e];if(r)return r.handlesRead?r(Qn):r(Qn());{let t=Qn();for(let i=0;i<Ln.length;i++){let r=Ln[i](e,t);if(void 0!==r)return r}return new Hn(t,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let t=(Sn||eo())[e];if(void 0!==t)return t;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}throw new Error("Unknown CBOR token "+e)}var i}const jn=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function qn(e){return e.slowReads=0,function(){let e=gn[_n++];if(e&=31,e>23)switch(e){case 24:e=gn[_n++];break;case 25:e=Tn.getUint16(_n),_n+=2;break;case 26:e=Tn.getUint32(_n),_n+=4;break;default:throw new Error("Expected array header, but got "+gn[_n-1])}let t=this.compiledReader;for(;t;){if(t.propertyCount===e)return t(Qn);t=t.next}if(this.slowReads++>=$n){let i=this.length==e?this:this.slice(0,e);return t=Pn.keyMap?new Function("r","return {"+i.map((e=>Pn.decodeKey(e))).map((e=>jn.test(e)?Wn(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"):new Function("r","return {"+i.map((e=>jn.test(e)?Wn(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"),this.compiledReader&&(t.next=this.compiledReader),t.propertyCount=e,this.compiledReader=t,t(Qn)}let i={};if(Pn.keyMap)for(let r=0;r<e;r++)i[Wn(Pn.decodeKey(this[r]))]=Qn();else for(let r=0;r<e;r++)i[Wn(this[r])]=Qn();return i}}function Wn(e){return"__proto__"===e?"__proto_":e}let Nn=Un;function Un(e){let t;if(e<16&&(t=Xn(e)))return t;if(e>64&&fn)return fn.decode(gn.subarray(_n,_n+=e));const i=_n+e,r=[];for(t="";_n<i;){const e=gn[_n++];if(0==(128&e))r.push(e);else if(192==(224&e)){const t=63&gn[_n++];r.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&gn[_n++],i=63&gn[_n++];r.push((31&e)<<12|t<<6|i)}else if(240==(248&e)){let t=(7&e)<<18|(63&gn[_n++])<<12|(63&gn[_n++])<<6|63&gn[_n++];t>65535&&(t-=65536,r.push(t>>>10&1023|55296),t=56320|1023&t),r.push(t)}else r.push(e);r.length>=4096&&(t+=zn.apply(String,r),r.length=0)}return r.length>0&&(t+=zn.apply(String,r)),t}let zn=String.fromCharCode;function Xn(e){if(e<4){if(e<2){if(0===e)return"";{let e=gn[_n++];return(128&e)>1?void(_n-=1):zn(e)}}{let t=gn[_n++],i=gn[_n++];if((128&t)>0||(128&i)>0)return void(_n-=2);if(e<3)return zn(t,i);let r=gn[_n++];return(128&r)>0?void(_n-=3):zn(t,i,r)}}{let t=gn[_n++],i=gn[_n++],r=gn[_n++],s=gn[_n++];if((128&t)>0||(128&i)>0||(128&r)>0||(128&s)>0)return void(_n-=4);if(e<6){if(4===e)return zn(t,i,r,s);{let e=gn[_n++];return(128&e)>0?void(_n-=5):zn(t,i,r,s,e)}}if(e<8){let n=gn[_n++],o=gn[_n++];if((128&n)>0||(128&o)>0)return void(_n-=6);if(e<7)return zn(t,i,r,s,n,o);let a=gn[_n++];return(128&a)>0?void(_n-=7):zn(t,i,r,s,n,o,a)}{let n=gn[_n++],o=gn[_n++],a=gn[_n++],c=gn[_n++];if((128&n)>0||(128&o)>0||(128&a)>0||(128&c)>0)return void(_n-=8);if(e<10){if(8===e)return zn(t,i,r,s,n,o,a,c);{let e=gn[_n++];return(128&e)>0?void(_n-=9):zn(t,i,r,s,n,o,a,c,e)}}if(e<12){let l=gn[_n++],h=gn[_n++];if((128&l)>0||(128&h)>0)return void(_n-=10);if(e<11)return zn(t,i,r,s,n,o,a,c,l,h);let u=gn[_n++];return(128&u)>0?void(_n-=11):zn(t,i,r,s,n,o,a,c,l,h,u)}{let l=gn[_n++],h=gn[_n++],u=gn[_n++],d=gn[_n++];if((128&l)>0||(128&h)>0||(128&u)>0||(128&d)>0)return void(_n-=12);if(e<14){if(12===e)return zn(t,i,r,s,n,o,a,c,l,h,u,d);{let e=gn[_n++];return(128&e)>0?void(_n-=13):zn(t,i,r,s,n,o,a,c,l,h,u,d,e)}}{let p=gn[_n++],f=gn[_n++];if((128&p)>0||(128&f)>0)return void(_n-=14);if(e<15)return zn(t,i,r,s,n,o,a,c,l,h,u,d,p,f);let g=gn[_n++];return(128&g)>0?void(_n-=15):zn(t,i,r,s,n,o,a,c,l,h,u,d,p,f,g)}}}}}let Yn=new Float32Array(1),Vn=new Uint8Array(Yn.buffer,0,4);new Array(4096);class Hn{constructor(e,t){this.value=e,this.tag=t}}An[0]=e=>new Date(e),An[1]=e=>new Date(Math.round(1e3*e)),An[2]=e=>{let t=BigInt(0);for(let i=0,r=e.byteLength;i<r;i++)t=BigInt(e[i])+t<<BigInt(8);return t},An[3]=e=>BigInt(-1)-An[2](e),An[4]=e=>+(e[1]+"e"+e[0]),An[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const Gn=(e,t)=>{let i=wn[e-=57344];i&&i.isShared&&((wn.restoreStructures||(wn.restoreStructures=[]))[e]=i),wn[e]=t,t.read=qn(t)};An[105]=e=>{let t=e.length,i=e[1];Gn(e[0],i);let r={};for(let s=2;s<t;s++){r[Wn(i[s-2])]=e[s]}return r},An[14]=e=>Cn?Cn[0].slice(Cn.position0,Cn.position0+=e):new Hn(e,14),An[15]=e=>Cn?Cn[1].slice(Cn.position1,Cn.position1+=e):new Hn(e,15);let Zn={Error:Error,RegExp:RegExp};An[27]=e=>(Zn[e[0]]||Error)(e[1],e[2]);const Jn=e=>{if(132!=gn[_n++])throw new Error("Packed values structure must be followed by a 4 element array");let t=e();return Sn=Sn?t.concat(Sn.slice(t.length)):t,Sn.prefixes=e(),Sn.suffixes=e(),e()};function Kn(e,t){return"string"==typeof e?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function eo(){if(!Sn){if(!Pn.getShared)throw new Error("No packed values available");oo()}return Sn}Jn.handlesRead=!0,An[51]=Jn,An[6]=e=>{if(!Sn){if(!Pn.getShared)return new Hn(e,6);oo()}if("number"==typeof e)return Sn[16+(e>=0?2*e:-2*e-1)];throw new Error("No support for non-integer packed references yet")},An[28]=e=>{xn||(xn=new Map,xn.id=0);let t,i=xn.id++;t=gn[_n]>>5==4?[]:{};let r={target:t};xn.set(i,r);let s=e();return r.used?Object.assign(t,s):(r.target=s,s)},An[28].handlesRead=!0,An[29]=e=>{let t=xn.get(e);return t.used=!0,t.target},An[258]=e=>new Set(e),(An[259]=e=>(Pn.mapsAsObjects&&(Pn.mapsAsObjects=!1,En=!0),e())).handlesRead=!0;Ln.push(((e,t)=>e>=225&&e<=255?Kn(eo().prefixes[e-224],t):e>=28704&&e<=32767?Kn(eo().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?Kn(eo().prefixes[e-1879048192],t):e>=216&&e<=223?Kn(t,eo().suffixes[e-216]):e>=27647&&e<=28671?Kn(t,eo().suffixes[e-27639]):e>=1811940352&&e<=1879048191?Kn(t,eo().suffixes[e-1811939328]):1399353956==e?{packedValues:Sn,structures:wn.slice(0),version:t}:55799==e?t:void 0));const to=1==new Uint8Array(new Uint16Array([1]).buffer)[0],io=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],ro=[64,68,69,70,71,72,77,78,79,85,86];for(let n_=0;n_<io.length;n_++)so(io[n_],ro[n_]);function so(e,t){let i,r="get"+e.name.slice(0,-5);"function"==typeof e?i=e.BYTES_PER_ELEMENT:e=null;for(let s=0;s<2;s++){if(!s&&1==i)continue;let n=2==i?1:4==i?2:3;An[s?t:t-4]=1==i||s==to?i=>{if(!e)throw new Error("Could not find typed array for code "+t);return new e(Uint8Array.prototype.slice.call(i,0).buffer)}:i=>{if(!e)throw new Error("Could not find typed array for code "+t);let o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=i.length>>n,c=new e(a),l=o[r];for(let e=0;e<a;e++)c[e]=l.call(o,e<<n,s);return c}}}function no(){let e=31&gn[_n++];if(e>23)switch(e){case 24:e=gn[_n++];break;case 25:e=Tn.getUint16(_n),_n+=2;break;case 26:e=Tn.getUint32(_n),_n+=4}return e}function oo(){if(Pn.getShared){let e=ao((()=>(gn=null,Pn.getShared())))||{},t=e.structures||[];Pn.sharedVersion=e.version,Sn=Pn.sharedValues=e.packedValues,!0===wn?Pn.structures=wn=t:wn.splice.apply(wn,[0,t.length].concat(t))}}function ao(e){let t=mn,i=_n,r=kn,s=Rn,n=Dn,o=xn,a=Cn,c=new Uint8Array(gn.slice(0,mn)),l=wn,h=Pn,u=Fn,d=e();return mn=t,_n=i,kn=r,Rn=s,Dn=n,xn=o,Cn=a,gn=c,Fn=u,wn=l,Pn=h,Tn=new DataView(gn.buffer,gn.byteOffset,gn.byteLength),d}function co(){gn=null,xn=null,wn=null}const lo=new Array(147);for(let n_=0;n_<256;n_++)lo[n_]=+("1e"+Math.floor(45.15-.30103*n_));let ho,uo,po,fo=new In({useRecords:!1});fo.decode,fo.decodeMultiple;try{ho=new TextEncoder}catch(s_){}const go="object"==typeof globalThis&&globalThis.Buffer,mo=void 0!==go,_o=mo?go.allocUnsafeSlow:Uint8Array,Oo=mo?go:Uint8Array,vo=mo?4294967296:2144337920;let yo,bo,wo,Do,Co=0,xo=null;const So=/[\u0080-\uFFFF]/,To=Symbol("record-id");function Eo(e,t){e<24?bo[Co++]=t|e:e<256?(bo[Co++]=24|t,bo[Co++]=e):e<65536?(bo[Co++]=25|t,bo[Co++]=e>>8,bo[Co++]=255&e):(bo[Co++]=26|t,wo.setUint32(Co,e),Co+=4)}class Po{constructor(e,t,i){this.structures=e,this.packedValues=t,this.version=i}}function ko(e){e<24?bo[Co++]=128|e:e<256?(bo[Co++]=152,bo[Co++]=e):e<65536?(bo[Co++]=153,bo[Co++]=e>>8,bo[Co++]=255&e):(bo[Co++]=154,wo.setUint32(Co,e),Co+=4)}const Ro="undefined"==typeof Blob?function(){}:Blob;function Ao(e){if(e instanceof Ro)return!0;let t=e[Symbol.toStringTag];return"Blob"===t||"File"===t}function Lo(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let i=t.get(e);if(i)2==++i.count&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let i=t.samplingPackedValues.get(e);i?i.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let i=0,r=e.length;i<r;i++)Lo(e[i],t);else{let r=!t.encoder.useRecords;for(var i in e)e.hasOwnProperty(i)&&(r&&Lo(i,t),Lo(e[i],t))}break;case"function":console.log(e)}}const Mo=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function Fo(e,t){return!Mo&&t>1&&(e-=4),{tag:e,encode:function(e,t){let i=e.byteLength,r=e.byteOffset||0,s=e.buffer||e;t(mo?go.from(s,r,i):new Uint8Array(s,r,i))}}}function $o(e,t){let i=e.byteLength;i<24?bo[Co++]=64+i:i<256?(bo[Co++]=88,bo[Co++]=i):i<65536?(bo[Co++]=89,bo[Co++]=i>>8,bo[Co++]=255&i):(bo[Co++]=90,wo.setUint32(Co,i),Co+=4),Co+i>=bo.length&&t(Co+i),bo.set(e.buffer?e:new Uint8Array(e),Co),Co+=i}function Io(e,t){wo.setUint32(xo.position+e,Co-xo.position-e+1);let i=xo;xo=null,t(i[0]),t(i[1])}po=[Date,Set,Error,RegExp,Hn,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array,Po],uo=[{tag:1,encode(e,t){let i=e.getTime()/1e3;(this.useTimestamp32||0===e.getMilliseconds())&&i>=0&&i<4294967296?(bo[Co++]=26,wo.setUint32(Co,i),Co+=4):(bo[Co++]=251,wo.setFloat64(Co,i),Co+=8)}},{tag:258,encode(e,t){t(Array.from(e))}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag:e=>e.tag,encode(e,t){t(e.value)}},{encode(e,t,i){$o(e,i)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||mo&&!1!==this.tagUint8Array))return 64},encode(e,t,i){$o(e,i)}},Fo(68,1),Fo(69,2),Fo(70,4),Fo(71,8),Fo(72,1),Fo(77,2),Fo(78,4),Fo(79,8),Fo(85,4),Fo(86,8),{encode(e,t){let i=e.packedValues||[],r=e.structures||[];if(i.values.length>0){bo[Co++]=216,bo[Co++]=51,ko(4);let e=i.values;t(e),ko(0),ko(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let t=0,i=e.length;t<i;t++)packedObjectMap[e[t]]=t}if(r){wo.setUint32(Co,3655335424),Co+=3;let i=r.slice(0);i.unshift(57344),i.push(new Hn(e.version,1399353956)),t(i)}else t(new Hn(e.version,1399353956))}}];let Bo=new class extends In{constructor(e){let t,i,r,s,n;super(e),this.offset=0,e=e||{};let o=Oo.prototype.utf8Write?function(e,t,i){return bo.utf8Write(e,t,i)}:!(!ho||!ho.encodeInto)&&function(e,t){return ho.encodeInto(e,bo.subarray(t)).written},a=this,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(null==l&&(l=c?128:0),l>8190)throw new Error("Maximum maxSharedStructure is 8190");let h=e.sequential;h&&(l=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let u,d,p,f=e.sharedValues;if(f){p=Object.create(null);for(let e=0,t=f.length;e<t;e++)p[f[e]]=e}let g=[],m=0,_=0;this.mapEncode=function(e,t){if(this._keyMap&&!this._mapped&&"Array"===e.constructor.name)e=e.map((e=>this.encodeKeys(e)));return this.encode(e,t)},this.encode=function(o,c){if(bo||(bo=new _o(8192),wo=new DataView(bo.buffer,0,8192),Co=0),Do=bo.length-10,Do-Co<2048?(bo=new _o(bo.length),wo=new DataView(bo.buffer,0,bo.length),Do=bo.length-10,Co=0):c===Qo&&(Co=Co+7&2147483640),t=Co,a.useSelfDescribedHeader&&(wo.setUint32(Co,3654940416),Co+=3),n=a.structuredClone?new Map:null,a.bundleStrings&&"string"!=typeof o?(xo=[],xo.size=1/0):xo=null,i=a.structures,i){if(i.uninitialized){let e=a.getShared()||{};a.structures=i=e.structures||[],a.sharedVersion=e.version;let t=a.sharedValues=e.packedValues;if(t){p={};for(let e=0,i=t.length;e<i;e++)p[t[e]]=e}}let e=i.length;if(e>l&&!h&&(e=l),!i.transitions){i.transitions=Object.create(null);for(let t=0;t<e;t++){let e=i[t];if(!e)continue;let r,s=i.transitions;for(let i=0,n=e.length;i<n;i++){void 0===s[To]&&(s[To]=t);let n=e[i];r=s[n],r||(r=s[n]=Object.create(null)),s=r}s[To]=1048576|t}}h||(i.nextId=e)}if(r&&(r=!1),s=i||[],d=p,e.pack){let t=new Map;if(t.values=[],t.encoder=a,t.maxValues=e.maxPrivatePackedValues||(p?16:1/0),t.objectMap=p||!1,t.samplingPackedValues=u,Lo(o,t),t.values.length>0){bo[Co++]=216,bo[Co++]=51,ko(4);let e=t.values;O(e),ko(0),ko(0),d=Object.create(p||null);for(let t=0,i=e.length;t<i;t++)d[e[t]]=t}}yo=c&qo;try{if(yo)return;if(O(o),xo&&Io(t,O),a.offset=Co,n&&n.idsToInsert){Co+=2*n.idsToInsert.length,Co>Do&&y(Co),a.offset=Co;let e=function(e,t){let i,r=2*t.length,s=e.length-r;t.sort(((e,t)=>e.offset>t.offset?1:-1));for(let n=0;n<t.length;n++){let i=t[n];i.id=n;for(let t of i.references)e[t++]=n>>8,e[t]=255&n}for(;i=t.pop();){let t=i.offset;e.copyWithin(t+r,t,s),r-=2;let n=t+r;e[n++]=216,e[n++]=28,s=t}return e}(bo.subarray(t,Co),n.idsToInsert);return n=null,e}return c&Qo?(bo.start=t,bo.end=Co,bo):bo.subarray(t,Co)}finally{if(i)if(_<10&&_++,i.length>l&&(i.length=l),m>1e4)i.transitions=null,_=0,m=0,g.length>0&&(g=[]);else if(g.length>0&&!h){for(let e=0,t=g.length;e<t;e++)g[e][To]=void 0;g=[]}if(r&&a.saveShared){a.structures.length>l&&(a.structures=a.structures.slice(0,l));let e=bo.subarray(t,Co);return!1===a.updateSharedData()?a.encode(o):e}c&jo&&(Co=t)}},this.findCommonStringsToPack=()=>(u=new Map,p||(p=Object.create(null)),e=>{let t=e&&e.threshold||4,i=this.pack?e.maxPrivatePackedValues||16:0;f||(f=this.sharedValues=[]);for(let[s,n]of u)n.count>t&&(p[s]=i++,f.push(s),r=!0);for(;this.saveShared&&!1===this.updateSharedData(););u=null});const O=i=>{Co>Do&&(bo=y(Co));var r,s=typeof i;if("string"===s){if(d){let t=d[i];if(t>=0)return void(t<16?bo[Co++]=t+224:(bo[Co++]=198,O(1&t?15-t>>1:t-16>>1)));if(u&&!e.pack){let e=u.get(i);e?e.count++:u.set(i,{count:1})}}let s,n=i.length;if(xo&&n>=4&&n<1024){if((xo.size+=n)>61440){let e,i=(xo[0]?3*xo[0].length+xo[1].length:0)+10;Co+i>Do&&(bo=y(Co+i)),bo[Co++]=217,bo[Co++]=223,bo[Co++]=249,bo[Co++]=xo.position?132:130,bo[Co++]=26,e=Co-t,Co+=4,xo.position&&Io(t,O),xo=["",""],xo.size=0,xo.position=e}let e=So.test(i);return xo[e?0:1]+=i,bo[Co++]=e?206:207,void O(n)}s=n<32?1:n<256?2:n<65536?3:5;let a=3*n;if(Co+a>Do&&(bo=y(Co+a)),n<64||!o){let e,t,o,a=Co+s;for(e=0;e<n;e++)t=i.charCodeAt(e),t<128?bo[a++]=t:t<2048?(bo[a++]=t>>6|192,bo[a++]=63&t|128):55296==(64512&t)&&56320==(64512&(o=i.charCodeAt(e+1)))?(t=65536+((1023&t)<<10)+(1023&o),e++,bo[a++]=t>>18|240,bo[a++]=t>>12&63|128,bo[a++]=t>>6&63|128,bo[a++]=63&t|128):(bo[a++]=t>>12|224,bo[a++]=t>>6&63|128,bo[a++]=63&t|128);r=a-Co-s}else r=o(i,Co+s,a);r<24?bo[Co++]=96|r:r<256?(s<2&&bo.copyWithin(Co+2,Co+1,Co+1+r),bo[Co++]=120,bo[Co++]=r):r<65536?(s<3&&bo.copyWithin(Co+3,Co+2,Co+2+r),bo[Co++]=121,bo[Co++]=r>>8,bo[Co++]=255&r):(s<5&&bo.copyWithin(Co+5,Co+3,Co+3+r),bo[Co++]=122,wo.setUint32(Co,r),Co+=4),Co+=r}else if("number"===s)if(this.alwaysUseFloat||i>>>0!==i)if(this.alwaysUseFloat||i>>0!==i){let e;if((e=this.useFloat32)>0&&i<4294967296&&i>=-2147483648){let t;if(bo[Co++]=250,wo.setFloat32(Co,i),e<4||(t=i*lo[(127&bo[Co])<<1|bo[Co+1]>>7])>>0===t)return void(Co+=4);Co--}bo[Co++]=251,wo.setFloat64(Co,i),Co+=8}else i>=-24?bo[Co++]=31-i:i>=-256?(bo[Co++]=56,bo[Co++]=~i):i>=-65536?(bo[Co++]=57,wo.setUint16(Co,~i),Co+=2):(bo[Co++]=58,wo.setUint32(Co,~i),Co+=4);else i<24?bo[Co++]=i:i<256?(bo[Co++]=24,bo[Co++]=i):i<65536?(bo[Co++]=25,bo[Co++]=i>>8,bo[Co++]=255&i):(bo[Co++]=26,wo.setUint32(Co,i),Co+=4);else if("object"===s)if(i){if(n){let e=n.get(i);if(e){if(bo[Co++]=216,bo[Co++]=29,bo[Co++]=25,!e.references){let t=n.idsToInsert||(n.idsToInsert=[]);e.references=[],t.push(e)}return e.references.push(Co-t),void(Co+=2)}n.set(i,{offset:Co-t})}let e=i.constructor;if(e===Object)v(i,!0);else if(e===Array){(r=i.length)<24?bo[Co++]=128|r:ko(r);for(let e=0;e<r;e++)O(i[e])}else if(e===Map)if((this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(bo[Co++]=217,bo[Co++]=1,bo[Co++]=3),(r=i.size)<24?bo[Co++]=160|r:r<256?(bo[Co++]=184,bo[Co++]=r):r<65536?(bo[Co++]=185,bo[Co++]=r>>8,bo[Co++]=255&r):(bo[Co++]=186,wo.setUint32(Co,r),Co+=4),a.keyMap)for(let[t,r]of i)O(a.encodeKey(t)),O(r);else for(let[t,r]of i)O(t),O(r);else{for(let e=0,t=uo.length;e<t;e++){if(i instanceof po[e]){let t=uo[e],r=t.tag;return null==r&&(r=t.getTag&&t.getTag.call(this,i)),r<24?bo[Co++]=192|r:r<256?(bo[Co++]=216,bo[Co++]=r):r<65536?(bo[Co++]=217,bo[Co++]=r>>8,bo[Co++]=255&r):r>-1&&(bo[Co++]=218,wo.setUint32(Co,r),Co+=4),void t.encode.call(this,i,O,y)}}if(i[Symbol.iterator]){if(yo){let e=new Error("Iterable should be serialized as iterator");throw e.iteratorNotHandled=!0,e}bo[Co++]=159;for(let e of i)O(e);return void(bo[Co++]=255)}if(i[Symbol.asyncIterator]||Ao(i)){let e=new Error("Iterable/blob should be serialized as iterator");throw e.iteratorNotHandled=!0,e}if(this.useToJSON&&i.toJSON){const e=i.toJSON();if(e!==i)return O(e)}v(i,!i.hasOwnProperty)}}else bo[Co++]=246;else if("boolean"===s)bo[Co++]=i?245:244;else if("bigint"===s){if(i<BigInt(1)<<BigInt(64)&&i>=0)bo[Co++]=27,wo.setBigUint64(Co,i);else if(i>-(BigInt(1)<<BigInt(64))&&i<0)bo[Co++]=59,wo.setBigUint64(Co,-i-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(i+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");bo[Co++]=251,wo.setFloat64(Co,Number(i))}Co+=8}else{if("undefined"!==s)throw new Error("Unknown type: "+s);bo[Co++]=247}},v=!1===this.useRecords?this.variableMapSize?e=>{let t=Object.keys(e),i=Object.values(e),r=t.length;if(r<24?bo[Co++]=160|r:r<256?(bo[Co++]=184,bo[Co++]=r):r<65536?(bo[Co++]=185,bo[Co++]=r>>8,bo[Co++]=255&r):(bo[Co++]=186,wo.setUint32(Co,r),Co+=4),a.keyMap)for(let s=0;s<r;s++)O(a.encodeKey(t[s])),O(i[s]);else for(let s=0;s<r;s++)O(t[s]),O(i[s])}:(e,i)=>{bo[Co++]=185;let r=Co-t;Co+=2;let s=0;if(a.keyMap)for(let t in e)(i||e.hasOwnProperty(t))&&(O(a.encodeKey(t)),O(e[t]),s++);else for(let t in e)(i||e.hasOwnProperty(t))&&(O(t),O(e[t]),s++);bo[r+++t]=s>>8,bo[r+t]=255&s}:(e,t)=>{let i,n,o,a=s.transitions||(s.transitions=Object.create(null)),c=0,h=0;if(this.keyMap){o=Object.keys(e).map((e=>this.encodeKey(e))),h=o.length;for(let e=0;e<h;e++){let t=o[e];i=a[t],i||(i=a[t]=Object.create(null),c++),a=i}}else for(let r in e)(t||e.hasOwnProperty(r))&&(i=a[r],i||(1048576&a[To]&&(n=65535&a[To]),i=a[r]=Object.create(null),c++),a=i,h++);let u=a[To];if(void 0!==u)u&=65535,bo[Co++]=217,bo[Co++]=u>>8|224,bo[Co++]=255&u;else{if(o||(o=a.__keys__||(a.__keys__=Object.keys(e))),void 0===n?(u=s.nextId++,u||(u=0,s.nextId=1),u>=256&&(s.nextId=(u=l)+1)):u=n,s[u]=o,!(u<l)){if(a[To]=u,wo.setUint32(Co,3655335680),Co+=3,c&&(m+=_*c),g.length>=256-l&&(g.shift()[To]=void 0),g.push(a),ko(h+2),O(57344+u),O(o),null===t)return;for(let i in e)(t||e.hasOwnProperty(i))&&O(e[i]);return}bo[Co++]=217,bo[Co++]=u>>8|224,bo[Co++]=255&u,a=s.transitions;for(let e=0;e<h;e++)(void 0===a[To]||1048576&a[To])&&(a[To]=u),a=a[o[e]];a[To]=1048576|u,r=!0}if(h<24?bo[Co++]=128|h:ko(h),null!==t)for(let r in e)(t||e.hasOwnProperty(r))&&O(e[r])},y=e=>{let i;if(e>16777216){if(e-t>vo)throw new Error("Encoded buffer would be larger than maximum buffer size");i=Math.min(vo,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else i=1+(Math.max(e-t<<2,bo.length-1)>>12)<<12;let r=new _o(i);return wo=new DataView(r.buffer,0,i),bo.copy?bo.copy(r,0,t,e):r.set(bo.slice(t,e)),Co-=t,t=0,Do=r.length-10,bo=r};let b=100,w=1e3;function*D(e,i,r){let s=e.constructor;if(s===Object){let t=!1!==a.useRecords;t?v(e,null):Eo(Object.keys(e).length,160);for(let r in e){let s=e[r];t||O(r),s&&"object"==typeof s?i[r]?yield*D(s,i[r]):yield*C(s,i,r):O(s)}}else if(s===Array){let r=e.length;ko(r);for(let s=0;s<r;s++){let r=e[s];r&&("object"==typeof r||Co-t>b)?i.element?yield*D(r,i.element):yield*C(r,i,"element"):O(r)}}else if(e[Symbol.iterator]){bo[Co++]=159;for(let r of e)r&&("object"==typeof r||Co-t>b)?i.element?yield*D(r,i.element):yield*C(r,i,"element"):O(r);bo[Co++]=255}else Ao(e)?(Eo(e.size,64),yield bo.subarray(t,Co),yield e,x()):e[Symbol.asyncIterator]?(bo[Co++]=159,yield bo.subarray(t,Co),yield e,x(),bo[Co++]=255):O(e);r&&Co>t?yield bo.subarray(t,Co):Co-t>b&&(yield bo.subarray(t,Co),x())}function*C(e,i,r){let s=Co-t;try{O(e),Co-t>b&&(yield bo.subarray(t,Co),x())}catch(s_){if(!s_.iteratorNotHandled)throw s_;i[r]={},Co=t+s,yield*D.call(this,e,i[r])}}function x(){b=w,a.encode(null,qo)}function S(e,t,i){return b=t&&t.chunkThreshold?w=t.chunkThreshold:100,e&&"object"==typeof e?(a.encode(null,qo),i(e,a.iterateProperties||(a.iterateProperties={}),!0)):[a.encode(e)]}async function*T(e,t){for(let i of D(e,t,!0)){let e=i.constructor;if(e===Oo||e===Uint8Array)yield i;else if(Ao(i)){let e,t=i.stream().getReader();for(;!(e=await t.read()).done;)yield e.value}else if(i[Symbol.asyncIterator])for await(let r of i)x(),r?yield*T(r,t.async||(t.async={})):yield a.encode(r);else yield i}}this.encodeAsIterable=function(e,t){return S(e,t,D)},this.encodeAsAsyncIterable=function(e,t){return S(e,t,T)}}useBuffer(e){bo=e,wo=new DataView(bo.buffer,bo.byteOffset,bo.byteLength),Co=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let t=this.structures.slice(0),i=new Po(t,this.sharedValues,this.sharedVersion),r=this.saveShared(i,(t=>(t&&t.version||0)==e));return!1===r?(i=this.getShared()||{},this.structures=i.structures||[],this.sharedValues=i.packedValues,this.sharedVersion=i.version,this.structures.nextId=this.structures.length):t.forEach(((e,t)=>this.structures[t]=e)),r}}({useRecords:!1});Bo.encode,Bo.encodeAsIterable,Bo.encodeAsAsyncIterable;const Qo=512,jo=1024,qo=2048;function Wo(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}class No{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,r=Math.ceil(i/this.chunkedMTU);let s=0,n=0;for(;n<i;){const o=Math.min(i,n+this.chunkedMTU),a=e.slice(n,o),c={__peerData:this._dataCount,n:s,data:a,total:r};t.push(c),n=o,s++}return this._dataCount++,t}}}const Uo=pn.default||pn,zo=new class{isWebRTCSupported(){return"undefined"!=typeof RTCPeerConnection}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&(!this.isIOS&&t>=this.minSafariVersion))}getBrowser(){return Uo.browserDetails.browser}getVersion(){return Uo.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Uo.browserDetails.version||0;if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let i,r=!1;try{i=new RTCPeerConnection,i.addTransceiver("audio"),r=!0}catch(s){}finally{i&&i.close()}return r}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Xo=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Yo=()=>Math.random().toString(36).slice(2),Vo={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};const Ho=new class extends No{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(e){e.target&&t(e.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Vo,this.browser=zo.getBrowser(),this.browserVersion=zo.getVersion(),this.pack=ss,this.unpack=rs,this.supports=function(){const e={browser:zo.isBrowserSupported(),webRTC:zo.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{let r;t=new RTCPeerConnection(Vo),e.audioVideo=!0;try{r=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!zo.isIOS}catch(i){}}catch(i){}finally{r&&r.close()}}catch(i){}finally{t&&t.close()}return e}(),this.validateId=Xo,this.randomToken=Yo}};var Go,Zo;(Zo=Go||(Go={}))[Zo.Disabled=0]="Disabled",Zo[Zo.Errors=1]="Errors",Zo[Zo.Warnings=2]="Warnings",Zo[Zo.All=3]="All";var Jo,Ko=new class{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=["PeerJS: ",...t];for(const r in i)i[r]instanceof Error&&(i[r]="("+i[r].name+") "+i[r].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}},ea=Object.prototype.hasOwnProperty,ta="~";function ia(){}function ra(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function sa(e,t,i,r,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var n=new ra(i,r||e,s),o=ta?ta+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],n]:e._events[o].push(n):(e._events[o]=n,e._eventsCount++),e}function na(e,t){0==--e._eventsCount?e._events=new ia:delete e._events[t]}function oa(){this._events=new ia,this._eventsCount=0}Object.create&&(ia.prototype=Object.create(null),(new ia).__proto__||(ta=!1)),oa.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)ea.call(e,t)&&i.push(ta?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},oa.prototype.listeners=function(e){var t=ta?ta+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,n=new Array(s);r<s;r++)n[r]=i[r].fn;return n},oa.prototype.listenerCount=function(e){var t=ta?ta+e:e,i=this._events[t];return i?i.fn?1:i.length:0},oa.prototype.emit=function(e,t,i,r,s,n){var o=ta?ta+e:e;if(!this._events[o])return!1;var a,c,l=this._events[o],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,r),!0;case 5:return l.fn.call(l.context,t,i,r,s),!0;case 6:return l.fn.call(l.context,t,i,r,s,n),!0}for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];l.fn.apply(l.context,a)}else{var u,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,i);break;case 4:l[c].fn.call(l[c].context,t,i,r);break;default:if(!a)for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];l[c].fn.apply(l[c].context,a)}}return!0},oa.prototype.on=function(e,t,i){return sa(this,e,t,i,!1)},oa.prototype.once=function(e,t,i){return sa(this,e,t,i,!0)},oa.prototype.removeListener=function(e,t,i,r){var s=ta?ta+e:e;if(!this._events[s])return this;if(!t)return na(this,s),this;var n=this._events[s];if(n.fn)n.fn!==t||r&&!n.once||i&&n.context!==i||na(this,s);else{for(var o=0,a=[],c=n.length;o<c;o++)(n[o].fn!==t||r&&!n[o].once||i&&n[o].context!==i)&&a.push(n[o]);a.length?this._events[s]=1===a.length?a[0]:a:na(this,s)}return this},oa.prototype.removeAllListeners=function(e){var t;return e?(t=ta?ta+e:e,this._events[t]&&na(this,t)):(this._events=new ia,this._eventsCount=0),this},oa.prototype.off=oa.prototype.removeListener,oa.prototype.addListener=oa.prototype.on,oa.prefixed=ta,oa.EventEmitter=oa,Jo=oa;var aa,ca,la,ha,ua,da,pa,fa,ga,ma,_a,Oa,va,ya,ba={};Wo(ba,"ConnectionType",(()=>aa)),Wo(ba,"PeerErrorType",(()=>la)),Wo(ba,"BaseConnectionErrorType",(()=>ua)),Wo(ba,"DataConnectionErrorType",(()=>pa)),Wo(ba,"SerializationType",(()=>ga)),Wo(ba,"SocketEventType",(()=>_a)),Wo(ba,"ServerMessageType",(()=>va)),(ca=aa||(aa={})).Data="data",ca.Media="media",(ha=la||(la={})).BrowserIncompatible="browser-incompatible",ha.Disconnected="disconnected",ha.InvalidID="invalid-id",ha.InvalidKey="invalid-key",ha.Network="network",ha.PeerUnavailable="peer-unavailable",ha.SslUnavailable="ssl-unavailable",ha.ServerError="server-error",ha.SocketError="socket-error",ha.SocketClosed="socket-closed",ha.UnavailableID="unavailable-id",ha.WebRTC="webrtc",(da=ua||(ua={})).NegotiationFailed="negotiation-failed",da.ConnectionClosed="connection-closed",(fa=pa||(pa={})).NotOpenYet="not-open-yet",fa.MessageToBig="message-too-big",(ma=ga||(ga={})).Binary="binary",ma.BinaryUTF8="binary-utf8",ma.JSON="json",ma.None="raw",(Oa=_a||(_a={})).Message="message",Oa.Disconnected="disconnected",Oa.Error="error",Oa.Close="close",(ya=va||(va={})).Heartbeat="HEARTBEAT",ya.Candidate="CANDIDATE",ya.Offer="OFFER",ya.Answer="ANSWER",ya.Open="OPEN",ya.Error="ERROR",ya.IdTaken="ID-TAKEN",ya.InvalidKey="INVALID-KEY",ya.Leave="LEAVE",ya.Expire="EXPIRE";var wa;wa=JSON.parse('{"name":"peerjs","version":"1.5.2","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"1.5.4","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class Da extends Jo.EventEmitter{constructor(e,t,i,r,s,n=5e3){super(),this.pingInterval=n,this._disconnected=!0,this._messagesQueue=[];const o=e?"wss://":"ws://";this._baseUrl=o+t+":"+i+r+"peerjs?key="+s}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;!this._socket&&this._disconnected&&(this._socket=new WebSocket(i+"&version="+wa.version),this._disconnected=!1,this._socket.onmessage=e=>{let t;try{t=JSON.parse(e.data),Ko.log("Server message received:",t)}catch(i){return void Ko.log("Invalid server message",e.data)}this.emit(_a.Message,t)},this._socket.onclose=e=>{this._disconnected||(Ko.log("Socket closed.",e),this._cleanup(),this._disconnected=!0,this.emit(_a.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ko.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout((()=>{this._sendHeartbeat()}),this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void Ko.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:va.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(_a.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Ca{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===aa.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,r={ordered:!!e.reliable},s=t.createDataChannel(i.label,r);i._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ko.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,r=this.connection.type,s=this.connection.provider;Ko.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(Ko.log(`Received ICE candidates for ${t}:`,e.candidate),s.socket.send({type:va.Candidate,payload:{candidate:e.candidate,type:r,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ko.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(ua.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Ko.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(ua.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Ko.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ko.log("Listening for data channel"),e.ondatachannel=e=>{Ko.log("Received data channel");const r=e.channel;s.getConnection(t,i)._initializeDataChannel(r)},Ko.log("Listening for remote stream"),e.ontrack=e=>{Ko.log("Received remote stream");const r=e.streams[0],n=s.getConnection(t,i);if(n.type===aa.Media){const e=n;this._addStreamToMediaConnection(r,e)}}}cleanup(){Ko.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t="closed"!==e.signalingState;let i=!1;const r=this.connection.dataChannel;r&&(i=!!r.readyState&&"closed"!==r.readyState),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Ko.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ko.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===aa.Data){const e=this.connection;i={...i,label:e.label,reliable:e.reliable,serialization:e.serialization}}t.socket.send({type:va.Offer,payload:i,dst:this.connection.peer})}catch(i){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=i&&(t.emitError(la.WebRTC,i),Ko.log("Failed to setLocalDescription, ",i))}}catch(r){t.emitError(la.WebRTC,r),Ko.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();Ko.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Ko.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:va.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){t.emitError(la.WebRTC,i),Ko.log("Failed to setLocalDescription, ",i)}}catch(r){t.emitError(la.WebRTC,r),Ko.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,r=this.connection.provider;Ko.log("Setting remote description",t);const s=this;try{await i.setRemoteDescription(t),Ko.log(`Set remoteDescription:${e} for:${this.connection.peer}`),"OFFER"===e&&await s._makeAnswer()}catch(n){r.emitError(la.WebRTC,n),Ko.log("Failed to setRemoteDescription, ",n)}}async handleCandidate(e){Ko.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ko.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(la.WebRTC,t),Ko.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Ko.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Ko.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((i=>{t.addTrack(i,e)}))}_addStreamToMediaConnection(e,t){Ko.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class xa extends Jo.EventEmitter{emitError(e,t){Ko.error("Error:",t),this.emit("error",new Sa(`${e}`,t))}}class Sa extends Error{constructor(e,t){"string"==typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class Ta extends xa{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}class Ea extends Ta{static#e=this.ID_PREFIX="mc_";get type(){return aa.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Ea.ID_PREFIX+Ho.randomToken(),this._negotiator=new Ca(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ko.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ko.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ko.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case va.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case va.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:Ko.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void Ko.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const r of i)this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Pa{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:r,path:s,key:n}=this._options,o=new URL(`${t}://${i}:${r}${s}${n}/${e}`);return o.searchParams.set("ts",`${Date.now()}${Math.random()}`),o.searchParams.set("version",wa.version),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(200!==e.status)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(s_){Ko.error("Error retrieving ID",s_);let t="";throw"/"===this._options.path&&this._options.host!==Ho.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(200!==e.status){if(401===e.status){let e="";throw e=this._options.host===Ho.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+e)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(s_){throw Ko.error("Error retrieving list peers",s_),new Error("Could not get list peers from the server."+s_)}}}class ka extends Ta{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return aa.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||ka.ID_PREFIX+Yo(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Ca(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ko.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=e=>{Ko.log(`DC#${this.connectionId} dc onmessage:`,e.data)},this.dataChannel.onclose=()=>{Ko.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,t=!1){if(this.open)return this._send(e,t);this.emitError(pa.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}async handleMessage(e){const t=e.payload;switch(e.type){case va.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case va.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Ko.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}}class Ra extends ka{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",(e=>this._handleDataMessage(e)))}_bufferedSend(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>ka.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout((()=>{this._buffering=!1,this._tryBuffer()}),50),!1;try{this.dataChannel.send(e)}catch(t){return Ko.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open)return;if(0===this._buffer.length)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Aa extends Ra{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new No,this.serialization=ga.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=rs(e),i=t.__peerData;if(i)return"close"===i.type?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const e=function(e){let t=0;for(const s of e)t+=s.byteLength;const i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i}(i.data);this._handleDataMessage({data:e})}}_send(e,t){const i=ss(e);if(i instanceof Promise)return this._send_blob(i);!t&&i.byteLength>this.chunker.chunkedMTU?this._sendChunks(i):this._bufferedSend(i)}async _send_blob(e){const t=await e;t.byteLength>this.chunker.chunkedMTU?this._sendChunks(t):this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Ko.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class La extends Ra{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ga.None}}class Ma extends Ra{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;i&&"close"===i.type?this.close():this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));i.byteLength>=Ho.chunkedMTU?this.emitError(pa.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=ga.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Fa extends xa{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let i;super(),this._serializers={raw:La,json:Ma,binary:Aa,"binary-utf8":Aa,default:Aa},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:Ho.CLOUD_HOST,port:Ho.CLOUD_PORT,path:"/",key:Fa.DEFAULT_KEY,token:Ho.randomToken(),config:Ho.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==Ho.CLOUD_HOST?this._options.secure=Ho.isSecure():this._options.host==Ho.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ko.setLogFunction(this._options.logFunction),Ko.logLevel=this._options.debug||0,this._api=new Pa(t),this._socket=this._createServerConnection(),Ho.supports.audioVideo||Ho.supports.data?!i||Ho.validateId(i)?i?this._initialize(i):this._api.retrieveId().then((e=>this._initialize(e))).catch((e=>this._abort(la.ServerError,e))):this._delayedAbort(la.InvalidID,`ID "${i}" is invalid`):this._delayedAbort(la.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new Da(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(_a.Message,(e=>{this._handleMessage(e)})),e.on(_a.Error,(e=>{this._abort(la.SocketError,e)})),e.on(_a.Disconnected,(()=>{this.disconnected||(this.emitError(la.Network,"Lost connection to server."),this.disconnect())})),e.on(_a.Close,(()=>{this.disconnected||this._abort(la.SocketClosed,"Underlying socket is already closed.")})),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,r=e.src;switch(t){case va.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case va.Error:this._abort(la.ServerError,i.msg);break;case va.IdTaken:this._abort(la.UnavailableID,`ID "${this.id}" is taken`);break;case va.InvalidKey:this._abort(la.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case va.Leave:Ko.log(`Received leave message from ${r}`),this._cleanupPeer(r),this._connections.delete(r);break;case va.Expire:this.emitError(la.PeerUnavailable,`Could not connect to peer ${r}`);break;case va.Offer:{const e=i.connectionId;let t=this.getConnection(r,e);if(t&&(t.close(),Ko.warn(`Offer received for existing Connection ID:${e}`)),i.type===aa.Media){const s=new Ea(r,this,{connectionId:e,_payload:i,metadata:i.metadata});t=s,this._addConnection(r,t),this.emit("call",s)}else{if(i.type!==aa.Data)return void Ko.warn(`Received malformed connection type:${i.type}`);{const s=new this._serializers[i.serialization](r,this,{connectionId:e,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});t=s,this._addConnection(r,t),this.emit("connection",s)}}const s=this._getMessages(e);for(const i of s)t.handleMessage(i);break}default:{if(!i)return void Ko.warn(`You received a malformed message from ${r} of type ${t}`);const s=i.connectionId,n=this.getConnection(r,s);n&&n.peerConnection?n.handleMessage(e):s?this._storeMessage(s,e):Ko.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected)return Ko.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(la.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected)return Ko.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(la.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void Ko.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const r=new Ea(e,this,{...i,_stream:t});return this._addConnection(e,r),r}_addConnection(e,t){Ko.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const r of i)if(r.connectionId===t)return r;return null}_delayedAbort(e,t){setTimeout((()=>{this._abort(e,t)}),0)}_abort(e,t){Ko.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ko.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ko.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ko.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);Ko.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=(e=>{})){this._api.listAllPeers().then((t=>e(t))).catch((e=>this._abort(la.ServerError,e)))}}class $a extends he{peer;conns=new Map;constructor(e){super();let t={secure:!0};try{this.peer=e?new Fa(e,t):new Fa(t)}catch(i){console.warn(i)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}id=()=>this.peer.id;addPeerEventHandlers(e){e.on("open",(async e=>{this.emit("ready",e)})),e.on("error",(async e=>{this.emit("error",e)})),e.on("close",(async()=>{this.emit("closed")})),e.on("connection",(async e=>{this.addConnEventHandlers(e)}))}addConnEventHandlers(e){console.log(`transport:conn ${e.peer} is trying to connect`),e.on("open",(async()=>{this.conns.set(e.peer,e),this.sendPeers(e),this.emit("conn:ready",e.peer)})),e.on("error",(async t=>{this.emit("conn:error",{peerID:e.peer,err:t})})),e.on("close",(async()=>{this.conns.delete(e.peer),this.emit("conn:disconnected",e.peer)})),e.on("data",(async t=>{let{type:i,payload:r}=t;if("peers"===i)this.processNewPeers(r);else this.emit("conn:data",{peerID:e.peer,data:t})}))}async send(e,t,i){this.conns.get(e).send({type:t,payload:i})}destroy(){this.peer.destroy()}processNewPeers=async e=>{e.forEach((e=>{this.conns.get(e)||e==this.peer.id||this.connect(e)}))};async broadcast(e,t){this.conns.forEach((i=>{this.send(i.peer,`user:${e}`,t)}))}async sendPeers(e){e.send({type:"peers",payload:this.getPeers()})}getPeers(e=!1){let t=Array.from(this.conns,(([e,t])=>t.peer));return e&&t.push(this.peer.id),t.sort()}async connect(e){let t=this.peer.connect(e,{reliable:!0});this.addConnEventHandlers(t)}}const Ia=new MessageChannel,Ba=[];Ia.port1.onmessage=()=>{Ba.pop()()};var Qa,ja={exports:{}},qa={exports:{}};var Wa={};const Na=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,Ua=()=>{const e={enabled:"undefined"!=typeof process&&"0"!==Wa.FORCE_COLOR,visible:!0,styles:{},keys:{}},t=(e,t,i)=>"function"==typeof e?e(t):e.wrap(t,i),i=(i,r)=>{if(""===i||null==i)return"";if(!1===e.enabled)return i;if(!1===e.visible)return"";let s=""+i,n=s.includes("\n"),o=r.length;for(o>0&&r.includes("unstyle")&&(r=[...new Set(["unstyle",...r])].reverse());o-- >0;)s=t(e.styles[r[o]],s,n);return s},r=(t,r,s)=>{e.styles[t]=(e=>{let t=e.open=`[${e.codes[0]}m`,i=e.close=`[${e.codes[1]}m`,r=e.regex=new RegExp(`\\u001b\\[${e.codes[1]}m`,"g");return e.wrap=(e,s)=>{e.includes(i)&&(e=e.replace(r,i+t));let n=t+e+i;return s?n.replace(/\r*\n/g,`${i}$&${t}`):n},e})({name:t,codes:r}),(e.keys[s]||(e.keys[s]=[])).push(t),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(i){e.alias(t,i)},get(){let r=e=>i(e,r.stack);return Reflect.setPrototypeOf(r,e),r.stack=this.stack?this.stack.concat(t):[t],r}})};return r("reset",[0,0],"modifier"),r("bold",[1,22],"modifier"),r("dim",[2,22],"modifier"),r("italic",[3,23],"modifier"),r("underline",[4,24],"modifier"),r("inverse",[7,27],"modifier"),r("hidden",[8,28],"modifier"),r("strikethrough",[9,29],"modifier"),r("black",[30,39],"color"),r("red",[31,39],"color"),r("green",[32,39],"color"),r("yellow",[33,39],"color"),r("blue",[34,39],"color"),r("magenta",[35,39],"color"),r("cyan",[36,39],"color"),r("white",[37,39],"color"),r("gray",[90,39],"color"),r("grey",[90,39],"color"),r("bgBlack",[40,49],"bg"),r("bgRed",[41,49],"bg"),r("bgGreen",[42,49],"bg"),r("bgYellow",[43,49],"bg"),r("bgBlue",[44,49],"bg"),r("bgMagenta",[45,49],"bg"),r("bgCyan",[46,49],"bg"),r("bgWhite",[47,49],"bg"),r("blackBright",[90,39],"bright"),r("redBright",[91,39],"bright"),r("greenBright",[92,39],"bright"),r("yellowBright",[93,39],"bright"),r("blueBright",[94,39],"bright"),r("magentaBright",[95,39],"bright"),r("cyanBright",[96,39],"bright"),r("whiteBright",[97,39],"bright"),r("bgBlackBright",[100,49],"bgBright"),r("bgRedBright",[101,49],"bgBright"),r("bgGreenBright",[102,49],"bgBright"),r("bgYellowBright",[103,49],"bgBright"),r("bgBlueBright",[104,49],"bgBright"),r("bgMagentaBright",[105,49],"bgBright"),r("bgCyanBright",[106,49],"bgBright"),r("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=Na,e.hasColor=e.hasAnsi=t=>(e.ansiRegex.lastIndex=0,"string"==typeof t&&""!==t&&e.ansiRegex.test(t)),e.alias=(t,r)=>{let s="string"==typeof r?e[r]:r;if("function"!=typeof s)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");s.stack||(Reflect.defineProperty(s,"name",{value:t}),e.styles[t]=s,s.stack=[t]),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(i){e.alias(t,i)},get(){let t=e=>i(e,t.stack);return Reflect.setPrototypeOf(t,e),t.stack=this.stack?this.stack.concat(s.stack):s.stack,t}})},e.theme=t=>{if(null===(i=t)||"object"!=typeof i||Array.isArray(i))throw new TypeError("Expected theme to be an object");var i;for(let r of Object.keys(t))e.alias(r,t[r]);return e},e.alias("unstyle",(t=>"string"==typeof t&&""!==t?(e.ansiRegex.lastIndex=0,t.replace(e.ansiRegex,"")):"")),e.alias("noop",(e=>e)),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=(Qa||(Qa=1,function(e){const t="undefined"!=typeof process&&"Hyper"==={}.TERM_PROGRAM,i="undefined"!=typeof process&&"win32"===process.platform,r="undefined"!=typeof process&&"linux"===process.platform,s={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},n=Object.assign({},s,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),o=Object.assign({},s,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:r?"▸":"❯",pointerSmall:r?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});e.exports=i&&!t?n:o,Reflect.defineProperty(e.exports,"common",{enumerable:!1,value:s}),Reflect.defineProperty(e.exports,"windows",{enumerable:!1,value:n}),Reflect.defineProperty(e.exports,"other",{enumerable:!1,value:o})}(qa)),qa.exports),e.define=r,e};ja.exports=Ua(),ja.exports.create=Ua;const za=e(ja.exports);za.enabled=!0;const Xa={...za,peerID:za.redBright,grey50:e=>`[0m[38;5;244m${e}`},Ya="undefined"==typeof navigator?"node":navigator.userAgent;const Va=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Ya);let Ha;const Ga=async()=>null!=Ha?Ha:Ha=await(async()=>{try{return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(await navigator.mediaDevices.enumerateDevices()).some((e=>"videoinput"===e.kind)):(console.warn("navigator.mediaDevices.enumerateDevices not supported"),!1)}catch(e){return console.warn(e),!1}})();function Za(e,t,i){let r=null,s=null;if("function"==typeof i.value?(r="value",s=i.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(r="get",s=i.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;i[r]=function(...e){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,e)}),this[n]}}const Ja=function(e=100,t,i){return r=(r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...s){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...s),s=[this[o]]),this[n]=setTimeout((()=>{r.apply(this,s),this[o]=i?i():void 0}),e)}},(e,t,i)=>{let s=null,n=null;if("function"==typeof i.value?(s="value",n=i.value):"function"==typeof i.get&&(s="get",n=i.get),!n)throw new Error("not supported");i[s]=r(n,t)};var r};function Ka(e,t){localStorage[e]=t,sessionStorage[e]=t}function ec(e){return i.sanitize(e)}var tc="top",ic="bottom",rc="right",sc="left",nc="auto",oc=[tc,ic,rc,sc],ac="start",cc="end",lc="clippingParents",hc="viewport",uc="popper",dc="reference",pc=oc.reduce((function(e,t){return e.concat([t+"-"+ac,t+"-"+cc])}),[]),fc=[].concat(oc,[nc]).reduce((function(e,t){return e.concat([t,t+"-"+ac,t+"-"+cc])}),[]),gc="beforeRead",mc="read",_c="afterRead",Oc="beforeMain",vc="main",yc="afterMain",bc="beforeWrite",wc="write",Dc="afterWrite",Cc=[gc,mc,_c,Oc,vc,yc,bc,wc,Dc];function xc(e){return e?(e.nodeName||"").toLowerCase():null}function Sc(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Tc(e){return e instanceof Sc(e).Element||e instanceof Element}function Ec(e){return e instanceof Sc(e).HTMLElement||e instanceof HTMLElement}function Pc(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Sc(e).ShadowRoot||e instanceof ShadowRoot)}const kc={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];Ec(s)&&xc(s)&&(Object.assign(s.style,i),Object.keys(r).forEach((function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],s=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});Ec(r)&&xc(r)&&(Object.assign(r.style,n),Object.keys(s).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function Rc(e){return e.split("-")[0]}var Ac=Math.max,Lc=Math.min,Mc=Math.round;function Fc(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function $c(){return!/^((?!chrome|android).)*safari/i.test(Fc())}function Ic(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r=e.getBoundingClientRect(),s=1,n=1;t&&Ec(e)&&(s=e.offsetWidth>0&&Mc(r.width)/e.offsetWidth||1,n=e.offsetHeight>0&&Mc(r.height)/e.offsetHeight||1);var o=(Tc(e)?Sc(e):window).visualViewport,a=!$c()&&i,c=(r.left+(a&&o?o.offsetLeft:0))/s,l=(r.top+(a&&o?o.offsetTop:0))/n,h=r.width/s,u=r.height/n;return{width:h,height:u,top:l,right:c+h,bottom:l+u,left:c,x:c,y:l}}function Bc(e){var t=Ic(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function Qc(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Pc(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function jc(e){return Sc(e).getComputedStyle(e)}function qc(e){return["table","td","th"].indexOf(xc(e))>=0}function Wc(e){return((Tc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Nc(e){return"html"===xc(e)?e:e.assignedSlot||e.parentNode||(Pc(e)?e.host:null)||Wc(e)}function Uc(e){return Ec(e)&&"fixed"!==jc(e).position?e.offsetParent:null}function zc(e){for(var t=Sc(e),i=Uc(e);i&&qc(i)&&"static"===jc(i).position;)i=Uc(i);return i&&("html"===xc(i)||"body"===xc(i)&&"static"===jc(i).position)?t:i||function(e){var t=/firefox/i.test(Fc());if(/Trident/i.test(Fc())&&Ec(e)&&"fixed"===jc(e).position)return null;var i=Nc(e);for(Pc(i)&&(i=i.host);Ec(i)&&["html","body"].indexOf(xc(i))<0;){var r=jc(i);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return i;i=i.parentNode}return null}(e)||t}function Xc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yc(e,t,i){return Ac(e,Lc(t,i))}function Vc(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Hc(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}const Gc={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,r=e.name,s=e.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Rc(i.placement),c=Xc(a),l=[sc,rc].indexOf(a)>=0?"height":"width";if(n&&o){var h=function(e,t){return Vc("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Hc(e,oc))}(s.padding,i),u=Bc(n),d="y"===c?tc:sc,p="y"===c?ic:rc,f=i.rects.reference[l]+i.rects.reference[c]-o[c]-i.rects.popper[l],g=o[c]-i.rects.reference[c],m=zc(n),_=m?"y"===c?m.clientHeight||0:m.clientWidth||0:0,O=f/2-g/2,v=h[d],y=_-u[l]-h[p],b=_/2-u[l]/2+O,w=Yc(v,b,y),D=c;i.modifiersData[r]=((t={})[D]=w,t.centerOffset=w-b,t)}},effect:function(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Qc(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zc(e){return e.split("-")[1]}var Jc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kc(e){var t,i=e.popper,r=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,h=e.roundOffsets,u=e.isFixed,d=o.x,p=void 0===d?0:d,f=o.y,g=void 0===f?0:f,m="function"==typeof h?h({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var _=o.hasOwnProperty("x"),O=o.hasOwnProperty("y"),v=sc,y=tc,b=window;if(l){var w=zc(i),D="clientHeight",C="clientWidth";if(w===Sc(i)&&"static"!==jc(w=Wc(i)).position&&"absolute"===a&&(D="scrollHeight",C="scrollWidth"),s===tc||(s===sc||s===rc)&&n===cc)y=ic,g-=(u&&w===b&&b.visualViewport?b.visualViewport.height:w[D])-r.height,g*=c?1:-1;if(s===sc||(s===tc||s===ic)&&n===cc)v=rc,p-=(u&&w===b&&b.visualViewport?b.visualViewport.width:w[C])-r.width,p*=c?1:-1}var x,S=Object.assign({position:a},l&&Jc),T=!0===h?function(e,t){var i=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:Mc(i*s)/s||0,y:Mc(r*s)/s||0}}({x:p,y:g},Sc(i)):{x:p,y:g};return p=T.x,g=T.y,c?Object.assign({},S,((x={})[y]=O?"0":"",x[v]=_?"0":"",x.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",x)):Object.assign({},S,((t={})[y]=O?g+"px":"",t[v]=_?p+"px":"",t.transform="",t))}const el={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=void 0===r||r,n=i.adaptive,o=void 0===n||n,a=i.roundOffsets,c=void 0===a||a,l={placement:Rc(t.placement),variation:Zc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Kc(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Kc(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var tl={passive:!0};const il={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,n=void 0===s||s,o=r.resize,a=void 0===o||o,c=Sc(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&l.forEach((function(e){e.addEventListener("scroll",i.update,tl)})),a&&c.addEventListener("resize",i.update,tl),function(){n&&l.forEach((function(e){e.removeEventListener("scroll",i.update,tl)})),a&&c.removeEventListener("resize",i.update,tl)}},data:{}};var rl={left:"right",right:"left",bottom:"top",top:"bottom"};function sl(e){return e.replace(/left|right|bottom|top/g,(function(e){return rl[e]}))}var nl={start:"end",end:"start"};function ol(e){return e.replace(/start|end/g,(function(e){return nl[e]}))}function al(e){var t=Sc(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cl(e){return Ic(Wc(e)).left+al(e).scrollLeft}function ll(e){var t=jc(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function hl(e){return["html","body","#document"].indexOf(xc(e))>=0?e.ownerDocument.body:Ec(e)&&ll(e)?e:hl(Nc(e))}function ul(e,t){var i;void 0===t&&(t=[]);var r=hl(e),s=r===(null==(i=e.ownerDocument)?void 0:i.body),n=Sc(r),o=s?[n].concat(n.visualViewport||[],ll(r)?r:[]):r,a=t.concat(o);return s?a:a.concat(ul(Nc(o)))}function dl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pl(e,t,i){return t===hc?dl(function(e,t){var i=Sc(e),r=Wc(e),s=i.visualViewport,n=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){n=s.width,o=s.height;var l=$c();(l||!l&&"fixed"===t)&&(a=s.offsetLeft,c=s.offsetTop)}return{width:n,height:o,x:a+cl(e),y:c}}(e,i)):Tc(t)?function(e,t){var i=Ic(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):dl(function(e){var t,i=Wc(e),r=al(e),s=null==(t=e.ownerDocument)?void 0:t.body,n=Ac(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ac(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+cl(e),c=-r.scrollTop;return"rtl"===jc(s||i).direction&&(a+=Ac(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:c}}(Wc(e)))}function fl(e,t,i,r){var s="clippingParents"===t?function(e){var t=ul(Nc(e)),i=["absolute","fixed"].indexOf(jc(e).position)>=0&&Ec(e)?zc(e):e;return Tc(i)?t.filter((function(e){return Tc(e)&&Qc(e,i)&&"body"!==xc(e)})):[]}(e):[].concat(t),n=[].concat(s,[i]),o=n[0],a=n.reduce((function(t,i){var s=pl(e,i,r);return t.top=Ac(s.top,t.top),t.right=Lc(s.right,t.right),t.bottom=Lc(s.bottom,t.bottom),t.left=Ac(s.left,t.left),t}),pl(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function gl(e){var t,i=e.reference,r=e.element,s=e.placement,n=s?Rc(s):null,o=s?Zc(s):null,a=i.x+i.width/2-r.width/2,c=i.y+i.height/2-r.height/2;switch(n){case tc:t={x:a,y:i.y-r.height};break;case ic:t={x:a,y:i.y+i.height};break;case rc:t={x:i.x+i.width,y:c};break;case sc:t={x:i.x-r.width,y:c};break;default:t={x:i.x,y:i.y}}var l=n?Xc(n):null;if(null!=l){var h="y"===l?"height":"width";switch(o){case ac:t[l]=t[l]-(i[h]/2-r[h]/2);break;case cc:t[l]=t[l]+(i[h]/2-r[h]/2)}}return t}function ml(e,t){void 0===t&&(t={});var i=t,r=i.placement,s=void 0===r?e.placement:r,n=i.strategy,o=void 0===n?e.strategy:n,a=i.boundary,c=void 0===a?lc:a,l=i.rootBoundary,h=void 0===l?hc:l,u=i.elementContext,d=void 0===u?uc:u,p=i.altBoundary,f=void 0!==p&&p,g=i.padding,m=void 0===g?0:g,_=Vc("number"!=typeof m?m:Hc(m,oc)),O=d===uc?dc:uc,v=e.rects.popper,y=e.elements[f?O:d],b=fl(Tc(y)?y:y.contextElement||Wc(e.elements.popper),c,h,o),w=Ic(e.elements.reference),D=gl({reference:w,element:v,strategy:"absolute",placement:s}),C=dl(Object.assign({},v,D)),x=d===uc?C:w,S={top:b.top-x.top+_.top,bottom:x.bottom-b.bottom+_.bottom,left:b.left-x.left+_.left,right:x.right-b.right+_.right},T=e.modifiersData.offset;if(d===uc&&T){var E=T[s];Object.keys(S).forEach((function(e){var t=[rc,ic].indexOf(e)>=0?1:-1,i=[tc,ic].indexOf(e)>=0?"y":"x";S[e]+=E[i]*t}))}return S}const _l={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,n=void 0===s||s,o=i.altAxis,a=void 0===o||o,c=i.fallbackPlacements,l=i.padding,h=i.boundary,u=i.rootBoundary,d=i.altBoundary,p=i.flipVariations,f=void 0===p||p,g=i.allowedAutoPlacements,m=t.options.placement,_=Rc(m),O=c||(_===m||!f?[sl(m)]:function(e){if(Rc(e)===nc)return[];var t=sl(e);return[ol(e),t,ol(t)]}(m)),v=[m].concat(O).reduce((function(e,i){return e.concat(Rc(i)===nc?function(e,t){void 0===t&&(t={});var i=t,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,c=i.allowedAutoPlacements,l=void 0===c?fc:c,h=Zc(r),u=h?a?pc:pc.filter((function(e){return Zc(e)===h})):oc,d=u.filter((function(e){return l.indexOf(e)>=0}));0===d.length&&(d=u);var p=d.reduce((function(t,i){return t[i]=ml(e,{placement:i,boundary:s,rootBoundary:n,padding:o})[Rc(i)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:i,boundary:h,rootBoundary:u,padding:l,flipVariations:f,allowedAutoPlacements:g}):i)}),[]),y=t.rects.reference,b=t.rects.popper,w=new Map,D=!0,C=v[0],x=0;x<v.length;x++){var S=v[x],T=Rc(S),E=Zc(S)===ac,P=[tc,ic].indexOf(T)>=0,k=P?"width":"height",R=ml(t,{placement:S,boundary:h,rootBoundary:u,altBoundary:d,padding:l}),A=P?E?rc:sc:E?ic:tc;y[k]>b[k]&&(A=sl(A));var L=sl(A),M=[];if(n&&M.push(R[T]<=0),a&&M.push(R[A]<=0,R[L]<=0),M.every((function(e){return e}))){C=S,D=!1;break}w.set(S,M)}if(D)for(var F=function(e){var t=v.find((function(t){var i=w.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},$=f?3:1;$>0;$--){if("break"===F($))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ol(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function vl(e){return[tc,rc,ic,sc].some((function(t){return e[t]>=0}))}const yl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,r=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=ml(t,{elementContext:"reference"}),a=ml(t,{altBoundary:!0}),c=Ol(o,r),l=Ol(a,s,n),h=vl(c),u=vl(l);t.modifiersData[i]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}};const bl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,r=e.name,s=i.offset,n=void 0===s?[0,0]:s,o=fc.reduce((function(e,i){return e[i]=function(e,t,i){var r=Rc(e),s=[sc,tc].indexOf(r)>=0?-1:1,n="function"==typeof i?i(Object.assign({},t,{placement:e})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[sc,rc].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(i,t.rects,n),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}};const wl={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=gl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};const Dl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,n=void 0===s||s,o=i.altAxis,a=void 0!==o&&o,c=i.boundary,l=i.rootBoundary,h=i.altBoundary,u=i.padding,d=i.tether,p=void 0===d||d,f=i.tetherOffset,g=void 0===f?0:f,m=ml(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:h}),_=Rc(t.placement),O=Zc(t.placement),v=!O,y=Xc(_),b="x"===y?"y":"x",w=t.modifiersData.popperOffsets,D=t.rects.reference,C=t.rects.popper,x="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,S="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(w){if(n){var P,k="y"===y?tc:sc,R="y"===y?ic:rc,A="y"===y?"height":"width",L=w[y],M=L+m[k],F=L-m[R],$=p?-C[A]/2:0,I=O===ac?D[A]:C[A],B=O===ac?-C[A]:-D[A],Q=t.elements.arrow,j=p&&Q?Bc(Q):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=q[k],N=q[R],U=Yc(0,D[A],j[A]),z=v?D[A]/2-$-U-W-S.mainAxis:I-U-W-S.mainAxis,X=v?-D[A]/2+$+U+N+S.mainAxis:B+U+N+S.mainAxis,Y=t.elements.arrow&&zc(t.elements.arrow),V=Y?"y"===y?Y.clientTop||0:Y.clientLeft||0:0,H=null!=(P=null==T?void 0:T[y])?P:0,G=L+X-H,Z=Yc(p?Lc(M,L+z-H-V):M,L,p?Ac(F,G):F);w[y]=Z,E[y]=Z-L}if(a){var J,K="x"===y?tc:sc,ee="x"===y?ic:rc,te=w[b],ie="y"===b?"height":"width",re=te+m[K],se=te-m[ee],ne=-1!==[tc,sc].indexOf(_),oe=null!=(J=null==T?void 0:T[b])?J:0,ae=ne?re:te-D[ie]-C[ie]-oe+S.altAxis,ce=ne?te+D[ie]+C[ie]-oe-S.altAxis:se,le=p&&ne?(ue=Yc(ae,te,he=ce))>he?he:ue:Yc(p?ae:re,te,p?ce:se);w[b]=le,E[b]=le-te}var he,ue;t.modifiersData[r]=E}},requiresIfExists:["offset"]};function Cl(e,t,i){void 0===i&&(i=!1);var r,s,n=Ec(t),o=Ec(t)&&function(e){var t=e.getBoundingClientRect(),i=Mc(t.width)/e.offsetWidth||1,r=Mc(t.height)/e.offsetHeight||1;return 1!==i||1!==r}(t),a=Wc(t),c=Ic(e,o,i),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!i)&&(("body"!==xc(t)||ll(a))&&(l=(r=t)!==Sc(r)&&Ec(r)?{scrollLeft:(s=r).scrollLeft,scrollTop:s.scrollTop}:al(r)),Ec(t)?((h=Ic(t,!0)).x+=t.clientLeft,h.y+=t.clientTop):a&&(h.x=cl(a))),{x:c.left+l.scrollLeft-h.x,y:c.top+l.scrollTop-h.y,width:c.width,height:c.height}}function xl(e){var t=new Map,i=new Set,r=[];function s(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var r=t.get(e);r&&s(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||s(e)})),r}var Sl={placement:"bottom",modifiers:[],strategy:"absolute"};function Tl(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function El(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,r=void 0===i?[]:i,s=t.defaultOptions,n=void 0===s?Sl:s;return function(e,t,i){void 0===i&&(i=n);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Sl,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,h={state:a,setOptions:function(i){var s="function"==typeof i?i(a.options):i;u(),a.options=Object.assign({},n,a.options,s),a.scrollParents={reference:Tc(e)?ul(e):e.contextElement?ul(e.contextElement):[],popper:ul(t)};var o,l,d=function(e){var t=xl(e);return Cc.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((o=[].concat(r,a.options.modifiers),l=o.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=d.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,r=void 0===i?{}:i,s=e.effect;if("function"==typeof s){var n=s({state:a,name:t,instance:h,options:r}),o=function(){};c.push(n||o)}})),h.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,i=e.popper;if(Tl(t,i)){a.rects={reference:Cl(t,zc(i),"fixed"===a.options.strategy),popper:Bc(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var s=a.orderedModifiers[r],n=s.fn,o=s.options,c=void 0===o?{}:o,u=s.name;"function"==typeof n&&(a=n({state:a,options:c,name:u,instance:h})||a)}else a.reset=!1,r=-1}}},update:(s=function(){return new Promise((function(e){h.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(s())}))}))),o}),destroy:function(){u(),l=!0}};if(!Tl(e,t))return h;function u(){c.forEach((function(e){return e()})),c=[]}return h.setOptions(i).then((function(e){!l&&i.onFirstUpdate&&i.onFirstUpdate(e)})),h}}var Pl=El(),kl=El({defaultModifiers:[il,wl,el,kc]}),Rl=El({defaultModifiers:[il,wl,el,kc,bl,_l,Dl,Gc,yl]});const Al=Object.freeze(Object.defineProperty({__proto__:null,afterMain:yc,afterRead:_c,afterWrite:Dc,applyStyles:kc,arrow:Gc,auto:nc,basePlacements:oc,beforeMain:Oc,beforeRead:gc,beforeWrite:bc,bottom:ic,clippingParents:lc,computeStyles:el,createPopper:Rl,createPopperBase:Pl,createPopperLite:kl,detectOverflow:ml,end:cc,eventListeners:il,flip:_l,hide:yl,left:sc,main:vc,modifierPhases:Cc,offset:bl,placements:fc,popper:uc,popperGenerator:El,popperOffsets:wl,preventOverflow:Dl,read:mc,reference:dc,right:rc,start:ac,top:tc,variationPlacements:pc,viewport:hc,write:wc},Symbol.toStringTag,{value:"Module"})),Ll=new Map,Ml={set(e,t,i){Ll.has(e)||Ll.set(e,new Map);const r=Ll.get(e);r.has(t)||0===r.size?r.set(t,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(e,t)=>Ll.has(e)&&Ll.get(e).get(t)||null,remove(e,t){if(!Ll.has(e))return;const i=Ll.get(e);i.delete(t),0===i.size&&Ll.delete(e)}},Fl="transitionend",$l=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))),e),Il=e=>{e.dispatchEvent(new Event(Fl))},Bl=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),Ql=e=>Bl(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector($l(e)):null,jl=e=>{if(!Bl(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},ql=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),Wl=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Wl(e.parentNode):null},Nl=()=>{},Ul=e=>{e.offsetHeight},zl=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Xl=[],Yl=()=>"rtl"===document.documentElement.dir,Vl=e=>{var t;t=()=>{const t=zl();if(t){const i=e.NAME,r=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=r,e.jQueryInterface)}},"loading"===document.readyState?(Xl.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of Xl)e()})),Xl.push(t)):t()},Hl=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,Gl=(e,t,i=!0)=>{if(!i)return void Hl(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const r=Number.parseFloat(t),s=Number.parseFloat(i);return r||s?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let s=!1;const n=({target:i})=>{i===t&&(s=!0,t.removeEventListener(Fl,n),Hl(e))};t.addEventListener(Fl,n),setTimeout((()=>{s||Il(t)}),r)},Zl=(e,t,i,r)=>{const s=e.length;let n=e.indexOf(t);return-1===n?!i&&r?e[s-1]:e[0]:(n+=i?1:-1,r&&(n=(n+s)%s),e[Math.max(0,Math.min(n,s-1))])},Jl=/[^.]*(?=\..*)\.|.*/,Kl=/\..*/,eh=/::\d+$/,th={};
/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */let ih=1;const rh={mouseenter:"mouseover",mouseleave:"mouseout"},sh=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function nh(e,t){return t&&`${t}::${ih++}`||e.uidEvent||ih++}function oh(e){const t=nh(e);return e.uidEvent=t,th[t]=th[t]||{},th[t]}function ah(e,t,i=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===i))}function ch(e,t,i){const r="string"==typeof t,s=r?i:t||i;let n=dh(e);return sh.has(n)||(n=e),[r,s,n]}function lh(e,t,i,r,s){if("string"!=typeof t||!e)return;let[n,o,a]=ch(t,i,r);if(t in rh){o=(e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)})(o)}const c=oh(e),l=c[a]||(c[a]={}),h=ah(l,o,n?i:null);if(h)return void(h.oneOff=h.oneOff&&s);const u=nh(o,t.replace(Jl,"")),d=n?function(e,t,i){return function r(s){const n=e.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of n)if(a===o)return fh(s,{delegateTarget:o}),r.oneOff&&ph.off(e,s.type,t,i),i.apply(o,[s])}}(e,i,o):function(e,t){return function i(r){return fh(r,{delegateTarget:e}),i.oneOff&&ph.off(e,r.type,t),t.apply(e,[r])}}(e,o);d.delegationSelector=n?i:null,d.callable=o,d.oneOff=s,d.uidEvent=u,l[u]=d,e.addEventListener(a,d,n)}function hh(e,t,i,r,s){const n=ah(t[i],r,s);n&&(e.removeEventListener(i,n,Boolean(s)),delete t[i][n.uidEvent])}function uh(e,t,i,r){const s=t[i]||{};for(const[n,o]of Object.entries(s))n.includes(r)&&hh(e,t,i,o.callable,o.delegationSelector)}function dh(e){return e=e.replace(Kl,""),rh[e]||e}const ph={on(e,t,i,r){lh(e,t,i,r,!1)},one(e,t,i,r){lh(e,t,i,r,!0)},off(e,t,i,r){if("string"!=typeof t||!e)return;const[s,n,o]=ch(t,i,r),a=o!==t,c=oh(e),l=c[o]||{},h=t.startsWith(".");if(void 0===n){if(h)for(const i of Object.keys(c))uh(e,c,i,t.slice(1));for(const[i,r]of Object.entries(l)){const s=i.replace(eh,"");a&&!t.includes(s)||hh(e,c,o,r.callable,r.delegationSelector)}}else{if(!Object.keys(l).length)return;hh(e,c,o,n,s?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const r=zl();let s=null,n=!0,o=!0,a=!1;t!==dh(t)&&r&&(s=r.Event(t,i),r(e).trigger(s),n=!s.isPropagationStopped(),o=!s.isImmediatePropagationStopped(),a=s.isDefaultPrevented());const c=fh(new Event(t,{bubbles:n,cancelable:!0}),i);return a&&c.preventDefault(),o&&e.dispatchEvent(c),c.defaultPrevented&&s&&s.preventDefault(),c}};function fh(e,t={}){for(const[r,s]of Object.entries(t))try{e[r]=s}catch(i){Object.defineProperty(e,r,{configurable:!0,get:()=>s})}return e}function gh(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function mh(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const _h={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${mh(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${mh(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of i){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=gh(e.dataset[r])}return t},getDataAttribute:(e,t)=>gh(e.getAttribute(`data-bs-${mh(t)}`))};class Oh{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=Bl(t)?_h.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...Bl(t)?_h.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[r,s]of Object.entries(t)){const t=e[r],n=Bl(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(n))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${n}" but expected type "${s}".`)}var i}}class vh extends Oh{constructor(e,t){super(),(e=Ql(e))&&(this._element=e,this._config=this._getConfig(t),Ml.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ml.remove(this._element,this.constructor.DATA_KEY),ph.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){Gl(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Ml.get(Ql(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const yh=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?$l(i.trim()):null}return t},bh={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let r=e.parentNode.closest(t);for(;r;)i.push(r),r=r.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!ql(e)&&jl(e)))},getSelectorFromElement(e){const t=yh(e);return t&&bh.findOne(t)?t:null},getElementFromSelector(e){const t=yh(e);return t?bh.findOne(t):null},getMultipleElementsFromSelector(e){const t=yh(e);return t?bh.find(t):[]}},wh=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,r=e.NAME;ph.on(document,i,`[data-bs-dismiss="${r}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),ql(this))return;const s=bh.getElementFromSelector(this)||this.closest(`.${r}`);e.getOrCreateInstance(s)[t]()}))},Dh=".bs.alert",Ch=`close${Dh}`,xh=`closed${Dh}`;class Sh extends vh{static get NAME(){return"alert"}close(){if(ph.trigger(this._element,Ch).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),ph.trigger(this._element,xh),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=Sh.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}wh(Sh,"close"),Vl(Sh);const Th='[data-bs-toggle="button"]';class Eh extends vh{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=Eh.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}ph.on(document,"click.bs.button.data-api",Th,(e=>{e.preventDefault();const t=e.target.closest(Th);Eh.getOrCreateInstance(t).toggle()})),Vl(Eh);const Ph=".bs.swipe",kh=`touchstart${Ph}`,Rh=`touchmove${Ph}`,Ah=`touchend${Ph}`,Lh=`pointerdown${Ph}`,Mh=`pointerup${Ph}`,Fh={endCallback:null,leftCallback:null,rightCallback:null},$h={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ih extends Oh{constructor(e,t){super(),this._element=e,e&&Ih.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Fh}static get DefaultType(){return $h}static get NAME(){return"swipe"}dispose(){ph.off(this._element,Ph)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Hl(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Hl(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ph.on(this._element,Lh,(e=>this._start(e))),ph.on(this._element,Mh,(e=>this._end(e))),this._element.classList.add("pointer-event")):(ph.on(this._element,kh,(e=>this._start(e))),ph.on(this._element,Rh,(e=>this._move(e))),ph.on(this._element,Ah,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Bh=".bs.carousel",Qh=".data-api",jh="next",qh="prev",Wh="left",Nh="right",Uh=`slide${Bh}`,zh=`slid${Bh}`,Xh=`keydown${Bh}`,Yh=`mouseenter${Bh}`,Vh=`mouseleave${Bh}`,Hh=`dragstart${Bh}`,Gh=`load${Bh}${Qh}`,Zh=`click${Bh}${Qh}`,Jh="carousel",Kh="active",eu=".active",tu=".carousel-item",iu=eu+tu,ru={ArrowLeft:Nh,ArrowRight:Wh},su={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},nu={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ou extends vh{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=bh.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Jh&&this.cycle()}static get Default(){return su}static get DefaultType(){return nu}static get NAME(){return"carousel"}next(){this._slide(jh)}nextWhenVisible(){!document.hidden&&jl(this._element)&&this.next()}prev(){this._slide(qh)}pause(){this._isSliding&&Il(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ph.one(this._element,zh,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void ph.one(this._element,zh,(()=>this.to(e)));const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?jh:qh;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ph.on(this._element,Xh,(e=>this._keydown(e))),"hover"===this._config.pause&&(ph.on(this._element,Yh,(()=>this.pause())),ph.on(this._element,Vh,(()=>this._maybeEnableCycle()))),this._config.touch&&Ih.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of bh.find(".carousel-item img",this._element))ph.on(t,Hh,(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(Wh)),rightCallback:()=>this._slide(this._directionToOrder(Nh)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new Ih(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=ru[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=bh.findOne(eu,this._indicatorsElement);t.classList.remove(Kh),t.removeAttribute("aria-current");const i=bh.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Kh),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),r=e===jh,s=t||Zl(this._getItems(),i,r,this._config.wrap);if(s===i)return;const n=this._getItemIndex(s),o=t=>ph.trigger(this._element,t,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:n});if(o(Uh).defaultPrevented)return;if(!i||!s)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(n),this._activeElement=s;const c=r?"carousel-item-start":"carousel-item-end",l=r?"carousel-item-next":"carousel-item-prev";s.classList.add(l),Ul(s),i.classList.add(c),s.classList.add(c);this._queueCallback((()=>{s.classList.remove(c,l),s.classList.add(Kh),i.classList.remove(Kh,l,c),this._isSliding=!1,o(zh)}),i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return bh.findOne(iu,this._element)}_getItems(){return bh.find(tu,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Yl()?e===Wh?qh:jh:e===Wh?jh:qh}_orderToDirection(e){return Yl()?e===qh?Wh:Nh:e===qh?Nh:Wh}static jQueryInterface(e){return this.each((function(){const t=ou.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}ph.on(document,Zh,"[data-bs-slide], [data-bs-slide-to]",(function(e){const t=bh.getElementFromSelector(this);if(!t||!t.classList.contains(Jh))return;e.preventDefault();const i=ou.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(i.to(r),void i._maybeEnableCycle()):"next"===_h.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),ph.on(window,Gh,(()=>{const e=bh.find('[data-bs-ride="carousel"]');for(const t of e)ou.getOrCreateInstance(t)})),Vl(ou);const au=".bs.collapse",cu=`show${au}`,lu=`shown${au}`,hu=`hide${au}`,uu=`hidden${au}`,du=`click${au}.data-api`,pu="show",fu="collapse",gu="collapsing",mu=`:scope .${fu} .${fu}`,_u='[data-bs-toggle="collapse"]',Ou={parent:null,toggle:!0},vu={parent:"(null|element)",toggle:"boolean"};class yu extends vh{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=bh.find(_u);for(const r of i){const e=bh.getSelectorFromElement(r),t=bh.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ou}static get DefaultType(){return vu}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>yu.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(ph.trigger(this._element,cu).defaultPrevented)return;for(const r of e)r.hide();const t=this._getDimension();this._element.classList.remove(fu),this._element.classList.add(gu),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gu),this._element.classList.add(fu,pu),this._element.style[t]="",ph.trigger(this._element,lu)}),this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(ph.trigger(this._element,hu).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ul(this._element),this._element.classList.add(gu),this._element.classList.remove(fu,pu);for(const t of this._triggerArray){const e=bh.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gu),this._element.classList.add(fu),ph.trigger(this._element,uu)}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(pu)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Ql(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(_u);for(const t of e){const e=bh.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=bh.find(mu,this._config.parent);return bh.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const i=yu.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}))}}ph.on(document,du,_u,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of bh.getMultipleElementsFromSelector(this))yu.getOrCreateInstance(t,{toggle:!1}).toggle()})),Vl(yu);const bu="dropdown",wu=".bs.dropdown",Du=".data-api",Cu="ArrowUp",xu="ArrowDown",Su=`hide${wu}`,Tu=`hidden${wu}`,Eu=`show${wu}`,Pu=`shown${wu}`,ku=`click${wu}${Du}`,Ru=`keydown${wu}${Du}`,Au=`keyup${wu}${Du}`,Lu="show",Mu='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Fu=`${Mu}.${Lu}`,$u=".dropdown-menu",Iu=Yl()?"top-end":"top-start",Bu=Yl()?"top-start":"top-end",Qu=Yl()?"bottom-end":"bottom-start",ju=Yl()?"bottom-start":"bottom-end",qu=Yl()?"left-start":"right-start",Wu=Yl()?"right-start":"left-start",Nu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Uu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class zu extends vh{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=bh.next(this._element,$u)[0]||bh.prev(this._element,$u)[0]||bh.findOne($u,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Nu}static get DefaultType(){return Uu}static get NAME(){return bu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ql(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ph.trigger(this._element,Eu,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))ph.on(e,"mouseover",Nl);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Lu),this._element.classList.add(Lu),ph.trigger(this._element,Pu,e)}}hide(){if(ql(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ph.trigger(this._element,Su,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))ph.off(e,"mouseover",Nl);this._popper&&this._popper.destroy(),this._menu.classList.remove(Lu),this._element.classList.remove(Lu),this._element.setAttribute("aria-expanded","false"),_h.removeDataAttribute(this._menu,"popper"),ph.trigger(this._element,Tu,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!Bl(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${bu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===Al)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:Bl(this._config.reference)?e=Ql(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Rl(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Lu)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return qu;if(e.classList.contains("dropstart"))return Wu;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Bu:Iu:t?ju:Qu}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(_h.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Hl(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=bh.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>jl(e)));i.length&&Zl(i,t,e===xu,!i.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=zu.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=bh.find(Fu);for(const i of t){const t=zu.getInstance(i);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),s=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!s||"outside"===t._config.autoClose&&s)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:t._element};"click"===e.type&&(n.clickEvent=e),t._completeHide(n)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,r=[Cu,xu].includes(e.key);if(!r&&!i)return;if(t&&!i)return;e.preventDefault();const s=this.matches(Mu)?this:bh.prev(this,Mu)[0]||bh.next(this,Mu)[0]||bh.findOne(Mu,e.delegateTarget.parentNode),n=zu.getOrCreateInstance(s);if(r)return e.stopPropagation(),n.show(),void n._selectMenuItem(e);n._isShown()&&(e.stopPropagation(),n.hide(),s.focus())}}ph.on(document,Ru,Mu,zu.dataApiKeydownHandler),ph.on(document,Ru,$u,zu.dataApiKeydownHandler),ph.on(document,ku,zu.clearMenus),ph.on(document,Au,zu.clearMenus),ph.on(document,ku,Mu,(function(e){e.preventDefault(),zu.getOrCreateInstance(this).toggle()})),Vl(zu);const Xu="backdrop",Yu="show",Vu=`mousedown.bs.${Xu}`,Hu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Gu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zu extends Oh{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Hu}static get DefaultType(){return Gu}static get NAME(){return Xu}show(e){if(!this._config.isVisible)return void Hl(e);this._append();const t=this._getElement();this._config.isAnimated&&Ul(t),t.classList.add(Yu),this._emulateAnimation((()=>{Hl(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(Yu),this._emulateAnimation((()=>{this.dispose(),Hl(e)}))):Hl(e)}dispose(){this._isAppended&&(ph.off(this._element,Vu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ql(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ph.on(e,Vu,(()=>{Hl(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){Gl(e,this._getElement(),this._config.isAnimated)}}const Ju=".bs.focustrap",Ku=`focusin${Ju}`,ed=`keydown.tab${Ju}`,td="backward",id={autofocus:!0,trapElement:null},rd={autofocus:"boolean",trapElement:"element"};class sd extends Oh{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return id}static get DefaultType(){return rd}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ph.off(document,Ju),ph.on(document,Ku,(e=>this._handleFocusin(e))),ph.on(document,ed,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ph.off(document,Ju))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=bh.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===td?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?td:"forward")}}const nd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",od=".sticky-top",ad="padding-right",cd="margin-right";class ld{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ad,(t=>t+e)),this._setElementAttributes(nd,ad,(t=>t+e)),this._setElementAttributes(od,cd,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ad),this._resetElementAttributes(nd,ad),this._resetElementAttributes(od,cd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const r=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const s=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&_h.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const i=_h.getDataAttribute(e,t);null!==i?(_h.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(Bl(e))t(e);else for(const i of bh.find(e,this._element))t(i)}}const hd=".bs.modal",ud=`hide${hd}`,dd=`hidePrevented${hd}`,pd=`hidden${hd}`,fd=`show${hd}`,gd=`shown${hd}`,md=`resize${hd}`,_d=`click.dismiss${hd}`,Od=`mousedown.dismiss${hd}`,vd=`keydown.dismiss${hd}`,yd=`click${hd}.data-api`,bd="modal-open",wd="show",Dd="modal-static",Cd={backdrop:!0,focus:!0,keyboard:!0},xd={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Sd extends vh{constructor(e,t){super(e,t),this._dialog=bh.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ld,this._addEventListeners()}static get Default(){return Cd}static get DefaultType(){return xd}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;ph.trigger(this._element,fd,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bd),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;ph.trigger(this._element,ud).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(wd),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){ph.off(window,hd),ph.off(this._dialog,hd),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zu({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sd({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=bh.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),Ul(this._element),this._element.classList.add(wd);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ph.trigger(this._element,gd,{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){ph.on(this._element,vd,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),ph.on(window,md,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),ph.on(this._element,Od,(e=>{ph.one(this._element,_d,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(bd),this._resetAdjustments(),this._scrollBar.reset(),ph.trigger(this._element,pd)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ph.trigger(this._element,dd).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Dd)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Dd),this._queueCallback((()=>{this._element.classList.remove(Dd),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=Yl()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=Yl()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=Sd.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}ph.on(document,yd,'[data-bs-toggle="modal"]',(function(e){const t=bh.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),ph.one(t,fd,(e=>{e.defaultPrevented||ph.one(t,pd,(()=>{jl(this)&&this.focus()}))}));const i=bh.findOne(".modal.show");i&&Sd.getInstance(i).hide();Sd.getOrCreateInstance(t).toggle(this)})),wh(Sd),Vl(Sd);const Td=".bs.offcanvas",Ed=".data-api",Pd=`load${Td}${Ed}`,kd="show",Rd="showing",Ad="hiding",Ld=".offcanvas.show",Md=`show${Td}`,Fd=`shown${Td}`,$d=`hide${Td}`,Id=`hidePrevented${Td}`,Bd=`hidden${Td}`,Qd=`resize${Td}`,jd=`click${Td}${Ed}`,qd=`keydown.dismiss${Td}`,Wd={backdrop:!0,keyboard:!0,scroll:!1},Nd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ud extends vh{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wd}static get DefaultType(){return Nd}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(ph.trigger(this._element,Md,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ld).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Rd);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(kd),this._element.classList.remove(Rd),ph.trigger(this._element,Fd,{relatedTarget:e})}),this._element,!0)}hide(){if(!this._isShown)return;if(ph.trigger(this._element,$d).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ad),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(kd,Ad),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ld).reset(),ph.trigger(this._element,Bd)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Zu({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():ph.trigger(this._element,Id)}:null})}_initializeFocusTrap(){return new sd({trapElement:this._element})}_addEventListeners(){ph.on(this._element,qd,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():ph.trigger(this._element,Id))}))}static jQueryInterface(e){return this.each((function(){const t=Ud.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}ph.on(document,jd,'[data-bs-toggle="offcanvas"]',(function(e){const t=bh.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),ql(this))return;ph.one(t,Bd,(()=>{jl(this)&&this.focus()}));const i=bh.findOne(Ld);i&&i!==t&&Ud.getInstance(i).hide();Ud.getOrCreateInstance(t).toggle(this)})),ph.on(window,Pd,(()=>{for(const e of bh.find(Ld))Ud.getOrCreateInstance(e).show()})),ph.on(window,Qd,(()=>{for(const e of bh.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ud.getOrCreateInstance(e).hide()})),wh(Ud),Vl(Ud);const zd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Vd=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!Xd.has(i)||Boolean(Yd.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(i)))};const Hd={allowList:zd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Gd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zd={entry:"(string|element|function|null)",selector:"(string|element)"};class Jd extends Oh{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Hd}static get DefaultType(){return Gd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(e,s,r);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},Zd)}_setContent(e,t,i){const r=bh.findOne(i,e);r&&((t=this._resolvePossibleFunction(t))?Bl(t)?this._putElementInTemplate(Ql(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const n of s){const e=n.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){n.remove();continue}const i=[].concat(...n.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of i)Vd(t,r)||n.removeAttribute(t.nodeName)}return r.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Hl(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Kd=new Set(["sanitize","allowList","sanitizeFn"]),ep="fade",tp="show",ip=".modal",rp="hide.bs.modal",sp="hover",np="focus",op={AUTO:"auto",TOP:"top",RIGHT:Yl()?"left":"right",BOTTOM:"bottom",LEFT:Yl()?"right":"left"},ap={allowList:zd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},cp={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class lp extends vh{constructor(e,t){if(void 0===Al)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ap}static get DefaultType(){return cp}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ph.off(this._element.closest(ip),rp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=ph.trigger(this._element,this.constructor.eventName("show")),t=(Wl(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),ph.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(tp),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ph.on(s,"mouseover",Nl);this._queueCallback((()=>{ph.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(ph.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(tp),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))ph.off(e,"mouseover",Nl);this._activeTrigger.click=!1,this._activeTrigger[np]=!1,this._activeTrigger[sp]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ph.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(ep,tp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(ep),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Jd({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ep)}_isShown(){return this.tip&&this.tip.classList.contains(tp)}_createPopper(e){const t=Hl(this._config.placement,[this,e,this._element]),i=op[t.toUpperCase()];return Rl(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Hl(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...Hl(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)ph.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===sp?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===sp?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");ph.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?np:sp]=!0,t._enter()})),ph.on(this._element,i,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?np:sp]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},ph.on(this._element.closest(ip),rp,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=_h.getDataAttributes(this._element);for(const i of Object.keys(t))Kd.has(i)&&delete t[i];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:Ql(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=lp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Vl(lp);const hp={...lp.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},up={...lp.DefaultType,content:"(null|string|element|function)"};class dp extends lp{static get Default(){return hp}static get DefaultType(){return up}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=dp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Vl(dp);const pp=".bs.scrollspy",fp=`activate${pp}`,gp=`click${pp}`,mp=`load${pp}.data-api`,_p="active",Op="[href]",vp=".nav-link",yp=`${vp}, .nav-item > ${vp}, .list-group-item`,bp={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},wp={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Dp extends vh{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bp}static get DefaultType(){return wp}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ql(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ph.off(this._config.target,gp),ph.on(this._config.target,gp,Op,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:r,behavior:"smooth"});i.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const n of e){if(!n.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(n));continue}const e=n.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&e){if(i(n),!r)return}else s||e||i(n)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=bh.find(Op,this._config.target);for(const t of e){if(!t.hash||ql(t))continue;const e=bh.findOne(decodeURI(t.hash),this._element);jl(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(_p),this._activateParents(e),ph.trigger(this._element,fp,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))bh.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(_p);else for(const t of bh.parents(e,".nav, .list-group"))for(const e of bh.prev(t,yp))e.classList.add(_p)}_clearActiveClass(e){e.classList.remove(_p);const t=bh.find(`${Op}.${_p}`,e);for(const i of t)i.classList.remove(_p)}static jQueryInterface(e){return this.each((function(){const t=Dp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}ph.on(window,mp,(()=>{for(const e of bh.find('[data-bs-spy="scroll"]'))Dp.getOrCreateInstance(e)})),Vl(Dp);const Cp=".bs.tab",xp=`hide${Cp}`,Sp=`hidden${Cp}`,Tp=`show${Cp}`,Ep=`shown${Cp}`,Pp=`click${Cp}`,kp=`keydown${Cp}`,Rp=`load${Cp}`,Ap="ArrowLeft",Lp="ArrowRight",Mp="ArrowUp",Fp="ArrowDown",$p="Home",Ip="End",Bp="active",Qp="fade",jp="show",qp=".dropdown-toggle",Wp=`:not(${qp})`,Np='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Up=`${`.nav-link${Wp}, .list-group-item${Wp}, [role="tab"]${Wp}`}, ${Np}`,zp=`.${Bp}[data-bs-toggle="tab"], .${Bp}[data-bs-toggle="pill"], .${Bp}[data-bs-toggle="list"]`;class Xp extends vh{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ph.on(this._element,kp,(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?ph.trigger(t,xp,{relatedTarget:e}):null;ph.trigger(e,Tp,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Bp),this._activate(bh.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ph.trigger(e,Ep,{relatedTarget:t})):e.classList.add(jp)}),e,e.classList.contains(Qp))}_deactivate(e,t){if(!e)return;e.classList.remove(Bp),e.blur(),this._deactivate(bh.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ph.trigger(e,Sp,{relatedTarget:t})):e.classList.remove(jp)}),e,e.classList.contains(Qp))}_keydown(e){if(![Ap,Lp,Mp,Fp,$p,Ip].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!ql(e)));let i;if([$p,Ip].includes(e.key))i=t[e.key===$p?0:t.length-1];else{const r=[Lp,Fp].includes(e.key);i=Zl(t,e.target,r,!0)}i&&(i.focus({preventScroll:!0}),Xp.getOrCreateInstance(i).show())}_getChildren(){return bh.find(Up,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const i of t)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=bh.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const r=(e,r)=>{const s=bh.findOne(e,i);s&&s.classList.toggle(r,t)};r(qp,Bp),r(".dropdown-menu",jp),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Bp)}_getInnerElement(e){return e.matches(Up)?e:bh.findOne(Up,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=Xp.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}ph.on(document,Pp,Np,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),ql(this)||Xp.getOrCreateInstance(this).show()})),ph.on(window,Rp,(()=>{for(const e of bh.find(zp))Xp.getOrCreateInstance(e)})),Vl(Xp);const Yp=".bs.toast",Vp=`mouseover${Yp}`,Hp=`mouseout${Yp}`,Gp=`focusin${Yp}`,Zp=`focusout${Yp}`,Jp=`hide${Yp}`,Kp=`hidden${Yp}`,ef=`show${Yp}`,tf=`shown${Yp}`,rf="hide",sf="show",nf="showing",of={animation:"boolean",autohide:"boolean",delay:"number"},af={animation:!0,autohide:!0,delay:5e3};class cf extends vh{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return af}static get DefaultType(){return of}static get NAME(){return"toast"}show(){if(ph.trigger(this._element,ef).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(rf),Ul(this._element),this._element.classList.add(sf,nf),this._queueCallback((()=>{this._element.classList.remove(nf),ph.trigger(this._element,tf),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(ph.trigger(this._element,Jp).defaultPrevented)return;this._element.classList.add(nf),this._queueCallback((()=>{this._element.classList.add(rf),this._element.classList.remove(nf,sf),ph.trigger(this._element,Kp)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(sf),super.dispose()}isShown(){return this._element.classList.contains(sf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){ph.on(this._element,Vp,(e=>this._onInteraction(e,!0))),ph.on(this._element,Hp,(e=>this._onInteraction(e,!1))),ph.on(this._element,Gp,(e=>this._onInteraction(e,!0))),ph.on(this._element,Zp,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=cf.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}wh(cf),Vl(cf);var lf="undefined"!=typeof window?window:null,hf=null===lf,uf=hf?void 0:lf.document,df="addEventListener",pf="removeEventListener",ff="getBoundingClientRect",gf="_a",mf="_b",_f="_c",Of="horizontal",vf=function(){return!1},yf=hf?"calc":["","-webkit-","-moz-","-o-"].filter((function(e){var t=uf.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length})).shift()+"calc",bf=function(e){return"string"==typeof e||e instanceof String},wf=function(e){if(bf(e)){var t=uf.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},Df=function(e,t,i){var r=e[t];return void 0!==r?r:i},Cf=function(e,t,i,r){if(t){if("end"===r)return 0;if("center"===r)return e/2}else if(i){if("start"===r)return 0;if("center"===r)return e/2}return e},xf=function(e,t){var i=uf.createElement("div");return i.className="gutter gutter-"+t,i},Sf=function(e,t,i){var r={};return bf(t)?r[e]=t:r[e]=yf+"("+t+"% - "+i+"px)",r},Tf=function(e,t){var i;return(i={})[e]=t+"px",i},Ef=function(e,t){if(void 0===t&&(t={}),hf)return{};var i,r,s,n,o,a,c=e;Array.from&&(c=Array.from(c));var l=wf(c[0]).parentNode,h=getComputedStyle?getComputedStyle(l):null,u=h?h.flexDirection:null,d=Df(t,"sizes")||c.map((function(){return 100/c.length})),p=Df(t,"minSize",100),f=Array.isArray(p)?p:c.map((function(){return p})),g=Df(t,"maxSize",1/0),m=Array.isArray(g)?g:c.map((function(){return g})),_=Df(t,"expandToMin",!1),O=Df(t,"gutterSize",10),v=Df(t,"gutterAlign","center"),y=Df(t,"snapOffset",30),b=Array.isArray(y)?y:c.map((function(){return y})),w=Df(t,"dragInterval",1),D=Df(t,"direction",Of),C=Df(t,"cursor",D===Of?"col-resize":"row-resize"),x=Df(t,"gutter",xf),S=Df(t,"elementStyle",Sf),T=Df(t,"gutterStyle",Tf);function E(e,t,r,s){var n=S(i,t,r,s);Object.keys(n).forEach((function(t){e.style[t]=n[t]}))}function P(){return a.map((function(e){return e.size}))}function k(e){return"touches"in e?e.touches[0][r]:e[r]}function R(e){var t=a[this.a],i=a[this.b],r=t.size+i.size;t.size=e/this.size*r,i.size=r-e/this.size*r,E(t.element,t.size,this[mf],t.i),E(i.element,i.size,this[_f],i.i)}function A(e){var i,r=a[this.a],s=a[this.b];this.dragging&&(i=k(e)-this.start+(this[mf]-this.dragOffset),w>1&&(i=Math.round(i/w)*w),i<=r.minSize+r.snapOffset+this[mf]?i=r.minSize+this[mf]:i>=this.size-(s.minSize+s.snapOffset+this[_f])&&(i=this.size-(s.minSize+this[_f])),i>=r.maxSize-r.snapOffset+this[mf]?i=r.maxSize+this[mf]:i<=this.size-(s.maxSize-s.snapOffset+this[_f])&&(i=this.size-(s.maxSize+this[_f])),R.call(this,i),Df(t,"onDrag",vf)(P()))}function L(){var e=a[this.a].element,t=a[this.b].element,r=e[ff](),o=t[ff]();this.size=r[i]+o[i]+this[mf]+this[_f],this.start=r[s],this.end=r[n]}function M(e){var t=function(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var i=e[o];return 0===i?null:i-=D===Of?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}(l);if(null===t)return e;if(f.reduce((function(e,t){return e+t}),0)>t)return e;var i=0,r=[],s=e.map((function(s,n){var o=t*s/100,a=Cf(O,0===n,n===e.length-1,v),c=f[n]+a;return o<c?(i+=c-o,r.push(0),c):(r.push(o-c),o)}));return 0===i?e:s.map((function(e,s){var n=e;if(i>0&&r[s]-i>0){var o=Math.min(i,r[s]-i);i-=o,n=e-o}return n/t*100}))}function F(){var e=this,i=a[e.a].element,r=a[e.b].element;e.dragging&&Df(t,"onDragEnd",vf)(P()),e.dragging=!1,lf[pf]("mouseup",e.stop),lf[pf]("touchend",e.stop),lf[pf]("touchcancel",e.stop),lf[pf]("mousemove",e.move),lf[pf]("touchmove",e.move),e.stop=null,e.move=null,i[pf]("selectstart",vf),i[pf]("dragstart",vf),r[pf]("selectstart",vf),r[pf]("dragstart",vf),i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",e.gutter.style.cursor="",e.parent.style.cursor="",uf.body.style.cursor=""}function $(e){if(!("button"in e)||0===e.button){var i=this,r=a[i.a].element,s=a[i.b].element;i.dragging||Df(t,"onDragStart",vf)(P()),e.preventDefault(),i.dragging=!0,i.move=A.bind(i),i.stop=F.bind(i),lf[df]("mouseup",i.stop),lf[df]("touchend",i.stop),lf[df]("touchcancel",i.stop),lf[df]("mousemove",i.move),lf[df]("touchmove",i.move),r[df]("selectstart",vf),r[df]("dragstart",vf),s[df]("selectstart",vf),s[df]("dragstart",vf),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",i.gutter.style.cursor=C,i.parent.style.cursor=C,uf.body.style.cursor=C,L.call(i),i.dragOffset=k(e)-i.end}}D===Of?(i="width",r="clientX",s="left",n="right",o="clientWidth"):"vertical"===D&&(i="height",r="clientY",s="top",n="bottom",o="clientHeight"),d=M(d);var I=[];function B(e){var t=e.i===I.length,i=t?I[e.i-1]:I[e.i];L.call(i);var r=t?i.size-e.minSize-i[_f]:e.minSize+i[mf];R.call(i,r)}return(a=c.map((function(e,t){var r,s={element:wf(e),size:d[t],minSize:f[t],maxSize:m[t],snapOffset:b[t],i:t};if(t>0&&((r={a:t-1,b:t,dragging:!1,direction:D,parent:l})[mf]=Cf(O,t-1==0,!1,v),r[_f]=Cf(O,!1,t===c.length-1,v),"row-reverse"===u||"column-reverse"===u)){var n=r.a;r.a=r.b,r.b=n}if(t>0){var o=x(t,D,s.element);!function(e,t,r){var s=T(i,t,r);Object.keys(s).forEach((function(t){e.style[t]=s[t]}))}(o,O,t),r[gf]=$.bind(r),o[df]("mousedown",r[gf]),o[df]("touchstart",r[gf]),l.insertBefore(o,s.element),r.gutter=o}return E(s.element,s.size,Cf(O,0===t,t===c.length-1,v),t),t>0&&I.push(r),s}))).forEach((function(e){var t=e.element[ff]()[i];t<e.minSize&&(_?B(e):e.minSize=t)})),{setSizes:function(e){var t=M(e);t.forEach((function(e,i){if(i>0){var r=I[i-1],s=a[r.a],n=a[r.b];s.size=t[i-1],n.size=e,E(s.element,s.size,r[mf],s.i),E(n.element,n.size,r[_f],n.i)}}))},getSizes:P,collapse:function(e){B(a[e])},destroy:function(e,t){I.forEach((function(r){if(!0!==t?r.parent.removeChild(r.gutter):(r.gutter[pf]("mousedown",r[gf]),r.gutter[pf]("touchstart",r[gf])),!0!==e){var s=S(i,r.a.size,r[mf]);Object.keys(s).forEach((function(e){a[r.a].element.style[e]="",a[r.b].element.style[e]=""}))}}))},parent:l,pairs:I}};var Pf=Object.defineProperty,kf=Object.getOwnPropertyDescriptor;class Rf{mpyc;editor;term;demoSelect;hostPeerIDInput;chatInput;myPeerIDEl;knownPeersEl;resetPeerIDButton;runMPyCButton;stopMPyCButton;connectToPeerButton;sendMessageButton;clearTerminalButton;versionDiv;toggleStatsEl;qr;opts;constructor(e,t){this.mpyc=e,this.opts=t,this.demoSelect=r(t.demoSelectSelector),this.hostPeerIDInput=r(t.hostPeerIDInputSelector),this.chatInput=r(t.chatInputSelector),this.myPeerIDEl=r(t.myPeerIDSelector),this.knownPeersEl=r(t.peersDivSelector),this.resetPeerIDButton=r(t.resetPeerIDButtonSelector),this.runMPyCButton=r(t.runMPyCButtonSelector),this.stopMPyCButton=r(t.stopMPyCButtonSelector),this.connectToPeerButton=r(t.connectToPeerButtonSelector),this.sendMessageButton=r(t.sendMessageButtonSelector),this.clearTerminalButton=r(t.clearTerminalButtonSelector),this.toggleStatsEl=r(t.toggleStatsSelector),this.versionDiv=r(t.versionSelector),s('[data-bs-toggle="tooltip"]').forEach((e=>new lp(e,{trigger:"hover"}))),this.qr=new Wg(r(t.qrGenBtnSelector),r(t.qrScanBtnSelector),r(t.qrScanInputSelector),(()=>this.mpyc.transport.id())),this.qr.on("qr:scanned",(e=>{this.hostPeerIDInput.value=e,this.hostPeerIDInput.dispatchEvent(new Event("input"))})),this.qr.on("qr:error",(e=>{this.term.error(e.message)})),this.term=new e_(t.terminalSelector,e),this.editor=new Fg(t.editorSelector,this.demoSelect,e),this.init(e,t)}init(e,t){var i,r,s;this.term.info(`Initializing ${Xa.green("PeerJS")}...`),this.term.info(`Initializing ${Xa.green(e.runtime.type())} runtime...`),this.initHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",this.handleHostPeerIDInputEvent),this.setupMPyCEvents(e),this.setupButtonEvents(e,t),this.setupDemoSelector(),i=t.splitPanelSelectors,s=localStorage.getItem("split-sizes"),r=s?JSON.parse(s):[50,50],Ef(i,{sizes:r,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,gutterAlign:"start",onDragEnd:function(e){localStorage.setItem("split-sizes",JSON.stringify(e))}}),this.setupGlobals()}handleHostPeerIDInputEvent(){try{let e=new URL(this.hostPeerIDInput.value).searchParams.get("peer");e&&(this.hostPeerIDInput.value=e)}catch(e){}}setupMPyCEvents(e){addEventListener("error",(e=>{console.error(e),this.term.error(e.message)})),e.on("transport:ready",(async e=>{e=ec(e),this.myPeerIDEl.value=e,""==this.hostPeerIDInput.value&&(this.hostPeerIDInput.value=e,localStorage.hostPeerID=e),Hg("myPeerID",e),console.log("Peer ID: "+e),this.term.success(`${Xa.green("PeerJS")} ready with ID: ${Xa.peerID(e)}`),this.updatePeersDiv()})),e.on("transport:closed",(async()=>{this.term.error("PeerJS closed.")})),e.on("transport:error",(async e=>{this.term.warn(`PeerJS failed: ${e.message}`),console.warn(`PeerJS failed: ${e.message}\n${e.stack}`),"Lost connection to server."===e.message&&setTimeout((()=>{this.mpyc.transport.reconnect()}),1e3)})),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",(async e=>{this.term.error(e.error)})),e.on("runtime:messageerror",(async e=>{this.term.error(e.data)})),e.on("runtime:exec:done",(async()=>{this.updatePeersDiv()})),e.on("runtime:exec:init",(async()=>{this.updatePeersDiv()})),e.on("runtime:display",(async e=>{this.term.display(e)})),e.on("runtime:display:error",(async e=>{this.term.displayError(e)})),e.on("runtime:display:stats",(async e=>{this.term.live(e)})),e.on("runtime:ready",(async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${Xa.green(e.runtime.type())} runtime ready.`)}))}setupButtonEvents(e,t){if(Va)try{this.setupEruda()}catch(i){console.warn(i)}this.resetPeerIDButton.addEventListener("click",(async()=>{Vg("myPeerID"),this.term.writeln("Restarting PeerJS..."),e.resetTransport((()=>new $a))})),this.stopMPyCButton.addEventListener("click",(async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()})),this.runMPyCButton.addEventListener("click",(async t=>{this.term.scrollToBottom(),e.runMPC(this.editor.getCode(),this.demoSelect.value,t.ctrlKey||t.shiftKey),this.term.scrollToBottom()})),this.connectToPeerButton.addEventListener("click",(async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)})),this.sendMessageButton.addEventListener("click",(async()=>{this.sendChatMessage()})),this.clearTerminalButton.addEventListener("click",(async()=>{this.term.clear()})),this.setupStatsToggle(),this.chatInput.addEventListener("keypress",(async e=>{let t=e;if("Enter"===t.key&&!t.shiftKey)return t.preventDefault(),this.sendChatMessage()})),new Af(t.myPeerIDSelector,t.copyPeerIDButtonSelector)}setupStatsToggle(){this.toggleStatsEl.addEventListener("click",(async()=>{this.toggleStatsEl.checked?(Ka("showStats","true"),lp.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(Ka("showStats","false"),lp.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())}));const e=(t="showStats",localStorage[t]||sessionStorage[t]||i);var t,i;this.toggleStatsEl.checked="true"===e,this.toggleStatsEl.dispatchEvent(new Event("click"))}async setupEruda(){let e=(await Yt((()=>import("./eruda-ryTR8S5D.js").then((e=>e.e))),__vite__mapDeps([]),import.meta.url)).default,t=document.createElement("div");document.body.prepend(t),e.init({container:t,autoScale:!0,defaults:{theme:"dark"},tool:["console","elements","network","info","resources"]}),e.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}onPeerConnectedHook=async e=>{this.term.success(`Connected to: ${Xa.peerID(e)}`),this.updatePeersDiv()};async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach(((e,t)=>{let i=`\n        <span class="position-relative end-0">\n            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>\n        </span>`;this.knownPeersEl.innerHTML+=`\n        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> \n            <span class="" style="user-select:none">${t}: </span>\n            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${ec(e)}</span> \n            ${i}\n        </li>`}))}onPeerDisconnectedHook=async e=>{this.term.error(`Disconnected from: ${Xa.peerID(e)}`),this.updatePeersDiv()};onPeerConnectionErrorHook=async({peerID:e,err:t})=>{this.term.error(`Failed to connect to: ${Xa.peerID(e)}: ${t.message}`),this.updatePeersDiv()};setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),t=e=>{e.matches?(r("#mpc-demos").hidden=!0,r("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,r("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),r("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),r("#chatFooter").insertAdjacentElement("beforeend",r("#chatInputGroup"))):(r("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),r("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),r("#mpc-demos").hidden=!1,r("#connectedPartiesLabel").hidden=!1,r("#chatSidebar").insertAdjacentElement("beforeend",r("#chatInputGroup")),this.demoSelect.size=window.innerHeight/84)};e.addEventListener("change",t),t(e),this.demoSelect.addEventListener("change",(async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,this.updateDemoCode()})),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.updateDemoCode()}async updateDemoCode(){let e=await async function(e){var t;if(0==e.selectedIndex)t=localStorage.customCode||"";else{let i=await fetch(e.value);t=await i.text()}return t}(this.demoSelect);this.editor.updateCode(e)}initHostPeerIDInput(){var e=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return e&&(this.hostPeerIDInput.value=e,localStorage.hostPeerID=e),e}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}processChatMessage=async({peerID:e,data:t})=>{"user:chat"==t.type?this.term.chat(e,t.payload):console.warn("unknown message type",t)}}((e,t,i,r)=>{for(var s,n=r>1?void 0:r?kf(t,i):t,o=e.length-1;o>=0;o--)(s=e[o])&&(n=(r?s(t,i,n):s(n))||n);r&&n&&Pf(t,i,n)})([Ja()],Rf.prototype,"handleHostPeerIDInputEvent",1);class Af{contentSelector;buttonSelector;contentEl;buttonEl;constructor(e,t){this.contentSelector=e,this.buttonSelector=t,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(t),this.buttonEl.addEventListener("click",(()=>{let e=new URL("./",window.location.href);e.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(e.toString()).then((()=>{lp.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),r(`${this.buttonSelector}.btn-primary`).style.display="none",r(`${this.buttonSelector}.btn-success`).style.display="",setTimeout((()=>{r(`${this.buttonSelector}.btn-primary`).style.display="",r(`${this.buttonSelector}.btn-success`).style.display="none",lp.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})}),2e3)}),(function(e){console.error("Async: Could not copy text: ",e)}))}))}}var Lf={};class Mf{constructor(e,t,i,r,s,n,o,a,c,l=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=n,this.buffer=o,this.bufferBase=a,this.curContext=c,this.lookAhead=l,this.parent=h}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new Mf(e,[],t,i,i,0,[],0,r?new Ff(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=65535&e,{parser:s}=this.p,n=s.dynamicPrecedence(r);if(n&&(this.score+=n),0==i)return this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),void this.reduceContext(r,this.reducePos);let o=this.stack.length-3*(i-1)-(262144&e?6:0),a=o?this.stack[o-2]:this.p.ranges[0].from,c=this.reducePos-a;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=c));let l=o?this.stack[o-1]:0,h=this.bufferBase+this.buffer.length-l;if(r<s.minRepeatTerm||131072&e){let e=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,e,h+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=s.getGoto(e,r,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,i,r=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==i)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=i)}}if(s&&this.pos!=i){let s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}else this.buffer.push(e,t,i,r)}shift(e,t,i,r){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let s=e,{parser:n}=this.p;(r>this.pos||t<=n.maxNode)&&(this.pos=r,n.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=n.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){65536&e?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Mf(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new $f(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(0==(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let r,s=0;s<t.length;s+=2)(r=t[s+1])!=this.state&&this.p.parser.hasAction(r,e)&&i.push(t[s],r);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let r=t[e+1];i.some(((e,t)=>1&t&&e==r))||i.push(t[e],r)}t=i}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let e=t[r+1];if(e==this.state)continue;let s=this.split();s.pushState(e,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=65535&t,s=this.stack.length-3*i;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,s)=>{if(!t.includes(r))return t.push(r),e.allActions(r,(t=>{if(393216&t);else if(65536&t){let i=(t>>19)-s;if(i>1){let r=65535&t,s=this.stack.length-3*i;if(s>=0&&e.getGoto(this.stack[s],r,!1)>=0)return i<<19|65536|r}}else{let e=i(t,s+1);if(null!=e)return e}}))};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Ff(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Ff{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class $f{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class If{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new If(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new If(this.stack,this.pos,this.index)}}function Bf(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let r=0,s=0;r<e.length;){let n=0;for(;;){let t=e.charCodeAt(r++),i=!1;if(126==t){n=65535;break}t>=92&&t--,t>=34&&t--;let s=t-32;if(s>=46&&(s-=46,i=!0),n+=s,i)break;n*=46}i?i[s++]=n:i=new t(n)}return i}class Qf{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const jf=new Qf;class qf{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=jf,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let e=this.ranges[--r];s-=i.from-e.to,i=e}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];s+=e.from-i.to,i=e}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=jf,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Wf{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;!function(e,t,i,r,s,n){let o=0,a=1<<r,{dialect:c}=i.p.parser;e:for(;0!=(a&e[o]);){let i=e[o+1];for(let u=o+3;u<i;u+=2)if((e[u+1]&a)>0){let i=e[u];if(c.allows(i)&&(-1==t.token.value||t.token.value==i||zf(i,t.token.value,s,n))){t.acceptToken(i);break}}let r=t.next,l=0,h=e[o+2];if(!(t.next<0&&h>l&&65535==e[i+3*h-3])){for(;l<h;){let s=l+h>>1,n=i+s+(s<<1),a=e[n],c=e[n+1]||65536;if(r<a)h=s;else{if(!(r>=c)){o=e[n+2],t.advance();continue e}l=s+1}}break}o=e[i+3*h-1]}}(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Wf.prototype.contextual=Wf.prototype.fallback=Wf.prototype.extend=!1,Wf.prototype.fallback=Wf.prototype.extend=!1;class Nf{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Uf(e,t,i){for(let r,s=t;65535!=(r=e[s]);s++)if(r==i)return s-t;return-1}function zf(e,t,i,r){let s=Uf(i,r,t);return s<0||Uf(i,r,e)<s}const Xf="undefined"!=typeof process&&Lf&&/\bparse\b/.test(Lf.LOG);let Yf=null;function Vf(e,t,i){let r=e.cursor(d.IncludeAnonymous);for(r.moveTo(t);;)if(!(i<0?r.childBefore(t):r.childAfter(t)))for(;;){if((i<0?r.to<t:r.from>t)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:e.length}}class Hf{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Vf(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Vf(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],n=this.start[t]+i.positions[r];if(n>e)return this.nextStart=n,null;if(s instanceof u){if(n==e){if(n<this.safeFrom)return null;let e=n+s.length;if(e<=this.safeTo){let t=s.prop(h.lookAhead);if(!t||e+t<this.fragment.to)return s}}this.index[t]++,n+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(n),this.index.push(0))}else this.index[t]++,this.nextStart=n+s.length}}}class Gf{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new Qf))}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,n=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<s.length;c++){if(0==(1<<c&n))continue;let r=s[c],l=this.tokens[c];if((!i||r.fallback)&&((r.contextual||l.start!=e.pos||l.mask!=n||l.context!=o)&&(this.updateCachedToken(l,r,e),l.mask=n,l.context=o),l.lookAhead>l.end+25&&(a=Math.max(l.lookAhead,a)),0!=l.value)){let s=t;if(l.extended>-1&&(t=this.addActions(e,l.extended,l.end,t)),t=this.addActions(e,l.value,l.end,t),!r.extend&&(i=l,t>s))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||(i=new Qf,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Qf,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:t}=i.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let s=t.specializers[r](this.stream.read(e.start,e.end),i);if(s>=0&&i.p.parser.dialect.allows(s>>1)){0==(1&s)?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:n}=e.p,{data:o}=n;for(let a=0;a<2;a++)for(let e=n.stateSlot(s,a?2:1);;e+=3){if(65535==o[e]){if(1!=o[e+1]){0==r&&2==o[e+1]&&(r=this.putAction(ig(o,e+2),t,i,r));break}e=ig(o,e+2)}o[e]==t&&(r=this.putAction(ig(o,e+1),t,i,r))}return r}}class Zf{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new qf(t,r),this.tokens=new Gf(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[Mf.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>4*e.bufferLength?new Hf(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,r=this.minStackPos,s=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let n=0;n<i.length;n++){let o=i[n];for(;;){if(this.tokens.mainToken=null,o.pos>r)s.push(o);else{if(this.advanceStack(o,s,i))continue;{e||(e=[],t=[]),e.push(o);let i=this.tokens.getMainToken(o);t.push(i.value,i.end)}}break}}if(!s.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return Xf&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw Xf&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,s);if(i)return Xf&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(s.length>e)for(s.sort(((e,t)=>t.score-e.score));s.length>e;)s.pop();s.some((e=>e.reducePos>r))&&this.recovering--}else if(s.length>1){e:for(let e=0;e<s.length-1;e++){let t=s[e];for(let i=e+1;i<s.length;i++){let r=s[i];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){s.splice(e--,1);continue e}s.splice(i--,1)}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let n=1;n<s.length;n++)s[n].pos<this.minStackPos&&(this.minStackPos=s[n].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,n=Xf?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(r);o;){let r=this.parser.nodeSet.types[o.type.id]==o.type?s.getGoto(e.state,o.type.id):-1;if(r>-1&&o.length&&(!t||(o.prop(h.contextHash)||0)==i))return e.useNode(o,r),Xf&&console.log(n+this.stackID(e)+` (via reuse of ${s.getName(o.type.id)})`),!0;if(!(o instanceof u)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof u&&0==o.positions[0]))break;o=a}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),Xf&&console.log(n+this.stackID(e)+` (via always-reduce ${s.getName(65535&o)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let o=a[c++],l=a[c++],h=a[c++],u=c==a.length||!i,d=u?e:e.split(),p=this.tokens.mainToken;if(d.apply(o,l,p?p.start:d.pos,h),Xf&&console.log(n+this.stackID(d)+` (via ${0==(65536&o)?"shift":`reduce of ${s.getName(65535&o)}`} for ${s.getName(l)} @ ${r}${d==e?"":", split"})`),u)return!0;d.pos>r?t.push(d):i.push(d)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Jf(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let n=0;n<e.length;n++){let o=e[n],a=t[n<<1],c=t[1+(n<<1)],l=Xf?this.stackID(o)+" -> ":"";if(o.deadEnd){if(s)continue;if(s=!0,o.restart(),Xf&&console.log(l+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))continue}let h=o.split(),u=l;for(let e=0;h.forceReduce()&&e<10;e++){if(Xf&&console.log(u+this.stackID(h)+" (via force-reduce)"),this.advanceFully(h,i))break;Xf&&(u=this.stackID(h)+" -> ")}for(let e of o.recoverByInsert(a))Xf&&console.log(l+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>o.pos?(c==o.pos&&(c++,a=0),o.recoverByDelete(a,c),Xf&&console.log(l+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),Jf(o,i)):(!r||r.score<o.score)&&(r=o)}return r}stackToTree(e){return e.close(),u.build({buffer:If.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Yf||(Yf=new WeakMap)).get(e);return t||Yf.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Jf(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(r.pos==e.pos&&r.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class Kf{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const eg=e=>e;class tg extends o{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let o=0;o<t.length;o++)r.push([]);function s(e,t,i){r[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let o of e.nodeProps){let e=o[0];"string"==typeof e&&(e=h[e]);for(let t=1;t<o.length;){let i=o[t++];if(i>=0)s(i,e,o[t++]);else{let r=o[t+-i];for(let n=-i;n>0;n--)s(o[t++],e,r);t++}}}this.nodeSet=new a(t.map(((t,s)=>c.define({name:s>=this.minRepeatTerm?void 0:t,id:s,props:r[s],top:i.indexOf(s)>-1,error:0==s,skipped:e.skippedNodes&&e.skippedNodes.indexOf(s)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=l;let n=Bf(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(rg),this.states=Bf(e.states,Uint32Array),this.data=Bf(e.stateData),this.goto=Bf(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Wf(n,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Zf(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let t=r[s++],n=1&t,o=r[s++];if(n&&i)return o;for(let i=s+(t>>1);s<i;s++)if(r[s]==e)return o;if(n)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s,n=this.stateSlot(e,r?2:1);;n+=3){if(65535==(s=i[n])){if(1!=i[n+1]){if(2==i[n+1])return ig(i,n+2);break}s=i[n=ig(i,n+2)]}if(s==t||0==s)return ig(i,n+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let s=this.stateSlot(e,1);null==r;s+=3){if(65535==this.data[s]){if(1!=this.data[s+1])break;s=ig(this.data,s+2)}r=t(ig(this.data,s+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=ig(this.data,i+2)}if(0==(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(tg.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((i,r)=>{let s=e.specializers.find((e=>e.from==i.external));if(!s)return i;let n=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[r]=rg(n),n}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let s of e.split(" ")){let e=t.indexOf(s);e>=0&&(i[e]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let e,i=this.dialects[t[s]];65535!=(e=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[e]=1;return new Kf(e,i,r)}static deserialize(e){return new tg(e)}}function ig(e,t){return e[t]|e[t+1]<<16}function rg(e){if(e.external){let t=e.extend?1:0;return(i,r)=>e.external(i,r)<<1|t}return e.get}const sg=new Set([27,51,52,270,67,133,58,59,251,64,65,74,62,63,154,155,158,115]);function ng(e){return 10==e||13==e}const og=new Nf(((e,t)=>{let i;if(e.next<0)e.acceptToken(206);else if(t.context.depth<0)ng(e.next)&&e.acceptToken(205,1);else if(((i=e.peek(-1))<0||ng(i))&&t.canShift(204)){let t=0;for(;32==e.next||9==e.next;)e.advance(),t++;10!=e.next&&13!=e.next&&35!=e.next||e.acceptToken(204,-t)}else ng(e.next)&&e.acceptToken(203,1)}),{contextual:!0}),ag=new Nf(((e,t)=>{let i=t.context.depth;if(i<0)return;let r=e.peek(-1);if(10==r||13==r){let t=0,r=0;for(;;){if(32==e.next)t++;else{if(9!=e.next)break;t+=8-t%8}e.advance(),r++}t!=i&&10!=e.next&&13!=e.next&&35!=e.next&&(t<i?e.acceptToken(202,-r):e.acceptToken(201))}}));function cg(e,t){this.parent=e,this.depth=t,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)}const lg=new cg(null,0);const hg=new class{constructor(e){this.start=e.start,this.shift=e.shift||eg,this.reduce=e.reduce||eg,this.reuse=e.reuse||eg,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:lg,reduce:(e,t)=>e.depth<0&&sg.has(t)?e.parent:e,shift:(e,t,i,r)=>201==t?new cg(e,function(e){let t=0;for(let i=0;i<e.length;i++)t+=9==e.charCodeAt(i)?8-t%8:1;return t}(r.read(r.pos,i.pos))):202==t?e.parent:26==t||57==t||61==t?new cg(e,-1):e,hash:e=>e.hash}),ug=new Nf((e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let i=e.peek(t);if(32!=i&&9!=i)return void(40!=i&&46!=i&&10!=i&&13!=i&&35!=i&&e.acceptToken(1))}}));function dg(e,t,i,r,s){return new Nf((n=>{let o=n.pos;for(;!(n.next<0);)if(123==n.next){if(123!=n.peek(1)){if(n.pos==o)return void n.acceptToken(r,1);break}n.advance(2)}else if(92==n.next)n.advance(),n.next>=0&&n.advance();else{if(n.next==e&&(1==t||n.peek(1)==e&&n.peek(2)==e)){if(n.pos==o)return void n.acceptToken(s,t);break}n.advance()}n.pos>o&&n.acceptToken(i)}))}const pg=dg(39,1,207,2,208),fg=dg(34,1,209,3,210),gg=dg(39,3,211,4,212),mg=dg(34,3,213,5,214),_g=p({'async "*" "**" FormatConversion FormatSpec':f.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":f.controlKeyword,"in not and or is del":f.operatorKeyword,"from def class global nonlocal lambda":f.definitionKeyword,import:f.moduleKeyword,"with as print":f.keyword,Boolean:f.bool,None:f.null,VariableName:f.variableName,"CallExpression/VariableName":f.function(f.variableName),"FunctionDefinition/VariableName":f.function(f.definition(f.variableName)),"ClassDefinition/VariableName":f.definition(f.className),PropertyName:f.propertyName,"CallExpression/MemberExpression/PropertyName":f.function(f.propertyName),Comment:f.lineComment,Number:f.number,String:f.string,FormatString:f.special(f.string),UpdateOp:f.updateOperator,"ArithOp!":f.arithmeticOperator,BitOp:f.bitwiseOperator,CompareOp:f.compareOperator,AssignOp:f.definitionOperator,Ellipsis:f.punctuation,At:f.meta,"( )":f.paren,"[ ]":f.squareBracket,"{ }":f.brace,".":f.derefOperator,", ;":f.separator}),Og={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},vg=tg.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"⚠ print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:hg,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[_g],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[ug,ag,og,pg,fg,gg,mg,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:e=>Og[e]||-1}],tokenPrec:7372}),yg=new C,bg=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function wg(e){return(t,i,r)=>{if(r)return!1;let s=t.node.getChild("VariableName");return s&&i(s,e),!0}}const Dg={FunctionDefinition:wg("function"),ClassDefinition:wg("class"),ForStatement(e,t,i){if(i)for(let r=e.node.firstChild;r;r=r.nextSibling)if("VariableName"==r.name)t(r,"variable");else if("in"==r.name)break},ImportStatement(e,t){var i,r;let{node:s}=e,n="from"==(null===(i=s.firstChild)||void 0===i?void 0:i.name);for(let o=s.getChild("import");o;o=o.nextSibling)"VariableName"==o.name&&"as"!=(null===(r=o.nextSibling)||void 0===r?void 0:r.name)&&t(o,n?"variable":"namespace")},AssignStatement(e,t){for(let i=e.node.firstChild;i;i=i.nextSibling)if("VariableName"==i.name)t(i,"variable");else if(":"==i.name||"AssignOp"==i.name)break},ParamList(e,t){for(let i=null,r=e.node.firstChild;r;r=r.nextSibling)"VariableName"!=r.name||i&&/\*|AssignOp/.test(i.name)||t(r,"variable"),i=r},CapturePattern:wg("variable"),AsPattern:wg("variable"),__proto__:null};function Cg(e,t){let i=yg.get(t);if(i)return i;let r=[],s=!0;function n(t,i){let s=e.sliceString(t.from,t.to);r.push({label:s,type:i})}return t.cursor(d.IncludeAnonymous).iterate((t=>{if(t.name){let e=Dg[t.name];if(e&&e(t,n,s)||!s&&bg.has(t.name))return!1;s=!1}else if(t.to-t.from>8192){for(let i of Cg(e,t.node))r.push(i);return!1}})),yg.set(t,r),r}const xg=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,Sg=["String","FormatString","Comment","PropertyName"];function Tg(e){let t=m(e.state).resolveInner(e.pos,-1);if(Sg.indexOf(t.name)>-1)return null;let i="VariableName"==t.name||t.to-t.from<20&&xg.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let r=[];for(let s=t;s;s=s.parent)bg.has(s.name)&&(r=r.concat(Cg(e.state.doc,s)));return{options:r,from:i?t.from:e.pos,validFor:xg}}const Eg=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map((e=>({label:e,type:"constant"}))).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map((e=>({label:e,type:"type"})))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map((e=>({label:e,type:"class"})))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map((e=>({label:e,type:"function"})))),Pg=[x("def ${name}(${params}):\n\t${}",{label:"def",detail:"function",type:"keyword"}),x("for ${name} in ${collection}:\n\t${}",{label:"for",detail:"loop",type:"keyword"}),x("while ${}:\n\t${}",{label:"while",detail:"loop",type:"keyword"}),x("try:\n\t${}\nexcept ${error}:\n\t${}",{label:"try",detail:"/ except block",type:"keyword"}),x("if ${}:\n\t\n",{label:"if",detail:"block",type:"keyword"}),x("if ${}:\n\t${}\nelse:\n\t${}",{label:"if",detail:"/ else block",type:"keyword"}),x("class ${name}:\n\tdef __init__(self, ${params}):\n\t\t\t${}",{label:"class",detail:"definition",type:"keyword"}),x("import ${module}",{label:"import",detail:"statement",type:"keyword"}),x("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],kg=_(Sg,D(Eg.concat(Pg)));function Rg(e,t){let i=e.baseIndentFor(t),r=e.lineAt(e.pos,-1),s=r.from+r.text.length;return/^\s*($|#)/.test(r.text)&&e.node.to<s+100&&!/\S/.test(e.state.sliceDoc(s,e.node.to))&&e.lineIndent(e.pos,-1)<=i||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>i?null:i+e.unit}const Ag=O.define({name:"python",parser:vg.configure({props:[v.add({Body:e=>{var t;return null!==(t=Rg(e,e.node))&&void 0!==t?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":y({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":y({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":y({closing:"]"}),"String FormatString":()=>null,Script:e=>{if(e.pos+/\s*/.exec(e.textAfter)[0].length>=e.node.to){let t=null;for(let i=e.node,r=i.to;i=i.lastChild,i&&i.to==r;)"Body"==i.type.name&&(t=i);if(t){let i=Rg(e,t);if(null!=i)return i}}return e.continue()}}),b.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":w,Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});const Lg=({variant:e,settings:t,styles:i})=>{const r=S.theme({"&":{backgroundColor:t.background,color:t.foreground},".cm-content":{caretColor:t.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:t.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t.selection},".cm-activeLine":{backgroundColor:t.lineHighlight},".cm-gutters":{backgroundColor:t.gutterBackground,color:t.gutterForeground},".cm-activeLineGutter":{backgroundColor:t.lineHighlight}},{dark:"dark"===e}),s=T.define(i);return[r,E(s)]};Lg({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:f.comment,color:"#404080"},{tag:[f.string,f.regexp],color:"#999999"},{tag:f.number,color:"#7090B0"},{tag:[f.bool,f.null],color:"#8080A0"},{tag:[f.punctuation,f.derefOperator],color:"#805080"},{tag:f.keyword,color:"#60B0FF"},{tag:f.definitionKeyword,color:"#B0FFF0"},{tag:f.moduleKeyword,color:"#60B0FF"},{tag:f.operator,color:"#A0A0FF"},{tag:[f.variableName,f.self],color:"#008080"},{tag:f.operatorKeyword,color:"#A0A0FF"},{tag:f.controlKeyword,color:"#80A0FF"},{tag:f.className,color:"#70E080"},{tag:[f.function(f.propertyName),f.propertyName],color:"#50A0A0"},{tag:f.tagName,color:"#009090"},{tag:f.modifier,color:"#B0FFF0"},{tag:[f.squareBracket,f.attributeName],color:"#D0D0FF"}]}),Lg({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:f.comment,color:"#787b8099"},{tag:f.string,color:"#86b300"},{tag:f.regexp,color:"#4cbf99"},{tag:[f.number,f.bool,f.null],color:"#ffaa33"},{tag:f.variableName,color:"#5c6166"},{tag:[f.definitionKeyword,f.modifier],color:"#fa8d3e"},{tag:[f.keyword,f.special(f.brace)],color:"#fa8d3e"},{tag:f.operator,color:"#ed9366"},{tag:f.separator,color:"#5c6166b3"},{tag:f.punctuation,color:"#5c6166"},{tag:[f.definition(f.propertyName),f.function(f.variableName)],color:"#f2ae49"},{tag:[f.className,f.definition(f.typeName)],color:"#22a4e6"},{tag:[f.tagName,f.typeName,f.self,f.labelName],color:"#55b4d4"},{tag:f.angleBracket,color:"#55b4d480"},{tag:f.attributeName,color:"#f2ae49"}]}),Lg({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:f.comment,color:"#6E6E6E"},{tag:[f.string,f.regexp,f.special(f.brace)],color:"#5C81B3"},{tag:f.number,color:"#C1E1B8"},{tag:f.bool,color:"#53667D"},{tag:[f.definitionKeyword,f.modifier,f.function(f.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[f.keyword,f.moduleKeyword,f.operatorKeyword,f.operator],color:"#697A8E",fontWeight:"bold"},{tag:[f.variableName,f.attributeName],color:"#708E67"},{tag:[f.function(f.variableName),f.definition(f.propertyName),f.derefOperator],color:"#fff"},{tag:f.tagName,color:"#A3D295"}]}),Lg({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:f.comment,color:"#666666"},{tag:[f.string,f.special(f.brace)],color:"#54BE0D"},{tag:f.regexp,color:"#E9C062"},{tag:f.number,color:"#CF6A4C"},{tag:[f.keyword,f.operator],color:"#5EA6EA"},{tag:f.variableName,color:"#7587A6"},{tag:[f.definitionKeyword,f.modifier],color:"#F9EE98"},{tag:[f.propertyName,f.function(f.variableName)],color:"#937121"},{tag:[f.typeName,f.angleBracket,f.tagName],color:"#9B859D"}]});const Mg=Lg({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:f.comment,color:"#6B4E32"},{tag:[f.keyword,f.operator,f.derefOperator],color:"#EF5D32"},{tag:f.className,color:"#EFAC32",fontWeight:"bold"},{tag:[f.typeName,f.propertyName,f.function(f.variableName),f.definition(f.variableName)],color:"#EFAC32"},{tag:f.definition(f.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:f.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[f.number,f.bool],color:"#6C99BB"},{tag:[f.variableName,f.self],color:"#7DAF9C"},{tag:[f.string,f.special(f.brace),f.regexp],color:"#D9D762"},{tag:[f.angleBracket,f.tagName,f.attributeName],color:"#EFCB43"}]});Lg({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:f.comment,color:"#404040"},{tag:[f.string,f.special(f.brace),f.regexp],color:"#00D8FF"},{tag:f.number,color:"#E62286"},{tag:[f.variableName,f.attributeName,f.self],color:"#E62286",fontWeight:"bold"},{tag:f.function(f.variableName),color:"#fff",fontWeight:"bold"}]}),Lg({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:f.comment,color:"#BCC8BA"},{tag:[f.string,f.special(f.brace),f.regexp],color:"#5D90CD"},{tag:[f.number,f.bool,f.null],color:"#46A609"},{tag:f.keyword,color:"#AF956F"},{tag:[f.definitionKeyword,f.modifier],color:"#C52727"},{tag:[f.angleBracket,f.tagName,f.attributeName],color:"#606060"},{tag:f.self,color:"#000"}]}),Lg({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:f.comment,color:"#0088FF"},{tag:f.string,color:"#3AD900"},{tag:f.regexp,color:"#80FFC2"},{tag:[f.number,f.bool,f.null],color:"#FF628C"},{tag:[f.definitionKeyword,f.modifier],color:"#FFEE80"},{tag:f.variableName,color:"#CCCCCC"},{tag:f.self,color:"#FF80E1"},{tag:[f.className,f.definition(f.propertyName),f.function(f.variableName),f.definition(f.typeName),f.labelName],color:"#FFDD00"},{tag:[f.keyword,f.operator],color:"#FF9D00"},{tag:[f.propertyName,f.typeName],color:"#80FFBB"},{tag:f.special(f.brace),color:"#EDEF7D"},{tag:f.attributeName,color:"#9EFFFF"},{tag:f.derefOperator,color:"#fff"}]}),Lg({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:f.comment,color:"#AEAEAE"},{tag:[f.string,f.special(f.brace),f.regexp],color:"#8DFF8E"},{tag:[f.className,f.definition(f.propertyName),f.function(f.variableName),f.function(f.definition(f.variableName)),f.definition(f.typeName)],color:"#A3EBFF"},{tag:[f.number,f.bool,f.null],color:"#62E9BD"},{tag:[f.keyword,f.operator],color:"#2BF1DC"},{tag:[f.definitionKeyword,f.modifier],color:"#F8FBB1"},{tag:[f.variableName,f.self],color:"#B683CA"},{tag:[f.angleBracket,f.tagName,f.typeName,f.propertyName],color:"#60A4F1"},{tag:f.derefOperator,color:"#E0E0E0"},{tag:f.attributeName,color:"#7BACCA"}]}),Lg({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:f.comment,color:"#6272a4"},{tag:[f.string,f.special(f.brace)],color:"#f1fa8c"},{tag:[f.number,f.self,f.bool,f.null],color:"#bd93f9"},{tag:[f.keyword,f.operator],color:"#ff79c6"},{tag:[f.definitionKeyword,f.typeName],color:"#8be9fd"},{tag:f.definition(f.typeName),color:"#f8f8f2"},{tag:[f.className,f.definition(f.propertyName),f.function(f.variableName),f.attributeName],color:"#50fa7b"}]}),Lg({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:f.comment,color:"#AAAAAA"},{tag:[f.keyword,f.operator,f.typeName,f.tagName,f.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[f.attributeName,f.definition(f.propertyName)],color:"#4F9FD0"},{tag:[f.className,f.string,f.special(f.brace)],color:"#CF4F5F"},{tag:f.number,color:"#CF4F5F",fontWeight:"bold"},{tag:f.variableName,fontWeight:"bold"}]}),Lg({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:f.comment,color:"#9995b7"},{tag:f.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[f.definitionKeyword,f.modifier],color:"#ff5792"},{tag:[f.className,f.tagName,f.definition(f.typeName)],color:"#0094f0"},{tag:[f.number,f.bool,f.null,f.special(f.brace)],color:"#5842ff"},{tag:[f.definition(f.propertyName),f.function(f.variableName)],color:"#0095a8"},{tag:f.typeName,color:"#b3694d"},{tag:[f.propertyName,f.variableName],color:"#fa8900"},{tag:f.operator,color:"#ff5792"},{tag:f.self,color:"#e64100"},{tag:[f.string,f.regexp],color:"#00b368"},{tag:[f.paren,f.bracket],color:"#0431fa"},{tag:f.labelName,color:"#00bdd6"},{tag:f.attributeName,color:"#e64100"},{tag:f.angleBracket,color:"#9995b7"}]}),Lg({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:f.comment,color:"#9893a5"},{tag:[f.bool,f.null],color:"#286983"},{tag:f.number,color:"#d7827e"},{tag:f.className,color:"#d7827e"},{tag:[f.angleBracket,f.tagName,f.typeName],color:"#56949f"},{tag:f.attributeName,color:"#907aa9"},{tag:f.punctuation,color:"#797593"},{tag:[f.keyword,f.modifier],color:"#286983"},{tag:[f.string,f.regexp],color:"#ea9d34"},{tag:f.variableName,color:"#d7827e"}]}),Lg({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:f.comment,color:"#CFCFCF"},{tag:[f.number,f.bool,f.null],color:"#E66C29"},{tag:[f.className,f.definition(f.propertyName),f.function(f.variableName),f.labelName,f.definition(f.typeName)],color:"#2EB43B"},{tag:f.keyword,color:"#D8B229"},{tag:f.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[f.definitionKeyword,f.modifier],color:"#925A47"},{tag:f.string,color:"#704D3D"},{tag:f.typeName,color:"#2F8996"},{tag:[f.variableName,f.propertyName],color:"#77ACB0"},{tag:f.self,color:"#77ACB0",fontWeight:"bold"},{tag:f.regexp,color:"#E3965E"},{tag:[f.tagName,f.angleBracket],color:"#BAA827"},{tag:f.attributeName,color:"#B06520"},{tag:f.derefOperator,color:"#000"}]}),Lg({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:f.comment,color:"#93A1A1"},{tag:f.string,color:"#2AA198"},{tag:f.regexp,color:"#D30102"},{tag:f.number,color:"#D33682"},{tag:f.variableName,color:"#268BD2"},{tag:[f.keyword,f.operator,f.punctuation],color:"#859900"},{tag:[f.definitionKeyword,f.modifier],color:"#073642",fontWeight:"bold"},{tag:[f.className,f.self,f.definition(f.propertyName)],color:"#268BD2"},{tag:f.function(f.variableName),color:"#268BD2"},{tag:[f.bool,f.null],color:"#B58900"},{tag:f.tagName,color:"#268BD2",fontWeight:"bold"},{tag:f.angleBracket,color:"#93A1A1"},{tag:f.attributeName,color:"#93A1A1"},{tag:f.typeName,color:"#859900"}]}),Lg({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:f.comment,color:"#8E908C"},{tag:[f.variableName,f.self,f.propertyName,f.attributeName,f.regexp],color:"#C82829"},{tag:[f.number,f.bool,f.null],color:"#F5871F"},{tag:[f.className,f.typeName,f.definition(f.typeName)],color:"#C99E00"},{tag:[f.string,f.special(f.brace)],color:"#718C00"},{tag:f.operator,color:"#3E999F"},{tag:[f.definition(f.propertyName),f.function(f.variableName)],color:"#4271AE"},{tag:f.keyword,color:"#8959A8"},{tag:f.derefOperator,color:"#4D4D4C"}]});class Fg extends S{constructor(e,t,i){super({extensions:[P.of("    "),S.contentAttributes.of({spellcheck:"false",autocapitalize:"none",autocorrect:"off","data-gramm":"false"}),k,new g(Ag,[Ag.data.of({autocomplete:Tg}),Ag.data.of({autocomplete:kg})]),R.of([...A,L]),M.highest(R.of([{key:"Ctrl-Enter",run:()=>(i.runMPC(this.getCode(),t.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(i.runMPC(this.getCode(),t.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),0!=t.selectedIndex&&(t.selectedIndex=0,t.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:F,preventDefault:!0},{key:"Ctrl-d",run:$,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:I,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:B,preventDefault:!0},{key:"Ctrl-y",run:Q,preventDefault:!0}])),Mg],parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}const $g="qr-canvas",Ig="qr-url-span",Bg=`canvas.${$g}`,Qg=`div.tooltip-inner>img.${$g}`,jg=`div.tooltip-inner>span.${Ig}`,qg="div.tooltip-inner";class Wg extends he{scanInput;showBtn;showBtnTooltip;showBtnTooltipEl;scanBtn;peerIDGetter;scanner;scanModal;scanModalDiv;closeScanModalBtn;canvas;constructor(e,t,i,s){super(),this.showBtn=e,this.scanBtn=t,this.scanInput=i,this.peerIDGetter=s,document.body.insertAdjacentHTML("beforeend",this.modalHTML),document.body.insertAdjacentHTML("beforeend",this.canvasHTML),this.canvas=r(Bg),this.closeScanModalBtn=r("#closeQRCodeScannerButton"),this.scanModalDiv=r("#qrScannerModal"),this.scanModal=new Sd(this.scanModalDiv),this.setupGenerator(),this.setupScanner()}setupGenerator(){this.showBtnTooltip=new lp(this.showBtn,{html:!0,placement:"bottom",trigger:"click hover focus",allowList:{...lp.Default.allowList,span:["style"],img:[]},title:`\n            <img class="${$g}"></img>\n            <br />\n            <span class="${Ig}" style='font-size: 10px !important;'></span>\n        `}),this.showBtnTooltipEl=r(qg),this.showBtn.addEventListener("shown.bs.tooltip",(()=>{let e=this.peerIDGetter(),t=new URL("./",window.location.href),i=`${t}?peer=${e}`,s=`${t}?peer=<br/>${e}`;n.toDataURL(this.canvas,i,{errorCorrectionLevel:"H"}).then((e=>{r(Qg).src=e,r(jg).innerHTML=ec(s)})).catch((e=>{}))})),document.addEventListener("click",(e=>{this.showBtn.matches(":hover")||r(qg)?.matches(":hover")||this.showBtnTooltip.hide()})),this.showBtn.addEventListener("click",(async()=>{this.canvas.toBlob((e=>{try{navigator.clipboard.write([new ClipboardItem({[e.type]:e})])}catch(t){console.warn("Copying images to the clipboard is not supported in this browser - https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write#browser_compatibility")}}))}))}setupScanner=()=>{this.scanner=new j("qrScannerEl",{formatsToSupport:[q.QR_CODE],verbose:!1}),this.scanModalDiv.addEventListener("hidden.bs.modal",(async()=>{this.scanner.isScanning&&this.scanner.stop()})),this.closeScanModalBtn.addEventListener("click",(async()=>{this.closeScanner()})),this.scanInput.addEventListener("change",(e=>{if(null==e||null==e.target)return;let t=e.target;if(t.files&&0===t.files.length)return;const i=t.files[0];this.scanner.scanFileV2(i,!0).then((e=>{this.emit("qr:scanned",e.decodedText)})).catch((e=>{this.emit("qr:error",e)}))})),this.scanBtn.addEventListener("click",(async()=>{if(!(await Ga()))return void this.scanInput.click();this.scanner.start({facingMode:"environment"},{fps:10,qrbox:{width:150,height:150}},((e,t)=>{this.emit("qr:scanned",e),this.closeScanner()}),void 0),this.scanModal.show()}))};closeScanner(){this.scanner.stop(),this.scanModal.hide()}canvasHTML=`\n        <canvas hidden class="${$g}"></canvas>\n    `;modalHTML='\n    <div class="modal fade" id="qrScannerModal" tabindex="-1" aria-labelledby="qrScannerModalLabel" aria-hidden="true">\n      <div class="modal-dialog modal-fullscreen-sm-down">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h1 class="modal-title fs-5" id="qrScannerModalLabel">QR Code scanner</h1>\n            <button type="button" id="closeQRCodeScannerButton" class="btn-close" data-bs-dismiss="modal"\n              aria-label="Close"></button>\n          </div>\n          <div class="modal-body">\n            <div id="qrScannerEl"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}var Ng=Object.defineProperty,Ug=Object.getOwnPropertyDescriptor,zg=(e,t,i,r)=>{for(var s,n=r>1?void 0:r?Ug(t,i):t,o=e.length-1;o>=0;o--)(s=e[o])&&(n=(r?s(t,i,n):s(n))||n);return r&&n&&Ng(t,i,n),n};function Xg(e,t){return localStorage[`tabState:${t}:${e}`]||""}function Yg(e,t=Zg.loadTabID()){return Xg(e,t)}function Vg(e,t=Jg){delete localStorage[`tabState:${t}:${e}`]}function Hg(e,t,i=Jg){localStorage[`tabState:${i}:${e}`]=t}class Gg{constructor(){}isTabDuplicate(){addEventListener("beforeunload",(function(){delete sessionStorage.__lock}));let e=!1;return sessionStorage.__lock&&(console.warn("sessionStorage.__lock set, likely a duplicate tab"),e=!0),sessionStorage.__lock=1,e}selectTabID(){for(let e=1;e<=1e3;e++)if(""==Yg("lock",e))return e}loadTabID(){let e=-1,t=this.isTabDuplicate();return console.warn("sessionStorage.tabID",sessionStorage.tabID,"isTabDuplicate",t,"getTabState",Xg("lock",sessionStorage.tabID)),!sessionStorage.tabID||t||""!=Yg("lock",sessionStorage.tabID)?(console.warn("tab is duplicate",!sessionStorage.tabID,t,sessionStorage.tabID?Xg("lock",sessionStorage.tabID):""),e=this.selectTabID()):e=parseInt(sessionStorage.tabID),Hg("lock","locked",e),sessionStorage.tabID=e,addEventListener("beforeunload",(function(){console.warn("beforeunload, deleting lock on tabID",Jg),console.warn(JSON.stringify(localStorage)),console.warn(JSON.stringify(sessionStorage)),Vg("lock",Jg),console.warn(JSON.stringify(localStorage)),console.warn(JSON.stringify(sessionStorage))})),e}}zg([Za],Gg.prototype,"isTabDuplicate",1),zg([Za],Gg.prototype,"loadTabID",1);let Zg=new Gg;const Jg=Zg.loadTabID();console.warn("tabID",Jg);class Kg{terminal;element;core;viewport;activate(e){this.terminal=e,this.terminal.element.parentElement.classList.add("xterm-wrapper"),this.core=e._core,this.createElement()}createElement(){let e=document.createElement("div");e.classList.add("xterm-screen-wrapper");let t=this.core.screenElement;t.insertAdjacentElement("beforebegin",e),e.insertAdjacentElement("beforeend",t)}dispose(){}}var em={exports:{}};self;var tm,im=em.exports=(()=>(()=>{var e={903:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;const r=i(274),s=i(627),n=i(237),o=i(860),a=i(374),c=i(296),l=i(345),h=i(859),u=i(399),d=i(855);class p extends h.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var e;return null===(e=this._charAtlas)||void 0===e?void 0:e.pages[0].canvas}constructor(e,t,i,s,n,o,a,u,d,p){super(),this._terminal=e,this._container=t,this._alpha=n,this._themeService=o,this._bufferService=a,this._optionsService=u,this._decorationService=d,this._coreBrowserService=p,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,c.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new h.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new r.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=s.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors((e=>{this._refreshCharAtlas(e),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}))),this.register((0,h.toDisposable)((()=>{this._canvas.remove()})))}_initCanvas(){this._ctx=(0,a.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(e,t){}handleSelectionChanged(e,t,i=!1){this._selectionModel.update(this._terminal,e,t,i)}_setTransparency(e){if(e===this._alpha)return;const t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(e){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,e,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,l.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let e=0;e<this._charAtlas.pages.length;e++)this._bitmapGenerator[e]=new f(this._charAtlas.pages[e].canvas)}}resize(e){this._deviceCellWidth=e.device.cell.width,this._deviceCellHeight=e.device.cell.height,this._deviceCharWidth=e.device.char.width,this._deviceCharHeight=e.device.char.height,this._deviceCharLeft=e.device.char.left,this._deviceCharTop=e.device.char.top,this._canvas.width=e.device.canvas.width,this._canvas.height=e.device.canvas.height,this._canvas.style.width=`${e.css.canvas.width}px`,this._canvas.style.height=`${e.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var e;null===(e=this._charAtlas)||void 0===e||e.clearTexture()}_fillCells(e,t,i,r){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight)}_fillMiddleLineAtCells(e,t,i=1){const r=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight-r-this._coreBrowserService.dpr,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(e,t,i=1,r=0){this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight+r-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(e,t,i=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const r=this._coreBrowserService.dpr;this._ctx.lineWidth=r;for(let s=0;s<i;s++){const i=(e+s)*this._deviceCellWidth,n=(e+s+.5)*this._deviceCellWidth,o=(e+s+1)*this._deviceCellWidth,a=(t+1)*this._deviceCellHeight-r-1,c=a-r,l=a+r;this._ctx.moveTo(i,a),this._ctx.bezierCurveTo(i,c,n,c,n,a),this._ctx.bezierCurveTo(n,l,o,l,o,a)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(e,t,i=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([2*r,r]);const s=e*this._deviceCellWidth,n=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(s,n);for(let o=0;o<i;o++){const t=(e+i+o)*this._deviceCellWidth;this._ctx.lineTo(t,n)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(e,t,i=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([4*r,3*r]);const s=e*this._deviceCellWidth,n=(e+i)*this._deviceCellWidth,o=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(s,o),this._ctx.lineTo(n,o),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(e,t,i){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,this._coreBrowserService.dpr*i,this._deviceCellHeight)}_strokeRectAtCell(e,t,i,r){const s=this._coreBrowserService.dpr;this._ctx.lineWidth=s,this._ctx.strokeRect(e*this._deviceCellWidth+s/2,t*this._deviceCellHeight+s/2,i*this._deviceCellWidth-s,r*this._deviceCellHeight-s)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(e,t,i,r){this._alpha?this._ctx.clearRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight))}_fillCharTrueColor(e,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=n.TEXT_BASELINE,this._clipRow(i);let r=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(r=(0,o.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._deviceCellWidth,i*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),r||this._ctx.fillText(e.getChars(),t*this._deviceCellWidth+this._deviceCharLeft,i*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(e,t,i){var r,s,n,o;const a=e.getChars();if(this._cellColorResolver.resolve(e,t,this._bufferService.buffer.ydisp+i),!this._charAtlas)return;let c;c=a&&a.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(a,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(e.getCode()||d.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),c.size.x&&c.size.y&&(this._ctx.save(),this._clipRow(i),this._bitmapGenerator[c.texturePage]&&this._charAtlas.pages[c.texturePage].canvas!==this._bitmapGenerator[c.texturePage].canvas&&(null===(s=null===(r=this._bitmapGenerator[c.texturePage])||void 0===r?void 0:r.bitmap)||void 0===s||s.close(),delete this._bitmapGenerator[c.texturePage]),this._charAtlas.pages[c.texturePage].version!==(null===(n=this._bitmapGenerator[c.texturePage])||void 0===n?void 0:n.version)&&(this._bitmapGenerator[c.texturePage]||(this._bitmapGenerator[c.texturePage]=new f(this._charAtlas.pages[c.texturePage].canvas)),this._bitmapGenerator[c.texturePage].refresh(),this._bitmapGenerator[c.texturePage].version=this._charAtlas.pages[c.texturePage].version),this._ctx.drawImage((null===(o=this._bitmapGenerator[c.texturePage])||void 0===o?void 0:o.bitmap)||this._charAtlas.pages[c.texturePage].canvas,c.texturePosition.x,c.texturePosition.y,c.size.x,c.size.y,t*this._deviceCellWidth+this._deviceCharLeft-c.offset.x,i*this._deviceCellHeight+this._deviceCharTop-c.offset.y,c.size.x,c.size.y),this._ctx.restore())}_clipRow(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(e,t){return`${t?"italic":""} ${e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}t.BaseRenderLayer=p;class f{get bitmap(){return this._bitmap}constructor(e){this.canvas=e,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var e;null===(e=this._bitmap)||void 0===e||e.close(),this._bitmap=void 0,u.isSafari||(void 0===this._commitTimeout&&(this._commitTimeout=window.setTimeout((()=>this._generate()),100)),1===this._state&&(this._state=2))}_generate(){var e;0===this._state&&(null===(e=this._bitmap)||void 0===e||e.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then((e=>{2===this._state?this.refresh():this._bitmap=e,this._state=0})),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;const r=i(627),s=i(56),n=i(374),o=i(345),a=i(859),c=i(873),l=i(43),h=i(630),u=i(744);class d extends a.Disposable{constructor(e,t,i,d,p,f,g,m,_,O,v){super(),this._terminal=e,this._screenElement=t,this._bufferService=d,this._charSizeService=p,this._optionsService=f,this._coreBrowserService=_,this._themeService=v,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const y=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new u.TextRenderLayer(this._terminal,this._screenElement,0,y,this._bufferService,this._optionsService,g,O,this._coreBrowserService,v),new h.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,O,this._optionsService,v),new l.LinkRenderLayer(this._terminal,this._screenElement,2,i,this._bufferService,this._optionsService,O,this._coreBrowserService,v),new c.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,m,this._coreBrowserService,O,v)];for(const r of this._renderLayers)(0,o.forwardEvent)(r.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,n.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,s.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,((e,t)=>this._setCanvasDevicePixelDimensions(e,t)))),this.register((0,a.toDisposable)((()=>{for(const e of this._renderLayers)e.dispose();(0,r.removeTerminalFromCache)(this._terminal)})))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(e,t){this._updateDimensions();for(const i of this._renderLayers)i.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation((e=>e.handleBlur()))}handleFocus(){this._runOperation((e=>e.handleFocus()))}handleSelectionChanged(e,t,i=!1){this._runOperation((r=>r.handleSelectionChanged(e,t,i))),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation((e=>e.handleCursorMove()))}clear(){this._runOperation((e=>e.reset()))}_runOperation(e){for(const t of this._renderLayers)e(t)}renderRows(e,t){for(const i of this._renderLayers)i.handleGridChanged(e,t)}clearTextureAtlas(){for(const e of this._renderLayers)e.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*e),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(e,t){this.dimensions.device.canvas.height=t,this.dimensions.device.canvas.width=e;for(const i of this._renderLayers)i.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}t.CanvasRenderer=d},873:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;const r=i(457),s=i(859),n=i(399),o=i(782),a=i(903);class c extends a.BaseRenderLayer{constructor(e,t,i,r,n,a,c,l,h,u){super(e,t,"cursor",i,!0,u,n,a,h,l),this._onRequestRedraw=r,this._coreService=c,this._cursorBlinkStateManager=this.register(new s.MutableDisposable),this._cell=new o.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(a.onOptionChange((()=>this._handleOptionsChanged()))),this._handleOptionsChanged()}resize(e){super.resize(e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var e;null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var e;null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new r.CursorBlinkStateManager((()=>this._render(!0)),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var e;null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.restartBlinkAnimation()}handleGridChanged(e,t){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(e){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=t-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)return void this._clearCursor();const r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(r,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const e=this._optionsService.rawOptions.cursorStyle,t=this._optionsService.rawOptions.cursorInactiveStyle;return t&&"none"!==t&&this._cursorRenderers[t](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=e,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(n.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(e,t,i.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(i,e,t),this._ctx.restore()}_renderUnderlineCursor(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()}_renderOutlineCursor(e,t,i){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(e,t,i.getWidth(),1),this._ctx.restore()}}t.CursorRenderLayer=c},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0,t.GridCache=class{constructor(){this.cache=[]}resize(e,t){for(let i=0;i<e;i++){this.cache.length<=i&&this.cache.push([]);for(let e=this.cache[i].length;e<t;e++)this.cache[i].push(void 0);this.cache[i].length=t}this.cache.length=e}clear(){for(let e=0;e<this.cache.length;e++)for(let t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0}}},43:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;const r=i(197),s=i(237),n=i(903);class o extends n.BaseRenderLayer{constructor(e,t,i,r,s,n,o,a,c){super(e,t,"link",i,!0,c,s,n,o,a),this.register(r.onShowLinkUnderline((e=>this._handleShowLinkUnderline(e)))),this.register(r.onHideLinkUnderline((e=>this._handleHideLinkUnderline(e))))}resize(e){super.resize(e),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(e){if(e.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:e.fg&&(0,r.is256Color)(e.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[e.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(let t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e}_handleHideLinkUnderline(e){this._clearCurrentLink()}}t.LinkRenderLayer=o},630:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;const r=i(903);class s extends r.BaseRenderLayer{constructor(e,t,i,r,s,n,o,a){super(e,t,"selection",i,!0,a,r,o,n,s),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(e){super.resize(e),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(e,t,i){super.handleSelectionChanged(e,t,i),this._redrawSelection(e,t,i)}_redrawSelection(e,t,i){if(!this._didStateChange(e,t,i,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!e||!t)return void this._clearState();const r=e[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,n=Math.max(r,0),o=Math.min(s,this._bufferService.rows-1);if(n>=this._bufferService.rows||o<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,i){const i=e[0],r=t[0]-i,s=o-n+1;this._fillCells(i,n,r,s)}else{const i=r===n?e[0]:0,a=n===s?t[0]:this._bufferService.cols;this._fillCells(i,n,a-i,1);const c=Math.max(o-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,c),n!==o){const e=s===o?t[0]:this._bufferService.cols;this._fillCells(0,o,e,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(e,t,i,r){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||i!==this._state.columnSelectMode||r!==this._state.ydisp}_areCoordinatesEqual(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]}}t.SelectionRenderLayer=s},744:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;const r=i(577),s=i(147),n=i(782),o=i(855),a=i(903),c=i(574);class l extends a.BaseRenderLayer{constructor(e,t,i,r,s,o,a,l,h,u){super(e,t,"text",i,r,u,s,o,l,h),this._characterJoinerService=a,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new n.CellData,this._state=new c.GridCache,this.register(o.onSpecificOptionChange("allowTransparency",(e=>this._setTransparency(e))))}resize(e){super.resize(e);const t=this._getFont(!1,!1);this._characterWidth===e.device.char.width&&this._characterFont===t||(this._characterWidth=e.device.char.width,this._characterFont=t,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(e,t,i){for(let s=e;s<=t;s++){const e=s+this._bufferService.buffer.ydisp,t=this._bufferService.buffer.lines.get(e),n=this._characterJoinerService.getJoinedCharacters(e);for(let a=0;a<this._bufferService.cols;a++){t.loadCell(a,this._workCell);let e=this._workCell,c=!1,l=a;if(0!==e.getWidth()){if(n.length>0&&a===n[0][0]){c=!0;const i=n.shift();e=new r.JoinedCellData(this._workCell,t.translateToString(!0,i[0],i[1]),i[1]-i[0]),l=i[1]-1}!c&&this._isOverlapping(e)&&l<t.length-1&&t.getCodePoint(l+1)===o.NULL_CELL_CODE&&(e.content&=-12582913,e.content|=2<<22),i(e,a,s),a=l}}}}_drawBackground(e,t){const i=this._ctx,r=this._bufferService.cols;let n=0,o=0,a=null;i.save(),this._forEachCell(e,t,((e,t,c)=>{let l=null;e.isInverse()?l=e.isFgDefault()?this._themeService.colors.foreground.css:e.isFgRGB()?`rgb(${s.AttributeData.toColorRGB(e.getFgColor()).join(",")})`:this._themeService.colors.ansi[e.getFgColor()].css:e.isBgRGB()?l=`rgb(${s.AttributeData.toColorRGB(e.getBgColor()).join(",")})`:e.isBgPalette()&&(l=this._themeService.colors.ansi[e.getBgColor()].css);let h=!1;this._decorationService.forEachDecorationAtCell(t,this._bufferService.buffer.ydisp+c,void 0,(e=>{"top"!==e.options.layer&&h||(e.backgroundColorRGB&&(l=e.backgroundColorRGB.css),h="top"===e.options.layer)})),null===a&&(n=t,o=c),c!==o?(i.fillStyle=a||"",this._fillCells(n,o,r-n,1),n=t,o=c):a!==l&&(i.fillStyle=a||"",this._fillCells(n,o,t-n,1),n=t,o=c),a=l})),null!==a&&(i.fillStyle=a,this._fillCells(n,o,r-n,1)),i.restore()}_drawForeground(e,t){this._forEachCell(e,t,((e,t,i)=>this._drawChars(e,t,i)))}handleGridChanged(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))}_isOverlapping(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;const t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;const i=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=i,i}}t.TextRenderLayer=l},274:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;let i,r=0,s=0,n=!1,o=!1,a=!1;t.CellColorResolver=class{constructor(e,t,i,r,s){this._terminal=e,this._selectionRenderModel=t,this._decorationService=i,this._coreBrowserService=r,this._themeService=s,this.result={fg:0,bg:0,ext:0}}resolve(e,t,c){this.result.bg=e.bg,this.result.fg=e.fg,this.result.ext=268435456&e.bg?e.extended.ext:0,s=0,r=0,o=!1,n=!1,a=!1,i=this._themeService.colors,this._decorationService.forEachDecorationAtCell(t,c,"bottom",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),a=this._selectionRenderModel.isCellSelected(this._terminal,t,c),a&&(s=(this._coreBrowserService.isFocused?i.selectionBackgroundOpaque:i.selectionInactiveBackgroundOpaque).rgba>>8&16777215,o=!0,i.selectionForeground&&(r=i.selectionForeground.rgba>>8&16777215,n=!0)),this._decorationService.forEachDecorationAtCell(t,c,"top",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),o&&(s=a?-16777216&e.bg&-134217729|s|50331648:-16777216&e.bg|s|50331648),n&&(r=-16777216&e.fg&-67108865|r|50331648),67108864&this.result.fg&&(o&&!n&&(r=0==(50331648&this.result.bg)?-134217728&this.result.fg|16777215&i.background.rgba>>8|50331648:-134217728&this.result.fg|67108863&this.result.bg,n=!0),!o&&n&&(s=0==(50331648&this.result.fg)?-67108864&this.result.bg|16777215&i.foreground.rgba>>8|50331648:-67108864&this.result.bg|67108863&this.result.fg,o=!0)),i=void 0,this.result.bg=o?s:this.result.bg,this.result.fg=n?r:this.result.fg}}},627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;const r=i(509),s=i(197),n=[];t.acquireTextureAtlas=function(e,t,i,o,a,c,l,h){const u=(0,s.generateConfig)(o,a,c,l,t,i,h);for(let r=0;r<n.length;r++){const t=n[r],i=t.ownedBy.indexOf(e);if(i>=0){if((0,s.configEquals)(t.config,u))return t.atlas;1===t.ownedBy.length?(t.atlas.dispose(),n.splice(r,1)):t.ownedBy.splice(i,1);break}}for(let r=0;r<n.length;r++){const t=n[r];if((0,s.configEquals)(t.config,u))return t.ownedBy.push(e),t.atlas}const d=e._core,p={atlas:new r.TextureAtlas(document,u,d.unicodeService),config:u,ownedBy:[e]};return n.push(p),p.atlas},t.removeTerminalFromCache=function(e){for(let t=0;t<n.length;t++){const i=n[t].ownedBy.indexOf(e);if(-1!==i){1===n[t].ownedBy.length?(n[t].atlas.dispose(),n.splice(t,1)):n[t].ownedBy.splice(i,1);break}}}},197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;const r=i(160);t.generateConfig=function(e,t,i,s,n,o,a){const c={foreground:o.foreground,background:o.background,cursor:r.NULL_COLOR,cursorAccent:r.NULL_COLOR,selectionForeground:r.NULL_COLOR,selectionBackgroundTransparent:r.NULL_COLOR,selectionBackgroundOpaque:r.NULL_COLOR,selectionInactiveBackgroundTransparent:r.NULL_COLOR,selectionInactiveBackgroundOpaque:r.NULL_COLOR,ansi:o.ansi.slice(),contrastCache:o.contrastCache,halfContrastCache:o.halfContrastCache};return{customGlyphs:n.customGlyphs,devicePixelRatio:a,letterSpacing:n.letterSpacing,lineHeight:n.lineHeight,deviceCellWidth:e,deviceCellHeight:t,deviceCharWidth:i,deviceCharHeight:s,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,drawBoldTextInBrightColors:n.drawBoldTextInBrightColors,minimumContrastRatio:n.minimumContrastRatio,colors:c}},t.configEquals=function(e,t){for(let i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.customGlyphs===t.customGlyphs&&e.lineHeight===t.lineHeight&&e.letterSpacing===t.letterSpacing&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.deviceCharWidth===t.deviceCharWidth&&e.deviceCharHeight===t.deviceCharHeight&&e.drawBoldTextInBrightColors===t.drawBoldTextInBrightColors&&e.minimumContrastRatio===t.minimumContrastRatio&&e.colors.foreground.rgba===t.colors.foreground.rgba&&e.colors.background.rgba===t.colors.background.rgba},t.is256Color=function(e){return 16777216==(50331648&e)||33554432==(50331648&e)}},237:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const r=i(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorBlinkStateManager=void 0,t.CursorBlinkStateManager=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))))}_restartInterval(e=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0})),this._blinkInterval=this._coreBrowserService.window.setInterval((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))}),600)}),e)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;const r=i(374);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const s={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"║":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╒":{1:(e,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╓":{1:(e,t)=>`M${.5-e},1 L${.5-e},.5 L1,.5 M${.5+e},.5 L${.5+e},1`},"╔":{1:(e,t)=>`M1,${.5-t} L${.5-e},${.5-t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╕":{1:(e,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"╖":{1:(e,t)=>`M${.5+e},1 L${.5+e},.5 L0,.5 M${.5-e},.5 L${.5-e},1`},"╗":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5+e},${.5-t} L${.5+e},1`},"╘":{1:(e,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"╙":{1:(e,t)=>`M1,.5 L${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╚":{1:(e,t)=>`M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0 M1,${.5+t} L${.5-e},${.5+t} L${.5-e},0`},"╛":{1:(e,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"╜":{1:(e,t)=>`M0,.5 L${.5+e},.5 L${.5+e},0 M${.5-e},.5 L${.5-e},0`},"╝":{1:(e,t)=>`M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M0,${.5+t} L${.5+e},${.5+t} L${.5+e},0`},"╞":{1:(e,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╟":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1 M${.5+e},.5 L1,.5`},"╠":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╡":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"╢":{1:(e,t)=>`M0,.5 L${.5-e},.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╣":{1:(e,t)=>`M${.5+e},0 L${.5+e},1 M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0`},"╤":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"╥":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},1 M${.5+e},.5 L${.5+e},1`},"╦":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╧":{1:(e,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╨":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╩":{1:(e,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╪":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╫":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╬":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"╮":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"╯":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"╰":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.tryDrawCustomChar=function(e,i,o,l,h,u,d,p){const f=t.blockElementDefinitions[i];if(f)return function(e,t,i,r,s,n){for(let o=0;o<t.length;o++){const a=t[o],c=s/8,l=n/8;e.fillRect(i+a.x*c,r+a.y*l,a.w*c,a.h*l)}}(e,f,o,l,h,u),!0;const g=s[i];if(g)return function(e,t,i,s,o,a){let c=n.get(t);c||(c=new Map,n.set(t,c));const l=e.fillStyle;if("string"!=typeof l)throw new Error(`Unexpected fillStyle type "${l}"`);let h=c.get(l);if(!h){const i=t[0].length,s=t.length,n=document.createElement("canvas");n.width=i,n.height=s;const o=(0,r.throwIfFalsy)(n.getContext("2d")),a=new ImageData(i,s);let u,d,p,f;if(l.startsWith("#"))u=parseInt(l.slice(1,3),16),d=parseInt(l.slice(3,5),16),p=parseInt(l.slice(5,7),16),f=l.length>7&&parseInt(l.slice(7,9),16)||1;else{if(!l.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${l}" when drawing pattern glyph`);[u,d,p,f]=l.substring(5,l.length-1).split(",").map((e=>parseFloat(e)))}for(let e=0;e<s;e++)for(let r=0;r<i;r++)a.data[4*(e*i+r)]=u,a.data[4*(e*i+r)+1]=d,a.data[4*(e*i+r)+2]=p,a.data[4*(e*i+r)+3]=t[e][r]*(255*f);o.putImageData(a,0,0),h=(0,r.throwIfFalsy)(e.createPattern(n,null)),c.set(l,h)}e.fillStyle=h,e.fillRect(i,s,o,a)}(e,g,o,l,h,u),!0;const m=t.boxDrawingDefinitions[i];if(m)return function(e,t,i,r,s,n,o){e.strokeStyle=e.fillStyle;for(const[l,h]of Object.entries(t)){let t;e.beginPath(),e.lineWidth=o*Number.parseInt(l),t="function"==typeof h?h(.15,.15/n*s):h;for(const l of t.split(" ")){const t=l[0],h=a[t];if(!h){console.error(`Could not find drawing instructions for "${t}"`);continue}const u=l.substring(1).split(",");u[0]&&u[1]&&h(e,c(u,s,n,i,r,!0,o))}e.stroke(),e.closePath()}}(e,m,o,l,h,u,p),!0;const _=t.powerlineDefinitions[i];return!!_&&(function(e,t,i,r,s,n,o,l){var h,u;const d=new Path2D;d.rect(i,r,s,n),e.clip(d),e.beginPath();const p=o/12;e.lineWidth=l*p;for(const f of t.d.split(" ")){const o=f[0],d=a[o];if(!d){console.error(`Could not find drawing instructions for "${o}"`);continue}const g=f.substring(1).split(",");g[0]&&g[1]&&d(e,c(g,s,n,i,r,!1,l,(null!==(h=t.leftPadding)&&void 0!==h?h:0)*(p/2),(null!==(u=t.rightPadding)&&void 0!==u?u:0)*(p/2)))}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,_,o,l,h,u,d,p),!0)};const n=new Map;function o(e,t,i=0){return Math.max(Math.min(e,t),i)}const a={C:(e,t)=>e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(e,t)=>e.lineTo(t[0],t[1]),M:(e,t)=>e.moveTo(t[0],t[1])};function c(e,t,i,r,s,n,a,c=0,l=0){const h=e.map((e=>parseFloat(e)||parseInt(e)));if(h.length<2)throw new Error("Too few arguments for instruction");for(let u=0;u<h.length;u+=2)h[u]*=t-c*a-l*a,n&&0!==h[u]&&(h[u]=o(Math.round(h[u]+.5)-.5,t,0)),h[u]+=r+c*a;for(let u=1;u<h.length;u+=2)h[u]*=i,n&&0!==h[u]&&(h[u]=o(Math.round(h[u]+.5)-.5,i,0)),h[u]+=s;return h}},56:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;const r=i(859);t.observeDevicePixelDimensions=function(e,t,i){let s=new t.ResizeObserver((t=>{const r=t.find((t=>t.target===e));if(!r)return;if(!("devicePixelContentBoxSize"in r))return null==s||s.disconnect(),void(s=void 0);const n=r.devicePixelContentBoxSize[0].inlineSize,o=r.devicePixelContentBoxSize[0].blockSize;n>0&&o>0&&i(n,o)}));try{s.observe(e,{box:["device-pixel-content-box"]})}catch(n){s.disconnect(),s=void 0}return(0,r.toDisposable)((()=>null==s?void 0:s.disconnect()))}},374:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||9472<=(t=e)&&t<=9631;var t},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,r=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const s=t[1]-e.buffer.active.viewportY,n=i[1]-e.buffer.active.viewportY,o=Math.max(s,0),a=Math.min(n,e.rows-1);o>=e.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=s,this.viewportEndRow=n,this.viewportCappedStartRow=o,this.viewportCappedEndRow=a,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},509:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;const s=i(237),n=i(860),o=i(374),a=i(160),c=i(345),l=i(485),h=i(385),u=i(147),d=i(855),p=i(776),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let g;class m{get pages(){return this._pages}constructor(e,t,i){this._document=e,this._config=t,this._unicodeService=i,this._didWarmUp=!1,this._cacheMap=new l.FourKeyMap,this._cacheMapCombined=new l.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new c.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new c.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=v(e,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,o.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const e of this.pages)e.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const e=new h.IdleTaskQueue;for(let t=33;t<126;t++)e.enqueue((()=>{if(!this._cacheMap.get(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT)){const e=this._drawToCache(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT);this._cacheMap.set(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT,e)}}))}beginFrame(){return this._requestClearModel}clearTexture(){if(0!==this._pages[0].currentRow.x||0!==this._pages[0].currentRow.y){for(const e of this._pages)e.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const e=this._pages.filter((e=>2*e.canvas.width<=(m.maxTextureSize||4096))).sort(((e,t)=>t.canvas.width!==e.canvas.width?t.canvas.width-e.canvas.width:t.percentageUsed-e.percentageUsed));let t=-1,i=0;for(let a=0;a<e.length;a++)if(e[a].canvas.width!==i)t=a,i=e[a].canvas.width;else if(a-t==3)break;const r=e.slice(t,t+4),s=r.map((e=>e.glyphs[0].texturePage)).sort(((e,t)=>e>t?1:-1)),n=this.pages.length-r.length,o=this._mergePages(r,n);o.version++;for(let a=s.length-1;a>=0;a--)this._deletePage(s[a]);this.pages.push(o),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(o.canvas)}const e=new _(this._document,this._textureSize);return this._pages.push(e),this._activePages.push(e),this._onAddTextureAtlasCanvas.fire(e.canvas),e}_mergePages(e,t){const i=2*e[0].canvas.width,r=new _(this._document,i,e);for(const[s,n]of e.entries()){const e=s*n.canvas.width%i,o=Math.floor(s/2)*n.canvas.height;r.ctx.drawImage(n.canvas,e,o);for(const r of n.glyphs)r.texturePage=t,r.sizeClipSpace.x=r.size.x/i,r.sizeClipSpace.y=r.size.y/i,r.texturePosition.x+=e,r.texturePosition.y+=o,r.texturePositionClipSpace.x=r.texturePosition.x/i,r.texturePositionClipSpace.y=r.texturePosition.y/i;this._onRemoveTextureAtlasCanvas.fire(n.canvas);const a=this._activePages.indexOf(n);-1!==a&&this._activePages.splice(a,1)}return r}_deletePage(e){this._pages.splice(e,1);for(let t=e;t<this._pages.length;t++){const e=this._pages[t];for(const t of e.glyphs)t.texturePage--;e.version++}}getRasterizedGlyphCombinedChar(e,t,i,r,s){return this._getFromCacheMap(this._cacheMapCombined,e,t,i,r,s)}getRasterizedGlyph(e,t,i,r,s){return this._getFromCacheMap(this._cacheMap,e,t,i,r,s)}_getFromCacheMap(e,t,i,r,s,n=!1){return g=e.get(t,i,r,s),g||(g=this._drawToCache(t,i,r,s,n),e.set(t,i,r,s,g)),g}_getColorFromAnsiIndex(e){if(e>=this._config.colors.ansi.length)throw new Error("No color found for idx "+e);return this._config.colors.ansi[e]}_getBackgroundColor(e,t,i,r){if(this._config.allowTransparency)return a.NULL_COLOR;let s;switch(e){case 16777216:case 33554432:s=this._getColorFromAnsiIndex(t);break;case 50331648:const e=u.AttributeData.toColorRGB(t);s=a.rgba.toColor(e[0],e[1],e[2]);break;default:s=i?a.color.opaque(this._config.colors.foreground):this._config.colors.background}return s}_getForegroundColor(e,t,i,r,n,o,c,l,h,d){const p=this._getMinimumContrastColor(e,t,i,r,n,o,!1,h,l,d);if(p)return p;let f;switch(n){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&h&&o<8&&(o+=8),f=this._getColorFromAnsiIndex(o);break;case 50331648:const e=u.AttributeData.toColorRGB(o);f=a.rgba.toColor(e[0],e[1],e[2]);break;default:f=c?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(f=a.color.opaque(f)),l&&(f=a.color.multiplyOpacity(f,s.DIM_OPACITY)),f}_resolveBackgroundRgba(e,t,i){switch(e){case 16777216:case 33554432:return this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(e,t,i,r){switch(e){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&r&&t<8&&(t+=8),this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(e,t,i,r,s,n,o,c,l,h){if(1===this._config.minimumContrastRatio||h)return;const u=this._getContrastCache(l),d=u.getColor(e,r);if(void 0!==d)return d||void 0;const p=this._resolveBackgroundRgba(t,i,o),f=this._resolveForegroundRgba(s,n,o,c),g=a.rgba.ensureContrastRatio(p,f,this._config.minimumContrastRatio/(l?2:1));if(!g)return void u.setColor(e,r,null);const m=a.rgba.toColor(g>>24&255,g>>16&255,g>>8&255);return u.setColor(e,r,m),m}_getContrastCache(e){return e?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(e,t,i,r,a=!1){const c="number"==typeof e?String.fromCharCode(e):e,l=Math.min(this._config.deviceCellWidth*Math.max(c.length,2)+4,this._textureSize);this._tmpCanvas.width<l&&(this._tmpCanvas.width=l);const h=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<h&&(this._tmpCanvas.height=h),this._tmpCtx.save(),this._workAttributeData.fg=i,this._workAttributeData.bg=t,this._workAttributeData.extended.ext=r,this._workAttributeData.isInvisible())return f;const d=!!this._workAttributeData.isBold(),p=!!this._workAttributeData.isInverse(),g=!!this._workAttributeData.isDim(),_=!!this._workAttributeData.isItalic(),v=!!this._workAttributeData.isUnderline(),y=!!this._workAttributeData.isStrikethrough(),b=!!this._workAttributeData.isOverline();let w=this._workAttributeData.getFgColor(),D=this._workAttributeData.getFgColorMode(),C=this._workAttributeData.getBgColor(),x=this._workAttributeData.getBgColorMode();if(p){const e=w;w=C,C=e;const t=D;D=x,x=t}const S=this._getBackgroundColor(x,C,p,g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const T=d?this._config.fontWeightBold:this._config.fontWeight,E=_?"italic":"";this._tmpCtx.font=`${E} ${T} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=s.TEXT_BASELINE;const P=1===c.length&&(0,o.isPowerlineGlyph)(c.charCodeAt(0)),k=1===c.length&&(0,o.isRestrictedPowerlineGlyph)(c.charCodeAt(0)),R=this._getForegroundColor(t,x,C,i,D,w,p,g,d,(0,o.excludeFromContrastRatioDemands)(c.charCodeAt(0)));this._tmpCtx.fillStyle=R.css;const A=k?0:4;let L=!1;!1!==this._config.customGlyphs&&(L=(0,n.tryDrawCustomChar)(this._tmpCtx,c,A,A,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let M,F=!P;if(M="number"==typeof e?this._unicodeService.wcwidth(e):this._unicodeService.getStringCellWidth(e),v){this._tmpCtx.save();const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),t=e%2==1?.5:0;if(this._tmpCtx.lineWidth=e,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())F=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{F=!1;let e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&e<8&&(e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(e).css}this._tmpCtx.beginPath();const i=A,r=Math.ceil(A+this._config.deviceCharHeight)-t-(a?2*e:0),s=r+e,n=r+2*e;for(let o=0;o<M;o++){this._tmpCtx.save();const a=i+o*this._config.deviceCellWidth,c=i+(o+1)*this._config.deviceCellWidth,l=a+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r),this._tmpCtx.moveTo(a,n),this._tmpCtx.lineTo(c,n);break;case 3:const i=e<=1?n:Math.ceil(A+this._config.deviceCharHeight-e/2)-t,o=e<=1?r:Math.ceil(A+this._config.deviceCharHeight+e/2)-t,h=new Path2D;h.rect(a,r,this._config.deviceCellWidth,n-r),this._tmpCtx.clip(h),this._tmpCtx.moveTo(a-this._config.deviceCellWidth/2,s),this._tmpCtx.bezierCurveTo(a-this._config.deviceCellWidth/2,o,a,o,a,s),this._tmpCtx.bezierCurveTo(a,i,l,i,l,s),this._tmpCtx.bezierCurveTo(l,o,c,o,c,s),this._tmpCtx.bezierCurveTo(c,i,c+this._config.deviceCellWidth/2,i,c+this._config.deviceCellWidth/2,s);break;case 4:this._tmpCtx.setLineDash([Math.round(e),Math.round(e)]),this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r);break;default:this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!L&&this._config.fontSize>=12&&!this._config.allowTransparency&&" "!==c){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const t=this._tmpCtx.measureText(c);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in t&&t.actualBoundingBoxDescent>0){this._tmpCtx.save();const t=new Path2D;t.rect(i,r-Math.ceil(e/2),this._config.deviceCellWidth*M,n-r+Math.ceil(e/2)),this._tmpCtx.clip(t),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=S.css,this._tmpCtx.strokeText(c,A,A+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(b){const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),t=e%2==1?.5:0;this._tmpCtx.lineWidth=e,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(A,A+t),this._tmpCtx.lineTo(A+this._config.deviceCharWidth*M,A+t),this._tmpCtx.stroke()}if(L||this._tmpCtx.fillText(c,A,A+this._config.deviceCharHeight),"_"===c&&!this._config.allowTransparency){let e=O(this._tmpCtx.getImageData(A,A,this._config.deviceCellWidth,this._config.deviceCellHeight),S,R,F);if(e)for(let t=1;t<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(c,A,A+this._config.deviceCharHeight-t),e=O(this._tmpCtx.getImageData(A,A,this._config.deviceCellWidth,this._config.deviceCellHeight),S,R,F),e);t++);}if(y){const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),t=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=e,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(A,A+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.lineTo(A+this._config.deviceCharWidth*M,A+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.stroke()}this._tmpCtx.restore();const $=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let I;if(I=this._config.allowTransparency?function(e){for(let t=0;t<e.data.length;t+=4)if(e.data[t+3]>0)return!1;return!0}($):O($,S,R,F),I)return f;const B=this._findGlyphBoundingBox($,this._workBoundingBox,l,k,L,A);let Q,j;for(;;){if(0===this._activePages.length){const e=this._createNewPage();Q=e,j=e.currentRow,j.height=B.size.y;break}Q=this._activePages[this._activePages.length-1],j=Q.currentRow;for(const e of this._activePages)B.size.y<=e.currentRow.height&&(Q=e,j=e.currentRow);for(let e=this._activePages.length-1;e>=0;e--)for(const t of this._activePages[e].fixedRows)t.height<=j.height&&B.size.y<=t.height&&(Q=this._activePages[e],j=t);if(j.y+B.size.y>=Q.canvas.height||j.height>B.size.y+2){let e=!1;if(Q.currentRow.y+Q.currentRow.height+B.size.y>=Q.canvas.height){let t;for(const e of this._activePages)if(e.currentRow.y+e.currentRow.height+B.size.y<e.canvas.height){t=e;break}if(t)Q=t;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&j.y+B.size.y<=Q.canvas.height&&j.height>=B.size.y&&j.x+B.size.x<=Q.canvas.width)e=!0;else{const t=this._createNewPage();Q=t,j=t.currentRow,j.height=B.size.y,e=!0}}e||(Q.currentRow.height>0&&Q.fixedRows.push(Q.currentRow),j={x:0,y:Q.currentRow.y+Q.currentRow.height,height:B.size.y},Q.fixedRows.push(j),Q.currentRow={x:0,y:j.y+j.height,height:0})}if(j.x+B.size.x<=Q.canvas.width)break;j===Q.currentRow?(j.x=0,j.y+=j.height,j.height=0):Q.fixedRows.splice(Q.fixedRows.indexOf(j),1)}return B.texturePage=this._pages.indexOf(Q),B.texturePosition.x=j.x,B.texturePosition.y=j.y,B.texturePositionClipSpace.x=j.x/Q.canvas.width,B.texturePositionClipSpace.y=j.y/Q.canvas.height,B.sizeClipSpace.x/=Q.canvas.width,B.sizeClipSpace.y/=Q.canvas.height,j.height=Math.max(j.height,B.size.y),j.x+=B.size.x,Q.ctx.putImageData($,B.texturePosition.x-this._workBoundingBox.left,B.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,B.size.x,B.size.y),Q.addGlyph(B),Q.version++,B}_findGlyphBoundingBox(e,t,i,r,s,n){t.top=0;const o=r?this._config.deviceCellHeight:this._tmpCanvas.height,a=r?this._config.deviceCellWidth:i;let c=!1;for(let l=0;l<o;l++){for(let i=0;i<a;i++){const r=l*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[r]){t.top=l,c=!0;break}}if(c)break}t.left=0,c=!1;for(let l=0;l<n+a;l++){for(let i=0;i<o;i++){const r=i*this._tmpCanvas.width*4+4*l+3;if(0!==e.data[r]){t.left=l,c=!0;break}}if(c)break}t.right=a,c=!1;for(let l=n+a-1;l>=n;l--){for(let i=0;i<o;i++){const r=i*this._tmpCanvas.width*4+4*l+3;if(0!==e.data[r]){t.right=l,c=!0;break}}if(c)break}t.bottom=o,c=!1;for(let l=o-1;l>=0;l--){for(let i=0;i<a;i++){const r=l*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[r]){t.bottom=l,c=!0;break}}if(c)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:t.right-t.left+1,y:t.bottom-t.top+1},sizeClipSpace:{x:t.right-t.left+1,y:t.bottom-t.top+1},offset:{x:-t.left+n+(r||s?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-t.top+n+(r||s?1===this._config.lineHeight?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}t.TextureAtlas=m,r([p.traceCall],m.prototype,"_drawToCache",null);class _{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(e){this._glyphs.push(e),this._usedPixels+=e.size.x*e.size.y}constructor(e,t,i){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],i)for(const r of i)this._glyphs.push(...r.glyphs),this._usedPixels+=r._usedPixels;this.canvas=v(e,t,t),this.ctx=(0,o.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function O(e,t,i,r){const s=t.rgba>>>24,n=t.rgba>>>16&255,o=t.rgba>>>8&255,a=i.rgba>>>24,c=i.rgba>>>16&255,l=i.rgba>>>8&255,h=Math.floor((Math.abs(s-a)+Math.abs(n-c)+Math.abs(o-l))/12);let u=!0;for(let d=0;d<e.data.length;d+=4)e.data[d]===s&&e.data[d+1]===n&&e.data[d+2]===o||r&&Math.abs(e.data[d]-s)+Math.abs(e.data[d+1]-n)+Math.abs(e.data[d+2]-o)<h?e.data[d+3]=0:u=!1;return u}function v(e,t,i){const r=e.createElement("canvas");return r.width=t,r.height=i,r}},577:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(147),o=i(855),a=i(782),c=i(97);class l extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=l;let h=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],r=t.translateToString(!0);let s=0,n=0,a=0,c=t.getFg(0),l=t.getBg(0);for(let h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==c||this._workCell.bg!==l){if(h-s>1){const e=this._getJoinedRanges(r,a,n,t,s);for(let t=0;t<e.length;t++)i.push(e[t])}s=h,a=n,c=this._workCell.fg,l=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-s>1){const e=this._getJoinedRanges(r,a,n,t,s);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,r,s,n){const o=t.substring(i,r);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(c){console.error(c)}for(let l=1;l<this._characterJoiners.length;l++)try{const t=this._characterJoiners[l].handler(o);for(let i=0;i<t.length;i++)e._mergeRanges(a,t[i])}catch(c){console.error(c)}return this._stringRangesToCellRanges(a,s,n),a}_stringRangesToCellRanges(e,t,i){let r=0,s=!1,n=0,a=e[r];if(a){for(let c=i;c<this._bufferService.cols;c++){const i=t.getWidth(c),l=t.getString(c).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!s&&a[0]<=n&&(a[0]=c,s=!0),a[1]<=n){if(a[1]=c,a=e[++r],!a)break;a[0]<=n?(a[0]=c,s=!0):s=!1}n+=l}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let r=0;r<e.length;r++){const s=e[r];if(i){if(t[1]<=s[0])return e[r-1][1]=t[1],e;if(t[1]<=s[1])return e[r-1][1]=Math.max(t[1],s[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=s[0])return e.splice(r,0,t),e;if(t[1]<=s[1])return s[0]=Math.min(t[0],s[0]),e;t[0]<s[1]&&(s[0]=Math.min(t[0],s[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=h=r([s(0,c.IBufferService)],h)},160:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const r=i(399);let s=0,n=0,o=0,a=0;var c,l,h,u,d,p;function f(e){const t=e.toString(16);return t.length<2?"0"+t:t}function g(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},(p=c||(t.channels=c={})).toCss=function(e,t,i,r){return void 0!==r?`#${f(e)}${f(t)}${f(i)}${f(r)}`:`#${f(e)}${f(t)}${f(i)}`},p.toRgba=function(e,t,i,r=255){return(e<<24|t<<16|i<<8|r)>>>0},function(e){function t(e,t){return a=Math.round(255*t),[s,n,o]=d.toChannels(e.rgba),{css:c.toCss(s,n,o,a),rgba:c.toRgba(s,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,r=t.rgba>>16&255,l=t.rgba>>8&255,h=e.rgba>>24&255,u=e.rgba>>16&255,d=e.rgba>>8&255;return s=h+Math.round((i-h)*a),n=u+Math.round((r-u)*a),o=d+Math.round((l-d)*a),{css:c.toCss(s,n,o),rgba:c.toRgba(s,n,o)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){const r=d.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return d.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[s,n,o]=d.toChannels(t),{css:c.toCss(s,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(l||(t.color=l={})),function(e){let t,i;if(!r.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),d.toColor(s,n,o);case 5:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),d.toColor(s,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const r=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(r)return s=parseInt(r[1]),n=parseInt(r[2]),o=parseInt(r[3]),a=Math.round(255*(void 0===r[5]?1:parseFloat(r[5]))),d.toColor(s,n,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[s,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:c.toRgba(s,n,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const r=e/255,s=t/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(u||(t.rgb=u={})),function(e){function t(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,c=t>>8&255,l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));for(;l<i&&(o>0||a>0||c>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),c-=Math.max(0,Math.ceil(.1*c)),l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));return(o<<24|a<<16|c<<8|255)>>>0}function i(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,c=t>>8&255,l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));for(;l<i&&(o<255||a<255||c<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),c=Math.min(255,c+Math.ceil(.1*(255-c))),l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));return(o<<24|a<<16|c<<8|255)>>>0}e.ensureContrastRatio=function(e,r,s){const n=u.relativeLuminance(e>>8),o=u.relativeLuminance(r>>8);if(g(n,o)<s){if(o<n){const o=t(e,r,s),a=g(n,u.relativeLuminance(o>>8));if(a<s){const t=i(e,r,s);return a>g(n,u.relativeLuminance(t>>8))?o:t}return o}const a=i(e,r,s),c=g(n,u.relativeLuminance(a>>8));if(c<s){const i=t(e,r,s);return c>g(n,u.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,r){return{css:c.toCss(e,t,i,r),rgba:c.toRgba(e,t,i,r)}}}(d||(t.rgba=d={})),t.toPaddedHex=f,t.contrastRatio=g},345:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))}},859:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},485:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,r,s,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,s,n)}get(e,t,i,r){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(i,r)}clear(){this._data.clear()}}},399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},385:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const r=i(399);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,r=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),s=e.timeRemaining(),1.5*i>s)return r-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-t))}ms`),void this._start();r=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new r}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class r{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new r(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=r},782:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const r=i(133),s=i(855),n=i(147);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},855:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let r="";for(let s=t;s<i;++s){let t=e[s];t>65535?(t-=65536,r+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):r+=String.fromCharCode(t)}return r},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let r=0,s=0;if(this._interim){const i=e.charCodeAt(s++);56320<=i&&i<=57343?t[r++]=1024*(this._interim-55296)+i-56320+65536:(t[r++]=this._interim,t[r++]=i),this._interim=0}for(let n=s;n<i;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=i)return this._interim=s,r;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[r++]=1024*(s-55296)+o-56320+65536:(t[r++]=s,t[r++]=o)}else 65279!==s&&(t[r++]=s)}return r}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let r,s,n,o,a=0,c=0,l=0;if(this.interim[0]){let r=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const c=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=c-o;for(;l<h;){if(l>=i)return 0;if(n=e[l++],128!=(192&n)){l--,r=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}r||(2===c?s<128?l--:t[a++]=s:3===c?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const h=i-4;let u=l;for(;u<i;){for(;!(!(u<h)||128&(r=e[u])||128&(s=e[u+1])||128&(n=e[u+2])||128&(o=e[u+3]));)t[a++]=r,t[a++]=s,t[a++]=n,t[a++]=o,u+=4;if(r=e[u++],r<128)t[a++]=r;else if(192==(224&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(c=(31&r)<<6|63&s,c<128){u--;continue}t[a++]=c}else if(224==(240&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(c=(15&r)<<12|(63&s)<<6|63&n,c<2048||c>=55296&&c<=57343||65279===c)continue;t[a++]=c}else if(240==(248&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,this.interim[2]=n,a;if(o=e[u++],128!=(192&o)){u--;continue}if(c=(7&r)<<18|(63&s)<<12|(63&n)<<6|63&o,c<65536||c>1114111)continue;t[a++]=c}}return a}}},776:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(859),o=i(97),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let c,l=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),c=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.trace.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}debug(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.debug.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}info(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.info.bind(this._optionsService.options.logger))&&void 0!==r?r:console.info,e,t)}warn(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.warn.bind(this._optionsService.options.logger))&&void 0!==r?r:console.warn,e,t)}error(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.error.bind(this._optionsService.options.logger))&&void 0!==r?r:console.error,e,t)}};t.LogService=l=r([s(0,o.IOptionsService)],l),t.setTraceLogger=function(e){c=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const r=i.value;i.value=function(...e){if(c.logLevel!==o.LogLevelEnum.TRACE)return r.apply(this,e);c.trace(`GlyphRenderer#${r.name}(${e.map((e=>JSON.stringify(e))).join(", ")})`);const t=r.apply(this,e);return c.trace(`GlyphRenderer#${r.name} return`,t),t}}},726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",r="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[r]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const s=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var o,a,c;o=s,c=n,(a=e)[i]===a?a[r].push({id:o,index:c}):(a[r]=[{id:o,index:c}],a[i]=a)};return s.toString=()=>e,t.serviceRegistry.set(e,s),s}},97:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const r=i(726);var s,n;t.IBufferService=(0,r.createDecorator)("BufferService"),t.ICoreMouseService=(0,r.createDecorator)("CoreMouseService"),t.ICoreService=(0,r.createDecorator)("CoreService"),t.ICharsetService=(0,r.createDecorator)("CharsetService"),t.IInstantiationService=(0,r.createDecorator)("InstantiationService"),(n=s||(t.LogLevelEnum=s={}))[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.OFF=5]="OFF",t.ILogService=(0,r.createDecorator)("LogService"),t.IOptionsService=(0,r.createDecorator)("OptionsService"),t.IOscLinkService=(0,r.createDecorator)("OscLinkService"),t.IUnicodeService=(0,r.createDecorator)("UnicodeService"),t.IDecorationService=(0,r.createDecorator)("DecorationService")}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasAddon=void 0;const t=i(345),s=i(859),n=i(776),o=i(949);class a extends s.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new t.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new t.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var e;return null===(e=this._renderer)||void 0===e?void 0:e.textureAtlas}activate(e){const i=e._core;if(!e.element)return void this.register(i.onWillOpen((()=>this.activate(e))));this._terminal=e;const r=i.coreService,a=i.optionsService,c=i.screenElement,l=i.linkifier2,h=i,u=h._bufferService,d=h._renderService,p=h._characterJoinerService,f=h._charSizeService,g=h._coreBrowserService,m=h._decorationService,_=h._logService,O=h._themeService;(0,n.setTraceLogger)(_),this._renderer=new o.CanvasRenderer(e,c,l,u,f,a,p,r,g,m,O),this.register((0,t.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),d.setRenderer(this._renderer),d.handleResize(u.cols,u.rows),this.register((0,s.toDisposable)((()=>{var t;d.setRenderer(this._terminal._core._createRenderer()),d.handleResize(e.cols,e.rows),null===(t=this._renderer)||void 0===t||t.dispose(),this._renderer=void 0})))}}e.CanvasAddon=a})(),r})())(),rm={exports:{}};tm=rm,function(e,t){tm.exports=t()}(self,(()=>(()=>{var e={345:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))}},859:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.SearchAddon=void 0;const t=i(345),s=i(859),n=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class o extends s.Disposable{constructor(e){var i;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new s.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new t.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=null!==(i=null==e?void 0:e.highlightLimit)&&void 0!==i?i:1e3}activate(e){this._terminal=e,this.register(this._terminal.onWriteParsed((()=>this._updateMatches()))),this.register(this._terminal.onResize((()=>this._updateMatches()))),this.register((0,s.toDisposable)((()=>this.clearDecorations())))}_updateMatches(){var e;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(null===(e=this._lastSearchOptions)||void 0===e?void 0:e.decorations)&&(this._highlightTimeout=setTimeout((()=>{const e=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(e,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))}),200))}clearDecorations(e){this._selectedDecoration.clear(),(0,s.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),e||(this._cachedSearchTerm=void 0)}findNext(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=t,(null==t?void 0:t.decorations)&&(void 0!==this._cachedSearchTerm&&e===this._cachedSearchTerm||this._highlightAllMatches(e,t));const i=this._findNextAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_highlightAllMatches(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!e||0===e.length)return void this.clearDecorations();t=t||{},this.clearDecorations(!0);const i=[];let r,s=this._find(e,0,0,t);for(;s&&((null==r?void 0:r.row)!==s.row||(null==r?void 0:r.col)!==s.col)&&!(i.length>=this._highlightLimit);)r=s,i.push(r),s=this._find(e,r.col+r.term.length>=this._terminal.cols?r.row+1:r.row,r.col+r.term.length>=this._terminal.cols?0:r.col+1,t);for(const n of i){const e=this._createResultDecoration(n,t.decorations);e&&(this._highlightedLines.add(e.marker.line),this._highlightDecorations.push({decoration:e,match:n,dispose(){e.dispose()}}))}}_find(e,t,i,r){var s;if(!this._terminal||!e||0===e.length)return null===(s=this._terminal)||void 0===s||s.clearSelection(),void this.clearDecorations();if(i>this._terminal.cols)throw new Error(`Invalid col: ${i} to search in terminal of ${this._terminal.cols} cols`);let n;this._initLinesCache();const o={startRow:t,startCol:i};if(n=this._findInLine(e,o,r),!n)for(let a=t+1;a<this._terminal.buffer.active.baseY+this._terminal.rows&&(o.startRow=a,o.startCol=0,n=this._findInLine(e,o,r),!n);a++);return n}_findNextAndSelect(e,t){var i;if(!this._terminal||!e||0===e.length)return null===(i=this._terminal)||void 0===i||i.clearSelection(),this.clearDecorations(),!1;const r=this._terminal.getSelectionPosition();this._terminal.clearSelection();let s=0,n=0;r&&(this._cachedSearchTerm===e?(s=r.end.x,n=r.end.y):(s=r.start.x,n=r.start.y)),this._initLinesCache();const o={startRow:n,startCol:s};let a=this._findInLine(e,o,t);if(!a)for(let c=n+1;c<this._terminal.buffer.active.baseY+this._terminal.rows&&(o.startRow=c,o.startCol=0,a=this._findInLine(e,o,t),!a);c++);if(!a&&0!==n)for(let c=0;c<n&&(o.startRow=c,o.startCol=0,a=this._findInLine(e,o,t),!a);c++);return!a&&r&&(o.startRow=r.start.y,o.startCol=0,a=this._findInLine(e,o,t)),this._selectResult(a,null==t?void 0:t.decorations,null==t?void 0:t.noScroll)}findPrevious(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=t,(null==t?void 0:t.decorations)&&(void 0!==this._cachedSearchTerm&&e===this._cachedSearchTerm||this._highlightAllMatches(e,t));const i=this._findPreviousAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_fireResults(e){if(null==e?void 0:e.decorations){let e=-1;if(this._selectedDecoration.value){const t=this._selectedDecoration.value.match;for(let i=0;i<this._highlightDecorations.length;i++){const r=this._highlightDecorations[i].match;if(r.row===t.row&&r.col===t.col&&r.size===t.size){e=i;break}}}this._onDidChangeResults.fire({resultIndex:e,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(e,t){var i;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!e||0===e.length)return null===(i=this._terminal)||void 0===i||i.clearSelection(),this.clearDecorations(),!1;const r=this._terminal.getSelectionPosition();this._terminal.clearSelection();let s=this._terminal.buffer.active.baseY+this._terminal.rows-1,n=this._terminal.cols;const o=!0;this._initLinesCache();const a={startRow:s,startCol:n};let c;if(r&&(a.startRow=s=r.start.y,a.startCol=n=r.start.x,this._cachedSearchTerm!==e&&(c=this._findInLine(e,a,t,!1),c||(a.startRow=s=r.end.y,a.startCol=n=r.end.x))),c||(c=this._findInLine(e,a,t,o)),!c){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let i=s-1;i>=0&&(a.startRow=i,c=this._findInLine(e,a,t,o),!c);i--);}if(!c&&s!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let l=this._terminal.buffer.active.baseY+this._terminal.rows-1;l>=s&&(a.startRow=l,c=this._findInLine(e,a,t,o),!c);l--);return this._selectResult(c,null==t?void 0:t.decorations,null==t?void 0:t.noScroll)}_initLinesCache(){const e=this._terminal;this._linesCache||(this._linesCache=new Array(e.buffer.active.length),this._cursorMoveListener=e.onCursorMove((()=>this._destroyLinesCache())),this._resizeListener=e.onResize((()=>this._destroyLinesCache()))),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout((()=>this._destroyLinesCache()),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(e,t,i){return(0===e||n.includes(t[e-1]))&&(e+i.length===t.length||n.includes(t[e+i.length]))}_findInLine(e,t,i={},r=!1){var s;const n=this._terminal,o=t.startRow,a=t.startCol,c=n.buffer.active.getLine(o);if(null==c?void 0:c.isWrapped)return r?void(t.startCol+=n.cols):(t.startRow--,t.startCol+=n.cols,this._findInLine(e,t,i));let l=null===(s=this._linesCache)||void 0===s?void 0:s[o];l||(l=this._translateBufferLineToStringWithWrap(o,!0),this._linesCache&&(this._linesCache[o]=l));const[h,u]=l,d=this._bufferColsToStringOffset(o,a),p=i.caseSensitive?e:e.toLowerCase(),f=i.caseSensitive?h:h.toLowerCase();let g=-1;if(i.regex){const t=RegExp(p,"g");let i;if(r)for(;i=t.exec(f.slice(0,d));)g=t.lastIndex-i[0].length,e=i[0],t.lastIndex-=e.length-1;else i=t.exec(f.slice(d)),i&&i[0].length>0&&(g=d+(t.lastIndex-i[0].length),e=i[0])}else r?d-p.length>=0&&(g=f.lastIndexOf(p,d-p.length)):g=f.indexOf(p,d);if(g>=0){if(i.wholeWord&&!this._isWholeWord(g,f,e))return;let t=0;for(;t<u.length-1&&g>=u[t+1];)t++;let r=t;for(;r<u.length-1&&g+e.length>=u[r+1];)r++;const s=g-u[t],a=g+e.length-u[r],c=this._stringLengthToBufferSize(o+t,s);return{term:e,col:c,row:o+t,size:this._stringLengthToBufferSize(o+r,a)-c+n.cols*(r-t)}}}_stringLengthToBufferSize(e,t){const i=this._terminal.buffer.active.getLine(e);if(!i)return 0;for(let r=0;r<t;r++){const e=i.getCell(r);if(!e)break;const s=e.getChars();s.length>1&&(t-=s.length-1);const n=i.getCell(r+1);n&&0===n.getWidth()&&t++}return t}_bufferColsToStringOffset(e,t){const i=this._terminal;let r=e,s=0,n=i.buffer.active.getLine(r);for(;t>0&&n;){for(let e=0;e<t&&e<i.cols;e++){const t=n.getCell(e);if(!t)break;t.getWidth()&&(s+=0===t.getCode()?1:t.getChars().length)}if(r++,n=i.buffer.active.getLine(r),n&&!n.isWrapped)break;t-=i.cols}return s}_translateBufferLineToStringWithWrap(e,t){var i;const r=this._terminal,s=[],n=[0];let o=r.buffer.active.getLine(e);for(;o;){const a=r.buffer.active.getLine(e+1),c=!!a&&a.isWrapped;let l=o.translateToString(!c&&t);if(c&&a){const e=o.getCell(o.length-1);e&&0===e.getCode()&&1===e.getWidth()&&2===(null===(i=a.getCell(0))||void 0===i?void 0:i.getWidth())&&(l=l.slice(0,-1))}if(s.push(l),!c)break;n.push(n[n.length-1]+l.length),e++,o=a}return[s.join(""),n]}_selectResult(e,t,i){const r=this._terminal;if(this._selectedDecoration.clear(),!e)return r.clearSelection(),!1;if(r.select(e.col,e.row,e.size),t){const i=r.registerMarker(-r.buffer.active.baseY-r.buffer.active.cursorY+e.row);if(i){const n=r.registerDecoration({marker:i,x:e.col,width:e.size,backgroundColor:t.activeMatchBackground,layer:"top",overviewRulerOptions:{color:t.activeMatchColorOverviewRuler}});if(n){const r=[];r.push(i),r.push(n.onRender((e=>this._applyStyles(e,t.activeMatchBorder,!0)))),r.push(n.onDispose((()=>(0,s.disposeArray)(r)))),this._selectedDecoration.value={decoration:n,match:e,dispose(){n.dispose()}}}}}if(!i&&(e.row>=r.buffer.active.viewportY+r.rows||e.row<r.buffer.active.viewportY)){let t=e.row-r.buffer.active.viewportY;t-=Math.floor(r.rows/2),r.scrollLines(t)}return!0}_applyStyles(e,t,i){e.classList.contains("xterm-find-result-decoration")||(e.classList.add("xterm-find-result-decoration"),t&&(e.style.outline=`1px solid ${t}`)),i&&e.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(e,t){const i=this._terminal,r=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+e.row);if(!r)return;const n=i.registerDecoration({marker:r,x:e.col,width:e.size,backgroundColor:t.matchBackground,overviewRulerOptions:this._highlightedLines.has(r.line)?void 0:{color:t.matchOverviewRuler,position:"center"}});if(n){const e=[];e.push(r),e.push(n.onRender((e=>this._applyStyles(e,t.matchBorder,!1)))),e.push(n.onDispose((()=>(0,s.disposeArray)(e))))}return n}}e.SearchAddon=o})(),r})()));var sm=rm.exports,nm={exports:{}};!function(e,t){!function(t,i){e.exports=i()}(0,(()=>(()=>{var e={433:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV11=void 0;const i=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],r=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],s=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],n=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let o;function a(e,t){let i,r=0,s=t.length-1;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=r;)if(i=r+s>>1,e>t[i][1])r=i+1;else{if(!(e<t[i][0]))return!0;s=i-1}return!1}t.UnicodeV11=class{constructor(){if(this.version="11",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160);for(let e=0;e<i.length;++e)o.fill(0,i[e][0],i[e][1]+1);for(let e=0;e<s.length;++e)o.fill(2,s[e][0],s[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?o[e]:a(e,r)?0:a(e,n)?2:1}}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Unicode11Addon=void 0;const t=i(433);e.Unicode11Addon=class{activate(e){e.unicode.register(new t.UnicodeV11)}dispose(){}}})(),r})()))}(nm);var om=nm.exports,am={exports:{}};!function(e,t){!function(t,i){e.exports=i()}(self,(()=>(()=>{var e={6:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkComputer=t.WebLinkProvider=void 0,t.WebLinkProvider=class{constructor(e,t,i,r={}){this._terminal=e,this._regex=t,this._handler=i,this._options=r}provideLinks(e,t){const r=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map((e=>(e.leave=this._options.leave,e.hover=(t,i)=>{if(this._options.hover){const{range:r}=e;this._options.hover(t,i,r)}},e)))}};class i{static computeLink(e,t,r,s){const n=new RegExp(t.source,(t.flags||"")+"g"),[o,a]=i._getWindowedLineStrings(e-1,r),c=o.join("");let l;const h=[];for(;l=n.exec(c);){const e=l[0];try{const t=new URL(e),i=decodeURI(t.toString());if(e!==i&&e+"/"!==i)continue}catch(u){continue}const[t,n]=i._mapStrIdx(r,a,0,l.index),[o,c]=i._mapStrIdx(r,t,n,e.length);if(-1===t||-1===n||-1===o||-1===c)continue;const d={start:{x:n+1,y:t+1},end:{x:c,y:o+1}};h.push({range:d,text:e,activate:s})}return h}static _getWindowedLineStrings(e,t){let i,r=e,s=e,n=0,o="";const a=[];if(i=t.buffer.active.getLine(e)){const e=i.translateToString(!0);if(i.isWrapped&&" "!==e[0]){for(n=0;(i=t.buffer.active.getLine(--r))&&n<2048&&(o=i.translateToString(!0),n+=o.length,a.push(o),i.isWrapped&&-1===o.indexOf(" ")););a.reverse()}for(a.push(e),n=0;(i=t.buffer.active.getLine(++s))&&i.isWrapped&&n<2048&&(o=i.translateToString(!0),n+=o.length,a.push(o),-1===o.indexOf(" ")););}return[a,r]}static _mapStrIdx(e,t,i,r){const s=e.buffer.active,n=s.getNullCell();let o=i;for(;r;){const e=s.getLine(t);if(!e)return[-1,-1];for(let i=o;i<e.length;++i){e.getCell(i,n);const o=n.getChars();if(n.getWidth()&&(r-=o.length||1,i===e.length-1&&""===o)){const e=s.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,n),2===n.getWidth()&&(r+=1))}if(r<0)return[t,i]}t++,o=0}return[t,o]}}t.LinkComputer=i}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.WebLinksAddon=void 0;const t=i(6),s=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function n(e,t){const i=window.open();if(i){try{i.opener=null}catch(r){}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}e.WebLinksAddon=class{constructor(e=n,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;const i=this._options,r=i.urlRegex||s;this._linkProvider=this._terminal.registerLinkProvider(new t.WebLinkProvider(this._terminal,r,this._handler,i))}dispose(){var e;null===(e=this._linkProvider)||void 0===e||e.dispose()}}})(),r})()))}(am);var cm=am.exports,lm={exports:{}};!function(e,t){!function(t,i){e.exports=i()}(self,(()=>(()=>{var e={965:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphRenderer=void 0;const s=i(374),n=i(509),o=i(855),a=i(859),c=i(776),l=i(381),h=11,u=h*Float32Array.BYTES_PER_ELEMENT;let d,p=0,f=0,g=0;class m extends a.Disposable{constructor(e,t,i){super(),this._terminal=e,this._gl=t,this._dimensions=i,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const r=this._gl;void 0===n.TextureAtlas.maxAtlasPages&&(n.TextureAtlas.maxAtlasPages=Math.min(32,(0,s.throwIfFalsy)(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS))),n.TextureAtlas.maxTextureSize=(0,s.throwIfFalsy)(r.getParameter(r.MAX_TEXTURE_SIZE))),this._program=(0,s.throwIfFalsy)((0,l.createProgram)(r,"#version 300 es\nlayout (location = 0) in vec2 a_unitquad;\nlayout (location = 1) in vec2 a_cellpos;\nlayout (location = 2) in vec2 a_offset;\nlayout (location = 3) in vec2 a_size;\nlayout (location = 4) in float a_texpage;\nlayout (location = 5) in vec2 a_texcoord;\nlayout (location = 6) in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\nflat out int v_texpage;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texpage = int(a_texpage);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}",function(e){let t="";for(let i=1;i<e;i++)t+=` else if (v_texpage == ${i}) { outColor = texture(u_texture[${i}], v_texcoord); }`;return`#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\nflat in int v_texpage;\n\nuniform sampler2D u_texture[${e}];\n\nout vec4 outColor;\n\nvoid main() {\n  if (v_texpage == 0) {\n    outColor = texture(u_texture[0], v_texcoord);\n  } ${t}\n}`}(n.TextureAtlas.maxAtlasPages))),this.register((0,a.toDisposable)((()=>r.deleteProgram(this._program)))),this._projectionLocation=(0,s.throwIfFalsy)(r.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,s.throwIfFalsy)(r.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,s.throwIfFalsy)(r.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=r.createVertexArray(),r.bindVertexArray(this._vertexArrayObject);const o=new Float32Array([0,0,1,0,0,1,1,1]),c=r.createBuffer();this.register((0,a.toDisposable)((()=>r.deleteBuffer(c)))),r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,o,r.STATIC_DRAW),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const h=new Uint8Array([0,1,2,3]),d=r.createBuffer();this.register((0,a.toDisposable)((()=>r.deleteBuffer(d)))),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,d),r.bufferData(r.ELEMENT_ARRAY_BUFFER,h,r.STATIC_DRAW),this._attributesBuffer=(0,s.throwIfFalsy)(r.createBuffer()),this.register((0,a.toDisposable)((()=>r.deleteBuffer(this._attributesBuffer)))),r.bindBuffer(r.ARRAY_BUFFER,this._attributesBuffer),r.enableVertexAttribArray(2),r.vertexAttribPointer(2,2,r.FLOAT,!1,u,0),r.vertexAttribDivisor(2,1),r.enableVertexAttribArray(3),r.vertexAttribPointer(3,2,r.FLOAT,!1,u,2*Float32Array.BYTES_PER_ELEMENT),r.vertexAttribDivisor(3,1),r.enableVertexAttribArray(4),r.vertexAttribPointer(4,1,r.FLOAT,!1,u,4*Float32Array.BYTES_PER_ELEMENT),r.vertexAttribDivisor(4,1),r.enableVertexAttribArray(5),r.vertexAttribPointer(5,2,r.FLOAT,!1,u,5*Float32Array.BYTES_PER_ELEMENT),r.vertexAttribDivisor(5,1),r.enableVertexAttribArray(6),r.vertexAttribPointer(6,2,r.FLOAT,!1,u,7*Float32Array.BYTES_PER_ELEMENT),r.vertexAttribDivisor(6,1),r.enableVertexAttribArray(1),r.vertexAttribPointer(1,2,r.FLOAT,!1,u,9*Float32Array.BYTES_PER_ELEMENT),r.vertexAttribDivisor(1,1),r.useProgram(this._program);const p=new Int32Array(n.TextureAtlas.maxAtlasPages);for(let s=0;s<n.TextureAtlas.maxAtlasPages;s++)p[s]=s;r.uniform1iv(this._textureLocation,p),r.uniformMatrix4fv(this._projectionLocation,!1,l.PROJECTION_MATRIX),this._atlasTextures=[];for(let u=0;u<n.TextureAtlas.maxAtlasPages;u++){const e=new l.GLTexture((0,s.throwIfFalsy)(r.createTexture()));this.register((0,a.toDisposable)((()=>r.deleteTexture(e.texture)))),r.activeTexture(r.TEXTURE0+u),r.bindTexture(r.TEXTURE_2D,e.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[u]=e}r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(e,t,i,r,s,n,o,a){this._updateCell(this._vertices.attributes,e,t,i,r,s,n,o,a)}_updateCell(e,t,i,r,s,n,a,c,l){p=(i*this._terminal.cols+t)*h,r!==o.NULL_CELL_CODE&&void 0!==r?this._atlas&&(d=c&&c.length>1?this._atlas.getRasterizedGlyphCombinedChar(c,s,n,a,!1):this._atlas.getRasterizedGlyph(r,s,n,a,!1),f=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),s!==l&&d.offset.x>f?(g=d.offset.x-f,e[p]=-(d.offset.x-g)+this._dimensions.device.char.left,e[p+1]=-d.offset.y+this._dimensions.device.char.top,e[p+2]=(d.size.x-g)/this._dimensions.device.canvas.width,e[p+3]=d.size.y/this._dimensions.device.canvas.height,e[p+4]=d.texturePage,e[p+5]=d.texturePositionClipSpace.x+g/this._atlas.pages[d.texturePage].canvas.width,e[p+6]=d.texturePositionClipSpace.y,e[p+7]=d.sizeClipSpace.x-g/this._atlas.pages[d.texturePage].canvas.width,e[p+8]=d.sizeClipSpace.y):(e[p]=-d.offset.x+this._dimensions.device.char.left,e[p+1]=-d.offset.y+this._dimensions.device.char.top,e[p+2]=d.size.x/this._dimensions.device.canvas.width,e[p+3]=d.size.y/this._dimensions.device.canvas.height,e[p+4]=d.texturePage,e[p+5]=d.texturePositionClipSpace.x,e[p+6]=d.texturePositionClipSpace.y,e[p+7]=d.sizeClipSpace.x,e[p+8]=d.sizeClipSpace.y)):e.fill(0,p,p+h-1-2)}clear(){const e=this._terminal,t=e.cols*e.rows*h;this._vertices.count!==t?this._vertices.attributes=new Float32Array(t):this._vertices.attributes.fill(0);let i=0;for(;i<this._vertices.attributesBuffers.length;i++)this._vertices.count!==t?this._vertices.attributesBuffers[i]=new Float32Array(t):this._vertices.attributesBuffers[i].fill(0);this._vertices.count=t,i=0;for(let r=0;r<e.rows;r++)for(let t=0;t<e.cols;t++)this._vertices.attributes[i+9]=t/e.cols,this._vertices.attributes[i+10]=r/e.rows,i+=h}handleResize(){const e=this._gl;e.useProgram(this._program),e.viewport(0,0,e.canvas.width,e.canvas.height),e.uniform2f(this._resolutionLocation,e.canvas.width,e.canvas.height),this.clear()}render(e){if(!this._atlas)return;const t=this._gl;t.useProgram(this._program),t.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const i=this._vertices.attributesBuffers[this._activeBuffer];let r=0;for(let s=0;s<e.lineLengths.length;s++){const t=s*this._terminal.cols*h,n=this._vertices.attributes.subarray(t,t+e.lineLengths[s]*h);i.set(n,r),r+=n.length}t.bindBuffer(t.ARRAY_BUFFER,this._attributesBuffer),t.bufferData(t.ARRAY_BUFFER,i.subarray(0,r),t.STREAM_DRAW);for(let s=0;s<this._atlas.pages.length;s++)this._atlas.pages[s].version!==this._atlasTextures[s].version&&this._bindAtlasPageTexture(t,this._atlas,s);t.drawElementsInstanced(t.TRIANGLE_STRIP,4,t.UNSIGNED_BYTE,0,r/h)}setAtlas(e){this._atlas=e;for(const t of this._atlasTextures)t.version=-1}_bindAtlasPageTexture(e,t,i){e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this._atlasTextures[i].texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.pages[i].canvas),e.generateMipmap(e.TEXTURE_2D),this._atlasTextures[i].version=t.pages[i].version}setDimensions(e){this._dimensions=e}}t.GlyphRenderer=m,r([c.traceCall],m.prototype,"updateCell",null)},742:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RectangleRenderer=void 0;const r=i(374),s=i(859),n=i(310),o=i(381),a=8*Float32Array.BYTES_PER_ELEMENT;class c{constructor(){this.attributes=new Float32Array(160),this.count=0}}let l=0,h=0,u=0,d=0,p=0,f=0,g=0;class m extends s.Disposable{constructor(e,t,i,n){super(),this._terminal=e,this._gl=t,this._dimensions=i,this._themeService=n,this._vertices=new c,this._verticesCursor=new c;const l=this._gl;this._program=(0,r.throwIfFalsy)((0,o.createProgram)(l,"#version 300 es\nlayout (location = 0) in vec2 a_position;\nlayout (location = 1) in vec2 a_size;\nlayout (location = 2) in vec4 a_color;\nlayout (location = 3) in vec2 a_unitquad;\n\nuniform mat4 u_projection;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = a_position + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}","#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}")),this.register((0,s.toDisposable)((()=>l.deleteProgram(this._program)))),this._projectionLocation=(0,r.throwIfFalsy)(l.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=l.createVertexArray(),l.bindVertexArray(this._vertexArrayObject);const h=new Float32Array([0,0,1,0,0,1,1,1]),u=l.createBuffer();this.register((0,s.toDisposable)((()=>l.deleteBuffer(u)))),l.bindBuffer(l.ARRAY_BUFFER,u),l.bufferData(l.ARRAY_BUFFER,h,l.STATIC_DRAW),l.enableVertexAttribArray(3),l.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const d=new Uint8Array([0,1,2,3]),p=l.createBuffer();this.register((0,s.toDisposable)((()=>l.deleteBuffer(p)))),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,p),l.bufferData(l.ELEMENT_ARRAY_BUFFER,d,l.STATIC_DRAW),this._attributesBuffer=(0,r.throwIfFalsy)(l.createBuffer()),this.register((0,s.toDisposable)((()=>l.deleteBuffer(this._attributesBuffer)))),l.bindBuffer(l.ARRAY_BUFFER,this._attributesBuffer),l.enableVertexAttribArray(0),l.vertexAttribPointer(0,2,l.FLOAT,!1,a,0),l.vertexAttribDivisor(0,1),l.enableVertexAttribArray(1),l.vertexAttribPointer(1,2,l.FLOAT,!1,a,2*Float32Array.BYTES_PER_ELEMENT),l.vertexAttribDivisor(1,1),l.enableVertexAttribArray(2),l.vertexAttribPointer(2,4,l.FLOAT,!1,a,4*Float32Array.BYTES_PER_ELEMENT),l.vertexAttribDivisor(2,1),this._updateCachedColors(n.colors),this.register(this._themeService.onChangeColors((e=>{this._updateCachedColors(e),this._updateViewportRectangle()})))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(e){const t=this._gl;t.useProgram(this._program),t.bindVertexArray(this._vertexArrayObject),t.uniformMatrix4fv(this._projectionLocation,!1,o.PROJECTION_MATRIX),t.bindBuffer(t.ARRAY_BUFFER,this._attributesBuffer),t.bufferData(t.ARRAY_BUFFER,e.attributes,t.DYNAMIC_DRAW),t.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,t.UNSIGNED_BYTE,0,e.count)}handleResize(){this._updateViewportRectangle()}setDimensions(e){this._dimensions=e}_updateCachedColors(e){this._bgFloat=this._colorToFloat32Array(e.background),this._cursorFloat=this._colorToFloat32Array(e.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(e){const t=this._terminal,i=this._vertices;let r,s,o,a,c,l,h,u,d,p,f,g=1;for(r=0;r<t.rows;r++){for(o=-1,a=0,c=0,l=!1,s=0;s<t.cols;s++)h=(r*t.cols+s)*n.RENDER_MODEL_INDICIES_PER_CELL,u=e.cells[h+n.RENDER_MODEL_BG_OFFSET],d=e.cells[h+n.RENDER_MODEL_FG_OFFSET],p=!!(67108864&d),(u!==a||d!==c&&(l||p))&&((0!==a||l&&0!==c)&&(f=8*g++,this._updateRectangle(i,f,c,a,o,s,r)),o=s,a=u,c=d,l=p);(0!==a||l&&0!==c)&&(f=8*g++,this._updateRectangle(i,f,c,a,o,t.cols,r))}i.count=g}updateCursor(e){const t=this._verticesCursor,i=e.cursor;if(!i||"block"===i.style)return void(t.count=0);let r,s=0;"bar"!==i.style&&"outline"!==i.style||(r=8*s++,this._addRectangleFloat(t.attributes,r,i.x*this._dimensions.device.cell.width,i.y*this._dimensions.device.cell.height,"bar"===i.style?i.dpr*i.cursorWidth:i.dpr,this._dimensions.device.cell.height,this._cursorFloat)),"underline"!==i.style&&"outline"!==i.style||(r=8*s++,this._addRectangleFloat(t.attributes,r,i.x*this._dimensions.device.cell.width,(i.y+1)*this._dimensions.device.cell.height-i.dpr,i.width*this._dimensions.device.cell.width,i.dpr,this._cursorFloat)),"outline"===i.style&&(r=8*s++,this._addRectangleFloat(t.attributes,r,i.x*this._dimensions.device.cell.width,i.y*this._dimensions.device.cell.height,i.width*this._dimensions.device.cell.width,i.dpr,this._cursorFloat),r=8*s++,this._addRectangleFloat(t.attributes,r,(i.x+i.width)*this._dimensions.device.cell.width-i.dpr,i.y*this._dimensions.device.cell.height,i.dpr,this._dimensions.device.cell.height,this._cursorFloat)),t.count=s}_updateRectangle(e,t,i,r,s,n,a){if(67108864&i)switch(50331648&i){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&i].rgba;break;case 50331648:l=(16777215&i)<<8;break;default:l=this._themeService.colors.foreground.rgba}else switch(50331648&r){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&r].rgba;break;case 50331648:l=(16777215&r)<<8;break;default:l=this._themeService.colors.background.rgba}e.attributes.length<t+4&&(e.attributes=(0,o.expandFloat32Array)(e.attributes,this._terminal.rows*this._terminal.cols*8)),h=s*this._dimensions.device.cell.width,u=a*this._dimensions.device.cell.height,d=(l>>24&255)/255,p=(l>>16&255)/255,f=(l>>8&255)/255,g=1,this._addRectangle(e.attributes,t,h,u,(n-s)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,d,p,f,g)}_addRectangle(e,t,i,r,s,n,o,a,c,l){e[t]=i/this._dimensions.device.canvas.width,e[t+1]=r/this._dimensions.device.canvas.height,e[t+2]=s/this._dimensions.device.canvas.width,e[t+3]=n/this._dimensions.device.canvas.height,e[t+4]=o,e[t+5]=a,e[t+6]=c,e[t+7]=l}_addRectangleFloat(e,t,i,r,s,n,o){e[t]=i/this._dimensions.device.canvas.width,e[t+1]=r/this._dimensions.device.canvas.height,e[t+2]=s/this._dimensions.device.canvas.width,e[t+3]=n/this._dimensions.device.canvas.height,e[t+4]=o[0],e[t+5]=o[1],e[t+6]=o[2],e[t+7]=o[3]}_colorToFloat32Array(e){return new Float32Array([(e.rgba>>24&255)/255,(e.rgba>>16&255)/255,(e.rgba>>8&255)/255,(255&e.rgba)/255])}}t.RectangleRenderer=m},310:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderModel=t.COMBINED_CHAR_BIT_MASK=t.RENDER_MODEL_EXT_OFFSET=t.RENDER_MODEL_FG_OFFSET=t.RENDER_MODEL_BG_OFFSET=t.RENDER_MODEL_INDICIES_PER_CELL=void 0;const r=i(296);t.RENDER_MODEL_INDICIES_PER_CELL=4,t.RENDER_MODEL_BG_OFFSET=1,t.RENDER_MODEL_FG_OFFSET=2,t.RENDER_MODEL_EXT_OFFSET=3,t.COMBINED_CHAR_BIT_MASK=2147483648,t.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,r.createSelectionRenderModel)()}resize(e,i){const r=e*i*t.RENDER_MODEL_INDICIES_PER_CELL;r!==this.cells.length&&(this.cells=new Uint32Array(r),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.JoinedCellData=t.WebglRenderer=void 0;const s=i(820),n=i(274),o=i(627),a=i(457),c=i(56),l=i(374),h=i(345),u=i(859),d=i(147),p=i(782),f=i(855),g=i(776),m=i(965),_=i(742),O=i(310),v=i(733);class y extends u.Disposable{constructor(e,t,i,r,a,d,f,g,m){super(),this._terminal=e,this._characterJoinerService=t,this._charSizeService=i,this._coreBrowserService=r,this._coreService=a,this._decorationService=d,this._optionsService=f,this._themeService=g,this._cursorBlinkStateManager=new u.MutableDisposable,this._charAtlasDisposable=this.register(new u.MutableDisposable),this._model=new O.RenderModel,this._workCell=new p.CellData,this._rectangleRenderer=this.register(new u.MutableDisposable),this._glyphRenderer=this.register(new u.MutableDisposable),this._onChangeTextureAtlas=this.register(new h.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new h.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new h.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new h.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new h.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors((()=>this._handleColorChange()))),this._cellColorResolver=new n.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new v.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,f,this._themeService)],this.dimensions=(0,l.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(f.onOptionChange((()=>this._handleOptionsChanged()))),this._canvas=document.createElement("canvas");const _={antialias:!1,depth:!1,preserveDrawingBuffer:m};if(this._gl=this._canvas.getContext("webgl2",_),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,s.addDisposableDomListener)(this._canvas,"webglcontextlost",(e=>{console.log("webglcontextlost event received"),e.preventDefault(),this._contextRestorationTimeout=setTimeout((()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(e)}),3e3)}))),this.register((0,s.addDisposableDomListener)(this._canvas,"webglcontextrestored",(e=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,o.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()}))),this.register((0,c.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,((e,t)=>this._setCanvasDevicePixelDimensions(e,t)))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,u.toDisposable)((()=>{var e;for(const t of this._renderLayers)t.dispose();null===(e=this._canvas.parentElement)||void 0===e||e.removeChild(this._canvas),(0,o.removeTerminalFromCache)(this._terminal)})))}get textureAtlas(){var e;return null===(e=this._charAtlas)||void 0===e?void 0:e.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(e,t){var i,r,s,n;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const o of this._renderLayers)o.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,null===(i=this._rectangleRenderer.value)||void 0===i||i.setDimensions(this.dimensions),null===(r=this._rectangleRenderer.value)||void 0===r||r.handleResize(),null===(s=this._glyphRenderer.value)||void 0===s||s.setDimensions(this.dimensions),null===(n=this._glyphRenderer.value)||void 0===n||n.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var e;for(const t of this._renderLayers)t.handleBlur(this._terminal);null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.pause(),this._requestRedrawViewport()}handleFocus(){var e;for(const t of this._renderLayers)t.handleFocus(this._terminal);null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.resume(),this._requestRedrawViewport()}handleSelectionChanged(e,t,i){for(const r of this._renderLayers)r.handleSelectionChanged(this._terminal,e,t,i);this._model.selection.update(this._terminal,e,t,i),this._requestRedrawViewport()}handleCursorMove(){var e;for(const t of this._renderLayers)t.handleCursorMove(this._terminal);null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new _.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new m.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var e;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const t=(0,o.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==t&&(this._onChangeTextureAtlas.fire(t.pages[0].canvas),this._charAtlasDisposable.value=(0,u.getDisposeArrayDisposable)([(0,h.forwardEvent)(t.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,h.forwardEvent)(t.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=t,this._charAtlas.warmUp(),null===(e=this._glyphRenderer.value)||void 0===e||e.setAtlas(this._charAtlas)}_clearModel(e){var t;this._model.clear(),e&&(null===(t=this._glyphRenderer.value)||void 0===t||t.clear())}clearTextureAtlas(){var e;null===(e=this._charAtlas)||void 0===e||e.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var e;this._clearModel(!0);for(const t of this._renderLayers)t.reset(this._terminal);null===(e=this._cursorBlinkStateManager.value)||void 0===e||e.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(e){return-1}deregisterCharacterJoiner(e){return!1}renderRows(e,t){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const i of this._renderLayers)i.handleGridChanged(this._terminal,e,t);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(e,t),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new a.CursorBlinkStateManager((()=>{this._requestRedrawCursor()}),this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(e,t){const i=this._core;let r,s,n,o,a,c,l,h,u,d,p,g,m,_=this._workCell;e=w(e,i.rows-1,0),t=w(t,i.rows-1,0);const v=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,y=Math.min(this._terminal.buffer.active.cursorX,i.cols-1);let D=-1;const C=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let x=!1;for(s=e;s<=t;s++)for(n=s+i.buffer.ydisp,o=i.buffer.lines.get(n),this._model.lineLengths[s]=0,a=this._characterJoinerService.getJoinedCharacters(n),g=0;g<i.cols;g++)if(r=this._cellColorResolver.result.bg,o.loadCell(g,_),0===g&&(r=this._cellColorResolver.result.bg),c=!1,l=g,a.length>0&&g===a[0][0]&&(c=!0,h=a.shift(),_=new b(_,o.translateToString(!0,h[0],h[1]),h[1]-h[0]),l=h[1]-1),u=_.getChars(),d=_.getCode(),p=(s*i.cols+g)*O.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(_,g,n),C&&n===v&&(g===y&&(this._model.cursor={x:y,y:this._terminal.buffer.active.cursorY,width:_.getWidth(),style:this._coreBrowserService.isFocused?i.options.cursorStyle||"block":i.options.cursorInactiveStyle,cursorWidth:i.options.cursorWidth,dpr:this._devicePixelRatio},D=y+_.getWidth()-1),g>=y&&g<=D&&(this._coreBrowserService.isFocused&&"block"===(i.options.cursorStyle||"block")||!1===this._coreBrowserService.isFocused&&"block"===i.options.cursorInactiveStyle)&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),d!==f.NULL_CELL_CODE&&(this._model.lineLengths[s]=g+1),(this._model.cells[p]!==d||this._model.cells[p+O.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[p+O.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[p+O.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(x=!0,u.length>1&&(d|=O.COMBINED_CHAR_BIT_MASK),this._model.cells[p]=d,this._model.cells[p+O.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[p+O.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[p+O.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(g,s,d,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,u,r),c))for(_=this._workCell,g++;g<l;g++)m=(s*i.cols+g)*O.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(g,s,f.NULL_CELL_CODE,0,0,0,f.NULL_CELL_CHAR,0),this._model.cells[m]=f.NULL_CELL_CODE,this._model.cells[m+O.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[m+O.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[m+O.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;x&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(e,t){this._canvas.width===e&&this._canvas.height===t||(this._canvas.width=e,this._canvas.height=t,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const e=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:e,end:e})}}t.WebglRenderer=y,r([g.traceCall],y.prototype,"renderRows",null);class b extends d.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function w(e,t,i=0){return Math.max(Math.min(e,t),i)}t.JoinedCellData=b},381:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GLTexture=t.expandFloat32Array=t.createShader=t.createProgram=t.PROJECTION_MATRIX=void 0;const r=i(374);function s(e,t,i){const s=(0,r.throwIfFalsy)(e.createShader(t));if(e.shaderSource(s,i),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS))return s;console.error(e.getShaderInfoLog(s)),e.deleteShader(s)}t.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),t.createProgram=function(e,t,i){const n=(0,r.throwIfFalsy)(e.createProgram());if(e.attachShader(n,(0,r.throwIfFalsy)(s(e,e.VERTEX_SHADER,t))),e.attachShader(n,(0,r.throwIfFalsy)(s(e,e.FRAGMENT_SHADER,i))),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))return n;console.error(e.getProgramInfoLog(n)),e.deleteProgram(n)},t.createShader=s,t.expandFloat32Array=function(e,t){const i=Math.min(2*e.length,t),r=new Float32Array(i);for(let s=0;s<e.length;s++)r[s]=e[s];return r},t.GLTexture=class{constructor(e){this.texture=e,this.version=-1}}},592:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;const r=i(627),s=i(237),n=i(374),o=i(859);class a extends o.Disposable{constructor(e,t,i,r,s,n,a,c){super(),this._container=t,this._alpha=s,this._coreBrowserService=n,this._optionsService=a,this._themeService=c,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors((t=>{this._refreshCharAtlas(e,t),this.reset(e)}))),this.register((0,o.toDisposable)((()=>{this._canvas.remove()})))}_initCanvas(){this._ctx=(0,n.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(e){}handleFocus(e){}handleCursorMove(e){}handleGridChanged(e,t,i){}handleSelectionChanged(e,t,i,r=!1){}_setTransparency(e,t){if(t===this._alpha)return;const i=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(e,this._themeService.colors),this.handleGridChanged(e,0,e.rows-1)}_refreshCharAtlas(e,t){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,r.acquireTextureAtlas)(e,this._optionsService.rawOptions,t,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(e,t){this._deviceCellWidth=t.device.cell.width,this._deviceCellHeight=t.device.cell.height,this._deviceCharWidth=t.device.char.width,this._deviceCharHeight=t.device.char.height,this._deviceCharLeft=t.device.char.left,this._deviceCharTop=t.device.char.top,this._canvas.width=t.device.canvas.width,this._canvas.height=t.device.canvas.height,this._canvas.style.width=`${t.css.canvas.width}px`,this._canvas.style.height=`${t.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(e,this._themeService.colors)}_fillBottomLineAtCells(e,t,i=1){this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(e,t,i,r){this._alpha?this._ctx.clearRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight))}_fillCharTrueColor(e,t,i,r){this._ctx.font=this._getFont(e,!1,!1),this._ctx.textBaseline=s.TEXT_BASELINE,this._clipCell(i,r,t.getWidth()),this._ctx.fillText(t.getChars(),i*this._deviceCellWidth+this._deviceCharLeft,r*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(e,t,i){this._ctx.beginPath(),this._ctx.rect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(e,t,i){return`${i?"italic":""} ${t?e.options.fontWeightBold:e.options.fontWeight} ${e.options.fontSize*this._coreBrowserService.dpr}px ${e.options.fontFamily}`}}t.BaseRenderLayer=a},733:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;const r=i(197),s=i(237),n=i(592);class o extends n.BaseRenderLayer{constructor(e,t,i,r,s,n,o){super(i,e,"link",t,!0,s,n,o),this.register(r.onShowLinkUnderline((e=>this._handleShowLinkUnderline(e)))),this.register(r.onHideLinkUnderline((e=>this._handleHideLinkUnderline(e))))}resize(e,t){super.resize(e,t),this._state=void 0}reset(e){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(e){if(e.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:void 0!==e.fg&&(0,r.is256Color)(e.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[e.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(let t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e}_handleHideLinkUnderline(e){this._clearCurrentLink()}}t.LinkRenderLayer=o},820:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,r){e.addEventListener(t,i,r);let s=!1;return{dispose:()=>{s||(s=!0,e.removeEventListener(t,i,r))}}}},274:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;let i,r=0,s=0,n=!1,o=!1,a=!1;t.CellColorResolver=class{constructor(e,t,i,r,s){this._terminal=e,this._selectionRenderModel=t,this._decorationService=i,this._coreBrowserService=r,this._themeService=s,this.result={fg:0,bg:0,ext:0}}resolve(e,t,c){this.result.bg=e.bg,this.result.fg=e.fg,this.result.ext=268435456&e.bg?e.extended.ext:0,s=0,r=0,o=!1,n=!1,a=!1,i=this._themeService.colors,this._decorationService.forEachDecorationAtCell(t,c,"bottom",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),a=this._selectionRenderModel.isCellSelected(this._terminal,t,c),a&&(s=(this._coreBrowserService.isFocused?i.selectionBackgroundOpaque:i.selectionInactiveBackgroundOpaque).rgba>>8&16777215,o=!0,i.selectionForeground&&(r=i.selectionForeground.rgba>>8&16777215,n=!0)),this._decorationService.forEachDecorationAtCell(t,c,"top",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),o&&(s=a?-16777216&e.bg&-134217729|s|50331648:-16777216&e.bg|s|50331648),n&&(r=-16777216&e.fg&-67108865|r|50331648),67108864&this.result.fg&&(o&&!n&&(r=0==(50331648&this.result.bg)?-134217728&this.result.fg|16777215&i.background.rgba>>8|50331648:-134217728&this.result.fg|67108863&this.result.bg,n=!0),!o&&n&&(s=0==(50331648&this.result.fg)?-67108864&this.result.bg|16777215&i.foreground.rgba>>8|50331648:-67108864&this.result.bg|67108863&this.result.fg,o=!0)),i=void 0,this.result.bg=o?s:this.result.bg,this.result.fg=n?r:this.result.fg}}},627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;const r=i(509),s=i(197),n=[];t.acquireTextureAtlas=function(e,t,i,o,a,c,l,h){const u=(0,s.generateConfig)(o,a,c,l,t,i,h);for(let r=0;r<n.length;r++){const t=n[r],i=t.ownedBy.indexOf(e);if(i>=0){if((0,s.configEquals)(t.config,u))return t.atlas;1===t.ownedBy.length?(t.atlas.dispose(),n.splice(r,1)):t.ownedBy.splice(i,1);break}}for(let r=0;r<n.length;r++){const t=n[r];if((0,s.configEquals)(t.config,u))return t.ownedBy.push(e),t.atlas}const d=e._core,p={atlas:new r.TextureAtlas(document,u,d.unicodeService),config:u,ownedBy:[e]};return n.push(p),p.atlas},t.removeTerminalFromCache=function(e){for(let t=0;t<n.length;t++){const i=n[t].ownedBy.indexOf(e);if(-1!==i){1===n[t].ownedBy.length?(n[t].atlas.dispose(),n.splice(t,1)):n[t].ownedBy.splice(i,1);break}}}},197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;const r=i(160);t.generateConfig=function(e,t,i,s,n,o,a){const c={foreground:o.foreground,background:o.background,cursor:r.NULL_COLOR,cursorAccent:r.NULL_COLOR,selectionForeground:r.NULL_COLOR,selectionBackgroundTransparent:r.NULL_COLOR,selectionBackgroundOpaque:r.NULL_COLOR,selectionInactiveBackgroundTransparent:r.NULL_COLOR,selectionInactiveBackgroundOpaque:r.NULL_COLOR,ansi:o.ansi.slice(),contrastCache:o.contrastCache,halfContrastCache:o.halfContrastCache};return{customGlyphs:n.customGlyphs,devicePixelRatio:a,letterSpacing:n.letterSpacing,lineHeight:n.lineHeight,deviceCellWidth:e,deviceCellHeight:t,deviceCharWidth:i,deviceCharHeight:s,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,drawBoldTextInBrightColors:n.drawBoldTextInBrightColors,minimumContrastRatio:n.minimumContrastRatio,colors:c}},t.configEquals=function(e,t){for(let i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.customGlyphs===t.customGlyphs&&e.lineHeight===t.lineHeight&&e.letterSpacing===t.letterSpacing&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.deviceCharWidth===t.deviceCharWidth&&e.deviceCharHeight===t.deviceCharHeight&&e.drawBoldTextInBrightColors===t.drawBoldTextInBrightColors&&e.minimumContrastRatio===t.minimumContrastRatio&&e.colors.foreground.rgba===t.colors.foreground.rgba&&e.colors.background.rgba===t.colors.background.rgba},t.is256Color=function(e){return 16777216==(50331648&e)||33554432==(50331648&e)}},237:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const r=i(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorBlinkStateManager=void 0,t.CursorBlinkStateManager=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))))}_restartInterval(e=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0})),this._blinkInterval=this._coreBrowserService.window.setInterval((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))}),600)}),e)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;const r=i(374);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const s={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"║":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╒":{1:(e,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╓":{1:(e,t)=>`M${.5-e},1 L${.5-e},.5 L1,.5 M${.5+e},.5 L${.5+e},1`},"╔":{1:(e,t)=>`M1,${.5-t} L${.5-e},${.5-t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╕":{1:(e,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"╖":{1:(e,t)=>`M${.5+e},1 L${.5+e},.5 L0,.5 M${.5-e},.5 L${.5-e},1`},"╗":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5+e},${.5-t} L${.5+e},1`},"╘":{1:(e,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"╙":{1:(e,t)=>`M1,.5 L${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╚":{1:(e,t)=>`M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0 M1,${.5+t} L${.5-e},${.5+t} L${.5-e},0`},"╛":{1:(e,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"╜":{1:(e,t)=>`M0,.5 L${.5+e},.5 L${.5+e},0 M${.5-e},.5 L${.5-e},0`},"╝":{1:(e,t)=>`M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M0,${.5+t} L${.5+e},${.5+t} L${.5+e},0`},"╞":{1:(e,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╟":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1 M${.5+e},.5 L1,.5`},"╠":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╡":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"╢":{1:(e,t)=>`M0,.5 L${.5-e},.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╣":{1:(e,t)=>`M${.5+e},0 L${.5+e},1 M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0`},"╤":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"╥":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},1 M${.5+e},.5 L${.5+e},1`},"╦":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╧":{1:(e,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╨":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╩":{1:(e,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╪":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╫":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╬":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"╮":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"╯":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"╰":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.tryDrawCustomChar=function(e,i,o,l,h,u,d,p){const f=t.blockElementDefinitions[i];if(f)return function(e,t,i,r,s,n){for(let o=0;o<t.length;o++){const a=t[o],c=s/8,l=n/8;e.fillRect(i+a.x*c,r+a.y*l,a.w*c,a.h*l)}}(e,f,o,l,h,u),!0;const g=s[i];if(g)return function(e,t,i,s,o,a){let c=n.get(t);c||(c=new Map,n.set(t,c));const l=e.fillStyle;if("string"!=typeof l)throw new Error(`Unexpected fillStyle type "${l}"`);let h=c.get(l);if(!h){const i=t[0].length,s=t.length,n=document.createElement("canvas");n.width=i,n.height=s;const o=(0,r.throwIfFalsy)(n.getContext("2d")),a=new ImageData(i,s);let u,d,p,f;if(l.startsWith("#"))u=parseInt(l.slice(1,3),16),d=parseInt(l.slice(3,5),16),p=parseInt(l.slice(5,7),16),f=l.length>7&&parseInt(l.slice(7,9),16)||1;else{if(!l.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${l}" when drawing pattern glyph`);[u,d,p,f]=l.substring(5,l.length-1).split(",").map((e=>parseFloat(e)))}for(let e=0;e<s;e++)for(let r=0;r<i;r++)a.data[4*(e*i+r)]=u,a.data[4*(e*i+r)+1]=d,a.data[4*(e*i+r)+2]=p,a.data[4*(e*i+r)+3]=t[e][r]*(255*f);o.putImageData(a,0,0),h=(0,r.throwIfFalsy)(e.createPattern(n,null)),c.set(l,h)}e.fillStyle=h,e.fillRect(i,s,o,a)}(e,g,o,l,h,u),!0;const m=t.boxDrawingDefinitions[i];if(m)return function(e,t,i,r,s,n,o){e.strokeStyle=e.fillStyle;for(const[l,h]of Object.entries(t)){let t;e.beginPath(),e.lineWidth=o*Number.parseInt(l),t="function"==typeof h?h(.15,.15/n*s):h;for(const l of t.split(" ")){const t=l[0],h=a[t];if(!h){console.error(`Could not find drawing instructions for "${t}"`);continue}const u=l.substring(1).split(",");u[0]&&u[1]&&h(e,c(u,s,n,i,r,!0,o))}e.stroke(),e.closePath()}}(e,m,o,l,h,u,p),!0;const _=t.powerlineDefinitions[i];return!!_&&(function(e,t,i,r,s,n,o,l){var h,u;const d=new Path2D;d.rect(i,r,s,n),e.clip(d),e.beginPath();const p=o/12;e.lineWidth=l*p;for(const f of t.d.split(" ")){const o=f[0],d=a[o];if(!d){console.error(`Could not find drawing instructions for "${o}"`);continue}const g=f.substring(1).split(",");g[0]&&g[1]&&d(e,c(g,s,n,i,r,!1,l,(null!==(h=t.leftPadding)&&void 0!==h?h:0)*(p/2),(null!==(u=t.rightPadding)&&void 0!==u?u:0)*(p/2)))}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,_,o,l,h,u,d,p),!0)};const n=new Map;function o(e,t,i=0){return Math.max(Math.min(e,t),i)}const a={C:(e,t)=>e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(e,t)=>e.lineTo(t[0],t[1]),M:(e,t)=>e.moveTo(t[0],t[1])};function c(e,t,i,r,s,n,a,c=0,l=0){const h=e.map((e=>parseFloat(e)||parseInt(e)));if(h.length<2)throw new Error("Too few arguments for instruction");for(let u=0;u<h.length;u+=2)h[u]*=t-c*a-l*a,n&&0!==h[u]&&(h[u]=o(Math.round(h[u]+.5)-.5,t,0)),h[u]+=r+c*a;for(let u=1;u<h.length;u+=2)h[u]*=i,n&&0!==h[u]&&(h[u]=o(Math.round(h[u]+.5)-.5,i,0)),h[u]+=s;return h}},56:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;const r=i(859);t.observeDevicePixelDimensions=function(e,t,i){let s=new t.ResizeObserver((t=>{const r=t.find((t=>t.target===e));if(!r)return;if(!("devicePixelContentBoxSize"in r))return null==s||s.disconnect(),void(s=void 0);const n=r.devicePixelContentBoxSize[0].inlineSize,o=r.devicePixelContentBoxSize[0].blockSize;n>0&&o>0&&i(n,o)}));try{s.observe(e,{box:["device-pixel-content-box"]})}catch(n){s.disconnect(),s=void 0}return(0,r.toDisposable)((()=>null==s?void 0:s.disconnect()))}},374:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||9472<=(t=e)&&t<=9631;var t},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,r=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const s=t[1]-e.buffer.active.viewportY,n=i[1]-e.buffer.active.viewportY,o=Math.max(s,0),a=Math.min(n,e.rows-1);o>=e.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=s,this.viewportEndRow=n,this.viewportCappedStartRow=o,this.viewportCappedEndRow=a,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},509:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;const s=i(237),n=i(860),o=i(374),a=i(160),c=i(345),l=i(485),h=i(385),u=i(147),d=i(855),p=i(776),f={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let g;class m{get pages(){return this._pages}constructor(e,t,i){this._document=e,this._config=t,this._unicodeService=i,this._didWarmUp=!1,this._cacheMap=new l.FourKeyMap,this._cacheMapCombined=new l.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new u.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new c.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new c.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=v(e,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,o.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const e of this.pages)e.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const e=new h.IdleTaskQueue;for(let t=33;t<126;t++)e.enqueue((()=>{if(!this._cacheMap.get(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT)){const e=this._drawToCache(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT);this._cacheMap.set(t,d.DEFAULT_COLOR,d.DEFAULT_COLOR,d.DEFAULT_EXT,e)}}))}beginFrame(){return this._requestClearModel}clearTexture(){if(0!==this._pages[0].currentRow.x||0!==this._pages[0].currentRow.y){for(const e of this._pages)e.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(m.maxAtlasPages&&this._pages.length>=Math.max(4,m.maxAtlasPages)){const e=this._pages.filter((e=>2*e.canvas.width<=(m.maxTextureSize||4096))).sort(((e,t)=>t.canvas.width!==e.canvas.width?t.canvas.width-e.canvas.width:t.percentageUsed-e.percentageUsed));let t=-1,i=0;for(let a=0;a<e.length;a++)if(e[a].canvas.width!==i)t=a,i=e[a].canvas.width;else if(a-t==3)break;const r=e.slice(t,t+4),s=r.map((e=>e.glyphs[0].texturePage)).sort(((e,t)=>e>t?1:-1)),n=this.pages.length-r.length,o=this._mergePages(r,n);o.version++;for(let a=s.length-1;a>=0;a--)this._deletePage(s[a]);this.pages.push(o),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(o.canvas)}const e=new _(this._document,this._textureSize);return this._pages.push(e),this._activePages.push(e),this._onAddTextureAtlasCanvas.fire(e.canvas),e}_mergePages(e,t){const i=2*e[0].canvas.width,r=new _(this._document,i,e);for(const[s,n]of e.entries()){const e=s*n.canvas.width%i,o=Math.floor(s/2)*n.canvas.height;r.ctx.drawImage(n.canvas,e,o);for(const r of n.glyphs)r.texturePage=t,r.sizeClipSpace.x=r.size.x/i,r.sizeClipSpace.y=r.size.y/i,r.texturePosition.x+=e,r.texturePosition.y+=o,r.texturePositionClipSpace.x=r.texturePosition.x/i,r.texturePositionClipSpace.y=r.texturePosition.y/i;this._onRemoveTextureAtlasCanvas.fire(n.canvas);const a=this._activePages.indexOf(n);-1!==a&&this._activePages.splice(a,1)}return r}_deletePage(e){this._pages.splice(e,1);for(let t=e;t<this._pages.length;t++){const e=this._pages[t];for(const t of e.glyphs)t.texturePage--;e.version++}}getRasterizedGlyphCombinedChar(e,t,i,r,s){return this._getFromCacheMap(this._cacheMapCombined,e,t,i,r,s)}getRasterizedGlyph(e,t,i,r,s){return this._getFromCacheMap(this._cacheMap,e,t,i,r,s)}_getFromCacheMap(e,t,i,r,s,n=!1){return g=e.get(t,i,r,s),g||(g=this._drawToCache(t,i,r,s,n),e.set(t,i,r,s,g)),g}_getColorFromAnsiIndex(e){if(e>=this._config.colors.ansi.length)throw new Error("No color found for idx "+e);return this._config.colors.ansi[e]}_getBackgroundColor(e,t,i,r){if(this._config.allowTransparency)return a.NULL_COLOR;let s;switch(e){case 16777216:case 33554432:s=this._getColorFromAnsiIndex(t);break;case 50331648:const e=u.AttributeData.toColorRGB(t);s=a.rgba.toColor(e[0],e[1],e[2]);break;default:s=i?a.color.opaque(this._config.colors.foreground):this._config.colors.background}return s}_getForegroundColor(e,t,i,r,n,o,c,l,h,d){const p=this._getMinimumContrastColor(e,t,i,r,n,o,!1,h,l,d);if(p)return p;let f;switch(n){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&h&&o<8&&(o+=8),f=this._getColorFromAnsiIndex(o);break;case 50331648:const e=u.AttributeData.toColorRGB(o);f=a.rgba.toColor(e[0],e[1],e[2]);break;default:f=c?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(f=a.color.opaque(f)),l&&(f=a.color.multiplyOpacity(f,s.DIM_OPACITY)),f}_resolveBackgroundRgba(e,t,i){switch(e){case 16777216:case 33554432:return this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(e,t,i,r){switch(e){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&r&&t<8&&(t+=8),this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(e,t,i,r,s,n,o,c,l,h){if(1===this._config.minimumContrastRatio||h)return;const u=this._getContrastCache(l),d=u.getColor(e,r);if(void 0!==d)return d||void 0;const p=this._resolveBackgroundRgba(t,i,o),f=this._resolveForegroundRgba(s,n,o,c),g=a.rgba.ensureContrastRatio(p,f,this._config.minimumContrastRatio/(l?2:1));if(!g)return void u.setColor(e,r,null);const m=a.rgba.toColor(g>>24&255,g>>16&255,g>>8&255);return u.setColor(e,r,m),m}_getContrastCache(e){return e?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(e,t,i,r,a=!1){const c="number"==typeof e?String.fromCharCode(e):e,l=Math.min(this._config.deviceCellWidth*Math.max(c.length,2)+4,this._textureSize);this._tmpCanvas.width<l&&(this._tmpCanvas.width=l);const h=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<h&&(this._tmpCanvas.height=h),this._tmpCtx.save(),this._workAttributeData.fg=i,this._workAttributeData.bg=t,this._workAttributeData.extended.ext=r,this._workAttributeData.isInvisible())return f;const d=!!this._workAttributeData.isBold(),p=!!this._workAttributeData.isInverse(),g=!!this._workAttributeData.isDim(),_=!!this._workAttributeData.isItalic(),v=!!this._workAttributeData.isUnderline(),y=!!this._workAttributeData.isStrikethrough(),b=!!this._workAttributeData.isOverline();let w=this._workAttributeData.getFgColor(),D=this._workAttributeData.getFgColorMode(),C=this._workAttributeData.getBgColor(),x=this._workAttributeData.getBgColorMode();if(p){const e=w;w=C,C=e;const t=D;D=x,x=t}const S=this._getBackgroundColor(x,C,p,g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const T=d?this._config.fontWeightBold:this._config.fontWeight,E=_?"italic":"";this._tmpCtx.font=`${E} ${T} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=s.TEXT_BASELINE;const P=1===c.length&&(0,o.isPowerlineGlyph)(c.charCodeAt(0)),k=1===c.length&&(0,o.isRestrictedPowerlineGlyph)(c.charCodeAt(0)),R=this._getForegroundColor(t,x,C,i,D,w,p,g,d,(0,o.excludeFromContrastRatioDemands)(c.charCodeAt(0)));this._tmpCtx.fillStyle=R.css;const A=k?0:4;let L=!1;!1!==this._config.customGlyphs&&(L=(0,n.tryDrawCustomChar)(this._tmpCtx,c,A,A,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let M,F=!P;if(M="number"==typeof e?this._unicodeService.wcwidth(e):this._unicodeService.getStringCellWidth(e),v){this._tmpCtx.save();const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),t=e%2==1?.5:0;if(this._tmpCtx.lineWidth=e,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())F=!1,this._tmpCtx.strokeStyle=`rgb(${u.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{F=!1;let e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&e<8&&(e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(e).css}this._tmpCtx.beginPath();const i=A,r=Math.ceil(A+this._config.deviceCharHeight)-t-(a?2*e:0),s=r+e,n=r+2*e;for(let o=0;o<M;o++){this._tmpCtx.save();const a=i+o*this._config.deviceCellWidth,c=i+(o+1)*this._config.deviceCellWidth,l=a+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r),this._tmpCtx.moveTo(a,n),this._tmpCtx.lineTo(c,n);break;case 3:const i=e<=1?n:Math.ceil(A+this._config.deviceCharHeight-e/2)-t,o=e<=1?r:Math.ceil(A+this._config.deviceCharHeight+e/2)-t,h=new Path2D;h.rect(a,r,this._config.deviceCellWidth,n-r),this._tmpCtx.clip(h),this._tmpCtx.moveTo(a-this._config.deviceCellWidth/2,s),this._tmpCtx.bezierCurveTo(a-this._config.deviceCellWidth/2,o,a,o,a,s),this._tmpCtx.bezierCurveTo(a,i,l,i,l,s),this._tmpCtx.bezierCurveTo(l,o,c,o,c,s),this._tmpCtx.bezierCurveTo(c,i,c+this._config.deviceCellWidth/2,i,c+this._config.deviceCellWidth/2,s);break;case 4:this._tmpCtx.setLineDash([Math.round(e),Math.round(e)]),this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r);break;default:this._tmpCtx.moveTo(a,r),this._tmpCtx.lineTo(c,r)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!L&&this._config.fontSize>=12&&!this._config.allowTransparency&&" "!==c){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const t=this._tmpCtx.measureText(c);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in t&&t.actualBoundingBoxDescent>0){this._tmpCtx.save();const t=new Path2D;t.rect(i,r-Math.ceil(e/2),this._config.deviceCellWidth*M,n-r+Math.ceil(e/2)),this._tmpCtx.clip(t),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=S.css,this._tmpCtx.strokeText(c,A,A+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(b){const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),t=e%2==1?.5:0;this._tmpCtx.lineWidth=e,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(A,A+t),this._tmpCtx.lineTo(A+this._config.deviceCharWidth*M,A+t),this._tmpCtx.stroke()}if(L||this._tmpCtx.fillText(c,A,A+this._config.deviceCharHeight),"_"===c&&!this._config.allowTransparency){let e=O(this._tmpCtx.getImageData(A,A,this._config.deviceCellWidth,this._config.deviceCellHeight),S,R,F);if(e)for(let t=1;t<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(c,A,A+this._config.deviceCharHeight-t),e=O(this._tmpCtx.getImageData(A,A,this._config.deviceCellWidth,this._config.deviceCellHeight),S,R,F),e);t++);}if(y){const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),t=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=e,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(A,A+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.lineTo(A+this._config.deviceCharWidth*M,A+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.stroke()}this._tmpCtx.restore();const $=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let I;if(I=this._config.allowTransparency?function(e){for(let t=0;t<e.data.length;t+=4)if(e.data[t+3]>0)return!1;return!0}($):O($,S,R,F),I)return f;const B=this._findGlyphBoundingBox($,this._workBoundingBox,l,k,L,A);let Q,j;for(;;){if(0===this._activePages.length){const e=this._createNewPage();Q=e,j=e.currentRow,j.height=B.size.y;break}Q=this._activePages[this._activePages.length-1],j=Q.currentRow;for(const e of this._activePages)B.size.y<=e.currentRow.height&&(Q=e,j=e.currentRow);for(let e=this._activePages.length-1;e>=0;e--)for(const t of this._activePages[e].fixedRows)t.height<=j.height&&B.size.y<=t.height&&(Q=this._activePages[e],j=t);if(j.y+B.size.y>=Q.canvas.height||j.height>B.size.y+2){let e=!1;if(Q.currentRow.y+Q.currentRow.height+B.size.y>=Q.canvas.height){let t;for(const e of this._activePages)if(e.currentRow.y+e.currentRow.height+B.size.y<e.canvas.height){t=e;break}if(t)Q=t;else if(m.maxAtlasPages&&this._pages.length>=m.maxAtlasPages&&j.y+B.size.y<=Q.canvas.height&&j.height>=B.size.y&&j.x+B.size.x<=Q.canvas.width)e=!0;else{const t=this._createNewPage();Q=t,j=t.currentRow,j.height=B.size.y,e=!0}}e||(Q.currentRow.height>0&&Q.fixedRows.push(Q.currentRow),j={x:0,y:Q.currentRow.y+Q.currentRow.height,height:B.size.y},Q.fixedRows.push(j),Q.currentRow={x:0,y:j.y+j.height,height:0})}if(j.x+B.size.x<=Q.canvas.width)break;j===Q.currentRow?(j.x=0,j.y+=j.height,j.height=0):Q.fixedRows.splice(Q.fixedRows.indexOf(j),1)}return B.texturePage=this._pages.indexOf(Q),B.texturePosition.x=j.x,B.texturePosition.y=j.y,B.texturePositionClipSpace.x=j.x/Q.canvas.width,B.texturePositionClipSpace.y=j.y/Q.canvas.height,B.sizeClipSpace.x/=Q.canvas.width,B.sizeClipSpace.y/=Q.canvas.height,j.height=Math.max(j.height,B.size.y),j.x+=B.size.x,Q.ctx.putImageData($,B.texturePosition.x-this._workBoundingBox.left,B.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,B.size.x,B.size.y),Q.addGlyph(B),Q.version++,B}_findGlyphBoundingBox(e,t,i,r,s,n){t.top=0;const o=r?this._config.deviceCellHeight:this._tmpCanvas.height,a=r?this._config.deviceCellWidth:i;let c=!1;for(let l=0;l<o;l++){for(let i=0;i<a;i++){const r=l*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[r]){t.top=l,c=!0;break}}if(c)break}t.left=0,c=!1;for(let l=0;l<n+a;l++){for(let i=0;i<o;i++){const r=i*this._tmpCanvas.width*4+4*l+3;if(0!==e.data[r]){t.left=l,c=!0;break}}if(c)break}t.right=a,c=!1;for(let l=n+a-1;l>=n;l--){for(let i=0;i<o;i++){const r=i*this._tmpCanvas.width*4+4*l+3;if(0!==e.data[r]){t.right=l,c=!0;break}}if(c)break}t.bottom=o,c=!1;for(let l=o-1;l>=0;l--){for(let i=0;i<a;i++){const r=l*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[r]){t.bottom=l,c=!0;break}}if(c)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:t.right-t.left+1,y:t.bottom-t.top+1},sizeClipSpace:{x:t.right-t.left+1,y:t.bottom-t.top+1},offset:{x:-t.left+n+(r||s?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-t.top+n+(r||s?1===this._config.lineHeight?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}t.TextureAtlas=m,r([p.traceCall],m.prototype,"_drawToCache",null);class _{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(e){this._glyphs.push(e),this._usedPixels+=e.size.x*e.size.y}constructor(e,t,i){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],i)for(const r of i)this._glyphs.push(...r.glyphs),this._usedPixels+=r._usedPixels;this.canvas=v(e,t,t),this.ctx=(0,o.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function O(e,t,i,r){const s=t.rgba>>>24,n=t.rgba>>>16&255,o=t.rgba>>>8&255,a=i.rgba>>>24,c=i.rgba>>>16&255,l=i.rgba>>>8&255,h=Math.floor((Math.abs(s-a)+Math.abs(n-c)+Math.abs(o-l))/12);let u=!0;for(let d=0;d<e.data.length;d+=4)e.data[d]===s&&e.data[d+1]===n&&e.data[d+2]===o||r&&Math.abs(e.data[d]-s)+Math.abs(e.data[d+1]-n)+Math.abs(e.data[d+2]-o)<h?e.data[d+3]=0:u=!1;return u}function v(e,t,i){const r=e.createElement("canvas");return r.width=t,r.height=i,r}},160:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const r=i(399);let s=0,n=0,o=0,a=0;var c,l,h,u,d,p;function f(e){const t=e.toString(16);return t.length<2?"0"+t:t}function g(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},(p=c||(t.channels=c={})).toCss=function(e,t,i,r){return void 0!==r?`#${f(e)}${f(t)}${f(i)}${f(r)}`:`#${f(e)}${f(t)}${f(i)}`},p.toRgba=function(e,t,i,r=255){return(e<<24|t<<16|i<<8|r)>>>0},function(e){function t(e,t){return a=Math.round(255*t),[s,n,o]=d.toChannels(e.rgba),{css:c.toCss(s,n,o,a),rgba:c.toRgba(s,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,r=t.rgba>>16&255,l=t.rgba>>8&255,h=e.rgba>>24&255,u=e.rgba>>16&255,d=e.rgba>>8&255;return s=h+Math.round((i-h)*a),n=u+Math.round((r-u)*a),o=d+Math.round((l-d)*a),{css:c.toCss(s,n,o),rgba:c.toRgba(s,n,o)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){const r=d.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return d.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[s,n,o]=d.toChannels(t),{css:c.toCss(s,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(l||(t.color=l={})),function(e){let t,i;if(!r.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),d.toColor(s,n,o);case 5:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),d.toColor(s,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const r=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(r)return s=parseInt(r[1]),n=parseInt(r[2]),o=parseInt(r[3]),a=Math.round(255*(void 0===r[5]?1:parseFloat(r[5]))),d.toColor(s,n,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[s,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:c.toRgba(s,n,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const r=e/255,s=t/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(u||(t.rgb=u={})),function(e){function t(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,c=t>>8&255,l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));for(;l<i&&(o>0||a>0||c>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),c-=Math.max(0,Math.ceil(.1*c)),l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));return(o<<24|a<<16|c<<8|255)>>>0}function i(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,c=t>>8&255,l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));for(;l<i&&(o<255||a<255||c<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),c=Math.min(255,c+Math.ceil(.1*(255-c))),l=g(u.relativeLuminance2(o,a,c),u.relativeLuminance2(r,s,n));return(o<<24|a<<16|c<<8|255)>>>0}e.ensureContrastRatio=function(e,r,s){const n=u.relativeLuminance(e>>8),o=u.relativeLuminance(r>>8);if(g(n,o)<s){if(o<n){const o=t(e,r,s),a=g(n,u.relativeLuminance(o>>8));if(a<s){const t=i(e,r,s);return a>g(n,u.relativeLuminance(t>>8))?o:t}return o}const a=i(e,r,s),c=g(n,u.relativeLuminance(a>>8));if(c<s){const i=t(e,r,s);return c>g(n,u.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,r){return{css:c.toCss(e,t,i,r),rgba:c.toRgba(e,t,i,r)}}}(d||(t.rgba=d={})),t.toPaddedHex=f,t.contrastRatio=g},345:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))}},859:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},485:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,r,s,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,s,n)}get(e,t,i,r){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(i,r)}clear(){this._data.clear()}}},399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},385:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const r=i(399);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,r=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),s=e.timeRemaining(),1.5*i>s)return r-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-t))}ms`),void this._start();r=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new r}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class r{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new r(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=r},782:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const r=i(133),s=i(855),n=i(147);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},855:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let r="";for(let s=t;s<i;++s){let t=e[s];t>65535?(t-=65536,r+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):r+=String.fromCharCode(t)}return r},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let r=0,s=0;if(this._interim){const i=e.charCodeAt(s++);56320<=i&&i<=57343?t[r++]=1024*(this._interim-55296)+i-56320+65536:(t[r++]=this._interim,t[r++]=i),this._interim=0}for(let n=s;n<i;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=i)return this._interim=s,r;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[r++]=1024*(s-55296)+o-56320+65536:(t[r++]=s,t[r++]=o)}else 65279!==s&&(t[r++]=s)}return r}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let r,s,n,o,a=0,c=0,l=0;if(this.interim[0]){let r=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const c=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=c-o;for(;l<h;){if(l>=i)return 0;if(n=e[l++],128!=(192&n)){l--,r=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}r||(2===c?s<128?l--:t[a++]=s:3===c?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const h=i-4;let u=l;for(;u<i;){for(;!(!(u<h)||128&(r=e[u])||128&(s=e[u+1])||128&(n=e[u+2])||128&(o=e[u+3]));)t[a++]=r,t[a++]=s,t[a++]=n,t[a++]=o,u+=4;if(r=e[u++],r<128)t[a++]=r;else if(192==(224&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(c=(31&r)<<6|63&s,c<128){u--;continue}t[a++]=c}else if(224==(240&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(c=(15&r)<<12|(63&s)<<6|63&n,c<2048||c>=55296&&c<=57343||65279===c)continue;t[a++]=c}else if(240==(248&r)){if(u>=i)return this.interim[0]=r,a;if(s=e[u++],128!=(192&s)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[u++],128!=(192&n)){u--;continue}if(u>=i)return this.interim[0]=r,this.interim[1]=s,this.interim[2]=n,a;if(o=e[u++],128!=(192&o)){u--;continue}if(c=(7&r)<<18|(63&s)<<12|(63&n)<<6|63&o,c<65536||c>1114111)continue;t[a++]=c}}return a}}},776:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(859),o=i(97),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let c,l=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),c=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.trace.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}debug(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.debug.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}info(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.info.bind(this._optionsService.options.logger))&&void 0!==r?r:console.info,e,t)}warn(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.warn.bind(this._optionsService.options.logger))&&void 0!==r?r:console.warn,e,t)}error(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.error.bind(this._optionsService.options.logger))&&void 0!==r?r:console.error,e,t)}};t.LogService=l=r([s(0,o.IOptionsService)],l),t.setTraceLogger=function(e){c=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const r=i.value;i.value=function(...e){if(c.logLevel!==o.LogLevelEnum.TRACE)return r.apply(this,e);c.trace(`GlyphRenderer#${r.name}(${e.map((e=>JSON.stringify(e))).join(", ")})`);const t=r.apply(this,e);return c.trace(`GlyphRenderer#${r.name} return`,t),t}}},726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",r="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[r]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const s=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");var o,a,c;o=s,c=n,(a=e)[i]===a?a[r].push({id:o,index:c}):(a[r]=[{id:o,index:c}],a[i]=a)};return s.toString=()=>e,t.serviceRegistry.set(e,s),s}},97:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const r=i(726);var s,n;t.IBufferService=(0,r.createDecorator)("BufferService"),t.ICoreMouseService=(0,r.createDecorator)("CoreMouseService"),t.ICoreService=(0,r.createDecorator)("CoreService"),t.ICharsetService=(0,r.createDecorator)("CharsetService"),t.IInstantiationService=(0,r.createDecorator)("InstantiationService"),(n=s||(t.LogLevelEnum=s={}))[n.TRACE=0]="TRACE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.OFF=5]="OFF",t.ILogService=(0,r.createDecorator)("LogService"),t.IOptionsService=(0,r.createDecorator)("OptionsService"),t.IOscLinkService=(0,r.createDecorator)("OscLinkService"),t.IUnicodeService=(0,r.createDecorator)("UnicodeService"),t.IDecorationService=(0,r.createDecorator)("DecorationService")}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.WebglAddon=void 0;const t=i(345),s=i(859),n=i(399),o=i(666),a=i(776);class c extends s.Disposable{constructor(e){if(n.isSafari&&(0,n.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=e,this._onChangeTextureAtlas=this.register(new t.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new t.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new t.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new t.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(e){const i=e._core;if(!e.element)return void this.register(i.onWillOpen((()=>this.activate(e))));this._terminal=e;const r=i.coreService,n=i.optionsService,c=i,l=c._renderService,h=c._characterJoinerService,u=c._charSizeService,d=c._coreBrowserService,p=c._decorationService,f=c._logService,g=c._themeService;(0,a.setTraceLogger)(f),this._renderer=this.register(new o.WebglRenderer(e,h,u,d,r,p,n,g,this._preserveDrawingBuffer)),this.register((0,t.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,t.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,t.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),l.setRenderer(this._renderer),this.register((0,s.toDisposable)((()=>{const t=this._terminal._core._renderService;t.setRenderer(this._terminal._core._createRenderer()),t.handleResize(e.cols,e.rows)})))}get textureAtlas(){var e;return null===(e=this._renderer)||void 0===e?void 0:e.textureAtlas}clearTextureAtlas(){var e;null===(e=this._renderer)||void 0===e||e.clearTextureAtlas()}}e.WebglAddon=c})(),r})()))}(lm);var hm,um,dm,pm=lm.exports,fm={},gm={};hm=gm,Object.defineProperty(hm,"__esModule",{value:!0}),hm.parseInput=hm.InputType=void 0,(dm=um=hm.InputType||(hm.InputType={}))[dm.Text=0]="Text",dm[dm.AltEnter=1]="AltEnter",dm[dm.ArrowUp=2]="ArrowUp",dm[dm.ArrowDown=3]="ArrowDown",dm[dm.ArrowLeft=4]="ArrowLeft",dm[dm.ArrowRight=5]="ArrowRight",dm[dm.Delete=6]="Delete",dm[dm.Backspace=7]="Backspace",dm[dm.CtrlA=8]="CtrlA",dm[dm.CtrlC=9]="CtrlC",dm[dm.CtrlD=10]="CtrlD",dm[dm.CtrlE=11]="CtrlE",dm[dm.CtrlK=12]="CtrlK",dm[dm.CtrlL=13]="CtrlL",dm[dm.CtrlQ=14]="CtrlQ",dm[dm.CtrlS=15]="CtrlS",dm[dm.CtrlU=16]="CtrlU",dm[dm.End=17]="End",dm[dm.Enter=18]="Enter",dm[dm.Home=19]="Home",dm[dm.ShiftEnter=20]="ShiftEnter",dm[dm.UnsupportedControlChar=21]="UnsupportedControlChar",dm[dm.UnsupportedEscape=22]="UnsupportedEscape",hm.parseInput=function(e){return Array.from(function*(e){let t=[];const i=e[Symbol.iterator]();for(let r=i.next();!r.done;r=i.next()){const e=r.value;if(e.length>1){t.push(e);continue}const s=e.charCodeAt(0);if(t.length>0&&(s<32||127===s)&&(yield{inputType:um.Text,data:t},t=[]),27!==s)if(s<32||127===s){let t=um.UnsupportedControlChar;switch(s){case 1:t=um.CtrlA;break;case 3:t=um.CtrlC;break;case 4:t=um.CtrlD;break;case 5:t=um.CtrlE;break;case 11:t=um.CtrlK;break;case 17:t=um.CtrlQ;break;case 19:t=um.CtrlS;break;case 21:t=um.CtrlU;break;case 13:t=um.Enter;break;case 127:t=um.Backspace;break;case 12:t=um.CtrlL}yield{inputType:t,data:[e]}}else t.push(e);else{const e=i.next();if(e.done){t.push("");continue}let r=um.UnsupportedEscape;if("["!==e.value){"\r"===e.value&&(r=um.AltEnter),yield{inputType:r,data:["",e.value]};continue}const s=i.next();if(s.done)continue;if(s.value>="0"&&s.value<="9"){let e=s.value;const t=i.next();if(t.done)return;if(t.value>="0"&&t.value<="9")e+=t.value;else if("~"!==t.value)continue;"3"===e&&(r=um.Delete),yield{inputType:r,data:["","[",e,"~"]};continue}switch(s.value){case"A":r=um.ArrowUp;break;case"B":r=um.ArrowDown;break;case"C":r=um.ArrowRight;break;case"D":r=um.ArrowLeft;break;case"F":r=um.End;break;case"H":r=um.Home;break;case"\r":r=um.AltEnter}yield{inputType:r,data:["","[",s.value]}}}t.length>0&&(yield{inputType:um.Text,data:t})}(e))};var mm={},_m={};Object.defineProperty(_m,"__esModule",{value:!0}),_m.LineBuffer=void 0;_m.LineBuffer=class{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(e,t){this.buf=e,this.pos=t}insert(e){const t=e.length,i=this.pos===this.buf.length;return this.buf=i?this.buf+e:this.buf.slice(0,this.pos)+e+this.buf.slice(this.pos),this.pos+=t,i}moveBack(e){const t=this.prevPos(e);return void 0!==t&&(this.pos=t,!0)}moveForward(e){const t=this.nextPos(e);return void 0!==t&&(this.pos=t,!0)}moveHome(){const e=this.startOfLine();return this.pos>e&&(this.pos=e,!0)}moveEnd(){const e=this.endOfLine();return this.pos!==e&&(this.pos=e,!0)}startOfLine(){const e=this.buf.slice(0,this.pos).lastIndexOf("\n");return-1!==e?e+1:0}endOfLine(){const e=this.buf.slice(this.pos).indexOf("\n");return-1!==e?this.pos+e:this.buf.length}moveLineUp(e){const t=this.buf.slice(0,this.pos).lastIndexOf("\n");if(-1===t)return!1;const i=[...this.buf.slice(t+1,this.pos)].length;let r=this.buf.slice(0,t).lastIndexOf("\n");-1===r?r=0:r+=1;let s=t;for(let a=1;a<e&&0!==r;a++)s=r-1,r=this.buf.slice(0,s).lastIndexOf("\n"),-1===r?r=0:r+=1;const n=[...this.buf.slice(r,s)].slice(0,i);let o=t;return n.length>0&&(o=n.map((e=>e.length)).reduce(((e,t)=>e+t),0),o=r+o),this.pos=o,!0}moveLineDown(e){const t=this.buf.slice(this.pos).indexOf("\n");if(-1===t)return!1;let i=this.buf.slice(0,this.pos).lastIndexOf("\n");-1===i?i=0:i+=1;const r=[...this.buf.slice(i,this.pos)].length;let s=this.pos+t+1,n=this.buf.slice(s).indexOf("\n");n=-1===n?this.buf.length:s+n;for(let a=1;a<e&&n!==this.buf.length;a++)s=n+1,n=this.buf.slice(s).indexOf("\n"),n=-1===n?this.buf.length:s+n;const o=[...this.buf.slice(s,n)];return r<o.length?this.pos=o.slice(0,r).map((e=>e.length)).reduce(((e,t)=>e+t),0)+s:this.pos=n,!0}set_pos(e){this.pos=e}prevPos(e){if(0===this.pos)return;const t=this.buf.slice(0,this.pos);return this.pos-[...t].slice(-e).map((e=>e.length)).reduce(((e,t)=>e+t),0)}nextPos(e){if(this.pos===this.buf.length)return;const t=this.buf.slice(this.pos);return this.pos+[...t].slice(0,e).map((e=>e.length)).reduce(((e,t)=>e+t),0)}backspace(e){const t=this.prevPos(e);return void 0!==t&&(this.buf=this.buf.slice(0,t)+this.buf.slice(this.pos),this.pos=t,!0)}delete(e){const t=this.nextPos(e);return void 0!==t&&(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(t),!0)}deleteEndOfLine(){if(0==this.buf.length||this.pos==this.buf.length)return!1;const e=this.pos,t=this.endOfLine();return e==t?this.delete(1):this.buf=this.buf.slice(0,e)+this.buf.slice(t),!0}};var Om={exports:{}};const vm=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")};var ym={exports:{}};const bm=e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141));ym.exports=bm,ym.exports.default=bm;var wm=ym.exports;const Dm=e=>"string"==typeof e?e.replace(vm(),""):e,Cm=wm,xm=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},Sm=e=>{if("string"!=typeof e||0===e.length)return 0;if(0===(e=Dm(e)).length)return 0;e=e.replace(xm(),"  ");let t=0;for(let i=0;i<e.length;i++){const r=e.codePointAt(i);r<=31||r>=127&&r<=159||(r>=768&&r<=879||(r>65535&&i++,t+=Cm(r)?2:1))}return t};Om.exports=Sm,Om.exports.default=Sm;var Tm=Om.exports,Em=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mm,"__esModule",{value:!0}),mm.State=mm.Layout=mm.Position=void 0;const Pm=_m,km=Em(Tm);class Rm{constructor(e,t){this.row=void 0!==e?e:0,this.col=void 0!==t?t:0}}mm.Position=Rm;class Am{constructor(e){this.promptSize=e,this.cursor=new Rm,this.end=new Rm}}mm.Layout=Am;mm.State=class{constructor(e,t,i,r){this.line=new Pm.LineBuffer,this.highlighting=!1,this.prompt=e,this.tty=t,this.highlighter=i,this.history=r,this.promptSize=t.calculatePosition(e,new Rm),this.layout=new Am(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):!!this.highlighting&&(this.highlighting=!1,!0)}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new Rm,this.layout.end=new Rm,this.refresh()}editInsert(e){const t=this.line.insert(e),i=e.includes("\n");if(t&&!i){const t=(0,km.default)(e);t>0&&this.layout.cursor.col+t<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=t,this.layout.end.col+=t,this.tty.write(e)):this.refresh()}else this.refresh()}update(e){this.line.update(e,e.length),this.refresh()}editBackspace(e){this.line.backspace(e)&&this.refresh()}editDelete(e){this.line.delete(e)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const e=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,e,this.highlighter),this.layout=e}moveCursorBack(e){this.line.moveBack(e)&&this.moveCursor()}moveCursorForward(e){this.line.moveForward(e)&&this.moveCursor()}moveCursorUp(e){this.line.moveLineUp(e)?this.moveCursor():this.previousHistory()}moveCursorDown(e){this.line.moveLineDown(e)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(-1===this.history.cursor&&this.line.length()>0)return;const e=this.history.prev();void 0!==e&&this.update(e)}nextHistory(){if(-1===this.history.cursor)return;const e=this.history.next();void 0!==e?this.update(e):this.update("")}moveCursor(){const e=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);e!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,e),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},e)))}};var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.History=void 0;Lm.History=class{constructor(e){this.entries=[],this.cursor=-1,this.maxEntries=e}saveToLocalStorage(){const e=null===window||void 0===window?void 0:window.localStorage;void 0!==e&&e.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const e=null===window||void 0===window?void 0:window.localStorage;if(void 0!==e){const i=e.getItem("history");if(null==i)return;try{const t=JSON.parse(i);Array.isArray(t)&&void 0===t.find((e=>"string"!=typeof e))?this.entries=t:(this.entries=[],e.setItem("history","[]"))}catch(t){this.entries=[],e.setItem("history","[]")}}}append(e){this.resetCursor(),this.entries.includes(e)?(this.entries.splice(this.entries.indexOf(e),1),this.entries.unshift(e)):this.entries.unshift(e),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(-1!==this.cursor)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}};var Mm={},Fm=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.Tty=void 0;const $m=Fm(Tm);Mm.Tty=class{constructor(e,t,i,r){this.tabWidth=i,this.col=e,this.row=t,this.out=r}write(e){return this.out.write(e)}print(e){return this.out.print(e)}println(e){return this.out.println(e)}clearScreen(){this.out.write("[H[2J")}calculatePosition(e,t){const i=Object.assign({},t);let r=0;return[...e].forEach((e=>{if("\n"===e)return i.row+=1,void(i.col=0);let t=0;if("\t"===e)t=this.tabWidth-i.col%this.tabWidth;else{let i;[i,r]=function(e,t){return 1===t?"["===e?[0,2]:[0,0]:2===t?";"===e||e[0]>="0"&&e[0]<="9"?[0,t]:[0,0]:""===e?[0,1]:"\n"===e?[0,t]:[(0,$m.default)(e),t]}(e,r),t=i}i.col+=t,i.col>this.col&&(i.row+=1,i.col=t)})),i.col===this.col&&(i.col=0,i.row+=1),i}computeLayout(e,t){const i=Object.assign({},e),r=t.pos,s=this.calculatePosition(t.buf.slice(0,t.pos),e);return{promptSize:i,cursor:s,end:r===t.buf.length?Object.assign({},s):this.calculatePosition(t.buf.slice(r),s)}}refreshLine(e,t,i,r,s){const n=r.cursor,o=r.end;this.clearOldRows(i),this.write(s.highlightPrompt(e)),this.write(s.highlight(t.buf,t.pos)),0===o.col&&o.row>0&&"\n"!==t.buf[t.buf.length-1]&&this.write("\n");const a=o.row-n.row;a>0&&this.write(`[${a}A`),n.col>0?this.write(`\r[${n.col}C`):this.write("\r")}clearOldRows(e){const t=e.cursor.row,i=e.end.row,r=Math.max(i-t,0);r>0&&this.write(`[${r}B`);for(let s=0;s<i;s++)this.write("\r[0K[A");this.write("\r[0K")}moveCursor(e,t){if(t.row>e.row){const i=t.row-e.row;1===i?this.write("[B"):this.write(`[${i}B`)}else if(t.row<e.row){const i=e.row-t.row;1===i?this.write("[A"):this.write(`[${i}A`)}if(t.col>e.col){const i=t.col-e.col;1===i?this.write("[C"):this.write(`[${i}C`)}else if(t.col<e.col){const i=e.col-t.col;1===i?this.write("[D"):this.write(`[${i}D`)}}};var Im={};Object.defineProperty(Im,"__esModule",{value:!0}),Im.IdentityHighlighter=void 0;Im.IdentityHighlighter=class{highlight(e,t){return e}highlightPrompt(e){return e}highlightChar(e,t){return!1}},Object.defineProperty(fm,"__esModule",{value:!0});var Bm=fm.Readline=void 0;const Qm=gm,jm=mm,qm=Lm,Wm=Mm,Nm=Im;Bm=fm.Readline=class{constructor(){this.highlighter=new Nm.IdentityHighlighter,this.history=new qm.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new jm.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=e=>{},this.history.restoreFromLocalStorage()}activate(e){this.term=e,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach((e=>e.dispose()))}appendHistory(e){this.history.append(e)}setHighlighter(e){this.highlighter=e}setCheckHandler(e){this.checkHandler=e}setCtrlCHandler(e){this.ctrlCHandler=e}setPauseHandler(e){this.pauseHandler=e}writeReady(){return!this.highWater}write(e){const t=(e="\n"===e?"\r\n":(e=e.replace(/^\n/,"\r\n")).replace(/([^\r])\n/g,"$1\r\n")).length;this.watermark+=t,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(e,(()=>{this.watermark=Math.max(this.watermark-t,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)}))}print(e){return this.write(e)}println(e){return this.write(e+"\r\n")}output(){return this}tty(){var e,t;return void 0!==(null===(t=null===(e=this.term)||void 0===e?void 0:e.options)||void 0===t?void 0:t.tabStopWidth)?new Wm.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new Wm.Tty(0,0,8,this.output())}read(e){return new Promise(((t,i)=>{void 0!==this.term?(this.state=new jm.State(e,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:e,resolve:t,reject:i}):i("addon is not active")}))}handleKeyEvent(e){return"Enter"!==e.key||!e.shiftKey||("keydown"===e.type&&this.readKey({inputType:Qm.InputType.ShiftEnter,data:["\r"]}),!1)}readData(e){const t=(0,Qm.parseInput)(e);t.length>1||t[0].inputType===Qm.InputType.Text&&t[0].data.length>1?this.readPaste(t):this.readKey(t[0])}readPaste(e){const t=e.map((e=>e.inputType===Qm.InputType.Enter?{inputType:Qm.InputType.Text,data:["\n"]}:e));for(const i of t)i.inputType===Qm.InputType.Text?this.state.editInsert(i.data.join("")):this.readKey(i)}readKey(e){var t,i,r;if(void 0!==this.activeRead)switch(e.inputType){case Qm.InputType.Text:this.state.editInsert(e.data.join(""));break;case Qm.InputType.AltEnter:case Qm.InputType.ShiftEnter:this.state.editInsert("\n");break;case Qm.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),null===(t=this.term)||void 0===t||t.write("\r\n"),this.history.append(this.state.buffer()),null===(i=this.activeRead)||void 0===i||i.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert("\n");break;case Qm.InputType.CtrlC:this.state.moveCursorToEnd(),null===(r=this.term)||void 0===r||r.write("^C\r\n"),this.state=new jm.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case Qm.InputType.CtrlS:this.pauseHandler(!1);break;case Qm.InputType.CtrlU:this.state.update("");break;case Qm.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case Qm.InputType.CtrlQ:this.pauseHandler(!0);break;case Qm.InputType.CtrlL:this.state.clearScreen();break;case Qm.InputType.Home:case Qm.InputType.CtrlA:this.state.moveCursorHome();break;case Qm.InputType.End:case Qm.InputType.CtrlE:this.state.moveCursorEnd();break;case Qm.InputType.Backspace:this.state.editBackspace(1);break;case Qm.InputType.Delete:case Qm.InputType.CtrlD:this.state.editDelete(1);break;case Qm.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case Qm.InputType.ArrowRight:this.state.moveCursorForward(1);break;case Qm.InputType.ArrowUp:this.state.moveCursorUp(1);break;case Qm.InputType.ArrowDown:this.state.moveCursorDown(1);case Qm.InputType.UnsupportedControlChar:case Qm.InputType.UnsupportedEscape:}else switch(e.inputType){case Qm.InputType.CtrlC:this.ctrlCHandler();break;case Qm.InputType.CtrlL:this.write("[H[2J")}}};class Um{_terminal;activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const i=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(r.getPropertyValue("height")),n=Math.max(0,parseInt(r.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=s-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),c=n-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(c/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}}const zm="xterm-search-bar__addon";class Xm{options;terminal;searchAddon;searchBarElement;searchKey;constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement)return this.searchBarElement.style.visibility="visible",void this.searchBarElement.querySelector("input").select();this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML='\n       <input type="text" class="search-bar__input" name="search-bar__input"/>\n       <button class="search-bar__btn prev"></button>\n       <button class="search-bar__btn next"></button>\n       <button class="search-bar__btn close"></button>\n    ',e.className=zm;const t=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(t.style.position)||(t.style.position="relative"),t.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",(()=>{this.hidden()})),this.on(".search-bar__btn.next","click",(()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})})),this.on(".search-bar__btn.prev","click",(()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})})),this.on(".search-bar__input","keyup",(e=>{this.searchKey=e.target.value,this.searchAddon.findNext(this.searchKey,{incremental:"Enter"!==e.key})})),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,t,i){const r=this.terminal.element.parentElement;r.addEventListener(t,(t=>{let s=t.target;for(;s!==document.querySelector(e);){if(s===r){s=null;break}s=s.parentElement}s===document.querySelector(e)&&(i.call(this,t),t.stopPropagation())}))}addNewStyle(e){let t=document.getElementById(zm);t||(t=document.createElement("style"),t.type="text/css",t.id=zm,document.getElementsByTagName("head")[0].appendChild(t)),t.appendChild(document.createTextNode(e))}}class Ym{terminal;scrollDownBtn;core;viewport;isScrolledDown=!0;activate(e){this.terminal=e,this.core=e._core,this.viewport=this.core.viewport._viewportElement,this.createElement()}handleScrollHelper(e){this.isScrolledDown=e,e?this.hide():this.show()}createElement(){let e=document.createElement("div");e.classList.add("xterm-scroll-down-helper");let t=document.createElement("span");e.appendChild(t),this.terminal.element.parentElement.insertAdjacentElement("afterend",e),this.scrollDownBtn=e,e.addEventListener("click",(()=>{this.hide()}));let i=document.createElement("div");i.classList.add("xterm-scroll-checker-wrapper");let r=document.createElement("div");r.classList.add("xterm-scroll-checker"),i.appendChild(r),this.core._viewportScrollArea.insertAdjacentElement("beforeend",i);new IntersectionObserver((([{isIntersecting:e}])=>{this.handleScrollHelper(e)}),{threshold:0}).observe(r)}dispose(){}show(){this.terminal&&this.terminal.element&&this.scrollDownBtn&&"visible"!=this.scrollDownBtn.style.visibility&&(this.scrollDownBtn.style.visibility="visible")}hide(){this.terminal.scrollToBottom(),this.scrollDownBtn&&"hidden"!=this.scrollDownBtn.style.visibility&&(this.scrollDownBtn.style.visibility="hidden")}}var Vm={exports:{}};!function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function r(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function s(e){var t=e.g.offsetWidth,i=t+100;return e.j.style.width=i+"px",e.i.scrollLeft=i,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function n(e,i){function r(){var e=n;s(e)&&null!==e.g.parentNode&&i(e.l)}var n=e;t(e.h,r),t(e.i,r),s(e)}function o(e,t,i){t=t||{},i=i||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=i}var a=null,c=null,l=null,h=null;function u(e){return null===h&&(h=!!e.document.fonts),h}function d(e,t){var i=e.style,r=e.weight;if(null===l){var s=document.createElement("div");try{s.style.font="condensed 100px sans-serif"}catch(n){}l=""!==s.style.font}return[i,r,l?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var s=this,o=e||"BESbswy",l=0,h=t||3e3,p=(new Date).getTime();return new Promise((function(e,t){if(u(s.context)&&!function(e){return null===c&&(u(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!e&&603>parseInt(e[1],10)):c=!1),c}(s.context)){var f=new Promise((function(e,t){!function i(){(new Date).getTime()-p>=h?t(Error(h+"ms timeout exceeded")):s.context.document.fonts.load(d(s,'"'+s.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),g=new Promise((function(e,t){l=setTimeout((function(){t(Error(h+"ms timeout exceeded"))}),h)}));Promise.race([g,f]).then((function(){clearTimeout(l),e(s)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=m&&-1!=_||-1!=m&&-1!=O||-1!=_&&-1!=O)&&((t=m!=_&&m!=O&&_!=O)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(m==v&&_==v&&O==v||m==y&&_==y&&O==y||m==b&&_==b&&O==b)),t=!t),t&&(null!==w.parentNode&&w.parentNode.removeChild(w),clearTimeout(l),e(s))}var u=new i(o),f=new i(o),g=new i(o),m=-1,_=-1,O=-1,v=-1,y=-1,b=-1,w=document.createElement("div");w.dir="ltr",r(u,d(s,"sans-serif")),r(f,d(s,"serif")),r(g,d(s,"monospace")),w.appendChild(u.g),w.appendChild(f.g),w.appendChild(g.g),s.context.document.body.appendChild(w),v=u.g.offsetWidth,y=f.g.offsetWidth,b=g.g.offsetWidth,function e(){if((new Date).getTime()-p>=h)null!==w.parentNode&&w.parentNode.removeChild(w),t(Error(h+"ms timeout exceeded"));else{var i=s.context.document.hidden;!0!==i&&void 0!==i||(m=u.g.offsetWidth,_=f.g.offsetWidth,O=g.g.offsetWidth,c()),l=setTimeout(e,50)}}(),n(u,(function(e){m=e,c()})),r(u,d(s,'"'+s.family+'",sans-serif')),n(f,(function(e){_=e,c()})),r(f,d(s,'"'+s.family+'",serif')),n(g,(function(e){O=e,c()})),r(g,d(s,'"'+s.family+'",monospace'))}))}))},e.exports=o}()}(Vm);const Hm=e(Vm.exports);var Gm=Object.defineProperty,Zm=Object.getOwnPropertyDescriptor,Jm=(e,t,i,r)=>{for(var s,n=r>1?void 0:r?Zm(t,i):t,o=e.length-1;o>=0;o--)(s=e[o])&&(n=(r?s(t,i,n):s(n))||n);return r&&n&&Gm(t,i,n),n};const Km="[1A";class e_ extends W.Terminal{searchAddon;webglAddon;canvasAddon;webLinksAddon;ligaturesAddon;readlineAddon;mpyc;core;isLivePanelVisible=!0;livePanel="";livePanelLines=0;currentLivePanelMessage="";terminalPanel;scrollArea;viewportElement;screenElement;horizontalScrollAddon;scrollDownAddon;searchBarAddon;fitAddon;constructor(e,t){let i=r(e);super({screenReaderMode:!1,cols:85,rows:20,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,scrollback:1e6,scrollOnUserInput:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.mpyc=t,this.core=this._core,this.terminalPanel=r(".terminal-split-pane"),this.fitAddon=new Um,this.searchAddon=new sm.SearchAddon,this.searchBarAddon=new Xm({searchAddon:this.searchAddon}),this.webLinksAddon=new cm.WebLinksAddon,this.readlineAddon=new Bm,this.readlineAddon.setCheckHandler((e=>!e.trimEnd().endsWith("&&"))),this.scrollDownAddon=new Ym,this.horizontalScrollAddon=new Kg,this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new pm.WebglAddon,this.loadAddon(this.webglAddon)}catch(n){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",n),this.canvasAddon=new im.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new om.Unicode11Addon),this.unicode.activeVersion="11";let s=new ResizeObserver((()=>{this.fit()}));(function(e){const t=e.options.fontFamily,i=new Hm(t).load(null,5e3),r=new Hm(t,{weight:"bold"}).load(null,5e3);return Promise.all([i,r]).then((()=>{}),(()=>{e.options.fontFamily="Courier"}))})(this).then((()=>{this.open(i),this.viewportElement=this.core.viewport._viewportElement,this.scrollArea=this.core.viewport._scrollArea,r(`${e} textarea`).readOnly=!0,this.fit(),this.onResize((e=>{this.updateTermSizeEnv()})),s.observe(this.terminalPanel),this.loadAddon(this.scrollDownAddon),this.loadAddon(this.horizontalScrollAddon)})),this.mpyc.runtime.setReadlineFn((e=>this.readlineAddon.read(e))),this.attachCustomKeyEventHandler((e=>{if("keydown"===e.type){if(e.ctrlKey&&"c"==e.key&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if("h"==e.key)return this.mpyc.runtime.toggleStats(),e.preventDefault(),!1;if("r"==e.key)return this.mpyc.runtime.resetStats(),e.preventDefault(),!1;if(e.ctrlKey&&"f"==e.key)return this.searchBarAddon.show(),e.preventDefault(),!1}return!0})),document.addEventListener("keyup",(e=>{"Escape"==e.key&&this.searchBarAddon.hidden()}))}time(){return Xa.cyan.dim(`[${(new Date).toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(Xa.grey(e),Xa.gray("⚒"))}infoChar=Va?"ⓘ":"🛈";info(e){this._log(Xa.greenBright(e),Xa.greenBright(this.infoChar))}_log(e,t=" "){e=`${this.time()}  ${t}  ${e}`,this._write_liveln(e)}_write_liveln(e,t="\n"){this._write_live(e,t)}_write_live(e,t=""){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e+t),""!=this.livePanel&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return""==e?"":this._controlLines(this._height(e)-1)}clearLines(e){this.writeln(this._controlLines(e))}_controlLines(e){return`\r${Km}${(Km+"[2K").repeat(e)}`}live(e){this.isLivePanelVisible&&(e=`\n${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,Xa.green(Xa.symbols.check))}warn(e){this._log(Xa.italic(e),Xa.yellow(Xa.symbols.warning))}chatMe(e){e=`${Xa.green("Me")}: ${e}`,this._log(e)}chat(e,t){t=`${Xa.peerID(ec(e.substring(0,8)))}: ${t}`,this._log(t)}error(e){this._log(Xa.redBright(e),Xa.red(Xa.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${Xa.red(Xa.symbols.cross)}  ${Xa.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}fit(){const e=this.scrollDownAddon.isScrolledDown,t=this.fitAddon.proposeDimensions();if(!t||!this||isNaN(t.cols)||isNaN(t.rows))return;if(t.rows=Math.max(t.rows,12),t.cols=Math.max(t.cols,this.cols),t.cols==this.cols&&t.rows==this.rows)return;this._core._renderService.clear(),console.log("resizing terminal to ",t.cols,t.rows,e),this.resize(t.cols,t.rows),this.refresh(0,this.rows-1),e&&this.scrollToBottom()}updateTermSizeEnv(){console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})}}Jm([Ja()],e_.prototype,"fit",1),Jm([Ja()],e_.prototype,"updateTermSizeEnv",1);const t_="0.6.2";function i_(){var e;e=18,console.log("Storage schema generation:",localStorage.gen),localStorage.gen||=e,localStorage.gen<e&&(console.log(`Clearing schema, latest generation: ${e}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=e);let t=Yg("myPeerID",Jg);document.title+=` - (${Jg})`;let i=new de((()=>{try{return new $a(t)}catch(e){return console.warn(e),new $a}}),(()=>new Tr({config:{fetch:[{from:"./py/",to_folder:"./",files:[`mpyc_web-${t_}-py3-none-any.whl`,"demo.py"]}],packages:[`emfs:./mpyc_web-${t_}-py3-none-any.whl`]}})));new Rf(i,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",qrGenBtnSelector:"#show-qr",qrScanInputSelector:"#qrCodeFileInput",qrScanBtnSelector:"#scanQRCodeButton",splitPanelSelectors:[".split-panel-editor",".terminal-split-pane"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})}document.addEventListener("DOMContentLoaded",(function(){i_()}),!1);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-a5QDF3FJ.js.map
