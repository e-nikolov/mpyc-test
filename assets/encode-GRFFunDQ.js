let ke;try{ke=new TextDecoder}catch{}let y,X,o=0;const it=105,st=57342,lt=57343,Ke=57337,Pe=6,v={};let S={},B,xe,ye=0,se=0,V,z,_=[],Oe=[],N,j,ie,Le={useRecords:!1,mapsAsObjects:!0},le=!1,Ye=2;try{new Function("")}catch{Ye=1/0}class fe{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[n,s]of Object.entries(t.keyMap))this.mapKey.set(s,n)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let n=new Map;for(let[s,f]of Object.entries(t))n.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,f);return n}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,f]of Object.entries(this._keyMap))this._mapKey.set(f,s)}let n={};return t.forEach((s,f)=>n[L(this._mapKey.has(f)?this._mapKey.get(f):f)]=s),n}mapDecode(t,n){let s=this.decode(t);if(this._keyMap)switch(s.constructor.name){case"Array":return s.map(f=>this.decodeKeys(f))}return s}decode(t,n){if(y)return tt(()=>(Be(),this?this.decode(t,n):fe.prototype.decode.call(Le,t,n)));X=n>-1?n:t.length,o=0,se=0,xe=null,V=null,y=t;try{j=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw y=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof fe){if(S=this,N=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return B=this.structures,ue();(!B||B.length>0)&&(B=[])}else S=Le,(!B||B.length>0)&&(B=[]),N=null;return ue()}decodeMultiple(t,n){let s,f=0;try{let a=t.length;le=!0;let d=this?this.decode(t,a):Ve.decode(t,a);if(n){if(n(d)===!1)return;for(;o<a;)if(f=o,n(ue())===!1)return}else{for(s=[d];o<a;)f=o,s.push(ue());return s}}catch(a){throw a.lastPosition=f,a.values=s,a}finally{le=!1,Be()}}}function ue(){try{let e=E();if(V){if(o>=V.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}o=V.postBundlePosition,V=null}if(o==X)B=null,y=null,z&&(z=null);else if(o>X){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!le)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Be(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function E(){let e=y[o++],t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=y[o++];break;case 25:if(t==7)return ut();e=j.getUint16(o),o+=2;break;case 26:if(t==7){let n=j.getFloat32(o);if(S.useFloat32>2){let s=De[(y[o]&127)<<1|y[o+1]>>7];return o+=4,(s*n+(n>0?.5:-.5)>>0)/s}return o+=4,n}e=j.getUint32(o),o+=4;break;case 27:if(t==7){let n=j.getFloat64(o);return o+=8,n}if(t>1){if(j.getUint32(o)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=j.getUint32(o+4)}else S.int64AsNumber?(e=j.getUint32(o)*4294967296,e+=j.getUint32(o+4)):e=j.getBigUint64(o);o+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],s,f=0;for(;(s=E())!=v;)n[f++]=s;return t==4?n:t==3?n.join(""):Buffer.concat(n);case 5:let a;if(S.mapsAsObjects){let d={};if(S.keyMap)for(;(a=E())!=v;)d[L(S.decodeKey(a))]=E();else for(;(a=E())!=v;)d[L(a)]=E();return d}else{ie&&(S.mapsAsObjects=!0,ie=!1);let d=new Map;if(S.keyMap)for(;(a=E())!=v;)d.set(S.decodeKey(a),E());else for(;(a=E())!=v;)d.set(a,E());return d}case 7:return v;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return ot(e);case 3:if(se>=o)return xe.slice(o-ye,(o+=e)-ye);if(se==0&&X<140&&e<32){let f=e<16?Qe(e):at(e);if(f!=null)return f}return ft(e);case 4:let n=new Array(e);for(let f=0;f<e;f++)n[f]=E();return n;case 5:if(S.mapsAsObjects){let f={};if(S.keyMap)for(let a=0;a<e;a++)f[L(S.decodeKey(E()))]=E();else for(let a=0;a<e;a++)f[L(E())]=E();return f}else{ie&&(S.mapsAsObjects=!0,ie=!1);let f=new Map;if(S.keyMap)for(let a=0;a<e;a++)f.set(S.decodeKey(E()),E());else for(let a=0;a<e;a++)f.set(E(),E());return f}case 6:if(e>=Ke){let f=B[e&8191];if(f)return f.read||(f.read=Ue(f)),f.read();if(e<65536){if(e==lt){let a=te(),d=E(),A=E();Ie(d,A);let p={};if(S.keyMap)for(let M=2;M<a;M++){let U=S.decodeKey(A[M-2]);p[L(U)]=E()}else for(let M=2;M<a;M++){let U=A[M-2];p[L(U)]=E()}return p}else if(e==st){let a=te(),d=E();for(let A=2;A<a;A++)Ie(d++,E());return E()}else if(e==Ke)return pt();if(S.getShared&&(_e(),f=B[e&8191],f))return f.read||(f.read=Ue(f)),f.read()}}let s=_[e];if(s)return s.handlesRead?s(E):s(E());{let f=E();for(let a=0;a<Oe.length;a++){let d=Oe[a](e,f);if(d!==void 0)return d}return new Y(f,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let f=(N||Z())[e];if(f!==void 0)return f;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let f=new Error("Unexpected end of CBOR data");throw f.incomplete=!0,f}throw new Error("Unknown CBOR token "+e)}}const ze=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ue(e){function t(){let n=y[o++];if(n=n&31,n>23)switch(n){case 24:n=y[o++];break;case 25:n=j.getUint16(o),o+=2;break;case 26:n=j.getUint32(o),o+=4;break;default:throw new Error("Expected array header, but got "+y[o-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===n)return s(E);s=s.next}if(this.slowReads++>=Ye){let a=this.length==n?this:this.slice(0,n);return s=S.keyMap?new Function("r","return {"+a.map(d=>S.decodeKey(d)).map(d=>ze.test(d)?L(d)+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(d=>ze.test(d)?L(d)+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=n,this.compiledReader=s,s(E)}let f={};if(S.keyMap)for(let a=0;a<n;a++)f[L(S.decodeKey(this[a]))]=E();else for(let a=0;a<n;a++)f[L(this[a])]=E();return f}return e.slowReads=0,t}function L(e){return e==="__proto__"?"__proto_":e}let ft=Me;function Me(e){let t;if(e<16&&(t=Qe(e)))return t;if(e>64&&ke)return ke.decode(y.subarray(o,o+=e));const n=o+e,s=[];for(t="";o<n;){const f=y[o++];if(!(f&128))s.push(f);else if((f&224)===192){const a=y[o++]&63;s.push((f&31)<<6|a)}else if((f&240)===224){const a=y[o++]&63,d=y[o++]&63;s.push((f&31)<<12|a<<6|d)}else if((f&248)===240){const a=y[o++]&63,d=y[o++]&63,A=y[o++]&63;let p=(f&7)<<18|a<<12|d<<6|A;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(f);s.length>=4096&&(t+=T.apply(String,s),s.length=0)}return s.length>0&&(t+=T.apply(String,s)),t}let T=String.fromCharCode;function at(e){let t=o,n=new Array(e);for(let s=0;s<e;s++){const f=y[o++];if((f&128)>0){o=t;return}n[s]=f}return T.apply(String,n)}function Qe(e){if(e<4)if(e<2){if(e===0)return"";{let t=y[o++];if((t&128)>1){o-=1;return}return T(t)}}else{let t=y[o++],n=y[o++];if((t&128)>0||(n&128)>0){o-=2;return}if(e<3)return T(t,n);let s=y[o++];if((s&128)>0){o-=3;return}return T(t,n,s)}else{let t=y[o++],n=y[o++],s=y[o++],f=y[o++];if((t&128)>0||(n&128)>0||(s&128)>0||(f&128)>0){o-=4;return}if(e<6){if(e===4)return T(t,n,s,f);{let a=y[o++];if((a&128)>0){o-=5;return}return T(t,n,s,f,a)}}else if(e<8){let a=y[o++],d=y[o++];if((a&128)>0||(d&128)>0){o-=6;return}if(e<7)return T(t,n,s,f,a,d);let A=y[o++];if((A&128)>0){o-=7;return}return T(t,n,s,f,a,d,A)}else{let a=y[o++],d=y[o++],A=y[o++],p=y[o++];if((a&128)>0||(d&128)>0||(A&128)>0||(p&128)>0){o-=8;return}if(e<10){if(e===8)return T(t,n,s,f,a,d,A,p);{let M=y[o++];if((M&128)>0){o-=9;return}return T(t,n,s,f,a,d,A,p,M)}}else if(e<12){let M=y[o++],U=y[o++];if((M&128)>0||(U&128)>0){o-=10;return}if(e<11)return T(t,n,s,f,a,d,A,p,M,U);let R=y[o++];if((R&128)>0){o-=11;return}return T(t,n,s,f,a,d,A,p,M,U,R)}else{let M=y[o++],U=y[o++],R=y[o++],F=y[o++];if((M&128)>0||(U&128)>0||(R&128)>0||(F&128)>0){o-=12;return}if(e<14){if(e===12)return T(t,n,s,f,a,d,A,p,M,U,R,F);{let P=y[o++];if((P&128)>0){o-=13;return}return T(t,n,s,f,a,d,A,p,M,U,R,F,P)}}else{let P=y[o++],J=y[o++];if((P&128)>0||(J&128)>0){o-=14;return}if(e<15)return T(t,n,s,f,a,d,A,p,M,U,R,F,P,J);let C=y[o++];if((C&128)>0){o-=15;return}return T(t,n,s,f,a,d,A,p,M,U,R,F,P,J,C)}}}}}function ot(e){return S.copyBuffers?Uint8Array.prototype.slice.call(y,o,o+=e):y.subarray(o,o+=e)}let ve=new Float32Array(1),ce=new Uint8Array(ve.buffer,0,4);function ut(){let e=y[o++],t=y[o++],n=(e&127)>>2;if(n===31)return t||e&3?NaN:e&128?-1/0:1/0;if(n===0){let s=((e&3)<<8|t)/16777216;return e&128?-s:s}return ce[3]=e&128|(n>>1)+56,ce[2]=(e&7)<<5|t>>3,ce[1]=t<<5,ce[0]=0,ve[0]}new Array(4096);class Y{constructor(t,n){this.value=t,this.tag=n}}_[0]=e=>new Date(e);_[1]=e=>new Date(Math.round(e*1e3));_[2]=e=>{let t=BigInt(0);for(let n=0,s=e.byteLength;n<s;n++)t=BigInt(e[n])+t<<BigInt(8);return t};_[3]=e=>BigInt(-1)-_[2](e);_[4]=e=>+(e[1]+"e"+e[0]);_[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const Ie=(e,t)=>{e=e-57344;let n=B[e];n&&n.isShared&&((B.restoreStructures||(B.restoreStructures=[]))[e]=n),B[e]=t,t.read=Ue(t)};_[it]=e=>{let t=e.length,n=e[1];Ie(e[0],n);let s={};for(let f=2;f<t;f++){let a=n[f-2];s[L(a)]=e[f]}return s};_[14]=e=>V?V[0].slice(V.position0,V.position0+=e):new Y(e,14);_[15]=e=>V?V[1].slice(V.position1,V.position1+=e):new Y(e,15);let ct={Error,RegExp};_[27]=e=>(ct[e[0]]||Error)(e[1],e[2]);const et=e=>{if(y[o++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw y.length<o&&(n.incomplete=!0),n}let t=e();if(!t||!t.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return N=N?t.concat(N.slice(t.length)):t,N.prefixes=e(),N.suffixes=e(),e()};et.handlesRead=!0;_[51]=et;_[Pe]=e=>{if(!N)if(S.getShared)_e();else return new Y(e,Pe);if(typeof e=="number")return N[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw e===void 0&&(t.incomplete=!0),t};_[28]=e=>{z||(z=new Map,z.id=0);let t=z.id++,n=y[o],s;n>>5==4?s=[]:s={};let f={target:s};z.set(t,f);let a=e();return f.used?Object.assign(s,a):(f.target=a,a)};_[28].handlesRead=!0;_[29]=e=>{let t=z.get(e);return t.used=!0,t.target};_[258]=e=>new Set(e);(_[259]=e=>(S.mapsAsObjects&&(S.mapsAsObjects=!1,ie=!0),e())).handlesRead=!0;function ee(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function Z(){if(!N)if(S.getShared)_e();else throw new Error("No packed values available");return N}const dt=1399353956;Oe.push((e,t)=>{if(e>=225&&e<=255)return ee(Z().prefixes[e-224],t);if(e>=28704&&e<=32767)return ee(Z().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return ee(Z().prefixes[e-1879048192],t);if(e>=216&&e<=223)return ee(t,Z().suffixes[e-216]);if(e>=27647&&e<=28671)return ee(t,Z().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return ee(t,Z().suffixes[e-1811939328]);if(e==dt)return{packedValues:N,structures:B.slice(0),version:t};if(e==55799)return t});const ht=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,Je=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],xt=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<Je.length;e++)yt(Je[e],xt[e]);function yt(e,t){let n="get"+e.name.slice(0,-5),s;typeof e=="function"?s=e.BYTES_PER_ELEMENT:e=null;for(let f=0;f<2;f++){if(!f&&s==1)continue;let a=s==2?1:s==4?2:3;_[f?t:t-4]=s==1||f==ht?d=>{if(!e)throw new Error("Could not find typed array for code "+t);return!S.copyBuffers&&(s===1||s===2&&!(d.byteOffset&1)||s===4&&!(d.byteOffset&3)||s===8&&!(d.byteOffset&7))?new e(d.buffer,d.byteOffset,d.byteLength):new e(Uint8Array.prototype.slice.call(d,0).buffer)}:d=>{if(!e)throw new Error("Could not find typed array for code "+t);let A=new DataView(d.buffer,d.byteOffset,d.byteLength),p=d.length>>a,M=new e(p),U=A[n];for(let R=0;R<p;R++)M[R]=U.call(A,R<<a,f);return M}}}function pt(){let e=te(),t=o+E();for(let s=2;s<e;s++){let f=te();o+=f}let n=o;return o=t,V=[Me(te()),Me(te())],V.position0=0,V.position1=0,V.postBundlePosition=o,o=n,E()}function te(){let e=y[o++]&31;if(e>23)switch(e){case 24:e=y[o++];break;case 25:e=j.getUint16(o),o+=2;break;case 26:e=j.getUint32(o),o+=4;break}return e}function _e(){if(S.getShared){let e=tt(()=>(y=null,S.getShared()))||{},t=e.structures||[];S.sharedVersion=e.version,N=S.sharedValues=e.packedValues,B===!0?S.structures=B=t:B.splice.apply(B,[0,t.length].concat(t))}}function tt(e){let t=X,n=o,s=ye,f=se,a=xe,d=z,A=V,p=new Uint8Array(y.slice(0,X)),M=B,U=S,R=le,F=e();return X=t,o=n,ye=s,se=f,xe=a,z=d,V=A,y=p,le=R,B=M,S=U,j=new DataView(y.buffer,y.byteOffset,y.byteLength),F}function Be(){y=null,z=null,B=null}const De=new Array(147);for(let e=0;e<256;e++)De[e]=+("1e"+Math.floor(45.15-e*.30103));let Ve=new fe({useRecords:!1});Ve.decode;Ve.decodeMultiple;let de;try{de=new TextEncoder}catch{}let Re,rt;const pe=typeof globalThis=="object"&&globalThis.Buffer,ae=typeof pe<"u",me=ae?pe.allocUnsafeSlow:Uint8Array,We=ae?pe:Uint8Array,He=256,$e=ae?4294967296:2144337920;let Se,i,I,r=0,q,D=null;const gt=61440,wt=/[\u0080-\uFFFF]/,K=Symbol("record-id");class bt extends fe{constructor(t){super(t),this.offset=0;let n,s,f,a,d;t=t||{};let A=We.prototype.utf8Write?function(l,x,c){return i.utf8Write(l,x,c)}:de&&de.encodeInto?function(l,x){return de.encodeInto(l,i.subarray(x)).written}:!1,p=this,M=t.structures||t.saveStructures,U=t.maxSharedStructures;if(U==null&&(U=M?128:0),U>8190)throw new Error("Maximum maxSharedStructure is 8190");let R=t.sequential;R&&(U=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let F,P,J=t.sharedValues,C;if(J){C=Object.create(null);for(let l=0,x=J.length;l<x;l++)C[J[l]]=l}let $=[],ge=0,oe=0;this.mapEncode=function(l,x){if(this._keyMap&&!this._mapped)switch(l.constructor.name){case"Array":l=l.map(c=>this.encodeKeys(c));break}return this.encode(l,x)},this.encode=function(l,x){if(i||(i=new me(8192),I=new DataView(i.buffer,0,8192),r=0),q=i.length-10,q-r<2048?(i=new me(i.length),I=new DataView(i.buffer,0,i.length),q=i.length-10,r=0):x===Xe&&(r=r+7&2147483640),n=r,p.useSelfDescribedHeader&&(I.setUint32(r,3654940416),r+=3),d=p.structuredClone?new Map:null,p.bundleStrings&&typeof l!="string"?(D=[],D.size=1/0):D=null,s=p.structures,s){if(s.uninitialized){let h=p.getShared()||{};p.structures=s=h.structures||[],p.sharedVersion=h.version;let u=p.sharedValues=h.packedValues;if(u){C={};for(let g=0,w=u.length;g<w;g++)C[u[g]]=g}}let c=s.length;if(c>U&&!R&&(c=U),!s.transitions){s.transitions=Object.create(null);for(let h=0;h<c;h++){let u=s[h];if(!u)continue;let g,w=s.transitions;for(let b=0,m=u.length;b<m;b++){w[K]===void 0&&(w[K]=h);let k=u[b];g=w[k],g||(g=w[k]=Object.create(null)),w=g}w[K]=h|1048576}}R||(s.nextId=c)}if(f&&(f=!1),a=s||[],P=C,t.pack){let c=new Map;if(c.values=[],c.encoder=p,c.maxValues=t.maxPrivatePackedValues||(C?16:1/0),c.objectMap=C||!1,c.samplingPackedValues=F,he(l,c),c.values.length>0){i[r++]=216,i[r++]=51,H(4);let h=c.values;O(h),H(0),H(0),P=Object.create(C||null);for(let u=0,g=h.length;u<g;u++)P[h[u]]=u}}Se=x&Ee;try{if(Se)return;if(O(l),D&&Ze(n,O),p.offset=r,d&&d.idsToInsert){r+=d.idsToInsert.length*2,r>q&&re(r),p.offset=r;let c=At(i.subarray(n,r),d.idsToInsert);return d=null,c}return x&Xe?(i.start=n,i.end=r,i):i.subarray(n,r)}finally{if(s){if(oe<10&&oe++,s.length>U&&(s.length=U),ge>1e4)s.transitions=null,oe=0,ge=0,$.length>0&&($=[]);else if($.length>0&&!R){for(let c=0,h=$.length;c<h;c++)$[c][K]=void 0;$=[]}}if(f&&p.saveShared){p.structures.length>U&&(p.structures=p.structures.slice(0,U));let c=i.subarray(n,r);return p.updateSharedData()===!1?p.encode(l):c}x&Et&&(r=n)}},this.findCommonStringsToPack=()=>(F=new Map,C||(C=Object.create(null)),l=>{let x=l&&l.threshold||4,c=this.pack?l.maxPrivatePackedValues||16:0;J||(J=this.sharedValues=[]);for(let[h,u]of F)u.count>x&&(C[h]=c++,J.push(h),f=!0);for(;this.saveShared&&this.updateSharedData()===!1;);F=null});const O=l=>{r>q&&(i=re(r));var x=typeof l,c;if(x==="string"){if(P){let w=P[l];if(w>=0){w<16?i[r++]=w+224:(i[r++]=198,w&1?O(15-w>>1):O(w-16>>1));return}else if(F&&!t.pack){let b=F.get(l);b?b.count++:F.set(l,{count:1})}}let h=l.length;if(D&&h>=4&&h<1024){if((D.size+=h)>gt){let b,m=(D[0]?D[0].length*3+D[1].length:0)+10;r+m>q&&(i=re(r+m)),i[r++]=217,i[r++]=223,i[r++]=249,i[r++]=D.position?132:130,i[r++]=26,b=r-n,r+=4,D.position&&Ze(n,O),D=["",""],D.size=0,D.position=b}let w=wt.test(l);D[w?0:1]+=l,i[r++]=w?206:207,O(h);return}let u;h<32?u=1:h<256?u=2:h<65536?u=3:u=5;let g=h*3;if(r+g>q&&(i=re(r+g)),h<64||!A){let w,b,m,k=r+u;for(w=0;w<h;w++)b=l.charCodeAt(w),b<128?i[k++]=b:b<2048?(i[k++]=b>>6|192,i[k++]=b&63|128):(b&64512)===55296&&((m=l.charCodeAt(w+1))&64512)===56320?(b=65536+((b&1023)<<10)+(m&1023),w++,i[k++]=b>>18|240,i[k++]=b>>12&63|128,i[k++]=b>>6&63|128,i[k++]=b&63|128):(i[k++]=b>>12|224,i[k++]=b>>6&63|128,i[k++]=b&63|128);c=k-r-u}else c=A(l,r+u,g);c<24?i[r++]=96|c:c<256?(u<2&&i.copyWithin(r+2,r+1,r+1+c),i[r++]=120,i[r++]=c):c<65536?(u<3&&i.copyWithin(r+3,r+2,r+2+c),i[r++]=121,i[r++]=c>>8,i[r++]=c&255):(u<5&&i.copyWithin(r+5,r+3,r+3+c),i[r++]=122,I.setUint32(r,c),r+=4),r+=c}else if(x==="number")if(!this.alwaysUseFloat&&l>>>0===l)l<24?i[r++]=l:l<256?(i[r++]=24,i[r++]=l):l<65536?(i[r++]=25,i[r++]=l>>8,i[r++]=l&255):(i[r++]=26,I.setUint32(r,l),r+=4);else if(!this.alwaysUseFloat&&l>>0===l)l>=-24?i[r++]=31-l:l>=-256?(i[r++]=56,i[r++]=~l):l>=-65536?(i[r++]=57,I.setUint16(r,~l),r+=2):(i[r++]=58,I.setUint32(r,~l),r+=4);else{let h;if((h=this.useFloat32)>0&&l<4294967296&&l>=-2147483648){i[r++]=250,I.setFloat32(r,l);let u;if(h<4||(u=l*De[(i[r]&127)<<1|i[r+1]>>7])>>0===u){r+=4;return}else r--}i[r++]=251,I.setFloat64(r,l),r+=8}else if(x==="object")if(!l)i[r++]=246;else{if(d){let u=d.get(l);if(u){if(i[r++]=216,i[r++]=29,i[r++]=25,!u.references){let g=d.idsToInsert||(d.idsToInsert=[]);u.references=[],g.push(u)}u.references.push(r-n),r+=2;return}else d.set(l,{offset:r-n})}let h=l.constructor;if(h===Object)we(l,!0);else if(h===Array){c=l.length,c<24?i[r++]=128|c:H(c);for(let u=0;u<c;u++)O(l[u])}else if(h===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(i[r++]=217,i[r++]=1,i[r++]=3),c=l.size,c<24?i[r++]=160|c:c<256?(i[r++]=184,i[r++]=c):c<65536?(i[r++]=185,i[r++]=c>>8,i[r++]=c&255):(i[r++]=186,I.setUint32(r,c),r+=4),p.keyMap)for(let[u,g]of l)O(p.encodeKey(u)),O(g);else for(let[u,g]of l)O(u),O(g);else{for(let u=0,g=Re.length;u<g;u++){let w=rt[u];if(l instanceof w){let b=Re[u],m=b.tag;m==null&&(m=b.getTag&&b.getTag.call(this,l)),m<24?i[r++]=192|m:m<256?(i[r++]=216,i[r++]=m):m<65536?(i[r++]=217,i[r++]=m>>8,i[r++]=m&255):m>-1&&(i[r++]=218,I.setUint32(r,m),r+=4),b.encode.call(this,l,O,re);return}}if(l[Symbol.iterator]){if(Se){let u=new Error("Iterable should be serialized as iterator");throw u.iteratorNotHandled=!0,u}i[r++]=159;for(let u of l)O(u);i[r++]=255;return}if(l[Symbol.asyncIterator]||Ae(l)){let u=new Error("Iterable/blob should be serialized as iterator");throw u.iteratorNotHandled=!0,u}if(this.useToJSON&&l.toJSON){const u=l.toJSON();if(u!==l)return O(u)}we(l,!l.hasOwnProperty)}}else if(x==="boolean")i[r++]=l?245:244;else if(x==="bigint"){if(l<BigInt(1)<<BigInt(64)&&l>=0)i[r++]=27,I.setBigUint64(r,l);else if(l>-(BigInt(1)<<BigInt(64))&&l<0)i[r++]=59,I.setBigUint64(r,-l-BigInt(1));else if(this.largeBigIntToFloat)i[r++]=251,I.setFloat64(r,Number(l));else throw new RangeError(l+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");r+=8}else if(x==="undefined")i[r++]=247;else throw new Error("Unknown type: "+x)},we=this.useRecords===!1?this.variableMapSize?l=>{let x=Object.keys(l),c=Object.values(l),h=x.length;if(h<24?i[r++]=160|h:h<256?(i[r++]=184,i[r++]=h):h<65536?(i[r++]=185,i[r++]=h>>8,i[r++]=h&255):(i[r++]=186,I.setUint32(r,h),r+=4),p.keyMap)for(let u=0;u<h;u++)O(p.encodeKey(x[u])),O(c[u]);else for(let u=0;u<h;u++)O(x[u]),O(c[u])}:(l,x)=>{i[r++]=185;let c=r-n;r+=2;let h=0;if(p.keyMap)for(let u in l)(x||l.hasOwnProperty(u))&&(O(p.encodeKey(u)),O(l[u]),h++);else for(let u in l)(x||l.hasOwnProperty(u))&&(O(u),O(l[u]),h++);i[c+++n]=h>>8,i[c+n]=h&255}:(l,x)=>{let c,h=a.transitions||(a.transitions=Object.create(null)),u=0,g=0,w,b;if(this.keyMap){b=Object.keys(l).map(k=>this.encodeKey(k)),g=b.length;for(let k=0;k<g;k++){let Ne=b[k];c=h[Ne],c||(c=h[Ne]=Object.create(null),u++),h=c}}else for(let k in l)(x||l.hasOwnProperty(k))&&(c=h[k],c||(h[K]&1048576&&(w=h[K]&65535),c=h[k]=Object.create(null),u++),h=c,g++);let m=h[K];if(m!==void 0)m&=65535,i[r++]=217,i[r++]=m>>8|224,i[r++]=m&255;else if(b||(b=h.__keys__||(h.__keys__=Object.keys(l))),w===void 0?(m=a.nextId++,m||(m=0,a.nextId=1),m>=He&&(a.nextId=(m=U)+1)):m=w,a[m]=b,m<U){i[r++]=217,i[r++]=m>>8|224,i[r++]=m&255,h=a.transitions;for(let k=0;k<g;k++)(h[K]===void 0||h[K]&1048576)&&(h[K]=m),h=h[b[k]];h[K]=m|1048576,f=!0}else{if(h[K]=m,I.setUint32(r,3655335680),r+=3,u&&(ge+=oe*u),$.length>=He-U&&($.shift()[K]=void 0),$.push(h),H(g+2),O(57344+m),O(b),x===null)return;for(let k in l)(x||l.hasOwnProperty(k))&&O(l[k]);return}if(g<24?i[r++]=128|g:H(g),x!==null)for(let k in l)(x||l.hasOwnProperty(k))&&O(l[k])},re=l=>{let x;if(l>16777216){if(l-n>$e)throw new Error("Encoded buffer would be larger than maximum buffer size");x=Math.min($e,Math.round(Math.max((l-n)*(l>67108864?1.25:2),4194304)/4096)*4096)}else x=(Math.max(l-n<<2,i.length-1)>>12)+1<<12;let c=new me(x);return I=new DataView(c.buffer,0,x),i.copy?i.copy(c,0,n,l):c.set(i.slice(n,l)),r-=n,n=0,q=c.length-10,i=c};let G=100,Fe=1e3;this.encodeAsIterable=function(l,x){return je(l,x,Q)},this.encodeAsAsyncIterable=function(l,x){return je(l,x,Ce)};function*Q(l,x,c){let h=l.constructor;if(h===Object){let u=p.useRecords!==!1;u?we(l,null):qe(Object.keys(l).length,160);for(let g in l){let w=l[g];u||O(g),w&&typeof w=="object"?x[g]?yield*Q(w,x[g]):yield*be(w,x,g):O(w)}}else if(h===Array){let u=l.length;H(u);for(let g=0;g<u;g++){let w=l[g];w&&(typeof w=="object"||r-n>G)?x.element?yield*Q(w,x.element):yield*be(w,x,"element"):O(w)}}else if(l[Symbol.iterator]){i[r++]=159;for(let u of l)u&&(typeof u=="object"||r-n>G)?x.element?yield*Q(u,x.element):yield*be(u,x,"element"):O(u);i[r++]=255}else Ae(l)?(qe(l.size,64),yield i.subarray(n,r),yield l,ne()):l[Symbol.asyncIterator]?(i[r++]=159,yield i.subarray(n,r),yield l,ne(),i[r++]=255):O(l);c&&r>n?yield i.subarray(n,r):r-n>G&&(yield i.subarray(n,r),ne())}function*be(l,x,c){let h=r-n;try{O(l),r-n>G&&(yield i.subarray(n,r),ne())}catch(u){if(u.iteratorNotHandled)x[c]={},r=n+h,yield*Q.call(this,l,x[c]);else throw u}}function ne(){G=Fe,p.encode(null,Ee)}function je(l,x,c){return x&&x.chunkThreshold?G=Fe=x.chunkThreshold:G=100,l&&typeof l=="object"?(p.encode(null,Ee),c(l,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(l)]}async function*Ce(l,x){for(let c of Q(l,x,!0)){let h=c.constructor;if(h===We||h===Uint8Array)yield c;else if(Ae(c)){let u=c.stream().getReader(),g;for(;!(g=await u.read()).done;)yield g.value}else if(c[Symbol.asyncIterator])for await(let u of c)ne(),u?yield*Ce(u,x.async||(x.async={})):yield p.encode(u);else yield c}}}useBuffer(t){i=t,I=new DataView(i.buffer,i.byteOffset,i.byteLength),r=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let n=this.structures.slice(0),s=new nt(n,this.sharedValues,this.sharedVersion),f=this.saveShared(s,a=>(a&&a.version||0)==t);return f===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):n.forEach((a,d)=>this.structures[d]=a),f}}function qe(e,t){e<24?i[r++]=t|e:e<256?(i[r++]=t|24,i[r++]=e):e<65536?(i[r++]=t|25,i[r++]=e>>8,i[r++]=e&255):(i[r++]=t|26,I.setUint32(r,e),r+=4)}class nt{constructor(t,n,s){this.structures=t,this.packedValues=n,this.version=s}}function H(e){e<24?i[r++]=128|e:e<256?(i[r++]=152,i[r++]=e):e<65536?(i[r++]=153,i[r++]=e>>8,i[r++]=e&255):(i[r++]=154,I.setUint32(r,e),r+=4)}const mt=typeof Blob>"u"?function(){}:Blob;function Ae(e){if(e instanceof mt)return!0;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function he(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let s=t.get(e);if(s)++s.count==2&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let f=t.samplingPackedValues.get(e);f?f.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let s=0,f=e.length;s<f;s++)he(e[s],t);else{let s=!t.encoder.useRecords;for(var n in e)e.hasOwnProperty(n)&&(s&&he(n,t),he(e[n],t))}break;case"function":console.log(e)}}const St=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;rt=[Date,Set,Error,RegExp,Y,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,nt];Re=[{tag:1,encode(e,t){let n=e.getTime()/1e3;(this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296?(i[r++]=26,I.setUint32(r,n),r+=4):(i[r++]=251,I.setFloat64(r,n),r+=8)}},{tag:258,encode(e,t){let n=Array.from(e);t(n)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,n){Ge(e,n)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||ae&&this.tagUint8Array!==!1))return 64},encode(e,t,n){Ge(e,n)}},W(68,1),W(69,2),W(70,4),W(71,8),W(72,1),W(77,2),W(78,4),W(79,8),W(85,4),W(86,8),{encode(e,t){let n=e.packedValues||[],s=e.structures||[];if(n.values.length>0){i[r++]=216,i[r++]=51,H(4);let f=n.values;t(f),H(0),H(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,d=f.length;a<d;a++)packedObjectMap[f[a]]=a}if(s){I.setUint32(r,3655335424),r+=3;let f=s.slice(0);f.unshift(57344),f.push(new Y(e.version,1399353956)),t(f)}else t(new Y(e.version,1399353956))}}];function W(e,t){return!St&&t>1&&(e-=4),{tag:e,encode:function(s,f){let a=s.byteLength,d=s.byteOffset||0,A=s.buffer||s;f(ae?pe.from(A,d,a):new Uint8Array(A,d,a))}}}function Ge(e,t){let n=e.byteLength;n<24?i[r++]=64+n:n<256?(i[r++]=88,i[r++]=n):n<65536?(i[r++]=89,i[r++]=n>>8,i[r++]=n&255):(i[r++]=90,I.setUint32(r,n),r+=4),r+n>=i.length&&t(r+n),i.set(e.buffer?e:new Uint8Array(e),r),r+=n}function At(e,t){let n,s=t.length*2,f=e.length-s;t.sort((a,d)=>a.offset>d.offset?1:-1);for(let a=0;a<t.length;a++){let d=t[a];d.id=a;for(let A of d.references)e[A++]=a>>8,e[A]=a&255}for(;n=t.pop();){let a=n.offset;e.copyWithin(a+s,a,f),s-=2;let d=a+s;e[d++]=216,e[d++]=28,f=a}return e}function Ze(e,t){I.setUint32(D.position+e,r-D.position-e+1);let n=D;D=null,t(n[0]),t(n[1])}let Te=new bt({useRecords:!1});Te.encode;Te.encodeAsIterable;Te.encodeAsAsyncIterable;const Xe=512,Et=1024,Ee=2048;export{bt as E};
