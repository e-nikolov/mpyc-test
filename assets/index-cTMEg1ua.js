import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */import{g as co,c as Rr,e as xl}from"./eruda-f6XDUB5I.js";import"./encode-GRFFunDQ.js";import{p as F0}from"./purify.es-DJ3P3QYY.js";import{x as B0}from"./xterm-HQbOejv0.js";import{$ as Be,b as $0,a as W0}from"./browser-Yj3kU_A-.js";import{P as Q0,N as U0,a as q0,D as X0,b as fc,T as fn,I as tu,s as V0,t as N,L as j0,c as z0,i as G0,d as Y0,e as H0,f as Yo,g as Z0,h as K0,j as J0,k as e1,l as Br,E as ru,H as t1,m as r1,n as i1,o as s1,p as Ol,q as n1,r as o1,u as a1,v as c1,w as l1,x as h1,y as u1,z as d1}from"./codemirror-y86HkE-e.js";function iu(n,e){for(var r=0;r<e.length;r++){const o=e[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in n)){const d=Object.getOwnPropertyDescriptor(o,l);d&&Object.defineProperty(n,l,d.get?d:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var f1={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1702359114064,time:"12/12/2023, 06:31:54",revision:"11976cc"};document.title=`MPyC Web (${f1.deployment})`;var g1={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1702359114064,time:"12/12/2023, 06:31:54",revision:"11976cc"};function p1(){let n=g1;console.log("buildInfo",n);let e=document.querySelector("#version");e.innerText=`v${n.version}-${n.revision}`,e.innerText+="-dirty",e.innerText+=` (${n.time})`}p1();const ei=new WeakMap,_i=new WeakMap,Ur=new WeakMap;var m1={};const Dn=Symbol("anyProducer"),Cl=Promise.resolve(),An=Symbol("listenerAdded"),Tn=Symbol("listenerRemoved");let Rn=!1,Ho=!1;function $i(n){if(typeof n!="string"&&typeof n!="symbol"&&typeof n!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Ks(n){if(typeof n!="function")throw new TypeError("listener must be a function")}function Wi(n,e){const r=_i.get(n);if(r.has(e))return r.get(e)}function Es(n,e){const r=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:Dn,o=Ur.get(n);if(o.has(r))return o.get(r)}function _1(n,e,r){const o=Ur.get(n);if(o.has(e))for(const l of o.get(e))l.enqueue(r);if(o.has(Dn)){const l=Promise.all([e,r]);for(const d of o.get(Dn))d.enqueue(l)}}function wl(n,e){e=Array.isArray(e)?e:[e];let r=!1,o=()=>{},l=[];const d={enqueue(g){l.push(g),o()},finish(){r=!0,o()}};for(const g of e){let u=Es(n,g);u||(u=new Set,Ur.get(n).set(g,u)),u.add(d)}return{async next(){return l?l.length===0?r?(l=void 0,this.next()):(await new Promise(g=>{o=g}),this.next()):{done:!1,value:await l.shift()}:{done:!0}},async return(g){l=void 0;for(const u of e){const m=Es(n,u);m&&(m.delete(d),m.size===0&&Ur.get(n).delete(u))}return o(),arguments.length>0?{done:!0,value:await g}:{done:!0}},[Symbol.asyncIterator](){return this}}}function bl(n){if(n===void 0)return vl;if(!Array.isArray(n))throw new TypeError("`methodNames` must be an array of strings");for(const e of n)if(!vl.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return n}const Xi=n=>n===An||n===Tn;function Js(n,e,r){if(Xi(e))try{Rn=!0,n.emit(e,r)}finally{Rn=!1}}class kr{static mixin(e,r){return r=bl(r),o=>{if(typeof o!="function")throw new TypeError("`target` must be function");for(const g of r)if(o.prototype[g]!==void 0)throw new Error(`The property \`${g}\` already exists on \`target\``);function l(){return Object.defineProperty(this,e,{enumerable:!1,value:new kr}),this[e]}Object.defineProperty(o.prototype,e,{enumerable:!1,get:l});const d=g=>function(...u){return this[e][g](...u)};for(const g of r)Object.defineProperty(o.prototype,g,{enumerable:!1,value:d(g)});return o}}static get isDebugEnabled(){if(typeof m1!="object")return Ho;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||Ho}static set isDebugEnabled(e){Ho=e}constructor(e={}){ei.set(this,new Set),_i.set(this,new Map),Ur.set(this,new Map),Ur.get(this).set(Dn,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(r,o,l,d)=>{try{d=JSON.stringify(d)}catch{d=`Object with the following keys failed to stringify: ${Object.keys(d).join(",")}`}(typeof l=="symbol"||typeof l=="number")&&(l=l.toString());const g=new Date,u=`${g.getHours()}:${g.getMinutes()}:${g.getSeconds()}.${g.getMilliseconds()}`;console.log(`[${u}][emittery:${r}][${o}] Event Name: ${l}
	data: ${d}`)})}logIfDebugEnabled(e,r,o){(kr.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,r,o)}on(e,r){Ks(r),e=Array.isArray(e)?e:[e];for(const o of e){$i(o);let l=Wi(this,o);l||(l=new Set,_i.get(this).set(o,l)),l.add(r),this.logIfDebugEnabled("subscribe",o,void 0),Xi(o)||Js(this,An,{eventName:o,listener:r})}return this.off.bind(this,e,r)}off(e,r){Ks(r),e=Array.isArray(e)?e:[e];for(const o of e){$i(o);const l=Wi(this,o);l&&(l.delete(r),l.size===0&&_i.get(this).delete(o)),this.logIfDebugEnabled("unsubscribe",o,void 0),Xi(o)||Js(this,Tn,{eventName:o,listener:r})}}once(e){let r;const o=new Promise(l=>{r=this.on(e,d=>{r(),l(d)})});return o.off=r,o}events(e){e=Array.isArray(e)?e:[e];for(const r of e)$i(r);return wl(this,e)}async emit(e,r){if($i(e),Xi(e)&&!Rn)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,r),_1(this,e,r);const o=Wi(this,e)??new Set,l=ei.get(this),d=[...o],g=Xi(e)?[]:[...l];await Cl,await Promise.all([...d.map(async u=>{if(o.has(u))return u(r)}),...g.map(async u=>{if(l.has(u))return u(e,r)})])}async emitSerial(e,r){if($i(e),Xi(e)&&!Rn)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,r);const o=Wi(this,e)??new Set,l=ei.get(this),d=[...o],g=[...l];await Cl;for(const u of d)o.has(u)&&await u(r);for(const u of g)l.has(u)&&await u(e,r)}onAny(e){return Ks(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ei.get(this).add(e),Js(this,An,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return wl(this)}offAny(e){Ks(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Js(this,Tn,{listener:e}),ei.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const r of e)if(this.logIfDebugEnabled("clear",r,void 0),typeof r=="string"||typeof r=="symbol"||typeof r=="number"){const o=Wi(this,r);o&&o.clear();const l=Es(this,r);if(l){for(const d of l)d.finish();l.clear()}}else{ei.get(this).clear();for(const[o,l]of _i.get(this).entries())l.clear(),_i.get(this).delete(o);for(const[o,l]of Ur.get(this).entries()){for(const d of l)d.finish();l.clear(),Ur.get(this).delete(o)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let r=0;for(const o of e){if(typeof o=="string"){r+=ei.get(this).size+(Wi(this,o)?.size??0)+(Es(this,o)?.size??0)+(Es(this)?.size??0);continue}typeof o<"u"&&$i(o),r+=ei.get(this).size;for(const l of _i.get(this).values())r+=l.size;for(const l of Ur.get(this).values())r+=l.size}return r}bindMethods(e,r){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");r=bl(r);for(const o of r){if(e[o]!==void 0)throw new Error(`The property \`${o}\` already exists on \`target\``);Object.defineProperty(e,o,{enumerable:!1,value:this[o].bind(this)})}}}const vl=Object.getOwnPropertyNames(kr.prototype).filter(n=>n!=="constructor");Object.defineProperty(kr,"listenerAdded",{value:An,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(kr,"listenerRemoved",{value:Tn,writable:!1,enumerable:!0,configurable:!1});const x1=(n,e,r)=>{n.on(r,o=>{e.emit(`runtime:${r}`,o)})};class O1 extends kr{transport;peerIDToPID=new Map;pidToPeerID=new Map;peersReady=new Map;runtime;running=!1;runtimeFactory;transportFactory;env={};constructor(e,r,o={}){super(),this.transport=this.newTransport(e),this.runtime=this.newRuntime(r),this.env=o}newTransport(e){this.transportFactory=e,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const r=e();return this.addTransportEvents(r),r}newRuntime(e=this.runtimeFactory){this.runtimeFactory=e;const r=e();return this.addRuntimeEvents(r),r}addTransportEvents(e){e.on("ready",r=>{this.emit("transport:ready",r)}),e.on("closed",()=>{this.emit("transport:closed")}),e.on("error",r=>{this.emit("transport:error",r)}),e.on("conn:ready",r=>{this.emit("transport:conn:ready",r)}),e.on("conn:disconnected",r=>{this.emit("transport:conn:disconnected",r)}),e.on("conn:error",({peerID:r,err:o})=>{this.emit("transport:conn:error",{peerID:r,err:o})}),e.on("conn:data",({peerID:r,data:o})=>{switch(o.type){case"mpyc:ready":this.processReadyMessage(r,o.payload);break;case"mpyc:runtime":this.processRuntimeMessage(r,o.payload);break;default:this.emit("transport:conn:data:custom",{peerID:r,data:o})}})}addRuntimeEvents(e){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach(r=>{x1(e,this,r)}),e.on("ready",()=>{this.emit("runtime:ready")}),e.on("send",({type:r,pid:o,payload:l})=>{this.sendMPCMessage(r,o,l)})}runMPC(e,r,o=!0){this.running=!0;let l=this.transport.getPeers(!0),d=l.findIndex(g=>g===this.transport.id());for(let g=0;g<l.length;g++)this.peerIDToPID.set(l[g],g),this.pidToPeerID.set(g,l[g]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:d,filename:r,parties:l,is_async:o,no_async:!o,code:e})}reset(e=this.transportFactory,r=this.runtimeFactory){this.resetTransport(e),this.resetRuntime(r)}resetTransport(e=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(e)}resetRuntime(e=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(e),this.running=!1}sendMPCMessage(e,r,o){let l=this.pidToPeerID.get(r);this.transport.send(l,`mpyc:${e}`,o)}processReadyMessage=(e,r)=>{if(this.peersReady.set(e,!0),!this.running){console.log("ignoring mpc ready message because we are not running");return}let o=this.peerIDToPID.get(e);this.runtime.processReadyMessage(o,r)};processRuntimeMessage=(e,r)=>{if(!this.running){console.log("ignoring mpc runtime message because we are not running");return}let o=this.peerIDToPID.get(e);this.runtime.processRuntimeMessage(o,r)}}const su=-1,lo=0,In=1,Pn=2,gc=3,pc=4,mc=5,_c=6,nu=7,ou=8,yl=typeof self=="object"?self:globalThis,C1=(n,e)=>{const r=(l,d)=>(n.set(d,l),l),o=l=>{if(n.has(l))return n.get(l);const[d,g]=e[l];switch(d){case lo:case su:return r(g,l);case In:{const u=r([],l);for(const m of g)u.push(o(m));return u}case Pn:{const u=r({},l);for(const[m,p]of g)u[o(m)]=o(p);return u}case gc:return r(new Date(g),l);case pc:{const{source:u,flags:m}=g;return r(new RegExp(u,m),l)}case mc:{const u=r(new Map,l);for(const[m,p]of g)u.set(o(m),o(p));return u}case _c:{const u=r(new Set,l);for(const m of g)u.add(o(m));return u}case nu:{const{name:u,message:m}=g;return r(new yl[u](m),l)}case ou:return r(BigInt(g),l);case"BigInt":return r(Object(BigInt(g)),l)}return r(new yl[d](g),l)};return o},w1=n=>C1(new Map,n)(0),Qi="",{toString:b1}={},{keys:v1}=Object,Os=n=>{const e=typeof n;if(e!=="object"||!n)return[lo,e];const r=b1.call(n).slice(8,-1);switch(r){case"Array":return[In,Qi];case"Object":return[Pn,Qi];case"Date":return[gc,Qi];case"RegExp":return[pc,Qi];case"Map":return[mc,Qi];case"Set":return[_c,Qi]}return r.includes("Array")?[In,r]:r.includes("Error")?[nu,r]:[Pn,r]},en=([n,e])=>n===lo&&(e==="function"||e==="symbol"),y1=(n,e,r,o)=>{const l=(g,u)=>{const m=o.push(g)-1;return r.set(u,m),m},d=g=>{if(r.has(g))return r.get(g);let[u,m]=Os(g);switch(u){case lo:{let O=g;switch(m){case"bigint":u=ou,O=g.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+m);O=null;break;case"undefined":return l([su],g)}return l([u,O],g)}case In:{if(m)return l([m,[...g]],g);const O=[],x=l([u,O],g);for(const v of g)O.push(d(v));return x}case Pn:{if(m)switch(m){case"BigInt":return l([m,g.toString()],g);case"Boolean":case"Number":case"String":return l([m,g.valueOf()],g)}if(e&&"toJSON"in g)return d(g.toJSON());const O=[],x=l([u,O],g);for(const v of v1(g))(n||!en(Os(g[v])))&&O.push([d(v),d(g[v])]);return x}case gc:return l([u,g.toISOString()],g);case pc:{const{source:O,flags:x}=g;return l([u,{source:O,flags:x}],g)}case mc:{const O=[],x=l([u,O],g);for(const[v,y]of g)(n||!(en(Os(v))||en(Os(y))))&&O.push([d(v),d(y)]);return x}case _c:{const O=[],x=l([u,O],g);for(const v of g)(n||!en(Os(v)))&&O.push(d(v));return x}}const{message:p}=g;return l([u,{name:m,message:p}],g)};return d},E1=(n,{json:e,lossy:r}={})=>{const o=[];return y1(!(e||r),!!e,new Map,o)(n),o};/*! (c) Andrea Giammarchi - ISC */const{parse:S1,stringify:D1}=JSON,A1={json:!0,lossy:!0},T1=n=>w1(S1(n)),R1=n=>D1(E1(n,A1)),I1=Object.freeze(Object.defineProperty({__proto__:null,parse:T1,stringify:R1},Symbol.toStringTag,{value:"Module"})),Ln="4ee55850-17cb-4a85-a071-03fe2aa108bd",P1="M"+Ln,L1="T"+Ln,si="array",M1="bigint",k1="boolean",$t="function",Aa="null",xc="number",qr="object",Mn="string",ho="symbol",au="undefined",Hi="apply",kn="construct",Nn="defineProperty",Ta="deleteProperty",Fn="get",Ra="getOwnPropertyDescriptor",Ia="getPrototypeOf",Bn="has",Pa="isExtensible",La="ownKeys",Ma="preventExtensions",$n="set",ka="setPrototypeOf",Wn="delete",N1=n=>({value:new Promise(e=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=e,r.postMessage(n)})});/*! (c) Andrea Giammarchi - ISC */const{Int32Array:Na,Map:El,SharedArrayBuffer:Sl,Uint16Array:Fa}=globalThis,{BYTES_PER_ELEMENT:Dl}=Na,{BYTES_PER_ELEMENT:F1}=Fa,{isArray:B1}=Array,{notify:$1,wait:cu,waitAsync:W1}=Atomics,Q1=(n,e,r)=>{for(;cu(n,0,0,e)==="timed-out";)r()},Ba=new WeakSet,Zo=new WeakMap,U1={value:{then:n=>n()}};let q1=0;const Oc=(n,{parse:e=JSON.parse,stringify:r=JSON.stringify,transform:o,interrupt:l}=JSON)=>{if(!Zo.has(n)){const d=(x,...v)=>n.postMessage({[Ln]:v},{transfer:x}),g=typeof l===$t?l:l?.handler,u=l?.delay||42,m=new TextDecoder("utf-16"),p=(x,v)=>x?(W1||N1)(v,0):(g?Q1(v,u,g):cu(v,0),U1);let O=!1;Zo.set(n,new Proxy(new El,{[Bn]:(x,v)=>typeof v=="string"&&!v.startsWith("_"),[Fn]:(x,v)=>v==="then"?null:(...y)=>{const E=q1++;let C=new Na(new Sl(Dl*2)),b=[];Ba.has(y.at(-1)||b)&&Ba.delete(b=y.pop()),d(b,E,C,v,o?y.map(o):y);const I=n!==globalThis;let R=0;return O&&I&&(R=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${v}(...args) is awaited`)),p(I,C).value.then(()=>{clearTimeout(R);const S=C[1];if(!S)return;const B=F1*S;return C=new Na(new Sl(B+B%Dl)),d([],E,C),p(I,C).value.then(()=>e(m.decode(new Fa(C.buffer).slice(0,S))))})},[$n](x,v,y){const E=typeof y;if(E!==$t)throw new Error(`Unable to assign ${v} as ${E}`);if(!x.size){const C=new El;n.addEventListener("message",async b=>{const I=b.data?.[Ln];if(B1(I)){b.stopImmediatePropagation();const[R,S,...B]=I;let U;if(B.length){const[F,$]=B;if(x.has(F)){O=!0;try{const A=await x.get(F)(...$);if(A!==void 0){const M=r(o?o(A):A);C.set(R,M),S[1]=M.length}}catch(A){U=A}finally{O=!1}}else U=new Error(`Unsupported action: ${F}`);S[0]=1}else{const F=C.get(R);C.delete(R);for(let $=new Fa(S.buffer),A=0;A<F.length;A++)$[A]=F.charCodeAt(A)}if($1(S,0),U)throw U}})}return!!x.set(v,y)}}))}return Zo.get(n)};Oc.transfer=(...n)=>(Ba.add(n),n);const{isArray:lu}=Array,X1=n=>n(),V1=(n,e)=>e,j1=(n,e)=>({t:n,v:e}),z1=n=>G1.bind(n),Al=n=>typeof n===$t?X1(n):n;function G1(){return this}const Ht=(n,e)=>n===si?[e]:j1(n,e),hu=(n,e=V1)=>{let r=typeof n,o=n;return r===qr&&(lu(n)?(r=si,o=n.at(0)):{t:r,v:o}=n),e(r,o)},Y1=(n,e)=>n===$t?e:Ht(n,e),H1=(n,e=Y1)=>{const r=n===null?Aa:typeof n;return e(r===qr&&lu(n)?si:r,n)},Z1=new FinalizationRegistry(([n,e,r])=>{r&&console.debug(`Held value ${String(e)} not relevant anymore`),n(e)}),Tl=Object.create(null),uu=(n,e,{debug:r,return:o,token:l=n}=Tl)=>{const d=o||new Proxy(n,Tl),g=[d,[e,n,!!r]];return l!==!1&&g.push(l),Z1.register(...g),d},{defineProperty:Rl,deleteProperty:K1,getOwnPropertyDescriptor:J1,getPrototypeOf:du,isExtensible:eg,ownKeys:fu,preventExtensions:tg,set:rg,setPrototypeOf:ig}=Reflect,{assign:sg,create:ng}=Object,gu=du(Int8Array),pu=(n,e)=>{const{get:r,set:o,value:l}=n;return r&&(n.get=e(r)),o&&(n.set=e(o)),l&&(n.value=e(l)),n},mu=n=>e=>H1(e,(r,o)=>{switch(r){case Aa:return Ht(Aa,o);case qr:if(o===globalThis)return Ht(r,null);case si:case $t:return n(r,o);case k1:case xc:case Mn:case au:case M1:return Ht(r,o);case ho:if($a.has(o))return Ht(r,$a.get(o))}throw new Error(`Unable to handle this ${r} type`)}),$a=new Map(fu(Symbol).filter(n=>typeof Symbol[n]===ho).map(n=>[Symbol[n],n])),_u=n=>{for(const[e,r]of $a)if(r===n)return e},xu=n=>n,og=(n,e)=>{const r=e&&new WeakMap;if(e){const{addEventListener:l}=EventTarget.prototype;Rl(EventTarget.prototype,"addEventListener",{value(d,g,...u){return u.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(d,[].concat(u[0].invoke)),delete u[0].invoke),l.call(this,d,g,...u)}})}const o=e&&(l=>{const{currentTarget:d,target:g,type:u}=l;for(const m of r.get(d||g)?.get(u)||[])l[m]()});return function(l,d,g,...u){let m=0,p=this?.transform||xu;const O=new Map,x=new Map,{[g]:v}=l,y=u.length?sg(ng(globalThis),...u):globalThis,E=mu((S,B)=>{if(!O.has(B)){let U;for(;x.has(U=m++););O.set(B,U),x.set(U,S===$t?B:p(B))}return Ht(S,O.get(B))}),C=S=>{v(Wn,Ht(Mn,S))},b=(S,B)=>{switch(S){case qr:if(B==null)return y;case si:if(typeof B===xc)return x.get(B);if(!(B instanceof gu))for(const U in B)B[U]=I(B[U]);return B;case $t:if(typeof B===Mn){if(!x.has(B)){const U=function(...F){return e&&F.at(0)instanceof Event&&o(...F),v(Hi,Ht($t,B),E(this),F.map(E))};return x.set(B,new WeakRef(U)),uu(B,C,{return:U,token:!1})}return x.get(B).deref()}return x.get(B);case ho:return _u(B)}return B},I=S=>hu(S,b),R={[Hi]:(S,B,U)=>E(S.apply(B,U)),[kn]:(S,B)=>E(new S(...B)),[Nn]:(S,B,U)=>E(Rl(S,B,U)),[Ta]:(S,B)=>E(K1(S,B)),[Ia]:S=>E(du(S)),[Fn]:(S,B)=>E(S[B]),[Ra]:(S,B)=>{const U=J1(S,B);return U?Ht(qr,pu(U,E)):Ht(au,U)},[Bn]:(S,B)=>E(B in S),[Pa]:S=>E(eg(S)),[La]:S=>Ht(si,fu(S).map(E)),[Ma]:S=>E(tg(S)),[$n]:(S,B,U)=>E(rg(S,B,U)),[ka]:(S,B)=>E(ig(S,B)),[Wn](S){O.delete(x.get(S)),x.delete(S)}};return l[d]=(S,B,...U)=>{switch(S){case Hi:U[0]=I(U[0]),U[1]=U[1].map(I);break;case kn:U[0]=U[0].map(I);break;case Nn:{const[F,$]=U;U[0]=I(F);const{get:A,set:M,value:G}=$;A&&($.get=I(A)),M&&($.set=I(M)),G&&($.value=I(G));break}default:U=U.map(I);break}return R[S](I(B),...U)},{proxy:l,[n.toLowerCase()]:y,[`is${n}Proxy`]:()=>!1}}},ag=og("Window",!0),cg=n=>{let e=0;const r=new Map,o=new Map,l=Symbol();return function(d,g,u){const m=this?.transform||xu,{[g]:p}=d,O=new Map,x=R=>{O.delete(R),p(Wn,v(R))},v=mu((R,S)=>{if(l in S)return Al(S[l]);if(R===$t){if(S=m(S),!o.has(S)){let B;for(;o.has(B=String(e++)););r.set(S,B),o.set(B,S)}return Ht(R,r.get(S))}if(!(S instanceof gu)){(R===qr||R===si)&&(S=m(S));for(const B in S)S[B]=v(S[B])}return Ht(R,S)}),y=(R,S,B)=>{if(!O.has(B)){const U=S===$t?z1(R):R,F=new Proxy(U,b);return O.set(B,new WeakRef(F)),uu(B,x,{return:F,token:!1})}return O.get(B).deref()},E=R=>hu(R,(S,B)=>{switch(S){case qr:if(B===null)return globalThis;case si:return typeof B===xc?y(R,S,B):B;case $t:return typeof B===Mn?o.get(B):y(R,S,B);case ho:return _u(B)}return B}),C=(R,S,...B)=>E(p(R,Al(S),...B)),b={[Hi]:(R,S,B)=>C(Hi,R,v(S),B.map(v)),[kn]:(R,S)=>C(kn,R,S.map(v)),[Nn]:(R,S,B)=>{const{get:U,set:F,value:$}=B;return typeof U===$t&&(B.get=v(U)),typeof F===$t&&(B.set=v(F)),typeof $===$t&&(B.value=v($)),C(Nn,R,v(S),B)},[Ta]:(R,S)=>C(Ta,R,v(S)),[Ia]:R=>C(Ia,R),[Fn]:(R,S)=>S===l?R:C(Fn,R,v(S)),[Ra]:(R,S)=>{const B=C(Ra,R,v(S));return B&&pu(B,E)},[Bn]:(R,S)=>S===l||C(Bn,R,v(S)),[Pa]:R=>C(Pa,R),[La]:R=>C(La,R).map(E),[Ma]:R=>C(Ma,R),[$n]:(R,S,B)=>C($n,R,v(S),v(B)),[ka]:(R,S)=>C(ka,R,v(S))};d[u]=(R,S,B,U)=>{switch(R){case Hi:return E(S).apply(E(B),U.map(E));case Wn:{const F=E(S);r.delete(o.get(F)),o.delete(F)}}};const I=new Proxy(Ht(qr,null),b);return{[n.toLowerCase()]:I,[`is${n}Proxy`]:R=>typeof R===qr&&!!R&&l in R,proxy:d}}},lg=cg("Window"),hg=typeof Worker===$t?Worker:class{},Ko=new WeakMap,Ou=(n,...e)=>{const r=Oc(n,...e);if(!Ko.has(r)){const o=n instanceof hg?ag:lg;Ko.set(r,o.call(e.at(0),r,P1,L1))}return Ko.get(r)};Ou.transfer=Oc.transfer;const ug=()=>new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="4ee55850-17cb-4a85-a071-03fe2aa108bd",d="M"+p,y="T"+p,h="array",g="function",w="null",m="number",b="object",v="string",$="symbol",S="undefined",E="apply",A="construct",P="defineProperty",k="deleteProperty",x="get",M="getOwnPropertyDescriptor",j="getPrototypeOf",T="has",_="isExtensible",O="ownKeys",W="preventExtensions",F="set",R="setPrototypeOf",B="delete";var J=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:I,Map:L,SharedArrayBuffer:D,Uint16Array:C}=globalThis,{BYTES_PER_ELEMENT:H}=I,{BYTES_PER_ELEMENT:N}=C,{isArray:U}=Array,{notify:z,wait:q,waitAsync:K}=Atomics,Y=new WeakSet,G=new WeakMap,V={value:{then:e=>e()}};let Q=0;const X=(e,{parse:t=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:s}=JSON)=>{if(!G.has(e)){const o=(t,...r)=>e.postMessage({[p]:r},{transfer:t}),a=typeof s===g?s:s?.handler,i=s?.delay||42,c=new TextDecoder("utf-16"),l=(e,t)=>e?(K||J)(t,0):(a?((e,t,r)=>{for(;"timed-out"===q(e,0,0,t);)r()})(t,i,a):q(t,0),V);let u=!1;G.set(e,new Proxy(new L,{[T]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[x]:(r,s)=>"then"===s?null:(...r)=>{const a=Q++;let i=new I(new D(2*H)),f=[];Y.has(r.at(-1)||f)&&Y.delete(f=r.pop()),o(f,a,i,s,n?r.map(n):r);const p=e!==globalThis;let d=0;return u&&p&&(d=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${s}(...args) is awaited`)),l(p,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const r=N*e;return i=new I(new D(r+r%H)),o([],a,i),l(p,i).value.then((()=>t(c.decode(new C(i.buffer).slice(0,e)))))}))},[F](t,s,o){const a=typeof o;if(a!==g)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new L;e.addEventListener("message",(async e=>{const o=e.data?.[p];if(U(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=r(n?n(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new C(i.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}if(z(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return G.get(e)};X.transfer=(...e)=>(Y.add(e),e);const{isArray:Z}=Array,ee=(e,t)=>t,te=e=>typeof e===g?(e=>e())(e):e;function re(){return this}const ne=(e,t)=>e===h?[t]:{t:e,v:t},se=(e,t=ee)=>{let r=typeof e,n=e;return r===b&&(Z(e)?(r=h,n=e.at(0)):({t:r,v:n}=e)),t(r,n)},oe=(e,t)=>e===g?t:ne(e,t),ae=(e,t=oe)=>{const r=null===e?w:typeof e;return t(r===b&&Z(e)?h:r,e)},ie=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),ce=Object.create(null),le=(e,t,{debug:r,return:n,token:s=e}=ce)=>{const o=n||new Proxy(e,ce),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),ie.register(...a),o},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:pe,getPrototypeOf:de,isExtensible:ye,ownKeys:he,preventExtensions:ge,set:we,setPrototypeOf:me}=Reflect,{assign:be,create:ve}=Object,$e=de(Int8Array),Se=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Ee=e=>t=>ae(t,((t,r)=>{switch(t){case w:return ne(w,r);case b:if(r===globalThis)return ne(t,null);case h:case g:return e(t,r);case"boolean":case m:case v:case S:case"bigint":return ne(t,r);case $:if(Ae.has(r))return ne(t,Ae.get(r))}throw new Error(`Unable to handle this ${t} type`)})),Ae=new Map(he(Symbol).filter((e=>typeof Symbol[e]===$)).map((e=>[Symbol[e],e]))),Pe=e=>{for(const[t,r]of Ae)if(r===e)return t},ke=e=>e;var xe=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,s,o,...a){let i=0,c=this?.transform||ke;const l=new Map,u=new Map,{[o]:f}=r,p=a.length?be(ve(globalThis),...a):globalThis,d=Ee(((e,t)=>{if(!l.has(t)){let r;for(;u.has(r=i++););l.set(t,r),u.set(r,e===g?t:c(t))}return ne(e,l.get(t))})),y=e=>{f(B,ne(v,e))},w=(e,r)=>{switch(e){case b:if(null==r)return p;case h:if(typeof r===m)return u.get(r);if(!(r instanceof $e))for(const e in r)r[e]=J(r[e]);return r;case g:if(typeof r===v){if(!u.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),f(E,ne(g,r),d(this),e.map(d))};return u.set(r,new WeakRef(e)),le(r,y,{return:e,token:!1})}return u.get(r).deref()}return u.get(r);case $:return Pe(r)}return r},J=e=>se(e,w),I={[E]:(e,t,r)=>d(e.apply(t,r)),[A]:(e,t)=>d(new e(...t)),[P]:(e,t,r)=>d(ue(e,t,r)),[k]:(e,t)=>d(fe(e,t)),[j]:e=>d(de(e)),[x]:(e,t)=>d(e[t]),[M]:(e,t)=>{const r=pe(e,t);return r?ne(b,Se(r,d)):ne(S,r)},[T]:(e,t)=>d(t in e),[_]:e=>d(ye(e)),[O]:e=>ne(h,he(e).map(d)),[W]:e=>d(ge(e)),[F]:(e,t,r)=>d(we(e,t,r)),[R]:(e,t)=>d(me(e,t)),[B](e){l.delete(u.get(e)),u.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case E:r[0]=J(r[0]),r[1]=r[1].map(J);break;case A:r[0]=r[0].map(J);break;case P:{const[e,t]=r;r[0]=J(e);const{get:n,set:s,value:o}=t;n&&(t.get=J(n)),s&&(t.set=J(s)),o&&(t.value=J(o));break}default:r=r.map(J)}return I[e](J(t),...r)},{proxy:r,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Me=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||ke,{[a]:l}=o,u=new Map,f=e=>{u.delete(e),l(B,p(e))},p=Ee(((e,o)=>{if(s in o)return te(o[s]);if(e===g){if(o=c(o),!n.has(o)){let e;for(;n.has(e=String(t++)););r.set(o,e),n.set(e,o)}return ne(e,r.get(o))}if(!(o instanceof $e)){e!==b&&e!==h||(o=c(o));for(const e in o)o[e]=p(o[e])}return ne(e,o)})),d=(e,t,r)=>{if(!u.has(r)){const n=t===g?(e=>re.bind(e))(e):e,s=new Proxy(n,S);return u.set(r,new WeakRef(s)),le(r,f,{return:s,token:!1})}return u.get(r).deref()},y=e=>se(e,((t,r)=>{switch(t){case b:if(null===r)return globalThis;case h:return typeof r===m?d(e,t,r):r;case g:return typeof r===v?n.get(r):d(e,t,r);case $:return Pe(r)}return r})),w=(e,t,...r)=>y(l(e,te(t),...r)),S={[E]:(e,t,r)=>w(E,e,p(t),r.map(p)),[A]:(e,t)=>w(A,e,t.map(p)),[P]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===g&&(r.get=p(n)),typeof s===g&&(r.set=p(s)),typeof o===g&&(r.value=p(o)),w(P,e,p(t),r)},[k]:(e,t)=>w(k,e,p(t)),[j]:e=>w(j,e),[x]:(e,t)=>t===s?e:w(x,e,p(t)),[M]:(e,t)=>{const r=w(M,e,p(t));return r&&Se(r,y)},[T]:(e,t)=>t===s||w(T,e,p(t)),[_]:e=>w(_,e),[O]:e=>w(O,e).map(y),[W]:e=>w(W,e),[F]:(e,t,r)=>w(F,e,p(t),p(r)),[R]:(e,t)=>w(R,e,p(t))};o[i]=(e,t,s,o)=>{switch(e){case E:return y(t).apply(y(s),o.map(y));case B:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const J=new Proxy(ne(b,null),S);return{[e.toLowerCase()]:J,[`is${e}Proxy`]:e=>typeof e===b&&!!e&&s in e,proxy:o}}})("Window"),je=typeof Worker===g?Worker:class{};const Te=new WeakMap,_e=(e,...t)=>{const r=X(e,...t);if(!Te.has(r)){const n=e instanceof je?xe:Me;Te.set(r,n.call(t.at(0),r,d,y))}return Te.get(r)};_e.transfer=X.transfer;const Oe={object(...e){return this.string(function(e){for(var t=e[0],r=1,n=arguments.length;r<n;r++)t+=arguments[r]+e[r];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const We=e=>e.arrayBuffer(),Fe=e=>e.json(),Re=e=>e.text(),Be=new WeakMap,Je=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Be.set(t,r),t}}},Ie=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Le=e=>{const t=e.split("/");return t.pop(),t.join("/")},De=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Ce=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},He=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Ne=(e,t)=>fetch(st(t,Ue.get(e))),Ue=new WeakMap,ze=(e,t,r)=>rt((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(Ve(n))return n.map((r=>({url:He([e,r]),path:He([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:He([t,s])}]}))})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),qe=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Ke=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),Ye=(e,t,r)=>rt((e=>{const t=new Map,r=new Set,n=[];for(const[s,o]of Object.entries(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Ke(o,t))}else{const e=Ke(s,t),a=qe(e,Ke(o||"./",t));if(r.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);r.add(a),n.push({url:e,path:a})}return n})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),Ge=(e,...t)=>Oe[typeof e](e,...t),{isArray:Ve}=Array,{assign:Qe,create:Xe,defineProperties:Ze,defineProperty:et,entries:tt}=Object,{all:rt,resolve:nt}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),st=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,ot=(e,t,r,n=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${r}`,{bubbles:!0,detail:{worker:n}}))},at=e=>Function(`\'use strict\';return (${e})`)(),it=(e,t,r)=>{e.registerJsModule(t,r)},ct=(e,t,...r)=>{try{return e.runPython(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},lt=async(e,t,...r)=>{try{return await e.runPythonAsync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},ut=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}};var ft={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=Je();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.files&&await Ye(this,a,t.files),t.fetch&&await ze(this,a,t.fetch),a},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const pt={dict_converter:Object.fromEntries};var dt={type:"pyodide",module:(e="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=Je(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.files&&await Ye(this,i,t.files),t.fetch&&await ze(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(pt):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const yt="ruby-wasm-wasi",ht=yt.replace(/\\W+/g,"_");var gt={type:yt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.files&&await Ye(this,o,t.files),t.fetch&&await ze(this,o,t.fetch),o},registerJSModule(e,t,r){const n=`__module_${ht}_${t}`;globalThis[n]=r,this.run(e,`require "js";$${t}=JS.global[:${n}]`),delete globalThis[n]},run:(e,t,...r)=>e.eval(Ge(t),...r),runAsync:(e,t,...r)=>e.evalAsync(Ge(t),...r),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${ht}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${yt}`)}};var wt={type:"wasmoon",module:(e="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=Je(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.files&&await Ye(this,a,r.files),r.fetch&&await ze(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{e.global.set(t,r)},run:(e,t,...r)=>{try{return e.doStringSync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runAsync:async(e,t,...r)=>{try{return await e.doString(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(De(e,Le(t)),t=Ce(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const mt=new Map,bt=new Map,vt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=mt.get(r),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{bt.set(t,e);for(const t of["files","fetch"]){const r=e?.[t];r&&Ue.set(r,o)}return s(n,e,r)}))}}),$t=e=>{for(const t of[].concat(e.type))mt.set(t,e)};for(const e of[ft,dt,gt,wt])$t(e);const St=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Et=(e,t,r={})=>{if(t){const[e,n]=(e=>{let t=typeof e;return"string"===t&&/\\.(json|toml|txt)$/.test(e)?t=RegExp.$1:e="./config.txt",[st(e),t]})(t);if("json"===n)r=fetch(e).then(Fe);else if("toml"===n)r=fetch(e).then(Re).then(St);else if("string"===n)try{r=JSON.parse(t)}catch(e){r=St(t)}else"object"===n&&t&&(r=t);t=e}return nt(r).then((r=>vt[e](r,t)))},At="BeforeRun",Pt="AfterRun",kt=[`code${At}`,`code${At}Async`,`code${Pt}`,`code${Pt}Async`],xt=["onWorker","onReady",`on${At}`,`on${At}Async`,`on${Pt}`,`on${Pt}Async`];function Mt(e,t){const{run:r,runAsync:n}=mt.get(this.type);return{...e,run:r.bind(this,t),runAsync:n.bind(this,t)}}const jt=(e,t,r,n,s,o)=>{if(s||o){const a=Mt.bind(e,t),i=n?"runAsync":"run",c=e[i];e[i]=n?async function(e,t,...n){s&&await s.call(this,a(e),r);const i=await c.call(this,e,t,...n);return o&&await o.call(this,a(e),r),i}:function(e,t,...n){s&&s.call(this,a(e),r);const i=c.call(this,e,t,...n);return o&&o.call(this,a(e),r),i}}};try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let Tt,_t,Ot;const Wt=(e,t)=>{addEventListener(e,t||(async t=>{try{await Tt,_t(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Ft,stringify:Rt}=f,{proxy:Bt,window:Jt,isWindowProxy:It}=_e(self,{parse:Ft,stringify:Rt,transform:e=>Ot?Ot(e):e}),Lt={sync:Bt,window:Jt,isWindowProxy:It,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Wt("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{Tt=(async()=>{try{const{id:s,tag:o,type:a,custom:i,version:c,config:l,async:u}=e,f=await Et(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(a,c),t,l),p=Xe(mt.get(a)),d=((e,t,r,n)=>({type:t,config:r,interpreter:n,io:Be.get(n),run:(t,...r)=>e.run(n,t,...r),runAsync:(t,...r)=>e.runAsync(n,t,...r),runEvent:(...t)=>e.runEvent(n,...t)}))(p,i||a,l,f);let y="run";if(u&&(y+="Async"),n){const e=((e,t)=>(r,n)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${n?r:t}\\n${n?t:r}`,...o)})(p,y);let t,r,s="",o="";for(const e of kt){const t=n[e];if(t){const r=e.endsWith("Async");(r&&u||!r&&!u)&&(e.startsWith("codeBefore")?s=t:o=t)}}o&&e(o,!1),s&&e(s,!0);for(const e of xt.slice(2)){const s=n[e];if(s){const n=e.endsWith("Async");if(n&&u||!n&&!u){const n=at(s);e.startsWith("onBefore")?t=n:r=n}}}jt(p,d,Lt,u,t,r)}const{CustomEvent:h,document:g}=Jt,w=s&&g.getElementById(s)||null,m=e=>ot(w,i||a,e,!0,h);let b="";return p.registerJSModule(f,"polyscript",{xworker:Lt,get target(){return!b&&w&&("SCRIPT"===o?w.after(Qe(g.createElement(`script-${i||a}`),{id:b=`${s}-target`})):(b=s,w.replaceChildren(),w.style.display="block")),b}}),_t=p.runEvent.bind(p,f),Ot=p.transform.bind(p,f),w&&m("ready"),n?.onReady&&at(n?.onReady).call(p,Mt.call(p,d,f),Lt),await p[y](f,r),w&&m("done"),f}catch(e){postMessage(e)}})(),Wt("error"),Wt("message"),Wt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),dg="modulepreload",fg=function(n,e){return new URL(n,e).href},Il={},Cu=function(e,r,o){if(!r||r.length===0)return e();const l=document.getElementsByTagName("link");return Promise.all(r.map(d=>{if(d=fg(d,o),d in Il)return;Il[d]=!0;const g=d.endsWith(".css"),u=g?'[rel="stylesheet"]':"";if(!!o)for(let O=l.length-1;O>=0;O--){const x=l[O];if(x.href===d&&(!g||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":dg,g||(p.as="script",p.crossOrigin=""),p.href=d,document.head.appendChild(p),g)return new Promise((O,x)=>{p.addEventListener("load",O),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>e()).catch(d=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d})};Promise.withResolvers||(Promise.withResolvers=function(){var e,r,o=new this(function(l,d){e=l,r=d});return{resolve:e,reject:r,promise:o}});const wu=n=>n.arrayBuffer(),gg=n=>n.json(),Cc=n=>n.text();function pg(n){for(var e=n[0],r=1,o=arguments.length;r<o;r++)e+=arguments[r]+n[r];return e}const mg={object(...n){return this.string(pg(...n))},string(n){for(const e of n.split(/[\r\n]+/))if(e.trim().length){/^(\s+)/.test(e)&&(n=n.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return n}},_g=(n,...e)=>mg[typeof n](n,...e),{replace:xg}="",Og=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,Cg={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},wg=n=>Cg[n],bg=n=>xg.call(n,Og,wg),Nr=_g,vg=bg,{isArray:yg}=Array,{assign:Qn,create:wc,defineProperties:Eg,defineProperty:Un,entries:jb}=Object,{all:uo,resolve:bu}=new Proxy(Promise,{get:(n,e)=>n[e].bind(n)}),vu=(n,e=location.href)=>new URL(n,e.replace(/^blob:/,"")).href;let Sg=0;const yu=(n,e)=>({id:n.id||(n.id=`${e}-w${Sg++}`),tag:n.tagName}),Pl=(n,e,r,o=!1,l=CustomEvent)=>{n.dispatchEvent(new l(`${e}:${r}`,{bubbles:!0,detail:{worker:o}}))},Dg=(n,e,r,o)=>({type:e,config:r,interpreter:o,io:ri.get(o),run:(l,...d)=>n.run(o,l,...d),runAsync:(l,...d)=>n.runAsync(o,l,...d),runEvent:(...l)=>n.runEvent(o,...l)}),Ag=(n,e)=>(r,o)=>{const l=n[e].bind(n);n[e]=(d,g,...u)=>l(d,`${o?r:g}
${o?g:r}`,...u)},ri=new WeakMap,bc=n=>{const e=n||console,r={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...o)=>r.stderr(...o),stdout:(...o)=>r.stdout(...o),async get(o){const l=await o;return ri.set(l,r),l}}},Eu=({FS:n,PATH:e,PATH_FS:r},o,l)=>{const d=r.resolve(o);return n.mkdirTree(e.dirname(d)),n.writeFile(d,new Uint8Array(l),{canOwn:!0})},Tg=(n,e,r)=>(Ig(n,Rg(e)),e=Pg(n,e),n.writeFile(e,new Uint8Array(r),{canOwn:!0})),Rg=n=>{const e=n.split("/");return e.pop(),e.join("/")},Ig=(n,e)=>{const r=[];for(const o of e.split("/"))o!=="."&&(r.push(o),o&&n.mkdir(r.join("/")))},Pg=(n,e)=>{const r=[];for(const o of e.split("/"))switch(o){case"":break;case".":break;case"..":r.pop();break;default:r.push(o)}return[n.cwd()].concat(r).join("/").replace(/^\/+/,"/")},Lg=n=>{for(const{files:e,to_file:r,from:o=""}of n){if(e!==void 0&&r!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(e===void 0&&r===void 0&&o.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${o}, please supply 'to_file' parameter.`)}return n.flatMap(({from:e="",to_folder:r=".",to_file:o,files:l})=>{if(yg(l))return l.map(g=>({url:Jo([e,g]),path:Jo([r,g])}));const d=o||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:Jo([r,d])}]})},Jo=n=>{const e=n.map(r=>r.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(r=>r!==""&&r!==".").join("/");return n[0].startsWith("/")?`/${e}`:e},Su=(n,e)=>fetch(vu(e,Du.get(n))),Du=new WeakMap,fo=(n,e,r)=>uo(Lg(r).map(({url:o,path:l})=>Su(r,o).then(wu).then(d=>n.writeFile(e,l,d)))),Mg=(n,e)=>e.endsWith("/")?`${e}${n.split("/").pop()}`:e,ea=(n,e)=>n.replace(/\{.+?\}/g,r=>{if(!e.has(r))throw new SyntaxError(`Invalid template: ${r}`);return e.get(r)}),kg=n=>{const e=new Map,r=new Set,o=[];for(const[l,d]of Object.entries(n))if(/^\{.+\}$/.test(l)){if(e.has(l))throw new SyntaxError(`Duplicated template: ${l}`);e.set(l,ea(d,e))}else{const g=ea(l,e),u=Mg(g,ea(d||"./",e));if(r.has(u))throw new SyntaxError(`Duplicated destination: ${u}`);r.add(u),o.push({url:g,path:u})}return o},go=(n,e,r)=>uo(kg(r).map(({url:o,path:l})=>Su(r,o).then(wu).then(d=>n.writeFile(e,l,d)))),Au=(n,e,r)=>{n.registerJsModule(e,r)},Tu=(n,e,...r)=>{try{return n.runPython(Nr(e),...r)}catch(o){ri.get(n).stderr(o)}},Ru=async(n,e,...r)=>{try{return await n.runPythonAsync(Nr(e),...r)}catch(o){ri.get(n).stderr(o)}},Iu=async(n,e,r)=>{const[o,...l]=e.split(".");let d=n.globals.get(o),g;for(const u of l)[g,d]=[d,d[u]];try{await d.call(g,r)}catch(u){ri.get(n).stderr(u)}},Ng="micropython",Fg={type:Ng,module:(n="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${n}/micropython.mjs`,async engine({loadMicroPython:n},e,r){const{stderr:o,stdout:l,get:d}=bc();r=r.replace(/\.m?js$/,".wasm");const g=await d(n({stderr:o,stdout:l,url:r}));return e.files&&await go(this,g,e.files),e.fetch&&await fo(this,g,e.fetch),g},registerJSModule:Au,run:Tu,runAsync:Ru,runEvent:Iu,transform:(n,e)=>e,writeFile:({FS:n,_module:{PATH:e,PATH_FS:r}},o,l)=>Eu({FS:n,PATH:e,PATH_FS:r},o,l)},Bg="pyodide",$g={dict_converter:Object.fromEntries},Wg={type:Bg,module:(n="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${n}/full/pyodide.mjs`,async engine({loadPyodide:n},e,r){const{stderr:o,stdout:l,get:d}=bc(),g=r.slice(0,r.lastIndexOf("/")),u=await d(n({stderr:o,stdout:l,indexURL:g}));if(e.files&&await go(this,u,e.files),e.fetch&&await fo(this,u,e.fetch),e.packages){await u.loadPackage("micropip");const m=await u.pyimport("micropip");await m.install(e.packages,{keep_going:!0}),m.destroy()}return u},registerJSModule:Au,run:Tu,runAsync:Ru,runEvent:Iu,transform:(n,e)=>e instanceof n.ffi.PyProxy?e.toJs($g):e,writeFile:({FS:n,PATH:e,_module:{PATH_FS:r}},o,l)=>Eu({FS:n,PATH:e,PATH_FS:r},o,l)},Wa="ruby-wasm-wasi",Ll=Wa.replace(/\W+/g,"_"),Qg={type:Wa,experimental:!0,module:(n="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${n}/dist/browser.esm.js`,async engine({DefaultRubyVM:n},e,r){const o=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),l=await WebAssembly.compile(await o.arrayBuffer()),{vm:d}=await n(l);return e.files&&await go(this,d,e.files),e.fetch&&await fo(this,d,e.fetch),d},registerJSModule(n,e,r){const o=`__module_${Ll}_${e}`;globalThis[o]=r,this.run(n,`require "js";$${e}=JS.global[:${o}]`),delete globalThis[o]},run:(n,e,...r)=>n.eval(Nr(e),...r),runAsync:(n,e,...r)=>n.evalAsync(Nr(e),...r),async runEvent(n,e,r){if(/^xworker\.(on\w+)$/.test(e)){const{$1:o}=RegExp,l=`__module_${Ll}_event`;globalThis[l]=r,this.run(n,`require "js";$xworker.call("${o}",JS.global[:${l}])`),delete globalThis[l]}else await this.run(n,`method(:${e})`).call(e,n.wrap(r))},transform:(n,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${Wa}`)}},Ug="wasmoon",qg={type:Ug,module:(n="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${n}/+esm`,async engine({LuaFactory:n,LuaLibraries:e},r){const{stderr:o,stdout:l,get:d}=bc(),g=await d(new n().createEngine());return g.global.getTable(e.Base,u=>{g.global.setField(u,"print",l),g.global.setField(u,"printErr",o)}),r.files&&await go(this,g,r.files),r.fetch&&await fo(this,g,r.fetch),g},registerJSModule:(n,e,r)=>{n.global.set(e,r)},run:(n,e,...r)=>{try{return n.doStringSync(Nr(e),...r)}catch(o){ri.get(n).stderr(o)}},runAsync:async(n,e,...r)=>{try{return await n.doString(Nr(e),...r)}catch(o){ri.get(n).stderr(o)}},runEvent:async(n,e,r)=>{const[o,...l]=e.split(".");let d=n.global.get(o),g;for(const u of l)[g,d]=[d,d[u]];try{await d.call(g,r)}catch(u){ri.get(n).stderr(u)}},transform:(n,e)=>e,writeFile:({cmodule:{module:{FS:n}}},e,r)=>Tg(n,e,r)},br=new Map,Pu=new Map,Qa=[],wi=[],Xg=new Proxy(new Map,{get(n,e){if(!n.has(e)){const[d,...g]=e.split("@"),u=br.get(d),m=/^(?:\.?\.?\/|https?:\/\/)/i.test(g)?g.join("@"):u.module(...g);n.set(e,{url:m,module:Cu(()=>import(m),__vite__mapDeps([]),import.meta.url),engine:u.engine.bind(u)})}const{url:r,module:o,engine:l}=n.get(e);return(d,g)=>o.then(u=>{Pu.set(e,d);for(const m of["files","fetch"]){const p=d?.[m];p&&Du.set(p,g)}return l(u,d,r)})}}),Vg=n=>{for(const e of[].concat(n.type))br.set(e,n),Qa.push(`script[type="${e}"]`),wi.push(`${e}-`)};for(const n of[Fg,Wg,Qg,qg])Vg(n);const jg="https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js",Ml=async n=>(await Cu(()=>import(jg),__vite__mapDeps([]),import.meta.url)).parse(n),Lu=n=>{let e=typeof n;return e==="string"&&/\.(json|toml|txt)$/.test(n)?e=RegExp.$1:n="./config.txt",[vu(n),e]},zg=(n,e,r={})=>{if(e){const[o,l]=Lu(e);if(l==="json")r=fetch(o).then(gg);else if(l==="toml")r=fetch(o).then(Cc).then(Ml);else if(l==="string")try{r=JSON.parse(e)}catch{r=Ml(e)}else l==="object"&&e&&(r=e);e=o}return bu(r).then(o=>Xg[n](o,e))},Mu=(n,e="")=>`${n}@${e}`.replace(/@$/,""),qn="BeforeRun",Xn="AfterRun",Ua=[`code${qn}`,`code${qn}Async`,`code${Xn}`,`code${Xn}Async`],Vn=["onWorker","onReady",`on${qn}`,`on${qn}Async`,`on${Xn}`,`on${Xn}Async`];function Gg(n,e){const{run:r,runAsync:o}=br.get(this.type);return{...n,run:r.bind(this,e),runAsync:o.bind(this,e)}}const Yg=(n,e,r,o,l,d)=>{if(l||d){const g=Gg.bind(n,e),u=o?"runAsync":"run",m=n[u];n[u]=o?async function(p,O,...x){l&&await l.call(this,g(p),r);const v=await m.call(this,p,O,...x);return d&&await d.call(this,g(p),r),v}:function(p,O,...x){l&&l.call(this,g(p),r);const v=m.call(this,p,O,...x);return d&&d.call(this,g(p),r),v}}};let Rs=class{constructor(e,r={}){const{main:o,worker:l}=r;this.interpreter=e,this.onWorker=o?.onWorker;for(const d of Vn.slice(1))this[d]=l?.[d];for(const d of Ua)this[d]=l?.[d]}toJSON(){const e={};for(const r of Vn.slice(1))this[r]&&(e[r]=String(this[r]));for(const r of Ua)this[r]&&(e[r]=Nr(this[r]()));return e}};const vc=(...n)=>function(r,o){const l=ug(),{postMessage:d}=l,g=this instanceof Rs;if(n.length){const[p,O]=n;o=Qn({},o||{type:p,version:O}),o.type||(o.type=p)}const[u]=Lu(o.config),m=fetch(r).then(Cc).then(p=>{const O=g?this.toJSON():void 0;d.call(l,{options:o,config:u,code:p,hooks:O})});return Eg(l,{postMessage:{value:(p,...O)=>m.then(()=>d.call(l,p,...O))},sync:{value:Ou(l,I1).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),l.addEventListener("message",p=>{const{data:O}=p;O instanceof Error&&(p.stopImmediatePropagation(),l.onerror(wc(p,{type:{value:"error"},error:{value:O}})))}),g&&this.onWorker?.(this.interpreter,l),l},yc=vc();class Hg extends kr{peersReady=new Map;workerInitializing=!1;running=!1;env={};syncProxyPy;asyncProxyPy;constructor(e,r,o={}){super(),e.getEnv=this.getEnv.bind(this),this.syncProxyPy=e,this.asyncProxyPy=r,e.fetch=this.fetch.bind(this),r.onerror=l=>{console.warn("asyncProxyPy.onerror"),console.warn(l),this.emit("error",l)},r.onmessageerror=l=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(l),this.emit("messageerror",l)},r.onmessage=l=>{let d=l.data;if(!Array.isArray(d)){console.warn("asyncProxyPy.onmessage",d),this.emit("display:error",`invalid message from worker 
`+JSON.stringify(d,null,2)+`
`);return}const[g,...u]=d;switch(g){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[m]=u;this.emit("display:stats",m);break;case"proxy:js:mpc:msg:ready":let[p,O]=u;O.getBuffer&&(O=O.getBuffer()),this.emit("send",{type:"ready",pid:p,payload:O});break;case"proxy:js:mpc:msg:runtime":let[x,v]=u;v.getBuffer&&(v=v.getBuffer()),this.emit("send",{type:"runtime",pid:x,payload:v});break;case"proxy:js:display":let[y]=u;this.display(y);break;case"proxy:js:display:error":let[E]=u;this.displayError(E+`
`);break}},this.env=o}exec=async e=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};run_mpc=async e=>{this.emit("exec:init"),e.filename||(e.filename="<exec>");try{console.log("run_mpc",e),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};processReadyMessage(e,r){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",e,r])}processRuntimeMessage(e,r){try{let o;if(r&&r instanceof Uint8Array&&(o=[r.buffer]),o){this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r],o);return}this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r])}catch(o){console.warn("runtime:error"),console.warn("runtime:error",o),this.emit("error",new ErrorEvent("runtime:error",{error:o}))}}updateEnv(e={}){this.env={...this.env,...e},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}fetch2=async e=>{console.log("fetching",e);let o=await(await fetch("./"+e)).arrayBuffer();return new Uint8Array(o)};fetch=async e=>{e.endsWith(".gz")&&(e+="ip"),console.log("js/fetch fetching",e);let o=await(await fetch(e)).arrayBuffer();return new Uint8Array(o)};getEnv=()=>this.env;readline=e=>{};destroy(){console.log("destroying worker"),this.running=!1,this._close()}display=e=>{this.emit("display",e)};displayError=e=>{this.emit("display:error",e)};resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}onerror=e=>{console.warn("MPCRuntime.onerror"),console.warn(e.error),this.emit("error",e)};onmessageerror=e=>{console.warn("MPCRuntime.onmessageerror"),console.warn(e),this.emit("messageerror",e)};setReadlineFn(e){this.readline=e,this.syncProxyPy.readline=e}}function Zg(n,e,r){let o={async:!0,type:"pyodide",version:"0.24.1",config:e};return console.log("creating a new worker"),yc.call(new Rs(null,r),n,o)}let Kg=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class Jg extends Hg{_close(){this.worker.terminate()}worker;constructor(e){let r=Kg,o={packages:["mpyc-web"]};e?.startup&&e?.startup!=""&&(r=e.startup),e?.config&&e?.config!=""&&(o=e.config);let l=Zg(r,o,{worker:{onReady:(d,g)=>{console.log("worker onReady/init"),d.io.stderr=u=>{typeof u!="string"&&(u=u.toString()),console.error(u),g.postMessage(["proxy:js:display:error",u])},d.io.stdout=u=>{g.postMessage(["proxy:js:display",u+`
`])},g.postMessage(["proxy:js:init"]),self.wrap=d,self.pyodide=d.interpreter,console.log(self.pyodide),self.runAsync=async(u,m)=>{try{return await d.interpreter.runPythonAsync(u,{filename:m})}catch(p){d.io.stderr(p)}},self.runAsync(`
                        import asyncio
                        import js
                        import sys
                        from startup import *
                    `,"startup.py")}}});l.onmessageerror=d=>{console.error("worker.onmessageerror"),console.error(d)},l.onerror=d=>{console.error("worker.onerror"),console.error(d)},super(l.sync,l,e?.env),this.worker=l}type(){return"PyScript/Worker"}}const ep=(n,e,r=globalThis)=>{const o=Symbol.for(n),l=o in r;return[l?r[o]:Object.defineProperty(r,o,{value:e})[o],l]},tp=(n,e=document)=>e.querySelector(n),qa=(n,e=document)=>[...e.querySelectorAll(n)],ku=(n,e=document)=>{const o=new XPathEvaluator().createExpression(n).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),l=[];for(let d=0,{snapshotLength:g}=o;d<g;d++)l.push(o.snapshotItem(d));return l},rp="Invalid content",ip="Invalid worker attribute",sp="Invalid worker attribute",np=n=>!n.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim(),Nu=n=>{const{src:e,worker:r}=n.attributes;if(r){let{value:o}=r;if(o)throw new SyntaxError(sp);if(o=e?.value,!o){if(e)throw new SyntaxError(ip);if(!n.childElementCount)o=n.textContent;else{const{innerHTML:d,localName:g,type:u}=n,m=u||g.replace(/-script$/,"");o=vg(d),console.warn(`Deprecated: use <script type="${m}"> for an always safe content parsing:
`,o)}return URL.createObjectURL(new Blob([Nr(o)],{type:"text/plain"}))}return o}if(e&&!np(n.textContent))throw new SyntaxError(rp)},op=n=>{let e=n;for(;e.parentNode;)e=e.parentNode;return e},Fu=(n,e)=>{const r=op(n);return r.getElementById(e)||tp(e,r)},ys=new WeakMap,ap={get(){let n=ys.get(this);return n||(n=document.createElement(`${this.type}-script`),ys.set(this,n),jn(this)),n},set(n){typeof n=="string"?ys.set(this,Fu(this,n)):(ys.set(this,n),jn(this))}},gn=new WeakMap,wr=new Map,cp=async(n,e,r,o)=>{const{type:l}=n,d=br.get(l);d.experimental&&console.warn(`The ${l} interpreter is experimental`);const[g,u]=await uo([gn.get(n).interpreter,e]);try{Un(document,"currentScript",{configurable:!0,get:()=>n}),d.registerJSModule(g,"polyscript",{XWorker:r}),Pl(n,l,"ready");const m=d[o?"runAsync":"run"](g,u),p=Pl.bind(null,n,l,"done");return o?m.then(p):p(),m}finally{delete document.currentScript}},ta=(n,e)=>{const r=n?.value;return r?e+r:""},Bu=(n,e,r,o,l,d=n)=>{if(!wr.has(e)){const g={interpreter:zg(r,l),queue:bu(),XWorker:vc(n,o)};wr.set(e,g),wr.has(n)||wr.set(n,g),wr.has(d)||wr.set(d,g)}return wr.get(e)},jn=async n=>{if(gn.has(n)){const{target:e}=n;e&&(n.closest("head")?document.body.append(e):n.after(e))}else{const{attributes:{async:e,config:r,env:o,target:l,version:d},src:g,type:u}=n,m=d?.value,p=Mu(u,m);let O=ta(r,"|");const x=ta(o,"")||`${p}${O}`;O=O.slice(1);const v=Nu(n);if(v){const b=vc(u,m),I=new b(v,{...yu(n,u),async:!!e,config:O});gn.set(Un(n,"xworker",{value:I}),{xworker:I});return}const y=ta(l,""),E=Bu(u,x,p,m,O);gn.set(Un(n,"target",ap),E),y&&ys.set(n,Fu(n,y));const C=g?fetch(g).then(Cc):n.textContent;E.queue=E.queue.then(()=>cp(n,C,E.XWorker,!!e))}},$u=new Proxy(wc(null),{get:(n,e)=>new Promise(queueMicrotask).then(()=>Wu(e))}),Wu=async n=>{if(wr.has(n)){const{interpreter:r,queue:o}=wr.get(n);return(await uo([r,o]))[0]}const e=wr.size?`Available interpreters are: ${[...wr.keys()].map(r=>`"${r}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${n}" was not found. ${e}`)},Qu=async n=>{const{type:e,currentTarget:r}=n;if(wi.length)for(let{name:o,value:l,ownerElement:d}of ku(`./@*[${wi.map(g=>`name()="${g}${e}"`).join(" or ")}]`,r)){o=o.slice(0,-(e.length+1));const g=await Wu(d.getAttribute(`${o}-env`)||o);br.get(o).runEvent(g,l,n)}},Xa=n=>{if(wi.length)for(let{name:e,ownerElement:r}of ku(`.//@*[${wi.map(o=>`starts-with(name(),"${o}")`).join(" or ")}]`,n)){const o=e.lastIndexOf("-"),l=e.slice(o+1);l!=="env"&&(r.addEventListener(l,Qu),"disabled"in r&&!r.disabled&&(r.disabled=!0,$u[e.slice(0,o)].then(()=>{r.disabled=!1})))}},Ss=[],Uu=new Map,Ds=new Map,Va=n=>{for(const e of Ss)if(n.matches(e)){const r=Uu.get(e),o=pn.get(r),{resolve:l}=Ds.get(r),{options:d,known:g}=o;if(!g.has(n)){g.add(n);const{interpreter:u,config:m,version:p,env:O,onerror:x,hooks:v}=d;let y;try{const R=Nu(n);if(R){const S=yc.call(new Rs(null,v),R,{...yu(n,r),version:p,type:u,custom:r,config:n.getAttribute("config")||m||{},async:n.hasAttribute("async")});Un(n,"xworker",{value:S}),l({type:r,xworker:S});return}}catch(R){y=R}const E=Mu(u,p),C=O||`${E}${m?`|${m}`:""}`,{interpreter:b,XWorker:I}=Bu(r,C,E,p,m,u);b.then(R=>{const S=wc(br.get(u)),B=new Rs(R,v),U=function(...A){return I.apply(B,A)},F={...Dg(S,r,structuredClone(Pu.get(E)),R),XWorker:U};S.registerJSModule(R,"polyscript",{XWorker:U});for(const $ of["Run","RunAsync"]){const A=Ag(S,`r${$.slice(1)}`);let M="",G="";for(const X of Ua){const q=v?.main?.[X];q&&X.endsWith($)&&(X.startsWith("codeBefore")?M=Nr(q()):G=Nr(q()))}G&&A(G,!1),M&&A(M,!0);let T,P;for(let X=2;X<Vn.length;X++){const q=Vn[X],W=v?.main?.[q];W&&q.endsWith($)&&(q.startsWith("onBefore")?T=W:P=W)}Yg(S,F,n,$.endsWith("Async"),T,P)}o.queue=o.queue.then(()=>(l(F),y&&x?.(y,n),v?.main?.onReady?.(F,n)))})}}},pn=new Map;let lp=0;const hp=(n,e)=>{let r=n==null;if(r)n=`_ps${lp++}`;else if(br.has(n)||pn.has(n))throw new Error(`<script type="${n}"> already registered`);if(!br.has(e?.interpreter))throw new Error("Unspecified interpreter");br.set(n,br.get(e.interpreter));const o=[`script[type="${n}"]`];if(qu(n),r){const{hooks:l}=e,d=l?.main?.onReady;e={...e,hooks:{...l,main:{...l?.main,onReady(g,u){Ss.splice(Ss.indexOf(n),1),br.delete(n),pn.delete(n),Ds.delete(n),u.remove(),d?.(g)}}}},document.head.append(Qn(document.createElement("script"),{type:n}))}else o.push(`${n}-script`),wi.push(`${n}-`);for(const l of o)Uu.set(l,n);Ss.push(...o),pn.set(n,{options:Qn({env:n},e),known:new WeakSet,queue:Promise.resolve()}),r||Xa(document),qa(o.join(",")).forEach(Va)},qu=n=>(Ds.has(n)||Ds.set(n,Promise.withResolvers()),Ds.get(n).promise),[{define:Gb,whenDefined:Yb,env:Hb,Hook:Zb,XWorker:Kb},up]=ep("polyscript",{define:hp,whenDefined:qu,env:$u,Hook:Rs,XWorker:yc});if(!up){const n=new MutationObserver(l=>{const d=Qa.join(",");for(const{type:g,target:u,attributeName:m,addedNodes:p}of l){if(g==="attributes"){const O=m.lastIndexOf("-")+1;if(O){const x=m.slice(0,O);for(const v of wi)if(x===v){const y=m.slice(O);if(y!=="env"){const E=u.hasAttribute(m)?"add":"remove";u[`${E}EventListener`](y,Qu)}break}}continue}for(const O of p)O.nodeType===1&&(Xa(O),d&&O.matches(d)?jn(O):e(d,O,!0))}}),e=(l,d,g)=>{l&&qa(l,d).forEach(jn),l=Ss.join(","),l&&(g&&Va(d),qa(l,d).forEach(Va))},r=l=>(n.observe(l,{childList:!0,subtree:!0,attributes:!0}),l),{attachShadow:o}=Element.prototype;Qn(Element.prototype,{attachShadow(l){return r(o.call(this,l))}}),queueMicrotask(()=>{Xa(r(document)),e(Qa.join(","),document,!1)})}class dp{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return fp(e).buffer}}function fp(n){let e=0;for(const l of n)e+=l.byteLength;const r=new Uint8Array(e);let o=0;for(const l of n){const d=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);r.set(d,o),o+=l.byteLength}return r}function Xu(n){return new gp(n).unpack()}function Vu(n){const e=new pp;return e.pack(n),e.getBuffer()}class gp{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let o=0,l="",d,g;for(;o<e;)d=r[o],d<160?(g=d,o++):(d^192)<32?(g=(d&31)<<6|r[o+1]&63,o+=2):(d^224)<16?(g=(d&15)<<12|(r[o+1]&63)<<6|r[o+2]&63,o+=3):(g=(d&7)<<18|(r[o+1]&63)<<12|(r[o+2]&63)<<6|r[o+3]&63,o+=4),l+=String.fromCodePoint(g);return this.index+=e,l}unpack_array(e){const r=new Array(e);for(let o=0;o<e;o++)r[o]=this.unpack();return r}unpack_map(e){const r={};for(let o=0;o<e;o++){const l=this.unpack();r[l]=this.unpack()}return r}unpack_float(){const e=this.unpack_uint32(),r=e>>31,o=(e>>23&255)-127,l=e&8388607|8388608;return(r===0?1:-1)*l*2**(o-23)}unpack_double(){const e=this.unpack_uint32(),r=this.unpack_uint32(),o=e>>31,l=(e>>20&2047)-1023,g=(e&1048575|1048576)*2**(l-20)+r*2**(l-52);return(o===0?1:-1)*g}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class pp{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array)this.pack_array(e);else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const o=e;this.pack_bin(new Uint8Array(o.buffer,o.byteOffset,o.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else throw new Error(`Type "${r.toString()}" not yet supported`)}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),o=r.length;if(o<=15)this.pack_uint8(176+o);else if(o<=65535)this._bufferBuilder.append(216),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(o);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");for(let o=0;o<r;o++)this.pack(e[o])}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let r=0;e<0&&(r=1,e=-e);const o=Math.floor(Math.log(e)/Math.LN2),l=e/2**o-1,d=Math.floor(l*2**52),g=2**32,u=r<<31|o+1023<<20|d/g&1048575,m=d%g;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(m)}pack_object(e){const o=Object.keys(e).length;if(o<=15)this.pack_uint8(128+o);else if(o<=65535)this._bufferBuilder.append(222),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(o);else throw new Error("Invalid length");for(const l in e)e.hasOwnProperty(l)&&(this.pack(l),this.pack(e[l]))}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const r=e&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(e){const r=e/4294967296,o=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const r=Math.floor(e/4294967296),o=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}constructor(){this._bufferBuilder=new dp,this._textEncoder=new TextEncoder}}let ju=!0,zu=!0;function mn(n,e,r){const o=n.match(e);return o&&o.length>=r&&parseInt(o[r],10)}function Ei(n,e,r){if(!n.RTCPeerConnection)return;const o=n.RTCPeerConnection.prototype,l=o.addEventListener;o.addEventListener=function(g,u){if(g!==e)return l.apply(this,arguments);const m=p=>{const O=r(p);O&&(u.handleEvent?u.handleEvent(O):u(O))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,m),l.apply(this,[g,m])};const d=o.removeEventListener;o.removeEventListener=function(g,u){if(g!==e||!this._eventMap||!this._eventMap[e])return d.apply(this,arguments);if(!this._eventMap[e].has(u))return d.apply(this,arguments);const m=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,d.apply(this,[g,m])},Object.defineProperty(o,"on"+e,{get(){return this["_on"+e]},set(g){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),g&&this.addEventListener(e,this["_on"+e]=g)},enumerable:!0,configurable:!0})}function mp(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(ju=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function _p(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(zu=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Gu(){if(typeof window=="object"){if(ju)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ec(n,e){zu&&console.warn(n+" is deprecated, please use "+e+" instead.")}function xp(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=n;if(r.mozGetUserMedia)e.browser="firefox",e.version=mn(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=mn(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=mn(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function kl(n){return Object.prototype.toString.call(n)==="[object Object]"}function Yu(n){return kl(n)?Object.keys(n).reduce(function(e,r){const o=kl(n[r]),l=o?Yu(n[r]):n[r],d=o&&!Object.keys(l).length;return l===void 0||d?e:Object.assign(e,{[r]:l})},{}):n}function ja(n,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(o=>{o.endsWith("Id")?ja(n,n.get(e[o]),r):o.endsWith("Ids")&&e[o].forEach(l=>{ja(n,n.get(l),r)})}))}function Nl(n,e,r){const o=r?"outbound-rtp":"inbound-rtp",l=new Map;if(e===null)return l;const d=[];return n.forEach(g=>{g.type==="track"&&g.trackIdentifier===e.id&&d.push(g)}),d.forEach(g=>{n.forEach(u=>{u.type===o&&u.trackId===g.id&&ja(n,u,l)})}),l}const Fl=Gu;function Hu(n,e){const r=n&&n.navigator;if(!r.mediaDevices)return;const o=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const m={};return Object.keys(u).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const O=typeof u[p]=="object"?u[p]:{ideal:u[p]};O.exact!==void 0&&typeof O.exact=="number"&&(O.min=O.max=O.exact);const x=function(v,y){return v?v+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(O.ideal!==void 0){m.optional=m.optional||[];let v={};typeof O.ideal=="number"?(v[x("min",p)]=O.ideal,m.optional.push(v),v={},v[x("max",p)]=O.ideal,m.optional.push(v)):(v[x("",p)]=O.ideal,m.optional.push(v))}O.exact!==void 0&&typeof O.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[x("",p)]=O.exact):["min","max"].forEach(v=>{O[v]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[x(v,p)]=O[v])})}),u.advanced&&(m.optional=(m.optional||[]).concat(u.advanced)),m},l=function(u,m){if(e.version>=61)return m(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const p=function(O,x,v){x in O&&!(v in O)&&(O[v]=O[x],delete O[x])};u=JSON.parse(JSON.stringify(u)),p(u.audio,"autoGainControl","googAutoGainControl"),p(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=o(u.audio)}if(u&&typeof u.video=="object"){let p=u.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const O=e.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!O)){delete u.video.facingMode;let x;if(p.exact==="environment"||p.ideal==="environment"?x=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(x=["front"]),x)return r.mediaDevices.enumerateDevices().then(v=>{v=v.filter(E=>E.kind==="videoinput");let y=v.find(E=>x.some(C=>E.label.toLowerCase().includes(C)));return!y&&v.length&&x.includes("back")&&(y=v[v.length-1]),y&&(u.video.deviceId=p.exact?{exact:y.deviceId}:{ideal:y.deviceId}),u.video=o(u.video),Fl("chrome: "+JSON.stringify(u)),m(u)})}u.video=o(u.video)}return Fl("chrome: "+JSON.stringify(u)),m(u)},d=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},g=function(u,m,p){l(u,O=>{r.webkitGetUserMedia(O,m,x=>{p&&p(d(x))})})};if(r.getUserMedia=g.bind(r),r.mediaDevices.getUserMedia){const u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(m){return l(m,p=>u(p).then(O=>{if(p.audio&&!O.getAudioTracks().length||p.video&&!O.getVideoTracks().length)throw O.getTracks().forEach(x=>{x.stop()}),new DOMException("","NotFoundError");return O},O=>Promise.reject(d(O))))}}}function Op(n,e){if(!(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices)&&n.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}n.navigator.mediaDevices.getDisplayMedia=function(o){return e(o).then(l=>{const d=o.video&&o.video.width,g=o.video&&o.video.height,u=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:l,maxFrameRate:u||3}},d&&(o.video.mandatory.maxWidth=d),g&&(o.video.mandatory.maxHeight=g),n.navigator.mediaDevices.getUserMedia(o)})}}}function Zu(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Ku(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",l=>{let d;n.RTCPeerConnection.prototype.getReceivers?d=this.getReceivers().find(u=>u.track&&u.track.id===l.track.id):d={track:l.track};const g=new Event("track");g.track=l.track,g.receiver=d,g.transceiver={receiver:d},g.streams=[o.stream],this.dispatchEvent(g)}),o.stream.getTracks().forEach(l=>{let d;n.RTCPeerConnection.prototype.getReceivers?d=this.getReceivers().find(u=>u.track&&u.track.id===l.id):d={track:l};const g=new Event("track");g.track=l,g.receiver=d,g.transceiver={receiver:d},g.streams=[o.stream],this.dispatchEvent(g)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ei(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Ju(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(l,d){return{track:d,get dtmf(){return this._dtmf===void 0&&(d.kind==="audio"?this._dtmf=l.createDTMFSender(d):this._dtmf=null),this._dtmf},_pc:l}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(u,m){let p=l.apply(this,arguments);return p||(p=e(this,u),this._senders.push(p)),p};const d=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(u){d.apply(this,arguments);const m=this._senders.indexOf(u);m!==-1&&this._senders.splice(m,1)}}const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(d){this._senders=this._senders||[],r.apply(this,[d]),d.getTracks().forEach(g=>{this._senders.push(e(this,g))})};const o=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(d){this._senders=this._senders||[],o.apply(this,[d]),d.getTracks().forEach(g=>{const u=this._senders.find(m=>m.track===g);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(l=>l._pc=this),o},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ed(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[o,l,d]=arguments;if(arguments.length>0&&typeof o=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof o!="function"))return e.apply(this,[]);const g=function(m){const p={};return m.result().forEach(x=>{const v={id:x.id,timestamp:x.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[x.type]||x.type};x.names().forEach(y=>{v[y]=x.stat(y)}),p[v.id]=v}),p},u=function(m){return new Map(Object.keys(m).map(p=>[p,m[p]]))};if(arguments.length>=2){const m=function(p){l(u(g(p)))};return e.apply(this,[m,o])}return new Promise((m,p)=>{e.apply(this,[function(O){m(u(g(O)))},p])}).then(l,d)}}function td(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const d=r.apply(this,[]);return d.forEach(g=>g._pc=this),d});const o=n.RTCPeerConnection.prototype.addTrack;o&&(n.RTCPeerConnection.prototype.addTrack=function(){const d=o.apply(this,arguments);return d._pc=this,d}),n.RTCRtpSender.prototype.getStats=function(){const d=this;return this._pc.getStats().then(g=>Nl(g,d.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const l=r.apply(this,[]);return l.forEach(d=>d._pc=this),l}),Ei(n,"track",o=>(o.receiver._pc=o.srcElement,o)),n.RTCRtpReceiver.prototype.getStats=function(){const l=this;return this._pc.getStats().then(d=>Nl(d,l.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const o=arguments[0];let l,d,g;return this.getSenders().forEach(u=>{u.track===o&&(l?g=!0:l=u)}),this.getReceivers().forEach(u=>(u.track===o&&(d?g=!0:d=u),u.track===o)),g||l&&d?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):l?l.getStats():d?d.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function rd(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(g=>this._shimmedLocalStreams[g][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(g,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(m)===-1&&this._shimmedLocalStreams[u.id].push(m):this._shimmedLocalStreams[u.id]=[u,m],m};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){this._shimmedLocalStreams=this._shimmedLocalStreams||{},g.getTracks().forEach(p=>{if(this.getSenders().find(x=>x.track===p))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();r.apply(this,arguments);const m=this.getSenders().filter(p=>u.indexOf(p)===-1);this._shimmedLocalStreams[g.id]=[g].concat(m)};const o=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[g.id],o.apply(this,arguments)};const l=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(g){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},g&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const m=this._shimmedLocalStreams[u].indexOf(g);m!==-1&&this._shimmedLocalStreams[u].splice(m,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),l.apply(this,arguments)}}function id(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return rd(n);const r=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const O=r.apply(this);return this._reverseStreams=this._reverseStreams||{},O.map(x=>this._reverseStreams[x.id])};const o=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(O){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},O.getTracks().forEach(x=>{if(this.getSenders().find(y=>y.track===x))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[O.id]){const x=new n.MediaStream(O.getTracks());this._streams[O.id]=x,this._reverseStreams[x.id]=O,O=x}o.apply(this,[O])};const l=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(O){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[O.id]||O]),delete this._reverseStreams[this._streams[O.id]?this._streams[O.id].id:O.id],delete this._streams[O.id]},n.RTCPeerConnection.prototype.addTrack=function(O,x){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(C=>C===O))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===O))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const E=this._streams[x.id];if(E)E.addTrack(O),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new n.MediaStream([O]);this._streams[x.id]=C,this._reverseStreams[C.id]=x,this.addStream(C)}return this.getSenders().find(C=>C.track===O)};function d(p,O){let x=O.sdp;return Object.keys(p._reverseStreams||[]).forEach(v=>{const y=p._reverseStreams[v],E=p._streams[y.id];x=x.replace(new RegExp(E.id,"g"),y.id)}),new RTCSessionDescription({type:O.type,sdp:x})}function g(p,O){let x=O.sdp;return Object.keys(p._reverseStreams||[]).forEach(v=>{const y=p._reverseStreams[v],E=p._streams[y.id];x=x.replace(new RegExp(y.id,"g"),E.id)}),new RTCSessionDescription({type:O.type,sdp:x})}["createOffer","createAnswer"].forEach(function(p){const O=n.RTCPeerConnection.prototype[p],x={[p](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?O.apply(this,[E=>{const C=d(this,E);v[0].apply(null,[C])},E=>{v[1]&&v[1].apply(null,E)},arguments[2]]):O.apply(this,arguments).then(E=>d(this,E))}};n.RTCPeerConnection.prototype[p]=x[p]});const u=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=g(this,arguments[0]),u.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const p=m.get.apply(this);return p.type===""?p:d(this,p)}}),n.RTCPeerConnection.prototype.removeTrack=function(O){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!O._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(O._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(C=>O.track===C)&&(v=this._streams[y])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(O.track),this.dispatchEvent(new Event("negotiationneeded")))}}function za(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const o=n.RTCPeerConnection.prototype[r],l={[r](){return arguments[0]=new(r==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};n.RTCPeerConnection.prototype[r]=l[r]})}function sd(n,e){Ei(n,"negotiationneeded",r=>{const o=r.target;if(!((e.version<72||o.getConfiguration&&o.getConfiguration().sdpSemantics==="plan-b")&&o.signalingState!=="stable"))return r})}const Bl=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:sd,shimAddTrackRemoveTrack:id,shimAddTrackRemoveTrackWithNative:rd,shimGetDisplayMedia:Op,shimGetSendersWithDtmf:Ju,shimGetStats:ed,shimGetUserMedia:Hu,shimMediaStream:Zu,shimOnTrack:Ku,shimPeerConnection:za,shimSenderReceiverGetStats:td},Symbol.toStringTag,{value:"Module"}));function nd(n,e){const r=n&&n.navigator,o=n&&n.MediaStreamTrack;if(r.getUserMedia=function(l,d,g){Ec("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(l).then(d,g)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const l=function(g,u,m){u in g&&!(m in g)&&(g[m]=g[u],delete g[u])},d=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(g){return typeof g=="object"&&typeof g.audio=="object"&&(g=JSON.parse(JSON.stringify(g)),l(g.audio,"autoGainControl","mozAutoGainControl"),l(g.audio,"noiseSuppression","mozNoiseSuppression")),d(g)},o&&o.prototype.getSettings){const g=o.prototype.getSettings;o.prototype.getSettings=function(){const u=g.apply(this,arguments);return l(u,"mozAutoGainControl","autoGainControl"),l(u,"mozNoiseSuppression","noiseSuppression"),u}}if(o&&o.prototype.applyConstraints){const g=o.prototype.applyConstraints;o.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),l(u,"autoGainControl","mozAutoGainControl"),l(u,"noiseSuppression","mozNoiseSuppression")),g.apply(this,[u])}}}}function Cp(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(o){if(!(o&&o.video)){const l=new DOMException("getDisplayMedia without video constraints is undefined");return l.name="NotFoundError",l.code=8,Promise.reject(l)}return o.video===!0?o.video={mediaSource:e}:o.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(o)})}function od(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ga(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const d=n.RTCPeerConnection.prototype[l],g={[l](){return arguments[0]=new(l==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};n.RTCPeerConnection.prototype[l]=g[l]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[d,g,u]=arguments;return o.apply(this,[d||null]).then(m=>{if(e.version<53&&!g)try{m.forEach(p=>{p.type=r[p.type]||p.type})}catch(p){if(p.name!=="TypeError")throw p;m.forEach((O,x)=>{m.set(x,Object.assign({},O,{type:r[O.type]||O.type}))})}return m}).then(g,u)}}function ad(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const l=e.apply(this,[]);return l.forEach(d=>d._pc=this),l});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const l=r.apply(this,arguments);return l._pc=this,l}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function cd(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=e.apply(this,[]);return o.forEach(l=>l._pc=this),o}),Ei(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ld(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){Ec("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&r.getTracks().includes(o.track)&&this.removeTrack(o)})})}function hd(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function ud(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const l=o.length>0;l&&o.forEach(g=>{if("rid"in g&&!/^[a-z0-9]{0,16}$/i.test(g.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in g&&!(parseFloat(g.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in g&&!(parseFloat(g.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const d=e.apply(this,arguments);if(l){const{sender:g}=d,u=g.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=o,g.sendEncodings=o,this.setParametersPromises.push(g.setParameters(u).then(()=>{delete g.sendEncodings}).catch(()=>{delete g.sendEncodings})))}return d})}function dd(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const o=e.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function fd(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function gd(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const $l=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:ud,shimCreateAnswer:gd,shimCreateOffer:fd,shimGetDisplayMedia:Cp,shimGetParameters:dd,shimGetUserMedia:nd,shimOnTrack:od,shimPeerConnection:Ga,shimRTCDataChannel:hd,shimReceiverGetStats:cd,shimRemoveStream:ld,shimSenderGetStats:ad},Symbol.toStringTag,{value:"Module"}));function pd(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(l=>e.call(this,l,o)),o.getVideoTracks().forEach(l=>e.call(this,l,o))},n.RTCPeerConnection.prototype.addTrack=function(o,...l){return l&&l.forEach(d=>{this._localStreams?this._localStreams.includes(d)||this._localStreams.push(d):this._localStreams=[d]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(r);if(o===-1)return;this._localStreams.splice(o,1);const l=r.getTracks();this.getSenders().forEach(d=>{l.includes(d.track)&&this.removeTrack(d)})})}}function md(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=o=>{o.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const d=new Event("addstream");d.stream=l,this.dispatchEvent(d)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(d=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(d)>=0)return;o._remoteStreams.push(d);const g=new Event("addstream");g.stream=d,o.dispatchEvent(g)})}),e.apply(o,arguments)}}}function _d(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,r=e.createOffer,o=e.createAnswer,l=e.setLocalDescription,d=e.setRemoteDescription,g=e.addIceCandidate;e.createOffer=function(p,O){const x=arguments.length>=2?arguments[2]:arguments[0],v=r.apply(this,[x]);return O?(v.then(p,O),Promise.resolve()):v},e.createAnswer=function(p,O){const x=arguments.length>=2?arguments[2]:arguments[0],v=o.apply(this,[x]);return O?(v.then(p,O),Promise.resolve()):v};let u=function(m,p,O){const x=l.apply(this,[m]);return O?(x.then(p,O),Promise.resolve()):x};e.setLocalDescription=u,u=function(m,p,O){const x=d.apply(this,[m]);return O?(x.then(p,O),Promise.resolve()):x},e.setRemoteDescription=u,u=function(m,p,O){const x=g.apply(this,[m]);return O?(x.then(p,O),Promise.resolve()):x},e.addIceCandidate=u}function xd(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,o=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=l=>o(Od(l))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(o,l,d){e.mediaDevices.getUserMedia(o).then(l,d)}.bind(e))}function Od(n){return n&&n.video!==void 0?Object.assign({},n,{video:Yu(n.video)}):n}function Cd(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(o,l){if(o&&o.iceServers){const d=[];for(let g=0;g<o.iceServers.length;g++){let u=o.iceServers[g];u.urls===void 0&&u.url?(Ec("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,d.push(u)):d.push(o.iceServers[g])}o.iceServers=d}return new e(o,l)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function wd(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bd(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const l=this.getTransceivers().find(g=>g.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):o.offerToReceiveAudio===!0&&!l&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const d=this.getTransceivers().find(g=>g.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):o.offerToReceiveVideo===!0&&!d&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function vd(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const Wl=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:vd,shimCallbacksAPI:_d,shimConstraints:Od,shimCreateOfferLegacy:bd,shimGetUserMedia:xd,shimLocalStreamsAPI:pd,shimRTCIceServerUrls:Cd,shimRemoteStreamsAPI:md,shimTrackEventTransceiver:wd},Symbol.toStringTag,{value:"Module"}));var yd={exports:{}};(function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(o=>o.trim())},e.splitSections=function(r){return r.split(`
m=`).map((l,d)=>(d>0?"m="+l:l).trim()+`\r
`)},e.getDescription=function(r){const o=e.splitSections(r);return o&&o[0]},e.getMediaSections=function(r){const o=e.splitSections(r);return o.shift(),o},e.matchPrefix=function(r,o){return e.splitLines(r).filter(l=>l.indexOf(o)===0)},e.parseCandidate=function(r){let o;r.indexOf("a=candidate:")===0?o=r.substring(12).split(" "):o=r.substring(10).split(" ");const l={foundation:o[0],component:{1:"rtp",2:"rtcp"}[o[1]]||o[1],protocol:o[2].toLowerCase(),priority:parseInt(o[3],10),ip:o[4],address:o[4],port:parseInt(o[5],10),type:o[7]};for(let d=8;d<o.length;d+=2)switch(o[d]){case"raddr":l.relatedAddress=o[d+1];break;case"rport":l.relatedPort=parseInt(o[d+1],10);break;case"tcptype":l.tcpType=o[d+1];break;case"ufrag":l.ufrag=o[d+1],l.usernameFragment=o[d+1];break;default:l[o[d]]===void 0&&(l[o[d]]=o[d+1]);break}return l},e.writeCandidate=function(r){const o=[];o.push(r.foundation);const l=r.component;l==="rtp"?o.push(1):l==="rtcp"?o.push(2):o.push(l),o.push(r.protocol.toUpperCase()),o.push(r.priority),o.push(r.address||r.ip),o.push(r.port);const d=r.type;return o.push("typ"),o.push(d),d!=="host"&&r.relatedAddress&&r.relatedPort&&(o.push("raddr"),o.push(r.relatedAddress),o.push("rport"),o.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(o.push("tcptype"),o.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(o.push("ufrag"),o.push(r.usernameFragment||r.ufrag)),"candidate:"+o.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let o=r.substring(9).split(" ");const l={payloadType:parseInt(o.shift(),10)};return o=o[0].split("/"),l.name=o[0],l.clockRate=parseInt(o[1],10),l.channels=o.length===3?parseInt(o[2],10):1,l.numChannels=l.channels,l},e.writeRtpMap=function(r){let o=r.payloadType;r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType);const l=r.channels||r.numChannels||1;return"a=rtpmap:"+o+" "+r.name+"/"+r.clockRate+(l!==1?"/"+l:"")+`\r
`},e.parseExtmap=function(r){const o=r.substring(9).split(" ");return{id:parseInt(o[0],10),direction:o[0].indexOf("/")>0?o[0].split("/")[1]:"sendrecv",uri:o[1],attributes:o.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const o={};let l;const d=r.substring(r.indexOf(" ")+1).split(";");for(let g=0;g<d.length;g++)l=d[g].trim().split("="),o[l[0].trim()]=l[1];return o},e.writeFmtp=function(r){let o="",l=r.payloadType;if(r.preferredPayloadType!==void 0&&(l=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const d=[];Object.keys(r.parameters).forEach(g=>{r.parameters[g]!==void 0?d.push(g+"="+r.parameters[g]):d.push(g)}),o+="a=fmtp:"+l+" "+d.join(";")+`\r
`}return o},e.parseRtcpFb=function(r){const o=r.substring(r.indexOf(" ")+1).split(" ");return{type:o.shift(),parameter:o.join(" ")}},e.writeRtcpFb=function(r){let o="",l=r.payloadType;return r.preferredPayloadType!==void 0&&(l=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(d=>{o+="a=rtcp-fb:"+l+" "+d.type+(d.parameter&&d.parameter.length?" "+d.parameter:"")+`\r
`}),o},e.parseSsrcMedia=function(r){const o=r.indexOf(" "),l={ssrc:parseInt(r.substring(7,o),10)},d=r.indexOf(":",o);return d>-1?(l.attribute=r.substring(o+1,d),l.value=r.substring(d+1)):l.attribute=r.substring(o+1),l},e.parseSsrcGroup=function(r){const o=r.substring(13).split(" ");return{semantics:o.shift(),ssrcs:o.map(l=>parseInt(l,10))}},e.getMid=function(r){const o=e.matchPrefix(r,"a=mid:")[0];if(o)return o.substring(6)},e.parseFingerprint=function(r){const o=r.substring(14).split(" ");return{algorithm:o[0].toLowerCase(),value:o[1].toUpperCase()}},e.getDtlsParameters=function(r,o){return{role:"auto",fingerprints:e.matchPrefix(r+o,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,o){let l="a=setup:"+o+`\r
`;return r.fingerprints.forEach(d=>{l+="a=fingerprint:"+d.algorithm+" "+d.value+`\r
`}),l},e.parseCryptoLine=function(r){const o=r.substring(9).split(" ");return{tag:parseInt(o[0],10),cryptoSuite:o[1],keyParams:o[2],sessionParams:o.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const o=r.substring(7).split("|");return{keyMethod:"inline",keySalt:o[0],lifeTime:o[1],mkiValue:o[2]?o[2].split(":")[0]:void 0,mkiLength:o[2]?o[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,o){return e.matchPrefix(r+o,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,o){const l=e.matchPrefix(r+o,"a=ice-ufrag:")[0],d=e.matchPrefix(r+o,"a=ice-pwd:")[0];return l&&d?{usernameFragment:l.substring(12),password:d.substring(10)}:null},e.writeIceParameters=function(r){let o="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(o+=`a=ice-lite\r
`),o},e.parseRtpParameters=function(r){const o={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},d=e.splitLines(r)[0].split(" ");o.profile=d[2];for(let u=3;u<d.length;u++){const m=d[u],p=e.matchPrefix(r,"a=rtpmap:"+m+" ")[0];if(p){const O=e.parseRtpMap(p),x=e.matchPrefix(r,"a=fmtp:"+m+" ");switch(O.parameters=x.length?e.parseFmtp(x[0]):{},O.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+m+" ").map(e.parseRtcpFb),o.codecs.push(O),O.name.toUpperCase()){case"RED":case"ULPFEC":o.fecMechanisms.push(O.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(u=>{o.headerExtensions.push(e.parseExtmap(u))});const g=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return o.codecs.forEach(u=>{g.forEach(m=>{u.rtcpFeedback.find(O=>O.type===m.type&&O.parameter===m.parameter)||u.rtcpFeedback.push(m)})}),o},e.writeRtpDescription=function(r,o){let l="";l+="m="+r+" ",l+=o.codecs.length>0?"9":"0",l+=" "+(o.profile||"UDP/TLS/RTP/SAVPF")+" ",l+=o.codecs.map(g=>g.preferredPayloadType!==void 0?g.preferredPayloadType:g.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,o.codecs.forEach(g=>{l+=e.writeRtpMap(g),l+=e.writeFmtp(g),l+=e.writeRtcpFb(g)});let d=0;return o.codecs.forEach(g=>{g.maxptime>d&&(d=g.maxptime)}),d>0&&(l+="a=maxptime:"+d+`\r
`),o.headerExtensions&&o.headerExtensions.forEach(g=>{l+=e.writeExtmap(g)}),l},e.parseRtpEncodingParameters=function(r){const o=[],l=e.parseRtpParameters(r),d=l.fecMechanisms.indexOf("RED")!==-1,g=l.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(r,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),m=u.length>0&&u[0].ssrc;let p;const O=e.matchPrefix(r,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(E=>parseInt(E,10)));O.length>0&&O[0].length>1&&O[0][0]===m&&(p=O[0][1]),l.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let y={ssrc:m,codecPayloadType:parseInt(v.parameters.apt,10)};m&&p&&(y.rtx={ssrc:p}),o.push(y),d&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:m,mechanism:g?"red+ulpfec":"red"},o.push(y))}}),o.length===0&&m&&o.push({ssrc:m});let x=e.matchPrefix(r,"b=");return x.length&&(x[0].indexOf("b=TIAS:")===0?x=parseInt(x[0].substring(7),10):x[0].indexOf("b=AS:")===0?x=parseInt(x[0].substring(5),10)*1e3*.95-50*40*8:x=void 0,o.forEach(v=>{v.maxBitrate=x})),o},e.parseRtcpParameters=function(r){const o={},l=e.matchPrefix(r,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];l&&(o.cname=l.value,o.ssrc=l.ssrc);const d=e.matchPrefix(r,"a=rtcp-rsize");o.reducedSize=d.length>0,o.compound=d.length===0;const g=e.matchPrefix(r,"a=rtcp-mux");return o.mux=g.length>0,o},e.writeRtcpParameters=function(r){let o="";return r.reducedSize&&(o+=`a=rtcp-rsize\r
`),r.mux&&(o+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(o+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),o},e.parseMsid=function(r){let o;const l=e.matchPrefix(r,"a=msid:");if(l.length===1)return o=l[0].substring(7).split(" "),{stream:o[0],track:o[1]};const d=e.matchPrefix(r,"a=ssrc:").map(g=>e.parseSsrcMedia(g)).filter(g=>g.attribute==="msid");if(d.length>0)return o=d[0].value.split(" "),{stream:o[0],track:o[1]}},e.parseSctpDescription=function(r){const o=e.parseMLine(r),l=e.matchPrefix(r,"a=max-message-size:");let d;l.length>0&&(d=parseInt(l[0].substring(19),10)),isNaN(d)&&(d=65536);const g=e.matchPrefix(r,"a=sctp-port:");if(g.length>0)return{port:parseInt(g[0].substring(12),10),protocol:o.fmt,maxMessageSize:d};const u=e.matchPrefix(r,"a=sctpmap:");if(u.length>0){const m=u[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:d}}},e.writeSctpDescription=function(r,o){let l=[];return r.protocol!=="DTLS/SCTP"?l=["m="+r.kind+" 9 "+r.protocol+" "+o.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+o.port+`\r
`]:l=["m="+r.kind+" 9 "+r.protocol+" "+o.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+o.port+" "+o.protocol+` 65535\r
`],o.maxMessageSize!==void 0&&l.push("a=max-message-size:"+o.maxMessageSize+`\r
`),l.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,o,l){let d;const g=o!==void 0?o:2;return r?d=r:d=e.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+d+" "+g+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,o){const l=e.splitLines(r);for(let d=0;d<l.length;d++)switch(l[d]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[d].substring(2)}return o?e.getDirection(o):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const l=e.splitLines(r)[0].substring(2).split(" ");return{kind:l[0],port:parseInt(l[1],10),protocol:l[2],fmt:l.slice(3).join(" ")}},e.parseOLine=function(r){const l=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:l[0],sessionId:l[1],sessionVersion:parseInt(l[2],10),netType:l[3],addressType:l[4],address:l[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const o=e.splitLines(r);for(let l=0;l<o.length;l++)if(o[l].length<2||o[l].charAt(1)!=="=")return!1;return!0},n.exports=e})(yd);var Ed=yd.exports;const Zi=co(Ed),wp=iu({__proto__:null,default:Zi},[Ed]);function _n(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&(o=JSON.parse(JSON.stringify(o)),o.candidate=o.candidate.substring(2)),o.candidate&&o.candidate.length){const l=new e(o),d=Zi.parseCandidate(o.candidate);for(const g in d)g in l||Object.defineProperty(l,g,{value:d[g]});return l.toJSON=function(){return{candidate:l.candidate,sdpMid:l.sdpMid,sdpMLineIndex:l.sdpMLineIndex,usernameFragment:l.usernameFragment}},l}return new e(o)},n.RTCIceCandidate.prototype=e.prototype,Ei(n,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new n.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Ya(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Ei(n,"icecandidate",e=>{if(e.candidate){const r=Zi.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function xn(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(u){if(!u||!u.sdp)return!1;const m=Zi.splitSections(u.sdp);return m.shift(),m.some(p=>{const O=Zi.parseMLine(p);return O&&O.kind==="application"&&O.protocol.indexOf("SCTP")!==-1})},o=function(u){const m=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const p=parseInt(m[1],10);return p!==p?-1:p},l=function(u){let m=65536;return e.browser==="firefox"&&(e.version<57?u===-1?m=16384:m=2147483637:e.version<60?m=e.version===57?65535:65536:m=2147483637),m},d=function(u,m){let p=65536;e.browser==="firefox"&&e.version===57&&(p=65535);const O=Zi.matchPrefix(u.sdp,"a=max-message-size:");return O.length>0?p=parseInt(O[0].substring(19),10):e.browser==="firefox"&&m!==-1&&(p=2147483637),p},g=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const m=o(arguments[0]),p=l(m),O=d(arguments[0],m);let x;p===0&&O===0?x=Number.POSITIVE_INFINITY:p===0||O===0?x=Math.max(p,O):x=Math.min(p,O);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return x}}),this._sctp=v}return g.apply(this,arguments)}}function On(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(o,l){const d=o.send;o.send=function(){const u=arguments[0],m=u.length||u.size||u.byteLength;if(o.readyState==="open"&&l.sctp&&m>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return d.apply(o,arguments)}}const r=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const l=r.apply(this,arguments);return e(l,this),l},Ei(n,"datachannel",o=>(e(o.channel,o.target),o))}function Ha(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const o=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const d=l.target;if(d._lastConnectionState!==d.connectionState){d._lastConnectionState=d.connectionState;const g=new Event("connectionstatechange",l);d.dispatchEvent(g)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),o.apply(this,arguments)}})}function Za(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(l){if(l&&l.sdp&&l.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const d=l.sdp.split(`
`).filter(g=>g.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&l instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:l.type,sdp:d}):l.sdp=d}return r.apply(this,arguments)}}function Cn(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const r=n.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function wn(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const r=n.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let l=arguments[0]||{};if(typeof l!="object"||l.type&&l.sdp)return r.apply(this,arguments);if(l={type:l.type,sdp:l.sdp},!l.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":l.type="offer";break;default:l.type="answer";break}return l.sdp||l.type!=="offer"&&l.type!=="answer"?r.apply(this,[l]):(l.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(g=>r.apply(this,[g]))})}const bp=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Za,shimAddIceCandidateNullOrEmpty:Cn,shimConnectionState:Ha,shimMaxMessageSize:xn,shimParameterlessSetLocalDescription:wn,shimRTCIceCandidate:_n,shimRTCIceCandidateRelayProtocol:Ya,shimSendThrowTypeError:On},Symbol.toStringTag,{value:"Module"}));function vp({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=Gu,o=xp(n),l={browserDetails:o,commonShim:bp,extractVersion:mn,disableLog:mp,disableWarnings:_p,sdp:wp};switch(o.browser){case"chrome":if(!Bl||!za||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),l;if(o.version===null)return r("Chrome shim can not determine version, not shimming."),l;r("adapter.js shimming chrome."),l.browserShim=Bl,Cn(n,o),wn(n),Hu(n,o),Zu(n),za(n,o),Ku(n),id(n,o),Ju(n),ed(n),td(n),sd(n,o),_n(n),Ya(n),Ha(n),xn(n,o),On(n),Za(n,o);break;case"firefox":if(!$l||!Ga||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),l;r("adapter.js shimming firefox."),l.browserShim=$l,Cn(n,o),wn(n),nd(n,o),Ga(n,o),od(n),ld(n),ad(n),cd(n),hd(n),ud(n),dd(n),fd(n),gd(n),_n(n),Ha(n),xn(n,o),On(n);break;case"safari":if(!Wl||!e.shimSafari)return r("Safari shim is not included in this adapter release."),l;r("adapter.js shimming safari."),l.browserShim=Wl,Cn(n,o),wn(n),Cd(n),bd(n),_d(n),pd(n),md(n),wd(n),xd(n),vd(n),_n(n),Ya(n),xn(n,o),On(n),Za(n,o);break;default:r("Unsupported browser!");break}return l}const Ql=vp({window:typeof window>"u"?void 0:window});function Si(n,e,r,o){Object.defineProperty(n,e,{get:r,set:o,enumerable:!0,configurable:!0})}class Sd{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],o=e.byteLength,l=Math.ceil(o/this.chunkedMTU);let d=0,g=0;for(;g<o;){const u=Math.min(o,g+this.chunkedMTU),m=e.slice(g,u),p={__peerData:this._dataCount,n:d,data:m,total:l};r.push(p),g=u,d++}return this._dataCount++,r}}}function yp(n){let e=0;for(const l of n)e+=l.byteLength;const r=new Uint8Array(e);let o=0;for(const l of n)r.set(l,o),o+=l.byteLength;return r}const ra=Ql.default||Ql,Cs=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return ra.browserDetails.browser}getVersion(){return ra.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=ra.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,o=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),o=!0}catch{}finally{r&&r.close()}return o}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Ep=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),Dd=()=>Math.random().toString(36).slice(2),Ul={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Sp extends Sd{noop(){}blobToArrayBuffer(e,r){const o=new FileReader;return o.onload=function(l){l.target&&r(l.target.result)},o.readAsArrayBuffer(e),o}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Ul,this.browser=Cs.getBrowser(),this.browserVersion=Cs.getVersion(),this.pack=Vu,this.unpack=Xu,this.supports=function(){const r={browser:Cs.isBrowserSupported(),webRTC:Cs.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let o;try{o=new RTCPeerConnection(Ul),r.audioVideo=!0;let l;try{l=o.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!l.ordered;try{l.binaryType="blob",r.binaryBlob=!Cs.isIOS}catch{}}catch{}finally{l&&l.close()}}catch{}finally{o&&o.close()}return r}(),this.validateId=Ep,this.randomToken=Dd}}const Yt=new Sp,Dp="PeerJS: ";var lr;(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"})(lr||(lr={}));class Ap{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=lr.All&&this._print(lr.All,...e)}warn(...e){this._logLevel>=lr.Warnings&&this._print(lr.Warnings,...e)}error(...e){this._logLevel>=lr.Errors&&this._print(lr.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...r){const o=[Dp,...r];for(const l in o)o[l]instanceof Error&&(o[l]="("+o[l].name+") "+o[l].message);e>=lr.All?console.log(...o):e>=lr.Warnings?console.warn("WARNING",...o):e>=lr.Errors&&console.error("ERROR",...o)}constructor(){this._logLevel=lr.Disabled}}var Ae=new Ap,Sc={},Tp=Object.prototype.hasOwnProperty,Ut="~";function Is(){}Object.create&&(Is.prototype=Object.create(null),new Is().__proto__||(Ut=!1));function Rp(n,e,r){this.fn=n,this.context=e,this.once=r||!1}function Ad(n,e,r,o,l){if(typeof r!="function")throw new TypeError("The listener must be a function");var d=new Rp(r,o||n,l),g=Ut?Ut+e:e;return n._events[g]?n._events[g].fn?n._events[g]=[n._events[g],d]:n._events[g].push(d):(n._events[g]=d,n._eventsCount++),n}function bn(n,e){--n._eventsCount===0?n._events=new Is:delete n._events[e]}function Nt(){this._events=new Is,this._eventsCount=0}Nt.prototype.eventNames=function(){var e=[],r,o;if(this._eventsCount===0)return e;for(o in r=this._events)Tp.call(r,o)&&e.push(Ut?o.slice(1):o);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Nt.prototype.listeners=function(e){var r=Ut?Ut+e:e,o=this._events[r];if(!o)return[];if(o.fn)return[o.fn];for(var l=0,d=o.length,g=new Array(d);l<d;l++)g[l]=o[l].fn;return g};Nt.prototype.listenerCount=function(e){var r=Ut?Ut+e:e,o=this._events[r];return o?o.fn?1:o.length:0};Nt.prototype.emit=function(e,r,o,l,d,g){var u=Ut?Ut+e:e;if(!this._events[u])return!1;var m=this._events[u],p=arguments.length,O,x;if(m.fn){switch(m.once&&this.removeListener(e,m.fn,void 0,!0),p){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,r),!0;case 3:return m.fn.call(m.context,r,o),!0;case 4:return m.fn.call(m.context,r,o,l),!0;case 5:return m.fn.call(m.context,r,o,l,d),!0;case 6:return m.fn.call(m.context,r,o,l,d,g),!0}for(x=1,O=new Array(p-1);x<p;x++)O[x-1]=arguments[x];m.fn.apply(m.context,O)}else{var v=m.length,y;for(x=0;x<v;x++)switch(m[x].once&&this.removeListener(e,m[x].fn,void 0,!0),p){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,r);break;case 3:m[x].fn.call(m[x].context,r,o);break;case 4:m[x].fn.call(m[x].context,r,o,l);break;default:if(!O)for(y=1,O=new Array(p-1);y<p;y++)O[y-1]=arguments[y];m[x].fn.apply(m[x].context,O)}}return!0};Nt.prototype.on=function(e,r,o){return Ad(this,e,r,o,!1)};Nt.prototype.once=function(e,r,o){return Ad(this,e,r,o,!0)};Nt.prototype.removeListener=function(e,r,o,l){var d=Ut?Ut+e:e;if(!this._events[d])return this;if(!r)return bn(this,d),this;var g=this._events[d];if(g.fn)g.fn===r&&(!l||g.once)&&(!o||g.context===o)&&bn(this,d);else{for(var u=0,m=[],p=g.length;u<p;u++)(g[u].fn!==r||l&&!g[u].once||o&&g[u].context!==o)&&m.push(g[u]);m.length?this._events[d]=m.length===1?m[0]:m:bn(this,d)}return this};Nt.prototype.removeAllListeners=function(e){var r;return e?(r=Ut?Ut+e:e,this._events[r]&&bn(this,r)):(this._events=new Is,this._eventsCount=0),this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.addListener=Nt.prototype.on;Nt.prefixed=Ut;Nt.EventEmitter=Nt;Sc=Nt;var Di={};Si(Di,"ConnectionType",()=>Pr);Si(Di,"PeerErrorType",()=>bt);Si(Di,"BaseConnectionErrorType",()=>Ps);Si(Di,"DataConnectionErrorType",()=>Ls);Si(Di,"SerializationType",()=>es);Si(Di,"SocketEventType",()=>Ir);Si(Di,"ServerMessageType",()=>Tt);var Pr;(function(n){n.Data="data",n.Media="media"})(Pr||(Pr={}));var bt;(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"})(bt||(bt={}));var Ps;(function(n){n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed"})(Ps||(Ps={}));var Ls;(function(n){n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big"})(Ls||(Ls={}));var es;(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw"})(es||(es={}));var Ir;(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"})(Ir||(Ir={}));var Tt;(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"})(Tt||(Tt={}));var Dc={};Dc=JSON.parse('{"name":"peerjs","version":"1.5.1","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz StÃ¼ckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","SoÌˆren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"^1.5.3","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.0.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class Ip extends Sc.EventEmitter{constructor(e,r,o,l,d,g=5e3){super(),this.pingInterval=g,this._disconnected=!0,this._messagesQueue=[];const u=e?"wss://":"ws://";this._baseUrl=u+r+":"+o+l+"peerjs?key="+d}start(e,r){this._id=e;const o=`${this._baseUrl}&id=${e}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Dc.version),this._disconnected=!1,this._socket.onmessage=l=>{let d;try{d=JSON.parse(l.data),Ae.log("Server message received:",d)}catch{Ae.log("Invalid server message",l.data);return}this.emit(Ir.Message,d)},this._socket.onclose=l=>{this._disconnected||(Ae.log("Socket closed.",l),this._cleanup(),this._disconnected=!0,this.emit(Ir.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ae.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ae.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Tt.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ir.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Td{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Pr.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const o=this.connection,l={ordered:!!e.reliable},d=r.createDataChannel(o.label,l);o._initializeDataChannel(d),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ae.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,o=this.connection.connectionId,l=this.connection.type,d=this.connection.provider;Ae.log("Listening for ICE candidates."),e.onicecandidate=g=>{!g.candidate||!g.candidate.candidate||(Ae.log(`Received ICE candidates for ${r}:`,g.candidate),d.socket.send({type:Tt.Candidate,payload:{candidate:g.candidate,type:l,connectionId:o},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ae.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(Ps.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":Ae.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(Ps.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":Ae.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ae.log("Listening for data channel"),e.ondatachannel=g=>{Ae.log("Received data channel");const u=g.channel;d.getConnection(r,o)._initializeDataChannel(u)},Ae.log("Listening for remote stream"),e.ontrack=g=>{Ae.log("Received remote stream");const u=g.streams[0],m=d.getConnection(r,o);if(m.type===Pr.Media){const p=m;this._addStreamToMediaConnection(u,p)}}}cleanup(){Ae.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const r=e.signalingState!=="closed";let o=!1;const l=this.connection.dataChannel;l&&(o=!!l.readyState&&l.readyState!=="closed"),(r||o)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const o=await e.createOffer(this.connection.options.constraints);Ae.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await e.setLocalDescription(o),Ae.log("Set localDescription:",o,`for:${this.connection.peer}`);let l={sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Pr.Data){const d=this.connection;l={...l,label:d.label,reliable:d.reliable,serialization:d.serialization}}r.socket.send({type:Tt.Offer,payload:l,dst:this.connection.peer})}catch(l){l!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(bt.WebRTC,l),Ae.log("Failed to setLocalDescription, ",l))}}catch(o){r.emitError(bt.WebRTC,o),Ae.log("Failed to createOffer, ",o)}}async _makeAnswer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const o=await e.createAnswer();Ae.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await e.setLocalDescription(o),Ae.log("Set localDescription:",o,`for:${this.connection.peer}`),r.socket.send({type:Tt.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(l){r.emitError(bt.WebRTC,l),Ae.log("Failed to setLocalDescription, ",l)}}catch(o){r.emitError(bt.WebRTC,o),Ae.log("Failed to create answer, ",o)}}async handleSDP(e,r){r=new RTCSessionDescription(r);const o=this.connection.peerConnection,l=this.connection.provider;Ae.log("Setting remote description",r);const d=this;try{await o.setRemoteDescription(r),Ae.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await d._makeAnswer()}catch(g){l.emitError(bt.WebRTC,g),Ae.log("Failed to setRemoteDescription, ",g)}}async handleCandidate(e){Ae.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Ae.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(bt.WebRTC,r),Ae.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(e,r){if(Ae.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return Ae.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(o=>{r.addTrack(o,e)})}_addStreamToMediaConnection(e,r){Ae.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class Rd extends Sc.EventEmitter{emitError(e,r){Ae.error("Error:",r),this.emit("error",new Pp(`${e}`,r))}}class Pp extends Error{constructor(e,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=e}}class Id extends Rd{get open(){return this._open}constructor(e,r,o){super(),this.peer=e,this.provider=r,this.options=o,this._open=!1,this.metadata=o.metadata}}class zn extends Id{static#e=(()=>{this.ID_PREFIX="mc_"})();get type(){return Pr.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,o){super(e,r,o),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||zn.ID_PREFIX+Yt.randomToken(),this._negotiator=new Td(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ae.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ae.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ae.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,o=e.payload;switch(e.type){case Tt.Answer:this._negotiator.handleSDP(r,o.sdp),this._open=!0;break;case Tt.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:Ae.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(e,r={}){if(this._localStream){Ae.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const o=this.provider._getMessages(this.connectionId);for(const l of o)this.handleMessage(l);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Lp{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:o,port:l,path:d,key:g}=this._options,u=new URL(`${r}://${o}:${l}${d}${g}/${e}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",Dc.version),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Ae.error("Error retrieving ID",e);let r="";throw this._options.path==="/"&&this._options.host!==Yt.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let r="";throw this._options.host===Yt.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Ae.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class Gn extends Id{static#e=(()=>{this.ID_PREFIX="dc_"})();static#t=(()=>{this.MAX_BUFFERED_AMOUNT=8388608})();get type(){return Pr.Data}constructor(e,r,o){super(e,r,o),this.connectionId=this.options.connectionId||Gn.ID_PREFIX+Dd(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Td(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ae.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{Ae.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{Ae.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,r=!1){if(!this.open){this.emitError(Ls.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,r)}async handleMessage(e){const r=e.payload;switch(e.type){case Tt.Answer:await this._negotiator.handleSDP(e.type,r.sdp);break;case Tt.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:Ae.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class Ac extends Gn{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Gn.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return Ae.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ia extends Ac{close(e){super.close(e),this._chunkedData={}}constructor(e,r,o){super(e,r,o),this.chunker=new Sd,this.serialization=es.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=Xu(e),o=r.__peerData;if(o){if(o.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(e){const r=e.__peerData,o=this._chunkedData[r]||{data:[],count:0,total:e.total};if(o.data[e.n]=new Uint8Array(e.data),o.count++,this._chunkedData[r]=o,o.total===o.count){delete this._chunkedData[r];const l=yp(o.data);this._handleDataMessage({data:l})}}_send(e,r){if(e instanceof Blob)return e.arrayBuffer().then(l=>{this._send(l,r)});const o=Vu(e);if(!r&&o.byteLength>this.chunker.chunkedMTU){this._sendChunks(o);return}this._bufferedSend(o)}_sendChunks(e){const r=this.chunker.chunk(e);Ae.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const o of r)this.send(o,!0)}}class Mp extends Ac{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=es.None}}class kp extends Ac{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),o=r.__peerData;if(o&&o.type==="close"){this.close();return}this.emit("data",r)}_send(e,r){const o=this.encoder.encode(this.stringify(e));if(o.byteLength>=Yt.chunkedMTU){this.emitError(Ls.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(o)}constructor(...e){super(...e),this.serialization=es.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Yn extends Rd{static#e=(()=>{this.DEFAULT_KEY="peerjs"})();get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,o]of this._connections)e[r]=o;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){super(),this._serializers={raw:Mp,json:kp,binary:ia,"binary-utf8":ia,default:ia},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let o;if(e&&e.constructor==Object?r=e:e&&(o=e.toString()),r={debug:0,host:Yt.CLOUD_HOST,port:Yt.CLOUD_PORT,path:"/",key:Yn.DEFAULT_KEY,token:Yt.randomToken(),config:Yt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Yt.CLOUD_HOST?this._options.secure=Yt.isSecure():this._options.host==Yt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ae.setLogFunction(this._options.logFunction),Ae.logLevel=this._options.debug||0,this._api=new Lp(r),this._socket=this._createServerConnection(),!Yt.supports.audioVideo&&!Yt.supports.data){this._delayedAbort(bt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(o&&!Yt.validateId(o)){this._delayedAbort(bt.InvalidID,`ID "${o}" is invalid`);return}o?this._initialize(o):this._api.retrieveId().then(l=>this._initialize(l)).catch(l=>this._abort(bt.ServerError,l))}_createServerConnection(){const e=new Ip(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ir.Message,r=>{this._handleMessage(r)}),e.on(Ir.Error,r=>{this._abort(bt.SocketError,r)}),e.on(Ir.Disconnected,()=>{this.disconnected||(this.emitError(bt.Network,"Lost connection to server."),this.disconnect())}),e.on(Ir.Close,()=>{this.disconnected||this._abort(bt.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,o=e.payload,l=e.src;switch(r){case Tt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Tt.Error:this._abort(bt.ServerError,o.msg);break;case Tt.IdTaken:this._abort(bt.UnavailableID,`ID "${this.id}" is taken`);break;case Tt.InvalidKey:this._abort(bt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Tt.Leave:Ae.log(`Received leave message from ${l}`),this._cleanupPeer(l),this._connections.delete(l);break;case Tt.Expire:this.emitError(bt.PeerUnavailable,`Could not connect to peer ${l}`);break;case Tt.Offer:{const d=o.connectionId;let g=this.getConnection(l,d);if(g&&(g.close(),Ae.warn(`Offer received for existing Connection ID:${d}`)),o.type===Pr.Media){const m=new zn(l,this,{connectionId:d,_payload:o,metadata:o.metadata});g=m,this._addConnection(l,g),this.emit("call",m)}else if(o.type===Pr.Data){const m=new this._serializers[o.serialization](l,this,{connectionId:d,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});g=m,this._addConnection(l,g),this.emit("connection",m)}else{Ae.warn(`Received malformed connection type:${o.type}`);return}const u=this._getMessages(d);for(const m of u)g.handleMessage(m);break}default:{if(!o){Ae.warn(`You received a malformed message from ${l} of type ${r}`);return}const d=o.connectionId,g=this.getConnection(l,d);g&&g.peerConnection?g.handleMessage(e):d?this._storeMessage(d,e):Ae.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected){Ae.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const o=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,o),o}call(e,r,o={}){if(this.disconnected){Ae.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){Ae.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const l=new zn(e,this,{...o,_stream:r});return this._addConnection(e,l),l}_addConnection(e,r){Ae.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const o=r.indexOf(e);o!==-1&&r.splice(o,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const o=this._connections.get(e);if(!o)return null;for(const l of o)if(l.connectionId===r)return l;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){Ae.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ae.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const o of r)o.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ae.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ae.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ae.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=r=>{}){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort(bt.ServerError,r))}}class Ka extends kr{peer;conns=new Map;constructor(e){super();let r={secure:!0,host:"mpyc-demo--headscale-ams3-c99f82e5.demo.mpyc.tech",port:443,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"}};try{e?this.peer=new Yn(e,r):this.peer=new Yn(r)}catch(o){console.warn(o)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}id=()=>this.peer.id;addPeerEventHandlers(e){e.on("open",async r=>{this.emit("ready",r)}),e.on("error",async r=>{this.emit("error",r)}),e.on("close",async()=>{this.emit("closed")}),e.on("connection",async r=>{this.addConnEventHandlers(r)})}addConnEventHandlers(e){console.log(`transport:conn ${e.peer} is trying to connect`),e.on("open",async()=>{this.conns.set(e.peer,e),this.sendPeers(e),this.emit("conn:ready",e.peer)}),e.on("error",async r=>{this.emit("conn:error",{peerID:e.peer,err:r})}),e.on("close",async()=>{this.conns.delete(e.peer),this.emit("conn:disconnected",e.peer)}),e.on("data",async r=>{let{type:o,payload:l}=r;switch(o){case"peers":this.processNewPeers(l);break;default:this.emit("conn:data",{peerID:e.peer,data:r});break}})}async send(e,r,o){this.conns.get(e).send({type:r,payload:o})}destroy(){this.peer.destroy()}processNewPeers=async e=>{e.forEach(r=>{!this.conns.get(r)&&r!=this.peer.id&&this.connect(r)})};async broadcast(e,r){this.conns.forEach(o=>{this.send(o.peer,`user:${e}`,r)})}async sendPeers(e){e.send({type:"peers",payload:this.getPeers()})}getPeers(e=!1){let r=Array.from(this.conns,([o,l])=>l.peer);return e&&r.push(this.peer.id),r.sort()}async connect(e){let r=this.peer.connect(e,{reliable:!0});this.addConnEventHandlers(r)}}const Np=new MessageChannel,Fp=[];Np.port1.onmessage=()=>{Fp.pop()()};var Wt="top",rr="bottom",ir="right",Qt="left",po="auto",as=[Wt,rr,ir,Qt],bi="start",ts="end",Pd="clippingParents",Tc="viewport",Vi="popper",Ld="reference",Ja=as.reduce(function(n,e){return n.concat([e+"-"+bi,e+"-"+ts])},[]),Rc=[].concat(as,[po]).reduce(function(n,e){return n.concat([e,e+"-"+bi,e+"-"+ts])},[]),Md="beforeRead",kd="read",Nd="afterRead",Fd="beforeMain",Bd="main",$d="afterMain",Wd="beforeWrite",Qd="write",Ud="afterWrite",qd=[Md,kd,Nd,Fd,Bd,$d,Wd,Qd,Ud];function Fr(n){return n?(n.nodeName||"").toLowerCase():null}function sr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function vi(n){var e=sr(n).Element;return n instanceof e||n instanceof Element}function ur(n){var e=sr(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Ic(n){if(typeof ShadowRoot>"u")return!1;var e=sr(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Bp(n){var e=n.state;Object.keys(e.elements).forEach(function(r){var o=e.styles[r]||{},l=e.attributes[r]||{},d=e.elements[r];!ur(d)||!Fr(d)||(Object.assign(d.style,o),Object.keys(l).forEach(function(g){var u=l[g];u===!1?d.removeAttribute(g):d.setAttribute(g,u===!0?"":u)}))})}function $p(n){var e=n.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(o){var l=e.elements[o],d=e.attributes[o]||{},g=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:r[o]),u=g.reduce(function(m,p){return m[p]="",m},{});!ur(l)||!Fr(l)||(Object.assign(l.style,u),Object.keys(d).forEach(function(m){l.removeAttribute(m)}))})}}const Pc={name:"applyStyles",enabled:!0,phase:"write",fn:Bp,effect:$p,requires:["computeStyles"]};function Lr(n){return n.split("-")[0]}var Ci=Math.max,Hn=Math.min,rs=Math.round;function ec(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Xd(){return!/^((?!chrome|android).)*safari/i.test(ec())}function is(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var o=n.getBoundingClientRect(),l=1,d=1;e&&ur(n)&&(l=n.offsetWidth>0&&rs(o.width)/n.offsetWidth||1,d=n.offsetHeight>0&&rs(o.height)/n.offsetHeight||1);var g=vi(n)?sr(n):window,u=g.visualViewport,m=!Xd()&&r,p=(o.left+(m&&u?u.offsetLeft:0))/l,O=(o.top+(m&&u?u.offsetTop:0))/d,x=o.width/l,v=o.height/d;return{width:x,height:v,top:O,right:p+x,bottom:O+v,left:p,x:p,y:O}}function Lc(n){var e=is(n),r=n.offsetWidth,o=n.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:n.offsetLeft,y:n.offsetTop,width:r,height:o}}function Vd(n,e){var r=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(r&&Ic(r)){var o=e;do{if(o&&n.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function jr(n){return sr(n).getComputedStyle(n)}function Wp(n){return["table","td","th"].indexOf(Fr(n))>=0}function ci(n){return((vi(n)?n.ownerDocument:n.document)||window.document).documentElement}function mo(n){return Fr(n)==="html"?n:n.assignedSlot||n.parentNode||(Ic(n)?n.host:null)||ci(n)}function ql(n){return!ur(n)||jr(n).position==="fixed"?null:n.offsetParent}function Qp(n){var e=/firefox/i.test(ec()),r=/Trident/i.test(ec());if(r&&ur(n)){var o=jr(n);if(o.position==="fixed")return null}var l=mo(n);for(Ic(l)&&(l=l.host);ur(l)&&["html","body"].indexOf(Fr(l))<0;){var d=jr(l);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||e&&d.willChange==="filter"||e&&d.filter&&d.filter!=="none")return l;l=l.parentNode}return null}function Bs(n){for(var e=sr(n),r=ql(n);r&&Wp(r)&&jr(r).position==="static";)r=ql(r);return r&&(Fr(r)==="html"||Fr(r)==="body"&&jr(r).position==="static")?e:r||Qp(n)||e}function Mc(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function As(n,e,r){return Ci(n,Hn(e,r))}function Up(n,e,r){var o=As(n,e,r);return o>r?r:o}function jd(){return{top:0,right:0,bottom:0,left:0}}function zd(n){return Object.assign({},jd(),n)}function Gd(n,e){return e.reduce(function(r,o){return r[o]=n,r},{})}var qp=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,zd(typeof e!="number"?e:Gd(e,as))};function Xp(n){var e,r=n.state,o=n.name,l=n.options,d=r.elements.arrow,g=r.modifiersData.popperOffsets,u=Lr(r.placement),m=Mc(u),p=[Qt,ir].indexOf(u)>=0,O=p?"height":"width";if(!(!d||!g)){var x=qp(l.padding,r),v=Lc(d),y=m==="y"?Wt:Qt,E=m==="y"?rr:ir,C=r.rects.reference[O]+r.rects.reference[m]-g[m]-r.rects.popper[O],b=g[m]-r.rects.reference[m],I=Bs(d),R=I?m==="y"?I.clientHeight||0:I.clientWidth||0:0,S=C/2-b/2,B=x[y],U=R-v[O]-x[E],F=R/2-v[O]/2+S,$=As(B,F,U),A=m;r.modifiersData[o]=(e={},e[A]=$,e.centerOffset=$-F,e)}}function Vp(n){var e=n.state,r=n.options,o=r.element,l=o===void 0?"[data-popper-arrow]":o;l!=null&&(typeof l=="string"&&(l=e.elements.popper.querySelector(l),!l)||Vd(e.elements.popper,l)&&(e.elements.arrow=l))}const Yd={name:"arrow",enabled:!0,phase:"main",fn:Xp,effect:Vp,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ss(n){return n.split("-")[1]}var jp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zp(n,e){var r=n.x,o=n.y,l=e.devicePixelRatio||1;return{x:rs(r*l)/l||0,y:rs(o*l)/l||0}}function Xl(n){var e,r=n.popper,o=n.popperRect,l=n.placement,d=n.variation,g=n.offsets,u=n.position,m=n.gpuAcceleration,p=n.adaptive,O=n.roundOffsets,x=n.isFixed,v=g.x,y=v===void 0?0:v,E=g.y,C=E===void 0?0:E,b=typeof O=="function"?O({x:y,y:C}):{x:y,y:C};y=b.x,C=b.y;var I=g.hasOwnProperty("x"),R=g.hasOwnProperty("y"),S=Qt,B=Wt,U=window;if(p){var F=Bs(r),$="clientHeight",A="clientWidth";if(F===sr(r)&&(F=ci(r),jr(F).position!=="static"&&u==="absolute"&&($="scrollHeight",A="scrollWidth")),F=F,l===Wt||(l===Qt||l===ir)&&d===ts){B=rr;var M=x&&F===U&&U.visualViewport?U.visualViewport.height:F[$];C-=M-o.height,C*=m?1:-1}if(l===Qt||(l===Wt||l===rr)&&d===ts){S=ir;var G=x&&F===U&&U.visualViewport?U.visualViewport.width:F[A];y-=G-o.width,y*=m?1:-1}}var T=Object.assign({position:u},p&&jp),P=O===!0?zp({x:y,y:C},sr(r)):{x:y,y:C};if(y=P.x,C=P.y,m){var X;return Object.assign({},T,(X={},X[B]=R?"0":"",X[S]=I?"0":"",X.transform=(U.devicePixelRatio||1)<=1?"translate("+y+"px, "+C+"px)":"translate3d("+y+"px, "+C+"px, 0)",X))}return Object.assign({},T,(e={},e[B]=R?C+"px":"",e[S]=I?y+"px":"",e.transform="",e))}function Gp(n){var e=n.state,r=n.options,o=r.gpuAcceleration,l=o===void 0?!0:o,d=r.adaptive,g=d===void 0?!0:d,u=r.roundOffsets,m=u===void 0?!0:u,p={placement:Lr(e.placement),variation:ss(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:l,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Xl(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:g,roundOffsets:m})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Xl(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const kc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Gp,data:{}};var tn={passive:!0};function Yp(n){var e=n.state,r=n.instance,o=n.options,l=o.scroll,d=l===void 0?!0:l,g=o.resize,u=g===void 0?!0:g,m=sr(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return d&&p.forEach(function(O){O.addEventListener("scroll",r.update,tn)}),u&&m.addEventListener("resize",r.update,tn),function(){d&&p.forEach(function(O){O.removeEventListener("scroll",r.update,tn)}),u&&m.removeEventListener("resize",r.update,tn)}}const Nc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yp,data:{}};var Hp={left:"right",right:"left",bottom:"top",top:"bottom"};function vn(n){return n.replace(/left|right|bottom|top/g,function(e){return Hp[e]})}var Zp={start:"end",end:"start"};function Vl(n){return n.replace(/start|end/g,function(e){return Zp[e]})}function Fc(n){var e=sr(n),r=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:r,scrollTop:o}}function Bc(n){return is(ci(n)).left+Fc(n).scrollLeft}function Kp(n,e){var r=sr(n),o=ci(n),l=r.visualViewport,d=o.clientWidth,g=o.clientHeight,u=0,m=0;if(l){d=l.width,g=l.height;var p=Xd();(p||!p&&e==="fixed")&&(u=l.offsetLeft,m=l.offsetTop)}return{width:d,height:g,x:u+Bc(n),y:m}}function Jp(n){var e,r=ci(n),o=Fc(n),l=(e=n.ownerDocument)==null?void 0:e.body,d=Ci(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),g=Ci(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),u=-o.scrollLeft+Bc(n),m=-o.scrollTop;return jr(l||r).direction==="rtl"&&(u+=Ci(r.clientWidth,l?l.clientWidth:0)-d),{width:d,height:g,x:u,y:m}}function $c(n){var e=jr(n),r=e.overflow,o=e.overflowX,l=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+l+o)}function Hd(n){return["html","body","#document"].indexOf(Fr(n))>=0?n.ownerDocument.body:ur(n)&&$c(n)?n:Hd(mo(n))}function Ts(n,e){var r;e===void 0&&(e=[]);var o=Hd(n),l=o===((r=n.ownerDocument)==null?void 0:r.body),d=sr(o),g=l?[d].concat(d.visualViewport||[],$c(o)?o:[]):o,u=e.concat(g);return l?u:u.concat(Ts(mo(g)))}function tc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function em(n,e){var r=is(n,!1,e==="fixed");return r.top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r}function jl(n,e,r){return e===Tc?tc(Kp(n,r)):vi(e)?em(e,r):tc(Jp(ci(n)))}function tm(n){var e=Ts(mo(n)),r=["absolute","fixed"].indexOf(jr(n).position)>=0,o=r&&ur(n)?Bs(n):n;return vi(o)?e.filter(function(l){return vi(l)&&Vd(l,o)&&Fr(l)!=="body"}):[]}function rm(n,e,r,o){var l=e==="clippingParents"?tm(n):[].concat(e),d=[].concat(l,[r]),g=d[0],u=d.reduce(function(m,p){var O=jl(n,p,o);return m.top=Ci(O.top,m.top),m.right=Hn(O.right,m.right),m.bottom=Hn(O.bottom,m.bottom),m.left=Ci(O.left,m.left),m},jl(n,g,o));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Zd(n){var e=n.reference,r=n.element,o=n.placement,l=o?Lr(o):null,d=o?ss(o):null,g=e.x+e.width/2-r.width/2,u=e.y+e.height/2-r.height/2,m;switch(l){case Wt:m={x:g,y:e.y-r.height};break;case rr:m={x:g,y:e.y+e.height};break;case ir:m={x:e.x+e.width,y:u};break;case Qt:m={x:e.x-r.width,y:u};break;default:m={x:e.x,y:e.y}}var p=l?Mc(l):null;if(p!=null){var O=p==="y"?"height":"width";switch(d){case bi:m[p]=m[p]-(e[O]/2-r[O]/2);break;case ts:m[p]=m[p]+(e[O]/2-r[O]/2);break}}return m}function ns(n,e){e===void 0&&(e={});var r=e,o=r.placement,l=o===void 0?n.placement:o,d=r.strategy,g=d===void 0?n.strategy:d,u=r.boundary,m=u===void 0?Pd:u,p=r.rootBoundary,O=p===void 0?Tc:p,x=r.elementContext,v=x===void 0?Vi:x,y=r.altBoundary,E=y===void 0?!1:y,C=r.padding,b=C===void 0?0:C,I=zd(typeof b!="number"?b:Gd(b,as)),R=v===Vi?Ld:Vi,S=n.rects.popper,B=n.elements[E?R:v],U=rm(vi(B)?B:B.contextElement||ci(n.elements.popper),m,O,g),F=is(n.elements.reference),$=Zd({reference:F,element:S,strategy:"absolute",placement:l}),A=tc(Object.assign({},S,$)),M=v===Vi?A:F,G={top:U.top-M.top+I.top,bottom:M.bottom-U.bottom+I.bottom,left:U.left-M.left+I.left,right:M.right-U.right+I.right},T=n.modifiersData.offset;if(v===Vi&&T){var P=T[l];Object.keys(G).forEach(function(X){var q=[ir,rr].indexOf(X)>=0?1:-1,W=[Wt,rr].indexOf(X)>=0?"y":"x";G[X]+=P[W]*q})}return G}function im(n,e){e===void 0&&(e={});var r=e,o=r.placement,l=r.boundary,d=r.rootBoundary,g=r.padding,u=r.flipVariations,m=r.allowedAutoPlacements,p=m===void 0?Rc:m,O=ss(o),x=O?u?Ja:Ja.filter(function(E){return ss(E)===O}):as,v=x.filter(function(E){return p.indexOf(E)>=0});v.length===0&&(v=x);var y=v.reduce(function(E,C){return E[C]=ns(n,{placement:C,boundary:l,rootBoundary:d,padding:g})[Lr(C)],E},{});return Object.keys(y).sort(function(E,C){return y[E]-y[C]})}function sm(n){if(Lr(n)===po)return[];var e=vn(n);return[Vl(n),e,Vl(e)]}function nm(n){var e=n.state,r=n.options,o=n.name;if(!e.modifiersData[o]._skip){for(var l=r.mainAxis,d=l===void 0?!0:l,g=r.altAxis,u=g===void 0?!0:g,m=r.fallbackPlacements,p=r.padding,O=r.boundary,x=r.rootBoundary,v=r.altBoundary,y=r.flipVariations,E=y===void 0?!0:y,C=r.allowedAutoPlacements,b=e.options.placement,I=Lr(b),R=I===b,S=m||(R||!E?[vn(b)]:sm(b)),B=[b].concat(S).reduce(function(xe,Me){return xe.concat(Lr(Me)===po?im(e,{placement:Me,boundary:O,rootBoundary:x,padding:p,flipVariations:E,allowedAutoPlacements:C}):Me)},[]),U=e.rects.reference,F=e.rects.popper,$=new Map,A=!0,M=B[0],G=0;G<B.length;G++){var T=B[G],P=Lr(T),X=ss(T)===bi,q=[Wt,rr].indexOf(P)>=0,W=q?"width":"height",j=ns(e,{placement:T,boundary:O,rootBoundary:x,altBoundary:v,padding:p}),H=q?X?ir:Qt:X?rr:Wt;U[W]>F[W]&&(H=vn(H));var re=vn(H),K=[];if(d&&K.push(j[P]<=0),u&&K.push(j[H]<=0,j[re]<=0),K.every(function(xe){return xe})){M=T,A=!1;break}$.set(T,K)}if(A)for(var J=E?3:1,le=function(Me){var fe=B.find(function(je){var ae=$.get(je);if(ae)return ae.slice(0,Me).every(function(oe){return oe})});if(fe)return M=fe,"break"},se=J;se>0;se--){var Le=le(se);if(Le==="break")break}e.placement!==M&&(e.modifiersData[o]._skip=!0,e.placement=M,e.reset=!0)}}const Kd={name:"flip",enabled:!0,phase:"main",fn:nm,requiresIfExists:["offset"],data:{_skip:!1}};function zl(n,e,r){return r===void 0&&(r={x:0,y:0}),{top:n.top-e.height-r.y,right:n.right-e.width+r.x,bottom:n.bottom-e.height+r.y,left:n.left-e.width-r.x}}function Gl(n){return[Wt,ir,rr,Qt].some(function(e){return n[e]>=0})}function om(n){var e=n.state,r=n.name,o=e.rects.reference,l=e.rects.popper,d=e.modifiersData.preventOverflow,g=ns(e,{elementContext:"reference"}),u=ns(e,{altBoundary:!0}),m=zl(g,o),p=zl(u,l,d),O=Gl(m),x=Gl(p);e.modifiersData[r]={referenceClippingOffsets:m,popperEscapeOffsets:p,isReferenceHidden:O,hasPopperEscaped:x},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":O,"data-popper-escaped":x})}const Jd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:om};function am(n,e,r){var o=Lr(n),l=[Qt,Wt].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},e,{placement:n})):r,g=d[0],u=d[1];return g=g||0,u=(u||0)*l,[Qt,ir].indexOf(o)>=0?{x:u,y:g}:{x:g,y:u}}function cm(n){var e=n.state,r=n.options,o=n.name,l=r.offset,d=l===void 0?[0,0]:l,g=Rc.reduce(function(O,x){return O[x]=am(x,e.rects,d),O},{}),u=g[e.placement],m=u.x,p=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=m,e.modifiersData.popperOffsets.y+=p),e.modifiersData[o]=g}const ef={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cm};function lm(n){var e=n.state,r=n.name;e.modifiersData[r]=Zd({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Wc={name:"popperOffsets",enabled:!0,phase:"read",fn:lm,data:{}};function hm(n){return n==="x"?"y":"x"}function um(n){var e=n.state,r=n.options,o=n.name,l=r.mainAxis,d=l===void 0?!0:l,g=r.altAxis,u=g===void 0?!1:g,m=r.boundary,p=r.rootBoundary,O=r.altBoundary,x=r.padding,v=r.tether,y=v===void 0?!0:v,E=r.tetherOffset,C=E===void 0?0:E,b=ns(e,{boundary:m,rootBoundary:p,padding:x,altBoundary:O}),I=Lr(e.placement),R=ss(e.placement),S=!R,B=Mc(I),U=hm(B),F=e.modifiersData.popperOffsets,$=e.rects.reference,A=e.rects.popper,M=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,G=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(F){if(d){var X,q=B==="y"?Wt:Qt,W=B==="y"?rr:ir,j=B==="y"?"height":"width",H=F[B],re=H+b[q],K=H-b[W],J=y?-A[j]/2:0,le=R===bi?$[j]:A[j],se=R===bi?-A[j]:-$[j],Le=e.elements.arrow,xe=y&&Le?Lc(Le):{width:0,height:0},Me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jd(),fe=Me[q],je=Me[W],ae=As(0,$[j],xe[j]),oe=S?$[j]/2-J-ae-fe-G.mainAxis:le-ae-fe-G.mainAxis,ce=S?-$[j]/2+J+ae+je+G.mainAxis:se+ae+je+G.mainAxis,Ce=e.elements.arrow&&Bs(e.elements.arrow),He=Ce?B==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,Te=(X=T?.[B])!=null?X:0,it=H+oe-Te-He,Ze=H+ce-Te,Se=As(y?Hn(re,it):re,H,y?Ci(K,Ze):K);F[B]=Se,P[B]=Se-H}if(u){var Ge,Ue=B==="x"?Wt:Qt,Fe=B==="x"?rr:ir,Ot=F[U],we=U==="y"?"height":"width",De=Ot+b[Ue],be=Ot-b[Fe],Oe=[Wt,Qt].indexOf(I)!==-1,ge=(Ge=T?.[U])!=null?Ge:0,ve=Oe?De:Ot-$[we]-A[we]-ge+G.altAxis,nt=Oe?Ot+$[we]+A[we]-ge-G.altAxis:be,$e=y&&Oe?Up(ve,Ot,nt):As(y?ve:De,Ot,y?nt:be);F[U]=$e,P[U]=$e-Ot}e.modifiersData[o]=P}}const tf={name:"preventOverflow",enabled:!0,phase:"main",fn:um,requiresIfExists:["offset"]};function dm(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function fm(n){return n===sr(n)||!ur(n)?Fc(n):dm(n)}function gm(n){var e=n.getBoundingClientRect(),r=rs(e.width)/n.offsetWidth||1,o=rs(e.height)/n.offsetHeight||1;return r!==1||o!==1}function pm(n,e,r){r===void 0&&(r=!1);var o=ur(e),l=ur(e)&&gm(e),d=ci(e),g=is(n,l,r),u={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(o||!o&&!r)&&((Fr(e)!=="body"||$c(d))&&(u=fm(e)),ur(e)?(m=is(e,!0),m.x+=e.clientLeft,m.y+=e.clientTop):d&&(m.x=Bc(d))),{x:g.left+u.scrollLeft-m.x,y:g.top+u.scrollTop-m.y,width:g.width,height:g.height}}function mm(n){var e=new Map,r=new Set,o=[];n.forEach(function(d){e.set(d.name,d)});function l(d){r.add(d.name);var g=[].concat(d.requires||[],d.requiresIfExists||[]);g.forEach(function(u){if(!r.has(u)){var m=e.get(u);m&&l(m)}}),o.push(d)}return n.forEach(function(d){r.has(d.name)||l(d)}),o}function _m(n){var e=mm(n);return qd.reduce(function(r,o){return r.concat(e.filter(function(l){return l.phase===o}))},[])}function xm(n){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(n())})})),e}}function Om(n){var e=n.reduce(function(r,o){var l=r[o.name];return r[o.name]=l?Object.assign({},l,o,{options:Object.assign({},l.options,o.options),data:Object.assign({},l.data,o.data)}):o,r},{});return Object.keys(e).map(function(r){return e[r]})}var Yl={placement:"bottom",modifiers:[],strategy:"absolute"};function Hl(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function _o(n){n===void 0&&(n={});var e=n,r=e.defaultModifiers,o=r===void 0?[]:r,l=e.defaultOptions,d=l===void 0?Yl:l;return function(u,m,p){p===void 0&&(p=d);var O={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yl,d),modifiersData:{},elements:{reference:u,popper:m},attributes:{},styles:{}},x=[],v=!1,y={state:O,setOptions:function(I){var R=typeof I=="function"?I(O.options):I;C(),O.options=Object.assign({},d,O.options,R),O.scrollParents={reference:vi(u)?Ts(u):u.contextElement?Ts(u.contextElement):[],popper:Ts(m)};var S=_m(Om([].concat(o,O.options.modifiers)));return O.orderedModifiers=S.filter(function(B){return B.enabled}),E(),y.update()},forceUpdate:function(){if(!v){var I=O.elements,R=I.reference,S=I.popper;if(Hl(R,S)){O.rects={reference:pm(R,Bs(S),O.options.strategy==="fixed"),popper:Lc(S)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(G){return O.modifiersData[G.name]=Object.assign({},G.data)});for(var B=0;B<O.orderedModifiers.length;B++){if(O.reset===!0){O.reset=!1,B=-1;continue}var U=O.orderedModifiers[B],F=U.fn,$=U.options,A=$===void 0?{}:$,M=U.name;typeof F=="function"&&(O=F({state:O,options:A,name:M,instance:y})||O)}}}},update:xm(function(){return new Promise(function(b){y.forceUpdate(),b(O)})}),destroy:function(){C(),v=!0}};if(!Hl(u,m))return y;y.setOptions(p).then(function(b){!v&&p.onFirstUpdate&&p.onFirstUpdate(b)});function E(){O.orderedModifiers.forEach(function(b){var I=b.name,R=b.options,S=R===void 0?{}:R,B=b.effect;if(typeof B=="function"){var U=B({state:O,name:I,instance:y,options:S}),F=function(){};x.push(U||F)}})}function C(){x.forEach(function(b){return b()}),x=[]}return y}}var Cm=_o(),wm=[Nc,Wc,kc,Pc],bm=_o({defaultModifiers:wm}),vm=[Nc,Wc,kc,Pc,ef,Kd,tf,Yd,Jd],Qc=_o({defaultModifiers:vm});const rf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:$d,afterRead:Nd,afterWrite:Ud,applyStyles:Pc,arrow:Yd,auto:po,basePlacements:as,beforeMain:Fd,beforeRead:Md,beforeWrite:Wd,bottom:rr,clippingParents:Pd,computeStyles:kc,createPopper:Qc,createPopperBase:Cm,createPopperLite:bm,detectOverflow:ns,end:ts,eventListeners:Nc,flip:Kd,hide:Jd,left:Qt,main:Bd,modifierPhases:qd,offset:ef,placements:Rc,popper:Vi,popperGenerator:_o,popperOffsets:Wc,preventOverflow:tf,read:kd,reference:Ld,right:ir,start:bi,top:Wt,variationPlacements:Ja,viewport:Tc,write:Qd},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const ti=new Map,sa={set(n,e,r){ti.has(n)||ti.set(n,new Map);const o=ti.get(n);if(!o.has(e)&&o.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(o.keys())[0]}.`);return}o.set(e,r)},get(n,e){return ti.has(n)&&ti.get(n).get(e)||null},remove(n,e){if(!ti.has(n))return;const r=ti.get(n);r.delete(e),r.size===0&&ti.delete(n)}},ym=1e6,Em=1e3,rc="transitionend",sf=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,r)=>`#${CSS.escape(r)}`)),n),Sm=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),Dm=n=>{do n+=Math.floor(Math.random()*ym);while(document.getElementById(n));return n},Am=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(n);const o=Number.parseFloat(e),l=Number.parseFloat(r);return!o&&!l?0:(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*Em)},nf=n=>{n.dispatchEvent(new Event(rc))},Xr=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),ni=n=>Xr(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(sf(n)):null,cs=n=>{if(!Xr(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",r=n.closest("details:not([open])");if(!r)return e;if(r!==n){const o=n.closest("summary");if(o&&o.parentNode!==r||o===null)return!1}return e},oi=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",of=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?of(n.parentNode):null},Zn=()=>{},$s=n=>{n.offsetHeight},af=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,na=[],Tm=n=>{document.readyState==="loading"?(na.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of na)e()}),na.push(n)):n()},dr=()=>document.documentElement.dir==="rtl",gr=n=>{Tm(()=>{const e=af();if(e){const r=n.NAME,o=e.fn[r];e.fn[r]=n.jQueryInterface,e.fn[r].Constructor=n,e.fn[r].noConflict=()=>(e.fn[r]=o,n.jQueryInterface)}})},Zt=(n,e=[],r=n)=>typeof n=="function"?n(...e):r,cf=(n,e,r=!0)=>{if(!r){Zt(n);return}const o=5,l=Am(e)+o;let d=!1;const g=({target:u})=>{u===e&&(d=!0,e.removeEventListener(rc,g),Zt(n))};e.addEventListener(rc,g),setTimeout(()=>{d||nf(e)},l)},Uc=(n,e,r,o)=>{const l=n.length;let d=n.indexOf(e);return d===-1?!r&&o?n[l-1]:n[0]:(d+=r?1:-1,o&&(d=(d+l)%l),n[Math.max(0,Math.min(d,l-1))])},Rm=/[^.]*(?=\..*)\.|.*/,Im=/\..*/,Pm=/::\d+$/,oa={};let Zl=1;const lf={mouseenter:"mouseover",mouseleave:"mouseout"},Lm=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function hf(n,e){return e&&`${e}::${Zl++}`||n.uidEvent||Zl++}function uf(n){const e=hf(n);return n.uidEvent=e,oa[e]=oa[e]||{},oa[e]}function Mm(n,e){return function r(o){return qc(o,{delegateTarget:n}),r.oneOff&&ue.off(n,o.type,e),e.apply(n,[o])}}function km(n,e,r){return function o(l){const d=n.querySelectorAll(e);for(let{target:g}=l;g&&g!==this;g=g.parentNode)for(const u of d)if(u===g)return qc(l,{delegateTarget:g}),o.oneOff&&ue.off(n,l.type,e,r),r.apply(g,[l])}}function df(n,e,r=null){return Object.values(n).find(o=>o.callable===e&&o.delegationSelector===r)}function ff(n,e,r){const o=typeof e=="string",l=o?r:e||r;let d=gf(n);return Lm.has(d)||(d=n),[o,l,d]}function Kl(n,e,r,o,l){if(typeof e!="string"||!n)return;let[d,g,u]=ff(e,r,o);e in lf&&(g=(E=>function(C){if(!C.relatedTarget||C.relatedTarget!==C.delegateTarget&&!C.delegateTarget.contains(C.relatedTarget))return E.call(this,C)})(g));const m=uf(n),p=m[u]||(m[u]={}),O=df(p,g,d?r:null);if(O){O.oneOff=O.oneOff&&l;return}const x=hf(g,e.replace(Rm,"")),v=d?km(n,r,g):Mm(n,g);v.delegationSelector=d?r:null,v.callable=g,v.oneOff=l,v.uidEvent=x,p[x]=v,n.addEventListener(u,v,d)}function ic(n,e,r,o,l){const d=df(e[r],o,l);d&&(n.removeEventListener(r,d,!!l),delete e[r][d.uidEvent])}function Nm(n,e,r,o){const l=e[r]||{};for(const[d,g]of Object.entries(l))d.includes(o)&&ic(n,e,r,g.callable,g.delegationSelector)}function gf(n){return n=n.replace(Im,""),lf[n]||n}const ue={on(n,e,r,o){Kl(n,e,r,o,!1)},one(n,e,r,o){Kl(n,e,r,o,!0)},off(n,e,r,o){if(typeof e!="string"||!n)return;const[l,d,g]=ff(e,r,o),u=g!==e,m=uf(n),p=m[g]||{},O=e.startsWith(".");if(typeof d<"u"){if(!Object.keys(p).length)return;ic(n,m,g,d,l?r:null);return}if(O)for(const x of Object.keys(m))Nm(n,m,x,e.slice(1));for(const[x,v]of Object.entries(p)){const y=x.replace(Pm,"");(!u||e.includes(y))&&ic(n,m,g,v.callable,v.delegationSelector)}},trigger(n,e,r){if(typeof e!="string"||!n)return null;const o=af(),l=gf(e),d=e!==l;let g=null,u=!0,m=!0,p=!1;d&&o&&(g=o.Event(e,r),o(n).trigger(g),u=!g.isPropagationStopped(),m=!g.isImmediatePropagationStopped(),p=g.isDefaultPrevented());const O=qc(new Event(e,{bubbles:u,cancelable:!0}),r);return p&&O.preventDefault(),m&&n.dispatchEvent(O),O.defaultPrevented&&g&&g.preventDefault(),O}};function qc(n,e={}){for(const[r,o]of Object.entries(e))try{n[r]=o}catch{Object.defineProperty(n,r,{configurable:!0,get(){return o}})}return n}function Jl(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function aa(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Vr={setDataAttribute(n,e,r){n.setAttribute(`data-bs-${aa(e)}`,r)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${aa(e)}`)},getDataAttributes(n){if(!n)return{};const e={},r=Object.keys(n.dataset).filter(o=>o.startsWith("bs")&&!o.startsWith("bsConfig"));for(const o of r){let l=o.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1,l.length),e[l]=Jl(n.dataset[o])}return e},getDataAttribute(n,e){return Jl(n.getAttribute(`data-bs-${aa(e)}`))}};class Ws{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,r){const o=Xr(r)?Vr.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof o=="object"?o:{},...Xr(r)?Vr.getDataAttributes(r):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,r=this.constructor.DefaultType){for(const[o,l]of Object.entries(r)){const d=e[o],g=Xr(d)?"element":Sm(d);if(!new RegExp(l).test(g))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${o}" provided type "${g}" but expected type "${l}".`)}}}const Fm="5.3.2";class vr extends Ws{constructor(e,r){super(),e=ni(e),e&&(this._element=e,this._config=this._getConfig(r),sa.set(this._element,this.constructor.DATA_KEY,this))}dispose(){sa.remove(this._element,this.constructor.DATA_KEY),ue.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,r,o=!0){cf(e,r,o)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return sa.get(ni(e),this.DATA_KEY)}static getOrCreateInstance(e,r={}){return this.getInstance(e)||new this(e,typeof r=="object"?r:null)}static get VERSION(){return Fm}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const ca=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let r=n.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&r!=="#"?sf(r.trim()):null}return e},Pe={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(r=>r.matches(e))},parents(n,e){const r=[];let o=n.parentNode.closest(e);for(;o;)r.push(o),o=o.parentNode.closest(e);return r},prev(n,e){let r=n.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(n,e){let r=n.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(r=>!oi(r)&&cs(r))},getSelectorFromElement(n){const e=ca(n);return e&&Pe.findOne(e)?e:null},getElementFromSelector(n){const e=ca(n);return e?Pe.findOne(e):null},getMultipleElementsFromSelector(n){const e=ca(n);return e?Pe.find(e):[]}},xo=(n,e="hide")=>{const r=`click.dismiss${n.EVENT_KEY}`,o=n.NAME;ue.on(document,r,`[data-bs-dismiss="${o}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),oi(this))return;const d=Pe.getElementFromSelector(this)||this.closest(`.${o}`);n.getOrCreateInstance(d)[e]()})},Bm="alert",$m="bs.alert",pf=`.${$m}`,Wm=`close${pf}`,Qm=`closed${pf}`,Um="fade",qm="show";class Oo extends vr{static get NAME(){return Bm}close(){if(ue.trigger(this._element,Wm).defaultPrevented)return;this._element.classList.remove(qm);const r=this._element.classList.contains(Um);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),ue.trigger(this._element,Qm),this.dispose()}static jQueryInterface(e){return this.each(function(){const r=Oo.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}xo(Oo,"close");gr(Oo);const Xm="button",Vm="bs.button",jm=`.${Vm}`,zm=".data-api",Gm="active",eh='[data-bs-toggle="button"]',Ym=`click${jm}${zm}`;class Co extends vr{static get NAME(){return Xm}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Gm))}static jQueryInterface(e){return this.each(function(){const r=Co.getOrCreateInstance(this);e==="toggle"&&r[e]()})}}ue.on(document,Ym,eh,n=>{n.preventDefault();const e=n.target.closest(eh);Co.getOrCreateInstance(e).toggle()});gr(Co);const Hm="swipe",ls=".bs.swipe",Zm=`touchstart${ls}`,Km=`touchmove${ls}`,Jm=`touchend${ls}`,e_=`pointerdown${ls}`,t_=`pointerup${ls}`,r_="touch",i_="pen",s_="pointer-event",n_=40,o_={endCallback:null,leftCallback:null,rightCallback:null},a_={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Kn extends Ws{constructor(e,r){super(),this._element=e,!(!e||!Kn.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return o_}static get DefaultType(){return a_}static get NAME(){return Hm}dispose(){ue.off(this._element,ls)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Zt(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=n_)return;const r=e/this._deltaX;this._deltaX=0,r&&Zt(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ue.on(this._element,e_,e=>this._start(e)),ue.on(this._element,t_,e=>this._end(e)),this._element.classList.add(s_)):(ue.on(this._element,Zm,e=>this._start(e)),ue.on(this._element,Km,e=>this._move(e)),ue.on(this._element,Jm,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===i_||e.pointerType===r_)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const c_="carousel",l_="bs.carousel",li=`.${l_}`,mf=".data-api",h_="ArrowLeft",u_="ArrowRight",d_=500,ws="next",Ui="prev",ji="left",yn="right",f_=`slide${li}`,la=`slid${li}`,g_=`keydown${li}`,p_=`mouseenter${li}`,m_=`mouseleave${li}`,__=`dragstart${li}`,x_=`load${li}${mf}`,O_=`click${li}${mf}`,_f="carousel",rn="active",C_="slide",w_="carousel-item-end",b_="carousel-item-start",v_="carousel-item-next",y_="carousel-item-prev",xf=".active",Of=".carousel-item",E_=xf+Of,S_=".carousel-item img",D_=".carousel-indicators",A_="[data-bs-slide], [data-bs-slide-to]",T_='[data-bs-ride="carousel"]',R_={[h_]:yn,[u_]:ji},I_={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},P_={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Qs extends vr{constructor(e,r){super(e,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Pe.findOne(D_,this._element),this._addEventListeners(),this._config.ride===_f&&this.cycle()}static get Default(){return I_}static get DefaultType(){return P_}static get NAME(){return c_}next(){this._slide(ws)}nextWhenVisible(){!document.hidden&&cs(this._element)&&this.next()}prev(){this._slide(Ui)}pause(){this._isSliding&&nf(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ue.one(this._element,la,()=>this.cycle());return}this.cycle()}}to(e){const r=this._getItems();if(e>r.length-1||e<0)return;if(this._isSliding){ue.one(this._element,la,()=>this.to(e));return}const o=this._getItemIndex(this._getActive());if(o===e)return;const l=e>o?ws:Ui;this._slide(l,r[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ue.on(this._element,g_,e=>this._keydown(e)),this._config.pause==="hover"&&(ue.on(this._element,p_,()=>this.pause()),ue.on(this._element,m_,()=>this._maybeEnableCycle())),this._config.touch&&Kn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of Pe.find(S_,this._element))ue.on(o,__,l=>l.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(ji)),rightCallback:()=>this._slide(this._directionToOrder(yn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),d_+this._config.interval))}};this._swipeHelper=new Kn(this._element,r)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const r=R_[e.key];r&&(e.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const r=Pe.findOne(xf,this._indicatorsElement);r.classList.remove(rn),r.removeAttribute("aria-current");const o=Pe.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);o&&(o.classList.add(rn),o.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const r=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(e,r=null){if(this._isSliding)return;const o=this._getActive(),l=e===ws,d=r||Uc(this._getItems(),o,l,this._config.wrap);if(d===o)return;const g=this._getItemIndex(d),u=y=>ue.trigger(this._element,y,{relatedTarget:d,direction:this._orderToDirection(e),from:this._getItemIndex(o),to:g});if(u(f_).defaultPrevented||!o||!d)return;const p=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(g),this._activeElement=d;const O=l?b_:w_,x=l?v_:y_;d.classList.add(x),$s(d),o.classList.add(O),d.classList.add(O);const v=()=>{d.classList.remove(O,x),d.classList.add(rn),o.classList.remove(rn,x,O),this._isSliding=!1,u(la)};this._queueCallback(v,o,this._isAnimated()),p&&this.cycle()}_isAnimated(){return this._element.classList.contains(C_)}_getActive(){return Pe.findOne(E_,this._element)}_getItems(){return Pe.find(Of,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return dr()?e===ji?Ui:ws:e===ji?ws:Ui}_orderToDirection(e){return dr()?e===Ui?ji:yn:e===Ui?yn:ji}static jQueryInterface(e){return this.each(function(){const r=Qs.getOrCreateInstance(this,e);if(typeof e=="number"){r.to(e);return}if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ue.on(document,O_,A_,function(n){const e=Pe.getElementFromSelector(this);if(!e||!e.classList.contains(_f))return;n.preventDefault();const r=Qs.getOrCreateInstance(e),o=this.getAttribute("data-bs-slide-to");if(o){r.to(o),r._maybeEnableCycle();return}if(Vr.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});ue.on(window,x_,()=>{const n=Pe.find(T_);for(const e of n)Qs.getOrCreateInstance(e)});gr(Qs);const L_="collapse",M_="bs.collapse",Us=`.${M_}`,k_=".data-api",N_=`show${Us}`,F_=`shown${Us}`,B_=`hide${Us}`,$_=`hidden${Us}`,W_=`click${Us}${k_}`,ha="show",Gi="collapse",sn="collapsing",Q_="collapsed",U_=`:scope .${Gi} .${Gi}`,q_="collapse-horizontal",X_="width",V_="height",j_=".collapse.show, .collapse.collapsing",sc='[data-bs-toggle="collapse"]',z_={parent:null,toggle:!0},G_={parent:"(null|element)",toggle:"boolean"};class Ms extends vr{constructor(e,r){super(e,r),this._isTransitioning=!1,this._triggerArray=[];const o=Pe.find(sc);for(const l of o){const d=Pe.getSelectorFromElement(l),g=Pe.find(d).filter(u=>u===this._element);d!==null&&g.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return z_}static get DefaultType(){return G_}static get NAME(){return L_}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(j_).filter(u=>u!==this._element).map(u=>Ms.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||ue.trigger(this._element,N_).defaultPrevented)return;for(const u of e)u.hide();const o=this._getDimension();this._element.classList.remove(Gi),this._element.classList.add(sn),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(sn),this._element.classList.add(Gi,ha),this._element.style[o]="",ue.trigger(this._element,F_)},g=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[o]=`${this._element[g]}px`}hide(){if(this._isTransitioning||!this._isShown()||ue.trigger(this._element,B_).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,$s(this._element),this._element.classList.add(sn),this._element.classList.remove(Gi,ha);for(const l of this._triggerArray){const d=Pe.getElementFromSelector(l);d&&!this._isShown(d)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(sn),this._element.classList.add(Gi),ue.trigger(this._element,$_)};this._element.style[r]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(ha)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=ni(e.parent),e}_getDimension(){return this._element.classList.contains(q_)?X_:V_}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(sc);for(const r of e){const o=Pe.getElementFromSelector(r);o&&this._addAriaAndCollapsedClass([r],this._isShown(o))}}_getFirstLevelChildren(e){const r=Pe.find(U_,this._config.parent);return Pe.find(e,this._config.parent).filter(o=>!r.includes(o))}_addAriaAndCollapsedClass(e,r){if(e.length)for(const o of e)o.classList.toggle(Q_,!r),o.setAttribute("aria-expanded",r)}static jQueryInterface(e){const r={};return typeof e=="string"&&/show|hide/.test(e)&&(r.toggle=!1),this.each(function(){const o=Ms.getOrCreateInstance(this,r);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e]()}})}}ue.on(document,W_,sc,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of Pe.getMultipleElementsFromSelector(this))Ms.getOrCreateInstance(e,{toggle:!1}).toggle()});gr(Ms);const th="dropdown",Y_="bs.dropdown",Ai=`.${Y_}`,Xc=".data-api",H_="Escape",rh="Tab",Z_="ArrowUp",ih="ArrowDown",K_=2,J_=`hide${Ai}`,ex=`hidden${Ai}`,tx=`show${Ai}`,rx=`shown${Ai}`,Cf=`click${Ai}${Xc}`,wf=`keydown${Ai}${Xc}`,ix=`keyup${Ai}${Xc}`,zi="show",sx="dropup",nx="dropend",ox="dropstart",ax="dropup-center",cx="dropdown-center",xi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',lx=`${xi}.${zi}`,En=".dropdown-menu",hx=".navbar",ux=".navbar-nav",dx=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",fx=dr()?"top-end":"top-start",gx=dr()?"top-start":"top-end",px=dr()?"bottom-end":"bottom-start",mx=dr()?"bottom-start":"bottom-end",_x=dr()?"left-start":"right-start",xx=dr()?"right-start":"left-start",Ox="top",Cx="bottom",wx={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},bx={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Mr extends vr{constructor(e,r){super(e,r),this._popper=null,this._parent=this._element.parentNode,this._menu=Pe.next(this._element,En)[0]||Pe.prev(this._element,En)[0]||Pe.findOne(En,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wx}static get DefaultType(){return bx}static get NAME(){return th}toggle(){return this._isShown()?this.hide():this.show()}show(){if(oi(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ue.trigger(this._element,tx,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(ux))for(const o of[].concat(...document.body.children))ue.on(o,"mouseover",Zn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(zi),this._element.classList.add(zi),ue.trigger(this._element,rx,e)}}hide(){if(oi(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ue.trigger(this._element,J_,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))ue.off(o,"mouseover",Zn);this._popper&&this._popper.destroy(),this._menu.classList.remove(zi),this._element.classList.remove(zi),this._element.setAttribute("aria-expanded","false"),Vr.removeDataAttribute(this._menu,"popper"),ue.trigger(this._element,ex,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Xr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${th.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof rf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Xr(this._config.reference)?e=ni(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const r=this._getPopperConfig();this._popper=Qc(e,this._menu,r)}_isShown(){return this._menu.classList.contains(zi)}_getPlacement(){const e=this._parent;if(e.classList.contains(nx))return _x;if(e.classList.contains(ox))return xx;if(e.classList.contains(ax))return Ox;if(e.classList.contains(cx))return Cx;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(sx)?r?gx:fx:r?mx:px}_detectNavbar(){return this._element.closest(hx)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Zt(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:r}){const o=Pe.find(dx,this._menu).filter(l=>cs(l));o.length&&Uc(o,r,e===ih,!o.includes(r)).focus()}static jQueryInterface(e){return this.each(function(){const r=Mr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}static clearMenus(e){if(e.button===K_||e.type==="keyup"&&e.key!==rh)return;const r=Pe.find(lx);for(const o of r){const l=Mr.getInstance(o);if(!l||l._config.autoClose===!1)continue;const d=e.composedPath(),g=d.includes(l._menu);if(d.includes(l._element)||l._config.autoClose==="inside"&&!g||l._config.autoClose==="outside"&&g||l._menu.contains(e.target)&&(e.type==="keyup"&&e.key===rh||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const u={relatedTarget:l._element};e.type==="click"&&(u.clickEvent=e),l._completeHide(u)}}static dataApiKeydownHandler(e){const r=/input|textarea/i.test(e.target.tagName),o=e.key===H_,l=[Z_,ih].includes(e.key);if(!l&&!o||r&&!o)return;e.preventDefault();const d=this.matches(xi)?this:Pe.prev(this,xi)[0]||Pe.next(this,xi)[0]||Pe.findOne(xi,e.delegateTarget.parentNode),g=Mr.getOrCreateInstance(d);if(l){e.stopPropagation(),g.show(),g._selectMenuItem(e);return}g._isShown()&&(e.stopPropagation(),g.hide(),d.focus())}}ue.on(document,wf,xi,Mr.dataApiKeydownHandler);ue.on(document,wf,En,Mr.dataApiKeydownHandler);ue.on(document,Cf,Mr.clearMenus);ue.on(document,ix,Mr.clearMenus);ue.on(document,Cf,xi,function(n){n.preventDefault(),Mr.getOrCreateInstance(this).toggle()});gr(Mr);const bf="backdrop",vx="fade",sh="show",nh=`mousedown.bs.${bf}`,yx={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ex={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vf extends Ws{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return yx}static get DefaultType(){return Ex}static get NAME(){return bf}show(e){if(!this._config.isVisible){Zt(e);return}this._append();const r=this._getElement();this._config.isAnimated&&$s(r),r.classList.add(sh),this._emulateAnimation(()=>{Zt(e)})}hide(e){if(!this._config.isVisible){Zt(e);return}this._getElement().classList.remove(sh),this._emulateAnimation(()=>{this.dispose(),Zt(e)})}dispose(){this._isAppended&&(ue.off(this._element,nh),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(vx),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=ni(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ue.on(e,nh,()=>{Zt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){cf(e,this._getElement(),this._config.isAnimated)}}const Sx="focustrap",Dx="bs.focustrap",Jn=`.${Dx}`,Ax=`focusin${Jn}`,Tx=`keydown.tab${Jn}`,Rx="Tab",Ix="forward",oh="backward",Px={autofocus:!0,trapElement:null},Lx={autofocus:"boolean",trapElement:"element"};class yf extends Ws{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Px}static get DefaultType(){return Lx}static get NAME(){return Sx}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ue.off(document,Jn),ue.on(document,Ax,e=>this._handleFocusin(e)),ue.on(document,Tx,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ue.off(document,Jn))}_handleFocusin(e){const{trapElement:r}=this._config;if(e.target===document||e.target===r||r.contains(e.target))return;const o=Pe.focusableChildren(r);o.length===0?r.focus():this._lastTabNavDirection===oh?o[o.length-1].focus():o[0].focus()}_handleKeydown(e){e.key===Rx&&(this._lastTabNavDirection=e.shiftKey?oh:Ix)}}const ah=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ch=".sticky-top",nn="padding-right",lh="margin-right";class nc{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,nn,r=>r+e),this._setElementAttributes(ah,nn,r=>r+e),this._setElementAttributes(ch,lh,r=>r-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,nn),this._resetElementAttributes(ah,nn),this._resetElementAttributes(ch,lh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,r,o){const l=this.getWidth(),d=g=>{if(g!==this._element&&window.innerWidth>g.clientWidth+l)return;this._saveInitialAttribute(g,r);const u=window.getComputedStyle(g).getPropertyValue(r);g.style.setProperty(r,`${o(Number.parseFloat(u))}px`)};this._applyManipulationCallback(e,d)}_saveInitialAttribute(e,r){const o=e.style.getPropertyValue(r);o&&Vr.setDataAttribute(e,r,o)}_resetElementAttributes(e,r){const o=l=>{const d=Vr.getDataAttribute(l,r);if(d===null){l.style.removeProperty(r);return}Vr.removeDataAttribute(l,r),l.style.setProperty(r,d)};this._applyManipulationCallback(e,o)}_applyManipulationCallback(e,r){if(Xr(e)){r(e);return}for(const o of Pe.find(e,this._element))r(o)}}const Mx="modal",kx="bs.modal",fr=`.${kx}`,Nx=".data-api",Fx="Escape",Bx=`hide${fr}`,$x=`hidePrevented${fr}`,Ef=`hidden${fr}`,Sf=`show${fr}`,Wx=`shown${fr}`,Qx=`resize${fr}`,Ux=`click.dismiss${fr}`,qx=`mousedown.dismiss${fr}`,Xx=`keydown.dismiss${fr}`,Vx=`click${fr}${Nx}`,hh="modal-open",jx="fade",uh="show",ua="modal-static",zx=".modal.show",Gx=".modal-dialog",Yx=".modal-body",Hx='[data-bs-toggle="modal"]',Zx={backdrop:!0,focus:!0,keyboard:!0},Kx={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class yi extends vr{constructor(e,r){super(e,r),this._dialog=Pe.findOne(Gx,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new nc,this._addEventListeners()}static get Default(){return Zx}static get DefaultType(){return Kx}static get NAME(){return Mx}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ue.trigger(this._element,Sf,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(hh),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ue.trigger(this._element,Bx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(uh),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ue.off(window,fr),ue.off(this._dialog,fr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vf({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yf({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=Pe.findOne(Yx,this._dialog);r&&(r.scrollTop=0),$s(this._element),this._element.classList.add(uh);const o=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ue.trigger(this._element,Wx,{relatedTarget:e})};this._queueCallback(o,this._dialog,this._isAnimated())}_addEventListeners(){ue.on(this._element,Xx,e=>{if(e.key===Fx){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ue.on(window,Qx,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ue.on(this._element,qx,e=>{ue.one(this._element,Ux,r=>{if(!(this._element!==e.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(hh),this._resetAdjustments(),this._scrollBar.reset(),ue.trigger(this._element,Ef)})}_isAnimated(){return this._element.classList.contains(jx)}_triggerBackdropTransition(){if(ue.trigger(this._element,$x).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(ua)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(ua),this._queueCallback(()=>{this._element.classList.remove(ua),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),o=r>0;if(o&&!e){const l=dr()?"paddingLeft":"paddingRight";this._element.style[l]=`${r}px`}if(!o&&e){const l=dr()?"paddingRight":"paddingLeft";this._element.style[l]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,r){return this.each(function(){const o=yi.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof o[e]>"u")throw new TypeError(`No method named "${e}"`);o[e](r)}})}}ue.on(document,Vx,Hx,function(n){const e=Pe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),ue.one(e,Sf,l=>{l.defaultPrevented||ue.one(e,Ef,()=>{cs(this)&&this.focus()})});const r=Pe.findOne(zx);r&&yi.getInstance(r).hide(),yi.getOrCreateInstance(e).toggle(this)});xo(yi);gr(yi);const Jx="offcanvas",e2="bs.offcanvas",zr=`.${e2}`,Df=".data-api",t2=`load${zr}${Df}`,r2="Escape",dh="show",fh="showing",gh="hiding",i2="offcanvas-backdrop",Af=".offcanvas.show",s2=`show${zr}`,n2=`shown${zr}`,o2=`hide${zr}`,ph=`hidePrevented${zr}`,Tf=`hidden${zr}`,a2=`resize${zr}`,c2=`click${zr}${Df}`,l2=`keydown.dismiss${zr}`,h2='[data-bs-toggle="offcanvas"]',u2={backdrop:!0,keyboard:!0,scroll:!1},d2={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ai extends vr{constructor(e,r){super(e,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return u2}static get DefaultType(){return d2}static get NAME(){return Jx}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||ue.trigger(this._element,s2,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new nc().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(fh);const o=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(dh),this._element.classList.remove(fh),ue.trigger(this._element,n2,{relatedTarget:e})};this._queueCallback(o,this._element,!0)}hide(){if(!this._isShown||ue.trigger(this._element,o2).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(gh),this._backdrop.hide();const r=()=>{this._element.classList.remove(dh,gh),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new nc().reset(),ue.trigger(this._element,Tf)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){ue.trigger(this._element,ph);return}this.hide()},r=!!this._config.backdrop;return new vf({className:i2,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?e:null})}_initializeFocusTrap(){return new yf({trapElement:this._element})}_addEventListeners(){ue.on(this._element,l2,e=>{if(e.key===r2){if(this._config.keyboard){this.hide();return}ue.trigger(this._element,ph)}})}static jQueryInterface(e){return this.each(function(){const r=ai.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}ue.on(document,c2,h2,function(n){const e=Pe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),oi(this))return;ue.one(e,Tf,()=>{cs(this)&&this.focus()});const r=Pe.findOne(Af);r&&r!==e&&ai.getInstance(r).hide(),ai.getOrCreateInstance(e).toggle(this)});ue.on(window,t2,()=>{for(const n of Pe.find(Af))ai.getOrCreateInstance(n).show()});ue.on(window,a2,()=>{for(const n of Pe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&ai.getOrCreateInstance(n).hide()});xo(ai);gr(ai);const f2=/^aria-[\w-]*$/i,Rf={"*":["class","dir","id","lang","role",f2],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},g2=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),p2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,m2=(n,e)=>{const r=n.nodeName.toLowerCase();return e.includes(r)?g2.has(r)?!!p2.test(n.nodeValue):!0:e.filter(o=>o instanceof RegExp).some(o=>o.test(r))};function _2(n,e,r){if(!n.length)return n;if(r&&typeof r=="function")return r(n);const l=new window.DOMParser().parseFromString(n,"text/html"),d=[].concat(...l.body.querySelectorAll("*"));for(const g of d){const u=g.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){g.remove();continue}const m=[].concat(...g.attributes),p=[].concat(e["*"]||[],e[u]||[]);for(const O of m)m2(O,p)||g.removeAttribute(O.nodeName)}return l.body.innerHTML}const x2="TemplateFactory",O2={allowList:Rf,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},C2={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},w2={entry:"(string|element|function|null)",selector:"(string|element)"};class b2 extends Ws{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return O2}static get DefaultType(){return C2}static get NAME(){return x2}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[l,d]of Object.entries(this._config.content))this._setContent(e,d,l);const r=e.children[0],o=this._resolvePossibleFunction(this._config.extraClass);return o&&r.classList.add(...o.split(" ")),r}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[r,o]of Object.entries(e))super._typeCheckConfig({selector:r,entry:o},w2)}_setContent(e,r,o){const l=Pe.findOne(o,e);if(l){if(r=this._resolvePossibleFunction(r),!r){l.remove();return}if(Xr(r)){this._putElementInTemplate(ni(r),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(r);return}l.textContent=r}}_maybeSanitize(e){return this._config.sanitize?_2(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Zt(e,[this])}_putElementInTemplate(e,r){if(this._config.html){r.innerHTML="",r.append(e);return}r.textContent=e.textContent}}const v2="tooltip",y2=new Set(["sanitize","allowList","sanitizeFn"]),da="fade",E2="modal",on="show",S2=".tooltip-inner",mh=`.${E2}`,_h="hide.bs.modal",bs="hover",fa="focus",D2="click",A2="manual",T2="hide",R2="hidden",I2="show",P2="shown",L2="inserted",M2="click",k2="focusin",N2="focusout",F2="mouseenter",B2="mouseleave",$2={AUTO:"auto",TOP:"top",RIGHT:dr()?"left":"right",BOTTOM:"bottom",LEFT:dr()?"right":"left"},W2={allowList:Rf,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Q2={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class tr extends vr{constructor(e,r){if(typeof rf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return W2}static get DefaultType(){return Q2}static get NAME(){return v2}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ue.off(this._element.closest(mh),_h,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=ue.trigger(this._element,this.constructor.eventName(I2)),o=(of(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:d}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(d.append(l),ue.trigger(this._element,this.constructor.eventName(L2))),this._popper=this._createPopper(l),l.classList.add(on),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))ue.on(u,"mouseover",Zn);const g=()=>{ue.trigger(this._element,this.constructor.eventName(P2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(g,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ue.trigger(this._element,this.constructor.eventName(T2)).defaultPrevented)return;if(this._getTipElement().classList.remove(on),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))ue.off(l,"mouseover",Zn);this._activeTrigger[D2]=!1,this._activeTrigger[fa]=!1,this._activeTrigger[bs]=!1,this._isHovered=null;const o=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ue.trigger(this._element,this.constructor.eventName(R2)))};this._queueCallback(o,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const r=this._getTemplateFactory(e).toHtml();if(!r)return null;r.classList.remove(da,on),r.classList.add(`bs-${this.constructor.NAME}-auto`);const o=Dm(this.constructor.NAME).toString();return r.setAttribute("id",o),this._isAnimated()&&r.classList.add(da),r}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new b2({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[S2]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(da)}_isShown(){return this.tip&&this.tip.classList.contains(on)}_createPopper(e){const r=Zt(this._config.placement,[this,e,this._element]),o=$2[r.toUpperCase()];return Qc(this._element,e,this._getPopperConfig(o))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_resolvePossibleFunction(e){return Zt(e,[this._element])}_getPopperConfig(e){const r={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:o=>{this._getTipElement().setAttribute("data-popper-placement",o.state.placement)}}]};return{...r,...Zt(this._config.popperConfig,[r])}}_setListeners(){const e=this._config.trigger.split(" ");for(const r of e)if(r==="click")ue.on(this._element,this.constructor.eventName(M2),this._config.selector,o=>{this._initializeOnDelegatedTarget(o).toggle()});else if(r!==A2){const o=r===bs?this.constructor.eventName(F2):this.constructor.eventName(k2),l=r===bs?this.constructor.eventName(B2):this.constructor.eventName(N2);ue.on(this._element,o,this._config.selector,d=>{const g=this._initializeOnDelegatedTarget(d);g._activeTrigger[d.type==="focusin"?fa:bs]=!0,g._enter()}),ue.on(this._element,l,this._config.selector,d=>{const g=this._initializeOnDelegatedTarget(d);g._activeTrigger[d.type==="focusout"?fa:bs]=g._element.contains(d.relatedTarget),g._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ue.on(this._element.closest(mh),_h,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,r){clearTimeout(this._timeout),this._timeout=setTimeout(e,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const r=Vr.getDataAttributes(this._element);for(const o of Object.keys(r))y2.has(o)&&delete r[o];return e={...r,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:ni(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[r,o]of Object.entries(this._config))this.constructor.Default[r]!==o&&(e[r]=o);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const r=tr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}gr(tr);const U2="popover",q2=".popover-header",X2=".popover-body",V2={...tr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},j2={...tr.DefaultType,content:"(null|string|element|function)"};class Vc extends tr{static get Default(){return V2}static get DefaultType(){return j2}static get NAME(){return U2}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[q2]:this._getTitle(),[X2]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const r=Vc.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}gr(Vc);const z2="scrollspy",G2="bs.scrollspy",jc=`.${G2}`,Y2=".data-api",H2=`activate${jc}`,xh=`click${jc}`,Z2=`load${jc}${Y2}`,K2="dropdown-item",qi="active",J2='[data-bs-spy="scroll"]',ga="[href]",eO=".nav, .list-group",Oh=".nav-link",tO=".nav-item",rO=".list-group-item",iO=`${Oh}, ${tO} > ${Oh}, ${rO}`,sO=".dropdown",nO=".dropdown-toggle",oO={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},aO={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class wo extends vr{constructor(e,r){super(e,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return oO}static get DefaultType(){return aO}static get NAME(){return z2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=ni(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(r=>Number.parseFloat(r))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ue.off(this._config.target,xh),ue.on(this._config.target,xh,ga,e=>{const r=this._observableSections.get(e.target.hash);if(r){e.preventDefault();const o=this._rootElement||window,l=r.offsetTop-this._element.offsetTop;if(o.scrollTo){o.scrollTo({top:l,behavior:"smooth"});return}o.scrollTop=l}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),e)}_observerCallback(e){const r=g=>this._targetLinks.get(`#${g.target.id}`),o=g=>{this._previousScrollData.visibleEntryTop=g.target.offsetTop,this._process(r(g))},l=(this._rootElement||document.documentElement).scrollTop,d=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const g of e){if(!g.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(g));continue}const u=g.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(d&&u){if(o(g),!l)return;continue}!d&&!u&&o(g)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Pe.find(ga,this._config.target);for(const r of e){if(!r.hash||oi(r))continue;const o=Pe.findOne(decodeURI(r.hash),this._element);cs(o)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,o))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(qi),this._activateParents(e),ue.trigger(this._element,H2,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(K2)){Pe.findOne(nO,e.closest(sO)).classList.add(qi);return}for(const r of Pe.parents(e,eO))for(const o of Pe.prev(r,iO))o.classList.add(qi)}_clearActiveClass(e){e.classList.remove(qi);const r=Pe.find(`${ga}.${qi}`,e);for(const o of r)o.classList.remove(qi)}static jQueryInterface(e){return this.each(function(){const r=wo.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ue.on(window,Z2,()=>{for(const n of Pe.find(J2))wo.getOrCreateInstance(n)});gr(wo);const cO="tab",lO="bs.tab",Ti=`.${lO}`,hO=`hide${Ti}`,uO=`hidden${Ti}`,dO=`show${Ti}`,fO=`shown${Ti}`,gO=`click${Ti}`,pO=`keydown${Ti}`,mO=`load${Ti}`,_O="ArrowLeft",Ch="ArrowRight",xO="ArrowUp",wh="ArrowDown",pa="Home",bh="End",Oi="active",vh="fade",ma="show",OO="dropdown",If=".dropdown-toggle",CO=".dropdown-menu",_a=`:not(${If})`,wO='.list-group, .nav, [role="tablist"]',bO=".nav-item, .list-group-item",vO=`.nav-link${_a}, .list-group-item${_a}, [role="tab"]${_a}`,Pf='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',xa=`${vO}, ${Pf}`,yO=`.${Oi}[data-bs-toggle="tab"], .${Oi}[data-bs-toggle="pill"], .${Oi}[data-bs-toggle="list"]`;class os extends vr{constructor(e){super(e),this._parent=this._element.closest(wO),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ue.on(this._element,pO,r=>this._keydown(r)))}static get NAME(){return cO}show(){const e=this._element;if(this._elemIsActive(e))return;const r=this._getActiveElem(),o=r?ue.trigger(r,hO,{relatedTarget:e}):null;ue.trigger(e,dO,{relatedTarget:r}).defaultPrevented||o&&o.defaultPrevented||(this._deactivate(r,e),this._activate(e,r))}_activate(e,r){if(!e)return;e.classList.add(Oi),this._activate(Pe.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(ma);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ue.trigger(e,fO,{relatedTarget:r})};this._queueCallback(o,e,e.classList.contains(vh))}_deactivate(e,r){if(!e)return;e.classList.remove(Oi),e.blur(),this._deactivate(Pe.getElementFromSelector(e));const o=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(ma);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ue.trigger(e,uO,{relatedTarget:r})};this._queueCallback(o,e,e.classList.contains(vh))}_keydown(e){if(![_O,Ch,xO,wh,pa,bh].includes(e.key))return;e.stopPropagation(),e.preventDefault();const r=this._getChildren().filter(l=>!oi(l));let o;if([pa,bh].includes(e.key))o=r[e.key===pa?0:r.length-1];else{const l=[Ch,wh].includes(e.key);o=Uc(r,e.target,l,!0)}o&&(o.focus({preventScroll:!0}),os.getOrCreateInstance(o).show())}_getChildren(){return Pe.find(xa,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,r){this._setAttributeIfNotExists(e,"role","tablist");for(const o of r)this._setInitialAttributesOnChild(o)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const r=this._elemIsActive(e),o=this._getOuterElement(e);e.setAttribute("aria-selected",r),o!==e&&this._setAttributeIfNotExists(o,"role","presentation"),r||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const r=Pe.getElementFromSelector(e);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,r){const o=this._getOuterElement(e);if(!o.classList.contains(OO))return;const l=(d,g)=>{const u=Pe.findOne(d,o);u&&u.classList.toggle(g,r)};l(If,Oi),l(CO,ma),o.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(e,r,o){e.hasAttribute(r)||e.setAttribute(r,o)}_elemIsActive(e){return e.classList.contains(Oi)}_getInnerElement(e){return e.matches(xa)?e:Pe.findOne(xa,e)}_getOuterElement(e){return e.closest(bO)||e}static jQueryInterface(e){return this.each(function(){const r=os.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}ue.on(document,gO,Pf,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!oi(this)&&os.getOrCreateInstance(this).show()});ue.on(window,mO,()=>{for(const n of Pe.find(yO))os.getOrCreateInstance(n)});gr(os);const EO="toast",SO="bs.toast",hi=`.${SO}`,DO=`mouseover${hi}`,AO=`mouseout${hi}`,TO=`focusin${hi}`,RO=`focusout${hi}`,IO=`hide${hi}`,PO=`hidden${hi}`,LO=`show${hi}`,MO=`shown${hi}`,kO="fade",yh="hide",an="show",cn="showing",NO={animation:"boolean",autohide:"boolean",delay:"number"},FO={animation:!0,autohide:!0,delay:5e3};class bo extends vr{constructor(e,r){super(e,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return FO}static get DefaultType(){return NO}static get NAME(){return EO}show(){if(ue.trigger(this._element,LO).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(kO);const r=()=>{this._element.classList.remove(cn),ue.trigger(this._element,MO),this._maybeScheduleHide()};this._element.classList.remove(yh),$s(this._element),this._element.classList.add(an,cn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||ue.trigger(this._element,IO).defaultPrevented)return;const r=()=>{this._element.classList.add(yh),this._element.classList.remove(cn,an),ue.trigger(this._element,PO)};this._element.classList.add(cn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(an),super.dispose()}isShown(){return this._element.classList.contains(an)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,r){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const o=e.relatedTarget;this._element===o||this._element.contains(o)||this._maybeScheduleHide()}_setListeners(){ue.on(this._element,DO,e=>this._onInteraction(e,!0)),ue.on(this._element,AO,e=>this._onInteraction(e,!1)),ue.on(this._element,TO,e=>this._onInteraction(e,!0)),ue.on(this._element,RO,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const r=bo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}xo(bo);gr(bo);const BO=typeof navigator>"u",$O=BO?"node":navigator.userAgent;function WO(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test($O)}const Lf=WO(),QO=async()=>{try{return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(await navigator.mediaDevices.enumerateDevices()).some(e=>e.kind==="videoinput"):(console.warn("navigator.mediaDevices.enumerateDevices not supported"),!1)}catch(n){return console.warn(n),!1}};let Oa;const UO=async()=>Oa??(Oa=await QO()),oc=(n,e=100)=>{let r;return function(...o){clearTimeout(r),r=setTimeout(()=>n.apply(this,o),e)}};function Eh(n,e){localStorage[n]=e,sessionStorage[n]=e}function qO(n,e){return localStorage[n]||sessionStorage[n]||e}function eo(n){return F0.sanitize(n)}class XO{contentSelector;buttonSelector;contentEl;buttonEl;constructor(e,r){this.contentSelector=e,this.buttonSelector=r,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(r),this.buttonEl.addEventListener("click",()=>{let o=new URL("./",window.location.href);o.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(o.toString()).then(()=>{tr.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),Be(`${this.buttonSelector}.btn-primary`).style.display="none",Be(`${this.buttonSelector}.btn-success`).style.display="",setTimeout(()=>{Be(`${this.buttonSelector}.btn-primary`).style.display="",Be(`${this.buttonSelector}.btn-success`).style.display="none",tr.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(l){console.error("Async: Could not copy text: ",l)})})}}var Mf={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(self,()=>(()=>{var r={903:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseRenderLayer=void 0;const p=m(274),O=m(627),x=m(237),v=m(860),y=m(374),E=m(296),C=m(345),b=m(859),I=m(399),R=m(855);class S extends b.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var F;return(F=this._charAtlas)===null||F===void 0?void 0:F.pages[0].canvas}constructor(F,$,A,M,G,T,P,X,q,W){super(),this._terminal=F,this._container=$,this._alpha=G,this._themeService=T,this._bufferService=P,this._optionsService=X,this._decorationService=q,this._coreBrowserService=W,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,E.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new b.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new C.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new p.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${A}-layer`),this._canvas.style.zIndex=M.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(j=>{this._refreshCharAtlas(j),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,b.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,y.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(F,$){}handleSelectionChanged(F,$,A=!1){this._selectionModel.update(this._terminal,F,$,A)}_setTransparency(F){if(F===this._alpha)return;const $=this._canvas;this._alpha=F,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,$),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(F){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,O.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,F,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,C.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let $=0;$<this._charAtlas.pages.length;$++)this._bitmapGenerator[$]=new B(this._charAtlas.pages[$].canvas)}}resize(F){this._deviceCellWidth=F.device.cell.width,this._deviceCellHeight=F.device.cell.height,this._deviceCharWidth=F.device.char.width,this._deviceCharHeight=F.device.char.height,this._deviceCharLeft=F.device.char.left,this._deviceCharTop=F.device.char.top,this._canvas.width=F.device.canvas.width,this._canvas.height=F.device.canvas.height,this._canvas.style.width=`${F.css.canvas.width}px`,this._canvas.style.height=`${F.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var F;(F=this._charAtlas)===null||F===void 0||F.clearTexture()}_fillCells(F,$,A,M){this._ctx.fillRect(F*this._deviceCellWidth,$*this._deviceCellHeight,A*this._deviceCellWidth,M*this._deviceCellHeight)}_fillMiddleLineAtCells(F,$,A=1){const M=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(F*this._deviceCellWidth,($+1)*this._deviceCellHeight-M-this._coreBrowserService.dpr,A*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(F,$,A=1,M=0){this._ctx.fillRect(F*this._deviceCellWidth,($+1)*this._deviceCellHeight+M-this._coreBrowserService.dpr-1,A*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(F,$,A=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const M=this._coreBrowserService.dpr;this._ctx.lineWidth=M;for(let G=0;G<A;G++){const T=(F+G)*this._deviceCellWidth,P=(F+G+.5)*this._deviceCellWidth,X=(F+G+1)*this._deviceCellWidth,q=($+1)*this._deviceCellHeight-M-1,W=q-M,j=q+M;this._ctx.moveTo(T,q),this._ctx.bezierCurveTo(T,W,P,W,P,q),this._ctx.bezierCurveTo(P,j,X,j,X,q)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(F,$,A=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const M=this._coreBrowserService.dpr;this._ctx.lineWidth=M,this._ctx.setLineDash([2*M,M]);const G=F*this._deviceCellWidth,T=($+1)*this._deviceCellHeight-M-1;this._ctx.moveTo(G,T);for(let P=0;P<A;P++){const X=(F+A+P)*this._deviceCellWidth;this._ctx.lineTo(X,T)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(F,$,A=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const M=this._coreBrowserService.dpr;this._ctx.lineWidth=M,this._ctx.setLineDash([4*M,3*M]);const G=F*this._deviceCellWidth,T=(F+A)*this._deviceCellWidth,P=($+1)*this._deviceCellHeight-M-1;this._ctx.moveTo(G,P),this._ctx.lineTo(T,P),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(F,$,A){this._ctx.fillRect(F*this._deviceCellWidth,$*this._deviceCellHeight,this._coreBrowserService.dpr*A,this._deviceCellHeight)}_strokeRectAtCell(F,$,A,M){const G=this._coreBrowserService.dpr;this._ctx.lineWidth=G,this._ctx.strokeRect(F*this._deviceCellWidth+G/2,$*this._deviceCellHeight+G/2,A*this._deviceCellWidth-G,M*this._deviceCellHeight-G)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(F,$,A,M){this._alpha?this._ctx.clearRect(F*this._deviceCellWidth,$*this._deviceCellHeight,A*this._deviceCellWidth,M*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(F*this._deviceCellWidth,$*this._deviceCellHeight,A*this._deviceCellWidth,M*this._deviceCellHeight))}_fillCharTrueColor(F,$,A){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=x.TEXT_BASELINE,this._clipRow(A);let M=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(M=(0,v.tryDrawCustomChar)(this._ctx,F.getChars(),$*this._deviceCellWidth,A*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),M||this._ctx.fillText(F.getChars(),$*this._deviceCellWidth+this._deviceCharLeft,A*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(F,$,A){var M,G,T,P;const X=F.getChars();if(this._cellColorResolver.resolve(F,$,this._bufferService.buffer.ydisp+A),!this._charAtlas)return;let q;q=X&&X.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(X,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(F.getCode()||R.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),q.size.x&&q.size.y&&(this._ctx.save(),this._clipRow(A),this._bitmapGenerator[q.texturePage]&&this._charAtlas.pages[q.texturePage].canvas!==this._bitmapGenerator[q.texturePage].canvas&&((G=(M=this._bitmapGenerator[q.texturePage])===null||M===void 0?void 0:M.bitmap)===null||G===void 0||G.close(),delete this._bitmapGenerator[q.texturePage]),this._charAtlas.pages[q.texturePage].version!==((T=this._bitmapGenerator[q.texturePage])===null||T===void 0?void 0:T.version)&&(this._bitmapGenerator[q.texturePage]||(this._bitmapGenerator[q.texturePage]=new B(this._charAtlas.pages[q.texturePage].canvas)),this._bitmapGenerator[q.texturePage].refresh(),this._bitmapGenerator[q.texturePage].version=this._charAtlas.pages[q.texturePage].version),this._ctx.drawImage(((P=this._bitmapGenerator[q.texturePage])===null||P===void 0?void 0:P.bitmap)||this._charAtlas.pages[q.texturePage].canvas,q.texturePosition.x,q.texturePosition.y,q.size.x,q.size.y,$*this._deviceCellWidth+this._deviceCharLeft-q.offset.x,A*this._deviceCellHeight+this._deviceCharTop-q.offset.y,q.size.x,q.size.y),this._ctx.restore())}_clipRow(F){this._ctx.beginPath(),this._ctx.rect(0,F*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(F,$){return`${$?"italic":""} ${F?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}u.BaseRenderLayer=S;class B{get bitmap(){return this._bitmap}constructor(F){this.canvas=F,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var F;(F=this._bitmap)===null||F===void 0||F.close(),this._bitmap=void 0,I.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){var F;this._state===0&&((F=this._bitmap)===null||F===void 0||F.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then($=>{this._state===2?this.refresh():this._bitmap=$,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasRenderer=void 0;const p=m(627),O=m(56),x=m(374),v=m(345),y=m(859),E=m(873),C=m(43),b=m(630),I=m(744);class R extends y.Disposable{constructor(B,U,F,$,A,M,G,T,P,X,q){super(),this._terminal=B,this._screenElement=U,this._bufferService=$,this._charSizeService=A,this._optionsService=M,this._coreBrowserService=P,this._themeService=q,this._onRequestRedraw=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new v.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new v.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const W=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new I.TextRenderLayer(this._terminal,this._screenElement,0,W,this._bufferService,this._optionsService,G,X,this._coreBrowserService,q),new b.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,X,this._optionsService,q),new C.LinkRenderLayer(this._terminal,this._screenElement,2,F,this._bufferService,this._optionsService,X,this._coreBrowserService,q),new E.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,T,this._coreBrowserService,X,q)];for(const j of this._renderLayers)(0,v.forwardEvent)(j.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,x.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,O.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(j,H)=>this._setCanvasDevicePixelDimensions(j,H))),this.register((0,y.toDisposable)(()=>{for(const j of this._renderLayers)j.dispose();(0,p.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(B,U){this._updateDimensions();for(const F of this._renderLayers)F.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(B=>B.handleBlur())}handleFocus(){this._runOperation(B=>B.handleFocus())}handleSelectionChanged(B,U,F=!1){this._runOperation($=>$.handleSelectionChanged(B,U,F)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(B=>B.handleCursorMove())}clear(){this._runOperation(B=>B.reset())}_runOperation(B){for(const U of this._renderLayers)B(U)}renderRows(B,U){for(const F of this._renderLayers)F.handleGridChanged(B,U)}clearTextureAtlas(){for(const B of this._renderLayers)B.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const B=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*B),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*B),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/B),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/B),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(B,U){this.dimensions.device.canvas.height=U,this.dimensions.device.canvas.width=B;for(const F of this._renderLayers)F.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}u.CanvasRenderer=R},873:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CursorRenderLayer=void 0;const p=m(457),O=m(859),x=m(399),v=m(782),y=m(903);class E extends y.BaseRenderLayer{constructor(b,I,R,S,B,U,F,$,A,M){super(b,I,"cursor",R,!0,M,B,U,A,$),this._onRequestRedraw=S,this._coreService=F,this._cursorBlinkStateManager=this.register(new O.MutableDisposable),this._cell=new v.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(U.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(b){super.resize(b),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var b;this._clearCursor(),(b=this._cursorBlinkStateManager.value)===null||b===void 0||b.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var b;(b=this._cursorBlinkStateManager.value)===null||b===void 0||b.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var b;(b=this._cursorBlinkStateManager.value)===null||b===void 0||b.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new p.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var b;(b=this._cursorBlinkStateManager.value)===null||b===void 0||b.restartBlinkAnimation()}handleGridChanged(b,I){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(b){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const I=this._bufferService.buffer.ybase+this._bufferService.buffer.y,R=I-this._bufferService.buffer.ydisp;if(R<0||R>=this._bufferService.rows)return void this._clearCursor();const S=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(I).loadCell(S,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const B=this._optionsService.rawOptions.cursorStyle,U=this._optionsService.rawOptions.cursorInactiveStyle;return U&&U!=="none"&&this._cursorRenderers[U](S,R,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=R,this._state.isFocused=!1,this._state.style=B,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===S&&this._state.y===R&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](S,R,this._cell),this._ctx.restore(),this._state.x=S,this._state.y=R,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(x.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(b,I,R){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(b,I,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(b,I,R){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(b,I,R.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(R,b,I),this._ctx.restore()}_renderUnderlineCursor(b,I,R){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(b,I),this._ctx.restore()}_renderOutlineCursor(b,I,R){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(b,I,R.getWidth(),1),this._ctx.restore()}}u.CursorRenderLayer=E},574:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GridCache=void 0,u.GridCache=class{constructor(){this.cache=[]}resize(m,p){for(let O=0;O<m;O++){this.cache.length<=O&&this.cache.push([]);for(let x=this.cache[O].length;x<p;x++)this.cache[O].push(void 0);this.cache[O].length=p}this.cache.length=m}clear(){for(let m=0;m<this.cache.length;m++)for(let p=0;p<this.cache[m].length;p++)this.cache[m][p]=void 0}}},43:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LinkRenderLayer=void 0;const p=m(197),O=m(237),x=m(903);class v extends x.BaseRenderLayer{constructor(E,C,b,I,R,S,B,U,F){super(E,C,"link",b,!0,F,R,S,B,U),this.register(I.onShowLinkUnderline($=>this._handleShowLinkUnderline($))),this.register(I.onHideLinkUnderline($=>this._handleHideLinkUnderline($)))}resize(E){super.resize(E),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const E=this._state.y2-this._state.y1-1;E>0&&this._clearCells(0,this._state.y1+1,this._state.cols,E),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(E){if(E.fg===O.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:E.fg&&(0,p.is256Color)(E.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[E.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,E.y1===E.y2)this._fillBottomLineAtCells(E.x1,E.y1,E.x2-E.x1);else{this._fillBottomLineAtCells(E.x1,E.y1,E.cols-E.x1);for(let C=E.y1+1;C<E.y2;C++)this._fillBottomLineAtCells(0,C,E.cols);this._fillBottomLineAtCells(0,E.y2,E.x2)}this._state=E}_handleHideLinkUnderline(E){this._clearCurrentLink()}}u.LinkRenderLayer=v},630:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionRenderLayer=void 0;const p=m(903);class O extends p.BaseRenderLayer{constructor(v,y,E,C,b,I,R,S){super(v,y,"selection",E,!0,S,C,R,I,b),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(v){super.resize(v),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(v,y,E){super.handleSelectionChanged(v,y,E),this._redrawSelection(v,y,E)}_redrawSelection(v,y,E){if(!this._didStateChange(v,y,E,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!v||!y)return void this._clearState();const C=v[1]-this._bufferService.buffer.ydisp,b=y[1]-this._bufferService.buffer.ydisp,I=Math.max(C,0),R=Math.min(b,this._bufferService.rows-1);if(I>=this._bufferService.rows||R<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,E){const S=v[0],B=y[0]-S,U=R-I+1;this._fillCells(S,I,B,U)}else{const S=C===I?v[0]:0,B=I===b?y[0]:this._bufferService.cols;this._fillCells(S,I,B-S,1);const U=Math.max(R-I-1,0);if(this._fillCells(0,I+1,this._bufferService.cols,U),I!==R){const F=b===R?y[0]:this._bufferService.cols;this._fillCells(0,R,F,1)}}this._state.start=[v[0],v[1]],this._state.end=[y[0],y[1]],this._state.columnSelectMode=E,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(v,y,E,C){return!this._areCoordinatesEqual(v,this._state.start)||!this._areCoordinatesEqual(y,this._state.end)||E!==this._state.columnSelectMode||C!==this._state.ydisp}_areCoordinatesEqual(v,y){return!(!v||!y)&&v[0]===y[0]&&v[1]===y[1]}}u.SelectionRenderLayer=O},744:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextRenderLayer=void 0;const p=m(577),O=m(147),x=m(782),v=m(855),y=m(903),E=m(574);class C extends y.BaseRenderLayer{constructor(I,R,S,B,U,F,$,A,M,G){super(I,R,"text",S,B,G,U,F,A,M),this._characterJoinerService=$,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new x.CellData,this._state=new E.GridCache,this.register(F.onSpecificOptionChange("allowTransparency",T=>this._setTransparency(T)))}resize(I){super.resize(I);const R=this._getFont(!1,!1);this._characterWidth===I.device.char.width&&this._characterFont===R||(this._characterWidth=I.device.char.width,this._characterFont=R,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(I,R,S){for(let B=I;B<=R;B++){const U=B+this._bufferService.buffer.ydisp,F=this._bufferService.buffer.lines.get(U),$=this._characterJoinerService.getJoinedCharacters(U);for(let A=0;A<this._bufferService.cols;A++){F.loadCell(A,this._workCell);let M=this._workCell,G=!1,T=A;if(M.getWidth()!==0){if($.length>0&&A===$[0][0]){G=!0;const P=$.shift();M=new p.JoinedCellData(this._workCell,F.translateToString(!0,P[0],P[1]),P[1]-P[0]),T=P[1]-1}!G&&this._isOverlapping(M)&&T<F.length-1&&F.getCodePoint(T+1)===v.NULL_CELL_CODE&&(M.content&=-12582913,M.content|=8388608),S(M,A,B),A=T}}}}_drawBackground(I,R){const S=this._ctx,B=this._bufferService.cols;let U=0,F=0,$=null;S.save(),this._forEachCell(I,R,(A,M,G)=>{let T=null;A.isInverse()?T=A.isFgDefault()?this._themeService.colors.foreground.css:A.isFgRGB()?`rgb(${O.AttributeData.toColorRGB(A.getFgColor()).join(",")})`:this._themeService.colors.ansi[A.getFgColor()].css:A.isBgRGB()?T=`rgb(${O.AttributeData.toColorRGB(A.getBgColor()).join(",")})`:A.isBgPalette()&&(T=this._themeService.colors.ansi[A.getBgColor()].css);let P=!1;this._decorationService.forEachDecorationAtCell(M,this._bufferService.buffer.ydisp+G,void 0,X=>{X.options.layer!=="top"&&P||(X.backgroundColorRGB&&(T=X.backgroundColorRGB.css),P=X.options.layer==="top")}),$===null&&(U=M,F=G),G!==F?(S.fillStyle=$||"",this._fillCells(U,F,B-U,1),U=M,F=G):$!==T&&(S.fillStyle=$||"",this._fillCells(U,F,M-U,1),U=M,F=G),$=T}),$!==null&&(S.fillStyle=$,this._fillCells(U,F,B-U,1)),S.restore()}_drawForeground(I,R){this._forEachCell(I,R,(S,B,U)=>this._drawChars(S,B,U))}handleGridChanged(I,R){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,I,this._bufferService.cols,R-I+1),this._drawBackground(I,R),this._drawForeground(I,R))}_isOverlapping(I){if(I.getWidth()!==1||I.getCode()<256)return!1;const R=I.getChars();if(this._characterOverlapCache.hasOwnProperty(R))return this._characterOverlapCache[R];this._ctx.save(),this._ctx.font=this._characterFont;const S=Math.floor(this._ctx.measureText(R).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[R]=S,S}}u.TextRenderLayer=C},274:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellColorResolver=void 0;let m,p=0,O=0,x=!1,v=!1,y=!1;u.CellColorResolver=class{constructor(E,C,b,I,R){this._terminal=E,this._selectionRenderModel=C,this._decorationService=b,this._coreBrowserService=I,this._themeService=R,this.result={fg:0,bg:0,ext:0}}resolve(E,C,b){this.result.bg=E.bg,this.result.fg=E.fg,this.result.ext=268435456&E.bg?E.extended.ext:0,O=0,p=0,v=!1,x=!1,y=!1,m=this._themeService.colors,this._decorationService.forEachDecorationAtCell(C,b,"bottom",I=>{I.backgroundColorRGB&&(O=I.backgroundColorRGB.rgba>>8&16777215,v=!0),I.foregroundColorRGB&&(p=I.foregroundColorRGB.rgba>>8&16777215,x=!0)}),y=this._selectionRenderModel.isCellSelected(this._terminal,C,b),y&&(O=(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,m.selectionForeground&&(p=m.selectionForeground.rgba>>8&16777215,x=!0)),this._decorationService.forEachDecorationAtCell(C,b,"top",I=>{I.backgroundColorRGB&&(O=I.backgroundColorRGB.rgba>>8&16777215,v=!0),I.foregroundColorRGB&&(p=I.foregroundColorRGB.rgba>>8&16777215,x=!0)}),v&&(O=y?-16777216&E.bg&-134217729|O|50331648:-16777216&E.bg|O|50331648),x&&(p=-16777216&E.fg&-67108865|p|50331648),67108864&this.result.fg&&(v&&!x&&(p=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&m.background.rgba>>8|50331648,x=!0),!v&&x&&(O=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&m.foreground.rgba>>8|50331648,v=!0)),m=void 0,this.result.bg=v?O:this.result.bg,this.result.fg=x?p:this.result.fg}}},627:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.removeTerminalFromCache=u.acquireTextureAtlas=void 0;const p=m(509),O=m(197),x=[];u.acquireTextureAtlas=function(v,y,E,C,b,I,R,S){const B=(0,O.generateConfig)(C,b,I,R,y,E,S);for(let $=0;$<x.length;$++){const A=x[$],M=A.ownedBy.indexOf(v);if(M>=0){if((0,O.configEquals)(A.config,B))return A.atlas;A.ownedBy.length===1?(A.atlas.dispose(),x.splice($,1)):A.ownedBy.splice(M,1);break}}for(let $=0;$<x.length;$++){const A=x[$];if((0,O.configEquals)(A.config,B))return A.ownedBy.push(v),A.atlas}const U=v._core,F={atlas:new p.TextureAtlas(document,B,U.unicodeService),config:B,ownedBy:[v]};return x.push(F),F.atlas},u.removeTerminalFromCache=function(v){for(let y=0;y<x.length;y++){const E=x[y].ownedBy.indexOf(v);if(E!==-1){x[y].ownedBy.length===1?(x[y].atlas.dispose(),x.splice(y,1)):x[y].ownedBy.splice(E,1);break}}}},197:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.is256Color=u.configEquals=u.generateConfig=void 0;const p=m(160);u.generateConfig=function(O,x,v,y,E,C,b){const I={foreground:C.foreground,background:C.background,cursor:p.NULL_COLOR,cursorAccent:p.NULL_COLOR,selectionForeground:p.NULL_COLOR,selectionBackgroundTransparent:p.NULL_COLOR,selectionBackgroundOpaque:p.NULL_COLOR,selectionInactiveBackgroundTransparent:p.NULL_COLOR,selectionInactiveBackgroundOpaque:p.NULL_COLOR,ansi:C.ansi.slice(),contrastCache:C.contrastCache,halfContrastCache:C.halfContrastCache};return{customGlyphs:E.customGlyphs,devicePixelRatio:b,letterSpacing:E.letterSpacing,lineHeight:E.lineHeight,deviceCellWidth:O,deviceCellHeight:x,deviceCharWidth:v,deviceCharHeight:y,fontFamily:E.fontFamily,fontSize:E.fontSize,fontWeight:E.fontWeight,fontWeightBold:E.fontWeightBold,allowTransparency:E.allowTransparency,drawBoldTextInBrightColors:E.drawBoldTextInBrightColors,minimumContrastRatio:E.minimumContrastRatio,colors:I}},u.configEquals=function(O,x){for(let v=0;v<O.colors.ansi.length;v++)if(O.colors.ansi[v].rgba!==x.colors.ansi[v].rgba)return!1;return O.devicePixelRatio===x.devicePixelRatio&&O.customGlyphs===x.customGlyphs&&O.lineHeight===x.lineHeight&&O.letterSpacing===x.letterSpacing&&O.fontFamily===x.fontFamily&&O.fontSize===x.fontSize&&O.fontWeight===x.fontWeight&&O.fontWeightBold===x.fontWeightBold&&O.allowTransparency===x.allowTransparency&&O.deviceCharWidth===x.deviceCharWidth&&O.deviceCharHeight===x.deviceCharHeight&&O.drawBoldTextInBrightColors===x.drawBoldTextInBrightColors&&O.minimumContrastRatio===x.minimumContrastRatio&&O.colors.foreground.rgba===x.colors.foreground.rgba&&O.colors.background.rgba===x.colors.background.rgba},u.is256Color=function(O){return(50331648&O)==16777216||(50331648&O)==33554432}},237:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT_BASELINE=u.DIM_OPACITY=u.INVERTED_DEFAULT_COLOR=void 0;const p=m(399);u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},457:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CursorBlinkStateManager=void 0,u.CursorBlinkStateManager=class{constructor(m,p){this._renderCallback=m,this._coreBrowserService=p,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(m=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const p=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,p>0)return void this._restartInterval(p)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const p=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(p)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},m)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.tryDrawCustomChar=u.powerlineDefinitions=u.boxDrawingDefinitions=u.blockElementDefinitions=void 0;const p=m(374);u.blockElementDefinitions={"â–€":[{x:0,y:0,w:8,h:4}],"â–":[{x:0,y:7,w:8,h:1}],"â–‚":[{x:0,y:6,w:8,h:2}],"â–ƒ":[{x:0,y:5,w:8,h:3}],"â–„":[{x:0,y:4,w:8,h:4}],"â–…":[{x:0,y:3,w:8,h:5}],"â–†":[{x:0,y:2,w:8,h:6}],"â–‡":[{x:0,y:1,w:8,h:7}],"â–ˆ":[{x:0,y:0,w:8,h:8}],"â–‰":[{x:0,y:0,w:7,h:8}],"â–Š":[{x:0,y:0,w:6,h:8}],"â–‹":[{x:0,y:0,w:5,h:8}],"â–Œ":[{x:0,y:0,w:4,h:8}],"â–":[{x:0,y:0,w:3,h:8}],"â–Ž":[{x:0,y:0,w:2,h:8}],"â–":[{x:0,y:0,w:1,h:8}],"â–":[{x:4,y:0,w:4,h:8}],"â–”":[{x:0,y:0,w:8,h:1}],"â–•":[{x:7,y:0,w:1,h:8}],"â––":[{x:0,y:4,w:4,h:4}],"â–—":[{x:4,y:4,w:4,h:4}],"â–˜":[{x:0,y:0,w:4,h:4}],"â–™":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â–š":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â–›":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"â–œ":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â–":[{x:4,y:0,w:4,h:4}],"â–ž":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â–Ÿ":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ðŸ­°":[{x:1,y:0,w:1,h:8}],"ðŸ­±":[{x:2,y:0,w:1,h:8}],"ðŸ­²":[{x:3,y:0,w:1,h:8}],"ðŸ­³":[{x:4,y:0,w:1,h:8}],"ðŸ­´":[{x:5,y:0,w:1,h:8}],"ðŸ­µ":[{x:6,y:0,w:1,h:8}],"ðŸ­¶":[{x:0,y:1,w:8,h:1}],"ðŸ­·":[{x:0,y:2,w:8,h:1}],"ðŸ­¸":[{x:0,y:3,w:8,h:1}],"ðŸ­¹":[{x:0,y:4,w:8,h:1}],"ðŸ­º":[{x:0,y:5,w:8,h:1}],"ðŸ­»":[{x:0,y:6,w:8,h:1}],"ðŸ­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ®€":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®‚":[{x:0,y:0,w:8,h:2}],"ðŸ®ƒ":[{x:0,y:0,w:8,h:3}],"ðŸ®„":[{x:0,y:0,w:8,h:5}],"ðŸ®…":[{x:0,y:0,w:8,h:6}],"ðŸ®†":[{x:0,y:0,w:8,h:7}],"ðŸ®‡":[{x:6,y:0,w:2,h:8}],"ðŸ®ˆ":[{x:5,y:0,w:3,h:8}],"ðŸ®‰":[{x:3,y:0,w:5,h:8}],"ðŸ®Š":[{x:2,y:0,w:6,h:8}],"ðŸ®‹":[{x:1,y:0,w:7,h:8}],"ðŸ®•":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ðŸ®–":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ðŸ®—":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const O={"â–‘":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â–’":[[1,0],[0,0],[0,1],[0,0]],"â–“":[[0,1],[1,1],[1,0],[1,1]]};u.boxDrawingDefinitions={"â”€":{1:"M0,.5 L1,.5"},"â”":{3:"M0,.5 L1,.5"},"â”‚":{1:"M.5,0 L.5,1"},"â”ƒ":{3:"M.5,0 L.5,1"},"â”Œ":{1:"M0.5,1 L.5,.5 L1,.5"},"â”":{3:"M0.5,1 L.5,.5 L1,.5"},"â”":{1:"M0,.5 L.5,.5 L.5,1"},"â”“":{3:"M0,.5 L.5,.5 L.5,1"},"â””":{1:"M.5,0 L.5,.5 L1,.5"},"â”—":{3:"M.5,0 L.5,.5 L1,.5"},"â”˜":{1:"M.5,0 L.5,.5 L0,.5"},"â”›":{3:"M.5,0 L.5,.5 L0,.5"},"â”œ":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”£":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”¤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”«":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”¬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”³":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”´":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”»":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”¼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•‹":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•´":{1:"M.5,.5 L0,.5"},"â•¸":{3:"M.5,.5 L0,.5"},"â•µ":{1:"M.5,.5 L.5,0"},"â•¹":{3:"M.5,.5 L.5,0"},"â•¶":{1:"M.5,.5 L1,.5"},"â•º":{3:"M.5,.5 L1,.5"},"â•·":{1:"M.5,.5 L.5,1"},"â•»":{3:"M.5,.5 L.5,1"},"â•":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•‘":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•’":{1:(C,b)=>`M.5,1 L.5,${.5-b} L1,${.5-b} M.5,${.5+b} L1,${.5+b}`},"â•“":{1:(C,b)=>`M${.5-C},1 L${.5-C},.5 L1,.5 M${.5+C},.5 L${.5+C},1`},"â•”":{1:(C,b)=>`M1,${.5-b} L${.5-C},${.5-b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1`},"â••":{1:(C,b)=>`M0,${.5-b} L.5,${.5-b} L.5,1 M0,${.5+b} L.5,${.5+b}`},"â•–":{1:(C,b)=>`M${.5+C},1 L${.5+C},.5 L0,.5 M${.5-C},.5 L${.5-C},1`},"â•—":{1:(C,b)=>`M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M0,${.5-b} L${.5+C},${.5-b} L${.5+C},1`},"â•˜":{1:(C,b)=>`M.5,0 L.5,${.5+b} L1,${.5+b} M.5,${.5-b} L1,${.5-b}`},"â•™":{1:(C,b)=>`M1,.5 L${.5-C},.5 L${.5-C},0 M${.5+C},.5 L${.5+C},0`},"â•š":{1:(C,b)=>`M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0 M1,${.5+b} L${.5-C},${.5+b} L${.5-C},0`},"â•›":{1:(C,b)=>`M0,${.5+b} L.5,${.5+b} L.5,0 M0,${.5-b} L.5,${.5-b}`},"â•œ":{1:(C,b)=>`M0,.5 L${.5+C},.5 L${.5+C},0 M${.5-C},.5 L${.5-C},0`},"â•":{1:(C,b)=>`M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M0,${.5+b} L${.5+C},${.5+b} L${.5+C},0`},"â•ž":{1:(C,b)=>`M.5,0 L.5,1 M.5,${.5-b} L1,${.5-b} M.5,${.5+b} L1,${.5+b}`},"â•Ÿ":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1 M${.5+C},.5 L1,.5`},"â• ":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•¡":{1:(C,b)=>`M.5,0 L.5,1 M0,${.5-b} L.5,${.5-b} M0,${.5+b} L.5,${.5+b}`},"â•¢":{1:(C,b)=>`M0,.5 L${.5-C},.5 M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•£":{1:(C,b)=>`M${.5+C},0 L${.5+C},1 M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0`},"â•¤":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b} M.5,${.5+b} L.5,1`},"â•¥":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},.5 L${.5-C},1 M${.5+C},.5 L${.5+C},1`},"â•¦":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1`},"â•§":{1:(C,b)=>`M.5,0 L.5,${.5-b} M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•¨":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},.5 L${.5-C},0 M${.5+C},.5 L${.5+C},0`},"â•©":{1:(C,b)=>`M0,${.5+b} L1,${.5+b} M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•ª":{1:(C,b)=>`M.5,0 L.5,1 M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•«":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•¬":{1:(C,b)=>`M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1 M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•±":{1:"M1,0 L0,1"},"â•²":{1:"M0,0 L1,1"},"â•³":{1:"M1,0 L0,1 M0,0 L1,1"},"â•¼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â•½":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"â•¾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â•¿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”Ž":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”‘":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"â”’":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”•":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"â”–":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”™":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"â”š":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"â”ž":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”Ÿ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â” ":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"â”¡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â”¢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"â”¥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"â”¦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”§":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”¨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"â”©":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"â”ª":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"â”­":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”®":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”¯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"â”°":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”±":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â”²":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â”µ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”·":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"â”¸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”¹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â”º":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"â”½":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”¿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"â•€":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â•":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â•‚":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"â•ƒ":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â•„":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â•…":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â•†":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â•‡":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"â•ˆ":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â•‰":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â•Š":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â•Œ":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â•":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â”„":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”…":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”ˆ":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â”‰":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â•Ž":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â•":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â”†":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”‡":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”Š":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â”‹":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â•­":{1:(C,b)=>`M.5,1 L.5,${.5+b/.15*.5} C.5,${.5+b/.15*.5},.5,.5,1,.5`},"â•®":{1:(C,b)=>`M.5,1 L.5,${.5+b/.15*.5} C.5,${.5+b/.15*.5},.5,.5,0,.5`},"â•¯":{1:(C,b)=>`M.5,0 L.5,${.5-b/.15*.5} C.5,${.5-b/.15*.5},.5,.5,0,.5`},"â•°":{1:(C,b)=>`M.5,0 L.5,${.5-b/.15*.5} C.5,${.5-b/.15*.5},.5,.5,1,.5`}},u.powerlineDefinitions={"î‚°":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"î‚±":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"î‚²":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"î‚³":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"î‚´":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"î‚µ":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"î‚¶":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"î‚·":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"î‚¸":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"î‚¹":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚º":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"î‚¼":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"î‚½":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚¾":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},u.powerlineDefinitions["î‚»"]=u.powerlineDefinitions["î‚½"],u.powerlineDefinitions["î‚¿"]=u.powerlineDefinitions["î‚¹"],u.tryDrawCustomChar=function(C,b,I,R,S,B,U,F){const $=u.blockElementDefinitions[b];if($)return function(T,P,X,q,W,j){for(let H=0;H<P.length;H++){const re=P[H],K=W/8,J=j/8;T.fillRect(X+re.x*K,q+re.y*J,re.w*K,re.h*J)}}(C,$,I,R,S,B),!0;const A=O[b];if(A)return function(T,P,X,q,W,j){let H=x.get(P);H||(H=new Map,x.set(P,H));const re=T.fillStyle;if(typeof re!="string")throw new Error(`Unexpected fillStyle type "${re}"`);let K=H.get(re);if(!K){const J=P[0].length,le=P.length,se=document.createElement("canvas");se.width=J,se.height=le;const Le=(0,p.throwIfFalsy)(se.getContext("2d")),xe=new ImageData(J,le);let Me,fe,je,ae;if(re.startsWith("#"))Me=parseInt(re.slice(1,3),16),fe=parseInt(re.slice(3,5),16),je=parseInt(re.slice(5,7),16),ae=re.length>7&&parseInt(re.slice(7,9),16)||1;else{if(!re.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${re}" when drawing pattern glyph`);[Me,fe,je,ae]=re.substring(5,re.length-1).split(",").map(oe=>parseFloat(oe))}for(let oe=0;oe<le;oe++)for(let ce=0;ce<J;ce++)xe.data[4*(oe*J+ce)]=Me,xe.data[4*(oe*J+ce)+1]=fe,xe.data[4*(oe*J+ce)+2]=je,xe.data[4*(oe*J+ce)+3]=P[oe][ce]*(255*ae);Le.putImageData(xe,0,0),K=(0,p.throwIfFalsy)(T.createPattern(se,null)),H.set(re,K)}T.fillStyle=K,T.fillRect(X,q,W,j)}(C,A,I,R,S,B),!0;const M=u.boxDrawingDefinitions[b];if(M)return function(T,P,X,q,W,j,H){T.strokeStyle=T.fillStyle;for(const[re,K]of Object.entries(P)){let J;T.beginPath(),T.lineWidth=H*Number.parseInt(re),J=typeof K=="function"?K(.15,.15/j*W):K;for(const le of J.split(" ")){const se=le[0],Le=y[se];if(!Le){console.error(`Could not find drawing instructions for "${se}"`);continue}const xe=le.substring(1).split(",");xe[0]&&xe[1]&&Le(T,E(xe,W,j,X,q,!0,H))}T.stroke(),T.closePath()}}(C,M,I,R,S,B,F),!0;const G=u.powerlineDefinitions[b];return!!G&&(function(T,P,X,q,W,j,H,re){var K,J;const le=new Path2D;le.rect(X,q,W,j),T.clip(le),T.beginPath();const se=H/12;T.lineWidth=re*se;for(const Le of P.d.split(" ")){const xe=Le[0],Me=y[xe];if(!Me){console.error(`Could not find drawing instructions for "${xe}"`);continue}const fe=Le.substring(1).split(",");fe[0]&&fe[1]&&Me(T,E(fe,W,j,X,q,!1,re,((K=P.leftPadding)!==null&&K!==void 0?K:0)*(se/2),((J=P.rightPadding)!==null&&J!==void 0?J:0)*(se/2)))}P.type===1?(T.strokeStyle=T.fillStyle,T.stroke()):T.fill(),T.closePath()}(C,G,I,R,S,B,U,F),!0)};const x=new Map;function v(C,b,I=0){return Math.max(Math.min(C,b),I)}const y={C:(C,b)=>C.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]),L:(C,b)=>C.lineTo(b[0],b[1]),M:(C,b)=>C.moveTo(b[0],b[1])};function E(C,b,I,R,S,B,U,F=0,$=0){const A=C.map(M=>parseFloat(M)||parseInt(M));if(A.length<2)throw new Error("Too few arguments for instruction");for(let M=0;M<A.length;M+=2)A[M]*=b-F*U-$*U,B&&A[M]!==0&&(A[M]=v(Math.round(A[M]+.5)-.5,b,0)),A[M]+=R+F*U;for(let M=1;M<A.length;M+=2)A[M]*=I,B&&A[M]!==0&&(A[M]=v(Math.round(A[M]+.5)-.5,I,0)),A[M]+=S;return A}},56:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.observeDevicePixelDimensions=void 0;const p=m(859);u.observeDevicePixelDimensions=function(O,x,v){let y=new x.ResizeObserver(E=>{const C=E.find(R=>R.target===O);if(!C)return;if(!("devicePixelContentBoxSize"in C))return y?.disconnect(),void(y=void 0);const b=C.devicePixelContentBoxSize[0].inlineSize,I=C.devicePixelContentBoxSize[0].blockSize;b>0&&I>0&&v(b,I)});try{y.observe(O,{box:["device-pixel-content-box"]})}catch{y.disconnect(),y=void 0}return(0,p.toDisposable)(()=>y?.disconnect())}},374:(g,u)=>{function m(p){return 57508<=p&&p<=57558}Object.defineProperty(u,"__esModule",{value:!0}),u.createRenderDimensions=u.excludeFromContrastRatioDemands=u.isRestrictedPowerlineGlyph=u.isPowerlineGlyph=u.throwIfFalsy=void 0,u.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},u.isPowerlineGlyph=m,u.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},u.excludeFromContrastRatioDemands=function(p){return m(p)||function(O){return 9472<=O&&O<=9631}(p)},u.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createSelectionRenderModel=void 0;class m{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(O,x,v,y=!1){if(this.selectionStart=x,this.selectionEnd=v,!x||!v||x[0]===v[0]&&x[1]===v[1])return void this.clear();const E=x[1]-O.buffer.active.viewportY,C=v[1]-O.buffer.active.viewportY,b=Math.max(E,0),I=Math.min(C,O.rows-1);b>=O.rows||I<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=E,this.viewportEndRow=C,this.viewportCappedStartRow=b,this.viewportCappedEndRow=I,this.startCol=x[0],this.endCol=v[0])}isCellSelected(O,x,v){return!!this.hasSelection&&(v-=O.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?x>=this.startCol&&v>=this.viewportCappedStartRow&&x<this.endCol&&v<=this.viewportCappedEndRow:x<this.startCol&&v>=this.viewportCappedStartRow&&x>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&x>=this.startCol&&x<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&x<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&x>=this.startCol)}}u.createSelectionRenderModel=function(){return new m}},509:function(g,u,m){var p=this&&this.__decorate||function(G,T,P,X){var q,W=arguments.length,j=W<3?T:X===null?X=Object.getOwnPropertyDescriptor(T,P):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(G,T,P,X);else for(var H=G.length-1;H>=0;H--)(q=G[H])&&(j=(W<3?q(j):W>3?q(T,P,j):q(T,P))||j);return W>3&&j&&Object.defineProperty(T,P,j),j};Object.defineProperty(u,"__esModule",{value:!0}),u.TextureAtlas=void 0;const O=m(237),x=m(860),v=m(374),y=m(160),E=m(345),C=m(485),b=m(385),I=m(147),R=m(855),S=m(776),B={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let U;class F{get pages(){return this._pages}constructor(T,P,X){this._document=T,this._config=P,this._unicodeService=X,this._didWarmUp=!1,this._cacheMap=new C.FourKeyMap,this._cacheMapCombined=new C.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new I.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new E.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new E.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=M(T,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const T of this.pages)T.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const T=new b.IdleTaskQueue;for(let P=33;P<126;P++)T.enqueue(()=>{if(!this._cacheMap.get(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT)){const X=this._drawToCache(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT);this._cacheMap.set(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT,X)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const T of this._pages)T.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(F.maxAtlasPages&&this._pages.length>=Math.max(4,F.maxAtlasPages)){const P=this._pages.filter(K=>2*K.canvas.width<=(F.maxTextureSize||4096)).sort((K,J)=>J.canvas.width!==K.canvas.width?J.canvas.width-K.canvas.width:J.percentageUsed-K.percentageUsed);let X=-1,q=0;for(let K=0;K<P.length;K++)if(P[K].canvas.width!==q)X=K,q=P[K].canvas.width;else if(K-X==3)break;const W=P.slice(X,X+4),j=W.map(K=>K.glyphs[0].texturePage).sort((K,J)=>K>J?1:-1),H=this.pages.length-W.length,re=this._mergePages(W,H);re.version++;for(let K=j.length-1;K>=0;K--)this._deletePage(j[K]);this.pages.push(re),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(re.canvas)}const T=new $(this._document,this._textureSize);return this._pages.push(T),this._activePages.push(T),this._onAddTextureAtlasCanvas.fire(T.canvas),T}_mergePages(T,P){const X=2*T[0].canvas.width,q=new $(this._document,X,T);for(const[W,j]of T.entries()){const H=W*j.canvas.width%X,re=Math.floor(W/2)*j.canvas.height;q.ctx.drawImage(j.canvas,H,re);for(const J of j.glyphs)J.texturePage=P,J.sizeClipSpace.x=J.size.x/X,J.sizeClipSpace.y=J.size.y/X,J.texturePosition.x+=H,J.texturePosition.y+=re,J.texturePositionClipSpace.x=J.texturePosition.x/X,J.texturePositionClipSpace.y=J.texturePosition.y/X;this._onRemoveTextureAtlasCanvas.fire(j.canvas);const K=this._activePages.indexOf(j);K!==-1&&this._activePages.splice(K,1)}return q}_deletePage(T){this._pages.splice(T,1);for(let P=T;P<this._pages.length;P++){const X=this._pages[P];for(const q of X.glyphs)q.texturePage--;X.version++}}getRasterizedGlyphCombinedChar(T,P,X,q,W){return this._getFromCacheMap(this._cacheMapCombined,T,P,X,q,W)}getRasterizedGlyph(T,P,X,q,W){return this._getFromCacheMap(this._cacheMap,T,P,X,q,W)}_getFromCacheMap(T,P,X,q,W,j=!1){return U=T.get(P,X,q,W),U||(U=this._drawToCache(P,X,q,W,j),T.set(P,X,q,W,U)),U}_getColorFromAnsiIndex(T){if(T>=this._config.colors.ansi.length)throw new Error("No color found for idx "+T);return this._config.colors.ansi[T]}_getBackgroundColor(T,P,X,q){if(this._config.allowTransparency)return y.NULL_COLOR;let W;switch(T){case 16777216:case 33554432:W=this._getColorFromAnsiIndex(P);break;case 50331648:const j=I.AttributeData.toColorRGB(P);W=y.rgba.toColor(j[0],j[1],j[2]);break;default:W=X?y.color.opaque(this._config.colors.foreground):this._config.colors.background}return W}_getForegroundColor(T,P,X,q,W,j,H,re,K,J){const le=this._getMinimumContrastColor(T,P,X,q,W,j,!1,K,re,J);if(le)return le;let se;switch(W){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&K&&j<8&&(j+=8),se=this._getColorFromAnsiIndex(j);break;case 50331648:const Le=I.AttributeData.toColorRGB(j);se=y.rgba.toColor(Le[0],Le[1],Le[2]);break;default:se=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(se=y.color.opaque(se)),re&&(se=y.color.multiplyOpacity(se,O.DIM_OPACITY)),se}_resolveBackgroundRgba(T,P,X){switch(T){case 16777216:case 33554432:return this._getColorFromAnsiIndex(P).rgba;case 50331648:return P<<8;default:return X?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(T,P,X,q){switch(T){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&q&&P<8&&(P+=8),this._getColorFromAnsiIndex(P).rgba;case 50331648:return P<<8;default:return X?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(T,P,X,q,W,j,H,re,K,J){if(this._config.minimumContrastRatio===1||J)return;const le=this._getContrastCache(K),se=le.getColor(T,q);if(se!==void 0)return se||void 0;const Le=this._resolveBackgroundRgba(P,X,H),xe=this._resolveForegroundRgba(W,j,H,re),Me=y.rgba.ensureContrastRatio(Le,xe,this._config.minimumContrastRatio/(K?2:1));if(!Me)return void le.setColor(T,q,null);const fe=y.rgba.toColor(Me>>24&255,Me>>16&255,Me>>8&255);return le.setColor(T,q,fe),fe}_getContrastCache(T){return T?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(T,P,X,q,W=!1){const j=typeof T=="number"?String.fromCharCode(T):T,H=Math.min(this._config.deviceCellWidth*Math.max(j.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const re=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<re&&(this._tmpCanvas.height=re),this._tmpCtx.save(),this._workAttributeData.fg=X,this._workAttributeData.bg=P,this._workAttributeData.extended.ext=q,this._workAttributeData.isInvisible())return B;const K=!!this._workAttributeData.isBold(),J=!!this._workAttributeData.isInverse(),le=!!this._workAttributeData.isDim(),se=!!this._workAttributeData.isItalic(),Le=!!this._workAttributeData.isUnderline(),xe=!!this._workAttributeData.isStrikethrough(),Me=!!this._workAttributeData.isOverline();let fe=this._workAttributeData.getFgColor(),je=this._workAttributeData.getFgColorMode(),ae=this._workAttributeData.getBgColor(),oe=this._workAttributeData.getBgColorMode();if(J){const ge=fe;fe=ae,ae=ge;const ve=je;je=oe,oe=ve}const ce=this._getBackgroundColor(oe,ae,J,le);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ce.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Ce=K?this._config.fontWeightBold:this._config.fontWeight,He=se?"italic":"";this._tmpCtx.font=`${He} ${Ce} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=O.TEXT_BASELINE;const Te=j.length===1&&(0,v.isPowerlineGlyph)(j.charCodeAt(0)),it=j.length===1&&(0,v.isRestrictedPowerlineGlyph)(j.charCodeAt(0)),Ze=this._getForegroundColor(P,oe,ae,X,je,fe,J,le,K,(0,v.excludeFromContrastRatioDemands)(j.charCodeAt(0)));this._tmpCtx.fillStyle=Ze.css;const Se=it?0:4;let Ge=!1;this._config.customGlyphs!==!1&&(Ge=(0,x.tryDrawCustomChar)(this._tmpCtx,j,Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Ue,Fe=!Te;if(Ue=typeof T=="number"?this._unicodeService.wcwidth(T):this._unicodeService.getStringCellWidth(T),Le){this._tmpCtx.save();const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ve=ge%2==1?.5:0;if(this._tmpCtx.lineWidth=ge,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Fe=!1,this._tmpCtx.strokeStyle=`rgb(${I.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Fe=!1;let at=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&at<8&&(at+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(at).css}this._tmpCtx.beginPath();const nt=Se,$e=Math.ceil(Se+this._config.deviceCharHeight)-ve-(W?2*ge:0),ht=$e+ge,qt=$e+2*ge;for(let at=0;at<Ue;at++){this._tmpCtx.save();const Ke=nt+at*this._config.deviceCellWidth,We=nt+(at+1)*this._config.deviceCellWidth,_e=Ke+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e),this._tmpCtx.moveTo(Ke,qt),this._tmpCtx.lineTo(We,qt);break;case 3:const ot=ge<=1?qt:Math.ceil(Se+this._config.deviceCharHeight-ge/2)-ve,Ve=ge<=1?$e:Math.ceil(Se+this._config.deviceCharHeight+ge/2)-ve,ct=new Path2D;ct.rect(Ke,$e,this._config.deviceCellWidth,qt-$e),this._tmpCtx.clip(ct),this._tmpCtx.moveTo(Ke-this._config.deviceCellWidth/2,ht),this._tmpCtx.bezierCurveTo(Ke-this._config.deviceCellWidth/2,Ve,Ke,Ve,Ke,ht),this._tmpCtx.bezierCurveTo(Ke,ot,_e,ot,_e,ht),this._tmpCtx.bezierCurveTo(_e,Ve,We,Ve,We,ht),this._tmpCtx.bezierCurveTo(We,ot,We+this._config.deviceCellWidth/2,ot,We+this._config.deviceCellWidth/2,ht);break;case 4:this._tmpCtx.setLineDash([Math.round(ge),Math.round(ge)]),this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e);break;default:this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Ge&&this._config.fontSize>=12&&!this._config.allowTransparency&&j!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const at=this._tmpCtx.measureText(j);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in at&&at.actualBoundingBoxDescent>0){this._tmpCtx.save();const Ke=new Path2D;Ke.rect(nt,$e-Math.ceil(ge/2),this._config.deviceCellWidth*Ue,qt-$e+Math.ceil(ge/2)),this._tmpCtx.clip(Ke),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ce.css,this._tmpCtx.strokeText(j,Se,Se+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(Me){const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ve=ge%2==1?.5:0;this._tmpCtx.lineWidth=ge,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Se,Se+ve),this._tmpCtx.lineTo(Se+this._config.deviceCharWidth*Ue,Se+ve),this._tmpCtx.stroke()}if(Ge||this._tmpCtx.fillText(j,Se,Se+this._config.deviceCharHeight),j==="_"&&!this._config.allowTransparency){let ge=A(this._tmpCtx.getImageData(Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight),ce,Ze,Fe);if(ge)for(let ve=1;ve<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ce.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(j,Se,Se+this._config.deviceCharHeight-ve),ge=A(this._tmpCtx.getImageData(Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight),ce,Ze,Fe),ge);ve++);}if(xe){const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ve=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ge,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Se,Se+Math.floor(this._config.deviceCharHeight/2)-ve),this._tmpCtx.lineTo(Se+this._config.deviceCharWidth*Ue,Se+Math.floor(this._config.deviceCharHeight/2)-ve),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ot=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let we;if(we=this._config.allowTransparency?function(ge){for(let ve=0;ve<ge.data.length;ve+=4)if(ge.data[ve+3]>0)return!1;return!0}(Ot):A(Ot,ce,Ze,Fe),we)return B;const De=this._findGlyphBoundingBox(Ot,this._workBoundingBox,H,it,Ge,Se);let be,Oe;for(;;){if(this._activePages.length===0){const ge=this._createNewPage();be=ge,Oe=ge.currentRow,Oe.height=De.size.y;break}be=this._activePages[this._activePages.length-1],Oe=be.currentRow;for(const ge of this._activePages)De.size.y<=ge.currentRow.height&&(be=ge,Oe=ge.currentRow);for(let ge=this._activePages.length-1;ge>=0;ge--)for(const ve of this._activePages[ge].fixedRows)ve.height<=Oe.height&&De.size.y<=ve.height&&(be=this._activePages[ge],Oe=ve);if(Oe.y+De.size.y>=be.canvas.height||Oe.height>De.size.y+2){let ge=!1;if(be.currentRow.y+be.currentRow.height+De.size.y>=be.canvas.height){let ve;for(const nt of this._activePages)if(nt.currentRow.y+nt.currentRow.height+De.size.y<nt.canvas.height){ve=nt;break}if(ve)be=ve;else if(F.maxAtlasPages&&this._pages.length>=F.maxAtlasPages&&Oe.y+De.size.y<=be.canvas.height&&Oe.height>=De.size.y&&Oe.x+De.size.x<=be.canvas.width)ge=!0;else{const nt=this._createNewPage();be=nt,Oe=nt.currentRow,Oe.height=De.size.y,ge=!0}}ge||(be.currentRow.height>0&&be.fixedRows.push(be.currentRow),Oe={x:0,y:be.currentRow.y+be.currentRow.height,height:De.size.y},be.fixedRows.push(Oe),be.currentRow={x:0,y:Oe.y+Oe.height,height:0})}if(Oe.x+De.size.x<=be.canvas.width)break;Oe===be.currentRow?(Oe.x=0,Oe.y+=Oe.height,Oe.height=0):be.fixedRows.splice(be.fixedRows.indexOf(Oe),1)}return De.texturePage=this._pages.indexOf(be),De.texturePosition.x=Oe.x,De.texturePosition.y=Oe.y,De.texturePositionClipSpace.x=Oe.x/be.canvas.width,De.texturePositionClipSpace.y=Oe.y/be.canvas.height,De.sizeClipSpace.x/=be.canvas.width,De.sizeClipSpace.y/=be.canvas.height,Oe.height=Math.max(Oe.height,De.size.y),Oe.x+=De.size.x,be.ctx.putImageData(Ot,De.texturePosition.x-this._workBoundingBox.left,De.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,De.size.x,De.size.y),be.addGlyph(De),be.version++,De}_findGlyphBoundingBox(T,P,X,q,W,j){P.top=0;const H=q?this._config.deviceCellHeight:this._tmpCanvas.height,re=q?this._config.deviceCellWidth:X;let K=!1;for(let J=0;J<H;J++){for(let le=0;le<re;le++){const se=J*this._tmpCanvas.width*4+4*le+3;if(T.data[se]!==0){P.top=J,K=!0;break}}if(K)break}P.left=0,K=!1;for(let J=0;J<j+re;J++){for(let le=0;le<H;le++){const se=le*this._tmpCanvas.width*4+4*J+3;if(T.data[se]!==0){P.left=J,K=!0;break}}if(K)break}P.right=re,K=!1;for(let J=j+re-1;J>=j;J--){for(let le=0;le<H;le++){const se=le*this._tmpCanvas.width*4+4*J+3;if(T.data[se]!==0){P.right=J,K=!0;break}}if(K)break}P.bottom=H,K=!1;for(let J=H-1;J>=0;J--){for(let le=0;le<re;le++){const se=J*this._tmpCanvas.width*4+4*le+3;if(T.data[se]!==0){P.bottom=J,K=!0;break}}if(K)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:P.right-P.left+1,y:P.bottom-P.top+1},sizeClipSpace:{x:P.right-P.left+1,y:P.bottom-P.top+1},offset:{x:-P.left+j+(q||W?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-P.top+j+(q||W?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}u.TextureAtlas=F,p([S.traceCall],F.prototype,"_drawToCache",null);class ${get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(T){this._glyphs.push(T),this._usedPixels+=T.size.x*T.size.y}constructor(T,P,X){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],X)for(const q of X)this._glyphs.push(...q.glyphs),this._usedPixels+=q._usedPixels;this.canvas=M(T,P,P),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function A(G,T,P,X){const q=T.rgba>>>24,W=T.rgba>>>16&255,j=T.rgba>>>8&255,H=P.rgba>>>24,re=P.rgba>>>16&255,K=P.rgba>>>8&255,J=Math.floor((Math.abs(q-H)+Math.abs(W-re)+Math.abs(j-K))/12);let le=!0;for(let se=0;se<G.data.length;se+=4)G.data[se]===q&&G.data[se+1]===W&&G.data[se+2]===j||X&&Math.abs(G.data[se]-q)+Math.abs(G.data[se+1]-W)+Math.abs(G.data[se+2]-j)<J?G.data[se+3]=0:le=!1;return le}function M(G,T,P){const X=G.createElement("canvas");return X.width=T,X.height=P,X}},577:function(g,u,m){var p=this&&this.__decorate||function(I,R,S,B){var U,F=arguments.length,$=F<3?R:B===null?B=Object.getOwnPropertyDescriptor(R,S):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(I,R,S,B);else for(var A=I.length-1;A>=0;A--)(U=I[A])&&($=(F<3?U($):F>3?U(R,S,$):U(R,S))||$);return F>3&&$&&Object.defineProperty(R,S,$),$},O=this&&this.__param||function(I,R){return function(S,B){R(S,B,I)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CharacterJoinerService=u.JoinedCellData=void 0;const x=m(147),v=m(855),y=m(782),E=m(97);class C extends x.AttributeData{constructor(R,S,B){super(),this.content=0,this.combinedData="",this.fg=R.fg,this.bg=R.bg,this.combinedData=S,this._width=B}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(R){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.JoinedCellData=C;let b=u.CharacterJoinerService=class kf{constructor(R){this._bufferService=R,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(R){const S={id:this._nextCharacterJoinerId++,handler:R};return this._characterJoiners.push(S),S.id}deregister(R){for(let S=0;S<this._characterJoiners.length;S++)if(this._characterJoiners[S].id===R)return this._characterJoiners.splice(S,1),!0;return!1}getJoinedCharacters(R){if(this._characterJoiners.length===0)return[];const S=this._bufferService.buffer.lines.get(R);if(!S||S.length===0)return[];const B=[],U=S.translateToString(!0);let F=0,$=0,A=0,M=S.getFg(0),G=S.getBg(0);for(let T=0;T<S.getTrimmedLength();T++)if(S.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==M||this._workCell.bg!==G){if(T-F>1){const P=this._getJoinedRanges(U,A,$,S,F);for(let X=0;X<P.length;X++)B.push(P[X])}F=T,A=$,M=this._workCell.fg,G=this._workCell.bg}$+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-F>1){const T=this._getJoinedRanges(U,A,$,S,F);for(let P=0;P<T.length;P++)B.push(T[P])}return B}_getJoinedRanges(R,S,B,U,F){const $=R.substring(S,B);let A=[];try{A=this._characterJoiners[0].handler($)}catch(M){console.error(M)}for(let M=1;M<this._characterJoiners.length;M++)try{const G=this._characterJoiners[M].handler($);for(let T=0;T<G.length;T++)kf._mergeRanges(A,G[T])}catch(G){console.error(G)}return this._stringRangesToCellRanges(A,U,F),A}_stringRangesToCellRanges(R,S,B){let U=0,F=!1,$=0,A=R[U];if(A){for(let M=B;M<this._bufferService.cols;M++){const G=S.getWidth(M),T=S.getString(M).length||v.WHITESPACE_CELL_CHAR.length;if(G!==0){if(!F&&A[0]<=$&&(A[0]=M,F=!0),A[1]<=$){if(A[1]=M,A=R[++U],!A)break;A[0]<=$?(A[0]=M,F=!0):F=!1}$+=T}}A&&(A[1]=this._bufferService.cols)}}static _mergeRanges(R,S){let B=!1;for(let U=0;U<R.length;U++){const F=R[U];if(B){if(S[1]<=F[0])return R[U-1][1]=S[1],R;if(S[1]<=F[1])return R[U-1][1]=Math.max(S[1],F[1]),R.splice(U,1),R;R.splice(U,1),U--}else{if(S[1]<=F[0])return R.splice(U,0,S),R;if(S[1]<=F[1])return F[0]=Math.min(S[0],F[0]),R;S[0]<F[1]&&(F[0]=Math.min(S[0],F[0]),B=!0)}}return B?R[R.length-1][1]=S[1]:R.push(S),R}};u.CharacterJoinerService=b=p([O(0,E.IBufferService)],b)},160:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.contrastRatio=u.toPaddedHex=u.rgba=u.rgb=u.css=u.color=u.channels=u.NULL_COLOR=void 0;const p=m(399);let O=0,x=0,v=0,y=0;var E,C,b,I,R;function S(U){const F=U.toString(16);return F.length<2?"0"+F:F}function B(U,F){return U<F?(F+.05)/(U+.05):(U+.05)/(F+.05)}u.NULL_COLOR={css:"#00000000",rgba:0},function(U){U.toCss=function(F,$,A,M){return M!==void 0?`#${S(F)}${S($)}${S(A)}${S(M)}`:`#${S(F)}${S($)}${S(A)}`},U.toRgba=function(F,$,A,M=255){return(F<<24|$<<16|A<<8|M)>>>0}}(E||(u.channels=E={})),function(U){function F($,A){return y=Math.round(255*A),[O,x,v]=R.toChannels($.rgba),{css:E.toCss(O,x,v,y),rgba:E.toRgba(O,x,v,y)}}U.blend=function($,A){if(y=(255&A.rgba)/255,y===1)return{css:A.css,rgba:A.rgba};const M=A.rgba>>24&255,G=A.rgba>>16&255,T=A.rgba>>8&255,P=$.rgba>>24&255,X=$.rgba>>16&255,q=$.rgba>>8&255;return O=P+Math.round((M-P)*y),x=X+Math.round((G-X)*y),v=q+Math.round((T-q)*y),{css:E.toCss(O,x,v),rgba:E.toRgba(O,x,v)}},U.isOpaque=function($){return(255&$.rgba)==255},U.ensureContrastRatio=function($,A,M){const G=R.ensureContrastRatio($.rgba,A.rgba,M);if(G)return R.toColor(G>>24&255,G>>16&255,G>>8&255)},U.opaque=function($){const A=(255|$.rgba)>>>0;return[O,x,v]=R.toChannels(A),{css:E.toCss(O,x,v),rgba:A}},U.opacity=F,U.multiplyOpacity=function($,A){return y=255&$.rgba,F($,y*A/255)},U.toColorRGB=function($){return[$.rgba>>24&255,$.rgba>>16&255,$.rgba>>8&255]}}(C||(u.color=C={})),function(U){let F,$;if(!p.isNode){const A=document.createElement("canvas");A.width=1,A.height=1;const M=A.getContext("2d",{willReadFrequently:!0});M&&(F=M,F.globalCompositeOperation="copy",$=F.createLinearGradient(0,0,1,1))}U.toColor=function(A){if(A.match(/#[\da-f]{3,8}/i))switch(A.length){case 4:return O=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),R.toColor(O,x,v);case 5:return O=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),y=parseInt(A.slice(4,5).repeat(2),16),R.toColor(O,x,v,y);case 7:return{css:A,rgba:(parseInt(A.slice(1),16)<<8|255)>>>0};case 9:return{css:A,rgba:parseInt(A.slice(1),16)>>>0}}const M=A.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return O=parseInt(M[1]),x=parseInt(M[2]),v=parseInt(M[3]),y=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),R.toColor(O,x,v,y);if(!F||!$)throw new Error("css.toColor: Unsupported css format");if(F.fillStyle=$,F.fillStyle=A,typeof F.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(F.fillRect(0,0,1,1),[O,x,v,y]=F.getImageData(0,0,1,1).data,y!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(O,x,v,y),css:A}}}(b||(u.css=b={})),function(U){function F($,A,M){const G=$/255,T=A/255,P=M/255;return .2126*(G<=.03928?G/12.92:Math.pow((G+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))}U.relativeLuminance=function($){return F($>>16&255,$>>8&255,255&$)},U.relativeLuminance2=F}(I||(u.rgb=I={})),function(U){function F(A,M,G){const T=A>>24&255,P=A>>16&255,X=A>>8&255;let q=M>>24&255,W=M>>16&255,j=M>>8&255,H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));for(;H<G&&(q>0||W>0||j>0);)q-=Math.max(0,Math.ceil(.1*q)),W-=Math.max(0,Math.ceil(.1*W)),j-=Math.max(0,Math.ceil(.1*j)),H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));return(q<<24|W<<16|j<<8|255)>>>0}function $(A,M,G){const T=A>>24&255,P=A>>16&255,X=A>>8&255;let q=M>>24&255,W=M>>16&255,j=M>>8&255,H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));for(;H<G&&(q<255||W<255||j<255);)q=Math.min(255,q+Math.ceil(.1*(255-q))),W=Math.min(255,W+Math.ceil(.1*(255-W))),j=Math.min(255,j+Math.ceil(.1*(255-j))),H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));return(q<<24|W<<16|j<<8|255)>>>0}U.ensureContrastRatio=function(A,M,G){const T=I.relativeLuminance(A>>8),P=I.relativeLuminance(M>>8);if(B(T,P)<G){if(P<T){const W=F(A,M,G),j=B(T,I.relativeLuminance(W>>8));if(j<G){const H=$(A,M,G);return j>B(T,I.relativeLuminance(H>>8))?W:H}return W}const X=$(A,M,G),q=B(T,I.relativeLuminance(X>>8));if(q<G){const W=F(A,M,G);return q>B(T,I.relativeLuminance(W>>8))?X:W}return X}},U.reduceLuminance=F,U.increaseLuminance=$,U.toChannels=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]},U.toColor=function(A,M,G,T){return{css:E.toCss(A,M,G,T),rgba:E.toRgba(A,M,G,T)}}}(R||(u.rgba=R={})),u.toPaddedHex=S,u.contrastRatio=B},345:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===m)return void this._listeners.splice(p,1)}}})),this._event}fire(m,p){const O=[];for(let x=0;x<this._listeners.length;x++)O.push(this._listeners[x]);for(let x=0;x<O.length;x++)O[x].call(void 0,m,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(m,p){return m(O=>p.fire(O))}},859:(g,u)=>{function m(p){for(const O of p)O.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const O=this._disposables.indexOf(p);O!==-1&&this._disposables.splice(O,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var O;this._isDisposed||p===this._value||((O=this._value)===null||O===void 0||O.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=m,u.getDisposeArrayDisposable=function(p){return{dispose:()=>m(p)}}},485:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FourKeyMap=u.TwoKeyMap=void 0;class m{constructor(){this._data={}}set(O,x,v){this._data[O]||(this._data[O]={}),this._data[O][x]=v}get(O,x){return this._data[O]?this._data[O][x]:void 0}clear(){this._data={}}}u.TwoKeyMap=m,u.FourKeyMap=class{constructor(){this._data=new m}set(p,O,x,v,y){this._data.get(p,O)||this._data.set(p,O,new m),this._data.get(p,O).set(x,v,y)}get(p,O,x,v){var y;return(y=this._data.get(p,O))===null||y===void 0?void 0:y.get(x,v)}clear(){this._data.clear()}}},399:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isChromeOS=u.isLinux=u.isWindows=u.isIphone=u.isIpad=u.isMac=u.getSafariVersion=u.isSafari=u.isLegacyEdge=u.isFirefox=u.isNode=void 0,u.isNode=typeof navigator>"u";const m=u.isNode?"node":navigator.userAgent,p=u.isNode?"node":navigator.platform;u.isFirefox=m.includes("Firefox"),u.isLegacyEdge=m.includes("Edge"),u.isSafari=/^((?!chrome|android).)*safari/i.test(m),u.getSafariVersion=function(){if(!u.isSafari)return 0;const O=m.match(/Version\/(\d+)/);return O===null||O.length<2?0:parseInt(O[1])},u.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),u.isIpad=p==="iPad",u.isIphone=p==="iPhone",u.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),u.isLinux=p.indexOf("Linux")>=0,u.isChromeOS=/\bCrOS\b/.test(m)},385:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DebouncedIdleTask=u.IdleTaskQueue=u.PriorityTaskQueue=void 0;const p=m(399);class O{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let E=0,C=0,b=y.timeRemaining(),I=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),C=Math.max(E,C),I=y.timeRemaining(),1.5*C>I)return b-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(b-E))}ms`),void this._start();b=I}this.clear()}}class x extends O{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const E=Date.now()+y;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}u.PriorityTaskQueue=x,u.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends O{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:x,u.DebouncedIdleTask=class{constructor(){this._queue=new u.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ExtendedAttrs=u.AttributeData=void 0;class m{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(x){return[x>>>16&255,x>>>8&255,255&x]}static fromColorRGB(x){return(255&x[0])<<16|(255&x[1])<<8|255&x[2]}clone(){const x=new m;return x.fg=this.fg,x.bg=this.bg,x.extended=this.extended.clone(),x}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}u.AttributeData=m;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(x){this._ext=x}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(x){this._ext&=-469762049,this._ext|=x<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(x){this._ext&=-67108864,this._ext|=67108863&x}get urlId(){return this._urlId}set urlId(x){this._urlId=x}constructor(x=0,v=0){this._ext=0,this._urlId=0,this._ext=x,this._urlId=v}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}u.ExtendedAttrs=p},782:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellData=void 0;const p=m(133),O=m(855),x=m(147);class v extends x.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new x.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const C=new v;return C.setFromCharData(E),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[O.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(E[O.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(E[O.CHAR_DATA_CHAR_INDEX].length===2){const b=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=b&&b<=56319){const I=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=I&&I<=57343?this.content=1024*(b-55296)+I-56320+65536|E[O.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[O.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=E[O.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[O.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.CellData=v},855:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WHITESPACE_CELL_CODE=u.WHITESPACE_CELL_WIDTH=u.WHITESPACE_CELL_CHAR=u.NULL_CELL_CODE=u.NULL_CELL_WIDTH=u.NULL_CELL_CHAR=u.CHAR_DATA_CODE_INDEX=u.CHAR_DATA_WIDTH_INDEX=u.CHAR_DATA_CHAR_INDEX=u.CHAR_DATA_ATTR_INDEX=u.DEFAULT_EXT=u.DEFAULT_ATTR=u.DEFAULT_COLOR=void 0,u.DEFAULT_COLOR=0,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.DEFAULT_EXT=0,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},133:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Utf8ToUtf32=u.StringToUtf32=u.utf32ToString=u.stringFromCodePoint=void 0,u.stringFromCodePoint=function(m){return m>65535?(m-=65536,String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):String.fromCharCode(m)},u.utf32ToString=function(m,p=0,O=m.length){let x="";for(let v=p;v<O;++v){let y=m[v];y>65535?(y-=65536,x+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):x+=String.fromCharCode(y)}return x},u.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(m,p){const O=m.length;if(!O)return 0;let x=0,v=0;if(this._interim){const y=m.charCodeAt(v++);56320<=y&&y<=57343?p[x++]=1024*(this._interim-55296)+y-56320+65536:(p[x++]=this._interim,p[x++]=y),this._interim=0}for(let y=v;y<O;++y){const E=m.charCodeAt(y);if(55296<=E&&E<=56319){if(++y>=O)return this._interim=E,x;const C=m.charCodeAt(y);56320<=C&&C<=57343?p[x++]=1024*(E-55296)+C-56320+65536:(p[x++]=E,p[x++]=C)}else E!==65279&&(p[x++]=E)}return x}},u.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(m,p){const O=m.length;if(!O)return 0;let x,v,y,E,C=0,b=0,I=0;if(this.interim[0]){let B=!1,U=this.interim[0];U&=(224&U)==192?31:(240&U)==224?15:7;let F,$=0;for(;(F=63&this.interim[++$])&&$<4;)U<<=6,U|=F;const A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=A-$;for(;I<M;){if(I>=O)return 0;if(F=m[I++],(192&F)!=128){I--,B=!0;break}this.interim[$++]=F,U<<=6,U|=63&F}B||(A===2?U<128?I--:p[C++]=U:A===3?U<2048||U>=55296&&U<=57343||U===65279||(p[C++]=U):U<65536||U>1114111||(p[C++]=U)),this.interim.fill(0)}const R=O-4;let S=I;for(;S<O;){for(;!(!(S<R)||128&(x=m[S])||128&(v=m[S+1])||128&(y=m[S+2])||128&(E=m[S+3]));)p[C++]=x,p[C++]=v,p[C++]=y,p[C++]=E,S+=4;if(x=m[S++],x<128)p[C++]=x;else if((224&x)==192){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(b=(31&x)<<6|63&v,b<128){S--;continue}p[C++]=b}else if((240&x)==224){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,C;if(y=m[S++],(192&y)!=128){S--;continue}if(b=(15&x)<<12|(63&v)<<6|63&y,b<2048||b>=55296&&b<=57343||b===65279)continue;p[C++]=b}else if((248&x)==240){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,C;if(y=m[S++],(192&y)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,this.interim[2]=y,C;if(E=m[S++],(192&E)!=128){S--;continue}if(b=(7&x)<<18|(63&v)<<12|(63&y)<<6|63&E,b<65536||b>1114111)continue;p[C++]=b}}return C}}},776:function(g,u,m){var p=this&&this.__decorate||function(b,I,R,S){var B,U=arguments.length,F=U<3?I:S===null?S=Object.getOwnPropertyDescriptor(I,R):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(b,I,R,S);else for(var $=b.length-1;$>=0;$--)(B=b[$])&&(F=(U<3?B(F):U>3?B(I,R,F):B(I,R))||F);return U>3&&F&&Object.defineProperty(I,R,F),F},O=this&&this.__param||function(b,I){return function(R,S){I(R,S,b)}};Object.defineProperty(u,"__esModule",{value:!0}),u.traceCall=u.setTraceLogger=u.LogService=void 0;const x=m(859),v=m(97),y={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let E,C=u.LogService=class extends x.Disposable{get logLevel(){return this._logLevel}constructor(b){super(),this._optionsService=b,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),E=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(b){for(let I=0;I<b.length;I++)typeof b[I]=="function"&&(b[I]=b[I]())}_log(b,I,R){this._evalLazyOptionalParams(R),b.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+I,...R)}trace(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.trace.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.log,b,I)}debug(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.debug.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.log,b,I)}info(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.INFO&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.info.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.info,b,I)}warn(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.WARN&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.warn.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.warn,b,I)}error(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.error.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.error,b,I)}};u.LogService=C=p([O(0,v.IOptionsService)],C),u.setTraceLogger=function(b){E=b},u.traceCall=function(b,I,R){if(typeof R.value!="function")throw new Error("not supported");const S=R.value;R.value=function(...B){if(E.logLevel!==v.LogLevelEnum.TRACE)return S.apply(this,B);E.trace(`GlyphRenderer#${S.name}(${B.map(F=>JSON.stringify(F)).join(", ")})`);const U=S.apply(this,B);return E.trace(`GlyphRenderer#${S.name} return`,U),U}}},726:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createDecorator=u.getServiceDependencies=u.serviceRegistry=void 0;const m="di$target",p="di$dependencies";u.serviceRegistry=new Map,u.getServiceDependencies=function(O){return O[p]||[]},u.createDecorator=function(O){if(u.serviceRegistry.has(O))return u.serviceRegistry.get(O);const x=function(v,y,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,b,I){b[m]===b?b[p].push({id:C,index:I}):(b[p]=[{id:C,index:I}],b[m]=b)})(x,v,E)};return x.toString=()=>O,u.serviceRegistry.set(O,x),x}},97:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.IDecorationService=u.IUnicodeService=u.IOscLinkService=u.IOptionsService=u.ILogService=u.LogLevelEnum=u.IInstantiationService=u.ICharsetService=u.ICoreService=u.ICoreMouseService=u.IBufferService=void 0;const p=m(726);var O;u.IBufferService=(0,p.createDecorator)("BufferService"),u.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),u.ICoreService=(0,p.createDecorator)("CoreService"),u.ICharsetService=(0,p.createDecorator)("CharsetService"),u.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(x){x[x.TRACE=0]="TRACE",x[x.DEBUG=1]="DEBUG",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.OFF=5]="OFF"}(O||(u.LogLevelEnum=O={})),u.ILogService=(0,p.createDecorator)("LogService"),u.IOptionsService=(0,p.createDecorator)("OptionsService"),u.IOscLinkService=(0,p.createDecorator)("OscLinkService"),u.IUnicodeService=(0,p.createDecorator)("UnicodeService"),u.IDecorationService=(0,p.createDecorator)("DecorationService")}},o={};function l(g){var u=o[g];if(u!==void 0)return u.exports;var m=o[g]={exports:{}};return r[g].call(m.exports,m,m.exports,l),m.exports}var d={};return(()=>{var g=d;Object.defineProperty(g,"__esModule",{value:!0}),g.CanvasAddon=void 0;const u=l(345),m=l(859),p=l(776),O=l(949);class x extends m.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var y;return(y=this._renderer)===null||y===void 0?void 0:y.textureAtlas}activate(y){const E=y._core;if(!y.element)return void this.register(E.onWillOpen(()=>this.activate(y)));this._terminal=y;const C=E.coreService,b=E.optionsService,I=E.screenElement,R=E.linkifier2,S=E,B=S._bufferService,U=S._renderService,F=S._characterJoinerService,$=S._charSizeService,A=S._coreBrowserService,M=S._decorationService,G=S._logService,T=S._themeService;(0,p.setTraceLogger)(G),this._renderer=new O.CanvasRenderer(y,I,R,B,$,b,F,C,A,M,T),this.register((0,u.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,u.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),U.setRenderer(this._renderer),U.handleResize(B.cols,B.rows),this.register((0,m.toDisposable)(()=>{var P;U.setRenderer(this._terminal._core._createRenderer()),U.handleResize(y.cols,y.rows),(P=this._renderer)===null||P===void 0||P.dispose(),this._renderer=void 0}))}}g.CanvasAddon=x})(),d})())})(Mf);var VO=Mf.exports,Nf={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(self,()=>(()=>{var r={};return(()=>{var o=r;Object.defineProperty(o,"__esModule",{value:!0}),o.FitAddon=void 0,o.FitAddon=class{activate(l){this._terminal=l}dispose(){}fit(){const l=this.proposeDimensions();if(!l||!this._terminal||isNaN(l.cols)||isNaN(l.rows))return;const d=this._terminal._core;this._terminal.rows===l.rows&&this._terminal.cols===l.cols||(d._renderService.clear(),this._terminal.resize(l.cols,l.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const l=this._terminal._core,d=l._renderService.dimensions;if(d.css.cell.width===0||d.css.cell.height===0)return;const g=this._terminal.options.scrollback===0?0:l.viewport.scrollBarWidth,u=window.getComputedStyle(this._terminal.element.parentElement),m=parseInt(u.getPropertyValue("height")),p=Math.max(0,parseInt(u.getPropertyValue("width"))),O=window.getComputedStyle(this._terminal.element),x=m-(parseInt(O.getPropertyValue("padding-top"))+parseInt(O.getPropertyValue("padding-bottom"))),v=p-(parseInt(O.getPropertyValue("padding-right"))+parseInt(O.getPropertyValue("padding-left")))-g;return{cols:Math.max(2,Math.floor(v/d.css.cell.width)),rows:Math.max(1,Math.floor(x/d.css.cell.height))}}}})(),r})())})(Nf);var jO=Nf.exports,Ff={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(self,()=>(()=>{var r={345:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===m)return void this._listeners.splice(p,1)}}})),this._event}fire(m,p){const O=[];for(let x=0;x<this._listeners.length;x++)O.push(this._listeners[x]);for(let x=0;x<O.length;x++)O[x].call(void 0,m,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(m,p){return m(O=>p.fire(O))}},859:(g,u)=>{function m(p){for(const O of p)O.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const O=this._disposables.indexOf(p);O!==-1&&this._disposables.splice(O,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var O;this._isDisposed||p===this._value||((O=this._value)===null||O===void 0||O.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=m,u.getDisposeArrayDisposable=function(p){return{dispose:()=>m(p)}}}},o={};function l(g){var u=o[g];if(u!==void 0)return u.exports;var m=o[g]={exports:{}};return r[g](m,m.exports,l),m.exports}var d={};return(()=>{var g=d;Object.defineProperty(g,"__esModule",{value:!0}),g.SearchAddon=void 0;const u=l(345),m=l(859),p=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class O extends m.Disposable{constructor(v){var y;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new m.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new u.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(y=v?.highlightLimit)!==null&&y!==void 0?y:1e3}activate(v){this._terminal=v,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,m.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var v;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((v=this._lastSearchOptions)===null||v===void 0)&&v.decorations)&&(this._highlightTimeout=setTimeout(()=>{const y=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(y,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(v){this._selectedDecoration.clear(),(0,m.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),v||(this._cachedSearchTerm=void 0)}findNext(v,y){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=y,y?.decorations&&(this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,y));const E=this._findNextAndSelect(v,y);return this._fireResults(y),this._cachedSearchTerm=v,E}_highlightAllMatches(v,y){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!v||v.length===0)return void this.clearDecorations();y=y||{},this.clearDecorations(!0);const E=[];let C,b=this._find(v,0,0,y);for(;b&&(C?.row!==b.row||C?.col!==b.col)&&!(E.length>=this._highlightLimit);)C=b,E.push(C),b=this._find(v,C.col+C.term.length>=this._terminal.cols?C.row+1:C.row,C.col+C.term.length>=this._terminal.cols?0:C.col+1,y);for(const I of E){const R=this._createResultDecoration(I,y.decorations);R&&(this._highlightedLines.add(R.marker.line),this._highlightDecorations.push({decoration:R,match:I,dispose(){R.dispose()}}))}}_find(v,y,E,C){var b;if(!this._terminal||!v||v.length===0)return(b=this._terminal)===null||b===void 0||b.clearSelection(),void this.clearDecorations();if(E>this._terminal.cols)throw new Error(`Invalid col: ${E} to search in terminal of ${this._terminal.cols} cols`);let I;this._initLinesCache();const R={startRow:y,startCol:E};if(I=this._findInLine(v,R,C),!I)for(let S=y+1;S<this._terminal.buffer.active.baseY+this._terminal.rows&&(R.startRow=S,R.startCol=0,I=this._findInLine(v,R,C),!I);S++);return I}_findNextAndSelect(v,y){var E;if(!this._terminal||!v||v.length===0)return(E=this._terminal)===null||E===void 0||E.clearSelection(),this.clearDecorations(),!1;const C=this._terminal.getSelectionPosition();this._terminal.clearSelection();let b=0,I=0;C&&(this._cachedSearchTerm===v?(b=C.end.x,I=C.end.y):(b=C.start.x,I=C.start.y)),this._initLinesCache();const R={startRow:I,startCol:b};let S=this._findInLine(v,R,y);if(!S)for(let B=I+1;B<this._terminal.buffer.active.baseY+this._terminal.rows&&(R.startRow=B,R.startCol=0,S=this._findInLine(v,R,y),!S);B++);if(!S&&I!==0)for(let B=0;B<I&&(R.startRow=B,R.startCol=0,S=this._findInLine(v,R,y),!S);B++);return!S&&C&&(R.startRow=C.start.y,R.startCol=0,S=this._findInLine(v,R,y)),this._selectResult(S,y?.decorations,y?.noScroll)}findPrevious(v,y){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=y,y?.decorations&&(this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,y));const E=this._findPreviousAndSelect(v,y);return this._fireResults(y),this._cachedSearchTerm=v,E}_fireResults(v){if(v?.decorations){let y=-1;if(this._selectedDecoration.value){const E=this._selectedDecoration.value.match;for(let C=0;C<this._highlightDecorations.length;C++){const b=this._highlightDecorations[C].match;if(b.row===E.row&&b.col===E.col&&b.size===E.size){y=C;break}}}this._onDidChangeResults.fire({resultIndex:y,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(v,y){var E;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!v||v.length===0)return(E=this._terminal)===null||E===void 0||E.clearSelection(),this.clearDecorations(),!1;const C=this._terminal.getSelectionPosition();this._terminal.clearSelection();let b=this._terminal.buffer.active.baseY+this._terminal.rows-1,I=this._terminal.cols;const R=!0;this._initLinesCache();const S={startRow:b,startCol:I};let B;if(C&&(S.startRow=b=C.start.y,S.startCol=I=C.start.x,this._cachedSearchTerm!==v&&(B=this._findInLine(v,S,y,!1),B||(S.startRow=b=C.end.y,S.startCol=I=C.end.x))),B||(B=this._findInLine(v,S,y,R)),!B){S.startCol=Math.max(S.startCol,this._terminal.cols);for(let U=b-1;U>=0&&(S.startRow=U,B=this._findInLine(v,S,y,R),!B);U--);}if(!B&&b!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let U=this._terminal.buffer.active.baseY+this._terminal.rows-1;U>=b&&(S.startRow=U,B=this._findInLine(v,S,y,R),!B);U--);return this._selectResult(B,y?.decorations,y?.noScroll)}_initLinesCache(){const v=this._terminal;this._linesCache||(this._linesCache=new Array(v.buffer.active.length),this._cursorMoveListener=v.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=v.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(v,y,E){return(v===0||p.includes(y[v-1]))&&(v+E.length===y.length||p.includes(y[v+E.length]))}_findInLine(v,y,E={},C=!1){var b;const I=this._terminal,R=y.startRow,S=y.startCol,B=I.buffer.active.getLine(R);if(B?.isWrapped)return C?void(y.startCol+=I.cols):(y.startRow--,y.startCol+=I.cols,this._findInLine(v,y,E));let U=(b=this._linesCache)===null||b===void 0?void 0:b[R];U||(U=this._translateBufferLineToStringWithWrap(R,!0),this._linesCache&&(this._linesCache[R]=U));const[F,$]=U,A=this._bufferColsToStringOffset(R,S),M=E.caseSensitive?v:v.toLowerCase(),G=E.caseSensitive?F:F.toLowerCase();let T=-1;if(E.regex){const P=RegExp(M,"g");let X;if(C)for(;X=P.exec(G.slice(0,A));)T=P.lastIndex-X[0].length,v=X[0],P.lastIndex-=v.length-1;else X=P.exec(G.slice(A)),X&&X[0].length>0&&(T=A+(P.lastIndex-X[0].length),v=X[0])}else C?A-M.length>=0&&(T=G.lastIndexOf(M,A-M.length)):T=G.indexOf(M,A);if(T>=0){if(E.wholeWord&&!this._isWholeWord(T,G,v))return;let P=0;for(;P<$.length-1&&T>=$[P+1];)P++;let X=P;for(;X<$.length-1&&T+v.length>=$[X+1];)X++;const q=T-$[P],W=T+v.length-$[X],j=this._stringLengthToBufferSize(R+P,q);return{term:v,col:j,row:R+P,size:this._stringLengthToBufferSize(R+X,W)-j+I.cols*(X-P)}}}_stringLengthToBufferSize(v,y){const E=this._terminal.buffer.active.getLine(v);if(!E)return 0;for(let C=0;C<y;C++){const b=E.getCell(C);if(!b)break;const I=b.getChars();I.length>1&&(y-=I.length-1);const R=E.getCell(C+1);R&&R.getWidth()===0&&y++}return y}_bufferColsToStringOffset(v,y){const E=this._terminal;let C=v,b=0,I=E.buffer.active.getLine(C);for(;y>0&&I;){for(let R=0;R<y&&R<E.cols;R++){const S=I.getCell(R);if(!S)break;S.getWidth()&&(b+=S.getCode()===0?1:S.getChars().length)}if(C++,I=E.buffer.active.getLine(C),I&&!I.isWrapped)break;y-=E.cols}return b}_translateBufferLineToStringWithWrap(v,y){var E;const C=this._terminal,b=[],I=[0];let R=C.buffer.active.getLine(v);for(;R;){const S=C.buffer.active.getLine(v+1),B=!!S&&S.isWrapped;let U=R.translateToString(!B&&y);if(B&&S){const F=R.getCell(R.length-1);F&&F.getCode()===0&&F.getWidth()===1&&((E=S.getCell(0))===null||E===void 0?void 0:E.getWidth())===2&&(U=U.slice(0,-1))}if(b.push(U),!B)break;I.push(I[I.length-1]+U.length),v++,R=S}return[b.join(""),I]}_selectResult(v,y,E){const C=this._terminal;if(this._selectedDecoration.clear(),!v)return C.clearSelection(),!1;if(C.select(v.col,v.row,v.size),y){const b=C.registerMarker(-C.buffer.active.baseY-C.buffer.active.cursorY+v.row);if(b){const I=C.registerDecoration({marker:b,x:v.col,width:v.size,backgroundColor:y.activeMatchBackground,layer:"top",overviewRulerOptions:{color:y.activeMatchColorOverviewRuler}});if(I){const R=[];R.push(b),R.push(I.onRender(S=>this._applyStyles(S,y.activeMatchBorder,!0))),R.push(I.onDispose(()=>(0,m.disposeArray)(R))),this._selectedDecoration.value={decoration:I,match:v,dispose(){I.dispose()}}}}}if(!E&&(v.row>=C.buffer.active.viewportY+C.rows||v.row<C.buffer.active.viewportY)){let b=v.row-C.buffer.active.viewportY;b-=Math.floor(C.rows/2),C.scrollLines(b)}return!0}_applyStyles(v,y,E){v.classList.contains("xterm-find-result-decoration")||(v.classList.add("xterm-find-result-decoration"),y&&(v.style.outline=`1px solid ${y}`)),E&&v.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(v,y){const E=this._terminal,C=E.registerMarker(-E.buffer.active.baseY-E.buffer.active.cursorY+v.row);if(!C)return;const b=E.registerDecoration({marker:C,x:v.col,width:v.size,backgroundColor:y.matchBackground,overviewRulerOptions:this._highlightedLines.has(C.line)?void 0:{color:y.matchOverviewRuler,position:"center"}});if(b){const I=[];I.push(C),I.push(b.onRender(R=>this._applyStyles(R,y.matchBorder,!1))),I.push(b.onDispose(()=>(0,m.disposeArray)(I)))}return b}}g.SearchAddon=O})(),d})())})(Ff);var zO=Ff.exports,Bf={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(Rr,()=>(()=>{var r={433:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeV11=void 0;const m=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],p=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],O=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],x=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let v;function y(E,C){let b,I=0,R=C.length-1;if(E<C[0][0]||E>C[R][1])return!1;for(;R>=I;)if(b=I+R>>1,E>C[b][1])I=b+1;else{if(!(E<C[b][0]))return!0;R=b-1}return!1}u.UnicodeV11=class{constructor(){if(this.version="11",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160);for(let E=0;E<m.length;++E)v.fill(0,m[E][0],m[E][1]+1);for(let E=0;E<O.length;++E)v.fill(2,O[E][0],O[E][1]+1)}}wcwidth(E){return E<32?0:E<127?1:E<65536?v[E]:y(E,p)?0:y(E,x)?2:1}}}},o={};function l(g){var u=o[g];if(u!==void 0)return u.exports;var m=o[g]={exports:{}};return r[g](m,m.exports,l),m.exports}var d={};return(()=>{var g=d;Object.defineProperty(g,"__esModule",{value:!0}),g.Unicode11Addon=void 0;const u=l(433);g.Unicode11Addon=class{activate(m){m.unicode.register(new u.UnicodeV11)}dispose(){}}})(),d})())})(Bf);var GO=Bf.exports,$f={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(self,()=>(()=>{var r={6:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LinkComputer=u.WebLinkProvider=void 0,u.WebLinkProvider=class{constructor(p,O,x,v={}){this._terminal=p,this._regex=O,this._handler=x,this._options=v}provideLinks(p,O){const x=m.computeLink(p,this._regex,this._terminal,this._handler);O(this._addCallbacks(x))}_addCallbacks(p){return p.map(O=>(O.leave=this._options.leave,O.hover=(x,v)=>{if(this._options.hover){const{range:y}=O;this._options.hover(x,v,y)}},O))}};class m{static computeLink(O,x,v,y){const E=new RegExp(x.source,(x.flags||"")+"g"),[C,b]=m._getWindowedLineStrings(O-1,v),I=C.join("");let R;const S=[];for(;R=E.exec(I);){const B=R[0];try{const G=new URL(B),T=decodeURI(G.toString());if(B!==T&&B+"/"!==T)continue}catch{continue}const[U,F]=m._mapStrIdx(v,b,0,R.index),[$,A]=m._mapStrIdx(v,U,F,B.length);if(U===-1||F===-1||$===-1||A===-1)continue;const M={start:{x:F+1,y:U+1},end:{x:A,y:$+1}};S.push({range:M,text:B,activate:y})}return S}static _getWindowedLineStrings(O,x){let v,y=O,E=O,C=0,b="";const I=[];if(v=x.buffer.active.getLine(O)){const R=v.translateToString(!0);if(v.isWrapped&&R[0]!==" "){for(C=0;(v=x.buffer.active.getLine(--y))&&C<2048&&(b=v.translateToString(!0),C+=b.length,I.push(b),v.isWrapped&&b.indexOf(" ")===-1););I.reverse()}for(I.push(R),C=0;(v=x.buffer.active.getLine(++E))&&v.isWrapped&&C<2048&&(b=v.translateToString(!0),C+=b.length,I.push(b),b.indexOf(" ")===-1););}return[I,y]}static _mapStrIdx(O,x,v,y){const E=O.buffer.active,C=E.getNullCell();let b=v;for(;y;){const I=E.getLine(x);if(!I)return[-1,-1];for(let R=b;R<I.length;++R){I.getCell(R,C);const S=C.getChars();if(C.getWidth()&&(y-=S.length||1,R===I.length-1&&S==="")){const B=E.getLine(x+1);B&&B.isWrapped&&(B.getCell(0,C),C.getWidth()===2&&(y+=1))}if(y<0)return[x,R]}x++,b=0}return[x,b]}}u.LinkComputer=m}},o={};function l(g){var u=o[g];if(u!==void 0)return u.exports;var m=o[g]={exports:{}};return r[g](m,m.exports,l),m.exports}var d={};return(()=>{var g=d;Object.defineProperty(g,"__esModule",{value:!0}),g.WebLinksAddon=void 0;const u=l(6),m=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function p(O,x){const v=window.open();if(v){try{v.opener=null}catch{}v.location.href=x}else console.warn("Opening link blocked as opener could not be cleared")}g.WebLinksAddon=class{constructor(O=p,x={}){this._handler=O,this._options=x}activate(O){this._terminal=O;const x=this._options,v=x.urlRegex||m;this._linkProvider=this._terminal.registerLinkProvider(new u.WebLinkProvider(this._terminal,v,this._handler,x))}dispose(){var O;(O=this._linkProvider)===null||O===void 0||O.dispose()}}})(),d})())})($f);var YO=$f.exports,Wf={exports:{}};(function(n,e){(function(r,o){n.exports=o()})(self,()=>(()=>{var r={965:function(g,u,m){var p=this&&this.__decorate||function($,A,M,G){var T,P=arguments.length,X=P<3?A:G===null?G=Object.getOwnPropertyDescriptor(A,M):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate($,A,M,G);else for(var q=$.length-1;q>=0;q--)(T=$[q])&&(X=(P<3?T(X):P>3?T(A,M,X):T(A,M))||X);return P>3&&X&&Object.defineProperty(A,M,X),X};Object.defineProperty(u,"__esModule",{value:!0}),u.GlyphRenderer=void 0;const O=m(374),x=m(509),v=m(855),y=m(859),E=m(776),C=m(381),b=11,I=b*Float32Array.BYTES_PER_ELEMENT;let R,S=0,B=0,U=0;class F extends y.Disposable{constructor(A,M,G){super(),this._terminal=A,this._gl=M,this._dimensions=G,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const T=this._gl;x.TextureAtlas.maxAtlasPages===void 0&&(x.TextureAtlas.maxAtlasPages=Math.min(32,(0,O.throwIfFalsy)(T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS))),x.TextureAtlas.maxTextureSize=(0,O.throwIfFalsy)(T.getParameter(T.MAX_TEXTURE_SIZE))),this._program=(0,O.throwIfFalsy)((0,C.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(H){let re="";for(let K=1;K<H;K++)re+=` else if (v_texpage == ${K}) { outColor = texture(u_texture[${K}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${H}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${re}
}`}(x.TextureAtlas.maxAtlasPages))),this.register((0,y.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,O.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,O.throwIfFalsy)(T.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,O.throwIfFalsy)(T.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);const P=new Float32Array([0,0,1,0,0,1,1,1]),X=T.createBuffer();this.register((0,y.toDisposable)(()=>T.deleteBuffer(X))),T.bindBuffer(T.ARRAY_BUFFER,X),T.bufferData(T.ARRAY_BUFFER,P,T.STATIC_DRAW),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const q=new Uint8Array([0,1,2,3]),W=T.createBuffer();this.register((0,y.toDisposable)(()=>T.deleteBuffer(W))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,W),T.bufferData(T.ELEMENT_ARRAY_BUFFER,q,T.STATIC_DRAW),this._attributesBuffer=(0,O.throwIfFalsy)(T.createBuffer()),this.register((0,y.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,2,T.FLOAT,!1,I,0),T.vertexAttribDivisor(2,1),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,T.FLOAT,!1,I,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(3,1),T.enableVertexAttribArray(4),T.vertexAttribPointer(4,1,T.FLOAT,!1,I,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(4,1),T.enableVertexAttribArray(5),T.vertexAttribPointer(5,2,T.FLOAT,!1,I,5*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(5,1),T.enableVertexAttribArray(6),T.vertexAttribPointer(6,2,T.FLOAT,!1,I,7*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(6,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,I,9*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.useProgram(this._program);const j=new Int32Array(x.TextureAtlas.maxAtlasPages);for(let H=0;H<x.TextureAtlas.maxAtlasPages;H++)j[H]=H;T.uniform1iv(this._textureLocation,j),T.uniformMatrix4fv(this._projectionLocation,!1,C.PROJECTION_MATRIX),this._atlasTextures=[];for(let H=0;H<x.TextureAtlas.maxAtlasPages;H++){const re=new C.GLTexture((0,O.throwIfFalsy)(T.createTexture()));this.register((0,y.toDisposable)(()=>T.deleteTexture(re.texture))),T.activeTexture(T.TEXTURE0+H),T.bindTexture(T.TEXTURE_2D,re.texture),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[H]=re}T.enable(T.BLEND),T.blendFunc(T.SRC_ALPHA,T.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(A,M,G,T,P,X,q,W){this._updateCell(this._vertices.attributes,A,M,G,T,P,X,q,W)}_updateCell(A,M,G,T,P,X,q,W,j){S=(G*this._terminal.cols+M)*b,T!==v.NULL_CELL_CODE&&T!==void 0?this._atlas&&(R=W&&W.length>1?this._atlas.getRasterizedGlyphCombinedChar(W,P,X,q,!1):this._atlas.getRasterizedGlyph(T,P,X,q,!1),B=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),P!==j&&R.offset.x>B?(U=R.offset.x-B,A[S]=-(R.offset.x-U)+this._dimensions.device.char.left,A[S+1]=-R.offset.y+this._dimensions.device.char.top,A[S+2]=(R.size.x-U)/this._dimensions.device.canvas.width,A[S+3]=R.size.y/this._dimensions.device.canvas.height,A[S+4]=R.texturePage,A[S+5]=R.texturePositionClipSpace.x+U/this._atlas.pages[R.texturePage].canvas.width,A[S+6]=R.texturePositionClipSpace.y,A[S+7]=R.sizeClipSpace.x-U/this._atlas.pages[R.texturePage].canvas.width,A[S+8]=R.sizeClipSpace.y):(A[S]=-R.offset.x+this._dimensions.device.char.left,A[S+1]=-R.offset.y+this._dimensions.device.char.top,A[S+2]=R.size.x/this._dimensions.device.canvas.width,A[S+3]=R.size.y/this._dimensions.device.canvas.height,A[S+4]=R.texturePage,A[S+5]=R.texturePositionClipSpace.x,A[S+6]=R.texturePositionClipSpace.y,A[S+7]=R.sizeClipSpace.x,A[S+8]=R.sizeClipSpace.y)):A.fill(0,S,S+b-1-2)}clear(){const A=this._terminal,M=A.cols*A.rows*b;this._vertices.count!==M?this._vertices.attributes=new Float32Array(M):this._vertices.attributes.fill(0);let G=0;for(;G<this._vertices.attributesBuffers.length;G++)this._vertices.count!==M?this._vertices.attributesBuffers[G]=new Float32Array(M):this._vertices.attributesBuffers[G].fill(0);this._vertices.count=M,G=0;for(let T=0;T<A.rows;T++)for(let P=0;P<A.cols;P++)this._vertices.attributes[G+9]=P/A.cols,this._vertices.attributes[G+10]=T/A.rows,G+=b}handleResize(){const A=this._gl;A.useProgram(this._program),A.viewport(0,0,A.canvas.width,A.canvas.height),A.uniform2f(this._resolutionLocation,A.canvas.width,A.canvas.height),this.clear()}render(A){if(!this._atlas)return;const M=this._gl;M.useProgram(this._program),M.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const G=this._vertices.attributesBuffers[this._activeBuffer];let T=0;for(let P=0;P<A.lineLengths.length;P++){const X=P*this._terminal.cols*b,q=this._vertices.attributes.subarray(X,X+A.lineLengths[P]*b);G.set(q,T),T+=q.length}M.bindBuffer(M.ARRAY_BUFFER,this._attributesBuffer),M.bufferData(M.ARRAY_BUFFER,G.subarray(0,T),M.STREAM_DRAW);for(let P=0;P<this._atlas.pages.length;P++)this._atlas.pages[P].version!==this._atlasTextures[P].version&&this._bindAtlasPageTexture(M,this._atlas,P);M.drawElementsInstanced(M.TRIANGLE_STRIP,4,M.UNSIGNED_BYTE,0,T/b)}setAtlas(A){this._atlas=A;for(const M of this._atlasTextures)M.version=-1}_bindAtlasPageTexture(A,M,G){A.activeTexture(A.TEXTURE0+G),A.bindTexture(A.TEXTURE_2D,this._atlasTextures[G].texture),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,M.pages[G].canvas),A.generateMipmap(A.TEXTURE_2D),this._atlasTextures[G].version=M.pages[G].version}setDimensions(A){this._dimensions=A}}u.GlyphRenderer=F,p([E.traceCall],F.prototype,"updateCell",null)},742:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RectangleRenderer=void 0;const p=m(374),O=m(859),x=m(310),v=m(381),y=8*Float32Array.BYTES_PER_ELEMENT;class E{constructor(){this.attributes=new Float32Array(160),this.count=0}}let C=0,b=0,I=0,R=0,S=0,B=0,U=0;class F extends O.Disposable{constructor(A,M,G,T){super(),this._terminal=A,this._gl=M,this._dimensions=G,this._themeService=T,this._vertices=new E,this._verticesCursor=new E;const P=this._gl;this._program=(0,p.throwIfFalsy)((0,v.createProgram)(P,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,O.toDisposable)(()=>P.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(P.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=P.createVertexArray(),P.bindVertexArray(this._vertexArrayObject);const X=new Float32Array([0,0,1,0,0,1,1,1]),q=P.createBuffer();this.register((0,O.toDisposable)(()=>P.deleteBuffer(q))),P.bindBuffer(P.ARRAY_BUFFER,q),P.bufferData(P.ARRAY_BUFFER,X,P.STATIC_DRAW),P.enableVertexAttribArray(3),P.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const W=new Uint8Array([0,1,2,3]),j=P.createBuffer();this.register((0,O.toDisposable)(()=>P.deleteBuffer(j))),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,j),P.bufferData(P.ELEMENT_ARRAY_BUFFER,W,P.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(P.createBuffer()),this.register((0,O.toDisposable)(()=>P.deleteBuffer(this._attributesBuffer))),P.bindBuffer(P.ARRAY_BUFFER,this._attributesBuffer),P.enableVertexAttribArray(0),P.vertexAttribPointer(0,2,P.FLOAT,!1,y,0),P.vertexAttribDivisor(0,1),P.enableVertexAttribArray(1),P.vertexAttribPointer(1,2,P.FLOAT,!1,y,2*Float32Array.BYTES_PER_ELEMENT),P.vertexAttribDivisor(1,1),P.enableVertexAttribArray(2),P.vertexAttribPointer(2,4,P.FLOAT,!1,y,4*Float32Array.BYTES_PER_ELEMENT),P.vertexAttribDivisor(2,1),this._updateCachedColors(T.colors),this.register(this._themeService.onChangeColors(H=>{this._updateCachedColors(H),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(A){const M=this._gl;M.useProgram(this._program),M.bindVertexArray(this._vertexArrayObject),M.uniformMatrix4fv(this._projectionLocation,!1,v.PROJECTION_MATRIX),M.bindBuffer(M.ARRAY_BUFFER,this._attributesBuffer),M.bufferData(M.ARRAY_BUFFER,A.attributes,M.DYNAMIC_DRAW),M.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,M.UNSIGNED_BYTE,0,A.count)}handleResize(){this._updateViewportRectangle()}setDimensions(A){this._dimensions=A}_updateCachedColors(A){this._bgFloat=this._colorToFloat32Array(A.background),this._cursorFloat=this._colorToFloat32Array(A.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(A){const M=this._terminal,G=this._vertices;let T,P,X,q,W,j,H,re,K,J,le,se=1;for(T=0;T<M.rows;T++){for(X=-1,q=0,W=0,j=!1,P=0;P<M.cols;P++)H=(T*M.cols+P)*x.RENDER_MODEL_INDICIES_PER_CELL,re=A.cells[H+x.RENDER_MODEL_BG_OFFSET],K=A.cells[H+x.RENDER_MODEL_FG_OFFSET],J=!!(67108864&K),(re!==q||K!==W&&(j||J))&&((q!==0||j&&W!==0)&&(le=8*se++,this._updateRectangle(G,le,W,q,X,P,T)),X=P,q=re,W=K,j=J);(q!==0||j&&W!==0)&&(le=8*se++,this._updateRectangle(G,le,W,q,X,M.cols,T))}G.count=se}updateCursor(A){const M=this._verticesCursor,G=A.cursor;if(!G||G.style==="block")return void(M.count=0);let T,P=0;G.style!=="bar"&&G.style!=="outline"||(T=8*P++,this._addRectangleFloat(M.attributes,T,G.x*this._dimensions.device.cell.width,G.y*this._dimensions.device.cell.height,G.style==="bar"?G.dpr*G.cursorWidth:G.dpr,this._dimensions.device.cell.height,this._cursorFloat)),G.style!=="underline"&&G.style!=="outline"||(T=8*P++,this._addRectangleFloat(M.attributes,T,G.x*this._dimensions.device.cell.width,(G.y+1)*this._dimensions.device.cell.height-G.dpr,G.width*this._dimensions.device.cell.width,G.dpr,this._cursorFloat)),G.style==="outline"&&(T=8*P++,this._addRectangleFloat(M.attributes,T,G.x*this._dimensions.device.cell.width,G.y*this._dimensions.device.cell.height,G.width*this._dimensions.device.cell.width,G.dpr,this._cursorFloat),T=8*P++,this._addRectangleFloat(M.attributes,T,(G.x+G.width)*this._dimensions.device.cell.width-G.dpr,G.y*this._dimensions.device.cell.height,G.dpr,this._dimensions.device.cell.height,this._cursorFloat)),M.count=P}_updateRectangle(A,M,G,T,P,X,q){if(67108864&G)switch(50331648&G){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&G].rgba;break;case 50331648:C=(16777215&G)<<8;break;default:C=this._themeService.colors.foreground.rgba}else switch(50331648&T){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&T].rgba;break;case 50331648:C=(16777215&T)<<8;break;default:C=this._themeService.colors.background.rgba}A.attributes.length<M+4&&(A.attributes=(0,v.expandFloat32Array)(A.attributes,this._terminal.rows*this._terminal.cols*8)),b=P*this._dimensions.device.cell.width,I=q*this._dimensions.device.cell.height,R=(C>>24&255)/255,S=(C>>16&255)/255,B=(C>>8&255)/255,U=1,this._addRectangle(A.attributes,M,b,I,(X-P)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,R,S,B,U)}_addRectangle(A,M,G,T,P,X,q,W,j,H){A[M]=G/this._dimensions.device.canvas.width,A[M+1]=T/this._dimensions.device.canvas.height,A[M+2]=P/this._dimensions.device.canvas.width,A[M+3]=X/this._dimensions.device.canvas.height,A[M+4]=q,A[M+5]=W,A[M+6]=j,A[M+7]=H}_addRectangleFloat(A,M,G,T,P,X,q){A[M]=G/this._dimensions.device.canvas.width,A[M+1]=T/this._dimensions.device.canvas.height,A[M+2]=P/this._dimensions.device.canvas.width,A[M+3]=X/this._dimensions.device.canvas.height,A[M+4]=q[0],A[M+5]=q[1],A[M+6]=q[2],A[M+7]=q[3]}_colorToFloat32Array(A){return new Float32Array([(A.rgba>>24&255)/255,(A.rgba>>16&255)/255,(A.rgba>>8&255)/255,(255&A.rgba)/255])}}u.RectangleRenderer=F},310:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RenderModel=u.COMBINED_CHAR_BIT_MASK=u.RENDER_MODEL_EXT_OFFSET=u.RENDER_MODEL_FG_OFFSET=u.RENDER_MODEL_BG_OFFSET=u.RENDER_MODEL_INDICIES_PER_CELL=void 0;const p=m(296);u.RENDER_MODEL_INDICIES_PER_CELL=4,u.RENDER_MODEL_BG_OFFSET=1,u.RENDER_MODEL_FG_OFFSET=2,u.RENDER_MODEL_EXT_OFFSET=3,u.COMBINED_CHAR_BIT_MASK=2147483648,u.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,p.createSelectionRenderModel)()}resize(O,x){const v=O*x*u.RENDER_MODEL_INDICIES_PER_CELL;v!==this.cells.length&&(this.cells=new Uint32Array(v),this.lineLengths=new Uint32Array(x))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(g,u,m){var p=this&&this.__decorate||function(X,q,W,j){var H,re=arguments.length,K=re<3?q:j===null?j=Object.getOwnPropertyDescriptor(q,W):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(X,q,W,j);else for(var J=X.length-1;J>=0;J--)(H=X[J])&&(K=(re<3?H(K):re>3?H(q,W,K):H(q,W))||K);return re>3&&K&&Object.defineProperty(q,W,K),K};Object.defineProperty(u,"__esModule",{value:!0}),u.JoinedCellData=u.WebglRenderer=void 0;const O=m(820),x=m(274),v=m(627),y=m(457),E=m(56),C=m(374),b=m(345),I=m(859),R=m(147),S=m(782),B=m(855),U=m(776),F=m(965),$=m(742),A=m(310),M=m(733);class G extends I.Disposable{constructor(q,W,j,H,re,K,J,le,se){super(),this._terminal=q,this._characterJoinerService=W,this._charSizeService=j,this._coreBrowserService=H,this._coreService=re,this._decorationService=K,this._optionsService=J,this._themeService=le,this._cursorBlinkStateManager=new I.MutableDisposable,this._charAtlasDisposable=this.register(new I.MutableDisposable),this._model=new A.RenderModel,this._workCell=new S.CellData,this._rectangleRenderer=this.register(new I.MutableDisposable),this._glyphRenderer=this.register(new I.MutableDisposable),this._onChangeTextureAtlas=this.register(new b.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new b.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new b.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new b.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new b.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new x.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new M.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,J,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(J.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const Le={antialias:!1,depth:!1,preserveDrawingBuffer:se};if(this._gl=this._canvas.getContext("webgl2",Le),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,O.addDisposableDomListener)(this._canvas,"webglcontextlost",xe=>{console.log("webglcontextlost event received"),xe.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(xe)},3e3)})),this.register((0,O.addDisposableDomListener)(this._canvas,"webglcontextrestored",xe=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,v.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,E.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(xe,Me)=>this._setCanvasDevicePixelDimensions(xe,Me))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,I.toDisposable)(()=>{var xe;for(const Me of this._renderLayers)Me.dispose();(xe=this._canvas.parentElement)===null||xe===void 0||xe.removeChild(this._canvas),(0,v.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var q;return(q=this._charAtlas)===null||q===void 0?void 0:q.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(q,W){var j,H,re,K;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const J of this._renderLayers)J.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(j=this._rectangleRenderer.value)===null||j===void 0||j.setDimensions(this.dimensions),(H=this._rectangleRenderer.value)===null||H===void 0||H.handleResize(),(re=this._glyphRenderer.value)===null||re===void 0||re.setDimensions(this.dimensions),(K=this._glyphRenderer.value)===null||K===void 0||K.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var q;for(const W of this._renderLayers)W.handleBlur(this._terminal);(q=this._cursorBlinkStateManager.value)===null||q===void 0||q.pause(),this._requestRedrawViewport()}handleFocus(){var q;for(const W of this._renderLayers)W.handleFocus(this._terminal);(q=this._cursorBlinkStateManager.value)===null||q===void 0||q.resume(),this._requestRedrawViewport()}handleSelectionChanged(q,W,j){for(const H of this._renderLayers)H.handleSelectionChanged(this._terminal,q,W,j);this._model.selection.update(this._terminal,q,W,j),this._requestRedrawViewport()}handleCursorMove(){var q;for(const W of this._renderLayers)W.handleCursorMove(this._terminal);(q=this._cursorBlinkStateManager.value)===null||q===void 0||q.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new $.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new F.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var q;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const W=(0,v.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==W&&(this._onChangeTextureAtlas.fire(W.pages[0].canvas),this._charAtlasDisposable.value=(0,I.getDisposeArrayDisposable)([(0,b.forwardEvent)(W.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,b.forwardEvent)(W.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=W,this._charAtlas.warmUp(),(q=this._glyphRenderer.value)===null||q===void 0||q.setAtlas(this._charAtlas)}_clearModel(q){var W;this._model.clear(),q&&((W=this._glyphRenderer.value)===null||W===void 0||W.clear())}clearTextureAtlas(){var q;(q=this._charAtlas)===null||q===void 0||q.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var q;this._clearModel(!0);for(const W of this._renderLayers)W.reset(this._terminal);(q=this._cursorBlinkStateManager.value)===null||q===void 0||q.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(q){return-1}deregisterCharacterJoiner(q){return!1}renderRows(q,W){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const j of this._renderLayers)j.handleGridChanged(this._terminal,q,W);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(q,W),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new y.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(q,W){const j=this._core;let H,re,K,J,le,se,Le,xe,Me,fe,je,ae,oe,ce=this._workCell;q=P(q,j.rows-1,0),W=P(W,j.rows-1,0);const Ce=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,He=Math.min(this._terminal.buffer.active.cursorX,j.cols-1);let Te=-1;const it=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let Ze=!1;for(re=q;re<=W;re++)for(K=re+j.buffer.ydisp,J=j.buffer.lines.get(K),this._model.lineLengths[re]=0,le=this._characterJoinerService.getJoinedCharacters(K),ae=0;ae<j.cols;ae++)if(H=this._cellColorResolver.result.bg,J.loadCell(ae,ce),ae===0&&(H=this._cellColorResolver.result.bg),se=!1,Le=ae,le.length>0&&ae===le[0][0]&&(se=!0,xe=le.shift(),ce=new T(ce,J.translateToString(!0,xe[0],xe[1]),xe[1]-xe[0]),Le=xe[1]-1),Me=ce.getChars(),fe=ce.getCode(),je=(re*j.cols+ae)*A.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(ce,ae,K),it&&K===Ce&&(ae===He&&(this._model.cursor={x:He,y:this._terminal.buffer.active.cursorY,width:ce.getWidth(),style:this._coreBrowserService.isFocused?j.options.cursorStyle||"block":j.options.cursorInactiveStyle,cursorWidth:j.options.cursorWidth,dpr:this._devicePixelRatio},Te=He+ce.getWidth()-1),ae>=He&&ae<=Te&&(this._coreBrowserService.isFocused&&(j.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&j.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),fe!==B.NULL_CELL_CODE&&(this._model.lineLengths[re]=ae+1),(this._model.cells[je]!==fe||this._model.cells[je+A.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[je+A.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[je+A.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Ze=!0,Me.length>1&&(fe|=A.COMBINED_CHAR_BIT_MASK),this._model.cells[je]=fe,this._model.cells[je+A.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[je+A.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[je+A.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(ae,re,fe,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,Me,H),se))for(ce=this._workCell,ae++;ae<Le;ae++)oe=(re*j.cols+ae)*A.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(ae,re,B.NULL_CELL_CODE,0,0,0,B.NULL_CELL_CHAR,0),this._model.cells[oe]=B.NULL_CELL_CODE,this._model.cells[oe+A.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[oe+A.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[oe+A.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;Ze&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(q,W){this._canvas.width===q&&this._canvas.height===W||(this._canvas.width=q,this._canvas.height=W,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const q=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:q,end:q})}}u.WebglRenderer=G,p([U.traceCall],G.prototype,"renderRows",null);class T extends R.AttributeData{constructor(q,W,j){super(),this.content=0,this.combinedData="",this.fg=q.fg,this.bg=q.bg,this.combinedData=W,this._width=j}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(q){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function P(X,q,W=0){return Math.max(Math.min(X,q),W)}u.JoinedCellData=T},381:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GLTexture=u.expandFloat32Array=u.createShader=u.createProgram=u.PROJECTION_MATRIX=void 0;const p=m(374);function O(x,v,y){const E=(0,p.throwIfFalsy)(x.createShader(v));if(x.shaderSource(E,y),x.compileShader(E),x.getShaderParameter(E,x.COMPILE_STATUS))return E;console.error(x.getShaderInfoLog(E)),x.deleteShader(E)}u.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),u.createProgram=function(x,v,y){const E=(0,p.throwIfFalsy)(x.createProgram());if(x.attachShader(E,(0,p.throwIfFalsy)(O(x,x.VERTEX_SHADER,v))),x.attachShader(E,(0,p.throwIfFalsy)(O(x,x.FRAGMENT_SHADER,y))),x.linkProgram(E),x.getProgramParameter(E,x.LINK_STATUS))return E;console.error(x.getProgramInfoLog(E)),x.deleteProgram(E)},u.createShader=O,u.expandFloat32Array=function(x,v){const y=Math.min(2*x.length,v),E=new Float32Array(y);for(let C=0;C<x.length;C++)E[C]=x[C];return E},u.GLTexture=class{constructor(x){this.texture=x,this.version=-1}}},592:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseRenderLayer=void 0;const p=m(627),O=m(237),x=m(374),v=m(859);class y extends v.Disposable{constructor(C,b,I,R,S,B,U,F){super(),this._container=b,this._alpha=S,this._coreBrowserService=B,this._optionsService=U,this._themeService=F,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${I}-layer`),this._canvas.style.zIndex=R.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors($=>{this._refreshCharAtlas(C,$),this.reset(C)})),this.register((0,v.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,x.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(C){}handleFocus(C){}handleCursorMove(C){}handleGridChanged(C,b,I){}handleSelectionChanged(C,b,I,R=!1){}_setTransparency(C,b){if(b===this._alpha)return;const I=this._canvas;this._alpha=b,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,I),this._refreshCharAtlas(C,this._themeService.colors),this.handleGridChanged(C,0,C.rows-1)}_refreshCharAtlas(C,b){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,p.acquireTextureAtlas)(C,this._optionsService.rawOptions,b,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(C,b){this._deviceCellWidth=b.device.cell.width,this._deviceCellHeight=b.device.cell.height,this._deviceCharWidth=b.device.char.width,this._deviceCharHeight=b.device.char.height,this._deviceCharLeft=b.device.char.left,this._deviceCharTop=b.device.char.top,this._canvas.width=b.device.canvas.width,this._canvas.height=b.device.canvas.height,this._canvas.style.width=`${b.css.canvas.width}px`,this._canvas.style.height=`${b.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(C,this._themeService.colors)}_fillBottomLineAtCells(C,b,I=1){this._ctx.fillRect(C*this._deviceCellWidth,(b+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,I*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(C,b,I,R){this._alpha?this._ctx.clearRect(C*this._deviceCellWidth,b*this._deviceCellHeight,I*this._deviceCellWidth,R*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(C*this._deviceCellWidth,b*this._deviceCellHeight,I*this._deviceCellWidth,R*this._deviceCellHeight))}_fillCharTrueColor(C,b,I,R){this._ctx.font=this._getFont(C,!1,!1),this._ctx.textBaseline=O.TEXT_BASELINE,this._clipCell(I,R,b.getWidth()),this._ctx.fillText(b.getChars(),I*this._deviceCellWidth+this._deviceCharLeft,R*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(C,b,I){this._ctx.beginPath(),this._ctx.rect(C*this._deviceCellWidth,b*this._deviceCellHeight,I*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(C,b,I){return`${I?"italic":""} ${b?C.options.fontWeightBold:C.options.fontWeight} ${C.options.fontSize*this._coreBrowserService.dpr}px ${C.options.fontFamily}`}}u.BaseRenderLayer=y},733:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LinkRenderLayer=void 0;const p=m(197),O=m(237),x=m(592);class v extends x.BaseRenderLayer{constructor(E,C,b,I,R,S,B){super(b,E,"link",C,!0,R,S,B),this.register(I.onShowLinkUnderline(U=>this._handleShowLinkUnderline(U))),this.register(I.onHideLinkUnderline(U=>this._handleHideLinkUnderline(U)))}resize(E,C){super.resize(E,C),this._state=void 0}reset(E){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const E=this._state.y2-this._state.y1-1;E>0&&this._clearCells(0,this._state.y1+1,this._state.cols,E),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(E){if(E.fg===O.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:E.fg!==void 0&&(0,p.is256Color)(E.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[E.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,E.y1===E.y2)this._fillBottomLineAtCells(E.x1,E.y1,E.x2-E.x1);else{this._fillBottomLineAtCells(E.x1,E.y1,E.cols-E.x1);for(let C=E.y1+1;C<E.y2;C++)this._fillBottomLineAtCells(0,C,E.cols);this._fillBottomLineAtCells(0,E.y2,E.x2)}this._state=E}_handleHideLinkUnderline(E){this._clearCurrentLink()}}u.LinkRenderLayer=v},820:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=void 0,u.addDisposableDomListener=function(m,p,O,x){m.addEventListener(p,O,x);let v=!1;return{dispose:()=>{v||(v=!0,m.removeEventListener(p,O,x))}}}},274:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellColorResolver=void 0;let m,p=0,O=0,x=!1,v=!1,y=!1;u.CellColorResolver=class{constructor(E,C,b,I,R){this._terminal=E,this._selectionRenderModel=C,this._decorationService=b,this._coreBrowserService=I,this._themeService=R,this.result={fg:0,bg:0,ext:0}}resolve(E,C,b){this.result.bg=E.bg,this.result.fg=E.fg,this.result.ext=268435456&E.bg?E.extended.ext:0,O=0,p=0,v=!1,x=!1,y=!1,m=this._themeService.colors,this._decorationService.forEachDecorationAtCell(C,b,"bottom",I=>{I.backgroundColorRGB&&(O=I.backgroundColorRGB.rgba>>8&16777215,v=!0),I.foregroundColorRGB&&(p=I.foregroundColorRGB.rgba>>8&16777215,x=!0)}),y=this._selectionRenderModel.isCellSelected(this._terminal,C,b),y&&(O=(this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,m.selectionForeground&&(p=m.selectionForeground.rgba>>8&16777215,x=!0)),this._decorationService.forEachDecorationAtCell(C,b,"top",I=>{I.backgroundColorRGB&&(O=I.backgroundColorRGB.rgba>>8&16777215,v=!0),I.foregroundColorRGB&&(p=I.foregroundColorRGB.rgba>>8&16777215,x=!0)}),v&&(O=y?-16777216&E.bg&-134217729|O|50331648:-16777216&E.bg|O|50331648),x&&(p=-16777216&E.fg&-67108865|p|50331648),67108864&this.result.fg&&(v&&!x&&(p=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&m.background.rgba>>8|50331648,x=!0),!v&&x&&(O=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&m.foreground.rgba>>8|50331648,v=!0)),m=void 0,this.result.bg=v?O:this.result.bg,this.result.fg=x?p:this.result.fg}}},627:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.removeTerminalFromCache=u.acquireTextureAtlas=void 0;const p=m(509),O=m(197),x=[];u.acquireTextureAtlas=function(v,y,E,C,b,I,R,S){const B=(0,O.generateConfig)(C,b,I,R,y,E,S);for(let $=0;$<x.length;$++){const A=x[$],M=A.ownedBy.indexOf(v);if(M>=0){if((0,O.configEquals)(A.config,B))return A.atlas;A.ownedBy.length===1?(A.atlas.dispose(),x.splice($,1)):A.ownedBy.splice(M,1);break}}for(let $=0;$<x.length;$++){const A=x[$];if((0,O.configEquals)(A.config,B))return A.ownedBy.push(v),A.atlas}const U=v._core,F={atlas:new p.TextureAtlas(document,B,U.unicodeService),config:B,ownedBy:[v]};return x.push(F),F.atlas},u.removeTerminalFromCache=function(v){for(let y=0;y<x.length;y++){const E=x[y].ownedBy.indexOf(v);if(E!==-1){x[y].ownedBy.length===1?(x[y].atlas.dispose(),x.splice(y,1)):x[y].ownedBy.splice(E,1);break}}}},197:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.is256Color=u.configEquals=u.generateConfig=void 0;const p=m(160);u.generateConfig=function(O,x,v,y,E,C,b){const I={foreground:C.foreground,background:C.background,cursor:p.NULL_COLOR,cursorAccent:p.NULL_COLOR,selectionForeground:p.NULL_COLOR,selectionBackgroundTransparent:p.NULL_COLOR,selectionBackgroundOpaque:p.NULL_COLOR,selectionInactiveBackgroundTransparent:p.NULL_COLOR,selectionInactiveBackgroundOpaque:p.NULL_COLOR,ansi:C.ansi.slice(),contrastCache:C.contrastCache,halfContrastCache:C.halfContrastCache};return{customGlyphs:E.customGlyphs,devicePixelRatio:b,letterSpacing:E.letterSpacing,lineHeight:E.lineHeight,deviceCellWidth:O,deviceCellHeight:x,deviceCharWidth:v,deviceCharHeight:y,fontFamily:E.fontFamily,fontSize:E.fontSize,fontWeight:E.fontWeight,fontWeightBold:E.fontWeightBold,allowTransparency:E.allowTransparency,drawBoldTextInBrightColors:E.drawBoldTextInBrightColors,minimumContrastRatio:E.minimumContrastRatio,colors:I}},u.configEquals=function(O,x){for(let v=0;v<O.colors.ansi.length;v++)if(O.colors.ansi[v].rgba!==x.colors.ansi[v].rgba)return!1;return O.devicePixelRatio===x.devicePixelRatio&&O.customGlyphs===x.customGlyphs&&O.lineHeight===x.lineHeight&&O.letterSpacing===x.letterSpacing&&O.fontFamily===x.fontFamily&&O.fontSize===x.fontSize&&O.fontWeight===x.fontWeight&&O.fontWeightBold===x.fontWeightBold&&O.allowTransparency===x.allowTransparency&&O.deviceCharWidth===x.deviceCharWidth&&O.deviceCharHeight===x.deviceCharHeight&&O.drawBoldTextInBrightColors===x.drawBoldTextInBrightColors&&O.minimumContrastRatio===x.minimumContrastRatio&&O.colors.foreground.rgba===x.colors.foreground.rgba&&O.colors.background.rgba===x.colors.background.rgba},u.is256Color=function(O){return(50331648&O)==16777216||(50331648&O)==33554432}},237:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT_BASELINE=u.DIM_OPACITY=u.INVERTED_DEFAULT_COLOR=void 0;const p=m(399);u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},457:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CursorBlinkStateManager=void 0,u.CursorBlinkStateManager=class{constructor(m,p){this._renderCallback=m,this._coreBrowserService=p,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(m=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const p=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,p>0)return void this._restartInterval(p)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const p=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(p)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},m)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.tryDrawCustomChar=u.powerlineDefinitions=u.boxDrawingDefinitions=u.blockElementDefinitions=void 0;const p=m(374);u.blockElementDefinitions={"â–€":[{x:0,y:0,w:8,h:4}],"â–":[{x:0,y:7,w:8,h:1}],"â–‚":[{x:0,y:6,w:8,h:2}],"â–ƒ":[{x:0,y:5,w:8,h:3}],"â–„":[{x:0,y:4,w:8,h:4}],"â–…":[{x:0,y:3,w:8,h:5}],"â–†":[{x:0,y:2,w:8,h:6}],"â–‡":[{x:0,y:1,w:8,h:7}],"â–ˆ":[{x:0,y:0,w:8,h:8}],"â–‰":[{x:0,y:0,w:7,h:8}],"â–Š":[{x:0,y:0,w:6,h:8}],"â–‹":[{x:0,y:0,w:5,h:8}],"â–Œ":[{x:0,y:0,w:4,h:8}],"â–":[{x:0,y:0,w:3,h:8}],"â–Ž":[{x:0,y:0,w:2,h:8}],"â–":[{x:0,y:0,w:1,h:8}],"â–":[{x:4,y:0,w:4,h:8}],"â–”":[{x:0,y:0,w:8,h:1}],"â–•":[{x:7,y:0,w:1,h:8}],"â––":[{x:0,y:4,w:4,h:4}],"â–—":[{x:4,y:4,w:4,h:4}],"â–˜":[{x:0,y:0,w:4,h:4}],"â–™":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â–š":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â–›":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"â–œ":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â–":[{x:4,y:0,w:4,h:4}],"â–ž":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â–Ÿ":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ðŸ­°":[{x:1,y:0,w:1,h:8}],"ðŸ­±":[{x:2,y:0,w:1,h:8}],"ðŸ­²":[{x:3,y:0,w:1,h:8}],"ðŸ­³":[{x:4,y:0,w:1,h:8}],"ðŸ­´":[{x:5,y:0,w:1,h:8}],"ðŸ­µ":[{x:6,y:0,w:1,h:8}],"ðŸ­¶":[{x:0,y:1,w:8,h:1}],"ðŸ­·":[{x:0,y:2,w:8,h:1}],"ðŸ­¸":[{x:0,y:3,w:8,h:1}],"ðŸ­¹":[{x:0,y:4,w:8,h:1}],"ðŸ­º":[{x:0,y:5,w:8,h:1}],"ðŸ­»":[{x:0,y:6,w:8,h:1}],"ðŸ­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ®€":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®‚":[{x:0,y:0,w:8,h:2}],"ðŸ®ƒ":[{x:0,y:0,w:8,h:3}],"ðŸ®„":[{x:0,y:0,w:8,h:5}],"ðŸ®…":[{x:0,y:0,w:8,h:6}],"ðŸ®†":[{x:0,y:0,w:8,h:7}],"ðŸ®‡":[{x:6,y:0,w:2,h:8}],"ðŸ®ˆ":[{x:5,y:0,w:3,h:8}],"ðŸ®‰":[{x:3,y:0,w:5,h:8}],"ðŸ®Š":[{x:2,y:0,w:6,h:8}],"ðŸ®‹":[{x:1,y:0,w:7,h:8}],"ðŸ®•":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ðŸ®–":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ðŸ®—":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const O={"â–‘":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â–’":[[1,0],[0,0],[0,1],[0,0]],"â–“":[[0,1],[1,1],[1,0],[1,1]]};u.boxDrawingDefinitions={"â”€":{1:"M0,.5 L1,.5"},"â”":{3:"M0,.5 L1,.5"},"â”‚":{1:"M.5,0 L.5,1"},"â”ƒ":{3:"M.5,0 L.5,1"},"â”Œ":{1:"M0.5,1 L.5,.5 L1,.5"},"â”":{3:"M0.5,1 L.5,.5 L1,.5"},"â”":{1:"M0,.5 L.5,.5 L.5,1"},"â”“":{3:"M0,.5 L.5,.5 L.5,1"},"â””":{1:"M.5,0 L.5,.5 L1,.5"},"â”—":{3:"M.5,0 L.5,.5 L1,.5"},"â”˜":{1:"M.5,0 L.5,.5 L0,.5"},"â”›":{3:"M.5,0 L.5,.5 L0,.5"},"â”œ":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”£":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”¤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”«":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”¬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”³":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”´":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”»":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”¼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•‹":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•´":{1:"M.5,.5 L0,.5"},"â•¸":{3:"M.5,.5 L0,.5"},"â•µ":{1:"M.5,.5 L.5,0"},"â•¹":{3:"M.5,.5 L.5,0"},"â•¶":{1:"M.5,.5 L1,.5"},"â•º":{3:"M.5,.5 L1,.5"},"â•·":{1:"M.5,.5 L.5,1"},"â•»":{3:"M.5,.5 L.5,1"},"â•":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•‘":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•’":{1:(C,b)=>`M.5,1 L.5,${.5-b} L1,${.5-b} M.5,${.5+b} L1,${.5+b}`},"â•“":{1:(C,b)=>`M${.5-C},1 L${.5-C},.5 L1,.5 M${.5+C},.5 L${.5+C},1`},"â•”":{1:(C,b)=>`M1,${.5-b} L${.5-C},${.5-b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1`},"â••":{1:(C,b)=>`M0,${.5-b} L.5,${.5-b} L.5,1 M0,${.5+b} L.5,${.5+b}`},"â•–":{1:(C,b)=>`M${.5+C},1 L${.5+C},.5 L0,.5 M${.5-C},.5 L${.5-C},1`},"â•—":{1:(C,b)=>`M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M0,${.5-b} L${.5+C},${.5-b} L${.5+C},1`},"â•˜":{1:(C,b)=>`M.5,0 L.5,${.5+b} L1,${.5+b} M.5,${.5-b} L1,${.5-b}`},"â•™":{1:(C,b)=>`M1,.5 L${.5-C},.5 L${.5-C},0 M${.5+C},.5 L${.5+C},0`},"â•š":{1:(C,b)=>`M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0 M1,${.5+b} L${.5-C},${.5+b} L${.5-C},0`},"â•›":{1:(C,b)=>`M0,${.5+b} L.5,${.5+b} L.5,0 M0,${.5-b} L.5,${.5-b}`},"â•œ":{1:(C,b)=>`M0,.5 L${.5+C},.5 L${.5+C},0 M${.5-C},.5 L${.5-C},0`},"â•":{1:(C,b)=>`M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M0,${.5+b} L${.5+C},${.5+b} L${.5+C},0`},"â•ž":{1:(C,b)=>`M.5,0 L.5,1 M.5,${.5-b} L1,${.5-b} M.5,${.5+b} L1,${.5+b}`},"â•Ÿ":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1 M${.5+C},.5 L1,.5`},"â• ":{1:(C,b)=>`M${.5-C},0 L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•¡":{1:(C,b)=>`M.5,0 L.5,1 M0,${.5-b} L.5,${.5-b} M0,${.5+b} L.5,${.5+b}`},"â•¢":{1:(C,b)=>`M0,.5 L${.5-C},.5 M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•£":{1:(C,b)=>`M${.5+C},0 L${.5+C},1 M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0`},"â•¤":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b} M.5,${.5+b} L.5,1`},"â•¥":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},.5 L${.5-C},1 M${.5+C},.5 L${.5+C},1`},"â•¦":{1:(C,b)=>`M0,${.5-b} L1,${.5-b} M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1`},"â•§":{1:(C,b)=>`M.5,0 L.5,${.5-b} M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•¨":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},.5 L${.5-C},0 M${.5+C},.5 L${.5+C},0`},"â•©":{1:(C,b)=>`M0,${.5+b} L1,${.5+b} M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•ª":{1:(C,b)=>`M.5,0 L.5,1 M0,${.5-b} L1,${.5-b} M0,${.5+b} L1,${.5+b}`},"â•«":{1:(C,b)=>`M0,.5 L1,.5 M${.5-C},0 L${.5-C},1 M${.5+C},0 L${.5+C},1`},"â•¬":{1:(C,b)=>`M0,${.5+b} L${.5-C},${.5+b} L${.5-C},1 M1,${.5+b} L${.5+C},${.5+b} L${.5+C},1 M0,${.5-b} L${.5-C},${.5-b} L${.5-C},0 M1,${.5-b} L${.5+C},${.5-b} L${.5+C},0`},"â•±":{1:"M1,0 L0,1"},"â•²":{1:"M0,0 L1,1"},"â•³":{1:"M1,0 L0,1 M0,0 L1,1"},"â•¼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â•½":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"â•¾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â•¿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”Ž":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”‘":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"â”’":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”•":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"â”–":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”™":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"â”š":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"â”ž":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”Ÿ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â” ":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"â”¡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â”¢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"â”¥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"â”¦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”§":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”¨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"â”©":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"â”ª":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"â”­":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”®":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”¯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"â”°":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”±":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â”²":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â”µ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”·":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"â”¸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”¹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â”º":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"â”½":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”¿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"â•€":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â•":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â•‚":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"â•ƒ":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â•„":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â•…":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â•†":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â•‡":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"â•ˆ":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â•‰":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â•Š":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â•Œ":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â•":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â”„":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”…":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”ˆ":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â”‰":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â•Ž":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â•":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â”†":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”‡":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”Š":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â”‹":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â•­":{1:(C,b)=>`M.5,1 L.5,${.5+b/.15*.5} C.5,${.5+b/.15*.5},.5,.5,1,.5`},"â•®":{1:(C,b)=>`M.5,1 L.5,${.5+b/.15*.5} C.5,${.5+b/.15*.5},.5,.5,0,.5`},"â•¯":{1:(C,b)=>`M.5,0 L.5,${.5-b/.15*.5} C.5,${.5-b/.15*.5},.5,.5,0,.5`},"â•°":{1:(C,b)=>`M.5,0 L.5,${.5-b/.15*.5} C.5,${.5-b/.15*.5},.5,.5,1,.5`}},u.powerlineDefinitions={"î‚°":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"î‚±":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"î‚²":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"î‚³":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"î‚´":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"î‚µ":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"î‚¶":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"î‚·":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"î‚¸":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"î‚¹":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚º":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"î‚¼":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"î‚½":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚¾":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},u.powerlineDefinitions["î‚»"]=u.powerlineDefinitions["î‚½"],u.powerlineDefinitions["î‚¿"]=u.powerlineDefinitions["î‚¹"],u.tryDrawCustomChar=function(C,b,I,R,S,B,U,F){const $=u.blockElementDefinitions[b];if($)return function(T,P,X,q,W,j){for(let H=0;H<P.length;H++){const re=P[H],K=W/8,J=j/8;T.fillRect(X+re.x*K,q+re.y*J,re.w*K,re.h*J)}}(C,$,I,R,S,B),!0;const A=O[b];if(A)return function(T,P,X,q,W,j){let H=x.get(P);H||(H=new Map,x.set(P,H));const re=T.fillStyle;if(typeof re!="string")throw new Error(`Unexpected fillStyle type "${re}"`);let K=H.get(re);if(!K){const J=P[0].length,le=P.length,se=document.createElement("canvas");se.width=J,se.height=le;const Le=(0,p.throwIfFalsy)(se.getContext("2d")),xe=new ImageData(J,le);let Me,fe,je,ae;if(re.startsWith("#"))Me=parseInt(re.slice(1,3),16),fe=parseInt(re.slice(3,5),16),je=parseInt(re.slice(5,7),16),ae=re.length>7&&parseInt(re.slice(7,9),16)||1;else{if(!re.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${re}" when drawing pattern glyph`);[Me,fe,je,ae]=re.substring(5,re.length-1).split(",").map(oe=>parseFloat(oe))}for(let oe=0;oe<le;oe++)for(let ce=0;ce<J;ce++)xe.data[4*(oe*J+ce)]=Me,xe.data[4*(oe*J+ce)+1]=fe,xe.data[4*(oe*J+ce)+2]=je,xe.data[4*(oe*J+ce)+3]=P[oe][ce]*(255*ae);Le.putImageData(xe,0,0),K=(0,p.throwIfFalsy)(T.createPattern(se,null)),H.set(re,K)}T.fillStyle=K,T.fillRect(X,q,W,j)}(C,A,I,R,S,B),!0;const M=u.boxDrawingDefinitions[b];if(M)return function(T,P,X,q,W,j,H){T.strokeStyle=T.fillStyle;for(const[re,K]of Object.entries(P)){let J;T.beginPath(),T.lineWidth=H*Number.parseInt(re),J=typeof K=="function"?K(.15,.15/j*W):K;for(const le of J.split(" ")){const se=le[0],Le=y[se];if(!Le){console.error(`Could not find drawing instructions for "${se}"`);continue}const xe=le.substring(1).split(",");xe[0]&&xe[1]&&Le(T,E(xe,W,j,X,q,!0,H))}T.stroke(),T.closePath()}}(C,M,I,R,S,B,F),!0;const G=u.powerlineDefinitions[b];return!!G&&(function(T,P,X,q,W,j,H,re){var K,J;const le=new Path2D;le.rect(X,q,W,j),T.clip(le),T.beginPath();const se=H/12;T.lineWidth=re*se;for(const Le of P.d.split(" ")){const xe=Le[0],Me=y[xe];if(!Me){console.error(`Could not find drawing instructions for "${xe}"`);continue}const fe=Le.substring(1).split(",");fe[0]&&fe[1]&&Me(T,E(fe,W,j,X,q,!1,re,((K=P.leftPadding)!==null&&K!==void 0?K:0)*(se/2),((J=P.rightPadding)!==null&&J!==void 0?J:0)*(se/2)))}P.type===1?(T.strokeStyle=T.fillStyle,T.stroke()):T.fill(),T.closePath()}(C,G,I,R,S,B,U,F),!0)};const x=new Map;function v(C,b,I=0){return Math.max(Math.min(C,b),I)}const y={C:(C,b)=>C.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]),L:(C,b)=>C.lineTo(b[0],b[1]),M:(C,b)=>C.moveTo(b[0],b[1])};function E(C,b,I,R,S,B,U,F=0,$=0){const A=C.map(M=>parseFloat(M)||parseInt(M));if(A.length<2)throw new Error("Too few arguments for instruction");for(let M=0;M<A.length;M+=2)A[M]*=b-F*U-$*U,B&&A[M]!==0&&(A[M]=v(Math.round(A[M]+.5)-.5,b,0)),A[M]+=R+F*U;for(let M=1;M<A.length;M+=2)A[M]*=I,B&&A[M]!==0&&(A[M]=v(Math.round(A[M]+.5)-.5,I,0)),A[M]+=S;return A}},56:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.observeDevicePixelDimensions=void 0;const p=m(859);u.observeDevicePixelDimensions=function(O,x,v){let y=new x.ResizeObserver(E=>{const C=E.find(R=>R.target===O);if(!C)return;if(!("devicePixelContentBoxSize"in C))return y?.disconnect(),void(y=void 0);const b=C.devicePixelContentBoxSize[0].inlineSize,I=C.devicePixelContentBoxSize[0].blockSize;b>0&&I>0&&v(b,I)});try{y.observe(O,{box:["device-pixel-content-box"]})}catch{y.disconnect(),y=void 0}return(0,p.toDisposable)(()=>y?.disconnect())}},374:(g,u)=>{function m(p){return 57508<=p&&p<=57558}Object.defineProperty(u,"__esModule",{value:!0}),u.createRenderDimensions=u.excludeFromContrastRatioDemands=u.isRestrictedPowerlineGlyph=u.isPowerlineGlyph=u.throwIfFalsy=void 0,u.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},u.isPowerlineGlyph=m,u.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},u.excludeFromContrastRatioDemands=function(p){return m(p)||function(O){return 9472<=O&&O<=9631}(p)},u.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createSelectionRenderModel=void 0;class m{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(O,x,v,y=!1){if(this.selectionStart=x,this.selectionEnd=v,!x||!v||x[0]===v[0]&&x[1]===v[1])return void this.clear();const E=x[1]-O.buffer.active.viewportY,C=v[1]-O.buffer.active.viewportY,b=Math.max(E,0),I=Math.min(C,O.rows-1);b>=O.rows||I<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=E,this.viewportEndRow=C,this.viewportCappedStartRow=b,this.viewportCappedEndRow=I,this.startCol=x[0],this.endCol=v[0])}isCellSelected(O,x,v){return!!this.hasSelection&&(v-=O.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?x>=this.startCol&&v>=this.viewportCappedStartRow&&x<this.endCol&&v<=this.viewportCappedEndRow:x<this.startCol&&v>=this.viewportCappedStartRow&&x>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&x>=this.startCol&&x<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&x<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&x>=this.startCol)}}u.createSelectionRenderModel=function(){return new m}},509:function(g,u,m){var p=this&&this.__decorate||function(G,T,P,X){var q,W=arguments.length,j=W<3?T:X===null?X=Object.getOwnPropertyDescriptor(T,P):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(G,T,P,X);else for(var H=G.length-1;H>=0;H--)(q=G[H])&&(j=(W<3?q(j):W>3?q(T,P,j):q(T,P))||j);return W>3&&j&&Object.defineProperty(T,P,j),j};Object.defineProperty(u,"__esModule",{value:!0}),u.TextureAtlas=void 0;const O=m(237),x=m(860),v=m(374),y=m(160),E=m(345),C=m(485),b=m(385),I=m(147),R=m(855),S=m(776),B={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let U;class F{get pages(){return this._pages}constructor(T,P,X){this._document=T,this._config=P,this._unicodeService=X,this._didWarmUp=!1,this._cacheMap=new C.FourKeyMap,this._cacheMapCombined=new C.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new I.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new E.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new E.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=M(T,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const T of this.pages)T.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const T=new b.IdleTaskQueue;for(let P=33;P<126;P++)T.enqueue(()=>{if(!this._cacheMap.get(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT)){const X=this._drawToCache(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT);this._cacheMap.set(P,R.DEFAULT_COLOR,R.DEFAULT_COLOR,R.DEFAULT_EXT,X)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const T of this._pages)T.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(F.maxAtlasPages&&this._pages.length>=Math.max(4,F.maxAtlasPages)){const P=this._pages.filter(K=>2*K.canvas.width<=(F.maxTextureSize||4096)).sort((K,J)=>J.canvas.width!==K.canvas.width?J.canvas.width-K.canvas.width:J.percentageUsed-K.percentageUsed);let X=-1,q=0;for(let K=0;K<P.length;K++)if(P[K].canvas.width!==q)X=K,q=P[K].canvas.width;else if(K-X==3)break;const W=P.slice(X,X+4),j=W.map(K=>K.glyphs[0].texturePage).sort((K,J)=>K>J?1:-1),H=this.pages.length-W.length,re=this._mergePages(W,H);re.version++;for(let K=j.length-1;K>=0;K--)this._deletePage(j[K]);this.pages.push(re),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(re.canvas)}const T=new $(this._document,this._textureSize);return this._pages.push(T),this._activePages.push(T),this._onAddTextureAtlasCanvas.fire(T.canvas),T}_mergePages(T,P){const X=2*T[0].canvas.width,q=new $(this._document,X,T);for(const[W,j]of T.entries()){const H=W*j.canvas.width%X,re=Math.floor(W/2)*j.canvas.height;q.ctx.drawImage(j.canvas,H,re);for(const J of j.glyphs)J.texturePage=P,J.sizeClipSpace.x=J.size.x/X,J.sizeClipSpace.y=J.size.y/X,J.texturePosition.x+=H,J.texturePosition.y+=re,J.texturePositionClipSpace.x=J.texturePosition.x/X,J.texturePositionClipSpace.y=J.texturePosition.y/X;this._onRemoveTextureAtlasCanvas.fire(j.canvas);const K=this._activePages.indexOf(j);K!==-1&&this._activePages.splice(K,1)}return q}_deletePage(T){this._pages.splice(T,1);for(let P=T;P<this._pages.length;P++){const X=this._pages[P];for(const q of X.glyphs)q.texturePage--;X.version++}}getRasterizedGlyphCombinedChar(T,P,X,q,W){return this._getFromCacheMap(this._cacheMapCombined,T,P,X,q,W)}getRasterizedGlyph(T,P,X,q,W){return this._getFromCacheMap(this._cacheMap,T,P,X,q,W)}_getFromCacheMap(T,P,X,q,W,j=!1){return U=T.get(P,X,q,W),U||(U=this._drawToCache(P,X,q,W,j),T.set(P,X,q,W,U)),U}_getColorFromAnsiIndex(T){if(T>=this._config.colors.ansi.length)throw new Error("No color found for idx "+T);return this._config.colors.ansi[T]}_getBackgroundColor(T,P,X,q){if(this._config.allowTransparency)return y.NULL_COLOR;let W;switch(T){case 16777216:case 33554432:W=this._getColorFromAnsiIndex(P);break;case 50331648:const j=I.AttributeData.toColorRGB(P);W=y.rgba.toColor(j[0],j[1],j[2]);break;default:W=X?y.color.opaque(this._config.colors.foreground):this._config.colors.background}return W}_getForegroundColor(T,P,X,q,W,j,H,re,K,J){const le=this._getMinimumContrastColor(T,P,X,q,W,j,!1,K,re,J);if(le)return le;let se;switch(W){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&K&&j<8&&(j+=8),se=this._getColorFromAnsiIndex(j);break;case 50331648:const Le=I.AttributeData.toColorRGB(j);se=y.rgba.toColor(Le[0],Le[1],Le[2]);break;default:se=H?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(se=y.color.opaque(se)),re&&(se=y.color.multiplyOpacity(se,O.DIM_OPACITY)),se}_resolveBackgroundRgba(T,P,X){switch(T){case 16777216:case 33554432:return this._getColorFromAnsiIndex(P).rgba;case 50331648:return P<<8;default:return X?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(T,P,X,q){switch(T){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&q&&P<8&&(P+=8),this._getColorFromAnsiIndex(P).rgba;case 50331648:return P<<8;default:return X?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(T,P,X,q,W,j,H,re,K,J){if(this._config.minimumContrastRatio===1||J)return;const le=this._getContrastCache(K),se=le.getColor(T,q);if(se!==void 0)return se||void 0;const Le=this._resolveBackgroundRgba(P,X,H),xe=this._resolveForegroundRgba(W,j,H,re),Me=y.rgba.ensureContrastRatio(Le,xe,this._config.minimumContrastRatio/(K?2:1));if(!Me)return void le.setColor(T,q,null);const fe=y.rgba.toColor(Me>>24&255,Me>>16&255,Me>>8&255);return le.setColor(T,q,fe),fe}_getContrastCache(T){return T?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(T,P,X,q,W=!1){const j=typeof T=="number"?String.fromCharCode(T):T,H=Math.min(this._config.deviceCellWidth*Math.max(j.length,2)+4,this._textureSize);this._tmpCanvas.width<H&&(this._tmpCanvas.width=H);const re=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<re&&(this._tmpCanvas.height=re),this._tmpCtx.save(),this._workAttributeData.fg=X,this._workAttributeData.bg=P,this._workAttributeData.extended.ext=q,this._workAttributeData.isInvisible())return B;const K=!!this._workAttributeData.isBold(),J=!!this._workAttributeData.isInverse(),le=!!this._workAttributeData.isDim(),se=!!this._workAttributeData.isItalic(),Le=!!this._workAttributeData.isUnderline(),xe=!!this._workAttributeData.isStrikethrough(),Me=!!this._workAttributeData.isOverline();let fe=this._workAttributeData.getFgColor(),je=this._workAttributeData.getFgColorMode(),ae=this._workAttributeData.getBgColor(),oe=this._workAttributeData.getBgColorMode();if(J){const ge=fe;fe=ae,ae=ge;const ve=je;je=oe,oe=ve}const ce=this._getBackgroundColor(oe,ae,J,le);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ce.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Ce=K?this._config.fontWeightBold:this._config.fontWeight,He=se?"italic":"";this._tmpCtx.font=`${He} ${Ce} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=O.TEXT_BASELINE;const Te=j.length===1&&(0,v.isPowerlineGlyph)(j.charCodeAt(0)),it=j.length===1&&(0,v.isRestrictedPowerlineGlyph)(j.charCodeAt(0)),Ze=this._getForegroundColor(P,oe,ae,X,je,fe,J,le,K,(0,v.excludeFromContrastRatioDemands)(j.charCodeAt(0)));this._tmpCtx.fillStyle=Ze.css;const Se=it?0:4;let Ge=!1;this._config.customGlyphs!==!1&&(Ge=(0,x.tryDrawCustomChar)(this._tmpCtx,j,Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Ue,Fe=!Te;if(Ue=typeof T=="number"?this._unicodeService.wcwidth(T):this._unicodeService.getStringCellWidth(T),Le){this._tmpCtx.save();const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ve=ge%2==1?.5:0;if(this._tmpCtx.lineWidth=ge,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Fe=!1,this._tmpCtx.strokeStyle=`rgb(${I.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Fe=!1;let at=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&at<8&&(at+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(at).css}this._tmpCtx.beginPath();const nt=Se,$e=Math.ceil(Se+this._config.deviceCharHeight)-ve-(W?2*ge:0),ht=$e+ge,qt=$e+2*ge;for(let at=0;at<Ue;at++){this._tmpCtx.save();const Ke=nt+at*this._config.deviceCellWidth,We=nt+(at+1)*this._config.deviceCellWidth,_e=Ke+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e),this._tmpCtx.moveTo(Ke,qt),this._tmpCtx.lineTo(We,qt);break;case 3:const ot=ge<=1?qt:Math.ceil(Se+this._config.deviceCharHeight-ge/2)-ve,Ve=ge<=1?$e:Math.ceil(Se+this._config.deviceCharHeight+ge/2)-ve,ct=new Path2D;ct.rect(Ke,$e,this._config.deviceCellWidth,qt-$e),this._tmpCtx.clip(ct),this._tmpCtx.moveTo(Ke-this._config.deviceCellWidth/2,ht),this._tmpCtx.bezierCurveTo(Ke-this._config.deviceCellWidth/2,Ve,Ke,Ve,Ke,ht),this._tmpCtx.bezierCurveTo(Ke,ot,_e,ot,_e,ht),this._tmpCtx.bezierCurveTo(_e,Ve,We,Ve,We,ht),this._tmpCtx.bezierCurveTo(We,ot,We+this._config.deviceCellWidth/2,ot,We+this._config.deviceCellWidth/2,ht);break;case 4:this._tmpCtx.setLineDash([Math.round(ge),Math.round(ge)]),this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e);break;default:this._tmpCtx.moveTo(Ke,$e),this._tmpCtx.lineTo(We,$e)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Ge&&this._config.fontSize>=12&&!this._config.allowTransparency&&j!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const at=this._tmpCtx.measureText(j);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in at&&at.actualBoundingBoxDescent>0){this._tmpCtx.save();const Ke=new Path2D;Ke.rect(nt,$e-Math.ceil(ge/2),this._config.deviceCellWidth*Ue,qt-$e+Math.ceil(ge/2)),this._tmpCtx.clip(Ke),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ce.css,this._tmpCtx.strokeText(j,Se,Se+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(Me){const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ve=ge%2==1?.5:0;this._tmpCtx.lineWidth=ge,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Se,Se+ve),this._tmpCtx.lineTo(Se+this._config.deviceCharWidth*Ue,Se+ve),this._tmpCtx.stroke()}if(Ge||this._tmpCtx.fillText(j,Se,Se+this._config.deviceCharHeight),j==="_"&&!this._config.allowTransparency){let ge=A(this._tmpCtx.getImageData(Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight),ce,Ze,Fe);if(ge)for(let ve=1;ve<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ce.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(j,Se,Se+this._config.deviceCharHeight-ve),ge=A(this._tmpCtx.getImageData(Se,Se,this._config.deviceCellWidth,this._config.deviceCellHeight),ce,Ze,Fe),ge);ve++);}if(xe){const ge=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ve=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ge,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Se,Se+Math.floor(this._config.deviceCharHeight/2)-ve),this._tmpCtx.lineTo(Se+this._config.deviceCharWidth*Ue,Se+Math.floor(this._config.deviceCharHeight/2)-ve),this._tmpCtx.stroke()}this._tmpCtx.restore();const Ot=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let we;if(we=this._config.allowTransparency?function(ge){for(let ve=0;ve<ge.data.length;ve+=4)if(ge.data[ve+3]>0)return!1;return!0}(Ot):A(Ot,ce,Ze,Fe),we)return B;const De=this._findGlyphBoundingBox(Ot,this._workBoundingBox,H,it,Ge,Se);let be,Oe;for(;;){if(this._activePages.length===0){const ge=this._createNewPage();be=ge,Oe=ge.currentRow,Oe.height=De.size.y;break}be=this._activePages[this._activePages.length-1],Oe=be.currentRow;for(const ge of this._activePages)De.size.y<=ge.currentRow.height&&(be=ge,Oe=ge.currentRow);for(let ge=this._activePages.length-1;ge>=0;ge--)for(const ve of this._activePages[ge].fixedRows)ve.height<=Oe.height&&De.size.y<=ve.height&&(be=this._activePages[ge],Oe=ve);if(Oe.y+De.size.y>=be.canvas.height||Oe.height>De.size.y+2){let ge=!1;if(be.currentRow.y+be.currentRow.height+De.size.y>=be.canvas.height){let ve;for(const nt of this._activePages)if(nt.currentRow.y+nt.currentRow.height+De.size.y<nt.canvas.height){ve=nt;break}if(ve)be=ve;else if(F.maxAtlasPages&&this._pages.length>=F.maxAtlasPages&&Oe.y+De.size.y<=be.canvas.height&&Oe.height>=De.size.y&&Oe.x+De.size.x<=be.canvas.width)ge=!0;else{const nt=this._createNewPage();be=nt,Oe=nt.currentRow,Oe.height=De.size.y,ge=!0}}ge||(be.currentRow.height>0&&be.fixedRows.push(be.currentRow),Oe={x:0,y:be.currentRow.y+be.currentRow.height,height:De.size.y},be.fixedRows.push(Oe),be.currentRow={x:0,y:Oe.y+Oe.height,height:0})}if(Oe.x+De.size.x<=be.canvas.width)break;Oe===be.currentRow?(Oe.x=0,Oe.y+=Oe.height,Oe.height=0):be.fixedRows.splice(be.fixedRows.indexOf(Oe),1)}return De.texturePage=this._pages.indexOf(be),De.texturePosition.x=Oe.x,De.texturePosition.y=Oe.y,De.texturePositionClipSpace.x=Oe.x/be.canvas.width,De.texturePositionClipSpace.y=Oe.y/be.canvas.height,De.sizeClipSpace.x/=be.canvas.width,De.sizeClipSpace.y/=be.canvas.height,Oe.height=Math.max(Oe.height,De.size.y),Oe.x+=De.size.x,be.ctx.putImageData(Ot,De.texturePosition.x-this._workBoundingBox.left,De.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,De.size.x,De.size.y),be.addGlyph(De),be.version++,De}_findGlyphBoundingBox(T,P,X,q,W,j){P.top=0;const H=q?this._config.deviceCellHeight:this._tmpCanvas.height,re=q?this._config.deviceCellWidth:X;let K=!1;for(let J=0;J<H;J++){for(let le=0;le<re;le++){const se=J*this._tmpCanvas.width*4+4*le+3;if(T.data[se]!==0){P.top=J,K=!0;break}}if(K)break}P.left=0,K=!1;for(let J=0;J<j+re;J++){for(let le=0;le<H;le++){const se=le*this._tmpCanvas.width*4+4*J+3;if(T.data[se]!==0){P.left=J,K=!0;break}}if(K)break}P.right=re,K=!1;for(let J=j+re-1;J>=j;J--){for(let le=0;le<H;le++){const se=le*this._tmpCanvas.width*4+4*J+3;if(T.data[se]!==0){P.right=J,K=!0;break}}if(K)break}P.bottom=H,K=!1;for(let J=H-1;J>=0;J--){for(let le=0;le<re;le++){const se=J*this._tmpCanvas.width*4+4*le+3;if(T.data[se]!==0){P.bottom=J,K=!0;break}}if(K)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:P.right-P.left+1,y:P.bottom-P.top+1},sizeClipSpace:{x:P.right-P.left+1,y:P.bottom-P.top+1},offset:{x:-P.left+j+(q||W?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-P.top+j+(q||W?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}u.TextureAtlas=F,p([S.traceCall],F.prototype,"_drawToCache",null);class ${get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(T){this._glyphs.push(T),this._usedPixels+=T.size.x*T.size.y}constructor(T,P,X){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],X)for(const q of X)this._glyphs.push(...q.glyphs),this._usedPixels+=q._usedPixels;this.canvas=M(T,P,P),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function A(G,T,P,X){const q=T.rgba>>>24,W=T.rgba>>>16&255,j=T.rgba>>>8&255,H=P.rgba>>>24,re=P.rgba>>>16&255,K=P.rgba>>>8&255,J=Math.floor((Math.abs(q-H)+Math.abs(W-re)+Math.abs(j-K))/12);let le=!0;for(let se=0;se<G.data.length;se+=4)G.data[se]===q&&G.data[se+1]===W&&G.data[se+2]===j||X&&Math.abs(G.data[se]-q)+Math.abs(G.data[se+1]-W)+Math.abs(G.data[se+2]-j)<J?G.data[se+3]=0:le=!1;return le}function M(G,T,P){const X=G.createElement("canvas");return X.width=T,X.height=P,X}},160:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.contrastRatio=u.toPaddedHex=u.rgba=u.rgb=u.css=u.color=u.channels=u.NULL_COLOR=void 0;const p=m(399);let O=0,x=0,v=0,y=0;var E,C,b,I,R;function S(U){const F=U.toString(16);return F.length<2?"0"+F:F}function B(U,F){return U<F?(F+.05)/(U+.05):(U+.05)/(F+.05)}u.NULL_COLOR={css:"#00000000",rgba:0},function(U){U.toCss=function(F,$,A,M){return M!==void 0?`#${S(F)}${S($)}${S(A)}${S(M)}`:`#${S(F)}${S($)}${S(A)}`},U.toRgba=function(F,$,A,M=255){return(F<<24|$<<16|A<<8|M)>>>0}}(E||(u.channels=E={})),function(U){function F($,A){return y=Math.round(255*A),[O,x,v]=R.toChannels($.rgba),{css:E.toCss(O,x,v,y),rgba:E.toRgba(O,x,v,y)}}U.blend=function($,A){if(y=(255&A.rgba)/255,y===1)return{css:A.css,rgba:A.rgba};const M=A.rgba>>24&255,G=A.rgba>>16&255,T=A.rgba>>8&255,P=$.rgba>>24&255,X=$.rgba>>16&255,q=$.rgba>>8&255;return O=P+Math.round((M-P)*y),x=X+Math.round((G-X)*y),v=q+Math.round((T-q)*y),{css:E.toCss(O,x,v),rgba:E.toRgba(O,x,v)}},U.isOpaque=function($){return(255&$.rgba)==255},U.ensureContrastRatio=function($,A,M){const G=R.ensureContrastRatio($.rgba,A.rgba,M);if(G)return R.toColor(G>>24&255,G>>16&255,G>>8&255)},U.opaque=function($){const A=(255|$.rgba)>>>0;return[O,x,v]=R.toChannels(A),{css:E.toCss(O,x,v),rgba:A}},U.opacity=F,U.multiplyOpacity=function($,A){return y=255&$.rgba,F($,y*A/255)},U.toColorRGB=function($){return[$.rgba>>24&255,$.rgba>>16&255,$.rgba>>8&255]}}(C||(u.color=C={})),function(U){let F,$;if(!p.isNode){const A=document.createElement("canvas");A.width=1,A.height=1;const M=A.getContext("2d",{willReadFrequently:!0});M&&(F=M,F.globalCompositeOperation="copy",$=F.createLinearGradient(0,0,1,1))}U.toColor=function(A){if(A.match(/#[\da-f]{3,8}/i))switch(A.length){case 4:return O=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),R.toColor(O,x,v);case 5:return O=parseInt(A.slice(1,2).repeat(2),16),x=parseInt(A.slice(2,3).repeat(2),16),v=parseInt(A.slice(3,4).repeat(2),16),y=parseInt(A.slice(4,5).repeat(2),16),R.toColor(O,x,v,y);case 7:return{css:A,rgba:(parseInt(A.slice(1),16)<<8|255)>>>0};case 9:return{css:A,rgba:parseInt(A.slice(1),16)>>>0}}const M=A.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(M)return O=parseInt(M[1]),x=parseInt(M[2]),v=parseInt(M[3]),y=Math.round(255*(M[5]===void 0?1:parseFloat(M[5]))),R.toColor(O,x,v,y);if(!F||!$)throw new Error("css.toColor: Unsupported css format");if(F.fillStyle=$,F.fillStyle=A,typeof F.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(F.fillRect(0,0,1,1),[O,x,v,y]=F.getImageData(0,0,1,1).data,y!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:E.toRgba(O,x,v,y),css:A}}}(b||(u.css=b={})),function(U){function F($,A,M){const G=$/255,T=A/255,P=M/255;return .2126*(G<=.03928?G/12.92:Math.pow((G+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))}U.relativeLuminance=function($){return F($>>16&255,$>>8&255,255&$)},U.relativeLuminance2=F}(I||(u.rgb=I={})),function(U){function F(A,M,G){const T=A>>24&255,P=A>>16&255,X=A>>8&255;let q=M>>24&255,W=M>>16&255,j=M>>8&255,H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));for(;H<G&&(q>0||W>0||j>0);)q-=Math.max(0,Math.ceil(.1*q)),W-=Math.max(0,Math.ceil(.1*W)),j-=Math.max(0,Math.ceil(.1*j)),H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));return(q<<24|W<<16|j<<8|255)>>>0}function $(A,M,G){const T=A>>24&255,P=A>>16&255,X=A>>8&255;let q=M>>24&255,W=M>>16&255,j=M>>8&255,H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));for(;H<G&&(q<255||W<255||j<255);)q=Math.min(255,q+Math.ceil(.1*(255-q))),W=Math.min(255,W+Math.ceil(.1*(255-W))),j=Math.min(255,j+Math.ceil(.1*(255-j))),H=B(I.relativeLuminance2(q,W,j),I.relativeLuminance2(T,P,X));return(q<<24|W<<16|j<<8|255)>>>0}U.ensureContrastRatio=function(A,M,G){const T=I.relativeLuminance(A>>8),P=I.relativeLuminance(M>>8);if(B(T,P)<G){if(P<T){const W=F(A,M,G),j=B(T,I.relativeLuminance(W>>8));if(j<G){const H=$(A,M,G);return j>B(T,I.relativeLuminance(H>>8))?W:H}return W}const X=$(A,M,G),q=B(T,I.relativeLuminance(X>>8));if(q<G){const W=F(A,M,G);return q>B(T,I.relativeLuminance(W>>8))?X:W}return X}},U.reduceLuminance=F,U.increaseLuminance=$,U.toChannels=function(A){return[A>>24&255,A>>16&255,A>>8&255,255&A]},U.toColor=function(A,M,G,T){return{css:E.toCss(A,M,G,T),rgba:E.toRgba(A,M,G,T)}}}(R||(u.rgba=R={})),u.toPaddedHex=S,u.contrastRatio=B},345:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===m)return void this._listeners.splice(p,1)}}})),this._event}fire(m,p){const O=[];for(let x=0;x<this._listeners.length;x++)O.push(this._listeners[x]);for(let x=0;x<O.length;x++)O[x].call(void 0,m,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(m,p){return m(O=>p.fire(O))}},859:(g,u)=>{function m(p){for(const O of p)O.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const O=this._disposables.indexOf(p);O!==-1&&this._disposables.splice(O,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var O;this._isDisposed||p===this._value||((O=this._value)===null||O===void 0||O.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=m,u.getDisposeArrayDisposable=function(p){return{dispose:()=>m(p)}}},485:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FourKeyMap=u.TwoKeyMap=void 0;class m{constructor(){this._data={}}set(O,x,v){this._data[O]||(this._data[O]={}),this._data[O][x]=v}get(O,x){return this._data[O]?this._data[O][x]:void 0}clear(){this._data={}}}u.TwoKeyMap=m,u.FourKeyMap=class{constructor(){this._data=new m}set(p,O,x,v,y){this._data.get(p,O)||this._data.set(p,O,new m),this._data.get(p,O).set(x,v,y)}get(p,O,x,v){var y;return(y=this._data.get(p,O))===null||y===void 0?void 0:y.get(x,v)}clear(){this._data.clear()}}},399:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isChromeOS=u.isLinux=u.isWindows=u.isIphone=u.isIpad=u.isMac=u.getSafariVersion=u.isSafari=u.isLegacyEdge=u.isFirefox=u.isNode=void 0,u.isNode=typeof navigator>"u";const m=u.isNode?"node":navigator.userAgent,p=u.isNode?"node":navigator.platform;u.isFirefox=m.includes("Firefox"),u.isLegacyEdge=m.includes("Edge"),u.isSafari=/^((?!chrome|android).)*safari/i.test(m),u.getSafariVersion=function(){if(!u.isSafari)return 0;const O=m.match(/Version\/(\d+)/);return O===null||O.length<2?0:parseInt(O[1])},u.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),u.isIpad=p==="iPad",u.isIphone=p==="iPhone",u.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),u.isLinux=p.indexOf("Linux")>=0,u.isChromeOS=/\bCrOS\b/.test(m)},385:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DebouncedIdleTask=u.IdleTaskQueue=u.PriorityTaskQueue=void 0;const p=m(399);class O{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let E=0,C=0,b=y.timeRemaining(),I=0;for(;this._i<this._tasks.length;){if(E=Date.now(),this._tasks[this._i]()||this._i++,E=Math.max(1,Date.now()-E),C=Math.max(E,C),I=y.timeRemaining(),1.5*C>I)return b-E<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(b-E))}ms`),void this._start();b=I}this.clear()}}class x extends O{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const E=Date.now()+y;return{timeRemaining:()=>Math.max(0,E-Date.now())}}}u.PriorityTaskQueue=x,u.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends O{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:x,u.DebouncedIdleTask=class{constructor(){this._queue=new u.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ExtendedAttrs=u.AttributeData=void 0;class m{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(x){return[x>>>16&255,x>>>8&255,255&x]}static fromColorRGB(x){return(255&x[0])<<16|(255&x[1])<<8|255&x[2]}clone(){const x=new m;return x.fg=this.fg,x.bg=this.bg,x.extended=this.extended.clone(),x}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}u.AttributeData=m;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(x){this._ext=x}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(x){this._ext&=-469762049,this._ext|=x<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(x){this._ext&=-67108864,this._ext|=67108863&x}get urlId(){return this._urlId}set urlId(x){this._urlId=x}constructor(x=0,v=0){this._ext=0,this._urlId=0,this._ext=x,this._urlId=v}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}u.ExtendedAttrs=p},782:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellData=void 0;const p=m(133),O=m(855),x=m(147);class v extends x.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new x.ExtendedAttrs,this.combinedData=""}static fromCharData(E){const C=new v;return C.setFromCharData(E),C}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(E){this.fg=E[O.CHAR_DATA_ATTR_INDEX],this.bg=0;let C=!1;if(E[O.CHAR_DATA_CHAR_INDEX].length>2)C=!0;else if(E[O.CHAR_DATA_CHAR_INDEX].length===2){const b=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=b&&b<=56319){const I=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=I&&I<=57343?this.content=1024*(b-55296)+I-56320+65536|E[O.CHAR_DATA_WIDTH_INDEX]<<22:C=!0}else C=!0}else this.content=E[O.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|E[O.CHAR_DATA_WIDTH_INDEX]<<22;C&&(this.combinedData=E[O.CHAR_DATA_CHAR_INDEX],this.content=2097152|E[O.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.CellData=v},855:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WHITESPACE_CELL_CODE=u.WHITESPACE_CELL_WIDTH=u.WHITESPACE_CELL_CHAR=u.NULL_CELL_CODE=u.NULL_CELL_WIDTH=u.NULL_CELL_CHAR=u.CHAR_DATA_CODE_INDEX=u.CHAR_DATA_WIDTH_INDEX=u.CHAR_DATA_CHAR_INDEX=u.CHAR_DATA_ATTR_INDEX=u.DEFAULT_EXT=u.DEFAULT_ATTR=u.DEFAULT_COLOR=void 0,u.DEFAULT_COLOR=0,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.DEFAULT_EXT=0,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},133:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Utf8ToUtf32=u.StringToUtf32=u.utf32ToString=u.stringFromCodePoint=void 0,u.stringFromCodePoint=function(m){return m>65535?(m-=65536,String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):String.fromCharCode(m)},u.utf32ToString=function(m,p=0,O=m.length){let x="";for(let v=p;v<O;++v){let y=m[v];y>65535?(y-=65536,x+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):x+=String.fromCharCode(y)}return x},u.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(m,p){const O=m.length;if(!O)return 0;let x=0,v=0;if(this._interim){const y=m.charCodeAt(v++);56320<=y&&y<=57343?p[x++]=1024*(this._interim-55296)+y-56320+65536:(p[x++]=this._interim,p[x++]=y),this._interim=0}for(let y=v;y<O;++y){const E=m.charCodeAt(y);if(55296<=E&&E<=56319){if(++y>=O)return this._interim=E,x;const C=m.charCodeAt(y);56320<=C&&C<=57343?p[x++]=1024*(E-55296)+C-56320+65536:(p[x++]=E,p[x++]=C)}else E!==65279&&(p[x++]=E)}return x}},u.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(m,p){const O=m.length;if(!O)return 0;let x,v,y,E,C=0,b=0,I=0;if(this.interim[0]){let B=!1,U=this.interim[0];U&=(224&U)==192?31:(240&U)==224?15:7;let F,$=0;for(;(F=63&this.interim[++$])&&$<4;)U<<=6,U|=F;const A=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,M=A-$;for(;I<M;){if(I>=O)return 0;if(F=m[I++],(192&F)!=128){I--,B=!0;break}this.interim[$++]=F,U<<=6,U|=63&F}B||(A===2?U<128?I--:p[C++]=U:A===3?U<2048||U>=55296&&U<=57343||U===65279||(p[C++]=U):U<65536||U>1114111||(p[C++]=U)),this.interim.fill(0)}const R=O-4;let S=I;for(;S<O;){for(;!(!(S<R)||128&(x=m[S])||128&(v=m[S+1])||128&(y=m[S+2])||128&(E=m[S+3]));)p[C++]=x,p[C++]=v,p[C++]=y,p[C++]=E,S+=4;if(x=m[S++],x<128)p[C++]=x;else if((224&x)==192){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(b=(31&x)<<6|63&v,b<128){S--;continue}p[C++]=b}else if((240&x)==224){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,C;if(y=m[S++],(192&y)!=128){S--;continue}if(b=(15&x)<<12|(63&v)<<6|63&y,b<2048||b>=55296&&b<=57343||b===65279)continue;p[C++]=b}else if((248&x)==240){if(S>=O)return this.interim[0]=x,C;if(v=m[S++],(192&v)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,C;if(y=m[S++],(192&y)!=128){S--;continue}if(S>=O)return this.interim[0]=x,this.interim[1]=v,this.interim[2]=y,C;if(E=m[S++],(192&E)!=128){S--;continue}if(b=(7&x)<<18|(63&v)<<12|(63&y)<<6|63&E,b<65536||b>1114111)continue;p[C++]=b}}return C}}},776:function(g,u,m){var p=this&&this.__decorate||function(b,I,R,S){var B,U=arguments.length,F=U<3?I:S===null?S=Object.getOwnPropertyDescriptor(I,R):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(b,I,R,S);else for(var $=b.length-1;$>=0;$--)(B=b[$])&&(F=(U<3?B(F):U>3?B(I,R,F):B(I,R))||F);return U>3&&F&&Object.defineProperty(I,R,F),F},O=this&&this.__param||function(b,I){return function(R,S){I(R,S,b)}};Object.defineProperty(u,"__esModule",{value:!0}),u.traceCall=u.setTraceLogger=u.LogService=void 0;const x=m(859),v=m(97),y={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let E,C=u.LogService=class extends x.Disposable{get logLevel(){return this._logLevel}constructor(b){super(),this._optionsService=b,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),E=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(b){for(let I=0;I<b.length;I++)typeof b[I]=="function"&&(b[I]=b[I]())}_log(b,I,R){this._evalLazyOptionalParams(R),b.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+I,...R)}trace(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.trace.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.log,b,I)}debug(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.debug.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.log,b,I)}info(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.INFO&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.info.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.info,b,I)}warn(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.WARN&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.warn.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.warn,b,I)}error(b,...I){var R,S;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((S=(R=this._optionsService.options.logger)===null||R===void 0?void 0:R.error.bind(this._optionsService.options.logger))!==null&&S!==void 0?S:console.error,b,I)}};u.LogService=C=p([O(0,v.IOptionsService)],C),u.setTraceLogger=function(b){E=b},u.traceCall=function(b,I,R){if(typeof R.value!="function")throw new Error("not supported");const S=R.value;R.value=function(...B){if(E.logLevel!==v.LogLevelEnum.TRACE)return S.apply(this,B);E.trace(`GlyphRenderer#${S.name}(${B.map(F=>JSON.stringify(F)).join(", ")})`);const U=S.apply(this,B);return E.trace(`GlyphRenderer#${S.name} return`,U),U}}},726:(g,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createDecorator=u.getServiceDependencies=u.serviceRegistry=void 0;const m="di$target",p="di$dependencies";u.serviceRegistry=new Map,u.getServiceDependencies=function(O){return O[p]||[]},u.createDecorator=function(O){if(u.serviceRegistry.has(O))return u.serviceRegistry.get(O);const x=function(v,y,E){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(C,b,I){b[m]===b?b[p].push({id:C,index:I}):(b[p]=[{id:C,index:I}],b[m]=b)})(x,v,E)};return x.toString=()=>O,u.serviceRegistry.set(O,x),x}},97:(g,u,m)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.IDecorationService=u.IUnicodeService=u.IOscLinkService=u.IOptionsService=u.ILogService=u.LogLevelEnum=u.IInstantiationService=u.ICharsetService=u.ICoreService=u.ICoreMouseService=u.IBufferService=void 0;const p=m(726);var O;u.IBufferService=(0,p.createDecorator)("BufferService"),u.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),u.ICoreService=(0,p.createDecorator)("CoreService"),u.ICharsetService=(0,p.createDecorator)("CharsetService"),u.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(x){x[x.TRACE=0]="TRACE",x[x.DEBUG=1]="DEBUG",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.OFF=5]="OFF"}(O||(u.LogLevelEnum=O={})),u.ILogService=(0,p.createDecorator)("LogService"),u.IOptionsService=(0,p.createDecorator)("OptionsService"),u.IOscLinkService=(0,p.createDecorator)("OscLinkService"),u.IUnicodeService=(0,p.createDecorator)("UnicodeService"),u.IDecorationService=(0,p.createDecorator)("DecorationService")}},o={};function l(g){var u=o[g];if(u!==void 0)return u.exports;var m=o[g]={exports:{}};return r[g].call(m.exports,m,m.exports,l),m.exports}var d={};return(()=>{var g=d;Object.defineProperty(g,"__esModule",{value:!0}),g.WebglAddon=void 0;const u=l(345),m=l(859),p=l(399),O=l(666),x=l(776);class v extends m.Disposable{constructor(E){if(p.isSafari&&(0,p.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=E,this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(E){const C=E._core;if(!E.element)return void this.register(C.onWillOpen(()=>this.activate(E)));this._terminal=E;const b=C.coreService,I=C.optionsService,R=C,S=R._renderService,B=R._characterJoinerService,U=R._charSizeService,F=R._coreBrowserService,$=R._decorationService,A=R._logService,M=R._themeService;(0,x.setTraceLogger)(A),this._renderer=this.register(new O.WebglRenderer(E,B,U,F,b,$,I,M,this._preserveDrawingBuffer)),this.register((0,u.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,u.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,u.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,u.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),S.setRenderer(this._renderer),this.register((0,m.toDisposable)(()=>{const G=this._terminal._core._renderService;G.setRenderer(this._terminal._core._createRenderer()),G.handleResize(E.cols,E.rows)}))}get textureAtlas(){var E;return(E=this._renderer)===null||E===void 0?void 0:E.textureAtlas}clearTextureAtlas(){var E;(E=this._renderer)===null||E===void 0||E.clearTextureAtlas()}}g.WebglAddon=v})(),d})())})(Wf);var HO=Wf.exports,zc={},Qf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseInput=n.InputType=void 0;var e;(function(l){l[l.Text=0]="Text",l[l.AltEnter=1]="AltEnter",l[l.ArrowUp=2]="ArrowUp",l[l.ArrowDown=3]="ArrowDown",l[l.ArrowLeft=4]="ArrowLeft",l[l.ArrowRight=5]="ArrowRight",l[l.Delete=6]="Delete",l[l.Backspace=7]="Backspace",l[l.CtrlA=8]="CtrlA",l[l.CtrlC=9]="CtrlC",l[l.CtrlD=10]="CtrlD",l[l.CtrlE=11]="CtrlE",l[l.CtrlK=12]="CtrlK",l[l.CtrlL=13]="CtrlL",l[l.CtrlQ=14]="CtrlQ",l[l.CtrlS=15]="CtrlS",l[l.CtrlU=16]="CtrlU",l[l.End=17]="End",l[l.Enter=18]="Enter",l[l.Home=19]="Home",l[l.ShiftEnter=20]="ShiftEnter",l[l.UnsupportedControlChar=21]="UnsupportedControlChar",l[l.UnsupportedEscape=22]="UnsupportedEscape"})(e=n.InputType||(n.InputType={}));function r(l){return Array.from(o(l))}n.parseInput=r;function*o(l){let d=[];const g=l[Symbol.iterator]();for(let u=g.next();!u.done;u=g.next()){const m=u.value;if(m.length>1){d.push(m);continue}const p=m.charCodeAt(0);if(d.length>0&&(p<32||p===127)&&(yield{inputType:e.Text,data:d},d=[]),p===27){const O=g.next();if(O.done){d.push("\x1B");continue}let x=e.UnsupportedEscape;if(O.value!=="["){switch(O.value){case"\r":x=e.AltEnter;break}yield{inputType:x,data:["\x1B",O.value]};continue}const v=g.next();if(v.done)continue;if(v.value>="0"&&v.value<="9"){let y=v.value;const E=g.next();if(E.done)return;if(E.value>="0"&&E.value<="9")y+=E.value;else if(E.value!=="~")continue;switch(y){case"3":x=e.Delete;break}yield{inputType:x,data:["\x1B","[",y,"~"]};continue}switch(v.value){case"A":x=e.ArrowUp;break;case"B":x=e.ArrowDown;break;case"C":x=e.ArrowRight;break;case"D":x=e.ArrowLeft;break;case"F":x=e.End;break;case"H":x=e.Home;break;case"\r":x=e.AltEnter;break}yield{inputType:x,data:["\x1B","[",v.value]};continue}if(p<32||p===127){let O=e.UnsupportedControlChar;switch(p){case 1:O=e.CtrlA;break;case 3:O=e.CtrlC;break;case 4:O=e.CtrlD;break;case 5:O=e.CtrlE;break;case 11:O=e.CtrlK;break;case 17:O=e.CtrlQ;break;case 19:O=e.CtrlS;break;case 21:O=e.CtrlU;break;case 13:O=e.Enter;break;case 127:O=e.Backspace;break;case 12:O=e.CtrlL;break}yield{inputType:O,data:[m]};continue}d.push(m)}d.length>0&&(yield{inputType:e.Text,data:d})}})(Qf);var ii={},vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.LineBuffer=void 0;class ZO{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(e,r){this.buf=e,this.pos=r}insert(e){const r=e.length,o=this.pos===this.buf.length;return o?this.buf=this.buf+e:this.buf=this.buf.slice(0,this.pos)+e+this.buf.slice(this.pos),this.pos+=r,o}moveBack(e){const r=this.prevPos(e);return r!==void 0?(this.pos=r,!0):!1}moveForward(e){const r=this.nextPos(e);return r!==void 0?(this.pos=r,!0):!1}moveHome(){const e=this.startOfLine();return this.pos>e?(this.pos=e,!0):!1}moveEnd(){const e=this.endOfLine();return this.pos===e?!1:(this.pos=e,!0)}startOfLine(){const e=this.buf.slice(0,this.pos).lastIndexOf(`
`);return e!==-1?e+1:0}endOfLine(){const e=this.buf.slice(this.pos).indexOf(`
`);return e!==-1?this.pos+e:this.buf.length}moveLineUp(e){const r=this.buf.slice(0,this.pos).lastIndexOf(`
`);if(r===-1)return!1;const o=[...this.buf.slice(r+1,this.pos)].length;let l=this.buf.slice(0,r).lastIndexOf(`
`);l===-1?l=0:l=l+1;let d=r;for(let m=1;m<e&&l!==0;m++)d=l-1,l=this.buf.slice(0,d).lastIndexOf(`
`),l===-1?l=0:l=l+1;const g=[...this.buf.slice(l,d)].slice(0,o);let u=r;return g.length>0&&(u=g.map(m=>m.length).reduce((m,p)=>m+p,0),u=l+u),this.pos=u,!0}moveLineDown(e){const r=this.buf.slice(this.pos).indexOf(`
`);if(r===-1)return!1;let o=this.buf.slice(0,this.pos).lastIndexOf(`
`);o===-1?o=0:o+=1;const l=[...this.buf.slice(o,this.pos)].length;let d=this.pos+r+1,g=this.buf.slice(d).indexOf(`
`);g===-1?g=this.buf.length:g=d+g;for(let m=1;m<e&&g!==this.buf.length;m++)d=g+1,g=this.buf.slice(d).indexOf(`
`),g===-1?g=this.buf.length:g=d+g;const u=[...this.buf.slice(d,g)];return l<u.length?this.pos=u.slice(0,l).map(m=>m.length).reduce((m,p)=>m+p,0)+d:this.pos=g,!0}set_pos(e){this.pos=e}prevPos(e){if(this.pos===0)return;const r=this.buf.slice(0,this.pos);return this.pos-[...r].slice(-e).map(o=>o.length).reduce((o,l)=>o+l,0)}nextPos(e){if(this.pos===this.buf.length)return;const r=this.buf.slice(this.pos);return this.pos+[...r].slice(0,e).map(o=>o.length).reduce((o,l)=>o+l,0)}backspace(e){const r=this.prevPos(e);return r===void 0?!1:(this.buf=this.buf.slice(0,r)+this.buf.slice(this.pos),this.pos=r,!0)}delete(e){const r=this.nextPos(e);return r!==void 0?(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(r),!0):!1}deleteEndOfLine(){if(this.buf.length==0||this.pos==this.buf.length)return!1;const e=this.pos,r=this.endOfLine();return e==r?this.delete(1):this.buf=this.buf.slice(0,e)+this.buf.slice(r),!0}}vo.LineBuffer=ZO;var Gc={exports:{}},KO=({onlyFirst:n=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,n?void 0:"g")};const JO=KO;var eC=n=>typeof n=="string"?n.replace(JO(),""):n,Yc={exports:{}};const Uf=n=>Number.isNaN(n)?!1:n>=4352&&(n<=4447||n===9001||n===9002||11904<=n&&n<=12871&&n!==12351||12880<=n&&n<=19903||19968<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65131||65281<=n&&n<=65376||65504<=n&&n<=65510||110592<=n&&n<=110593||127488<=n&&n<=127569||131072<=n&&n<=262141);Yc.exports=Uf;Yc.exports.default=Uf;var tC=Yc.exports,rC=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const iC=eC,sC=tC,nC=rC,qf=n=>{if(typeof n!="string"||n.length===0||(n=iC(n),n.length===0))return 0;n=n.replace(nC(),"  ");let e=0;for(let r=0;r<n.length;r++){const o=n.codePointAt(r);o<=31||o>=127&&o<=159||o>=768&&o<=879||(o>65535&&r++,e+=sC(o)?2:1)}return e};Gc.exports=qf;Gc.exports.default=qf;var Xf=Gc.exports,oC=Rr&&Rr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ii,"__esModule",{value:!0});ii.State=ii.Layout=ii.Position=void 0;const aC=vo,cC=oC(Xf);class Ki{constructor(e,r){e!==void 0?this.row=e:this.row=0,r!==void 0?this.col=r:this.col=0}}ii.Position=Ki;class Vf{constructor(e){this.promptSize=e,this.cursor=new Ki,this.end=new Ki}}ii.Layout=Vf;class lC{constructor(e,r,o,l){this.line=new aC.LineBuffer,this.highlighting=!1,this.prompt=e,this.tty=r,this.highlighter=o,this.history=l,this.promptSize=r.calculatePosition(e,new Ki),this.layout=new Vf(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):this.highlighting?(this.highlighting=!1,!0):!1}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new Ki,this.layout.end=new Ki,this.refresh()}editInsert(e){const r=this.line.insert(e),o=e.includes(`
`);if(r&&!o){const l=(0,cC.default)(e);l>0&&this.layout.cursor.col+l<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=l,this.layout.end.col+=l,this.tty.write(e)):this.refresh()}else this.refresh()}update(e){this.line.update(e,e.length),this.refresh()}editBackspace(e){this.line.backspace(e)&&this.refresh()}editDelete(e){this.line.delete(e)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const e=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,e,this.highlighter),this.layout=e}moveCursorBack(e){this.line.moveBack(e)&&this.moveCursor()}moveCursorForward(e){this.line.moveForward(e)&&this.moveCursor()}moveCursorUp(e){this.line.moveLineUp(e)?this.moveCursor():this.previousHistory()}moveCursorDown(e){this.line.moveLineDown(e)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(this.history.cursor===-1&&this.line.length()>0)return;const e=this.history.prev();e!==void 0&&this.update(e)}nextHistory(){if(this.history.cursor===-1)return;const e=this.history.next();e!==void 0?this.update(e):this.update("")}moveCursor(){const e=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);e!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,e),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},e)))}}ii.State=lC;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.History=void 0;class hC{constructor(e){this.entries=[],this.cursor=-1,this.maxEntries=e}saveToLocalStorage(){const e=window?.localStorage;e!==void 0&&e.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const e=window?.localStorage;if(e!==void 0){const r=e.getItem("history");if(r==null)return;try{const o=JSON.parse(r);!Array.isArray(o)||o.find(l=>typeof l!="string")!==void 0?(this.entries=[],e.setItem("history","[]")):this.entries=o}catch{this.entries=[],e.setItem("history","[]")}}}append(e){this.resetCursor(),this.entries.includes(e)?(this.entries.splice(this.entries.indexOf(e),1),this.entries.unshift(e)):this.entries.unshift(e),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(this.cursor!==-1)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}}yo.History=hC;var Eo={},uC=Rr&&Rr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.Tty=void 0;const dC=uC(Xf);class fC{constructor(e,r,o,l){this.tabWidth=o,this.col=e,this.row=r,this.out=l}write(e){return this.out.write(e)}print(e){return this.out.print(e)}println(e){return this.out.println(e)}clearScreen(){this.out.write("\x1B[H\x1B[2J")}calculatePosition(e,r){const o=Object.assign({},r);let l=0;return[...e].forEach(d=>{if(d===`
`){o.row+=1,o.col=0;return}let g=0;if(d==="	")g=this.tabWidth-o.col%this.tabWidth;else{let u;[u,l]=gC(d,l),g=u}o.col+=g,o.col>this.col&&(o.row+=1,o.col=g)}),o.col===this.col&&(o.col=0,o.row+=1),o}computeLayout(e,r){const o=Object.assign({},e),l=r.pos,d=this.calculatePosition(r.buf.slice(0,r.pos),e),g=l===r.buf.length?Object.assign({},d):this.calculatePosition(r.buf.slice(l),d);return{promptSize:o,cursor:d,end:g}}refreshLine(e,r,o,l,d){const g=l.cursor,u=l.end;this.clearOldRows(o),this.write(d.highlightPrompt(e)),this.write(d.highlight(r.buf,r.pos)),u.col===0&&u.row>0&&r.buf[r.buf.length-1]!==`
`&&this.write(`
`);const m=u.row-g.row;m>0&&this.write(`\x1B[${m}A`),g.col>0?this.write(`\r\x1B[${g.col}C`):this.write("\r")}clearOldRows(e){const r=e.cursor.row,o=e.end.row,l=Math.max(o-r,0);l>0&&this.write(`\x1B[${l}B`);for(let d=0;d<o;d++)this.write("\r\x1B[0K\x1B[A");this.write("\r\x1B[0K")}moveCursor(e,r){if(r.row>e.row){const o=r.row-e.row;o===1?this.write("\x1B[B"):this.write(`\x1B[${o}B`)}else if(r.row<e.row){const o=e.row-r.row;o===1?this.write("\x1B[A"):this.write(`\x1B[${o}A`)}if(r.col>e.col){const o=r.col-e.col;o===1?this.write("\x1B[C"):this.write(`\x1B[${o}C`)}else if(r.col<e.col){const o=e.col-r.col;o===1?this.write("\x1B[D"):this.write(`\x1B[${o}D`)}}}Eo.Tty=fC;function gC(n,e){return e===1?n==="["?[0,2]:[0,0]:e===2?n===";"||n[0]>="0"&&n[0]<="9"?[0,e]:[0,0]:n==="\x1B"?[0,1]:n===`
`?[0,e]:[(0,dC.default)(n),e]}var So={};Object.defineProperty(So,"__esModule",{value:!0});So.IdentityHighlighter=void 0;class pC{highlight(e,r){return e}highlightPrompt(e){return e}highlightChar(e,r){return!1}}So.IdentityHighlighter=pC;Object.defineProperty(zc,"__esModule",{value:!0});var jf=zc.Readline=void 0;const rt=Qf,Ca=ii,mC=yo,Sh=Eo,_C=So;class xC{constructor(){this.highlighter=new _C.IdentityHighlighter,this.history=new mC.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new Ca.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=e=>{},this.history.restoreFromLocalStorage()}activate(e){this.term=e,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}appendHistory(e){this.history.append(e)}setHighlighter(e){this.highlighter=e}setCheckHandler(e){this.checkHandler=e}setCtrlCHandler(e){this.ctrlCHandler=e}setPauseHandler(e){this.pauseHandler=e}writeReady(){return!this.highWater}write(e){e===`
`?e=`\r
`:(e=e.replace(/^\n/,`\r
`),e=e.replace(/([^\r])\n/g,`$1\r
`));const r=e.length;this.watermark+=r,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(e,()=>{this.watermark=Math.max(this.watermark-r,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(e){return this.write(e)}println(e){return this.write(e+`\r
`)}output(){return this}tty(){var e,r;return((r=(e=this.term)===null||e===void 0?void 0:e.options)===null||r===void 0?void 0:r.tabStopWidth)!==void 0?new Sh.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new Sh.Tty(0,0,8,this.output())}read(e){return new Promise((r,o)=>{if(this.term===void 0){o("addon is not active");return}this.state=new Ca.State(e,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:e,resolve:r,reject:o}})}handleKeyEvent(e){return e.key==="Enter"&&e.shiftKey?(e.type==="keydown"&&this.readKey({inputType:rt.InputType.ShiftEnter,data:["\r"]}),!1):!0}readData(e){const r=(0,rt.parseInput)(e);if(r.length>1||r[0].inputType===rt.InputType.Text&&r[0].data.length>1){this.readPaste(r);return}this.readKey(r[0])}readPaste(e){const r=e.map(o=>o.inputType===rt.InputType.Enter?{inputType:rt.InputType.Text,data:[`
`]}:o);for(const o of r)o.inputType===rt.InputType.Text?this.state.editInsert(o.data.join("")):this.readKey(o)}readKey(e){var r,o,l;if(this.activeRead===void 0){switch(e.inputType){case rt.InputType.CtrlC:this.ctrlCHandler();break;case rt.InputType.CtrlL:this.write("\x1B[H\x1B[2J");break}return}switch(e.inputType){case rt.InputType.Text:this.state.editInsert(e.data.join(""));break;case rt.InputType.AltEnter:case rt.InputType.ShiftEnter:this.state.editInsert(`
`);break;case rt.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),(r=this.term)===null||r===void 0||r.write(`\r
`),this.history.append(this.state.buffer()),(o=this.activeRead)===null||o===void 0||o.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert(`
`);break;case rt.InputType.CtrlC:this.state.moveCursorToEnd(),(l=this.term)===null||l===void 0||l.write(`^C\r
`),this.state=new Ca.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case rt.InputType.CtrlS:this.pauseHandler(!1);break;case rt.InputType.CtrlU:this.state.update("");break;case rt.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case rt.InputType.CtrlQ:this.pauseHandler(!0);break;case rt.InputType.CtrlL:this.state.clearScreen();break;case rt.InputType.Home:case rt.InputType.CtrlA:this.state.moveCursorHome();break;case rt.InputType.End:case rt.InputType.CtrlE:this.state.moveCursorEnd();break;case rt.InputType.Backspace:this.state.editBackspace(1);break;case rt.InputType.Delete:case rt.InputType.CtrlD:this.state.editDelete(1);break;case rt.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case rt.InputType.ArrowRight:this.state.moveCursorForward(1);break;case rt.InputType.ArrowUp:this.state.moveCursorUp(1);break;case rt.InputType.ArrowDown:this.state.moveCursorDown(1);break;case rt.InputType.UnsupportedControlChar:case rt.InputType.UnsupportedEscape:break}}}jf=zc.Readline=xC;const wa="xterm-search-bar__addon";class OC{options;terminal;searchAddon;searchBarElement;searchKey;constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement){this.searchBarElement.style.visibility="visible",this.searchBarElement.querySelector("input").select();return}this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,e.className=wa;const r=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(r.style.position)||(r.style.position="relative"),r.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",o=>{this.searchKey=o.target.value,this.searchAddon.findNext(this.searchKey,{incremental:o.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,r,o){const l=this.terminal.element.parentElement;l.addEventListener(r,d=>{let g=d.target;for(;g!==document.querySelector(e);){if(g===l){g=null;break}g=g.parentElement}g===document.querySelector(e)&&(o.call(this,d),d.stopPropagation())})}addNewStyle(e){let r=document.getElementById(wa);r||(r=document.createElement("style"),r.type="text/css",r.id=wa,document.getElementsByTagName("head")[0].appendChild(r)),r.appendChild(document.createTextNode(e))}}var Hc={exports:{}},ba={exports:{}},Dh;function CC(){return Dh||(Dh=1,function(n){var e={};const r=typeof process<"u"&&e.TERM_PROGRAM==="Hyper",o=typeof process<"u"&&process.platform==="win32",l=typeof process<"u"&&process.platform==="linux",d={ballotDisabled:"â˜’",ballotOff:"â˜",ballotOn:"â˜‘",bullet:"â€¢",bulletWhite:"â—¦",fullBlock:"â–ˆ",heart:"â¤",identicalTo:"â‰¡",line:"â”€",mark:"â€»",middot:"Â·",minus:"ï¼",multiplication:"Ã—",obelus:"Ã·",pencilDownRight:"âœŽ",pencilRight:"âœ",pencilUpRight:"âœ",percent:"%",pilcrow2:"â¡",pilcrow:"Â¶",plusMinus:"Â±",question:"?",section:"Â§",starsOff:"â˜†",starsOn:"â˜…",upDownArrow:"â†•"},g=Object.assign({},d,{check:"âˆš",cross:"Ã—",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"Â»",radioOff:"( )",radioOn:"(*)",warning:"â€¼"}),u=Object.assign({},d,{ballotCross:"âœ˜",check:"âœ”",cross:"âœ–",ellipsisLarge:"â‹¯",ellipsis:"â€¦",info:"â„¹",questionFull:"ï¼Ÿ",questionSmall:"ï¹–",pointer:l?"â–¸":"â¯",pointerSmall:l?"â€£":"â€º",radioOff:"â—¯",radioOn:"â—‰",warning:"âš "});n.exports=o&&!r?g:u,Reflect.defineProperty(n.exports,"common",{enumerable:!1,value:d}),Reflect.defineProperty(n.exports,"windows",{enumerable:!1,value:g}),Reflect.defineProperty(n.exports,"other",{enumerable:!1,value:u})}(ba)),ba.exports}var wC={};const bC=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),vC=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,yC=()=>typeof process<"u"?wC.FORCE_COLOR!=="0":!1,zf=()=>{const n={enabled:yC(),visible:!0,styles:{},keys:{}},e=d=>{let g=d.open=`\x1B[${d.codes[0]}m`,u=d.close=`\x1B[${d.codes[1]}m`,m=d.regex=new RegExp(`\\u001b\\[${d.codes[1]}m`,"g");return d.wrap=(p,O)=>{p.includes(u)&&(p=p.replace(m,u+g));let x=g+p+u;return O?x.replace(/\r*\n/g,`${u}$&${g}`):x},d},r=(d,g,u)=>typeof d=="function"?d(g):d.wrap(g,u),o=(d,g)=>{if(d===""||d==null)return"";if(n.enabled===!1)return d;if(n.visible===!1)return"";let u=""+d,m=u.includes(`
`),p=g.length;for(p>0&&g.includes("unstyle")&&(g=[...new Set(["unstyle",...g])].reverse());p-- >0;)u=r(n.styles[g[p]],u,m);return u},l=(d,g,u)=>{n.styles[d]=e({name:d,codes:g}),(n.keys[u]||(n.keys[u]=[])).push(d),Reflect.defineProperty(n,d,{configurable:!0,enumerable:!0,set(p){n.alias(d,p)},get(){let p=O=>o(O,p.stack);return Reflect.setPrototypeOf(p,n),p.stack=this.stack?this.stack.concat(d):[d],p}})};return l("reset",[0,0],"modifier"),l("bold",[1,22],"modifier"),l("dim",[2,22],"modifier"),l("italic",[3,23],"modifier"),l("underline",[4,24],"modifier"),l("inverse",[7,27],"modifier"),l("hidden",[8,28],"modifier"),l("strikethrough",[9,29],"modifier"),l("black",[30,39],"color"),l("red",[31,39],"color"),l("green",[32,39],"color"),l("yellow",[33,39],"color"),l("blue",[34,39],"color"),l("magenta",[35,39],"color"),l("cyan",[36,39],"color"),l("white",[37,39],"color"),l("gray",[90,39],"color"),l("grey",[90,39],"color"),l("bgBlack",[40,49],"bg"),l("bgRed",[41,49],"bg"),l("bgGreen",[42,49],"bg"),l("bgYellow",[43,49],"bg"),l("bgBlue",[44,49],"bg"),l("bgMagenta",[45,49],"bg"),l("bgCyan",[46,49],"bg"),l("bgWhite",[47,49],"bg"),l("blackBright",[90,39],"bright"),l("redBright",[91,39],"bright"),l("greenBright",[92,39],"bright"),l("yellowBright",[93,39],"bright"),l("blueBright",[94,39],"bright"),l("magentaBright",[95,39],"bright"),l("cyanBright",[96,39],"bright"),l("whiteBright",[97,39],"bright"),l("bgBlackBright",[100,49],"bgBright"),l("bgRedBright",[101,49],"bgBright"),l("bgGreenBright",[102,49],"bgBright"),l("bgYellowBright",[103,49],"bgBright"),l("bgBlueBright",[104,49],"bgBright"),l("bgMagentaBright",[105,49],"bgBright"),l("bgCyanBright",[106,49],"bgBright"),l("bgWhiteBright",[107,49],"bgBright"),n.ansiRegex=vC,n.hasColor=n.hasAnsi=d=>(n.ansiRegex.lastIndex=0,typeof d=="string"&&d!==""&&n.ansiRegex.test(d)),n.alias=(d,g)=>{let u=typeof g=="string"?n[g]:g;if(typeof u!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");u.stack||(Reflect.defineProperty(u,"name",{value:d}),n.styles[d]=u,u.stack=[d]),Reflect.defineProperty(n,d,{configurable:!0,enumerable:!0,set(m){n.alias(d,m)},get(){let m=p=>o(p,m.stack);return Reflect.setPrototypeOf(m,n),m.stack=this.stack?this.stack.concat(u.stack):u.stack,m}})},n.theme=d=>{if(!bC(d))throw new TypeError("Expected theme to be an object");for(let g of Object.keys(d))n.alias(g,d[g]);return n},n.alias("unstyle",d=>typeof d=="string"&&d!==""?(n.ansiRegex.lastIndex=0,d.replace(n.ansiRegex,"")):""),n.alias("noop",d=>d),n.none=n.clear=n.noop,n.stripColor=n.unstyle,n.symbols=CC(),n.define=l,n};Hc.exports=zf();Hc.exports.create=zf;var EC=Hc.exports;const ac=co(EC);ac.enabled=!0;const gt={...ac,peerID:ac.redBright,grey50:n=>`\x1B[0m\x1B[38;5;244m${n}`};var Gf={exports:{}};(function(n){(function(){function e(C,b){document.addEventListener?C.addEventListener("scroll",b,!1):C.attachEvent("scroll",b)}function r(C){document.body?C():document.addEventListener?document.addEventListener("DOMContentLoaded",function b(){document.removeEventListener("DOMContentLoaded",b),C()}):document.attachEvent("onreadystatechange",function b(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",b),C())})}function o(C){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(C)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function l(C,b){C.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function d(C){var b=C.g.offsetWidth,I=b+100;return C.j.style.width=I+"px",C.i.scrollLeft=I,C.h.scrollLeft=C.h.scrollWidth+100,C.l!==b?(C.l=b,!0):!1}function g(C,b){function I(){var S=R;d(S)&&S.g.parentNode!==null&&b(S.l)}var R=C;e(C.h,I),e(C.i,I),d(C)}function u(C,b,I){b=b||{},I=I||window,this.family=C,this.style=b.style||"normal",this.weight=b.weight||"normal",this.stretch=b.stretch||"normal",this.context=I}var m=null,p=null,O=null,x=null;function v(C){return p===null&&(y(C)&&/Apple/.test(window.navigator.vendor)?(C=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),p=!!C&&603>parseInt(C[1],10)):p=!1),p}function y(C){return x===null&&(x=!!C.document.fonts),x}function E(C,b){var I=C.style,R=C.weight;if(O===null){var S=document.createElement("div");try{S.style.font="condensed 100px sans-serif"}catch{}O=S.style.font!==""}return[I,R,O?C.stretch:"","100px",b].join(" ")}u.prototype.load=function(C,b){var I=this,R=C||"BESbswy",S=0,B=b||3e3,U=new Date().getTime();return new Promise(function(F,$){if(y(I.context)&&!v(I.context)){var A=new Promise(function(G,T){function P(){new Date().getTime()-U>=B?T(Error(""+B+"ms timeout exceeded")):I.context.document.fonts.load(E(I,'"'+I.family+'"'),R).then(function(X){1<=X.length?G():setTimeout(P,25)},T)}P()}),M=new Promise(function(G,T){S=setTimeout(function(){T(Error(""+B+"ms timeout exceeded"))},B)});Promise.race([M,A]).then(function(){clearTimeout(S),F(I)},$)}else r(function(){function G(){var se;(se=W!=-1&&j!=-1||W!=-1&&H!=-1||j!=-1&&H!=-1)&&((se=W!=j&&W!=H&&j!=H)||(m===null&&(se=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),m=!!se&&(536>parseInt(se[1],10)||parseInt(se[1],10)===536&&11>=parseInt(se[2],10))),se=m&&(W==re&&j==re&&H==re||W==K&&j==K&&H==K||W==J&&j==J&&H==J)),se=!se),se&&(le.parentNode!==null&&le.parentNode.removeChild(le),clearTimeout(S),F(I))}function T(){if(new Date().getTime()-U>=B)le.parentNode!==null&&le.parentNode.removeChild(le),$(Error(""+B+"ms timeout exceeded"));else{var se=I.context.document.hidden;(se===!0||se===void 0)&&(W=P.g.offsetWidth,j=X.g.offsetWidth,H=q.g.offsetWidth,G()),S=setTimeout(T,50)}}var P=new o(R),X=new o(R),q=new o(R),W=-1,j=-1,H=-1,re=-1,K=-1,J=-1,le=document.createElement("div");le.dir="ltr",l(P,E(I,"sans-serif")),l(X,E(I,"serif")),l(q,E(I,"monospace")),le.appendChild(P.g),le.appendChild(X.g),le.appendChild(q.g),I.context.document.body.appendChild(le),re=P.g.offsetWidth,K=X.g.offsetWidth,J=q.g.offsetWidth,T(),g(P,function(se){W=se,G()}),l(P,E(I,'"'+I.family+'",sans-serif')),g(X,function(se){j=se,G()}),l(X,E(I,'"'+I.family+'",serif')),g(q,function(se){H=se,G()}),l(q,E(I,'"'+I.family+'",monospace'))})})},n.exports=u})()})(Gf);var SC=Gf.exports;const Ah=co(SC);function DC(n){const e=n.options.fontFamily,r=new Ah(e).load(null,5e3),o=new Ah(e,{weight:"bold"}).load(null,5e3);return Promise.all([r,o]).then(()=>{},()=>{n.options.fontFamily="Courier"})}const AC="\r",Th="\x1B[1A",TC="\x1B[2K";class RC extends B0.Terminal{fitAddon;searchAddon;webglAddon;canvasAddon;searchBarAddon;webLinksAddon;ligaturesAddon;readlineAddon;mpyc;isLivePanelVisible=!0;livePanel="";livePanelLines=0;currentLivePanelMessage="";terminalContainer;scrollAreaClone;scrollArea;viewportDiv;constructor(e,r){let o=Be(e);super({screenReaderMode:!1,cols:80,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.mpyc=r,this.terminalContainer=Be("#terminal-container"),this.scrollAreaClone=Be("div.xterm-scroll-area-clone"),this.onResize(d=>{this.updateTermSizeEnv()}),this.fitAddon=new jO.FitAddon,this.searchAddon=new zO.SearchAddon,this.searchBarAddon=new OC({searchAddon:this.searchAddon}),this.webLinksAddon=new YO.WebLinksAddon,this.readlineAddon=new jf,this.readlineAddon.setCheckHandler(d=>!d.trimEnd().endsWith("&&")),this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new HO.WebglAddon,this.loadAddon(this.webglAddon)}catch(d){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",d),this.canvasAddon=new VO.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new GO.Unicode11Addon),this.unicode.activeVersion="11",DC(this).then(()=>{this.open(o),this.viewportDiv=Be("#terminal-container .xterm-viewport"),this.scrollArea=this.viewportDiv.querySelector("div.xterm-scroll-area"),Be(`${e} textarea`).readOnly=!0,new ResizeObserver(()=>{this.scrollAreaClone.style.height=this.scrollArea.clientHeight+"px",this.scrollAreaClone.style.width=this.scrollArea.clientWidth+"px"}).observe(this.scrollArea),this.fit(),IC(this.terminalContainer,this.viewportDiv)}),this.mpyc.runtime.setReadlineFn(d=>this.readlineAddon.read(d)),this.attachCustomKeyEventHandler(d=>{if(d.type==="keydown"){if(d.ctrlKey&&d.key=="c"&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if(d.key=="h")return this.mpyc.runtime.toggleStats(),d.preventDefault(),!1;if(d.key=="r")return this.mpyc.runtime.resetStats(),d.preventDefault(),!1;if(d.ctrlKey&&d.key=="f")return this.searchBarAddon.show(),d.preventDefault(),!1}return!0}),document.addEventListener("keyup",d=>{d.key=="Escape"&&this.searchBarAddon.hidden()}),new ResizeObserver(()=>{this.fit()}).observe(document.querySelector(".split-panel-terminal"))}time(){return gt.cyan.dim(`[${new Date().toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(gt.grey(e),gt.gray("âš’"))}infoChar=Lf?"â“˜":"ðŸ›ˆ";info(e){this._log(gt.greenBright(e),gt.greenBright(this.infoChar))}_log(e,r=" "){e=`${this.time()}  ${r}  ${e}`,this._write_liveln(e)}_write_liveln(e){this.isLivePanelVisible&&(this.writeln(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_write_live(e){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return e==""?"":`${AC}${Th}${(Th+TC).repeat(this._height(e)-1)}`}live(e){this.isLivePanelVisible&&(e=`
${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,gt.green(gt.symbols.check))}warn(e){this._log(gt.italic(e),gt.yellow(gt.symbols.warning))}chatMe(e){e=`${gt.green("Me")}: ${e}`,this._log(e)}chat(e,r){r=`${gt.peerID(eo(e.substring(0,8)))}: ${r}`,this._log(r)}error(e){this._log(gt.redBright(e),gt.red(gt.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${gt.red(gt.symbols.cross)}  ${gt.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}__fit=()=>{console.log("fitting terminal");const e=this.fitAddon.proposeDimensions();if(!e||!this||isNaN(e.cols)||isNaN(e.rows)||(e.rows=Math.max(e.rows,12),e.cols=Math.max(e.cols,this.cols),e.cols==this.cols&&e.rows==this.rows))return;const r=this._core;console.log("resizing terminal to ",e.cols,e.rows),r._renderService.clear(),this.resize(e.cols,e.rows),this.refresh(0,this.rows-1),this.updateTermSizeEnv()};fit=oc(this.__fit);updateTermSizeEnv=oc(()=>{console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})})}const IC=(n,e)=>{let r=!1,o=!1;n.addEventListener("scroll",function(l){r||(o=!0,e.scrollTop=n.scrollTop),r=!1}),e.addEventListener("scroll",function(l){o||(r=!0,n.scrollTop=e.scrollTop),o=!1})};var ye;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var Rh=new Map([[ye.QR_CODE,"QR_CODE"],[ye.AZTEC,"AZTEC"],[ye.CODABAR,"CODABAR"],[ye.CODE_39,"CODE_39"],[ye.CODE_93,"CODE_93"],[ye.CODE_128,"CODE_128"],[ye.DATA_MATRIX,"DATA_MATRIX"],[ye.MAXICODE,"MAXICODE"],[ye.ITF,"ITF"],[ye.EAN_13,"EAN_13"],[ye.EAN_8,"EAN_8"],[ye.PDF_417,"PDF_417"],[ye.RSS_14,"RSS_14"],[ye.RSS_EXPANDED,"RSS_EXPANDED"],[ye.UPC_A,"UPC_A"],[ye.UPC_E,"UPC_E"],[ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ih;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Ih||(Ih={}));function PC(n){return Object.values(ye).includes(n)}var to;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(to||(to={}));var LC=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[to.SCAN_TYPE_CAMERA,to.SCAN_TYPE_FILE],n}(),Yf=function(){function n(e,r){this.format=e,this.formatName=r}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!Rh.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,Rh.get(e))},n}(),Ph=function(){function n(){}return n.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),cc;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(cc||(cc={}));var MC=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:cc.UNKWOWN_ERROR}},n}(),kC=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function Wr(n){return typeof n>"u"||n===null}var Yi=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),Hf=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var o=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(l),g=Object.keys(e),u=0,m=g;u<m.length;u++){var p=m[u];if(d.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},n}(),lc={exports:{}};(function(n,e){(function(r,o){o(e)})(Rr,function(r){function o(L){return L==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,t){L.__proto__=t}||function(L,t){for(var i in t)t.hasOwnProperty(i)&&(L[i]=t[i])};function d(L,t){l(L,t);function i(){this.constructor=L}L.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function g(L,t){var i=Object.setPrototypeOf;i?i(L,t):L.__proto__=t}function u(L,t){t===void 0&&(t=L.constructor);var i=Error.captureStackTrace;i&&i(L,t)}var m=function(L){d(t,L);function t(i){var s=this.constructor,a=L.call(this,i)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),g(a,s.prototype),u(a),a}return t}(Error);class p extends m{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}p.kind="Exception";class O extends p{}O.kind="ArgumentException";class x extends p{}x.kind="IllegalArgumentException";class v{constructor(t){if(this.binarizer=t,t===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,s,a){const c=this.binarizer.getLuminanceSource().crop(t,i,s,a);return new v(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class y extends p{static getChecksumInstance(){return new y}}y.kind="ChecksumException";class E{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(t,i,s,a,c){for(;c--;)s[a++]=t[i++]}static currentTimeMillis(){return Date.now()}}class b extends p{}b.kind="IndexOutOfBoundsException";class I extends b{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}I.kind="ArrayIndexOutOfBoundsException";class R{static fill(t,i){for(let s=0,a=t.length;s<a;s++)t[s]=i}static fillWithin(t,i,s,a){R.rangeCheck(t.length,i,s);for(let c=i;c<s;c++)t[c]=a}static rangeCheck(t,i,s){if(i>s)throw new x("fromIndex("+i+") > toIndex("+s+")");if(i<0)throw new I(i);if(s>t)throw new I(s)}static asList(...t){return t}static create(t,i,s){return Array.from({length:t}).map(c=>Array.from({length:i}).fill(s))}static createInt32Array(t,i,s){return Array.from({length:t}).map(c=>Int32Array.from({length:i}).fill(s))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let s=0,a=t.length;s<a;s++)if(t[s]!==i[s])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const s of t)i=31*i+s;return i}static fillUint8Array(t,i){for(let s=0;s!==t.length;s++)t[s]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const s=new Uint8Array(i);return s.set(t),s}return t.slice(0,i)}static copyOfRange(t,i,s){const a=s-i,c=new Int32Array(a);return C.arraycopy(t,i,c,0,a),c}static binarySearch(t,i,s){s===void 0&&(s=R.numberComparator);let a=0,c=t.length-1;for(;a<=c;){const h=c+a>>1,f=s(i,t[h]);if(f>0)a=h+1;else if(f<0)c=h-1;else return h}return-a-1}static numberComparator(t,i){return t-i}}class S{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let s=31;return i=t<<16,i!==0&&(s-=16,t=i),i=t<<8,i!==0&&(s-=8,t=i),i=t<<4,i!==0&&(s-=4,t=i),i=t<<2,i!==0&&(s-=2,t=i),s-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=B.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=B.makeArray(t);C.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const s=this.bits;let a=Math.floor(t/32),c=s[a];c&=~((1<<(t&31))-1);const h=s.length;for(;c===0;){if(++a===h)return i;c=s[a]}const f=a*32+S.numberOfTrailingZeros(c);return f>i?i:f}getNextUnset(t){const i=this.size;if(t>=i)return i;const s=this.bits;let a=Math.floor(t/32),c=~s[a];c&=~((1<<(t&31))-1);const h=s.length;for(;c===0;){if(++a===h)return i;c=~s[a]}const f=a*32+S.numberOfTrailingZeros(c);return f>i?i:f}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new x;if(i===t)return;i--;const s=Math.floor(t/32),a=Math.floor(i/32),c=this.bits;for(let h=s;h<=a;h++){const f=h>s?0:t&31,w=(2<<(h<a?31:i&31))-(1<<f);c[h]|=w}}clear(){const t=this.bits.length,i=this.bits;for(let s=0;s<t;s++)i[s]=0}isRange(t,i,s){if(i<t||t<0||i>this.size)throw new x;if(i===t)return!0;i--;const a=Math.floor(t/32),c=Math.floor(i/32),h=this.bits;for(let f=a;f<=c;f++){const _=f>a?0:t&31,D=(2<<(f<c?31:i&31))-(1<<_)&4294967295;if((h[f]&D)!==(s?D:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let s=i;s>0;s--)this.appendBit((t>>s-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let s=0;s<i;s++)this.appendBit(t.get(s))}xor(t){if(this.size!==t.size)throw new x("Sizes don't match");const i=this.bits;for(let s=0,a=i.length;s<a;s++)i[s]^=t.bits[s]}toBytes(t,i,s,a){for(let c=0;c<a;c++){let h=0;for(let f=0;f<8;f++)this.get(t)&&(h|=1<<7-f),t++;i[s+c]=h}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),s=i+1,a=this.bits;for(let c=0;c<s;c++){let h=a[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,t[i-c]=h}if(this.size!==s*32){const c=s*32-this.size;let h=t[0]>>>c;for(let f=1;f<s;f++){const _=t[f];h|=_<<32-c,t[f-1]=h,h=_>>>c}t[s-1]=h}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof B))return!1;const i=t;return this.size===i.size&&R.equals(this.bits,i.bits)}hashCode(){return 31*this.size+R.hashCode(this.bits)}toString(){let t="";for(let i=0,s=this.size;i<s;i++)i&7||(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new B(this.size,this.bits.slice())}}var U;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var F=U;class $ extends p{static getFormatInstance(){return new $}}$.kind="FormatException";var A;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(A||(A={}));class M{constructor(t,i,s,...a){this.valueIdentifier=t,this.name=s,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,M.VALUE_IDENTIFIER_TO_ECI.set(t,this),M.NAME_TO_ECI.set(s,this);const c=this.values;for(let h=0,f=c.length;h!==f;h++){const _=c[h];M.VALUES_TO_ECI.set(_,this)}for(const h of a)M.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new $("incorect value");const i=M.VALUES_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}static getCharacterSetECIByName(t){const i=M.NAME_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}equals(t){if(!(t instanceof M))return!1;const i=t;return this.getName()===i.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(A.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(A.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(A.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(A.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(A.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(A.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(A.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(A.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(A.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(A.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(A.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(A.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(A.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(A.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(A.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(A.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(A.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(A.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(A.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(A.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(A.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(A.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(A.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(A.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(A.Big5,28,"Big5"),M.GB18030=new M(A.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(A.EUC_KR,30,"EUC_KR","EUC-KR");class G extends p{}G.kind="UnsupportedOperationException";class T{static decode(t,i){const s=this.encodingName(i);return this.customDecoder?this.customDecoder(t,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(t,s):new TextDecoder(s).decode(t)}static shouldDecodeOnFallback(t){return!T.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const s=this.encodingName(i);return this.customEncoder?this.customEncoder(t,s):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof M?t:M.getCharacterSetECIByName(t)}static decodeFallback(t,i){const s=this.encodingCharacterSet(i);if(T.isDecodeFallbackSupported(s)){let a="";for(let c=0,h=t.length;c<h;c++){let f=t[c].toString(16);f.length<2&&(f="0"+f),a+="%"+f}return decodeURIComponent(a)}if(s.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new G(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(M.UTF8)||t.equals(M.ISO8859_1)||t.equals(M.ASCII)}static encodeFallback(t){const s=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let c=0;c<s.length;c++)a.push(s[c].charCodeAt(0));return new Uint8Array(a)}}class P{static castAsNonUtf8Char(t,i=null){const s=i?i.getName():this.ISO88591;return T.decode(new Uint8Array([t]),s)}static guessEncoding(t,i){if(i!=null&&i.get(F.CHARACTER_SET)!==void 0)return i.get(F.CHARACTER_SET).toString();const s=t.length;let a=!0,c=!0,h=!0,f=0,_=0,w=0,D=0,k=0,Q=0,z=0,Y=0,Z=0,ee=0,ne=0;const pe=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let me=0;me<s&&(a||c||h);me++){const de=t[me]&255;h&&(f>0?de&128?f--:h=!1:de&128&&(de&64?(f++,de&32?(f++,de&16?(f++,de&8?h=!1:D++):w++):_++):h=!1)),a&&(de>127&&de<160?a=!1:de>159&&(de<192||de===215||de===247)&&ne++),c&&(k>0?de<64||de===127||de>252?c=!1:k--:de===128||de===160||de>239?c=!1:de>160&&de<224?(Q++,Y=0,z++,z>Z&&(Z=z)):de>127?(k++,z=0,Y++,Y>ee&&(ee=Y)):(z=0,Y=0))}return h&&f>0&&(h=!1),c&&k>0&&(c=!1),h&&(pe||_+w+D>0)?P.UTF8:c&&(P.ASSUME_SHIFT_JIS||Z>=3||ee>=3)?P.SHIFT_JIS:a&&c?Z===2&&Q===2||ne*10>=s?P.SHIFT_JIS:P.ISO88591:a?P.ISO88591:c?P.SHIFT_JIS:h?P.UTF8:P.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let s=-1;function a(h,f,_,w,D,k){if(h==="%%")return"%";if(i[++s]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let Q=D?parseInt(D.substr(1)):void 0,z;switch(k){case"s":z=i[s];break;case"c":z=i[s][0];break;case"f":z=parseFloat(i[s]).toFixed(h);break;case"p":z=parseFloat(i[s]).toPrecision(h);break;case"e":z=parseFloat(i[s]).toExponential(h);break;case"x":z=parseInt(i[s]).toString(Q||16);break;case"d":z=parseFloat(parseInt(i[s],Q||10).toPrecision(h)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(Q);let Y=parseInt(_),Z=_&&_[0]+""=="0"?"0":" ";for(;z.length<Y;)z=f!==void 0?z+Z:Z+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,a)}static getBytes(t,i){return T.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}P.SHIFT_JIS=M.SJIS.getName(),P.GB2312="GB2312",P.ISO88591=M.ISO8859_1.getName(),P.EUC_JP="EUC_JP",P.UTF8=M.UTF8.getName(),P.PLATFORM_DEFAULT_ENCODING=P.UTF8,P.ASSUME_SHIFT_JIS=!1;class X{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=P.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,s){for(let a=i;i<i+s;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class q{constructor(t,i,s,a){if(this.width=t,this.height=i,this.rowSize=s,this.bits=a,i==null&&(i=t),this.height=i,t<1||i<1)throw new x("Both dimensions must be greater than 0");s==null&&(s=Math.floor((t+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,s=t[0].length,a=new q(s,i);for(let c=0;c<i;c++){const h=t[c];for(let f=0;f<s;f++)h[f]&&a.set(f,c)}return a}static parseFromString(t,i,s){if(t===null)throw new x("stringRepresentation cannot be null");const a=new Array(t.length);let c=0,h=0,f=-1,_=0,w=0;for(;w<t.length;)if(t.charAt(w)===`
`||t.charAt(w)==="\r"){if(c>h){if(f===-1)f=c-h;else if(c-h!==f)throw new x("row lengths do not match");h=c,_++}w++}else if(t.substring(w,w+i.length)===i)w+=i.length,a[c]=!0,c++;else if(t.substring(w,w+s.length)===s)w+=s.length,a[c]=!1,c++;else throw new x("illegal character encountered: "+t.substring(w));if(c>h){if(f===-1)f=c-h;else if(c-h!==f)throw new x("row lengths do not match");_++}const D=new q(f,_);for(let k=0;k<c;k++)a[k]&&D.set(Math.floor(k%f),Math.floor(k/f));return D}get(t,i){const s=i*this.rowSize+Math.floor(t/32);return(this.bits[s]>>>(t&31)&1)!==0}set(t,i){const s=i*this.rowSize+Math.floor(t/32);this.bits[s]|=1<<(t&31)&4294967295}unset(t,i){const s=i*this.rowSize+Math.floor(t/32);this.bits[s]&=~(1<<(t&31)&4294967295)}flip(t,i){const s=i*this.rowSize+Math.floor(t/32);this.bits[s]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new x("input matrix dimensions do not match");const i=new B(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let c=0,h=this.height;c<h;c++){const f=c*s,_=t.getRow(c,i).getBitArray();for(let w=0;w<s;w++)a[f+w]^=_[w]}}clear(){const t=this.bits,i=t.length;for(let s=0;s<i;s++)t[s]=0}setRegion(t,i,s,a){if(i<0||t<0)throw new x("Left and top must be nonnegative");if(a<1||s<1)throw new x("Height and width must be at least 1");const c=t+s,h=i+a;if(h>this.height||c>this.width)throw new x("The region must fit inside the matrix");const f=this.rowSize,_=this.bits;for(let w=i;w<h;w++){const D=w*f;for(let k=t;k<c;k++)_[D+Math.floor(k/32)]|=1<<(k&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new B(this.width):i.clear();const s=this.rowSize,a=this.bits,c=t*s;for(let h=0;h<s;h++)i.setBulk(h*32,a[c+h]);return i}setRow(t,i){C.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let s=new B(t),a=new B(t);for(let c=0,h=Math.floor((i+1)/2);c<h;c++)s=this.getRow(c,s),a=this.getRow(i-1-c,a),s.reverse(),a.reverse(),this.setRow(c,a),this.setRow(i-1-c,s)}getEnclosingRectangle(){const t=this.width,i=this.height,s=this.rowSize,a=this.bits;let c=t,h=i,f=-1,_=-1;for(let w=0;w<i;w++)for(let D=0;D<s;D++){const k=a[w*s+D];if(k!==0){if(w<h&&(h=w),w>_&&(_=w),D*32<c){let Q=0;for(;!(k<<31-Q&4294967295);)Q++;D*32+Q<c&&(c=D*32+Q)}if(D*32+31>f){let Q=31;for(;!(k>>>Q);)Q--;D*32+Q>f&&(f=D*32+Q)}}}return f<c||_<h?null:Int32Array.from([c,h,f-c+1,_-h+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let s=0;for(;s<i.length&&i[s]===0;)s++;if(s===i.length)return null;const a=s/t;let c=s%t*32;const h=i[s];let f=0;for(;!(h<<31-f&4294967295);)f++;return c+=f,Int32Array.from([c,a])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let s=i.length-1;for(;s>=0&&i[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/t);let c=Math.floor(s%t)*32;const h=i[s];let f=31;for(;!(h>>>f);)f--;return c+=f,Int32Array.from([c,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof q))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&R.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+R.hashCode(this.bits),t}toString(t="X ",i="  ",s=`
`){return this.buildToString(t,i,s)}buildToString(t,i,s){let a=new X;for(let c=0,h=this.height;c<h;c++){for(let f=0,_=this.width;f<_;f++)a.append(this.get(f,c)?t:i);a.append(s)}return a.toString()}clone(){return new q(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends p{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class j extends E{constructor(t){super(t),this.luminances=j.EMPTY,this.buckets=new Int32Array(j.LUMINANCE_BUCKETS)}getBlackRow(t,i){const s=this.getLuminanceSource(),a=s.getWidth();i==null||i.getSize()<a?i=new B(a):i.clear(),this.initArrays(a);const c=s.getRow(t,this.luminances),h=this.buckets;for(let _=0;_<a;_++)h[(c[_]&255)>>j.LUMINANCE_SHIFT]++;const f=j.estimateBlackPoint(h);if(a<3)for(let _=0;_<a;_++)(c[_]&255)<f&&i.set(_);else{let _=c[0]&255,w=c[1]&255;for(let D=1;D<a-1;D++){const k=c[D+1]&255;(w*4-_-k)/2<f&&i.set(D),_=w,w=k}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),s=t.getHeight(),a=new q(i,s);this.initArrays(i);const c=this.buckets;for(let _=1;_<5;_++){const w=Math.floor(s*_/5),D=t.getRow(w,this.luminances),k=Math.floor(i*4/5);for(let Q=Math.floor(i/5);Q<k;Q++){const z=D[Q]&255;c[z>>j.LUMINANCE_SHIFT]++}}const h=j.estimateBlackPoint(c),f=t.getMatrix();for(let _=0;_<s;_++){const w=_*i;for(let D=0;D<i;D++)(f[w+D]&255)<h&&a.set(D,_)}return a}createBinarizer(t){return new j(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let s=0;s<j.LUMINANCE_BUCKETS;s++)i[s]=0}static estimateBlackPoint(t){const i=t.length;let s=0,a=0,c=0;for(let D=0;D<i;D++)t[D]>c&&(a=D,c=t[D]),t[D]>s&&(s=t[D]);let h=0,f=0;for(let D=0;D<i;D++){const k=D-a,Q=t[D]*k*k;Q>f&&(h=D,f=Q)}if(a>h){const D=a;a=h,h=D}if(h-a<=i/16)throw new W;let _=h-1,w=-1;for(let D=h-1;D>a;D--){const k=D-a,Q=k*k*(h-D)*(s-t[D]);Q>w&&(_=D,w=Q)}return _<<j.LUMINANCE_SHIFT}}j.LUMINANCE_BITS=5,j.LUMINANCE_SHIFT=8-j.LUMINANCE_BITS,j.LUMINANCE_BUCKETS=1<<j.LUMINANCE_BITS,j.EMPTY=Uint8ClampedArray.from([0]);class H extends j{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),s=t.getHeight();if(i>=H.MINIMUM_DIMENSION&&s>=H.MINIMUM_DIMENSION){const a=t.getMatrix();let c=i>>H.BLOCK_SIZE_POWER;i&H.BLOCK_SIZE_MASK&&c++;let h=s>>H.BLOCK_SIZE_POWER;s&H.BLOCK_SIZE_MASK&&h++;const f=H.calculateBlackPoints(a,c,h,i,s),_=new q(i,s);H.calculateThresholdForBlock(a,c,h,i,s,f,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new H(t)}static calculateThresholdForBlock(t,i,s,a,c,h,f){const _=c-H.BLOCK_SIZE,w=a-H.BLOCK_SIZE;for(let D=0;D<s;D++){let k=D<<H.BLOCK_SIZE_POWER;k>_&&(k=_);const Q=H.cap(D,2,s-3);for(let z=0;z<i;z++){let Y=z<<H.BLOCK_SIZE_POWER;Y>w&&(Y=w);const Z=H.cap(z,2,i-3);let ee=0;for(let pe=-2;pe<=2;pe++){const me=h[Q+pe];ee+=me[Z-2]+me[Z-1]+me[Z]+me[Z+1]+me[Z+2]}const ne=ee/25;H.thresholdBlock(t,Y,k,ne,a,f)}}}static cap(t,i,s){return t<i?i:t>s?s:t}static thresholdBlock(t,i,s,a,c,h){for(let f=0,_=s*c+i;f<H.BLOCK_SIZE;f++,_+=c)for(let w=0;w<H.BLOCK_SIZE;w++)(t[_+w]&255)<=a&&h.set(i+w,s+f)}static calculateBlackPoints(t,i,s,a,c){const h=c-H.BLOCK_SIZE,f=a-H.BLOCK_SIZE,_=new Array(s);for(let w=0;w<s;w++){_[w]=new Int32Array(i);let D=w<<H.BLOCK_SIZE_POWER;D>h&&(D=h);for(let k=0;k<i;k++){let Q=k<<H.BLOCK_SIZE_POWER;Q>f&&(Q=f);let z=0,Y=255,Z=0;for(let ne=0,pe=D*a+Q;ne<H.BLOCK_SIZE;ne++,pe+=a){for(let me=0;me<H.BLOCK_SIZE;me++){const de=t[pe+me]&255;z+=de,de<Y&&(Y=de),de>Z&&(Z=de)}if(Z-Y>H.MIN_DYNAMIC_RANGE)for(ne++,pe+=a;ne<H.BLOCK_SIZE;ne++,pe+=a)for(let me=0;me<H.BLOCK_SIZE;me++)z+=t[pe+me]&255}let ee=z>>H.BLOCK_SIZE_POWER*2;if(Z-Y<=H.MIN_DYNAMIC_RANGE&&(ee=Y/2,w>0&&k>0)){const ne=(_[w-1][k]+2*_[w][k-1]+_[w-1][k-1])/4;Y<ne&&(ee=ne)}_[w][k]=ee}}return _}}H.BLOCK_SIZE_POWER=3,H.BLOCK_SIZE=1<<H.BLOCK_SIZE_POWER,H.BLOCK_SIZE_MASK=H.BLOCK_SIZE-1,H.MINIMUM_DIMENSION=H.BLOCK_SIZE*5,H.MIN_DYNAMIC_RANGE=24;class re{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,s,a){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new X;for(let s=0;s<this.height;s++){const a=this.getRow(s,t);for(let c=0;c<this.width;c++){const h=a[c]&255;let f;h<64?f="#":h<128?f="+":h<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class K extends re{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const s=this.delegate.getRow(t,i),a=this.getWidth();for(let c=0;c<a;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(i);for(let a=0;a<i;a++)s[a]=255-(t[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,s,a){return new K(this.delegate.crop(t,i,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new K(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new K(this.delegate.rotateCounterClockwise45())}}class J extends re{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=J.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return J.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,s){const a=new Uint8ClampedArray(i*s);for(let c=0,h=0,f=t.length;c<f;c+=4,h++){let _;if(t[c+3]===0)_=255;else{const D=t[c],k=t[c+1],Q=t[c+2];_=306*D+601*k+117*Q+512>>10}a[h]=_}return a}getRow(t,i){if(t<0||t>=this.getHeight())throw new x("Requested row is outside the image: "+t);const s=this.getWidth(),a=t*s;return i===null?i=this.buffer.slice(a,a+s):(i.length<s&&(i=new Uint8ClampedArray(s)),i.set(this.buffer.slice(a,a+s))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,s,a){return super.crop(t,i,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),s=i.getContext("2d"),a=t*J.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*c+Math.abs(Math.sin(a))*h),_=Math.ceil(Math.abs(Math.sin(a))*c+Math.abs(Math.cos(a))*h);return i.width=f,i.height=_,s.translate(f/2,_/2),s.rotate(a),s.drawImage(this.canvas,c/-2,h/-2),this.buffer=J.makeBufferFromCanvasImageData(i),this}invert(){return new K(this)}}J.DEGREE_TO_RADIANS=Math.PI/180;class le{constructor(t,i,s){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var se=(globalThis||Rr||self||window||void 0)&&(globalThis||Rr||self||window||void 0).__awaiter||function(L,t,i,s){function a(c){return c instanceof i?c:new i(function(h){h(c)})}return new(i||(i=Promise))(function(c,h){function f(D){try{w(s.next(D))}catch(k){h(k)}}function _(D){try{w(s.throw(D))}catch(k){h(k)}}function w(D){D.done?c(D.value):a(D.value).then(f,_)}w((s=s.apply(L,t||[])).next())})};class Le{constructor(t,i=500,s){this.reader=t,this.timeBetweenScansMillis=i,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const s of t){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const c=s.deviceId||s.id,h=s.label||`Video device ${i.length+1}`,f=s.groupId,_={deviceId:c,label:h,kind:a,groupId:f};i.push(_)}return i})}getVideoInputDevices(){return se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new le(i.deviceId,i.label))})}findDeviceById(t){return se(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(s=>s.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return se(this,void 0,void 0,function*(){this.reset();let s;t?s={deviceId:{exact:t}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(t,i){return se(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(s,i)})}decodeOnceFromStream(t,i){return se(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(t,i,s){return se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,s)})}decodeFromVideoDevice(t,i,s){return se(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeFromConstraints(c,i,s)})}decodeFromConstraints(t,i,s){return se(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,i,s)})}decodeFromStream(t,i,s){return se(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return se(this,void 0,void 0,function*(){const s=this.prepareVideoElement(i);return this.addVideoSource(s,t),this.videoElement=s,this.stream=t,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(t){return new Promise((i,s)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return se(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const s=document.getElementById(t);if(!s)throw new O(`element with id '${t}' not found`);if(s.nodeName.toLowerCase()!==i.toLowerCase())throw new O(`element with id '${t}' must be an ${i} element`);return s}decodeFromImage(t,i){if(!t&&!i)throw new O("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new O("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,s){if(t===void 0&&i===void 0)throw new O("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,s):this.decodeFromVideoElementContinuously(t,s)}decodeFromImageElement(t){if(!t)throw new O("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let s;return this.isImageLoaded(i)?s=this.decodeOnce(i,!1,!0):s=this._decodeOnLoadImage(i),s}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const s=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(s,i)}_decodeFromVideoElementSetup(t){if(!t)throw new O("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new O("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const s=this._decodeOnLoadImage(i);return i.src=t,s}decodeFromVideoUrl(t){if(!t)throw new O("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElement(i);return i.src=t,s}decodeFromVideoUrlContinuously(t,i){if(!t)throw new O("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,i);return s.src=t,a}_decodeOnLoadImage(t){return new Promise((i,s)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,s),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,s=!0){this._stopAsyncDecode=!1;const a=(c,h)=>{if(this._stopAsyncDecode){h(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(t);c(f)}catch(f){const _=i&&f instanceof W,D=(f instanceof y||f instanceof $)&&s;if(_||D)return setTimeout(a,this._timeBetweenDecodingAttempts,c,h);h(f)}};return new Promise((c,h)=>a(c,h))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);i(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){i(null,a);const c=a instanceof y||a instanceof $,h=a instanceof W;(c||h)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,s){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,s=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),s=new J(i),a=new H(s);return new v(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let s,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(s=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(s=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),i.style.width=s+"px",i.style.height=a+"px",i.width=s,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class xe{constructor(t,i,s=i==null?0:8*i.length,a,c,h=C.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=s,this.resultPoints=a,this.format=c,this.timestamp=h,this.text=t,this.rawBytes=i,s==null?this.numBits=i==null?0:8*i.length:this.numBits=s,this.resultPoints=a,this.format=c,this.resultMetadata=null,h==null?this.timestamp=C.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const s=new Array(i.length+t.length);C.arraycopy(i,0,s,0,i.length),C.arraycopy(t,0,s,i.length,t.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Me;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Me||(Me={}));var fe=Me,je;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(je||(je={}));var ae=je;class oe{constructor(t,i,s,a,c=-1,h=-1){this.rawBytes=t,this.text=i,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ce{exp(t){return this.expTable[t]}log(t){if(t===0)throw new x;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class Ce{constructor(t,i){if(i.length===0)throw new x;this.field=t;const s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),C.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let s;if(t===1){s=0;for(let h=0,f=i.length;h!==f;h++){const _=i[h];s=ce.addOrSubtract(s,_)}return s}s=i[0];const a=i.length,c=this.field;for(let h=1;h<a;h++)s=ce.addOrSubtract(c.multiply(t,s),i[h]);return s}addOrSubtract(t){if(!this.field.equals(t.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,s=t.coefficients;if(i.length>s.length){const h=i;i=s,s=h}let a=new Int32Array(s.length);const c=s.length-i.length;C.arraycopy(s,0,a,0,c);for(let h=c;h<s.length;h++)a[h]=ce.addOrSubtract(i[h-c],s[h]);return new Ce(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,s=i.length,a=t.coefficients,c=a.length,h=new Int32Array(s+c-1),f=this.field;for(let _=0;_<s;_++){const w=i[_];for(let D=0;D<c;D++)h[_+D]=ce.addOrSubtract(h[_+D],f.multiply(w,a[D]))}return new Ce(f,h)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,s=this.field,a=new Int32Array(i),c=this.coefficients;for(let h=0;h<i;h++)a[h]=s.multiply(c[h],t);return new Ce(s,a)}multiplyByMonomial(t,i){if(t<0)throw new x;if(i===0)return this.field.getZero();const s=this.coefficients,a=s.length,c=new Int32Array(a+t),h=this.field;for(let f=0;f<a;f++)c[f]=h.multiply(s[f],i);return new Ce(h,c)}divide(t){if(!this.field.equals(t.field))throw new x("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new x("Divide by 0");const i=this.field;let s=i.getZero(),a=this;const c=t.getCoefficient(t.getDegree()),h=i.inverse(c);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const f=a.getDegree()-t.getDegree(),_=i.multiply(a.getCoefficient(a.getDegree()),h),w=t.multiplyByMonomial(f,_),D=i.buildMonomial(f,_);s=s.addOrSubtract(D),a=a.addOrSubtract(w)}return[s,a]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);if(s!==0){if(s<0?(t+=" - ",s=-s):t.length>0&&(t+=" + "),i===0||s!==1){const a=this.field.log(s);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class He extends p{}He.kind="ArithmeticException";class Te extends ce{constructor(t,i,s){super(),this.primitive=t,this.size=i,this.generatorBase=s;const a=new Int32Array(i);let c=1;for(let f=0;f<i;f++)a[f]=c,c*=2,c>=i&&(c^=t,c&=i-1);this.expTable=a;const h=new Int32Array(i);for(let f=0;f<i-1;f++)h[a[f]]=f;this.logTable=h,this.zero=new Ce(this,Int32Array.from([0])),this.one=new Ce(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new x;if(i===0)return this.zero;const s=new Int32Array(t+1);return s[0]=i,new Ce(this,s)}inverse(t){if(t===0)throw new He;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Te.AZTEC_DATA_12=new Te(4201,4096,1),Te.AZTEC_DATA_10=new Te(1033,1024,1),Te.AZTEC_DATA_6=new Te(67,64,1),Te.AZTEC_PARAM=new Te(19,16,1),Te.QR_CODE_FIELD_256=new Te(285,256,0),Te.DATA_MATRIX_FIELD_256=new Te(301,256,1),Te.AZTEC_DATA_8=Te.DATA_MATRIX_FIELD_256,Te.MAXICODE_FIELD_64=Te.AZTEC_DATA_6;class it extends p{}it.kind="ReedSolomonException";class Ze extends p{}Ze.kind="IllegalStateException";class Se{constructor(t){this.field=t}decode(t,i){const s=this.field,a=new Ce(s,t),c=new Int32Array(i);let h=!0;for(let z=0;z<i;z++){const Y=a.evaluateAt(s.exp(z+s.getGeneratorBase()));c[c.length-1-z]=Y,Y!==0&&(h=!1)}if(h)return;const f=new Ce(s,c),_=this.runEuclideanAlgorithm(s.buildMonomial(i,1),f,i),w=_[0],D=_[1],k=this.findErrorLocations(w),Q=this.findErrorMagnitudes(D,k);for(let z=0;z<k.length;z++){const Y=t.length-1-s.log(k[z]);if(Y<0)throw new it("Bad error location");t[Y]=Te.addOrSubtract(t[Y],Q[z])}}runEuclideanAlgorithm(t,i,s){if(t.getDegree()<i.getDegree()){const z=t;t=i,i=z}const a=this.field;let c=t,h=i,f=a.getZero(),_=a.getOne();for(;h.getDegree()>=(s/2|0);){let z=c,Y=f;if(c=h,f=_,c.isZero())throw new it("r_{i-1} was zero");h=z;let Z=a.getZero();const ee=c.getCoefficient(c.getDegree()),ne=a.inverse(ee);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const pe=h.getDegree()-c.getDegree(),me=a.multiply(h.getCoefficient(h.getDegree()),ne);Z=Z.addOrSubtract(a.buildMonomial(pe,me)),h=h.addOrSubtract(c.multiplyByMonomial(pe,me))}if(_=Z.multiply(f).addOrSubtract(Y),h.getDegree()>=c.getDegree())throw new Ze("Division algorithm failed to reduce polynomial?")}const w=_.getCoefficient(0);if(w===0)throw new it("sigmaTilde(0) was zero");const D=a.inverse(w),k=_.multiplyScalar(D),Q=h.multiplyScalar(D);return[k,Q]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const s=new Int32Array(i);let a=0;const c=this.field;for(let h=1;h<c.getSize()&&a<i;h++)t.evaluateAt(h)===0&&(s[a]=c.inverse(h),a++);if(a!==i)throw new it("Error locator degree does not match number of roots");return s}findErrorMagnitudes(t,i){const s=i.length,a=new Int32Array(s),c=this.field;for(let h=0;h<s;h++){const f=c.inverse(i[h]);let _=1;for(let w=0;w<s;w++)if(h!==w){const D=c.multiply(i[w],f),k=D&1?D&-2:D|1;_=c.multiply(_,k)}a[h]=c.multiply(t.evaluateAt(f),c.inverse(_)),c.getGeneratorBase()!==0&&(a[h]=c.multiply(a[h],f))}return a}}var Ge;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(Ge||(Ge={}));class Ue{decode(t){this.ddata=t;let i=t.getBits(),s=this.extractBits(i),a=this.correctBits(s),c=Ue.convertBoolArrayToByteArray(a),h=Ue.getEncodedData(a),f=new oe(c,h,null,null);return f.setNumBits(a.length),f}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,s=Ge.UPPER,a=Ge.UPPER,c="",h=0;for(;h<i;)if(a===Ge.BINARY){if(i-h<5)break;let f=Ue.readCode(t,h,5);if(h+=5,f===0){if(i-h<11)break;f=Ue.readCode(t,h,11)+31,h+=11}for(let _=0;_<f;_++){if(i-h<8){h=i;break}const w=Ue.readCode(t,h,8);c+=P.castAsNonUtf8Char(w),h+=8}a=s}else{let f=a===Ge.DIGIT?4:5;if(i-h<f)break;let _=Ue.readCode(t,h,f);h+=f;let w=Ue.getCharacter(a,_);w.startsWith("CTRL_")?(s=a,a=Ue.getTable(w.charAt(5)),w.charAt(6)==="L"&&(s=a)):(c+=w,a=s)}return c}static getTable(t){switch(t){case"L":return Ge.LOWER;case"P":return Ge.PUNCT;case"M":return Ge.MIXED;case"D":return Ge.DIGIT;case"B":return Ge.BINARY;case"U":default:return Ge.UPPER}}static getCharacter(t,i){switch(t){case Ge.UPPER:return Ue.UPPER_TABLE[i];case Ge.LOWER:return Ue.LOWER_TABLE[i];case Ge.MIXED:return Ue.MIXED_TABLE[i];case Ge.PUNCT:return Ue.PUNCT_TABLE[i];case Ge.DIGIT:return Ue.DIGIT_TABLE[i];default:throw new Ze("Bad table")}}correctBits(t){let i,s;this.ddata.getNbLayers()<=2?(s=6,i=Te.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,i=Te.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,i=Te.AZTEC_DATA_10):(s=12,i=Te.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),c=t.length/s;if(c<a)throw new $;let h=t.length%s,f=new Int32Array(c);for(let Q=0;Q<c;Q++,h+=s)f[Q]=Ue.readCode(t,h,s);try{new Se(i).decode(f,c-a)}catch(Q){throw new $(Q)}let _=(1<<s)-1,w=0;for(let Q=0;Q<a;Q++){let z=f[Q];if(z===0||z===_)throw new $;(z===1||z===_-1)&&w++}let D=new Array(a*s-w),k=0;for(let Q=0;Q<a;Q++){let z=f[Q];if(z===1||z===_-1)D.fill(z>1,k,k+s-1),k+=s-1;else for(let Y=s-1;Y>=0;--Y)D[k++]=(z&1<<Y)!==0}return D}extractBits(t){let i=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(i?11:14)+s*4,c=new Int32Array(a),h=new Array(this.totalBitsInLayer(s,i));if(i)for(let f=0;f<c.length;f++)c[f]=f;else{let f=a+1+2*S.truncDivision(S.truncDivision(a,2)-1,15),_=a/2,w=S.truncDivision(f,2);for(let D=0;D<_;D++){let k=D+S.truncDivision(D,15);c[_-D-1]=w-k-1,c[_+D]=w+k+1}}for(let f=0,_=0;f<s;f++){let w=(s-f)*4+(i?9:12),D=f*2,k=a-1-D;for(let Q=0;Q<w;Q++){let z=Q*2;for(let Y=0;Y<2;Y++)h[_+z+Y]=t.get(c[D+Y],c[D+Q]),h[_+2*w+z+Y]=t.get(c[D+Q],c[k-Y]),h[_+4*w+z+Y]=t.get(c[k-Y],c[k-Q]),h[_+6*w+z+Y]=t.get(c[k-Q],c[D+Y])}_+=w*8}return h}static readCode(t,i,s){let a=0;for(let c=i;c<i+s;c++)a<<=1,t[c]&&(a|=1);return a}static readByte(t,i){let s=t.length-i;return s>=8?Ue.readCode(t,i,8):Ue.readCode(t,i,s)<<8-s}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let s=0;s<i.length;s++)i[s]=Ue.readByte(t,8*s);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ue.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Fe{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,s,a){const c=t-s,h=i-a;return Math.sqrt(c*c+h*h)}static sum(t){let i=0;for(let s=0,a=t.length;s!==a;s++){const c=t[s];i+=c}return i}}class Ot{static floatToIntBits(t){return t}}Ot.MAX_VALUE=Number.MAX_SAFE_INTEGER;class we{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof we){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Ot.floatToIntBits(this.x)+Ot.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),s=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let c,h,f;if(s>=i&&s>=a?(h=t[0],c=t[1],f=t[2]):a>=s&&a>=i?(h=t[1],c=t[0],f=t[2]):(h=t[2],c=t[0],f=t[1]),this.crossProductZ(c,h,f)<0){const _=c;c=f,f=_}t[0]=c,t[1]=h,t[2]=f}static distance(t,i){return Fe.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,s){const a=i.x,c=i.y;return(s.x-a)*(t.y-c)-(s.y-c)*(t.x-a)}}class De{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class be extends De{constructor(t,i,s,a,c){super(t,i),this.compact=s,this.nbDatablocks=a,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Oe{constructor(t,i,s,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Oe.INIT_SIZE),s==null&&(s=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const c=i/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=a-c,this.downInit=a+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let t=this.leftInit,i=this.rightInit,s=this.upInit,a=this.downInit,c=!1,h=!0,f=!1,_=!1,w=!1,D=!1,k=!1;const Q=this.width,z=this.height;for(;h;){h=!1;let Y=!0;for(;(Y||!_)&&i<Q;)Y=this.containsBlackPoint(s,a,i,!1),Y?(i++,h=!0,_=!0):_||i++;if(i>=Q){c=!0;break}let Z=!0;for(;(Z||!w)&&a<z;)Z=this.containsBlackPoint(t,i,a,!0),Z?(a++,h=!0,w=!0):w||a++;if(a>=z){c=!0;break}let ee=!0;for(;(ee||!D)&&t>=0;)ee=this.containsBlackPoint(s,a,t,!1),ee?(t--,h=!0,D=!0):D||t--;if(t<0){c=!0;break}let ne=!0;for(;(ne||!k)&&s>=0;)ne=this.containsBlackPoint(t,i,s,!0),ne?(s--,h=!0,k=!0):k||s--;if(s<0){c=!0;break}h&&(f=!0)}if(!c&&f){const Y=i-t;let Z=null;for(let me=1;Z===null&&me<Y;me++)Z=this.getBlackPointOnSegment(t,a-me,t+me,a);if(Z==null)throw new W;let ee=null;for(let me=1;ee===null&&me<Y;me++)ee=this.getBlackPointOnSegment(t,s+me,t+me,s);if(ee==null)throw new W;let ne=null;for(let me=1;ne===null&&me<Y;me++)ne=this.getBlackPointOnSegment(i,s+me,i-me,s);if(ne==null)throw new W;let pe=null;for(let me=1;pe===null&&me<Y;me++)pe=this.getBlackPointOnSegment(i,a-me,i-me,a);if(pe==null)throw new W;return this.centerEdges(pe,Z,ne,ee)}else throw new W}getBlackPointOnSegment(t,i,s,a){const c=Fe.round(Fe.distance(t,i,s,a)),h=(s-t)/c,f=(a-i)/c,_=this.image;for(let w=0;w<c;w++){const D=Fe.round(t+w*h),k=Fe.round(i+w*f);if(_.get(D,k))return new we(D,k)}return null}centerEdges(t,i,s,a){const c=t.getX(),h=t.getY(),f=i.getX(),_=i.getY(),w=s.getX(),D=s.getY(),k=a.getX(),Q=a.getY(),z=Oe.CORR;return c<this.width/2?[new we(k-z,Q+z),new we(f+z,_+z),new we(w-z,D-z),new we(c+z,h-z)]:[new we(k+z,Q+z),new we(f+z,_-z),new we(w-z,D+z),new we(c-z,h-z)]}containsBlackPoint(t,i,s,a){const c=this.image;if(a){for(let h=t;h<=i;h++)if(c.get(h,s))return!0}else for(let h=t;h<=i;h++)if(c.get(s,h))return!0;return!1}}Oe.INIT_SIZE=10,Oe.CORR=1;class ge{static checkAndNudgePoints(t,i){const s=t.getWidth(),a=t.getHeight();let c=!0;for(let h=0;h<i.length&&c;h+=2){const f=Math.floor(i[h]),_=Math.floor(i[h+1]);if(f<-1||f>s||_<-1||_>a)throw new W;c=!1,f===-1?(i[h]=0,c=!0):f===s&&(i[h]=s-1,c=!0),_===-1?(i[h+1]=0,c=!0):_===a&&(i[h+1]=a-1,c=!0)}c=!0;for(let h=i.length-2;h>=0&&c;h-=2){const f=Math.floor(i[h]),_=Math.floor(i[h+1]);if(f<-1||f>s||_<-1||_>a)throw new W;c=!1,f===-1?(i[h]=0,c=!0):f===s&&(i[h]=s-1,c=!0),_===-1?(i[h+1]=0,c=!0):_===a&&(i[h+1]=a-1,c=!0)}}}class ve{constructor(t,i,s,a,c,h,f,_,w){this.a11=t,this.a21=i,this.a31=s,this.a12=a,this.a22=c,this.a32=h,this.a13=f,this.a23=_,this.a33=w}static quadrilateralToQuadrilateral(t,i,s,a,c,h,f,_,w,D,k,Q,z,Y,Z,ee){const ne=ve.quadrilateralToSquare(t,i,s,a,c,h,f,_);return ve.squareToQuadrilateral(w,D,k,Q,z,Y,Z,ee).times(ne)}transformPoints(t){const i=t.length,s=this.a11,a=this.a12,c=this.a13,h=this.a21,f=this.a22,_=this.a23,w=this.a31,D=this.a32,k=this.a33;for(let Q=0;Q<i;Q+=2){const z=t[Q],Y=t[Q+1],Z=c*z+_*Y+k;t[Q]=(s*z+h*Y+w)/Z,t[Q+1]=(a*z+f*Y+D)/Z}}transformPointsWithValues(t,i){const s=this.a11,a=this.a12,c=this.a13,h=this.a21,f=this.a22,_=this.a23,w=this.a31,D=this.a32,k=this.a33,Q=t.length;for(let z=0;z<Q;z++){const Y=t[z],Z=i[z],ee=c*Y+_*Z+k;t[z]=(s*Y+h*Z+w)/ee,i[z]=(a*Y+f*Z+D)/ee}}static squareToQuadrilateral(t,i,s,a,c,h,f,_){const w=t-s+c-f,D=i-a+h-_;if(w===0&&D===0)return new ve(s-t,c-s,t,a-i,h-a,i,0,0,1);{const k=s-c,Q=f-c,z=a-h,Y=_-h,Z=k*Y-Q*z,ee=(w*Y-Q*D)/Z,ne=(k*D-w*z)/Z;return new ve(s-t+ee*s,f-t+ne*f,t,a-i+ee*a,_-i+ne*_,i,ee,ne,1)}}static quadrilateralToSquare(t,i,s,a,c,h,f,_){return ve.squareToQuadrilateral(t,i,s,a,c,h,f,_).buildAdjoint()}buildAdjoint(){return new ve(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new ve(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class nt extends ge{sampleGrid(t,i,s,a,c,h,f,_,w,D,k,Q,z,Y,Z,ee,ne,pe,me){const de=ve.quadrilateralToQuadrilateral(a,c,h,f,_,w,D,k,Q,z,Y,Z,ee,ne,pe,me);return this.sampleGridWithTransform(t,i,s,de)}sampleGridWithTransform(t,i,s,a){if(i<=0||s<=0)throw new W;const c=new q(i,s),h=new Float32Array(2*i);for(let f=0;f<s;f++){const _=h.length,w=f+.5;for(let D=0;D<_;D+=2)h[D]=D/2+.5,h[D+1]=w;a.transformPoints(h),ge.checkAndNudgePoints(t,h);try{for(let D=0;D<_;D+=2)t.get(Math.floor(h[D]),Math.floor(h[D+1]))&&c.set(D/2,f)}catch{throw new W}}return c}}class $e{static setGridSampler(t){$e.gridSampler=t}static getInstance(){return $e.gridSampler}}$e.gridSampler=new nt;class ht{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new we(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qt{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),s=this.getBullsEyeCorners(i);if(t){let h=s[0];s[0]=s[2],s[2]=h}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new be(a,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new W;let i=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(s,i);let a=0;for(let h=0;h<4;h++){let f=s[(this.shift+h)%4];this.compact?(a<<=7,a+=f>>1&127):(a<<=10,a+=(f>>2&992)+(f>>1&31))}let c=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(t,i){let s=0;t.forEach((a,c,h)=>{let f=(a>>i-2<<1)+(a&1);s=(s<<3)+f}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(S.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new W}getCorrectedParameterData(t,i){let s,a;i?(s=7,a=2):(s=10,a=4);let c=s-a,h=new Int32Array(s);for(let _=s-1;_>=0;--_)h[_]=t&15,t>>=4;try{new Se(Te.AZTEC_PARAM).decode(h,c)}catch{throw new W}let f=0;for(let _=0;_<a;_++)f=(f<<4)+h[_];return f}getBullsEyeCorners(t){let i=t,s=t,a=t,c=t,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let k=this.getFirstDifferent(i,h,1,-1),Q=this.getFirstDifferent(s,h,1,1),z=this.getFirstDifferent(a,h,-1,1),Y=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(Y,k)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(k,Q,z,Y))break}i=k,s=Q,a=z,c=Y,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let f=new we(i.getX()+.5,i.getY()-.5),_=new we(s.getX()+.5,s.getY()+.5),w=new we(a.getX()-.5,a.getY()+.5),D=new we(c.getX()-.5,c.getY()-.5);return this.expandSquare([f,_,w,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,s,a;try{let f=new Oe(this.image).detect();t=f[0],i=f[1],s=f[2],a=f[3]}catch{let _=this.image.getWidth()/2,w=this.image.getHeight()/2;t=this.getFirstDifferent(new ht(_+7,w-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new ht(_+7,w+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ht(_-7,w+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ht(_-7,w-7),!1,-1,-1).toResultPoint()}let c=Fe.round((t.getX()+a.getX()+i.getX()+s.getX())/4),h=Fe.round((t.getY()+a.getY()+i.getY()+s.getY())/4);try{let f=new Oe(this.image,15,c,h).detect();t=f[0],i=f[1],s=f[2],a=f[3]}catch{t=this.getFirstDifferent(new ht(c+7,h-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new ht(c+7,h+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ht(c-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ht(c-7,h-7),!1,-1,-1).toResultPoint()}return c=Fe.round((t.getX()+a.getX()+i.getX()+s.getX())/4),h=Fe.round((t.getY()+a.getY()+i.getY()+s.getY())/4),new ht(c,h)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,s,a,c){let h=$e.getInstance(),f=this.getDimension(),_=f/2-this.nbCenterLayers,w=f/2+this.nbCenterLayers;return h.sampleGrid(t,f,f,_,_,w,_,w,w,_,w,i.getX(),i.getY(),s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY())}sampleLine(t,i,s){let a=0,c=this.distanceResultPoint(t,i),h=c/s,f=t.getX(),_=t.getY(),w=h*(i.getX()-t.getX())/c,D=h*(i.getY()-t.getY())/c;for(let k=0;k<s;k++)this.image.get(Fe.round(f+k*w),Fe.round(_+k*D))&&(a|=1<<s-k-1);return a}isWhiteOrBlackRectangle(t,i,s,a){let c=3;t=new ht(t.getX()-c,t.getY()+c),i=new ht(i.getX()-c,i.getY()-c),s=new ht(s.getX()+c,s.getY()-c),a=new ht(a.getX()+c,a.getY()+c);let h=this.getColor(a,t);if(h===0)return!1;let f=this.getColor(t,i);return f!==h||(f=this.getColor(i,s),f!==h)?!1:(f=this.getColor(s,a),f===h)}getColor(t,i){let s=this.distancePoint(t,i),a=(i.getX()-t.getX())/s,c=(i.getY()-t.getY())/s,h=0,f=t.getX(),_=t.getY(),w=this.image.get(t.getX(),t.getY()),D=Math.ceil(s);for(let Q=0;Q<D;Q++)f+=a,_+=c,this.image.get(Fe.round(f),Fe.round(_))!==w&&h++;let k=h/s;return k>.1&&k<.9?0:k<=.1===w?1:-1}getFirstDifferent(t,i,s,a){let c=t.getX()+s,h=t.getY()+a;for(;this.isValid(c,h)&&this.image.get(c,h)===i;)c+=s,h+=a;for(c-=s,h-=a;this.isValid(c,h)&&this.image.get(c,h)===i;)c+=s;for(c-=s;this.isValid(c,h)&&this.image.get(c,h)===i;)h+=a;return h-=a,new ht(c,h)}expandSquare(t,i,s){let a=s/(2*i),c=t[0].getX()-t[2].getX(),h=t[0].getY()-t[2].getY(),f=(t[0].getX()+t[2].getX())/2,_=(t[0].getY()+t[2].getY())/2,w=new we(f+a*c,_+a*h),D=new we(f-a*c,_-a*h);c=t[1].getX()-t[3].getX(),h=t[1].getY()-t[3].getY(),f=(t[1].getX()+t[3].getX())/2,_=(t[1].getY()+t[3].getY())/2;let k=new we(f+a*c,_+a*h),Q=new we(f-a*c,_-a*h);return[w,k,D,Q]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Fe.round(t.getX()),s=Fe.round(t.getY());return this.isValid(i,s)}distancePoint(t,i){return Fe.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Fe.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class at{decode(t,i=null){let s=null,a=new qt(t.getBlackMatrix()),c=null,h=null;try{let D=a.detectMirror(!1);c=D.getPoints(),this.reportFoundResultPoints(i,c),h=new Ue().decode(D)}catch(D){s=D}if(h==null)try{let D=a.detectMirror(!0);c=D.getPoints(),this.reportFoundResultPoints(i,c),h=new Ue().decode(D)}catch(D){throw s??D}let f=new xe(h.getText(),h.getRawBytes(),h.getNumBits(),c,fe.AZTEC,C.currentTimeMillis()),_=h.getByteSegments();_!=null&&f.putMetadata(ae.BYTE_SEGMENTS,_);let w=h.getECLevel();return w!=null&&f.putMetadata(ae.ERROR_CORRECTION_LEVEL,w),f}reportFoundResultPoints(t,i){if(t!=null){let s=t.get(F.NEED_RESULT_POINT_CALLBACK);s!=null&&i.forEach((a,c,h)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class Ke extends Le{constructor(t=500){super(new at,t)}}class We{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(F.TRY_HARDER)===!0&&t.isRotateSupported()){const c=t.rotateCounterClockwise(),h=this.doDecode(c,i),f=h.getResultMetadata();let _=270;f!==null&&f.get(ae.ORIENTATION)===!0&&(_=_+f.get(ae.ORIENTATION)%360),h.putMetadata(ae.ORIENTATION,_);const w=h.getResultPoints();if(w!==null){const D=c.getHeight();for(let k=0;k<w.length;k++)w[k]=new we(D-w[k].getY()-1,w[k].getX())}return h}else throw new W}}reset(){}doDecode(t,i){const s=t.getWidth(),a=t.getHeight();let c=new B(s);const h=i&&i.get(F.TRY_HARDER)===!0,f=Math.max(1,a>>(h?8:5));let _;h?_=a:_=15;const w=Math.trunc(a/2);for(let D=0;D<_;D++){const k=Math.trunc((D+1)/2),Q=(D&1)===0,z=w+f*(Q?k:-k);if(z<0||z>=a)break;try{c=t.getBlackRow(z,c)}catch{continue}for(let Y=0;Y<2;Y++){if(Y===1&&(c.reverse(),i&&i.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;i.forEach((ee,ne)=>Z.set(ne,ee)),Z.delete(F.NEED_RESULT_POINT_CALLBACK),i=Z}try{const Z=this.decodeRow(z,c,i);if(Y===1){Z.putMetadata(ae.ORIENTATION,180);const ee=Z.getResultPoints();ee!==null&&(ee[0]=new we(s-ee[0].getX()-1,ee[0].getY()),ee[1]=new we(s-ee[1].getX()-1,ee[1].getY()))}return Z}catch{}}}throw new W}static recordPattern(t,i,s){const a=s.length;for(let w=0;w<a;w++)s[w]=0;const c=t.getSize();if(i>=c)throw new W;let h=!t.get(i),f=0,_=i;for(;_<c;){if(t.get(_)!==h)s[f]++;else{if(++f===a)break;s[f]=1,h=!h}_++}if(!(f===a||f===a-1&&_===c))throw new W}static recordPatternInReverse(t,i,s){let a=s.length,c=t.get(i);for(;i>0&&a>=0;)t.get(--i)!==c&&(a--,c=!c);if(a>=0)throw new W;We.recordPattern(t,i+1,s)}static patternMatchVariance(t,i,s){const a=t.length;let c=0,h=0;for(let w=0;w<a;w++)c+=t[w],h+=i[w];if(c<h)return Number.POSITIVE_INFINITY;const f=c/h;s*=f;let _=0;for(let w=0;w<a;w++){const D=t[w],k=i[w]*f,Q=D>k?D-k:k-D;if(Q>s)return Number.POSITIVE_INFINITY;_+=Q}return _/c}}class _e extends We{static findStartPattern(t){const i=t.getSize(),s=t.getNextSet(0);let a=0,c=Int32Array.from([0,0,0,0,0,0]),h=s,f=!1;const _=6;for(let w=s;w<i;w++)if(t.get(w)!==f)c[a]++;else{if(a===_-1){let D=_e.MAX_AVG_VARIANCE,k=-1;for(let Q=_e.CODE_START_A;Q<=_e.CODE_START_C;Q++){const z=We.patternMatchVariance(c,_e.CODE_PATTERNS[Q],_e.MAX_INDIVIDUAL_VARIANCE);z<D&&(D=z,k=Q)}if(k>=0&&t.isRange(Math.max(0,h-(w-h)/2),h,!1))return Int32Array.from([h,w,k]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[a-1]=0,c[a]=0,a--}else a++;c[a]=1,f=!f}throw new W}static decodeCode(t,i,s){We.recordPattern(t,s,i);let a=_e.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<_e.CODE_PATTERNS.length;h++){const f=_e.CODE_PATTERNS[h],_=this.patternMatchVariance(i,f,_e.MAX_INDIVIDUAL_VARIANCE);_<a&&(a=_,c=h)}if(c>=0)return c;throw new W}decodeRow(t,i,s){const a=s&&s.get(F.ASSUME_GS1)===!0,c=_e.findStartPattern(i),h=c[2];let f=0;const _=new Uint8Array(20);_[f++]=h;let w;switch(h){case _e.CODE_START_A:w=_e.CODE_CODE_A;break;case _e.CODE_START_B:w=_e.CODE_CODE_B;break;case _e.CODE_START_C:w=_e.CODE_CODE_C;break;default:throw new $}let D=!1,k=!1,Q="",z=c[0],Y=c[1];const Z=Int32Array.from([0,0,0,0,0,0]);let ee=0,ne=0,pe=h,me=0,de=!0,ze=!1,Qe=!1;for(;!D;){const Bi=k;switch(k=!1,ee=ne,ne=_e.decodeCode(i,Z,Y),_[f++]=ne,ne!==_e.CODE_STOP&&(de=!0),ne!==_e.CODE_STOP&&(me++,pe+=me*ne),z=Y,Y+=Z.reduce((k0,N0)=>k0+N0,0),ne){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new $}switch(w){case _e.CODE_CODE_A:if(ne<64)Qe===ze?Q+=String.fromCharCode(32+ne):Q+=String.fromCharCode(32+ne+128),Qe=!1;else if(ne<96)Qe===ze?Q+=String.fromCharCode(ne-64):Q+=String.fromCharCode(ne+64),Qe=!1;else switch(ne!==_e.CODE_STOP&&(de=!1),ne){case _e.CODE_FNC_1:a&&(Q.length===0?Q+="]C1":Q+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!ze&&Qe?(ze=!0,Qe=!1):ze&&Qe?(ze=!1,Qe=!1):Qe=!0;break;case _e.CODE_SHIFT:k=!0,w=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:w=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:w=_e.CODE_CODE_C;break;case _e.CODE_STOP:D=!0;break}break;case _e.CODE_CODE_B:if(ne<96)Qe===ze?Q+=String.fromCharCode(32+ne):Q+=String.fromCharCode(32+ne+128),Qe=!1;else switch(ne!==_e.CODE_STOP&&(de=!1),ne){case _e.CODE_FNC_1:a&&(Q.length===0?Q+="]C1":Q+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!ze&&Qe?(ze=!0,Qe=!1):ze&&Qe?(ze=!1,Qe=!1):Qe=!0;break;case _e.CODE_SHIFT:k=!0,w=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:w=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:w=_e.CODE_CODE_C;break;case _e.CODE_STOP:D=!0;break}break;case _e.CODE_CODE_C:if(ne<100)ne<10&&(Q+="0"),Q+=ne;else switch(ne!==_e.CODE_STOP&&(de=!1),ne){case _e.CODE_FNC_1:a&&(Q.length===0?Q+="]C1":Q+="");break;case _e.CODE_CODE_A:w=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:w=_e.CODE_CODE_B;break;case _e.CODE_STOP:D=!0;break}break}Bi&&(w=w===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const zt=Y-z;if(Y=i.getNextUnset(Y),!i.isRange(Y,Math.min(i.getSize(),Y+(Y-z)/2),!1))throw new W;if(pe-=me*ee,pe%103!==ee)throw new y;const mr=Q.length;if(mr===0)throw new W;mr>0&&de&&(w===_e.CODE_CODE_C?Q=Q.substring(0,mr-2):Q=Q.substring(0,mr-1));const Gt=(c[1]+c[0])/2,dt=z+zt/2,Pt=_.length,Kt=new Uint8Array(Pt);for(let Bi=0;Bi<Pt;Bi++)Kt[Bi]=_[Bi];const Fi=[new we(Gt,t),new we(dt,t)];return new xe(Q,Kt,0,Fi,fe.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class ot extends We{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let c=ot.findAsteriskPattern(i,a),h=i.getNextSet(c[1]),f=i.getSize(),_,w;do{ot.recordPattern(i,h,a);let Z=ot.toNarrowWidePattern(a);if(Z<0)throw new W;_=ot.patternToChar(Z),this.decodeRowResult+=_,w=h;for(let ee of a)h+=ee;h=i.getNextSet(h)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let Z of a)D+=Z;let k=h-w-D;if(h!==f&&k*2<D)throw new W;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,ee=0;for(let ne=0;ne<Z;ne++)ee+=ot.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(Z)!==ot.ALPHABET_STRING.charAt(ee%43))throw new y;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new W;let Q;this.extendedMode?Q=ot.decodeExtended(this.decodeRowResult):Q=this.decodeRowResult;let z=(c[1]+c[0])/2,Y=w+D/2;return new xe(Q,null,0,[new we(z,t),new we(Y,t)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let s=t.getSize(),a=t.getNextSet(0),c=0,h=a,f=!1,_=i.length;for(let w=a;w<s;w++)if(t.get(w)!==f)i[c]++;else{if(c===_-1){if(this.toNarrowWidePattern(i)===ot.ASTERISK_ENCODING&&t.isRange(Math.max(0,h-Math.floor((w-h)/2)),h,!1))return[h,w];h+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new W}static toNarrowWidePattern(t){let i=t.length,s=0,a;do{let c=2147483647;for(let _ of t)_<c&&_>s&&(c=_);s=c,a=0;let h=0,f=0;for(let _=0;_<i;_++){let w=t[_];w>s&&(f|=1<<i-1-_,a++,h+=w)}if(a===3){for(let _=0;_<i&&a>0;_++){let w=t[_];if(w>s&&(a--,w*2>=h))return-1}return f}}while(a>3);return-1}static patternToChar(t){for(let i=0;i<ot.CHARACTER_ENCODINGS.length;i++)if(ot.CHARACTER_ENCODINGS[i]===t)return ot.ALPHABET_STRING.charAt(i);if(t===ot.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(t){let i=t.length,s="";for(let a=0;a<i;a++){let c=t.charAt(a);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=t.charAt(a+1),f="\0";switch(c){case"+":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)+32);else throw new $;break;case"$":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)-64);else throw new $;break;case"%":if(h>="A"&&h<="E")f=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")f=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")f=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")f="\0";else if(h==="V")f="@";else if(h==="W")f="`";else if(h==="X"||h==="Y"||h==="Z")f="";else throw new $;break;case"/":if(h>="A"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")f=":";else throw new $;break}s+=f,a++}else s+=c}return s}}ot.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ot.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ot.ASTERISK_ENCODING=148;class Ve extends We{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,s){let a=this.decodeStart(i),c=this.decodeEnd(i),h=new X;Ve.decodeMiddle(i,a[1],c[0],h);let f=h.toString(),_=null;s!=null&&(_=s.get(F.ALLOWED_LENGTHS)),_==null&&(_=Ve.DEFAULT_ALLOWED_LENGTHS);let w=f.length,D=!1,k=0;for(let Y of _){if(w===Y){D=!0;break}Y>k&&(k=Y)}if(!D&&w>k&&(D=!0),!D)throw new $;const Q=[new we(a[1],t),new we(c[0],t)];return new xe(f,null,0,Q,fe.ITF,new Date().getTime())}static decodeMiddle(t,i,s,a){let c=new Int32Array(10),h=new Int32Array(5),f=new Int32Array(5);for(c.fill(0),h.fill(0),f.fill(0);i<s;){We.recordPattern(t,i,c);for(let w=0;w<5;w++){let D=2*w;h[w]=c[D],f[w]=c[D+1]}let _=Ve.decodeDigit(h);a.append(_.toString()),_=this.decodeDigit(f),a.append(_.toString()),c.forEach(function(w){i+=w})}}decodeStart(t){let i=Ve.skipWhiteSpace(t),s=Ve.findGuardPattern(t,i,Ve.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(t,s[0]),s}validateQuietZone(t,i){let s=this.narrowLineWidth*10;s=s<i?s:i;for(let a=i-1;s>0&&a>=0&&!t.get(a);a--)s--;if(s!==0)throw new W}static skipWhiteSpace(t){const i=t.getSize(),s=t.getNextSet(0);if(s===i)throw new W;return s}decodeEnd(t){t.reverse();try{let i=Ve.skipWhiteSpace(t),s;try{s=Ve.findGuardPattern(t,i,Ve.END_PATTERN_REVERSED[0])}catch(c){c instanceof W&&(s=Ve.findGuardPattern(t,i,Ve.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,s[0]);let a=s[0];return s[0]=t.getSize()-s[1],s[1]=t.getSize()-a,s}finally{t.reverse()}}static findGuardPattern(t,i,s){let a=s.length,c=new Int32Array(a),h=t.getSize(),f=!1,_=0,w=i;c.fill(0);for(let D=i;D<h;D++)if(t.get(D)!==f)c[_]++;else{if(_===a-1){if(We.patternMatchVariance(c,s,Ve.MAX_INDIVIDUAL_VARIANCE)<Ve.MAX_AVG_VARIANCE)return[w,D];w+=c[0]+c[1],C.arraycopy(c,2,c,0,_-1),c[_-1]=0,c[_]=0,_--}else _++;c[_]=1,f=!f}throw new W}static decodeDigit(t){let i=Ve.MAX_AVG_VARIANCE,s=-1,a=Ve.PATTERNS.length;for(let c=0;c<a;c++){let h=Ve.PATTERNS[c],f=We.patternMatchVariance(t,h,Ve.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,s=c):f===i&&(s=-1)}if(s>=0)return s%10;throw new W}}Ve.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ve.MAX_AVG_VARIANCE=.38,Ve.MAX_INDIVIDUAL_VARIANCE=.5,Ve.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ve.START_PATTERN=Int32Array.from([1,1,1,1]),Ve.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ct extends We{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,s,a=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),s=ct.findGuardPattern(t,a,!1,this.START_END_PATTERN,c);let h=s[0];a=s[1];let f=h-(a-h);f>=0&&(i=t.isRange(f,h,!1))}return s}static checkChecksum(t){return ct.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let s=parseInt(t.charAt(i-1),10);return ct.getStandardUPCEANChecksum(t.substring(0,i-1))===s}static getStandardUPCEANChecksum(t){let i=t.length,s=0;for(let a=i-1;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new $;s+=c}s*=3;for(let a=i-2;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new $;s+=c}return(1e3-s)%10}static decodeEnd(t,i){return ct.findGuardPattern(t,i,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,s,a){return this.findGuardPattern(t,i,s,a,new Int32Array(a.length))}static findGuardPattern(t,i,s,a,c){let h=t.getSize();i=s?t.getNextUnset(i):t.getNextSet(i);let f=0,_=i,w=a.length,D=s;for(let k=i;k<h;k++)if(t.get(k)!==D)c[f]++;else{if(f===w-1){if(We.patternMatchVariance(c,a,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return Int32Array.from([_,k]);_+=c[0]+c[1];let Q=c.slice(2,c.length-1);for(let z=0;z<f-1;z++)c[z]=Q[z];c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,D=!D}throw new W}static decodeDigit(t,i,s,a){this.recordPattern(t,s,i);let c=this.MAX_AVG_VARIANCE,h=-1,f=a.length;for(let _=0;_<f;_++){let w=a[_],D=We.patternMatchVariance(i,w,ct.MAX_INDIVIDUAL_VARIANCE);D<c&&(c=D,h=_)}if(h>=0)return h;throw new W}}ct.MAX_AVG_VARIANCE=.48,ct.MAX_INDIVIDUAL_VARIANCE=.7,ct.START_END_PATTERN=Int32Array.from([1,1,1]),ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class hs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(i,s,a),h=a.toString(),f=hs.parseExtensionString(h),_=[new we((s[0]+s[1])/2,t),new we(c,t)],w=new xe(h,null,0,_,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(t,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=i[1],f=0;for(let w=0;w<5&&h<c;w++){let D=ct.decodeDigit(t,a,h,ct.L_AND_G_PATTERNS);s+=String.fromCharCode(48+D%10);for(let k of a)h+=k;D>=10&&(f|=1<<4-w),w!==4&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(s.length!==5)throw new W;let _=this.determineCheckDigit(f);if(hs.extensionChecksum(s.toString())!==_)throw new W;return h}static extensionChecksum(t){let i=t.length,s=0;for(let a=i-2;a>=0;a-=2)s+=t.charAt(a).charCodeAt(0)-48;s*=3;for(let a=i-1;a>=0;a-=2)s+=t.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new W}static parseExtensionString(t){if(t.length!==5)return null;let i=hs.parseExtension5String(t);return i==null?null:new Map([[ae.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="Â£";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let s=parseInt(t.substring(1)),a=(s/100).toString(),c=s%100,h=c<10?"0"+c:c.toString();return i+a+"."+h}}class Ro{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(i,s,a),h=a.toString(),f=Ro.parseExtensionString(h),_=[new we((s[0]+s[1])/2,t),new we(c,t)],w=new xe(h,null,0,_,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&w.putAllMetadata(f),w}decodeMiddle(t,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=i[1],f=0;for(let _=0;_<2&&h<c;_++){let w=ct.decodeDigit(t,a,h,ct.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let D of a)h+=D;w>=10&&(f|=1<<1-_),_!==1&&(h=t.getNextSet(h),h=t.getNextUnset(h))}if(s.length!==2)throw new W;if(parseInt(s.toString())%4!==f)throw new W;return h}static parseExtensionString(t){return t.length!==2?null:new Map([[ae.ISSUE_NUMBER,parseInt(t)]])}}class tl{static decodeRow(t,i,s){let a=ct.findGuardPattern(i,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new hs().decodeRow(t,i,a)}catch{return new Ro().decodeRow(t,i,a)}}}tl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class et extends ct{constructor(){super(),this.decodeRowStringBuffer="",et.L_AND_G_PATTERNS=et.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=et.L_PATTERNS[t-10],s=new Int32Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[i.length-a-1];et.L_AND_G_PATTERNS[t]=s}}decodeRow(t,i,s){let a=et.findStartGuardPattern(i),c=s==null?null:s.get(F.NEED_RESULT_POINT_CALLBACK);if(c!=null){const de=new we((a[0]+a[1])/2,t);c.foundPossibleResultPoint(de)}let h=this.decodeMiddle(i,a,this.decodeRowStringBuffer),f=h.rowOffset,_=h.resultString;if(c!=null){const de=new we(f,t);c.foundPossibleResultPoint(de)}let w=this.decodeEnd(i,f);if(c!=null){const de=new we((w[0]+w[1])/2,t);c.foundPossibleResultPoint(de)}let D=w[1],k=D+(D-w[0]);if(k>=i.getSize()||!i.isRange(D,k,!1))throw new W;let Q=_.toString();if(Q.length<8)throw new $;if(!et.checkChecksum(Q))throw new y;let z=(a[1]+a[0])/2,Y=(w[1]+w[0])/2,Z=this.getBarcodeFormat(),ee=[new we(z,t),new we(Y,t)],ne=new xe(Q,null,0,ee,Z,new Date().getTime()),pe=0;try{let de=tl.decodeRow(t,i,w[1]);ne.putMetadata(ae.UPC_EAN_EXTENSION,de.getText()),ne.putAllMetadata(de.getResultMetadata()),ne.addResultPoints(de.getResultPoints()),pe=de.getText().length}catch{}let me=s==null?null:s.get(F.ALLOWED_EAN_EXTENSIONS);if(me!=null){let de=!1;for(let ze in me)if(pe.toString()===ze){de=!0;break}if(!de)throw new W}return ne}decodeEnd(t,i){return et.findGuardPattern(t,i,!1,et.START_END_PATTERN,new Int32Array(et.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return et.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let s=parseInt(t.charAt(i-1),10);return et.getStandardUPCEANChecksum(t.substring(0,i-1))===s}static getStandardUPCEANChecksum(t){let i=t.length,s=0;for(let a=i-1;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new $;s+=c}s*=3;for(let a=i-2;a>=0;a-=2){let c=t.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new $;s+=c}return(1e3-s)%10}}class ui extends et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=i[1],f=0;for(let w=0;w<6&&h<c;w++){let D=et.decodeDigit(t,a,h,et.L_AND_G_PATTERNS);s+=String.fromCharCode(48+D%10);for(let k of a)h+=k;D>=10&&(f|=1<<5-w)}s=ui.determineFirstDigit(s,f),h=et.findGuardPattern(t,h,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&h<c;w++){let D=et.decodeDigit(t,a,h,et.L_PATTERNS);s+=String.fromCharCode(48+D);for(let k of a)h+=k}return{rowOffset:h,resultString:s}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(t,i){for(let s=0;s<10;s++)if(i===this.FIRST_DIGIT_ENCODINGS[s])return t=String.fromCharCode(48+s)+t,t;throw new W}}ui.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class rl extends et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h=i[1];for(let _=0;_<4&&h<c;_++){let w=et.decodeDigit(t,a,h,et.L_PATTERNS);s+=String.fromCharCode(48+w);for(let D of a)h+=D}h=et.findGuardPattern(t,h,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&h<c;_++){let w=et.decodeDigit(t,a,h,et.L_PATTERNS);s+=String.fromCharCode(48+w);for(let D of a)h+=D}return{rowOffset:h,resultString:s}}getBarcodeFormat(){return fe.EAN_8}}class il extends et{constructor(){super(...arguments),this.ean13Reader=new ui}getBarcodeFormat(){return fe.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,s))}decodeMiddle(t,i,s){return this.ean13Reader.decodeMiddle(t,i,s)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let s=new xe(i.substring(1),null,null,t.getResultPoints(),fe.UPC_A);return t.getResultMetadata()!=null&&s.putAllMetadata(t.getResultMetadata()),s}else throw new W}reset(){this.ean13Reader.reset()}}class pr extends et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,s){const a=this.decodeMiddleCounters.map(w=>w);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const c=t.getSize();let h=i[1],f=0;for(let w=0;w<6&&h<c;w++){const D=pr.decodeDigit(t,a,h,pr.L_AND_G_PATTERNS);s+=String.fromCharCode(48+D%10);for(let k of a)h+=k;D>=10&&(f|=1<<5-w)}let _=pr.determineNumSysAndCheckDigit(s,f);return{rowOffset:h,resultString:_}}decodeEnd(t,i){return pr.findGuardPatternWithoutCounters(t,i,!0,pr.MIDDLE_END_PATTERN)}checkChecksum(t){return et.checkChecksum(pr.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let c=String.fromCharCode(48+s),h=String.fromCharCode(48+a);return c+t+h}throw W.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new X;s.append(t.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:s.appendChars(i,0,2),s.append(a),s.append("0000"),s.appendChars(i,2,3);break;case 3:s.appendChars(i,0,3),s.append("00000"),s.appendChars(i,3,2);break;case 4:s.appendChars(i,0,4),s.append("00000"),s.append(i[4]);break;default:s.appendChars(i,0,5),s.append("0000"),s.append(a);break}return t.length>=8&&s.append(t.charAt(7)),s.toString()}}pr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Io extends We{constructor(t){super();let i=t==null?null:t.get(F.POSSIBLE_FORMATS),s=[];o(i)?(s.push(new ui),s.push(new il),s.push(new rl),s.push(new pr)):(i.indexOf(fe.EAN_13)>-1&&s.push(new ui),i.indexOf(fe.UPC_A)>-1&&s.push(new il),i.indexOf(fe.EAN_8)>-1&&s.push(new rl),i.indexOf(fe.UPC_E)>-1&&s.push(new pr)),this.readers=s}decodeRow(t,i,s){for(let a of this.readers)try{const c=a.decodeRow(t,i,s),h=c.getBarcodeFormat()===fe.EAN_13&&c.getText().charAt(0)==="0",f=s==null?null:s.get(F.POSSIBLE_FORMATS),_=f==null||f.includes(fe.UPC_A);if(h&&_){const w=c.getRawBytes(),D=new xe(c.getText().substring(1),w,w?w.length:null,c.getResultPoints(),fe.UPC_A);return D.putAllMetadata(c.getResultMetadata()),D}return c}catch{}throw new W}reset(){for(let t of this.readers)t.reset()}}class Lt extends We{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let s=0;s<i.length;s++)if(We.patternMatchVariance(t,i[s],Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return s;throw new W}static count(t){return Fe.sum(new Int32Array(t))}static increment(t,i){let s=0,a=i[0];for(let c=1;c<t.length;c++)i[c]>a&&(a=i[c],s=c);t[s]++}static decrement(t,i){let s=0,a=i[0];for(let c=1;c<t.length;c++)i[c]<a&&(a=i[c],s=c);t[s]--}static isFinderPattern(t){let i=t[0]+t[1],s=i+t[2]+t[3],a=i/s;if(a>=Lt.MIN_FINDER_PATTERN_RATIO&&a<=Lt.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let f of t)f>h&&(h=f),f<c&&(c=f);return h<10*c}return!1}}Lt.MAX_AVG_VARIANCE=.2,Lt.MAX_INDIVIDUAL_VARIANCE=.45,Lt.MIN_FINDER_PATTERN_RATIO=9.5/12,Lt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ri{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Ri))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class qs{constructor(t,i,s,a,c){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new we(s,c)),this.resultPoints.push(new we(a,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof qs))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class yr{constructor(){}static getRSSvalue(t,i,s){let a=0;for(let _ of t)a+=_;let c=0,h=0,f=t.length;for(let _=0;_<f-1;_++){let w;for(w=1,h|=1<<_;w<t[_];w++,h&=~(1<<_)){let D=yr.combins(a-w-1,f-_-2);if(s&&h===0&&a-w-(f-_-1)>=f-_-1&&(D-=yr.combins(a-w-(f-_),f-_-2)),f-_-1>1){let k=0;for(let Q=a-w-(f-_-2);Q>i;Q--)k+=yr.combins(a-w-Q-1,f-_-3);D-=k*(f-1-_)}else a-w>i&&D--;c+=D}a-=w}return c}static combins(t,i){let s,a;t-i>i?(a=i,s=t-i):(a=t-i,s=i);let c=1,h=1;for(let f=t;f>s;f--)c*=f,h<=a&&(c/=h,h++);for(;h<=a;)c/=h,h++;return c}}class a0{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let s=12*i,a=new B(s),c=0,f=t[0].getRightChar().getValue();for(let _=11;_>=0;--_)f&1<<_&&a.set(c),c++;for(let _=1;_<t.length;++_){let w=t[_],D=w.getLeftChar().getValue();for(let k=11;k>=0;--k)D&1<<k&&a.set(c),c++;if(w.getRightChar()!=null){let k=w.getRightChar().getValue();for(let Q=11;Q>=0;--Q)k&1<<Q&&a.set(c),c++}}return a}}class di{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Po{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Xt extends Po{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Xt.FNC1}}Xt.FNC1="$";class fi extends Po{constructor(t,i,s){super(t),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class nr extends Po{constructor(t,i,s){if(super(t),i<0||i>10||s<0||s>10)throw new $;this.firstDigit=i,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===nr.FNC1}isSecondDigitFNC1(){return this.secondDigit===nr.FNC1}isAnyFNC1(){return this.firstDigit===nr.FNC1||this.secondDigit===nr.FNC1}}nr.FNC1=10;class Ee{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new W;let i=t.substring(0,2);for(let c of Ee.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(2,c[2],t):Ee.processFixedAI(2,c[1],t);if(t.length<3)throw new W;let s=t.substring(0,3);for(let c of Ee.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(3,c[2],t):Ee.processFixedAI(3,c[1],t);for(let c of Ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(4,c[2],t):Ee.processFixedAI(4,c[1],t);if(t.length<4)throw new W;let a=t.substring(0,4);for(let c of Ee.FOUR_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(4,c[2],t):Ee.processFixedAI(4,c[1],t);throw new W}static processFixedAI(t,i,s){if(s.length<t)throw new W;let a=s.substring(0,t);if(s.length<t+i)throw new W;let c=s.substring(t,t+i),h=s.substring(t+i),f="("+a+")"+c,_=Ee.parseFieldsInGeneralPurpose(h);return _==null?f:f+_}static processVariableAI(t,i,s){let a=s.substring(0,t),c;s.length<t+i?c=s.length:c=t+i;let h=s.substring(t,c),f=s.substring(c),_="("+a+")"+h,w=Ee.parseFieldsInGeneralPurpose(f);return w==null?_:_+w}}Ee.VARIABLE_LENGTH=[],Ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ee.VARIABLE_LENGTH,20],["22",Ee.VARIABLE_LENGTH,29],["30",Ee.VARIABLE_LENGTH,8],["37",Ee.VARIABLE_LENGTH,8],["90",Ee.VARIABLE_LENGTH,30],["91",Ee.VARIABLE_LENGTH,30],["92",Ee.VARIABLE_LENGTH,30],["93",Ee.VARIABLE_LENGTH,30],["94",Ee.VARIABLE_LENGTH,30],["95",Ee.VARIABLE_LENGTH,30],["96",Ee.VARIABLE_LENGTH,30],["97",Ee.VARIABLE_LENGTH,3],["98",Ee.VARIABLE_LENGTH,30],["99",Ee.VARIABLE_LENGTH,30]],Ee.THREE_DIGIT_DATA_LENGTH=[["240",Ee.VARIABLE_LENGTH,30],["241",Ee.VARIABLE_LENGTH,30],["242",Ee.VARIABLE_LENGTH,6],["250",Ee.VARIABLE_LENGTH,30],["251",Ee.VARIABLE_LENGTH,30],["253",Ee.VARIABLE_LENGTH,17],["254",Ee.VARIABLE_LENGTH,20],["400",Ee.VARIABLE_LENGTH,30],["401",Ee.VARIABLE_LENGTH,30],["402",17],["403",Ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ee.VARIABLE_LENGTH,20],["421",Ee.VARIABLE_LENGTH,15],["422",3],["423",Ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ee.VARIABLE_LENGTH,15],["391",Ee.VARIABLE_LENGTH,18],["392",Ee.VARIABLE_LENGTH,15],["393",Ee.VARIABLE_LENGTH,18],["703",Ee.VARIABLE_LENGTH,30]],Ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ee.VARIABLE_LENGTH,20],["8003",Ee.VARIABLE_LENGTH,30],["8004",Ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ee.VARIABLE_LENGTH,30],["8008",Ee.VARIABLE_LENGTH,12],["8018",18],["8020",Ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ee.VARIABLE_LENGTH,70],["8200",Ee.VARIABLE_LENGTH,70]];class Ii{constructor(t){this.buffer=new X,this.information=t}decodeAllCodes(t,i){let s=i,a=null;do{let c=this.decodeGeneralPurposeField(s,a),h=Ee.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&t.append(h),c.isRemaining()?a=""+c.getRemainingValue():a=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(t,4);return c===0?new nr(this.information.getSize(),nr.FNC1,nr.FNC1):new nr(this.information.getSize(),c-1,nr.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),s=(i-8)/11,a=(i-8)%11;return new nr(t+7,s,a)}extractNumericValueFromBitArray(t,i){return Ii.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,s){let a=0;for(let c=0;c<s;++c)t.get(i+c)&&(a|=1<<s-c-1);return a}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new fi(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new fi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let s=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(s!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new fi(this.current.getPosition(),this.buffer.toString()):i=new fi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new di(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new fi(this.current.getPosition(),this.buffer.toString());return new di(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new di(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new fi(this.current.getPosition(),this.buffer.toString());return new di(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new di(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new fi(this.current.getPosition(),this.buffer.toString());return new di(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new di(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Xt(t+5,Xt.FNC1);if(i>=5&&i<15)return new Xt(t+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<90)return new Xt(t+7,""+(s+1));if(s>=90&&s<116)return new Xt(t+7,""+(s+7));let a=this.extractNumericValueFromBitArray(t,8),c;switch(a){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new $}return new Xt(t+8,c)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,6);return s>=16&&s<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Xt(t+5,Xt.FNC1);if(i>=5&&i<15)return new Xt(t+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(t,6);if(s>=32&&s<58)return new Xt(t+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Ze("Decoding invalid alphanumeric value: "+s)}return new Xt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class Lo{constructor(t){this.information=t,this.generalDecoder=new Ii(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vt extends Lo{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let s=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,s)}encodeCompressedGtinWithoutAI(t,i,s){for(let a=0;a<4;++a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);c/100===0&&t.append("0"),c/10===0&&t.append("0"),t.append(c)}Vt.appendCheckDigit(t,s)}static appendCheckDigit(t,i){let s=0;for(let a=0;a<13;a++){let c=t.charAt(a+i).charCodeAt(0)-48;s+=a&1?c:3*c}s=10-s%10,s===10&&(s=0),t.append(s)}}Vt.GTIN_SIZE=40;class Pi extends Vt{constructor(t){super(t)}parseInformation(){let t=new X;t.append("(01)");let i=t.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(Pi.HEADER_SIZE,4);return t.append(s),this.encodeCompressedGtinWithoutAI(t,Pi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,Pi.HEADER_SIZE+44)}}Pi.HEADER_SIZE=4;class Xs extends Lo{constructor(t){super(t)}parseInformation(){let t=new X;return this.getGeneralDecoder().decodeAllCodes(t,Xs.HEADER_SIZE)}}Xs.HEADER_SIZE=5;class Vs extends Vt{constructor(t){super(t)}encodeCompressedWeight(t,i,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,s);this.addWeightCode(t,a);let c=this.checkWeight(a),h=1e5;for(let f=0;f<5;++f)c/h===0&&t.append("0"),h/=10;t.append(c)}}class Er extends Vs{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Er.HEADER_SIZE+Vs.GTIN_SIZE+Er.WEIGHT_SIZE)throw new W;let t=new X;return this.encodeCompressedGtin(t,Er.HEADER_SIZE),this.encodeCompressedWeight(t,Er.HEADER_SIZE+Vs.GTIN_SIZE,Er.WEIGHT_SIZE),t.toString()}}Er.HEADER_SIZE=5,Er.WEIGHT_SIZE=15;class c0 extends Er{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class l0 extends Er{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Sr extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Sr.HEADER_SIZE+Vt.GTIN_SIZE)throw new W;let t=new X;this.encodeCompressedGtin(t,Sr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE+Vt.GTIN_SIZE,Sr.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Sr.HEADER_SIZE+Vt.GTIN_SIZE+Sr.LAST_DIGIT_SIZE,null);return t.append(s.getNewString()),t.toString()}}Sr.HEADER_SIZE=8,Sr.LAST_DIGIT_SIZE=2;class Bt extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Bt.HEADER_SIZE+Vt.GTIN_SIZE)throw new W;let t=new X;this.encodeCompressedGtin(t,Bt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Bt.HEADER_SIZE+Vt.GTIN_SIZE,Bt.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Bt.HEADER_SIZE+Vt.GTIN_SIZE+Bt.LAST_DIGIT_SIZE,Bt.FIRST_THREE_DIGITS_SIZE);s/100==0&&t.append("0"),s/10==0&&t.append("0"),t.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(Bt.HEADER_SIZE+Vt.GTIN_SIZE+Bt.LAST_DIGIT_SIZE+Bt.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}Bt.HEADER_SIZE=8,Bt.LAST_DIGIT_SIZE=2,Bt.FIRST_THREE_DIGITS_SIZE=10;class _t extends Vs{constructor(t,i,s){super(t),this.dateCode=s,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE+_t.DATE_SIZE)throw new W;let t=new X;return this.encodeCompressedGtin(t,_t.HEADER_SIZE),this.encodeCompressedWeight(t,_t.HEADER_SIZE+_t.GTIN_SIZE,_t.WEIGHT_SIZE),this.encodeCompressedDate(t,_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(i,_t.DATE_SIZE);if(s==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=s%32;s/=32;let c=s%12+1;s/=12;let h=s;h/10==0&&t.append("0"),t.append(h),c/10==0&&t.append("0"),t.append(c),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}_t.HEADER_SIZE=8,_t.WEIGHT_SIZE=20,_t.DATE_SIZE=16;function sl(L){try{if(L.get(1))return new Pi(L);if(!L.get(2))return new Xs(L);switch(Ii.extractNumericValueFromBitArray(L,1,4)){case 4:return new c0(L);case 5:return new l0(L)}switch(Ii.extractNumericValueFromBitArray(L,1,5)){case 12:return new Sr(L);case 13:return new Bt(L)}switch(Ii.extractNumericValueFromBitArray(L,1,7)){case 56:return new _t(L,"310","11");case 57:return new _t(L,"320","11");case 58:return new _t(L,"310","13");case 59:return new _t(L,"320","13");case 60:return new _t(L,"310","15");case 61:return new _t(L,"320","15");case 62:return new _t(L,"310","17");case 63:return new _t(L,"320","17")}}catch(t){throw console.log(t),new Ze("unknown decoder: "+L)}}class Gr{constructor(t,i,s,a){this.leftchar=t,this.rightchar=i,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Gr?Gr.equalsOrNull(t.leftchar,i.leftchar)&&Gr.equalsOrNull(t.rightchar,i.rightchar)&&Gr.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Gr.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Mo{constructor(t,i,s){this.pairs=t,this.rowNumber=i,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof Mo?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let s;return t.forEach((a,c)=>{i.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(s=!0)})}),s}}class he extends Lt{constructor(t){super(...arguments),this.pairs=new Array(he.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,s){this.pairs.length=0,this.startFromEven=!1;try{return he.constructResult(this.decodeRow2pairs(t,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,he.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(c){if(c instanceof W){if(!this.pairs.length)throw new W;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new W}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let s=i;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let h of t)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!he.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(t);c.push(a);try{return this.checkRows(c,s+1)}catch(h){this.verbose&&console.log(h)}}throw new W}static isValidSequence(t){for(let i of he.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let s=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=i[a]){s=!1;break}if(s)return!0}return!1}storeRow(t,i){let s=0,a=!1,c=!1;for(;s<this.rows.length;){let h=this.rows[s];if(h.getRowNumber()>t){c=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),s++}c||a||he.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new Mo(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let s of i)if(s.getPairs().length!==t.length){for(let a of s.getPairs())for(let c of t)if(Gr.equals(a,c))break}}static isPartialRow(t,i){for(let s of i){let a=!0;for(let c of t){let h=!1;for(let f of s.getPairs())if(c.equals(f)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=a0.buildBitArray(t),a=sl(i).parseInformation(),c=t[0].getFinderPattern().getResultPoints(),h=t[t.length-1].getFinderPattern().getResultPoints(),f=[c[0],c[1],h[0],h[1]];return new xe(a,null,null,f,fe.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),s=t.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),c=2;for(let f=1;f<this.pairs.size();++f){let _=this.pairs.get(f);a+=_.getLeftChar().getChecksumPortion(),c++;let w=_.getRightChar();w!=null&&(a+=w.getChecksumPortion(),c++)}return a%=211,211*(c-4)+a==i.getValue()}static getNextSecondBar(t,i){let s;return t.get(i)?(s=t.getNextUnset(i),s=t.getNextSet(s)):(s=t.getNextSet(i),s=t.getNextUnset(s)),s}retrieveNextPair(t,i,s){let a=i.length%2==0;this.startFromEven&&(a=!a);let c,h=!0,f=-1;do this.findNextPair(t,i,f),c=this.parseFoundFinderPattern(t,s,a),c==null?f=he.getNextSecondBar(t,this.startEnd[0]):h=!1;while(h);let _=this.decodeDataCharacter(t,c,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new W;let w;try{w=this.decodeDataCharacter(t,c,a,!1)}catch(D){w=null,this.verbose&&console.log(D)}return new Gr(_,w,c,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=t.getSize(),h;s>=0?h=s:this.isEmptyPair(i)?h=0:h=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let _=!1;for(;h<c&&(_=!t.get(h),!!_);)h++;let w=0,D=h;for(let k=h;k<c;k++)if(t.get(k)!=_)a[w]++;else{if(w==3){if(f&&he.reverseCounters(a),he.isFinderPattern(a)){this.startEnd[0]=D,this.startEnd[1]=k;return}f&&he.reverseCounters(a),D+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,w--}else w++;a[w]=1,_=!_}throw new W}static reverseCounters(t){let i=t.length;for(let s=0;s<i/2;++s){let a=t[s];t[s]=t[i-s-1],t[i-s-1]=a}}parseFoundFinderPattern(t,i,s){let a,c,h;if(s){let w=this.startEnd[0]-1;for(;w>=0&&!t.get(w);)w--;w++,a=this.startEnd[0]-w,c=w,h=this.startEnd[1]}else c=this.startEnd[0],h=t.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let f=this.getDecodeFinderCounters();C.arraycopy(f,0,f,1,f.length-1),f[0]=a;let _;try{_=this.parseFinderValue(f,he.FINDER_PATTERNS)}catch{return null}return new qs(_,[c,h],c,h,i)}decodeDataCharacter(t,i,s,a){let c=this.getDataCharacterCounters();for(let dt=0;dt<c.length;dt++)c[dt]=0;if(a)he.recordPatternInReverse(t,i.getStartEnd()[0],c);else{he.recordPattern(t,i.getStartEnd()[1],c);for(let dt=0,Pt=c.length-1;dt<Pt;dt++,Pt--){let Kt=c[dt];c[dt]=c[Pt],c[Pt]=Kt}}let h=17,f=Fe.sum(new Int32Array(c))/h,_=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-_)/_>.3)throw new W;let w=this.getOddCounts(),D=this.getEvenCounts(),k=this.getOddRoundingErrors(),Q=this.getEvenRoundingErrors();for(let dt=0;dt<c.length;dt++){let Pt=1*c[dt]/f,Kt=Pt+.5;if(Kt<1){if(Pt<.3)throw new W;Kt=1}else if(Kt>8){if(Pt>8.7)throw new W;Kt=8}let Fi=dt/2;dt&1?(D[Fi]=Kt,Q[Fi]=Pt-Kt):(w[Fi]=Kt,k[Fi]=Pt-Kt)}this.adjustOddEvenCounts(h);let z=4*i.getValue()+(s?0:2)+(a?0:1)-1,Y=0,Z=0;for(let dt=w.length-1;dt>=0;dt--){if(he.isNotA1left(i,s,a)){let Pt=he.WEIGHTS[z][2*dt];Z+=w[dt]*Pt}Y+=w[dt]}let ee=0;for(let dt=D.length-1;dt>=0;dt--)if(he.isNotA1left(i,s,a)){let Pt=he.WEIGHTS[z][2*dt+1];ee+=D[dt]*Pt}let ne=Z+ee;if(Y&1||Y>13||Y<4)throw new W;let pe=(13-Y)/2,me=he.SYMBOL_WIDEST[pe],de=9-me,ze=yr.getRSSvalue(w,me,!0),Qe=yr.getRSSvalue(D,de,!1),zt=he.EVEN_TOTAL_SUBSET[pe],mr=he.GSUM[pe],Gt=ze*zt+Qe+mr;return new Ri(Gt,ne)}static isNotA1left(t,i,s){return!(t.getValue()==0&&i&&s)}adjustOddEvenCounts(t){let i=Fe.sum(new Int32Array(this.getOddCounts())),s=Fe.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);let h=!1,f=!1;s>13?f=!0:s<4&&(h=!0);let _=i+s-t,w=(i&1)==1,D=(s&1)==0;if(_==1)if(w){if(D)throw new W;c=!0}else{if(!D)throw new W;f=!0}else if(_==-1)if(w){if(D)throw new W;a=!0}else{if(!D)throw new W;h=!0}else if(_==0){if(w){if(!D)throw new W;i<s?(a=!0,f=!0):(c=!0,h=!0)}else if(D)throw new W}else throw new W;if(a){if(c)throw new W;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(f)throw new W;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}he.SYMBOL_WIDEST=[7,5,4,3,1],he.EVEN_TOTAL_SUBSET=[4,20,52,104,204],he.GSUM=[0,348,1388,2948,3988],he.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],he.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],he.FINDER_PAT_A=0,he.FINDER_PAT_B=1,he.FINDER_PAT_C=2,he.FINDER_PAT_D=3,he.FINDER_PAT_E=4,he.FINDER_PAT_F=5,he.FINDER_PATTERN_SEQUENCES=[[he.FINDER_PAT_A,he.FINDER_PAT_A],[he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B],[he.FINDER_PAT_A,he.FINDER_PAT_C,he.FINDER_PAT_B,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_C],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F]],he.MAX_PAIRS=11;class h0 extends Ri{constructor(t,i,s){super(t,i),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends Lt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,s){const a=this.decodePair(i,!1,t,s);Ct.addOrTally(this.possibleLeftPairs,a),i.reverse();let c=this.decodePair(i,!0,t,s);Ct.addOrTally(this.possibleRightPairs,c),i.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Ct.checkChecksum(h,f))return Ct.constructResult(h,f)}throw new W}static addOrTally(t,i){if(i==null)return;let s=!1;for(let a of t)if(a.getValue()===i.getValue()){a.incrementCount(),s=!0;break}s||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let s=4537077*t.getValue()+i.getValue(),a=new String(s).toString(),c=new X;for(let w=13-a.length;w>0;w--)c.append("0");c.append(a);let h=0;for(let w=0;w<13;w++){let D=c.charAt(w).charCodeAt(0)-48;h+=w&1?D:3*D}h=10-h%10,h===10&&(h=0),c.append(h.toString());let f=t.getFinderPattern().getResultPoints(),_=i.getFinderPattern().getResultPoints();return new xe(c.toString(),null,0,[f[0],f[1],_[0],_[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(t,i){let s=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(t,i,s,a){try{let c=this.findFinderPattern(t,i),h=this.parseFoundFinderPattern(t,s,i,c),f=a==null?null:a.get(F.NEED_RESULT_POINT_CALLBACK);if(f!=null){let D=(c[0]+c[1])/2;i&&(D=t.getSize()-1-D),f.foundPossibleResultPoint(new we(D,s))}let _=this.decodeDataCharacter(t,h,!0),w=this.decodeDataCharacter(t,h,!1);return new h0(1597*_.getValue()+w.getValue(),_.getChecksumPortion()+4*w.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(t,i,s){let a=this.getDataCharacterCounters();for(let ee=0;ee<a.length;ee++)a[ee]=0;if(s)We.recordPatternInReverse(t,i.getStartEnd()[0],a);else{We.recordPattern(t,i.getStartEnd()[1]+1,a);for(let ee=0,ne=a.length-1;ee<ne;ee++,ne--){let pe=a[ee];a[ee]=a[ne],a[ne]=pe}}let c=s?16:15,h=Fe.sum(new Int32Array(a))/c,f=this.getOddCounts(),_=this.getEvenCounts(),w=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let ee=0;ee<a.length;ee++){let ne=a[ee]/h,pe=Math.floor(ne+.5);pe<1?pe=1:pe>8&&(pe=8);let me=Math.floor(ee/2);ee&1?(_[me]=pe,D[me]=ne-pe):(f[me]=pe,w[me]=ne-pe)}this.adjustOddEvenCounts(s,c);let k=0,Q=0;for(let ee=f.length-1;ee>=0;ee--)Q*=9,Q+=f[ee],k+=f[ee];let z=0,Y=0;for(let ee=_.length-1;ee>=0;ee--)z*=9,z+=_[ee],Y+=_[ee];let Z=Q+3*z;if(s){if(k&1||k>12||k<4)throw new W;let ee=(12-k)/2,ne=Ct.OUTSIDE_ODD_WIDEST[ee],pe=9-ne,me=yr.getRSSvalue(f,ne,!1),de=yr.getRSSvalue(_,pe,!0),ze=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[ee],Qe=Ct.OUTSIDE_GSUM[ee];return new Ri(me*ze+de+Qe,Z)}else{if(Y&1||Y>10||Y<4)throw new W;let ee=(10-Y)/2,ne=Ct.INSIDE_ODD_WIDEST[ee],pe=9-ne,me=yr.getRSSvalue(f,ne,!0),de=yr.getRSSvalue(_,pe,!1),ze=Ct.INSIDE_ODD_TOTAL_SUBSET[ee],Qe=Ct.INSIDE_GSUM[ee];return new Ri(de*ze+me+Qe,Z)}}findFinderPattern(t,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=t.getSize(),c=!1,h=0;for(;h<a&&(c=!t.get(h),i!==c);)h++;let f=0,_=h;for(let w=h;w<a;w++)if(t.get(w)!==c)s[f]++;else{if(f===3){if(Lt.isFinderPattern(s))return[_,w];_+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,c=!c}throw new W}parseFoundFinderPattern(t,i,s,a){let c=t.get(a[0]),h=a[0]-1;for(;h>=0&&c!==t.get(h);)h--;h++;const f=a[0]-h,_=this.getDecodeFinderCounters(),w=new Int32Array(_.length);C.arraycopy(_,0,w,1,_.length-1),w[0]=f;const D=this.parseFinderValue(w,Ct.FINDER_PATTERNS);let k=h,Q=a[1];return s&&(k=t.getSize()-1-k,Q=t.getSize()-1-Q),new qs(D,[h,a[1]],k,Q,i)}adjustOddEvenCounts(t,i){let s=Fe.sum(new Int32Array(this.getOddCounts())),a=Fe.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,f=!1,_=!1;t?(s>12?h=!0:s<4&&(c=!0),a>12?_=!0:a<4&&(f=!0)):(s>11?h=!0:s<5&&(c=!0),a>10?_=!0:a<4&&(f=!0));let w=s+a-i,D=(s&1)===(t?1:0),k=(a&1)===1;if(w===1)if(D){if(k)throw new W;h=!0}else{if(!k)throw new W;_=!0}else if(w===-1)if(D){if(k)throw new W;c=!0}else{if(!k)throw new W;f=!0}else if(w===0){if(D){if(!k)throw new W;s<a?(c=!0,_=!0):(h=!0,f=!0)}else if(k)throw new W}else throw new W;if(c){if(h)throw new W;Lt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Lt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(_)throw new W;Lt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Lt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Li extends We{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const s=t?t.get(F.POSSIBLE_FORMATS):null,a=t&&t.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(fe.EAN_13)||s.includes(fe.UPC_A)||s.includes(fe.EAN_8)||s.includes(fe.UPC_E))&&this.readers.push(new Io(t)),s.includes(fe.CODE_39)&&this.readers.push(new ot(a)),s.includes(fe.CODE_128)&&this.readers.push(new _e),s.includes(fe.ITF)&&this.readers.push(new Ve),s.includes(fe.RSS_14)&&this.readers.push(new Ct),s.includes(fe.RSS_EXPANDED)&&this.readers.push(new he(this.verbose))):(this.readers.push(new Io(t)),this.readers.push(new ot),this.readers.push(new Io(t)),this.readers.push(new _e),this.readers.push(new Ve),this.readers.push(new Ct),this.readers.push(new he(this.verbose)))}decodeRow(t,i,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,i,s)}catch{}throw new W}reset(){this.readers.forEach(t=>t.reset())}}class u0 extends Le{constructor(t=500,i){super(new Li(i),t,i)}}class st{constructor(t,i,s){this.ecCodewords=t,this.ecBlocks=[i],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(t,i,s,a,c,h){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=c,this.ecBlocks=h;let f=0;const _=h.getECCodewords(),w=h.getECBlocks();for(let D of w)f+=D.getCount()*(D.getDataCodewords()+_);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if(t&1||i&1)throw new $;for(let s of Ye.VERSIONS)if(s.symbolSizeRows===t&&s.symbolSizeColumns===i)return s;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new Ye(1,10,10,8,8,new st(5,new tt(1,3))),new Ye(2,12,12,10,10,new st(7,new tt(1,5))),new Ye(3,14,14,12,12,new st(10,new tt(1,8))),new Ye(4,16,16,14,14,new st(12,new tt(1,12))),new Ye(5,18,18,16,16,new st(14,new tt(1,18))),new Ye(6,20,20,18,18,new st(18,new tt(1,22))),new Ye(7,22,22,20,20,new st(20,new tt(1,30))),new Ye(8,24,24,22,22,new st(24,new tt(1,36))),new Ye(9,26,26,24,24,new st(28,new tt(1,44))),new Ye(10,32,32,14,14,new st(36,new tt(1,62))),new Ye(11,36,36,16,16,new st(42,new tt(1,86))),new Ye(12,40,40,18,18,new st(48,new tt(1,114))),new Ye(13,44,44,20,20,new st(56,new tt(1,144))),new Ye(14,48,48,22,22,new st(68,new tt(1,174))),new Ye(15,52,52,24,24,new st(42,new tt(2,102))),new Ye(16,64,64,14,14,new st(56,new tt(2,140))),new Ye(17,72,72,16,16,new st(36,new tt(4,92))),new Ye(18,80,80,18,18,new st(48,new tt(4,114))),new Ye(19,88,88,20,20,new st(56,new tt(4,144))),new Ye(20,96,96,22,22,new st(68,new tt(4,174))),new Ye(21,104,104,24,24,new st(56,new tt(6,136))),new Ye(22,120,120,18,18,new st(68,new tt(6,175))),new Ye(23,132,132,20,20,new st(62,new tt(8,163))),new Ye(24,144,144,22,22,new st(62,new tt(8,156),new tt(2,155))),new Ye(25,8,18,6,16,new st(7,new tt(1,5))),new Ye(26,8,32,6,14,new st(11,new tt(1,10))),new Ye(27,12,26,10,24,new st(14,new tt(1,16))),new Ye(28,12,36,10,16,new st(18,new tt(1,22))),new Ye(29,16,36,14,16,new st(24,new tt(1,32))),new Ye(30,16,48,14,22,new st(28,new tt(1,49)))]}}Ye.VERSIONS=Ye.buildVersions();class ko{constructor(t){const i=t.getHeight();if(i<8||i>144||i&1)throw new $;this.version=ko.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),s=t.getWidth();return Ye.getVersionForDimensions(i,s)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,s=4,a=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let f=!1,_=!1,w=!1,D=!1;do if(s===c&&a===0&&!f)t[i++]=this.readCorner1(c,h)&255,s-=2,a+=2,f=!0;else if(s===c-2&&a===0&&h&3&&!_)t[i++]=this.readCorner2(c,h)&255,s-=2,a+=2,_=!0;else if(s===c+4&&a===2&&!(h&7)&&!w)t[i++]=this.readCorner3(c,h)&255,s-=2,a+=2,w=!0;else if(s===c-2&&a===0&&(h&7)===4&&!D)t[i++]=this.readCorner4(c,h)&255,s-=2,a+=2,D=!0;else{do s<c&&a>=0&&!this.readMappingMatrix.get(a,s)&&(t[i++]=this.readUtah(s,a,c,h)&255),s-=2,a+=2;while(s>=0&&a<h);s+=1,a+=3;do s>=0&&a<h&&!this.readMappingMatrix.get(a,s)&&(t[i++]=this.readUtah(s,a,c,h)&255),s+=2,a-=2;while(s<c&&a>=0);s+=3,a+=1}while(s<c||a<h);if(i!==this.version.getTotalCodewords())throw new $;return t}readModule(t,i,s,a){return t<0&&(t+=s,i+=4-(s+4&7)),i<0&&(i+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,s,a){let c=0;return this.readModule(t-2,i-2,s,a)&&(c|=1),c<<=1,this.readModule(t-2,i-1,s,a)&&(c|=1),c<<=1,this.readModule(t-1,i-2,s,a)&&(c|=1),c<<=1,this.readModule(t-1,i-1,s,a)&&(c|=1),c<<=1,this.readModule(t-1,i,s,a)&&(c|=1),c<<=1,this.readModule(t,i-2,s,a)&&(c|=1),c<<=1,this.readModule(t,i-1,s,a)&&(c|=1),c<<=1,this.readModule(t,i,s,a)&&(c|=1),c}readCorner1(t,i){let s=0;return this.readModule(t-1,0,t,i)&&(s|=1),s<<=1,this.readModule(t-1,1,t,i)&&(s|=1),s<<=1,this.readModule(t-1,2,t,i)&&(s|=1),s<<=1,this.readModule(0,i-2,t,i)&&(s|=1),s<<=1,this.readModule(0,i-1,t,i)&&(s|=1),s<<=1,this.readModule(1,i-1,t,i)&&(s|=1),s<<=1,this.readModule(2,i-1,t,i)&&(s|=1),s<<=1,this.readModule(3,i-1,t,i)&&(s|=1),s}readCorner2(t,i){let s=0;return this.readModule(t-3,0,t,i)&&(s|=1),s<<=1,this.readModule(t-2,0,t,i)&&(s|=1),s<<=1,this.readModule(t-1,0,t,i)&&(s|=1),s<<=1,this.readModule(0,i-4,t,i)&&(s|=1),s<<=1,this.readModule(0,i-3,t,i)&&(s|=1),s<<=1,this.readModule(0,i-2,t,i)&&(s|=1),s<<=1,this.readModule(0,i-1,t,i)&&(s|=1),s<<=1,this.readModule(1,i-1,t,i)&&(s|=1),s}readCorner3(t,i){let s=0;return this.readModule(t-1,0,t,i)&&(s|=1),s<<=1,this.readModule(t-1,i-1,t,i)&&(s|=1),s<<=1,this.readModule(0,i-3,t,i)&&(s|=1),s<<=1,this.readModule(0,i-2,t,i)&&(s|=1),s<<=1,this.readModule(0,i-1,t,i)&&(s|=1),s<<=1,this.readModule(1,i-3,t,i)&&(s|=1),s<<=1,this.readModule(1,i-2,t,i)&&(s|=1),s<<=1,this.readModule(1,i-1,t,i)&&(s|=1),s}readCorner4(t,i){let s=0;return this.readModule(t-3,0,t,i)&&(s|=1),s<<=1,this.readModule(t-2,0,t,i)&&(s|=1),s<<=1,this.readModule(t-1,0,t,i)&&(s|=1),s<<=1,this.readModule(0,i-2,t,i)&&(s|=1),s<<=1,this.readModule(0,i-1,t,i)&&(s|=1),s<<=1,this.readModule(1,i-1,t,i)&&(s|=1),s<<=1,this.readModule(2,i-1,t,i)&&(s|=1),s<<=1,this.readModule(3,i-1,t,i)&&(s|=1),s}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new x("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=i/a|0,f=s/c|0,_=h*a,w=f*c,D=new q(w,_);for(let k=0;k<h;++k){const Q=k*a;for(let z=0;z<f;++z){const Y=z*c;for(let Z=0;Z<a;++Z){const ee=k*(a+2)+1+Z,ne=Q+Z;for(let pe=0;pe<c;++pe){const me=z*(c+2)+1+pe;if(t.get(me,ee)){const de=Y+pe;D.set(de,ne)}}}}}return D}}class No{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const s=i.getECBlocks();let a=0;const c=s.getECBlocks();for(let Z of c)a+=Z.getCount();const h=new Array(a);let f=0;for(let Z of c)for(let ee=0;ee<Z.getCount();ee++){const ne=Z.getDataCodewords(),pe=s.getECCodewords()+ne;h[f++]=new No(ne,new Uint8Array(pe))}const w=h[0].codewords.length-s.getECCodewords(),D=w-1;let k=0;for(let Z=0;Z<D;Z++)for(let ee=0;ee<f;ee++)h[ee].codewords[Z]=t[k++];const Q=i.getVersionNumber()===24,z=Q?8:f;for(let Z=0;Z<z;Z++)h[Z].codewords[w-1]=t[k++];const Y=h[0].codewords.length;for(let Z=w;Z<Y;Z++)for(let ee=0;ee<f;ee++){const ne=Q?(ee+8)%f:ee,pe=Q&&ne>7?Z-1:Z;h[ne].codewords[pe]=t[k++]}if(k!==t.length)throw new x;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Fo{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new x(""+t);let i=0,s=this.bitOffset,a=this.byteOffset;const c=this.bytes;if(s>0){const h=8-s,f=t<h?t:h,_=h-f,w=255>>8-f<<_;i=(c[a]&w)>>_,t-=f,s+=f,s===8&&(s=0,a++)}if(t>0){for(;t>=8;)i=i<<8|c[a]&255,a++,t-=8;if(t>0){const h=8-t,f=255>>h<<h;i=i<<t|(c[a]&f)>>h,s+=t}}return this.bitOffset=s,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Et;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(Et||(Et={}));class Yr{static decode(t){const i=new Fo(t),s=new X,a=new X,c=new Array;let h=Et.ASCII_ENCODE;do if(h===Et.ASCII_ENCODE)h=this.decodeAsciiSegment(i,s,a);else{switch(h){case Et.C40_ENCODE:this.decodeC40Segment(i,s);break;case Et.TEXT_ENCODE:this.decodeTextSegment(i,s);break;case Et.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,s);break;case Et.EDIFACT_ENCODE:this.decodeEdifactSegment(i,s);break;case Et.BASE256_ENCODE:this.decodeBase256Segment(i,s,c);break;default:throw new $}h=Et.ASCII_ENCODE}while(h!==Et.PAD_ENCODE&&i.available()>0);return a.length()>0&&s.append(a.toString()),new oe(t,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(t,i,s){let a=!1;do{let c=t.readBits(8);if(c===0)throw new $;if(c<=128)return a&&(c+=128),i.append(String.fromCharCode(c-1)),Et.ASCII_ENCODE;if(c===129)return Et.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&i.append("0"),i.append(""+h)}else switch(c){case 230:return Et.C40_ENCODE;case 231:return Et.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),s.insert(0,"");break;case 237:i.append("[)>06"),s.insert(0,"");break;case 238:return Et.ANSIX12_ENCODE;case 239:return Et.TEXT_ENCODE;case 240:return Et.EDIFACT_ENCODE;case 241:break;default:if(c!==254||t.available()!==0)throw new $;break}}while(t.available()>0);return Et.ASCII_ENCODE}static decodeC40Segment(t,i){let s=!1;const a=[];let c=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let f=0;f<3;f++){const _=a[f];switch(c){case 0:if(_<3)c=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[_];s?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),s=!1):i.append(w)}else throw new $;break;case 1:s?(i.append(String.fromCharCode(_+128)),s=!1):i.append(String.fromCharCode(_)),c=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[_];s?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),s=!1):i.append(w)}else switch(_){case 27:i.append("");break;case 30:s=!0;break;default:throw new $}c=0;break;case 3:s?(i.append(String.fromCharCode(_+224)),s=!1):i.append(String.fromCharCode(_+96)),c=0;break;default:throw new $}}}while(t.available()>0)}static decodeTextSegment(t,i){let s=!1,a=[],c=0;do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),a);for(let f=0;f<3;f++){const _=a[f];switch(c){case 0:if(_<3)c=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[_];s?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),s=!1):i.append(w)}else throw new $;break;case 1:s?(i.append(String.fromCharCode(_+128)),s=!1):i.append(String.fromCharCode(_)),c=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[_];s?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),s=!1):i.append(w)}else switch(_){case 27:i.append("");break;case 30:s=!0;break;default:throw new $}c=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[_];s?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),s=!1):i.append(w),c=0}else throw new $;break;default:throw new $}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const s=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),s);for(let c=0;c<3;c++){const h=s[c];switch(h){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(h<14)i.append(String.fromCharCode(h+44));else if(h<40)i.append(String.fromCharCode(h+51));else throw new $;break}}}while(t.available()>0)}static parseTwoBytes(t,i,s){let a=(t<<8)+i-1,c=Math.floor(a/1600);s[0]=c,a-=c*1600,c=Math.floor(a/40),s[1]=c,s[2]=a-c*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let s=0;s<4;s++){let a=t.readBits(6);if(a===31){const c=8-t.getBitOffset();c!==8&&t.readBits(c);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,i,s){let a=1+t.getByteOffset();const c=this.unrandomize255State(t.readBits(8),a++);let h;if(c===0?h=t.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(t.readBits(8),a++),h<0)throw new $;const f=new Uint8Array(h);for(let _=0;_<h;_++){if(t.available()<8)throw new $;f[_]=this.unrandomize255State(t.readBits(8),a++)}s.push(f);try{i.append(T.decode(f,P.ISO88591))}catch(_){throw new Ze("Platform does not support required encoding: "+_.message)}}static unrandomize255State(t,i){const s=149*i%255+1,a=t-s;return a>=0?a:a+256}}Yr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yr.TEXT_SHIFT2_SET_CHARS=Yr.C40_SHIFT2_SET_CHARS,Yr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class d0{constructor(){this.rsDecoder=new Se(Te.DATA_MATRIX_FIELD_256)}decode(t){const i=new ko(t),s=i.getVersion(),a=i.readCodewords(),c=No.getDataBlocks(a,s);let h=0;for(let w of c)h+=w.getNumDataCodewords();const f=new Uint8Array(h),_=c.length;for(let w=0;w<_;w++){const D=c[w],k=D.getCodewords(),Q=D.getNumDataCodewords();this.correctErrors(k,Q);for(let z=0;z<Q;z++)f[z*_+w]=k[z]}return Yr.decode(f)}correctErrors(t,i){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-i)}catch{throw new y}for(let a=0;a<i;a++)t[a]=s[a]}}class yt{constructor(t){this.image=t,this.rectangleDetector=new Oe(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new W;i=this.shiftToModuleCenter(i);const s=i[0],a=i[1],c=i[2],h=i[3];let f=this.transitionsBetween(s,h)+1,_=this.transitionsBetween(c,h)+1;(f&1)===1&&(f+=1),(_&1)===1&&(_+=1),4*f<7*_&&4*_<7*f&&(f=_=Math.max(f,_));let w=yt.sampleGrid(this.image,s,a,c,h,f,_);return new De(w,[s,a,c,h])}static shiftPoint(t,i,s){let a=(i.getX()-t.getX())/(s+1),c=(i.getY()-t.getY())/(s+1);return new we(t.getX()+a,t.getY()+c)}static moveAway(t,i,s){let a=t.getX(),c=t.getY();return a<i?a-=1:a+=1,c<s?c-=1:c+=1,new we(a,c)}detectSolid1(t){let i=t[0],s=t[1],a=t[3],c=t[2],h=this.transitionsBetween(i,s),f=this.transitionsBetween(s,a),_=this.transitionsBetween(a,c),w=this.transitionsBetween(c,i),D=h,k=[c,i,s,a];return D>f&&(D=f,k[0]=i,k[1]=s,k[2]=a,k[3]=c),D>_&&(D=_,k[0]=s,k[1]=a,k[2]=c,k[3]=i),D>w&&(k[0]=a,k[1]=c,k[2]=i,k[3]=s),k}detectSolid2(t){let i=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(i,c),f=yt.shiftPoint(s,a,(h+1)*4),_=yt.shiftPoint(a,s,(h+1)*4),w=this.transitionsBetween(f,i),D=this.transitionsBetween(_,c);return w<D?(t[0]=i,t[1]=s,t[2]=a,t[3]=c):(t[0]=s,t[1]=a,t[2]=c,t[3]=i),t}correctTopRight(t){let i=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(i,c),f=this.transitionsBetween(s,c),_=yt.shiftPoint(i,s,(f+1)*4),w=yt.shiftPoint(a,s,(h+1)*4);h=this.transitionsBetween(_,c),f=this.transitionsBetween(w,c);let D=new we(c.getX()+(a.getX()-s.getX())/(h+1),c.getY()+(a.getY()-s.getY())/(h+1)),k=new we(c.getX()+(i.getX()-s.getX())/(f+1),c.getY()+(i.getY()-s.getY())/(f+1));if(!this.isValid(D))return this.isValid(k)?k:null;if(!this.isValid(k))return D;let Q=this.transitionsBetween(_,D)+this.transitionsBetween(w,D),z=this.transitionsBetween(_,k)+this.transitionsBetween(w,k);return Q>z?D:k}shiftToModuleCenter(t){let i=t[0],s=t[1],a=t[2],c=t[3],h=this.transitionsBetween(i,c)+1,f=this.transitionsBetween(a,c)+1,_=yt.shiftPoint(i,s,f*4),w=yt.shiftPoint(a,s,h*4);h=this.transitionsBetween(_,c)+1,f=this.transitionsBetween(w,c)+1,(h&1)===1&&(h+=1),(f&1)===1&&(f+=1);let D=(i.getX()+s.getX()+a.getX()+c.getX())/4,k=(i.getY()+s.getY()+a.getY()+c.getY())/4;i=yt.moveAway(i,D,k),s=yt.moveAway(s,D,k),a=yt.moveAway(a,D,k),c=yt.moveAway(c,D,k);let Q,z;return _=yt.shiftPoint(i,s,f*4),_=yt.shiftPoint(_,c,h*4),Q=yt.shiftPoint(s,i,f*4),Q=yt.shiftPoint(Q,a,h*4),w=yt.shiftPoint(a,c,f*4),w=yt.shiftPoint(w,s,h*4),z=yt.shiftPoint(c,a,f*4),z=yt.shiftPoint(z,i,h*4),[_,Q,w,z]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,s,a,c,h,f){return $e.getInstance().sampleGrid(t,h,f,.5,.5,h-.5,.5,h-.5,f-.5,.5,f-.5,i.getX(),i.getY(),c.getX(),c.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(t,i){let s=Math.trunc(t.getX()),a=Math.trunc(t.getY()),c=Math.trunc(i.getX()),h=Math.trunc(i.getY()),f=Math.abs(h-a)>Math.abs(c-s);if(f){let Z=s;s=a,a=Z,Z=c,c=h,h=Z}let _=Math.abs(c-s),w=Math.abs(h-a),D=-_/2,k=a<h?1:-1,Q=s<c?1:-1,z=0,Y=this.image.get(f?a:s,f?s:a);for(let Z=s,ee=a;Z!==c;Z+=Q){let ne=this.image.get(f?ee:Z,f?Z:ee);if(ne!==Y&&(z++,Y=ne),D+=w,D>0){if(ee===h)break;ee+=k,D-=_}}return z}}class Hr{constructor(){this.decoder=new d0}decode(t,i=null){let s,a;if(i!=null&&i.has(F.PURE_BARCODE)){const w=Hr.extractPureBits(t.getBlackMatrix());s=this.decoder.decode(w),a=Hr.NO_POINTS}else{const w=new yt(t.getBlackMatrix()).detect();s=this.decoder.decode(w.getBits()),a=w.getPoints()}const c=s.getRawBytes(),h=new xe(s.getText(),c,8*c.length,a,fe.DATA_MATRIX,C.currentTimeMillis()),f=s.getByteSegments();f!=null&&h.putMetadata(ae.BYTE_SEGMENTS,f);const _=s.getECLevel();return _!=null&&h.putMetadata(ae.ERROR_CORRECTION_LEVEL,_),h}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(i==null||s==null)throw new W;const a=this.moduleSize(i,t);let c=i[1];const h=s[1];let f=i[0];const w=(s[0]-f+1)/a,D=(h-c+1)/a;if(w<=0||D<=0)throw new W;const k=a/2;c+=k,f+=k;const Q=new q(w,D);for(let z=0;z<D;z++){const Y=c+z*a;for(let Z=0;Z<w;Z++)t.get(f+Z*a,Y)&&Q.set(Z,z)}return Q}static moduleSize(t,i){const s=i.getWidth();let a=t[0];const c=t[1];for(;a<s&&i.get(a,c);)a++;if(a===s)throw new W;const h=a-t[0];if(h===0)throw new W;return h}}Hr.NO_POINTS=[];class f0 extends Le{constructor(t=500){super(new Hr,t)}}var Mi;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Mi||(Mi={}));class ft{constructor(t,i,s){this.value=t,this.stringValue=i,this.bits=s,ft.FOR_BITS.set(s,this),ft.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return ft.L;case"M":return ft.M;case"Q":return ft.Q;case"H":return ft.H;default:throw new O(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof ft))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=ft.FOR_BITS.size)throw new x;return ft.FOR_BITS.get(t)}}ft.FOR_BITS=new Map,ft.FOR_VALUE=new Map,ft.L=new ft(Mi.L,"L",1),ft.M=new ft(Mi.M,"M",0),ft.Q=new ft(Mi.Q,"Q",3),ft.H=new ft(Mi.H,"H",2);class Mt{constructor(t){this.errorCorrectionLevel=ft.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return S.bitCount(t^i)}static decodeFormatInformation(t,i){const s=Mt.doDecodeFormatInformation(t,i);return s!==null?s:Mt.doDecodeFormatInformation(t^Mt.FORMAT_INFO_MASK_QR,i^Mt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let s=Number.MAX_SAFE_INTEGER,a=0;for(const c of Mt.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===t||h===i)return new Mt(c[1]);let f=Mt.numBitsDiffering(t,h);f<s&&(a=c[1],s=f),t!==i&&(f=Mt.numBitsDiffering(i,h),f<s&&(a=c[1],s=f))}return s<=3?new Mt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Mt))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Mt.FORMAT_INFO_MASK_QR=21522,Mt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class te{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const s of i)t+=s.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Re{constructor(t,i,...s){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=s;let a=0;const c=s[0].getECCodewordsPerBlock(),h=s[0].getECBlocks();for(const f of h)a+=f.getCount()*(f.getDataCodewords()+c);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new $;try{return this.getVersionForNumber((t-17)/4)}catch{throw new $}}static getVersionForNumber(t){if(t<1||t>40)throw new x;return Re.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<Re.VERSION_DECODE_INFO.length;a++){const c=Re.VERSION_DECODE_INFO[a];if(c===t)return Re.getVersionForNumber(a+7);const h=Mt.numBitsDiffering(t,c);h<i&&(s=a+7,i=h)}return i<=3?Re.getVersionForNumber(s):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new q(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const c=this.alignmentPatternCenters[a]-2;for(let h=0;h<s;h++)a===0&&(h===0||h===s-1)||a===s-1&&h===0||i.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Re.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Re.VERSIONS=[new Re(1,new Int32Array(0),new te(7,new V(1,19)),new te(10,new V(1,16)),new te(13,new V(1,13)),new te(17,new V(1,9))),new Re(2,Int32Array.from([6,18]),new te(10,new V(1,34)),new te(16,new V(1,28)),new te(22,new V(1,22)),new te(28,new V(1,16))),new Re(3,Int32Array.from([6,22]),new te(15,new V(1,55)),new te(26,new V(1,44)),new te(18,new V(2,17)),new te(22,new V(2,13))),new Re(4,Int32Array.from([6,26]),new te(20,new V(1,80)),new te(18,new V(2,32)),new te(26,new V(2,24)),new te(16,new V(4,9))),new Re(5,Int32Array.from([6,30]),new te(26,new V(1,108)),new te(24,new V(2,43)),new te(18,new V(2,15),new V(2,16)),new te(22,new V(2,11),new V(2,12))),new Re(6,Int32Array.from([6,34]),new te(18,new V(2,68)),new te(16,new V(4,27)),new te(24,new V(4,19)),new te(28,new V(4,15))),new Re(7,Int32Array.from([6,22,38]),new te(20,new V(2,78)),new te(18,new V(4,31)),new te(18,new V(2,14),new V(4,15)),new te(26,new V(4,13),new V(1,14))),new Re(8,Int32Array.from([6,24,42]),new te(24,new V(2,97)),new te(22,new V(2,38),new V(2,39)),new te(22,new V(4,18),new V(2,19)),new te(26,new V(4,14),new V(2,15))),new Re(9,Int32Array.from([6,26,46]),new te(30,new V(2,116)),new te(22,new V(3,36),new V(2,37)),new te(20,new V(4,16),new V(4,17)),new te(24,new V(4,12),new V(4,13))),new Re(10,Int32Array.from([6,28,50]),new te(18,new V(2,68),new V(2,69)),new te(26,new V(4,43),new V(1,44)),new te(24,new V(6,19),new V(2,20)),new te(28,new V(6,15),new V(2,16))),new Re(11,Int32Array.from([6,30,54]),new te(20,new V(4,81)),new te(30,new V(1,50),new V(4,51)),new te(28,new V(4,22),new V(4,23)),new te(24,new V(3,12),new V(8,13))),new Re(12,Int32Array.from([6,32,58]),new te(24,new V(2,92),new V(2,93)),new te(22,new V(6,36),new V(2,37)),new te(26,new V(4,20),new V(6,21)),new te(28,new V(7,14),new V(4,15))),new Re(13,Int32Array.from([6,34,62]),new te(26,new V(4,107)),new te(22,new V(8,37),new V(1,38)),new te(24,new V(8,20),new V(4,21)),new te(22,new V(12,11),new V(4,12))),new Re(14,Int32Array.from([6,26,46,66]),new te(30,new V(3,115),new V(1,116)),new te(24,new V(4,40),new V(5,41)),new te(20,new V(11,16),new V(5,17)),new te(24,new V(11,12),new V(5,13))),new Re(15,Int32Array.from([6,26,48,70]),new te(22,new V(5,87),new V(1,88)),new te(24,new V(5,41),new V(5,42)),new te(30,new V(5,24),new V(7,25)),new te(24,new V(11,12),new V(7,13))),new Re(16,Int32Array.from([6,26,50,74]),new te(24,new V(5,98),new V(1,99)),new te(28,new V(7,45),new V(3,46)),new te(24,new V(15,19),new V(2,20)),new te(30,new V(3,15),new V(13,16))),new Re(17,Int32Array.from([6,30,54,78]),new te(28,new V(1,107),new V(5,108)),new te(28,new V(10,46),new V(1,47)),new te(28,new V(1,22),new V(15,23)),new te(28,new V(2,14),new V(17,15))),new Re(18,Int32Array.from([6,30,56,82]),new te(30,new V(5,120),new V(1,121)),new te(26,new V(9,43),new V(4,44)),new te(28,new V(17,22),new V(1,23)),new te(28,new V(2,14),new V(19,15))),new Re(19,Int32Array.from([6,30,58,86]),new te(28,new V(3,113),new V(4,114)),new te(26,new V(3,44),new V(11,45)),new te(26,new V(17,21),new V(4,22)),new te(26,new V(9,13),new V(16,14))),new Re(20,Int32Array.from([6,34,62,90]),new te(28,new V(3,107),new V(5,108)),new te(26,new V(3,41),new V(13,42)),new te(30,new V(15,24),new V(5,25)),new te(28,new V(15,15),new V(10,16))),new Re(21,Int32Array.from([6,28,50,72,94]),new te(28,new V(4,116),new V(4,117)),new te(26,new V(17,42)),new te(28,new V(17,22),new V(6,23)),new te(30,new V(19,16),new V(6,17))),new Re(22,Int32Array.from([6,26,50,74,98]),new te(28,new V(2,111),new V(7,112)),new te(28,new V(17,46)),new te(30,new V(7,24),new V(16,25)),new te(24,new V(34,13))),new Re(23,Int32Array.from([6,30,54,78,102]),new te(30,new V(4,121),new V(5,122)),new te(28,new V(4,47),new V(14,48)),new te(30,new V(11,24),new V(14,25)),new te(30,new V(16,15),new V(14,16))),new Re(24,Int32Array.from([6,28,54,80,106]),new te(30,new V(6,117),new V(4,118)),new te(28,new V(6,45),new V(14,46)),new te(30,new V(11,24),new V(16,25)),new te(30,new V(30,16),new V(2,17))),new Re(25,Int32Array.from([6,32,58,84,110]),new te(26,new V(8,106),new V(4,107)),new te(28,new V(8,47),new V(13,48)),new te(30,new V(7,24),new V(22,25)),new te(30,new V(22,15),new V(13,16))),new Re(26,Int32Array.from([6,30,58,86,114]),new te(28,new V(10,114),new V(2,115)),new te(28,new V(19,46),new V(4,47)),new te(28,new V(28,22),new V(6,23)),new te(30,new V(33,16),new V(4,17))),new Re(27,Int32Array.from([6,34,62,90,118]),new te(30,new V(8,122),new V(4,123)),new te(28,new V(22,45),new V(3,46)),new te(30,new V(8,23),new V(26,24)),new te(30,new V(12,15),new V(28,16))),new Re(28,Int32Array.from([6,26,50,74,98,122]),new te(30,new V(3,117),new V(10,118)),new te(28,new V(3,45),new V(23,46)),new te(30,new V(4,24),new V(31,25)),new te(30,new V(11,15),new V(31,16))),new Re(29,Int32Array.from([6,30,54,78,102,126]),new te(30,new V(7,116),new V(7,117)),new te(28,new V(21,45),new V(7,46)),new te(30,new V(1,23),new V(37,24)),new te(30,new V(19,15),new V(26,16))),new Re(30,Int32Array.from([6,26,52,78,104,130]),new te(30,new V(5,115),new V(10,116)),new te(28,new V(19,47),new V(10,48)),new te(30,new V(15,24),new V(25,25)),new te(30,new V(23,15),new V(25,16))),new Re(31,Int32Array.from([6,30,56,82,108,134]),new te(30,new V(13,115),new V(3,116)),new te(28,new V(2,46),new V(29,47)),new te(30,new V(42,24),new V(1,25)),new te(30,new V(23,15),new V(28,16))),new Re(32,Int32Array.from([6,34,60,86,112,138]),new te(30,new V(17,115)),new te(28,new V(10,46),new V(23,47)),new te(30,new V(10,24),new V(35,25)),new te(30,new V(19,15),new V(35,16))),new Re(33,Int32Array.from([6,30,58,86,114,142]),new te(30,new V(17,115),new V(1,116)),new te(28,new V(14,46),new V(21,47)),new te(30,new V(29,24),new V(19,25)),new te(30,new V(11,15),new V(46,16))),new Re(34,Int32Array.from([6,34,62,90,118,146]),new te(30,new V(13,115),new V(6,116)),new te(28,new V(14,46),new V(23,47)),new te(30,new V(44,24),new V(7,25)),new te(30,new V(59,16),new V(1,17))),new Re(35,Int32Array.from([6,30,54,78,102,126,150]),new te(30,new V(12,121),new V(7,122)),new te(28,new V(12,47),new V(26,48)),new te(30,new V(39,24),new V(14,25)),new te(30,new V(22,15),new V(41,16))),new Re(36,Int32Array.from([6,24,50,76,102,128,154]),new te(30,new V(6,121),new V(14,122)),new te(28,new V(6,47),new V(34,48)),new te(30,new V(46,24),new V(10,25)),new te(30,new V(2,15),new V(64,16))),new Re(37,Int32Array.from([6,28,54,80,106,132,158]),new te(30,new V(17,122),new V(4,123)),new te(28,new V(29,46),new V(14,47)),new te(30,new V(49,24),new V(10,25)),new te(30,new V(24,15),new V(46,16))),new Re(38,Int32Array.from([6,32,58,84,110,136,162]),new te(30,new V(4,122),new V(18,123)),new te(28,new V(13,46),new V(32,47)),new te(30,new V(48,24),new V(14,25)),new te(30,new V(42,15),new V(32,16))),new Re(39,Int32Array.from([6,26,54,82,110,138,166]),new te(30,new V(20,117),new V(4,118)),new te(28,new V(40,47),new V(7,48)),new te(30,new V(43,24),new V(22,25)),new te(30,new V(10,15),new V(67,16))),new Re(40,Int32Array.from([6,30,58,86,114,142,170]),new te(30,new V(19,118),new V(6,119)),new te(28,new V(18,47),new V(31,48)),new te(30,new V(34,24),new V(34,25)),new te(30,new V(20,15),new V(61,16)))];var Dt;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Dt||(Dt={}));class or{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let s=0;s<i;s++)for(let a=0;a<i;a++)this.isMasked(s,a)&&t.flip(a,s)}}or.values=new Map([[Dt.DATA_MASK_000,new or(Dt.DATA_MASK_000,(L,t)=>(L+t&1)===0)],[Dt.DATA_MASK_001,new or(Dt.DATA_MASK_001,(L,t)=>(L&1)===0)],[Dt.DATA_MASK_010,new or(Dt.DATA_MASK_010,(L,t)=>t%3===0)],[Dt.DATA_MASK_011,new or(Dt.DATA_MASK_011,(L,t)=>(L+t)%3===0)],[Dt.DATA_MASK_100,new or(Dt.DATA_MASK_100,(L,t)=>(Math.floor(L/2)+Math.floor(t/3)&1)===0)],[Dt.DATA_MASK_101,new or(Dt.DATA_MASK_101,(L,t)=>L*t%6===0)],[Dt.DATA_MASK_110,new or(Dt.DATA_MASK_110,(L,t)=>L*t%6<3)],[Dt.DATA_MASK_111,new or(Dt.DATA_MASK_111,(L,t)=>(L+t+L*t%3&1)===0)]]);class g0{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new $;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let c=0;c<6;c++)t=this.copyBit(c,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let c=5;c>=0;c--)t=this.copyBit(8,c,t);const i=this.bitMatrix.getHeight();let s=0;const a=i-7;for(let c=i-1;c>=a;c--)s=this.copyBit(8,c,s);for(let c=i-8;c<i;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=Mt.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Re.getVersionForNumber(i);let s=0;const a=t-11;for(let h=5;h>=0;h--)for(let f=t-9;f>=a;f--)s=this.copyBit(f,h,s);let c=Re.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;s=0;for(let h=5;h>=0;h--)for(let f=t-9;f>=a;f--)s=this.copyBit(h,f,s);if(c=Re.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;throw new $}copyBit(t,i,s){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?s<<1|1:s<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),s=or.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const c=i.buildFunctionPattern();let h=!0;const f=new Uint8Array(i.getTotalCodewords());let _=0,w=0,D=0;for(let k=a-1;k>0;k-=2){k===6&&k--;for(let Q=0;Q<a;Q++){const z=h?a-1-Q:Q;for(let Y=0;Y<2;Y++)c.get(k-Y,z)||(D++,w<<=1,this.bitMatrix.get(k-Y,z)&&(w|=1),D===8&&(f[_++]=w,D=0,w=0))}h=!h}if(_!==i.getTotalCodewords())throw new $;return f}remask(){if(this.parsedFormatInfo===null)return;const t=or.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,s=t.getWidth();i<s;i++)for(let a=i+1,c=t.getHeight();a<c;a++)t.get(i,a)!==t.get(a,i)&&(t.flip(a,i),t.flip(i,a))}}class Bo{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,s){if(t.length!==i.getTotalCodewords())throw new x;const a=i.getECBlocksForLevel(s);let c=0;const h=a.getECBlocks();for(const Y of h)c+=Y.getCount();const f=new Array(c);let _=0;for(const Y of h)for(let Z=0;Z<Y.getCount();Z++){const ee=Y.getDataCodewords(),ne=a.getECCodewordsPerBlock()+ee;f[_++]=new Bo(ee,new Uint8Array(ne))}const w=f[0].codewords.length;let D=f.length-1;for(;D>=0&&f[D].codewords.length!==w;)D--;D++;const k=w-a.getECCodewordsPerBlock();let Q=0;for(let Y=0;Y<k;Y++)for(let Z=0;Z<_;Z++)f[Z].codewords[Y]=t[Q++];for(let Y=D;Y<_;Y++)f[Y].codewords[k]=t[Q++];const z=f[0].codewords.length;for(let Y=k;Y<z;Y++)for(let Z=0;Z<_;Z++){const ee=Z<D?Y:Y+1;f[Z].codewords[ee]=t[Q++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ar;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(ar||(ar={}));class Ie{constructor(t,i,s,a){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=s,this.bits=a,Ie.FOR_BITS.set(a,this),Ie.FOR_VALUE.set(t,this)}static forBits(t){const i=Ie.FOR_BITS.get(t);if(i===void 0)throw new x;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let s;return i<=9?s=0:i<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ie))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Ie.FOR_BITS=new Map,Ie.FOR_VALUE=new Map,Ie.TERMINATOR=new Ie(ar.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ie.NUMERIC=new Ie(ar.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ie.ALPHANUMERIC=new Ie(ar.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ie.STRUCTURED_APPEND=new Ie(ar.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ie.BYTE=new Ie(ar.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ie.ECI=new Ie(ar.ECI,"ECI",Int32Array.from([0,0,0]),7),Ie.KANJI=new Ie(ar.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ie.FNC1_FIRST_POSITION=new Ie(ar.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ie.FNC1_SECOND_POSITION=new Ie(ar.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ie.HANZI=new Ie(ar.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class xt{static decode(t,i,s,a){const c=new Fo(t);let h=new X;const f=new Array;let _=-1,w=-1;try{let D=null,k=!1,Q;do{if(c.available()<4)Q=Ie.TERMINATOR;else{const z=c.readBits(4);Q=Ie.forBits(z)}switch(Q){case Ie.TERMINATOR:break;case Ie.FNC1_FIRST_POSITION:case Ie.FNC1_SECOND_POSITION:k=!0;break;case Ie.STRUCTURED_APPEND:if(c.available()<16)throw new $;_=c.readBits(8),w=c.readBits(8);break;case Ie.ECI:const z=xt.parseECIValue(c);if(D=M.getCharacterSetECIByValue(z),D===null)throw new $;break;case Ie.HANZI:const Y=c.readBits(4),Z=c.readBits(Q.getCharacterCountBits(i));Y===xt.GB2312_SUBSET&&xt.decodeHanziSegment(c,h,Z);break;default:const ee=c.readBits(Q.getCharacterCountBits(i));switch(Q){case Ie.NUMERIC:xt.decodeNumericSegment(c,h,ee);break;case Ie.ALPHANUMERIC:xt.decodeAlphanumericSegment(c,h,ee,k);break;case Ie.BYTE:xt.decodeByteSegment(c,h,ee,D,f,a);break;case Ie.KANJI:xt.decodeKanjiSegment(c,h,ee);break;default:throw new $}break}}while(Q!==Ie.TERMINATOR)}catch{throw new $}return new oe(t,h.toString(),f.length===0?null:f,s===null?null:s.toString(),_,w)}static decodeHanziSegment(t,i,s){if(s*13>t.available())throw new $;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const h=t.readBits(13);let f=h/96<<8&4294967295|h%96;f<959?f+=41377:f+=42657,a[c]=f>>8&255,a[c+1]=f&255,c+=2,s--}try{i.append(T.decode(a,P.GB2312))}catch(h){throw new $(h)}}static decodeKanjiSegment(t,i,s){if(s*13>t.available())throw new $;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const h=t.readBits(13);let f=h/192<<8&4294967295|h%192;f<7936?f+=33088:f+=49472,a[c]=f>>8,a[c+1]=f,c+=2,s--}try{i.append(T.decode(a,P.SHIFT_JIS))}catch(h){throw new $(h)}}static decodeByteSegment(t,i,s,a,c,h){if(8*s>t.available())throw new $;const f=new Uint8Array(s);for(let w=0;w<s;w++)f[w]=t.readBits(8);let _;a===null?_=P.guessEncoding(f,h):_=a.getName();try{i.append(T.decode(f,_))}catch(w){throw new $(w)}c.push(f)}static toAlphaNumericChar(t){if(t>=xt.ALPHANUMERIC_CHARS.length)throw new $;return xt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,s,a){const c=i.length();for(;s>1;){if(t.available()<11)throw new $;const h=t.readBits(11);i.append(xt.toAlphaNumericChar(Math.floor(h/45))),i.append(xt.toAlphaNumericChar(h%45)),s-=2}if(s===1){if(t.available()<6)throw new $;i.append(xt.toAlphaNumericChar(t.readBits(6)))}if(a)for(let h=c;h<i.length();h++)i.charAt(h)==="%"&&(h<i.length()-1&&i.charAt(h+1)==="%"?i.deleteCharAt(h+1):i.setCharAt(h,""))}static decodeNumericSegment(t,i,s){for(;s>=3;){if(t.available()<10)throw new $;const a=t.readBits(10);if(a>=1e3)throw new $;i.append(xt.toAlphaNumericChar(Math.floor(a/100))),i.append(xt.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(xt.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(t.available()<7)throw new $;const a=t.readBits(7);if(a>=100)throw new $;i.append(xt.toAlphaNumericChar(Math.floor(a/10))),i.append(xt.toAlphaNumericChar(a%10))}else if(s===1){if(t.available()<4)throw new $;const a=t.readBits(4);if(a>=10)throw new $;i.append(xt.toAlphaNumericChar(a))}}static parseECIValue(t){const i=t.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const s=t.readBits(8);return(i&63)<<8&4294967295|s}if((i&224)===192){const s=t.readBits(16);return(i&31)<<16&4294967295|s}throw new $}}xt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",xt.GB2312_SUBSET=1;class nl{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class p0{constructor(){this.rsDecoder=new Se(Te.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(q.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const s=new g0(t);let a=null;try{return this.decodeBitMatrixParser(s,i)}catch(c){a=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,i);return c.setOther(new nl(!0)),c}catch(c){throw a!==null?a:c}}decodeBitMatrixParser(t,i){const s=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),c=t.readCodewords(),h=Bo.getDataBlocks(c,s,a);let f=0;for(const D of h)f+=D.getNumDataCodewords();const _=new Uint8Array(f);let w=0;for(const D of h){const k=D.getCodewords(),Q=D.getNumDataCodewords();this.correctErrors(k,Q);for(let z=0;z<Q;z++)_[w++]=k[z]}return xt.decode(_,s,a,i)}correctErrors(t,i){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-i)}catch{throw new y}for(let a=0;a<i;a++)t[a]=s[a]}}class $o extends we{constructor(t,i,s){super(t,i),this.estimatedModuleSize=s}aboutEquals(t,i,s){if(Math.abs(i-this.getY())<=t&&Math.abs(s-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,i,s){const a=(this.getX()+i)/2,c=(this.getY()+t)/2,h=(this.estimatedModuleSize+s)/2;return new $o(a,c,h)}}class js{constructor(t,i,s,a,c,h,f){this.image=t,this.startX=i,this.startY=s,this.width=a,this.height=c,this.moduleSize=h,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,s=this.width,a=t+s,c=this.startY+i/2,h=new Int32Array(3),f=this.image;for(let _=0;_<i;_++){const w=c+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));h[0]=0,h[1]=0,h[2]=0;let D=t;for(;D<a&&!f.get(D,w);)D++;let k=0;for(;D<a;){if(f.get(D,w))if(k===1)h[1]++;else if(k===2){if(this.foundPatternCross(h)){const Q=this.handlePossibleCenter(h,w,D);if(Q!==null)return Q}h[0]=h[2],h[1]=1,h[2]=0,k=1}else h[++k]++;else k===1&&k++,h[k]++;D++}if(this.foundPatternCross(h)){const Q=this.handlePossibleCenter(h,w,a);if(Q!==null)return Q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,s=i/2;for(let a=0;a<3;a++)if(Math.abs(i-t[a])>=s)return!1;return!0}crossCheckVertical(t,i,s,a){const c=this.image,h=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let _=t;for(;_>=0&&c.get(i,_)&&f[1]<=s;)f[1]++,_--;if(_<0||f[1]>s)return NaN;for(;_>=0&&!c.get(i,_)&&f[0]<=s;)f[0]++,_--;if(f[0]>s)return NaN;for(_=t+1;_<h&&c.get(i,_)&&f[1]<=s;)f[1]++,_++;if(_===h||f[1]>s)return NaN;for(;_<h&&!c.get(i,_)&&f[2]<=s;)f[2]++,_++;if(f[2]>s)return NaN;const w=f[0]+f[1]+f[2];return 5*Math.abs(w-a)>=2*a?NaN:this.foundPatternCross(f)?js.centerFromEnd(f,_):NaN}handlePossibleCenter(t,i,s){const a=t[0]+t[1]+t[2],c=js.centerFromEnd(t,s),h=this.crossCheckVertical(i,c,2*t[1],a);if(!isNaN(h)){const f=(t[0]+t[1]+t[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(f,h,c))return w.combineEstimate(h,c,f);const _=new $o(c,h,f);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Wo extends we{constructor(t,i,s,a){super(t,i),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,s){if(Math.abs(i-this.getY())<=t&&Math.abs(s-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,i,s){const a=this.count+1,c=(this.count*this.getX()+i)/a,h=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+s)/a;return new Wo(c,h,f,a)}}class m0{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class At{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(F.TRY_HARDER)!==void 0,s=t!=null&&t.get(F.PURE_BARCODE)!==void 0,a=this.image,c=a.getHeight(),h=a.getWidth();let f=Math.floor(3*c/(4*At.MAX_MODULES));(f<At.MIN_SKIP||i)&&(f=At.MIN_SKIP);let _=!1;const w=new Int32Array(5);for(let k=f-1;k<c&&!_;k+=f){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let Q=0;for(let z=0;z<h;z++)if(a.get(z,k))(Q&1)===1&&Q++,w[Q]++;else if(Q&1)w[Q]++;else if(Q===4)if(At.foundPatternCross(w)){if(this.handlePossibleCenter(w,k,z,s)===!0)if(f=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>w[2]&&(k+=Z-w[2]-f,z=h-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,Q=3;continue}Q=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,Q=3;else w[++Q]++;At.foundPatternCross(w)&&this.handlePossibleCenter(w,k,h,s)===!0&&(f=w[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return we.orderBestPatterns(D),new m0(D)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let c=0;c<5;c++){const h=t[c];if(h===0)return!1;i+=h}if(i<7)return!1;const s=i/7,a=s/2;return Math.abs(s-t[0])<a&&Math.abs(s-t[1])<a&&Math.abs(3*s-t[2])<3*a&&Math.abs(s-t[3])<a&&Math.abs(s-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,s,a){const c=this.getCrossCheckStateCount();let h=0;const f=this.image;for(;t>=h&&i>=h&&f.get(i-h,t-h);)c[2]++,h++;if(t<h||i<h)return!1;for(;t>=h&&i>=h&&!f.get(i-h,t-h)&&c[1]<=s;)c[1]++,h++;if(t<h||i<h||c[1]>s)return!1;for(;t>=h&&i>=h&&f.get(i-h,t-h)&&c[0]<=s;)c[0]++,h++;if(c[0]>s)return!1;const _=f.getHeight(),w=f.getWidth();for(h=1;t+h<_&&i+h<w&&f.get(i+h,t+h);)c[2]++,h++;if(t+h>=_||i+h>=w)return!1;for(;t+h<_&&i+h<w&&!f.get(i+h,t+h)&&c[3]<s;)c[3]++,h++;if(t+h>=_||i+h>=w||c[3]>=s)return!1;for(;t+h<_&&i+h<w&&f.get(i+h,t+h)&&c[4]<s;)c[4]++,h++;if(c[4]>=s)return!1;const D=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(D-a)<2*a&&At.foundPatternCross(c)}crossCheckVertical(t,i,s,a){const c=this.image,h=c.getHeight(),f=this.getCrossCheckStateCount();let _=t;for(;_>=0&&c.get(i,_);)f[2]++,_--;if(_<0)return NaN;for(;_>=0&&!c.get(i,_)&&f[1]<=s;)f[1]++,_--;if(_<0||f[1]>s)return NaN;for(;_>=0&&c.get(i,_)&&f[0]<=s;)f[0]++,_--;if(f[0]>s)return NaN;for(_=t+1;_<h&&c.get(i,_);)f[2]++,_++;if(_===h)return NaN;for(;_<h&&!c.get(i,_)&&f[3]<s;)f[3]++,_++;if(_===h||f[3]>=s)return NaN;for(;_<h&&c.get(i,_)&&f[4]<s;)f[4]++,_++;if(f[4]>=s)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-a)>=2*a?NaN:At.foundPatternCross(f)?At.centerFromEnd(f,_):NaN}crossCheckHorizontal(t,i,s,a){const c=this.image,h=c.getWidth(),f=this.getCrossCheckStateCount();let _=t;for(;_>=0&&c.get(_,i);)f[2]++,_--;if(_<0)return NaN;for(;_>=0&&!c.get(_,i)&&f[1]<=s;)f[1]++,_--;if(_<0||f[1]>s)return NaN;for(;_>=0&&c.get(_,i)&&f[0]<=s;)f[0]++,_--;if(f[0]>s)return NaN;for(_=t+1;_<h&&c.get(_,i);)f[2]++,_++;if(_===h)return NaN;for(;_<h&&!c.get(_,i)&&f[3]<s;)f[3]++,_++;if(_===h||f[3]>=s)return NaN;for(;_<h&&c.get(_,i)&&f[4]<s;)f[4]++,_++;if(f[4]>=s)return NaN;const w=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(w-a)>=a?NaN:At.foundPatternCross(f)?At.centerFromEnd(f,_):NaN}handlePossibleCenter(t,i,s,a){const c=t[0]+t[1]+t[2]+t[3]+t[4];let h=At.centerFromEnd(t,s),f=this.crossCheckVertical(i,Math.floor(h),t[2],c);if(!isNaN(f)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(f),t[2],c),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(f),Math.floor(h),t[2],c)))){const _=c/7;let w=!1;const D=this.possibleCenters;for(let k=0,Q=D.length;k<Q;k++){const z=D[k];if(z.aboutEquals(_,f,h)){D[k]=z.combineEstimate(f,h,_),w=!0;break}}if(!w){const k=new Wo(h,f,_);D.push(k),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(k)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const s of this.possibleCenters)if(s.getCount()>=At.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const s=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=At.CENTER_QUORUM&&(t++,i+=h.getEstimatedModuleSize());if(t<3)return!1;const a=i/s;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-a);return c<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new W;const i=this.possibleCenters;let s;if(t>3){let a=0,c=0;for(const _ of this.possibleCenters){const w=_.getEstimatedModuleSize();a+=w,c+=w*w}s=a/t;let h=Math.sqrt(c/t-s*s);i.sort((_,w)=>{const D=Math.abs(w.getEstimatedModuleSize()-s),k=Math.abs(_.getEstimatedModuleSize()-s);return D<k?-1:D>k?1:0});const f=Math.max(.2*s,h);for(let _=0;_<i.length&&i.length>3;_++){const w=i[_];Math.abs(w.getEstimatedModuleSize()-s)>f&&(i.splice(_,1),_--)}}if(i.length>3){let a=0;for(const c of i)a+=c.getEstimatedModuleSize();s=a/i.length,i.sort((c,h)=>{if(h.getCount()===c.getCount()){const f=Math.abs(h.getEstimatedModuleSize()-s),_=Math.abs(c.getEstimatedModuleSize()-s);return f<_?1:f>_?-1:0}else return h.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}At.CENTER_QUORUM=2,At.MIN_SKIP=3,At.MAX_MODULES=57;class us{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(F.NEED_RESULT_POINT_CALLBACK);const s=new At(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(s)}processFinderPatternInfo(t){const i=t.getTopLeft(),s=t.getTopRight(),a=t.getBottomLeft(),c=this.calculateModuleSize(i,s,a);if(c<1)throw new W("No pattern found in proccess finder.");const h=us.computeDimension(i,s,a,c),f=Re.getProvisionalVersionForDimension(h),_=f.getDimensionForVersion()-7;let w=null;if(f.getAlignmentPatternCenters().length>0){const z=s.getX()-i.getX()+a.getX(),Y=s.getY()-i.getY()+a.getY(),Z=1-3/_,ee=Math.floor(i.getX()+Z*(z-i.getX())),ne=Math.floor(i.getY()+Z*(Y-i.getY()));for(let pe=4;pe<=16;pe<<=1)try{w=this.findAlignmentInRegion(c,ee,ne,pe);break}catch(me){if(!(me instanceof W))throw me}}const D=us.createTransform(i,s,a,w,h),k=us.sampleGrid(this.image,D,h);let Q;return w===null?Q=[a,i,s]:Q=[a,i,s,w],new De(k,Q)}static createTransform(t,i,s,a,c){const h=c-3.5;let f,_,w,D;return a!==null?(f=a.getX(),_=a.getY(),w=h-3,D=w):(f=i.getX()-t.getX()+s.getX(),_=i.getY()-t.getY()+s.getY(),w=h,D=h),ve.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,w,D,3.5,h,t.getX(),t.getY(),i.getX(),i.getY(),f,_,s.getX(),s.getY())}static sampleGrid(t,i,s){return $e.getInstance().sampleGridWithTransform(t,s,s,i)}static computeDimension(t,i,s,a){const c=Fe.round(we.distance(t,i)/a),h=Fe.round(we.distance(t,s)/a);let f=Math.floor((c+h)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new W("Dimensions could be not found.")}return f}calculateModuleSize(t,i,s){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,s))/2}calculateModuleSizeOneWay(t,i){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,s,a){let c=this.sizeOfBlackWhiteBlackRun(t,i,s,a),h=1,f=t-(s-t);f<0?(h=t/(t-f),f=0):f>=this.image.getWidth()&&(h=(this.image.getWidth()-1-t)/(f-t),f=this.image.getWidth()-1);let _=Math.floor(i-(a-i)*h);return h=1,_<0?(h=i/(i-_),_=0):_>=this.image.getHeight()&&(h=(this.image.getHeight()-1-i)/(_-i),_=this.image.getHeight()-1),f=Math.floor(t+(f-t)*h),c+=this.sizeOfBlackWhiteBlackRun(t,i,f,_),c-1}sizeOfBlackWhiteBlackRun(t,i,s,a){const c=Math.abs(a-i)>Math.abs(s-t);if(c){let z=t;t=i,i=z,z=s,s=a,a=z}const h=Math.abs(s-t),f=Math.abs(a-i);let _=-h/2;const w=t<s?1:-1,D=i<a?1:-1;let k=0;const Q=s+w;for(let z=t,Y=i;z!==Q;z+=w){const Z=c?Y:z,ee=c?z:Y;if(k===1===this.image.get(Z,ee)){if(k===2)return Fe.distance(z,Y,t,i);k++}if(_+=f,_>0){if(Y===a)break;Y+=D,_-=h}}return k===2?Fe.distance(s+w,a,t,i):NaN}findAlignmentInRegion(t,i,s,a){const c=Math.floor(a*t),h=Math.max(0,i-c),f=Math.min(this.image.getWidth()-1,i+c);if(f-h<t*3)throw new W("Alignment top exceeds estimated module size.");const _=Math.max(0,s-c),w=Math.min(this.image.getHeight()-1,s+c);if(w-_<t*3)throw new W("Alignment bottom exceeds estimated module size.");return new js(this.image,h,_,f-h,w-_,t,this.resultPointCallback).find()}}class Zr{constructor(){this.decoder=new p0}getDecoder(){return this.decoder}decode(t,i){let s,a;if(i!=null&&i.get(F.PURE_BARCODE)!==void 0){const _=Zr.extractPureBits(t.getBlackMatrix());s=this.decoder.decodeBitMatrix(_,i),a=Zr.NO_POINTS}else{const _=new us(t.getBlackMatrix()).detect(i);s=this.decoder.decodeBitMatrix(_.getBits(),i),a=_.getPoints()}s.getOther()instanceof nl&&s.getOther().applyMirroredCorrection(a);const c=new xe(s.getText(),s.getRawBytes(),void 0,a,fe.QR_CODE,void 0),h=s.getByteSegments();h!==null&&c.putMetadata(ae.BYTE_SEGMENTS,h);const f=s.getECLevel();return f!==null&&c.putMetadata(ae.ERROR_CORRECTION_LEVEL,f),s.hasStructuredAppend()&&(c.putMetadata(ae.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(ae.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(i===null||s===null)throw new W;const a=this.moduleSize(i,t);let c=i[1],h=s[1],f=i[0],_=s[0];if(f>=_||c>=h)throw new W;if(h-c!==_-f&&(_=f+(h-c),_>=t.getWidth()))throw new W;const w=Math.round((_-f+1)/a),D=Math.round((h-c+1)/a);if(w<=0||D<=0)throw new W;if(D!==w)throw new W;const k=Math.floor(a/2);c+=k,f+=k;const Q=f+Math.floor((w-1)*a)-_;if(Q>0){if(Q>k)throw new W;f-=Q}const z=c+Math.floor((D-1)*a)-h;if(z>0){if(z>k)throw new W;c-=z}const Y=new q(w,D);for(let Z=0;Z<D;Z++){const ee=c+Math.floor(Z*a);for(let ne=0;ne<w;ne++)t.get(f+Math.floor(ne*a),ee)&&Y.set(ne,Z)}return Y}static moduleSize(t,i){const s=i.getHeight(),a=i.getWidth();let c=t[0],h=t[1],f=!0,_=0;for(;c<a&&h<s;){if(f!==i.get(c,h)){if(++_===5)break;f=!f}c++,h++}if(c===a||h===s)throw new W;return(c-t[0])/7}}Zr.NO_POINTS=new Array;class Ne{PDF417Common(){}static getBitCountSum(t){return Fe.sum(t)}static toIntArray(t){if(t==null||!t.length)return Ne.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let s=0;for(const a of t)i[s++]=a;return i}static getCodeword(t){const i=R.binarySearch(Ne.SYMBOL_TABLE,t&262143);return i<0?-1:(Ne.CODEWORD_TABLE[i]-1)%Ne.NUMBER_OF_CODEWORDS}}Ne.NUMBER_OF_CODEWORDS=929,Ne.MAX_CODEWORDS_IN_BARCODE=Ne.NUMBER_OF_CODEWORDS-1,Ne.MIN_ROWS_IN_BARCODE=3,Ne.MAX_ROWS_IN_BARCODE=90,Ne.MODULES_IN_CODEWORD=17,Ne.MODULES_IN_STOP_PATTERN=18,Ne.BARS_IN_MODULE=8,Ne.EMPTY_INT_ARRAY=new Int32Array([]),Ne.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ne.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class _0{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class qe{static detectMultiple(t,i,s){let a=t.getBlackMatrix(),c=qe.detect(s,a);return c.length||(a=a.clone(),a.rotate180(),c=qe.detect(s,a)),new _0(a,c)}static detect(t,i){const s=new Array;let a=0,c=0,h=!1;for(;a<i.getHeight();){const f=qe.findVertices(i,a,c);if(f[0]==null&&f[3]==null){if(!h)break;h=!1,c=0;for(const _ of s)_[1]!=null&&(a=Math.trunc(Math.max(a,_[1].getY()))),_[3]!=null&&(a=Math.max(a,Math.trunc(_[3].getY())));a+=qe.ROW_STEP;continue}if(h=!0,s.push(f),!t)break;f[2]!=null?(c=Math.trunc(f[2].getX()),a=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY()))}return s}static findVertices(t,i,s){const a=t.getHeight(),c=t.getWidth(),h=new Array(8);return qe.copyToResult(h,qe.findRowsWithPattern(t,a,c,i,s,qe.START_PATTERN),qe.INDEXES_START_PATTERN),h[4]!=null&&(s=Math.trunc(h[4].getX()),i=Math.trunc(h[4].getY())),qe.copyToResult(h,qe.findRowsWithPattern(t,a,c,i,s,qe.STOP_PATTERN),qe.INDEXES_STOP_PATTERN),h}static copyToResult(t,i,s){for(let a=0;a<s.length;a++)t[s[a]]=i[a]}static findRowsWithPattern(t,i,s,a,c,h){const f=new Array(4);let _=!1;const w=new Int32Array(h.length);for(;a<i;a+=qe.ROW_STEP){let k=qe.findGuardPattern(t,c,a,s,!1,h,w);if(k!=null){for(;a>0;){const Q=qe.findGuardPattern(t,c,--a,s,!1,h,w);if(Q!=null)k=Q;else{a++;break}}f[0]=new we(k[0],a),f[1]=new we(k[1],a),_=!0;break}}let D=a+1;if(_){let k=0,Q=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;D<i;D++){const z=qe.findGuardPattern(t,Q[0],D,s,!1,h,w);if(z!=null&&Math.abs(Q[0]-z[0])<qe.MAX_PATTERN_DRIFT&&Math.abs(Q[1]-z[1])<qe.MAX_PATTERN_DRIFT)Q=z,k=0;else{if(k>qe.SKIPPED_ROW_COUNT_MAX)break;k++}}D-=k+1,f[2]=new we(Q[0],D),f[3]=new we(Q[1],D)}return D-a<qe.BARCODE_MIN_HEIGHT&&R.fill(f,null),f}static findGuardPattern(t,i,s,a,c,h,f){R.fillWithin(f,0,f.length,0);let _=i,w=0;for(;t.get(_,s)&&_>0&&w++<qe.MAX_PIXEL_DRIFT;)_--;let D=_,k=0,Q=h.length;for(let z=c;D<a;D++)if(t.get(D,s)!==z)f[k]++;else{if(k===Q-1){if(qe.patternMatchVariance(f,h,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE)return new Int32Array([_,D]);_+=f[0]+f[1],C.arraycopy(f,2,f,0,k-1),f[k-1]=0,f[k]=0,k--}else k++;f[k]=1,z=!z}return k===Q-1&&qe.patternMatchVariance(f,h,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE?new Int32Array([_,D-1]):null}static patternMatchVariance(t,i,s){let a=t.length,c=0,h=0;for(let w=0;w<a;w++)c+=t[w],h+=i[w];if(c<h)return 1/0;let f=c/h;s*=f;let _=0;for(let w=0;w<a;w++){let D=t[w],k=i[w]*f,Q=D>k?D-k:k-D;if(Q>s)return 1/0;_+=Q}return _/c}}qe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),qe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),qe.MAX_AVG_VARIANCE=.42,qe.MAX_INDIVIDUAL_VARIANCE=.8,qe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),qe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),qe.MAX_PIXEL_DRIFT=3,qe.MAX_PATTERN_DRIFT=5,qe.SKIPPED_ROW_COUNT_MAX=25,qe.ROW_STEP=5,qe.BARCODE_MIN_HEIGHT=10;class Rt{constructor(t,i){if(i.length===0)throw new x;this.field=t;let s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),C.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let c of this.coefficients)a=this.field.add(a,c);return a}let i=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)i=this.field.add(this.field.multiply(t,i),this.coefficients[a]);return i}add(t){if(!this.field.equals(t.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,s=t.coefficients;if(i.length>s.length){let h=i;i=s,s=h}let a=new Int32Array(s.length),c=s.length-i.length;C.arraycopy(s,0,a,0,c);for(let h=c;h<s.length;h++)a[h]=this.field.add(i[h-c],s[h]);return new Rt(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new x("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Rt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Rt(this.field,new Int32Array([0]));let i=this.coefficients,s=i.length,a=t.coefficients,c=a.length,h=new Int32Array(s+c-1);for(let f=0;f<s;f++){let _=i[f];for(let w=0;w<c;w++)h[f+w]=this.field.add(h[f+w],this.field.multiply(_,a[w]))}return new Rt(this.field,h)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=this.field.subtract(0,this.coefficients[s]);return new Rt(this.field,i)}multiplyScalar(t){if(t===0)return new Rt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,s=new Int32Array(i);for(let a=0;a<i;a++)s[a]=this.field.multiply(this.coefficients[a],t);return new Rt(this.field,s)}multiplyByMonomial(t,i){if(t<0)throw new x;if(i===0)return new Rt(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+t);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],i);return new Rt(this.field,a)}toString(){let t=new X;for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);s!==0&&(s<0?(t.append(" - "),s=-s):t.length()>0&&t.append(" + "),(i===0||s!==1)&&t.append(s),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class x0{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new x;return this.logTable[t]}inverse(t){if(t===0)throw new He;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Qo extends x0{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let s=1;for(let a=0;a<t;a++)this.expTable[a]=s,s=s*i%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Rt(this,new Int32Array([0])),this.one=new Rt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new x;if(i===0)return this.zero;let s=new Int32Array(t+1);return s[0]=i,new Rt(this,s)}}Qo.PDF417_GF=new Qo(Ne.NUMBER_OF_CODEWORDS,3);class ol{constructor(){this.field=Qo.PDF417_GF}decode(t,i,s){let a=new Rt(this.field,t),c=new Int32Array(i),h=!1;for(let Y=i;Y>0;Y--){let Z=a.evaluateAt(this.field.exp(Y));c[i-Y]=Z,Z!==0&&(h=!0)}if(!h)return 0;let f=this.field.getOne();if(s!=null)for(const Y of s){let Z=this.field.exp(t.length-1-Y),ee=new Rt(this.field,new Int32Array([this.field.subtract(0,Z),1]));f=f.multiply(ee)}let _=new Rt(this.field,c),w=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),_,i),D=w[0],k=w[1],Q=this.findErrorLocations(D),z=this.findErrorMagnitudes(k,D,Q);for(let Y=0;Y<Q.length;Y++){let Z=t.length-1-this.field.log(Q[Y]);if(Z<0)throw y.getChecksumInstance();t[Z]=this.field.subtract(t[Z],z[Y])}return Q.length}runEuclideanAlgorithm(t,i,s){if(t.getDegree()<i.getDegree()){let Q=t;t=i,i=Q}let a=t,c=i,h=this.field.getZero(),f=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let Q=a,z=h;if(a=c,h=f,a.isZero())throw y.getChecksumInstance();c=Q;let Y=this.field.getZero(),Z=a.getCoefficient(a.getDegree()),ee=this.field.inverse(Z);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){let ne=c.getDegree()-a.getDegree(),pe=this.field.multiply(c.getCoefficient(c.getDegree()),ee);Y=Y.add(this.field.buildMonomial(ne,pe)),c=c.subtract(a.multiplyByMonomial(ne,pe))}f=Y.multiply(h).subtract(z).negative()}let _=f.getCoefficient(0);if(_===0)throw y.getChecksumInstance();let w=this.field.inverse(_),D=f.multiply(w),k=c.multiply(w);return[D,k]}findErrorLocations(t){let i=t.getDegree(),s=new Int32Array(i),a=0;for(let c=1;c<this.field.getSize()&&a<i;c++)t.evaluateAt(c)===0&&(s[a]=this.field.inverse(c),a++);if(a!==i)throw y.getChecksumInstance();return s}findErrorMagnitudes(t,i,s){let a=i.getDegree(),c=new Int32Array(a);for(let w=1;w<=a;w++)c[a-w]=this.field.multiply(w,i.getCoefficient(w));let h=new Rt(this.field,c),f=s.length,_=new Int32Array(f);for(let w=0;w<f;w++){let D=this.field.inverse(s[w]),k=this.field.subtract(0,t.evaluateAt(D)),Q=this.field.inverse(h.evaluateAt(D));_[w]=this.field.multiply(k,Q)}return _}}class gi{constructor(t,i,s,a,c){t instanceof gi?this.constructor_2(t):this.constructor_1(t,i,s,a,c)}constructor_1(t,i,s,a,c){const h=i==null||s==null,f=a==null||c==null;if(h&&f)throw new W;h?(i=new we(0,a.getY()),s=new we(0,c.getY())):f&&(a=new we(t.getWidth()-1,i.getY()),c=new we(t.getWidth()-1,s.getY())),this.image=t,this.topLeft=i,this.bottomLeft=s,this.topRight=a,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new gi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,s){let a=this.topLeft,c=this.bottomLeft,h=this.topRight,f=this.bottomRight;if(t>0){let _=s?this.topLeft:this.topRight,w=Math.trunc(_.getY()-t);w<0&&(w=0);let D=new we(_.getX(),w);s?a=D:h=D}if(i>0){let _=s?this.bottomLeft:this.bottomRight,w=Math.trunc(_.getY()+i);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let D=new we(_.getX(),w);s?c=D:f=D}return new gi(this.image,a,c,h,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class O0{constructor(t,i,s,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=s,this.rowCount=i+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ds{constructor(){this.buffer=""}static form(t,i){let s=-1;function a(h,f,_,w,D,k){if(h==="%%")return"%";if(i[++s]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let Q=D?parseInt(D.substr(1)):void 0,z;switch(k){case"s":z=i[s];break;case"c":z=i[s][0];break;case"f":z=parseFloat(i[s]).toFixed(h);break;case"p":z=parseFloat(i[s]).toPrecision(h);break;case"e":z=parseFloat(i[s]).toExponential(h);break;case"x":z=parseInt(i[s]).toString(Q||16);break;case"d":z=parseFloat(parseInt(i[s],Q||10).toPrecision(h)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(Q);let Y=parseInt(_),Z=_&&_[0]+""=="0"?"0":" ";for(;z.length<Y;)z=f!==void 0?z+Z:Z+z;return z}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,a)}format(t,...i){this.buffer+=ds.form(t,i)}toString(){return this.buffer}}class fs{constructor(t){this.boundingBox=new gi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let s=1;s<fs.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(t)-s;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(t)+s,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new ds;let i=0;for(const s of this.codewords){if(s==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}return t.toString()}}fs.MAX_NEARBY_DISTANCE=5;class gs{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[s,a]of this.values.entries()){const c={getKey:()=>s,getValue:()=>a};c.getValue()>t?(t=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===t&&i.push(c.getKey())}return Ne.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class al extends fs{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),_=-1,w=1,D=0;for(let k=h;k<f;k++){if(i[k]==null)continue;let Q=i[k],z=Q.getRowNumber()-_;if(z===0)D++;else if(z===1)w=Math.max(w,D),D=1,_=Q.getRowNumber();else if(z<0||Q.getRowNumber()>=t.getRowCount()||z>k)i[k]=null;else{let Y;w>2?Y=(w-2)*z:Y=z;let Z=Y>=k;for(let ee=1;ee<=Y&&!Z;ee++)Z=i[k-ee]!=null;Z?i[k]=null:(_=Q.getRowNumber(),D=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),_=-1;for(let w=c;w<h;w++){if(f[w]==null)continue;let D=f[w];D.setRowNumberAsRowIndicatorColumn();let k=D.getRowNumber()-_;k===0||(k===1?_=D.getRowNumber():D.getRowNumber()>=t.getRowCount()?f[w]=null:_=D.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new gs,s=new gs,a=new gs,c=new gs;for(let f of t){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let _=f.getValue()%30,w=f.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:s.setValue(_*3+1);break;case 1:c.setValue(_/3),a.setValue(_%3);break;case 2:i.setValue(_+1);break}}if(i.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Ne.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Ne.MAX_ROWS_IN_BARCODE)return null;let h=new O0(i.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(t,h),h}removeIncorrectCodewords(t,i){for(let s=0;s<t.length;s++){let a=t[s];if(t[s]==null)continue;let c=a.getValue()%30,h=a.getRowNumber();if(h>i.getRowCount()){t[s]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(t[s]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(t[s]=null);break;case 2:c+1!==i.getColumnCount()&&(t[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ps{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Ne.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let s=this.detectionResultColumns[i].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,s))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<t.length;s++)if(t[s]!=null&&i[s]!=null&&t[s].getRowNumber()===i[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let c=this.detectionResultColumns[a].getCodewords()[s];c!=null&&(c.setRowNumber(t[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let f=this.detectionResultColumns[h].getCodewords()[s];f!=null&&(c=ps.adjustRowNumberIfValid(a,c,f),f.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let f=this.detectionResultColumns[h].getCodewords()[s];f!=null&&(c=ps.adjustRowNumberIfValid(a,c,f),f.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(t)?(s.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,s){if(!this.detectionResultColumns[t-1])return;let a=s[i],c=this.detectionResultColumns[t-1].getCodewords(),h=c;this.detectionResultColumns[t+1]!=null&&(h=this.detectionResultColumns[t+1].getCodewords());let f=new Array(14);f[2]=c[i],f[3]=h[i],i>0&&(f[0]=s[i-1],f[4]=c[i-1],f[5]=h[i-1]),i>1&&(f[8]=s[i-2],f[10]=c[i-2],f[11]=h[i-2]),i<s.length-1&&(f[1]=s[i+1],f[6]=c[i+1],f[7]=h[i+1]),i<s.length-2&&(f[9]=s[i+2],f[12]=c[i+2],f[13]=h[i+2]);for(let _ of f)if(ps.adjustRowNumber(a,_))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ds;for(let s=0;s<t.getCodewords().length;s++){i.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[a].getCodewords()[s];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class ms{constructor(t,i,s,a){this.rowNumber=ms.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==ms.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}ms.BARCODE_ROW_UNKNOWN=-1;class jt{static initialize(){for(let t=0;t<Ne.SYMBOL_TABLE.length;t++){let i=Ne.SYMBOL_TABLE[t],s=i&1;for(let a=0;a<Ne.BARS_IN_MODULE;a++){let c=0;for(;(i&1)===s;)c+=1,i>>=1;s=i&1,jt.RATIOS_TABLE[t]||(jt.RATIOS_TABLE[t]=new Array(Ne.BARS_IN_MODULE)),jt.RATIOS_TABLE[t][Ne.BARS_IN_MODULE-a-1]=Math.fround(c/Ne.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=jt.getDecodedCodewordValue(jt.sampleBitCounts(t));return i!==-1?i:jt.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Fe.sum(t),s=new Int32Array(Ne.BARS_IN_MODULE),a=0,c=0;for(let h=0;h<Ne.MODULES_IN_CODEWORD;h++){let f=i/(2*Ne.MODULES_IN_CODEWORD)+h*i/Ne.MODULES_IN_CODEWORD;c+t[a]<=f&&(c+=t[a],a++),s[a]++}return s}static getDecodedCodewordValue(t){let i=jt.getBitValue(t);return Ne.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let s=0;s<t.length;s++)for(let a=0;a<t[s];a++)i=i<<1|(s%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Fe.sum(t),s=new Array(Ne.BARS_IN_MODULE);if(i>1)for(let h=0;h<s.length;h++)s[h]=Math.fround(t[h]/i);let a=Ot.MAX_VALUE,c=-1;this.bSymbolTableReady||jt.initialize();for(let h=0;h<jt.RATIOS_TABLE.length;h++){let f=0,_=jt.RATIOS_TABLE[h];for(let w=0;w<Ne.BARS_IN_MODULE;w++){let D=Math.fround(_[w]-s[w]);if(f+=Math.fround(D*D),f>=a)break}f<a&&(a=f,c=Ne.SYMBOL_TABLE[h])}return c}}jt.bSymbolTableReady=!1,jt.RATIOS_TABLE=new Array(Ne.SYMBOL_TABLE.length).map(L=>new Array(Ne.BARS_IN_MODULE));class cl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class ll{static parseLong(t,i=void 0){return parseInt(t,i)}}class hl extends p{}hl.kind="NullPointerException";class C0{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,s){if(t==null)throw new hl;if(i<0||i>t.length||s<0||i+s>t.length||i+s<0)throw new b;if(s===0)return;for(let a=0;a<s;a++)this.write(t[i+a])}flush(){}close(){}}class w0 extends p{}class b0 extends C0{constructor(t=32){if(super(),this.count=0,t<0)throw new x("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let s=this.buf.length<<1;if(s-t<0&&(s=t),s<0){if(t<0)throw new w0;s=S.MAX_VALUE}this.buf=R.copyOfUint8Array(this.buf,s)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,s){if(i<0||i>t.length||s<0||i+s-t.length>0)throw new b;this.ensureCapacity(this.count+s),C.arraycopy(t,i,this.buf,this.count,s),this.count+=s}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return R.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var lt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(lt||(lt={}));function ul(){if(typeof window<"u")return window.BigInt||null;if(typeof Rr<"u")return Rr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let zs;function Kr(L){if(typeof zs>"u"&&(zs=ul()),zs===null)throw new Error("BigInt is not supported!");return zs(L)}function v0(){let L=[];L[0]=Kr(1);let t=Kr(900);L[1]=t;for(let i=2;i<16;i++)L[i]=L[i-1]*t;return L}class ie{static decode(t,i){let s=new X(""),a=M.ISO8859_1;s.enableDecoding(a);let c=1,h=t[c++],f=new cl;for(;c<t[0];){switch(h){case ie.TEXT_COMPACTION_MODE_LATCH:c=ie.textCompaction(t,c,s);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:c=ie.byteCompaction(h,t,a,c,s);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[c++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:c=ie.numericCompaction(t,c,s);break;case ie.ECI_CHARSET:M.getCharacterSetECIByValue(t[c++]);break;case ie.ECI_GENERAL_PURPOSE:c+=2;break;case ie.ECI_USER_DEFINED:c++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=ie.decodeMacroBlock(t,c,f);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new $;default:c--,c=ie.textCompaction(t,c,s);break}if(c<t.length)h=t[c++];else throw $.getFormatInstance()}if(s.length()===0)throw $.getFormatInstance();let _=new oe(null,s.toString(),null,i);return _.setOther(f),_}static decodeMacroBlock(t,i,s){if(i+ie.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw $.getFormatInstance();let a=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<ie.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)a[f]=t[i];s.setSegmentIndex(S.parseInt(ie.decodeBase900toBase10(a,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new X;i=ie.textCompaction(t,i,c),s.setFileId(c.toString());let h=-1;for(t[i]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=i+1);i<t[0];)switch(t[i]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new X;i=ie.textCompaction(t,i+1,f),s.setFileName(f.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new X;i=ie.textCompaction(t,i+1,_),s.setSender(_.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new X;i=ie.textCompaction(t,i+1,w),s.setAddressee(w.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new X;i=ie.numericCompaction(t,i+1,D),s.setSegmentCount(S.parseInt(D.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let k=new X;i=ie.numericCompaction(t,i+1,k),s.setTimestamp(ll.parseLong(k.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Q=new X;i=ie.numericCompaction(t,i+1,Q),s.setChecksum(S.parseInt(Q.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new X;i=ie.numericCompaction(t,i+1,z),s.setFileSize(ll.parseLong(z.toString()));break;default:throw $.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:i++,s.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(h!==-1){let f=i-h;s.isLastSegment()&&f--,s.setOptionalData(R.copyOfRange(t,h,h+f))}return i}static textCompaction(t,i,s){let a=new Int32Array((t[0]-i)*2),c=new Int32Array((t[0]-i)*2),h=0,f=!1;for(;i<t[0]&&!f;){let _=t[i++];if(_<ie.TEXT_COMPACTION_MODE_LATCH)a[h]=_/30,a[h+1]=_%30,h+=2;else switch(_){case ie.TEXT_COMPACTION_MODE_LATCH:a[h++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=t[i++],c[h]=_,h++;break}}return ie.decodeTextCompaction(a,c,h,s),i}static decodeTextCompaction(t,i,s,a){let c=lt.ALPHA,h=lt.ALPHA,f=0;for(;f<s;){let _=t[f],w="";switch(c){case lt.ALPHA:if(_<26)w=String.fromCharCode(65+_);else switch(_){case 26:w=" ";break;case ie.LL:c=lt.LOWER;break;case ie.ML:c=lt.MIXED;break;case ie.PS:h=c,c=lt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break;case lt.LOWER:if(_<26)w=String.fromCharCode(97+_);else switch(_){case 26:w=" ";break;case ie.AS:h=c,c=lt.ALPHA_SHIFT;break;case ie.ML:c=lt.MIXED;break;case ie.PS:h=c,c=lt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break;case lt.MIXED:if(_<ie.PL)w=ie.MIXED_CHARS[_];else switch(_){case ie.PL:c=lt.PUNCT;break;case 26:w=" ";break;case ie.LL:c=lt.LOWER;break;case ie.AL:c=lt.ALPHA;break;case ie.PS:h=c,c=lt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break;case lt.PUNCT:if(_<ie.PAL)w=ie.PUNCT_CHARS[_];else switch(_){case ie.PAL:c=lt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break;case lt.ALPHA_SHIFT:if(c=h,_<26)w=String.fromCharCode(65+_);else switch(_){case 26:w=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break;case lt.PUNCT_SHIFT:if(c=h,_<ie.PAL)w=ie.PUNCT_CHARS[_];else switch(_){case ie.PAL:c=lt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=lt.ALPHA;break}break}w!==""&&a.append(w),f++}}static byteCompaction(t,i,s,a,c){let h=new b0,f=0,_=0,w=!1;switch(t){case ie.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),k=i[a++];for(;a<i[0]&&!w;)switch(D[f++]=k,_=900*_+k,k=i[a++],k){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,w=!0;break;default:if(f%5===0&&f>0){for(let Q=0;Q<6;++Q)h.write(Number(Kr(_)>>Kr(8*(5-Q))));_=0,f=0}break}a===i[0]&&k<ie.TEXT_COMPACTION_MODE_LATCH&&(D[f++]=k);for(let Q=0;Q<f;Q++)h.write(D[Q]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!w;){let Q=i[a++];if(Q<ie.TEXT_COMPACTION_MODE_LATCH)f++,_=900*_+Q;else switch(Q){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,w=!0;break}if(f%5===0&&f>0){for(let z=0;z<6;++z)h.write(Number(Kr(_)>>Kr(8*(5-z))));_=0,f=0}}break}return c.append(T.decode(h.toByteArray(),s)),a}static numericCompaction(t,i,s){let a=0,c=!1,h=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!c;){let f=t[i++];if(i===t[0]&&(c=!0),f<ie.TEXT_COMPACTION_MODE_LATCH)h[a]=f,a++;else switch(f){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(a%ie.MAX_NUMERIC_CODEWORDS===0||f===ie.NUMERIC_COMPACTION_MODE_LATCH||c)&&a>0&&(s.append(ie.decodeBase900toBase10(h,a)),a=0)}return i}static decodeBase900toBase10(t,i){let s=Kr(0);for(let c=0;c<i;c++)s+=ie.EXP900[i-c-1]*Kr(t[c]);let a=s.toString();if(a.charAt(0)!=="1")throw new $;return a.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=ul()?v0():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xe{constructor(){}static decode(t,i,s,a,c,h,f){let _=new gi(t,i,s,a,c),w=null,D=null,k;for(let Y=!0;;Y=!1){if(i!=null&&(w=Xe.getRowIndicatorColumn(t,_,i,!0,h,f)),a!=null&&(D=Xe.getRowIndicatorColumn(t,_,a,!1,h,f)),k=Xe.merge(w,D),k==null)throw W.getNotFoundInstance();let Z=k.getBoundingBox();if(Y&&Z!=null&&(Z.getMinY()<_.getMinY()||Z.getMaxY()>_.getMaxY()))_=Z;else break}k.setBoundingBox(_);let Q=k.getBarcodeColumnCount()+1;k.setDetectionResultColumn(0,w),k.setDetectionResultColumn(Q,D);let z=w!=null;for(let Y=1;Y<=Q;Y++){let Z=z?Y:Q-Y;if(k.getDetectionResultColumn(Z)!==void 0)continue;let ee;Z===0||Z===Q?ee=new al(_,Z===0):ee=new fs(_),k.setDetectionResultColumn(Z,ee);let ne=-1,pe=ne;for(let me=_.getMinY();me<=_.getMaxY();me++){if(ne=Xe.getStartColumn(k,Z,me,z),ne<0||ne>_.getMaxX()){if(pe===-1)continue;ne=pe}let de=Xe.detectCodeword(t,_.getMinX(),_.getMaxX(),z,ne,me,h,f);de!=null&&(ee.setCodeword(me,de),pe=ne,h=Math.min(h,de.getWidth()),f=Math.max(f,de.getWidth()))}}return Xe.createDecoderResult(k)}static merge(t,i){if(t==null&&i==null)return null;let s=Xe.getBarcodeMetadata(t,i);if(s==null)return null;let a=gi.merge(Xe.adjustBoundingBox(t),Xe.adjustBoundingBox(i));return new ps(s,a)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let s=Xe.getMax(i),a=0;for(let f of i)if(a+=s-f,f>0)break;let c=t.getCodewords();for(let f=0;a>0&&c[f]==null;f++)a--;let h=0;for(let f=i.length-1;f>=0&&(h+=s-i[f],!(i[f]>0));f--);for(let f=c.length-1;h>0&&c[f]==null;f--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())}static getMax(t){let i=-1;for(let s of t)i=Math.max(i,s);return i}static getBarcodeMetadata(t,i){let s;if(t==null||(s=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(t,i,s,a,c,h){let f=new al(i,a);for(let _=0;_<2;_++){let w=_===0?1:-1,D=Math.trunc(Math.trunc(s.getX()));for(let k=Math.trunc(Math.trunc(s.getY()));k<=i.getMaxY()&&k>=i.getMinY();k+=w){let Q=Xe.detectCodeword(t,0,t.getWidth(),a,D,k,c,h);Q!=null&&(f.setCodeword(k,Q),a?D=Q.getStartX():D=Q.getEndX())}}return f}static adjustCodewordCount(t,i){let s=i[0][1],a=s.getValue(),c=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Xe.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(c<1||c>Ne.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();s.setValue(c)}else a[0]!==c&&s.setValue(c)}static createDecoderResult(t){let i=Xe.createBarcodeMatrix(t);Xe.adjustCodewordCount(t,i);let s=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),c=[],h=new Array;for(let _=0;_<t.getBarcodeRowCount();_++)for(let w=0;w<t.getBarcodeColumnCount();w++){let D=i[_][w+1].getValue(),k=_*t.getBarcodeColumnCount()+w;D.length===0?s.push(k):D.length===1?a[k]=D[0]:(h.push(k),c.push(D))}let f=new Array(c.length);for(let _=0;_<f.length;_++)f[_]=c[_];return Xe.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,Ne.toIntArray(s),Ne.toIntArray(h),f)}static createDecoderResultFromAmbiguousValues(t,i,s,a,c){let h=new Int32Array(a.length),f=100;for(;f-- >0;){for(let _=0;_<h.length;_++)i[a[_]]=c[_][h[_]];try{return Xe.decodeCodewords(i,t,s)}catch(_){if(!(_ instanceof y))throw _}if(h.length===0)throw y.getChecksumInstance();for(let _=0;_<h.length;_++)if(h[_]<c[_].length-1){h[_]++;break}else if(h[_]=0,_===h.length-1)throw y.getChecksumInstance()}throw y.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let c=0;c<i[a].length;c++)i[a][c]=new gs;let s=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let c of a.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=i.length)continue;i[h][s].setValue(c.getValue())}}}s++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,s,a){let c=a?1:-1,h=null;if(Xe.isValidBarcodeColumn(t,i-c)&&(h=t.getDetectionResultColumn(i-c).getCodeword(s)),h!=null)return a?h.getEndX():h.getStartX();if(h=t.getDetectionResultColumn(i).getCodewordNearby(s),h!=null)return a?h.getStartX():h.getEndX();if(Xe.isValidBarcodeColumn(t,i-c)&&(h=t.getDetectionResultColumn(i-c).getCodewordNearby(s)),h!=null)return a?h.getEndX():h.getStartX();let f=0;for(;Xe.isValidBarcodeColumn(t,i-c);){i-=c;for(let _ of t.getDetectionResultColumn(i).getCodewords())if(_!=null)return(a?_.getEndX():_.getStartX())+c*f*(_.getEndX()-_.getStartX());f++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,s,a,c,h,f,_){c=Xe.adjustCodewordStartColumn(t,i,s,a,c,h);let w=Xe.getModuleBitCount(t,i,s,a,c,h);if(w==null)return null;let D,k=Fe.sum(w);if(a)D=c+k;else{for(let Y=0;Y<w.length/2;Y++){let Z=w[Y];w[Y]=w[w.length-1-Y],w[w.length-1-Y]=Z}D=c,c=D-k}if(!Xe.checkCodewordSkew(k,f,_))return null;let Q=jt.getDecodedValue(w),z=Ne.getCodeword(Q);return z===-1?null:new ms(c,D,Xe.getCodewordBucketNumber(Q),z)}static getModuleBitCount(t,i,s,a,c,h){let f=c,_=new Int32Array(8),w=0,D=a?1:-1,k=a;for(;(a?f<s:f>=i)&&w<_.length;)t.get(f,h)===k?(_[w]++,f+=D):(w++,k=!k);return w===_.length||f===(a?s:i)&&w===_.length-1?_:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,s,a,c,h){let f=c,_=a?-1:1;for(let w=0;w<2;w++){for(;(a?f>=i:f<s)&&a===t.get(f,h);){if(Math.abs(c-f)>Xe.CODEWORD_SKEW_SIZE)return c;f+=_}_=-_,a=!a}return f}static checkCodewordSkew(t,i,s){return i-Xe.CODEWORD_SKEW_SIZE<=t&&t<=s+Xe.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,s){if(t.length===0)throw $.getFormatInstance();let a=1<<i+1,c=Xe.correctErrors(t,s,a);Xe.verifyCodewordCount(t,a);let h=ie.decode(t,""+i);return h.setErrorsCorrected(c),h.setErasures(s.length),h}static correctErrors(t,i,s){if(i!=null&&i.length>s/2+Xe.MAX_ERRORS||s<0||s>Xe.MAX_EC_CODEWORDS)throw y.getChecksumInstance();return Xe.errorCorrection.decode(t,s,i)}static verifyCodewordCount(t,i){if(t.length<4)throw $.getFormatInstance();let s=t[0];if(s>t.length)throw $.getFormatInstance();if(s===0)if(i<t.length)t[0]=t.length-i;else throw $.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),s=0,a=i.length-1;for(;!((t&1)!==s&&(s=t&1,a--,a<0));)i[a]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Xe.getCodewordBucketNumber(Xe.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new ds;for(let s=0;s<t.length;s++){i.format("Row %2d: ",s);for(let a=0;a<t[s].length;a++){let c=t[s][a];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}Xe.CODEWORD_SKEW_SIZE=2,Xe.MAX_ERRORS=3,Xe.MAX_EC_CODEWORDS=512,Xe.errorCorrection=new ol;class It{decode(t,i=null){let s=It.decode(t,i,!1);if(s==null||s.length===0||s[0]==null)throw W.getNotFoundInstance();return s[0]}decodeMultiple(t,i=null){try{return It.decode(t,i,!0)}catch(s){throw s instanceof $||s instanceof y?W.getNotFoundInstance():s}}static decode(t,i,s){const a=new Array,c=qe.detectMultiple(t,i,s);for(const h of c.getPoints()){const f=Xe.decode(c.getBits(),h[4],h[5],h[6],h[7],It.getMinCodewordWidth(h),It.getMaxCodewordWidth(h)),_=new xe(f.getText(),f.getRawBytes(),void 0,h,fe.PDF_417);_.putMetadata(ae.ERROR_CORRECTION_LEVEL,f.getECLevel());const w=f.getOther();w!=null&&_.putMetadata(ae.PDF417_EXTRA_METADATA,w),a.push(_)}return a.map(h=>h)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?S.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(It.getMaxWidth(t[0],t[4]),It.getMaxWidth(t[6],t[2])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN),Math.max(It.getMaxWidth(t[1],t[5]),It.getMaxWidth(t[7],t[3])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(It.getMinWidth(t[0],t[4]),It.getMinWidth(t[6],t[2])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN),Math.min(It.getMinWidth(t[1],t[5]),It.getMinWidth(t[7],t[3])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN)))}reset(){}}class Gs extends p{}Gs.kind="ReaderException";class dl{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!o(t)&&t.get(F.TRY_HARDER)===!0,s=o(t)?null:t.get(F.POSSIBLE_FORMATS),a=new Array;if(!o(s)){const c=s.some(h=>h===fe.UPC_A||h===fe.UPC_E||h===fe.EAN_13||h===fe.EAN_8||h===fe.CODABAR||h===fe.CODE_39||h===fe.CODE_93||h===fe.CODE_128||h===fe.ITF||h===fe.RSS_14||h===fe.RSS_EXPANDED);c&&!i&&a.push(new Li(t,this.verbose)),s.includes(fe.QR_CODE)&&a.push(new Zr),s.includes(fe.DATA_MATRIX)&&a.push(new Hr),s.includes(fe.AZTEC)&&a.push(new at),s.includes(fe.PDF_417)&&a.push(new It),c&&i&&a.push(new Li(t,this.verbose))}a.length===0&&(i||a.push(new Li(t,this.verbose)),a.push(new Zr),a.push(new Hr),a.push(new at),a.push(new It),i&&a.push(new Li(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Gs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(s){if(s instanceof Gs)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class y0 extends Le{constructor(t=null,i=500){const s=new dl;s.setHints(t),super(s,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class E0 extends Le{constructor(t=500){super(new It,t)}}class S0 extends Le{constructor(t=500){super(new Zr,t)}}var Uo;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(Uo||(Uo={}));var St=Uo;class qo{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Ce(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let s=i[i.length-1];const a=this.field;for(let c=i.length;c<=t;c++){const h=s.multiply(new Ce(a,Int32Array.from([1,a.exp(c-1+a.getGeneratorBase())])));i.push(h),s=h}}return i[t]}encode(t,i){if(i===0)throw new x("No error correction bytes");const s=t.length-i;if(s<=0)throw new x("No data bytes provided");const a=this.buildGenerator(i),c=new Int32Array(s);C.arraycopy(t,0,c,0,s);let h=new Ce(this.field,c);h=h.multiplyByMonomial(i,1);const _=h.divide(a)[1].getCoefficients(),w=i-_.length;for(let D=0;D<w;D++)t[s+D]=0;C.arraycopy(_,0,t,s+w,_.length)}}class wt{constructor(){}static applyMaskPenaltyRule1(t){return wt.applyMaskPenaltyRule1Internal(t,!0)+wt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let h=0;h<c-1;h++){const f=s[h];for(let _=0;_<a-1;_++){const w=f[_];w===f[_+1]&&w===s[h+1][_]&&w===s[h+1][_+1]&&i++}}return wt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let h=0;h<c;h++)for(let f=0;f<a;f++){const _=s[h];f+6<a&&_[f]===1&&_[f+1]===0&&_[f+2]===1&&_[f+3]===1&&_[f+4]===1&&_[f+5]===0&&_[f+6]===1&&(wt.isWhiteHorizontal(_,f-4,f)||wt.isWhiteHorizontal(_,f+7,f+11))&&i++,h+6<c&&s[h][f]===1&&s[h+1][f]===0&&s[h+2][f]===1&&s[h+3][f]===1&&s[h+4][f]===1&&s[h+5][f]===0&&s[h+6][f]===1&&(wt.isWhiteVertical(s,f,h-4,h)||wt.isWhiteVertical(s,f,h+7,h+11))&&i++}return i*wt.N3}static isWhiteHorizontal(t,i,s){i=Math.max(i,0),s=Math.min(s,t.length);for(let a=i;a<s;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,i,s,a){s=Math.max(s,0),a=Math.min(a,t.length);for(let c=s;c<a;c++)if(t[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const s=t.getArray(),a=t.getWidth(),c=t.getHeight();for(let _=0;_<c;_++){const w=s[_];for(let D=0;D<a;D++)w[D]===1&&i++}const h=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-h)*10/h)*wt.N4}static getDataMaskBit(t,i,s){let a,c;switch(t){case 0:a=s+i&1;break;case 1:a=s&1;break;case 2:a=i%3;break;case 3:a=(s+i)%3;break;case 4:a=Math.floor(s/2)+Math.floor(i/3)&1;break;case 5:c=s*i,a=(c&1)+c%3;break;case 6:c=s*i,a=(c&1)+c%3&1;break;case 7:c=s*i,a=c%3+(s+i&1)&1;break;default:throw new x("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,i){let s=0;const a=i?t.getHeight():t.getWidth(),c=i?t.getWidth():t.getHeight(),h=t.getArray();for(let f=0;f<a;f++){let _=0,w=-1;for(let D=0;D<c;D++){const k=i?h[f][D]:h[D][f];k===w?_++:(_>=5&&(s+=wt.N1+(_-5)),_=1,w=k)}_>=5&&(s+=wt.N1+(_-5))}return s}}wt.N1=3,wt.N2=3,wt.N3=40,wt.N4=10;class Ys{constructor(t,i){this.width=t,this.height=i;const s=new Array(i);for(let a=0;a!==i;a++)s[a]=new Uint8Array(t);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,s){this.bytes[i][t]=s}setBoolean(t,i,s){this.bytes[i][t]=s?1:0}clear(t){for(const i of this.bytes)R.fill(i,t)}equals(t){if(!(t instanceof Ys))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s],h=i.bytes[s];for(let f=0,_=this.width;f<_;++f)if(c[f]!==h[f])return!1}return!0}toString(){const t=new X;for(let i=0,s=this.height;i<s;++i){const a=this.bytes[i];for(let c=0,h=this.width;c<h;++c)switch(a[c]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class pi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new X;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<pi.NUM_MASK_PATTERNS}}pi.NUM_MASK_PATTERNS=8;class ut extends p{}ut.kind="WriterException";class ke{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,s,a,c){ke.clearMatrix(c),ke.embedBasicPatterns(s,c),ke.embedTypeInfo(i,a,c),ke.maybeEmbedVersionInfo(s,c),ke.embedDataBits(t,a,c)}static embedBasicPatterns(t,i){ke.embedPositionDetectionPatternsAndSeparators(i),ke.embedDarkDotAtLeftBottomCorner(i),ke.maybeEmbedPositionAdjustmentPatterns(t,i),ke.embedTimingPatterns(i)}static embedTypeInfo(t,i,s){const a=new B;ke.makeTypeInfoBits(t,i,a);for(let c=0,h=a.getSize();c<h;++c){const f=a.get(a.getSize()-1-c),_=ke.TYPE_INFO_COORDINATES[c],w=_[0],D=_[1];if(s.setBoolean(w,D,f),c<8){const k=s.getWidth()-c-1,Q=8;s.setBoolean(k,Q,f)}else{const Q=s.getHeight()-7+(c-8);s.setBoolean(8,Q,f)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const s=new B;ke.makeVersionInfoBits(t,s);let a=6*3-1;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const f=s.get(a);a--,i.setBoolean(c,i.getHeight()-11+h,f),i.setBoolean(i.getHeight()-11+h,c,f)}}static embedDataBits(t,i,s){let a=0,c=-1,h=s.getWidth()-1,f=s.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);f>=0&&f<s.getHeight();){for(let _=0;_<2;++_){const w=h-_;if(!ke.isEmpty(s.get(w,f)))continue;let D;a<t.getSize()?(D=t.get(a),++a):D=!1,i!==255&&wt.getDataMaskBit(i,w,f)&&(D=!D),s.setBoolean(w,f,D)}f+=c}c=-c,f+=c,h-=2}if(a!==t.getSize())throw new ut("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-S.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new x("0 polynomial");const s=ke.findMSBSet(i);for(t<<=s-1;ke.findMSBSet(t)>=s;)t^=i<<ke.findMSBSet(t)-s;return t}static makeTypeInfoBits(t,i,s){if(!pi.isValidMaskPattern(i))throw new ut("Invalid mask pattern");const a=t.getBits()<<3|i;s.appendBits(a,5);const c=ke.calculateBCHCode(a,ke.TYPE_INFO_POLY);s.appendBits(c,10);const h=new B;if(h.appendBits(ke.TYPE_INFO_MASK_PATTERN,15),s.xor(h),s.getSize()!==15)throw new ut("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const s=ke.calculateBCHCode(t.getVersionNumber(),ke.VERSION_INFO_POLY);if(i.appendBits(s,12),i.getSize()!==18)throw new ut("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const s=(i+1)%2;ke.isEmpty(t.get(i,6))&&t.setNumber(i,6,s),ke.isEmpty(t.get(6,i))&&t.setNumber(6,i,s)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new ut;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,s){for(let a=0;a<8;++a){if(!ke.isEmpty(s.get(t+a,i)))throw new ut;s.setNumber(t+a,i,0)}}static embedVerticalSeparationPattern(t,i,s){for(let a=0;a<7;++a){if(!ke.isEmpty(s.get(t,i+a)))throw new ut;s.setNumber(t,i+a,0)}}static embedPositionAdjustmentPattern(t,i,s){for(let a=0;a<5;++a){const c=ke.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)s.setNumber(t+h,i+a,c[h])}}static embedPositionDetectionPattern(t,i,s){for(let a=0;a<7;++a){const c=ke.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)s.setNumber(t+h,i+a,c[h])}}static embedPositionDetectionPatternsAndSeparators(t){const i=ke.POSITION_DETECTION_PATTERN[0].length;ke.embedPositionDetectionPattern(0,0,t),ke.embedPositionDetectionPattern(t.getWidth()-i,0,t),ke.embedPositionDetectionPattern(0,t.getWidth()-i,t);const s=8;ke.embedHorizontalSeparationPattern(0,s-1,t),ke.embedHorizontalSeparationPattern(t.getWidth()-s,s-1,t),ke.embedHorizontalSeparationPattern(0,t.getWidth()-s,t);const a=7;ke.embedVerticalSeparationPattern(a,0,t),ke.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),ke.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const s=t.getVersionNumber()-1,a=ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,h=a.length;c!==h;c++){const f=a[c];if(f>=0)for(let _=0;_!==h;_++){const w=a[_];w>=0&&ke.isEmpty(i.get(w,f))&&ke.embedPositionAdjustmentPattern(w-2,f-2,i)}}}}ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ke.VERSION_INFO_POLY=7973,ke.TYPE_INFO_POLY=1335,ke.TYPE_INFO_MASK_PATTERN=21522;class D0{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pt{constructor(){}static calculateMaskPenalty(t){return wt.applyMaskPenaltyRule1(t)+wt.applyMaskPenaltyRule2(t)+wt.applyMaskPenaltyRule3(t)+wt.applyMaskPenaltyRule4(t)}static encode(t,i,s=null){let a=pt.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(St.CHARACTER_SET)!==void 0;c&&(a=s.get(St.CHARACTER_SET).toString());const h=this.chooseMode(t,a),f=new B;if(h===Ie.BYTE&&(c||pt.DEFAULT_BYTE_MODE_ENCODING!==a)){const me=M.getCharacterSetECIByName(a);me!==void 0&&this.appendECI(me,f)}this.appendModeInfo(h,f);const _=new B;this.appendBytes(t,h,_,a);let w;if(s!==null&&s.get(St.QR_VERSION)!==void 0){const me=Number.parseInt(s.get(St.QR_VERSION).toString(),10);w=Re.getVersionForNumber(me);const de=this.calculateBitsNeeded(h,f,_,w);if(!this.willFit(de,w,i))throw new ut("Data too big for requested version")}else w=this.recommendVersion(i,h,f,_);const D=new B;D.appendBitArray(f);const k=h===Ie.BYTE?_.getSizeInBytes():t.length;this.appendLengthInfo(k,w,h,D),D.appendBitArray(_);const Q=w.getECBlocksForLevel(i),z=w.getTotalCodewords()-Q.getTotalECCodewords();this.terminateBits(z,D);const Y=this.interleaveWithECBytes(D,w.getTotalCodewords(),z,Q.getNumBlocks()),Z=new pi;Z.setECLevel(i),Z.setMode(h),Z.setVersion(w);const ee=w.getDimensionForVersion(),ne=new Ys(ee,ee),pe=this.chooseMaskPattern(Y,i,w,ne);return Z.setMaskPattern(pe),ke.buildMatrix(Y,i,w,pe,ne),Z.setMatrix(ne),Z}static recommendVersion(t,i,s,a){const c=this.calculateBitsNeeded(i,s,a,Re.getVersionForNumber(1)),h=this.chooseVersion(c,t),f=this.calculateBitsNeeded(i,s,a,h);return this.chooseVersion(f,t)}static calculateBitsNeeded(t,i,s,a){return i.getSize()+t.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(t){return t<pt.ALPHANUMERIC_TABLE.length?pt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(M.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Ie.KANJI;let s=!1,a=!1;for(let c=0,h=t.length;c<h;++c){const f=t.charAt(c);if(pt.isDigit(f))s=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)a=!0;else return Ie.BYTE}return a?Ie.ALPHANUMERIC:s?Ie.NUMERIC:Ie.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=T.encode(t,M.SJIS)}catch{return!1}const s=i.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const c=i[a]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(t,i,s,a){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let f=0;f<pi.NUM_MASK_PATTERNS;f++){ke.buildMatrix(t,i,s,f,a);let _=this.calculateMaskPenalty(a);_<c&&(c=_,h=f)}return h}static chooseVersion(t,i){for(let s=1;s<=40;s++){const a=Re.getVersionForNumber(s);if(pt.willFit(t,a,i))return a}throw new ut("Data too big")}static willFit(t,i,s){const a=i.getTotalCodewords(),h=i.getECBlocksForLevel(s).getTotalECCodewords(),f=a-h,_=(t+7)/8;return f>=_}static terminateBits(t,i){const s=t*8;if(i.getSize()>s)throw new ut("data bits cannot fit in the QR Code"+i.getSize()+" > "+s);for(let h=0;h<4&&i.getSize()<s;++h)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let h=a;h<8;h++)i.appendBit(!1);const c=t-i.getSizeInBytes();for(let h=0;h<c;++h)i.appendBits(h&1?17:236,8);if(i.getSize()!==s)throw new ut("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,s,a,c,h){if(a>=s)throw new ut("Block ID too large");const f=t%s,_=s-f,w=Math.floor(t/s),D=w+1,k=Math.floor(i/s),Q=k+1,z=w-k,Y=D-Q;if(z!==Y)throw new ut("EC bytes mismatch");if(s!==_+f)throw new ut("RS blocks mismatch");if(t!==(k+z)*_+(Q+Y)*f)throw new ut("Total bytes mismatch");a<_?(c[0]=k,h[0]=z):(c[0]=Q,h[0]=Y)}static interleaveWithECBytes(t,i,s,a){if(t.getSizeInBytes()!==s)throw new ut("Number of bits and data bytes does not match");let c=0,h=0,f=0;const _=new Array;for(let D=0;D<a;++D){const k=new Int32Array(1),Q=new Int32Array(1);pt.getNumDataBytesAndNumECBytesForBlockID(i,s,a,D,k,Q);const z=k[0],Y=new Uint8Array(z);t.toBytes(8*c,Y,0,z);const Z=pt.generateECBytes(Y,Q[0]);_.push(new D0(Y,Z)),h=Math.max(h,z),f=Math.max(f,Z.length),c+=k[0]}if(s!==c)throw new ut("Data bytes does not match offset");const w=new B;for(let D=0;D<h;++D)for(const k of _){const Q=k.getDataBytes();D<Q.length&&w.appendBits(Q[D],8)}for(let D=0;D<f;++D)for(const k of _){const Q=k.getErrorCorrectionBytes();D<Q.length&&w.appendBits(Q[D],8)}if(i!==w.getSizeInBytes())throw new ut("Interleaving error: "+i+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(t,i){const s=t.length,a=new Int32Array(s+i);for(let h=0;h<s;h++)a[h]=t[h]&255;new qo(Te.QR_CODE_FIELD_256).encode(a,i);const c=new Uint8Array(i);for(let h=0;h<i;h++)c[h]=a[s+h];return c}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,s,a){const c=s.getCharacterCountBits(i);if(t>=1<<c)throw new ut(t+" is bigger than "+((1<<c)-1));a.appendBits(t,c)}static appendBytes(t,i,s,a){switch(i){case Ie.NUMERIC:pt.appendNumericBytes(t,s);break;case Ie.ALPHANUMERIC:pt.appendAlphanumericBytes(t,s);break;case Ie.BYTE:pt.append8BitBytes(t,s,a);break;case Ie.KANJI:pt.appendKanjiBytes(t,s);break;default:throw new ut("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=pt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const s=t.length;let a=0;for(;a<s;){const c=pt.getDigit(t.charAt(a));if(a+2<s){const h=pt.getDigit(t.charAt(a+1)),f=pt.getDigit(t.charAt(a+2));i.appendBits(c*100+h*10+f,10),a+=3}else if(a+1<s){const h=pt.getDigit(t.charAt(a+1));i.appendBits(c*10+h,7),a+=2}else i.appendBits(c,4),a++}}static appendAlphanumericBytes(t,i){const s=t.length;let a=0;for(;a<s;){const c=pt.getAlphanumericCode(t.charCodeAt(a));if(c===-1)throw new ut;if(a+1<s){const h=pt.getAlphanumericCode(t.charCodeAt(a+1));if(h===-1)throw new ut;i.appendBits(c*45+h,11),a+=2}else i.appendBits(c,6),a++}}static append8BitBytes(t,i,s){let a;try{a=T.encode(t,s)}catch(c){throw new ut(c)}for(let c=0,h=a.length;c!==h;c++){const f=a[c];i.appendBits(f,8)}}static appendKanjiBytes(t,i){let s;try{s=T.encode(t,M.SJIS)}catch(c){throw new ut(c)}const a=s.length;for(let c=0;c<a;c+=2){const h=s[c]&255,f=s[c+1]&255,_=h<<8&4294967295|f;let w=-1;if(_>=33088&&_<=40956?w=_-33088:_>=57408&&_<=60351&&(w=_-49472),w===-1)throw new ut("Invalid byte sequence");const D=(w>>8)*192+(w&255);i.appendBits(D,13)}}static appendECI(t,i){i.appendBits(Ie.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pt.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class mi{write(t,i,s,a=null){if(t.length===0)throw new x("Found empty contents");if(i<0||s<0)throw new x("Requested dimensions are too small: "+i+"x"+s);let c=ft.L,h=mi.QUIET_ZONE_SIZE;a!==null&&(a.get(St.ERROR_CORRECTION)!==void 0&&(c=ft.fromString(a.get(St.ERROR_CORRECTION).toString())),a.get(St.MARGIN)!==void 0&&(h=Number.parseInt(a.get(St.MARGIN).toString(),10)));const f=pt.encode(t,c,a);return this.renderResult(f,i,s,h)}writeToDom(t,i,s,a,c=null){typeof t=="string"&&(t=document.querySelector(t));const h=this.write(i,s,a,c);t&&t.appendChild(h)}renderResult(t,i,s,a){const c=t.getMatrix();if(c===null)throw new Ze;const h=c.getWidth(),f=c.getHeight(),_=h+a*2,w=f+a*2,D=Math.max(i,_),k=Math.max(s,w),Q=Math.min(Math.floor(D/_),Math.floor(k/w)),z=Math.floor((D-h*Q)/2),Y=Math.floor((k-f*Q)/2),Z=this.createSVGElement(D,k);for(let ee=0,ne=Y;ee<f;ee++,ne+=Q)for(let pe=0,me=z;pe<h;pe++,me+=Q)if(c.get(pe,ee)===1){const de=this.createSvgRectElement(me,ne,Q,Q);Z.appendChild(de)}return Z}createSVGElement(t,i){const s=document.createElementNS(mi.SVG_NS,"svg");return s.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width",i.toString()),s}createSvgRectElement(t,i,s,a){const c=document.createElementNS(mi.SVG_NS,"rect");return c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",a.toString()),c.setAttributeNS(null,"fill","#000000"),c}}mi.QUIET_ZONE_SIZE=4,mi.SVG_NS="http://www.w3.org/2000/svg";class ki{encode(t,i,s,a,c){if(t.length===0)throw new x("Found empty contents");if(i!==fe.QR_CODE)throw new x("Can only encode QR_CODE, but got "+i);if(s<0||a<0)throw new x(`Requested dimensions are too small: ${s}x${a}`);let h=ft.L,f=ki.QUIET_ZONE_SIZE;c!==null&&(c.get(St.ERROR_CORRECTION)!==void 0&&(h=ft.fromString(c.get(St.ERROR_CORRECTION).toString())),c.get(St.MARGIN)!==void 0&&(f=Number.parseInt(c.get(St.MARGIN).toString(),10)));const _=pt.encode(t,h,c);return ki.renderResult(_,s,a,f)}static renderResult(t,i,s,a){const c=t.getMatrix();if(c===null)throw new Ze;const h=c.getWidth(),f=c.getHeight(),_=h+a*2,w=f+a*2,D=Math.max(i,_),k=Math.max(s,w),Q=Math.min(Math.floor(D/_),Math.floor(k/w)),z=Math.floor((D-h*Q)/2),Y=Math.floor((k-f*Q)/2),Z=new q(D,k);for(let ee=0,ne=Y;ee<f;ee++,ne+=Q)for(let pe=0,me=z;pe<h;pe++,me+=Q)c.get(pe,ee)===1&&Z.setRegion(me,ne,Q,Q);return Z}}ki.QUIET_ZONE_SIZE=4;class A0{encode(t,i,s,a,c){let h;switch(i){case fe.QR_CODE:h=new ki;break;default:throw new x("No encoder available for format "+i)}return h.encode(t,i,s,a,c)}}class Dr extends re{constructor(t,i,s,a,c,h,f,_){if(super(h,f),this.yuvData=t,this.dataWidth=i,this.dataHeight=s,this.left=a,this.top=c,a+h>i||c+f>s)throw new x("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(h,f)}getRow(t,i){if(t<0||t>=this.getHeight())throw new x("Requested row is outside the image: "+t);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(t+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,a,i,0,s),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const s=t*i,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return C.arraycopy(this.yuvData,c,a,0,s),a;for(let h=0;h<i;h++){const f=h*t;C.arraycopy(this.yuvData,c,a,f,t),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,i,s,a){return new Dr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,s,a,!1)}renderThumbnail(){const t=this.getWidth()/Dr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Dr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(t*i),a=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<i;h++){const f=h*t;for(let _=0;_<t;_++){const w=a[c+_*Dr.THUMBNAIL_SCALE_FACTOR]&255;s[f+_]=4278190080|w*65793}c+=this.dataWidth*Dr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Dr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Dr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const s=this.yuvData;for(let a=0,c=this.top*this.dataWidth+this.left;a<i;a++,c+=this.dataWidth){const h=c+t/2;for(let f=c,_=c+t-1;f<h;f++,_--){const w=s[f];s[f]=s[_],s[_]=w}}}invert(){return new K(this)}}Dr.THUMBNAIL_SCALE_FACTOR=2;class Xo extends re{constructor(t,i,s,a,c,h,f){if(super(i,s),this.dataWidth=a,this.dataHeight=c,this.left=h,this.top=f,t.BYTES_PER_ELEMENT===4){const _=i*s,w=new Uint8ClampedArray(_);for(let D=0;D<_;D++){const k=t[D],Q=k>>16&255,z=k>>7&510,Y=k&255;w[D]=(Q+z+Y)/4&255}this.luminances=w}else this.luminances=t;if(a===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=s),h===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+s>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new x("Requested row is outside the image: "+t);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(t+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,a,i,0,s),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const s=t*i,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return C.arraycopy(this.luminances,c,a,0,s),a;for(let h=0;h<i;h++){const f=h*t;C.arraycopy(this.luminances,c,a,f,t),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,i,s,a){return new Xo(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new K(this)}}class fl extends M{static forName(t){return this.getCharacterSetECIByName(t)}}class Vo{}Vo.ISO_8859_1=M.ISO8859_1;class gl{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class pl{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class T0{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Ni extends T0{constructor(t,i,s){super(t),this.value=i,this.bitCount=s}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new Ni(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ni(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+S.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class jo extends Ni{constructor(t,i,s){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=s}appendTo(t,i){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):s===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+s],8)}addBinaryShift(t,i){return new jo(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function R0(L,t,i){return new jo(L,t,i)}function _s(L,t,i){return new Ni(L,t,i)}const I0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Jr=0,Hs=1,cr=2,ml=3,Ar=4,P0=new Ni(null,0,0),zo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function L0(L){for(let t of L)R.fill(t,-1);return L[Jr][Ar]=0,L[Hs][Ar]=0,L[Hs][Jr]=28,L[ml][Ar]=0,L[cr][Ar]=0,L[cr][Jr]=15,L}const _l=L0(R.createInt32Array(6,6));class Tr{constructor(t,i,s,a){this.token=t,this.mode=i,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let s=this.bitCount,a=this.token;if(t!==this.mode){let h=zo[this.mode][t];a=_s(a,h&65535,h>>16),s+=h>>16}let c=t===cr?4:5;return a=_s(a,i,c),new Tr(a,t,0,s+c)}shiftAndAppend(t,i){let s=this.token,a=this.mode===cr?4:5;return s=_s(s,_l[this.mode][t],a),s=_s(s,i,5),new Tr(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let i=this.token,s=this.mode,a=this.bitCount;if(this.mode===Ar||this.mode===cr){let f=zo[s][Jr];i=_s(i,f&65535,f>>16),a+=f>>16,s=Jr}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Tr(i,s,this.binaryShiftByteCount+1,a+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(t+1)),h}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=R0(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Tr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(zo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=Tr.calculateBinaryShiftCost(t)-Tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);let s=new B;for(const a of i)a.appendTo(s,t);return s}toString(){return P.format("%s bits=%d bytes=%d",I0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Tr.INITIAL_STATE=new Tr(P0,Jr,0,0);function M0(L){const t=P.getCharCode(" "),i=P.getCharCode("."),s=P.getCharCode(",");L[Jr][t]=1;const a=P.getCharCode("Z"),c=P.getCharCode("A");for(let Q=c;Q<=a;Q++)L[Jr][Q]=Q-c+2;L[Hs][t]=1;const h=P.getCharCode("z"),f=P.getCharCode("a");for(let Q=f;Q<=h;Q++)L[Hs][Q]=Q-f+2;L[cr][t]=1;const _=P.getCharCode("9"),w=P.getCharCode("0");for(let Q=w;Q<=_;Q++)L[cr][Q]=Q-w+2;L[cr][s]=12,L[cr][i]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Q=0;Q<D.length;Q++)L[ml][P.getCharCode(D[Q])]=Q;const k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Q=0;Q<k.length;Q++)P.getCharCode(k[Q])>0&&(L[Ar][P.getCharCode(k[Q])]=Q);return L}const Go=M0(R.createInt32Array(5,256));class xs{constructor(t){this.text=t}encode(){const t=P.getCharCode(" "),i=P.getCharCode(`
`);let s=pl.singletonList(Tr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,f=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case P.getCharCode("\r"):h=f===i?2:0;break;case P.getCharCode("."):h=f===t?3:0;break;case P.getCharCode(","):h=f===t?4:0;break;case P.getCharCode(":"):h=f===t?5:0;break;default:h=0}h>0?(s=xs.updateStateListForPair(s,c,h),c++):s=this.updateStateListForChar(s,c)}return pl.min(s,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const s=[];for(let a of t)this.updateStateForChar(a,i,s);return xs.simplifyStates(s)}updateStateForChar(t,i,s){let a=this.text[i]&255,c=Go[t.getMode()][a]>0,h=null;for(let f=0;f<=Ar;f++){let _=Go[f][a];if(_>0){if(h==null&&(h=t.endBinaryShift(i)),!c||f===t.getMode()||f===cr){const w=h.latchAndAppend(f,_);s.push(w)}if(!c&&_l[t.getMode()][f]>=0){const w=h.shiftAndAppend(f,_);s.push(w)}}}if(t.getBinaryShiftByteCount()>0||Go[t.getMode()][a]===0){let f=t.addBinaryShiftChar(i);s.push(f)}}static updateStateListForPair(t,i,s){const a=[];for(let c of t)this.updateStateForPair(c,i,s,a);return this.simplifyStates(a)}static updateStateForPair(t,i,s,a){let c=t.endBinaryShift(i);if(a.push(c.latchAndAppend(Ar,s)),t.getMode()!==Ar&&a.push(c.shiftAndAppend(Ar,s)),s===3||s===4){let h=c.latchAndAppend(cr,16-s).latchAndAppend(cr,1);a.push(h)}if(t.getBinaryShiftByteCount()>0){let h=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(h)}}static simplifyStates(t){let i=[];for(const s of t){let a=!0;for(const c of i){if(c.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(c)&&(i=i.filter(h=>h!==c))}a&&i.push(s)}return i}}class Je{constructor(){}static encodeBytes(t){return Je.encode(t,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(t,i,s){let a=new xs(t).encode(),c=S.truncDivision(a.getSize()*i,100)+11,h=a.getSize()+c,f,_,w,D,k;if(s!==Je.DEFAULT_AZTEC_LAYERS){if(f=s<0,_=Math.abs(s),_>(f?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new x(P.format("Illegal value %s for layers",s));w=Je.totalBitsInLayer(_,f),D=Je.WORD_SIZE[_];let de=w-w%D;if(k=Je.stuffBits(a,D),k.getSize()+c>de)throw new x("Data to large for user specified layer");if(f&&k.getSize()>D*64)throw new x("Data to large for user specified layer")}else{D=0,k=null;for(let de=0;;de++){if(de>Je.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(f=de<=3,_=f?de+1:de,w=Je.totalBitsInLayer(_,f),h>w)continue;(k==null||D!==Je.WORD_SIZE[_])&&(D=Je.WORD_SIZE[_],k=Je.stuffBits(a,D));let ze=w-w%D;if(!(f&&k.getSize()>D*64)&&k.getSize()+c<=ze)break}}let Q=Je.generateCheckWords(k,w,D),z=k.getSize()/D,Y=Je.generateModeMessage(f,_,z),Z=(f?11:14)+_*4,ee=new Int32Array(Z),ne;if(f){ne=Z;for(let de=0;de<ee.length;de++)ee[de]=de}else{ne=Z+1+2*S.truncDivision(S.truncDivision(Z,2)-1,15);let de=S.truncDivision(Z,2),ze=S.truncDivision(ne,2);for(let Qe=0;Qe<de;Qe++){let zt=Qe+S.truncDivision(Qe,15);ee[de-Qe-1]=ze-zt-1,ee[de+Qe]=ze+zt+1}}let pe=new q(ne);for(let de=0,ze=0;de<_;de++){let Qe=(_-de)*4+(f?9:12);for(let zt=0;zt<Qe;zt++){let mr=zt*2;for(let Gt=0;Gt<2;Gt++)Q.get(ze+mr+Gt)&&pe.set(ee[de*2+Gt],ee[de*2+zt]),Q.get(ze+Qe*2+mr+Gt)&&pe.set(ee[de*2+zt],ee[Z-1-de*2-Gt]),Q.get(ze+Qe*4+mr+Gt)&&pe.set(ee[Z-1-de*2-Gt],ee[Z-1-de*2-zt]),Q.get(ze+Qe*6+mr+Gt)&&pe.set(ee[Z-1-de*2-zt],ee[de*2+Gt])}ze+=Qe*8}if(Je.drawModeMessage(pe,f,ne,Y),f)Je.drawBullsEye(pe,S.truncDivision(ne,2),5);else{Je.drawBullsEye(pe,S.truncDivision(ne,2),7);for(let de=0,ze=0;de<S.truncDivision(Z,2)-1;de+=15,ze+=16)for(let Qe=S.truncDivision(ne,2)&1;Qe<ne;Qe+=2)pe.set(S.truncDivision(ne,2)-ze,Qe),pe.set(S.truncDivision(ne,2)+ze,Qe),pe.set(Qe,S.truncDivision(ne,2)-ze),pe.set(Qe,S.truncDivision(ne,2)+ze)}let me=new gl;return me.setCompact(f),me.setSize(ne),me.setLayers(_),me.setCodeWords(z),me.setMatrix(pe),me}static drawBullsEye(t,i,s){for(let a=0;a<s;a+=2)for(let c=i-a;c<=i+a;c++)t.set(c,i-a),t.set(c,i+a),t.set(i-a,c),t.set(i+a,c);t.set(i-s,i-s),t.set(i-s+1,i-s),t.set(i-s,i-s+1),t.set(i+s,i-s),t.set(i+s,i-s+1),t.set(i+s,i+s-1)}static generateModeMessage(t,i,s){let a=new B;return t?(a.appendBits(i-1,2),a.appendBits(s-1,6),a=Je.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(s-1,11),a=Je.generateCheckWords(a,40,4)),a}static drawModeMessage(t,i,s,a){let c=S.truncDivision(s,2);if(i)for(let h=0;h<7;h++){let f=c-3+h;a.get(h)&&t.set(f,c-5),a.get(h+7)&&t.set(c+5,f),a.get(20-h)&&t.set(f,c+5),a.get(27-h)&&t.set(c-5,f)}else for(let h=0;h<10;h++){let f=c-5+h+S.truncDivision(h,5);a.get(h)&&t.set(f,c-7),a.get(h+10)&&t.set(c+7,f),a.get(29-h)&&t.set(f,c+7),a.get(39-h)&&t.set(c-7,f)}}static generateCheckWords(t,i,s){let a=t.getSize()/s,c=new qo(Je.getGF(s)),h=S.truncDivision(i,s),f=Je.bitsToWords(t,s,h);c.encode(f,h-a);let _=i%s,w=new B;w.appendBits(0,_);for(const D of Array.from(f))w.appendBits(D,s);return w}static bitsToWords(t,i,s){let a=new Int32Array(s),c,h;for(c=0,h=t.getSize()/i;c<h;c++){let f=0;for(let _=0;_<i;_++)f|=t.get(c*i+_)?1<<i-_-1:0;a[c]=f}return a}static getGF(t){switch(t){case 4:return Te.AZTEC_PARAM;case 6:return Te.AZTEC_DATA_6;case 8:return Te.AZTEC_DATA_8;case 10:return Te.AZTEC_DATA_10;case 12:return Te.AZTEC_DATA_12;default:throw new x("Unsupported word size "+t)}}static stuffBits(t,i){let s=new B,a=t.getSize(),c=(1<<i)-2;for(let h=0;h<a;h+=i){let f=0;for(let _=0;_<i;_++)(h+_>=a||t.get(h+_))&&(f|=1<<i-1-_);(f&c)===c?(s.appendBits(f&c,i),h--):f&c?s.appendBits(f,i):(s.appendBits(f|1,i),h--)}return s}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Zs{encode(t,i,s,a){return this.encodeWithHints(t,i,s,a,null)}encodeWithHints(t,i,s,a,c){let h=Vo.ISO_8859_1,f=Je.DEFAULT_EC_PERCENT,_=Je.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(St.CHARACTER_SET)&&(h=fl.forName(c.get(St.CHARACTER_SET).toString())),c.has(St.ERROR_CORRECTION)&&(f=S.parseInt(c.get(St.ERROR_CORRECTION).toString())),c.has(St.AZTEC_LAYERS)&&(_=S.parseInt(c.get(St.AZTEC_LAYERS).toString()))),Zs.encodeLayers(t,i,s,a,h,f,_)}static encodeLayers(t,i,s,a,c,h,f){if(i!==fe.AZTEC)throw new x("Can only encode AZTEC, but got "+i);let _=Je.encode(P.getBytes(t,c),h,f);return Zs.renderResult(_,s,a)}static renderResult(t,i,s){let a=t.getMatrix();if(a==null)throw new Ze;let c=a.getWidth(),h=a.getHeight(),f=Math.max(i,c),_=Math.max(s,h),w=Math.min(f/c,_/h),D=(f-c*w)/2,k=(_-h*w)/2,Q=new q(f,_);for(let z=0,Y=k;z<h;z++,Y+=w)for(let Z=0,ee=D;Z<c;Z++,ee+=w)a.get(Z,z)&&Q.setRegion(ee,Y,w,w);return Q}}r.AbstractExpandedDecoder=Lo,r.ArgumentException=O,r.ArithmeticException=He,r.AztecCode=gl,r.AztecCodeReader=at,r.AztecCodeWriter=Zs,r.AztecDecoder=Ue,r.AztecDetector=qt,r.AztecDetectorResult=be,r.AztecEncoder=Je,r.AztecHighLevelEncoder=xs,r.AztecPoint=ht,r.BarcodeFormat=fe,r.Binarizer=E,r.BinaryBitmap=v,r.BitArray=B,r.BitMatrix=q,r.BitSource=Fo,r.BrowserAztecCodeReader=Ke,r.BrowserBarcodeReader=u0,r.BrowserCodeReader=Le,r.BrowserDatamatrixCodeReader=f0,r.BrowserMultiFormatReader=y0,r.BrowserPDF417Reader=E0,r.BrowserQRCodeReader=S0,r.BrowserQRCodeSvgWriter=mi,r.CharacterSetECI=M,r.ChecksumException=y,r.Code128Reader=_e,r.Code39Reader=ot,r.DataMatrixDecodedBitStreamParser=Yr,r.DataMatrixReader=Hr,r.DecodeHintType=F,r.DecoderResult=oe,r.DefaultGridSampler=nt,r.DetectorResult=De,r.EAN13Reader=ui,r.EncodeHintType=St,r.Exception=p,r.FormatException=$,r.GenericGF=Te,r.GenericGFPoly=Ce,r.GlobalHistogramBinarizer=j,r.GridSampler=ge,r.GridSamplerInstance=$e,r.HTMLCanvasElementLuminanceSource=J,r.HybridBinarizer=H,r.ITFReader=Ve,r.IllegalArgumentException=x,r.IllegalStateException=Ze,r.InvertedLuminanceSource=K,r.LuminanceSource=re,r.MathUtils=Fe,r.MultiFormatOneDReader=Li,r.MultiFormatReader=dl,r.MultiFormatWriter=A0,r.NotFoundException=W,r.OneDReader=We,r.PDF417DecodedBitStreamParser=ie,r.PDF417DecoderErrorCorrection=ol,r.PDF417Reader=It,r.PDF417ResultMetadata=cl,r.PerspectiveTransform=ve,r.PlanarYUVLuminanceSource=Dr,r.QRCodeByteMatrix=Ys,r.QRCodeDataMask=or,r.QRCodeDecodedBitStreamParser=xt,r.QRCodeDecoderErrorCorrectionLevel=ft,r.QRCodeDecoderFormatInformation=Mt,r.QRCodeEncoder=pt,r.QRCodeEncoderQRCode=pi,r.QRCodeMaskUtil=wt,r.QRCodeMatrixUtil=ke,r.QRCodeMode=Ie,r.QRCodeReader=Zr,r.QRCodeVersion=Re,r.QRCodeWriter=ki,r.RGBLuminanceSource=Xo,r.RSS14Reader=Ct,r.RSSExpandedReader=he,r.ReaderException=Gs,r.ReedSolomonDecoder=Se,r.ReedSolomonEncoder=qo,r.ReedSolomonException=it,r.Result=xe,r.ResultMetadataType=ae,r.ResultPoint=we,r.StringUtils=P,r.UnsupportedOperationException=G,r.VideoInputDevice=le,r.WhiteRectangleDetector=Oe,r.WriterException=ut,r.ZXingArrays=R,r.ZXingCharset=fl,r.ZXingInteger=S,r.ZXingStandardCharsets=Vo,r.ZXingStringBuilder=X,r.ZXingStringEncoding=T,r.ZXingSystem=C,r.createAbstractExpandedDecoder=sl,Object.defineProperty(r,"__esModule",{value:!0})})})(lc,lc.exports);var mt=lc.exports;const NC=co(mt),FC=iu({__proto__:null,default:NC},[mt]);var Lh=function(){function n(e,r,o){if(this.formatMap=new Map([[ye.QR_CODE,mt.BarcodeFormat.QR_CODE],[ye.AZTEC,mt.BarcodeFormat.AZTEC],[ye.CODABAR,mt.BarcodeFormat.CODABAR],[ye.CODE_39,mt.BarcodeFormat.CODE_39],[ye.CODE_93,mt.BarcodeFormat.CODE_93],[ye.CODE_128,mt.BarcodeFormat.CODE_128],[ye.DATA_MATRIX,mt.BarcodeFormat.DATA_MATRIX],[ye.MAXICODE,mt.BarcodeFormat.MAXICODE],[ye.ITF,mt.BarcodeFormat.ITF],[ye.EAN_13,mt.BarcodeFormat.EAN_13],[ye.EAN_8,mt.BarcodeFormat.EAN_8],[ye.PDF_417,mt.BarcodeFormat.PDF_417],[ye.RSS_14,mt.BarcodeFormat.RSS_14],[ye.RSS_EXPANDED,mt.BarcodeFormat.RSS_EXPANDED],[ye.UPC_A,mt.BarcodeFormat.UPC_A],[ye.UPC_E,mt.BarcodeFormat.UPC_E],[ye.UPC_EAN_EXTENSION,mt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!FC)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=o;var l=this.createZXingFormats(e),d=new Map;d.set(mt.DecodeHintType.POSSIBLE_FORMATS,l),d.set(mt.DecodeHintType.TRY_HARDER,!1),this.hints=d}return n.prototype.decodeAsync=function(e){var r=this;return new Promise(function(o,l){try{o(r.decode(e))}catch(d){l(d)}})},n.prototype.decode=function(e){var r=new mt.MultiFormatReader(this.verbose,this.hints),o=new mt.HTMLCanvasElementLuminanceSource(e),l=new mt.BinaryBitmap(new mt.HybridBinarizer(o)),d=r.decode(l);return{text:d.text,format:Yf.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,l){e.set(r,o)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var r=[],o=0,l=e;o<l.length;o++){var d=l[o];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),BC=function(n,e,r,o){function l(d){return d instanceof r?d:new r(function(g){g(d)})}return new(r||(r=Promise))(function(d,g){function u(O){try{p(o.next(O))}catch(x){g(x)}}function m(O){try{p(o.throw(O))}catch(x){g(x)}}function p(O){O.done?d(O.value):l(O.value).then(u,m)}p((o=o.apply(n,e||[])).next())})},$C=function(n,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,l,d,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(p){return function(O){return m([p,O])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(r=0)),r;)try{if(o=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(n,r)}catch(O){p=[6,O],l=0}finally{o=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Mh=function(){function n(e,r,o){if(this.formatMap=new Map([[ye.QR_CODE,"qr_code"],[ye.AZTEC,"aztec"],[ye.CODABAR,"codabar"],[ye.CODE_39,"code_39"],[ye.CODE_93,"code_93"],[ye.CODE_128,"code_128"],[ye.DATA_MATRIX,"data_matrix"],[ye.ITF,"itf"],[ye.EAN_13,"ean_13"],[ye.EAN_8,"ean_8"],[ye.PDF_417,"pdf417"],[ye.UPC_A,"upc_a"],[ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=o;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return BC(this,void 0,void 0,function(){var r,o;return $C(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(r),[2,{text:o.rawValue,format:Yf.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var r=null,o=0,l=0,d=e;l<d.length;l++){var g=d[l],u=g.boundingBox.width*g.boundingBox.height;u>o&&(o=u,r=g)}if(!r)throw"No largest barcode found";return r},n.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],o=0,l=e;o<l.length;o++){var d=l[o];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,l){e.set(r,o)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),kh=function(n,e,r,o){function l(d){return d instanceof r?d:new r(function(g){g(d)})}return new(r||(r=Promise))(function(d,g){function u(O){try{p(o.next(O))}catch(x){g(x)}}function m(O){try{p(o.throw(O))}catch(x){g(x)}}function p(O){O.done?d(O.value):l(O.value).then(u,m)}p((o=o.apply(n,e||[])).next())})},Nh=function(n,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,l,d,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(p){return function(O){return m([p,O])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(r=0)),r;)try{if(o=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(n,r)}catch(O){p=[6,O],l=0}finally{o=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},WC=function(){function n(e,r,o,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,r&&Mh.isSupported()?(this.primaryDecoder=new Mh(e,o,l),this.secondaryDecoder=new Lh(e,o,l)):this.primaryDecoder=new Lh(e,o,l)}return n.prototype.decodeAsync=function(e){return kh(this,void 0,void 0,function(){var r;return Nh(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return kh(this,void 0,void 0,function(){var r,o;return Nh(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(o=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,o=this.executionResults;r<o.length;r++){var l=o[r];e+=l}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),Zc=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=l[d])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),ro=function(n,e,r,o){function l(d){return d instanceof r?d:new r(function(g){g(d)})}return new(r||(r=Promise))(function(d,g){function u(O){try{p(o.next(O))}catch(x){g(x)}}function m(O){try{p(o.throw(O))}catch(x){g(x)}}function p(O){O.done?d(O.value):l(O.value).then(u,m)}p((o=o.apply(n,e||[])).next())})},io=function(n,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,l,d,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(p){return function(O){return m([p,O])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(r=0)),r;)try{if(o=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(n,r)}catch(O){p=[6,O],l=0}finally{o=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Zf=function(){function n(e,r){this.name=e,this.track=r}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var r={};r[this.name]=e;var o={advanced:[r]};return this.track.applyConstraints(o)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},n}(),QC=function(n){Zc(e,n);function e(r,o){return n.call(this,r,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var o={};o[this.name]=r;var l={advanced:[o]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),o=r[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Zf),UC=function(n){Zc(e,n);function e(r){return n.call(this,"zoom",r)||this}return e}(QC),qC=function(n){Zc(e,n);function e(r){return n.call(this,"torch",r)||this}return e}(Zf),XC=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new UC(this.track)},n.prototype.torchFeature=function(){return new qC(this.track)},n}(),VC=function(){function n(e,r,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var o=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,l),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,r,o,l){return ro(this,void 0,void 0,function(){var d,g;return io(this,function(u){switch(u.label){case 0:return d=new n(e,r,l),o.aspectRatio?(g={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:u.sent(),u.label=2;case 2:return d.setupSurface(),[2,d]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var r=this,o=function(){setTimeout(e,200),r.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return ro(this,void 0,void 0,function(){return io(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,o){var l=e.mediaStream.getVideoTracks(),d=l.length,g=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++g,g>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},n.prototype.getCapabilities=function(){return new XC(this.getFirstTrackOrFail())},n}(),jC=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,r,o){return ro(this,void 0,void 0,function(){return io(this,function(l){return[2,VC.create(e,this.mediaStream,r,o)]})})},n.create=function(e){return ro(this,void 0,void 0,function(){var r,o;return io(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return o=l.sent(),[2,new n(o)]}})})},n}(),Fh=function(n,e,r,o){function l(d){return d instanceof r?d:new r(function(g){g(d)})}return new(r||(r=Promise))(function(d,g){function u(O){try{p(o.next(O))}catch(x){g(x)}}function m(O){try{p(o.throw(O))}catch(x){g(x)}}function p(O){O.done?d(O.value):l(O.value).then(u,m)}p((o=o.apply(n,e||[])).next())})},Bh=function(n,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,l,d,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(p){return function(O){return m([p,O])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(r=0)),r;)try{if(o=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(n,r)}catch(O){p=[6,O],l=0}finally{o=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},zC=function(){function n(){}return n.failIfNotSupported=function(){return Fh(this,void 0,void 0,function(){return Bh(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return Fh(this,void 0,void 0,function(){return Bh(this,function(r){return[2,jC.create(e)]})})},n}(),GC=function(n,e,r,o){function l(d){return d instanceof r?d:new r(function(g){g(d)})}return new(r||(r=Promise))(function(d,g){function u(O){try{p(o.next(O))}catch(x){g(x)}}function m(O){try{p(o.throw(O))}catch(x){g(x)}}function p(O){O.done?d(O.value):l(O.value).then(u,m)}p((o=o.apply(n,e||[])).next())})},YC=function(n,e){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,l,d,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(p){return function(O){return m([p,O])}}function m(p){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(r=0)),r;)try{if(o=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(n,r)}catch(O){p=[6,O],l=0}finally{o=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},HC=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=Yi.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=Yi.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return GC(this,void 0,void 0,function(){var e,r,o,l,d,g,u;return YC(this,function(m){switch(m.label){case 0:return e=function(p){for(var O=p.getVideoTracks(),x=0,v=O;x<v.length;x++){var y=v[x];y.enabled=!1,y.stop(),p.removeTrack(y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=m.sent(),l=[],d=0,g=o;d<g.length;d++)u=g[d],u.kind==="videoinput"&&l.push({id:u.deviceId,label:u.label});return e(r),[2,l]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var o=function(d){for(var g=[],u=0,m=d;u<m.length;u++){var p=m[u];p.kind==="video"&&g.push({id:p.id,label:p.label})}e(g)},l=MediaStreamTrack;l.getSources(o)})},n}(),vt;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(vt||(vt={}));var ZC=function(){function n(){this.state=vt.NOT_STARTED,this.onGoingTransactionNewState=vt.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===vt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=vt.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===vt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=vt.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==vt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case vt.UNKNOWN:throw"Transition from unknown is not allowed";case vt.NOT_STARTED:this.failIfNewStateIs(e,[vt.PAUSED]);break;case vt.SCANNING:break;case vt.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,r){for(var o=0,l=r;o<l.length;o++){var d=l[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),KC=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===vt.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==vt.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===vt.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===vt.PAUSED},n}(),JC=function(){function n(){}return n.create=function(){return new KC(new ZC)},n}(),ew=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=l[d])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),er=function(n){ew(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(LC),tw=function(){function n(e,r){this.logger=r,this.fps=er.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=er.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Hf.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Wr(this.qrbox)},n.create=function(e,r){return new n(e,r)},n}(),rw=function(){function n(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof r=="boolean"?this.verbose=r===!0:r&&(o=r,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new kC(this.verbose),this.qrcode=new WC(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=JC.create()}return n.prototype.start=function(e,r,o,l){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var u=tw.create(r,this.logger);this.clearElement();var m=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,O=document.getElementById(this.elementId);O.clientWidth?O.clientWidth:er.DEFAULT_WIDTH,O.style.position="relative",this.shouldScan=!0,this.element=O;var x=this,v=this.stateManagerProxy.startTransition(vt.SCANNING);return new Promise(function(y,E){var C=p?u.videoConstraints:x.createVideoConstraints(e);if(!C){v.cancel(),E("videoConstraints should be defined");return}var b={};(!p||u.aspectRatio)&&(b.aspectRatio=u.aspectRatio);var I={onRenderSurfaceReady:function(R,S){x.setupUi(R,S,u),x.isScanning=!0,x.foreverScan(u,o,g)}};zC.failIfNotSupported().then(function(R){R.create(C).then(function(S){return S.render(d.element,b,I).then(function(B){x.renderedCamera=B,v.execute(),y(null)}).catch(function(B){v.cancel(),E(B)})}).catch(function(S){v.cancel(),E(Yi.errorGettingUserMedia(S))})}).catch(function(R){v.cancel(),E(Yi.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(vt.PAUSED),this.showPausedState(),(Wr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(vt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(vt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(er.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),o(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(o){return o.decodedText})},n.prototype.scanFileV2=function(e,r){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Wr(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var u=g.width,m=g.height,p=document.getElementById(o.elementId),O=p.clientWidth?p.clientWidth:er.DEFAULT_WIDTH,x=Math.max(p.clientHeight?p.clientHeight:m,er.FILE_SCAN_MIN_HEIGHT),v=o.computeCanvasDrawConfig(u,m,O,x);if(r){var y=o.createCanvasElement(O,x,"qr-canvas-visible");y.style.display="inline-block",p.appendChild(y);var E=y.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=O,E.canvas.height=x,E.drawImage(g,0,0,u,m,v.x,v.y,v.width,v.height)}var C=er.FILE_SCAN_HIDDEN_CANVAS_PADDING,b=Math.max(g.width,v.width),I=Math.max(g.height,v.height),R=b+2*C,S=I+2*C,B=o.createCanvasElement(R,S);p.appendChild(B);var U=B.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=R,U.canvas.height=S,U.drawImage(g,0,0,u,m,C,C,b,I);try{o.qrcode.decodeRobustlyAsync(B).then(function(F){l(Ph.createFromQrcodeResult(F))}).catch(d)}catch(F){d("QR code parse error, error = ".concat(F))}},g.onerror=d,g.onabort=d,g.onstalled=d,g.onsuspend=d,g.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return HC.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!Hf.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var r=[ye.QR_CODE,ye.AZTEC,ye.CODABAR,ye.CODE_39,ye.CODE_93,ye.CODE_128,ye.DATA_MATRIX,ye.MAXICODE,ye.ITF,ye.EAN_13,ye.EAN_8,ye.PDF_417,ye.RSS_14,ye.RSS_EXPANDED,ye.UPC_A,ye.UPC_E,ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],l=0,d=e.formatsToSupport;l<d.length;l++){var g=d[l];PC(g)?o.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Wr(e))return!0;if(!Wr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Wr(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return Wr(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,r,o){var l=this,d=o.qrbox;this.validateQrboxConfig(d);var g=this.toQrdimensions(e,r,d),u=function(p){if(p<er.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(er.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};u(g.width),u(g.height),g.width=m(g.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,r,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return o},n.prototype.setupUi=function(e,r,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,o);var l=Wr(o.qrbox)?{width:e,height:r}:o.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(e,r,l);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=o.isShadedBoxEnabled()&&d.height<=r,u={x:0,y:0,width:e,height:r},m=g?this.getShadedRegionBounds(e,r,d):u,p=this.createCanvasElement(m.width,m.height),O={willReadFrequently:!0},x=p.getContext("2d",O);x.canvas.width=m.width,x.canvas.height=m.height,this.element.append(p),g&&this.possiblyInsertShadingElement(this.element,e,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=x,this.canvasElement=p},n.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Yi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},n.prototype.scanContext=function(e,r){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Ph.createFromQrcodeResult(l)),o.possiblyUpdateShaders(!0),!0}).catch(function(l){o.possiblyUpdateShaders(!1);var d=Yi.codeParseError(l);return r(d,MC.createFrom(d)),!1})},n.prototype.foreverScan=function(e,r,o){var l=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),g=d.videoWidth/d.clientWidth,u=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*g,p=this.qrRegion.height*u,O=this.qrRegion.x*g,x=this.qrRegion.y*u;this.context.drawImage(d,O,x,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,r,o)},l.getTimeoutFps(e.fps))};this.scanContext(r,o).then(function(y){!y&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,o).finally(function(){v()})):v()}).catch(function(y){l.logger.logError("Error happend while scanning context",y),v()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",o="deviceId",l={user:!0,environment:!0},d="exact",g=function(E){if(E in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(E,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var m=Object.keys(e)[0];if(m!==r&&m!==o)throw"Only '".concat(r,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(m===r){var p=e.facingMode;if(typeof p=="string"){if(g(p))return{facingMode:p}}else if(typeof p=="object")if(d in p){if(g(p["".concat(d)]))return{facingMode:{exact:p["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var O=typeof p;throw"Invalid type of 'facingMode' = ".concat(O)}}else{var x=e.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(d in x)return{deviceId:{exact:x["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var v=typeof x;throw"Invalid type of 'deviceId' = ".concat(v)}}}var y=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(y)},n.prototype.computeCanvasDrawConfig=function(e,r,o,l){if(e<=o&&r<=l){var d=(o-e)/2,g=(l-r)/2;return{x:d,y:g,width:e,height:r}}else{var u=e,m=r;return e>o&&(r=o/e*r,e=o),r>l&&(e=l/r*e,r=l),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(m)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,o,l)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?er.BORDER_SHADER_MATCH_COLOR:er.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,r,o){var l=e,d=r,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(d,"px"),g.style.display="none",g.id=Wr(o)?"qr-canvas":o,g},n.prototype.getShadedRegionBounds=function(e,r,o){if(o.width>e||o.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(r-o.height)/2,width:o.width,height:o.height}},n.prototype.possiblyInsertShadingElement=function(e,r,o,l){if(!(r-l.width<1||o-l.height<1)){var d=document.createElement("div");d.style.position="absolute";var g=(r-l.width)/2,u=(o-l.height)/2;if(d.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(er.SHADED_REGION_ELEMENT_ID),r-l.width<11||o-l.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(d,p,m,-m,null,0,!0),this.insertShaderBorders(d,p,m,-m,null,0,!1),this.insertShaderBorders(d,p,m,null,-m,0,!0),this.insertShaderBorders(d,p,m,null,-m,0,!1),this.insertShaderBorders(d,m,p+m,-m,null,-m,!0),this.insertShaderBorders(d,m,p+m,null,-m,-m,!0),this.insertShaderBorders(d,m,p+m,-m,null,-m,!1),this.insertShaderBorders(d,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(d)}},n.prototype.insertShaderBorders=function(e,r,o,l,d,g,u){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=er.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(r,"px"),m.style.height="".concat(o,"px"),l!==null&&(m.style.top="".concat(l,"px")),d!==null&&(m.style.bottom="".concat(d,"px")),u?m.style.left="".concat(g,"px"):m.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}();const so="qr-canvas",Kf="qr-url-span",iw=`canvas.${so}`,sw=`div.tooltip-inner>img.${so}`,nw=`div.tooltip-inner>span.${Kf}`,$h="div.tooltip-inner";class ow extends kr{scanInput;showBtn;showBtnTooltip;showBtnTooltipEl;scanBtn;peerIDGetter;scanner;scanModal;scanModalDiv;closeScanModalBtn;canvas;constructor(e,r,o,l){super(),this.showBtn=e,this.scanBtn=r,this.scanInput=o,this.peerIDGetter=l,document.body.insertAdjacentHTML("beforeend",this.modalHTML),document.body.insertAdjacentHTML("beforeend",this.canvasHTML),this.canvas=Be(iw),this.closeScanModalBtn=Be("#closeQRCodeScannerButton"),this.scanModalDiv=Be("#qrScannerModal"),this.scanModal=new yi(this.scanModalDiv),this.setupQRGenerator(),this.setupQRScanner()}setupQRGenerator(){this.showBtnTooltip=new tr(this.showBtn,{html:!0,placement:"bottom",trigger:"click hover focus",allowList:{...tr.Default.allowList,span:["style"],img:[]},title:`
            <img class="${so}"></img>
            <br />
            <span class="${Kf}" style='font-size: 10px !important;'></span>
        `}),this.showBtnTooltipEl=Be($h),this.showBtn.addEventListener("shown.bs.tooltip",()=>{let e=this.peerIDGetter(),r=new URL("./",window.location.href),o=`${r}?peer=${e}`,l=`${r}?peer=<br/>${e}`;$0.toDataURL(this.canvas,o,{errorCorrectionLevel:"H"}).then(d=>{Be(sw).src=d,Be(nw).innerHTML=eo(l)}).catch(d=>{})}),document.addEventListener("click",e=>{!this.showBtn.matches(":hover")&&!Be($h)?.matches(":hover")&&this.showBtnTooltip.hide()}),this.showBtn.addEventListener("click",async()=>{this.canvas.toBlob(e=>{try{navigator.clipboard.write([new ClipboardItem({[e.type]:e})])}catch{console.warn("Copying images to the clipboard is not supported in this browser - https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write#browser_compatibility")}})})}setupQRScanner=()=>{let e=new rw("qrScannerEl",{formatsToSupport:[ye.QR_CODE],verbose:!1});this.scanModalDiv.addEventListener("hidden.bs.modal",async()=>{e.stop()}),this.closeScanModalBtn.addEventListener("click",async()=>{this.closeQRScanner()}),this.scanInput.addEventListener("change",r=>{if(r==null||r.target==null)return;let o=r.target;if(o.files&&o.files.length===0)return;const d=o.files[0];e.scanFileV2(d,!0).then(g=>{this.emit("qr:scanned",g.decodedText)}).catch(g=>{this.emit("qr:error",g)})}),this.scanBtn.addEventListener("click",async()=>{if(!await UO()){this.scanInput.click();return}const r={fps:10,qrbox:{width:150,height:150}},o=(l,d)=>{this.emit("qr:scanned",l),this.closeQRScanner()};this.scanner.start({facingMode:"environment"},r,o,void 0),this.scanModal.show()})};closeQRScanner(){this.scanner.stop(),this.scanModal.hide()}canvasHTML=`
        <canvas hidden class="${so}"></canvas>
    `;modalHTML=`
    <div class="modal fade" id="qrScannerModal" tabindex="-1" aria-labelledby="qrScannerModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="qrScannerModalLabel">QR Code scanner</h1>
            <button type="button" id="closeQRCodeScannerButton" class="btn-close" data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div id="qrScannerEl"></div>
          </div>
        </div>
      </div>
    </div>
    `}var Wh={};class no{constructor(e,r,o,l,d,g,u,m,p,O=0,x){this.p=e,this.stack=r,this.state=o,this.reducePos=l,this.pos=d,this.score=g,this.buffer=u,this.bufferBase=m,this.curContext=p,this.lookAhead=O,this.parent=x}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,o=0){let l=e.parser.context;return new no(e,[],r,o,o,0,[],0,l?new Qh(l,l.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var r;let o=e>>19,l=e&65535,{parser:d}=this.p,g=d.dynamicPrecedence(l);if(g&&(this.score+=g),o==0){this.pushState(d.getGoto(this.state,l,!0),this.reducePos),l<d.minRepeatTerm&&this.storeNode(l,this.reducePos,this.reducePos,4,!0),this.reduceContext(l,this.reducePos);return}let u=this.stack.length-(o-1)*3-(e&262144?6:0),m=u?this.stack[u-2]:this.p.ranges[0].from,p=this.reducePos-m;p>=2e3&&!(!((r=this.p.parser.nodeSet.types[l])===null||r===void 0)&&r.isAnonymous)&&(m==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=m,this.p.lastBigReductionSize=p));let O=u?this.stack[u-1]:0,x=this.bufferBase+this.buffer.length-O;if(l<d.minRepeatTerm||e&131072){let v=d.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(l,m,v,x+4,!0)}if(e&262144)this.state=this.stack[u];else{let v=this.stack[u-3];this.state=d.getGoto(v,l,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(l,m)}storeNode(e,r,o,l=4,d=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let g=this,u=this.buffer.length;if(u==0&&g.parent&&(u=g.bufferBase-g.parent.bufferBase,g=g.parent),u>0&&g.buffer[u-4]==0&&g.buffer[u-1]>-1){if(r==o)return;if(g.buffer[u-2]>=r){g.buffer[u-2]=o;return}}}if(!d||this.pos==o)this.buffer.push(e,r,o,l);else{let g=this.buffer.length;if(g>0&&this.buffer[g-4]!=0)for(;g>0&&this.buffer[g-2]>o;)this.buffer[g]=this.buffer[g-4],this.buffer[g+1]=this.buffer[g-3],this.buffer[g+2]=this.buffer[g-2],this.buffer[g+3]=this.buffer[g-1],g-=4,l>4&&(l-=4);this.buffer[g]=e,this.buffer[g+1]=r,this.buffer[g+2]=o,this.buffer[g+3]=l}}shift(e,r,o,l){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=l,this.shiftContext(r,o),r<=this.p.parser.maxNode&&this.buffer.push(r,o,l,4);else{let d=e,{parser:g}=this.p;(l>this.pos||r<=g.maxNode)&&(this.pos=l,g.stateFlag(d,1)||(this.reducePos=l)),this.pushState(d,o),this.shiftContext(r,o),r<=g.maxNode&&this.buffer.push(r,o,l,4)}}apply(e,r,o,l){e&65536?this.reduce(e):this.shift(e,r,o,l)}useNode(e,r){let o=this.p.reused.length-1;(o<0||this.p.reused[o]!=e)&&(this.p.reused.push(e),o++);let l=this.pos;this.reducePos=this.pos=l+e.length,this.pushState(r,l),this.buffer.push(o,l,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let o=e.buffer.slice(r),l=e.bufferBase+r;for(;e&&l==e.bufferBase;)e=e.parent;return new no(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,o,l,this.curContext,this.lookAhead,e)}recoverByDelete(e,r){let o=e<=this.p.parser.maxNode;o&&this.storeNode(e,this.pos,r,4),this.storeNode(0,this.pos,r,o?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(e){for(let r=new aw(this);;){let o=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,e);if(o==0)return!1;if(!(o&65536))return!0;r.reduce(o)}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let l=[];for(let d=0,g;d<r.length;d+=2)(g=r[d+1])!=this.state&&this.p.parser.hasAction(g,e)&&l.push(r[d],g);if(this.stack.length<120)for(let d=0;l.length<8&&d<r.length;d+=2){let g=r[d+1];l.some((u,m)=>m&1&&u==g)||l.push(r[d],g)}r=l}let o=[];for(let l=0;l<r.length&&o.length<4;l+=2){let d=r[l+1];if(d==this.state)continue;let g=this.split();g.pushState(d,this.pos),g.storeNode(0,g.pos,g.pos,4,!0),g.shiftContext(r[l],this.pos),g.reducePos=this.pos,g.score-=200,o.push(g)}return o}forceReduce(){let{parser:e}=this.p,r=e.stateSlot(this.state,5);if(!(r&65536))return!1;if(!e.validAction(this.state,r)){let o=r>>19,l=r&65535,d=this.stack.length-o*3;if(d<0||e.getGoto(this.stack[d],l,!1)<0){let g=this.findForcedReduction();if(g==null)return!1;r=g}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:e}=this.p,r=[],o=(l,d)=>{if(!r.includes(l))return r.push(l),e.allActions(l,g=>{if(!(g&393216))if(g&65536){let u=(g>>19)-d;if(u>1){let m=g&65535,p=this.stack.length-u*3;if(p>=0&&e.getGoto(this.stack[p],m,!1)>=0)return u<<19|65536|m}}else{let u=o(g,d+1);if(u!=null)return u}})};return o(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(r)))}reduceContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(r)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let r=new Qh(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Qh{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.strict?e.hash(r):0}}class aw{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let r=e&65535,o=e>>19;o==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(o-1)*3;let l=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=l}}class oo{constructor(e,r,o){this.stack=e,this.pos=r,this.index=o,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,r=e.bufferBase+e.buffer.length){return new oo(e,r,r-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new oo(this.stack,this.pos,this.index)}}function ln(n,e=Uint16Array){if(typeof n!="string")return n;let r=null;for(let o=0,l=0;o<n.length;){let d=0;for(;;){let g=n.charCodeAt(o++),u=!1;if(g==126){d=65535;break}g>=92&&g--,g>=34&&g--;let m=g-32;if(m>=46&&(m-=46,u=!0),d+=m,u)break;d*=46}r?r[l++]=d:r=new e(d)}return r}class Sn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Uh=new Sn;class cw{constructor(e,r){this.input=e,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Uh,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(e,r){let o=this.range,l=this.rangeIndex,d=this.pos+e;for(;d<o.from;){if(!l)return null;let g=this.ranges[--l];d-=o.from-g.to,o=g}for(;r<0?d>o.to:d>=o.to;){if(l==this.ranges.length-1)return null;let g=this.ranges[++l];d+=g.from-o.to,o=g}return d}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let r of this.ranges)if(r.to>e)return Math.max(e,r.from);return this.end}peek(e){let r=this.chunkOff+e,o,l;if(r>=0&&r<this.chunk.length)o=this.pos+e,l=this.chunk.charCodeAt(r);else{let d=this.resolveOffset(e,1);if(d==null)return-1;if(o=d,o>=this.chunk2Pos&&o<this.chunk2Pos+this.chunk2.length)l=this.chunk2.charCodeAt(o-this.chunk2Pos);else{let g=this.rangeIndex,u=this.range;for(;u.to<=o;)u=this.ranges[++g];this.chunk2=this.input.chunk(this.chunk2Pos=o),o+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-o)),l=this.chunk2.charCodeAt(0)}}return o>=this.token.lookAhead&&(this.token.lookAhead=o+1),l}acceptToken(e,r=0){let o=r?this.resolveOffset(r,-1):this.pos;if(o==null||o<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=o}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),r=this.pos+e.length;this.chunk=r>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,r){if(r?(this.token=r,r.start=e,r.lookAhead=e+1,r.value=r.extended=-1):this.token=Uh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,r){if(e>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,r-this.chunkPos);if(e>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,r-this.chunk2Pos);if(e>=this.range.from&&r<=this.range.to)return this.input.read(e,r);let o="";for(let l of this.ranges){if(l.from>=r)break;l.to>e&&(o+=this.input.read(Math.max(l.from,e),Math.min(l.to,r)))}return o}}class Ji{constructor(e,r){this.data=e,this.id=r}token(e,r){let{parser:o}=r.p;lw(this.data,e,r,this.id,o.data,o.tokenPrecTable)}}Ji.prototype.contextual=Ji.prototype.fallback=Ji.prototype.extend=!1;Ji.prototype.fallback=Ji.prototype.extend=!1;class Do{constructor(e,r={}){this.token=e,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function lw(n,e,r,o,l,d){let g=0,u=1<<o,{dialect:m}=r.p.parser;e:for(;u&n[g];){let p=n[g+1];for(let y=g+3;y<p;y+=2)if((n[y+1]&u)>0){let E=n[y];if(m.allows(E)&&(e.token.value==-1||e.token.value==E||hw(E,e.token.value,l,d))){e.acceptToken(E);break}}let O=e.next,x=0,v=n[g+2];if(e.next<0&&v>x&&n[p+v*3-3]==65535){g=n[p+v*3-1];continue e}for(;x<v;){let y=x+v>>1,E=p+y+(y<<1),C=n[E],b=n[E+1]||65536;if(O<C)v=y;else if(O>=b)x=y+1;else{g=n[E+2],e.advance();continue e}}break}}function qh(n,e,r){for(let o=e,l;(l=n[o])!=65535;o++)if(l==r)return o-e;return-1}function hw(n,e,r,o){let l=qh(r,o,e);return l<0||qh(r,o,n)<l}const Jt=typeof process<"u"&&Wh&&/\bparse\b/.test(Wh.LOG);let va=null;function Xh(n,e,r){let o=n.cursor(tu.IncludeAnonymous);for(o.moveTo(e);;)if(!(r<0?o.childBefore(e):o.childAfter(e)))for(;;){if((r<0?o.to<e:o.from>e)&&!o.type.isError)return r<0?Math.max(0,Math.min(o.to-1,e-25)):Math.min(n.length,Math.max(o.from+1,e+25));if(r<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return r<0?0:n.length}}class uw{constructor(e,r){this.fragments=e,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Xh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Xh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let o=this.trees[r],l=this.index[r];if(l==o.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let d=o.children[l],g=this.start[r]+o.positions[l];if(g>e)return this.nextStart=g,null;if(d instanceof fn){if(g==e){if(g<this.safeFrom)return null;let u=g+d.length;if(u<=this.safeTo){let m=d.prop(fc.lookAhead);if(!m||u+m<this.fragment.to)return d}}this.index[r]++,g+d.length>=Math.max(this.safeFrom,e)&&(this.trees.push(d),this.start.push(g),this.index.push(0))}else this.index[r]++,this.nextStart=g+d.length}}}class dw{constructor(e,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(o=>new Sn)}getActions(e){let r=0,o=null,{parser:l}=e.p,{tokenizers:d}=l,g=l.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,m=0;for(let p=0;p<d.length;p++){if(!(1<<p&g))continue;let O=d[p],x=this.tokens[p];if(!(o&&!O.fallback)&&((O.contextual||x.start!=e.pos||x.mask!=g||x.context!=u)&&(this.updateCachedToken(x,O,e),x.mask=g,x.context=u),x.lookAhead>x.end+25&&(m=Math.max(x.lookAhead,m)),x.value!=0)){let v=r;if(x.extended>-1&&(r=this.addActions(e,x.extended,x.end,r)),r=this.addActions(e,x.value,x.end,r),!O.extend&&(o=x,r>v))break}}for(;this.actions.length>r;)this.actions.pop();return m&&e.setLookAhead(m),!o&&e.pos==this.stream.end&&(o=new Sn,o.value=e.p.parser.eofTerm,o.start=o.end=e.pos,r=this.addActions(e,o.value,o.end,r)),this.mainToken=o,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let r=new Sn,{pos:o,p:l}=e;return r.start=o,r.end=Math.min(o+1,l.stream.end),r.value=o==l.stream.end?l.parser.eofTerm:0,r}updateCachedToken(e,r,o){let l=this.stream.clipPos(o.pos);if(r.token(this.stream.reset(l,e),o),e.value>-1){let{parser:d}=o.p;for(let g=0;g<d.specialized.length;g++)if(d.specialized[g]==e.value){let u=d.specializers[g](this.stream.read(e.start,e.end),o);if(u>=0&&o.p.parser.dialect.allows(u>>1)){u&1?e.extended=u>>1:e.value=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(l+1)}putAction(e,r,o,l){for(let d=0;d<l;d+=3)if(this.actions[d]==e)return l;return this.actions[l++]=e,this.actions[l++]=r,this.actions[l++]=o,l}addActions(e,r,o,l){let{state:d}=e,{parser:g}=e.p,{data:u}=g;for(let m=0;m<2;m++)for(let p=g.stateSlot(d,m?2:1);;p+=3){if(u[p]==65535)if(u[p+1]==1)p=Qr(u,p+2);else{l==0&&u[p+1]==2&&(l=this.putAction(Qr(u,p+2),r,o,l));break}u[p]==r&&(l=this.putAction(Qr(u,p+1),r,o,l))}return l}}class fw{constructor(e,r,o,l){this.parser=e,this.input=r,this.ranges=l,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new cw(r,l),this.tokens=new dw(e,this.stream),this.topTerm=e.top[1];let{from:d}=l[0];this.stacks=[no.start(this,e.top[0],d)],this.fragments=o.length&&this.stream.end-d>e.bufferLength*4?new uw(o,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,r=this.minStackPos,o=this.stacks=[],l,d;if(this.bigReductionCount>300&&e.length==1){let[g]=e;for(;g.forceReduce()&&g.stack.length&&g.stack[g.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let g=0;g<e.length;g++){let u=e[g];for(;;){if(this.tokens.mainToken=null,u.pos>r)o.push(u);else{if(this.advanceStack(u,o,e))continue;{l||(l=[],d=[]),l.push(u);let m=this.tokens.getMainToken(u);d.push(m.value,m.end)}}break}}if(!o.length){let g=l&&mw(l);if(g)return Jt&&console.log("Finish with "+this.stackID(g)),this.stackToTree(g);if(this.parser.strict)throw Jt&&l&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&l){let g=this.stoppedAt!=null&&l[0].pos>this.stoppedAt?l[0]:this.runRecovery(l,d,o);if(g)return Jt&&console.log("Force-finish "+this.stackID(g)),this.stackToTree(g.forceAll())}if(this.recovering){let g=this.recovering==1?1:this.recovering*3;if(o.length>g)for(o.sort((u,m)=>m.score-u.score);o.length>g;)o.pop();o.some(u=>u.reducePos>r)&&this.recovering--}else if(o.length>1){e:for(let g=0;g<o.length-1;g++){let u=o[g];for(let m=g+1;m<o.length;m++){let p=o[m];if(u.sameState(p)||u.buffer.length>500&&p.buffer.length>500)if((u.score-p.score||u.buffer.length-p.buffer.length)>0)o.splice(m--,1);else{o.splice(g--,1);continue e}}}o.length>12&&o.splice(12,o.length-12)}this.minStackPos=o[0].pos;for(let g=1;g<o.length;g++)o[g].pos<this.minStackPos&&(this.minStackPos=o[g].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,r,o){let l=e.pos,{parser:d}=this,g=Jt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&l>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,O=p?e.curContext.hash:0;for(let x=this.fragments.nodeAt(l);x;){let v=this.parser.nodeSet.types[x.type.id]==x.type?d.getGoto(e.state,x.type.id):-1;if(v>-1&&x.length&&(!p||(x.prop(fc.contextHash)||0)==O))return e.useNode(x,v),Jt&&console.log(g+this.stackID(e)+` (via reuse of ${d.getName(x.type.id)})`),!0;if(!(x instanceof fn)||x.children.length==0||x.positions[0]>0)break;let y=x.children[0];if(y instanceof fn&&x.positions[0]==0)x=y;else break}}let u=d.stateSlot(e.state,4);if(u>0)return e.reduce(u),Jt&&console.log(g+this.stackID(e)+` (via always-reduce ${d.getName(u&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let m=this.tokens.getActions(e);for(let p=0;p<m.length;){let O=m[p++],x=m[p++],v=m[p++],y=p==m.length||!o,E=y?e:e.split(),C=this.tokens.mainToken;if(E.apply(O,x,C?C.start:E.pos,v),Jt&&console.log(g+this.stackID(E)+` (via ${O&65536?`reduce of ${d.getName(O&65535)}`:"shift"} for ${d.getName(x)} @ ${l}${E==e?"":", split"})`),y)return!0;E.pos>l?r.push(E):o.push(E)}return!1}advanceFully(e,r){let o=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>o)return Vh(e,r),!0}}runRecovery(e,r,o){let l=null,d=!1;for(let g=0;g<e.length;g++){let u=e[g],m=r[g<<1],p=r[(g<<1)+1],O=Jt?this.stackID(u)+" -> ":"";if(u.deadEnd&&(d||(d=!0,u.restart(),Jt&&console.log(O+this.stackID(u)+" (restarted)"),this.advanceFully(u,o))))continue;let x=u.split(),v=O;for(let y=0;x.forceReduce()&&y<10&&(Jt&&console.log(v+this.stackID(x)+" (via force-reduce)"),!this.advanceFully(x,o));y++)Jt&&(v=this.stackID(x)+" -> ");for(let y of u.recoverByInsert(m))Jt&&console.log(O+this.stackID(y)+" (via recover-insert)"),this.advanceFully(y,o);this.stream.end>u.pos?(p==u.pos&&(p++,m=0),u.recoverByDelete(m,p),Jt&&console.log(O+this.stackID(u)+` (via recover-delete ${this.parser.getName(m)})`),Vh(u,o)):(!l||l.score<u.score)&&(l=u)}return l}stackToTree(e){return e.close(),fn.build({buffer:oo.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let r=(va||(va=new WeakMap)).get(e);return r||va.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}}function Vh(n,e){for(let r=0;r<e.length;r++){let o=e[r];if(o.pos==n.pos&&o.sameState(n)){e[r].score<n.score&&(e[r]=n);return}}e.push(n)}class gw{constructor(e,r,o){this.source=e,this.flags=r,this.disabled=o}allows(e){return!this.disabled||this.disabled[e]==0}}const ya=n=>n;class pw{constructor(e){this.start=e.start,this.shift=e.shift||ya,this.reduce=e.reduce||ya,this.reuse=e.reuse||ya,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ao extends Q0{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let r=e.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let u=0;u<e.repeatNodeCount;u++)r.push("");let o=Object.keys(e.topRules).map(u=>e.topRules[u][1]),l=[];for(let u=0;u<r.length;u++)l.push([]);function d(u,m,p){l[u].push([m,m.deserialize(String(p))])}if(e.nodeProps)for(let u of e.nodeProps){let m=u[0];typeof m=="string"&&(m=fc[m]);for(let p=1;p<u.length;){let O=u[p++];if(O>=0)d(O,m,u[p++]);else{let x=u[p+-O];for(let v=-O;v>0;v--)d(u[p++],m,x);p++}}}this.nodeSet=new U0(r.map((u,m)=>q0.define({name:m>=this.minRepeatTerm?void 0:u,id:m,props:l[m],top:o.indexOf(m)>-1,error:m==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(m)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=X0;let g=ln(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(jh),this.states=ln(e.states,Uint32Array),this.data=ln(e.stateData),this.goto=ln(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>typeof u=="number"?new Ji(g,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,r,o){let l=new fw(this,e,r,o);for(let d of this.wrappers)l=d(l,e,r,o);return l}getGoto(e,r,o=!1){let l=this.goto;if(r>=l[0])return-1;for(let d=l[r+1];;){let g=l[d++],u=g&1,m=l[d++];if(u&&o)return m;for(let p=d+(g>>1);d<p;d++)if(l[d]==e)return m;if(u)return-1}}hasAction(e,r){let o=this.data;for(let l=0;l<2;l++)for(let d=this.stateSlot(e,l?2:1),g;;d+=3){if((g=o[d])==65535)if(o[d+1]==1)g=o[d=Qr(o,d+2)];else{if(o[d+1]==2)return Qr(o,d+2);break}if(g==r||g==0)return Qr(o,d+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}validAction(e,r){return!!this.allActions(e,o=>o==r?!0:null)}allActions(e,r){let o=this.stateSlot(e,4),l=o?r(o):void 0;for(let d=this.stateSlot(e,1);l==null;d+=3){if(this.data[d]==65535)if(this.data[d+1]==1)d=Qr(this.data,d+2);else break;l=r(Qr(this.data,d+1))}return l}nextStates(e){let r=[];for(let o=this.stateSlot(e,1);;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Qr(this.data,o+2);else break;if(!(this.data[o+2]&1)){let l=this.data[o+1];r.some((d,g)=>g&1&&d==l)||r.push(this.data[o],l)}}return r}configure(e){let r=Object.assign(Object.create(ao.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let o=this.topRules[e.top];if(!o)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=o}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(o=>{let l=e.tokenizers.find(d=>d.from==o);return l?l.to:o})),e.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((o,l)=>{let d=e.specializers.find(u=>u.from==o.external);if(!d)return o;let g=Object.assign(Object.assign({},o),{external:d.to});return r.specializers[l]=jh(g),g})),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){let r=Object.keys(this.dialects),o=r.map(()=>!1);if(e)for(let d of e.split(" ")){let g=r.indexOf(d);g>=0&&(o[g]=!0)}let l=null;for(let d=0;d<r.length;d++)if(!o[d])for(let g=this.dialects[r[d]],u;(u=this.data[g++])!=65535;)(l||(l=new Uint8Array(this.maxTerm+1)))[u]=1;return new gw(e,o,l)}static deserialize(e){return new ao(e)}}function Qr(n,e){return n[e]|n[e+1]<<16}function mw(n){let e=null;for(let r of n){let o=r.p.stoppedAt;(r.pos==r.p.stream.end||o!=null&&r.pos>o)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}function jh(n){if(n.external){let e=n.extend?1:0;return(r,o)=>n.external(r,o)<<1|e}return n.get}const _w=1,Jf=201,e0=202,xw=203,zh=204,Ow=205,Cw=206,ww=207,bw=2,vw=208,yw=209,Ew=3,Sw=210,Dw=211,Aw=4,Tw=212,Rw=213,Iw=5,Pw=214,Lw=26,Mw=27,kw=51,Nw=52,Fw=57,Bw=58,$w=59,Ww=61,Qw=62,Uw=63,qw=64,Xw=65,Vw=67,jw=251,zw=74,Gw=270,Yw=115,Hw=133,Zw=154,Kw=155,Jw=158,ks=10,Ns=13,Kc=32,Ao=9,Jc=35,eb=40,tb=46,Gh=123,t0=39,r0=34,rb=92,ib=new Set([Mw,kw,Nw,Gw,Vw,Hw,Bw,$w,jw,qw,Xw,zw,Qw,Uw,Zw,Kw,Jw,Yw]);function Ea(n){return n==ks||n==Ns}const sb=new Do((n,e)=>{let r;if(n.next<0)n.acceptToken(Cw);else if(e.context.depth<0)Ea(n.next)&&n.acceptToken(Ow,1);else if(((r=n.peek(-1))<0||Ea(r))&&e.canShift(zh)){let o=0;for(;n.next==Kc||n.next==Ao;)n.advance(),o++;(n.next==ks||n.next==Ns||n.next==Jc)&&n.acceptToken(zh,-o)}else Ea(n.next)&&n.acceptToken(xw,1)},{contextual:!0}),nb=new Do((n,e)=>{let r=e.context.depth;if(r<0)return;let o=n.peek(-1);if(o==ks||o==Ns){let l=0,d=0;for(;;){if(n.next==Kc)l++;else if(n.next==Ao)l+=8-l%8;else break;n.advance(),d++}l!=r&&n.next!=ks&&n.next!=Ns&&n.next!=Jc&&(l<r?n.acceptToken(e0,-d):n.acceptToken(Jf))}});function hc(n,e){this.parent=n,this.depth=e,this.hash=(n?n.hash+n.hash<<8:0)+e+(e<<4)}const ob=new hc(null,0);function ab(n){let e=0;for(let r=0;r<n.length;r++)e+=n.charCodeAt(r)==Ao?8-e%8:1;return e}const cb=new pw({start:ob,reduce(n,e){return n.depth<0&&ib.has(e)?n.parent:n},shift(n,e,r,o){return e==Jf?new hc(n,ab(o.read(o.pos,r.pos))):e==e0?n.parent:e==Lw||e==Fw||e==Ww?new hc(n,-1):n},hash(n){return n.hash}}),lb=new Do(n=>{for(let e=0;e<5;e++){if(n.next!="print".charCodeAt(e))return;n.advance()}if(!/\w/.test(String.fromCharCode(n.next)))for(let e=0;;e++){let r=n.peek(e);if(!(r==Kc||r==Ao)){r!=eb&&r!=tb&&r!=ks&&r!=Ns&&r!=Jc&&n.acceptToken(_w);return}}});function To(n,e,r,o,l){return new Do(d=>{let g=d.pos;for(;!(d.next<0);)if(d.next==Gh)if(d.peek(1)==Gh)d.advance(2);else{if(d.pos==g){d.acceptToken(o,1);return}break}else if(d.next==rb)d.advance(),d.next>=0&&d.advance();else if(d.next==n&&(e==1||d.peek(1)==n&&d.peek(2)==n)){if(d.pos==g){d.acceptToken(l,e);return}break}else d.advance();d.pos>g&&d.acceptToken(r)})}const hb=To(t0,1,ww,bw,vw),ub=To(r0,1,yw,Ew,Sw),db=To(t0,3,Dw,Aw,Tw),fb=To(r0,3,Rw,Iw,Pw),gb=V0({'async "*" "**" FormatConversion FormatSpec':N.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":N.controlKeyword,"in not and or is del":N.operatorKeyword,"from def class global nonlocal lambda":N.definitionKeyword,import:N.moduleKeyword,"with as print":N.keyword,Boolean:N.bool,None:N.null,VariableName:N.variableName,"CallExpression/VariableName":N.function(N.variableName),"FunctionDefinition/VariableName":N.function(N.definition(N.variableName)),"ClassDefinition/VariableName":N.definition(N.className),PropertyName:N.propertyName,"CallExpression/MemberExpression/PropertyName":N.function(N.propertyName),Comment:N.lineComment,Number:N.number,String:N.string,FormatString:N.special(N.string),UpdateOp:N.updateOperator,"ArithOp!":N.arithmeticOperator,BitOp:N.bitwiseOperator,CompareOp:N.compareOperator,AssignOp:N.definitionOperator,Ellipsis:N.punctuation,At:N.meta,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace,".":N.derefOperator,", ;":N.separator}),pb={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},mb=ao.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"âš  print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:cb,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[gb],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[lb,nb,sb,hb,ub,db,fb,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:n=>pb[n]||-1}],tokenPrec:7372}),Yh=new e1,i0=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function hn(n){return(e,r,o)=>{if(o)return!1;let l=e.node.getChild("VariableName");return l&&r(l,n),!0}}const _b={FunctionDefinition:hn("function"),ClassDefinition:hn("class"),ForStatement(n,e,r){if(r){for(let o=n.node.firstChild;o;o=o.nextSibling)if(o.name=="VariableName")e(o,"variable");else if(o.name=="in")break}},ImportStatement(n,e){var r,o;let{node:l}=n,d=((r=l.firstChild)===null||r===void 0?void 0:r.name)=="from";for(let g=l.getChild("import");g;g=g.nextSibling)g.name=="VariableName"&&((o=g.nextSibling)===null||o===void 0?void 0:o.name)!="as"&&e(g,d?"variable":"namespace")},AssignStatement(n,e){for(let r=n.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name==":"||r.name=="AssignOp")break},ParamList(n,e){for(let r=null,o=n.node.firstChild;o;o=o.nextSibling)o.name=="VariableName"&&(!r||!/\*|AssignOp/.test(r.name))&&e(o,"variable"),r=o},CapturePattern:hn("variable"),AsPattern:hn("variable"),__proto__:null};function s0(n,e){let r=Yh.get(e);if(r)return r;let o=[],l=!0;function d(g,u){let m=n.sliceString(g.from,g.to);o.push({label:m,type:u})}return e.cursor(tu.IncludeAnonymous).iterate(g=>{if(g.name){let u=_b[g.name];if(u&&u(g,d,l)||!l&&i0.has(g.name))return!1;l=!1}else if(g.to-g.from>8192){for(let u of s0(n,g.node))o.push(u);return!1}}),Yh.set(e,o),o}const Hh=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,n0=["String","FormatString","Comment","PropertyName"];function xb(n){let e=z0(n.state).resolveInner(n.pos,-1);if(n0.indexOf(e.name)>-1)return null;let r=e.name=="VariableName"||e.to-e.from<20&&Hh.test(n.state.sliceDoc(e.from,e.to));if(!r&&!n.explicit)return null;let o=[];for(let l=e;l;l=l.parent)i0.has(l.name)&&(o=o.concat(s0(n.state.doc,l)));return{options:o,from:r?e.from:n.pos,validFor:Hh}}const Ob=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(n=>({label:n,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(n=>({label:n,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(n=>({label:n,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(n=>({label:n,type:"function"}))),Cb=[Br("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Br("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Br("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Br("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Br(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Br("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Br("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Br("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Br("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],wb=G0(n0,J0(Ob.concat(Cb)));function Zh(n,e){let r=n.baseIndentFor(e),o=n.lineAt(n.pos,-1),l=o.from+o.text.length;return/^\s*($|#)/.test(o.text)&&n.node.to<l+100&&!/\S/.test(n.state.sliceDoc(l,n.node.to))&&n.lineIndent(n.pos,-1)<=r||/^\s*(else:|elif |except |finally:)/.test(n.textAfter)&&n.lineIndent(n.pos,-1)>r?null:r+n.unit}const Sa=Y0.define({name:"python",parser:mb.configure({props:[H0.add({Body:n=>{var e;return(e=Zh(n,n.node))!==null&&e!==void 0?e:n.continue()},IfStatement:n=>/^\s*(else:|elif )/.test(n.textAfter)?n.baseIndent:n.continue(),TryStatement:n=>/^\s*(except |finally:|else:)/.test(n.textAfter)?n.baseIndent:n.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":Yo({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":Yo({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":Yo({closing:"]"}),"String FormatString":()=>null,Script:n=>{if(n.pos+/\s*/.exec(n.textAfter)[0].length>=n.node.to){let e=null;for(let r=n.node,o=r.to;r=r.lastChild,!(!r||r.to!=o);)r.type.name=="Body"&&(e=r);if(e){let r=Zh(n,e);if(r!=null)return r}}return n.continue()}}),Z0.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":K0,Body:(n,e)=>({from:n.from+1,to:n.to-(n.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function bb(){return new j0(Sa,[Sa.data.of({autocomplete:xb}),Sa.data.of({autocomplete:wb})])}const Ft=({variant:n,settings:e,styles:r})=>{const o=ru.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:n==="dark"}),l=t1.define(r);return[o,r1(l)]};Ft({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:N.comment,color:"#404080"},{tag:[N.string,N.regexp],color:"#999999"},{tag:N.number,color:"#7090B0"},{tag:[N.bool,N.null],color:"#8080A0"},{tag:[N.punctuation,N.derefOperator],color:"#805080"},{tag:N.keyword,color:"#60B0FF"},{tag:N.definitionKeyword,color:"#B0FFF0"},{tag:N.moduleKeyword,color:"#60B0FF"},{tag:N.operator,color:"#A0A0FF"},{tag:[N.variableName,N.self],color:"#008080"},{tag:N.operatorKeyword,color:"#A0A0FF"},{tag:N.controlKeyword,color:"#80A0FF"},{tag:N.className,color:"#70E080"},{tag:[N.function(N.propertyName),N.propertyName],color:"#50A0A0"},{tag:N.tagName,color:"#009090"},{tag:N.modifier,color:"#B0FFF0"},{tag:[N.squareBracket,N.attributeName],color:"#D0D0FF"}]});Ft({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:N.comment,color:"#787b8099"},{tag:N.string,color:"#86b300"},{tag:N.regexp,color:"#4cbf99"},{tag:[N.number,N.bool,N.null],color:"#ffaa33"},{tag:N.variableName,color:"#5c6166"},{tag:[N.definitionKeyword,N.modifier],color:"#fa8d3e"},{tag:[N.keyword,N.special(N.brace)],color:"#fa8d3e"},{tag:N.operator,color:"#ed9366"},{tag:N.separator,color:"#5c6166b3"},{tag:N.punctuation,color:"#5c6166"},{tag:[N.definition(N.propertyName),N.function(N.variableName)],color:"#f2ae49"},{tag:[N.className,N.definition(N.typeName)],color:"#22a4e6"},{tag:[N.tagName,N.typeName,N.self,N.labelName],color:"#55b4d4"},{tag:N.angleBracket,color:"#55b4d480"},{tag:N.attributeName,color:"#f2ae49"}]});Ft({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:N.comment,color:"#6E6E6E"},{tag:[N.string,N.regexp,N.special(N.brace)],color:"#5C81B3"},{tag:N.number,color:"#C1E1B8"},{tag:N.bool,color:"#53667D"},{tag:[N.definitionKeyword,N.modifier,N.function(N.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[N.keyword,N.moduleKeyword,N.operatorKeyword,N.operator],color:"#697A8E",fontWeight:"bold"},{tag:[N.variableName,N.attributeName],color:"#708E67"},{tag:[N.function(N.variableName),N.definition(N.propertyName),N.derefOperator],color:"#fff"},{tag:N.tagName,color:"#A3D295"}]});Ft({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:N.comment,color:"#666666"},{tag:[N.string,N.special(N.brace)],color:"#54BE0D"},{tag:N.regexp,color:"#E9C062"},{tag:N.number,color:"#CF6A4C"},{tag:[N.keyword,N.operator],color:"#5EA6EA"},{tag:N.variableName,color:"#7587A6"},{tag:[N.definitionKeyword,N.modifier],color:"#F9EE98"},{tag:[N.propertyName,N.function(N.variableName)],color:"#937121"},{tag:[N.typeName,N.angleBracket,N.tagName],color:"#9B859D"}]});const vb=Ft({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:N.comment,color:"#6B4E32"},{tag:[N.keyword,N.operator,N.derefOperator],color:"#EF5D32"},{tag:N.className,color:"#EFAC32",fontWeight:"bold"},{tag:[N.typeName,N.propertyName,N.function(N.variableName),N.definition(N.variableName)],color:"#EFAC32"},{tag:N.definition(N.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:N.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[N.number,N.bool],color:"#6C99BB"},{tag:[N.variableName,N.self],color:"#7DAF9C"},{tag:[N.string,N.special(N.brace),N.regexp],color:"#D9D762"},{tag:[N.angleBracket,N.tagName,N.attributeName],color:"#EFCB43"}]});Ft({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:N.comment,color:"#404040"},{tag:[N.string,N.special(N.brace),N.regexp],color:"#00D8FF"},{tag:N.number,color:"#E62286"},{tag:[N.variableName,N.attributeName,N.self],color:"#E62286",fontWeight:"bold"},{tag:N.function(N.variableName),color:"#fff",fontWeight:"bold"}]});Ft({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:N.comment,color:"#BCC8BA"},{tag:[N.string,N.special(N.brace),N.regexp],color:"#5D90CD"},{tag:[N.number,N.bool,N.null],color:"#46A609"},{tag:N.keyword,color:"#AF956F"},{tag:[N.definitionKeyword,N.modifier],color:"#C52727"},{tag:[N.angleBracket,N.tagName,N.attributeName],color:"#606060"},{tag:N.self,color:"#000"}]});Ft({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:N.comment,color:"#0088FF"},{tag:N.string,color:"#3AD900"},{tag:N.regexp,color:"#80FFC2"},{tag:[N.number,N.bool,N.null],color:"#FF628C"},{tag:[N.definitionKeyword,N.modifier],color:"#FFEE80"},{tag:N.variableName,color:"#CCCCCC"},{tag:N.self,color:"#FF80E1"},{tag:[N.className,N.definition(N.propertyName),N.function(N.variableName),N.definition(N.typeName),N.labelName],color:"#FFDD00"},{tag:[N.keyword,N.operator],color:"#FF9D00"},{tag:[N.propertyName,N.typeName],color:"#80FFBB"},{tag:N.special(N.brace),color:"#EDEF7D"},{tag:N.attributeName,color:"#9EFFFF"},{tag:N.derefOperator,color:"#fff"}]});Ft({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:N.comment,color:"#AEAEAE"},{tag:[N.string,N.special(N.brace),N.regexp],color:"#8DFF8E"},{tag:[N.className,N.definition(N.propertyName),N.function(N.variableName),N.function(N.definition(N.variableName)),N.definition(N.typeName)],color:"#A3EBFF"},{tag:[N.number,N.bool,N.null],color:"#62E9BD"},{tag:[N.keyword,N.operator],color:"#2BF1DC"},{tag:[N.definitionKeyword,N.modifier],color:"#F8FBB1"},{tag:[N.variableName,N.self],color:"#B683CA"},{tag:[N.angleBracket,N.tagName,N.typeName,N.propertyName],color:"#60A4F1"},{tag:N.derefOperator,color:"#E0E0E0"},{tag:N.attributeName,color:"#7BACCA"}]});Ft({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:N.comment,color:"#6272a4"},{tag:[N.string,N.special(N.brace)],color:"#f1fa8c"},{tag:[N.number,N.self,N.bool,N.null],color:"#bd93f9"},{tag:[N.keyword,N.operator],color:"#ff79c6"},{tag:[N.definitionKeyword,N.typeName],color:"#8be9fd"},{tag:N.definition(N.typeName),color:"#f8f8f2"},{tag:[N.className,N.definition(N.propertyName),N.function(N.variableName),N.attributeName],color:"#50fa7b"}]});Ft({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:N.comment,color:"#AAAAAA"},{tag:[N.keyword,N.operator,N.typeName,N.tagName,N.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[N.attributeName,N.definition(N.propertyName)],color:"#4F9FD0"},{tag:[N.className,N.string,N.special(N.brace)],color:"#CF4F5F"},{tag:N.number,color:"#CF4F5F",fontWeight:"bold"},{tag:N.variableName,fontWeight:"bold"}]});Ft({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:N.comment,color:"#9995b7"},{tag:N.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[N.definitionKeyword,N.modifier],color:"#ff5792"},{tag:[N.className,N.tagName,N.definition(N.typeName)],color:"#0094f0"},{tag:[N.number,N.bool,N.null,N.special(N.brace)],color:"#5842ff"},{tag:[N.definition(N.propertyName),N.function(N.variableName)],color:"#0095a8"},{tag:N.typeName,color:"#b3694d"},{tag:[N.propertyName,N.variableName],color:"#fa8900"},{tag:N.operator,color:"#ff5792"},{tag:N.self,color:"#e64100"},{tag:[N.string,N.regexp],color:"#00b368"},{tag:[N.paren,N.bracket],color:"#0431fa"},{tag:N.labelName,color:"#00bdd6"},{tag:N.attributeName,color:"#e64100"},{tag:N.angleBracket,color:"#9995b7"}]});Ft({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:N.comment,color:"#9893a5"},{tag:[N.bool,N.null],color:"#286983"},{tag:N.number,color:"#d7827e"},{tag:N.className,color:"#d7827e"},{tag:[N.angleBracket,N.tagName,N.typeName],color:"#56949f"},{tag:N.attributeName,color:"#907aa9"},{tag:N.punctuation,color:"#797593"},{tag:[N.keyword,N.modifier],color:"#286983"},{tag:[N.string,N.regexp],color:"#ea9d34"},{tag:N.variableName,color:"#d7827e"}]});Ft({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:N.comment,color:"#CFCFCF"},{tag:[N.number,N.bool,N.null],color:"#E66C29"},{tag:[N.className,N.definition(N.propertyName),N.function(N.variableName),N.labelName,N.definition(N.typeName)],color:"#2EB43B"},{tag:N.keyword,color:"#D8B229"},{tag:N.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[N.definitionKeyword,N.modifier],color:"#925A47"},{tag:N.string,color:"#704D3D"},{tag:N.typeName,color:"#2F8996"},{tag:[N.variableName,N.propertyName],color:"#77ACB0"},{tag:N.self,color:"#77ACB0",fontWeight:"bold"},{tag:N.regexp,color:"#E3965E"},{tag:[N.tagName,N.angleBracket],color:"#BAA827"},{tag:N.attributeName,color:"#B06520"},{tag:N.derefOperator,color:"#000"}]});Ft({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:N.comment,color:"#93A1A1"},{tag:N.string,color:"#2AA198"},{tag:N.regexp,color:"#D30102"},{tag:N.number,color:"#D33682"},{tag:N.variableName,color:"#268BD2"},{tag:[N.keyword,N.operator,N.punctuation],color:"#859900"},{tag:[N.definitionKeyword,N.modifier],color:"#073642",fontWeight:"bold"},{tag:[N.className,N.self,N.definition(N.propertyName)],color:"#268BD2"},{tag:N.function(N.variableName),color:"#268BD2"},{tag:[N.bool,N.null],color:"#B58900"},{tag:N.tagName,color:"#268BD2",fontWeight:"bold"},{tag:N.angleBracket,color:"#93A1A1"},{tag:N.attributeName,color:"#93A1A1"},{tag:N.typeName,color:"#859900"}]});Ft({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:N.comment,color:"#8E908C"},{tag:[N.variableName,N.self,N.propertyName,N.attributeName,N.regexp],color:"#C82829"},{tag:[N.number,N.bool,N.null],color:"#F5871F"},{tag:[N.className,N.typeName,N.definition(N.typeName)],color:"#C99E00"},{tag:[N.string,N.special(N.brace)],color:"#718C00"},{tag:N.operator,color:"#3E999F"},{tag:[N.definition(N.propertyName),N.function(N.variableName)],color:"#4271AE"},{tag:N.keyword,color:"#8959A8"},{tag:N.derefOperator,color:"#4D4D4C"}]});class yb extends ru{constructor(e,r,o){let l=[i1.of("    "),s1,bb(),Ol.of([...n1,o1]),a1.highest(Ol.of([{key:"Ctrl-Enter",run:()=>(o.runMPC(this.getCode(),r.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(o.runMPC(this.getCode(),r.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),r.selectedIndex!=0&&(r.selectedIndex=0,r.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:c1,preventDefault:!0},{key:"Ctrl-d",run:l1,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:h1,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:u1,preventDefault:!0},{key:"Ctrl-y",run:d1,preventDefault:!0}])),vb];super({extensions:l,parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}async function Eb(n){var e;return n.selectedIndex==0?e=localStorage.customCode||"":e=await(await fetch(n.value)).text(),e}function Sb(n){console.log("Storage schema generation:",localStorage.gen),localStorage.gen||=0,localStorage.gen<n&&(console.log(`Clearing schema, latest generation: ${n}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=n)}const Db=()=>{addEventListener("beforeunload",function(){delete sessionStorage.__lock});let n=!1;return sessionStorage.__lock&&(n=!0),sessionStorage.__lock=1,n},Kh=Db();function Ab(){localStorage.tabCount||=0;let n=parseInt(localStorage.tabCount)+1;return localStorage.tabCount=n,addEventListener("beforeunload",function(){dc("lock","");let e=parseInt(localStorage.tabCount);e>0&&(localStorage.tabCount=e-1)}),Kh&&console.warn("tab is duplicate"),(!sessionStorage.tabID||Kh||uc("lock",sessionStorage.tabID)!="")&&(sessionStorage.tabID=Tb(),sessionStorage.myPeerID=uc("myPeerID")),dc("lock","locked"),console.log("tab id: "+sessionStorage.tabID),sessionStorage.myPeerID}function Tb(){for(let n=1;n<=1e3;n++)if(uc("lock",n)=="")return n}function uc(n,e=sessionStorage.tabID){return localStorage[`tabState:${e}:`+n]||""}function dc(n,e,r=sessionStorage.tabID){sessionStorage[n]=e,localStorage[`tabState:${r}:`+n]=e}var hr=typeof window<"u"?window:null,el=hr===null,Fs=el?void 0:hr.document,_r="addEventListener",xr="removeEventListener",Da="getBoundingClientRect",vs="_a",Or="_b",$r="_c",un="horizontal",Cr=function(){return!1},Rb=el?"calc":["","-webkit-","-moz-","-o-"].filter(function(n){var e=Fs.createElement("div");return e.style.cssText="width:"+n+"calc(9px)",!!e.style.length}).shift()+"calc",o0=function(n){return typeof n=="string"||n instanceof String},Jh=function(n){if(o0(n)){var e=Fs.querySelector(n);if(!e)throw new Error("Selector "+n+" did not match a DOM element");return e}return n},kt=function(n,e,r){var o=n[e];return o!==void 0?o:r},dn=function(n,e,r,o){if(e){if(o==="end")return 0;if(o==="center")return n/2}else if(r){if(o==="start")return 0;if(o==="center")return n/2}return n},Ib=function(n,e){var r=Fs.createElement("div");return r.className="gutter gutter-"+e,r},Pb=function(n,e,r){var o={};return o0(e)?o[n]=e:o[n]=Rb+"("+e+"% - "+r+"px)",o},Lb=function(n,e){var r;return r={},r[n]=e+"px",r},Mb=function(n,e){if(e===void 0&&(e={}),el)return{};var r=n,o,l,d,g,u,m;Array.from&&(r=Array.from(r));var p=Jh(r[0]),O=p.parentNode,x=getComputedStyle?getComputedStyle(O):null,v=x?x.flexDirection:null,y=kt(e,"sizes")||r.map(function(){return 100/r.length}),E=kt(e,"minSize",100),C=Array.isArray(E)?E:r.map(function(){return E}),b=kt(e,"maxSize",1/0),I=Array.isArray(b)?b:r.map(function(){return b}),R=kt(e,"expandToMin",!1),S=kt(e,"gutterSize",10),B=kt(e,"gutterAlign","center"),U=kt(e,"snapOffset",30),F=Array.isArray(U)?U:r.map(function(){return U}),$=kt(e,"dragInterval",1),A=kt(e,"direction",un),M=kt(e,"cursor",A===un?"col-resize":"row-resize"),G=kt(e,"gutter",Ib),T=kt(e,"elementStyle",Pb),P=kt(e,"gutterStyle",Lb);A===un?(o="width",l="clientX",d="left",g="right",u="clientWidth"):A==="vertical"&&(o="height",l="clientY",d="top",g="bottom",u="clientHeight");function X(ae,oe,ce,Ce){var He=T(o,oe,ce,Ce);Object.keys(He).forEach(function(Te){ae.style[Te]=He[Te]})}function q(ae,oe,ce){var Ce=P(o,oe,ce);Object.keys(Ce).forEach(function(He){ae.style[He]=Ce[He]})}function W(){return m.map(function(ae){return ae.size})}function j(ae){return"touches"in ae?ae.touches[0][l]:ae[l]}function H(ae){var oe=m[this.a],ce=m[this.b],Ce=oe.size+ce.size;oe.size=ae/this.size*Ce,ce.size=Ce-ae/this.size*Ce,X(oe.element,oe.size,this[Or],oe.i),X(ce.element,ce.size,this[$r],ce.i)}function re(ae){var oe,ce=m[this.a],Ce=m[this.b];this.dragging&&(oe=j(ae)-this.start+(this[Or]-this.dragOffset),$>1&&(oe=Math.round(oe/$)*$),oe<=ce.minSize+ce.snapOffset+this[Or]?oe=ce.minSize+this[Or]:oe>=this.size-(Ce.minSize+Ce.snapOffset+this[$r])&&(oe=this.size-(Ce.minSize+this[$r])),oe>=ce.maxSize-ce.snapOffset+this[Or]?oe=ce.maxSize+this[Or]:oe<=this.size-(Ce.maxSize-Ce.snapOffset+this[$r])&&(oe=this.size-(Ce.maxSize+this[$r])),H.call(this,oe),kt(e,"onDrag",Cr)(W()))}function K(){var ae=m[this.a].element,oe=m[this.b].element,ce=ae[Da](),Ce=oe[Da]();this.size=ce[o]+Ce[o]+this[Or]+this[$r],this.start=ce[d],this.end=ce[g]}function J(ae){if(!getComputedStyle)return null;var oe=getComputedStyle(ae);if(!oe)return null;var ce=ae[u];return ce===0?null:(A===un?ce-=parseFloat(oe.paddingLeft)+parseFloat(oe.paddingRight):ce-=parseFloat(oe.paddingTop)+parseFloat(oe.paddingBottom),ce)}function le(ae){var oe=J(O);if(oe===null||C.reduce(function(Te,it){return Te+it},0)>oe)return ae;var ce=0,Ce=[],He=ae.map(function(Te,it){var Ze=oe*Te/100,Se=dn(S,it===0,it===ae.length-1,B),Ge=C[it]+Se;return Ze<Ge?(ce+=Ge-Ze,Ce.push(0),Ge):(Ce.push(Ze-Ge),Ze)});return ce===0?ae:He.map(function(Te,it){var Ze=Te;if(ce>0&&Ce[it]-ce>0){var Se=Math.min(ce,Ce[it]-ce);ce-=Se,Ze=Te-Se}return Ze/oe*100})}function se(){var ae=this,oe=m[ae.a].element,ce=m[ae.b].element;ae.dragging&&kt(e,"onDragEnd",Cr)(W()),ae.dragging=!1,hr[xr]("mouseup",ae.stop),hr[xr]("touchend",ae.stop),hr[xr]("touchcancel",ae.stop),hr[xr]("mousemove",ae.move),hr[xr]("touchmove",ae.move),ae.stop=null,ae.move=null,oe[xr]("selectstart",Cr),oe[xr]("dragstart",Cr),ce[xr]("selectstart",Cr),ce[xr]("dragstart",Cr),oe.style.userSelect="",oe.style.webkitUserSelect="",oe.style.MozUserSelect="",oe.style.pointerEvents="",ce.style.userSelect="",ce.style.webkitUserSelect="",ce.style.MozUserSelect="",ce.style.pointerEvents="",ae.gutter.style.cursor="",ae.parent.style.cursor="",Fs.body.style.cursor=""}function Le(ae){if(!("button"in ae&&ae.button!==0)){var oe=this,ce=m[oe.a].element,Ce=m[oe.b].element;oe.dragging||kt(e,"onDragStart",Cr)(W()),ae.preventDefault(),oe.dragging=!0,oe.move=re.bind(oe),oe.stop=se.bind(oe),hr[_r]("mouseup",oe.stop),hr[_r]("touchend",oe.stop),hr[_r]("touchcancel",oe.stop),hr[_r]("mousemove",oe.move),hr[_r]("touchmove",oe.move),ce[_r]("selectstart",Cr),ce[_r]("dragstart",Cr),Ce[_r]("selectstart",Cr),Ce[_r]("dragstart",Cr),ce.style.userSelect="none",ce.style.webkitUserSelect="none",ce.style.MozUserSelect="none",ce.style.pointerEvents="none",Ce.style.userSelect="none",Ce.style.webkitUserSelect="none",Ce.style.MozUserSelect="none",Ce.style.pointerEvents="none",oe.gutter.style.cursor=M,oe.parent.style.cursor=M,Fs.body.style.cursor=M,K.call(oe),oe.dragOffset=j(ae)-oe.end}}y=le(y);var xe=[];m=r.map(function(ae,oe){var ce={element:Jh(ae),size:y[oe],minSize:C[oe],maxSize:I[oe],snapOffset:F[oe],i:oe},Ce;if(oe>0&&(Ce={a:oe-1,b:oe,dragging:!1,direction:A,parent:O},Ce[Or]=dn(S,oe-1===0,!1,B),Ce[$r]=dn(S,!1,oe===r.length-1,B),v==="row-reverse"||v==="column-reverse")){var He=Ce.a;Ce.a=Ce.b,Ce.b=He}if(oe>0){var Te=G(oe,A,ce.element);q(Te,S,oe),Ce[vs]=Le.bind(Ce),Te[_r]("mousedown",Ce[vs]),Te[_r]("touchstart",Ce[vs]),O.insertBefore(Te,ce.element),Ce.gutter=Te}return X(ce.element,ce.size,dn(S,oe===0,oe===r.length-1,B),oe),oe>0&&xe.push(Ce),ce});function Me(ae){var oe=ae.i===xe.length,ce=oe?xe[ae.i-1]:xe[ae.i];K.call(ce);var Ce=oe?ce.size-ae.minSize-ce[$r]:ae.minSize+ce[Or];H.call(ce,Ce)}m.forEach(function(ae){var oe=ae.element[Da]()[o];oe<ae.minSize&&(R?Me(ae):ae.minSize=oe)});function fe(ae){var oe=le(ae);oe.forEach(function(ce,Ce){if(Ce>0){var He=xe[Ce-1],Te=m[He.a],it=m[He.b];Te.size=oe[Ce-1],it.size=ce,X(Te.element,Te.size,He[Or],Te.i),X(it.element,it.size,He[$r],it.i)}})}function je(ae,oe){xe.forEach(function(ce){if(oe!==!0?ce.parent.removeChild(ce.gutter):(ce.gutter[xr]("mousedown",ce[vs]),ce.gutter[xr]("touchstart",ce[vs])),ae!==!0){var Ce=T(o,ce.a.size,ce[Or]);Object.keys(Ce).forEach(function(He){m[ce.a].element.style[He]="",m[ce.b].element.style[He]=""})}})}return{setSizes:fe,getSizes:W,collapse:function(oe){Me(m[oe])},destroy:je,parent:O,pairs:xe}};function kb(n){var e=localStorage.getItem("split-sizes"),r;e?r=JSON.parse(e):r=[50,50],Mb(n,{sizes:r,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,onDragEnd:function(o){localStorage.setItem("split-sizes",JSON.stringify(o))}})}class Nb{mpyc;editor;term;demoSelect;hostPeerIDInput;chatInput;myPeerIDEl;knownPeersEl;resetPeerIDButton;runMPyCButton;runMPyCAsyncButton;stopMPyCButton;connectToPeerButton;sendMessageButton;clearTerminalButton;versionDiv;toggleStatsEl;qr;constructor(e,r){this.mpyc=e,this.demoSelect=Be(r.demoSelectSelector),this.hostPeerIDInput=Be(r.hostPeerIDInputSelector),this.chatInput=Be(r.chatInputSelector),this.myPeerIDEl=Be(r.myPeerIDSelector),this.knownPeersEl=Be(r.peersDivSelector),this.resetPeerIDButton=Be(r.resetPeerIDButtonSelector),this.runMPyCButton=Be(r.runMPyCButtonSelector),this.runMPyCAsyncButton=Be(r.runMPyCAsyncButtonSelector),this.stopMPyCButton=Be(r.stopMPyCButtonSelector),this.connectToPeerButton=Be(r.connectToPeerButtonSelector),this.sendMessageButton=Be(r.sendMessageButtonSelector),this.clearTerminalButton=Be(r.clearTerminalButtonSelector),this.toggleStatsEl=Be(r.toggleStatsSelector),this.versionDiv=Be(r.versionSelector),W0('[data-bs-toggle="tooltip"]').forEach(o=>new tr(o,{trigger:"hover"})),this.qr=new ow(Be(r.qrGenBtnSelector),Be(r.qrScanBtnSelector),Be(r.qrScanInputSelector),()=>this.mpyc.transport.id()),this.qr.on("qr:scanned",o=>{this.hostPeerIDInput.value=o,this.hostPeerIDInput.dispatchEvent(new Event("input"))}),this.qr.on("qr:error",o=>{this.term.error(o.message)}),this.term=new RC(r.terminalSelector,e),this.editor=new yb(r.editorSelector,this.demoSelect,e),this.init(e,r)}init(e,r){this.term.info(`Initializing ${gt.green("PeerJS")}...`),this.term.info(`Initializing ${gt.green(e.runtime.type())} runtime...`),this.updateHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",oc(()=>{try{let l=new URL(this.hostPeerIDInput.value).searchParams.get("peer");l&&(this.hostPeerIDInput.value=l)}catch{}})),this.setupMPyCEvents(e),this.setupButtonEvents(e,r),this.setupDemoSelector(),kb(r.splitPanelSelectors),this.setupGlobals()}setupMPyCEvents(e){addEventListener("error",r=>{console.error(r),this.term.error(r.message)}),e.on("transport:ready",async r=>{this.myPeerIDEl.value=eo(r),dc("myPeerID",r),console.log("Peer ID: "+r),this.term.success(`${gt.green("PeerJS")} ready with ID: ${gt.peerID(r)}`),this.updatePeersDiv()}),e.on("transport:closed",async()=>{this.term.error("PeerJS closed.")}),e.on("transport:error",async r=>{this.term.warn(`PeerJS failed: ${r.message}`),console.warn(`PeerJS failed: ${r.message}
${r.stack}`),r.message==="Lost connection to server."&&setTimeout(()=>{this.mpyc.transport.reconnect()},1e3)}),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",async r=>{this.term.error(r.error)}),e.on("runtime:messageerror",async r=>{this.term.error(r.data)}),e.on("runtime:exec:done",async()=>{this.updatePeersDiv()}),e.on("runtime:exec:init",async()=>{this.updatePeersDiv()}),e.on("runtime:display",async r=>{this.term.display(r)}),e.on("runtime:display:error",async r=>{this.term.displayError(r)}),e.on("runtime:display:stats",async r=>{this.term.live(r)}),e.on("runtime:ready",async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${gt.green(e.runtime.type())} runtime ready.`)})}setupButtonEvents(e,r){if(Lf)try{this.setupEruda()}catch(o){console.warn(o)}this.resetPeerIDButton.addEventListener("click",async()=>{delete sessionStorage.myPeerID,this.term.writeln("Restarting PeerJS..."),e.resetTransport(()=>new Ka)}),this.stopMPyCButton.addEventListener("click",async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()}),this.runMPyCButton.addEventListener("click",async o=>{e.runMPC(this.editor.getCode(),this.demoSelect.value,o.ctrlKey||o.shiftKey)}),this.connectToPeerButton.addEventListener("click",async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)}),this.sendMessageButton.addEventListener("click",async()=>{this.sendChatMessage()}),this.clearTerminalButton.addEventListener("click",async()=>{this.term.clear()}),this.setupStatsToggle(),this.chatInput.addEventListener("keypress",async o=>{let l=o;if(l.key==="Enter"&&!l.shiftKey)return l.preventDefault(),this.sendChatMessage()}),new XO(r.myPeerIDSelector,r.copyPeerIDButtonSelector)}setupStatsToggle(){this.toggleStatsEl.addEventListener("click",async()=>{this.toggleStatsEl.checked?(Eh("showStats","true"),tr.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(Eh("showStats","false"),tr.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())});const e=qO("showStats");this.toggleStatsEl.checked=e==="true",this.toggleStatsEl.dispatchEvent(new Event("click"))}setupEruda(){let e=document.createElement("div");document.body.prepend(e),xl.init({container:e,autoScale:!0,defaults:{theme:"dark"},tool:["console","elements","network","info","resources"]}),xl.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.clearTabCount=()=>{delete localStorage.tabCount},window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}onPeerConnectedHook=async e=>{this.term.success(`Connected to: ${gt.peerID(e)}`),this.updatePeersDiv()};async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach((e,r)=>{let o=`
        <span class="position-relative end-0">
            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>
        </span>`;this.knownPeersEl.innerHTML+=`
        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> 
            <span class="" style="user-select:none">${r}: </span>
            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${eo(e)}</span> 
            ${o}
        </li>`})}onPeerDisconnectedHook=async e=>{this.term.error(`Disconnected from: ${gt.peerID(e)}`),this.updatePeersDiv()};onPeerConnectionErrorHook=async({peerID:e,err:r})=>{this.term.error(`Failed to connect to: ${gt.peerID(e)}: ${r.message}`),this.updatePeersDiv()};setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),r=o=>{o.matches?(Be("#mpc-demos").hidden=!0,Be("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,Be("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),Be("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),Be("#chatFooter").insertAdjacentElement("beforeend",Be("#chatInputGroup"))):(Be("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),Be("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),Be("#mpc-demos").hidden=!1,Be("#connectedPartiesLabel").hidden=!1,Be("#chatSidebar").insertAdjacentElement("beforeend",Be("#chatInputGroup")),this.demoSelect.size=window.innerHeight/(4*21))};e.addEventListener("change",r),r(e),this.demoSelect.addEventListener("change",async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex;let o=await Eb(this.demoSelect);this.editor.updateCode(o)}),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.demoSelect.dispatchEvent(new Event("change"))}updateHostPeerIDInput(){var o=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return o&&(this.hostPeerIDInput.value=o,localStorage.hostPeerID=o),o}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}processChatMessage=async({peerID:e,data:r})=>{if(r.type!="user:chat"){console.warn("unknown message type",r);return}this.term.chat(e,r.payload)}}const eu="0.6.1";function Fb(){Sb(18);let n=Ab();document.title+=` - (${sessionStorage.tabID})`;const e=()=>{try{return new Ka(n)}catch(l){return console.warn(l),new Ka}},r=()=>new Jg({config:{fetch:[{from:"./py/",to_folder:"./",files:[`mpyc_web-${eu}-py3-none-any.whl`,"demo.py"]}],packages:[`emfs:./mpyc_web-${eu}-py3-none-any.whl`]}});let o=new O1(e,r);new Nb(o,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",runMPyCAsyncButtonSelector:"button#startAsyncButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",qrGenBtnSelector:"#show-qr",qrScanInputSelector:"#qrCodeFileInput",qrScanBtnSelector:"#scanQRCodeButton",splitPanelSelectors:[".split-panel-editor",".split-panel-terminal"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})}Fb();
//# sourceMappingURL=index-cTMEg1ua.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}