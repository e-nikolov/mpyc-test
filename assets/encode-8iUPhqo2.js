let ke;try{ke=new TextDecoder}catch{}let y,X,o=0;const it=105,st=57342,ft=57343,Ke=57337,Pe=6,v={};let E={},B,xe,ye=0,se=0,V,z,_=[],Ue=[],N,j,ie,Le={useRecords:!1,mapsAsObjects:!0},fe=!1,Ye=2;try{new Function("")}catch{Ye=1/0}class le{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[n,f]of Object.entries(t.keyMap))this.mapKey.set(f,n)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let n=new Map;for(let[f,l]of Object.entries(t))n.set(this._keyMap.hasOwnProperty(f)?this._keyMap[f]:f,l);return n}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[f,l]of Object.entries(this._keyMap))this._mapKey.set(l,f)}let n={};return t.forEach((f,l)=>n[L(this._mapKey.has(l)?this._mapKey.get(l):l)]=f),n}mapDecode(t,n){let f=this.decode(t);if(this._keyMap)switch(f.constructor.name){case"Array":return f.map(l=>this.decodeKeys(l))}return f}decode(t,n){if(y)return tt(()=>(Be(),this?this.decode(t,n):le.prototype.decode.call(Le,t,n)));X=n>-1?n:t.length,o=0,se=0,xe=null,V=null,y=t;try{j=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(f){throw y=null,t instanceof Uint8Array?f:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof le){if(E=this,N=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return B=this.structures,ue();(!B||B.length>0)&&(B=[])}else E=Le,(!B||B.length>0)&&(B=[]),N=null;return ue()}decodeMultiple(t,n){let f,l=0;try{let a=t.length;fe=!0;let d=this?this.decode(t,a):Ve.decode(t,a);if(n){if(n(d)===!1)return;for(;o<a;)if(l=o,n(ue())===!1)return}else{for(f=[d];o<a;)l=o,f.push(ue());return f}}catch(a){throw a.lastPosition=l,a.values=f,a}finally{fe=!1,Be()}}}function ue(){try{let e=A();if(V){if(o>=V.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}o=V.postBundlePosition,V=null}if(o==X)B=null,y=null,z&&(z=null);else if(o>X){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!fe)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Be(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function A(){let e=y[o++],t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=y[o++];break;case 25:if(t==7)return ut();e=j.getUint16(o),o+=2;break;case 26:if(t==7){let n=j.getFloat32(o);if(E.useFloat32>2){let f=De[(y[o]&127)<<1|y[o+1]>>7];return o+=4,(f*n+(n>0?.5:-.5)>>0)/f}return o+=4,n}e=j.getUint32(o),o+=4;break;case 27:if(t==7){let n=j.getFloat64(o);return o+=8,n}if(t>1){if(j.getUint32(o)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=j.getUint32(o+4)}else E.int64AsNumber?(e=j.getUint32(o)*4294967296,e+=j.getUint32(o+4)):e=j.getBigUint64(o);o+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],f,l=0;for(;(f=A())!=v;)n[l++]=f;return t==4?n:t==3?n.join(""):Buffer.concat(n);case 5:let a;if(E.mapsAsObjects){let d={};if(E.keyMap)for(;(a=A())!=v;)d[L(E.decodeKey(a))]=A();else for(;(a=A())!=v;)d[L(a)]=A();return d}else{ie&&(E.mapsAsObjects=!0,ie=!1);let d=new Map;if(E.keyMap)for(;(a=A())!=v;)d.set(E.decodeKey(a),A());else for(;(a=A())!=v;)d.set(a,A());return d}case 7:return v;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return ot(e);case 3:if(se>=o)return xe.slice(o-ye,(o+=e)-ye);if(se==0&&X<140&&e<32){let l=e<16?Qe(e):at(e);if(l!=null)return l}return lt(e);case 4:let n=new Array(e);for(let l=0;l<e;l++)n[l]=A();return n;case 5:if(E.mapsAsObjects){let l={};if(E.keyMap)for(let a=0;a<e;a++)l[L(E.decodeKey(A()))]=A();else for(let a=0;a<e;a++)l[L(A())]=A();return l}else{ie&&(E.mapsAsObjects=!0,ie=!1);let l=new Map;if(E.keyMap)for(let a=0;a<e;a++)l.set(E.decodeKey(A()),A());else for(let a=0;a<e;a++)l.set(A(),A());return l}case 6:if(e>=Ke){let l=B[e&8191];if(l)return l.read||(l.read=Oe(l)),l.read();if(e<65536){if(e==ft){let a=te(),d=A(),m=A();Ie(d,m);let p={};if(E.keyMap)for(let M=2;M<a;M++){let O=E.decodeKey(m[M-2]);p[L(O)]=A()}else for(let M=2;M<a;M++){let O=m[M-2];p[L(O)]=A()}return p}else if(e==st){let a=te(),d=A();for(let m=2;m<a;m++)Ie(d++,A());return A()}else if(e==Ke)return pt();if(E.getShared&&(_e(),l=B[e&8191],l))return l.read||(l.read=Oe(l)),l.read()}}let f=_[e];if(f)return f.handlesRead?f(A):f(A());{let l=A();for(let a=0;a<Ue.length;a++){let d=Ue[a](e,l);if(d!==void 0)return d}return new Y(l,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let l=(N||Z())[e];if(l!==void 0)return l;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let l=new Error("Unexpected end of CBOR data");throw l.incomplete=!0,l}throw new Error("Unknown CBOR token "+e)}}const ze=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Oe(e){function t(){let n=y[o++];if(n=n&31,n>23)switch(n){case 24:n=y[o++];break;case 25:n=j.getUint16(o),o+=2;break;case 26:n=j.getUint32(o),o+=4;break;default:throw new Error("Expected array header, but got "+y[o-1])}let f=this.compiledReader;for(;f;){if(f.propertyCount===n)return f(A);f=f.next}if(this.slowReads++>=Ye){let a=this.length==n?this:this.slice(0,n);return f=E.keyMap?new Function("r","return {"+a.map(d=>E.decodeKey(d)).map(d=>ze.test(d)?L(d)+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(d=>ze.test(d)?L(d)+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}"),this.compiledReader&&(f.next=this.compiledReader),f.propertyCount=n,this.compiledReader=f,f(A)}let l={};if(E.keyMap)for(let a=0;a<n;a++)l[L(E.decodeKey(this[a]))]=A();else for(let a=0;a<n;a++)l[L(this[a])]=A();return l}return e.slowReads=0,t}function L(e){return e==="__proto__"?"__proto_":e}let lt=Me;function Me(e){let t;if(e<16&&(t=Qe(e)))return t;if(e>64&&ke)return ke.decode(y.subarray(o,o+=e));const n=o+e,f=[];for(t="";o<n;){const l=y[o++];if(!(l&128))f.push(l);else if((l&224)===192){const a=y[o++]&63;f.push((l&31)<<6|a)}else if((l&240)===224){const a=y[o++]&63,d=y[o++]&63;f.push((l&31)<<12|a<<6|d)}else if((l&248)===240){const a=y[o++]&63,d=y[o++]&63,m=y[o++]&63;let p=(l&7)<<18|a<<12|d<<6|m;p>65535&&(p-=65536,f.push(p>>>10&1023|55296),p=56320|p&1023),f.push(p)}else f.push(l);f.length>=4096&&(t+=T.apply(String,f),f.length=0)}return f.length>0&&(t+=T.apply(String,f)),t}let T=String.fromCharCode;function at(e){let t=o,n=new Array(e);for(let f=0;f<e;f++){const l=y[o++];if((l&128)>0){o=t;return}n[f]=l}return T.apply(String,n)}function Qe(e){if(e<4)if(e<2){if(e===0)return"";{let t=y[o++];if((t&128)>1){o-=1;return}return T(t)}}else{let t=y[o++],n=y[o++];if((t&128)>0||(n&128)>0){o-=2;return}if(e<3)return T(t,n);let f=y[o++];if((f&128)>0){o-=3;return}return T(t,n,f)}else{let t=y[o++],n=y[o++],f=y[o++],l=y[o++];if((t&128)>0||(n&128)>0||(f&128)>0||(l&128)>0){o-=4;return}if(e<6){if(e===4)return T(t,n,f,l);{let a=y[o++];if((a&128)>0){o-=5;return}return T(t,n,f,l,a)}}else if(e<8){let a=y[o++],d=y[o++];if((a&128)>0||(d&128)>0){o-=6;return}if(e<7)return T(t,n,f,l,a,d);let m=y[o++];if((m&128)>0){o-=7;return}return T(t,n,f,l,a,d,m)}else{let a=y[o++],d=y[o++],m=y[o++],p=y[o++];if((a&128)>0||(d&128)>0||(m&128)>0||(p&128)>0){o-=8;return}if(e<10){if(e===8)return T(t,n,f,l,a,d,m,p);{let M=y[o++];if((M&128)>0){o-=9;return}return T(t,n,f,l,a,d,m,p,M)}}else if(e<12){let M=y[o++],O=y[o++];if((M&128)>0||(O&128)>0){o-=10;return}if(e<11)return T(t,n,f,l,a,d,m,p,M,O);let R=y[o++];if((R&128)>0){o-=11;return}return T(t,n,f,l,a,d,m,p,M,O,R)}else{let M=y[o++],O=y[o++],R=y[o++],F=y[o++];if((M&128)>0||(O&128)>0||(R&128)>0||(F&128)>0){o-=12;return}if(e<14){if(e===12)return T(t,n,f,l,a,d,m,p,M,O,R,F);{let P=y[o++];if((P&128)>0){o-=13;return}return T(t,n,f,l,a,d,m,p,M,O,R,F,P)}}else{let P=y[o++],J=y[o++];if((P&128)>0||(J&128)>0){o-=14;return}if(e<15)return T(t,n,f,l,a,d,m,p,M,O,R,F,P,J);let C=y[o++];if((C&128)>0){o-=15;return}return T(t,n,f,l,a,d,m,p,M,O,R,F,P,J,C)}}}}}function ot(e){return E.copyBuffers?Uint8Array.prototype.slice.call(y,o,o+=e):y.subarray(o,o+=e)}let ve=new Float32Array(1),ce=new Uint8Array(ve.buffer,0,4);function ut(){let e=y[o++],t=y[o++],n=(e&127)>>2;if(n===31)return t||e&3?NaN:e&128?-1/0:1/0;if(n===0){let f=((e&3)<<8|t)/16777216;return e&128?-f:f}return ce[3]=e&128|(n>>1)+56,ce[2]=(e&7)<<5|t>>3,ce[1]=t<<5,ce[0]=0,ve[0]}new Array(4096);class Y{constructor(t,n){this.value=t,this.tag=n}}_[0]=e=>new Date(e);_[1]=e=>new Date(Math.round(e*1e3));_[2]=e=>{let t=BigInt(0);for(let n=0,f=e.byteLength;n<f;n++)t=BigInt(e[n])+t<<BigInt(8);return t};_[3]=e=>BigInt(-1)-_[2](e);_[4]=e=>+(e[1]+"e"+e[0]);_[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const Ie=(e,t)=>{e=e-57344;let n=B[e];n&&n.isShared&&((B.restoreStructures||(B.restoreStructures=[]))[e]=n),B[e]=t,t.read=Oe(t)};_[it]=e=>{let t=e.length,n=e[1];Ie(e[0],n);let f={};for(let l=2;l<t;l++){let a=n[l-2];f[L(a)]=e[l]}return f};_[14]=e=>V?V[0].slice(V.position0,V.position0+=e):new Y(e,14);_[15]=e=>V?V[1].slice(V.position1,V.position1+=e):new Y(e,15);let ct={Error,RegExp};_[27]=e=>(ct[e[0]]||Error)(e[1],e[2]);const et=e=>{if(y[o++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let t=e();return N=N?t.concat(N.slice(t.length)):t,N.prefixes=e(),N.suffixes=e(),e()};et.handlesRead=!0;_[51]=et;_[Pe]=e=>{if(!N)if(E.getShared)_e();else return new Y(e,Pe);if(typeof e=="number")return N[16+(e>=0?2*e:-2*e-1)];throw new Error("No support for non-integer packed references yet")};_[28]=e=>{z||(z=new Map,z.id=0);let t=z.id++,n=y[o],f;n>>5==4?f=[]:f={};let l={target:f};z.set(t,l);let a=e();return l.used?Object.assign(f,a):(l.target=a,a)};_[28].handlesRead=!0;_[29]=e=>{let t=z.get(e);return t.used=!0,t.target};_[258]=e=>new Set(e);(_[259]=e=>(E.mapsAsObjects&&(E.mapsAsObjects=!1,ie=!0),e())).handlesRead=!0;function ee(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function Z(){if(!N)if(E.getShared)_e();else throw new Error("No packed values available");return N}const dt=1399353956;Ue.push((e,t)=>{if(e>=225&&e<=255)return ee(Z().prefixes[e-224],t);if(e>=28704&&e<=32767)return ee(Z().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return ee(Z().prefixes[e-1879048192],t);if(e>=216&&e<=223)return ee(t,Z().suffixes[e-216]);if(e>=27647&&e<=28671)return ee(t,Z().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return ee(t,Z().suffixes[e-1811939328]);if(e==dt)return{packedValues:N,structures:B.slice(0),version:t};if(e==55799)return t});const ht=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,Je=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],xt=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<Je.length;e++)yt(Je[e],xt[e]);function yt(e,t){let n="get"+e.name.slice(0,-5),f;typeof e=="function"?f=e.BYTES_PER_ELEMENT:e=null;for(let l=0;l<2;l++){if(!l&&f==1)continue;let a=f==2?1:f==4?2:3;_[l?t:t-4]=f==1||l==ht?d=>{if(!e)throw new Error("Could not find typed array for code "+t);return new e(Uint8Array.prototype.slice.call(d,0).buffer)}:d=>{if(!e)throw new Error("Could not find typed array for code "+t);let m=new DataView(d.buffer,d.byteOffset,d.byteLength),p=d.length>>a,M=new e(p),O=m[n];for(let R=0;R<p;R++)M[R]=O.call(m,R<<a,l);return M}}}function pt(){let e=te(),t=o+A();for(let f=2;f<e;f++){let l=te();o+=l}let n=o;return o=t,V=[Me(te()),Me(te())],V.position0=0,V.position1=0,V.postBundlePosition=o,o=n,A()}function te(){let e=y[o++]&31;if(e>23)switch(e){case 24:e=y[o++];break;case 25:e=j.getUint16(o),o+=2;break;case 26:e=j.getUint32(o),o+=4;break}return e}function _e(){if(E.getShared){let e=tt(()=>(y=null,E.getShared()))||{},t=e.structures||[];E.sharedVersion=e.version,N=E.sharedValues=e.packedValues,B===!0?E.structures=B=t:B.splice.apply(B,[0,t.length].concat(t))}}function tt(e){let t=X,n=o,f=ye,l=se,a=xe,d=z,m=V,p=new Uint8Array(y.slice(0,X)),M=B,O=E,R=fe,F=e();return X=t,o=n,ye=f,se=l,xe=a,z=d,V=m,y=p,fe=R,B=M,E=O,j=new DataView(y.buffer,y.byteOffset,y.byteLength),F}function Be(){y=null,z=null,B=null}const De=new Array(147);for(let e=0;e<256;e++)De[e]=+("1e"+Math.floor(45.15-e*.30103));let Ve=new le({useRecords:!1});Ve.decode;Ve.decodeMultiple;let de;try{de=new TextEncoder}catch{}let Re,rt;const pe=typeof globalThis=="object"&&globalThis.Buffer,ae=typeof pe<"u",Se=ae?pe.allocUnsafeSlow:Uint8Array,We=ae?pe:Uint8Array,He=256,$e=ae?4294967296:2144337920;let me,i,I,r=0,q,D=null;const gt=61440,wt=/[\u0080-\uFFFF]/,K=Symbol("record-id");class bt extends le{constructor(t){super(t),this.offset=0;let n,f,l,a,d;t=t||{};let m=We.prototype.utf8Write?function(s,x,c){return i.utf8Write(s,x,c)}:de&&de.encodeInto?function(s,x){return de.encodeInto(s,i.subarray(x)).written}:!1,p=this,M=t.structures||t.saveStructures,O=t.maxSharedStructures;if(O==null&&(O=M?128:0),O>8190)throw new Error("Maximum maxSharedStructure is 8190");let R=t.sequential;R&&(O=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let F,P,J=t.sharedValues,C;if(J){C=Object.create(null);for(let s=0,x=J.length;s<x;s++)C[J[s]]=s}let $=[],ge=0,oe=0;this.mapEncode=function(s,x){if(this._keyMap&&!this._mapped)switch(s.constructor.name){case"Array":s=s.map(c=>this.encodeKeys(c));break}return this.encode(s,x)},this.encode=function(s,x){if(i||(i=new Se(8192),I=new DataView(i.buffer,0,8192),r=0),q=i.length-10,q-r<2048?(i=new Se(i.length),I=new DataView(i.buffer,0,i.length),q=i.length-10,r=0):x===Xe&&(r=r+7&2147483640),n=r,p.useSelfDescribedHeader&&(I.setUint32(r,3654940416),r+=3),d=p.structuredClone?new Map:null,p.bundleStrings&&typeof s!="string"?(D=[],D.size=1/0):D=null,f=p.structures,f){if(f.uninitialized){let h=p.getShared()||{};p.structures=f=h.structures||[],p.sharedVersion=h.version;let u=p.sharedValues=h.packedValues;if(u){C={};for(let g=0,w=u.length;g<w;g++)C[u[g]]=g}}let c=f.length;if(c>O&&!R&&(c=O),!f.transitions){f.transitions=Object.create(null);for(let h=0;h<c;h++){let u=f[h];if(!u)continue;let g,w=f.transitions;for(let b=0,S=u.length;b<S;b++){w[K]===void 0&&(w[K]=h);let k=u[b];g=w[k],g||(g=w[k]=Object.create(null)),w=g}w[K]=h|1048576}}R||(f.nextId=c)}if(l&&(l=!1),a=f||[],P=C,t.pack){let c=new Map;if(c.values=[],c.encoder=p,c.maxValues=t.maxPrivatePackedValues||(C?16:1/0),c.objectMap=C||!1,c.samplingPackedValues=F,he(s,c),c.values.length>0){i[r++]=216,i[r++]=51,H(4);let h=c.values;U(h),H(0),H(0),P=Object.create(C||null);for(let u=0,g=h.length;u<g;u++)P[h[u]]=u}}me=x&Ee;try{if(me)return;if(U(s),D&&Ze(n,U),p.offset=r,d&&d.idsToInsert){r+=d.idsToInsert.length*2,r>q&&re(r),p.offset=r;let c=At(i.subarray(n,r),d.idsToInsert);return d=null,c}return x&Xe?(i.start=n,i.end=r,i):i.subarray(n,r)}finally{if(f){if(oe<10&&oe++,f.length>O&&(f.length=O),ge>1e4)f.transitions=null,oe=0,ge=0,$.length>0&&($=[]);else if($.length>0&&!R){for(let c=0,h=$.length;c<h;c++)$[c][K]=void 0;$=[]}}if(l&&p.saveShared){p.structures.length>O&&(p.structures=p.structures.slice(0,O));let c=i.subarray(n,r);return p.updateSharedData()===!1?p.encode(s):c}x&Et&&(r=n)}},this.findCommonStringsToPack=()=>(F=new Map,C||(C=Object.create(null)),s=>{let x=s&&s.threshold||4,c=this.pack?s.maxPrivatePackedValues||16:0;J||(J=this.sharedValues=[]);for(let[h,u]of F)u.count>x&&(C[h]=c++,J.push(h),l=!0);for(;this.saveShared&&this.updateSharedData()===!1;);F=null});const U=s=>{r>q&&(i=re(r));var x=typeof s,c;if(x==="string"){if(P){let w=P[s];if(w>=0){w<16?i[r++]=w+224:(i[r++]=198,w&1?U(15-w>>1):U(w-16>>1));return}else if(F&&!t.pack){let b=F.get(s);b?b.count++:F.set(s,{count:1})}}let h=s.length;if(D&&h>=4&&h<1024){if((D.size+=h)>gt){let b,S=(D[0]?D[0].length*3+D[1].length:0)+10;r+S>q&&(i=re(r+S)),i[r++]=217,i[r++]=223,i[r++]=249,i[r++]=D.position?132:130,i[r++]=26,b=r-n,r+=4,D.position&&Ze(n,U),D=["",""],D.size=0,D.position=b}let w=wt.test(s);D[w?0:1]+=s,i[r++]=w?206:207,U(h);return}let u;h<32?u=1:h<256?u=2:h<65536?u=3:u=5;let g=h*3;if(r+g>q&&(i=re(r+g)),h<64||!m){let w,b,S,k=r+u;for(w=0;w<h;w++)b=s.charCodeAt(w),b<128?i[k++]=b:b<2048?(i[k++]=b>>6|192,i[k++]=b&63|128):(b&64512)===55296&&((S=s.charCodeAt(w+1))&64512)===56320?(b=65536+((b&1023)<<10)+(S&1023),w++,i[k++]=b>>18|240,i[k++]=b>>12&63|128,i[k++]=b>>6&63|128,i[k++]=b&63|128):(i[k++]=b>>12|224,i[k++]=b>>6&63|128,i[k++]=b&63|128);c=k-r-u}else c=m(s,r+u,g);c<24?i[r++]=96|c:c<256?(u<2&&i.copyWithin(r+2,r+1,r+1+c),i[r++]=120,i[r++]=c):c<65536?(u<3&&i.copyWithin(r+3,r+2,r+2+c),i[r++]=121,i[r++]=c>>8,i[r++]=c&255):(u<5&&i.copyWithin(r+5,r+3,r+3+c),i[r++]=122,I.setUint32(r,c),r+=4),r+=c}else if(x==="number")if(!this.alwaysUseFloat&&s>>>0===s)s<24?i[r++]=s:s<256?(i[r++]=24,i[r++]=s):s<65536?(i[r++]=25,i[r++]=s>>8,i[r++]=s&255):(i[r++]=26,I.setUint32(r,s),r+=4);else if(!this.alwaysUseFloat&&s>>0===s)s>=-24?i[r++]=31-s:s>=-256?(i[r++]=56,i[r++]=~s):s>=-65536?(i[r++]=57,I.setUint16(r,~s),r+=2):(i[r++]=58,I.setUint32(r,~s),r+=4);else{let h;if((h=this.useFloat32)>0&&s<4294967296&&s>=-2147483648){i[r++]=250,I.setFloat32(r,s);let u;if(h<4||(u=s*De[(i[r]&127)<<1|i[r+1]>>7])>>0===u){r+=4;return}else r--}i[r++]=251,I.setFloat64(r,s),r+=8}else if(x==="object")if(!s)i[r++]=246;else{if(d){let u=d.get(s);if(u){if(i[r++]=216,i[r++]=29,i[r++]=25,!u.references){let g=d.idsToInsert||(d.idsToInsert=[]);u.references=[],g.push(u)}u.references.push(r-n),r+=2;return}else d.set(s,{offset:r-n})}let h=s.constructor;if(h===Object)we(s,!0);else if(h===Array){c=s.length,c<24?i[r++]=128|c:H(c);for(let u=0;u<c;u++)U(s[u])}else if(h===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(i[r++]=217,i[r++]=1,i[r++]=3),c=s.size,c<24?i[r++]=160|c:c<256?(i[r++]=184,i[r++]=c):c<65536?(i[r++]=185,i[r++]=c>>8,i[r++]=c&255):(i[r++]=186,I.setUint32(r,c),r+=4),p.keyMap)for(let[u,g]of s)U(p.encodeKey(u)),U(g);else for(let[u,g]of s)U(u),U(g);else{for(let u=0,g=Re.length;u<g;u++){let w=rt[u];if(s instanceof w){let b=Re[u],S=b.tag;S==null&&(S=b.getTag&&b.getTag.call(this,s)),S<24?i[r++]=192|S:S<256?(i[r++]=216,i[r++]=S):S<65536?(i[r++]=217,i[r++]=S>>8,i[r++]=S&255):S>-1&&(i[r++]=218,I.setUint32(r,S),r+=4),b.encode.call(this,s,U,re);return}}if(s[Symbol.iterator]){if(me){let u=new Error("Iterable should be serialized as iterator");throw u.iteratorNotHandled=!0,u}i[r++]=159;for(let u of s)U(u);i[r++]=255;return}if(s[Symbol.asyncIterator]||Ae(s)){let u=new Error("Iterable/blob should be serialized as iterator");throw u.iteratorNotHandled=!0,u}if(this.useToJSON&&s.toJSON){const u=s.toJSON();if(u!==s)return U(u)}we(s,!s.hasOwnProperty)}}else if(x==="boolean")i[r++]=s?245:244;else if(x==="bigint"){if(s<BigInt(1)<<BigInt(64)&&s>=0)i[r++]=27,I.setBigUint64(r,s);else if(s>-(BigInt(1)<<BigInt(64))&&s<0)i[r++]=59,I.setBigUint64(r,-s-BigInt(1));else if(this.largeBigIntToFloat)i[r++]=251,I.setFloat64(r,Number(s));else throw new RangeError(s+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");r+=8}else if(x==="undefined")i[r++]=247;else throw new Error("Unknown type: "+x)},we=this.useRecords===!1?this.variableMapSize?s=>{let x=Object.keys(s),c=Object.values(s),h=x.length;if(h<24?i[r++]=160|h:h<256?(i[r++]=184,i[r++]=h):h<65536?(i[r++]=185,i[r++]=h>>8,i[r++]=h&255):(i[r++]=186,I.setUint32(r,h),r+=4),p.keyMap)for(let u=0;u<h;u++)U(p.encodeKey(x[u])),U(c[u]);else for(let u=0;u<h;u++)U(x[u]),U(c[u])}:(s,x)=>{i[r++]=185;let c=r-n;r+=2;let h=0;if(p.keyMap)for(let u in s)(x||s.hasOwnProperty(u))&&(U(p.encodeKey(u)),U(s[u]),h++);else for(let u in s)(x||s.hasOwnProperty(u))&&(U(u),U(s[u]),h++);i[c+++n]=h>>8,i[c+n]=h&255}:(s,x)=>{let c,h=a.transitions||(a.transitions=Object.create(null)),u=0,g=0,w,b;if(this.keyMap){b=Object.keys(s).map(k=>this.encodeKey(k)),g=b.length;for(let k=0;k<g;k++){let Ne=b[k];c=h[Ne],c||(c=h[Ne]=Object.create(null),u++),h=c}}else for(let k in s)(x||s.hasOwnProperty(k))&&(c=h[k],c||(h[K]&1048576&&(w=h[K]&65535),c=h[k]=Object.create(null),u++),h=c,g++);let S=h[K];if(S!==void 0)S&=65535,i[r++]=217,i[r++]=S>>8|224,i[r++]=S&255;else if(b||(b=h.__keys__||(h.__keys__=Object.keys(s))),w===void 0?(S=a.nextId++,S||(S=0,a.nextId=1),S>=He&&(a.nextId=(S=O)+1)):S=w,a[S]=b,S<O){i[r++]=217,i[r++]=S>>8|224,i[r++]=S&255,h=a.transitions;for(let k=0;k<g;k++)(h[K]===void 0||h[K]&1048576)&&(h[K]=S),h=h[b[k]];h[K]=S|1048576,l=!0}else{if(h[K]=S,I.setUint32(r,3655335680),r+=3,u&&(ge+=oe*u),$.length>=He-O&&($.shift()[K]=void 0),$.push(h),H(g+2),U(57344+S),U(b),x===null)return;for(let k in s)(x||s.hasOwnProperty(k))&&U(s[k]);return}if(g<24?i[r++]=128|g:H(g),x!==null)for(let k in s)(x||s.hasOwnProperty(k))&&U(s[k])},re=s=>{let x;if(s>16777216){if(s-n>$e)throw new Error("Encoded buffer would be larger than maximum buffer size");x=Math.min($e,Math.round(Math.max((s-n)*(s>67108864?1.25:2),4194304)/4096)*4096)}else x=(Math.max(s-n<<2,i.length-1)>>12)+1<<12;let c=new Se(x);return I=new DataView(c.buffer,0,x),i.copy?i.copy(c,0,n,s):c.set(i.slice(n,s)),r-=n,n=0,q=c.length-10,i=c};let G=100,Fe=1e3;this.encodeAsIterable=function(s,x){return je(s,x,Q)},this.encodeAsAsyncIterable=function(s,x){return je(s,x,Ce)};function*Q(s,x,c){let h=s.constructor;if(h===Object){let u=p.useRecords!==!1;u?we(s,null):qe(Object.keys(s).length,160);for(let g in s){let w=s[g];u||U(g),w&&typeof w=="object"?x[g]?yield*Q(w,x[g]):yield*be(w,x,g):U(w)}}else if(h===Array){let u=s.length;H(u);for(let g=0;g<u;g++){let w=s[g];w&&(typeof w=="object"||r-n>G)?x.element?yield*Q(w,x.element):yield*be(w,x,"element"):U(w)}}else if(s[Symbol.iterator]){i[r++]=159;for(let u of s)u&&(typeof u=="object"||r-n>G)?x.element?yield*Q(u,x.element):yield*be(u,x,"element"):U(u);i[r++]=255}else Ae(s)?(qe(s.size,64),yield i.subarray(n,r),yield s,ne()):s[Symbol.asyncIterator]?(i[r++]=159,yield i.subarray(n,r),yield s,ne(),i[r++]=255):U(s);c&&r>n?yield i.subarray(n,r):r-n>G&&(yield i.subarray(n,r),ne())}function*be(s,x,c){let h=r-n;try{U(s),r-n>G&&(yield i.subarray(n,r),ne())}catch(u){if(u.iteratorNotHandled)x[c]={},r=n+h,yield*Q.call(this,s,x[c]);else throw u}}function ne(){G=Fe,p.encode(null,Ee)}function je(s,x,c){return x&&x.chunkThreshold?G=Fe=x.chunkThreshold:G=100,s&&typeof s=="object"?(p.encode(null,Ee),c(s,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(s)]}async function*Ce(s,x){for(let c of Q(s,x,!0)){let h=c.constructor;if(h===We||h===Uint8Array)yield c;else if(Ae(c)){let u=c.stream().getReader(),g;for(;!(g=await u.read()).done;)yield g.value}else if(c[Symbol.asyncIterator])for await(let u of c)ne(),u?yield*Ce(u,x.async||(x.async={})):yield p.encode(u);else yield c}}}useBuffer(t){i=t,I=new DataView(i.buffer,i.byteOffset,i.byteLength),r=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let n=this.structures.slice(0),f=new nt(n,this.sharedValues,this.sharedVersion),l=this.saveShared(f,a=>(a&&a.version||0)==t);return l===!1?(f=this.getShared()||{},this.structures=f.structures||[],this.sharedValues=f.packedValues,this.sharedVersion=f.version,this.structures.nextId=this.structures.length):n.forEach((a,d)=>this.structures[d]=a),l}}function qe(e,t){e<24?i[r++]=t|e:e<256?(i[r++]=t|24,i[r++]=e):e<65536?(i[r++]=t|25,i[r++]=e>>8,i[r++]=e&255):(i[r++]=t|26,I.setUint32(r,e),r+=4)}class nt{constructor(t,n,f){this.structures=t,this.packedValues=n,this.version=f}}function H(e){e<24?i[r++]=128|e:e<256?(i[r++]=152,i[r++]=e):e<65536?(i[r++]=153,i[r++]=e>>8,i[r++]=e&255):(i[r++]=154,I.setUint32(r,e),r+=4)}const St=typeof Blob>"u"?function(){}:Blob;function Ae(e){if(e instanceof St)return!0;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function he(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let f=t.get(e);if(f)++f.count==2&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let l=t.samplingPackedValues.get(e);l?l.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let f=0,l=e.length;f<l;f++)he(e[f],t);else{let f=!t.encoder.useRecords;for(var n in e)e.hasOwnProperty(n)&&(f&&he(n,t),he(e[n],t))}break;case"function":console.log(e)}}const mt=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;rt=[Date,Set,Error,RegExp,Y,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,nt];Re=[{tag:1,encode(e,t){let n=e.getTime()/1e3;(this.useTimestamp32||e.getMilliseconds()===0)&&n>=0&&n<4294967296?(i[r++]=26,I.setUint32(r,n),r+=4):(i[r++]=251,I.setFloat64(r,n),r+=8)}},{tag:258,encode(e,t){let n=Array.from(e);t(n)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,n){Ge(e,n)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||ae&&this.tagUint8Array!==!1))return 64},encode(e,t,n){Ge(e,n)}},W(68,1),W(69,2),W(70,4),W(71,8),W(72,1),W(77,2),W(78,4),W(79,8),W(85,4),W(86,8),{encode(e,t){let n=e.packedValues||[],f=e.structures||[];if(n.values.length>0){i[r++]=216,i[r++]=51,H(4);let l=n.values;t(l),H(0),H(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,d=l.length;a<d;a++)packedObjectMap[l[a]]=a}if(f){I.setUint32(r,3655335424),r+=3;let l=f.slice(0);l.unshift(57344),l.push(new Y(e.version,1399353956)),t(l)}else t(new Y(e.version,1399353956))}}];function W(e,t){return!mt&&t>1&&(e-=4),{tag:e,encode:function(f,l){let a=f.byteLength,d=f.byteOffset||0,m=f.buffer||f;l(ae?pe.from(m,d,a):new Uint8Array(m,d,a))}}}function Ge(e,t){let n=e.byteLength;n<24?i[r++]=64+n:n<256?(i[r++]=88,i[r++]=n):n<65536?(i[r++]=89,i[r++]=n>>8,i[r++]=n&255):(i[r++]=90,I.setUint32(r,n),r+=4),r+n>=i.length&&t(r+n),i.set(e.buffer?e:new Uint8Array(e),r),r+=n}function At(e,t){let n,f=t.length*2,l=e.length-f;t.sort((a,d)=>a.offset>d.offset?1:-1);for(let a=0;a<t.length;a++){let d=t[a];d.id=a;for(let m of d.references)e[m++]=a>>8,e[m]=a&255}for(;n=t.pop();){let a=n.offset;e.copyWithin(a+f,a,l),f-=2;let d=a+f;e[d++]=216,e[d++]=28,l=a}return e}function Ze(e,t){I.setUint32(D.position+e,r-D.position-e+1);let n=D;D=null,t(n[0]),t(n[1])}let Te=new bt({useRecords:!1});Te.encode;Te.encodeAsIterable;Te.encodeAsAsyncIterable;const Xe=512,Et=1024,Ee=2048;export{bt as E};
