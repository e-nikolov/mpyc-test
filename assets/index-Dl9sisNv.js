import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */import{g as En,c as Dr,e as _o}from"./eruda-f6XDUB5I.js";import"./encode-GRFFunDQ.js";import{p as Uh}from"./purify.es-DJ3P3QYY.js";import{x as Xh}from"./xterm-HQbOejv0.js";import{H as Yh,a as Vh}from"./html5QRcode-A3jLwCd8.js";import{$ as te,b as Gh,a as Hh}from"./browser-Yj3kU_A-.js";import{P as Zh,N as Jh,a as Kh,D as eu,b as Tn,T as Jr,I as za,s as tu,t as x,L as ru,c as iu,i as su,d as nu,e as ou,f as hs,g as au,h as cu,j as lu,k as hu,l as ct,E as Ua,H as uu,m as du,n as fu,o as pu,p as mo,q as gu,r as _u,u as mu,v as Ou,w as vu,x as yu,y as bu,z as Cu}from"./codemirror-y86HkE-e.js";function xu(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in r)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var Du={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1702360039359,time:"12/12/2023, 06:47:19",revision:"11976cc"};document.title=`MPyC Web (${Du.deployment})`;var Su={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1702360039359,time:"12/12/2023, 06:47:19",revision:"11976cc"};function wu(){let r=Su;console.log("buildInfo",r);let e=document.querySelector("#version");e.innerText=`v${r.version}-${r.revision}`,e.innerText+="-dirty",e.innerText+=` (${r.time})`}wu();const mt=new WeakMap,Pt=new WeakMap,ut=new WeakMap;var Eu={};const di=Symbol("anyProducer"),Oo=Promise.resolve(),fi=Symbol("listenerAdded"),pi=Symbol("listenerRemoved");let gi=!1,us=!1;function Wt(r){if(typeof r!="string"&&typeof r!="symbol"&&typeof r!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Br(r){if(typeof r!="function")throw new TypeError("listener must be a function")}function jt(r,e){const t=Pt.get(r);if(t.has(e))return t.get(e)}function vr(r,e){const t=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:di,i=ut.get(r);if(i.has(t))return i.get(t)}function Tu(r,e,t){const i=ut.get(r);if(i.has(e))for(const s of i.get(e))s.enqueue(t);if(i.has(di)){const s=Promise.all([e,t]);for(const a of i.get(di))a.enqueue(s)}}function vo(r,e){e=Array.isArray(e)?e:[e];let t=!1,i=()=>{},s=[];const a={enqueue(o){s.push(o),i()},finish(){t=!0,i()}};for(const o of e){let n=vr(r,o);n||(n=new Set,ut.get(r).set(o,n)),n.add(a)}return{async next(){return s?s.length===0?t?(s=void 0,this.next()):(await new Promise(o=>{i=o}),this.next()):{done:!1,value:await s.shift()}:{done:!0}},async return(o){s=void 0;for(const n of e){const c=vr(r,n);c&&(c.delete(a),c.size===0&&ut.get(r).delete(n))}return i(),arguments.length>0?{done:!0,value:await o}:{done:!0}},[Symbol.asyncIterator](){return this}}}function yo(r){if(r===void 0)return bo;if(!Array.isArray(r))throw new TypeError("`methodNames` must be an array of strings");for(const e of r)if(!bo.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return r}const Yt=r=>r===fi||r===pi;function Qr(r,e,t){if(Yt(e))try{gi=!0,r.emit(e,t)}finally{gi=!1}}class it{static mixin(e,t){return t=yo(t),i=>{if(typeof i!="function")throw new TypeError("`target` must be function");for(const o of t)if(i.prototype[o]!==void 0)throw new Error(`The property \`${o}\` already exists on \`target\``);function s(){return Object.defineProperty(this,e,{enumerable:!1,value:new it}),this[e]}Object.defineProperty(i.prototype,e,{enumerable:!1,get:s});const a=o=>function(...n){return this[e][o](...n)};for(const o of t)Object.defineProperty(i.prototype,o,{enumerable:!1,value:a(o)});return i}}static get isDebugEnabled(){if(typeof Eu!="object")return us;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||us}static set isDebugEnabled(e){us=e}constructor(e={}){mt.set(this,new Set),Pt.set(this,new Map),ut.set(this,new Map),ut.get(this).set(di,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,i,s,a)=>{try{a=JSON.stringify(a)}catch{a=`Object with the following keys failed to stringify: ${Object.keys(a).join(",")}`}(typeof s=="symbol"||typeof s=="number")&&(s=s.toString());const o=new Date,n=`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}.${o.getMilliseconds()}`;console.log(`[${n}][emittery:${t}][${i}] Event Name: ${s}
	data: ${a}`)})}logIfDebugEnabled(e,t,i){(it.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,i)}on(e,t){Br(t),e=Array.isArray(e)?e:[e];for(const i of e){Wt(i);let s=jt(this,i);s||(s=new Set,Pt.get(this).set(i,s)),s.add(t),this.logIfDebugEnabled("subscribe",i,void 0),Yt(i)||Qr(this,fi,{eventName:i,listener:t})}return this.off.bind(this,e,t)}off(e,t){Br(t),e=Array.isArray(e)?e:[e];for(const i of e){Wt(i);const s=jt(this,i);s&&(s.delete(t),s.size===0&&Pt.get(this).delete(i)),this.logIfDebugEnabled("unsubscribe",i,void 0),Yt(i)||Qr(this,pi,{eventName:i,listener:t})}}once(e){let t;const i=new Promise(s=>{t=this.on(e,a=>{t(),s(a)})});return i.off=t,i}events(e){e=Array.isArray(e)?e:[e];for(const t of e)Wt(t);return vo(this,e)}async emit(e,t){if(Wt(e),Yt(e)&&!gi)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,t),Tu(this,e,t);const i=jt(this,e)??new Set,s=mt.get(this),a=[...i],o=Yt(e)?[]:[...s];await Oo,await Promise.all([...a.map(async n=>{if(i.has(n))return n(t)}),...o.map(async n=>{if(s.has(n))return n(e,t)})])}async emitSerial(e,t){if(Wt(e),Yt(e)&&!gi)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,t);const i=jt(this,e)??new Set,s=mt.get(this),a=[...i],o=[...s];await Oo;for(const n of a)i.has(n)&&await n(t);for(const n of o)s.has(n)&&await n(e,t)}onAny(e){return Br(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),mt.get(this).add(e),Qr(this,fi,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return vo(this)}offAny(e){Br(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Qr(this,pi,{listener:e}),mt.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"||typeof t=="number"){const i=jt(this,t);i&&i.clear();const s=vr(this,t);if(s){for(const a of s)a.finish();s.clear()}}else{mt.get(this).clear();for(const[i,s]of Pt.get(this).entries())s.clear(),Pt.get(this).delete(i);for(const[i,s]of ut.get(this).entries()){for(const a of s)a.finish();s.clear(),ut.get(this).delete(i)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const i of e){if(typeof i=="string"){t+=mt.get(this).size+(jt(this,i)?.size??0)+(vr(this,i)?.size??0)+(vr(this)?.size??0);continue}typeof i<"u"&&Wt(i),t+=mt.get(this).size;for(const s of Pt.get(this).values())t+=s.size;for(const s of ut.get(this).values())t+=s.size}return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=yo(t);for(const i of t){if(e[i]!==void 0)throw new Error(`The property \`${i}\` already exists on \`target\``);Object.defineProperty(e,i,{enumerable:!1,value:this[i].bind(this)})}}}const bo=Object.getOwnPropertyNames(it.prototype).filter(r=>r!=="constructor");Object.defineProperty(it,"listenerAdded",{value:fi,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(it,"listenerRemoved",{value:pi,writable:!1,enumerable:!0,configurable:!1});const Pu=(r,e,t)=>{r.on(t,i=>{e.emit(`runtime:${t}`,i)})};class Au extends it{transport;peerIDToPID=new Map;pidToPeerID=new Map;peersReady=new Map;runtime;running=!1;runtimeFactory;transportFactory;env={};constructor(e,t,i={}){super(),this.transport=this.newTransport(e),this.runtime=this.newRuntime(t),this.env=i}newTransport(e){this.transportFactory=e,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const t=e();return this.addTransportEvents(t),t}newRuntime(e=this.runtimeFactory){this.runtimeFactory=e;const t=e();return this.addRuntimeEvents(t),t}addTransportEvents(e){e.on("ready",t=>{this.emit("transport:ready",t)}),e.on("closed",()=>{this.emit("transport:closed")}),e.on("error",t=>{this.emit("transport:error",t)}),e.on("conn:ready",t=>{this.emit("transport:conn:ready",t)}),e.on("conn:disconnected",t=>{this.emit("transport:conn:disconnected",t)}),e.on("conn:error",({peerID:t,err:i})=>{this.emit("transport:conn:error",{peerID:t,err:i})}),e.on("conn:data",({peerID:t,data:i})=>{switch(i.type){case"mpyc:ready":this.processReadyMessage(t,i.payload);break;case"mpyc:runtime":this.processRuntimeMessage(t,i.payload);break;default:this.emit("transport:conn:data:custom",{peerID:t,data:i})}})}addRuntimeEvents(e){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach(t=>{Pu(e,this,t)}),e.on("ready",()=>{this.emit("runtime:ready")}),e.on("send",({type:t,pid:i,payload:s})=>{this.sendMPCMessage(t,i,s)})}runMPC(e,t,i=!0){this.running=!0;let s=this.transport.getPeers(!0),a=s.findIndex(o=>o===this.transport.id());for(let o=0;o<s.length;o++)this.peerIDToPID.set(s[o],o),this.pidToPeerID.set(o,s[o]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:a,filename:t,parties:s,is_async:i,no_async:!i,code:e})}reset(e=this.transportFactory,t=this.runtimeFactory){this.resetTransport(e),this.resetRuntime(t)}resetTransport(e=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(e)}resetRuntime(e=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(e),this.running=!1}sendMPCMessage(e,t,i){let s=this.pidToPeerID.get(t);this.transport.send(s,`mpyc:${e}`,i)}processReadyMessage=(e,t)=>{if(this.peersReady.set(e,!0),!this.running){console.log("ignoring mpc ready message because we are not running");return}let i=this.peerIDToPID.get(e);this.runtime.processReadyMessage(i,t)};processRuntimeMessage=(e,t)=>{if(!this.running){console.log("ignoring mpc runtime message because we are not running");return}let i=this.peerIDToPID.get(e);this.runtime.processRuntimeMessage(i,t)}}const Xa=-1,zi=0,_i=1,mi=2,Pn=3,An=4,Rn=5,Ln=6,Ya=7,Va=8,Co=typeof self=="object"?self:globalThis,Ru=(r,e)=>{const t=(s,a)=>(r.set(a,s),s),i=s=>{if(r.has(s))return r.get(s);const[a,o]=e[s];switch(a){case zi:case Xa:return t(o,s);case _i:{const n=t([],s);for(const c of o)n.push(i(c));return n}case mi:{const n=t({},s);for(const[c,u]of o)n[i(c)]=i(u);return n}case Pn:return t(new Date(o),s);case An:{const{source:n,flags:c}=o;return t(new RegExp(n,c),s)}case Rn:{const n=t(new Map,s);for(const[c,u]of o)n.set(i(c),i(u));return n}case Ln:{const n=t(new Set,s);for(const c of o)n.add(i(c));return n}case Ya:{const{name:n,message:c}=o;return t(new Co[n](c),s)}case Va:return t(BigInt(o),s);case"BigInt":return t(Object(BigInt(o)),s)}return t(new Co[a](o),s)};return i},Lu=r=>Ru(new Map,r)(0),zt="",{toString:ku}={},{keys:$u}=Object,fr=r=>{const e=typeof r;if(e!=="object"||!r)return[zi,e];const t=ku.call(r).slice(8,-1);switch(t){case"Array":return[_i,zt];case"Object":return[mi,zt];case"Date":return[Pn,zt];case"RegExp":return[An,zt];case"Map":return[Rn,zt];case"Set":return[Ln,zt]}return t.includes("Array")?[_i,t]:t.includes("Error")?[Ya,t]:[mi,t]},qr=([r,e])=>r===zi&&(e==="function"||e==="symbol"),Mu=(r,e,t,i)=>{const s=(o,n)=>{const c=i.push(o)-1;return t.set(n,c),c},a=o=>{if(t.has(o))return t.get(o);let[n,c]=fr(o);switch(n){case zi:{let l=o;switch(c){case"bigint":n=Va,l=o.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+c);l=null;break;case"undefined":return s([Xa],o)}return s([n,l],o)}case _i:{if(c)return s([c,[...o]],o);const l=[],h=s([n,l],o);for(const p of o)l.push(a(p));return h}case mi:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const l=[],h=s([n,l],o);for(const p of $u(o))(r||!qr(fr(o[p])))&&l.push([a(p),a(o[p])]);return h}case Pn:return s([n,o.toISOString()],o);case An:{const{source:l,flags:h}=o;return s([n,{source:l,flags:h}],o)}case Rn:{const l=[],h=s([n,l],o);for(const[p,_]of o)(r||!(qr(fr(p))||qr(fr(_))))&&l.push([a(p),a(_)]);return h}case Ln:{const l=[],h=s([n,l],o);for(const p of o)(r||!qr(fr(p)))&&l.push(a(p));return h}}const{message:u}=o;return s([n,{name:c,message:u}],o)};return a},Fu=(r,{json:e,lossy:t}={})=>{const i=[];return Mu(!(e||t),!!e,new Map,i)(r),i};/*! (c) Andrea Giammarchi - ISC */const{parse:Iu,stringify:Bu}=JSON,Qu={json:!0,lossy:!0},qu=r=>Lu(Iu(r)),Nu=r=>Bu(Fu(r,Qu)),Wu=Object.freeze(Object.defineProperty({__proto__:null,parse:qu,stringify:Nu},Symbol.toStringTag,{value:"Module"})),Oi="4ee55850-17cb-4a85-a071-03fe2aa108bd",ju="M"+Oi,zu="T"+Oi,bt="array",Uu="bigint",Xu="boolean",xe="function",js="null",kn="number",dt="object",vi="string",Ui="symbol",Ga="undefined",Jt="apply",yi="construct",bi="defineProperty",zs="deleteProperty",Ci="get",Us="getOwnPropertyDescriptor",Xs="getPrototypeOf",xi="has",Ys="isExtensible",Vs="ownKeys",Gs="preventExtensions",Di="set",Hs="setPrototypeOf",Si="delete",Yu=r=>({value:new Promise(e=>{let t=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");t.onmessage=e,t.postMessage(r)})});/*! (c) Andrea Giammarchi - ISC */const{Int32Array:Zs,Map:xo,SharedArrayBuffer:Do,Uint16Array:Js}=globalThis,{BYTES_PER_ELEMENT:So}=Zs,{BYTES_PER_ELEMENT:Vu}=Js,{isArray:Gu}=Array,{notify:Hu,wait:Ha,waitAsync:Zu}=Atomics,Ju=(r,e,t)=>{for(;Ha(r,0,0,e)==="timed-out";)t()},Ks=new WeakSet,ds=new WeakMap,Ku={value:{then:r=>r()}};let ed=0;const $n=(r,{parse:e=JSON.parse,stringify:t=JSON.stringify,transform:i,interrupt:s}=JSON)=>{if(!ds.has(r)){const a=(h,...p)=>r.postMessage({[Oi]:p},{transfer:h}),o=typeof s===xe?s:s?.handler,n=s?.delay||42,c=new TextDecoder("utf-16"),u=(h,p)=>h?(Zu||Yu)(p,0):(o?Ju(p,n,o):Ha(p,0),Ku);let l=!1;ds.set(r,new Proxy(new xo,{[xi]:(h,p)=>typeof p=="string"&&!p.startsWith("_"),[Ci]:(h,p)=>p==="then"?null:(..._)=>{const g=ed++;let d=new Zs(new Do(So*2)),f=[];Ks.has(_.at(-1)||f)&&Ks.delete(f=_.pop()),a(f,g,d,p,i?_.map(i):_);const b=r!==globalThis;let y=0;return l&&b&&(y=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${p}(...args) is awaited`)),u(b,d).value.then(()=>{clearTimeout(y);const m=d[1];if(!m)return;const S=Vu*m;return d=new Zs(new Do(S+S%So)),a([],g,d),u(b,d).value.then(()=>e(c.decode(new Js(d.buffer).slice(0,m))))})},[Di](h,p,_){const g=typeof _;if(g!==xe)throw new Error(`Unable to assign ${p} as ${g}`);if(!h.size){const d=new xo;r.addEventListener("message",async f=>{const b=f.data?.[Oi];if(Gu(b)){f.stopImmediatePropagation();const[y,m,...S]=b;let E;if(S.length){const[D,P]=S;if(h.has(D)){l=!0;try{const O=await h.get(D)(...P);if(O!==void 0){const w=t(i?i(O):O);d.set(y,w),m[1]=w.length}}catch(O){E=O}finally{l=!1}}else E=new Error(`Unsupported action: ${D}`);m[0]=1}else{const D=d.get(y);d.delete(y);for(let P=new Js(m.buffer),O=0;O<D.length;O++)P[O]=D.charCodeAt(O)}if(Hu(m,0),E)throw E}})}return!!h.set(p,_)}}))}return ds.get(r)};$n.transfer=(...r)=>(Ks.add(r),r);const{isArray:Za}=Array,td=r=>r(),rd=(r,e)=>e,id=(r,e)=>({t:r,v:e}),sd=r=>nd.bind(r),wo=r=>typeof r===xe?td(r):r;function nd(){return this}const Te=(r,e)=>r===bt?[e]:id(r,e),Ja=(r,e=rd)=>{let t=typeof r,i=r;return t===dt&&(Za(r)?(t=bt,i=r.at(0)):{t,v:i}=r),e(t,i)},od=(r,e)=>r===xe?e:Te(r,e),ad=(r,e=od)=>{const t=r===null?js:typeof r;return e(t===dt&&Za(r)?bt:t,r)},cd=new FinalizationRegistry(([r,e,t])=>{t&&console.debug(`Held value ${String(e)} not relevant anymore`),r(e)}),Eo=Object.create(null),Ka=(r,e,{debug:t,return:i,token:s=r}=Eo)=>{const a=i||new Proxy(r,Eo),o=[a,[e,r,!!t]];return s!==!1&&o.push(s),cd.register(...o),a},{defineProperty:To,deleteProperty:ld,getOwnPropertyDescriptor:hd,getPrototypeOf:ec,isExtensible:ud,ownKeys:tc,preventExtensions:dd,set:fd,setPrototypeOf:pd}=Reflect,{assign:gd,create:_d}=Object,rc=ec(Int8Array),ic=(r,e)=>{const{get:t,set:i,value:s}=r;return t&&(r.get=e(t)),i&&(r.set=e(i)),s&&(r.value=e(s)),r},sc=r=>e=>ad(e,(t,i)=>{switch(t){case js:return Te(js,i);case dt:if(i===globalThis)return Te(t,null);case bt:case xe:return r(t,i);case Xu:case kn:case vi:case Ga:case Uu:return Te(t,i);case Ui:if(en.has(i))return Te(t,en.get(i))}throw new Error(`Unable to handle this ${t} type`)}),en=new Map(tc(Symbol).filter(r=>typeof Symbol[r]===Ui).map(r=>[Symbol[r],r])),nc=r=>{for(const[e,t]of en)if(t===r)return e},oc=r=>r,md=(r,e)=>{const t=e&&new WeakMap;if(e){const{addEventListener:s}=EventTarget.prototype;To(EventTarget.prototype,"addEventListener",{value(a,o,...n){return n.at(0)?.invoke&&(t.has(this)||t.set(this,new Map),t.get(this).set(a,[].concat(n[0].invoke)),delete n[0].invoke),s.call(this,a,o,...n)}})}const i=e&&(s=>{const{currentTarget:a,target:o,type:n}=s;for(const c of t.get(a||o)?.get(n)||[])s[c]()});return function(s,a,o,...n){let c=0,u=this?.transform||oc;const l=new Map,h=new Map,{[o]:p}=s,_=n.length?gd(_d(globalThis),...n):globalThis,g=sc((m,S)=>{if(!l.has(S)){let E;for(;h.has(E=c++););l.set(S,E),h.set(E,m===xe?S:u(S))}return Te(m,l.get(S))}),d=m=>{p(Si,Te(vi,m))},f=(m,S)=>{switch(m){case dt:if(S==null)return _;case bt:if(typeof S===kn)return h.get(S);if(!(S instanceof rc))for(const E in S)S[E]=b(S[E]);return S;case xe:if(typeof S===vi){if(!h.has(S)){const E=function(...D){return e&&D.at(0)instanceof Event&&i(...D),p(Jt,Te(xe,S),g(this),D.map(g))};return h.set(S,new WeakRef(E)),Ka(S,d,{return:E,token:!1})}return h.get(S).deref()}return h.get(S);case Ui:return nc(S)}return S},b=m=>Ja(m,f),y={[Jt]:(m,S,E)=>g(m.apply(S,E)),[yi]:(m,S)=>g(new m(...S)),[bi]:(m,S,E)=>g(To(m,S,E)),[zs]:(m,S)=>g(ld(m,S)),[Xs]:m=>g(ec(m)),[Ci]:(m,S)=>g(m[S]),[Us]:(m,S)=>{const E=hd(m,S);return E?Te(dt,ic(E,g)):Te(Ga,E)},[xi]:(m,S)=>g(S in m),[Ys]:m=>g(ud(m)),[Vs]:m=>Te(bt,tc(m).map(g)),[Gs]:m=>g(dd(m)),[Di]:(m,S,E)=>g(fd(m,S,E)),[Hs]:(m,S)=>g(pd(m,S)),[Si](m){l.delete(h.get(m)),h.delete(m)}};return s[a]=(m,S,...E)=>{switch(m){case Jt:E[0]=b(E[0]),E[1]=E[1].map(b);break;case yi:E[0]=E[0].map(b);break;case bi:{const[D,P]=E;E[0]=b(D);const{get:O,set:w,value:R}=P;O&&(P.get=b(O)),w&&(P.set=b(w)),R&&(P.value=b(R));break}default:E=E.map(b);break}return y[m](b(S),...E)},{proxy:s,[r.toLowerCase()]:_,[`is${r}Proxy`]:()=>!1}}},Od=md("Window",!0),vd=r=>{let e=0;const t=new Map,i=new Map,s=Symbol();return function(a,o,n){const c=this?.transform||oc,{[o]:u}=a,l=new Map,h=y=>{l.delete(y),u(Si,p(y))},p=sc((y,m)=>{if(s in m)return wo(m[s]);if(y===xe){if(m=c(m),!i.has(m)){let S;for(;i.has(S=String(e++)););t.set(m,S),i.set(S,m)}return Te(y,t.get(m))}if(!(m instanceof rc)){(y===dt||y===bt)&&(m=c(m));for(const S in m)m[S]=p(m[S])}return Te(y,m)}),_=(y,m,S)=>{if(!l.has(S)){const E=m===xe?sd(y):y,D=new Proxy(E,f);return l.set(S,new WeakRef(D)),Ka(S,h,{return:D,token:!1})}return l.get(S).deref()},g=y=>Ja(y,(m,S)=>{switch(m){case dt:if(S===null)return globalThis;case bt:return typeof S===kn?_(y,m,S):S;case xe:return typeof S===vi?i.get(S):_(y,m,S);case Ui:return nc(S)}return S}),d=(y,m,...S)=>g(u(y,wo(m),...S)),f={[Jt]:(y,m,S)=>d(Jt,y,p(m),S.map(p)),[yi]:(y,m)=>d(yi,y,m.map(p)),[bi]:(y,m,S)=>{const{get:E,set:D,value:P}=S;return typeof E===xe&&(S.get=p(E)),typeof D===xe&&(S.set=p(D)),typeof P===xe&&(S.value=p(P)),d(bi,y,p(m),S)},[zs]:(y,m)=>d(zs,y,p(m)),[Xs]:y=>d(Xs,y),[Ci]:(y,m)=>m===s?y:d(Ci,y,p(m)),[Us]:(y,m)=>{const S=d(Us,y,p(m));return S&&ic(S,g)},[xi]:(y,m)=>m===s||d(xi,y,p(m)),[Ys]:y=>d(Ys,y),[Vs]:y=>d(Vs,y).map(g),[Gs]:y=>d(Gs,y),[Di]:(y,m,S)=>d(Di,y,p(m),p(S)),[Hs]:(y,m)=>d(Hs,y,p(m))};a[n]=(y,m,S,E)=>{switch(y){case Jt:return g(m).apply(g(S),E.map(g));case Si:{const D=g(m);t.delete(i.get(D)),i.delete(D)}}};const b=new Proxy(Te(dt,null),f);return{[r.toLowerCase()]:b,[`is${r}Proxy`]:y=>typeof y===dt&&!!y&&s in y,proxy:a}}},yd=vd("Window"),bd=typeof Worker===xe?Worker:class{},fs=new WeakMap,ac=(r,...e)=>{const t=$n(r,...e);if(!fs.has(t)){const i=r instanceof bd?Od:yd;fs.set(t,i.call(e.at(0),t,ju,zu))}return fs.get(t)};ac.transfer=$n.transfer;const Cd=()=>new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="4ee55850-17cb-4a85-a071-03fe2aa108bd",d="M"+p,y="T"+p,h="array",g="function",w="null",m="number",b="object",v="string",$="symbol",S="undefined",E="apply",A="construct",P="defineProperty",k="deleteProperty",x="get",M="getOwnPropertyDescriptor",j="getPrototypeOf",T="has",_="isExtensible",O="ownKeys",W="preventExtensions",F="set",R="setPrototypeOf",B="delete";var J=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:I,Map:L,SharedArrayBuffer:D,Uint16Array:C}=globalThis,{BYTES_PER_ELEMENT:H}=I,{BYTES_PER_ELEMENT:N}=C,{isArray:U}=Array,{notify:z,wait:q,waitAsync:K}=Atomics,Y=new WeakSet,G=new WeakMap,V={value:{then:e=>e()}};let Q=0;const X=(e,{parse:t=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:s}=JSON)=>{if(!G.has(e)){const o=(t,...r)=>e.postMessage({[p]:r},{transfer:t}),a=typeof s===g?s:s?.handler,i=s?.delay||42,c=new TextDecoder("utf-16"),l=(e,t)=>e?(K||J)(t,0):(a?((e,t,r)=>{for(;"timed-out"===q(e,0,0,t);)r()})(t,i,a):q(t,0),V);let u=!1;G.set(e,new Proxy(new L,{[T]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[x]:(r,s)=>"then"===s?null:(...r)=>{const a=Q++;let i=new I(new D(2*H)),f=[];Y.has(r.at(-1)||f)&&Y.delete(f=r.pop()),o(f,a,i,s,n?r.map(n):r);const p=e!==globalThis;let d=0;return u&&p&&(d=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${s}(...args) is awaited`)),l(p,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const r=N*e;return i=new I(new D(r+r%H)),o([],a,i),l(p,i).value.then((()=>t(c.decode(new C(i.buffer).slice(0,e)))))}))},[F](t,s,o){const a=typeof o;if(a!==g)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new L;e.addEventListener("message",(async e=>{const o=e.data?.[p];if(U(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=r(n?n(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new C(i.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}if(z(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return G.get(e)};X.transfer=(...e)=>(Y.add(e),e);const{isArray:Z}=Array,ee=(e,t)=>t,te=e=>typeof e===g?(e=>e())(e):e;function re(){return this}const ne=(e,t)=>e===h?[t]:{t:e,v:t},se=(e,t=ee)=>{let r=typeof e,n=e;return r===b&&(Z(e)?(r=h,n=e.at(0)):({t:r,v:n}=e)),t(r,n)},oe=(e,t)=>e===g?t:ne(e,t),ae=(e,t=oe)=>{const r=null===e?w:typeof e;return t(r===b&&Z(e)?h:r,e)},ie=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),ce=Object.create(null),le=(e,t,{debug:r,return:n,token:s=e}=ce)=>{const o=n||new Proxy(e,ce),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),ie.register(...a),o},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:pe,getPrototypeOf:de,isExtensible:ye,ownKeys:he,preventExtensions:ge,set:we,setPrototypeOf:me}=Reflect,{assign:be,create:ve}=Object,$e=de(Int8Array),Se=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Ee=e=>t=>ae(t,((t,r)=>{switch(t){case w:return ne(w,r);case b:if(r===globalThis)return ne(t,null);case h:case g:return e(t,r);case"boolean":case m:case v:case S:case"bigint":return ne(t,r);case $:if(Ae.has(r))return ne(t,Ae.get(r))}throw new Error(`Unable to handle this ${t} type`)})),Ae=new Map(he(Symbol).filter((e=>typeof Symbol[e]===$)).map((e=>[Symbol[e],e]))),Pe=e=>{for(const[t,r]of Ae)if(r===e)return t},ke=e=>e;var xe=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,s,o,...a){let i=0,c=this?.transform||ke;const l=new Map,u=new Map,{[o]:f}=r,p=a.length?be(ve(globalThis),...a):globalThis,d=Ee(((e,t)=>{if(!l.has(t)){let r;for(;u.has(r=i++););l.set(t,r),u.set(r,e===g?t:c(t))}return ne(e,l.get(t))})),y=e=>{f(B,ne(v,e))},w=(e,r)=>{switch(e){case b:if(null==r)return p;case h:if(typeof r===m)return u.get(r);if(!(r instanceof $e))for(const e in r)r[e]=J(r[e]);return r;case g:if(typeof r===v){if(!u.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),f(E,ne(g,r),d(this),e.map(d))};return u.set(r,new WeakRef(e)),le(r,y,{return:e,token:!1})}return u.get(r).deref()}return u.get(r);case $:return Pe(r)}return r},J=e=>se(e,w),I={[E]:(e,t,r)=>d(e.apply(t,r)),[A]:(e,t)=>d(new e(...t)),[P]:(e,t,r)=>d(ue(e,t,r)),[k]:(e,t)=>d(fe(e,t)),[j]:e=>d(de(e)),[x]:(e,t)=>d(e[t]),[M]:(e,t)=>{const r=pe(e,t);return r?ne(b,Se(r,d)):ne(S,r)},[T]:(e,t)=>d(t in e),[_]:e=>d(ye(e)),[O]:e=>ne(h,he(e).map(d)),[W]:e=>d(ge(e)),[F]:(e,t,r)=>d(we(e,t,r)),[R]:(e,t)=>d(me(e,t)),[B](e){l.delete(u.get(e)),u.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case E:r[0]=J(r[0]),r[1]=r[1].map(J);break;case A:r[0]=r[0].map(J);break;case P:{const[e,t]=r;r[0]=J(e);const{get:n,set:s,value:o}=t;n&&(t.get=J(n)),s&&(t.set=J(s)),o&&(t.value=J(o));break}default:r=r.map(J)}return I[e](J(t),...r)},{proxy:r,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Me=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||ke,{[a]:l}=o,u=new Map,f=e=>{u.delete(e),l(B,p(e))},p=Ee(((e,o)=>{if(s in o)return te(o[s]);if(e===g){if(o=c(o),!n.has(o)){let e;for(;n.has(e=String(t++)););r.set(o,e),n.set(e,o)}return ne(e,r.get(o))}if(!(o instanceof $e)){e!==b&&e!==h||(o=c(o));for(const e in o)o[e]=p(o[e])}return ne(e,o)})),d=(e,t,r)=>{if(!u.has(r)){const n=t===g?(e=>re.bind(e))(e):e,s=new Proxy(n,S);return u.set(r,new WeakRef(s)),le(r,f,{return:s,token:!1})}return u.get(r).deref()},y=e=>se(e,((t,r)=>{switch(t){case b:if(null===r)return globalThis;case h:return typeof r===m?d(e,t,r):r;case g:return typeof r===v?n.get(r):d(e,t,r);case $:return Pe(r)}return r})),w=(e,t,...r)=>y(l(e,te(t),...r)),S={[E]:(e,t,r)=>w(E,e,p(t),r.map(p)),[A]:(e,t)=>w(A,e,t.map(p)),[P]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===g&&(r.get=p(n)),typeof s===g&&(r.set=p(s)),typeof o===g&&(r.value=p(o)),w(P,e,p(t),r)},[k]:(e,t)=>w(k,e,p(t)),[j]:e=>w(j,e),[x]:(e,t)=>t===s?e:w(x,e,p(t)),[M]:(e,t)=>{const r=w(M,e,p(t));return r&&Se(r,y)},[T]:(e,t)=>t===s||w(T,e,p(t)),[_]:e=>w(_,e),[O]:e=>w(O,e).map(y),[W]:e=>w(W,e),[F]:(e,t,r)=>w(F,e,p(t),p(r)),[R]:(e,t)=>w(R,e,p(t))};o[i]=(e,t,s,o)=>{switch(e){case E:return y(t).apply(y(s),o.map(y));case B:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const J=new Proxy(ne(b,null),S);return{[e.toLowerCase()]:J,[`is${e}Proxy`]:e=>typeof e===b&&!!e&&s in e,proxy:o}}})("Window"),je=typeof Worker===g?Worker:class{};const Te=new WeakMap,_e=(e,...t)=>{const r=X(e,...t);if(!Te.has(r)){const n=e instanceof je?xe:Me;Te.set(r,n.call(t.at(0),r,d,y))}return Te.get(r)};_e.transfer=X.transfer;const Oe={object(...e){return this.string(function(e){for(var t=e[0],r=1,n=arguments.length;r<n;r++)t+=arguments[r]+e[r];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const We=e=>e.arrayBuffer(),Fe=e=>e.json(),Re=e=>e.text(),Be=new WeakMap,Je=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Be.set(t,r),t}}},Ie=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Le=e=>{const t=e.split("/");return t.pop(),t.join("/")},De=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Ce=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},He=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Ne=(e,t)=>fetch(st(t,Ue.get(e))),Ue=new WeakMap,ze=(e,t,r)=>rt((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(Ve(n))return n.map((r=>({url:He([e,r]),path:He([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:He([t,s])}]}))})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),qe=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Ke=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),Ye=(e,t,r)=>rt((e=>{const t=new Map,r=new Set,n=[];for(const[s,o]of Object.entries(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Ke(o,t))}else{const e=Ke(s,t),a=qe(e,Ke(o||"./",t));if(r.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);r.add(a),n.push({url:e,path:a})}return n})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),Ge=(e,...t)=>Oe[typeof e](e,...t),{isArray:Ve}=Array,{assign:Qe,create:Xe,defineProperties:Ze,defineProperty:et,entries:tt}=Object,{all:rt,resolve:nt}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),st=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,ot=(e,t,r,n=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${r}`,{bubbles:!0,detail:{worker:n}}))},at=e=>Function(`\'use strict\';return (${e})`)(),it=(e,t,r)=>{e.registerJsModule(t,r)},ct=(e,t,...r)=>{try{return e.runPython(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},lt=async(e,t,...r)=>{try{return await e.runPythonAsync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},ut=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}};var ft={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=Je();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.files&&await Ye(this,a,t.files),t.fetch&&await ze(this,a,t.fetch),a},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const pt={dict_converter:Object.fromEntries};var dt={type:"pyodide",module:(e="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=Je(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.files&&await Ye(this,i,t.files),t.fetch&&await ze(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(pt):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const yt="ruby-wasm-wasi",ht=yt.replace(/\\W+/g,"_");var gt={type:yt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.files&&await Ye(this,o,t.files),t.fetch&&await ze(this,o,t.fetch),o},registerJSModule(e,t,r){const n=`__module_${ht}_${t}`;globalThis[n]=r,this.run(e,`require "js";$${t}=JS.global[:${n}]`),delete globalThis[n]},run:(e,t,...r)=>e.eval(Ge(t),...r),runAsync:(e,t,...r)=>e.evalAsync(Ge(t),...r),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${ht}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${yt}`)}};var wt={type:"wasmoon",module:(e="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=Je(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.files&&await Ye(this,a,r.files),r.fetch&&await ze(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{e.global.set(t,r)},run:(e,t,...r)=>{try{return e.doStringSync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runAsync:async(e,t,...r)=>{try{return await e.doString(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(De(e,Le(t)),t=Ce(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const mt=new Map,bt=new Map,vt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=mt.get(r),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{bt.set(t,e);for(const t of["files","fetch"]){const r=e?.[t];r&&Ue.set(r,o)}return s(n,e,r)}))}}),$t=e=>{for(const t of[].concat(e.type))mt.set(t,e)};for(const e of[ft,dt,gt,wt])$t(e);const St=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Et=(e,t,r={})=>{if(t){const[e,n]=(e=>{let t=typeof e;return"string"===t&&/\\.(json|toml|txt)$/.test(e)?t=RegExp.$1:e="./config.txt",[st(e),t]})(t);if("json"===n)r=fetch(e).then(Fe);else if("toml"===n)r=fetch(e).then(Re).then(St);else if("string"===n)try{r=JSON.parse(t)}catch(e){r=St(t)}else"object"===n&&t&&(r=t);t=e}return nt(r).then((r=>vt[e](r,t)))},At="BeforeRun",Pt="AfterRun",kt=[`code${At}`,`code${At}Async`,`code${Pt}`,`code${Pt}Async`],xt=["onWorker","onReady",`on${At}`,`on${At}Async`,`on${Pt}`,`on${Pt}Async`];function Mt(e,t){const{run:r,runAsync:n}=mt.get(this.type);return{...e,run:r.bind(this,t),runAsync:n.bind(this,t)}}const jt=(e,t,r,n,s,o)=>{if(s||o){const a=Mt.bind(e,t),i=n?"runAsync":"run",c=e[i];e[i]=n?async function(e,t,...n){s&&await s.call(this,a(e),r);const i=await c.call(this,e,t,...n);return o&&await o.call(this,a(e),r),i}:function(e,t,...n){s&&s.call(this,a(e),r);const i=c.call(this,e,t,...n);return o&&o.call(this,a(e),r),i}}};try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let Tt,_t,Ot;const Wt=(e,t)=>{addEventListener(e,t||(async t=>{try{await Tt,_t(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Ft,stringify:Rt}=f,{proxy:Bt,window:Jt,isWindowProxy:It}=_e(self,{parse:Ft,stringify:Rt,transform:e=>Ot?Ot(e):e}),Lt={sync:Bt,window:Jt,isWindowProxy:It,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Wt("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{Tt=(async()=>{try{const{id:s,tag:o,type:a,custom:i,version:c,config:l,async:u}=e,f=await Et(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(a,c),t,l),p=Xe(mt.get(a)),d=((e,t,r,n)=>({type:t,config:r,interpreter:n,io:Be.get(n),run:(t,...r)=>e.run(n,t,...r),runAsync:(t,...r)=>e.runAsync(n,t,...r),runEvent:(...t)=>e.runEvent(n,...t)}))(p,i||a,l,f);let y="run";if(u&&(y+="Async"),n){const e=((e,t)=>(r,n)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${n?r:t}\\n${n?t:r}`,...o)})(p,y);let t,r,s="",o="";for(const e of kt){const t=n[e];if(t){const r=e.endsWith("Async");(r&&u||!r&&!u)&&(e.startsWith("codeBefore")?s=t:o=t)}}o&&e(o,!1),s&&e(s,!0);for(const e of xt.slice(2)){const s=n[e];if(s){const n=e.endsWith("Async");if(n&&u||!n&&!u){const n=at(s);e.startsWith("onBefore")?t=n:r=n}}}jt(p,d,Lt,u,t,r)}const{CustomEvent:h,document:g}=Jt,w=s&&g.getElementById(s)||null,m=e=>ot(w,i||a,e,!0,h);let b="";return p.registerJSModule(f,"polyscript",{xworker:Lt,get target(){return!b&&w&&("SCRIPT"===o?w.after(Qe(g.createElement(`script-${i||a}`),{id:b=`${s}-target`})):(b=s,w.replaceChildren(),w.style.display="block")),b}}),_t=p.runEvent.bind(p,f),Ot=p.transform.bind(p,f),w&&m("ready"),n?.onReady&&at(n?.onReady).call(p,Mt.call(p,d,f),Lt),await p[y](f,r),w&&m("done"),f}catch(e){postMessage(e)}})(),Wt("error"),Wt("message"),Wt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),xd="modulepreload",Dd=function(r,e){return new URL(r,e).href},Po={},cc=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(a=>{if(a=Dd(a,i),a in Po)return;Po[a]=!0;const o=a.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(!!i)for(let l=s.length-1;l>=0;l--){const h=s[l];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${n}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":xd,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((l,h)=>{u.addEventListener("load",l),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,i=new this(function(s,a){e=s,t=a});return{resolve:e,reject:t,promise:i}});const lc=r=>r.arrayBuffer(),Sd=r=>r.json(),Mn=r=>r.text();function wd(r){for(var e=r[0],t=1,i=arguments.length;t<i;t++)e+=arguments[t]+r[t];return e}const Ed={object(...r){return this.string(wd(...r))},string(r){for(const e of r.split(/[\r\n]+/))if(e.trim().length){/^(\s+)/.test(e)&&(r=r.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return r}},Td=(r,...e)=>Ed[typeof r](r,...e),{replace:Pd}="",Ad=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,Rd={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},Ld=r=>Rd[r],kd=r=>Pd.call(r,Ad,Ld),st=Td,$d=kd,{isArray:Md}=Array,{assign:wi,create:Fn,defineProperties:Fd,defineProperty:Ei,entries:$1}=Object,{all:Xi,resolve:hc}=new Proxy(Promise,{get:(r,e)=>r[e].bind(r)}),uc=(r,e=location.href)=>new URL(r,e.replace(/^blob:/,"")).href;let Id=0;const dc=(r,e)=>({id:r.id||(r.id=`${e}-w${Id++}`),tag:r.tagName}),Ao=(r,e,t,i=!1,s=CustomEvent)=>{r.dispatchEvent(new s(`${e}:${t}`,{bubbles:!0,detail:{worker:i}}))},Bd=(r,e,t,i)=>({type:e,config:t,interpreter:i,io:vt.get(i),run:(s,...a)=>r.run(i,s,...a),runAsync:(s,...a)=>r.runAsync(i,s,...a),runEvent:(...s)=>r.runEvent(i,...s)}),Qd=(r,e)=>(t,i)=>{const s=r[e].bind(r);r[e]=(a,o,...n)=>s(a,`${i?t:o}
${i?o:t}`,...n)},vt=new WeakMap,In=r=>{const e=r||console,t={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...i)=>t.stderr(...i),stdout:(...i)=>t.stdout(...i),async get(i){const s=await i;return vt.set(s,t),s}}},fc=({FS:r,PATH:e,PATH_FS:t},i,s)=>{const a=t.resolve(i);return r.mkdirTree(e.dirname(a)),r.writeFile(a,new Uint8Array(s),{canOwn:!0})},qd=(r,e,t)=>(Wd(r,Nd(e)),e=jd(r,e),r.writeFile(e,new Uint8Array(t),{canOwn:!0})),Nd=r=>{const e=r.split("/");return e.pop(),e.join("/")},Wd=(r,e)=>{const t=[];for(const i of e.split("/"))i!=="."&&(t.push(i),i&&r.mkdir(t.join("/")))},jd=(r,e)=>{const t=[];for(const i of e.split("/"))switch(i){case"":break;case".":break;case"..":t.pop();break;default:t.push(i)}return[r.cwd()].concat(t).join("/").replace(/^\/+/,"/")},zd=r=>{for(const{files:e,to_file:t,from:i=""}of r){if(e!==void 0&&t!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(e===void 0&&t===void 0&&i.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${i}, please supply 'to_file' parameter.`)}return r.flatMap(({from:e="",to_folder:t=".",to_file:i,files:s})=>{if(Md(s))return s.map(o=>({url:ps([e,o]),path:ps([t,o])}));const a=i||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:ps([t,a])}]})},ps=r=>{const e=r.map(t=>t.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(t=>t!==""&&t!==".").join("/");return r[0].startsWith("/")?`/${e}`:e},pc=(r,e)=>fetch(uc(e,gc.get(r))),gc=new WeakMap,Yi=(r,e,t)=>Xi(zd(t).map(({url:i,path:s})=>pc(t,i).then(lc).then(a=>r.writeFile(e,s,a)))),Ud=(r,e)=>e.endsWith("/")?`${e}${r.split("/").pop()}`:e,gs=(r,e)=>r.replace(/\{.+?\}/g,t=>{if(!e.has(t))throw new SyntaxError(`Invalid template: ${t}`);return e.get(t)}),Xd=r=>{const e=new Map,t=new Set,i=[];for(const[s,a]of Object.entries(r))if(/^\{.+\}$/.test(s)){if(e.has(s))throw new SyntaxError(`Duplicated template: ${s}`);e.set(s,gs(a,e))}else{const o=gs(s,e),n=Ud(o,gs(a||"./",e));if(t.has(n))throw new SyntaxError(`Duplicated destination: ${n}`);t.add(n),i.push({url:o,path:n})}return i},Vi=(r,e,t)=>Xi(Xd(t).map(({url:i,path:s})=>pc(t,i).then(lc).then(a=>r.writeFile(e,s,a)))),_c=(r,e,t)=>{r.registerJsModule(e,t)},mc=(r,e,...t)=>{try{return r.runPython(st(e),...t)}catch(i){vt.get(r).stderr(i)}},Oc=async(r,e,...t)=>{try{return await r.runPythonAsync(st(e),...t)}catch(i){vt.get(r).stderr(i)}},vc=async(r,e,t)=>{const[i,...s]=e.split(".");let a=r.globals.get(i),o;for(const n of s)[o,a]=[a,a[n]];try{await a.call(o,t)}catch(n){vt.get(r).stderr(n)}},Yd="micropython",Vd={type:Yd,module:(r="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${r}/micropython.mjs`,async engine({loadMicroPython:r},e,t){const{stderr:i,stdout:s,get:a}=In();t=t.replace(/\.m?js$/,".wasm");const o=await a(r({stderr:i,stdout:s,url:t}));return e.files&&await Vi(this,o,e.files),e.fetch&&await Yi(this,o,e.fetch),o},registerJSModule:_c,run:mc,runAsync:Oc,runEvent:vc,transform:(r,e)=>e,writeFile:({FS:r,_module:{PATH:e,PATH_FS:t}},i,s)=>fc({FS:r,PATH:e,PATH_FS:t},i,s)},Gd="pyodide",Hd={dict_converter:Object.fromEntries},Zd={type:Gd,module:(r="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${r}/full/pyodide.mjs`,async engine({loadPyodide:r},e,t){const{stderr:i,stdout:s,get:a}=In(),o=t.slice(0,t.lastIndexOf("/")),n=await a(r({stderr:i,stdout:s,indexURL:o}));if(e.files&&await Vi(this,n,e.files),e.fetch&&await Yi(this,n,e.fetch),e.packages){await n.loadPackage("micropip");const c=await n.pyimport("micropip");await c.install(e.packages,{keep_going:!0}),c.destroy()}return n},registerJSModule:_c,run:mc,runAsync:Oc,runEvent:vc,transform:(r,e)=>e instanceof r.ffi.PyProxy?e.toJs(Hd):e,writeFile:({FS:r,PATH:e,_module:{PATH_FS:t}},i,s)=>fc({FS:r,PATH:e,PATH_FS:t},i,s)},tn="ruby-wasm-wasi",Ro=tn.replace(/\W+/g,"_"),Jd={type:tn,experimental:!0,module:(r="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${r}/dist/browser.esm.js`,async engine({DefaultRubyVM:r},e,t){const i=await fetch(`${t.slice(0,t.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await i.arrayBuffer()),{vm:a}=await r(s);return e.files&&await Vi(this,a,e.files),e.fetch&&await Yi(this,a,e.fetch),a},registerJSModule(r,e,t){const i=`__module_${Ro}_${e}`;globalThis[i]=t,this.run(r,`require "js";$${e}=JS.global[:${i}]`),delete globalThis[i]},run:(r,e,...t)=>r.eval(st(e),...t),runAsync:(r,e,...t)=>r.evalAsync(st(e),...t),async runEvent(r,e,t){if(/^xworker\.(on\w+)$/.test(e)){const{$1:i}=RegExp,s=`__module_${Ro}_event`;globalThis[s]=t,this.run(r,`require "js";$xworker.call("${i}",JS.global[:${s}])`),delete globalThis[s]}else await this.run(r,`method(:${e})`).call(e,r.wrap(t))},transform:(r,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${tn}`)}},Kd="wasmoon",ef={type:Kd,module:(r="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${r}/+esm`,async engine({LuaFactory:r,LuaLibraries:e},t){const{stderr:i,stdout:s,get:a}=In(),o=await a(new r().createEngine());return o.global.getTable(e.Base,n=>{o.global.setField(n,"print",s),o.global.setField(n,"printErr",i)}),t.files&&await Vi(this,o,t.files),t.fetch&&await Yi(this,o,t.fetch),o},registerJSModule:(r,e,t)=>{r.global.set(e,t)},run:(r,e,...t)=>{try{return r.doStringSync(st(e),...t)}catch(i){vt.get(r).stderr(i)}},runAsync:async(r,e,...t)=>{try{return await r.doString(st(e),...t)}catch(i){vt.get(r).stderr(i)}},runEvent:async(r,e,t)=>{const[i,...s]=e.split(".");let a=r.global.get(i),o;for(const n of s)[o,a]=[a,a[n]];try{await a.call(o,t)}catch(n){vt.get(r).stderr(n)}},transform:(r,e)=>e,writeFile:({cmodule:{module:{FS:r}}},e,t)=>qd(r,e,t)},He=new Map,yc=new Map,rn=[],kt=[],tf=new Proxy(new Map,{get(r,e){if(!r.has(e)){const[a,...o]=e.split("@"),n=He.get(a),c=/^(?:\.?\.?\/|https?:\/\/)/i.test(o)?o.join("@"):n.module(...o);r.set(e,{url:c,module:cc(()=>import(c),__vite__mapDeps([]),import.meta.url),engine:n.engine.bind(n)})}const{url:t,module:i,engine:s}=r.get(e);return(a,o)=>i.then(n=>{yc.set(e,a);for(const c of["files","fetch"]){const u=a?.[c];u&&gc.set(u,o)}return s(n,a,t)})}}),rf=r=>{for(const e of[].concat(r.type))He.set(e,r),rn.push(`script[type="${e}"]`),kt.push(`${e}-`)};for(const r of[Vd,Zd,Jd,ef])rf(r);const sf="https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js",Lo=async r=>(await cc(()=>import(sf),__vite__mapDeps([]),import.meta.url)).parse(r),bc=r=>{let e=typeof r;return e==="string"&&/\.(json|toml|txt)$/.test(r)?e=RegExp.$1:r="./config.txt",[uc(r),e]},nf=(r,e,t={})=>{if(e){const[i,s]=bc(e);if(s==="json")t=fetch(i).then(Sd);else if(s==="toml")t=fetch(i).then(Mn).then(Lo);else if(s==="string")try{t=JSON.parse(e)}catch{t=Lo(e)}else s==="object"&&e&&(t=e);e=i}return hc(t).then(i=>tf[r](i,e))},Cc=(r,e="")=>`${r}@${e}`.replace(/@$/,""),Ti="BeforeRun",Pi="AfterRun",sn=[`code${Ti}`,`code${Ti}Async`,`code${Pi}`,`code${Pi}Async`],Ai=["onWorker","onReady",`on${Ti}`,`on${Ti}Async`,`on${Pi}`,`on${Pi}Async`];function of(r,e){const{run:t,runAsync:i}=He.get(this.type);return{...r,run:t.bind(this,e),runAsync:i.bind(this,e)}}const af=(r,e,t,i,s,a)=>{if(s||a){const o=of.bind(r,e),n=i?"runAsync":"run",c=r[n];r[n]=i?async function(u,l,...h){s&&await s.call(this,o(u),t);const p=await c.call(this,u,l,...h);return a&&await a.call(this,o(u),t),p}:function(u,l,...h){s&&s.call(this,o(u),t);const p=c.call(this,u,l,...h);return a&&a.call(this,o(u),t),p}}};let Sr=class{constructor(e,t={}){const{main:i,worker:s}=t;this.interpreter=e,this.onWorker=i?.onWorker;for(const a of Ai.slice(1))this[a]=s?.[a];for(const a of sn)this[a]=s?.[a]}toJSON(){const e={};for(const t of Ai.slice(1))this[t]&&(e[t]=String(this[t]));for(const t of sn)this[t]&&(e[t]=st(this[t]()));return e}};const Bn=(...r)=>function(t,i){const s=Cd(),{postMessage:a}=s,o=this instanceof Sr;if(r.length){const[u,l]=r;i=wi({},i||{type:u,version:l}),i.type||(i.type=u)}const[n]=bc(i.config),c=fetch(t).then(Mn).then(u=>{const l=o?this.toJSON():void 0;a.call(s,{options:i,config:n,code:u,hooks:l})});return Fd(s,{postMessage:{value:(u,...l)=>c.then(()=>a.call(s,u,...l))},sync:{value:ac(s,Wu).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),s.addEventListener("message",u=>{const{data:l}=u;l instanceof Error&&(u.stopImmediatePropagation(),s.onerror(Fn(u,{type:{value:"error"},error:{value:l}})))}),o&&this.onWorker?.(this.interpreter,s),s},Qn=Bn();class cf extends it{peersReady=new Map;workerInitializing=!1;running=!1;env={};syncProxyPy;asyncProxyPy;constructor(e,t,i={}){super(),e.getEnv=this.getEnv.bind(this),this.syncProxyPy=e,this.asyncProxyPy=t,e.fetch=this.fetch.bind(this),t.onerror=s=>{console.warn("asyncProxyPy.onerror"),console.warn(s),this.emit("error",s)},t.onmessageerror=s=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(s),this.emit("messageerror",s)},t.onmessage=s=>{let a=s.data;if(!Array.isArray(a)){console.warn("asyncProxyPy.onmessage",a),this.emit("display:error",`invalid message from worker 
`+JSON.stringify(a,null,2)+`
`);return}const[o,...n]=a;switch(o){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[c]=n;this.emit("display:stats",c);break;case"proxy:js:mpc:msg:ready":let[u,l]=n;l.getBuffer&&(l=l.getBuffer()),this.emit("send",{type:"ready",pid:u,payload:l});break;case"proxy:js:mpc:msg:runtime":let[h,p]=n;p.getBuffer&&(p=p.getBuffer()),this.emit("send",{type:"runtime",pid:h,payload:p});break;case"proxy:js:display":let[_]=n;this.display(_);break;case"proxy:js:display:error":let[g]=n;this.displayError(g+`
`);break}},this.env=i}exec=async e=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",e])}catch(t){console.error(t),this.emit("error",new ErrorEvent("runtime:error",{error:t}))}};run_mpc=async e=>{this.emit("exec:init"),e.filename||(e.filename="<exec>");try{console.log("run_mpc",e),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",e])}catch(t){console.error(t),this.emit("error",new ErrorEvent("runtime:error",{error:t}))}};processReadyMessage(e,t){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",e,t])}processRuntimeMessage(e,t){try{let i;if(t&&t instanceof Uint8Array&&(i=[t.buffer]),i){this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,t],i);return}this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,t])}catch(i){console.warn("runtime:error"),console.warn("runtime:error",i),this.emit("error",new ErrorEvent("runtime:error",{error:i}))}}updateEnv(e={}){this.env={...this.env,...e},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}fetch2=async e=>{console.log("fetching",e);let i=await(await fetch("./"+e)).arrayBuffer();return new Uint8Array(i)};fetch=async e=>{e.endsWith(".gz")&&(e+="ip"),console.log("js/fetch fetching",e);let i=await(await fetch(e)).arrayBuffer();return new Uint8Array(i)};getEnv=()=>this.env;readline=e=>{};destroy(){console.log("destroying worker"),this.running=!1,this._close()}display=e=>{this.emit("display",e)};displayError=e=>{this.emit("display:error",e)};resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}onerror=e=>{console.warn("MPCRuntime.onerror"),console.warn(e.error),this.emit("error",e)};onmessageerror=e=>{console.warn("MPCRuntime.onmessageerror"),console.warn(e),this.emit("messageerror",e)};setReadlineFn(e){this.readline=e,this.syncProxyPy.readline=e}}function lf(r,e,t){let i={async:!0,type:"pyodide",version:"0.24.1",config:e};return console.log("creating a new worker"),Qn.call(new Sr(null,t),r,i)}let hf=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class uf extends cf{_close(){this.worker.terminate()}worker;constructor(e){let t=hf,i={packages:["mpyc-web"]};e?.startup&&e?.startup!=""&&(t=e.startup),e?.config&&e?.config!=""&&(i=e.config);let s=lf(t,i,{worker:{onReady:(a,o)=>{console.log("worker onReady/init"),a.io.stderr=n=>{typeof n!="string"&&(n=n.toString()),console.error(n),o.postMessage(["proxy:js:display:error",n])},a.io.stdout=n=>{o.postMessage(["proxy:js:display",n+`
`])},o.postMessage(["proxy:js:init"]),self.wrap=a,self.pyodide=a.interpreter,console.log(self.pyodide),self.runAsync=async(n,c)=>{try{return await a.interpreter.runPythonAsync(n,{filename:c})}catch(u){a.io.stderr(u)}},self.runAsync(`
                        import asyncio
                        import js
                        import sys
                        from startup import *
                    `,"startup.py")}}});s.onmessageerror=a=>{console.error("worker.onmessageerror"),console.error(a)},s.onerror=a=>{console.error("worker.onerror"),console.error(a)},super(s.sync,s,e?.env),this.worker=s}type(){return"PyScript/Worker"}}const df=(r,e,t=globalThis)=>{const i=Symbol.for(r),s=i in t;return[s?t[i]:Object.defineProperty(t,i,{value:e})[i],s]},ff=(r,e=document)=>e.querySelector(r),nn=(r,e=document)=>[...e.querySelectorAll(r)],xc=(r,e=document)=>{const i=new XPathEvaluator().createExpression(r).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),s=[];for(let a=0,{snapshotLength:o}=i;a<o;a++)s.push(i.snapshotItem(a));return s},pf="Invalid content",gf="Invalid worker attribute",_f="Invalid worker attribute",mf=r=>!r.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim(),Dc=r=>{const{src:e,worker:t}=r.attributes;if(t){let{value:i}=t;if(i)throw new SyntaxError(_f);if(i=e?.value,!i){if(e)throw new SyntaxError(gf);if(!r.childElementCount)i=r.textContent;else{const{innerHTML:a,localName:o,type:n}=r,c=n||o.replace(/-script$/,"");i=$d(a),console.warn(`Deprecated: use <script type="${c}"> for an always safe content parsing:
`,i)}return URL.createObjectURL(new Blob([st(i)],{type:"text/plain"}))}return i}if(e&&!mf(r.textContent))throw new SyntaxError(pf)},Of=r=>{let e=r;for(;e.parentNode;)e=e.parentNode;return e},Sc=(r,e)=>{const t=Of(r);return t.getElementById(e)||ff(e,t)},Or=new WeakMap,vf={get(){let r=Or.get(this);return r||(r=document.createElement(`${this.type}-script`),Or.set(this,r),Ri(this)),r},set(r){typeof r=="string"?Or.set(this,Sc(this,r)):(Or.set(this,r),Ri(this))}},Kr=new WeakMap,Ge=new Map,yf=async(r,e,t,i)=>{const{type:s}=r,a=He.get(s);a.experimental&&console.warn(`The ${s} interpreter is experimental`);const[o,n]=await Xi([Kr.get(r).interpreter,e]);try{Ei(document,"currentScript",{configurable:!0,get:()=>r}),a.registerJSModule(o,"polyscript",{XWorker:t}),Ao(r,s,"ready");const c=a[i?"runAsync":"run"](o,n),u=Ao.bind(null,r,s,"done");return i?c.then(u):u(),c}finally{delete document.currentScript}},_s=(r,e)=>{const t=r?.value;return t?e+t:""},wc=(r,e,t,i,s,a=r)=>{if(!Ge.has(e)){const o={interpreter:nf(t,s),queue:hc(),XWorker:Bn(r,i)};Ge.set(e,o),Ge.has(r)||Ge.set(r,o),Ge.has(a)||Ge.set(a,o)}return Ge.get(e)},Ri=async r=>{if(Kr.has(r)){const{target:e}=r;e&&(r.closest("head")?document.body.append(e):r.after(e))}else{const{attributes:{async:e,config:t,env:i,target:s,version:a},src:o,type:n}=r,c=a?.value,u=Cc(n,c);let l=_s(t,"|");const h=_s(i,"")||`${u}${l}`;l=l.slice(1);const p=Dc(r);if(p){const f=Bn(n,c),b=new f(p,{...dc(r,n),async:!!e,config:l});Kr.set(Ei(r,"xworker",{value:b}),{xworker:b});return}const _=_s(s,""),g=wc(n,h,u,c,l);Kr.set(Ei(r,"target",vf),g),_&&Or.set(r,Sc(r,_));const d=o?fetch(o).then(Mn):r.textContent;g.queue=g.queue.then(()=>yf(r,d,g.XWorker,!!e))}},Ec=new Proxy(Fn(null),{get:(r,e)=>new Promise(queueMicrotask).then(()=>Tc(e))}),Tc=async r=>{if(Ge.has(r)){const{interpreter:t,queue:i}=Ge.get(r);return(await Xi([t,i]))[0]}const e=Ge.size?`Available interpreters are: ${[...Ge.keys()].map(t=>`"${t}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${r}" was not found. ${e}`)},Pc=async r=>{const{type:e,currentTarget:t}=r;if(kt.length)for(let{name:i,value:s,ownerElement:a}of xc(`./@*[${kt.map(o=>`name()="${o}${e}"`).join(" or ")}]`,t)){i=i.slice(0,-(e.length+1));const o=await Tc(a.getAttribute(`${i}-env`)||i);He.get(i).runEvent(o,s,r)}},on=r=>{if(kt.length)for(let{name:e,ownerElement:t}of xc(`.//@*[${kt.map(i=>`starts-with(name(),"${i}")`).join(" or ")}]`,r)){const i=e.lastIndexOf("-"),s=e.slice(i+1);s!=="env"&&(t.addEventListener(s,Pc),"disabled"in t&&!t.disabled&&(t.disabled=!0,Ec[e.slice(0,i)].then(()=>{t.disabled=!1})))}},yr=[],Ac=new Map,br=new Map,an=r=>{for(const e of yr)if(r.matches(e)){const t=Ac.get(e),i=ei.get(t),{resolve:s}=br.get(t),{options:a,known:o}=i;if(!o.has(r)){o.add(r);const{interpreter:n,config:c,version:u,env:l,onerror:h,hooks:p}=a;let _;try{const y=Dc(r);if(y){const m=Qn.call(new Sr(null,p),y,{...dc(r,t),version:u,type:n,custom:t,config:r.getAttribute("config")||c||{},async:r.hasAttribute("async")});Ei(r,"xworker",{value:m}),s({type:t,xworker:m});return}}catch(y){_=y}const g=Cc(n,u),d=l||`${g}${c?`|${c}`:""}`,{interpreter:f,XWorker:b}=wc(t,d,g,u,c,n);f.then(y=>{const m=Fn(He.get(n)),S=new Sr(y,p),E=function(...O){return b.apply(S,O)},D={...Bd(m,t,structuredClone(yc.get(g)),y),XWorker:E};m.registerJSModule(y,"polyscript",{XWorker:E});for(const P of["Run","RunAsync"]){const O=Qd(m,`r${P.slice(1)}`);let w="",R="";for(const A of sn){const T=p?.main?.[A];T&&A.endsWith(P)&&(A.startsWith("codeBefore")?w=st(T()):R=st(T()))}R&&O(R,!1),w&&O(w,!0);let v,C;for(let A=2;A<Ai.length;A++){const T=Ai[A],k=p?.main?.[T];k&&T.endsWith(P)&&(T.startsWith("onBefore")?v=k:C=k)}af(m,D,r,P.endsWith("Async"),v,C)}i.queue=i.queue.then(()=>(s(D),_&&h?.(_,r),p?.main?.onReady?.(D,r)))})}}},ei=new Map;let bf=0;const Cf=(r,e)=>{let t=r==null;if(t)r=`_ps${bf++}`;else if(He.has(r)||ei.has(r))throw new Error(`<script type="${r}"> already registered`);if(!He.has(e?.interpreter))throw new Error("Unspecified interpreter");He.set(r,He.get(e.interpreter));const i=[`script[type="${r}"]`];if(Rc(r),t){const{hooks:s}=e,a=s?.main?.onReady;e={...e,hooks:{...s,main:{...s?.main,onReady(o,n){yr.splice(yr.indexOf(r),1),He.delete(r),ei.delete(r),br.delete(r),n.remove(),a?.(o)}}}},document.head.append(wi(document.createElement("script"),{type:r}))}else i.push(`${r}-script`),kt.push(`${r}-`);for(const s of i)Ac.set(s,r);yr.push(...i),ei.set(r,{options:wi({env:r},e),known:new WeakSet,queue:Promise.resolve()}),t||on(document),nn(i.join(",")).forEach(an)},Rc=r=>(br.has(r)||br.set(r,Promise.withResolvers()),br.get(r).promise),[{define:F1,whenDefined:I1,env:B1,Hook:Q1,XWorker:q1},xf]=df("polyscript",{define:Cf,whenDefined:Rc,env:Ec,Hook:Sr,XWorker:Qn});if(!xf){const r=new MutationObserver(s=>{const a=rn.join(",");for(const{type:o,target:n,attributeName:c,addedNodes:u}of s){if(o==="attributes"){const l=c.lastIndexOf("-")+1;if(l){const h=c.slice(0,l);for(const p of kt)if(h===p){const _=c.slice(l);if(_!=="env"){const g=n.hasAttribute(c)?"add":"remove";n[`${g}EventListener`](_,Pc)}break}}continue}for(const l of u)l.nodeType===1&&(on(l),a&&l.matches(a)?Ri(l):e(a,l,!0))}}),e=(s,a,o)=>{s&&nn(s,a).forEach(Ri),s=yr.join(","),s&&(o&&an(a),nn(s,a).forEach(an))},t=s=>(r.observe(s,{childList:!0,subtree:!0,attributes:!0}),s),{attachShadow:i}=Element.prototype;wi(Element.prototype,{attachShadow(s){return t(i.call(this,s))}}),queueMicrotask(()=>{on(t(document)),e(rn.join(","),document,!1)})}class Df{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return Sf(e).buffer}}function Sf(r){let e=0;for(const s of r)e+=s.byteLength;const t=new Uint8Array(e);let i=0;for(const s of r){const a=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);t.set(a,i),i+=s.byteLength}return t}function Lc(r){return new wf(r).unpack()}function kc(r){const e=new Ef;return e.pack(r),e.getBuffer()}class wf{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,s="",a,o;for(;i<e;)a=t[i],a<160?(o=a,i++):(a^192)<32?(o=(a&31)<<6|t[i+1]&63,i+=2):(a^224)<16?(o=(a&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(o=(a&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),s+=String.fromCodePoint(o);return this.index+=e,s}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const s=this.unpack();t[s]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,s=e&8388607|8388608;return(t===0?1:-1)*s*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,s=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(s-20)+t*2**(s-52);return(i===0?1:-1)*o}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class Ef{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array)this.pack_array(e);else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else if(t==Object||t.toString().startsWith("class"))this.pack_object(e);else throw new Error(`Type "${t.toString()}" not yet supported`)}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(let i=0;i<t;i++)this.pack(e[i])}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),s=e/2**i-1,a=Math.floor(s*2**52),o=2**32,n=t<<31|i+1023<<20|a/o&1048575,c=a%o;this._bufferBuilder.append(203),this.pack_int32(n),this.pack_int32(c)}pack_object(e){const i=Object.keys(e).length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");for(const s in e)e.hasOwnProperty(s)&&(this.pack(s),this.pack(e[s]))}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new Df,this._textEncoder=new TextEncoder}}let $c=!0,Mc=!0;function ti(r,e,t){const i=r.match(e);return i&&i.length>=t&&parseInt(i[t],10)}function It(r,e,t){if(!r.RTCPeerConnection)return;const i=r.RTCPeerConnection.prototype,s=i.addEventListener;i.addEventListener=function(o,n){if(o!==e)return s.apply(this,arguments);const c=u=>{const l=t(u);l&&(n.handleEvent?n.handleEvent(l):n(l))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(n,c),s.apply(this,[o,c])};const a=i.removeEventListener;i.removeEventListener=function(o,n){if(o!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(n))return a.apply(this,arguments);const c=this._eventMap[e].get(n);return this._eventMap[e].delete(n),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,c])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Tf(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):($c=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Pf(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(Mc=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Fc(){if(typeof window=="object"){if($c)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function qn(r,e){Mc&&console.warn(r+" is deprecated, please use "+e+" instead.")}function Af(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.mozGetUserMedia)e.browser="firefox",e.version=ti(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=ti(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=ti(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function ko(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ic(r){return ko(r)?Object.keys(r).reduce(function(e,t){const i=ko(r[t]),s=i?Ic(r[t]):r[t],a=i&&!Object.keys(s).length;return s===void 0||a?e:Object.assign(e,{[t]:s})},{}):r}function cn(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?cn(r,r.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(s=>{cn(r,r.get(s),t)})}))}function $o(r,e,t){const i=t?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const a=[];return r.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&a.push(o)}),a.forEach(o=>{r.forEach(n=>{n.type===i&&n.trackId===o.id&&cn(r,n,s)})}),s}const Mo=Fc;function Bc(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const i=function(n){if(typeof n!="object"||n.mandatory||n.optional)return n;const c={};return Object.keys(n).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const l=typeof n[u]=="object"?n[u]:{ideal:n[u]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);const h=function(p,_){return p?p+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(l.ideal!==void 0){c.optional=c.optional||[];let p={};typeof l.ideal=="number"?(p[h("min",u)]=l.ideal,c.optional.push(p),p={},p[h("max",u)]=l.ideal,c.optional.push(p)):(p[h("",u)]=l.ideal,c.optional.push(p))}l.exact!==void 0&&typeof l.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[h("",u)]=l.exact):["min","max"].forEach(p=>{l[p]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[h(p,u)]=l[p])})}),n.advanced&&(c.optional=(c.optional||[]).concat(n.advanced)),c},s=function(n,c){if(e.version>=61)return c(n);if(n=JSON.parse(JSON.stringify(n)),n&&typeof n.audio=="object"){const u=function(l,h,p){h in l&&!(p in l)&&(l[p]=l[h],delete l[h])};n=JSON.parse(JSON.stringify(n)),u(n.audio,"autoGainControl","googAutoGainControl"),u(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=i(n.audio)}if(n&&typeof n.video=="object"){let u=n.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const l=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!l)){delete n.video.facingMode;let h;if(u.exact==="environment"||u.ideal==="environment"?h=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(h=["front"]),h)return t.mediaDevices.enumerateDevices().then(p=>{p=p.filter(g=>g.kind==="videoinput");let _=p.find(g=>h.some(d=>g.label.toLowerCase().includes(d)));return!_&&p.length&&h.includes("back")&&(_=p[p.length-1]),_&&(n.video.deviceId=u.exact?{exact:_.deviceId}:{ideal:_.deviceId}),n.video=i(n.video),Mo("chrome: "+JSON.stringify(n)),c(n)})}n.video=i(n.video)}return Mo("chrome: "+JSON.stringify(n)),c(n)},a=function(n){return e.version>=64?n:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[n.name]||n.name,message:n.message,constraint:n.constraint||n.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(n,c,u){s(n,l=>{t.webkitGetUserMedia(l,c,h=>{u&&u(a(h))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return s(c,u=>n(u).then(l=>{if(u.audio&&!l.getAudioTracks().length||u.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return l},l=>Promise.reject(a(l))))}}}function Rf(r,e){if(!(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices)&&r.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}r.navigator.mediaDevices.getDisplayMedia=function(i){return e(i).then(s=>{const a=i.video&&i.video.width,o=i.video&&i.video.height,n=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:n||3}},a&&(i.video.mandatory.maxWidth=a),o&&(i.video.mandatory.maxHeight=o),r.navigator.mediaDevices.getUserMedia(i)})}}}function Qc(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function qc(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",s=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(n=>n.track&&n.track.id===s.track.id):a={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[i.stream],this.dispatchEvent(o)}),i.stream.getTracks().forEach(s=>{let a;r.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(n=>n.track&&n.track.id===s.id):a={track:s};const o=new Event("track");o.track=s,o.receiver=a,o.transceiver={receiver:a},o.streams=[i.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else It(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Nc(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(s,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=s.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:s}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(n,c){let u=s.apply(this,arguments);return u||(u=e(this,n),this._senders.push(u)),u};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(n){a.apply(this,arguments);const c=this._senders.indexOf(n);c!==-1&&this._senders.splice(c,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],i.apply(this,[a]),a.getTracks().forEach(o=>{const n=this._senders.find(c=>c.track===o);n&&this._senders.splice(this._senders.indexOf(n),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Wc(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[i,s,a]=arguments;if(arguments.length>0&&typeof i=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof i!="function"))return e.apply(this,[]);const o=function(c){const u={};return c.result().forEach(h=>{const p={id:h.id,timestamp:h.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[h.type]||h.type};h.names().forEach(_=>{p[_]=h.stat(_)}),u[p.id]=p}),u},n=function(c){return new Map(Object.keys(c).map(u=>[u,c[u]]))};if(arguments.length>=2){const c=function(u){s(n(o(u)))};return e.apply(this,[c,i])}return new Promise((c,u)=>{e.apply(this,[function(l){c(n(o(l)))},u])}).then(s,a)}}function jc(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a});const i=r.RTCPeerConnection.prototype.addTrack;i&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>$o(o,a.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(a=>a._pc=this),s}),It(r,"track",i=>(i.receiver._pc=i.srcElement,i)),r.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>$o(a,s.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const i=arguments[0];let s,a,o;return this.getSenders().forEach(n=>{n.track===i&&(s?o=!0:s=n)}),this.getReceivers().forEach(n=>(n.track===i&&(a?o=!0:a=n),n.track===i)),o||s&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function zc(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(o,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?this._shimmedLocalStreams[n.id].indexOf(c)===-1&&this._shimmedLocalStreams[n.id].push(c):this._shimmedLocalStreams[n.id]=[n,c],c};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(h=>h.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const n=this.getSenders();t.apply(this,arguments);const c=this.getSenders().filter(u=>n.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const i=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],i.apply(this,arguments)};const s=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(n=>{const c=this._shimmedLocalStreams[n].indexOf(o);c!==-1&&this._shimmedLocalStreams[n].splice(c,1),this._shimmedLocalStreams[n].length===1&&delete this._shimmedLocalStreams[n]}),s.apply(this,arguments)}}function Uc(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return zc(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const l=t.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(h=>this._reverseStreams[h.id])};const i=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(_=>_.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){const h=new r.MediaStream(l.getTracks());this._streams[l.id]=h,this._reverseStreams[h.id]=l,l=h}i.apply(this,[l])};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},r.RTCPeerConnection.prototype.addTrack=function(l,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(d=>d===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[h.id];if(g)g.addTrack(l),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const d=new r.MediaStream([l]);this._streams[h.id]=d,this._reverseStreams[d.id]=h,this.addStream(d)}return this.getSenders().find(d=>d.track===l)};function a(u,l){let h=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const _=u._reverseStreams[p],g=u._streams[_.id];h=h.replace(new RegExp(g.id,"g"),_.id)}),new RTCSessionDescription({type:l.type,sdp:h})}function o(u,l){let h=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const _=u._reverseStreams[p],g=u._streams[_.id];h=h.replace(new RegExp(_.id,"g"),g.id)}),new RTCSessionDescription({type:l.type,sdp:h})}["createOffer","createAnswer"].forEach(function(u){const l=r.RTCPeerConnection.prototype[u],h={[u](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[g=>{const d=a(this,g);p[0].apply(null,[d])},g=>{p[1]&&p[1].apply(null,g)},arguments[2]]):l.apply(this,arguments).then(g=>a(this,g))}};r.RTCPeerConnection.prototype[u]=h[u]});const n=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?n.apply(this,arguments):(arguments[0]=o(this,arguments[0]),n.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return u.type===""?u:a(this,u)}}),r.RTCPeerConnection.prototype.removeTrack=function(l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(l._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(_=>{this._streams[_].getTracks().find(d=>l.track===d)&&(p=this._streams[_])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ln(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=r.RTCPeerConnection.prototype[t],s={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=s[t]})}function Xc(r,e){It(r,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const Fo=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Xc,shimAddTrackRemoveTrack:Uc,shimAddTrackRemoveTrackWithNative:zc,shimGetDisplayMedia:Rf,shimGetSendersWithDtmf:Nc,shimGetStats:Wc,shimGetUserMedia:Bc,shimMediaStream:Qc,shimOnTrack:qc,shimPeerConnection:ln,shimSenderReceiverGetStats:jc},Symbol.toStringTag,{value:"Module"}));function Yc(r,e){const t=r&&r.navigator,i=r&&r.MediaStreamTrack;if(t.getUserMedia=function(s,a,o){qn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(s).then(a,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const s=function(o,n,c){n in o&&!(c in o)&&(o[c]=o[n],delete o[n])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},i&&i.prototype.getSettings){const o=i.prototype.getSettings;i.prototype.getSettings=function(){const n=o.apply(this,arguments);return s(n,"mozAutoGainControl","autoGainControl"),s(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const o=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return this.kind==="audio"&&typeof n=="object"&&(n=JSON.parse(JSON.stringify(n)),s(n,"autoGainControl","mozAutoGainControl"),s(n,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[n])}}}}function Lf(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(i)})}function Vc(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hn(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const a=r.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};r.RTCPeerConnection.prototype[s]=o[s]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[a,o,n]=arguments;return i.apply(this,[a||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(u=>{u.type=t[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;c.forEach((l,h)=>{c.set(h,Object.assign({},l,{type:t[l.type]||l.type}))})}return c}).then(o,n)}}function Gc(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Hc(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i}),It(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Zc(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){qn("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Jc(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function Kc(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const s=i.length>0;s&&i.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(s){const{sender:o}=a,n=o.getParameters();(!("encodings"in n)||n.encodings.length===1&&Object.keys(n.encodings[0]).length===0)&&(n.encodings=i,o.sendEncodings=i,this.setParametersPromises.push(o.setParameters(n).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return a})}function el(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function tl(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function rl(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Io=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Kc,shimCreateAnswer:rl,shimCreateOffer:tl,shimGetDisplayMedia:Lf,shimGetParameters:el,shimGetUserMedia:Yc,shimOnTrack:Vc,shimPeerConnection:hn,shimRTCDataChannel:Jc,shimReceiverGetStats:Hc,shimRemoveStream:Zc,shimSenderGetStats:Gc},Symbol.toStringTag,{value:"Module"}));function il(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(s=>e.call(this,s,i)),i.getVideoTracks().forEach(s=>e.call(this,s,i))},r.RTCPeerConnection.prototype.addTrack=function(i,...s){return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const s=t.getTracks();this.getSenders().forEach(a=>{s.includes(a.track)&&this.removeTrack(a)})})}}function sl(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,this.dispatchEvent(a)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(a=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(a)>=0)return;i._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,i.dispatchEvent(o)})}),e.apply(i,arguments)}}}function nl(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,s=e.setLocalDescription,a=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,l){const h=arguments.length>=2?arguments[2]:arguments[0],p=t.apply(this,[h]);return l?(p.then(u,l),Promise.resolve()):p},e.createAnswer=function(u,l){const h=arguments.length>=2?arguments[2]:arguments[0],p=i.apply(this,[h]);return l?(p.then(u,l),Promise.resolve()):p};let n=function(c,u,l){const h=s.apply(this,[c]);return l?(h.then(u,l),Promise.resolve()):h};e.setLocalDescription=n,n=function(c,u,l){const h=a.apply(this,[c]);return l?(h.then(u,l),Promise.resolve()):h},e.setRemoteDescription=n,n=function(c,u,l){const h=o.apply(this,[c]);return l?(h.then(u,l),Promise.resolve()):h},e.addIceCandidate=n}function ol(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=s=>i(al(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(i,s,a){e.mediaDevices.getUserMedia(i).then(s,a)}.bind(e))}function al(r){return r&&r.video!==void 0?Object.assign({},r,{video:Ic(r.video)}):r}function cl(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(i,s){if(i&&i.iceServers){const a=[];for(let o=0;o<i.iceServers.length;o++){let n=i.iceServers[o];n.urls===void 0&&n.url?(qn("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,a.push(n)):a.push(i.iceServers[o])}i.iceServers=a}return new e(i,s)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ll(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hl(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ul(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Bo=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ul,shimCallbacksAPI:nl,shimConstraints:al,shimCreateOfferLegacy:hl,shimGetUserMedia:ol,shimLocalStreamsAPI:il,shimRTCIceServerUrls:cl,shimRemoteStreamsAPI:sl,shimTrackEventTransceiver:ll},Symbol.toStringTag,{value:"Module"}));var dl={exports:{}};(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((s,a)=>(a>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(s=>s.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const s={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let a=8;a<i.length;a+=2)switch(i[a]){case"raddr":s.relatedAddress=i[a+1];break;case"rport":s.relatedPort=parseInt(i[a+1],10);break;case"tcptype":s.tcpType=i[a+1];break;case"ufrag":s.ufrag=i[a+1],s.usernameFragment=i[a+1];break;default:s[i[a]]===void 0&&(s[i[a]]=i[a+1]);break}return s},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const s=t.component;s==="rtp"?i.push(1):s==="rtcp"?i.push(2):i.push(s),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const a=t.type;return i.push("typ"),i.push(a),a!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const s={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),s.name=i[0],s.clockRate=parseInt(i[1],10),s.channels=i.length===3?parseInt(i[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const s=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let s;const a=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)s=a[o].trim().split("="),i[s[0].trim()]=s[1];return i},e.writeFmtp=function(t){let i="",s=t.payloadType;if(t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const a=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?a.push(o+"="+t.parameters[o]):a.push(o)}),i+="a=fmtp:"+s+" "+a.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",s=t.payloadType;return t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(a=>{i+="a=rtcp-fb:"+s+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),s={ssrc:parseInt(t.substring(7,i),10)},a=t.indexOf(":",i);return a>-1?(s.attribute=t.substring(i+1,a),s.value=t.substring(a+1)):s.attribute=t.substring(i+1),s},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(s=>parseInt(s,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let s="a=setup:"+i+`\r
`;return t.fingerprints.forEach(a=>{s+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),s},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const s=e.matchPrefix(t+i,"a=ice-ufrag:")[0],a=e.matchPrefix(t+i,"a=ice-pwd:")[0];return s&&a?{usernameFragment:s.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(t)[0].split(" ");i.profile=a[2];for(let n=3;n<a.length;n++){const c=a[n],u=e.matchPrefix(t,"a=rtpmap:"+c+" ")[0];if(u){const l=e.parseRtpMap(u),h=e.matchPrefix(t,"a=fmtp:"+c+" ");switch(l.parameters=h.length?e.parseFmtp(h[0]):{},l.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),i.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(l.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(n=>{i.headerExtensions.push(e.parseExtmap(n))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(n=>{o.forEach(c=>{n.rtcpFeedback.find(l=>l.type===c.type&&l.parameter===c.parameter)||n.rtcpFeedback.push(c)})}),i},e.writeRtpDescription=function(t,i){let s="";s+="m="+t+" ",s+=i.codecs.length>0?"9":"0",s+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=i.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let a=0;return i.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(s+="a=maxptime:"+a+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(t){const i=[],s=e.parseRtpParameters(t),a=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,n=e.matchPrefix(t,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),c=n.length>0&&n[0].ssrc;let u;const l=e.matchPrefix(t,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(g=>parseInt(g,10)));l.length>0&&l[0].length>1&&l[0][0]===c&&(u=l[0][1]),s.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let _={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&u&&(_.rtx={ssrc:u}),i.push(_),a&&(_=JSON.parse(JSON.stringify(_)),_.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},i.push(_))}}),i.length===0&&c&&i.push({ssrc:c});let h=e.matchPrefix(t,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,i.forEach(p=>{p.maxBitrate=h})),i},e.parseRtcpParameters=function(t){const i={},s=e.matchPrefix(t,"a=ssrc:").map(n=>e.parseSsrcMedia(n)).filter(n=>n.attribute==="cname")[0];s&&(i.cname=s.value,i.ssrc=s.ssrc);const a=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=a.length>0,i.compound=a.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return i.mux=o.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const s=e.matchPrefix(t,"a=msid:");if(s.length===1)return i=s[0].substring(7).split(" "),{stream:i[0],track:i[1]};const a=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(a.length>0)return i=a[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),s=e.matchPrefix(t,"a=max-message-size:");let a;s.length>0&&(a=parseInt(s[0].substring(19),10)),isNaN(a)&&(a=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:i.fmt,maxMessageSize:a};const n=e.matchPrefix(t,"a=sctpmap:");if(n.length>0){const c=n[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:a}}},e.writeSctpDescription=function(t,i){let s=[];return t.protocol!=="DTLS/SCTP"?s=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:s=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&s.push("a=max-message-size:"+i.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,s){let a;const o=i!==void 0?i:2;return t?a=t:a=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const s=e.splitLines(t);for(let a=0;a<s.length;a++)switch(s[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[a].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const s=e.splitLines(t)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(t){const s=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let s=0;s<i.length;s++)if(i[s].length<2||i[s].charAt(1)!=="=")return!1;return!0},r.exports=e})(dl);var fl=dl.exports;const Kt=En(fl),kf=xu({__proto__:null,default:Kt},[fl]);function ri(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const s=new e(i),a=Kt.parseCandidate(i.candidate);for(const o in a)o in s||Object.defineProperty(s,o,{value:a[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(i)},r.RTCIceCandidate.prototype=e.prototype,It(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function un(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||It(r,"icecandidate",e=>{if(e.candidate){const t=Kt.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function ii(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(n){if(!n||!n.sdp)return!1;const c=Kt.splitSections(n.sdp);return c.shift(),c.some(u=>{const l=Kt.parseMLine(u);return l&&l.kind==="application"&&l.protocol.indexOf("SCTP")!==-1})},i=function(n){const c=n.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const u=parseInt(c[1],10);return u!==u?-1:u},s=function(n){let c=65536;return e.browser==="firefox"&&(e.version<57?n===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},a=function(n,c){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const l=Kt.matchPrefix(n.sdp,"a=max-message-size:");return l.length>0?u=parseInt(l[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(u=2147483637),u},o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const c=i(arguments[0]),u=s(c),l=a(arguments[0],c);let h;u===0&&l===0?h=Number.POSITIVE_INFINITY:u===0||l===0?h=Math.max(u,l):h=Math.min(u,l);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return h}}),this._sctp=p}return o.apply(this,arguments)}}function si(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(i,s){const a=i.send;i.send=function(){const n=arguments[0],c=n.length||n.size||n.byteLength;if(i.readyState==="open"&&s.sctp&&c>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return a.apply(i,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const s=t.apply(this,arguments);return e(s,this),s},It(r,"datachannel",i=>(e(i.channel,i.target),i))}function dn(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const a=s.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const o=new Event("connectionstatechange",s);a.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function fn(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&s instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:s.type,sdp:a}):s.sdp=a}return t.apply(this,arguments)}}function ni(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function oi(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return t.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?t.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const $f=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:fn,shimAddIceCandidateNullOrEmpty:ni,shimConnectionState:dn,shimMaxMessageSize:ii,shimParameterlessSetLocalDescription:oi,shimRTCIceCandidate:ri,shimRTCIceCandidateRelayProtocol:un,shimSendThrowTypeError:si},Symbol.toStringTag,{value:"Module"}));function Mf({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Fc,i=Af(r),s={browserDetails:i,commonShim:$f,extractVersion:ti,disableLog:Tf,disableWarnings:Pf,sdp:kf};switch(i.browser){case"chrome":if(!Fo||!ln||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),s;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),s;t("adapter.js shimming chrome."),s.browserShim=Fo,ni(r,i),oi(r),Bc(r,i),Qc(r),ln(r,i),qc(r),Uc(r,i),Nc(r),Wc(r),jc(r),Xc(r,i),ri(r),un(r),dn(r),ii(r,i),si(r),fn(r,i);break;case"firefox":if(!Io||!hn||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),s;t("adapter.js shimming firefox."),s.browserShim=Io,ni(r,i),oi(r),Yc(r,i),hn(r,i),Vc(r),Zc(r),Gc(r),Hc(r),Jc(r),Kc(r),el(r),tl(r),rl(r),ri(r),dn(r),ii(r,i),si(r);break;case"safari":if(!Bo||!e.shimSafari)return t("Safari shim is not included in this adapter release."),s;t("adapter.js shimming safari."),s.browserShim=Bo,ni(r,i),oi(r),cl(r),hl(r),nl(r),il(r),sl(r),ll(r),ol(r),ul(r),ri(r),un(r),ii(r,i),si(r),fn(r,i);break;default:t("Unsupported browser!");break}return s}const Qo=Mf({window:typeof window>"u"?void 0:window});function Bt(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}class pl{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,s=Math.ceil(i/this.chunkedMTU);let a=0,o=0;for(;o<i;){const n=Math.min(i,o+this.chunkedMTU),c=e.slice(o,n),u={__peerData:this._dataCount,n:a,data:c,total:s};t.push(u),o=n,a++}return this._dataCount++,t}}}function Ff(r){let e=0;for(const s of r)e+=s.byteLength;const t=new Uint8Array(e);let i=0;for(const s of r)t.set(s,i),i+=s.byteLength;return t}const ms=Qo.default||Qo,pr=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return ms.browserDetails.browser}getVersion(){return ms.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=ms.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},If=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),gl=()=>Math.random().toString(36).slice(2),qo={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Bf extends pl{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(s){s.target&&t(s.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=qo,this.browser=pr.getBrowser(),this.browserVersion=pr.getVersion(),this.pack=kc,this.unpack=Lc,this.supports=function(){const t={browser:pr.isBrowserSupported(),webRTC:pr.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(qo),t.audioVideo=!0;let s;try{s=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!s.ordered;try{s.binaryType="blob",t.binaryBlob=!pr.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{i&&i.close()}return t}(),this.validateId=If,this.randomToken=gl}}const Ee=new Bf,Qf="PeerJS: ";var Ie;(function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"})(Ie||(Ie={}));class qf{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=Ie.All&&this._print(Ie.All,...e)}warn(...e){this._logLevel>=Ie.Warnings&&this._print(Ie.Warnings,...e)}error(...e){this._logLevel>=Ie.Errors&&this._print(Ie.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[Qf,...t];for(const s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);e>=Ie.All?console.log(...i):e>=Ie.Warnings?console.warn("WARNING",...i):e>=Ie.Errors&&console.error("ERROR",...i)}constructor(){this._logLevel=Ie.Disabled}}var V=new qf,Nn={},Nf=Object.prototype.hasOwnProperty,we="~";function wr(){}Object.create&&(wr.prototype=Object.create(null),new wr().__proto__||(we=!1));function Wf(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function _l(r,e,t,i,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var a=new Wf(t,i||r,s),o=we?we+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],a]:r._events[o].push(a):(r._events[o]=a,r._eventsCount++),r}function ai(r,e){--r._eventsCount===0?r._events=new wr:delete r._events[e]}function be(){this._events=new wr,this._eventsCount=0}be.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)Nf.call(t,i)&&e.push(we?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};be.prototype.listeners=function(e){var t=we?we+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,a=i.length,o=new Array(a);s<a;s++)o[s]=i[s].fn;return o};be.prototype.listenerCount=function(e){var t=we?we+e:e,i=this._events[t];return i?i.fn?1:i.length:0};be.prototype.emit=function(e,t,i,s,a,o){var n=we?we+e:e;if(!this._events[n])return!1;var c=this._events[n],u=arguments.length,l,h;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,s),!0;case 5:return c.fn.call(c.context,t,i,s,a),!0;case 6:return c.fn.call(c.context,t,i,s,a,o),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var p=c.length,_;for(h=0;h<p;h++)switch(c[h].once&&this.removeListener(e,c[h].fn,void 0,!0),u){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,t);break;case 3:c[h].fn.call(c[h].context,t,i);break;case 4:c[h].fn.call(c[h].context,t,i,s);break;default:if(!l)for(_=1,l=new Array(u-1);_<u;_++)l[_-1]=arguments[_];c[h].fn.apply(c[h].context,l)}}return!0};be.prototype.on=function(e,t,i){return _l(this,e,t,i,!1)};be.prototype.once=function(e,t,i){return _l(this,e,t,i,!0)};be.prototype.removeListener=function(e,t,i,s){var a=we?we+e:e;if(!this._events[a])return this;if(!t)return ai(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!s||o.once)&&(!i||o.context===i)&&ai(this,a);else{for(var n=0,c=[],u=o.length;n<u;n++)(o[n].fn!==t||s&&!o[n].once||i&&o[n].context!==i)&&c.push(o[n]);c.length?this._events[a]=c.length===1?c[0]:c:ai(this,a)}return this};be.prototype.removeAllListeners=function(e){var t;return e?(t=we?we+e:e,this._events[t]&&ai(this,t)):(this._events=new wr,this._eventsCount=0),this};be.prototype.off=be.prototype.removeListener;be.prototype.addListener=be.prototype.on;be.prefixed=we;be.EventEmitter=be;Nn=be;var Qt={};Bt(Qt,"ConnectionType",()=>et);Bt(Qt,"PeerErrorType",()=>ge);Bt(Qt,"BaseConnectionErrorType",()=>Er);Bt(Qt,"DataConnectionErrorType",()=>Tr);Bt(Qt,"SerializationType",()=>rr);Bt(Qt,"SocketEventType",()=>Ke);Bt(Qt,"ServerMessageType",()=>me);var et;(function(r){r.Data="data",r.Media="media"})(et||(et={}));var ge;(function(r){r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc"})(ge||(ge={}));var Er;(function(r){r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed"})(Er||(Er={}));var Tr;(function(r){r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big"})(Tr||(Tr={}));var rr;(function(r){r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw"})(rr||(rr={}));var Ke;(function(r){r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close"})(Ke||(Ke={}));var me;(function(r){r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE"})(me||(me={}));var Wn={};Wn=JSON.parse('{"name":"peerjs","version":"1.5.1","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"^1.5.3","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.0.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class jf extends Nn.EventEmitter{constructor(e,t,i,s,a,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const n=e?"wss://":"ws://";this._baseUrl=n+t+":"+i+s+"peerjs?key="+a}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Wn.version),this._disconnected=!1,this._socket.onmessage=s=>{let a;try{a=JSON.parse(s.data),V.log("Server message received:",a)}catch{V.log("Invalid server message",s.data);return}this.emit(Ke.Message,a)},this._socket.onclose=s=>{this._disconnected||(V.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(Ke.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),V.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){V.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:me.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ke.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ml{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===et.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,s={ordered:!!e.reliable},a=t.createDataChannel(i.label,s);i._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){V.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,s=this.connection.type,a=this.connection.provider;V.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(V.log(`Received ICE candidates for ${t}:`,o.candidate),a.socket.send({type:me.Candidate,payload:{candidate:o.candidate,type:s,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":V.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(Er.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":V.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(Er.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":V.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},V.log("Listening for data channel"),e.ondatachannel=o=>{V.log("Received data channel");const n=o.channel;a.getConnection(t,i)._initializeDataChannel(n)},V.log("Listening for remote stream"),e.ontrack=o=>{V.log("Received remote stream");const n=o.streams[0],c=a.getConnection(t,i);if(c.type===et.Media){const u=c;this._addStreamToMediaConnection(n,u)}}}cleanup(){V.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const s=this.connection.dataChannel;s&&(i=!!s.readyState&&s.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);V.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),V.log("Set localDescription:",i,`for:${this.connection.peer}`);let s={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===et.Data){const a=this.connection;s={...s,label:a.label,reliable:a.reliable,serialization:a.serialization}}t.socket.send({type:me.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(ge.WebRTC,s),V.log("Failed to setLocalDescription, ",s))}}catch(i){t.emitError(ge.WebRTC,i),V.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();V.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),V.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:me.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){t.emitError(ge.WebRTC,s),V.log("Failed to setLocalDescription, ",s)}}catch(i){t.emitError(ge.WebRTC,i),V.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,s=this.connection.provider;V.log("Setting remote description",t);const a=this;try{await i.setRemoteDescription(t),V.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await a._makeAnswer()}catch(o){s.emitError(ge.WebRTC,o),V.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){V.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),V.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(ge.WebRTC,t),V.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(V.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return V.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){V.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class Ol extends Nn.EventEmitter{emitError(e,t){V.error("Error:",t),this.emit("error",new zf(`${e}`,t))}}class zf extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class vl extends Ol{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}class Li extends vl{static#e=(()=>{this.ID_PREFIX="mc_"})();get type(){return et.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Li.ID_PREFIX+Ee.randomToken(),this._negotiator=new ml(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){V.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case me.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case me.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:V.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){V.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const s of i)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Uf{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:s,path:a,key:o}=this._options,n=new URL(`${t}://${i}:${s}${a}${o}/${e}`);return n.searchParams.set("ts",`${Date.now()}${Math.random()}`),n.searchParams.set("version",Wn.version),fetch(n.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){V.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Ee.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Ee.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw V.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class ki extends vl{static#e=(()=>{this.ID_PREFIX="dc_"})();static#t=(()=>{this.MAX_BUFFERED_AMOUNT=8388608})();get type(){return et.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||ki.ID_PREFIX+gl(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new ml(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{V.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(Tr.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case me.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case me.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:V.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class jn extends ki{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>ki.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return V.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Os extends jn{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new pl,this.serialization=rr.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=Lc(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const s=Ff(i.data);this._handleDataMessage({data:s})}}_send(e,t){if(e instanceof Blob)return e.arrayBuffer().then(s=>{this._send(s,t)});const i=kc(e);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}_sendChunks(e){const t=this.chunker.chunk(e);V.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class Xf extends jn{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=rr.None}}class Yf extends jn{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=Ee.chunkedMTU){this.emitError(Tr.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=rr.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class $i extends Ol{static#e=(()=>{this.DEFAULT_KEY="peerjs"})();get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:Xf,json:Yf,binary:Os,"binary-utf8":Os,default:Os},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:Ee.CLOUD_HOST,port:Ee.CLOUD_PORT,path:"/",key:$i.DEFAULT_KEY,token:Ee.randomToken(),config:Ee.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ee.CLOUD_HOST?this._options.secure=Ee.isSecure():this._options.host==Ee.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&V.setLogFunction(this._options.logFunction),V.logLevel=this._options.debug||0,this._api=new Uf(t),this._socket=this._createServerConnection(),!Ee.supports.audioVideo&&!Ee.supports.data){this._delayedAbort(ge.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!Ee.validateId(i)){this._delayedAbort(ge.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(ge.ServerError,s))}_createServerConnection(){const e=new jf(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ke.Message,t=>{this._handleMessage(t)}),e.on(Ke.Error,t=>{this._abort(ge.SocketError,t)}),e.on(Ke.Disconnected,()=>{this.disconnected||(this.emitError(ge.Network,"Lost connection to server."),this.disconnect())}),e.on(Ke.Close,()=>{this.disconnected||this._abort(ge.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,s=e.src;switch(t){case me.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case me.Error:this._abort(ge.ServerError,i.msg);break;case me.IdTaken:this._abort(ge.UnavailableID,`ID "${this.id}" is taken`);break;case me.InvalidKey:this._abort(ge.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case me.Leave:V.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case me.Expire:this.emitError(ge.PeerUnavailable,`Could not connect to peer ${s}`);break;case me.Offer:{const a=i.connectionId;let o=this.getConnection(s,a);if(o&&(o.close(),V.warn(`Offer received for existing Connection ID:${a}`)),i.type===et.Media){const c=new Li(s,this,{connectionId:a,_payload:i,metadata:i.metadata});o=c,this._addConnection(s,o),this.emit("call",c)}else if(i.type===et.Data){const c=new this._serializers[i.serialization](s,this,{connectionId:a,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});o=c,this._addConnection(s,o),this.emit("connection",c)}else{V.warn(`Received malformed connection type:${i.type}`);return}const n=this._getMessages(a);for(const c of n)o.handleMessage(c);break}default:{if(!i){V.warn(`You received a malformed message from ${s} of type ${t}`);return}const a=i.connectionId,o=this.getConnection(s,a);o&&o.peerConnection?o.handleMessage(e):a?this._storeMessage(a,e):V.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){V.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new Li(e,this,{...i,_stream:t});return this._addConnection(e,s),s}_addConnection(e,t){V.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const s of i)if(s.connectionId===t)return s;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){V.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(V.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;V.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)V.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)V.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(ge.ServerError,t))}}class pn extends it{peer;conns=new Map;constructor(e){super();let t={secure:!0,host:"mpyc-demo--headscale-ams3-c99f82e5.demo.mpyc.tech",port:443,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"}};try{e?this.peer=new $i(e,t):this.peer=new $i(t)}catch(i){console.warn(i)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}id=()=>this.peer.id;addPeerEventHandlers(e){e.on("open",async t=>{this.emit("ready",t)}),e.on("error",async t=>{this.emit("error",t)}),e.on("close",async()=>{this.emit("closed")}),e.on("connection",async t=>{this.addConnEventHandlers(t)})}addConnEventHandlers(e){console.log(`transport:conn ${e.peer} is trying to connect`),e.on("open",async()=>{this.conns.set(e.peer,e),this.sendPeers(e),this.emit("conn:ready",e.peer)}),e.on("error",async t=>{this.emit("conn:error",{peerID:e.peer,err:t})}),e.on("close",async()=>{this.conns.delete(e.peer),this.emit("conn:disconnected",e.peer)}),e.on("data",async t=>{let{type:i,payload:s}=t;switch(i){case"peers":this.processNewPeers(s);break;default:this.emit("conn:data",{peerID:e.peer,data:t});break}})}async send(e,t,i){this.conns.get(e).send({type:t,payload:i})}destroy(){this.peer.destroy()}processNewPeers=async e=>{e.forEach(t=>{!this.conns.get(t)&&t!=this.peer.id&&this.connect(t)})};async broadcast(e,t){this.conns.forEach(i=>{this.send(i.peer,`user:${e}`,t)})}async sendPeers(e){e.send({type:"peers",payload:this.getPeers()})}getPeers(e=!1){let t=Array.from(this.conns,([i,s])=>s.peer);return e&&t.push(this.peer.id),t.sort()}async connect(e){let t=this.peer.connect(e,{reliable:!0});this.addConnEventHandlers(t)}}const Vf=new MessageChannel,Gf=[];Vf.port1.onmessage=()=>{Gf.pop()()};var De="top",$e="bottom",Me="right",Se="left",Gi="auto",lr=[De,$e,Me,Se],$t="start",ir="end",yl="clippingParents",zn="viewport",Vt="popper",bl="reference",gn=lr.reduce(function(r,e){return r.concat([e+"-"+$t,e+"-"+ir])},[]),Un=[].concat(lr,[Gi]).reduce(function(r,e){return r.concat([e,e+"-"+$t,e+"-"+ir])},[]),Cl="beforeRead",xl="read",Dl="afterRead",Sl="beforeMain",wl="main",El="afterMain",Tl="beforeWrite",Pl="write",Al="afterWrite",Rl=[Cl,xl,Dl,Sl,wl,El,Tl,Pl,Al];function nt(r){return r?(r.nodeName||"").toLowerCase():null}function Fe(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Mt(r){var e=Fe(r).Element;return r instanceof e||r instanceof Element}function Qe(r){var e=Fe(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function Xn(r){if(typeof ShadowRoot>"u")return!1;var e=Fe(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Hf(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},a=e.elements[t];!Qe(a)||!nt(a)||(Object.assign(a.style,i),Object.keys(s).forEach(function(o){var n=s[o];n===!1?a.removeAttribute(o):a.setAttribute(o,n===!0?"":n)}))})}function Zf(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],a=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),n=o.reduce(function(c,u){return c[u]="",c},{});!Qe(s)||!nt(s)||(Object.assign(s.style,n),Object.keys(a).forEach(function(c){s.removeAttribute(c)}))})}}const Yn={name:"applyStyles",enabled:!0,phase:"write",fn:Hf,effect:Zf,requires:["computeStyles"]};function tt(r){return r.split("-")[0]}var Lt=Math.max,Mi=Math.min,sr=Math.round;function _n(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ll(){return!/^((?!chrome|android).)*safari/i.test(_n())}function nr(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=r.getBoundingClientRect(),s=1,a=1;e&&Qe(r)&&(s=r.offsetWidth>0&&sr(i.width)/r.offsetWidth||1,a=r.offsetHeight>0&&sr(i.height)/r.offsetHeight||1);var o=Mt(r)?Fe(r):window,n=o.visualViewport,c=!Ll()&&t,u=(i.left+(c&&n?n.offsetLeft:0))/s,l=(i.top+(c&&n?n.offsetTop:0))/a,h=i.width/s,p=i.height/a;return{width:h,height:p,top:l,right:u+h,bottom:l+p,left:u,x:u,y:l}}function Vn(r){var e=nr(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function kl(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&Xn(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function gt(r){return Fe(r).getComputedStyle(r)}function Jf(r){return["table","td","th"].indexOf(nt(r))>=0}function St(r){return((Mt(r)?r.ownerDocument:r.document)||window.document).documentElement}function Hi(r){return nt(r)==="html"?r:r.assignedSlot||r.parentNode||(Xn(r)?r.host:null)||St(r)}function No(r){return!Qe(r)||gt(r).position==="fixed"?null:r.offsetParent}function Kf(r){var e=/firefox/i.test(_n()),t=/Trident/i.test(_n());if(t&&Qe(r)){var i=gt(r);if(i.position==="fixed")return null}var s=Hi(r);for(Xn(s)&&(s=s.host);Qe(s)&&["html","body"].indexOf(nt(s))<0;){var a=gt(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function kr(r){for(var e=Fe(r),t=No(r);t&&Jf(t)&&gt(t).position==="static";)t=No(t);return t&&(nt(t)==="html"||nt(t)==="body"&&gt(t).position==="static")?e:t||Kf(r)||e}function Gn(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Cr(r,e,t){return Lt(r,Mi(e,t))}function ep(r,e,t){var i=Cr(r,e,t);return i>t?t:i}function $l(){return{top:0,right:0,bottom:0,left:0}}function Ml(r){return Object.assign({},$l(),r)}function Fl(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var tp=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Ml(typeof e!="number"?e:Fl(e,lr))};function rp(r){var e,t=r.state,i=r.name,s=r.options,a=t.elements.arrow,o=t.modifiersData.popperOffsets,n=tt(t.placement),c=Gn(n),u=[Se,Me].indexOf(n)>=0,l=u?"height":"width";if(!(!a||!o)){var h=tp(s.padding,t),p=Vn(a),_=c==="y"?De:Se,g=c==="y"?$e:Me,d=t.rects.reference[l]+t.rects.reference[c]-o[c]-t.rects.popper[l],f=o[c]-t.rects.reference[c],b=kr(a),y=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0,m=d/2-f/2,S=h[_],E=y-p[l]-h[g],D=y/2-p[l]/2+m,P=Cr(S,D,E),O=c;t.modifiersData[i]=(e={},e[O]=P,e.centerOffset=P-D,e)}}function ip(r){var e=r.state,t=r.options,i=t.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||kl(e.elements.popper,s)&&(e.elements.arrow=s))}const Il={name:"arrow",enabled:!0,phase:"main",fn:rp,effect:ip,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function or(r){return r.split("-")[1]}var sp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function np(r,e){var t=r.x,i=r.y,s=e.devicePixelRatio||1;return{x:sr(t*s)/s||0,y:sr(i*s)/s||0}}function Wo(r){var e,t=r.popper,i=r.popperRect,s=r.placement,a=r.variation,o=r.offsets,n=r.position,c=r.gpuAcceleration,u=r.adaptive,l=r.roundOffsets,h=r.isFixed,p=o.x,_=p===void 0?0:p,g=o.y,d=g===void 0?0:g,f=typeof l=="function"?l({x:_,y:d}):{x:_,y:d};_=f.x,d=f.y;var b=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),m=Se,S=De,E=window;if(u){var D=kr(t),P="clientHeight",O="clientWidth";if(D===Fe(t)&&(D=St(t),gt(D).position!=="static"&&n==="absolute"&&(P="scrollHeight",O="scrollWidth")),D=D,s===De||(s===Se||s===Me)&&a===ir){S=$e;var w=h&&D===E&&E.visualViewport?E.visualViewport.height:D[P];d-=w-i.height,d*=c?1:-1}if(s===Se||(s===De||s===$e)&&a===ir){m=Me;var R=h&&D===E&&E.visualViewport?E.visualViewport.width:D[O];_-=R-i.width,_*=c?1:-1}}var v=Object.assign({position:n},u&&sp),C=l===!0?np({x:_,y:d},Fe(t)):{x:_,y:d};if(_=C.x,d=C.y,c){var A;return Object.assign({},v,(A={},A[S]=y?"0":"",A[m]=b?"0":"",A.transform=(E.devicePixelRatio||1)<=1?"translate("+_+"px, "+d+"px)":"translate3d("+_+"px, "+d+"px, 0)",A))}return Object.assign({},v,(e={},e[S]=y?d+"px":"",e[m]=b?_+"px":"",e.transform="",e))}function op(r){var e=r.state,t=r.options,i=t.gpuAcceleration,s=i===void 0?!0:i,a=t.adaptive,o=a===void 0?!0:a,n=t.roundOffsets,c=n===void 0?!0:n,u={placement:tt(e.placement),variation:or(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Wo(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Wo(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Hn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:op,data:{}};var Nr={passive:!0};function ap(r){var e=r.state,t=r.instance,i=r.options,s=i.scroll,a=s===void 0?!0:s,o=i.resize,n=o===void 0?!0:o,c=Fe(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(l){l.addEventListener("scroll",t.update,Nr)}),n&&c.addEventListener("resize",t.update,Nr),function(){a&&u.forEach(function(l){l.removeEventListener("scroll",t.update,Nr)}),n&&c.removeEventListener("resize",t.update,Nr)}}const Zn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ap,data:{}};var cp={left:"right",right:"left",bottom:"top",top:"bottom"};function ci(r){return r.replace(/left|right|bottom|top/g,function(e){return cp[e]})}var lp={start:"end",end:"start"};function jo(r){return r.replace(/start|end/g,function(e){return lp[e]})}function Jn(r){var e=Fe(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function Kn(r){return nr(St(r)).left+Jn(r).scrollLeft}function hp(r,e){var t=Fe(r),i=St(r),s=t.visualViewport,a=i.clientWidth,o=i.clientHeight,n=0,c=0;if(s){a=s.width,o=s.height;var u=Ll();(u||!u&&e==="fixed")&&(n=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:n+Kn(r),y:c}}function up(r){var e,t=St(r),i=Jn(r),s=(e=r.ownerDocument)==null?void 0:e.body,a=Lt(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Lt(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),n=-i.scrollLeft+Kn(r),c=-i.scrollTop;return gt(s||t).direction==="rtl"&&(n+=Lt(t.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:n,y:c}}function eo(r){var e=gt(r),t=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+i)}function Bl(r){return["html","body","#document"].indexOf(nt(r))>=0?r.ownerDocument.body:Qe(r)&&eo(r)?r:Bl(Hi(r))}function xr(r,e){var t;e===void 0&&(e=[]);var i=Bl(r),s=i===((t=r.ownerDocument)==null?void 0:t.body),a=Fe(i),o=s?[a].concat(a.visualViewport||[],eo(i)?i:[]):i,n=e.concat(o);return s?n:n.concat(xr(Hi(o)))}function mn(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function dp(r,e){var t=nr(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function zo(r,e,t){return e===zn?mn(hp(r,t)):Mt(e)?dp(e,t):mn(up(St(r)))}function fp(r){var e=xr(Hi(r)),t=["absolute","fixed"].indexOf(gt(r).position)>=0,i=t&&Qe(r)?kr(r):r;return Mt(i)?e.filter(function(s){return Mt(s)&&kl(s,i)&&nt(s)!=="body"}):[]}function pp(r,e,t,i){var s=e==="clippingParents"?fp(r):[].concat(e),a=[].concat(s,[t]),o=a[0],n=a.reduce(function(c,u){var l=zo(r,u,i);return c.top=Lt(l.top,c.top),c.right=Mi(l.right,c.right),c.bottom=Mi(l.bottom,c.bottom),c.left=Lt(l.left,c.left),c},zo(r,o,i));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function Ql(r){var e=r.reference,t=r.element,i=r.placement,s=i?tt(i):null,a=i?or(i):null,o=e.x+e.width/2-t.width/2,n=e.y+e.height/2-t.height/2,c;switch(s){case De:c={x:o,y:e.y-t.height};break;case $e:c={x:o,y:e.y+e.height};break;case Me:c={x:e.x+e.width,y:n};break;case Se:c={x:e.x-t.width,y:n};break;default:c={x:e.x,y:e.y}}var u=s?Gn(s):null;if(u!=null){var l=u==="y"?"height":"width";switch(a){case $t:c[u]=c[u]-(e[l]/2-t[l]/2);break;case ir:c[u]=c[u]+(e[l]/2-t[l]/2);break}}return c}function ar(r,e){e===void 0&&(e={});var t=e,i=t.placement,s=i===void 0?r.placement:i,a=t.strategy,o=a===void 0?r.strategy:a,n=t.boundary,c=n===void 0?yl:n,u=t.rootBoundary,l=u===void 0?zn:u,h=t.elementContext,p=h===void 0?Vt:h,_=t.altBoundary,g=_===void 0?!1:_,d=t.padding,f=d===void 0?0:d,b=Ml(typeof f!="number"?f:Fl(f,lr)),y=p===Vt?bl:Vt,m=r.rects.popper,S=r.elements[g?y:p],E=pp(Mt(S)?S:S.contextElement||St(r.elements.popper),c,l,o),D=nr(r.elements.reference),P=Ql({reference:D,element:m,strategy:"absolute",placement:s}),O=mn(Object.assign({},m,P)),w=p===Vt?O:D,R={top:E.top-w.top+b.top,bottom:w.bottom-E.bottom+b.bottom,left:E.left-w.left+b.left,right:w.right-E.right+b.right},v=r.modifiersData.offset;if(p===Vt&&v){var C=v[s];Object.keys(R).forEach(function(A){var T=[Me,$e].indexOf(A)>=0?1:-1,k=[De,$e].indexOf(A)>=0?"y":"x";R[A]+=C[k]*T})}return R}function gp(r,e){e===void 0&&(e={});var t=e,i=t.placement,s=t.boundary,a=t.rootBoundary,o=t.padding,n=t.flipVariations,c=t.allowedAutoPlacements,u=c===void 0?Un:c,l=or(i),h=l?n?gn:gn.filter(function(g){return or(g)===l}):lr,p=h.filter(function(g){return u.indexOf(g)>=0});p.length===0&&(p=h);var _=p.reduce(function(g,d){return g[d]=ar(r,{placement:d,boundary:s,rootBoundary:a,padding:o})[tt(d)],g},{});return Object.keys(_).sort(function(g,d){return _[g]-_[d]})}function _p(r){if(tt(r)===Gi)return[];var e=ci(r);return[jo(r),e,jo(e)]}function mp(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var s=t.mainAxis,a=s===void 0?!0:s,o=t.altAxis,n=o===void 0?!0:o,c=t.fallbackPlacements,u=t.padding,l=t.boundary,h=t.rootBoundary,p=t.altBoundary,_=t.flipVariations,g=_===void 0?!0:_,d=t.allowedAutoPlacements,f=e.options.placement,b=tt(f),y=b===f,m=c||(y||!g?[ci(f)]:_p(f)),S=[f].concat(m).reduce(function(Y,ee){return Y.concat(tt(ee)===Gi?gp(e,{placement:ee,boundary:l,rootBoundary:h,padding:u,flipVariations:g,allowedAutoPlacements:d}):ee)},[]),E=e.rects.reference,D=e.rects.popper,P=new Map,O=!0,w=S[0],R=0;R<S.length;R++){var v=S[R],C=tt(v),A=or(v)===$t,T=[De,$e].indexOf(C)>=0,k=T?"width":"height",L=ar(e,{placement:v,boundary:l,rootBoundary:h,altBoundary:p,padding:u}),M=T?A?Me:Se:A?$e:De;E[k]>D[k]&&(M=ci(M));var I=ci(M),$=[];if(a&&$.push(L[C]<=0),n&&$.push(L[M]<=0,L[I]<=0),$.every(function(Y){return Y})){w=v,O=!1;break}P.set(v,$)}if(O)for(var F=g?3:1,N=function(ee){var ie=S.find(function(ne){var W=P.get(ne);if(W)return W.slice(0,ee).every(function(B){return B})});if(ie)return w=ie,"break"},Q=F;Q>0;Q--){var re=N(Q);if(re==="break")break}e.placement!==w&&(e.modifiersData[i]._skip=!0,e.placement=w,e.reset=!0)}}const ql={name:"flip",enabled:!0,phase:"main",fn:mp,requiresIfExists:["offset"],data:{_skip:!1}};function Uo(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function Xo(r){return[De,Me,$e,Se].some(function(e){return r[e]>=0})}function Op(r){var e=r.state,t=r.name,i=e.rects.reference,s=e.rects.popper,a=e.modifiersData.preventOverflow,o=ar(e,{elementContext:"reference"}),n=ar(e,{altBoundary:!0}),c=Uo(o,i),u=Uo(n,s,a),l=Xo(c),h=Xo(u);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}const Nl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Op};function vp(r,e,t){var i=tt(r),s=[Se,De].indexOf(i)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=a[0],n=a[1];return o=o||0,n=(n||0)*s,[Se,Me].indexOf(i)>=0?{x:n,y:o}:{x:o,y:n}}function yp(r){var e=r.state,t=r.options,i=r.name,s=t.offset,a=s===void 0?[0,0]:s,o=Un.reduce(function(l,h){return l[h]=vp(h,e.rects,a),l},{}),n=o[e.placement],c=n.x,u=n.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}const Wl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yp};function bp(r){var e=r.state,t=r.name;e.modifiersData[t]=Ql({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const to={name:"popperOffsets",enabled:!0,phase:"read",fn:bp,data:{}};function Cp(r){return r==="x"?"y":"x"}function xp(r){var e=r.state,t=r.options,i=r.name,s=t.mainAxis,a=s===void 0?!0:s,o=t.altAxis,n=o===void 0?!1:o,c=t.boundary,u=t.rootBoundary,l=t.altBoundary,h=t.padding,p=t.tether,_=p===void 0?!0:p,g=t.tetherOffset,d=g===void 0?0:g,f=ar(e,{boundary:c,rootBoundary:u,padding:h,altBoundary:l}),b=tt(e.placement),y=or(e.placement),m=!y,S=Gn(b),E=Cp(S),D=e.modifiersData.popperOffsets,P=e.rects.reference,O=e.rects.popper,w=typeof d=="function"?d(Object.assign({},e.rects,{placement:e.placement})):d,R=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),v=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(D){if(a){var A,T=S==="y"?De:Se,k=S==="y"?$e:Me,L=S==="y"?"height":"width",M=D[S],I=M+f[T],$=M-f[k],F=_?-O[L]/2:0,N=y===$t?P[L]:O[L],Q=y===$t?-O[L]:-P[L],re=e.elements.arrow,Y=_&&re?Vn(re):{width:0,height:0},ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$l(),ie=ee[T],ne=ee[k],W=Cr(0,P[L],Y[L]),B=m?P[L]/2-F-W-ie-R.mainAxis:N-W-ie-R.mainAxis,q=m?-P[L]/2+F+W+ne+R.mainAxis:Q+W+ne+R.mainAxis,G=e.elements.arrow&&kr(e.elements.arrow),le=G?S==="y"?G.clientTop||0:G.clientLeft||0:0,ce=(A=v?.[S])!=null?A:0,de=M+B-ce-le,pe=M+q-ce,Z=Cr(_?Mi(I,de):I,M,_?Lt($,pe):$);D[S]=Z,C[S]=Z-M}if(n){var Oe,Ae=S==="x"?De:Se,Re=S==="x"?$e:Me,ve=D[E],Je=E==="y"?"height":"width",H=ve+f[Ae],U=ve-f[Re],X=[De,Se].indexOf(b)!==-1,z=(Oe=v?.[E])!=null?Oe:0,J=X?H:ve-P[Je]-O[Je]-z+R.altAxis,he=X?ve+P[Je]+O[Je]-z-R.altAxis:U,se=_&&X?ep(J,ve,he):Cr(_?J:H,ve,_?he:U);D[E]=se,C[E]=se-ve}e.modifiersData[i]=C}}const jl={name:"preventOverflow",enabled:!0,phase:"main",fn:xp,requiresIfExists:["offset"]};function Dp(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Sp(r){return r===Fe(r)||!Qe(r)?Jn(r):Dp(r)}function wp(r){var e=r.getBoundingClientRect(),t=sr(e.width)/r.offsetWidth||1,i=sr(e.height)/r.offsetHeight||1;return t!==1||i!==1}function Ep(r,e,t){t===void 0&&(t=!1);var i=Qe(e),s=Qe(e)&&wp(e),a=St(e),o=nr(r,s,t),n={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!t)&&((nt(e)!=="body"||eo(a))&&(n=Sp(e)),Qe(e)?(c=nr(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):a&&(c.x=Kn(a))),{x:o.left+n.scrollLeft-c.x,y:o.top+n.scrollTop-c.y,width:o.width,height:o.height}}function Tp(r){var e=new Map,t=new Set,i=[];r.forEach(function(a){e.set(a.name,a)});function s(a){t.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(n){if(!t.has(n)){var c=e.get(n);c&&s(c)}}),i.push(a)}return r.forEach(function(a){t.has(a.name)||s(a)}),i}function Pp(r){var e=Tp(r);return Rl.reduce(function(t,i){return t.concat(e.filter(function(s){return s.phase===i}))},[])}function Ap(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function Rp(r){var e=r.reduce(function(t,i){var s=t[i.name];return t[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var Yo={placement:"bottom",modifiers:[],strategy:"absolute"};function Vo(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Zi(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,s=e.defaultOptions,a=s===void 0?Yo:s;return function(n,c,u){u===void 0&&(u=a);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yo,a),modifiersData:{},elements:{reference:n,popper:c},attributes:{},styles:{}},h=[],p=!1,_={state:l,setOptions:function(b){var y=typeof b=="function"?b(l.options):b;d(),l.options=Object.assign({},a,l.options,y),l.scrollParents={reference:Mt(n)?xr(n):n.contextElement?xr(n.contextElement):[],popper:xr(c)};var m=Pp(Rp([].concat(i,l.options.modifiers)));return l.orderedModifiers=m.filter(function(S){return S.enabled}),g(),_.update()},forceUpdate:function(){if(!p){var b=l.elements,y=b.reference,m=b.popper;if(Vo(y,m)){l.rects={reference:Ep(y,kr(m),l.options.strategy==="fixed"),popper:Vn(m)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(R){return l.modifiersData[R.name]=Object.assign({},R.data)});for(var S=0;S<l.orderedModifiers.length;S++){if(l.reset===!0){l.reset=!1,S=-1;continue}var E=l.orderedModifiers[S],D=E.fn,P=E.options,O=P===void 0?{}:P,w=E.name;typeof D=="function"&&(l=D({state:l,options:O,name:w,instance:_})||l)}}}},update:Ap(function(){return new Promise(function(f){_.forceUpdate(),f(l)})}),destroy:function(){d(),p=!0}};if(!Vo(n,c))return _;_.setOptions(u).then(function(f){!p&&u.onFirstUpdate&&u.onFirstUpdate(f)});function g(){l.orderedModifiers.forEach(function(f){var b=f.name,y=f.options,m=y===void 0?{}:y,S=f.effect;if(typeof S=="function"){var E=S({state:l,name:b,instance:_,options:m}),D=function(){};h.push(E||D)}})}function d(){h.forEach(function(f){return f()}),h=[]}return _}}var Lp=Zi(),kp=[Zn,to,Hn,Yn],$p=Zi({defaultModifiers:kp}),Mp=[Zn,to,Hn,Yn,Wl,ql,jl,Il,Nl],ro=Zi({defaultModifiers:Mp});const zl=Object.freeze(Object.defineProperty({__proto__:null,afterMain:El,afterRead:Dl,afterWrite:Al,applyStyles:Yn,arrow:Il,auto:Gi,basePlacements:lr,beforeMain:Sl,beforeRead:Cl,beforeWrite:Tl,bottom:$e,clippingParents:yl,computeStyles:Hn,createPopper:ro,createPopperBase:Lp,createPopperLite:$p,detectOverflow:ar,end:ir,eventListeners:Zn,flip:ql,hide:Nl,left:Se,main:wl,modifierPhases:Rl,offset:Wl,placements:Un,popper:Vt,popperGenerator:Zi,popperOffsets:to,preventOverflow:jl,read:xl,reference:bl,right:Me,start:$t,top:De,variationPlacements:gn,viewport:zn,write:Pl},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ot=new Map,vs={set(r,e,t){Ot.has(r)||Ot.set(r,new Map);const i=Ot.get(r);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,t)},get(r,e){return Ot.has(r)&&Ot.get(r).get(e)||null},remove(r,e){if(!Ot.has(r))return;const t=Ot.get(r);t.delete(e),t.size===0&&Ot.delete(r)}},Fp=1e6,Ip=1e3,On="transitionend",Ul=r=>(r&&window.CSS&&window.CSS.escape&&(r=r.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),r),Bp=r=>r==null?`${r}`:Object.prototype.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase(),Qp=r=>{do r+=Math.floor(Math.random()*Fp);while(document.getElementById(r));return r},qp=r=>{if(!r)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(r);const i=Number.parseFloat(e),s=Number.parseFloat(t);return!i&&!s?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*Ip)},Xl=r=>{r.dispatchEvent(new Event(On))},ft=r=>!r||typeof r!="object"?!1:(typeof r.jquery<"u"&&(r=r[0]),typeof r.nodeType<"u"),Ct=r=>ft(r)?r.jquery?r[0]:r:typeof r=="string"&&r.length>0?document.querySelector(Ul(r)):null,hr=r=>{if(!ft(r)||r.getClientRects().length===0)return!1;const e=getComputedStyle(r).getPropertyValue("visibility")==="visible",t=r.closest("details:not([open])");if(!t)return e;if(t!==r){const i=r.closest("summary");if(i&&i.parentNode!==t||i===null)return!1}return e},xt=r=>!r||r.nodeType!==Node.ELEMENT_NODE||r.classList.contains("disabled")?!0:typeof r.disabled<"u"?r.disabled:r.hasAttribute("disabled")&&r.getAttribute("disabled")!=="false",Yl=r=>{if(!document.documentElement.attachShadow)return null;if(typeof r.getRootNode=="function"){const e=r.getRootNode();return e instanceof ShadowRoot?e:null}return r instanceof ShadowRoot?r:r.parentNode?Yl(r.parentNode):null},Fi=()=>{},$r=r=>{r.offsetHeight},Vl=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ys=[],Np=r=>{document.readyState==="loading"?(ys.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of ys)e()}),ys.push(r)):r()},qe=()=>document.documentElement.dir==="rtl",We=r=>{Np(()=>{const e=Vl();if(e){const t=r.NAME,i=e.fn[t];e.fn[t]=r.jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=()=>(e.fn[t]=i,r.jQueryInterface)}})},Pe=(r,e=[],t=r)=>typeof r=="function"?r(...e):t,Gl=(r,e,t=!0)=>{if(!t){Pe(r);return}const i=5,s=qp(e)+i;let a=!1;const o=({target:n})=>{n===e&&(a=!0,e.removeEventListener(On,o),Pe(r))};e.addEventListener(On,o),setTimeout(()=>{a||Xl(e)},s)},io=(r,e,t,i)=>{const s=r.length;let a=r.indexOf(e);return a===-1?!t&&i?r[s-1]:r[0]:(a+=t?1:-1,i&&(a=(a+s)%s),r[Math.max(0,Math.min(a,s-1))])},Wp=/[^.]*(?=\..*)\.|.*/,jp=/\..*/,zp=/::\d+$/,bs={};let Go=1;const Hl={mouseenter:"mouseover",mouseleave:"mouseout"},Up=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Zl(r,e){return e&&`${e}::${Go++}`||r.uidEvent||Go++}function Jl(r){const e=Zl(r);return r.uidEvent=e,bs[e]=bs[e]||{},bs[e]}function Xp(r,e){return function t(i){return so(i,{delegateTarget:r}),t.oneOff&&j.off(r,i.type,e),e.apply(r,[i])}}function Yp(r,e,t){return function i(s){const a=r.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const n of a)if(n===o)return so(s,{delegateTarget:o}),i.oneOff&&j.off(r,s.type,e,t),t.apply(o,[s])}}function Kl(r,e,t=null){return Object.values(r).find(i=>i.callable===e&&i.delegationSelector===t)}function eh(r,e,t){const i=typeof e=="string",s=i?t:e||t;let a=th(r);return Up.has(a)||(a=r),[i,s,a]}function Ho(r,e,t,i,s){if(typeof e!="string"||!r)return;let[a,o,n]=eh(e,t,i);e in Hl&&(o=(g=>function(d){if(!d.relatedTarget||d.relatedTarget!==d.delegateTarget&&!d.delegateTarget.contains(d.relatedTarget))return g.call(this,d)})(o));const c=Jl(r),u=c[n]||(c[n]={}),l=Kl(u,o,a?t:null);if(l){l.oneOff=l.oneOff&&s;return}const h=Zl(o,e.replace(Wp,"")),p=a?Yp(r,t,o):Xp(r,o);p.delegationSelector=a?t:null,p.callable=o,p.oneOff=s,p.uidEvent=h,u[h]=p,r.addEventListener(n,p,a)}function vn(r,e,t,i,s){const a=Kl(e[t],i,s);a&&(r.removeEventListener(t,a,!!s),delete e[t][a.uidEvent])}function Vp(r,e,t,i){const s=e[t]||{};for(const[a,o]of Object.entries(s))a.includes(i)&&vn(r,e,t,o.callable,o.delegationSelector)}function th(r){return r=r.replace(jp,""),Hl[r]||r}const j={on(r,e,t,i){Ho(r,e,t,i,!1)},one(r,e,t,i){Ho(r,e,t,i,!0)},off(r,e,t,i){if(typeof e!="string"||!r)return;const[s,a,o]=eh(e,t,i),n=o!==e,c=Jl(r),u=c[o]||{},l=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(u).length)return;vn(r,c,o,a,s?t:null);return}if(l)for(const h of Object.keys(c))Vp(r,c,h,e.slice(1));for(const[h,p]of Object.entries(u)){const _=h.replace(zp,"");(!n||e.includes(_))&&vn(r,c,o,p.callable,p.delegationSelector)}},trigger(r,e,t){if(typeof e!="string"||!r)return null;const i=Vl(),s=th(e),a=e!==s;let o=null,n=!0,c=!0,u=!1;a&&i&&(o=i.Event(e,t),i(r).trigger(o),n=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());const l=so(new Event(e,{bubbles:n,cancelable:!0}),t);return u&&l.preventDefault(),c&&r.dispatchEvent(l),l.defaultPrevented&&o&&o.preventDefault(),l}};function so(r,e={}){for(const[t,i]of Object.entries(e))try{r[t]=i}catch{Object.defineProperty(r,t,{configurable:!0,get(){return i}})}return r}function Zo(r){if(r==="true")return!0;if(r==="false")return!1;if(r===Number(r).toString())return Number(r);if(r===""||r==="null")return null;if(typeof r!="string")return r;try{return JSON.parse(decodeURIComponent(r))}catch{return r}}function Cs(r){return r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const pt={setDataAttribute(r,e,t){r.setAttribute(`data-bs-${Cs(e)}`,t)},removeDataAttribute(r,e){r.removeAttribute(`data-bs-${Cs(e)}`)},getDataAttributes(r){if(!r)return{};const e={},t=Object.keys(r.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of t){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=Zo(r.dataset[i])}return e},getDataAttribute(r,e){return Zo(r.getAttribute(`data-bs-${Cs(e)}`))}};class Mr{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=ft(t)?pt.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...ft(t)?pt.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,s]of Object.entries(t)){const a=e[i],o=ft(a)?"element":Bp(a);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}}const Gp="5.3.2";class Ze extends Mr{constructor(e,t){super(),e=Ct(e),e&&(this._element=e,this._config=this._getConfig(t),vs.set(this._element,this.constructor.DATA_KEY,this))}dispose(){vs.remove(this._element,this.constructor.DATA_KEY),j.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){Gl(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return vs.get(Ct(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Gp}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const xs=r=>{let e=r.getAttribute("data-bs-target");if(!e||e==="#"){let t=r.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?Ul(t.trim()):null}return e},K={find(r,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,r))},findOne(r,e=document.documentElement){return Element.prototype.querySelector.call(e,r)},children(r,e){return[].concat(...r.children).filter(t=>t.matches(e))},parents(r,e){const t=[];let i=r.parentNode.closest(e);for(;i;)t.push(i),i=i.parentNode.closest(e);return t},prev(r,e){let t=r.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(r,e){let t=r.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(r){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,r).filter(t=>!xt(t)&&hr(t))},getSelectorFromElement(r){const e=xs(r);return e&&K.findOne(e)?e:null},getElementFromSelector(r){const e=xs(r);return e?K.findOne(e):null},getMultipleElementsFromSelector(r){const e=xs(r);return e?K.find(e):[]}},Ji=(r,e="hide")=>{const t=`click.dismiss${r.EVENT_KEY}`,i=r.NAME;j.on(document,t,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),xt(this))return;const a=K.getElementFromSelector(this)||this.closest(`.${i}`);r.getOrCreateInstance(a)[e]()})},Hp="alert",Zp="bs.alert",rh=`.${Zp}`,Jp=`close${rh}`,Kp=`closed${rh}`,eg="fade",tg="show";class Ki extends Ze{static get NAME(){return Hp}close(){if(j.trigger(this._element,Jp).defaultPrevented)return;this._element.classList.remove(tg);const t=this._element.classList.contains(eg);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),j.trigger(this._element,Kp),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Ki.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Ji(Ki,"close");We(Ki);const rg="button",ig="bs.button",sg=`.${ig}`,ng=".data-api",og="active",Jo='[data-bs-toggle="button"]',ag=`click${sg}${ng}`;class es extends Ze{static get NAME(){return rg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(og))}static jQueryInterface(e){return this.each(function(){const t=es.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}j.on(document,ag,Jo,r=>{r.preventDefault();const e=r.target.closest(Jo);es.getOrCreateInstance(e).toggle()});We(es);const cg="swipe",ur=".bs.swipe",lg=`touchstart${ur}`,hg=`touchmove${ur}`,ug=`touchend${ur}`,dg=`pointerdown${ur}`,fg=`pointerup${ur}`,pg="touch",gg="pen",_g="pointer-event",mg=40,Og={endCallback:null,leftCallback:null,rightCallback:null},vg={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ii extends Mr{constructor(e,t){super(),this._element=e,!(!e||!Ii.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Og}static get DefaultType(){return vg}static get NAME(){return cg}dispose(){j.off(this._element,ur)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Pe(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=mg)return;const t=e/this._deltaX;this._deltaX=0,t&&Pe(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(j.on(this._element,dg,e=>this._start(e)),j.on(this._element,fg,e=>this._end(e)),this._element.classList.add(_g)):(j.on(this._element,lg,e=>this._start(e)),j.on(this._element,hg,e=>this._move(e)),j.on(this._element,ug,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===gg||e.pointerType===pg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const yg="carousel",bg="bs.carousel",wt=`.${bg}`,ih=".data-api",Cg="ArrowLeft",xg="ArrowRight",Dg=500,gr="next",Ut="prev",Gt="left",li="right",Sg=`slide${wt}`,Ds=`slid${wt}`,wg=`keydown${wt}`,Eg=`mouseenter${wt}`,Tg=`mouseleave${wt}`,Pg=`dragstart${wt}`,Ag=`load${wt}${ih}`,Rg=`click${wt}${ih}`,sh="carousel",Wr="active",Lg="slide",kg="carousel-item-end",$g="carousel-item-start",Mg="carousel-item-next",Fg="carousel-item-prev",nh=".active",oh=".carousel-item",Ig=nh+oh,Bg=".carousel-item img",Qg=".carousel-indicators",qg="[data-bs-slide], [data-bs-slide-to]",Ng='[data-bs-ride="carousel"]',Wg={[Cg]:li,[xg]:Gt},jg={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},zg={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Fr extends Ze{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=K.findOne(Qg,this._element),this._addEventListeners(),this._config.ride===sh&&this.cycle()}static get Default(){return jg}static get DefaultType(){return zg}static get NAME(){return yg}next(){this._slide(gr)}nextWhenVisible(){!document.hidden&&hr(this._element)&&this.next()}prev(){this._slide(Ut)}pause(){this._isSliding&&Xl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){j.one(this._element,Ds,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){j.one(this._element,Ds,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?gr:Ut;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&j.on(this._element,wg,e=>this._keydown(e)),this._config.pause==="hover"&&(j.on(this._element,Eg,()=>this.pause()),j.on(this._element,Tg,()=>this._maybeEnableCycle())),this._config.touch&&Ii.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of K.find(Bg,this._element))j.on(i,Pg,s=>s.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Gt)),rightCallback:()=>this._slide(this._directionToOrder(li)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Dg+this._config.interval))}};this._swipeHelper=new Ii(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Wg[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=K.findOne(nh,this._indicatorsElement);t.classList.remove(Wr),t.removeAttribute("aria-current");const i=K.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Wr),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===gr,a=t||io(this._getItems(),i,s,this._config.wrap);if(a===i)return;const o=this._getItemIndex(a),n=_=>j.trigger(this._element,_,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(n(Sg).defaultPrevented||!i||!a)return;const u=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=a;const l=s?$g:kg,h=s?Mg:Fg;a.classList.add(h),$r(a),i.classList.add(l),a.classList.add(l);const p=()=>{a.classList.remove(l,h),a.classList.add(Wr),i.classList.remove(Wr,h,l),this._isSliding=!1,n(Ds)};this._queueCallback(p,i,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(Lg)}_getActive(){return K.findOne(Ig,this._element)}_getItems(){return K.find(oh,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return qe()?e===Gt?Ut:gr:e===Gt?gr:Ut}_orderToDirection(e){return qe()?e===Ut?Gt:li:e===Ut?li:Gt}static jQueryInterface(e){return this.each(function(){const t=Fr.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(document,Rg,qg,function(r){const e=K.getElementFromSelector(this);if(!e||!e.classList.contains(sh))return;r.preventDefault();const t=Fr.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){t.to(i),t._maybeEnableCycle();return}if(pt.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});j.on(window,Ag,()=>{const r=K.find(Ng);for(const e of r)Fr.getOrCreateInstance(e)});We(Fr);const Ug="collapse",Xg="bs.collapse",Ir=`.${Xg}`,Yg=".data-api",Vg=`show${Ir}`,Gg=`shown${Ir}`,Hg=`hide${Ir}`,Zg=`hidden${Ir}`,Jg=`click${Ir}${Yg}`,Ss="show",Zt="collapse",jr="collapsing",Kg="collapsed",e_=`:scope .${Zt} .${Zt}`,t_="collapse-horizontal",r_="width",i_="height",s_=".collapse.show, .collapse.collapsing",yn='[data-bs-toggle="collapse"]',n_={parent:null,toggle:!0},o_={parent:"(null|element)",toggle:"boolean"};class Pr extends Ze{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=K.find(yn);for(const s of i){const a=K.getSelectorFromElement(s),o=K.find(a).filter(n=>n===this._element);a!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return n_}static get DefaultType(){return o_}static get NAME(){return Ug}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(s_).filter(n=>n!==this._element).map(n=>Pr.getOrCreateInstance(n,{toggle:!1}))),e.length&&e[0]._isTransitioning||j.trigger(this._element,Vg).defaultPrevented)return;for(const n of e)n.hide();const i=this._getDimension();this._element.classList.remove(Zt),this._element.classList.add(jr),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(jr),this._element.classList.add(Zt,Ss),this._element.style[i]="",j.trigger(this._element,Gg)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||j.trigger(this._element,Hg).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,$r(this._element),this._element.classList.add(jr),this._element.classList.remove(Zt,Ss);for(const s of this._triggerArray){const a=K.getElementFromSelector(s);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(jr),this._element.classList.add(Zt),j.trigger(this._element,Zg)};this._element.style[t]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ss)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Ct(e.parent),e}_getDimension(){return this._element.classList.contains(t_)?r_:i_}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(yn);for(const t of e){const i=K.getElementFromSelector(t);i&&this._addAriaAndCollapsedClass([t],this._isShown(i))}}_getFirstLevelChildren(e){const t=K.find(e_,this._config.parent);return K.find(e,this._config.parent).filter(i=>!t.includes(i))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle(Kg,!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=Pr.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}j.on(document,Jg,yn,function(r){(r.target.tagName==="A"||r.delegateTarget&&r.delegateTarget.tagName==="A")&&r.preventDefault();for(const e of K.getMultipleElementsFromSelector(this))Pr.getOrCreateInstance(e,{toggle:!1}).toggle()});We(Pr);const Ko="dropdown",a_="bs.dropdown",qt=`.${a_}`,no=".data-api",c_="Escape",ea="Tab",l_="ArrowUp",ta="ArrowDown",h_=2,u_=`hide${qt}`,d_=`hidden${qt}`,f_=`show${qt}`,p_=`shown${qt}`,ah=`click${qt}${no}`,ch=`keydown${qt}${no}`,g_=`keyup${qt}${no}`,Ht="show",__="dropup",m_="dropend",O_="dropstart",v_="dropup-center",y_="dropdown-center",At='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',b_=`${At}.${Ht}`,hi=".dropdown-menu",C_=".navbar",x_=".navbar-nav",D_=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",S_=qe()?"top-end":"top-start",w_=qe()?"top-start":"top-end",E_=qe()?"bottom-end":"bottom-start",T_=qe()?"bottom-start":"bottom-end",P_=qe()?"left-start":"right-start",A_=qe()?"right-start":"left-start",R_="top",L_="bottom",k_={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},$_={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class rt extends Ze{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=K.next(this._element,hi)[0]||K.prev(this._element,hi)[0]||K.findOne(hi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return k_}static get DefaultType(){return $_}static get NAME(){return Ko}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xt(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!j.trigger(this._element,f_,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(x_))for(const i of[].concat(...document.body.children))j.on(i,"mouseover",Fi);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ht),this._element.classList.add(Ht),j.trigger(this._element,p_,e)}}hide(){if(xt(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!j.trigger(this._element,u_,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))j.off(i,"mouseover",Fi);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ht),this._element.classList.remove(Ht),this._element.setAttribute("aria-expanded","false"),pt.removeDataAttribute(this._menu,"popper"),j.trigger(this._element,d_,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!ft(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Ko.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof zl>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:ft(this._config.reference)?e=Ct(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=ro(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Ht)}_getPlacement(){const e=this._parent;if(e.classList.contains(m_))return P_;if(e.classList.contains(O_))return A_;if(e.classList.contains(v_))return R_;if(e.classList.contains(y_))return L_;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(__)?t?w_:S_:t?T_:E_}_detectNavbar(){return this._element.closest(C_)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(pt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Pe(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=K.find(D_,this._menu).filter(s=>hr(s));i.length&&io(i,t,e===ta,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=rt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===h_||e.type==="keyup"&&e.key!==ea)return;const t=K.find(b_);for(const i of t){const s=rt.getInstance(i);if(!s||s._config.autoClose===!1)continue;const a=e.composedPath(),o=a.includes(s._menu);if(a.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===ea||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:s._element};e.type==="click"&&(n.clickEvent=e),s._completeHide(n)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i=e.key===c_,s=[l_,ta].includes(e.key);if(!s&&!i||t&&!i)return;e.preventDefault();const a=this.matches(At)?this:K.prev(this,At)[0]||K.next(this,At)[0]||K.findOne(At,e.delegateTarget.parentNode),o=rt.getOrCreateInstance(a);if(s){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),a.focus())}}j.on(document,ch,At,rt.dataApiKeydownHandler);j.on(document,ch,hi,rt.dataApiKeydownHandler);j.on(document,ah,rt.clearMenus);j.on(document,g_,rt.clearMenus);j.on(document,ah,At,function(r){r.preventDefault(),rt.getOrCreateInstance(this).toggle()});We(rt);const lh="backdrop",M_="fade",ra="show",ia=`mousedown.bs.${lh}`,F_={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},I_={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class hh extends Mr{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return F_}static get DefaultType(){return I_}static get NAME(){return lh}show(e){if(!this._config.isVisible){Pe(e);return}this._append();const t=this._getElement();this._config.isAnimated&&$r(t),t.classList.add(ra),this._emulateAnimation(()=>{Pe(e)})}hide(e){if(!this._config.isVisible){Pe(e);return}this._getElement().classList.remove(ra),this._emulateAnimation(()=>{this.dispose(),Pe(e)})}dispose(){this._isAppended&&(j.off(this._element,ia),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(M_),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ct(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),j.on(e,ia,()=>{Pe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Gl(e,this._getElement(),this._config.isAnimated)}}const B_="focustrap",Q_="bs.focustrap",Bi=`.${Q_}`,q_=`focusin${Bi}`,N_=`keydown.tab${Bi}`,W_="Tab",j_="forward",sa="backward",z_={autofocus:!0,trapElement:null},U_={autofocus:"boolean",trapElement:"element"};class uh extends Mr{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return z_}static get DefaultType(){return U_}static get NAME(){return B_}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),j.off(document,Bi),j.on(document,q_,e=>this._handleFocusin(e)),j.on(document,N_,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,j.off(document,Bi))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=K.focusableChildren(t);i.length===0?t.focus():this._lastTabNavDirection===sa?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===W_&&(this._lastTabNavDirection=e.shiftKey?sa:j_)}}const na=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",oa=".sticky-top",zr="padding-right",aa="margin-right";class bn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,zr,t=>t+e),this._setElementAttributes(na,zr,t=>t+e),this._setElementAttributes(oa,aa,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,zr),this._resetElementAttributes(na,zr),this._resetElementAttributes(oa,aa)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth(),a=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,t);const n=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${i(Number.parseFloat(n))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&pt.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){const i=s=>{const a=pt.getDataAttribute(s,t);if(a===null){s.style.removeProperty(t);return}pt.removeDataAttribute(s,t),s.style.setProperty(t,a)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,t){if(ft(e)){t(e);return}for(const i of K.find(e,this._element))t(i)}}const X_="modal",Y_="bs.modal",Ne=`.${Y_}`,V_=".data-api",G_="Escape",H_=`hide${Ne}`,Z_=`hidePrevented${Ne}`,dh=`hidden${Ne}`,fh=`show${Ne}`,J_=`shown${Ne}`,K_=`resize${Ne}`,em=`click.dismiss${Ne}`,tm=`mousedown.dismiss${Ne}`,rm=`keydown.dismiss${Ne}`,im=`click${Ne}${V_}`,ca="modal-open",sm="fade",la="show",ws="modal-static",nm=".modal.show",om=".modal-dialog",am=".modal-body",cm='[data-bs-toggle="modal"]',lm={backdrop:!0,focus:!0,keyboard:!0},hm={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ft extends Ze{constructor(e,t){super(e,t),this._dialog=K.findOne(om,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new bn,this._addEventListeners()}static get Default(){return lm}static get DefaultType(){return hm}static get NAME(){return X_}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||j.trigger(this._element,fh,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ca),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||j.trigger(this._element,H_).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(la),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){j.off(window,Ne),j.off(this._dialog,Ne),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new hh({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new uh({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=K.findOne(am,this._dialog);t&&(t.scrollTop=0),$r(this._element),this._element.classList.add(la);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,j.trigger(this._element,J_,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){j.on(this._element,rm,e=>{if(e.key===G_){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),j.on(window,K_,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),j.on(this._element,tm,e=>{j.one(this._element,em,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ca),this._resetAdjustments(),this._scrollBar.reset(),j.trigger(this._element,dh)})}_isAnimated(){return this._element.classList.contains(sm)}_triggerBackdropTransition(){if(j.trigger(this._element,Z_).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(ws)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(ws),this._queueCallback(()=>{this._element.classList.remove(ws),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const s=qe()?"paddingLeft":"paddingRight";this._element.style[s]=`${t}px`}if(!i&&e){const s=qe()?"paddingRight":"paddingLeft";this._element.style[s]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=Ft.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](t)}})}}j.on(document,im,cm,function(r){const e=K.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&r.preventDefault(),j.one(e,fh,s=>{s.defaultPrevented||j.one(e,dh,()=>{hr(this)&&this.focus()})});const t=K.findOne(nm);t&&Ft.getInstance(t).hide(),Ft.getOrCreateInstance(e).toggle(this)});Ji(Ft);We(Ft);const um="offcanvas",dm="bs.offcanvas",_t=`.${dm}`,ph=".data-api",fm=`load${_t}${ph}`,pm="Escape",ha="show",ua="showing",da="hiding",gm="offcanvas-backdrop",gh=".offcanvas.show",_m=`show${_t}`,mm=`shown${_t}`,Om=`hide${_t}`,fa=`hidePrevented${_t}`,_h=`hidden${_t}`,vm=`resize${_t}`,ym=`click${_t}${ph}`,bm=`keydown.dismiss${_t}`,Cm='[data-bs-toggle="offcanvas"]',xm={backdrop:!0,keyboard:!0,scroll:!1},Dm={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Dt extends Ze{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return xm}static get DefaultType(){return Dm}static get NAME(){return um}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||j.trigger(this._element,_m,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new bn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ua);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ha),this._element.classList.remove(ua),j.trigger(this._element,mm,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||j.trigger(this._element,Om).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(da),this._backdrop.hide();const t=()=>{this._element.classList.remove(ha,da),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new bn().reset(),j.trigger(this._element,_h)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){j.trigger(this._element,fa);return}this.hide()},t=!!this._config.backdrop;return new hh({className:gm,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new uh({trapElement:this._element})}_addEventListeners(){j.on(this._element,bm,e=>{if(e.key===pm){if(this._config.keyboard){this.hide();return}j.trigger(this._element,fa)}})}static jQueryInterface(e){return this.each(function(){const t=Dt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}j.on(document,ym,Cm,function(r){const e=K.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),xt(this))return;j.one(e,_h,()=>{hr(this)&&this.focus()});const t=K.findOne(gh);t&&t!==e&&Dt.getInstance(t).hide(),Dt.getOrCreateInstance(e).toggle(this)});j.on(window,fm,()=>{for(const r of K.find(gh))Dt.getOrCreateInstance(r).show()});j.on(window,vm,()=>{for(const r of K.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(r).position!=="fixed"&&Dt.getOrCreateInstance(r).hide()});Ji(Dt);We(Dt);const Sm=/^aria-[\w-]*$/i,mh={"*":["class","dir","id","lang","role",Sm],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},wm=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Em=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Tm=(r,e)=>{const t=r.nodeName.toLowerCase();return e.includes(t)?wm.has(t)?!!Em.test(r.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(t))};function Pm(r,e,t){if(!r.length)return r;if(t&&typeof t=="function")return t(r);const s=new window.DOMParser().parseFromString(r,"text/html"),a=[].concat(...s.body.querySelectorAll("*"));for(const o of a){const n=o.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){o.remove();continue}const c=[].concat(...o.attributes),u=[].concat(e["*"]||[],e[n]||[]);for(const l of c)Tm(l,u)||o.removeAttribute(l.nodeName)}return s.body.innerHTML}const Am="TemplateFactory",Rm={allowList:mh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Lm={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},km={entry:"(string|element|function|null)",selector:"(string|element)"};class $m extends Mr{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Rm}static get DefaultType(){return Lm}static get NAME(){return Am}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,a]of Object.entries(this._config.content))this._setContent(e,a,s);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},km)}_setContent(e,t,i){const s=K.findOne(i,e);if(s){if(t=this._resolvePossibleFunction(t),!t){s.remove();return}if(ft(t)){this._putElementInTemplate(Ct(t),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(t);return}s.textContent=t}}_maybeSanitize(e){return this._config.sanitize?Pm(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Pe(e,[this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const Mm="tooltip",Fm=new Set(["sanitize","allowList","sanitizeFn"]),Es="fade",Im="modal",Ur="show",Bm=".tooltip-inner",pa=`.${Im}`,ga="hide.bs.modal",_r="hover",Ts="focus",Qm="click",qm="manual",Nm="hide",Wm="hidden",jm="show",zm="shown",Um="inserted",Xm="click",Ym="focusin",Vm="focusout",Gm="mouseenter",Hm="mouseleave",Zm={AUTO:"auto",TOP:"top",RIGHT:qe()?"left":"right",BOTTOM:"bottom",LEFT:qe()?"right":"left"},Jm={allowList:mh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Km={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ke extends Ze{constructor(e,t){if(typeof zl>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Jm}static get DefaultType(){return Km}static get NAME(){return Mm}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),j.off(this._element.closest(pa),ga,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=j.trigger(this._element,this.constructor.eventName(jm)),i=(Yl(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(s),j.trigger(this._element,this.constructor.eventName(Um))),this._popper=this._createPopper(s),s.classList.add(Ur),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))j.on(n,"mouseover",Fi);const o=()=>{j.trigger(this._element,this.constructor.eventName(zm)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||j.trigger(this._element,this.constructor.eventName(Nm)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ur),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))j.off(s,"mouseover",Fi);this._activeTrigger[Qm]=!1,this._activeTrigger[Ts]=!1,this._activeTrigger[_r]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),j.trigger(this._element,this.constructor.eventName(Wm)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Es,Ur),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=Qp(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(Es),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new $m({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Bm]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Es)}_isShown(){return this.tip&&this.tip.classList.contains(Ur)}_createPopper(e){const t=Pe(this._config.placement,[this,e,this._element]),i=Zm[t.toUpperCase()];return ro(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Pe(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...t,...Pe(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")j.on(this._element,this.constructor.eventName(Xm),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(t!==qm){const i=t===_r?this.constructor.eventName(Gm):this.constructor.eventName(Ym),s=t===_r?this.constructor.eventName(Hm):this.constructor.eventName(Vm);j.on(this._element,i,this._config.selector,a=>{const o=this._initializeOnDelegatedTarget(a);o._activeTrigger[a.type==="focusin"?Ts:_r]=!0,o._enter()}),j.on(this._element,s,this._config.selector,a=>{const o=this._initializeOnDelegatedTarget(a);o._activeTrigger[a.type==="focusout"?Ts:_r]=o._element.contains(a.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},j.on(this._element.closest(pa),ga,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=pt.getDataAttributes(this._element);for(const i of Object.keys(t))Fm.has(i)&&delete t[i];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Ct(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=ke.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}We(ke);const e0="popover",t0=".popover-header",r0=".popover-body",i0={...ke.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},s0={...ke.DefaultType,content:"(null|string|element|function)"};class oo extends ke{static get Default(){return i0}static get DefaultType(){return s0}static get NAME(){return e0}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[t0]:this._getTitle(),[r0]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=oo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}We(oo);const n0="scrollspy",o0="bs.scrollspy",ao=`.${o0}`,a0=".data-api",c0=`activate${ao}`,_a=`click${ao}`,l0=`load${ao}${a0}`,h0="dropdown-item",Xt="active",u0='[data-bs-spy="scroll"]',Ps="[href]",d0=".nav, .list-group",ma=".nav-link",f0=".nav-item",p0=".list-group-item",g0=`${ma}, ${f0} > ${ma}, ${p0}`,_0=".dropdown",m0=".dropdown-toggle",O0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},v0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ts extends Ze{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return O0}static get DefaultType(){return v0}static get NAME(){return n0}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ct(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(j.off(this._config.target,_a),j.on(this._config.target,_a,Ps,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(t(o))},s=(this._rootElement||document.documentElement).scrollTop,a=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const n=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&n){if(i(o),!s)return;continue}!a&&!n&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=K.find(Ps,this._config.target);for(const t of e){if(!t.hash||xt(t))continue;const i=K.findOne(decodeURI(t.hash),this._element);hr(i)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Xt),this._activateParents(e),j.trigger(this._element,c0,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(h0)){K.findOne(m0,e.closest(_0)).classList.add(Xt);return}for(const t of K.parents(e,d0))for(const i of K.prev(t,g0))i.classList.add(Xt)}_clearActiveClass(e){e.classList.remove(Xt);const t=K.find(`${Ps}.${Xt}`,e);for(const i of t)i.classList.remove(Xt)}static jQueryInterface(e){return this.each(function(){const t=ts.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(window,l0,()=>{for(const r of K.find(u0))ts.getOrCreateInstance(r)});We(ts);const y0="tab",b0="bs.tab",Nt=`.${b0}`,C0=`hide${Nt}`,x0=`hidden${Nt}`,D0=`show${Nt}`,S0=`shown${Nt}`,w0=`click${Nt}`,E0=`keydown${Nt}`,T0=`load${Nt}`,P0="ArrowLeft",Oa="ArrowRight",A0="ArrowUp",va="ArrowDown",As="Home",ya="End",Rt="active",ba="fade",Rs="show",R0="dropdown",Oh=".dropdown-toggle",L0=".dropdown-menu",Ls=`:not(${Oh})`,k0='.list-group, .nav, [role="tablist"]',$0=".nav-item, .list-group-item",M0=`.nav-link${Ls}, .list-group-item${Ls}, [role="tab"]${Ls}`,vh='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ks=`${M0}, ${vh}`,F0=`.${Rt}[data-bs-toggle="tab"], .${Rt}[data-bs-toggle="pill"], .${Rt}[data-bs-toggle="list"]`;class cr extends Ze{constructor(e){super(e),this._parent=this._element.closest(k0),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),j.on(this._element,E0,t=>this._keydown(t)))}static get NAME(){return y0}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?j.trigger(t,C0,{relatedTarget:e}):null;j.trigger(e,D0,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Rt),this._activate(K.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Rs);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),j.trigger(e,S0,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(ba))}_deactivate(e,t){if(!e)return;e.classList.remove(Rt),e.blur(),this._deactivate(K.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Rs);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),j.trigger(e,x0,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(ba))}_keydown(e){if(![P0,Oa,A0,va,As,ya].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(s=>!xt(s));let i;if([As,ya].includes(e.key))i=t[e.key===As?0:t.length-1];else{const s=[Oa,va].includes(e.key);i=io(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),cr.getOrCreateInstance(i).show())}_getChildren(){return K.find(ks,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const i of t)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=K.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains(R0))return;const s=(a,o)=>{const n=K.findOne(a,i);n&&n.classList.toggle(o,t)};s(Oh,Rt),s(L0,Rs),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Rt)}_getInnerElement(e){return e.matches(ks)?e:K.findOne(ks,e)}_getOuterElement(e){return e.closest($0)||e}static jQueryInterface(e){return this.each(function(){const t=cr.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(document,w0,vh,function(r){["A","AREA"].includes(this.tagName)&&r.preventDefault(),!xt(this)&&cr.getOrCreateInstance(this).show()});j.on(window,T0,()=>{for(const r of K.find(F0))cr.getOrCreateInstance(r)});We(cr);const I0="toast",B0="bs.toast",Et=`.${B0}`,Q0=`mouseover${Et}`,q0=`mouseout${Et}`,N0=`focusin${Et}`,W0=`focusout${Et}`,j0=`hide${Et}`,z0=`hidden${Et}`,U0=`show${Et}`,X0=`shown${Et}`,Y0="fade",Ca="hide",Xr="show",Yr="showing",V0={animation:"boolean",autohide:"boolean",delay:"number"},G0={animation:!0,autohide:!0,delay:5e3};class rs extends Ze{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return G0}static get DefaultType(){return V0}static get NAME(){return I0}show(){if(j.trigger(this._element,U0).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Y0);const t=()=>{this._element.classList.remove(Yr),j.trigger(this._element,X0),this._maybeScheduleHide()};this._element.classList.remove(Ca),$r(this._element),this._element.classList.add(Xr,Yr),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||j.trigger(this._element,j0).defaultPrevented)return;const t=()=>{this._element.classList.add(Ca),this._element.classList.remove(Yr,Xr),j.trigger(this._element,z0)};this._element.classList.add(Yr),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Xr),super.dispose()}isShown(){return this._element.classList.contains(Xr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){j.on(this._element,Q0,e=>this._onInteraction(e,!0)),j.on(this._element,q0,e=>this._onInteraction(e,!1)),j.on(this._element,N0,e=>this._onInteraction(e,!0)),j.on(this._element,W0,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=rs.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Ji(rs);We(rs);const H0=typeof navigator>"u",Z0=H0?"node":navigator.userAgent;function J0(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Z0)}const yh=J0(),K0=async()=>{try{return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(await navigator.mediaDevices.enumerateDevices()).some(e=>e.kind==="videoinput"):(console.warn("navigator.mediaDevices.enumerateDevices not supported"),!1)}catch(r){return console.warn(r),!1}};let $s;const eO=async()=>$s??($s=await K0()),Cn=(r,e=100)=>{let t;return function(...i){clearTimeout(t),t=setTimeout(()=>r.apply(this,i),e)}};function xa(r,e){localStorage[r]=e,sessionStorage[r]=e}function tO(r,e){return localStorage[r]||sessionStorage[r]||e}function Qi(r){return Uh.sanitize(r)}class rO{contentSelector;buttonSelector;contentEl;buttonEl;constructor(e,t){this.contentSelector=e,this.buttonSelector=t,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(t),this.buttonEl.addEventListener("click",()=>{let i=new URL("./",window.location.href);i.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(i.toString()).then(()=>{ke.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),te(`${this.buttonSelector}.btn-primary`).style.display="none",te(`${this.buttonSelector}.btn-success`).style.display="",setTimeout(()=>{te(`${this.buttonSelector}.btn-primary`).style.display="",te(`${this.buttonSelector}.btn-success`).style.display="none",ke.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(s){console.error("Async: Could not copy text: ",s)})})}}var bh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={903:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseRenderLayer=void 0;const u=c(274),l=c(627),h=c(237),p=c(860),_=c(374),g=c(296),d=c(345),f=c(859),b=c(399),y=c(855);class m extends f.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var D;return(D=this._charAtlas)===null||D===void 0?void 0:D.pages[0].canvas}constructor(D,P,O,w,R,v,C,A,T,k){super(),this._terminal=D,this._container=P,this._alpha=R,this._themeService=v,this._bufferService=C,this._optionsService=A,this._decorationService=T,this._coreBrowserService=k,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,g.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new f.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new d.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new u.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${O}-layer`),this._canvas.style.zIndex=w.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(L),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,f.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,_.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(D,P){}handleSelectionChanged(D,P,O=!1){this._selectionModel.update(this._terminal,D,P,O)}_setTransparency(D){if(D===this._alpha)return;const P=this._canvas;this._alpha=D,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,P),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(D){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,l.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,D,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,d.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let P=0;P<this._charAtlas.pages.length;P++)this._bitmapGenerator[P]=new S(this._charAtlas.pages[P].canvas)}}resize(D){this._deviceCellWidth=D.device.cell.width,this._deviceCellHeight=D.device.cell.height,this._deviceCharWidth=D.device.char.width,this._deviceCharHeight=D.device.char.height,this._deviceCharLeft=D.device.char.left,this._deviceCharTop=D.device.char.top,this._canvas.width=D.device.canvas.width,this._canvas.height=D.device.canvas.height,this._canvas.style.width=`${D.css.canvas.width}px`,this._canvas.style.height=`${D.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var D;(D=this._charAtlas)===null||D===void 0||D.clearTexture()}_fillCells(D,P,O,w){this._ctx.fillRect(D*this._deviceCellWidth,P*this._deviceCellHeight,O*this._deviceCellWidth,w*this._deviceCellHeight)}_fillMiddleLineAtCells(D,P,O=1){const w=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(D*this._deviceCellWidth,(P+1)*this._deviceCellHeight-w-this._coreBrowserService.dpr,O*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(D,P,O=1,w=0){this._ctx.fillRect(D*this._deviceCellWidth,(P+1)*this._deviceCellHeight+w-this._coreBrowserService.dpr-1,O*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(D,P,O=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const w=this._coreBrowserService.dpr;this._ctx.lineWidth=w;for(let R=0;R<O;R++){const v=(D+R)*this._deviceCellWidth,C=(D+R+.5)*this._deviceCellWidth,A=(D+R+1)*this._deviceCellWidth,T=(P+1)*this._deviceCellHeight-w-1,k=T-w,L=T+w;this._ctx.moveTo(v,T),this._ctx.bezierCurveTo(v,k,C,k,C,T),this._ctx.bezierCurveTo(C,L,A,L,A,T)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(D,P,O=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const w=this._coreBrowserService.dpr;this._ctx.lineWidth=w,this._ctx.setLineDash([2*w,w]);const R=D*this._deviceCellWidth,v=(P+1)*this._deviceCellHeight-w-1;this._ctx.moveTo(R,v);for(let C=0;C<O;C++){const A=(D+O+C)*this._deviceCellWidth;this._ctx.lineTo(A,v)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(D,P,O=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const w=this._coreBrowserService.dpr;this._ctx.lineWidth=w,this._ctx.setLineDash([4*w,3*w]);const R=D*this._deviceCellWidth,v=(D+O)*this._deviceCellWidth,C=(P+1)*this._deviceCellHeight-w-1;this._ctx.moveTo(R,C),this._ctx.lineTo(v,C),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(D,P,O){this._ctx.fillRect(D*this._deviceCellWidth,P*this._deviceCellHeight,this._coreBrowserService.dpr*O,this._deviceCellHeight)}_strokeRectAtCell(D,P,O,w){const R=this._coreBrowserService.dpr;this._ctx.lineWidth=R,this._ctx.strokeRect(D*this._deviceCellWidth+R/2,P*this._deviceCellHeight+R/2,O*this._deviceCellWidth-R,w*this._deviceCellHeight-R)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(D,P,O,w){this._alpha?this._ctx.clearRect(D*this._deviceCellWidth,P*this._deviceCellHeight,O*this._deviceCellWidth,w*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(D*this._deviceCellWidth,P*this._deviceCellHeight,O*this._deviceCellWidth,w*this._deviceCellHeight))}_fillCharTrueColor(D,P,O){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipRow(O);let w=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(w=(0,p.tryDrawCustomChar)(this._ctx,D.getChars(),P*this._deviceCellWidth,O*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),w||this._ctx.fillText(D.getChars(),P*this._deviceCellWidth+this._deviceCharLeft,O*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(D,P,O){var w,R,v,C;const A=D.getChars();if(this._cellColorResolver.resolve(D,P,this._bufferService.buffer.ydisp+O),!this._charAtlas)return;let T;T=A&&A.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(A,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(D.getCode()||y.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),T.size.x&&T.size.y&&(this._ctx.save(),this._clipRow(O),this._bitmapGenerator[T.texturePage]&&this._charAtlas.pages[T.texturePage].canvas!==this._bitmapGenerator[T.texturePage].canvas&&((R=(w=this._bitmapGenerator[T.texturePage])===null||w===void 0?void 0:w.bitmap)===null||R===void 0||R.close(),delete this._bitmapGenerator[T.texturePage]),this._charAtlas.pages[T.texturePage].version!==((v=this._bitmapGenerator[T.texturePage])===null||v===void 0?void 0:v.version)&&(this._bitmapGenerator[T.texturePage]||(this._bitmapGenerator[T.texturePage]=new S(this._charAtlas.pages[T.texturePage].canvas)),this._bitmapGenerator[T.texturePage].refresh(),this._bitmapGenerator[T.texturePage].version=this._charAtlas.pages[T.texturePage].version),this._ctx.drawImage(((C=this._bitmapGenerator[T.texturePage])===null||C===void 0?void 0:C.bitmap)||this._charAtlas.pages[T.texturePage].canvas,T.texturePosition.x,T.texturePosition.y,T.size.x,T.size.y,P*this._deviceCellWidth+this._deviceCharLeft-T.offset.x,O*this._deviceCellHeight+this._deviceCharTop-T.offset.y,T.size.x,T.size.y),this._ctx.restore())}_clipRow(D){this._ctx.beginPath(),this._ctx.rect(0,D*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(D,P){return`${P?"italic":""} ${D?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}n.BaseRenderLayer=m;class S{get bitmap(){return this._bitmap}constructor(D){this.canvas=D,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var D;(D=this._bitmap)===null||D===void 0||D.close(),this._bitmap=void 0,b.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){var D;this._state===0&&((D=this._bitmap)===null||D===void 0||D.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(P=>{this._state===2?this.refresh():this._bitmap=P,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasRenderer=void 0;const u=c(627),l=c(56),h=c(374),p=c(345),_=c(859),g=c(873),d=c(43),f=c(630),b=c(744);class y extends _.Disposable{constructor(S,E,D,P,O,w,R,v,C,A,T){super(),this._terminal=S,this._screenElement=E,this._bufferService=P,this._charSizeService=O,this._optionsService=w,this._coreBrowserService=C,this._themeService=T,this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const k=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new b.TextRenderLayer(this._terminal,this._screenElement,0,k,this._bufferService,this._optionsService,R,A,this._coreBrowserService,T),new f.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,A,this._optionsService,T),new d.LinkRenderLayer(this._terminal,this._screenElement,2,D,this._bufferService,this._optionsService,A,this._coreBrowserService,T),new g.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,v,this._coreBrowserService,A,T)];for(const L of this._renderLayers)(0,p.forwardEvent)(L.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,h.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,l.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(L,M)=>this._setCanvasDevicePixelDimensions(L,M))),this.register((0,_.toDisposable)(()=>{for(const L of this._renderLayers)L.dispose();(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(S,E){this._updateDimensions();for(const D of this._renderLayers)D.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(S=>S.handleBlur())}handleFocus(){this._runOperation(S=>S.handleFocus())}handleSelectionChanged(S,E,D=!1){this._runOperation(P=>P.handleSelectionChanged(S,E,D)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(S=>S.handleCursorMove())}clear(){this._runOperation(S=>S.reset())}_runOperation(S){for(const E of this._renderLayers)S(E)}renderRows(S,E){for(const D of this._renderLayers)D.handleGridChanged(S,E)}clearTextureAtlas(){for(const S of this._renderLayers)S.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const S=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*S),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*S),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/S),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/S),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(S,E){this.dimensions.device.canvas.height=E,this.dimensions.device.canvas.width=S;for(const D of this._renderLayers)D.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}n.CanvasRenderer=y},873:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CursorRenderLayer=void 0;const u=c(457),l=c(859),h=c(399),p=c(782),_=c(903);class g extends _.BaseRenderLayer{constructor(f,b,y,m,S,E,D,P,O,w){super(f,b,"cursor",y,!0,w,S,E,O,P),this._onRequestRedraw=m,this._coreService=D,this._cursorBlinkStateManager=this.register(new l.MutableDisposable),this._cell=new p.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(f){super.resize(f),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var f;this._clearCursor(),(f=this._cursorBlinkStateManager.value)===null||f===void 0||f.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var f;(f=this._cursorBlinkStateManager.value)===null||f===void 0||f.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var f;(f=this._cursorBlinkStateManager.value)===null||f===void 0||f.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new u.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var f;(f=this._cursorBlinkStateManager.value)===null||f===void 0||f.restartBlinkAnimation()}handleGridChanged(f,b){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(f){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const b=this._bufferService.buffer.ybase+this._bufferService.buffer.y,y=b-this._bufferService.buffer.ydisp;if(y<0||y>=this._bufferService.rows)return void this._clearCursor();const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(b).loadCell(m,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const S=this._optionsService.rawOptions.cursorStyle,E=this._optionsService.rawOptions.cursorInactiveStyle;return E&&E!=="none"&&this._cursorRenderers[E](m,y,this._cell),this._ctx.restore(),this._state.x=m,this._state.y=y,this._state.isFocused=!1,this._state.style=S,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===m&&this._state.y===y&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](m,y,this._cell),this._ctx.restore(),this._state.x=m,this._state.y=y,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(h.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(f,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(f,b,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(f,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(f,b,y.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(y,f,b),this._ctx.restore()}_renderUnderlineCursor(f,b,y){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(f,b),this._ctx.restore()}_renderOutlineCursor(f,b,y){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(f,b,y.getWidth(),1),this._ctx.restore()}}n.CursorRenderLayer=g},574:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GridCache=void 0,n.GridCache=class{constructor(){this.cache=[]}resize(c,u){for(let l=0;l<c;l++){this.cache.length<=l&&this.cache.push([]);for(let h=this.cache[l].length;h<u;h++)this.cache[l].push(void 0);this.cache[l].length=u}this.cache.length=c}clear(){for(let c=0;c<this.cache.length;c++)for(let u=0;u<this.cache[c].length;u++)this.cache[c][u]=void 0}}},43:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LinkRenderLayer=void 0;const u=c(197),l=c(237),h=c(903);class p extends h.BaseRenderLayer{constructor(g,d,f,b,y,m,S,E,D){super(g,d,"link",f,!0,D,y,m,S,E),this.register(b.onShowLinkUnderline(P=>this._handleShowLinkUnderline(P))),this.register(b.onHideLinkUnderline(P=>this._handleHideLinkUnderline(P)))}resize(g){super.resize(g),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const g=this._state.y2-this._state.y1-1;g>0&&this._clearCells(0,this._state.y1+1,this._state.cols,g),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(g){if(g.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:g.fg&&(0,u.is256Color)(g.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[g.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,g.y1===g.y2)this._fillBottomLineAtCells(g.x1,g.y1,g.x2-g.x1);else{this._fillBottomLineAtCells(g.x1,g.y1,g.cols-g.x1);for(let d=g.y1+1;d<g.y2;d++)this._fillBottomLineAtCells(0,d,g.cols);this._fillBottomLineAtCells(0,g.y2,g.x2)}this._state=g}_handleHideLinkUnderline(g){this._clearCurrentLink()}}n.LinkRenderLayer=p},630:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionRenderLayer=void 0;const u=c(903);class l extends u.BaseRenderLayer{constructor(p,_,g,d,f,b,y,m){super(p,_,"selection",g,!0,m,d,y,b,f),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(p){super.resize(p),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(p,_,g){super.handleSelectionChanged(p,_,g),this._redrawSelection(p,_,g)}_redrawSelection(p,_,g){if(!this._didStateChange(p,_,g,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!p||!_)return void this._clearState();const d=p[1]-this._bufferService.buffer.ydisp,f=_[1]-this._bufferService.buffer.ydisp,b=Math.max(d,0),y=Math.min(f,this._bufferService.rows-1);if(b>=this._bufferService.rows||y<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,g){const m=p[0],S=_[0]-m,E=y-b+1;this._fillCells(m,b,S,E)}else{const m=d===b?p[0]:0,S=b===f?_[0]:this._bufferService.cols;this._fillCells(m,b,S-m,1);const E=Math.max(y-b-1,0);if(this._fillCells(0,b+1,this._bufferService.cols,E),b!==y){const D=f===y?_[0]:this._bufferService.cols;this._fillCells(0,y,D,1)}}this._state.start=[p[0],p[1]],this._state.end=[_[0],_[1]],this._state.columnSelectMode=g,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(p,_,g,d){return!this._areCoordinatesEqual(p,this._state.start)||!this._areCoordinatesEqual(_,this._state.end)||g!==this._state.columnSelectMode||d!==this._state.ydisp}_areCoordinatesEqual(p,_){return!(!p||!_)&&p[0]===_[0]&&p[1]===_[1]}}n.SelectionRenderLayer=l},744:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextRenderLayer=void 0;const u=c(577),l=c(147),h=c(782),p=c(855),_=c(903),g=c(574);class d extends _.BaseRenderLayer{constructor(b,y,m,S,E,D,P,O,w,R){super(b,y,"text",m,S,R,E,D,O,w),this._characterJoinerService=P,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new h.CellData,this._state=new g.GridCache,this.register(D.onSpecificOptionChange("allowTransparency",v=>this._setTransparency(v)))}resize(b){super.resize(b);const y=this._getFont(!1,!1);this._characterWidth===b.device.char.width&&this._characterFont===y||(this._characterWidth=b.device.char.width,this._characterFont=y,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(b,y,m){for(let S=b;S<=y;S++){const E=S+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.lines.get(E),P=this._characterJoinerService.getJoinedCharacters(E);for(let O=0;O<this._bufferService.cols;O++){D.loadCell(O,this._workCell);let w=this._workCell,R=!1,v=O;if(w.getWidth()!==0){if(P.length>0&&O===P[0][0]){R=!0;const C=P.shift();w=new u.JoinedCellData(this._workCell,D.translateToString(!0,C[0],C[1]),C[1]-C[0]),v=C[1]-1}!R&&this._isOverlapping(w)&&v<D.length-1&&D.getCodePoint(v+1)===p.NULL_CELL_CODE&&(w.content&=-12582913,w.content|=8388608),m(w,O,S),O=v}}}}_drawBackground(b,y){const m=this._ctx,S=this._bufferService.cols;let E=0,D=0,P=null;m.save(),this._forEachCell(b,y,(O,w,R)=>{let v=null;O.isInverse()?v=O.isFgDefault()?this._themeService.colors.foreground.css:O.isFgRGB()?`rgb(${l.AttributeData.toColorRGB(O.getFgColor()).join(",")})`:this._themeService.colors.ansi[O.getFgColor()].css:O.isBgRGB()?v=`rgb(${l.AttributeData.toColorRGB(O.getBgColor()).join(",")})`:O.isBgPalette()&&(v=this._themeService.colors.ansi[O.getBgColor()].css);let C=!1;this._decorationService.forEachDecorationAtCell(w,this._bufferService.buffer.ydisp+R,void 0,A=>{A.options.layer!=="top"&&C||(A.backgroundColorRGB&&(v=A.backgroundColorRGB.css),C=A.options.layer==="top")}),P===null&&(E=w,D=R),R!==D?(m.fillStyle=P||"",this._fillCells(E,D,S-E,1),E=w,D=R):P!==v&&(m.fillStyle=P||"",this._fillCells(E,D,w-E,1),E=w,D=R),P=v}),P!==null&&(m.fillStyle=P,this._fillCells(E,D,S-E,1)),m.restore()}_drawForeground(b,y){this._forEachCell(b,y,(m,S,E)=>this._drawChars(m,S,E))}handleGridChanged(b,y){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,b,this._bufferService.cols,y-b+1),this._drawBackground(b,y),this._drawForeground(b,y))}_isOverlapping(b){if(b.getWidth()!==1||b.getCode()<256)return!1;const y=b.getChars();if(this._characterOverlapCache.hasOwnProperty(y))return this._characterOverlapCache[y];this._ctx.save(),this._ctx.font=this._characterFont;const m=Math.floor(this._ctx.measureText(y).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[y]=m,m}}n.TextRenderLayer=d},274:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellColorResolver=void 0;let c,u=0,l=0,h=!1,p=!1,_=!1;n.CellColorResolver=class{constructor(g,d,f,b,y){this._terminal=g,this._selectionRenderModel=d,this._decorationService=f,this._coreBrowserService=b,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(g,d,f){this.result.bg=g.bg,this.result.fg=g.fg,this.result.ext=268435456&g.bg?g.extended.ext:0,l=0,u=0,p=!1,h=!1,_=!1,c=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,f,"bottom",b=>{b.backgroundColorRGB&&(l=b.backgroundColorRGB.rgba>>8&16777215,p=!0),b.foregroundColorRGB&&(u=b.foregroundColorRGB.rgba>>8&16777215,h=!0)}),_=this._selectionRenderModel.isCellSelected(this._terminal,d,f),_&&(l=(this._coreBrowserService.isFocused?c.selectionBackgroundOpaque:c.selectionInactiveBackgroundOpaque).rgba>>8&16777215,p=!0,c.selectionForeground&&(u=c.selectionForeground.rgba>>8&16777215,h=!0)),this._decorationService.forEachDecorationAtCell(d,f,"top",b=>{b.backgroundColorRGB&&(l=b.backgroundColorRGB.rgba>>8&16777215,p=!0),b.foregroundColorRGB&&(u=b.foregroundColorRGB.rgba>>8&16777215,h=!0)}),p&&(l=_?-16777216&g.bg&-134217729|l|50331648:-16777216&g.bg|l|50331648),h&&(u=-16777216&g.fg&-67108865|u|50331648),67108864&this.result.fg&&(p&&!h&&(u=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&c.background.rgba>>8|50331648,h=!0),!p&&h&&(l=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&c.foreground.rgba>>8|50331648,p=!0)),c=void 0,this.result.bg=p?l:this.result.bg,this.result.fg=h?u:this.result.fg}}},627:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.removeTerminalFromCache=n.acquireTextureAtlas=void 0;const u=c(509),l=c(197),h=[];n.acquireTextureAtlas=function(p,_,g,d,f,b,y,m){const S=(0,l.generateConfig)(d,f,b,y,_,g,m);for(let P=0;P<h.length;P++){const O=h[P],w=O.ownedBy.indexOf(p);if(w>=0){if((0,l.configEquals)(O.config,S))return O.atlas;O.ownedBy.length===1?(O.atlas.dispose(),h.splice(P,1)):O.ownedBy.splice(w,1);break}}for(let P=0;P<h.length;P++){const O=h[P];if((0,l.configEquals)(O.config,S))return O.ownedBy.push(p),O.atlas}const E=p._core,D={atlas:new u.TextureAtlas(document,S,E.unicodeService),config:S,ownedBy:[p]};return h.push(D),D.atlas},n.removeTerminalFromCache=function(p){for(let _=0;_<h.length;_++){const g=h[_].ownedBy.indexOf(p);if(g!==-1){h[_].ownedBy.length===1?(h[_].atlas.dispose(),h.splice(_,1)):h[_].ownedBy.splice(g,1);break}}}},197:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.is256Color=n.configEquals=n.generateConfig=void 0;const u=c(160);n.generateConfig=function(l,h,p,_,g,d,f){const b={foreground:d.foreground,background:d.background,cursor:u.NULL_COLOR,cursorAccent:u.NULL_COLOR,selectionForeground:u.NULL_COLOR,selectionBackgroundTransparent:u.NULL_COLOR,selectionBackgroundOpaque:u.NULL_COLOR,selectionInactiveBackgroundTransparent:u.NULL_COLOR,selectionInactiveBackgroundOpaque:u.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:g.customGlyphs,devicePixelRatio:f,letterSpacing:g.letterSpacing,lineHeight:g.lineHeight,deviceCellWidth:l,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:_,fontFamily:g.fontFamily,fontSize:g.fontSize,fontWeight:g.fontWeight,fontWeightBold:g.fontWeightBold,allowTransparency:g.allowTransparency,drawBoldTextInBrightColors:g.drawBoldTextInBrightColors,minimumContrastRatio:g.minimumContrastRatio,colors:b}},n.configEquals=function(l,h){for(let p=0;p<l.colors.ansi.length;p++)if(l.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return l.devicePixelRatio===h.devicePixelRatio&&l.customGlyphs===h.customGlyphs&&l.lineHeight===h.lineHeight&&l.letterSpacing===h.letterSpacing&&l.fontFamily===h.fontFamily&&l.fontSize===h.fontSize&&l.fontWeight===h.fontWeight&&l.fontWeightBold===h.fontWeightBold&&l.allowTransparency===h.allowTransparency&&l.deviceCharWidth===h.deviceCharWidth&&l.deviceCharHeight===h.deviceCharHeight&&l.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&l.minimumContrastRatio===h.minimumContrastRatio&&l.colors.foreground.rgba===h.colors.foreground.rgba&&l.colors.background.rgba===h.colors.background.rgba},n.is256Color=function(l){return(50331648&l)==16777216||(50331648&l)==33554432}},237:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const u=c(399);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},457:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CursorBlinkStateManager=void 0,n.CursorBlinkStateManager=class{constructor(c,u){this._renderCallback=c,this._coreBrowserService=u,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(c=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,u>0)return void this._restartInterval(u)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(u)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},c)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tryDrawCustomChar=n.powerlineDefinitions=n.boxDrawingDefinitions=n.blockElementDefinitions=void 0;const u=c(374);n.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const l={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};n.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"║":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╒":{1:(d,f)=>`M.5,1 L.5,${.5-f} L1,${.5-f} M.5,${.5+f} L1,${.5+f}`},"╓":{1:(d,f)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"╔":{1:(d,f)=>`M1,${.5-f} L${.5-d},${.5-f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1`},"╕":{1:(d,f)=>`M0,${.5-f} L.5,${.5-f} L.5,1 M0,${.5+f} L.5,${.5+f}`},"╖":{1:(d,f)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"╗":{1:(d,f)=>`M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M0,${.5-f} L${.5+d},${.5-f} L${.5+d},1`},"╘":{1:(d,f)=>`M.5,0 L.5,${.5+f} L1,${.5+f} M.5,${.5-f} L1,${.5-f}`},"╙":{1:(d,f)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"╚":{1:(d,f)=>`M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0 M1,${.5+f} L${.5-d},${.5+f} L${.5-d},0`},"╛":{1:(d,f)=>`M0,${.5+f} L.5,${.5+f} L.5,0 M0,${.5-f} L.5,${.5-f}`},"╜":{1:(d,f)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"╝":{1:(d,f)=>`M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M0,${.5+f} L${.5+d},${.5+f} L${.5+d},0`},"╞":{1:(d,f)=>`M.5,0 L.5,1 M.5,${.5-f} L1,${.5-f} M.5,${.5+f} L1,${.5+f}`},"╟":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"╠":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╡":{1:(d,f)=>`M.5,0 L.5,1 M0,${.5-f} L.5,${.5-f} M0,${.5+f} L.5,${.5+f}`},"╢":{1:(d,f)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╣":{1:(d,f)=>`M${.5+d},0 L${.5+d},1 M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0`},"╤":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f} M.5,${.5+f} L.5,1`},"╥":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"╦":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1`},"╧":{1:(d,f)=>`M.5,0 L.5,${.5-f} M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"╨":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"╩":{1:(d,f)=>`M0,${.5+f} L1,${.5+f} M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╪":{1:(d,f)=>`M.5,0 L.5,1 M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"╫":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╬":{1:(d,f)=>`M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1 M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(d,f)=>`M.5,1 L.5,${.5+f/.15*.5} C.5,${.5+f/.15*.5},.5,.5,1,.5`},"╮":{1:(d,f)=>`M.5,1 L.5,${.5+f/.15*.5} C.5,${.5+f/.15*.5},.5,.5,0,.5`},"╯":{1:(d,f)=>`M.5,0 L.5,${.5-f/.15*.5} C.5,${.5-f/.15*.5},.5,.5,0,.5`},"╰":{1:(d,f)=>`M.5,0 L.5,${.5-f/.15*.5} C.5,${.5-f/.15*.5},.5,.5,1,.5`}},n.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},n.powerlineDefinitions[""]=n.powerlineDefinitions[""],n.powerlineDefinitions[""]=n.powerlineDefinitions[""],n.tryDrawCustomChar=function(d,f,b,y,m,S,E,D){const P=n.blockElementDefinitions[f];if(P)return function(v,C,A,T,k,L){for(let M=0;M<C.length;M++){const I=C[M],$=k/8,F=L/8;v.fillRect(A+I.x*$,T+I.y*F,I.w*$,I.h*F)}}(d,P,b,y,m,S),!0;const O=l[f];if(O)return function(v,C,A,T,k,L){let M=h.get(C);M||(M=new Map,h.set(C,M));const I=v.fillStyle;if(typeof I!="string")throw new Error(`Unexpected fillStyle type "${I}"`);let $=M.get(I);if(!$){const F=C[0].length,N=C.length,Q=document.createElement("canvas");Q.width=F,Q.height=N;const re=(0,u.throwIfFalsy)(Q.getContext("2d")),Y=new ImageData(F,N);let ee,ie,ne,W;if(I.startsWith("#"))ee=parseInt(I.slice(1,3),16),ie=parseInt(I.slice(3,5),16),ne=parseInt(I.slice(5,7),16),W=I.length>7&&parseInt(I.slice(7,9),16)||1;else{if(!I.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${I}" when drawing pattern glyph`);[ee,ie,ne,W]=I.substring(5,I.length-1).split(",").map(B=>parseFloat(B))}for(let B=0;B<N;B++)for(let q=0;q<F;q++)Y.data[4*(B*F+q)]=ee,Y.data[4*(B*F+q)+1]=ie,Y.data[4*(B*F+q)+2]=ne,Y.data[4*(B*F+q)+3]=C[B][q]*(255*W);re.putImageData(Y,0,0),$=(0,u.throwIfFalsy)(v.createPattern(Q,null)),M.set(I,$)}v.fillStyle=$,v.fillRect(A,T,k,L)}(d,O,b,y,m,S),!0;const w=n.boxDrawingDefinitions[f];if(w)return function(v,C,A,T,k,L,M){v.strokeStyle=v.fillStyle;for(const[I,$]of Object.entries(C)){let F;v.beginPath(),v.lineWidth=M*Number.parseInt(I),F=typeof $=="function"?$(.15,.15/L*k):$;for(const N of F.split(" ")){const Q=N[0],re=_[Q];if(!re){console.error(`Could not find drawing instructions for "${Q}"`);continue}const Y=N.substring(1).split(",");Y[0]&&Y[1]&&re(v,g(Y,k,L,A,T,!0,M))}v.stroke(),v.closePath()}}(d,w,b,y,m,S,D),!0;const R=n.powerlineDefinitions[f];return!!R&&(function(v,C,A,T,k,L,M,I){var $,F;const N=new Path2D;N.rect(A,T,k,L),v.clip(N),v.beginPath();const Q=M/12;v.lineWidth=I*Q;for(const re of C.d.split(" ")){const Y=re[0],ee=_[Y];if(!ee){console.error(`Could not find drawing instructions for "${Y}"`);continue}const ie=re.substring(1).split(",");ie[0]&&ie[1]&&ee(v,g(ie,k,L,A,T,!1,I,(($=C.leftPadding)!==null&&$!==void 0?$:0)*(Q/2),((F=C.rightPadding)!==null&&F!==void 0?F:0)*(Q/2)))}C.type===1?(v.strokeStyle=v.fillStyle,v.stroke()):v.fill(),v.closePath()}(d,R,b,y,m,S,E,D),!0)};const h=new Map;function p(d,f,b=0){return Math.max(Math.min(d,f),b)}const _={C:(d,f)=>d.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]),L:(d,f)=>d.lineTo(f[0],f[1]),M:(d,f)=>d.moveTo(f[0],f[1])};function g(d,f,b,y,m,S,E,D=0,P=0){const O=d.map(w=>parseFloat(w)||parseInt(w));if(O.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<O.length;w+=2)O[w]*=f-D*E-P*E,S&&O[w]!==0&&(O[w]=p(Math.round(O[w]+.5)-.5,f,0)),O[w]+=y+D*E;for(let w=1;w<O.length;w+=2)O[w]*=b,S&&O[w]!==0&&(O[w]=p(Math.round(O[w]+.5)-.5,b,0)),O[w]+=m;return O}},56:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.observeDevicePixelDimensions=void 0;const u=c(859);n.observeDevicePixelDimensions=function(l,h,p){let _=new h.ResizeObserver(g=>{const d=g.find(y=>y.target===l);if(!d)return;if(!("devicePixelContentBoxSize"in d))return _?.disconnect(),void(_=void 0);const f=d.devicePixelContentBoxSize[0].inlineSize,b=d.devicePixelContentBoxSize[0].blockSize;f>0&&b>0&&p(f,b)});try{_.observe(l,{box:["device-pixel-content-box"]})}catch{_.disconnect(),_=void 0}return(0,u.toDisposable)(()=>_?.disconnect())}},374:(o,n)=>{function c(u){return 57508<=u&&u<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},n.isPowerlineGlyph=c,n.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},n.excludeFromContrastRatioDemands=function(u){return c(u)||function(l){return 9472<=l&&l<=9631}(u)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,h,p,_=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const g=h[1]-l.buffer.active.viewportY,d=p[1]-l.buffer.active.viewportY,f=Math.max(g,0),b=Math.min(d,l.rows-1);f>=l.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=g,this.viewportEndRow=d,this.viewportCappedStartRow=f,this.viewportCappedEndRow=b,this.startCol=h[0],this.endCol=p[0])}isCellSelected(l,h,p){return!!this.hasSelection&&(p-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}n.createSelectionRenderModel=function(){return new c}},509:function(o,n,c){var u=this&&this.__decorate||function(R,v,C,A){var T,k=arguments.length,L=k<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(R,v,C,A);else for(var M=R.length-1;M>=0;M--)(T=R[M])&&(L=(k<3?T(L):k>3?T(v,C,L):T(v,C))||L);return k>3&&L&&Object.defineProperty(v,C,L),L};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureAtlas=void 0;const l=c(237),h=c(860),p=c(374),_=c(160),g=c(345),d=c(485),f=c(385),b=c(147),y=c(855),m=c(776),S={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let E;class D{get pages(){return this._pages}constructor(v,C,A){this._document=v,this._config=C,this._unicodeService=A,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new g.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new g.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(v,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,p.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const v of this.pages)v.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const v=new f.IdleTaskQueue;for(let C=33;C<126;C++)v.enqueue(()=>{if(!this._cacheMap.get(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){const A=this._drawToCache(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);this._cacheMap.set(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,A)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const v of this._pages)v.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(D.maxAtlasPages&&this._pages.length>=Math.max(4,D.maxAtlasPages)){const C=this._pages.filter($=>2*$.canvas.width<=(D.maxTextureSize||4096)).sort(($,F)=>F.canvas.width!==$.canvas.width?F.canvas.width-$.canvas.width:F.percentageUsed-$.percentageUsed);let A=-1,T=0;for(let $=0;$<C.length;$++)if(C[$].canvas.width!==T)A=$,T=C[$].canvas.width;else if($-A==3)break;const k=C.slice(A,A+4),L=k.map($=>$.glyphs[0].texturePage).sort(($,F)=>$>F?1:-1),M=this.pages.length-k.length,I=this._mergePages(k,M);I.version++;for(let $=L.length-1;$>=0;$--)this._deletePage(L[$]);this.pages.push(I),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(I.canvas)}const v=new P(this._document,this._textureSize);return this._pages.push(v),this._activePages.push(v),this._onAddTextureAtlasCanvas.fire(v.canvas),v}_mergePages(v,C){const A=2*v[0].canvas.width,T=new P(this._document,A,v);for(const[k,L]of v.entries()){const M=k*L.canvas.width%A,I=Math.floor(k/2)*L.canvas.height;T.ctx.drawImage(L.canvas,M,I);for(const F of L.glyphs)F.texturePage=C,F.sizeClipSpace.x=F.size.x/A,F.sizeClipSpace.y=F.size.y/A,F.texturePosition.x+=M,F.texturePosition.y+=I,F.texturePositionClipSpace.x=F.texturePosition.x/A,F.texturePositionClipSpace.y=F.texturePosition.y/A;this._onRemoveTextureAtlasCanvas.fire(L.canvas);const $=this._activePages.indexOf(L);$!==-1&&this._activePages.splice($,1)}return T}_deletePage(v){this._pages.splice(v,1);for(let C=v;C<this._pages.length;C++){const A=this._pages[C];for(const T of A.glyphs)T.texturePage--;A.version++}}getRasterizedGlyphCombinedChar(v,C,A,T,k){return this._getFromCacheMap(this._cacheMapCombined,v,C,A,T,k)}getRasterizedGlyph(v,C,A,T,k){return this._getFromCacheMap(this._cacheMap,v,C,A,T,k)}_getFromCacheMap(v,C,A,T,k,L=!1){return E=v.get(C,A,T,k),E||(E=this._drawToCache(C,A,T,k,L),v.set(C,A,T,k,E)),E}_getColorFromAnsiIndex(v){if(v>=this._config.colors.ansi.length)throw new Error("No color found for idx "+v);return this._config.colors.ansi[v]}_getBackgroundColor(v,C,A,T){if(this._config.allowTransparency)return _.NULL_COLOR;let k;switch(v){case 16777216:case 33554432:k=this._getColorFromAnsiIndex(C);break;case 50331648:const L=b.AttributeData.toColorRGB(C);k=_.rgba.toColor(L[0],L[1],L[2]);break;default:k=A?_.color.opaque(this._config.colors.foreground):this._config.colors.background}return k}_getForegroundColor(v,C,A,T,k,L,M,I,$,F){const N=this._getMinimumContrastColor(v,C,A,T,k,L,!1,$,I,F);if(N)return N;let Q;switch(k){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&$&&L<8&&(L+=8),Q=this._getColorFromAnsiIndex(L);break;case 50331648:const re=b.AttributeData.toColorRGB(L);Q=_.rgba.toColor(re[0],re[1],re[2]);break;default:Q=M?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(Q=_.color.opaque(Q)),I&&(Q=_.color.multiplyOpacity(Q,l.DIM_OPACITY)),Q}_resolveBackgroundRgba(v,C,A){switch(v){case 16777216:case 33554432:return this._getColorFromAnsiIndex(C).rgba;case 50331648:return C<<8;default:return A?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(v,C,A,T){switch(v){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&C<8&&(C+=8),this._getColorFromAnsiIndex(C).rgba;case 50331648:return C<<8;default:return A?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(v,C,A,T,k,L,M,I,$,F){if(this._config.minimumContrastRatio===1||F)return;const N=this._getContrastCache($),Q=N.getColor(v,T);if(Q!==void 0)return Q||void 0;const re=this._resolveBackgroundRgba(C,A,M),Y=this._resolveForegroundRgba(k,L,M,I),ee=_.rgba.ensureContrastRatio(re,Y,this._config.minimumContrastRatio/($?2:1));if(!ee)return void N.setColor(v,T,null);const ie=_.rgba.toColor(ee>>24&255,ee>>16&255,ee>>8&255);return N.setColor(v,T,ie),ie}_getContrastCache(v){return v?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(v,C,A,T,k=!1){const L=typeof v=="number"?String.fromCharCode(v):v,M=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<M&&(this._tmpCanvas.width=M);const I=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<I&&(this._tmpCanvas.height=I),this._tmpCtx.save(),this._workAttributeData.fg=A,this._workAttributeData.bg=C,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return S;const $=!!this._workAttributeData.isBold(),F=!!this._workAttributeData.isInverse(),N=!!this._workAttributeData.isDim(),Q=!!this._workAttributeData.isItalic(),re=!!this._workAttributeData.isUnderline(),Y=!!this._workAttributeData.isStrikethrough(),ee=!!this._workAttributeData.isOverline();let ie=this._workAttributeData.getFgColor(),ne=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),B=this._workAttributeData.getBgColorMode();if(F){const z=ie;ie=W,W=z;const J=ne;ne=B,B=J}const q=this._getBackgroundColor(B,W,F,N);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=q.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const G=$?this._config.fontWeightBold:this._config.fontWeight,le=Q?"italic":"";this._tmpCtx.font=`${le} ${G} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=l.TEXT_BASELINE;const ce=L.length===1&&(0,p.isPowerlineGlyph)(L.charCodeAt(0)),de=L.length===1&&(0,p.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),pe=this._getForegroundColor(C,B,W,A,ne,ie,F,N,$,(0,p.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=pe.css;const Z=de?0:4;let Oe=!1;this._config.customGlyphs!==!1&&(Oe=(0,h.tryDrawCustomChar)(this._tmpCtx,L,Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Ae,Re=!ce;if(Ae=typeof v=="number"?this._unicodeService.wcwidth(v):this._unicodeService.getStringCellWidth(v),re){this._tmpCtx.save();const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),J=z%2==1?.5:0;if(this._tmpCtx.lineWidth=z,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Re=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Re=!1;let fe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&fe<8&&(fe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(fe).css}this._tmpCtx.beginPath();const he=Z,se=Math.ceil(Z+this._config.deviceCharHeight)-J-(k?2*z:0),je=se+z,ze=se+2*z;for(let fe=0;fe<Ae;fe++){this._tmpCtx.save();const oe=he+fe*this._config.deviceCellWidth,_e=he+(fe+1)*this._config.deviceCellWidth,Tt=oe+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se),this._tmpCtx.moveTo(oe,ze),this._tmpCtx.lineTo(_e,ze);break;case 3:const ot=z<=1?ze:Math.ceil(Z+this._config.deviceCharHeight-z/2)-J,at=z<=1?se:Math.ceil(Z+this._config.deviceCharHeight+z/2)-J,dr=new Path2D;dr.rect(oe,se,this._config.deviceCellWidth,ze-se),this._tmpCtx.clip(dr),this._tmpCtx.moveTo(oe-this._config.deviceCellWidth/2,je),this._tmpCtx.bezierCurveTo(oe-this._config.deviceCellWidth/2,at,oe,at,oe,je),this._tmpCtx.bezierCurveTo(oe,ot,Tt,ot,Tt,je),this._tmpCtx.bezierCurveTo(Tt,at,_e,at,_e,je),this._tmpCtx.bezierCurveTo(_e,ot,_e+this._config.deviceCellWidth/2,ot,_e+this._config.deviceCellWidth/2,je);break;case 4:this._tmpCtx.setLineDash([Math.round(z),Math.round(z)]),this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se);break;default:this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Oe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const fe=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in fe&&fe.actualBoundingBoxDescent>0){this._tmpCtx.save();const oe=new Path2D;oe.rect(he,se-Math.ceil(z/2),this._config.deviceCellWidth*Ae,ze-se+Math.ceil(z/2)),this._tmpCtx.clip(oe),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=q.css,this._tmpCtx.strokeText(L,Z,Z+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ee){const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),J=z%2==1?.5:0;this._tmpCtx.lineWidth=z,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+J),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*Ae,Z+J),this._tmpCtx.stroke()}if(Oe||this._tmpCtx.fillText(L,Z,Z+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let z=O(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),q,pe,Re);if(z)for(let J=1;J<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=q.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,Z,Z+this._config.deviceCharHeight-J),z=O(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),q,pe,Re),z);J++);}if(Y){const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),J=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=z,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+Math.floor(this._config.deviceCharHeight/2)-J),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*Ae,Z+Math.floor(this._config.deviceCharHeight/2)-J),this._tmpCtx.stroke()}this._tmpCtx.restore();const ve=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Je;if(Je=this._config.allowTransparency?function(z){for(let J=0;J<z.data.length;J+=4)if(z.data[J+3]>0)return!1;return!0}(ve):O(ve,q,pe,Re),Je)return S;const H=this._findGlyphBoundingBox(ve,this._workBoundingBox,M,de,Oe,Z);let U,X;for(;;){if(this._activePages.length===0){const z=this._createNewPage();U=z,X=z.currentRow,X.height=H.size.y;break}U=this._activePages[this._activePages.length-1],X=U.currentRow;for(const z of this._activePages)H.size.y<=z.currentRow.height&&(U=z,X=z.currentRow);for(let z=this._activePages.length-1;z>=0;z--)for(const J of this._activePages[z].fixedRows)J.height<=X.height&&H.size.y<=J.height&&(U=this._activePages[z],X=J);if(X.y+H.size.y>=U.canvas.height||X.height>H.size.y+2){let z=!1;if(U.currentRow.y+U.currentRow.height+H.size.y>=U.canvas.height){let J;for(const he of this._activePages)if(he.currentRow.y+he.currentRow.height+H.size.y<he.canvas.height){J=he;break}if(J)U=J;else if(D.maxAtlasPages&&this._pages.length>=D.maxAtlasPages&&X.y+H.size.y<=U.canvas.height&&X.height>=H.size.y&&X.x+H.size.x<=U.canvas.width)z=!0;else{const he=this._createNewPage();U=he,X=he.currentRow,X.height=H.size.y,z=!0}}z||(U.currentRow.height>0&&U.fixedRows.push(U.currentRow),X={x:0,y:U.currentRow.y+U.currentRow.height,height:H.size.y},U.fixedRows.push(X),U.currentRow={x:0,y:X.y+X.height,height:0})}if(X.x+H.size.x<=U.canvas.width)break;X===U.currentRow?(X.x=0,X.y+=X.height,X.height=0):U.fixedRows.splice(U.fixedRows.indexOf(X),1)}return H.texturePage=this._pages.indexOf(U),H.texturePosition.x=X.x,H.texturePosition.y=X.y,H.texturePositionClipSpace.x=X.x/U.canvas.width,H.texturePositionClipSpace.y=X.y/U.canvas.height,H.sizeClipSpace.x/=U.canvas.width,H.sizeClipSpace.y/=U.canvas.height,X.height=Math.max(X.height,H.size.y),X.x+=H.size.x,U.ctx.putImageData(ve,H.texturePosition.x-this._workBoundingBox.left,H.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,H.size.x,H.size.y),U.addGlyph(H),U.version++,H}_findGlyphBoundingBox(v,C,A,T,k,L){C.top=0;const M=T?this._config.deviceCellHeight:this._tmpCanvas.height,I=T?this._config.deviceCellWidth:A;let $=!1;for(let F=0;F<M;F++){for(let N=0;N<I;N++){const Q=F*this._tmpCanvas.width*4+4*N+3;if(v.data[Q]!==0){C.top=F,$=!0;break}}if($)break}C.left=0,$=!1;for(let F=0;F<L+I;F++){for(let N=0;N<M;N++){const Q=N*this._tmpCanvas.width*4+4*F+3;if(v.data[Q]!==0){C.left=F,$=!0;break}}if($)break}C.right=I,$=!1;for(let F=L+I-1;F>=L;F--){for(let N=0;N<M;N++){const Q=N*this._tmpCanvas.width*4+4*F+3;if(v.data[Q]!==0){C.right=F,$=!0;break}}if($)break}C.bottom=M,$=!1;for(let F=M-1;F>=0;F--){for(let N=0;N<I;N++){const Q=F*this._tmpCanvas.width*4+4*N+3;if(v.data[Q]!==0){C.bottom=F,$=!0;break}}if($)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:C.right-C.left+1,y:C.bottom-C.top+1},sizeClipSpace:{x:C.right-C.left+1,y:C.bottom-C.top+1},offset:{x:-C.left+L+(T||k?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-C.top+L+(T||k?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}n.TextureAtlas=D,u([m.traceCall],D.prototype,"_drawToCache",null);class P{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(v){this._glyphs.push(v),this._usedPixels+=v.size.x*v.size.y}constructor(v,C,A){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],A)for(const T of A)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=w(v,C,C),this.ctx=(0,p.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function O(R,v,C,A){const T=v.rgba>>>24,k=v.rgba>>>16&255,L=v.rgba>>>8&255,M=C.rgba>>>24,I=C.rgba>>>16&255,$=C.rgba>>>8&255,F=Math.floor((Math.abs(T-M)+Math.abs(k-I)+Math.abs(L-$))/12);let N=!0;for(let Q=0;Q<R.data.length;Q+=4)R.data[Q]===T&&R.data[Q+1]===k&&R.data[Q+2]===L||A&&Math.abs(R.data[Q]-T)+Math.abs(R.data[Q+1]-k)+Math.abs(R.data[Q+2]-L)<F?R.data[Q+3]=0:N=!1;return N}function w(R,v,C){const A=R.createElement("canvas");return A.width=v,A.height=C,A}},577:function(o,n,c){var u=this&&this.__decorate||function(b,y,m,S){var E,D=arguments.length,P=D<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(b,y,m,S);else for(var O=b.length-1;O>=0;O--)(E=b[O])&&(P=(D<3?E(P):D>3?E(y,m,P):E(y,m))||P);return D>3&&P&&Object.defineProperty(y,m,P),P},l=this&&this.__param||function(b,y){return function(m,S){y(m,S,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const h=c(147),p=c(855),_=c(782),g=c(97);class d extends h.AttributeData{constructor(y,m,S){super(),this.content=0,this.combinedData="",this.fg=y.fg,this.bg=y.bg,this.combinedData=m,this._width=S}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(y){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=d;let f=n.CharacterJoinerService=class Ch{constructor(y){this._bufferService=y,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _.CellData}register(y){const m={id:this._nextCharacterJoinerId++,handler:y};return this._characterJoiners.push(m),m.id}deregister(y){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===y)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(y){if(this._characterJoiners.length===0)return[];const m=this._bufferService.buffer.lines.get(y);if(!m||m.length===0)return[];const S=[],E=m.translateToString(!0);let D=0,P=0,O=0,w=m.getFg(0),R=m.getBg(0);for(let v=0;v<m.getTrimmedLength();v++)if(m.loadCell(v,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==R){if(v-D>1){const C=this._getJoinedRanges(E,O,P,m,D);for(let A=0;A<C.length;A++)S.push(C[A])}D=v,O=P,w=this._workCell.fg,R=this._workCell.bg}P+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-D>1){const v=this._getJoinedRanges(E,O,P,m,D);for(let C=0;C<v.length;C++)S.push(v[C])}return S}_getJoinedRanges(y,m,S,E,D){const P=y.substring(m,S);let O=[];try{O=this._characterJoiners[0].handler(P)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const R=this._characterJoiners[w].handler(P);for(let v=0;v<R.length;v++)Ch._mergeRanges(O,R[v])}catch(R){console.error(R)}return this._stringRangesToCellRanges(O,E,D),O}_stringRangesToCellRanges(y,m,S){let E=0,D=!1,P=0,O=y[E];if(O){for(let w=S;w<this._bufferService.cols;w++){const R=m.getWidth(w),v=m.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!D&&O[0]<=P&&(O[0]=w,D=!0),O[1]<=P){if(O[1]=w,O=y[++E],!O)break;O[0]<=P?(O[0]=w,D=!0):D=!1}P+=v}}O&&(O[1]=this._bufferService.cols)}}static _mergeRanges(y,m){let S=!1;for(let E=0;E<y.length;E++){const D=y[E];if(S){if(m[1]<=D[0])return y[E-1][1]=m[1],y;if(m[1]<=D[1])return y[E-1][1]=Math.max(m[1],D[1]),y.splice(E,1),y;y.splice(E,1),E--}else{if(m[1]<=D[0])return y.splice(E,0,m),y;if(m[1]<=D[1])return D[0]=Math.min(m[0],D[0]),y;m[0]<D[1]&&(D[0]=Math.min(m[0],D[0]),S=!0)}}return S?y[y.length-1][1]=m[1]:y.push(m),y}};n.CharacterJoinerService=f=u([l(0,g.IBufferService)],f)},160:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const u=c(399);let l=0,h=0,p=0,_=0;var g,d,f,b,y;function m(E){const D=E.toString(16);return D.length<2?"0"+D:D}function S(E,D){return E<D?(D+.05)/(E+.05):(E+.05)/(D+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(E){E.toCss=function(D,P,O,w){return w!==void 0?`#${m(D)}${m(P)}${m(O)}${m(w)}`:`#${m(D)}${m(P)}${m(O)}`},E.toRgba=function(D,P,O,w=255){return(D<<24|P<<16|O<<8|w)>>>0}}(g||(n.channels=g={})),function(E){function D(P,O){return _=Math.round(255*O),[l,h,p]=y.toChannels(P.rgba),{css:g.toCss(l,h,p,_),rgba:g.toRgba(l,h,p,_)}}E.blend=function(P,O){if(_=(255&O.rgba)/255,_===1)return{css:O.css,rgba:O.rgba};const w=O.rgba>>24&255,R=O.rgba>>16&255,v=O.rgba>>8&255,C=P.rgba>>24&255,A=P.rgba>>16&255,T=P.rgba>>8&255;return l=C+Math.round((w-C)*_),h=A+Math.round((R-A)*_),p=T+Math.round((v-T)*_),{css:g.toCss(l,h,p),rgba:g.toRgba(l,h,p)}},E.isOpaque=function(P){return(255&P.rgba)==255},E.ensureContrastRatio=function(P,O,w){const R=y.ensureContrastRatio(P.rgba,O.rgba,w);if(R)return y.toColor(R>>24&255,R>>16&255,R>>8&255)},E.opaque=function(P){const O=(255|P.rgba)>>>0;return[l,h,p]=y.toChannels(O),{css:g.toCss(l,h,p),rgba:O}},E.opacity=D,E.multiplyOpacity=function(P,O){return _=255&P.rgba,D(P,_*O/255)},E.toColorRGB=function(P){return[P.rgba>>24&255,P.rgba>>16&255,P.rgba>>8&255]}}(d||(n.color=d={})),function(E){let D,P;if(!u.isNode){const O=document.createElement("canvas");O.width=1,O.height=1;const w=O.getContext("2d",{willReadFrequently:!0});w&&(D=w,D.globalCompositeOperation="copy",P=D.createLinearGradient(0,0,1,1))}E.toColor=function(O){if(O.match(/#[\da-f]{3,8}/i))switch(O.length){case 4:return l=parseInt(O.slice(1,2).repeat(2),16),h=parseInt(O.slice(2,3).repeat(2),16),p=parseInt(O.slice(3,4).repeat(2),16),y.toColor(l,h,p);case 5:return l=parseInt(O.slice(1,2).repeat(2),16),h=parseInt(O.slice(2,3).repeat(2),16),p=parseInt(O.slice(3,4).repeat(2),16),_=parseInt(O.slice(4,5).repeat(2),16),y.toColor(l,h,p,_);case 7:return{css:O,rgba:(parseInt(O.slice(1),16)<<8|255)>>>0};case 9:return{css:O,rgba:parseInt(O.slice(1),16)>>>0}}const w=O.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return l=parseInt(w[1]),h=parseInt(w[2]),p=parseInt(w[3]),_=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),y.toColor(l,h,p,_);if(!D||!P)throw new Error("css.toColor: Unsupported css format");if(D.fillStyle=P,D.fillStyle=O,typeof D.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(D.fillRect(0,0,1,1),[l,h,p,_]=D.getImageData(0,0,1,1).data,_!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(l,h,p,_),css:O}}}(f||(n.css=f={})),function(E){function D(P,O,w){const R=P/255,v=O/255,C=w/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))}E.relativeLuminance=function(P){return D(P>>16&255,P>>8&255,255&P)},E.relativeLuminance2=D}(b||(n.rgb=b={})),function(E){function D(O,w,R){const v=O>>24&255,C=O>>16&255,A=O>>8&255;let T=w>>24&255,k=w>>16&255,L=w>>8&255,M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));for(;M<R&&(T>0||k>0||L>0);)T-=Math.max(0,Math.ceil(.1*T)),k-=Math.max(0,Math.ceil(.1*k)),L-=Math.max(0,Math.ceil(.1*L)),M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));return(T<<24|k<<16|L<<8|255)>>>0}function P(O,w,R){const v=O>>24&255,C=O>>16&255,A=O>>8&255;let T=w>>24&255,k=w>>16&255,L=w>>8&255,M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));for(;M<R&&(T<255||k<255||L<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),k=Math.min(255,k+Math.ceil(.1*(255-k))),L=Math.min(255,L+Math.ceil(.1*(255-L))),M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));return(T<<24|k<<16|L<<8|255)>>>0}E.ensureContrastRatio=function(O,w,R){const v=b.relativeLuminance(O>>8),C=b.relativeLuminance(w>>8);if(S(v,C)<R){if(C<v){const k=D(O,w,R),L=S(v,b.relativeLuminance(k>>8));if(L<R){const M=P(O,w,R);return L>S(v,b.relativeLuminance(M>>8))?k:M}return k}const A=P(O,w,R),T=S(v,b.relativeLuminance(A>>8));if(T<R){const k=D(O,w,R);return T>S(v,b.relativeLuminance(k>>8))?A:k}return A}},E.reduceLuminance=D,E.increaseLuminance=P,E.toChannels=function(O){return[O>>24&255,O>>16&255,O>>8&255,255&O]},E.toColor=function(O,w,R,v){return{css:g.toCss(O,w,R,v),rgba:g.toRgba(O,w,R,v)}}}(y||(n.rgba=y={})),n.toPaddedHex=m,n.contrastRatio=S},345:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===c)return void this._listeners.splice(u,1)}}})),this._event}fire(c,u){const l=[];for(let h=0;h<this._listeners.length;h++)l.push(this._listeners[h]);for(let h=0;h<l.length;h++)l[h].call(void 0,c,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(c,u){return c(l=>u.fire(l))}},859:(o,n)=>{function c(u){for(const l of u)l.dispose();u.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const l=this._disposables.indexOf(u);l!==-1&&this._disposables.splice(l,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var l;this._isDisposed||u===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},n.toDisposable=function(u){return{dispose:u}},n.disposeArray=c,n.getDisposeArrayDisposable=function(u){return{dispose:()=>c(u)}}},485:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(l,h,p){this._data[l]||(this._data[l]={}),this._data[l][h]=p}get(l,h){return this._data[l]?this._data[l][h]:void 0}clear(){this._data={}}}n.TwoKeyMap=c,n.FourKeyMap=class{constructor(){this._data=new c}set(u,l,h,p,_){this._data.get(u,l)||this._data.set(u,l,new c),this._data.get(u,l).set(h,p,_)}get(u,l,h,p){var _;return(_=this._data.get(u,l))===null||_===void 0?void 0:_.get(h,p)}clear(){this._data.clear()}}},399:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const c=n.isNode?"node":navigator.userAgent,u=n.isNode?"node":navigator.platform;n.isFirefox=c.includes("Firefox"),n.isLegacyEdge=c.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(c),n.getSafariVersion=function(){if(!n.isSafari)return 0;const l=c.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),n.isIpad=u==="iPad",n.isIphone=u==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),n.isLinux=u.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(c)},385:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const u=c(399);class l{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let g=0,d=0,f=_.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),b=_.timeRemaining(),1.5*d>b)return f-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(f-g))}ms`),void this._start();f=b}this.clear()}}class h extends l{_requestCallback(_){return setTimeout(()=>_(this._createDeadline(16)))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const g=Date.now()+_;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}n.PriorityTaskQueue=h,n.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new c;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=c;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=u},782:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const u=c(133),l=c(855),h=c(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(g){const d=new p;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[l.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[l.CHAR_DATA_CHAR_INDEX].length===2){const f=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){const b=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(f-55296)+b-56320+65536|g[l.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[l.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=p},855:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},133:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},n.utf32ToString=function(c,u=0,l=c.length){let h="";for(let p=u;p<l;++p){let _=c[p];_>65535?(_-=65536,h+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):h+=String.fromCharCode(_)}return h},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,u){const l=c.length;if(!l)return 0;let h=0,p=0;if(this._interim){const _=c.charCodeAt(p++);56320<=_&&_<=57343?u[h++]=1024*(this._interim-55296)+_-56320+65536:(u[h++]=this._interim,u[h++]=_),this._interim=0}for(let _=p;_<l;++_){const g=c.charCodeAt(_);if(55296<=g&&g<=56319){if(++_>=l)return this._interim=g,h;const d=c.charCodeAt(_);56320<=d&&d<=57343?u[h++]=1024*(g-55296)+d-56320+65536:(u[h++]=g,u[h++]=d)}else g!==65279&&(u[h++]=g)}return h}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,u){const l=c.length;if(!l)return 0;let h,p,_,g,d=0,f=0,b=0;if(this.interim[0]){let S=!1,E=this.interim[0];E&=(224&E)==192?31:(240&E)==224?15:7;let D,P=0;for(;(D=63&this.interim[++P])&&P<4;)E<<=6,E|=D;const O=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=O-P;for(;b<w;){if(b>=l)return 0;if(D=c[b++],(192&D)!=128){b--,S=!0;break}this.interim[P++]=D,E<<=6,E|=63&D}S||(O===2?E<128?b--:u[d++]=E:O===3?E<2048||E>=55296&&E<=57343||E===65279||(u[d++]=E):E<65536||E>1114111||(u[d++]=E)),this.interim.fill(0)}const y=l-4;let m=b;for(;m<l;){for(;!(!(m<y)||128&(h=c[m])||128&(p=c[m+1])||128&(_=c[m+2])||128&(g=c[m+3]));)u[d++]=h,u[d++]=p,u[d++]=_,u[d++]=g,m+=4;if(h=c[m++],h<128)u[d++]=h;else if((224&h)==192){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(f=(31&h)<<6|63&p,f<128){m--;continue}u[d++]=f}else if((240&h)==224){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,d;if(_=c[m++],(192&_)!=128){m--;continue}if(f=(15&h)<<12|(63&p)<<6|63&_,f<2048||f>=55296&&f<=57343||f===65279)continue;u[d++]=f}else if((248&h)==240){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,d;if(_=c[m++],(192&_)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=_,d;if(g=c[m++],(192&g)!=128){m--;continue}if(f=(7&h)<<18|(63&p)<<12|(63&_)<<6|63&g,f<65536||f>1114111)continue;u[d++]=f}}return d}}},776:function(o,n,c){var u=this&&this.__decorate||function(f,b,y,m){var S,E=arguments.length,D=E<3?b:m===null?m=Object.getOwnPropertyDescriptor(b,y):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(f,b,y,m);else for(var P=f.length-1;P>=0;P--)(S=f[P])&&(D=(E<3?S(D):E>3?S(b,y,D):S(b,y))||D);return E>3&&D&&Object.defineProperty(b,y,D),D},l=this&&this.__param||function(f,b){return function(y,m){b(y,m,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const h=c(859),p=c(97),_={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let g,d=n.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(f){super(),this._optionsService=f,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let b=0;b<f.length;b++)typeof f[b]=="function"&&(f[b]=f[b]())}_log(f,b,y){this._evalLazyOptionalParams(y),f.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...y)}trace(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,f,b)}debug(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,f,b)}info(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.INFO&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,f,b)}warn(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.WARN&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,f,b)}error(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,f,b)}};n.LogService=d=u([l(0,p.IOptionsService)],d),n.setTraceLogger=function(f){g=f},n.traceCall=function(f,b,y){if(typeof y.value!="function")throw new Error("not supported");const m=y.value;y.value=function(...S){if(g.logLevel!==p.LogLevelEnum.TRACE)return m.apply(this,S);g.trace(`GlyphRenderer#${m.name}(${S.map(D=>JSON.stringify(D)).join(", ")})`);const E=m.apply(this,S);return g.trace(`GlyphRenderer#${m.name} return`,E),E}}},726:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const c="di$target",u="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(l){return l[u]||[]},n.createDecorator=function(l){if(n.serviceRegistry.has(l))return n.serviceRegistry.get(l);const h=function(p,_,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,f,b){f[c]===f?f[u].push({id:d,index:b}):(f[u]=[{id:d,index:b}],f[c]=f)})(h,p,g)};return h.toString=()=>l,n.serviceRegistry.set(l,h),h}},97:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const u=c(726);var l;n.IBufferService=(0,u.createDecorator)("BufferService"),n.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),n.ICoreService=(0,u.createDecorator)("CoreService"),n.ICharsetService=(0,u.createDecorator)("CharsetService"),n.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(l||(n.LogLevelEnum=l={})),n.ILogService=(0,u.createDecorator)("LogService"),n.IOptionsService=(0,u.createDecorator)("OptionsService"),n.IOscLinkService=(0,u.createDecorator)("OscLinkService"),n.IUnicodeService=(0,u.createDecorator)("UnicodeService"),n.IDecorationService=(0,u.createDecorator)("DecorationService")}},i={};function s(o){var n=i[o];if(n!==void 0)return n.exports;var c=i[o]={exports:{}};return t[o].call(c.exports,c,c.exports,s),c.exports}var a={};return(()=>{var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasAddon=void 0;const n=s(345),c=s(859),u=s(776),l=s(949);class h extends c.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new n.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new n.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var _;return(_=this._renderer)===null||_===void 0?void 0:_.textureAtlas}activate(_){const g=_._core;if(!_.element)return void this.register(g.onWillOpen(()=>this.activate(_)));this._terminal=_;const d=g.coreService,f=g.optionsService,b=g.screenElement,y=g.linkifier2,m=g,S=m._bufferService,E=m._renderService,D=m._characterJoinerService,P=m._charSizeService,O=m._coreBrowserService,w=m._decorationService,R=m._logService,v=m._themeService;(0,u.setTraceLogger)(R),this._renderer=new l.CanvasRenderer(_,b,y,S,P,f,D,d,O,w,v),this.register((0,n.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,n.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),E.setRenderer(this._renderer),E.handleResize(S.cols,S.rows),this.register((0,c.toDisposable)(()=>{var C;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(_.cols,_.rows),(C=this._renderer)===null||C===void 0||C.dispose(),this._renderer=void 0}))}}o.CanvasAddon=h})(),a})())})(bh);var iO=bh.exports,xh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={};return(()=>{var i=t;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const a=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(a._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,a=s._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(n.getPropertyValue("height")),u=Math.max(0,parseInt(n.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),h=c-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),p=u-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(p/a.css.cell.width)),rows:Math.max(1,Math.floor(h/a.css.cell.height))}}}})(),t})())})(xh);var sO=xh.exports,Dh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={345:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===c)return void this._listeners.splice(u,1)}}})),this._event}fire(c,u){const l=[];for(let h=0;h<this._listeners.length;h++)l.push(this._listeners[h]);for(let h=0;h<l.length;h++)l[h].call(void 0,c,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(c,u){return c(l=>u.fire(l))}},859:(o,n)=>{function c(u){for(const l of u)l.dispose();u.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const l=this._disposables.indexOf(u);l!==-1&&this._disposables.splice(l,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var l;this._isDisposed||u===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},n.toDisposable=function(u){return{dispose:u}},n.disposeArray=c,n.getDisposeArrayDisposable=function(u){return{dispose:()=>c(u)}}}},i={};function s(o){var n=i[o];if(n!==void 0)return n.exports;var c=i[o]={exports:{}};return t[o](c,c.exports,s),c.exports}var a={};return(()=>{var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.SearchAddon=void 0;const n=s(345),c=s(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class l extends c.Disposable{constructor(p){var _;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new c.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new n.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(_=p?.highlightLimit)!==null&&_!==void 0?_:1e3}activate(p){this._terminal=p,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,c.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var p;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((p=this._lastSearchOptions)===null||p===void 0)&&p.decorations)&&(this._highlightTimeout=setTimeout(()=>{const _=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(_,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(p){this._selectedDecoration.clear(),(0,c.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),p||(this._cachedSearchTerm=void 0)}findNext(p,_){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=_,_?.decorations&&(this._cachedSearchTerm!==void 0&&p===this._cachedSearchTerm||this._highlightAllMatches(p,_));const g=this._findNextAndSelect(p,_);return this._fireResults(_),this._cachedSearchTerm=p,g}_highlightAllMatches(p,_){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!p||p.length===0)return void this.clearDecorations();_=_||{},this.clearDecorations(!0);const g=[];let d,f=this._find(p,0,0,_);for(;f&&(d?.row!==f.row||d?.col!==f.col)&&!(g.length>=this._highlightLimit);)d=f,g.push(d),f=this._find(p,d.col+d.term.length>=this._terminal.cols?d.row+1:d.row,d.col+d.term.length>=this._terminal.cols?0:d.col+1,_);for(const b of g){const y=this._createResultDecoration(b,_.decorations);y&&(this._highlightedLines.add(y.marker.line),this._highlightDecorations.push({decoration:y,match:b,dispose(){y.dispose()}}))}}_find(p,_,g,d){var f;if(!this._terminal||!p||p.length===0)return(f=this._terminal)===null||f===void 0||f.clearSelection(),void this.clearDecorations();if(g>this._terminal.cols)throw new Error(`Invalid col: ${g} to search in terminal of ${this._terminal.cols} cols`);let b;this._initLinesCache();const y={startRow:_,startCol:g};if(b=this._findInLine(p,y,d),!b)for(let m=_+1;m<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=m,y.startCol=0,b=this._findInLine(p,y,d),!b);m++);return b}_findNextAndSelect(p,_){var g;if(!this._terminal||!p||p.length===0)return(g=this._terminal)===null||g===void 0||g.clearSelection(),this.clearDecorations(),!1;const d=this._terminal.getSelectionPosition();this._terminal.clearSelection();let f=0,b=0;d&&(this._cachedSearchTerm===p?(f=d.end.x,b=d.end.y):(f=d.start.x,b=d.start.y)),this._initLinesCache();const y={startRow:b,startCol:f};let m=this._findInLine(p,y,_);if(!m)for(let S=b+1;S<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=S,y.startCol=0,m=this._findInLine(p,y,_),!m);S++);if(!m&&b!==0)for(let S=0;S<b&&(y.startRow=S,y.startCol=0,m=this._findInLine(p,y,_),!m);S++);return!m&&d&&(y.startRow=d.start.y,y.startCol=0,m=this._findInLine(p,y,_)),this._selectResult(m,_?.decorations,_?.noScroll)}findPrevious(p,_){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=_,_?.decorations&&(this._cachedSearchTerm!==void 0&&p===this._cachedSearchTerm||this._highlightAllMatches(p,_));const g=this._findPreviousAndSelect(p,_);return this._fireResults(_),this._cachedSearchTerm=p,g}_fireResults(p){if(p?.decorations){let _=-1;if(this._selectedDecoration.value){const g=this._selectedDecoration.value.match;for(let d=0;d<this._highlightDecorations.length;d++){const f=this._highlightDecorations[d].match;if(f.row===g.row&&f.col===g.col&&f.size===g.size){_=d;break}}}this._onDidChangeResults.fire({resultIndex:_,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(p,_){var g;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!p||p.length===0)return(g=this._terminal)===null||g===void 0||g.clearSelection(),this.clearDecorations(),!1;const d=this._terminal.getSelectionPosition();this._terminal.clearSelection();let f=this._terminal.buffer.active.baseY+this._terminal.rows-1,b=this._terminal.cols;const y=!0;this._initLinesCache();const m={startRow:f,startCol:b};let S;if(d&&(m.startRow=f=d.start.y,m.startCol=b=d.start.x,this._cachedSearchTerm!==p&&(S=this._findInLine(p,m,_,!1),S||(m.startRow=f=d.end.y,m.startCol=b=d.end.x))),S||(S=this._findInLine(p,m,_,y)),!S){m.startCol=Math.max(m.startCol,this._terminal.cols);for(let E=f-1;E>=0&&(m.startRow=E,S=this._findInLine(p,m,_,y),!S);E--);}if(!S&&f!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let E=this._terminal.buffer.active.baseY+this._terminal.rows-1;E>=f&&(m.startRow=E,S=this._findInLine(p,m,_,y),!S);E--);return this._selectResult(S,_?.decorations,_?.noScroll)}_initLinesCache(){const p=this._terminal;this._linesCache||(this._linesCache=new Array(p.buffer.active.length),this._cursorMoveListener=p.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=p.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(p,_,g){return(p===0||u.includes(_[p-1]))&&(p+g.length===_.length||u.includes(_[p+g.length]))}_findInLine(p,_,g={},d=!1){var f;const b=this._terminal,y=_.startRow,m=_.startCol,S=b.buffer.active.getLine(y);if(S?.isWrapped)return d?void(_.startCol+=b.cols):(_.startRow--,_.startCol+=b.cols,this._findInLine(p,_,g));let E=(f=this._linesCache)===null||f===void 0?void 0:f[y];E||(E=this._translateBufferLineToStringWithWrap(y,!0),this._linesCache&&(this._linesCache[y]=E));const[D,P]=E,O=this._bufferColsToStringOffset(y,m),w=g.caseSensitive?p:p.toLowerCase(),R=g.caseSensitive?D:D.toLowerCase();let v=-1;if(g.regex){const C=RegExp(w,"g");let A;if(d)for(;A=C.exec(R.slice(0,O));)v=C.lastIndex-A[0].length,p=A[0],C.lastIndex-=p.length-1;else A=C.exec(R.slice(O)),A&&A[0].length>0&&(v=O+(C.lastIndex-A[0].length),p=A[0])}else d?O-w.length>=0&&(v=R.lastIndexOf(w,O-w.length)):v=R.indexOf(w,O);if(v>=0){if(g.wholeWord&&!this._isWholeWord(v,R,p))return;let C=0;for(;C<P.length-1&&v>=P[C+1];)C++;let A=C;for(;A<P.length-1&&v+p.length>=P[A+1];)A++;const T=v-P[C],k=v+p.length-P[A],L=this._stringLengthToBufferSize(y+C,T);return{term:p,col:L,row:y+C,size:this._stringLengthToBufferSize(y+A,k)-L+b.cols*(A-C)}}}_stringLengthToBufferSize(p,_){const g=this._terminal.buffer.active.getLine(p);if(!g)return 0;for(let d=0;d<_;d++){const f=g.getCell(d);if(!f)break;const b=f.getChars();b.length>1&&(_-=b.length-1);const y=g.getCell(d+1);y&&y.getWidth()===0&&_++}return _}_bufferColsToStringOffset(p,_){const g=this._terminal;let d=p,f=0,b=g.buffer.active.getLine(d);for(;_>0&&b;){for(let y=0;y<_&&y<g.cols;y++){const m=b.getCell(y);if(!m)break;m.getWidth()&&(f+=m.getCode()===0?1:m.getChars().length)}if(d++,b=g.buffer.active.getLine(d),b&&!b.isWrapped)break;_-=g.cols}return f}_translateBufferLineToStringWithWrap(p,_){var g;const d=this._terminal,f=[],b=[0];let y=d.buffer.active.getLine(p);for(;y;){const m=d.buffer.active.getLine(p+1),S=!!m&&m.isWrapped;let E=y.translateToString(!S&&_);if(S&&m){const D=y.getCell(y.length-1);D&&D.getCode()===0&&D.getWidth()===1&&((g=m.getCell(0))===null||g===void 0?void 0:g.getWidth())===2&&(E=E.slice(0,-1))}if(f.push(E),!S)break;b.push(b[b.length-1]+E.length),p++,y=m}return[f.join(""),b]}_selectResult(p,_,g){const d=this._terminal;if(this._selectedDecoration.clear(),!p)return d.clearSelection(),!1;if(d.select(p.col,p.row,p.size),_){const f=d.registerMarker(-d.buffer.active.baseY-d.buffer.active.cursorY+p.row);if(f){const b=d.registerDecoration({marker:f,x:p.col,width:p.size,backgroundColor:_.activeMatchBackground,layer:"top",overviewRulerOptions:{color:_.activeMatchColorOverviewRuler}});if(b){const y=[];y.push(f),y.push(b.onRender(m=>this._applyStyles(m,_.activeMatchBorder,!0))),y.push(b.onDispose(()=>(0,c.disposeArray)(y))),this._selectedDecoration.value={decoration:b,match:p,dispose(){b.dispose()}}}}}if(!g&&(p.row>=d.buffer.active.viewportY+d.rows||p.row<d.buffer.active.viewportY)){let f=p.row-d.buffer.active.viewportY;f-=Math.floor(d.rows/2),d.scrollLines(f)}return!0}_applyStyles(p,_,g){p.classList.contains("xterm-find-result-decoration")||(p.classList.add("xterm-find-result-decoration"),_&&(p.style.outline=`1px solid ${_}`)),g&&p.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(p,_){const g=this._terminal,d=g.registerMarker(-g.buffer.active.baseY-g.buffer.active.cursorY+p.row);if(!d)return;const f=g.registerDecoration({marker:d,x:p.col,width:p.size,backgroundColor:_.matchBackground,overviewRulerOptions:this._highlightedLines.has(d.line)?void 0:{color:_.matchOverviewRuler,position:"center"}});if(f){const b=[];b.push(d),b.push(f.onRender(y=>this._applyStyles(y,_.matchBorder,!1))),b.push(f.onDispose(()=>(0,c.disposeArray)(b)))}return f}}o.SearchAddon=l})(),a})())})(Dh);var nO=Dh.exports,Sh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Dr,()=>(()=>{var t={433:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV11=void 0;const c=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],u=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],l=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],h=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let p;function _(g,d){let f,b=0,y=d.length-1;if(g<d[0][0]||g>d[y][1])return!1;for(;y>=b;)if(f=b+y>>1,g>d[f][1])b=f+1;else{if(!(g<d[f][0]))return!0;y=f-1}return!1}n.UnicodeV11=class{constructor(){if(this.version="11",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160);for(let g=0;g<c.length;++g)p.fill(0,c[g][0],c[g][1]+1);for(let g=0;g<l.length;++g)p.fill(2,l[g][0],l[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?p[g]:_(g,u)?0:_(g,h)?2:1}}}},i={};function s(o){var n=i[o];if(n!==void 0)return n.exports;var c=i[o]={exports:{}};return t[o](c,c.exports,s),c.exports}var a={};return(()=>{var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Unicode11Addon=void 0;const n=s(433);o.Unicode11Addon=class{activate(c){c.unicode.register(new n.UnicodeV11)}dispose(){}}})(),a})())})(Sh);var oO=Sh.exports,wh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={6:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LinkComputer=n.WebLinkProvider=void 0,n.WebLinkProvider=class{constructor(u,l,h,p={}){this._terminal=u,this._regex=l,this._handler=h,this._options=p}provideLinks(u,l){const h=c.computeLink(u,this._regex,this._terminal,this._handler);l(this._addCallbacks(h))}_addCallbacks(u){return u.map(l=>(l.leave=this._options.leave,l.hover=(h,p)=>{if(this._options.hover){const{range:_}=l;this._options.hover(h,p,_)}},l))}};class c{static computeLink(l,h,p,_){const g=new RegExp(h.source,(h.flags||"")+"g"),[d,f]=c._getWindowedLineStrings(l-1,p),b=d.join("");let y;const m=[];for(;y=g.exec(b);){const S=y[0];try{const R=new URL(S),v=decodeURI(R.toString());if(S!==v&&S+"/"!==v)continue}catch{continue}const[E,D]=c._mapStrIdx(p,f,0,y.index),[P,O]=c._mapStrIdx(p,E,D,S.length);if(E===-1||D===-1||P===-1||O===-1)continue;const w={start:{x:D+1,y:E+1},end:{x:O,y:P+1}};m.push({range:w,text:S,activate:_})}return m}static _getWindowedLineStrings(l,h){let p,_=l,g=l,d=0,f="";const b=[];if(p=h.buffer.active.getLine(l)){const y=p.translateToString(!0);if(p.isWrapped&&y[0]!==" "){for(d=0;(p=h.buffer.active.getLine(--_))&&d<2048&&(f=p.translateToString(!0),d+=f.length,b.push(f),p.isWrapped&&f.indexOf(" ")===-1););b.reverse()}for(b.push(y),d=0;(p=h.buffer.active.getLine(++g))&&p.isWrapped&&d<2048&&(f=p.translateToString(!0),d+=f.length,b.push(f),f.indexOf(" ")===-1););}return[b,_]}static _mapStrIdx(l,h,p,_){const g=l.buffer.active,d=g.getNullCell();let f=p;for(;_;){const b=g.getLine(h);if(!b)return[-1,-1];for(let y=f;y<b.length;++y){b.getCell(y,d);const m=d.getChars();if(d.getWidth()&&(_-=m.length||1,y===b.length-1&&m==="")){const S=g.getLine(h+1);S&&S.isWrapped&&(S.getCell(0,d),d.getWidth()===2&&(_+=1))}if(_<0)return[h,y]}h++,f=0}return[h,f]}}n.LinkComputer=c}},i={};function s(o){var n=i[o];if(n!==void 0)return n.exports;var c=i[o]={exports:{}};return t[o](c,c.exports,s),c.exports}var a={};return(()=>{var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const n=s(6),c=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function u(l,h){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(l=u,h={}){this._handler=l,this._options=h}activate(l){this._terminal=l;const h=this._options,p=h.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new n.WebLinkProvider(this._terminal,p,this._handler,h))}dispose(){var l;(l=this._linkProvider)===null||l===void 0||l.dispose()}}})(),a})())})(wh);var aO=wh.exports,Eh={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={965:function(o,n,c){var u=this&&this.__decorate||function(P,O,w,R){var v,C=arguments.length,A=C<3?O:R===null?R=Object.getOwnPropertyDescriptor(O,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(P,O,w,R);else for(var T=P.length-1;T>=0;T--)(v=P[T])&&(A=(C<3?v(A):C>3?v(O,w,A):v(O,w))||A);return C>3&&A&&Object.defineProperty(O,w,A),A};Object.defineProperty(n,"__esModule",{value:!0}),n.GlyphRenderer=void 0;const l=c(374),h=c(509),p=c(855),_=c(859),g=c(776),d=c(381),f=11,b=f*Float32Array.BYTES_PER_ELEMENT;let y,m=0,S=0,E=0;class D extends _.Disposable{constructor(O,w,R){super(),this._terminal=O,this._gl=w,this._dimensions=R,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const v=this._gl;h.TextureAtlas.maxAtlasPages===void 0&&(h.TextureAtlas.maxAtlasPages=Math.min(32,(0,l.throwIfFalsy)(v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS))),h.TextureAtlas.maxTextureSize=(0,l.throwIfFalsy)(v.getParameter(v.MAX_TEXTURE_SIZE))),this._program=(0,l.throwIfFalsy)((0,d.createProgram)(v,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(M){let I="";for(let $=1;$<M;$++)I+=` else if (v_texpage == ${$}) { outColor = texture(u_texture[${$}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${M}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${I}
}`}(h.TextureAtlas.maxAtlasPages))),this.register((0,_.toDisposable)(()=>v.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(v.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,l.throwIfFalsy)(v.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,l.throwIfFalsy)(v.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=v.createVertexArray(),v.bindVertexArray(this._vertexArrayObject);const C=new Float32Array([0,0,1,0,0,1,1,1]),A=v.createBuffer();this.register((0,_.toDisposable)(()=>v.deleteBuffer(A))),v.bindBuffer(v.ARRAY_BUFFER,A),v.bufferData(v.ARRAY_BUFFER,C,v.STATIC_DRAW),v.enableVertexAttribArray(0),v.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const T=new Uint8Array([0,1,2,3]),k=v.createBuffer();this.register((0,_.toDisposable)(()=>v.deleteBuffer(k))),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,k),v.bufferData(v.ELEMENT_ARRAY_BUFFER,T,v.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(v.createBuffer()),this.register((0,_.toDisposable)(()=>v.deleteBuffer(this._attributesBuffer))),v.bindBuffer(v.ARRAY_BUFFER,this._attributesBuffer),v.enableVertexAttribArray(2),v.vertexAttribPointer(2,2,v.FLOAT,!1,b,0),v.vertexAttribDivisor(2,1),v.enableVertexAttribArray(3),v.vertexAttribPointer(3,2,v.FLOAT,!1,b,2*Float32Array.BYTES_PER_ELEMENT),v.vertexAttribDivisor(3,1),v.enableVertexAttribArray(4),v.vertexAttribPointer(4,1,v.FLOAT,!1,b,4*Float32Array.BYTES_PER_ELEMENT),v.vertexAttribDivisor(4,1),v.enableVertexAttribArray(5),v.vertexAttribPointer(5,2,v.FLOAT,!1,b,5*Float32Array.BYTES_PER_ELEMENT),v.vertexAttribDivisor(5,1),v.enableVertexAttribArray(6),v.vertexAttribPointer(6,2,v.FLOAT,!1,b,7*Float32Array.BYTES_PER_ELEMENT),v.vertexAttribDivisor(6,1),v.enableVertexAttribArray(1),v.vertexAttribPointer(1,2,v.FLOAT,!1,b,9*Float32Array.BYTES_PER_ELEMENT),v.vertexAttribDivisor(1,1),v.useProgram(this._program);const L=new Int32Array(h.TextureAtlas.maxAtlasPages);for(let M=0;M<h.TextureAtlas.maxAtlasPages;M++)L[M]=M;v.uniform1iv(this._textureLocation,L),v.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let M=0;M<h.TextureAtlas.maxAtlasPages;M++){const I=new d.GLTexture((0,l.throwIfFalsy)(v.createTexture()));this.register((0,_.toDisposable)(()=>v.deleteTexture(I.texture))),v.activeTexture(v.TEXTURE0+M),v.bindTexture(v.TEXTURE_2D,I.texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[M]=I}v.enable(v.BLEND),v.blendFunc(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(O,w,R,v,C,A,T,k){this._updateCell(this._vertices.attributes,O,w,R,v,C,A,T,k)}_updateCell(O,w,R,v,C,A,T,k,L){m=(R*this._terminal.cols+w)*f,v!==p.NULL_CELL_CODE&&v!==void 0?this._atlas&&(y=k&&k.length>1?this._atlas.getRasterizedGlyphCombinedChar(k,C,A,T,!1):this._atlas.getRasterizedGlyph(v,C,A,T,!1),S=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),C!==L&&y.offset.x>S?(E=y.offset.x-S,O[m]=-(y.offset.x-E)+this._dimensions.device.char.left,O[m+1]=-y.offset.y+this._dimensions.device.char.top,O[m+2]=(y.size.x-E)/this._dimensions.device.canvas.width,O[m+3]=y.size.y/this._dimensions.device.canvas.height,O[m+4]=y.texturePage,O[m+5]=y.texturePositionClipSpace.x+E/this._atlas.pages[y.texturePage].canvas.width,O[m+6]=y.texturePositionClipSpace.y,O[m+7]=y.sizeClipSpace.x-E/this._atlas.pages[y.texturePage].canvas.width,O[m+8]=y.sizeClipSpace.y):(O[m]=-y.offset.x+this._dimensions.device.char.left,O[m+1]=-y.offset.y+this._dimensions.device.char.top,O[m+2]=y.size.x/this._dimensions.device.canvas.width,O[m+3]=y.size.y/this._dimensions.device.canvas.height,O[m+4]=y.texturePage,O[m+5]=y.texturePositionClipSpace.x,O[m+6]=y.texturePositionClipSpace.y,O[m+7]=y.sizeClipSpace.x,O[m+8]=y.sizeClipSpace.y)):O.fill(0,m,m+f-1-2)}clear(){const O=this._terminal,w=O.cols*O.rows*f;this._vertices.count!==w?this._vertices.attributes=new Float32Array(w):this._vertices.attributes.fill(0);let R=0;for(;R<this._vertices.attributesBuffers.length;R++)this._vertices.count!==w?this._vertices.attributesBuffers[R]=new Float32Array(w):this._vertices.attributesBuffers[R].fill(0);this._vertices.count=w,R=0;for(let v=0;v<O.rows;v++)for(let C=0;C<O.cols;C++)this._vertices.attributes[R+9]=C/O.cols,this._vertices.attributes[R+10]=v/O.rows,R+=f}handleResize(){const O=this._gl;O.useProgram(this._program),O.viewport(0,0,O.canvas.width,O.canvas.height),O.uniform2f(this._resolutionLocation,O.canvas.width,O.canvas.height),this.clear()}render(O){if(!this._atlas)return;const w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const R=this._vertices.attributesBuffers[this._activeBuffer];let v=0;for(let C=0;C<O.lineLengths.length;C++){const A=C*this._terminal.cols*f,T=this._vertices.attributes.subarray(A,A+O.lineLengths[C]*f);R.set(T,v),v+=T.length}w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,R.subarray(0,v),w.STREAM_DRAW);for(let C=0;C<this._atlas.pages.length;C++)this._atlas.pages[C].version!==this._atlasTextures[C].version&&this._bindAtlasPageTexture(w,this._atlas,C);w.drawElementsInstanced(w.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,v/f)}setAtlas(O){this._atlas=O;for(const w of this._atlasTextures)w.version=-1}_bindAtlasPageTexture(O,w,R){O.activeTexture(O.TEXTURE0+R),O.bindTexture(O.TEXTURE_2D,this._atlasTextures[R].texture),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,w.pages[R].canvas),O.generateMipmap(O.TEXTURE_2D),this._atlasTextures[R].version=w.pages[R].version}setDimensions(O){this._dimensions=O}}n.GlyphRenderer=D,u([g.traceCall],D.prototype,"updateCell",null)},742:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RectangleRenderer=void 0;const u=c(374),l=c(859),h=c(310),p=c(381),_=8*Float32Array.BYTES_PER_ELEMENT;class g{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,f=0,b=0,y=0,m=0,S=0,E=0;class D extends l.Disposable{constructor(O,w,R,v){super(),this._terminal=O,this._gl=w,this._dimensions=R,this._themeService=v,this._vertices=new g,this._verticesCursor=new g;const C=this._gl;this._program=(0,u.throwIfFalsy)((0,p.createProgram)(C,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,l.toDisposable)(()=>C.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(C.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=C.createVertexArray(),C.bindVertexArray(this._vertexArrayObject);const A=new Float32Array([0,0,1,0,0,1,1,1]),T=C.createBuffer();this.register((0,l.toDisposable)(()=>C.deleteBuffer(T))),C.bindBuffer(C.ARRAY_BUFFER,T),C.bufferData(C.ARRAY_BUFFER,A,C.STATIC_DRAW),C.enableVertexAttribArray(3),C.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const k=new Uint8Array([0,1,2,3]),L=C.createBuffer();this.register((0,l.toDisposable)(()=>C.deleteBuffer(L))),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,L),C.bufferData(C.ELEMENT_ARRAY_BUFFER,k,C.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(C.createBuffer()),this.register((0,l.toDisposable)(()=>C.deleteBuffer(this._attributesBuffer))),C.bindBuffer(C.ARRAY_BUFFER,this._attributesBuffer),C.enableVertexAttribArray(0),C.vertexAttribPointer(0,2,C.FLOAT,!1,_,0),C.vertexAttribDivisor(0,1),C.enableVertexAttribArray(1),C.vertexAttribPointer(1,2,C.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),C.vertexAttribDivisor(1,1),C.enableVertexAttribArray(2),C.vertexAttribPointer(2,4,C.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),C.vertexAttribDivisor(2,1),this._updateCachedColors(v.colors),this.register(this._themeService.onChangeColors(M=>{this._updateCachedColors(M),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(O){const w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,O.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,O.count)}handleResize(){this._updateViewportRectangle()}setDimensions(O){this._dimensions=O}_updateCachedColors(O){this._bgFloat=this._colorToFloat32Array(O.background),this._cursorFloat=this._colorToFloat32Array(O.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(O){const w=this._terminal,R=this._vertices;let v,C,A,T,k,L,M,I,$,F,N,Q=1;for(v=0;v<w.rows;v++){for(A=-1,T=0,k=0,L=!1,C=0;C<w.cols;C++)M=(v*w.cols+C)*h.RENDER_MODEL_INDICIES_PER_CELL,I=O.cells[M+h.RENDER_MODEL_BG_OFFSET],$=O.cells[M+h.RENDER_MODEL_FG_OFFSET],F=!!(67108864&$),(I!==T||$!==k&&(L||F))&&((T!==0||L&&k!==0)&&(N=8*Q++,this._updateRectangle(R,N,k,T,A,C,v)),A=C,T=I,k=$,L=F);(T!==0||L&&k!==0)&&(N=8*Q++,this._updateRectangle(R,N,k,T,A,w.cols,v))}R.count=Q}updateCursor(O){const w=this._verticesCursor,R=O.cursor;if(!R||R.style==="block")return void(w.count=0);let v,C=0;R.style!=="bar"&&R.style!=="outline"||(v=8*C++,this._addRectangleFloat(w.attributes,v,R.x*this._dimensions.device.cell.width,R.y*this._dimensions.device.cell.height,R.style==="bar"?R.dpr*R.cursorWidth:R.dpr,this._dimensions.device.cell.height,this._cursorFloat)),R.style!=="underline"&&R.style!=="outline"||(v=8*C++,this._addRectangleFloat(w.attributes,v,R.x*this._dimensions.device.cell.width,(R.y+1)*this._dimensions.device.cell.height-R.dpr,R.width*this._dimensions.device.cell.width,R.dpr,this._cursorFloat)),R.style==="outline"&&(v=8*C++,this._addRectangleFloat(w.attributes,v,R.x*this._dimensions.device.cell.width,R.y*this._dimensions.device.cell.height,R.width*this._dimensions.device.cell.width,R.dpr,this._cursorFloat),v=8*C++,this._addRectangleFloat(w.attributes,v,(R.x+R.width)*this._dimensions.device.cell.width-R.dpr,R.y*this._dimensions.device.cell.height,R.dpr,this._dimensions.device.cell.height,this._cursorFloat)),w.count=C}_updateRectangle(O,w,R,v,C,A,T){if(67108864&R)switch(50331648&R){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&R].rgba;break;case 50331648:d=(16777215&R)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&v){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&v].rgba;break;case 50331648:d=(16777215&v)<<8;break;default:d=this._themeService.colors.background.rgba}O.attributes.length<w+4&&(O.attributes=(0,p.expandFloat32Array)(O.attributes,this._terminal.rows*this._terminal.cols*8)),f=C*this._dimensions.device.cell.width,b=T*this._dimensions.device.cell.height,y=(d>>24&255)/255,m=(d>>16&255)/255,S=(d>>8&255)/255,E=1,this._addRectangle(O.attributes,w,f,b,(A-C)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,y,m,S,E)}_addRectangle(O,w,R,v,C,A,T,k,L,M){O[w]=R/this._dimensions.device.canvas.width,O[w+1]=v/this._dimensions.device.canvas.height,O[w+2]=C/this._dimensions.device.canvas.width,O[w+3]=A/this._dimensions.device.canvas.height,O[w+4]=T,O[w+5]=k,O[w+6]=L,O[w+7]=M}_addRectangleFloat(O,w,R,v,C,A,T){O[w]=R/this._dimensions.device.canvas.width,O[w+1]=v/this._dimensions.device.canvas.height,O[w+2]=C/this._dimensions.device.canvas.width,O[w+3]=A/this._dimensions.device.canvas.height,O[w+4]=T[0],O[w+5]=T[1],O[w+6]=T[2],O[w+7]=T[3]}_colorToFloat32Array(O){return new Float32Array([(O.rgba>>24&255)/255,(O.rgba>>16&255)/255,(O.rgba>>8&255)/255,(255&O.rgba)/255])}}n.RectangleRenderer=D},310:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderModel=n.COMBINED_CHAR_BIT_MASK=n.RENDER_MODEL_EXT_OFFSET=n.RENDER_MODEL_FG_OFFSET=n.RENDER_MODEL_BG_OFFSET=n.RENDER_MODEL_INDICIES_PER_CELL=void 0;const u=c(296);n.RENDER_MODEL_INDICIES_PER_CELL=4,n.RENDER_MODEL_BG_OFFSET=1,n.RENDER_MODEL_FG_OFFSET=2,n.RENDER_MODEL_EXT_OFFSET=3,n.COMBINED_CHAR_BIT_MASK=2147483648,n.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,u.createSelectionRenderModel)()}resize(l,h){const p=l*h*n.RENDER_MODEL_INDICIES_PER_CELL;p!==this.cells.length&&(this.cells=new Uint32Array(p),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(o,n,c){var u=this&&this.__decorate||function(A,T,k,L){var M,I=arguments.length,$=I<3?T:L===null?L=Object.getOwnPropertyDescriptor(T,k):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(A,T,k,L);else for(var F=A.length-1;F>=0;F--)(M=A[F])&&($=(I<3?M($):I>3?M(T,k,$):M(T,k))||$);return I>3&&$&&Object.defineProperty(T,k,$),$};Object.defineProperty(n,"__esModule",{value:!0}),n.JoinedCellData=n.WebglRenderer=void 0;const l=c(820),h=c(274),p=c(627),_=c(457),g=c(56),d=c(374),f=c(345),b=c(859),y=c(147),m=c(782),S=c(855),E=c(776),D=c(965),P=c(742),O=c(310),w=c(733);class R extends b.Disposable{constructor(T,k,L,M,I,$,F,N,Q){super(),this._terminal=T,this._characterJoinerService=k,this._charSizeService=L,this._coreBrowserService=M,this._coreService=I,this._decorationService=$,this._optionsService=F,this._themeService=N,this._cursorBlinkStateManager=new b.MutableDisposable,this._charAtlasDisposable=this.register(new b.MutableDisposable),this._model=new O.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new b.MutableDisposable),this._glyphRenderer=this.register(new b.MutableDisposable),this._onChangeTextureAtlas=this.register(new f.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new f.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new f.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new f.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new h.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new w.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,F,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(F.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const re={antialias:!1,depth:!1,preserveDrawingBuffer:Q};if(this._gl=this._canvas.getContext("webgl2",re),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextlost",Y=>{console.log("webglcontextlost event received"),Y.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(Y)},3e3)})),this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextrestored",Y=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,p.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,g.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(Y,ee)=>this._setCanvasDevicePixelDimensions(Y,ee))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,b.toDisposable)(()=>{var Y;for(const ee of this._renderLayers)ee.dispose();(Y=this._canvas.parentElement)===null||Y===void 0||Y.removeChild(this._canvas),(0,p.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var T;return(T=this._charAtlas)===null||T===void 0?void 0:T.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(T,k){var L,M,I,$;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const F of this._renderLayers)F.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(M=this._rectangleRenderer.value)===null||M===void 0||M.handleResize(),(I=this._glyphRenderer.value)===null||I===void 0||I.setDimensions(this.dimensions),($=this._glyphRenderer.value)===null||$===void 0||$.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var T;for(const k of this._renderLayers)k.handleBlur(this._terminal);(T=this._cursorBlinkStateManager.value)===null||T===void 0||T.pause(),this._requestRedrawViewport()}handleFocus(){var T;for(const k of this._renderLayers)k.handleFocus(this._terminal);(T=this._cursorBlinkStateManager.value)===null||T===void 0||T.resume(),this._requestRedrawViewport()}handleSelectionChanged(T,k,L){for(const M of this._renderLayers)M.handleSelectionChanged(this._terminal,T,k,L);this._model.selection.update(this._terminal,T,k,L),this._requestRedrawViewport()}handleCursorMove(){var T;for(const k of this._renderLayers)k.handleCursorMove(this._terminal);(T=this._cursorBlinkStateManager.value)===null||T===void 0||T.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new P.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new D.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var T;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const k=(0,p.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==k&&(this._onChangeTextureAtlas.fire(k.pages[0].canvas),this._charAtlasDisposable.value=(0,b.getDisposeArrayDisposable)([(0,f.forwardEvent)(k.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,f.forwardEvent)(k.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=k,this._charAtlas.warmUp(),(T=this._glyphRenderer.value)===null||T===void 0||T.setAtlas(this._charAtlas)}_clearModel(T){var k;this._model.clear(),T&&((k=this._glyphRenderer.value)===null||k===void 0||k.clear())}clearTextureAtlas(){var T;(T=this._charAtlas)===null||T===void 0||T.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var T;this._clearModel(!0);for(const k of this._renderLayers)k.reset(this._terminal);(T=this._cursorBlinkStateManager.value)===null||T===void 0||T.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(T){return-1}deregisterCharacterJoiner(T){return!1}renderRows(T,k){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const L of this._renderLayers)L.handleGridChanged(this._terminal,T,k);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(T,k),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new _.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(T,k){const L=this._core;let M,I,$,F,N,Q,re,Y,ee,ie,ne,W,B,q=this._workCell;T=C(T,L.rows-1,0),k=C(k,L.rows-1,0);const G=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,le=Math.min(this._terminal.buffer.active.cursorX,L.cols-1);let ce=-1;const de=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let pe=!1;for(I=T;I<=k;I++)for($=I+L.buffer.ydisp,F=L.buffer.lines.get($),this._model.lineLengths[I]=0,N=this._characterJoinerService.getJoinedCharacters($),W=0;W<L.cols;W++)if(M=this._cellColorResolver.result.bg,F.loadCell(W,q),W===0&&(M=this._cellColorResolver.result.bg),Q=!1,re=W,N.length>0&&W===N[0][0]&&(Q=!0,Y=N.shift(),q=new v(q,F.translateToString(!0,Y[0],Y[1]),Y[1]-Y[0]),re=Y[1]-1),ee=q.getChars(),ie=q.getCode(),ne=(I*L.cols+W)*O.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(q,W,$),de&&$===G&&(W===le&&(this._model.cursor={x:le,y:this._terminal.buffer.active.cursorY,width:q.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ce=le+q.getWidth()-1),W>=le&&W<=ce&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),ie!==S.NULL_CELL_CODE&&(this._model.lineLengths[I]=W+1),(this._model.cells[ne]!==ie||this._model.cells[ne+O.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[ne+O.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[ne+O.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(pe=!0,ee.length>1&&(ie|=O.COMBINED_CHAR_BIT_MASK),this._model.cells[ne]=ie,this._model.cells[ne+O.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[ne+O.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[ne+O.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(W,I,ie,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,ee,M),Q))for(q=this._workCell,W++;W<re;W++)B=(I*L.cols+W)*O.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(W,I,S.NULL_CELL_CODE,0,0,0,S.NULL_CELL_CHAR,0),this._model.cells[B]=S.NULL_CELL_CODE,this._model.cells[B+O.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[B+O.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[B+O.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;pe&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(T,k){this._canvas.width===T&&this._canvas.height===k||(this._canvas.width=T,this._canvas.height=k,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const T=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:T,end:T})}}n.WebglRenderer=R,u([E.traceCall],R.prototype,"renderRows",null);class v extends y.AttributeData{constructor(T,k,L){super(),this.content=0,this.combinedData="",this.fg=T.fg,this.bg=T.bg,this.combinedData=k,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(T){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function C(A,T,k=0){return Math.max(Math.min(A,T),k)}n.JoinedCellData=v},381:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GLTexture=n.expandFloat32Array=n.createShader=n.createProgram=n.PROJECTION_MATRIX=void 0;const u=c(374);function l(h,p,_){const g=(0,u.throwIfFalsy)(h.createShader(p));if(h.shaderSource(g,_),h.compileShader(g),h.getShaderParameter(g,h.COMPILE_STATUS))return g;console.error(h.getShaderInfoLog(g)),h.deleteShader(g)}n.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),n.createProgram=function(h,p,_){const g=(0,u.throwIfFalsy)(h.createProgram());if(h.attachShader(g,(0,u.throwIfFalsy)(l(h,h.VERTEX_SHADER,p))),h.attachShader(g,(0,u.throwIfFalsy)(l(h,h.FRAGMENT_SHADER,_))),h.linkProgram(g),h.getProgramParameter(g,h.LINK_STATUS))return g;console.error(h.getProgramInfoLog(g)),h.deleteProgram(g)},n.createShader=l,n.expandFloat32Array=function(h,p){const _=Math.min(2*h.length,p),g=new Float32Array(_);for(let d=0;d<h.length;d++)g[d]=h[d];return g},n.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseRenderLayer=void 0;const u=c(627),l=c(237),h=c(374),p=c(859);class _ extends p.Disposable{constructor(d,f,b,y,m,S,E,D){super(),this._container=f,this._alpha=m,this._coreBrowserService=S,this._optionsService=E,this._themeService=D,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${b}-layer`),this._canvas.style.zIndex=y.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(P=>{this._refreshCharAtlas(d,P),this.reset(d)})),this.register((0,p.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,f,b){}handleSelectionChanged(d,f,b,y=!1){}_setTransparency(d,f){if(f===this._alpha)return;const b=this._canvas;this._alpha=f,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,b),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,f){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,u.acquireTextureAtlas)(d,this._optionsService.rawOptions,f,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,f){this._deviceCellWidth=f.device.cell.width,this._deviceCellHeight=f.device.cell.height,this._deviceCharWidth=f.device.char.width,this._deviceCharHeight=f.device.char.height,this._deviceCharLeft=f.device.char.left,this._deviceCharTop=f.device.char.top,this._canvas.width=f.device.canvas.width,this._canvas.height=f.device.canvas.height,this._canvas.style.width=`${f.css.canvas.width}px`,this._canvas.style.height=`${f.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,f,b=1){this._ctx.fillRect(d*this._deviceCellWidth,(f+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,b*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,f,b,y){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,f*this._deviceCellHeight,b*this._deviceCellWidth,y*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,f*this._deviceCellHeight,b*this._deviceCellWidth,y*this._deviceCellHeight))}_fillCharTrueColor(d,f,b,y){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=l.TEXT_BASELINE,this._clipCell(b,y,f.getWidth()),this._ctx.fillText(f.getChars(),b*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,f,b){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,f*this._deviceCellHeight,b*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,f,b){return`${b?"italic":""} ${f?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}n.BaseRenderLayer=_},733:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LinkRenderLayer=void 0;const u=c(197),l=c(237),h=c(592);class p extends h.BaseRenderLayer{constructor(g,d,f,b,y,m,S){super(f,g,"link",d,!0,y,m,S),this.register(b.onShowLinkUnderline(E=>this._handleShowLinkUnderline(E))),this.register(b.onHideLinkUnderline(E=>this._handleHideLinkUnderline(E)))}resize(g,d){super.resize(g,d),this._state=void 0}reset(g){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const g=this._state.y2-this._state.y1-1;g>0&&this._clearCells(0,this._state.y1+1,this._state.cols,g),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(g){if(g.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:g.fg!==void 0&&(0,u.is256Color)(g.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[g.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,g.y1===g.y2)this._fillBottomLineAtCells(g.x1,g.y1,g.x2-g.x1);else{this._fillBottomLineAtCells(g.x1,g.y1,g.cols-g.x1);for(let d=g.y1+1;d<g.y2;d++)this._fillBottomLineAtCells(0,d,g.cols);this._fillBottomLineAtCells(0,g.y2,g.x2)}this._state=g}_handleHideLinkUnderline(g){this._clearCurrentLink()}}n.LinkRenderLayer=p},820:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(c,u,l,h){c.addEventListener(u,l,h);let p=!1;return{dispose:()=>{p||(p=!0,c.removeEventListener(u,l,h))}}}},274:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellColorResolver=void 0;let c,u=0,l=0,h=!1,p=!1,_=!1;n.CellColorResolver=class{constructor(g,d,f,b,y){this._terminal=g,this._selectionRenderModel=d,this._decorationService=f,this._coreBrowserService=b,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(g,d,f){this.result.bg=g.bg,this.result.fg=g.fg,this.result.ext=268435456&g.bg?g.extended.ext:0,l=0,u=0,p=!1,h=!1,_=!1,c=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,f,"bottom",b=>{b.backgroundColorRGB&&(l=b.backgroundColorRGB.rgba>>8&16777215,p=!0),b.foregroundColorRGB&&(u=b.foregroundColorRGB.rgba>>8&16777215,h=!0)}),_=this._selectionRenderModel.isCellSelected(this._terminal,d,f),_&&(l=(this._coreBrowserService.isFocused?c.selectionBackgroundOpaque:c.selectionInactiveBackgroundOpaque).rgba>>8&16777215,p=!0,c.selectionForeground&&(u=c.selectionForeground.rgba>>8&16777215,h=!0)),this._decorationService.forEachDecorationAtCell(d,f,"top",b=>{b.backgroundColorRGB&&(l=b.backgroundColorRGB.rgba>>8&16777215,p=!0),b.foregroundColorRGB&&(u=b.foregroundColorRGB.rgba>>8&16777215,h=!0)}),p&&(l=_?-16777216&g.bg&-134217729|l|50331648:-16777216&g.bg|l|50331648),h&&(u=-16777216&g.fg&-67108865|u|50331648),67108864&this.result.fg&&(p&&!h&&(u=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&c.background.rgba>>8|50331648,h=!0),!p&&h&&(l=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&c.foreground.rgba>>8|50331648,p=!0)),c=void 0,this.result.bg=p?l:this.result.bg,this.result.fg=h?u:this.result.fg}}},627:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.removeTerminalFromCache=n.acquireTextureAtlas=void 0;const u=c(509),l=c(197),h=[];n.acquireTextureAtlas=function(p,_,g,d,f,b,y,m){const S=(0,l.generateConfig)(d,f,b,y,_,g,m);for(let P=0;P<h.length;P++){const O=h[P],w=O.ownedBy.indexOf(p);if(w>=0){if((0,l.configEquals)(O.config,S))return O.atlas;O.ownedBy.length===1?(O.atlas.dispose(),h.splice(P,1)):O.ownedBy.splice(w,1);break}}for(let P=0;P<h.length;P++){const O=h[P];if((0,l.configEquals)(O.config,S))return O.ownedBy.push(p),O.atlas}const E=p._core,D={atlas:new u.TextureAtlas(document,S,E.unicodeService),config:S,ownedBy:[p]};return h.push(D),D.atlas},n.removeTerminalFromCache=function(p){for(let _=0;_<h.length;_++){const g=h[_].ownedBy.indexOf(p);if(g!==-1){h[_].ownedBy.length===1?(h[_].atlas.dispose(),h.splice(_,1)):h[_].ownedBy.splice(g,1);break}}}},197:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.is256Color=n.configEquals=n.generateConfig=void 0;const u=c(160);n.generateConfig=function(l,h,p,_,g,d,f){const b={foreground:d.foreground,background:d.background,cursor:u.NULL_COLOR,cursorAccent:u.NULL_COLOR,selectionForeground:u.NULL_COLOR,selectionBackgroundTransparent:u.NULL_COLOR,selectionBackgroundOpaque:u.NULL_COLOR,selectionInactiveBackgroundTransparent:u.NULL_COLOR,selectionInactiveBackgroundOpaque:u.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:g.customGlyphs,devicePixelRatio:f,letterSpacing:g.letterSpacing,lineHeight:g.lineHeight,deviceCellWidth:l,deviceCellHeight:h,deviceCharWidth:p,deviceCharHeight:_,fontFamily:g.fontFamily,fontSize:g.fontSize,fontWeight:g.fontWeight,fontWeightBold:g.fontWeightBold,allowTransparency:g.allowTransparency,drawBoldTextInBrightColors:g.drawBoldTextInBrightColors,minimumContrastRatio:g.minimumContrastRatio,colors:b}},n.configEquals=function(l,h){for(let p=0;p<l.colors.ansi.length;p++)if(l.colors.ansi[p].rgba!==h.colors.ansi[p].rgba)return!1;return l.devicePixelRatio===h.devicePixelRatio&&l.customGlyphs===h.customGlyphs&&l.lineHeight===h.lineHeight&&l.letterSpacing===h.letterSpacing&&l.fontFamily===h.fontFamily&&l.fontSize===h.fontSize&&l.fontWeight===h.fontWeight&&l.fontWeightBold===h.fontWeightBold&&l.allowTransparency===h.allowTransparency&&l.deviceCharWidth===h.deviceCharWidth&&l.deviceCharHeight===h.deviceCharHeight&&l.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&l.minimumContrastRatio===h.minimumContrastRatio&&l.colors.foreground.rgba===h.colors.foreground.rgba&&l.colors.background.rgba===h.colors.background.rgba},n.is256Color=function(l){return(50331648&l)==16777216||(50331648&l)==33554432}},237:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const u=c(399);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},457:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CursorBlinkStateManager=void 0,n.CursorBlinkStateManager=class{constructor(c,u){this._renderCallback=c,this._coreBrowserService=u,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(c=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,u>0)return void this._restartInterval(u)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(u)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},c)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tryDrawCustomChar=n.powerlineDefinitions=n.boxDrawingDefinitions=n.blockElementDefinitions=void 0;const u=c(374);n.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const l={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};n.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"║":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╒":{1:(d,f)=>`M.5,1 L.5,${.5-f} L1,${.5-f} M.5,${.5+f} L1,${.5+f}`},"╓":{1:(d,f)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"╔":{1:(d,f)=>`M1,${.5-f} L${.5-d},${.5-f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1`},"╕":{1:(d,f)=>`M0,${.5-f} L.5,${.5-f} L.5,1 M0,${.5+f} L.5,${.5+f}`},"╖":{1:(d,f)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"╗":{1:(d,f)=>`M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M0,${.5-f} L${.5+d},${.5-f} L${.5+d},1`},"╘":{1:(d,f)=>`M.5,0 L.5,${.5+f} L1,${.5+f} M.5,${.5-f} L1,${.5-f}`},"╙":{1:(d,f)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"╚":{1:(d,f)=>`M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0 M1,${.5+f} L${.5-d},${.5+f} L${.5-d},0`},"╛":{1:(d,f)=>`M0,${.5+f} L.5,${.5+f} L.5,0 M0,${.5-f} L.5,${.5-f}`},"╜":{1:(d,f)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"╝":{1:(d,f)=>`M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M0,${.5+f} L${.5+d},${.5+f} L${.5+d},0`},"╞":{1:(d,f)=>`M.5,0 L.5,1 M.5,${.5-f} L1,${.5-f} M.5,${.5+f} L1,${.5+f}`},"╟":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"╠":{1:(d,f)=>`M${.5-d},0 L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╡":{1:(d,f)=>`M.5,0 L.5,1 M0,${.5-f} L.5,${.5-f} M0,${.5+f} L.5,${.5+f}`},"╢":{1:(d,f)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╣":{1:(d,f)=>`M${.5+d},0 L${.5+d},1 M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0`},"╤":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f} M.5,${.5+f} L.5,1`},"╥":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"╦":{1:(d,f)=>`M0,${.5-f} L1,${.5-f} M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1`},"╧":{1:(d,f)=>`M.5,0 L.5,${.5-f} M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"╨":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"╩":{1:(d,f)=>`M0,${.5+f} L1,${.5+f} M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╪":{1:(d,f)=>`M.5,0 L.5,1 M0,${.5-f} L1,${.5-f} M0,${.5+f} L1,${.5+f}`},"╫":{1:(d,f)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"╬":{1:(d,f)=>`M0,${.5+f} L${.5-d},${.5+f} L${.5-d},1 M1,${.5+f} L${.5+d},${.5+f} L${.5+d},1 M0,${.5-f} L${.5-d},${.5-f} L${.5-d},0 M1,${.5-f} L${.5+d},${.5-f} L${.5+d},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(d,f)=>`M.5,1 L.5,${.5+f/.15*.5} C.5,${.5+f/.15*.5},.5,.5,1,.5`},"╮":{1:(d,f)=>`M.5,1 L.5,${.5+f/.15*.5} C.5,${.5+f/.15*.5},.5,.5,0,.5`},"╯":{1:(d,f)=>`M.5,0 L.5,${.5-f/.15*.5} C.5,${.5-f/.15*.5},.5,.5,0,.5`},"╰":{1:(d,f)=>`M.5,0 L.5,${.5-f/.15*.5} C.5,${.5-f/.15*.5},.5,.5,1,.5`}},n.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},n.powerlineDefinitions[""]=n.powerlineDefinitions[""],n.powerlineDefinitions[""]=n.powerlineDefinitions[""],n.tryDrawCustomChar=function(d,f,b,y,m,S,E,D){const P=n.blockElementDefinitions[f];if(P)return function(v,C,A,T,k,L){for(let M=0;M<C.length;M++){const I=C[M],$=k/8,F=L/8;v.fillRect(A+I.x*$,T+I.y*F,I.w*$,I.h*F)}}(d,P,b,y,m,S),!0;const O=l[f];if(O)return function(v,C,A,T,k,L){let M=h.get(C);M||(M=new Map,h.set(C,M));const I=v.fillStyle;if(typeof I!="string")throw new Error(`Unexpected fillStyle type "${I}"`);let $=M.get(I);if(!$){const F=C[0].length,N=C.length,Q=document.createElement("canvas");Q.width=F,Q.height=N;const re=(0,u.throwIfFalsy)(Q.getContext("2d")),Y=new ImageData(F,N);let ee,ie,ne,W;if(I.startsWith("#"))ee=parseInt(I.slice(1,3),16),ie=parseInt(I.slice(3,5),16),ne=parseInt(I.slice(5,7),16),W=I.length>7&&parseInt(I.slice(7,9),16)||1;else{if(!I.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${I}" when drawing pattern glyph`);[ee,ie,ne,W]=I.substring(5,I.length-1).split(",").map(B=>parseFloat(B))}for(let B=0;B<N;B++)for(let q=0;q<F;q++)Y.data[4*(B*F+q)]=ee,Y.data[4*(B*F+q)+1]=ie,Y.data[4*(B*F+q)+2]=ne,Y.data[4*(B*F+q)+3]=C[B][q]*(255*W);re.putImageData(Y,0,0),$=(0,u.throwIfFalsy)(v.createPattern(Q,null)),M.set(I,$)}v.fillStyle=$,v.fillRect(A,T,k,L)}(d,O,b,y,m,S),!0;const w=n.boxDrawingDefinitions[f];if(w)return function(v,C,A,T,k,L,M){v.strokeStyle=v.fillStyle;for(const[I,$]of Object.entries(C)){let F;v.beginPath(),v.lineWidth=M*Number.parseInt(I),F=typeof $=="function"?$(.15,.15/L*k):$;for(const N of F.split(" ")){const Q=N[0],re=_[Q];if(!re){console.error(`Could not find drawing instructions for "${Q}"`);continue}const Y=N.substring(1).split(",");Y[0]&&Y[1]&&re(v,g(Y,k,L,A,T,!0,M))}v.stroke(),v.closePath()}}(d,w,b,y,m,S,D),!0;const R=n.powerlineDefinitions[f];return!!R&&(function(v,C,A,T,k,L,M,I){var $,F;const N=new Path2D;N.rect(A,T,k,L),v.clip(N),v.beginPath();const Q=M/12;v.lineWidth=I*Q;for(const re of C.d.split(" ")){const Y=re[0],ee=_[Y];if(!ee){console.error(`Could not find drawing instructions for "${Y}"`);continue}const ie=re.substring(1).split(",");ie[0]&&ie[1]&&ee(v,g(ie,k,L,A,T,!1,I,(($=C.leftPadding)!==null&&$!==void 0?$:0)*(Q/2),((F=C.rightPadding)!==null&&F!==void 0?F:0)*(Q/2)))}C.type===1?(v.strokeStyle=v.fillStyle,v.stroke()):v.fill(),v.closePath()}(d,R,b,y,m,S,E,D),!0)};const h=new Map;function p(d,f,b=0){return Math.max(Math.min(d,f),b)}const _={C:(d,f)=>d.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]),L:(d,f)=>d.lineTo(f[0],f[1]),M:(d,f)=>d.moveTo(f[0],f[1])};function g(d,f,b,y,m,S,E,D=0,P=0){const O=d.map(w=>parseFloat(w)||parseInt(w));if(O.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<O.length;w+=2)O[w]*=f-D*E-P*E,S&&O[w]!==0&&(O[w]=p(Math.round(O[w]+.5)-.5,f,0)),O[w]+=y+D*E;for(let w=1;w<O.length;w+=2)O[w]*=b,S&&O[w]!==0&&(O[w]=p(Math.round(O[w]+.5)-.5,b,0)),O[w]+=m;return O}},56:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.observeDevicePixelDimensions=void 0;const u=c(859);n.observeDevicePixelDimensions=function(l,h,p){let _=new h.ResizeObserver(g=>{const d=g.find(y=>y.target===l);if(!d)return;if(!("devicePixelContentBoxSize"in d))return _?.disconnect(),void(_=void 0);const f=d.devicePixelContentBoxSize[0].inlineSize,b=d.devicePixelContentBoxSize[0].blockSize;f>0&&b>0&&p(f,b)});try{_.observe(l,{box:["device-pixel-content-box"]})}catch{_.disconnect(),_=void 0}return(0,u.toDisposable)(()=>_?.disconnect())}},374:(o,n)=>{function c(u){return 57508<=u&&u<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},n.isPowerlineGlyph=c,n.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},n.excludeFromContrastRatioDemands=function(u){return c(u)||function(l){return 9472<=l&&l<=9631}(u)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,h,p,_=!1){if(this.selectionStart=h,this.selectionEnd=p,!h||!p||h[0]===p[0]&&h[1]===p[1])return void this.clear();const g=h[1]-l.buffer.active.viewportY,d=p[1]-l.buffer.active.viewportY,f=Math.max(g,0),b=Math.min(d,l.rows-1);f>=l.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=_,this.viewportStartRow=g,this.viewportEndRow=d,this.viewportCappedStartRow=f,this.viewportCappedEndRow=b,this.startCol=h[0],this.endCol=p[0])}isCellSelected(l,h,p){return!!this.hasSelection&&(p-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&p>=this.viewportCappedStartRow&&h<this.endCol&&p<=this.viewportCappedEndRow:h<this.startCol&&p>=this.viewportCappedStartRow&&h>=this.endCol&&p<=this.viewportCappedEndRow:p>this.viewportStartRow&&p<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&p===this.viewportStartRow&&h>=this.startCol)}}n.createSelectionRenderModel=function(){return new c}},509:function(o,n,c){var u=this&&this.__decorate||function(R,v,C,A){var T,k=arguments.length,L=k<3?v:A===null?A=Object.getOwnPropertyDescriptor(v,C):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(R,v,C,A);else for(var M=R.length-1;M>=0;M--)(T=R[M])&&(L=(k<3?T(L):k>3?T(v,C,L):T(v,C))||L);return k>3&&L&&Object.defineProperty(v,C,L),L};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureAtlas=void 0;const l=c(237),h=c(860),p=c(374),_=c(160),g=c(345),d=c(485),f=c(385),b=c(147),y=c(855),m=c(776),S={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let E;class D{get pages(){return this._pages}constructor(v,C,A){this._document=v,this._config=C,this._unicodeService=A,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new g.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new g.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(v,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,p.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const v of this.pages)v.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const v=new f.IdleTaskQueue;for(let C=33;C<126;C++)v.enqueue(()=>{if(!this._cacheMap.get(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){const A=this._drawToCache(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);this._cacheMap.set(C,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,A)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const v of this._pages)v.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(D.maxAtlasPages&&this._pages.length>=Math.max(4,D.maxAtlasPages)){const C=this._pages.filter($=>2*$.canvas.width<=(D.maxTextureSize||4096)).sort(($,F)=>F.canvas.width!==$.canvas.width?F.canvas.width-$.canvas.width:F.percentageUsed-$.percentageUsed);let A=-1,T=0;for(let $=0;$<C.length;$++)if(C[$].canvas.width!==T)A=$,T=C[$].canvas.width;else if($-A==3)break;const k=C.slice(A,A+4),L=k.map($=>$.glyphs[0].texturePage).sort(($,F)=>$>F?1:-1),M=this.pages.length-k.length,I=this._mergePages(k,M);I.version++;for(let $=L.length-1;$>=0;$--)this._deletePage(L[$]);this.pages.push(I),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(I.canvas)}const v=new P(this._document,this._textureSize);return this._pages.push(v),this._activePages.push(v),this._onAddTextureAtlasCanvas.fire(v.canvas),v}_mergePages(v,C){const A=2*v[0].canvas.width,T=new P(this._document,A,v);for(const[k,L]of v.entries()){const M=k*L.canvas.width%A,I=Math.floor(k/2)*L.canvas.height;T.ctx.drawImage(L.canvas,M,I);for(const F of L.glyphs)F.texturePage=C,F.sizeClipSpace.x=F.size.x/A,F.sizeClipSpace.y=F.size.y/A,F.texturePosition.x+=M,F.texturePosition.y+=I,F.texturePositionClipSpace.x=F.texturePosition.x/A,F.texturePositionClipSpace.y=F.texturePosition.y/A;this._onRemoveTextureAtlasCanvas.fire(L.canvas);const $=this._activePages.indexOf(L);$!==-1&&this._activePages.splice($,1)}return T}_deletePage(v){this._pages.splice(v,1);for(let C=v;C<this._pages.length;C++){const A=this._pages[C];for(const T of A.glyphs)T.texturePage--;A.version++}}getRasterizedGlyphCombinedChar(v,C,A,T,k){return this._getFromCacheMap(this._cacheMapCombined,v,C,A,T,k)}getRasterizedGlyph(v,C,A,T,k){return this._getFromCacheMap(this._cacheMap,v,C,A,T,k)}_getFromCacheMap(v,C,A,T,k,L=!1){return E=v.get(C,A,T,k),E||(E=this._drawToCache(C,A,T,k,L),v.set(C,A,T,k,E)),E}_getColorFromAnsiIndex(v){if(v>=this._config.colors.ansi.length)throw new Error("No color found for idx "+v);return this._config.colors.ansi[v]}_getBackgroundColor(v,C,A,T){if(this._config.allowTransparency)return _.NULL_COLOR;let k;switch(v){case 16777216:case 33554432:k=this._getColorFromAnsiIndex(C);break;case 50331648:const L=b.AttributeData.toColorRGB(C);k=_.rgba.toColor(L[0],L[1],L[2]);break;default:k=A?_.color.opaque(this._config.colors.foreground):this._config.colors.background}return k}_getForegroundColor(v,C,A,T,k,L,M,I,$,F){const N=this._getMinimumContrastColor(v,C,A,T,k,L,!1,$,I,F);if(N)return N;let Q;switch(k){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&$&&L<8&&(L+=8),Q=this._getColorFromAnsiIndex(L);break;case 50331648:const re=b.AttributeData.toColorRGB(L);Q=_.rgba.toColor(re[0],re[1],re[2]);break;default:Q=M?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(Q=_.color.opaque(Q)),I&&(Q=_.color.multiplyOpacity(Q,l.DIM_OPACITY)),Q}_resolveBackgroundRgba(v,C,A){switch(v){case 16777216:case 33554432:return this._getColorFromAnsiIndex(C).rgba;case 50331648:return C<<8;default:return A?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(v,C,A,T){switch(v){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&C<8&&(C+=8),this._getColorFromAnsiIndex(C).rgba;case 50331648:return C<<8;default:return A?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(v,C,A,T,k,L,M,I,$,F){if(this._config.minimumContrastRatio===1||F)return;const N=this._getContrastCache($),Q=N.getColor(v,T);if(Q!==void 0)return Q||void 0;const re=this._resolveBackgroundRgba(C,A,M),Y=this._resolveForegroundRgba(k,L,M,I),ee=_.rgba.ensureContrastRatio(re,Y,this._config.minimumContrastRatio/($?2:1));if(!ee)return void N.setColor(v,T,null);const ie=_.rgba.toColor(ee>>24&255,ee>>16&255,ee>>8&255);return N.setColor(v,T,ie),ie}_getContrastCache(v){return v?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(v,C,A,T,k=!1){const L=typeof v=="number"?String.fromCharCode(v):v,M=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<M&&(this._tmpCanvas.width=M);const I=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<I&&(this._tmpCanvas.height=I),this._tmpCtx.save(),this._workAttributeData.fg=A,this._workAttributeData.bg=C,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return S;const $=!!this._workAttributeData.isBold(),F=!!this._workAttributeData.isInverse(),N=!!this._workAttributeData.isDim(),Q=!!this._workAttributeData.isItalic(),re=!!this._workAttributeData.isUnderline(),Y=!!this._workAttributeData.isStrikethrough(),ee=!!this._workAttributeData.isOverline();let ie=this._workAttributeData.getFgColor(),ne=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),B=this._workAttributeData.getBgColorMode();if(F){const z=ie;ie=W,W=z;const J=ne;ne=B,B=J}const q=this._getBackgroundColor(B,W,F,N);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=q.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const G=$?this._config.fontWeightBold:this._config.fontWeight,le=Q?"italic":"";this._tmpCtx.font=`${le} ${G} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=l.TEXT_BASELINE;const ce=L.length===1&&(0,p.isPowerlineGlyph)(L.charCodeAt(0)),de=L.length===1&&(0,p.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),pe=this._getForegroundColor(C,B,W,A,ne,ie,F,N,$,(0,p.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=pe.css;const Z=de?0:4;let Oe=!1;this._config.customGlyphs!==!1&&(Oe=(0,h.tryDrawCustomChar)(this._tmpCtx,L,Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Ae,Re=!ce;if(Ae=typeof v=="number"?this._unicodeService.wcwidth(v):this._unicodeService.getStringCellWidth(v),re){this._tmpCtx.save();const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),J=z%2==1?.5:0;if(this._tmpCtx.lineWidth=z,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Re=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Re=!1;let fe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&fe<8&&(fe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(fe).css}this._tmpCtx.beginPath();const he=Z,se=Math.ceil(Z+this._config.deviceCharHeight)-J-(k?2*z:0),je=se+z,ze=se+2*z;for(let fe=0;fe<Ae;fe++){this._tmpCtx.save();const oe=he+fe*this._config.deviceCellWidth,_e=he+(fe+1)*this._config.deviceCellWidth,Tt=oe+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se),this._tmpCtx.moveTo(oe,ze),this._tmpCtx.lineTo(_e,ze);break;case 3:const ot=z<=1?ze:Math.ceil(Z+this._config.deviceCharHeight-z/2)-J,at=z<=1?se:Math.ceil(Z+this._config.deviceCharHeight+z/2)-J,dr=new Path2D;dr.rect(oe,se,this._config.deviceCellWidth,ze-se),this._tmpCtx.clip(dr),this._tmpCtx.moveTo(oe-this._config.deviceCellWidth/2,je),this._tmpCtx.bezierCurveTo(oe-this._config.deviceCellWidth/2,at,oe,at,oe,je),this._tmpCtx.bezierCurveTo(oe,ot,Tt,ot,Tt,je),this._tmpCtx.bezierCurveTo(Tt,at,_e,at,_e,je),this._tmpCtx.bezierCurveTo(_e,ot,_e+this._config.deviceCellWidth/2,ot,_e+this._config.deviceCellWidth/2,je);break;case 4:this._tmpCtx.setLineDash([Math.round(z),Math.round(z)]),this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se);break;default:this._tmpCtx.moveTo(oe,se),this._tmpCtx.lineTo(_e,se)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Oe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const fe=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in fe&&fe.actualBoundingBoxDescent>0){this._tmpCtx.save();const oe=new Path2D;oe.rect(he,se-Math.ceil(z/2),this._config.deviceCellWidth*Ae,ze-se+Math.ceil(z/2)),this._tmpCtx.clip(oe),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=q.css,this._tmpCtx.strokeText(L,Z,Z+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ee){const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),J=z%2==1?.5:0;this._tmpCtx.lineWidth=z,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+J),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*Ae,Z+J),this._tmpCtx.stroke()}if(Oe||this._tmpCtx.fillText(L,Z,Z+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let z=O(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),q,pe,Re);if(z)for(let J=1;J<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=q.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,Z,Z+this._config.deviceCharHeight-J),z=O(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),q,pe,Re),z);J++);}if(Y){const z=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),J=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=z,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+Math.floor(this._config.deviceCharHeight/2)-J),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*Ae,Z+Math.floor(this._config.deviceCharHeight/2)-J),this._tmpCtx.stroke()}this._tmpCtx.restore();const ve=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Je;if(Je=this._config.allowTransparency?function(z){for(let J=0;J<z.data.length;J+=4)if(z.data[J+3]>0)return!1;return!0}(ve):O(ve,q,pe,Re),Je)return S;const H=this._findGlyphBoundingBox(ve,this._workBoundingBox,M,de,Oe,Z);let U,X;for(;;){if(this._activePages.length===0){const z=this._createNewPage();U=z,X=z.currentRow,X.height=H.size.y;break}U=this._activePages[this._activePages.length-1],X=U.currentRow;for(const z of this._activePages)H.size.y<=z.currentRow.height&&(U=z,X=z.currentRow);for(let z=this._activePages.length-1;z>=0;z--)for(const J of this._activePages[z].fixedRows)J.height<=X.height&&H.size.y<=J.height&&(U=this._activePages[z],X=J);if(X.y+H.size.y>=U.canvas.height||X.height>H.size.y+2){let z=!1;if(U.currentRow.y+U.currentRow.height+H.size.y>=U.canvas.height){let J;for(const he of this._activePages)if(he.currentRow.y+he.currentRow.height+H.size.y<he.canvas.height){J=he;break}if(J)U=J;else if(D.maxAtlasPages&&this._pages.length>=D.maxAtlasPages&&X.y+H.size.y<=U.canvas.height&&X.height>=H.size.y&&X.x+H.size.x<=U.canvas.width)z=!0;else{const he=this._createNewPage();U=he,X=he.currentRow,X.height=H.size.y,z=!0}}z||(U.currentRow.height>0&&U.fixedRows.push(U.currentRow),X={x:0,y:U.currentRow.y+U.currentRow.height,height:H.size.y},U.fixedRows.push(X),U.currentRow={x:0,y:X.y+X.height,height:0})}if(X.x+H.size.x<=U.canvas.width)break;X===U.currentRow?(X.x=0,X.y+=X.height,X.height=0):U.fixedRows.splice(U.fixedRows.indexOf(X),1)}return H.texturePage=this._pages.indexOf(U),H.texturePosition.x=X.x,H.texturePosition.y=X.y,H.texturePositionClipSpace.x=X.x/U.canvas.width,H.texturePositionClipSpace.y=X.y/U.canvas.height,H.sizeClipSpace.x/=U.canvas.width,H.sizeClipSpace.y/=U.canvas.height,X.height=Math.max(X.height,H.size.y),X.x+=H.size.x,U.ctx.putImageData(ve,H.texturePosition.x-this._workBoundingBox.left,H.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,H.size.x,H.size.y),U.addGlyph(H),U.version++,H}_findGlyphBoundingBox(v,C,A,T,k,L){C.top=0;const M=T?this._config.deviceCellHeight:this._tmpCanvas.height,I=T?this._config.deviceCellWidth:A;let $=!1;for(let F=0;F<M;F++){for(let N=0;N<I;N++){const Q=F*this._tmpCanvas.width*4+4*N+3;if(v.data[Q]!==0){C.top=F,$=!0;break}}if($)break}C.left=0,$=!1;for(let F=0;F<L+I;F++){for(let N=0;N<M;N++){const Q=N*this._tmpCanvas.width*4+4*F+3;if(v.data[Q]!==0){C.left=F,$=!0;break}}if($)break}C.right=I,$=!1;for(let F=L+I-1;F>=L;F--){for(let N=0;N<M;N++){const Q=N*this._tmpCanvas.width*4+4*F+3;if(v.data[Q]!==0){C.right=F,$=!0;break}}if($)break}C.bottom=M,$=!1;for(let F=M-1;F>=0;F--){for(let N=0;N<I;N++){const Q=F*this._tmpCanvas.width*4+4*N+3;if(v.data[Q]!==0){C.bottom=F,$=!0;break}}if($)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:C.right-C.left+1,y:C.bottom-C.top+1},sizeClipSpace:{x:C.right-C.left+1,y:C.bottom-C.top+1},offset:{x:-C.left+L+(T||k?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-C.top+L+(T||k?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}n.TextureAtlas=D,u([m.traceCall],D.prototype,"_drawToCache",null);class P{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(v){this._glyphs.push(v),this._usedPixels+=v.size.x*v.size.y}constructor(v,C,A){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],A)for(const T of A)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=w(v,C,C),this.ctx=(0,p.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function O(R,v,C,A){const T=v.rgba>>>24,k=v.rgba>>>16&255,L=v.rgba>>>8&255,M=C.rgba>>>24,I=C.rgba>>>16&255,$=C.rgba>>>8&255,F=Math.floor((Math.abs(T-M)+Math.abs(k-I)+Math.abs(L-$))/12);let N=!0;for(let Q=0;Q<R.data.length;Q+=4)R.data[Q]===T&&R.data[Q+1]===k&&R.data[Q+2]===L||A&&Math.abs(R.data[Q]-T)+Math.abs(R.data[Q+1]-k)+Math.abs(R.data[Q+2]-L)<F?R.data[Q+3]=0:N=!1;return N}function w(R,v,C){const A=R.createElement("canvas");return A.width=v,A.height=C,A}},160:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const u=c(399);let l=0,h=0,p=0,_=0;var g,d,f,b,y;function m(E){const D=E.toString(16);return D.length<2?"0"+D:D}function S(E,D){return E<D?(D+.05)/(E+.05):(E+.05)/(D+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(E){E.toCss=function(D,P,O,w){return w!==void 0?`#${m(D)}${m(P)}${m(O)}${m(w)}`:`#${m(D)}${m(P)}${m(O)}`},E.toRgba=function(D,P,O,w=255){return(D<<24|P<<16|O<<8|w)>>>0}}(g||(n.channels=g={})),function(E){function D(P,O){return _=Math.round(255*O),[l,h,p]=y.toChannels(P.rgba),{css:g.toCss(l,h,p,_),rgba:g.toRgba(l,h,p,_)}}E.blend=function(P,O){if(_=(255&O.rgba)/255,_===1)return{css:O.css,rgba:O.rgba};const w=O.rgba>>24&255,R=O.rgba>>16&255,v=O.rgba>>8&255,C=P.rgba>>24&255,A=P.rgba>>16&255,T=P.rgba>>8&255;return l=C+Math.round((w-C)*_),h=A+Math.round((R-A)*_),p=T+Math.round((v-T)*_),{css:g.toCss(l,h,p),rgba:g.toRgba(l,h,p)}},E.isOpaque=function(P){return(255&P.rgba)==255},E.ensureContrastRatio=function(P,O,w){const R=y.ensureContrastRatio(P.rgba,O.rgba,w);if(R)return y.toColor(R>>24&255,R>>16&255,R>>8&255)},E.opaque=function(P){const O=(255|P.rgba)>>>0;return[l,h,p]=y.toChannels(O),{css:g.toCss(l,h,p),rgba:O}},E.opacity=D,E.multiplyOpacity=function(P,O){return _=255&P.rgba,D(P,_*O/255)},E.toColorRGB=function(P){return[P.rgba>>24&255,P.rgba>>16&255,P.rgba>>8&255]}}(d||(n.color=d={})),function(E){let D,P;if(!u.isNode){const O=document.createElement("canvas");O.width=1,O.height=1;const w=O.getContext("2d",{willReadFrequently:!0});w&&(D=w,D.globalCompositeOperation="copy",P=D.createLinearGradient(0,0,1,1))}E.toColor=function(O){if(O.match(/#[\da-f]{3,8}/i))switch(O.length){case 4:return l=parseInt(O.slice(1,2).repeat(2),16),h=parseInt(O.slice(2,3).repeat(2),16),p=parseInt(O.slice(3,4).repeat(2),16),y.toColor(l,h,p);case 5:return l=parseInt(O.slice(1,2).repeat(2),16),h=parseInt(O.slice(2,3).repeat(2),16),p=parseInt(O.slice(3,4).repeat(2),16),_=parseInt(O.slice(4,5).repeat(2),16),y.toColor(l,h,p,_);case 7:return{css:O,rgba:(parseInt(O.slice(1),16)<<8|255)>>>0};case 9:return{css:O,rgba:parseInt(O.slice(1),16)>>>0}}const w=O.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return l=parseInt(w[1]),h=parseInt(w[2]),p=parseInt(w[3]),_=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),y.toColor(l,h,p,_);if(!D||!P)throw new Error("css.toColor: Unsupported css format");if(D.fillStyle=P,D.fillStyle=O,typeof D.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(D.fillRect(0,0,1,1),[l,h,p,_]=D.getImageData(0,0,1,1).data,_!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(l,h,p,_),css:O}}}(f||(n.css=f={})),function(E){function D(P,O,w){const R=P/255,v=O/255,C=w/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))}E.relativeLuminance=function(P){return D(P>>16&255,P>>8&255,255&P)},E.relativeLuminance2=D}(b||(n.rgb=b={})),function(E){function D(O,w,R){const v=O>>24&255,C=O>>16&255,A=O>>8&255;let T=w>>24&255,k=w>>16&255,L=w>>8&255,M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));for(;M<R&&(T>0||k>0||L>0);)T-=Math.max(0,Math.ceil(.1*T)),k-=Math.max(0,Math.ceil(.1*k)),L-=Math.max(0,Math.ceil(.1*L)),M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));return(T<<24|k<<16|L<<8|255)>>>0}function P(O,w,R){const v=O>>24&255,C=O>>16&255,A=O>>8&255;let T=w>>24&255,k=w>>16&255,L=w>>8&255,M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));for(;M<R&&(T<255||k<255||L<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),k=Math.min(255,k+Math.ceil(.1*(255-k))),L=Math.min(255,L+Math.ceil(.1*(255-L))),M=S(b.relativeLuminance2(T,k,L),b.relativeLuminance2(v,C,A));return(T<<24|k<<16|L<<8|255)>>>0}E.ensureContrastRatio=function(O,w,R){const v=b.relativeLuminance(O>>8),C=b.relativeLuminance(w>>8);if(S(v,C)<R){if(C<v){const k=D(O,w,R),L=S(v,b.relativeLuminance(k>>8));if(L<R){const M=P(O,w,R);return L>S(v,b.relativeLuminance(M>>8))?k:M}return k}const A=P(O,w,R),T=S(v,b.relativeLuminance(A>>8));if(T<R){const k=D(O,w,R);return T>S(v,b.relativeLuminance(k>>8))?A:k}return A}},E.reduceLuminance=D,E.increaseLuminance=P,E.toChannels=function(O){return[O>>24&255,O>>16&255,O>>8&255,255&O]},E.toColor=function(O,w,R,v){return{css:g.toCss(O,w,R,v),rgba:g.toRgba(O,w,R,v)}}}(y||(n.rgba=y={})),n.toPaddedHex=m,n.contrastRatio=S},345:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===c)return void this._listeners.splice(u,1)}}})),this._event}fire(c,u){const l=[];for(let h=0;h<this._listeners.length;h++)l.push(this._listeners[h]);for(let h=0;h<l.length;h++)l[h].call(void 0,c,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(c,u){return c(l=>u.fire(l))}},859:(o,n)=>{function c(u){for(const l of u)l.dispose();u.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const l=this._disposables.indexOf(u);l!==-1&&this._disposables.splice(l,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var l;this._isDisposed||u===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},n.toDisposable=function(u){return{dispose:u}},n.disposeArray=c,n.getDisposeArrayDisposable=function(u){return{dispose:()=>c(u)}}},485:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(l,h,p){this._data[l]||(this._data[l]={}),this._data[l][h]=p}get(l,h){return this._data[l]?this._data[l][h]:void 0}clear(){this._data={}}}n.TwoKeyMap=c,n.FourKeyMap=class{constructor(){this._data=new c}set(u,l,h,p,_){this._data.get(u,l)||this._data.set(u,l,new c),this._data.get(u,l).set(h,p,_)}get(u,l,h,p){var _;return(_=this._data.get(u,l))===null||_===void 0?void 0:_.get(h,p)}clear(){this._data.clear()}}},399:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const c=n.isNode?"node":navigator.userAgent,u=n.isNode?"node":navigator.platform;n.isFirefox=c.includes("Firefox"),n.isLegacyEdge=c.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(c),n.getSafariVersion=function(){if(!n.isSafari)return 0;const l=c.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),n.isIpad=u==="iPad",n.isIphone=u==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),n.isLinux=u.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(c)},385:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const u=c(399);class l{constructor(){this._tasks=[],this._i=0}enqueue(_){this._tasks.push(_),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(_){this._idleCallback=void 0;let g=0,d=0,f=_.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),b=_.timeRemaining(),1.5*d>b)return f-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(f-g))}ms`),void this._start();f=b}this.clear()}}class h extends l{_requestCallback(_){return setTimeout(()=>_(this._createDeadline(16)))}_cancelCallback(_){clearTimeout(_)}_createDeadline(_){const g=Date.now()+_;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}n.PriorityTaskQueue=h,n.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:h,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},147:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new c;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=c;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}constructor(h=0,p=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=p}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=u},782:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const u=c(133),l=c(855),h=c(147);class p extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(g){const d=new p;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[l.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[l.CHAR_DATA_CHAR_INDEX].length===2){const f=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){const b=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(f-55296)+b-56320+65536|g[l.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[l.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=p},855:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},133:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},n.utf32ToString=function(c,u=0,l=c.length){let h="";for(let p=u;p<l;++p){let _=c[p];_>65535?(_-=65536,h+=String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):h+=String.fromCharCode(_)}return h},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,u){const l=c.length;if(!l)return 0;let h=0,p=0;if(this._interim){const _=c.charCodeAt(p++);56320<=_&&_<=57343?u[h++]=1024*(this._interim-55296)+_-56320+65536:(u[h++]=this._interim,u[h++]=_),this._interim=0}for(let _=p;_<l;++_){const g=c.charCodeAt(_);if(55296<=g&&g<=56319){if(++_>=l)return this._interim=g,h;const d=c.charCodeAt(_);56320<=d&&d<=57343?u[h++]=1024*(g-55296)+d-56320+65536:(u[h++]=g,u[h++]=d)}else g!==65279&&(u[h++]=g)}return h}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,u){const l=c.length;if(!l)return 0;let h,p,_,g,d=0,f=0,b=0;if(this.interim[0]){let S=!1,E=this.interim[0];E&=(224&E)==192?31:(240&E)==224?15:7;let D,P=0;for(;(D=63&this.interim[++P])&&P<4;)E<<=6,E|=D;const O=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=O-P;for(;b<w;){if(b>=l)return 0;if(D=c[b++],(192&D)!=128){b--,S=!0;break}this.interim[P++]=D,E<<=6,E|=63&D}S||(O===2?E<128?b--:u[d++]=E:O===3?E<2048||E>=55296&&E<=57343||E===65279||(u[d++]=E):E<65536||E>1114111||(u[d++]=E)),this.interim.fill(0)}const y=l-4;let m=b;for(;m<l;){for(;!(!(m<y)||128&(h=c[m])||128&(p=c[m+1])||128&(_=c[m+2])||128&(g=c[m+3]));)u[d++]=h,u[d++]=p,u[d++]=_,u[d++]=g,m+=4;if(h=c[m++],h<128)u[d++]=h;else if((224&h)==192){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(f=(31&h)<<6|63&p,f<128){m--;continue}u[d++]=f}else if((240&h)==224){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,d;if(_=c[m++],(192&_)!=128){m--;continue}if(f=(15&h)<<12|(63&p)<<6|63&_,f<2048||f>=55296&&f<=57343||f===65279)continue;u[d++]=f}else if((248&h)==240){if(m>=l)return this.interim[0]=h,d;if(p=c[m++],(192&p)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,d;if(_=c[m++],(192&_)!=128){m--;continue}if(m>=l)return this.interim[0]=h,this.interim[1]=p,this.interim[2]=_,d;if(g=c[m++],(192&g)!=128){m--;continue}if(f=(7&h)<<18|(63&p)<<12|(63&_)<<6|63&g,f<65536||f>1114111)continue;u[d++]=f}}return d}}},776:function(o,n,c){var u=this&&this.__decorate||function(f,b,y,m){var S,E=arguments.length,D=E<3?b:m===null?m=Object.getOwnPropertyDescriptor(b,y):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(f,b,y,m);else for(var P=f.length-1;P>=0;P--)(S=f[P])&&(D=(E<3?S(D):E>3?S(b,y,D):S(b,y))||D);return E>3&&D&&Object.defineProperty(b,y,D),D},l=this&&this.__param||function(f,b){return function(y,m){b(y,m,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const h=c(859),p=c(97),_={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let g,d=n.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(f){super(),this._optionsService=f,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=_[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let b=0;b<f.length;b++)typeof f[b]=="function"&&(f[b]=f[b]())}_log(f,b,y){this._evalLazyOptionalParams(y),f.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...y)}trace(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,f,b)}debug(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,f,b)}info(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.INFO&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,f,b)}warn(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.WARN&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,f,b)}error(f,...b){var y,m;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((m=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,f,b)}};n.LogService=d=u([l(0,p.IOptionsService)],d),n.setTraceLogger=function(f){g=f},n.traceCall=function(f,b,y){if(typeof y.value!="function")throw new Error("not supported");const m=y.value;y.value=function(...S){if(g.logLevel!==p.LogLevelEnum.TRACE)return m.apply(this,S);g.trace(`GlyphRenderer#${m.name}(${S.map(D=>JSON.stringify(D)).join(", ")})`);const E=m.apply(this,S);return g.trace(`GlyphRenderer#${m.name} return`,E),E}}},726:(o,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const c="di$target",u="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(l){return l[u]||[]},n.createDecorator=function(l){if(n.serviceRegistry.has(l))return n.serviceRegistry.get(l);const h=function(p,_,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,f,b){f[c]===f?f[u].push({id:d,index:b}):(f[u]=[{id:d,index:b}],f[c]=f)})(h,p,g)};return h.toString=()=>l,n.serviceRegistry.set(l,h),h}},97:(o,n,c)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const u=c(726);var l;n.IBufferService=(0,u.createDecorator)("BufferService"),n.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),n.ICoreService=(0,u.createDecorator)("CoreService"),n.ICharsetService=(0,u.createDecorator)("CharsetService"),n.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(l||(n.LogLevelEnum=l={})),n.ILogService=(0,u.createDecorator)("LogService"),n.IOptionsService=(0,u.createDecorator)("OptionsService"),n.IOscLinkService=(0,u.createDecorator)("OscLinkService"),n.IUnicodeService=(0,u.createDecorator)("UnicodeService"),n.IDecorationService=(0,u.createDecorator)("DecorationService")}},i={};function s(o){var n=i[o];if(n!==void 0)return n.exports;var c=i[o]={exports:{}};return t[o].call(c.exports,c,c.exports,s),c.exports}var a={};return(()=>{var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.WebglAddon=void 0;const n=s(345),c=s(859),u=s(399),l=s(666),h=s(776);class p extends c.Disposable{constructor(g){if(u.isSafari&&(0,u.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=g,this._onChangeTextureAtlas=this.register(new n.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new n.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new n.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new n.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(g){const d=g._core;if(!g.element)return void this.register(d.onWillOpen(()=>this.activate(g)));this._terminal=g;const f=d.coreService,b=d.optionsService,y=d,m=y._renderService,S=y._characterJoinerService,E=y._charSizeService,D=y._coreBrowserService,P=y._decorationService,O=y._logService,w=y._themeService;(0,h.setTraceLogger)(O),this._renderer=this.register(new l.WebglRenderer(g,S,E,D,f,P,b,w,this._preserveDrawingBuffer)),this.register((0,n.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,n.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,n.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,n.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,c.toDisposable)(()=>{const R=this._terminal._core._renderService;R.setRenderer(this._terminal._core._createRenderer()),R.handleResize(g.cols,g.rows)}))}get textureAtlas(){var g;return(g=this._renderer)===null||g===void 0?void 0:g.textureAtlas}clearTextureAtlas(){var g;(g=this._renderer)===null||g===void 0||g.clearTextureAtlas()}}o.WebglAddon=p})(),a})())})(Eh);var cO=Eh.exports,co={},Th={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseInput=r.InputType=void 0;var e;(function(s){s[s.Text=0]="Text",s[s.AltEnter=1]="AltEnter",s[s.ArrowUp=2]="ArrowUp",s[s.ArrowDown=3]="ArrowDown",s[s.ArrowLeft=4]="ArrowLeft",s[s.ArrowRight=5]="ArrowRight",s[s.Delete=6]="Delete",s[s.Backspace=7]="Backspace",s[s.CtrlA=8]="CtrlA",s[s.CtrlC=9]="CtrlC",s[s.CtrlD=10]="CtrlD",s[s.CtrlE=11]="CtrlE",s[s.CtrlK=12]="CtrlK",s[s.CtrlL=13]="CtrlL",s[s.CtrlQ=14]="CtrlQ",s[s.CtrlS=15]="CtrlS",s[s.CtrlU=16]="CtrlU",s[s.End=17]="End",s[s.Enter=18]="Enter",s[s.Home=19]="Home",s[s.ShiftEnter=20]="ShiftEnter",s[s.UnsupportedControlChar=21]="UnsupportedControlChar",s[s.UnsupportedEscape=22]="UnsupportedEscape"})(e=r.InputType||(r.InputType={}));function t(s){return Array.from(i(s))}r.parseInput=t;function*i(s){let a=[];const o=s[Symbol.iterator]();for(let n=o.next();!n.done;n=o.next()){const c=n.value;if(c.length>1){a.push(c);continue}const u=c.charCodeAt(0);if(a.length>0&&(u<32||u===127)&&(yield{inputType:e.Text,data:a},a=[]),u===27){const l=o.next();if(l.done){a.push("\x1B");continue}let h=e.UnsupportedEscape;if(l.value!=="["){switch(l.value){case"\r":h=e.AltEnter;break}yield{inputType:h,data:["\x1B",l.value]};continue}const p=o.next();if(p.done)continue;if(p.value>="0"&&p.value<="9"){let _=p.value;const g=o.next();if(g.done)return;if(g.value>="0"&&g.value<="9")_+=g.value;else if(g.value!=="~")continue;switch(_){case"3":h=e.Delete;break}yield{inputType:h,data:["\x1B","[",_,"~"]};continue}switch(p.value){case"A":h=e.ArrowUp;break;case"B":h=e.ArrowDown;break;case"C":h=e.ArrowRight;break;case"D":h=e.ArrowLeft;break;case"F":h=e.End;break;case"H":h=e.Home;break;case"\r":h=e.AltEnter;break}yield{inputType:h,data:["\x1B","[",p.value]};continue}if(u<32||u===127){let l=e.UnsupportedControlChar;switch(u){case 1:l=e.CtrlA;break;case 3:l=e.CtrlC;break;case 4:l=e.CtrlD;break;case 5:l=e.CtrlE;break;case 11:l=e.CtrlK;break;case 17:l=e.CtrlQ;break;case 19:l=e.CtrlS;break;case 21:l=e.CtrlU;break;case 13:l=e.Enter;break;case 127:l=e.Backspace;break;case 12:l=e.CtrlL;break}yield{inputType:l,data:[c]};continue}a.push(c)}a.length>0&&(yield{inputType:e.Text,data:a})}})(Th);var yt={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.LineBuffer=void 0;class lO{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(e,t){this.buf=e,this.pos=t}insert(e){const t=e.length,i=this.pos===this.buf.length;return i?this.buf=this.buf+e:this.buf=this.buf.slice(0,this.pos)+e+this.buf.slice(this.pos),this.pos+=t,i}moveBack(e){const t=this.prevPos(e);return t!==void 0?(this.pos=t,!0):!1}moveForward(e){const t=this.nextPos(e);return t!==void 0?(this.pos=t,!0):!1}moveHome(){const e=this.startOfLine();return this.pos>e?(this.pos=e,!0):!1}moveEnd(){const e=this.endOfLine();return this.pos===e?!1:(this.pos=e,!0)}startOfLine(){const e=this.buf.slice(0,this.pos).lastIndexOf(`
`);return e!==-1?e+1:0}endOfLine(){const e=this.buf.slice(this.pos).indexOf(`
`);return e!==-1?this.pos+e:this.buf.length}moveLineUp(e){const t=this.buf.slice(0,this.pos).lastIndexOf(`
`);if(t===-1)return!1;const i=[...this.buf.slice(t+1,this.pos)].length;let s=this.buf.slice(0,t).lastIndexOf(`
`);s===-1?s=0:s=s+1;let a=t;for(let c=1;c<e&&s!==0;c++)a=s-1,s=this.buf.slice(0,a).lastIndexOf(`
`),s===-1?s=0:s=s+1;const o=[...this.buf.slice(s,a)].slice(0,i);let n=t;return o.length>0&&(n=o.map(c=>c.length).reduce((c,u)=>c+u,0),n=s+n),this.pos=n,!0}moveLineDown(e){const t=this.buf.slice(this.pos).indexOf(`
`);if(t===-1)return!1;let i=this.buf.slice(0,this.pos).lastIndexOf(`
`);i===-1?i=0:i+=1;const s=[...this.buf.slice(i,this.pos)].length;let a=this.pos+t+1,o=this.buf.slice(a).indexOf(`
`);o===-1?o=this.buf.length:o=a+o;for(let c=1;c<e&&o!==this.buf.length;c++)a=o+1,o=this.buf.slice(a).indexOf(`
`),o===-1?o=this.buf.length:o=a+o;const n=[...this.buf.slice(a,o)];return s<n.length?this.pos=n.slice(0,s).map(c=>c.length).reduce((c,u)=>c+u,0)+a:this.pos=o,!0}set_pos(e){this.pos=e}prevPos(e){if(this.pos===0)return;const t=this.buf.slice(0,this.pos);return this.pos-[...t].slice(-e).map(i=>i.length).reduce((i,s)=>i+s,0)}nextPos(e){if(this.pos===this.buf.length)return;const t=this.buf.slice(this.pos);return this.pos+[...t].slice(0,e).map(i=>i.length).reduce((i,s)=>i+s,0)}backspace(e){const t=this.prevPos(e);return t===void 0?!1:(this.buf=this.buf.slice(0,t)+this.buf.slice(this.pos),this.pos=t,!0)}delete(e){const t=this.nextPos(e);return t!==void 0?(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(t),!0):!1}deleteEndOfLine(){if(this.buf.length==0||this.pos==this.buf.length)return!1;const e=this.pos,t=this.endOfLine();return e==t?this.delete(1):this.buf=this.buf.slice(0,e)+this.buf.slice(t),!0}}is.LineBuffer=lO;var lo={exports:{}},hO=({onlyFirst:r=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,r?void 0:"g")};const uO=hO;var dO=r=>typeof r=="string"?r.replace(uO(),""):r,ho={exports:{}};const Ph=r=>Number.isNaN(r)?!1:r>=4352&&(r<=4447||r===9001||r===9002||11904<=r&&r<=12871&&r!==12351||12880<=r&&r<=19903||19968<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65131||65281<=r&&r<=65376||65504<=r&&r<=65510||110592<=r&&r<=110593||127488<=r&&r<=127569||131072<=r&&r<=262141);ho.exports=Ph;ho.exports.default=Ph;var fO=ho.exports,pO=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const gO=dO,_O=fO,mO=pO,Ah=r=>{if(typeof r!="string"||r.length===0||(r=gO(r),r.length===0))return 0;r=r.replace(mO(),"  ");let e=0;for(let t=0;t<r.length;t++){const i=r.codePointAt(t);i<=31||i>=127&&i<=159||i>=768&&i<=879||(i>65535&&t++,e+=_O(i)?2:1)}return e};lo.exports=Ah;lo.exports.default=Ah;var Rh=lo.exports,OO=Dr&&Dr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yt,"__esModule",{value:!0});yt.State=yt.Layout=yt.Position=void 0;const vO=is,yO=OO(Rh);class er{constructor(e,t){e!==void 0?this.row=e:this.row=0,t!==void 0?this.col=t:this.col=0}}yt.Position=er;class Lh{constructor(e){this.promptSize=e,this.cursor=new er,this.end=new er}}yt.Layout=Lh;class bO{constructor(e,t,i,s){this.line=new vO.LineBuffer,this.highlighting=!1,this.prompt=e,this.tty=t,this.highlighter=i,this.history=s,this.promptSize=t.calculatePosition(e,new er),this.layout=new Lh(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):this.highlighting?(this.highlighting=!1,!0):!1}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new er,this.layout.end=new er,this.refresh()}editInsert(e){const t=this.line.insert(e),i=e.includes(`
`);if(t&&!i){const s=(0,yO.default)(e);s>0&&this.layout.cursor.col+s<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=s,this.layout.end.col+=s,this.tty.write(e)):this.refresh()}else this.refresh()}update(e){this.line.update(e,e.length),this.refresh()}editBackspace(e){this.line.backspace(e)&&this.refresh()}editDelete(e){this.line.delete(e)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const e=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,e,this.highlighter),this.layout=e}moveCursorBack(e){this.line.moveBack(e)&&this.moveCursor()}moveCursorForward(e){this.line.moveForward(e)&&this.moveCursor()}moveCursorUp(e){this.line.moveLineUp(e)?this.moveCursor():this.previousHistory()}moveCursorDown(e){this.line.moveLineDown(e)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(this.history.cursor===-1&&this.line.length()>0)return;const e=this.history.prev();e!==void 0&&this.update(e)}nextHistory(){if(this.history.cursor===-1)return;const e=this.history.next();e!==void 0?this.update(e):this.update("")}moveCursor(){const e=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);e!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,e),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},e)))}}yt.State=bO;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.History=void 0;class CO{constructor(e){this.entries=[],this.cursor=-1,this.maxEntries=e}saveToLocalStorage(){const e=window?.localStorage;e!==void 0&&e.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const e=window?.localStorage;if(e!==void 0){const t=e.getItem("history");if(t==null)return;try{const i=JSON.parse(t);!Array.isArray(i)||i.find(s=>typeof s!="string")!==void 0?(this.entries=[],e.setItem("history","[]")):this.entries=i}catch{this.entries=[],e.setItem("history","[]")}}}append(e){this.resetCursor(),this.entries.includes(e)?(this.entries.splice(this.entries.indexOf(e),1),this.entries.unshift(e)):this.entries.unshift(e),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(this.cursor!==-1)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}}ss.History=CO;var ns={},xO=Dr&&Dr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});ns.Tty=void 0;const DO=xO(Rh);class SO{constructor(e,t,i,s){this.tabWidth=i,this.col=e,this.row=t,this.out=s}write(e){return this.out.write(e)}print(e){return this.out.print(e)}println(e){return this.out.println(e)}clearScreen(){this.out.write("\x1B[H\x1B[2J")}calculatePosition(e,t){const i=Object.assign({},t);let s=0;return[...e].forEach(a=>{if(a===`
`){i.row+=1,i.col=0;return}let o=0;if(a==="	")o=this.tabWidth-i.col%this.tabWidth;else{let n;[n,s]=wO(a,s),o=n}i.col+=o,i.col>this.col&&(i.row+=1,i.col=o)}),i.col===this.col&&(i.col=0,i.row+=1),i}computeLayout(e,t){const i=Object.assign({},e),s=t.pos,a=this.calculatePosition(t.buf.slice(0,t.pos),e),o=s===t.buf.length?Object.assign({},a):this.calculatePosition(t.buf.slice(s),a);return{promptSize:i,cursor:a,end:o}}refreshLine(e,t,i,s,a){const o=s.cursor,n=s.end;this.clearOldRows(i),this.write(a.highlightPrompt(e)),this.write(a.highlight(t.buf,t.pos)),n.col===0&&n.row>0&&t.buf[t.buf.length-1]!==`
`&&this.write(`
`);const c=n.row-o.row;c>0&&this.write(`\x1B[${c}A`),o.col>0?this.write(`\r\x1B[${o.col}C`):this.write("\r")}clearOldRows(e){const t=e.cursor.row,i=e.end.row,s=Math.max(i-t,0);s>0&&this.write(`\x1B[${s}B`);for(let a=0;a<i;a++)this.write("\r\x1B[0K\x1B[A");this.write("\r\x1B[0K")}moveCursor(e,t){if(t.row>e.row){const i=t.row-e.row;i===1?this.write("\x1B[B"):this.write(`\x1B[${i}B`)}else if(t.row<e.row){const i=e.row-t.row;i===1?this.write("\x1B[A"):this.write(`\x1B[${i}A`)}if(t.col>e.col){const i=t.col-e.col;i===1?this.write("\x1B[C"):this.write(`\x1B[${i}C`)}else if(t.col<e.col){const i=e.col-t.col;i===1?this.write("\x1B[D"):this.write(`\x1B[${i}D`)}}}ns.Tty=SO;function wO(r,e){return e===1?r==="["?[0,2]:[0,0]:e===2?r===";"||r[0]>="0"&&r[0]<="9"?[0,e]:[0,0]:r==="\x1B"?[0,1]:r===`
`?[0,e]:[(0,DO.default)(r),e]}var os={};Object.defineProperty(os,"__esModule",{value:!0});os.IdentityHighlighter=void 0;class EO{highlight(e,t){return e}highlightPrompt(e){return e}highlightChar(e,t){return!1}}os.IdentityHighlighter=EO;Object.defineProperty(co,"__esModule",{value:!0});var kh=co.Readline=void 0;const ae=Th,Ms=yt,TO=ss,Da=ns,PO=os;class AO{constructor(){this.highlighter=new PO.IdentityHighlighter,this.history=new TO.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new Ms.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=e=>{},this.history.restoreFromLocalStorage()}activate(e){this.term=e,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}appendHistory(e){this.history.append(e)}setHighlighter(e){this.highlighter=e}setCheckHandler(e){this.checkHandler=e}setCtrlCHandler(e){this.ctrlCHandler=e}setPauseHandler(e){this.pauseHandler=e}writeReady(){return!this.highWater}write(e){e===`
`?e=`\r
`:(e=e.replace(/^\n/,`\r
`),e=e.replace(/([^\r])\n/g,`$1\r
`));const t=e.length;this.watermark+=t,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(e,()=>{this.watermark=Math.max(this.watermark-t,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(e){return this.write(e)}println(e){return this.write(e+`\r
`)}output(){return this}tty(){var e,t;return((t=(e=this.term)===null||e===void 0?void 0:e.options)===null||t===void 0?void 0:t.tabStopWidth)!==void 0?new Da.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new Da.Tty(0,0,8,this.output())}read(e){return new Promise((t,i)=>{if(this.term===void 0){i("addon is not active");return}this.state=new Ms.State(e,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:e,resolve:t,reject:i}})}handleKeyEvent(e){return e.key==="Enter"&&e.shiftKey?(e.type==="keydown"&&this.readKey({inputType:ae.InputType.ShiftEnter,data:["\r"]}),!1):!0}readData(e){const t=(0,ae.parseInput)(e);if(t.length>1||t[0].inputType===ae.InputType.Text&&t[0].data.length>1){this.readPaste(t);return}this.readKey(t[0])}readPaste(e){const t=e.map(i=>i.inputType===ae.InputType.Enter?{inputType:ae.InputType.Text,data:[`
`]}:i);for(const i of t)i.inputType===ae.InputType.Text?this.state.editInsert(i.data.join("")):this.readKey(i)}readKey(e){var t,i,s;if(this.activeRead===void 0){switch(e.inputType){case ae.InputType.CtrlC:this.ctrlCHandler();break;case ae.InputType.CtrlL:this.write("\x1B[H\x1B[2J");break}return}switch(e.inputType){case ae.InputType.Text:this.state.editInsert(e.data.join(""));break;case ae.InputType.AltEnter:case ae.InputType.ShiftEnter:this.state.editInsert(`
`);break;case ae.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),(t=this.term)===null||t===void 0||t.write(`\r
`),this.history.append(this.state.buffer()),(i=this.activeRead)===null||i===void 0||i.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert(`
`);break;case ae.InputType.CtrlC:this.state.moveCursorToEnd(),(s=this.term)===null||s===void 0||s.write(`^C\r
`),this.state=new Ms.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case ae.InputType.CtrlS:this.pauseHandler(!1);break;case ae.InputType.CtrlU:this.state.update("");break;case ae.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case ae.InputType.CtrlQ:this.pauseHandler(!0);break;case ae.InputType.CtrlL:this.state.clearScreen();break;case ae.InputType.Home:case ae.InputType.CtrlA:this.state.moveCursorHome();break;case ae.InputType.End:case ae.InputType.CtrlE:this.state.moveCursorEnd();break;case ae.InputType.Backspace:this.state.editBackspace(1);break;case ae.InputType.Delete:case ae.InputType.CtrlD:this.state.editDelete(1);break;case ae.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case ae.InputType.ArrowRight:this.state.moveCursorForward(1);break;case ae.InputType.ArrowUp:this.state.moveCursorUp(1);break;case ae.InputType.ArrowDown:this.state.moveCursorDown(1);break;case ae.InputType.UnsupportedControlChar:case ae.InputType.UnsupportedEscape:break}}}kh=co.Readline=AO;const Fs="xterm-search-bar__addon";class RO{options;terminal;searchAddon;searchBarElement;searchKey;constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement){this.searchBarElement.style.visibility="visible",this.searchBarElement.querySelector("input").select();return}this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,e.className=Fs;const t=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(t.style.position)||(t.style.position="relative"),t.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",i=>{this.searchKey=i.target.value,this.searchAddon.findNext(this.searchKey,{incremental:i.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,t,i){const s=this.terminal.element.parentElement;s.addEventListener(t,a=>{let o=a.target;for(;o!==document.querySelector(e);){if(o===s){o=null;break}o=o.parentElement}o===document.querySelector(e)&&(i.call(this,a),a.stopPropagation())})}addNewStyle(e){let t=document.getElementById(Fs);t||(t=document.createElement("style"),t.type="text/css",t.id=Fs,document.getElementsByTagName("head")[0].appendChild(t)),t.appendChild(document.createTextNode(e))}}var uo={exports:{}},Is={exports:{}},Sa;function LO(){return Sa||(Sa=1,function(r){var e={};const t=typeof process<"u"&&e.TERM_PROGRAM==="Hyper",i=typeof process<"u"&&process.platform==="win32",s=typeof process<"u"&&process.platform==="linux",a={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},o=Object.assign({},a,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),n=Object.assign({},a,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:s?"▸":"❯",pointerSmall:s?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});r.exports=i&&!t?o:n,Reflect.defineProperty(r.exports,"common",{enumerable:!1,value:a}),Reflect.defineProperty(r.exports,"windows",{enumerable:!1,value:o}),Reflect.defineProperty(r.exports,"other",{enumerable:!1,value:n})}(Is)),Is.exports}var kO={};const $O=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),MO=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,FO=()=>typeof process<"u"?kO.FORCE_COLOR!=="0":!1,$h=()=>{const r={enabled:FO(),visible:!0,styles:{},keys:{}},e=a=>{let o=a.open=`\x1B[${a.codes[0]}m`,n=a.close=`\x1B[${a.codes[1]}m`,c=a.regex=new RegExp(`\\u001b\\[${a.codes[1]}m`,"g");return a.wrap=(u,l)=>{u.includes(n)&&(u=u.replace(c,n+o));let h=o+u+n;return l?h.replace(/\r*\n/g,`${n}$&${o}`):h},a},t=(a,o,n)=>typeof a=="function"?a(o):a.wrap(o,n),i=(a,o)=>{if(a===""||a==null)return"";if(r.enabled===!1)return a;if(r.visible===!1)return"";let n=""+a,c=n.includes(`
`),u=o.length;for(u>0&&o.includes("unstyle")&&(o=[...new Set(["unstyle",...o])].reverse());u-- >0;)n=t(r.styles[o[u]],n,c);return n},s=(a,o,n)=>{r.styles[a]=e({name:a,codes:o}),(r.keys[n]||(r.keys[n]=[])).push(a),Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,set(u){r.alias(a,u)},get(){let u=l=>i(l,u.stack);return Reflect.setPrototypeOf(u,r),u.stack=this.stack?this.stack.concat(a):[a],u}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),r.ansiRegex=MO,r.hasColor=r.hasAnsi=a=>(r.ansiRegex.lastIndex=0,typeof a=="string"&&a!==""&&r.ansiRegex.test(a)),r.alias=(a,o)=>{let n=typeof o=="string"?r[o]:o;if(typeof n!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");n.stack||(Reflect.defineProperty(n,"name",{value:a}),r.styles[a]=n,n.stack=[a]),Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,set(c){r.alias(a,c)},get(){let c=u=>i(u,c.stack);return Reflect.setPrototypeOf(c,r),c.stack=this.stack?this.stack.concat(n.stack):n.stack,c}})},r.theme=a=>{if(!$O(a))throw new TypeError("Expected theme to be an object");for(let o of Object.keys(a))r.alias(o,a[o]);return r},r.alias("unstyle",a=>typeof a=="string"&&a!==""?(r.ansiRegex.lastIndex=0,a.replace(r.ansiRegex,"")):""),r.alias("noop",a=>a),r.none=r.clear=r.noop,r.stripColor=r.unstyle,r.symbols=LO(),r.define=s,r};uo.exports=$h();uo.exports.create=$h;var IO=uo.exports;const xn=En(IO);xn.enabled=!0;const ue={...xn,peerID:xn.redBright,grey50:r=>`\x1B[0m\x1B[38;5;244m${r}`};var Mh={exports:{}};(function(r){(function(){function e(d,f){document.addEventListener?d.addEventListener("scroll",f,!1):d.attachEvent("scroll",f)}function t(d){document.body?d():document.addEventListener?document.addEventListener("DOMContentLoaded",function f(){document.removeEventListener("DOMContentLoaded",f),d()}):document.attachEvent("onreadystatechange",function f(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",f),d())})}function i(d){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(d)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function s(d,f){d.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+f+";"}function a(d){var f=d.g.offsetWidth,b=f+100;return d.j.style.width=b+"px",d.i.scrollLeft=b,d.h.scrollLeft=d.h.scrollWidth+100,d.l!==f?(d.l=f,!0):!1}function o(d,f){function b(){var m=y;a(m)&&m.g.parentNode!==null&&f(m.l)}var y=d;e(d.h,b),e(d.i,b),a(d)}function n(d,f,b){f=f||{},b=b||window,this.family=d,this.style=f.style||"normal",this.weight=f.weight||"normal",this.stretch=f.stretch||"normal",this.context=b}var c=null,u=null,l=null,h=null;function p(d){return u===null&&(_(d)&&/Apple/.test(window.navigator.vendor)?(d=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!d&&603>parseInt(d[1],10)):u=!1),u}function _(d){return h===null&&(h=!!d.document.fonts),h}function g(d,f){var b=d.style,y=d.weight;if(l===null){var m=document.createElement("div");try{m.style.font="condensed 100px sans-serif"}catch{}l=m.style.font!==""}return[b,y,l?d.stretch:"","100px",f].join(" ")}n.prototype.load=function(d,f){var b=this,y=d||"BESbswy",m=0,S=f||3e3,E=new Date().getTime();return new Promise(function(D,P){if(_(b.context)&&!p(b.context)){var O=new Promise(function(R,v){function C(){new Date().getTime()-E>=S?v(Error(""+S+"ms timeout exceeded")):b.context.document.fonts.load(g(b,'"'+b.family+'"'),y).then(function(A){1<=A.length?R():setTimeout(C,25)},v)}C()}),w=new Promise(function(R,v){m=setTimeout(function(){v(Error(""+S+"ms timeout exceeded"))},S)});Promise.race([w,O]).then(function(){clearTimeout(m),D(b)},P)}else t(function(){function R(){var Q;(Q=k!=-1&&L!=-1||k!=-1&&M!=-1||L!=-1&&M!=-1)&&((Q=k!=L&&k!=M&&L!=M)||(c===null&&(Q=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!Q&&(536>parseInt(Q[1],10)||parseInt(Q[1],10)===536&&11>=parseInt(Q[2],10))),Q=c&&(k==I&&L==I&&M==I||k==$&&L==$&&M==$||k==F&&L==F&&M==F)),Q=!Q),Q&&(N.parentNode!==null&&N.parentNode.removeChild(N),clearTimeout(m),D(b))}function v(){if(new Date().getTime()-E>=S)N.parentNode!==null&&N.parentNode.removeChild(N),P(Error(""+S+"ms timeout exceeded"));else{var Q=b.context.document.hidden;(Q===!0||Q===void 0)&&(k=C.g.offsetWidth,L=A.g.offsetWidth,M=T.g.offsetWidth,R()),m=setTimeout(v,50)}}var C=new i(y),A=new i(y),T=new i(y),k=-1,L=-1,M=-1,I=-1,$=-1,F=-1,N=document.createElement("div");N.dir="ltr",s(C,g(b,"sans-serif")),s(A,g(b,"serif")),s(T,g(b,"monospace")),N.appendChild(C.g),N.appendChild(A.g),N.appendChild(T.g),b.context.document.body.appendChild(N),I=C.g.offsetWidth,$=A.g.offsetWidth,F=T.g.offsetWidth,v(),o(C,function(Q){k=Q,R()}),s(C,g(b,'"'+b.family+'",sans-serif')),o(A,function(Q){L=Q,R()}),s(A,g(b,'"'+b.family+'",serif')),o(T,function(Q){M=Q,R()}),s(T,g(b,'"'+b.family+'",monospace'))})})},r.exports=n})()})(Mh);var BO=Mh.exports;const wa=En(BO);function QO(r){const e=r.options.fontFamily,t=new wa(e).load(null,5e3),i=new wa(e,{weight:"bold"}).load(null,5e3);return Promise.all([t,i]).then(()=>{},()=>{r.options.fontFamily="Courier"})}const qO="\r",Ea="\x1B[1A",NO="\x1B[2K";class WO extends Xh.Terminal{fitAddon;searchAddon;webglAddon;canvasAddon;searchBarAddon;webLinksAddon;ligaturesAddon;readlineAddon;mpyc;isLivePanelVisible=!0;livePanel="";livePanelLines=0;currentLivePanelMessage="";terminalContainer;scrollAreaClone;scrollArea;viewportDiv;constructor(e,t){let i=te(e);super({screenReaderMode:!1,cols:80,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.mpyc=t,this.terminalContainer=te("#terminal-container"),this.scrollAreaClone=te("div.xterm-scroll-area-clone"),this.onResize(a=>{this.updateTermSizeEnv()}),this.fitAddon=new sO.FitAddon,this.searchAddon=new nO.SearchAddon,this.searchBarAddon=new RO({searchAddon:this.searchAddon}),this.webLinksAddon=new aO.WebLinksAddon,this.readlineAddon=new kh,this.readlineAddon.setCheckHandler(a=>!a.trimEnd().endsWith("&&")),this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new cO.WebglAddon,this.loadAddon(this.webglAddon)}catch(a){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",a),this.canvasAddon=new iO.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new oO.Unicode11Addon),this.unicode.activeVersion="11",QO(this).then(()=>{this.open(i),this.viewportDiv=te("#terminal-container .xterm-viewport"),this.scrollArea=this.viewportDiv.querySelector("div.xterm-scroll-area"),te(`${e} textarea`).readOnly=!0,new ResizeObserver(()=>{this.scrollAreaClone.style.height=this.scrollArea.clientHeight+"px",this.scrollAreaClone.style.width=this.scrollArea.clientWidth+"px"}).observe(this.scrollArea),this.fit(),jO(this.terminalContainer,this.viewportDiv)}),this.mpyc.runtime.setReadlineFn(a=>this.readlineAddon.read(a)),this.attachCustomKeyEventHandler(a=>{if(a.type==="keydown"){if(a.ctrlKey&&a.key=="c"&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if(a.key=="h")return this.mpyc.runtime.toggleStats(),a.preventDefault(),!1;if(a.key=="r")return this.mpyc.runtime.resetStats(),a.preventDefault(),!1;if(a.ctrlKey&&a.key=="f")return this.searchBarAddon.show(),a.preventDefault(),!1}return!0}),document.addEventListener("keyup",a=>{a.key=="Escape"&&this.searchBarAddon.hidden()}),new ResizeObserver(()=>{this.fit()}).observe(document.querySelector(".split-panel-terminal"))}time(){return ue.cyan.dim(`[${new Date().toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(ue.grey(e),ue.gray("⚒"))}infoChar=yh?"ⓘ":"🛈";info(e){this._log(ue.greenBright(e),ue.greenBright(this.infoChar))}_log(e,t=" "){e=`${this.time()}  ${t}  ${e}`,this._write_liveln(e)}_write_liveln(e){this.isLivePanelVisible&&(this.writeln(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_write_live(e){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return e==""?"":`${qO}${Ea}${(Ea+NO).repeat(this._height(e)-1)}`}live(e){this.isLivePanelVisible&&(e=`
${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,ue.green(ue.symbols.check))}warn(e){this._log(ue.italic(e),ue.yellow(ue.symbols.warning))}chatMe(e){e=`${ue.green("Me")}: ${e}`,this._log(e)}chat(e,t){t=`${ue.peerID(Qi(e.substring(0,8)))}: ${t}`,this._log(t)}error(e){this._log(ue.redBright(e),ue.red(ue.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${ue.red(ue.symbols.cross)}  ${ue.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}__fit=()=>{console.log("fitting terminal");const e=this.fitAddon.proposeDimensions();if(!e||!this||isNaN(e.cols)||isNaN(e.rows)||(e.rows=Math.max(e.rows,12),e.cols=Math.max(e.cols,this.cols),e.cols==this.cols&&e.rows==this.rows))return;const t=this._core;console.log("resizing terminal to ",e.cols,e.rows),t._renderService.clear(),this.resize(e.cols,e.rows),this.refresh(0,this.rows-1),this.updateTermSizeEnv()};fit=Cn(this.__fit);updateTermSizeEnv=Cn(()=>{console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})})}const jO=(r,e)=>{let t=!1,i=!1;r.addEventListener("scroll",function(s){t||(i=!0,e.scrollTop=r.scrollTop),t=!1}),e.addEventListener("scroll",function(s){i||(t=!0,r.scrollTop=e.scrollTop),i=!1})},qi="qr-canvas",Fh="qr-url-span",zO=`canvas.${qi}`,UO=`div.tooltip-inner>img.${qi}`,XO=`div.tooltip-inner>span.${Fh}`,Ta="div.tooltip-inner";class YO extends it{scanInput;showBtn;showBtnTooltip;showBtnTooltipEl;scanBtn;peerIDGetter;scanner;scanModal;scanModalDiv;closeScanModalBtn;canvas;constructor(e,t,i,s){super(),this.showBtn=e,this.scanBtn=t,this.scanInput=i,this.peerIDGetter=s,document.body.insertAdjacentHTML("beforeend",this.modalHTML),document.body.insertAdjacentHTML("beforeend",this.canvasHTML),this.canvas=te(zO),this.closeScanModalBtn=te("#closeQRCodeScannerButton"),this.scanModalDiv=te("#qrScannerModal"),this.scanModal=new Ft(this.scanModalDiv),this.setupQRGenerator(),this.setupQRScanner()}setupQRGenerator(){this.showBtnTooltip=new ke(this.showBtn,{html:!0,placement:"bottom",trigger:"click hover focus",allowList:{...ke.Default.allowList,span:["style"],img:[]},title:`
            <img class="${qi}"></img>
            <br />
            <span class="${Fh}" style='font-size: 10px !important;'></span>
        `}),this.showBtnTooltipEl=te(Ta),this.showBtn.addEventListener("shown.bs.tooltip",()=>{let e=this.peerIDGetter(),t=new URL("./",window.location.href),i=`${t}?peer=${e}`,s=`${t}?peer=<br/>${e}`;Gh.toDataURL(this.canvas,i,{errorCorrectionLevel:"H"}).then(a=>{te(UO).src=a,te(XO).innerHTML=Qi(s)}).catch(a=>{})}),document.addEventListener("click",e=>{!this.showBtn.matches(":hover")&&!te(Ta)?.matches(":hover")&&this.showBtnTooltip.hide()}),this.showBtn.addEventListener("click",async()=>{this.canvas.toBlob(e=>{try{navigator.clipboard.write([new ClipboardItem({[e.type]:e})])}catch{console.warn("Copying images to the clipboard is not supported in this browser - https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write#browser_compatibility")}})})}setupQRScanner=()=>{let e=new Yh("qrScannerEl",{formatsToSupport:[Vh.QR_CODE],verbose:!1});this.scanModalDiv.addEventListener("hidden.bs.modal",async()=>{e.stop()}),this.closeScanModalBtn.addEventListener("click",async()=>{this.closeQRScanner()}),this.scanInput.addEventListener("change",t=>{if(t==null||t.target==null)return;let i=t.target;if(i.files&&i.files.length===0)return;const a=i.files[0];e.scanFileV2(a,!0).then(o=>{this.emit("qr:scanned",o.decodedText)}).catch(o=>{this.emit("qr:error",o)})}),this.scanBtn.addEventListener("click",async()=>{if(!await eO()){this.scanInput.click();return}const t={fps:10,qrbox:{width:150,height:150}},i=(s,a)=>{this.emit("qr:scanned",s),this.closeQRScanner()};this.scanner.start({facingMode:"environment"},t,i,void 0),this.scanModal.show()})};closeQRScanner(){this.scanner.stop(),this.scanModal.hide()}canvasHTML=`
        <canvas hidden class="${qi}"></canvas>
    `;modalHTML=`
    <div class="modal fade" id="qrScannerModal" tabindex="-1" aria-labelledby="qrScannerModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="qrScannerModalLabel">QR Code scanner</h1>
            <button type="button" id="closeQRCodeScannerButton" class="btn-close" data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div id="qrScannerEl"></div>
          </div>
        </div>
      </div>
    </div>
    `}var Pa={};class Ni{constructor(e,t,i,s,a,o,n,c,u,l=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=a,this.score=o,this.buffer=n,this.bufferBase=c,this.curContext=u,this.lookAhead=l,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new Ni(e,[],t,i,i,0,[],0,s?new Aa(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:a}=this.p,o=a.dynamicPrecedence(s);if(o&&(this.score+=o),i==0){this.pushState(a.getGoto(this.state,s,!0),this.reducePos),s<a.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let n=this.stack.length-(i-1)*3-(e&262144?6:0),c=n?this.stack[n-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let l=n?this.stack[n-1]:0,h=this.bufferBase+this.buffer.length-l;if(s<a.minRepeatTerm||e&131072){let p=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,c,p,h+4,!0)}if(e&262144)this.state=this.stack[n];else{let p=this.stack[n-3];this.state=a.getGoto(p,s,!0)}for(;this.stack.length>n;)this.stack.pop();this.reduceContext(s,c)}storeNode(e,t,i,s=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,n=this.buffer.length;if(n==0&&o.parent&&(n=o.bufferBase-o.parent.bufferBase,o=o.parent),n>0&&o.buffer[n-4]==0&&o.buffer[n-1]>-1){if(t==i)return;if(o.buffer[n-2]>=t){o.buffer[n-2]=i;return}}}if(!a||this.pos==i)this.buffer.push(e,t,i,s);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let a=e,{parser:o}=this.p;(s>this.pos||t<=o.maxNode)&&(this.pos=s,o.stateFlag(a,1)||(this.reducePos=s)),this.pushState(a,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new Ni(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new VO(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let a=0,o;a<t.length;a+=2)(o=t[a+1])!=this.state&&this.p.parser.hasAction(o,e)&&s.push(t[a],o);if(this.stack.length<120)for(let a=0;s.length<8&&a<t.length;a+=2){let o=t[a+1];s.some((n,c)=>c&1&&n==o)||s.push(t[a],o)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let a=t[s+1];if(a==this.state)continue;let o=this.split();o.pushState(a,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[s],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,a=this.stack.length-i*3;if(a<0||e.getGoto(this.stack[a],s,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,a)=>{if(!t.includes(s))return t.push(s),e.allActions(s,o=>{if(!(o&393216))if(o&65536){let n=(o>>19)-a;if(n>1){let c=o&65535,u=this.stack.length-n*3;if(u>=0&&e.getGoto(this.stack[u],c,!1)>=0)return n<<19|65536|c}}else{let n=i(o,a+1);if(n!=null)return n}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Aa(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Aa{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class VO{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Wi{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Wi(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Wi(this.stack,this.pos,this.index)}}function Vr(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,s=0;i<r.length;){let a=0;for(;;){let o=r.charCodeAt(i++),n=!1;if(o==126){a=65535;break}o>=92&&o--,o>=34&&o--;let c=o-32;if(c>=46&&(c-=46,n=!0),a+=c,n)break;a*=46}t?t[s++]=a:t=new e(a)}return t}class ui{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Ra=new ui;class GO{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Ra,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,a=this.pos+e;for(;a<i.from;){if(!s)return null;let o=this.ranges[--s];a-=i.from-o.to,i=o}for(;t<0?a>i.to:a>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];a+=o.from-i.to,i=o}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(i=a,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,n=this.range;for(;n.to<=i;)n=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Ra,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class tr{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;HO(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}tr.prototype.contextual=tr.prototype.fallback=tr.prototype.extend=!1;tr.prototype.fallback=tr.prototype.extend=!1;class as{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function HO(r,e,t,i,s,a){let o=0,n=1<<i,{dialect:c}=t.p.parser;e:for(;n&r[o];){let u=r[o+1];for(let _=o+3;_<u;_+=2)if((r[_+1]&n)>0){let g=r[_];if(c.allows(g)&&(e.token.value==-1||e.token.value==g||ZO(g,e.token.value,s,a))){e.acceptToken(g);break}}let l=e.next,h=0,p=r[o+2];if(e.next<0&&p>h&&r[u+p*3-3]==65535){o=r[u+p*3-1];continue e}for(;h<p;){let _=h+p>>1,g=u+_+(_<<1),d=r[g],f=r[g+1]||65536;if(l<d)p=_;else if(l>=f)h=_+1;else{o=r[g+2],e.advance();continue e}}break}}function La(r,e,t){for(let i=e,s;(s=r[i])!=65535;i++)if(s==t)return i-e;return-1}function ZO(r,e,t,i){let s=La(t,i,e);return s<0||La(t,i,r)<s}const Le=typeof process<"u"&&Pa&&/\bparse\b/.test(Pa.LOG);let Bs=null;function ka(r,e,t){let i=r.cursor(za.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class JO{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ka(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ka(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=i.children[s],o=this.start[t]+i.positions[s];if(o>e)return this.nextStart=o,null;if(a instanceof Jr){if(o==e){if(o<this.safeFrom)return null;let n=o+a.length;if(n<=this.safeTo){let c=a.prop(Tn.lookAhead);if(!c||n+c<this.fragment.to)return a}}this.index[t]++,o+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+a.length}}}class KO{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ui)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:a}=s,o=s.stateSlot(e.state,3),n=e.curContext?e.curContext.hash:0,c=0;for(let u=0;u<a.length;u++){if(!(1<<u&o))continue;let l=a[u],h=this.tokens[u];if(!(i&&!l.fallback)&&((l.contextual||h.start!=e.pos||h.mask!=o||h.context!=n)&&(this.updateCachedToken(h,l,e),h.mask=o,h.context=n),h.lookAhead>h.end+25&&(c=Math.max(h.lookAhead,c)),h.value!=0)){let p=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!l.extend&&(i=h,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new ui,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ui,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:a}=i.p;for(let o=0;o<a.specialized.length;o++)if(a.specialized[o]==e.value){let n=a.specializers[o](this.stream.read(e.start,e.end),i);if(n>=0&&i.p.parser.dialect.allows(n>>1)){n&1?e.extended=n>>1:e.value=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let a=0;a<s;a+=3)if(this.actions[a]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:a}=e,{parser:o}=e.p,{data:n}=o;for(let c=0;c<2;c++)for(let u=o.stateSlot(a,c?2:1);;u+=3){if(n[u]==65535)if(n[u+1]==1)u=ht(n,u+2);else{s==0&&n[u+1]==2&&(s=this.putAction(ht(n,u+2),t,i,s));break}n[u]==t&&(s=this.putAction(ht(n,u+1),t,i,s))}return s}}class ev{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new GO(t,s),this.tokens=new KO(e,this.stream),this.topTerm=e.top[1];let{from:a}=s[0];this.stacks=[Ni.start(this,e.top[0],a)],this.fragments=i.length&&this.stream.end-a>e.bufferLength*4?new JO(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,a;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let n=e[o];for(;;){if(this.tokens.mainToken=null,n.pos>t)i.push(n);else{if(this.advanceStack(n,i,e))continue;{s||(s=[],a=[]),s.push(n);let c=this.tokens.getMainToken(n);a.push(c.value,c.end)}}break}}if(!i.length){let o=s&&iv(s);if(o)return Le&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Le&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,a,i);if(o)return Le&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((n,c)=>c.score-n.score);i.length>o;)i.pop();i.some(n=>n.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let n=i[o];for(let c=o+1;c<i.length;c++){let u=i[c];if(n.sameState(u)||n.buffer.length>500&&u.buffer.length>500)if((n.score-u.score||n.buffer.length-u.buffer.length)>0)i.splice(c--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:a}=this,o=Le?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,l=u?e.curContext.hash:0;for(let h=this.fragments.nodeAt(s);h;){let p=this.parser.nodeSet.types[h.type.id]==h.type?a.getGoto(e.state,h.type.id):-1;if(p>-1&&h.length&&(!u||(h.prop(Tn.contextHash)||0)==l))return e.useNode(h,p),Le&&console.log(o+this.stackID(e)+` (via reuse of ${a.getName(h.type.id)})`),!0;if(!(h instanceof Jr)||h.children.length==0||h.positions[0]>0)break;let _=h.children[0];if(_ instanceof Jr&&h.positions[0]==0)h=_;else break}}let n=a.stateSlot(e.state,4);if(n>0)return e.reduce(n),Le&&console.log(o+this.stackID(e)+` (via always-reduce ${a.getName(n&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let u=0;u<c.length;){let l=c[u++],h=c[u++],p=c[u++],_=u==c.length||!i,g=_?e:e.split(),d=this.tokens.mainToken;if(g.apply(l,h,d?d.start:g.pos,p),Le&&console.log(o+this.stackID(g)+` (via ${l&65536?`reduce of ${a.getName(l&65535)}`:"shift"} for ${a.getName(h)} @ ${s}${g==e?"":", split"})`),_)return!0;g.pos>s?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return $a(e,t),!0}}runRecovery(e,t,i){let s=null,a=!1;for(let o=0;o<e.length;o++){let n=e[o],c=t[o<<1],u=t[(o<<1)+1],l=Le?this.stackID(n)+" -> ":"";if(n.deadEnd&&(a||(a=!0,n.restart(),Le&&console.log(l+this.stackID(n)+" (restarted)"),this.advanceFully(n,i))))continue;let h=n.split(),p=l;for(let _=0;h.forceReduce()&&_<10&&(Le&&console.log(p+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));_++)Le&&(p=this.stackID(h)+" -> ");for(let _ of n.recoverByInsert(c))Le&&console.log(l+this.stackID(_)+" (via recover-insert)"),this.advanceFully(_,i);this.stream.end>n.pos?(u==n.pos&&(u++,c=0),n.recoverByDelete(c,u),Le&&console.log(l+this.stackID(n)+` (via recover-delete ${this.parser.getName(c)})`),$a(n,i)):(!s||s.score<n.score)&&(s=n)}return s}stackToTree(e){return e.close(),Jr.build({buffer:Wi.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Bs||(Bs=new WeakMap)).get(e);return t||Bs.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function $a(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class tv{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Qs=r=>r;class rv{constructor(e){this.start=e.start,this.shift=e.shift||Qs,this.reduce=e.reduce||Qs,this.reuse=e.reuse||Qs,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ji extends Zh{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let i=Object.keys(e.topRules).map(n=>e.topRules[n][1]),s=[];for(let n=0;n<t.length;n++)s.push([]);function a(n,c,u){s[n].push([c,c.deserialize(String(u))])}if(e.nodeProps)for(let n of e.nodeProps){let c=n[0];typeof c=="string"&&(c=Tn[c]);for(let u=1;u<n.length;){let l=n[u++];if(l>=0)a(l,c,n[u++]);else{let h=n[u+-l];for(let p=-l;p>0;p--)a(n[u++],c,h);u++}}}this.nodeSet=new Jh(t.map((n,c)=>Kh.define({name:c>=this.minRepeatTerm?void 0:n,id:c,props:s[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=eu;let o=Vr(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let n=0;n<this.specializerSpecs.length;n++)this.specialized[n]=this.specializerSpecs[n].term;this.specializers=this.specializerSpecs.map(Ma),this.states=Vr(e.states,Uint32Array),this.data=Vr(e.stateData),this.goto=Vr(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(n=>typeof n=="number"?new tr(o,n):n),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new ev(this,e,t,i);for(let a of this.wrappers)s=a(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let a=s[t+1];;){let o=s[a++],n=o&1,c=s[a++];if(n&&i)return c;for(let u=a+(o>>1);a<u;a++)if(s[a]==e)return c;if(n)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let a=this.stateSlot(e,s?2:1),o;;a+=3){if((o=i[a])==65535)if(i[a+1]==1)o=i[a=ht(i,a+2)];else{if(i[a+1]==2)return ht(i,a+2);break}if(o==t||o==0)return ht(i,a+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let a=this.stateSlot(e,1);s==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=ht(this.data,a+2);else break;s=t(ht(this.data,a+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=ht(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((a,o)=>o&1&&a==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(ji.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(a=>a.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let a=e.specializers.find(n=>n.from==i.external);if(!a)return i;let o=Object.assign(Object.assign({},i),{external:a.to});return t.specializers[s]=Ma(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let a of e.split(" ")){let o=t.indexOf(a);o>=0&&(i[o]=!0)}let s=null;for(let a=0;a<t.length;a++)if(!i[a])for(let o=this.dialects[t[a]],n;(n=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[n]=1;return new tv(e,i,s)}static deserialize(e){return new ji(e)}}function ht(r,e){return r[e]|r[e+1]<<16}function iv(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Ma(r){if(r.external){let e=r.extend?1:0;return(t,i)=>r.external(t,i)<<1|e}return r.get}const sv=1,Ih=201,Bh=202,nv=203,Fa=204,ov=205,av=206,cv=207,lv=2,hv=208,uv=209,dv=3,fv=210,pv=211,gv=4,_v=212,mv=213,Ov=5,vv=214,yv=26,bv=27,Cv=51,xv=52,Dv=57,Sv=58,wv=59,Ev=61,Tv=62,Pv=63,Av=64,Rv=65,Lv=67,kv=251,$v=74,Mv=270,Fv=115,Iv=133,Bv=154,Qv=155,qv=158,Ar=10,Rr=13,fo=32,cs=9,po=35,Nv=40,Wv=46,Ia=123,Qh=39,qh=34,jv=92,zv=new Set([bv,Cv,xv,Mv,Lv,Iv,Sv,wv,kv,Av,Rv,$v,Tv,Pv,Bv,Qv,qv,Fv]);function qs(r){return r==Ar||r==Rr}const Uv=new as((r,e)=>{let t;if(r.next<0)r.acceptToken(av);else if(e.context.depth<0)qs(r.next)&&r.acceptToken(ov,1);else if(((t=r.peek(-1))<0||qs(t))&&e.canShift(Fa)){let i=0;for(;r.next==fo||r.next==cs;)r.advance(),i++;(r.next==Ar||r.next==Rr||r.next==po)&&r.acceptToken(Fa,-i)}else qs(r.next)&&r.acceptToken(nv,1)},{contextual:!0}),Xv=new as((r,e)=>{let t=e.context.depth;if(t<0)return;let i=r.peek(-1);if(i==Ar||i==Rr){let s=0,a=0;for(;;){if(r.next==fo)s++;else if(r.next==cs)s+=8-s%8;else break;r.advance(),a++}s!=t&&r.next!=Ar&&r.next!=Rr&&r.next!=po&&(s<t?r.acceptToken(Bh,-a):r.acceptToken(Ih))}});function Dn(r,e){this.parent=r,this.depth=e,this.hash=(r?r.hash+r.hash<<8:0)+e+(e<<4)}const Yv=new Dn(null,0);function Vv(r){let e=0;for(let t=0;t<r.length;t++)e+=r.charCodeAt(t)==cs?8-e%8:1;return e}const Gv=new rv({start:Yv,reduce(r,e){return r.depth<0&&zv.has(e)?r.parent:r},shift(r,e,t,i){return e==Ih?new Dn(r,Vv(i.read(i.pos,t.pos))):e==Bh?r.parent:e==yv||e==Dv||e==Ev?new Dn(r,-1):r},hash(r){return r.hash}}),Hv=new as(r=>{for(let e=0;e<5;e++){if(r.next!="print".charCodeAt(e))return;r.advance()}if(!/\w/.test(String.fromCharCode(r.next)))for(let e=0;;e++){let t=r.peek(e);if(!(t==fo||t==cs)){t!=Nv&&t!=Wv&&t!=Ar&&t!=Rr&&t!=po&&r.acceptToken(sv);return}}});function ls(r,e,t,i,s){return new as(a=>{let o=a.pos;for(;!(a.next<0);)if(a.next==Ia)if(a.peek(1)==Ia)a.advance(2);else{if(a.pos==o){a.acceptToken(i,1);return}break}else if(a.next==jv)a.advance(),a.next>=0&&a.advance();else if(a.next==r&&(e==1||a.peek(1)==r&&a.peek(2)==r)){if(a.pos==o){a.acceptToken(s,e);return}break}else a.advance();a.pos>o&&a.acceptToken(t)})}const Zv=ls(Qh,1,cv,lv,hv),Jv=ls(qh,1,uv,dv,fv),Kv=ls(Qh,3,pv,gv,_v),e1=ls(qh,3,mv,Ov,vv),t1=tu({'async "*" "**" FormatConversion FormatSpec':x.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":x.controlKeyword,"in not and or is del":x.operatorKeyword,"from def class global nonlocal lambda":x.definitionKeyword,import:x.moduleKeyword,"with as print":x.keyword,Boolean:x.bool,None:x.null,VariableName:x.variableName,"CallExpression/VariableName":x.function(x.variableName),"FunctionDefinition/VariableName":x.function(x.definition(x.variableName)),"ClassDefinition/VariableName":x.definition(x.className),PropertyName:x.propertyName,"CallExpression/MemberExpression/PropertyName":x.function(x.propertyName),Comment:x.lineComment,Number:x.number,String:x.string,FormatString:x.special(x.string),UpdateOp:x.updateOperator,"ArithOp!":x.arithmeticOperator,BitOp:x.bitwiseOperator,CompareOp:x.compareOperator,AssignOp:x.definitionOperator,Ellipsis:x.punctuation,At:x.meta,"( )":x.paren,"[ ]":x.squareBracket,"{ }":x.brace,".":x.derefOperator,", ;":x.separator}),r1={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},i1=ji.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"⚠ print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:Gv,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[t1],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[Hv,Xv,Uv,Zv,Jv,Kv,e1,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:r=>r1[r]||-1}],tokenPrec:7372}),Ba=new hu,Nh=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Gr(r){return(e,t,i)=>{if(i)return!1;let s=e.node.getChild("VariableName");return s&&t(s,r),!0}}const s1={FunctionDefinition:Gr("function"),ClassDefinition:Gr("class"),ForStatement(r,e,t){if(t){for(let i=r.node.firstChild;i;i=i.nextSibling)if(i.name=="VariableName")e(i,"variable");else if(i.name=="in")break}},ImportStatement(r,e){var t,i;let{node:s}=r,a=((t=s.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let o=s.getChild("import");o;o=o.nextSibling)o.name=="VariableName"&&((i=o.nextSibling)===null||i===void 0?void 0:i.name)!="as"&&e(o,a?"variable":"namespace")},AssignStatement(r,e){for(let t=r.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(r,e){for(let t=null,i=r.node.firstChild;i;i=i.nextSibling)i.name=="VariableName"&&(!t||!/\*|AssignOp/.test(t.name))&&e(i,"variable"),t=i},CapturePattern:Gr("variable"),AsPattern:Gr("variable"),__proto__:null};function Wh(r,e){let t=Ba.get(e);if(t)return t;let i=[],s=!0;function a(o,n){let c=r.sliceString(o.from,o.to);i.push({label:c,type:n})}return e.cursor(za.IncludeAnonymous).iterate(o=>{if(o.name){let n=s1[o.name];if(n&&n(o,a,s)||!s&&Nh.has(o.name))return!1;s=!1}else if(o.to-o.from>8192){for(let n of Wh(r,o.node))i.push(n);return!1}}),Ba.set(e,i),i}const Qa=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,jh=["String","FormatString","Comment","PropertyName"];function n1(r){let e=iu(r.state).resolveInner(r.pos,-1);if(jh.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Qa.test(r.state.sliceDoc(e.from,e.to));if(!t&&!r.explicit)return null;let i=[];for(let s=e;s;s=s.parent)Nh.has(s.name)&&(i=i.concat(Wh(r.state.doc,s)));return{options:i,from:t?e.from:r.pos,validFor:Qa}}const o1=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(r=>({label:r,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(r=>({label:r,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(r=>({label:r,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(r=>({label:r,type:"function"}))),a1=[ct("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),ct("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),ct("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),ct("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),ct(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),ct("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),ct("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),ct("import ${module}",{label:"import",detail:"statement",type:"keyword"}),ct("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],c1=su(jh,lu(o1.concat(a1)));function qa(r,e){let t=r.baseIndentFor(e),i=r.lineAt(r.pos,-1),s=i.from+i.text.length;return/^\s*($|#)/.test(i.text)&&r.node.to<s+100&&!/\S/.test(r.state.sliceDoc(s,r.node.to))&&r.lineIndent(r.pos,-1)<=t||/^\s*(else:|elif |except |finally:)/.test(r.textAfter)&&r.lineIndent(r.pos,-1)>t?null:t+r.unit}const Ns=nu.define({name:"python",parser:i1.configure({props:[ou.add({Body:r=>{var e;return(e=qa(r,r.node))!==null&&e!==void 0?e:r.continue()},IfStatement:r=>/^\s*(else:|elif )/.test(r.textAfter)?r.baseIndent:r.continue(),TryStatement:r=>/^\s*(except |finally:|else:)/.test(r.textAfter)?r.baseIndent:r.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":hs({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":hs({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":hs({closing:"]"}),"String FormatString":()=>null,Script:r=>{if(r.pos+/\s*/.exec(r.textAfter)[0].length>=r.node.to){let e=null;for(let t=r.node,i=t.to;t=t.lastChild,!(!t||t.to!=i);)t.type.name=="Body"&&(e=t);if(e){let t=qa(r,e);if(t!=null)return t}}return r.continue()}}),au.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":cu,Body:(r,e)=>({from:r.from+1,to:r.to-(r.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function l1(){return new ru(Ns,[Ns.data.of({autocomplete:n1}),Ns.data.of({autocomplete:c1})])}const Ce=({variant:r,settings:e,styles:t})=>{const i=Ua.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:r==="dark"}),s=uu.define(t);return[i,du(s)]};Ce({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:x.comment,color:"#404080"},{tag:[x.string,x.regexp],color:"#999999"},{tag:x.number,color:"#7090B0"},{tag:[x.bool,x.null],color:"#8080A0"},{tag:[x.punctuation,x.derefOperator],color:"#805080"},{tag:x.keyword,color:"#60B0FF"},{tag:x.definitionKeyword,color:"#B0FFF0"},{tag:x.moduleKeyword,color:"#60B0FF"},{tag:x.operator,color:"#A0A0FF"},{tag:[x.variableName,x.self],color:"#008080"},{tag:x.operatorKeyword,color:"#A0A0FF"},{tag:x.controlKeyword,color:"#80A0FF"},{tag:x.className,color:"#70E080"},{tag:[x.function(x.propertyName),x.propertyName],color:"#50A0A0"},{tag:x.tagName,color:"#009090"},{tag:x.modifier,color:"#B0FFF0"},{tag:[x.squareBracket,x.attributeName],color:"#D0D0FF"}]});Ce({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:x.comment,color:"#787b8099"},{tag:x.string,color:"#86b300"},{tag:x.regexp,color:"#4cbf99"},{tag:[x.number,x.bool,x.null],color:"#ffaa33"},{tag:x.variableName,color:"#5c6166"},{tag:[x.definitionKeyword,x.modifier],color:"#fa8d3e"},{tag:[x.keyword,x.special(x.brace)],color:"#fa8d3e"},{tag:x.operator,color:"#ed9366"},{tag:x.separator,color:"#5c6166b3"},{tag:x.punctuation,color:"#5c6166"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#f2ae49"},{tag:[x.className,x.definition(x.typeName)],color:"#22a4e6"},{tag:[x.tagName,x.typeName,x.self,x.labelName],color:"#55b4d4"},{tag:x.angleBracket,color:"#55b4d480"},{tag:x.attributeName,color:"#f2ae49"}]});Ce({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:x.comment,color:"#6E6E6E"},{tag:[x.string,x.regexp,x.special(x.brace)],color:"#5C81B3"},{tag:x.number,color:"#C1E1B8"},{tag:x.bool,color:"#53667D"},{tag:[x.definitionKeyword,x.modifier,x.function(x.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[x.keyword,x.moduleKeyword,x.operatorKeyword,x.operator],color:"#697A8E",fontWeight:"bold"},{tag:[x.variableName,x.attributeName],color:"#708E67"},{tag:[x.function(x.variableName),x.definition(x.propertyName),x.derefOperator],color:"#fff"},{tag:x.tagName,color:"#A3D295"}]});Ce({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:x.comment,color:"#666666"},{tag:[x.string,x.special(x.brace)],color:"#54BE0D"},{tag:x.regexp,color:"#E9C062"},{tag:x.number,color:"#CF6A4C"},{tag:[x.keyword,x.operator],color:"#5EA6EA"},{tag:x.variableName,color:"#7587A6"},{tag:[x.definitionKeyword,x.modifier],color:"#F9EE98"},{tag:[x.propertyName,x.function(x.variableName)],color:"#937121"},{tag:[x.typeName,x.angleBracket,x.tagName],color:"#9B859D"}]});const h1=Ce({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:x.comment,color:"#6B4E32"},{tag:[x.keyword,x.operator,x.derefOperator],color:"#EF5D32"},{tag:x.className,color:"#EFAC32",fontWeight:"bold"},{tag:[x.typeName,x.propertyName,x.function(x.variableName),x.definition(x.variableName)],color:"#EFAC32"},{tag:x.definition(x.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:x.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[x.number,x.bool],color:"#6C99BB"},{tag:[x.variableName,x.self],color:"#7DAF9C"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#D9D762"},{tag:[x.angleBracket,x.tagName,x.attributeName],color:"#EFCB43"}]});Ce({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:x.comment,color:"#404040"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#00D8FF"},{tag:x.number,color:"#E62286"},{tag:[x.variableName,x.attributeName,x.self],color:"#E62286",fontWeight:"bold"},{tag:x.function(x.variableName),color:"#fff",fontWeight:"bold"}]});Ce({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:x.comment,color:"#BCC8BA"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#5D90CD"},{tag:[x.number,x.bool,x.null],color:"#46A609"},{tag:x.keyword,color:"#AF956F"},{tag:[x.definitionKeyword,x.modifier],color:"#C52727"},{tag:[x.angleBracket,x.tagName,x.attributeName],color:"#606060"},{tag:x.self,color:"#000"}]});Ce({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:x.comment,color:"#0088FF"},{tag:x.string,color:"#3AD900"},{tag:x.regexp,color:"#80FFC2"},{tag:[x.number,x.bool,x.null],color:"#FF628C"},{tag:[x.definitionKeyword,x.modifier],color:"#FFEE80"},{tag:x.variableName,color:"#CCCCCC"},{tag:x.self,color:"#FF80E1"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.definition(x.typeName),x.labelName],color:"#FFDD00"},{tag:[x.keyword,x.operator],color:"#FF9D00"},{tag:[x.propertyName,x.typeName],color:"#80FFBB"},{tag:x.special(x.brace),color:"#EDEF7D"},{tag:x.attributeName,color:"#9EFFFF"},{tag:x.derefOperator,color:"#fff"}]});Ce({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:x.comment,color:"#AEAEAE"},{tag:[x.string,x.special(x.brace),x.regexp],color:"#8DFF8E"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.function(x.definition(x.variableName)),x.definition(x.typeName)],color:"#A3EBFF"},{tag:[x.number,x.bool,x.null],color:"#62E9BD"},{tag:[x.keyword,x.operator],color:"#2BF1DC"},{tag:[x.definitionKeyword,x.modifier],color:"#F8FBB1"},{tag:[x.variableName,x.self],color:"#B683CA"},{tag:[x.angleBracket,x.tagName,x.typeName,x.propertyName],color:"#60A4F1"},{tag:x.derefOperator,color:"#E0E0E0"},{tag:x.attributeName,color:"#7BACCA"}]});Ce({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:x.comment,color:"#6272a4"},{tag:[x.string,x.special(x.brace)],color:"#f1fa8c"},{tag:[x.number,x.self,x.bool,x.null],color:"#bd93f9"},{tag:[x.keyword,x.operator],color:"#ff79c6"},{tag:[x.definitionKeyword,x.typeName],color:"#8be9fd"},{tag:x.definition(x.typeName),color:"#f8f8f2"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.attributeName],color:"#50fa7b"}]});Ce({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:x.comment,color:"#AAAAAA"},{tag:[x.keyword,x.operator,x.typeName,x.tagName,x.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[x.attributeName,x.definition(x.propertyName)],color:"#4F9FD0"},{tag:[x.className,x.string,x.special(x.brace)],color:"#CF4F5F"},{tag:x.number,color:"#CF4F5F",fontWeight:"bold"},{tag:x.variableName,fontWeight:"bold"}]});Ce({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:x.comment,color:"#9995b7"},{tag:x.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[x.definitionKeyword,x.modifier],color:"#ff5792"},{tag:[x.className,x.tagName,x.definition(x.typeName)],color:"#0094f0"},{tag:[x.number,x.bool,x.null,x.special(x.brace)],color:"#5842ff"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#0095a8"},{tag:x.typeName,color:"#b3694d"},{tag:[x.propertyName,x.variableName],color:"#fa8900"},{tag:x.operator,color:"#ff5792"},{tag:x.self,color:"#e64100"},{tag:[x.string,x.regexp],color:"#00b368"},{tag:[x.paren,x.bracket],color:"#0431fa"},{tag:x.labelName,color:"#00bdd6"},{tag:x.attributeName,color:"#e64100"},{tag:x.angleBracket,color:"#9995b7"}]});Ce({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:x.comment,color:"#9893a5"},{tag:[x.bool,x.null],color:"#286983"},{tag:x.number,color:"#d7827e"},{tag:x.className,color:"#d7827e"},{tag:[x.angleBracket,x.tagName,x.typeName],color:"#56949f"},{tag:x.attributeName,color:"#907aa9"},{tag:x.punctuation,color:"#797593"},{tag:[x.keyword,x.modifier],color:"#286983"},{tag:[x.string,x.regexp],color:"#ea9d34"},{tag:x.variableName,color:"#d7827e"}]});Ce({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:x.comment,color:"#CFCFCF"},{tag:[x.number,x.bool,x.null],color:"#E66C29"},{tag:[x.className,x.definition(x.propertyName),x.function(x.variableName),x.labelName,x.definition(x.typeName)],color:"#2EB43B"},{tag:x.keyword,color:"#D8B229"},{tag:x.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[x.definitionKeyword,x.modifier],color:"#925A47"},{tag:x.string,color:"#704D3D"},{tag:x.typeName,color:"#2F8996"},{tag:[x.variableName,x.propertyName],color:"#77ACB0"},{tag:x.self,color:"#77ACB0",fontWeight:"bold"},{tag:x.regexp,color:"#E3965E"},{tag:[x.tagName,x.angleBracket],color:"#BAA827"},{tag:x.attributeName,color:"#B06520"},{tag:x.derefOperator,color:"#000"}]});Ce({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:x.comment,color:"#93A1A1"},{tag:x.string,color:"#2AA198"},{tag:x.regexp,color:"#D30102"},{tag:x.number,color:"#D33682"},{tag:x.variableName,color:"#268BD2"},{tag:[x.keyword,x.operator,x.punctuation],color:"#859900"},{tag:[x.definitionKeyword,x.modifier],color:"#073642",fontWeight:"bold"},{tag:[x.className,x.self,x.definition(x.propertyName)],color:"#268BD2"},{tag:x.function(x.variableName),color:"#268BD2"},{tag:[x.bool,x.null],color:"#B58900"},{tag:x.tagName,color:"#268BD2",fontWeight:"bold"},{tag:x.angleBracket,color:"#93A1A1"},{tag:x.attributeName,color:"#93A1A1"},{tag:x.typeName,color:"#859900"}]});Ce({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:x.comment,color:"#8E908C"},{tag:[x.variableName,x.self,x.propertyName,x.attributeName,x.regexp],color:"#C82829"},{tag:[x.number,x.bool,x.null],color:"#F5871F"},{tag:[x.className,x.typeName,x.definition(x.typeName)],color:"#C99E00"},{tag:[x.string,x.special(x.brace)],color:"#718C00"},{tag:x.operator,color:"#3E999F"},{tag:[x.definition(x.propertyName),x.function(x.variableName)],color:"#4271AE"},{tag:x.keyword,color:"#8959A8"},{tag:x.derefOperator,color:"#4D4D4C"}]});class u1 extends Ua{constructor(e,t,i){let s=[fu.of("    "),pu,l1(),mo.of([...gu,_u]),mu.highest(mo.of([{key:"Ctrl-Enter",run:()=>(i.runMPC(this.getCode(),t.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(i.runMPC(this.getCode(),t.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),t.selectedIndex!=0&&(t.selectedIndex=0,t.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:Ou,preventDefault:!0},{key:"Ctrl-d",run:vu,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:yu,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:bu,preventDefault:!0},{key:"Ctrl-y",run:Cu,preventDefault:!0}])),h1];super({extensions:s,parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}async function d1(r){var e;return r.selectedIndex==0?e=localStorage.customCode||"":e=await(await fetch(r.value)).text(),e}function f1(r){console.log("Storage schema generation:",localStorage.gen),localStorage.gen||=0,localStorage.gen<r&&(console.log(`Clearing schema, latest generation: ${r}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=r)}const p1=()=>{addEventListener("beforeunload",function(){delete sessionStorage.__lock});let r=!1;return sessionStorage.__lock&&(r=!0),sessionStorage.__lock=1,r},Na=p1();function g1(){localStorage.tabCount||=0;let r=parseInt(localStorage.tabCount)+1;return localStorage.tabCount=r,addEventListener("beforeunload",function(){wn("lock","");let e=parseInt(localStorage.tabCount);e>0&&(localStorage.tabCount=e-1)}),Na&&console.warn("tab is duplicate"),(!sessionStorage.tabID||Na||Sn("lock",sessionStorage.tabID)!="")&&(sessionStorage.tabID=_1(),sessionStorage.myPeerID=Sn("myPeerID")),wn("lock","locked"),console.log("tab id: "+sessionStorage.tabID),sessionStorage.myPeerID}function _1(){for(let r=1;r<=1e3;r++)if(Sn("lock",r)=="")return r}function Sn(r,e=sessionStorage.tabID){return localStorage[`tabState:${e}:`+r]||""}function wn(r,e,t=sessionStorage.tabID){sessionStorage[r]=e,localStorage[`tabState:${t}:`+r]=e}var Be=typeof window<"u"?window:null,go=Be===null,Lr=go?void 0:Be.document,Ue="addEventListener",Xe="removeEventListener",Ws="getBoundingClientRect",mr="_a",Ye="_b",lt="_c",Hr="horizontal",Ve=function(){return!1},m1=go?"calc":["","-webkit-","-moz-","-o-"].filter(function(r){var e=Lr.createElement("div");return e.style.cssText="width:"+r+"calc(9px)",!!e.style.length}).shift()+"calc",zh=function(r){return typeof r=="string"||r instanceof String},Wa=function(r){if(zh(r)){var e=Lr.querySelector(r);if(!e)throw new Error("Selector "+r+" did not match a DOM element");return e}return r},ye=function(r,e,t){var i=r[e];return i!==void 0?i:t},Zr=function(r,e,t,i){if(e){if(i==="end")return 0;if(i==="center")return r/2}else if(t){if(i==="start")return 0;if(i==="center")return r/2}return r},O1=function(r,e){var t=Lr.createElement("div");return t.className="gutter gutter-"+e,t},v1=function(r,e,t){var i={};return zh(e)?i[r]=e:i[r]=m1+"("+e+"% - "+t+"px)",i},y1=function(r,e){var t;return t={},t[r]=e+"px",t},b1=function(r,e){if(e===void 0&&(e={}),go)return{};var t=r,i,s,a,o,n,c;Array.from&&(t=Array.from(t));var u=Wa(t[0]),l=u.parentNode,h=getComputedStyle?getComputedStyle(l):null,p=h?h.flexDirection:null,_=ye(e,"sizes")||t.map(function(){return 100/t.length}),g=ye(e,"minSize",100),d=Array.isArray(g)?g:t.map(function(){return g}),f=ye(e,"maxSize",1/0),b=Array.isArray(f)?f:t.map(function(){return f}),y=ye(e,"expandToMin",!1),m=ye(e,"gutterSize",10),S=ye(e,"gutterAlign","center"),E=ye(e,"snapOffset",30),D=Array.isArray(E)?E:t.map(function(){return E}),P=ye(e,"dragInterval",1),O=ye(e,"direction",Hr),w=ye(e,"cursor",O===Hr?"col-resize":"row-resize"),R=ye(e,"gutter",O1),v=ye(e,"elementStyle",v1),C=ye(e,"gutterStyle",y1);O===Hr?(i="width",s="clientX",a="left",o="right",n="clientWidth"):O==="vertical"&&(i="height",s="clientY",a="top",o="bottom",n="clientHeight");function A(W,B,q,G){var le=v(i,B,q,G);Object.keys(le).forEach(function(ce){W.style[ce]=le[ce]})}function T(W,B,q){var G=C(i,B,q);Object.keys(G).forEach(function(le){W.style[le]=G[le]})}function k(){return c.map(function(W){return W.size})}function L(W){return"touches"in W?W.touches[0][s]:W[s]}function M(W){var B=c[this.a],q=c[this.b],G=B.size+q.size;B.size=W/this.size*G,q.size=G-W/this.size*G,A(B.element,B.size,this[Ye],B.i),A(q.element,q.size,this[lt],q.i)}function I(W){var B,q=c[this.a],G=c[this.b];this.dragging&&(B=L(W)-this.start+(this[Ye]-this.dragOffset),P>1&&(B=Math.round(B/P)*P),B<=q.minSize+q.snapOffset+this[Ye]?B=q.minSize+this[Ye]:B>=this.size-(G.minSize+G.snapOffset+this[lt])&&(B=this.size-(G.minSize+this[lt])),B>=q.maxSize-q.snapOffset+this[Ye]?B=q.maxSize+this[Ye]:B<=this.size-(G.maxSize-G.snapOffset+this[lt])&&(B=this.size-(G.maxSize+this[lt])),M.call(this,B),ye(e,"onDrag",Ve)(k()))}function $(){var W=c[this.a].element,B=c[this.b].element,q=W[Ws](),G=B[Ws]();this.size=q[i]+G[i]+this[Ye]+this[lt],this.start=q[a],this.end=q[o]}function F(W){if(!getComputedStyle)return null;var B=getComputedStyle(W);if(!B)return null;var q=W[n];return q===0?null:(O===Hr?q-=parseFloat(B.paddingLeft)+parseFloat(B.paddingRight):q-=parseFloat(B.paddingTop)+parseFloat(B.paddingBottom),q)}function N(W){var B=F(l);if(B===null||d.reduce(function(ce,de){return ce+de},0)>B)return W;var q=0,G=[],le=W.map(function(ce,de){var pe=B*ce/100,Z=Zr(m,de===0,de===W.length-1,S),Oe=d[de]+Z;return pe<Oe?(q+=Oe-pe,G.push(0),Oe):(G.push(pe-Oe),pe)});return q===0?W:le.map(function(ce,de){var pe=ce;if(q>0&&G[de]-q>0){var Z=Math.min(q,G[de]-q);q-=Z,pe=ce-Z}return pe/B*100})}function Q(){var W=this,B=c[W.a].element,q=c[W.b].element;W.dragging&&ye(e,"onDragEnd",Ve)(k()),W.dragging=!1,Be[Xe]("mouseup",W.stop),Be[Xe]("touchend",W.stop),Be[Xe]("touchcancel",W.stop),Be[Xe]("mousemove",W.move),Be[Xe]("touchmove",W.move),W.stop=null,W.move=null,B[Xe]("selectstart",Ve),B[Xe]("dragstart",Ve),q[Xe]("selectstart",Ve),q[Xe]("dragstart",Ve),B.style.userSelect="",B.style.webkitUserSelect="",B.style.MozUserSelect="",B.style.pointerEvents="",q.style.userSelect="",q.style.webkitUserSelect="",q.style.MozUserSelect="",q.style.pointerEvents="",W.gutter.style.cursor="",W.parent.style.cursor="",Lr.body.style.cursor=""}function re(W){if(!("button"in W&&W.button!==0)){var B=this,q=c[B.a].element,G=c[B.b].element;B.dragging||ye(e,"onDragStart",Ve)(k()),W.preventDefault(),B.dragging=!0,B.move=I.bind(B),B.stop=Q.bind(B),Be[Ue]("mouseup",B.stop),Be[Ue]("touchend",B.stop),Be[Ue]("touchcancel",B.stop),Be[Ue]("mousemove",B.move),Be[Ue]("touchmove",B.move),q[Ue]("selectstart",Ve),q[Ue]("dragstart",Ve),G[Ue]("selectstart",Ve),G[Ue]("dragstart",Ve),q.style.userSelect="none",q.style.webkitUserSelect="none",q.style.MozUserSelect="none",q.style.pointerEvents="none",G.style.userSelect="none",G.style.webkitUserSelect="none",G.style.MozUserSelect="none",G.style.pointerEvents="none",B.gutter.style.cursor=w,B.parent.style.cursor=w,Lr.body.style.cursor=w,$.call(B),B.dragOffset=L(W)-B.end}}_=N(_);var Y=[];c=t.map(function(W,B){var q={element:Wa(W),size:_[B],minSize:d[B],maxSize:b[B],snapOffset:D[B],i:B},G;if(B>0&&(G={a:B-1,b:B,dragging:!1,direction:O,parent:l},G[Ye]=Zr(m,B-1===0,!1,S),G[lt]=Zr(m,!1,B===t.length-1,S),p==="row-reverse"||p==="column-reverse")){var le=G.a;G.a=G.b,G.b=le}if(B>0){var ce=R(B,O,q.element);T(ce,m,B),G[mr]=re.bind(G),ce[Ue]("mousedown",G[mr]),ce[Ue]("touchstart",G[mr]),l.insertBefore(ce,q.element),G.gutter=ce}return A(q.element,q.size,Zr(m,B===0,B===t.length-1,S),B),B>0&&Y.push(G),q});function ee(W){var B=W.i===Y.length,q=B?Y[W.i-1]:Y[W.i];$.call(q);var G=B?q.size-W.minSize-q[lt]:W.minSize+q[Ye];M.call(q,G)}c.forEach(function(W){var B=W.element[Ws]()[i];B<W.minSize&&(y?ee(W):W.minSize=B)});function ie(W){var B=N(W);B.forEach(function(q,G){if(G>0){var le=Y[G-1],ce=c[le.a],de=c[le.b];ce.size=B[G-1],de.size=q,A(ce.element,ce.size,le[Ye],ce.i),A(de.element,de.size,le[lt],de.i)}})}function ne(W,B){Y.forEach(function(q){if(B!==!0?q.parent.removeChild(q.gutter):(q.gutter[Xe]("mousedown",q[mr]),q.gutter[Xe]("touchstart",q[mr])),W!==!0){var G=v(i,q.a.size,q[Ye]);Object.keys(G).forEach(function(le){c[q.a].element.style[le]="",c[q.b].element.style[le]=""})}})}return{setSizes:ie,getSizes:k,collapse:function(B){ee(c[B])},destroy:ne,parent:l,pairs:Y}};function C1(r){var e=localStorage.getItem("split-sizes"),t;e?t=JSON.parse(e):t=[50,50],b1(r,{sizes:t,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,onDragEnd:function(i){localStorage.setItem("split-sizes",JSON.stringify(i))}})}class x1{mpyc;editor;term;demoSelect;hostPeerIDInput;chatInput;myPeerIDEl;knownPeersEl;resetPeerIDButton;runMPyCButton;runMPyCAsyncButton;stopMPyCButton;connectToPeerButton;sendMessageButton;clearTerminalButton;versionDiv;toggleStatsEl;qr;constructor(e,t){this.mpyc=e,this.demoSelect=te(t.demoSelectSelector),this.hostPeerIDInput=te(t.hostPeerIDInputSelector),this.chatInput=te(t.chatInputSelector),this.myPeerIDEl=te(t.myPeerIDSelector),this.knownPeersEl=te(t.peersDivSelector),this.resetPeerIDButton=te(t.resetPeerIDButtonSelector),this.runMPyCButton=te(t.runMPyCButtonSelector),this.runMPyCAsyncButton=te(t.runMPyCAsyncButtonSelector),this.stopMPyCButton=te(t.stopMPyCButtonSelector),this.connectToPeerButton=te(t.connectToPeerButtonSelector),this.sendMessageButton=te(t.sendMessageButtonSelector),this.clearTerminalButton=te(t.clearTerminalButtonSelector),this.toggleStatsEl=te(t.toggleStatsSelector),this.versionDiv=te(t.versionSelector),Hh('[data-bs-toggle="tooltip"]').forEach(i=>new ke(i,{trigger:"hover"})),this.qr=new YO(te(t.qrGenBtnSelector),te(t.qrScanBtnSelector),te(t.qrScanInputSelector),()=>this.mpyc.transport.id()),this.qr.on("qr:scanned",i=>{this.hostPeerIDInput.value=i,this.hostPeerIDInput.dispatchEvent(new Event("input"))}),this.qr.on("qr:error",i=>{this.term.error(i.message)}),this.term=new WO(t.terminalSelector,e),this.editor=new u1(t.editorSelector,this.demoSelect,e),this.init(e,t)}init(e,t){this.term.info(`Initializing ${ue.green("PeerJS")}...`),this.term.info(`Initializing ${ue.green(e.runtime.type())} runtime...`),this.updateHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",Cn(()=>{try{let s=new URL(this.hostPeerIDInput.value).searchParams.get("peer");s&&(this.hostPeerIDInput.value=s)}catch{}})),this.setupMPyCEvents(e),this.setupButtonEvents(e,t),this.setupDemoSelector(),C1(t.splitPanelSelectors),this.setupGlobals()}setupMPyCEvents(e){addEventListener("error",t=>{console.error(t),this.term.error(t.message)}),e.on("transport:ready",async t=>{this.myPeerIDEl.value=Qi(t),wn("myPeerID",t),console.log("Peer ID: "+t),this.term.success(`${ue.green("PeerJS")} ready with ID: ${ue.peerID(t)}`),this.updatePeersDiv()}),e.on("transport:closed",async()=>{this.term.error("PeerJS closed.")}),e.on("transport:error",async t=>{this.term.warn(`PeerJS failed: ${t.message}`),console.warn(`PeerJS failed: ${t.message}
${t.stack}`),t.message==="Lost connection to server."&&setTimeout(()=>{this.mpyc.transport.reconnect()},1e3)}),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",async t=>{this.term.error(t.error)}),e.on("runtime:messageerror",async t=>{this.term.error(t.data)}),e.on("runtime:exec:done",async()=>{this.updatePeersDiv()}),e.on("runtime:exec:init",async()=>{this.updatePeersDiv()}),e.on("runtime:display",async t=>{this.term.display(t)}),e.on("runtime:display:error",async t=>{this.term.displayError(t)}),e.on("runtime:display:stats",async t=>{this.term.live(t)}),e.on("runtime:ready",async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${ue.green(e.runtime.type())} runtime ready.`)})}setupButtonEvents(e,t){if(yh)try{this.setupEruda()}catch(i){console.warn(i)}this.resetPeerIDButton.addEventListener("click",async()=>{delete sessionStorage.myPeerID,this.term.writeln("Restarting PeerJS..."),e.resetTransport(()=>new pn)}),this.stopMPyCButton.addEventListener("click",async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()}),this.runMPyCButton.addEventListener("click",async i=>{e.runMPC(this.editor.getCode(),this.demoSelect.value,i.ctrlKey||i.shiftKey)}),this.connectToPeerButton.addEventListener("click",async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)}),this.sendMessageButton.addEventListener("click",async()=>{this.sendChatMessage()}),this.clearTerminalButton.addEventListener("click",async()=>{this.term.clear()}),this.setupStatsToggle(),this.chatInput.addEventListener("keypress",async i=>{let s=i;if(s.key==="Enter"&&!s.shiftKey)return s.preventDefault(),this.sendChatMessage()}),new rO(t.myPeerIDSelector,t.copyPeerIDButtonSelector)}setupStatsToggle(){this.toggleStatsEl.addEventListener("click",async()=>{this.toggleStatsEl.checked?(xa("showStats","true"),ke.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(xa("showStats","false"),ke.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())});const e=tO("showStats");this.toggleStatsEl.checked=e==="true",this.toggleStatsEl.dispatchEvent(new Event("click"))}setupEruda(){let e=document.createElement("div");document.body.prepend(e),_o.init({container:e,autoScale:!0,defaults:{theme:"dark"},tool:["console","elements","network","info","resources"]}),_o.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.clearTabCount=()=>{delete localStorage.tabCount},window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}onPeerConnectedHook=async e=>{this.term.success(`Connected to: ${ue.peerID(e)}`),this.updatePeersDiv()};async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach((e,t)=>{let i=`
        <span class="position-relative end-0">
            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>
        </span>`;this.knownPeersEl.innerHTML+=`
        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> 
            <span class="" style="user-select:none">${t}: </span>
            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${Qi(e)}</span> 
            ${i}
        </li>`})}onPeerDisconnectedHook=async e=>{this.term.error(`Disconnected from: ${ue.peerID(e)}`),this.updatePeersDiv()};onPeerConnectionErrorHook=async({peerID:e,err:t})=>{this.term.error(`Failed to connect to: ${ue.peerID(e)}: ${t.message}`),this.updatePeersDiv()};setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),t=i=>{i.matches?(te("#mpc-demos").hidden=!0,te("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,te("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),te("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),te("#chatFooter").insertAdjacentElement("beforeend",te("#chatInputGroup"))):(te("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),te("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),te("#mpc-demos").hidden=!1,te("#connectedPartiesLabel").hidden=!1,te("#chatSidebar").insertAdjacentElement("beforeend",te("#chatInputGroup")),this.demoSelect.size=window.innerHeight/(4*21))};e.addEventListener("change",t),t(e),this.demoSelect.addEventListener("change",async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex;let i=await d1(this.demoSelect);this.editor.updateCode(i)}),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.demoSelect.dispatchEvent(new Event("change"))}updateHostPeerIDInput(){var i=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return i&&(this.hostPeerIDInput.value=i,localStorage.hostPeerID=i),i}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}processChatMessage=async({peerID:e,data:t})=>{if(t.type!="user:chat"){console.warn("unknown message type",t);return}this.term.chat(e,t.payload)}}const ja="0.6.1";function D1(){f1(18);let r=g1();document.title+=` - (${sessionStorage.tabID})`;const e=()=>{try{return new pn(r)}catch(s){return console.warn(s),new pn}},t=()=>new uf({config:{fetch:[{from:"./py/",to_folder:"./",files:[`mpyc_web-${ja}-py3-none-any.whl`,"demo.py"]}],packages:[`emfs:./mpyc_web-${ja}-py3-none-any.whl`]}});let i=new Au(e,t);new x1(i,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",runMPyCAsyncButtonSelector:"button#startAsyncButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",qrGenBtnSelector:"#show-qr",qrScanInputSelector:"#qrCodeFileInput",qrScanBtnSelector:"#scanQRCodeButton",splitPanelSelectors:[".split-panel-editor",".split-panel-terminal"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})}D1();
//# sourceMappingURL=index-Dl9sisNv.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}