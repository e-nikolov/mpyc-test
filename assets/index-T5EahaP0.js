var Ng=Object.defineProperty;var Ug=(Ze,Ae,ye)=>Ae in Ze?Ng(Ze,Ae,{enumerable:!0,configurable:!0,writable:!0,value:ye}):Ze[Ae]=ye;var oe=(Ze,Ae,ye)=>(Ug(Ze,typeof Ae!="symbol"?Ae+"":Ae,ye),ye);var Xi=(Ze,Ae,ye)=>{if(Ae.has(Ze))throw TypeError("Cannot add the same private member more than once");Ae instanceof WeakSet?Ae.add(Ze):Ae.set(Ze,ye)};import"./modulepreload-polyfill-xwJNGKPl.js";import{g as _o,c as gs,e as Ih}from"./eruda-9BuxRK0I.js";import"./encode-79CO1kuF.js";import{p as Yg}from"./purify.es-PBAgqAjd.js";import{x as Vg}from"./xterm-pwSi7oBS.js";import{H as Gg,a as Hg}from"./html5QRcode-q0zn6kFf.js";import{$ as te,b as Zg,a as Jg}from"./browser-L5sDYLvP.js";import{P as Kg,N as em,a as tm,D as im,b as Oo,T as ms,I as qh,s as rm,t as C,L as sm,c as nm,i as om,d as am,e as cm,f as vo,g as lm,h as hm,j as um,k as dm,l as bt,E as Wh,H as pm,m as fm,n as gm,o as mm,p as jh,q as _m,r as Om,u as vm,v as ym,w as bm,x as wm,y as Dm,z as Cm}from"./codemirror-JtsO_ueM.js";(async()=>{var po,fo,go,mo;function Ze(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in i)){const n=Object.getOwnPropertyDescriptor(r,s);n&&Object.defineProperty(i,s,n.get?n:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}document.title="MPyC Web (test)";var Ae={version:"0.9.2",dirty:!0,deployment:"test",timestamp:1702379797079,time:"12/12/2023, 12:16:37",revision:"3285700"};(function(){let i=Ae;console.log("buildInfo",i);let e=document.querySelector("#version");e.innerText=`v${i.version}-${i.revision}`,e.innerText+="-dirty",e.innerText+=` (${i.time})`})();const ye=new WeakMap,Mt=new WeakMap,pt=new WeakMap;var Xh={};const Ni=Symbol("anyProducer"),yo=Promise.resolve(),Ui=Symbol("listenerAdded"),Yi=Symbol("listenerRemoved");let Vi=!1,_s=!1;function Ht(i){if(typeof i!="string"&&typeof i!="symbol"&&typeof i!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function Gi(i){if(typeof i!="function")throw new TypeError("listener must be a function")}function Zt(i,e){const t=Mt.get(i);if(t.has(e))return t.get(e)}function yi(i,e){const t=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:Ni,r=pt.get(i);if(r.has(t))return r.get(t)}function bo(i,e){e=Array.isArray(e)?e:[e];let t=!1,r=()=>{},s=[];const n={enqueue(a){s.push(a),r()},finish(){t=!0,r()}};for(const a of e){let o=yi(i,a);o||(o=new Set,pt.get(i).set(a,o)),o.add(n)}return{async next(){return s?s.length===0?t?(s=void 0,this.next()):(await new Promise(a=>{r=a}),this.next()):{done:!1,value:await s.shift()}:{done:!0}},async return(a){s=void 0;for(const o of e){const c=yi(i,o);c&&(c.delete(n),c.size===0)&&pt.get(i).delete(o)}return r(),arguments.length>0?{done:!0,value:await a}:{done:!0}},[Symbol.asyncIterator](){return this}}}function wo(i){if(i===void 0)return Do;if(!Array.isArray(i))throw new TypeError("`methodNames` must be an array of strings");for(const e of i)if(!Do.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return i}const Jt=i=>i===Ui||i===Yi;function Hi(i,e,t){if(Jt(e))try{Vi=!0,i.emit(e,t)}finally{Vi=!1}}class nt{static mixin(e,t){return t=wo(t),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const n of t)if(r.prototype[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(r.prototype,e,{enumerable:!1,get:function(){return Object.defineProperty(this,e,{enumerable:!1,value:new nt}),this[e]}});const s=n=>function(...a){return this[e][n](...a)};for(const n of t)Object.defineProperty(r.prototype,n,{enumerable:!1,value:s(n)});return r}}static get isDebugEnabled(){if(typeof Xh!="object")return _s;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||_s}static set isDebugEnabled(e){_s=e}constructor(e={}){ye.set(this,new Set),Mt.set(this,new Map),pt.set(this,new Map),pt.get(this).set(Ni,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(t,r,s,n)=>{try{n=JSON.stringify(n)}catch{n=`Object with the following keys failed to stringify: ${Object.keys(n).join(",")}`}typeof s!="symbol"&&typeof s!="number"||(s=s.toString());const a=new Date,o=`${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}.${a.getMilliseconds()}`;console.log(`[${o}][emittery:${t}][${r}] Event Name: ${s}
	data: ${n}`)})}logIfDebugEnabled(e,t,r){(nt.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,t,r)}on(e,t){Gi(t),e=Array.isArray(e)?e:[e];for(const r of e){Ht(r);let s=Zt(this,r);s||(s=new Set,Mt.get(this).set(r,s)),s.add(t),this.logIfDebugEnabled("subscribe",r,void 0),Jt(r)||Hi(this,Ui,{eventName:r,listener:t})}return this.off.bind(this,e,t)}off(e,t){Gi(t),e=Array.isArray(e)?e:[e];for(const r of e){Ht(r);const s=Zt(this,r);s&&(s.delete(t),s.size===0)&&Mt.get(this).delete(r),this.logIfDebugEnabled("unsubscribe",r,void 0),Jt(r)||Hi(this,Yi,{eventName:r,listener:t})}}once(e){let t;const r=new Promise(s=>{t=this.on(e,n=>{t(),s(n)})});return r.off=t,r}events(e){e=Array.isArray(e)?e:[e];for(const t of e)Ht(t);return bo(this,e)}async emit(e,t){if(Ht(e),Jt(e)&&!Vi)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,t),function(o,c,l){const h=pt.get(o);if(h.has(c))for(const u of h.get(c))u.enqueue(l);if(h.has(Ni)){const u=Promise.all([c,l]);for(const f of h.get(Ni))f.enqueue(u)}}(this,e,t);const r=Zt(this,e)??new Set,s=ye.get(this),n=[...r],a=Jt(e)?[]:[...s];await yo,await Promise.all([...n.map(async o=>{if(r.has(o))return o(t)}),...a.map(async o=>{if(s.has(o))return o(e,t)})])}async emitSerial(e,t){if(Ht(e),Jt(e)&&!Vi)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,t);const r=Zt(this,e)??new Set,s=ye.get(this),n=[...r],a=[...s];await yo;for(const o of n)r.has(o)&&await o(t);for(const o of a)s.has(o)&&await o(e,t)}onAny(e){return Gi(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ye.get(this).add(e),Hi(this,Ui,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return bo(this)}offAny(e){Gi(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Hi(this,Yi,{listener:e}),ye.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const t of e)if(this.logIfDebugEnabled("clear",t,void 0),typeof t=="string"||typeof t=="symbol"||typeof t=="number"){const r=Zt(this,t);r&&r.clear();const s=yi(this,t);if(s){for(const n of s)n.finish();s.clear()}}else{ye.get(this).clear();for(const[r,s]of Mt.get(this).entries())s.clear(),Mt.get(this).delete(r);for(const[r,s]of pt.get(this).entries()){for(const n of s)n.finish();s.clear(),pt.get(this).delete(r)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let t=0;for(const r of e)if(typeof r!="string"){r!==void 0&&Ht(r),t+=ye.get(this).size;for(const s of Mt.get(this).values())t+=s.size;for(const s of pt.get(this).values())t+=s.size}else t+=ye.get(this).size+(Zt(this,r)?.size??0)+(yi(this,r)?.size??0)+(yi(this)?.size??0);return t}bindMethods(e,t){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");t=wo(t);for(const r of t){if(e[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(e,r,{enumerable:!1,value:this[r].bind(this)})}}}const Do=Object.getOwnPropertyNames(nt.prototype).filter(i=>i!=="constructor");Object.defineProperty(nt,"listenerAdded",{value:Ui,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(nt,"listenerRemoved",{value:Yi,writable:!1,enumerable:!0,configurable:!1});class Nh extends nt{constructor(t,r,s={}){super();oe(this,"transport");oe(this,"peerIDToPID",new Map);oe(this,"pidToPeerID",new Map);oe(this,"peersReady",new Map);oe(this,"runtime");oe(this,"running",!1);oe(this,"runtimeFactory");oe(this,"transportFactory");oe(this,"env",{});oe(this,"processReadyMessage",(t,r)=>{if(this.peersReady.set(t,!0),!this.running)return void console.log("ignoring mpc ready message because we are not running");let s=this.peerIDToPID.get(t);this.runtime.processReadyMessage(s,r)});oe(this,"processRuntimeMessage",(t,r)=>{if(!this.running)return void console.log("ignoring mpc runtime message because we are not running");let s=this.peerIDToPID.get(t);this.runtime.processRuntimeMessage(s,r)});this.transport=this.newTransport(t),this.runtime=this.newRuntime(r),this.env=s}newTransport(t){this.transportFactory=t,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const r=t();return this.addTransportEvents(r),r}newRuntime(t=this.runtimeFactory){this.runtimeFactory=t;const r=t();return this.addRuntimeEvents(r),r}addTransportEvents(t){t.on("ready",r=>{this.emit("transport:ready",r)}),t.on("closed",()=>{this.emit("transport:closed")}),t.on("error",r=>{this.emit("transport:error",r)}),t.on("conn:ready",r=>{this.emit("transport:conn:ready",r)}),t.on("conn:disconnected",r=>{this.emit("transport:conn:disconnected",r)}),t.on("conn:error",({peerID:r,err:s})=>{this.emit("transport:conn:error",{peerID:r,err:s})}),t.on("conn:data",({peerID:r,data:s})=>{switch(s.type){case"mpyc:ready":this.processReadyMessage(r,s.payload);break;case"mpyc:runtime":this.processRuntimeMessage(r,s.payload);break;default:this.emit("transport:conn:data:custom",{peerID:r,data:s})}})}addRuntimeEvents(t){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach(r=>{((s,n,a)=>{s.on(a,o=>{n.emit(`runtime:${a}`,o)})})(t,this,r)}),t.on("ready",()=>{this.emit("runtime:ready")}),t.on("send",({type:r,pid:s,payload:n})=>{this.sendMPCMessage(r,s,n)})}runMPC(t,r,s=!0){this.running=!0;let n=this.transport.getPeers(!0),a=n.findIndex(o=>o===this.transport.id());for(let o=0;o<n.length;o++)this.peerIDToPID.set(n[o],o),this.pidToPeerID.set(o,n[o]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:a,filename:r,parties:n,is_async:s,no_async:!s,code:t})}reset(t=this.transportFactory,r=this.runtimeFactory){this.resetTransport(t),this.resetRuntime(r)}resetTransport(t=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(t)}resetRuntime(t=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(t),this.running=!1}sendMPCMessage(t,r,s){let n=this.pidToPeerID.get(r);this.transport.send(n,`mpyc:${t}`,s)}}const Co=typeof self=="object"?self:globalThis,Uh=i=>((e,t)=>{const r=(n,a)=>(e.set(a,n),n),s=n=>{if(e.has(n))return e.get(n);const[a,o]=t[n];switch(a){case 0:case-1:return r(o,n);case 1:{const c=r([],n);for(const l of o)c.push(s(l));return c}case 2:{const c=r({},n);for(const[l,h]of o)c[s(l)]=s(h);return c}case 3:return r(new Date(o),n);case 4:{const{source:c,flags:l}=o;return r(new RegExp(c,l),n)}case 5:{const c=r(new Map,n);for(const[l,h]of o)c.set(s(l),s(h));return c}case 6:{const c=r(new Set,n);for(const l of o)c.add(s(l));return c}case 7:{const{name:c,message:l}=o;return r(new Co[c](l),n)}case 8:return r(BigInt(o),n);case"BigInt":return r(Object(BigInt(o)),n)}return r(new Co[a](o),n)};return s})(new Map,i)(0),Kt="",{toString:Yh}={},{keys:Vh}=Object,bi=i=>{const e=typeof i;if(e!=="object"||!i)return[0,e];const t=Yh.call(i).slice(8,-1);switch(t){case"Array":return[1,Kt];case"Object":return[2,Kt];case"Date":return[3,Kt];case"RegExp":return[4,Kt];case"Map":return[5,Kt];case"Set":return[6,Kt]}return t.includes("Array")?[1,t]:t.includes("Error")?[7,t]:[2,t]},Zi=([i,e])=>i===0&&(e==="function"||e==="symbol"),Gh=(i,{json:e,lossy:t}={})=>{const r=[];return((s,n,a,o)=>{const c=(h,u)=>{const f=o.push(h)-1;return a.set(u,f),f},l=h=>{if(a.has(h))return a.get(h);let[u,f]=bi(h);switch(u){case 0:{let d=h;switch(f){case"bigint":u=8,d=h.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+f);d=null;break;case"undefined":return c([-1],h)}return c([u,d],h)}case 1:{if(f)return c([f,[...h]],h);const d=[],p=c([u,d],h);for(const g of h)d.push(l(g));return p}case 2:{if(f)switch(f){case"BigInt":return c([f,h.toString()],h);case"Boolean":case"Number":case"String":return c([f,h.valueOf()],h)}if(n&&"toJSON"in h)return l(h.toJSON());const d=[],p=c([u,d],h);for(const g of Vh(h))!s&&Zi(bi(h[g]))||d.push([l(g),l(h[g])]);return p}case 3:return c([u,h.toISOString()],h);case 4:{const{source:d,flags:p}=h;return c([u,{source:d,flags:p}],h)}case 5:{const d=[],p=c([u,d],h);for(const[g,_]of h)(s||!Zi(bi(g))&&!Zi(bi(_)))&&d.push([l(g),l(_)]);return p}case 6:{const d=[],p=c([u,d],h);for(const g of h)!s&&Zi(bi(g))||d.push(l(g));return p}}const{message:m}=h;return c([u,{name:f,message:m}],h)};return l})(!(e||t),!!e,new Map,r)(i),r},{parse:Hh,stringify:Zh}=JSON,Jh={json:!0,lossy:!0},Kh=Object.freeze(Object.defineProperty({__proto__:null,parse:i=>Uh(Hh(i)),stringify:i=>Zh(Gh(i,Jh))},Symbol.toStringTag,{value:"Module"})),Ji="4ee55850-17cb-4a85-a071-03fe2aa108bd",eu="M"+Ji,tu="T"+Ji,wt="array",Se="function",Os="null",vs="number",ft="object",Ki="string",er="symbol",xo="undefined",ei="apply",tr="construct",ir="defineProperty",ys="deleteProperty",rr="get",bs="getOwnPropertyDescriptor",ws="getPrototypeOf",sr="has",Ds="isExtensible",Cs="ownKeys",xs="preventExtensions",nr="set",Ss="setPrototypeOf",or="delete",iu=i=>({value:new Promise(e=>{let t=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");t.onmessage=e,t.postMessage(i)})}),{Int32Array:Ts,Map:So,SharedArrayBuffer:To,Uint16Array:Es}=globalThis,{BYTES_PER_ELEMENT:Eo}=Ts,{BYTES_PER_ELEMENT:ru}=Es,{isArray:su}=Array,{notify:nu,wait:Po,waitAsync:ou}=Atomics,Ps=new WeakSet,ks=new WeakMap,au={value:{then:i=>i()}};let cu=0;const Ls=(i,{parse:e=JSON.parse,stringify:t=JSON.stringify,transform:r,interrupt:s}=JSON)=>{if(!ks.has(i)){const n=(u,...f)=>i.postMessage({[Ji]:f},{transfer:u}),a=typeof s===Se?s:s?.handler,o=s?.delay||42,c=new TextDecoder("utf-16"),l=(u,f)=>u?(ou||iu)(f,0):(a?((m,d,p)=>{for(;Po(m,0,0,d)==="timed-out";)p()})(f,o,a):Po(f,0),au);let h=!1;ks.set(i,new Proxy(new So,{[sr]:(u,f)=>typeof f=="string"&&!f.startsWith("_"),[rr]:(u,f)=>f==="then"?null:(...m)=>{const d=cu++;let p=new Ts(new To(2*Eo)),g=[];Ps.has(m.at(-1)||g)&&Ps.delete(g=m.pop()),n(g,d,p,f,r?m.map(r):m);const _=i!==globalThis;let y=0;return h&&_&&(y=setTimeout(console.warn,1e3,`\u{1F480}\u{1F512} - Possible deadlock if proxy.${f}(...args) is awaited`)),l(_,p).value.then(()=>{clearTimeout(y);const O=p[1];if(!O)return;const v=ru*O;return p=new Ts(new To(v+v%Eo)),n([],d,p),l(_,p).value.then(()=>e(c.decode(new Es(p.buffer).slice(0,O))))})},[nr](u,f,m){const d=typeof m;if(d!==Se)throw new Error(`Unable to assign ${f} as ${d}`);if(!u.size){const p=new So;i.addEventListener("message",async g=>{const _=g.data?.[Ji];if(su(_)){g.stopImmediatePropagation();const[y,O,...v]=_;let S;if(v.length){const[T,k]=v;if(u.has(T)){h=!0;try{const b=await u.get(T)(...k);if(b!==void 0){const D=t(r?r(b):b);p.set(y,D),O[1]=D.length}}catch(b){S=b}finally{h=!1}}else S=new Error(`Unsupported action: ${T}`);O[0]=1}else{const T=p.get(y);p.delete(y);for(let k=new Es(O.buffer),b=0;b<T.length;b++)k[b]=T.charCodeAt(b)}if(nu(O,0),S)throw S}})}return!!u.set(f,m)}}))}return ks.get(i)};Ls.transfer=(...i)=>(Ps.add(i),i);const{isArray:ko}=Array,lu=(i,e)=>e,Lo=i=>typeof i===Se?(e=>e())(i):i;function hu(){return this}const Me=(i,e)=>i===wt?[e]:{t:i,v:e},Ro=(i,e=lu)=>{let t=typeof i,r=i;return t===ft&&(ko(i)?(t=wt,r=i.at(0)):{t,v:r}=i),e(t,r)},uu=(i,e)=>i===Se?e:Me(i,e),du=(i,e=uu)=>{const t=i===null?Os:typeof i;return e(t===ft&&ko(i)?wt:t,i)},pu=new FinalizationRegistry(([i,e,t])=>{t&&console.debug(`Held value ${String(e)} not relevant anymore`),i(e)}),Ao=Object.create(null),Mo=(i,e,{debug:t,return:r,token:s=i}=Ao)=>{const n=r||new Proxy(i,Ao),a=[n,[e,i,!!t]];return s!==!1&&a.push(s),pu.register(...a),n},{defineProperty:Fo,deleteProperty:fu,getOwnPropertyDescriptor:gu,getPrototypeOf:$o,isExtensible:mu,ownKeys:Bo,preventExtensions:_u,set:Ou,setPrototypeOf:vu}=Reflect,{assign:yu,create:bu}=Object,Qo=$o(Int8Array),Io=(i,e)=>{const{get:t,set:r,value:s}=i;return t&&(i.get=e(t)),r&&(i.set=e(r)),s&&(i.value=e(s)),i},qo=i=>e=>du(e,(t,r)=>{switch(t){case Os:return Me(Os,r);case ft:if(r===globalThis)return Me(t,null);case wt:case Se:return i(t,r);case"boolean":case vs:case Ki:case xo:case"bigint":return Me(t,r);case er:if(Rs.has(r))return Me(t,Rs.get(r))}throw new Error(`Unable to handle this ${t} type`)}),Rs=new Map(Bo(Symbol).filter(i=>typeof Symbol[i]===er).map(i=>[Symbol[i],i])),Wo=i=>{for(const[e,t]of Rs)if(t===i)return e},jo=i=>i,wu=((i,e)=>{const t=e&&new WeakMap;if(e){const{addEventListener:s}=EventTarget.prototype;Fo(EventTarget.prototype,"addEventListener",{value(n,a,...o){return o.at(0)?.invoke&&(t.has(this)||t.set(this,new Map),t.get(this).set(n,[].concat(o[0].invoke)),delete o[0].invoke),s.call(this,n,a,...o)}})}const r=e&&(s=>{const{currentTarget:n,target:a,type:o}=s;for(const c of t.get(n||a)?.get(o)||[])s[c]()});return function(s,n,a,...o){let c=0,l=this?.transform||jo;const h=new Map,u=new Map,{[a]:f}=s,m=o.length?yu(bu(globalThis),...o):globalThis,d=qo((O,v)=>{if(!h.has(v)){let S;for(;u.has(S=c++););h.set(v,S),u.set(S,O===Se?v:l(v))}return Me(O,h.get(v))}),p=O=>{f(or,Me(Ki,O))},g=(O,v)=>{switch(O){case ft:if(v==null)return m;case wt:if(typeof v===vs)return u.get(v);if(!(v instanceof Qo))for(const S in v)v[S]=_(v[S]);return v;case Se:if(typeof v===Ki){if(!u.has(v)){const S=function(...T){return e&&T.at(0)instanceof Event&&r(...T),f(ei,Me(Se,v),d(this),T.map(d))};return u.set(v,new WeakRef(S)),Mo(v,p,{return:S,token:!1})}return u.get(v).deref()}return u.get(v);case er:return Wo(v)}return v},_=O=>Ro(O,g),y={[ei]:(O,v,S)=>d(O.apply(v,S)),[tr]:(O,v)=>d(new O(...v)),[ir]:(O,v,S)=>d(Fo(O,v,S)),[ys]:(O,v)=>d(fu(O,v)),[ws]:O=>d($o(O)),[rr]:(O,v)=>d(O[v]),[bs]:(O,v)=>{const S=gu(O,v);return S?Me(ft,Io(S,d)):Me(xo,S)},[sr]:(O,v)=>d(v in O),[Ds]:O=>d(mu(O)),[Cs]:O=>Me(wt,Bo(O).map(d)),[xs]:O=>d(_u(O)),[nr]:(O,v,S)=>d(Ou(O,v,S)),[Ss]:(O,v)=>d(vu(O,v)),[or](O){h.delete(u.get(O)),u.delete(O)}};return s[n]=(O,v,...S)=>{switch(O){case ei:S[0]=_(S[0]),S[1]=S[1].map(_);break;case tr:S[0]=S[0].map(_);break;case ir:{const[T,k]=S;S[0]=_(T);const{get:b,set:D,value:E}=k;b&&(k.get=_(b)),D&&(k.set=_(D)),E&&(k.value=_(E));break}default:S=S.map(_)}return y[O](_(v),...S)},{proxy:s,[i.toLowerCase()]:m,[`is${i}Proxy`]:()=>!1}}})("Window",!0),Du=(i=>{let e=0;const t=new Map,r=new Map,s=Symbol();return function(n,a,o){const c=this?.transform||jo,{[a]:l}=n,h=new Map,u=y=>{h.delete(y),l(or,f(y))},f=qo((y,O)=>{if(s in O)return Lo(O[s]);if(y===Se){if(O=c(O),!r.has(O)){let v;for(;r.has(v=String(e++)););t.set(O,v),r.set(v,O)}return Me(y,t.get(O))}if(!(O instanceof Qo)){y!==ft&&y!==wt||(O=c(O));for(const v in O)O[v]=f(O[v])}return Me(y,O)}),m=(y,O,v)=>{if(!h.has(v)){const S=O===Se?(k=>hu.bind(k))(y):y,T=new Proxy(S,g);return h.set(v,new WeakRef(T)),Mo(v,u,{return:T,token:!1})}return h.get(v).deref()},d=y=>Ro(y,(O,v)=>{switch(O){case ft:if(v===null)return globalThis;case wt:return typeof v===vs?m(y,O,v):v;case Se:return typeof v===Ki?r.get(v):m(y,O,v);case er:return Wo(v)}return v}),p=(y,O,...v)=>d(l(y,Lo(O),...v)),g={[ei]:(y,O,v)=>p(ei,y,f(O),v.map(f)),[tr]:(y,O)=>p(tr,y,O.map(f)),[ir]:(y,O,v)=>{const{get:S,set:T,value:k}=v;return typeof S===Se&&(v.get=f(S)),typeof T===Se&&(v.set=f(T)),typeof k===Se&&(v.value=f(k)),p(ir,y,f(O),v)},[ys]:(y,O)=>p(ys,y,f(O)),[ws]:y=>p(ws,y),[rr]:(y,O)=>O===s?y:p(rr,y,f(O)),[bs]:(y,O)=>{const v=p(bs,y,f(O));return v&&Io(v,d)},[sr]:(y,O)=>O===s||p(sr,y,f(O)),[Ds]:y=>p(Ds,y),[Cs]:y=>p(Cs,y).map(d),[xs]:y=>p(xs,y),[nr]:(y,O,v)=>p(nr,y,f(O),f(v)),[Ss]:(y,O)=>p(Ss,y,f(O))};n[o]=(y,O,v,S)=>{switch(y){case ei:return d(O).apply(d(v),S.map(d));case or:{const T=d(O);t.delete(r.get(T)),r.delete(T)}}};const _=new Proxy(Me(ft,null),g);return{[i.toLowerCase()]:_,[`is${i}Proxy`]:y=>typeof y===ft&&!!y&&s in y,proxy:n}}})("Window"),Cu=typeof Worker===Se?Worker:class{},As=new WeakMap,zo=(i,...e)=>{const t=Ls(i,...e);if(!As.has(t)){const r=i instanceof Cu?wu:Du;As.set(t,r.call(e.at(0),t,eu,tu))}return As.get(t)};zo.transfer=Ls.transfer;const Xo={},No=function(i,e,t){if(!e||e.length===0)return i();const r=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=function(c,l){return new URL(c,l).href}(s,t),s in Xo)return;Xo[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(t)for(let c=r.length-1;c>=0;c--){const l=r[c];if(l.href===s&&(!n||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const o=document.createElement("link");return o.rel=n?"stylesheet":"modulepreload",n||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),n?new Promise((c,l)=>{o.addEventListener("load",c),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))}):void 0})).then(()=>i()).catch(s=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=s,window.dispatchEvent(n),!n.defaultPrevented)throw s})};Promise.withResolvers||(Promise.withResolvers=function(){var i,e,t=new this(function(r,s){i=r,e=s});return{resolve:i,reject:e,promise:t}});const Uo=i=>i.arrayBuffer(),xu=i=>i.json(),Ms=i=>i.text(),Su={object(...i){return this.string(function(e){for(var t=e[0],r=1,s=arguments.length;r<s;r++)t+=arguments[r]+e[r];return t}(...i))},string(i){for(const e of i.split(/[\r\n]+/))if(e.trim().length){/^(\s+)/.test(e)&&(i=i.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return i}},{replace:Tu}="",Eu=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,Pu={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},ku=i=>Pu[i],ot=(i,...e)=>Su[typeof i](i,...e),Lu=i=>Tu.call(i,Eu,ku),{isArray:Ru}=Array,{assign:ar,create:Fs,defineProperties:Au,defineProperty:cr,entries:xm}=Object,{all:lr,resolve:Yo}=new Proxy(Promise,{get:(i,e)=>i[e].bind(i)}),Vo=(i,e=location.href)=>new URL(i,e.replace(/^blob:/,"")).href;let Mu=0;const Go=(i,e)=>({id:i.id||(i.id=`${e}-w${Mu++}`),tag:i.tagName}),Ho=(i,e,t,r=!1,s=CustomEvent)=>{i.dispatchEvent(new s(`${e}:${t}`,{bubbles:!0,detail:{worker:r}}))},Fu=(i,e,t,r)=>({type:e,config:t,interpreter:r,io:Dt.get(r),run:(s,...n)=>i.run(r,s,...n),runAsync:(s,...n)=>i.runAsync(r,s,...n),runEvent:(...s)=>i.runEvent(r,...s)}),$u=(i,e)=>(t,r)=>{const s=i[e].bind(i);i[e]=(n,a,...o)=>s(n,`${r?t:a}
${r?a:t}`,...o)},Dt=new WeakMap,$s=i=>{const e=i||console,t={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...r)=>t.stderr(...r),stdout:(...r)=>t.stdout(...r),async get(r){const s=await r;return Dt.set(s,t),s}}},Zo=({FS:i,PATH:e,PATH_FS:t},r,s)=>{const n=t.resolve(r);return i.mkdirTree(e.dirname(n)),i.writeFile(n,new Uint8Array(s),{canOwn:!0})},Bu=i=>{const e=i.split("/");return e.pop(),e.join("/")},Qu=(i,e)=>{const t=[];for(const r of e.split("/"))r!=="."&&(t.push(r),r&&i.mkdir(t.join("/")))},Iu=(i,e)=>{const t=[];for(const r of e.split("/"))switch(r){case"":case".":break;case"..":t.pop();break;default:t.push(r)}return[i.cwd()].concat(t).join("/").replace(/^\/+/,"/")},Bs=i=>{const e=i.map(t=>t.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(t=>t!==""&&t!==".").join("/");return i[0].startsWith("/")?`/${e}`:e},Jo=(i,e)=>fetch(Vo(e,Ko.get(i))),Ko=new WeakMap,hr=(i,e,t)=>lr((r=>{for(const{files:s,to_file:n,from:a=""}of r){if(s!==void 0&&n!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(s===void 0&&n===void 0&&a.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${a}, please supply 'to_file' parameter.`)}return r.flatMap(({from:s="",to_folder:n=".",to_file:a,files:o})=>{if(Ru(o))return o.map(l=>({url:Bs([s,l]),path:Bs([n,l])}));const c=a||s.slice(1+s.lastIndexOf("/"));return[{url:s,path:Bs([n,c])}]})})(t).map(({url:r,path:s})=>Jo(t,r).then(Uo).then(n=>i.writeFile(e,s,n)))),qu=(i,e)=>e.endsWith("/")?`${e}${i.split("/").pop()}`:e,Qs=(i,e)=>i.replace(/\{.+?\}/g,t=>{if(!e.has(t))throw new SyntaxError(`Invalid template: ${t}`);return e.get(t)}),ur=(i,e,t)=>lr((r=>{const s=new Map,n=new Set,a=[];for(const[o,c]of Object.entries(r))if(/^\{.+\}$/.test(o)){if(s.has(o))throw new SyntaxError(`Duplicated template: ${o}`);s.set(o,Qs(c,s))}else{const l=Qs(o,s),h=qu(l,Qs(c||"./",s));if(n.has(h))throw new SyntaxError(`Duplicated destination: ${h}`);n.add(h),a.push({url:l,path:h})}return a})(t).map(({url:r,path:s})=>Jo(t,r).then(Uo).then(n=>i.writeFile(e,s,n)))),ea=(i,e,t)=>{i.registerJsModule(e,t)},ta=(i,e,...t)=>{try{return i.runPython(ot(e),...t)}catch(r){Dt.get(i).stderr(r)}},ia=async(i,e,...t)=>{try{return await i.runPythonAsync(ot(e),...t)}catch(r){Dt.get(i).stderr(r)}},ra=async(i,e,t)=>{const[r,...s]=e.split(".");let n,a=i.globals.get(r);for(const o of s)[n,a]=[a,a[o]];try{await a.call(n,t)}catch(o){Dt.get(i).stderr(o)}},Wu={type:"micropython",module:(i="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${i}/micropython.mjs`,async engine({loadMicroPython:i},e,t){const{stderr:r,stdout:s,get:n}=$s();t=t.replace(/\.m?js$/,".wasm");const a=await n(i({stderr:r,stdout:s,url:t}));return e.files&&await ur(this,a,e.files),e.fetch&&await hr(this,a,e.fetch),a},registerJSModule:ea,run:ta,runAsync:ia,runEvent:ra,transform:(i,e)=>e,writeFile:({FS:i,_module:{PATH:e,PATH_FS:t}},r,s)=>Zo({FS:i,PATH:e,PATH_FS:t},r,s)},ju={dict_converter:Object.fromEntries},zu={type:"pyodide",module:(i="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${i}/full/pyodide.mjs`,async engine({loadPyodide:i},e,t){const{stderr:r,stdout:s,get:n}=$s(),a=t.slice(0,t.lastIndexOf("/")),o=await n(i({stderr:r,stdout:s,indexURL:a}));if(e.files&&await ur(this,o,e.files),e.fetch&&await hr(this,o,e.fetch),e.packages){await o.loadPackage("micropip");const c=await o.pyimport("micropip");await c.install(e.packages,{keep_going:!0}),c.destroy()}return o},registerJSModule:ea,run:ta,runAsync:ia,runEvent:ra,transform:(i,e)=>e instanceof i.ffi.PyProxy?e.toJs(ju):e,writeFile:({FS:i,PATH:e,_module:{PATH_FS:t}},r,s)=>Zo({FS:i,PATH:e,PATH_FS:t},r,s)},Is="ruby-wasm-wasi",sa=Is.replace(/\W+/g,"_"),Xu={type:Is,experimental:!0,module:(i="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${i}/dist/browser.esm.js`,async engine({DefaultRubyVM:i},e,t){const r=await fetch(`${t.slice(0,t.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await r.arrayBuffer()),{vm:n}=await i(s);return e.files&&await ur(this,n,e.files),e.fetch&&await hr(this,n,e.fetch),n},registerJSModule(i,e,t){const r=`__module_${sa}_${e}`;globalThis[r]=t,this.run(i,`require "js";$${e}=JS.global[:${r}]`),delete globalThis[r]},run:(i,e,...t)=>i.eval(ot(e),...t),runAsync:(i,e,...t)=>i.evalAsync(ot(e),...t),async runEvent(i,e,t){if(/^xworker\.(on\w+)$/.test(e)){const{$1:r}=RegExp,s=`__module_${sa}_event`;globalThis[s]=t,this.run(i,`require "js";$xworker.call("${r}",JS.global[:${s}])`),delete globalThis[s]}else await this.run(i,`method(:${e})`).call(e,i.wrap(t))},transform:(i,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${Is}`)}},Nu={type:"wasmoon",module:(i="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${i}/+esm`,async engine({LuaFactory:i,LuaLibraries:e},t){const{stderr:r,stdout:s,get:n}=$s(),a=await n(new i().createEngine());return a.global.getTable(e.Base,o=>{a.global.setField(o,"print",s),a.global.setField(o,"printErr",r)}),t.files&&await ur(this,a,t.files),t.fetch&&await hr(this,a,t.fetch),a},registerJSModule:(i,e,t)=>{i.global.set(e,t)},run:(i,e,...t)=>{try{return i.doStringSync(ot(e),...t)}catch(r){Dt.get(i).stderr(r)}},runAsync:async(i,e,...t)=>{try{return await i.doString(ot(e),...t)}catch(r){Dt.get(i).stderr(r)}},runEvent:async(i,e,t)=>{const[r,...s]=e.split(".");let n,a=i.global.get(r);for(const o of s)[n,a]=[a,a[o]];try{await a.call(n,t)}catch(o){Dt.get(i).stderr(o)}},transform:(i,e)=>e,writeFile:({cmodule:{module:{FS:i}}},e,t)=>((r,s,n)=>(Qu(r,Bu(s)),s=Iu(r,s),r.writeFile(s,new Uint8Array(n),{canOwn:!0})))(i,e,t)},Je=new Map,na=new Map,qs=[],Ft=[],Uu=new Proxy(new Map,{get(i,e){if(!i.has(e)){const[n,...a]=e.split("@"),o=Je.get(n),c=/^(?:\.?\.?\/|https?:\/\/)/i.test(a)?a.join("@"):o.module(...a);i.set(e,{url:c,module:No(()=>import(c).then(async l=>(await l.__tla,l)),__vite__mapDeps([]),import.meta.url),engine:o.engine.bind(o)})}const{url:t,module:r,engine:s}=i.get(e);return(n,a)=>r.then(o=>{na.set(e,n);for(const c of["files","fetch"]){const l=n?.[c];l&&Ko.set(l,a)}return s(o,n,t)})}}),Yu=i=>{for(const e of[].concat(i.type))Je.set(e,i),qs.push(`script[type="${e}"]`),Ft.push(`${e}-`)};for(const i of[Wu,zu,Xu,Nu])Yu(i);const oa=async i=>(await No(()=>import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([]),import.meta.url)).parse(i),aa=i=>{let e=typeof i;return e==="string"&&/\.(json|toml|txt)$/.test(i)?e=RegExp.$1:i="./config.txt",[Vo(i),e]},Vu=(i,e,t={})=>{if(e){const[r,s]=aa(e);if(s==="json")t=fetch(r).then(xu);else if(s==="toml")t=fetch(r).then(Ms).then(oa);else if(s==="string")try{t=JSON.parse(e)}catch{t=oa(e)}else s==="object"&&e&&(t=e);e=r}return Yo(t).then(r=>Uu[i](r,e))},ca=(i,e="")=>`${i}@${e}`.replace(/@$/,""),dr="BeforeRun",pr="AfterRun",Ws=[`code${dr}`,`code${dr}Async`,`code${pr}`,`code${pr}Async`],fr=["onWorker","onReady",`on${dr}`,`on${dr}Async`,`on${pr}`,`on${pr}Async`];function Gu(i,e){const{run:t,runAsync:r}=Je.get(this.type);return{...i,run:t.bind(this,e),runAsync:r.bind(this,e)}}const Hu=(i,e,t,r,s,n)=>{if(s||n){const a=Gu.bind(i,e),o=r?"runAsync":"run",c=i[o];i[o]=r?async function(l,h,...u){s&&await s.call(this,a(l),t);const f=await c.call(this,l,h,...u);return n&&await n.call(this,a(l),t),f}:function(l,h,...u){s&&s.call(this,a(l),t);const f=c.call(this,l,h,...u);return n&&n.call(this,a(l),t),f}}};let wi=class{constructor(i,e={}){const{main:t,worker:r}=e;this.interpreter=i,this.onWorker=t?.onWorker;for(const s of fr.slice(1))this[s]=r?.[s];for(const s of Ws)this[s]=r?.[s]}toJSON(){const i={};for(const e of fr.slice(1))this[e]&&(i[e]=String(this[e]));for(const e of Ws)this[e]&&(i[e]=ot(this[e]()));return i}};const js=(...i)=>function(e,t){const r=new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="4ee55850-17cb-4a85-a071-03fe2aa108bd",d="M"+p,y="T"+p,h="array",g="function",w="null",m="number",b="object",v="string",$="symbol",S="undefined",E="apply",A="construct",P="defineProperty",k="deleteProperty",x="get",M="getOwnPropertyDescriptor",j="getPrototypeOf",T="has",_="isExtensible",O="ownKeys",W="preventExtensions",F="set",R="setPrototypeOf",B="delete";var J=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:I,Map:L,SharedArrayBuffer:D,Uint16Array:C}=globalThis,{BYTES_PER_ELEMENT:H}=I,{BYTES_PER_ELEMENT:N}=C,{isArray:U}=Array,{notify:z,wait:q,waitAsync:K}=Atomics,Y=new WeakSet,G=new WeakMap,V={value:{then:e=>e()}};let Q=0;const X=(e,{parse:t=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:s}=JSON)=>{if(!G.has(e)){const o=(t,...r)=>e.postMessage({[p]:r},{transfer:t}),a=typeof s===g?s:s?.handler,i=s?.delay||42,c=new TextDecoder("utf-16"),l=(e,t)=>e?(K||J)(t,0):(a?((e,t,r)=>{for(;"timed-out"===q(e,0,0,t);)r()})(t,i,a):q(t,0),V);let u=!1;G.set(e,new Proxy(new L,{[T]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[x]:(r,s)=>"then"===s?null:(...r)=>{const a=Q++;let i=new I(new D(2*H)),f=[];Y.has(r.at(-1)||f)&&Y.delete(f=r.pop()),o(f,a,i,s,n?r.map(n):r);const p=e!==globalThis;let d=0;return u&&p&&(d=setTimeout(console.warn,1e3,`\u{1F480}\u{1F512} - Possible deadlock if proxy.${s}(...args) is awaited`)),l(p,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const r=N*e;return i=new I(new D(r+r%H)),o([],a,i),l(p,i).value.then((()=>t(c.decode(new C(i.buffer).slice(0,e)))))}))},[F](t,s,o){const a=typeof o;if(a!==g)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new L;e.addEventListener("message",(async e=>{const o=e.data?.[p];if(U(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=r(n?n(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new C(i.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}if(z(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return G.get(e)};X.transfer=(...e)=>(Y.add(e),e);const{isArray:Z}=Array,ee=(e,t)=>t,te=e=>typeof e===g?(e=>e())(e):e;function re(){return this}const ne=(e,t)=>e===h?[t]:{t:e,v:t},se=(e,t=ee)=>{let r=typeof e,n=e;return r===b&&(Z(e)?(r=h,n=e.at(0)):({t:r,v:n}=e)),t(r,n)},oe=(e,t)=>e===g?t:ne(e,t),ae=(e,t=oe)=>{const r=null===e?w:typeof e;return t(r===b&&Z(e)?h:r,e)},ie=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),ce=Object.create(null),le=(e,t,{debug:r,return:n,token:s=e}=ce)=>{const o=n||new Proxy(e,ce),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),ie.register(...a),o},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:pe,getPrototypeOf:de,isExtensible:ye,ownKeys:he,preventExtensions:ge,set:we,setPrototypeOf:me}=Reflect,{assign:be,create:ve}=Object,$e=de(Int8Array),Se=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Ee=e=>t=>ae(t,((t,r)=>{switch(t){case w:return ne(w,r);case b:if(r===globalThis)return ne(t,null);case h:case g:return e(t,r);case"boolean":case m:case v:case S:case"bigint":return ne(t,r);case $:if(Ae.has(r))return ne(t,Ae.get(r))}throw new Error(`Unable to handle this ${t} type`)})),Ae=new Map(he(Symbol).filter((e=>typeof Symbol[e]===$)).map((e=>[Symbol[e],e]))),Pe=e=>{for(const[t,r]of Ae)if(r===e)return t},ke=e=>e;var xe=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,s,o,...a){let i=0,c=this?.transform||ke;const l=new Map,u=new Map,{[o]:f}=r,p=a.length?be(ve(globalThis),...a):globalThis,d=Ee(((e,t)=>{if(!l.has(t)){let r;for(;u.has(r=i++););l.set(t,r),u.set(r,e===g?t:c(t))}return ne(e,l.get(t))})),y=e=>{f(B,ne(v,e))},w=(e,r)=>{switch(e){case b:if(null==r)return p;case h:if(typeof r===m)return u.get(r);if(!(r instanceof $e))for(const e in r)r[e]=J(r[e]);return r;case g:if(typeof r===v){if(!u.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),f(E,ne(g,r),d(this),e.map(d))};return u.set(r,new WeakRef(e)),le(r,y,{return:e,token:!1})}return u.get(r).deref()}return u.get(r);case $:return Pe(r)}return r},J=e=>se(e,w),I={[E]:(e,t,r)=>d(e.apply(t,r)),[A]:(e,t)=>d(new e(...t)),[P]:(e,t,r)=>d(ue(e,t,r)),[k]:(e,t)=>d(fe(e,t)),[j]:e=>d(de(e)),[x]:(e,t)=>d(e[t]),[M]:(e,t)=>{const r=pe(e,t);return r?ne(b,Se(r,d)):ne(S,r)},[T]:(e,t)=>d(t in e),[_]:e=>d(ye(e)),[O]:e=>ne(h,he(e).map(d)),[W]:e=>d(ge(e)),[F]:(e,t,r)=>d(we(e,t,r)),[R]:(e,t)=>d(me(e,t)),[B](e){l.delete(u.get(e)),u.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case E:r[0]=J(r[0]),r[1]=r[1].map(J);break;case A:r[0]=r[0].map(J);break;case P:{const[e,t]=r;r[0]=J(e);const{get:n,set:s,value:o}=t;n&&(t.get=J(n)),s&&(t.set=J(s)),o&&(t.value=J(o));break}default:r=r.map(J)}return I[e](J(t),...r)},{proxy:r,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Me=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||ke,{[a]:l}=o,u=new Map,f=e=>{u.delete(e),l(B,p(e))},p=Ee(((e,o)=>{if(s in o)return te(o[s]);if(e===g){if(o=c(o),!n.has(o)){let e;for(;n.has(e=String(t++)););r.set(o,e),n.set(e,o)}return ne(e,r.get(o))}if(!(o instanceof $e)){e!==b&&e!==h||(o=c(o));for(const e in o)o[e]=p(o[e])}return ne(e,o)})),d=(e,t,r)=>{if(!u.has(r)){const n=t===g?(e=>re.bind(e))(e):e,s=new Proxy(n,S);return u.set(r,new WeakRef(s)),le(r,f,{return:s,token:!1})}return u.get(r).deref()},y=e=>se(e,((t,r)=>{switch(t){case b:if(null===r)return globalThis;case h:return typeof r===m?d(e,t,r):r;case g:return typeof r===v?n.get(r):d(e,t,r);case $:return Pe(r)}return r})),w=(e,t,...r)=>y(l(e,te(t),...r)),S={[E]:(e,t,r)=>w(E,e,p(t),r.map(p)),[A]:(e,t)=>w(A,e,t.map(p)),[P]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===g&&(r.get=p(n)),typeof s===g&&(r.set=p(s)),typeof o===g&&(r.value=p(o)),w(P,e,p(t),r)},[k]:(e,t)=>w(k,e,p(t)),[j]:e=>w(j,e),[x]:(e,t)=>t===s?e:w(x,e,p(t)),[M]:(e,t)=>{const r=w(M,e,p(t));return r&&Se(r,y)},[T]:(e,t)=>t===s||w(T,e,p(t)),[_]:e=>w(_,e),[O]:e=>w(O,e).map(y),[W]:e=>w(W,e),[F]:(e,t,r)=>w(F,e,p(t),p(r)),[R]:(e,t)=>w(R,e,p(t))};o[i]=(e,t,s,o)=>{switch(e){case E:return y(t).apply(y(s),o.map(y));case B:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const J=new Proxy(ne(b,null),S);return{[e.toLowerCase()]:J,[`is${e}Proxy`]:e=>typeof e===b&&!!e&&s in e,proxy:o}}})("Window"),je=typeof Worker===g?Worker:class{};const Te=new WeakMap,_e=(e,...t)=>{const r=X(e,...t);if(!Te.has(r)){const n=e instanceof je?xe:Me;Te.set(r,n.call(t.at(0),r,d,y))}return Te.get(r)};_e.transfer=X.transfer;const Oe={object(...e){return this.string(function(e){for(var t=e[0],r=1,n=arguments.length;r<n;r++)t+=arguments[r]+e[r];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const We=e=>e.arrayBuffer(),Fe=e=>e.json(),Re=e=>e.text(),Be=new WeakMap,Je=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Be.set(t,r),t}}},Ie=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Le=e=>{const t=e.split("/");return t.pop(),t.join("/")},De=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Ce=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},He=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Ne=(e,t)=>fetch(st(t,Ue.get(e))),Ue=new WeakMap,ze=(e,t,r)=>rt((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(Ve(n))return n.map((r=>({url:He([e,r]),path:He([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:He([t,s])}]}))})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),qe=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Ke=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),Ye=(e,t,r)=>rt((e=>{const t=new Map,r=new Set,n=[];for(const[s,o]of Object.entries(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Ke(o,t))}else{const e=Ke(s,t),a=qe(e,Ke(o||"./",t));if(r.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);r.add(a),n.push({url:e,path:a})}return n})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),Ge=(e,...t)=>Oe[typeof e](e,...t),{isArray:Ve}=Array,{assign:Qe,create:Xe,defineProperties:Ze,defineProperty:et,entries:tt}=Object,{all:rt,resolve:nt}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),st=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,ot=(e,t,r,n=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${r}`,{bubbles:!0,detail:{worker:n}}))},at=e=>Function(`\'use strict\';return (${e})`)(),it=(e,t,r)=>{e.registerJsModule(t,r)},ct=(e,t,...r)=>{try{return e.runPython(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},lt=async(e,t,...r)=>{try{return await e.runPythonAsync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},ut=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}};var ft={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=Je();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.files&&await Ye(this,a,t.files),t.fetch&&await ze(this,a,t.fetch),a},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const pt={dict_converter:Object.fromEntries};var dt={type:"pyodide",module:(e="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=Je(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.files&&await Ye(this,i,t.files),t.fetch&&await ze(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(pt):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const yt="ruby-wasm-wasi",ht=yt.replace(/\\W+/g,"_");var gt={type:yt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.files&&await Ye(this,o,t.files),t.fetch&&await ze(this,o,t.fetch),o},registerJSModule(e,t,r){const n=`__module_${ht}_${t}`;globalThis[n]=r,this.run(e,`require "js";$${t}=JS.global[:${n}]`),delete globalThis[n]},run:(e,t,...r)=>e.eval(Ge(t),...r),runAsync:(e,t,...r)=>e.evalAsync(Ge(t),...r),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${ht}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${yt}`)}};var wt={type:"wasmoon",module:(e="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=Je(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.files&&await Ye(this,a,r.files),r.fetch&&await ze(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{e.global.set(t,r)},run:(e,t,...r)=>{try{return e.doStringSync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runAsync:async(e,t,...r)=>{try{return await e.doString(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(De(e,Le(t)),t=Ce(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const mt=new Map,bt=new Map,vt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=mt.get(r),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{bt.set(t,e);for(const t of["files","fetch"]){const r=e?.[t];r&&Ue.set(r,o)}return s(n,e,r)}))}}),$t=e=>{for(const t of[].concat(e.type))mt.set(t,e)};for(const e of[ft,dt,gt,wt])$t(e);const St=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Et=(e,t,r={})=>{if(t){const[e,n]=(e=>{let t=typeof e;return"string"===t&&/\\.(json|toml|txt)$/.test(e)?t=RegExp.$1:e="./config.txt",[st(e),t]})(t);if("json"===n)r=fetch(e).then(Fe);else if("toml"===n)r=fetch(e).then(Re).then(St);else if("string"===n)try{r=JSON.parse(t)}catch(e){r=St(t)}else"object"===n&&t&&(r=t);t=e}return nt(r).then((r=>vt[e](r,t)))},At="BeforeRun",Pt="AfterRun",kt=[`code${At}`,`code${At}Async`,`code${Pt}`,`code${Pt}Async`],xt=["onWorker","onReady",`on${At}`,`on${At}Async`,`on${Pt}`,`on${Pt}Async`];function Mt(e,t){const{run:r,runAsync:n}=mt.get(this.type);return{...e,run:r.bind(this,t),runAsync:n.bind(this,t)}}const jt=(e,t,r,n,s,o)=>{if(s||o){const a=Mt.bind(e,t),i=n?"runAsync":"run",c=e[i];e[i]=n?async function(e,t,...n){s&&await s.call(this,a(e),r);const i=await c.call(this,e,t,...n);return o&&await o.call(this,a(e),r),i}:function(e,t,...n){s&&s.call(this,a(e),r);const i=c.call(this,e,t,...n);return o&&o.call(this,a(e),r),i}}};try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let Tt,_t,Ot;const Wt=(e,t)=>{addEventListener(e,t||(async t=>{try{await Tt,_t(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Ft,stringify:Rt}=f,{proxy:Bt,window:Jt,isWindowProxy:It}=_e(self,{parse:Ft,stringify:Rt,transform:e=>Ot?Ot(e):e}),Lt={sync:Bt,window:Jt,isWindowProxy:It,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Wt("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{Tt=(async()=>{try{const{id:s,tag:o,type:a,custom:i,version:c,config:l,async:u}=e,f=await Et(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(a,c),t,l),p=Xe(mt.get(a)),d=((e,t,r,n)=>({type:t,config:r,interpreter:n,io:Be.get(n),run:(t,...r)=>e.run(n,t,...r),runAsync:(t,...r)=>e.runAsync(n,t,...r),runEvent:(...t)=>e.runEvent(n,...t)}))(p,i||a,l,f);let y="run";if(u&&(y+="Async"),n){const e=((e,t)=>(r,n)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${n?r:t}\\n${n?t:r}`,...o)})(p,y);let t,r,s="",o="";for(const e of kt){const t=n[e];if(t){const r=e.endsWith("Async");(r&&u||!r&&!u)&&(e.startsWith("codeBefore")?s=t:o=t)}}o&&e(o,!1),s&&e(s,!0);for(const e of xt.slice(2)){const s=n[e];if(s){const n=e.endsWith("Async");if(n&&u||!n&&!u){const n=at(s);e.startsWith("onBefore")?t=n:r=n}}}jt(p,d,Lt,u,t,r)}const{CustomEvent:h,document:g}=Jt,w=s&&g.getElementById(s)||null,m=e=>ot(w,i||a,e,!0,h);let b="";return p.registerJSModule(f,"polyscript",{xworker:Lt,get target(){return!b&&w&&("SCRIPT"===o?w.after(Qe(g.createElement(`script-${i||a}`),{id:b=`${s}-target`})):(b=s,w.replaceChildren(),w.style.display="block")),b}}),_t=p.runEvent.bind(p,f),Ot=p.transform.bind(p,f),w&&m("ready"),n?.onReady&&at(n?.onReady).call(p,Mt.call(p,d,f),Lt),await p[y](f,r),w&&m("done"),f}catch(e){postMessage(e)}})(),Wt("error"),Wt("message"),Wt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),{postMessage:s}=r,n=this instanceof wi;if(i.length){const[c,l]=i;(t=ar({},t||{type:c,version:l})).type||(t.type=c)}const[a]=aa(t.config),o=fetch(e).then(Ms).then(c=>{const l=n?this.toJSON():void 0;s.call(r,{options:t,config:a,code:c,hooks:l})});return Au(r,{postMessage:{value:(c,...l)=>o.then(()=>s.call(r,c,...l))},sync:{value:zo(r,Kh).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),r.addEventListener("message",c=>{const{data:l}=c;l instanceof Error&&(c.stopImmediatePropagation(),r.onerror(Fs(c,{type:{value:"error"},error:{value:l}})))}),n&&this.onWorker?.(this.interpreter,r),r},zs=js();class Zu extends nt{constructor(t,r,s={}){super();oe(this,"peersReady",new Map);oe(this,"workerInitializing",!1);oe(this,"running",!1);oe(this,"env",{});oe(this,"syncProxyPy");oe(this,"asyncProxyPy");oe(this,"exec",async t=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",t])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}});oe(this,"run_mpc",async t=>{this.emit("exec:init"),t.filename||(t.filename="<exec>");try{console.log("run_mpc",t),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",t])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}});oe(this,"fetch2",async t=>{console.log("fetching",t);let r=await fetch("./"+t),s=await r.arrayBuffer();return new Uint8Array(s)});oe(this,"fetch",async t=>{t.endsWith(".gz")&&(t+="ip"),console.log("js/fetch fetching",t);let r=await fetch(t),s=await r.arrayBuffer();return new Uint8Array(s)});oe(this,"getEnv",()=>this.env);oe(this,"readline",t=>{});oe(this,"display",t=>{this.emit("display",t)});oe(this,"displayError",t=>{this.emit("display:error",t)});oe(this,"onerror",t=>{console.warn("MPCRuntime.onerror"),console.warn(t.error),this.emit("error",t)});oe(this,"onmessageerror",t=>{console.warn("MPCRuntime.onmessageerror"),console.warn(t),this.emit("messageerror",t)});t.getEnv=this.getEnv.bind(this),this.syncProxyPy=t,this.asyncProxyPy=r,t.fetch=this.fetch.bind(this),r.onerror=n=>{console.warn("asyncProxyPy.onerror"),console.warn(n),this.emit("error",n)},r.onmessageerror=n=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(n),this.emit("messageerror",n)},r.onmessage=n=>{let a=n.data;if(!Array.isArray(a))return console.warn("asyncProxyPy.onmessage",a),void this.emit("display:error",`invalid message from worker 
`+JSON.stringify(a,null,2)+`
`);const[o,...c]=a;switch(o){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[l]=c;this.emit("display:stats",l);break;case"proxy:js:mpc:msg:ready":let[h,u]=c;u.getBuffer&&(u=u.getBuffer()),this.emit("send",{type:"ready",pid:h,payload:u});break;case"proxy:js:mpc:msg:runtime":let[f,m]=c;m.getBuffer&&(m=m.getBuffer()),this.emit("send",{type:"runtime",pid:f,payload:m});break;case"proxy:js:display":let[d]=c;this.display(d);break;case"proxy:js:display:error":let[p]=c;this.displayError(p+`
`)}},this.env=s}processReadyMessage(t,r){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",t,r])}processRuntimeMessage(t,r){try{let s;if(r&&r instanceof Uint8Array&&(s=[r.buffer]),s)return void this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",t,r],s);this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",t,r])}catch(s){console.warn("runtime:error"),console.warn("runtime:error",s),this.emit("error",new ErrorEvent("runtime:error",{error:s}))}}updateEnv(t={}){this.env={...this.env,...t},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}destroy(){console.log("destroying worker"),this.running=!1,this._close()}resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}setReadlineFn(t){this.readline=t,this.syncProxyPy.readline=t}}let Ju=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class Ku extends Zu{constructor(t){let r=Ju,s={packages:["mpyc-web"]};t?.startup&&t?.startup!=""&&(r=t.startup),t?.config&&t?.config!=""&&(s=t.config);let n=function(a,o,c){let l={async:!0,type:"pyodide",version:"0.24.1",config:o};return console.log("creating a new worker"),zs.call(new wi(null,c),a,l)}(r,s,{worker:{onReady:(a,o)=>{console.log("worker onReady/init"),a.io.stderr=c=>{typeof c!="string"&&(c=c.toString()),console.error(c),o.postMessage(["proxy:js:display:error",c])},a.io.stdout=c=>{o.postMessage(["proxy:js:display",c+`
`])},o.postMessage(["proxy:js:init"]),self.wrap=a,self.pyodide=a.interpreter,console.log(self.pyodide),self.runAsync=async(c,l)=>{try{return await a.interpreter.runPythonAsync(c,{filename:l})}catch(h){a.io.stderr(h)}},self.runAsync(`
                        import asyncio
                        import js
                        import sys
                        from startup import *
                    `,"startup.py")}}});n.onmessageerror=a=>{console.error("worker.onmessageerror"),console.error(a)},n.onerror=a=>{console.error("worker.onerror"),console.error(a)};super(n.sync,n,t?.env);oe(this,"worker");this.worker=n}_close(){this.worker.terminate()}type(){return"PyScript/Worker"}}const Xs=(i,e=document)=>[...e.querySelectorAll(i)],la=(i,e=document)=>{const t=new XPathEvaluator().createExpression(i).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),r=[];for(let s=0,{snapshotLength:n}=t;s<n;s++)r.push(t.snapshotItem(s));return r},ha=i=>{const{src:e,worker:t}=i.attributes;if(t){let{value:r}=t;if(r)throw new SyntaxError("Invalid worker attribute");if(r=e?.value,!r){if(e)throw new SyntaxError("Invalid worker attribute");if(i.childElementCount){const{innerHTML:s,localName:n,type:a}=i,o=a||n.replace(/-script$/,"");r=Lu(s),console.warn(`Deprecated: use <script type="${o}"> for an always safe content parsing:
`,r)}else r=i.textContent;return URL.createObjectURL(new Blob([ot(r)],{type:"text/plain"}))}return r}if(e&&i.textContent.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim())throw new SyntaxError("Invalid content")},ua=(i,e)=>{const t=(r=>{let s=r;for(;s.parentNode;)s=s.parentNode;return s})(i);return t.getElementById(e)||((r,s=document)=>s.querySelector(r))(e,t)},Di=new WeakMap,ed={get(){let i=Di.get(this);return i||(i=document.createElement(`${this.type}-script`),Di.set(this,i),mr(this)),i},set(i){typeof i=="string"?Di.set(this,ua(this,i)):(Di.set(this,i),mr(this))}},gr=new WeakMap,Ke=new Map,Ns=(i,e)=>{const t=i?.value;return t?e+t:""},da=(i,e,t,r,s,n=i)=>{if(!Ke.has(e)){const a={interpreter:Vu(t,s),queue:Yo(),XWorker:js(i,r)};Ke.set(e,a),Ke.has(i)||Ke.set(i,a),Ke.has(n)||Ke.set(n,a)}return Ke.get(e)},mr=async i=>{if(gr.has(i)){const{target:e}=i;e&&(i.closest("head")?document.body.append(e):i.after(e))}else{const{attributes:{async:e,config:t,env:r,target:s,version:n},src:a,type:o}=i,c=n?.value,l=ca(o,c);let h=Ns(t,"|");const u=Ns(r,"")||`${l}${h}`;h=h.slice(1);const f=ha(i);if(f){const g=new(js(o,c))(f,{...Go(i,o),async:!!e,config:h});return void gr.set(cr(i,"xworker",{value:g}),{xworker:g})}const m=Ns(s,""),d=da(o,u,l,c,h);gr.set(cr(i,"target",ed),d),m&&Di.set(i,ua(i,m));const p=a?fetch(a).then(Ms):i.textContent;d.queue=d.queue.then(()=>(async(g,_,y,O)=>{const{type:v}=g,S=Je.get(v);S.experimental&&console.warn(`The ${v} interpreter is experimental`);const[T,k]=await lr([gr.get(g).interpreter,_]);try{cr(document,"currentScript",{configurable:!0,get:()=>g}),S.registerJSModule(T,"polyscript",{XWorker:y}),Ho(g,v,"ready");const b=S[O?"runAsync":"run"](T,k),D=Ho.bind(null,g,v,"done");return O?b.then(D):D(),b}finally{delete document.currentScript}})(i,p,d.XWorker,!!e))}},pa=new Proxy(Fs(null),{get:(i,e)=>new Promise(queueMicrotask).then(()=>fa(e))}),fa=async i=>{if(Ke.has(i)){const{interpreter:t,queue:r}=Ke.get(i);return(await lr([t,r]))[0]}const e=Ke.size?`Available interpreters are: ${[...Ke.keys()].map(t=>`"${t}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${i}" was not found. ${e}`)},ga=async i=>{const{type:e,currentTarget:t}=i;if(Ft.length)for(let{name:r,value:s,ownerElement:n}of la(`./@*[${Ft.map(a=>`name()="${a}${e}"`).join(" or ")}]`,t)){r=r.slice(0,-(e.length+1));const a=await fa(n.getAttribute(`${r}-env`)||r);Je.get(r).runEvent(a,s,i)}},Us=i=>{if(Ft.length)for(let{name:e,ownerElement:t}of la(`.//@*[${Ft.map(r=>`starts-with(name(),"${r}")`).join(" or ")}]`,i)){const r=e.lastIndexOf("-"),s=e.slice(r+1);s!=="env"&&(t.addEventListener(s,ga),"disabled"in t&&!t.disabled&&(t.disabled=!0,pa[e.slice(0,r)].then(()=>{t.disabled=!1})))}},Ci=[],ma=new Map,xi=new Map,Ys=i=>{for(const e of Ci)if(i.matches(e)){const t=ma.get(e),r=_r.get(t),{resolve:s}=xi.get(t),{options:n,known:a}=r;if(!a.has(i)){a.add(i);const{interpreter:o,config:c,version:l,env:h,onerror:u,hooks:f}=n;let m;try{const y=ha(i);if(y){const O=zs.call(new wi(null,f),y,{...Go(i,t),version:l,type:o,custom:t,config:i.getAttribute("config")||c||{},async:i.hasAttribute("async")});return cr(i,"xworker",{value:O}),void s({type:t,xworker:O})}}catch(y){m=y}const d=ca(o,l),p=h||`${d}${c?`|${c}`:""}`,{interpreter:g,XWorker:_}=da(t,p,d,l,c,o);g.then(y=>{const O=Fs(Je.get(o)),v=new wi(y,f),S=function(...k){return _.apply(v,k)},T={...Fu(O,t,structuredClone(na.get(d)),y),XWorker:S};O.registerJSModule(y,"polyscript",{XWorker:S});for(const k of["Run","RunAsync"]){const b=$u(O,`r${k.slice(1)}`);let D,E,w="",x="";for(const L of Ws){const P=f?.main?.[L];P&&L.endsWith(k)&&(L.startsWith("codeBefore")?w=ot(P()):x=ot(P()))}x&&b(x,!1),w&&b(w,!0);for(let L=2;L<fr.length;L++){const P=fr[L],R=f?.main?.[P];R&&P.endsWith(k)&&(P.startsWith("onBefore")?D=R:E=R)}Hu(O,T,i,k.endsWith("Async"),D,E)}r.queue=r.queue.then(()=>(s(T),m&&u?.(m,i),f?.main?.onReady?.(T,i)))})}}},_r=new Map;let td=0;const _a=i=>(xi.has(i)||xi.set(i,Promise.withResolvers()),xi.get(i).promise),[{define:Sm,whenDefined:Tm,env:Em,Hook:Pm,XWorker:km},id]=((i,e,t=globalThis)=>{const r=Symbol.for(i),s=r in t;return[s?t[r]:Object.defineProperty(t,r,{value:e})[r],s]})("polyscript",{define:(i,e)=>{let t=i==null;if(t)i="_ps"+td++;else if(Je.has(i)||_r.has(i))throw new Error(`<script type="${i}"> already registered`);if(!Je.has(e?.interpreter))throw new Error("Unspecified interpreter");Je.set(i,Je.get(e.interpreter));const r=[`script[type="${i}"]`];if(_a(i),t){const{hooks:s}=e,n=s?.main?.onReady;e={...e,hooks:{...s,main:{...s?.main,onReady(a,o){Ci.splice(Ci.indexOf(i),1),Je.delete(i),_r.delete(i),xi.delete(i),o.remove(),n?.(a)}}}},document.head.append(ar(document.createElement("script"),{type:i}))}else r.push(`${i}-script`),Ft.push(`${i}-`);for(const s of r)ma.set(s,i);Ci.push(...r),_r.set(i,{options:ar({env:i},e),known:new WeakSet,queue:Promise.resolve()}),t||Us(document),Xs(r.join(",")).forEach(Ys)},whenDefined:_a,env:pa,Hook:wi,XWorker:zs});if(!id){const i=new MutationObserver(s=>{const n=qs.join(",");for(const{type:a,target:o,attributeName:c,addedNodes:l}of s)if(a!=="attributes")for(const h of l)h.nodeType===1&&(Us(h),n&&h.matches(n)?mr(h):e(n,h,!0));else{const h=c.lastIndexOf("-")+1;if(h){const u=c.slice(0,h);for(const f of Ft)if(u===f){const m=c.slice(h);if(m!=="env"){const d=o.hasAttribute(c)?"add":"remove";o[`${d}EventListener`](m,ga)}break}}}}),e=(s,n,a)=>{s&&Xs(s,n).forEach(mr),(s=Ci.join(","))&&(a&&Ys(n),Xs(s,n).forEach(Ys))},t=s=>(i.observe(s,{childList:!0,subtree:!0,attributes:!0}),s),{attachShadow:r}=Element.prototype;ar(Element.prototype,{attachShadow(s){return t(r.call(this,s))}}),queueMicrotask(()=>{Us(t(document)),e(qs.join(","),document,!1)})}class rd{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function(t){let r=0;for(const a of t)r+=a.byteLength;const s=new Uint8Array(r);let n=0;for(const a of t){const o=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);s.set(o,n),n+=a.byteLength}return s}(e).buffer}}function Oa(i){return new sd(i).unpack()}function va(i){const e=new nd;return e.pack(i),e.getBuffer()}class sd{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let r,s,n=0,a="";for(;n<e;)r=t[n],r<160?(s=r,n++):(192^r)<32?(s=(31&r)<<6|63&t[n+1],n+=2):(224^r)<16?(s=(15&r)<<12|(63&t[n+1])<<6|63&t[n+2],n+=3):(s=(7&r)<<18|(63&t[n+1])<<12|(63&t[n+2])<<6|63&t[n+3],n+=4),a+=String.fromCodePoint(s);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++)t[this.unpack()]=this.unpack();return t}unpack_float(){const e=this.unpack_uint32();return(e>>31?-1:1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),t=(e>>20&2047)-1023;return(e>>31?-1:1)*((1048575&e|1048576)*2**(t-20)+this.unpack_uint32()*2**(t-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class nd{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else{if(typeof e!="object")throw new Error(`Type "${typeof e}" not yet supported`);if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array)this.pack_array(e);else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(t!=Object&&!t.toString().startsWith("class"))throw new Error(`Type "${t.toString()}" not yet supported`);this.pack_object(e)}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(r)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}for(let r=0;r<t;r++)this.pack(e[r])}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=18446744073709552e3))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=e/2**r-1,n=Math.floor(s*2**52),a=2**32,o=t<<31|r+1023<<20|n/a&1048575,c=n%a;this._bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(c)}pack_object(e){const t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this._bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(t)}for(const r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}constructor(){this._bufferBuilder=new rd,this._textEncoder=new TextEncoder}}let ya=!0,ba=!0;function Or(i,e,t){const r=i.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function $t(i,e,t){if(!i.RTCPeerConnection)return;const r=i.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(a,o){if(a!==e)return s.apply(this,arguments);const c=l=>{const h=t(l);h&&(o.handleEvent?o.handleEvent(h):o(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,c),s.apply(this,[a,c])};const n=r.removeEventListener;r.removeEventListener=function(a,o){if(a!==e||!this._eventMap||!this._eventMap[e])return n.apply(this,arguments);if(!this._eventMap[e].has(o))return n.apply(this,arguments);const c=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,n.apply(this,[a,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function od(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(ya=i,i?"adapter.js logging disabled":"adapter.js logging enabled")}function ad(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(ba=!i,"adapter.js deprecation warnings "+(i?"disabled":"enabled"))}function wa(){if(typeof window=="object"){if(ya)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Vs(i,e){ba&&console.warn(i+" is deprecated, please use "+e+" instead.")}function Da(i){return Object.prototype.toString.call(i)==="[object Object]"}function Ca(i){return Da(i)?Object.keys(i).reduce(function(e,t){const r=Da(i[t]),s=r?Ca(i[t]):i[t],n=r&&!Object.keys(s).length;return s===void 0||n?e:Object.assign(e,{[t]:s})},{}):i}function Gs(i,e,t){e&&!t.has(e.id)&&(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Gs(i,i.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(s=>{Gs(i,i.get(s),t)})}))}function xa(i,e,t){const r=t?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const n=[];return i.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&n.push(a)}),n.forEach(a=>{i.forEach(o=>{o.type===r&&o.trackId===a.id&&Gs(i,o,s)})}),s}const Sa=wa;function Ta(i,e){const t=i&&i.navigator;if(!t.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const o={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const l=typeof a[c]=="object"?a[c]:{ideal:a[c]};l.exact!==void 0&&typeof l.exact=="number"&&(l.min=l.max=l.exact);const h=function(u,f){return u?u+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(l.ideal!==void 0){o.optional=o.optional||[];let u={};typeof l.ideal=="number"?(u[h("min",c)]=l.ideal,o.optional.push(u),u={},u[h("max",c)]=l.ideal,o.optional.push(u)):(u[h("",c)]=l.ideal,o.optional.push(u))}l.exact!==void 0&&typeof l.exact!="number"?(o.mandatory=o.mandatory||{},o.mandatory[h("",c)]=l.exact):["min","max"].forEach(u=>{l[u]!==void 0&&(o.mandatory=o.mandatory||{},o.mandatory[h(u,c)]=l[u])})}),a.advanced&&(o.optional=(o.optional||[]).concat(a.advanced)),o},s=function(a,o){if(e.version>=61)return o(a);if((a=JSON.parse(JSON.stringify(a)))&&typeof a.audio=="object"){const c=function(l,h,u){h in l&&!(u in l)&&(l[u]=l[h],delete l[h])};c((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const l=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){let h;if(delete a.video.facingMode,c.exact==="environment"||c.ideal==="environment"?h=["back","rear"]:c.exact!=="user"&&c.ideal!=="user"||(h=["front"]),h)return t.mediaDevices.enumerateDevices().then(u=>{let f=(u=u.filter(m=>m.kind==="videoinput")).find(m=>h.some(d=>m.label.toLowerCase().includes(d)));return!f&&u.length&&h.includes("back")&&(f=u[u.length-1]),f&&(a.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),Sa("chrome: "+JSON.stringify(a)),o(a)})}a.video=r(a.video)}return Sa("chrome: "+JSON.stringify(a)),o(a)},n=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(a,o,c){s(a,l=>{t.webkitGetUserMedia(l,o,h=>{c&&c(n(h))})})}.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(o){return s(o,c=>a(c).then(l=>{if(c.audio&&!l.getAudioTracks().length||c.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return l},l=>Promise.reject(n(l))))}}}function Ea(i){i.MediaStream=i.MediaStream||i.webkitMediaStream}function Pa(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("ontrack"in i.RTCPeerConnection.prototype)){Object.defineProperty(i.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let s;s=i.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):{track:r.track};const n=new Event("track");n.track=r.track,n.receiver=s,n.transceiver={receiver:s},n.streams=[t.stream],this.dispatchEvent(n)}),t.stream.getTracks().forEach(r=>{let s;s=i.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===r.id):{track:r};const n=new Event("track");n.track=r,n.receiver=s,n.transceiver={receiver:s},n.streams=[t.stream],this.dispatchEvent(n)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else $t(i,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function ka(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("getSenders"in i.RTCPeerConnection.prototype)&&"createDTMFSender"in i.RTCPeerConnection.prototype){const e=function(s,n){return{track:n,get dtmf(){return this._dtmf===void 0&&(n.kind==="audio"?this._dtmf=s.createDTMFSender(n):this._dtmf=null),this._dtmf},_pc:s}};if(!i.RTCPeerConnection.prototype.getSenders){i.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(a,o){let c=s.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const n=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(a){n.apply(this,arguments);const o=this._senders.indexOf(a);o!==-1&&this._senders.splice(o,1)}}const t=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(n=>{this._senders.push(e(this,n))})};const r=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(n=>{const a=this._senders.find(o=>o.track===n);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof i=="object"&&i.RTCPeerConnection&&"getSenders"in i.RTCPeerConnection.prototype&&"createDTMFSender"in i.RTCPeerConnection.prototype&&i.RTCRtpSender&&!("dtmf"in i.RTCRtpSender.prototype)){const e=i.RTCPeerConnection.prototype.getSenders;i.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(r=>r._pc=this),t},Object.defineProperty(i.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function La(i){if(!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[t,r,s]=arguments;if(arguments.length>0&&typeof t=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof t!="function"))return e.apply(this,[]);const n=function(o){const c={};return o.result().forEach(l=>{const h={id:l.id,timestamp:l.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type};l.names().forEach(u=>{h[u]=l.stat(u)}),c[h.id]=h}),c},a=function(o){return new Map(Object.keys(o).map(c=>[c,o[c]]))};if(arguments.length>=2){const o=function(c){r(a(n(c)))};return e.apply(this,[o,t])}return new Promise((o,c)=>{e.apply(this,[function(l){o(a(n(l)))},c])}).then(r,s)}}function Ra(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&i.RTCRtpReceiver))return;if(!("getStats"in i.RTCRtpSender.prototype)){const t=i.RTCPeerConnection.prototype.getSenders;t&&(i.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(n=>n._pc=this),s});const r=i.RTCPeerConnection.prototype.addTrack;r&&(i.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),i.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(n=>xa(n,s.track,!0))}}if(!("getStats"in i.RTCRtpReceiver.prototype)){const t=i.RTCPeerConnection.prototype.getReceivers;t&&(i.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r}),$t(i,"track",r=>(r.receiver._pc=r.srcElement,r)),i.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>xa(s,r.track,!1))}}if(!("getStats"in i.RTCRtpSender.prototype)||!("getStats"in i.RTCRtpReceiver.prototype))return;const e=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof i.MediaStreamTrack){const t=arguments[0];let r,s,n;return this.getSenders().forEach(a=>{a.track===t&&(r?n=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===t&&(s?n=!0:s=a),a.track===t)),n||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Aa(i){i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(n=>this._shimmedLocalStreams[n][0])};const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(n,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const o=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(o)===-1&&this._shimmedLocalStreams[a.id].push(o):this._shimmedLocalStreams[a.id]=[a,o],o};const t=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(n){this._shimmedLocalStreams=this._shimmedLocalStreams||{},n.getTracks().forEach(c=>{if(this.getSenders().find(l=>l.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const o=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[n.id]=[n].concat(o)};const r=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(n){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[n.id],r.apply(this,arguments)};const s=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(n){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const o=this._shimmedLocalStreams[a].indexOf(n);o!==-1&&this._shimmedLocalStreams[a].splice(o,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),s.apply(this,arguments)}}function Ma(i,e){if(!i.RTCPeerConnection)return;if(i.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Aa(i);const t=i.RTCPeerConnection.prototype.getLocalStreams;i.RTCPeerConnection.prototype.getLocalStreams=function(){const c=t.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(l=>this._reverseStreams[l.id])};const r=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(l=>{if(this.getSenders().find(h=>h.track===l))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const l=new i.MediaStream(c.getTracks());this._streams[c.id]=l,this._reverseStreams[l.id]=c,c=l}r.apply(this,[c])};const s=i.RTCPeerConnection.prototype.removeStream;function n(c,l){let h=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const f=c._reverseStreams[u],m=c._streams[f.id];h=h.replace(new RegExp(m.id,"g"),f.id)}),new RTCSessionDescription({type:l.type,sdp:h})}i.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},i.RTCPeerConnection.prototype.addTrack=function(c,l){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(f=>f===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const u=this._streams[l.id];if(u)u.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const f=new i.MediaStream([c]);this._streams[l.id]=f,this._reverseStreams[f.id]=l,this.addStream(f)}return this.getSenders().find(f=>f.track===c)},["createOffer","createAnswer"].forEach(function(c){const l=i.RTCPeerConnection.prototype[c],h={[c](){const u=arguments;return arguments.length&&typeof arguments[0]=="function"?l.apply(this,[f=>{const m=n(this,f);u[0].apply(null,[m])},f=>{u[1]&&u[1].apply(null,f)},arguments[2]]):l.apply(this,arguments).then(f=>n(this,f))}};i.RTCPeerConnection.prototype[c]=h[c]});const a=i.RTCPeerConnection.prototype.setLocalDescription;i.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(c,l){let h=l.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const f=c._reverseStreams[u],m=c._streams[f.id];h=h.replace(new RegExp(f.id,"g"),m.id)}),new RTCSessionDescription({type:l.type,sdp:h})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const o=Object.getOwnPropertyDescriptor(i.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(i.RTCPeerConnection.prototype,"localDescription",{get(){const c=o.get.apply(this);return c.type===""?c:n(this,c)}}),i.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(c._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let l;this._streams=this._streams||{},Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(u=>c.track===u)&&(l=this._streams[h])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Hs(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=i.RTCPeerConnection.prototype[t],s={[t](){return arguments[0]=new(t==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};i.RTCPeerConnection.prototype[t]=s[t]})}function Fa(i,e){$t(i,"negotiationneeded",t=>{const r=t.target;if(!(e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")||r.signalingState==="stable")return t})}const $a=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Fa,shimAddTrackRemoveTrack:Ma,shimAddTrackRemoveTrackWithNative:Aa,shimGetDisplayMedia:function(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(typeof e=="function"?i.navigator.mediaDevices.getDisplayMedia=function(t){return e(t).then(r=>{const s=t.video&&t.video.width,n=t.video&&t.video.height,a=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:r,maxFrameRate:a||3}},s&&(t.video.mandatory.maxWidth=s),n&&(t.video.mandatory.maxHeight=n),i.navigator.mediaDevices.getUserMedia(t)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:ka,shimGetStats:La,shimGetUserMedia:Ta,shimMediaStream:Ea,shimOnTrack:Pa,shimPeerConnection:Hs,shimSenderReceiverGetStats:Ra},Symbol.toStringTag,{value:"Module"}));function Ba(i,e){const t=i&&i.navigator,r=i&&i.MediaStreamTrack;if(t.getUserMedia=function(s,n,a){Vs("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(s).then(n,a)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const s=function(a,o,c){o in a&&!(c in a)&&(a[c]=a[o],delete a[o])},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a.audio,"autoGainControl","mozAutoGainControl"),s(a.audio,"noiseSuppression","mozNoiseSuppression")),n(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const o=a.apply(this,arguments);return s(o,"mozAutoGainControl","autoGainControl"),s(o,"mozNoiseSuppression","noiseSuppression"),o}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o,"autoGainControl","mozAutoGainControl"),s(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function Qa(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Zs(i,e){if(typeof i!="object"||!i.RTCPeerConnection&&!i.mozRTCPeerConnection)return;!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const n=i.RTCPeerConnection.prototype[s],a={[s](){return arguments[0]=new(s==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};i.RTCPeerConnection.prototype[s]=a[s]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[s,n,a]=arguments;return r.apply(this,[s||null]).then(o=>{if(e.version<53&&!n)try{o.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;o.forEach((l,h)=>{o.set(h,Object.assign({},l,{type:t[l.type]||l.type}))})}return o}).then(n,a)}}function Ia(i){if(typeof i!="object"||!i.RTCPeerConnection||!i.RTCRtpSender||i.RTCRtpSender&&"getStats"in i.RTCRtpSender.prototype)return;const e=i.RTCPeerConnection.prototype.getSenders;e&&(i.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r});const t=i.RTCPeerConnection.prototype.addTrack;t&&(i.RTCPeerConnection.prototype.addTrack=function(){const r=t.apply(this,arguments);return r._pc=this,r}),i.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function qa(i){if(typeof i!="object"||!i.RTCPeerConnection||!i.RTCRtpSender||i.RTCRtpSender&&"getStats"in i.RTCRtpReceiver.prototype)return;const e=i.RTCPeerConnection.prototype.getReceivers;e&&(i.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(r=>r._pc=this),t}),$t(i,"track",t=>(t.receiver._pc=t.srcElement,t)),i.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Wa(i){i.RTCPeerConnection&&!("removeStream"in i.RTCPeerConnection.prototype)&&(i.RTCPeerConnection.prototype.removeStream=function(e){Vs("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function ja(i){i.DataChannel&&!i.RTCDataChannel&&(i.RTCDataChannel=i.DataChannel)}function za(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype.addTransceiver;e&&(i.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const r=t.length>0;r&&t.forEach(n=>{if("rid"in n&&!/^[a-z0-9]{0,16}$/i.test(n.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in n&&!(parseFloat(n.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in n&&!(parseFloat(n.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(r){const{sender:n}=s,a=n.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=t,n.sendEncodings=t,this.setParametersPromises.push(n.setParameters(a).then(()=>{delete n.sendEncodings}).catch(()=>{delete n.sendEncodings})))}return s})}function Xa(i){if(typeof i!="object"||!i.RTCRtpSender)return;const e=i.RTCRtpSender.prototype.getParameters;e&&(i.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function Na(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ua(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype.createAnswer;i.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Ya=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:za,shimCreateAnswer:Ua,shimCreateOffer:Na,shimGetDisplayMedia:function(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(i.navigator.mediaDevices.getDisplayMedia=function(t){if(!t||!t.video){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,i.navigator.mediaDevices.getUserMedia(t)})},shimGetParameters:Xa,shimGetUserMedia:Ba,shimOnTrack:Qa,shimPeerConnection:Zs,shimRTCDataChannel:ja,shimReceiverGetStats:qa,shimRemoveStream:Wa,shimSenderGetStats:Ia},Symbol.toStringTag,{value:"Module"}));function Va(i){if(typeof i=="object"&&i.RTCPeerConnection){if("getLocalStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in i.RTCPeerConnection.prototype)){const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(r=>e.call(this,r,t)),t.getVideoTracks().forEach(r=>e.call(this,r,t))},i.RTCPeerConnection.prototype.addTrack=function(t,...r){return r&&r.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(t===-1)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function Ga(i){if(typeof i=="object"&&i.RTCPeerConnection&&("getRemoteStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in i.RTCPeerConnection.prototype))){Object.defineProperty(i.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const n=new Event("addstream");n.stream=s,this.dispatchEvent(n)})})}});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(s)>=0)return;t._remoteStreams.push(s);const n=new Event("addstream");n.stream=s,t.dispatchEvent(n)})}),e.apply(t,arguments)}}}function Ha(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,n=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(c,l){const h=arguments.length>=2?arguments[2]:arguments[0],u=t.apply(this,[h]);return l?(u.then(c,l),Promise.resolve()):u},e.createAnswer=function(c,l){const h=arguments.length>=2?arguments[2]:arguments[0],u=r.apply(this,[h]);return l?(u.then(c,l),Promise.resolve()):u};let o=function(c,l,h){const u=s.apply(this,[c]);return h?(u.then(l,h),Promise.resolve()):u};e.setLocalDescription=o,o=function(c,l,h){const u=n.apply(this,[c]);return h?(u.then(l,h),Promise.resolve()):u},e.setRemoteDescription=o,o=function(c,l,h){const u=a.apply(this,[c]);return h?(u.then(l,h),Promise.resolve()):u},e.addIceCandidate=o}function Za(i){const e=i&&i.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=s=>r(Ja(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,r,s){e.mediaDevices.getUserMedia(t).then(r,s)}.bind(e))}function Ja(i){return i&&i.video!==void 0?Object.assign({},i,{video:Ca(i.video)}):i}function Ka(i){if(!i.RTCPeerConnection)return;const e=i.RTCPeerConnection;i.RTCPeerConnection=function(t,r){if(t&&t.iceServers){const s=[];for(let n=0;n<t.iceServers.length;n++){let a=t.iceServers[n];a.urls===void 0&&a.url?(Vs("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(t.iceServers[n])}t.iceServers=s}return new e(t,r)},i.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(i.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function ec(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function tc(i){const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(t){if(t){t.offerToReceiveAudio!==void 0&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const r=this.getTransceivers().find(n=>n.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):t.offerToReceiveAudio!==!0||r||this.addTransceiver("audio",{direction:"recvonly"}),t.offerToReceiveVideo!==void 0&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const s=this.getTransceivers().find(n=>n.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):t.offerToReceiveVideo!==!0||s||this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ic(i){typeof i!="object"||i.AudioContext||(i.AudioContext=i.webkitAudioContext)}const rc=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ic,shimCallbacksAPI:Ha,shimConstraints:Ja,shimCreateOfferLegacy:tc,shimGetUserMedia:Za,shimLocalStreamsAPI:Va,shimRTCIceServerUrls:Ka,shimRemoteStreamsAPI:Ga,shimTrackEventTransceiver:ec},Symbol.toStringTag,{value:"Module"}));var sc={exports:{}};(function(i){const e={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(t){let r;r=t.indexOf("a=candidate:")===0?t.substring(12).split(" "):t.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let n=8;n<r.length;n+=2)switch(r[n]){case"raddr":s.relatedAddress=r[n+1];break;case"rport":s.relatedPort=parseInt(r[n+1],10);break;case"tcptype":s.tcpType=r[n+1];break;case"ufrag":s.ufrag=r[n+1],s.usernameFragment=r[n+1];break;default:s[r[n]]===void 0&&(s[r[n]]=r[n+1])}return s},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const s=t.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const n=t.type;return r.push("typ"),r.push(n),n!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let r=t.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const s=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(t){const r=t.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const r={};let s;const n=t.substring(t.indexOf(" ")+1).split(";");for(let a=0;a<n.length;a++)s=n[a].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(t){let r="",s=t.payloadType;if(t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const n=[];Object.keys(t.parameters).forEach(a=>{t.parameters[a]!==void 0?n.push(a+"="+t.parameters[a]):n.push(a)}),r+="a=fmtp:"+s+" "+n.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substring(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",s=t.payloadType;return t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(n=>{r+="a=rtcp-fb:"+s+" "+n.type+(n.parameter&&n.parameter.length?" "+n.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),s={ssrc:parseInt(t.substring(7,r),10)},n=t.indexOf(":",r);return n>-1?(s.attribute=t.substring(r+1,n),s.value=t.substring(n+1)):s.attribute=t.substring(r+1),s},e.parseSsrcGroup=function(t){const r=t.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(t){const r=t.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let s="a=setup:"+r+`\r
`;return t.fingerprints.forEach(n=>{s+="a=fingerprint:"+n.algorithm+" "+n.value+`\r
`}),s},e.parseCryptoLine=function(t){const r=t.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const s=e.matchPrefix(t+r,"a=ice-ufrag:")[0],n=e.matchPrefix(t+r,"a=ice-pwd:")[0];return s&&n?{usernameFragment:s.substring(12),password:n.substring(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(t)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const o=s[a],c=e.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(c){const l=e.parseRtpMap(c),h=e.matchPrefix(t,"a=fmtp:"+o+" ");switch(l.parameters=h.length?e.parseFmtp(h[0]):{},l.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(e.parseRtcpFb),r.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(l.name.toUpperCase())}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const n=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{n.forEach(o=>{a.rtcpFeedback.find(c=>c.type===o.type&&c.parameter===o.parameter)||a.rtcpFeedback.push(o)})}),r},e.writeRtpDescription=function(t,r){let s="";s+="m="+t+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{s+=e.writeRtpMap(a),s+=e.writeFmtp(a),s+=e.writeRtcpFb(a)});let n=0;return r.codecs.forEach(a=>{a.maxptime>n&&(n=a.maxptime)}),n>0&&(s+="a=maxptime:"+n+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{s+=e.writeExtmap(a)}),s},e.parseRtpEncodingParameters=function(t){const r=[],s=e.parseRtpParameters(t),n=s.fecMechanisms.indexOf("RED")!==-1,a=s.fecMechanisms.indexOf("ULPFEC")!==-1,o=e.matchPrefix(t,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=o.length>0&&o[0].ssrc;let l;const h=e.matchPrefix(t,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));h.length>0&&h[0].length>1&&h[0][0]===c&&(l=h[0][1]),s.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let m={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(m.rtx={ssrc:l}),r.push(m),n&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(m))}}),r.length===0&&c&&r.push({ssrc:c});let u=e.matchPrefix(t,"b=");return u.length&&(u=u[0].indexOf("b=TIAS:")===0?parseInt(u[0].substring(7),10):u[0].indexOf("b=AS:")===0?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,r.forEach(f=>{f.maxBitrate=u})),r},e.parseRtcpParameters=function(t){const r={},s=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const n=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=n.length>0,r.compound=n.length===0;const a=e.matchPrefix(t,"a=rtcp-mux");return r.mux=a.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const s=e.matchPrefix(t,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const n=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");return n.length>0?(r=n[0].value.split(" "),{stream:r[0],track:r[1]}):void 0},e.parseSctpDescription=function(t){const r=e.parseMLine(t),s=e.matchPrefix(t,"a=max-message-size:");let n;s.length>0&&(n=parseInt(s[0].substring(19),10)),isNaN(n)&&(n=65536);const a=e.matchPrefix(t,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:n};const o=e.matchPrefix(t,"a=sctpmap:");if(o.length>0){const c=o[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:n}}},e.writeSctpDescription=function(t,r){let s=[];return s=t.protocol!=="DTLS/SCTP"?["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,r,s){let n;const a=r!==void 0?r:2;return n=t||e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+n+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const s=e.splitLines(t);for(let n=0;n<s.length;n++)switch(s[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[n].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const r=e.splitLines(t)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(t){const r=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},i.exports=e})(sc);var nc=sc.exports;const ti=_o(nc),cd=Ze({__proto__:null,default:ti},[nc]);function vr(i){if(!i.RTCIceCandidate||i.RTCIceCandidate&&"foundation"in i.RTCIceCandidate.prototype)return;const e=i.RTCIceCandidate;i.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const r=new e(t),s=ti.parseCandidate(t.candidate);for(const n in s)n in r||Object.defineProperty(r,n,{value:s[n]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(t)},i.RTCIceCandidate.prototype=e.prototype,$t(i,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new i.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Js(i){!i.RTCIceCandidate||i.RTCIceCandidate&&"relayProtocol"in i.RTCIceCandidate.prototype||$t(i,"icecandidate",e=>{if(e.candidate){const t=ti.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function yr(i,e){if(!i.RTCPeerConnection)return;"sctp"in i.RTCPeerConnection.prototype||Object.defineProperty(i.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const t=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:r}=this.getConfiguration();r==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(r){if(!r||!r.sdp)return!1;const s=ti.splitSections(r.sdp);return s.shift(),s.some(n=>{const a=ti.parseMLine(n);return a&&a.kind==="application"&&a.protocol.indexOf("SCTP")!==-1})}(arguments[0])){const r=function(c){const l=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const h=parseInt(l[1],10);return h!=h?-1:h}(arguments[0]),s=function(c){let l=65536;return e.browser==="firefox"&&(l=e.version<57?c===-1?16384:2147483637:e.version<60?e.version===57?65535:65536:2147483637),l}(r),n=function(c,l){let h=65536;e.browser==="firefox"&&e.version===57&&(h=65535);const u=ti.matchPrefix(c.sdp,"a=max-message-size:");return u.length>0?h=parseInt(u[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(h=2147483637),h}(arguments[0],r);let a;a=s===0&&n===0?Number.POSITIVE_INFINITY:s===0||n===0?Math.max(s,n):Math.min(s,n);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>a}),this._sctp=o}return t.apply(this,arguments)}}function br(i){if(!i.RTCPeerConnection||!("createDataChannel"in i.RTCPeerConnection.prototype))return;function e(r,s){const n=r.send;r.send=function(){const a=arguments[0],o=a.length||a.size||a.byteLength;if(r.readyState==="open"&&s.sctp&&o>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return n.apply(r,arguments)}}const t=i.RTCPeerConnection.prototype.createDataChannel;i.RTCPeerConnection.prototype.createDataChannel=function(){const r=t.apply(this,arguments);return e(r,this),r},$t(i,"datachannel",r=>(e(r.channel,r.target),r))}function Ks(i){if(!i.RTCPeerConnection||"connectionState"in i.RTCPeerConnection.prototype)return;const e=i.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const n=s.target;if(n._lastConnectionState!==n.connectionState){n._lastConnectionState=n.connectionState;const a=new Event("connectionstatechange",s);n.dispatchEvent(a)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function en(i,e){if(!i.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(n=>n.trim()!=="a=extmap-allow-mixed").join(`
`);i.RTCSessionDescription&&r instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return t.apply(this,arguments)}}function wr(i,e){if(!i.RTCPeerConnection||!i.RTCPeerConnection.prototype)return;const t=i.RTCPeerConnection.prototype.addIceCandidate;t&&t.length!==0&&(i.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Dr(i,e){if(!i.RTCPeerConnection||!i.RTCPeerConnection.prototype)return;const t=i.RTCPeerConnection.prototype.setLocalDescription;t&&t.length!==0&&(i.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return t.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer"}return r.sdp||r.type!=="offer"&&r.type!=="answer"?t.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>t.apply(this,[s]))})}const ld=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:en,shimAddIceCandidateNullOrEmpty:wr,shimConnectionState:Ks,shimMaxMessageSize:yr,shimParameterlessSetLocalDescription:Dr,shimRTCIceCandidate:vr,shimRTCIceCandidateRelayProtocol:Js,shimSendThrowTypeError:br},Symbol.toStringTag,{value:"Module"})),oc=function({window:i}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=wa,r=function(n){const a={browser:null,version:null};if(n===void 0||!n.navigator||!n.navigator.userAgent)return a.browser="Not a browser.",a;const{navigator:o}=n;if(o.mozGetUserMedia)a.browser="firefox",a.version=Or(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)a.browser="chrome",a.version=Or(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!o.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=Or(o.userAgent,/AppleWebKit\/(\d+)\./,1),a.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return a}(i),s={browserDetails:r,commonShim:ld,extractVersion:Or,disableLog:od,disableWarnings:ad,sdp:cd};switch(r.browser){case"chrome":if(!$a||!Hs||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),s;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),s;t("adapter.js shimming chrome."),s.browserShim=$a,wr(i,r),Dr(i),Ta(i,r),Ea(i),Hs(i,r),Pa(i),Ma(i,r),ka(i),La(i),Ra(i),Fa(i,r),vr(i),Js(i),Ks(i),yr(i,r),br(i),en(i,r);break;case"firefox":if(!Ya||!Zs||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),s;t("adapter.js shimming firefox."),s.browserShim=Ya,wr(i,r),Dr(i),Ba(i,r),Zs(i,r),Qa(i),Wa(i),Ia(i),qa(i),ja(i),za(i),Xa(i),Na(i),Ua(i),vr(i),Ks(i),yr(i,r),br(i);break;case"safari":if(!rc||!e.shimSafari)return t("Safari shim is not included in this adapter release."),s;t("adapter.js shimming safari."),s.browserShim=rc,wr(i,r),Dr(i),Ka(i),tc(i),Ha(i),Va(i),Ga(i),ec(i),Za(i),ic(i),vr(i),Js(i),yr(i,r),br(i),en(i,r);break;default:t("Unsupported browser!")}return s}({window:typeof window>"u"?void 0:window});function Bt(i,e,t,r){Object.defineProperty(i,e,{get:t,set:r,enumerable:!0,configurable:!0})}class ac{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,s=Math.ceil(r/this.chunkedMTU);let n=0,a=0;for(;a<r;){const o=Math.min(r,a+this.chunkedMTU),c=e.slice(a,o),l={__peerData:this._dataCount,n,data:c,total:s};t.push(l),a=o,n++}return this._dataCount++,t}}}const tn=oc.default||oc,Si=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const i=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(i)&&(i==="chrome"?e>=this.minChromeVersion:i==="firefox"?e>=this.minFirefoxVersion:i==="safari"&&!this.isIOS&&e>=this.minSafariVersion)}getBrowser(){return tn.browserDetails.browser}getVersion(){return tn.browserDetails.version||0}isUnifiedPlanSupported(){const i=this.getBrowser(),e=tn.browserDetails.version||0;if(i==="chrome"&&e<this.minChromeVersion)return!1;if(i==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},hd=i=>!i||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(i),cc=()=>Math.random().toString(36).slice(2),lc={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Fe=new class extends ac{noop(){}blobToArrayBuffer(i,e){const t=new FileReader;return t.onload=function(r){r.target&&e(r.target.result)},t.readAsArrayBuffer(i),t}binaryStringToArrayBuffer(i){const e=new Uint8Array(i.length);for(let t=0;t<i.length;t++)e[t]=255&i.charCodeAt(t);return e.buffer}isSecure(){return location.protocol==="https:"}constructor(...i){super(...i),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=lc,this.browser=Si.getBrowser(),this.browserVersion=Si.getVersion(),this.pack=va,this.unpack=Oa,this.supports=function(){const e={browser:Si.isBrowserSupported(),webRTC:Si.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{let r;t=new RTCPeerConnection(lc),e.audioVideo=!0;try{r=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!Si.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{t&&t.close()}return e}(),this.validateId=hd,this.randomToken=cc}};var je,Ct;(Ct=je||(je={}))[Ct.Disabled=0]="Disabled",Ct[Ct.Errors=1]="Errors",Ct[Ct.Warnings=2]="Warnings",Ct[Ct.All=3]="All";var rn,Y=new class{get logLevel(){return this._logLevel}set logLevel(i){this._logLevel=i}log(...i){this._logLevel>=je.All&&this._print(je.All,...i)}warn(...i){this._logLevel>=je.Warnings&&this._print(je.Warnings,...i)}error(...i){this._logLevel>=je.Errors&&this._print(je.Errors,...i)}setLogFunction(i){this._print=i}_print(i,...e){const t=["PeerJS: ",...e];for(const r in t)t[r]instanceof Error&&(t[r]="("+t[r].name+") "+t[r].message);i>=je.All?console.log(...t):i>=je.Warnings?console.warn("WARNING",...t):i>=je.Errors&&console.error("ERROR",...t)}constructor(){this._logLevel=je.Disabled}},ud=Object.prototype.hasOwnProperty,Te="~";function Ti(){}function dd(i,e,t){this.fn=i,this.context=e,this.once=t||!1}function hc(i,e,t,r,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var n=new dd(t,r||i,s),a=Te?Te+e:e;return i._events[a]?i._events[a].fn?i._events[a]=[i._events[a],n]:i._events[a].push(n):(i._events[a]=n,i._eventsCount++),i}function Cr(i,e){--i._eventsCount==0?i._events=new Ti:delete i._events[e]}function be(){this._events=new Ti,this._eventsCount=0}Object.create&&(Ti.prototype=Object.create(null),new Ti().__proto__||(Te=!1)),be.prototype.eventNames=function(){var i,e,t=[];if(this._eventsCount===0)return t;for(e in i=this._events)ud.call(i,e)&&t.push(Te?e.slice(1):e);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t},be.prototype.listeners=function(i){var e=Te?Te+i:i,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,s=t.length,n=new Array(s);r<s;r++)n[r]=t[r].fn;return n},be.prototype.listenerCount=function(i){var e=Te?Te+i:i,t=this._events[e];return t?t.fn?1:t.length:0},be.prototype.emit=function(i,e,t,r,s,n){var a=Te?Te+i:i;if(!this._events[a])return!1;var o,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(i,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,t),!0;case 4:return l.fn.call(l.context,e,t,r),!0;case 5:return l.fn.call(l.context,e,t,r,s),!0;case 6:return l.fn.call(l.context,e,t,r,s,n),!0}for(c=1,o=new Array(h-1);c<h;c++)o[c-1]=arguments[c];l.fn.apply(l.context,o)}else{var u,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(i,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,t);break;case 4:l[c].fn.call(l[c].context,e,t,r);break;default:if(!o)for(u=1,o=new Array(h-1);u<h;u++)o[u-1]=arguments[u];l[c].fn.apply(l[c].context,o)}}return!0},be.prototype.on=function(i,e,t){return hc(this,i,e,t,!1)},be.prototype.once=function(i,e,t){return hc(this,i,e,t,!0)},be.prototype.removeListener=function(i,e,t,r){var s=Te?Te+i:i;if(!this._events[s])return this;if(!e)return Cr(this,s),this;var n=this._events[s];if(n.fn)n.fn!==e||r&&!n.once||t&&n.context!==t||Cr(this,s);else{for(var a=0,o=[],c=n.length;a<c;a++)(n[a].fn!==e||r&&!n[a].once||t&&n[a].context!==t)&&o.push(n[a]);o.length?this._events[s]=o.length===1?o[0]:o:Cr(this,s)}return this},be.prototype.removeAllListeners=function(i){var e;return i?(e=Te?Te+i:i,this._events[e]&&Cr(this,e)):(this._events=new Ti,this._eventsCount=0),this},be.prototype.off=be.prototype.removeListener,be.prototype.addListener=be.prototype.on,be.prefixed=Te,be.EventEmitter=be,rn=be;var at,uc,fe,ze,Ei,dc,Pi,pc,ii,xr,ct,Sr,ve,lt,Qt={};Bt(Qt,"ConnectionType",()=>at),Bt(Qt,"PeerErrorType",()=>fe),Bt(Qt,"BaseConnectionErrorType",()=>Ei),Bt(Qt,"DataConnectionErrorType",()=>Pi),Bt(Qt,"SerializationType",()=>ii),Bt(Qt,"SocketEventType",()=>ct),Bt(Qt,"ServerMessageType",()=>ve),(uc=at||(at={})).Data="data",uc.Media="media",(ze=fe||(fe={})).BrowserIncompatible="browser-incompatible",ze.Disconnected="disconnected",ze.InvalidID="invalid-id",ze.InvalidKey="invalid-key",ze.Network="network",ze.PeerUnavailable="peer-unavailable",ze.SslUnavailable="ssl-unavailable",ze.ServerError="server-error",ze.SocketError="socket-error",ze.SocketClosed="socket-closed",ze.UnavailableID="unavailable-id",ze.WebRTC="webrtc",(dc=Ei||(Ei={})).NegotiationFailed="negotiation-failed",dc.ConnectionClosed="connection-closed",(pc=Pi||(Pi={})).NotOpenYet="not-open-yet",pc.MessageToBig="message-too-big",(xr=ii||(ii={})).Binary="binary",xr.BinaryUTF8="binary-utf8",xr.JSON="json",xr.None="raw",(Sr=ct||(ct={})).Message="message",Sr.Disconnected="disconnected",Sr.Error="error",Sr.Close="close",(lt=ve||(ve={})).Heartbeat="HEARTBEAT",lt.Candidate="CANDIDATE",lt.Offer="OFFER",lt.Answer="ANSWER",lt.Open="OPEN",lt.Error="ERROR",lt.IdTaken="ID-TAKEN",lt.InvalidKey="INVALID-KEY",lt.Leave="LEAVE",lt.Expire="EXPIRE";var sn;sn=JSON.parse('{"name":"peerjs","version":"1.5.1","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"^1.5.3","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.0.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class pd extends rn.EventEmitter{constructor(e,t,r,s,n,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const o=e?"wss://":"ws://";this._baseUrl=o+t+":"+r+s+"peerjs?key="+n}start(e,t){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${t}`;!this._socket&&this._disconnected&&(this._socket=new WebSocket(r+"&version="+sn.version),this._disconnected=!1,this._socket.onmessage=s=>{let n;try{n=JSON.parse(s.data),Y.log("Server message received:",n)}catch{return void Y.log("Invalid server message",s.data)}this.emit(ct.Message,n)},this._socket.onclose=s=>{this._disconnected||(Y.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(ct.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Y.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void Y.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:ve.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(ct.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class fc{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===at.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,s={ordered:!!e.reliable},n=t.createDataChannel(r.label,s);r._initializeDataChannel(n),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Y.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,s=this.connection.type,n=this.connection.provider;Y.log("Listening for ICE candidates."),e.onicecandidate=a=>{a.candidate&&a.candidate.candidate&&(Y.log(`Received ICE candidates for ${t}:`,a.candidate),n.socket.send({type:ve.Candidate,payload:{candidate:a.candidate,type:s,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Y.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(Ei.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Y.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(Ei.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Y.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},Y.log("Listening for data channel"),e.ondatachannel=a=>{Y.log("Received data channel");const o=a.channel;n.getConnection(t,r)._initializeDataChannel(o)},Y.log("Listening for remote stream"),e.ontrack=a=>{Y.log("Received remote stream");const o=a.streams[0],c=n.getConnection(t,r);if(c.type===at.Media){const l=c;this._addStreamToMediaConnection(o,l)}}}cleanup(){Y.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let r=!1;const s=this.connection.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed"),(t||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);Y.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Y.log("Set localDescription:",r,`for:${this.connection.peer}`);let s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===at.Data){const n=this.connection;s={...s,label:n.label,reliable:n.reliable,serialization:n.serialization}}t.socket.send({type:ve.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(fe.WebRTC,s),Y.log("Failed to setLocalDescription, ",s))}}catch(r){t.emitError(fe.WebRTC,r),Y.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const r=await e.createAnswer();Y.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),Y.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:ve.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){t.emitError(fe.WebRTC,s),Y.log("Failed to setLocalDescription, ",s)}}catch(r){t.emitError(fe.WebRTC,r),Y.log("Failed to create answer, ",r)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const r=this.connection.peerConnection,s=this.connection.provider;Y.log("Setting remote description",t);const n=this;try{await r.setRemoteDescription(t),Y.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await n._makeAnswer()}catch(a){s.emitError(fe.WebRTC,a),Y.log("Failed to setRemoteDescription, ",a)}}async handleCandidate(e){Y.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Y.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(fe.WebRTC,t),Y.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Y.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Y.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){Y.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class gc extends rn.EventEmitter{emitError(e,t){Y.error("Error:",t),this.emit("error",new fd(`${e}`,t))}}class fd extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class mc extends gc{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}const ji=class ji extends mc{get type(){return at.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||ji.ID_PREFIX+Fe.randomToken(),this._negotiator=new fc(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Y.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Y.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Y.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case ve.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case ve.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Y.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void Y.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const s of r)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};po=new WeakMap,Xi(ji,po,(()=>{ji.ID_PREFIX="mc_"})());let Tr=ji;class gd{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:s,path:n,key:a}=this._options,o=new URL(`${t}://${r}:${s}${n}${a}/${e}`);return o.searchParams.set("ts",`${Date.now()}${Math.random()}`),o.searchParams.set("version",sn.version),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Y.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Fe.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw t=this._options.host===Fe.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Y.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}const Vt=class Vt extends mc{get type(){return at.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||Vt.ID_PREFIX+cc(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new fc(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Y.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Y.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Y.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,t=!1){if(this.open)return this._send(e,t);this.emitError(Pi.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}async handleMessage(e){const t=e.payload;switch(e.type){case ve.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case ve.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Y.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}};fo=new WeakMap,go=new WeakMap,Xi(Vt,fo,(()=>{Vt.ID_PREFIX="dc_"})()),Xi(Vt,go,(()=>{Vt.MAX_BUFFERED_AMOUNT=8388608})());let Er=Vt;class nn extends Er{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Er.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Y.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class on extends nn{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new ac,this.serialization=ii.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=Oa(e),r=t.__peerData;if(r)return r.type==="close"?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const s=function(n){let a=0;for(const l of n)a+=l.byteLength;const o=new Uint8Array(a);let c=0;for(const l of n)o.set(l,c),c+=l.byteLength;return o}(r.data);this._handleDataMessage({data:s})}}_send(e,t){if(e instanceof Blob)return e.arrayBuffer().then(s=>{this._send(s,t)});const r=va(e);!t&&r.byteLength>this.chunker.chunkedMTU?this._sendChunks(r):this._bufferedSend(r)}_sendChunks(e){const t=this.chunker.chunk(e);Y.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class md extends nn{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=ii.None}}class _d extends nn{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;r&&r.type==="close"?this.close():this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));r.byteLength>=Fe.chunkedMTU?this.emitError(Pi.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=ii.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const zi=class zi extends gc{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let r;super(),this._serializers={raw:md,json:_d,binary:on,"binary-utf8":on,default:on},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:Fe.CLOUD_HOST,port:Fe.CLOUD_PORT,path:"/",key:zi.DEFAULT_KEY,token:Fe.randomToken(),config:Fe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Fe.CLOUD_HOST?this._options.secure=Fe.isSecure():this._options.host==Fe.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Y.setLogFunction(this._options.logFunction),Y.logLevel=this._options.debug||0,this._api=new gd(t),this._socket=this._createServerConnection(),Fe.supports.audioVideo||Fe.supports.data?!r||Fe.validateId(r)?r?this._initialize(r):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(fe.ServerError,s)):this._delayedAbort(fe.InvalidID,`ID "${r}" is invalid`):this._delayedAbort(fe.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new pd(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ct.Message,t=>{this._handleMessage(t)}),e.on(ct.Error,t=>{this._abort(fe.SocketError,t)}),e.on(ct.Disconnected,()=>{this.disconnected||(this.emitError(fe.Network,"Lost connection to server."),this.disconnect())}),e.on(ct.Close,()=>{this.disconnected||this._abort(fe.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,s=e.src;switch(t){case ve.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ve.Error:this._abort(fe.ServerError,r.msg);break;case ve.IdTaken:this._abort(fe.UnavailableID,`ID "${this.id}" is taken`);break;case ve.InvalidKey:this._abort(fe.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ve.Leave:Y.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case ve.Expire:this.emitError(fe.PeerUnavailable,`Could not connect to peer ${s}`);break;case ve.Offer:{const n=r.connectionId;let a=this.getConnection(s,n);if(a&&(a.close(),Y.warn(`Offer received for existing Connection ID:${n}`)),r.type===at.Media){const c=new Tr(s,this,{connectionId:n,_payload:r,metadata:r.metadata});a=c,this._addConnection(s,a),this.emit("call",c)}else{if(r.type!==at.Data)return void Y.warn(`Received malformed connection type:${r.type}`);{const c=new this._serializers[r.serialization](s,this,{connectionId:n,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});a=c,this._addConnection(s,a),this.emit("connection",c)}}const o=this._getMessages(n);for(const c of o)a.handleMessage(c);break}default:{if(!r)return void Y.warn(`You received a malformed message from ${s} of type ${t}`);const n=r.connectionId,a=this.getConnection(s,n);a&&a.peerConnection?a.handleMessage(e):n?this._storeMessage(n,e):Y.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected)return Y.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(fe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected)return Y.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(fe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void Y.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const s=new Tr(e,this,{...r,_stream:t});return this._addConnection(e,s),s}_addConnection(e,t){Y.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const s of r)if(s.connectionId===t)return s;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Y.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Y.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Y.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Y.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);Y.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(fe.ServerError,t))}};mo=new WeakMap,Xi(zi,mo,(()=>{zi.DEFAULT_KEY="peerjs"})());let Pr=zi;class an extends nt{constructor(t){super();oe(this,"peer");oe(this,"conns",new Map);oe(this,"id",()=>this.peer.id);oe(this,"processNewPeers",async t=>{t.forEach(r=>{this.conns.get(r)||r==this.peer.id||this.connect(r)})});let r={secure:!0,host:"mpyc-demo--headscale-ams3-c99f82e5.demo.mpyc.tech",port:443,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"}};try{this.peer=t?new Pr(t,r):new Pr(r)}catch(s){console.warn(s)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}addPeerEventHandlers(t){t.on("open",async r=>{this.emit("ready",r)}),t.on("error",async r=>{this.emit("error",r)}),t.on("close",async()=>{this.emit("closed")}),t.on("connection",async r=>{this.addConnEventHandlers(r)})}addConnEventHandlers(t){console.log(`transport:conn ${t.peer} is trying to connect`),t.on("open",async()=>{this.conns.set(t.peer,t),this.sendPeers(t),this.emit("conn:ready",t.peer)}),t.on("error",async r=>{this.emit("conn:error",{peerID:t.peer,err:r})}),t.on("close",async()=>{this.conns.delete(t.peer),this.emit("conn:disconnected",t.peer)}),t.on("data",async r=>{let{type:s,payload:n}=r;s==="peers"?this.processNewPeers(n):this.emit("conn:data",{peerID:t.peer,data:r})})}async send(t,r,s){this.conns.get(t).send({type:r,payload:s})}destroy(){this.peer.destroy()}async broadcast(t,r){this.conns.forEach(s=>{this.send(s.peer,`user:${t}`,r)})}async sendPeers(t){t.send({type:"peers",payload:this.getPeers()})}getPeers(t=!1){let r=Array.from(this.conns,([s,n])=>n.peer);return t&&r.push(this.peer.id),r.sort()}async connect(t){let r=this.peer.connect(t,{reliable:!0});this.addConnEventHandlers(r)}}const Od=new MessageChannel,vd=[];Od.port1.onmessage=()=>{vd.pop()()};var Ee="top",Be="bottom",Qe="right",Pe="left",kr="auto",ri=[Ee,Be,Qe,Pe],It="start",si="end",_c="clippingParents",cn="viewport",ni="popper",Oc="reference",ln=ri.reduce(function(i,e){return i.concat([e+"-"+It,e+"-"+si])},[]),hn=[].concat(ri,[kr]).reduce(function(i,e){return i.concat([e,e+"-"+It,e+"-"+si])},[]),vc="beforeRead",yc="read",bc="afterRead",wc="beforeMain",Dc="main",Cc="afterMain",xc="beforeWrite",Sc="write",Tc="afterWrite",Ec=[vc,yc,bc,wc,Dc,Cc,xc,Sc,Tc];function ht(i){return i?(i.nodeName||"").toLowerCase():null}function Ie(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function qt(i){return i instanceof Ie(i).Element||i instanceof Element}function Xe(i){return i instanceof Ie(i).HTMLElement||i instanceof HTMLElement}function un(i){return typeof ShadowRoot<"u"&&(i instanceof Ie(i).ShadowRoot||i instanceof ShadowRoot)}const dn={name:"applyStyles",enabled:!0,phase:"write",fn:function(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},n=e.elements[t];Xe(n)&&ht(n)&&(Object.assign(n.style,r),Object.keys(s).forEach(function(a){var o=s[a];o===!1?n.removeAttribute(a):n.setAttribute(a,o===!0?"":o)}))})},effect:function(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],n=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(o,c){return o[c]="",o},{});Xe(s)&&ht(s)&&(Object.assign(s.style,a),Object.keys(n).forEach(function(o){s.removeAttribute(o)}))})}},requires:["computeStyles"]};function ut(i){return i.split("-")[0]}var Wt=Math.max,Lr=Math.min,oi=Math.round;function pn(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Pc(){return!/^((?!chrome|android).)*safari/i.test(pn())}function ai(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=i.getBoundingClientRect(),s=1,n=1;e&&Xe(i)&&(s=i.offsetWidth>0&&oi(r.width)/i.offsetWidth||1,n=i.offsetHeight>0&&oi(r.height)/i.offsetHeight||1);var a=(qt(i)?Ie(i):window).visualViewport,o=!Pc()&&t,c=(r.left+(o&&a?a.offsetLeft:0))/s,l=(r.top+(o&&a?a.offsetTop:0))/n,h=r.width/s,u=r.height/n;return{width:h,height:u,top:l,right:c+h,bottom:l+u,left:c,x:c,y:l}}function fn(i){var e=ai(i),t=i.offsetWidth,r=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:r}}function kc(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&un(t)){var r=e;do{if(r&&i.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function gt(i){return Ie(i).getComputedStyle(i)}function yd(i){return["table","td","th"].indexOf(ht(i))>=0}function xt(i){return((qt(i)?i.ownerDocument:i.document)||window.document).documentElement}function Rr(i){return ht(i)==="html"?i:i.assignedSlot||i.parentNode||(un(i)?i.host:null)||xt(i)}function Lc(i){return Xe(i)&&gt(i).position!=="fixed"?i.offsetParent:null}function ki(i){for(var e=Ie(i),t=Lc(i);t&&yd(t)&&gt(t).position==="static";)t=Lc(t);return t&&(ht(t)==="html"||ht(t)==="body"&&gt(t).position==="static")?e:t||function(r){var s=/firefox/i.test(pn());if(/Trident/i.test(pn())&&Xe(r)&&gt(r).position==="fixed")return null;var n=Rr(r);for(un(n)&&(n=n.host);Xe(n)&&["html","body"].indexOf(ht(n))<0;){var a=gt(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||s&&a.willChange==="filter"||s&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}(i)||e}function gn(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Li(i,e,t){return Wt(i,Lr(e,t))}function Rc(i){return Object.assign({},{top:0,right:0,bottom:0,left:0},i)}function Ac(i,e){return e.reduce(function(t,r){return t[r]=i,t},{})}const Mc={name:"arrow",enabled:!0,phase:"main",fn:function(i){var e,t=i.state,r=i.name,s=i.options,n=t.elements.arrow,a=t.modifiersData.popperOffsets,o=ut(t.placement),c=gn(o),l=[Pe,Qe].indexOf(o)>=0?"height":"width";if(n&&a){var h=function(b,D){return Rc(typeof(b=typeof b=="function"?b(Object.assign({},D.rects,{placement:D.placement})):b)!="number"?b:Ac(b,ri))}(s.padding,t),u=fn(n),f=c==="y"?Ee:Pe,m=c==="y"?Be:Qe,d=t.rects.reference[l]+t.rects.reference[c]-a[c]-t.rects.popper[l],p=a[c]-t.rects.reference[c],g=ki(n),_=g?c==="y"?g.clientHeight||0:g.clientWidth||0:0,y=d/2-p/2,O=h[f],v=_-u[l]-h[m],S=_/2-u[l]/2+y,T=Li(O,S,v),k=c;t.modifiersData[r]=((e={})[k]=T,e.centerOffset=T-S,e)}},effect:function(i){var e=i.state,t=i.options.element,r=t===void 0?"[data-popper-arrow]":t;r!=null&&(typeof r!="string"||(r=e.elements.popper.querySelector(r)))&&kc(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ci(i){return i.split("-")[1]}var bd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fc(i){var e,t=i.popper,r=i.popperRect,s=i.placement,n=i.variation,a=i.offsets,o=i.position,c=i.gpuAcceleration,l=i.adaptive,h=i.roundOffsets,u=i.isFixed,f=a.x,m=f===void 0?0:f,d=a.y,p=d===void 0?0:d,g=typeof h=="function"?h({x:m,y:p}):{x:m,y:p};m=g.x,p=g.y;var _=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),O=Pe,v=Ee,S=window;if(l){var T=ki(t),k="clientHeight",b="clientWidth";T===Ie(t)&&gt(T=xt(t)).position!=="static"&&o==="absolute"&&(k="scrollHeight",b="scrollWidth"),(s===Ee||(s===Pe||s===Qe)&&n===si)&&(v=Be,p-=(u&&T===S&&S.visualViewport?S.visualViewport.height:T[k])-r.height,p*=c?1:-1),(s===Pe||(s===Ee||s===Be)&&n===si)&&(O=Qe,m-=(u&&T===S&&S.visualViewport?S.visualViewport.width:T[b])-r.width,m*=c?1:-1)}var D,E=Object.assign({position:o},l&&bd),w=h===!0?function(x,L){var P=x.x,R=x.y,A=L.devicePixelRatio||1;return{x:oi(P*A)/A||0,y:oi(R*A)/A||0}}({x:m,y:p},Ie(t)):{x:m,y:p};return m=w.x,p=w.y,c?Object.assign({},E,((D={})[v]=y?"0":"",D[O]=_?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+m+"px, "+p+"px)":"translate3d("+m+"px, "+p+"px, 0)",D)):Object.assign({},E,((e={})[v]=y?p+"px":"",e[O]=_?m+"px":"",e.transform="",e))}const mn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(i){var e=i.state,t=i.options,r=t.gpuAcceleration,s=r===void 0||r,n=t.adaptive,a=n===void 0||n,o=t.roundOffsets,c=o===void 0||o,l={placement:ut(e.placement),variation:ci(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Fc(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fc(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Ar={passive:!0};const _n={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(i){var e=i.state,t=i.instance,r=i.options,s=r.scroll,n=s===void 0||s,a=r.resize,o=a===void 0||a,c=Ie(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&l.forEach(function(h){h.addEventListener("scroll",t.update,Ar)}),o&&c.addEventListener("resize",t.update,Ar),function(){n&&l.forEach(function(h){h.removeEventListener("scroll",t.update,Ar)}),o&&c.removeEventListener("resize",t.update,Ar)}},data:{}};var wd={left:"right",right:"left",bottom:"top",top:"bottom"};function Mr(i){return i.replace(/left|right|bottom|top/g,function(e){return wd[e]})}var Dd={start:"end",end:"start"};function $c(i){return i.replace(/start|end/g,function(e){return Dd[e]})}function On(i){var e=Ie(i);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function vn(i){return ai(xt(i)).left+On(i).scrollLeft}function yn(i){var e=gt(i),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function Bc(i){return["html","body","#document"].indexOf(ht(i))>=0?i.ownerDocument.body:Xe(i)&&yn(i)?i:Bc(Rr(i))}function Ri(i,e){var t;e===void 0&&(e=[]);var r=Bc(i),s=r===((t=i.ownerDocument)==null?void 0:t.body),n=Ie(r),a=s?[n].concat(n.visualViewport||[],yn(r)?r:[]):r,o=e.concat(a);return s?o:o.concat(Ri(Rr(a)))}function bn(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Qc(i,e,t){return e===cn?bn(function(r,s){var n=Ie(r),a=xt(r),o=n.visualViewport,c=a.clientWidth,l=a.clientHeight,h=0,u=0;if(o){c=o.width,l=o.height;var f=Pc();(f||!f&&s==="fixed")&&(h=o.offsetLeft,u=o.offsetTop)}return{width:c,height:l,x:h+vn(r),y:u}}(i,t)):qt(e)?function(r,s){var n=ai(r,!1,s==="fixed");return n.top=n.top+r.clientTop,n.left=n.left+r.clientLeft,n.bottom=n.top+r.clientHeight,n.right=n.left+r.clientWidth,n.width=r.clientWidth,n.height=r.clientHeight,n.x=n.left,n.y=n.top,n}(e,t):bn(function(r){var s,n=xt(r),a=On(r),o=(s=r.ownerDocument)==null?void 0:s.body,c=Wt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=Wt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),h=-a.scrollLeft+vn(r),u=-a.scrollTop;return gt(o||n).direction==="rtl"&&(h+=Wt(n.clientWidth,o?o.clientWidth:0)-c),{width:c,height:l,x:h,y:u}}(xt(i)))}function Cd(i,e,t,r){var s=e==="clippingParents"?function(c){var l=Ri(Rr(c)),h=["absolute","fixed"].indexOf(gt(c).position)>=0&&Xe(c)?ki(c):c;return qt(h)?l.filter(function(u){return qt(u)&&kc(u,h)&&ht(u)!=="body"}):[]}(i):[].concat(e),n=[].concat(s,[t]),a=n[0],o=n.reduce(function(c,l){var h=Qc(i,l,r);return c.top=Wt(h.top,c.top),c.right=Lr(h.right,c.right),c.bottom=Lr(h.bottom,c.bottom),c.left=Wt(h.left,c.left),c},Qc(i,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Ic(i){var e,t=i.reference,r=i.element,s=i.placement,n=s?ut(s):null,a=s?ci(s):null,o=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2;switch(n){case Ee:e={x:o,y:t.y-r.height};break;case Be:e={x:o,y:t.y+t.height};break;case Qe:e={x:t.x+t.width,y:c};break;case Pe:e={x:t.x-r.width,y:c};break;default:e={x:t.x,y:t.y}}var l=n?gn(n):null;if(l!=null){var h=l==="y"?"height":"width";switch(a){case It:e[l]=e[l]-(t[h]/2-r[h]/2);break;case si:e[l]=e[l]+(t[h]/2-r[h]/2)}}return e}function li(i,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?i.placement:r,n=t.strategy,a=n===void 0?i.strategy:n,o=t.boundary,c=o===void 0?_c:o,l=t.rootBoundary,h=l===void 0?cn:l,u=t.elementContext,f=u===void 0?ni:u,m=t.altBoundary,d=m!==void 0&&m,p=t.padding,g=p===void 0?0:p,_=Rc(typeof g!="number"?g:Ac(g,ri)),y=f===ni?Oc:ni,O=i.rects.popper,v=i.elements[d?y:f],S=Cd(qt(v)?v:v.contextElement||xt(i.elements.popper),c,h,a),T=ai(i.elements.reference),k=Ic({reference:T,element:O,strategy:"absolute",placement:s}),b=bn(Object.assign({},O,k)),D=f===ni?b:T,E={top:S.top-D.top+_.top,bottom:D.bottom-S.bottom+_.bottom,left:S.left-D.left+_.left,right:D.right-S.right+_.right},w=i.modifiersData.offset;if(f===ni&&w){var x=w[s];Object.keys(E).forEach(function(L){var P=[Qe,Be].indexOf(L)>=0?1:-1,R=[Ee,Be].indexOf(L)>=0?"y":"x";E[L]+=x[R]*P})}return E}function xd(i,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,n=t.rootBoundary,a=t.padding,o=t.flipVariations,c=t.allowedAutoPlacements,l=c===void 0?hn:c,h=ci(r),u=h?o?ln:ln.filter(function(d){return ci(d)===h}):ri,f=u.filter(function(d){return l.indexOf(d)>=0});f.length===0&&(f=u);var m=f.reduce(function(d,p){return d[p]=li(i,{placement:p,boundary:s,rootBoundary:n,padding:a})[ut(p)],d},{});return Object.keys(m).sort(function(d,p){return m[d]-m[p]})}const qc={name:"flip",enabled:!0,phase:"main",fn:function(i){var e=i.state,t=i.options,r=i.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,n=s===void 0||s,a=t.altAxis,o=a===void 0||a,c=t.fallbackPlacements,l=t.padding,h=t.boundary,u=t.rootBoundary,f=t.altBoundary,m=t.flipVariations,d=m===void 0||m,p=t.allowedAutoPlacements,g=e.options.placement,_=ut(g),y=c||(_===g||!d?[Mr(g)]:function(j){if(ut(j)===kr)return[];var z=Mr(j);return[$c(j),z,$c(z)]}(g)),O=[g].concat(y).reduce(function(j,z){return j.concat(ut(z)===kr?xd(e,{placement:z,boundary:h,rootBoundary:u,padding:l,flipVariations:d,allowedAutoPlacements:p}):z)},[]),v=e.rects.reference,S=e.rects.popper,T=new Map,k=!0,b=O[0],D=0;D<O.length;D++){var E=O[D],w=ut(E),x=ci(E)===It,L=[Ee,Be].indexOf(w)>=0,P=L?"width":"height",R=li(e,{placement:E,boundary:h,rootBoundary:u,altBoundary:f,padding:l}),A=L?x?Qe:Pe:x?Be:Ee;v[P]>S[P]&&(A=Mr(A));var F=Mr(A),M=[];if(n&&M.push(R[w]<=0),o&&M.push(R[A]<=0,R[F]<=0),M.every(function(j){return j})){b=E,k=!1;break}T.set(E,M)}if(k)for(var $=function(j){var z=O.find(function(W){var Q=T.get(W);if(Q)return Q.slice(0,j).every(function(I){return I})});if(z)return b=z,"break"},B=d?3:1;B>0&&$(B)!=="break";B--);e.placement!==b&&(e.modifiersData[r]._skip=!0,e.placement=b,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Wc(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function jc(i){return[Ee,Qe,Be,Pe].some(function(e){return i[e]>=0})}const zc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(i){var e=i.state,t=i.name,r=e.rects.reference,s=e.rects.popper,n=e.modifiersData.preventOverflow,a=li(e,{elementContext:"reference"}),o=li(e,{altBoundary:!0}),c=Wc(a,r),l=Wc(o,s,n),h=jc(c),u=jc(l);e.modifiersData[t]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}},Xc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(i){var e=i.state,t=i.options,r=i.name,s=t.offset,n=s===void 0?[0,0]:s,a=hn.reduce(function(h,u){return h[u]=function(f,m,d){var p=ut(f),g=[Pe,Ee].indexOf(p)>=0?-1:1,_=typeof d=="function"?d(Object.assign({},m,{placement:f})):d,y=_[0],O=_[1];return y=y||0,O=(O||0)*g,[Pe,Qe].indexOf(p)>=0?{x:O,y}:{x:y,y:O}}(u,e.rects,n),h},{}),o=a[e.placement],c=o.x,l=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=a}},wn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(i){var e=i.state,t=i.name;e.modifiersData[t]=Ic({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Nc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(i){var e=i.state,t=i.options,r=i.name,s=t.mainAxis,n=s===void 0||s,a=t.altAxis,o=a!==void 0&&a,c=t.boundary,l=t.rootBoundary,h=t.altBoundary,u=t.padding,f=t.tether,m=f===void 0||f,d=t.tetherOffset,p=d===void 0?0:d,g=li(e,{boundary:c,rootBoundary:l,padding:u,altBoundary:h}),_=ut(e.placement),y=ci(e.placement),O=!y,v=gn(_),S=v==="x"?"y":"x",T=e.modifiersData.popperOffsets,k=e.rects.reference,b=e.rects.popper,D=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,E=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),w=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(T){if(n){var L,P=v==="y"?Ee:Pe,R=v==="y"?Be:Qe,A=v==="y"?"height":"width",F=T[v],M=F+g[P],$=F-g[R],B=m?-b[A]/2:0,j=y===It?k[A]:b[A],z=y===It?-b[A]:-k[A],W=e.elements.arrow,Q=m&&W?fn(W):{width:0,height:0},I=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},N=I[P],J=I[R],U=Li(0,k[A],Q[A]),K=O?k[A]/2-B-U-N-E.mainAxis:j-U-N-E.mainAxis,ie=O?-k[A]/2+B+U+J+E.mainAxis:z+U+J+E.mainAxis,Ce=e.elements.arrow&&ki(e.elements.arrow),me=Ce?v==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,ke=(L=w?.[v])!=null?L:0,ae=F+ie-ke,Le=Li(m?Lr(M,F+K-ke-me):M,F,m?Wt($,ae):$);T[v]=Le,x[v]=Le-F}if(o){var ne,Ge=v==="x"?Ee:Pe,He=v==="x"?Be:Qe,xe=T[S],re=S==="y"?"height":"width",se=xe+g[Ge],V=xe-g[He],X=[Ee,Pe].indexOf(_)!==-1,G=(ne=w?.[S])!=null?ne:0,H=X?se:xe-k[re]-b[re]-G+E.altAxis,ee=X?xe+k[re]+b[re]-G-E.altAxis:V,ge=m&&X?function(pe,_e,ue){var de=Li(pe,_e,ue);return de>ue?ue:de}(H,xe,ee):Li(m?H:se,xe,m?ee:V);T[S]=ge,x[S]=ge-xe}e.modifiersData[r]=x}},requiresIfExists:["offset"]};function Sd(i,e,t){t===void 0&&(t=!1);var r,s,n=Xe(e),a=Xe(e)&&function(u){var f=u.getBoundingClientRect(),m=oi(f.width)/u.offsetWidth||1,d=oi(f.height)/u.offsetHeight||1;return m!==1||d!==1}(e),o=xt(e),c=ai(i,a,t),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!t)&&((ht(e)!=="body"||yn(o))&&(l=(r=e)!==Ie(r)&&Xe(r)?{scrollLeft:(s=r).scrollLeft,scrollTop:s.scrollTop}:On(r)),Xe(e)?((h=ai(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=vn(o))),{x:c.left+l.scrollLeft-h.x,y:c.top+l.scrollTop-h.y,width:c.width,height:c.height}}function Td(i){var e=new Map,t=new Set,r=[];function s(n){t.add(n.name),[].concat(n.requires||[],n.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var o=e.get(a);o&&s(o)}}),r.push(n)}return i.forEach(function(n){e.set(n.name,n)}),i.forEach(function(n){t.has(n.name)||s(n)}),r}var Uc={placement:"bottom",modifiers:[],strategy:"absolute"};function Yc(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Fr(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,n=s===void 0?Uc:s;return function(a,o,c){c===void 0&&(c=n);var l,h,u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Uc,n),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},f=[],m=!1,d={state:u,setOptions:function(g){var _=typeof g=="function"?g(u.options):g;p(),u.options=Object.assign({},n,u.options,_),u.scrollParents={reference:qt(a)?Ri(a):a.contextElement?Ri(a.contextElement):[],popper:Ri(o)};var y,O,v=function(S){var T=Td(S);return Ec.reduce(function(k,b){return k.concat(T.filter(function(D){return D.phase===b}))},[])}((y=[].concat(r,u.options.modifiers),O=y.reduce(function(S,T){var k=S[T.name];return S[T.name]=k?Object.assign({},k,T,{options:Object.assign({},k.options,T.options),data:Object.assign({},k.data,T.data)}):T,S},{}),Object.keys(O).map(function(S){return O[S]})));return u.orderedModifiers=v.filter(function(S){return S.enabled}),u.orderedModifiers.forEach(function(S){var T=S.name,k=S.options,b=k===void 0?{}:k,D=S.effect;if(typeof D=="function"){var E=D({state:u,name:T,instance:d,options:b}),w=function(){};f.push(E||w)}}),d.update()},forceUpdate:function(){if(!m){var g=u.elements,_=g.reference,y=g.popper;if(Yc(_,y)){u.rects={reference:Sd(_,ki(y),u.options.strategy==="fixed"),popper:fn(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(D){return u.modifiersData[D.name]=Object.assign({},D.data)});for(var O=0;O<u.orderedModifiers.length;O++)if(u.reset!==!0){var v=u.orderedModifiers[O],S=v.fn,T=v.options,k=T===void 0?{}:T,b=v.name;typeof S=="function"&&(u=S({state:u,options:k,name:b,instance:d})||u)}else u.reset=!1,O=-1}}},update:(l=function(){return new Promise(function(g){d.forceUpdate(),g(u)})},function(){return h||(h=new Promise(function(g){Promise.resolve().then(function(){h=void 0,g(l())})})),h}),destroy:function(){p(),m=!0}};if(!Yc(a,o))return d;function p(){f.forEach(function(g){return g()}),f=[]}return d.setOptions(c).then(function(g){!m&&c.onFirstUpdate&&c.onFirstUpdate(g)}),d}}var Ed=Fr(),Pd=Fr({defaultModifiers:[_n,wn,mn,dn]}),Dn=Fr({defaultModifiers:[_n,wn,mn,dn,Xc,qc,Nc,Mc,zc]});const Vc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Cc,afterRead:bc,afterWrite:Tc,applyStyles:dn,arrow:Mc,auto:kr,basePlacements:ri,beforeMain:wc,beforeRead:vc,beforeWrite:xc,bottom:Be,clippingParents:_c,computeStyles:mn,createPopper:Dn,createPopperBase:Ed,createPopperLite:Pd,detectOverflow:li,end:si,eventListeners:_n,flip:qc,hide:zc,left:Pe,main:Dc,modifierPhases:Ec,offset:Xc,placements:hn,popper:ni,popperGenerator:Fr,popperOffsets:wn,preventOverflow:Nc,read:yc,reference:Oc,right:Qe,start:It,top:Ee,variationPlacements:ln,viewport:cn,write:Sc},Symbol.toStringTag,{value:"Module"})),St=new Map,Cn={set(i,e,t){St.has(i)||St.set(i,new Map);const r=St.get(i);r.has(e)||r.size===0?r.set(e,t):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(i,e)=>St.has(i)&&St.get(i).get(e)||null,remove(i,e){if(!St.has(i))return;const t=St.get(i);t.delete(e),t.size===0&&St.delete(i)}},xn="transitionend",Gc=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),i),Hc=i=>{i.dispatchEvent(new Event(xn))},mt=i=>!(!i||typeof i!="object")&&(i.jquery!==void 0&&(i=i[0]),i.nodeType!==void 0),Tt=i=>mt(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(Gc(i)):null,hi=i=>{if(!mt(i)||i.getClientRects().length===0)return!1;const e=getComputedStyle(i).getPropertyValue("visibility")==="visible",t=i.closest("details:not([open])");if(!t)return e;if(t!==i){const r=i.closest("summary");if(r&&r.parentNode!==t||r===null)return!1}return e},Et=i=>!i||i.nodeType!==Node.ELEMENT_NODE||!!i.classList.contains("disabled")||(i.disabled!==void 0?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false"),Zc=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const e=i.getRootNode();return e instanceof ShadowRoot?e:null}return i instanceof ShadowRoot?i:i.parentNode?Zc(i.parentNode):null},$r=()=>{},Ai=i=>{i.offsetHeight},Jc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Sn=[],Ne=()=>document.documentElement.dir==="rtl",Ue=i=>{var e;e=()=>{const t=Jc();if(t){const r=i.NAME,s=t.fn[r];t.fn[r]=i.jQueryInterface,t.fn[r].Constructor=i,t.fn[r].noConflict=()=>(t.fn[r]=s,i.jQueryInterface)}},document.readyState==="loading"?(Sn.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Sn)t()}),Sn.push(e)):e()},$e=(i,e=[],t=i)=>typeof i=="function"?i(...e):t,Kc=(i,e,t=!0)=>{if(!t)return void $e(i);const r=(a=>{if(!a)return 0;let{transitionDuration:o,transitionDelay:c}=window.getComputedStyle(a);const l=Number.parseFloat(o),h=Number.parseFloat(c);return l||h?(o=o.split(",")[0],c=c.split(",")[0],1e3*(Number.parseFloat(o)+Number.parseFloat(c))):0})(e)+5;let s=!1;const n=({target:a})=>{a===e&&(s=!0,e.removeEventListener(xn,n),$e(i))};e.addEventListener(xn,n),setTimeout(()=>{s||Hc(e)},r)},Tn=(i,e,t,r)=>{const s=i.length;let n=i.indexOf(e);return n===-1?!t&&r?i[s-1]:i[0]:(n+=t?1:-1,r&&(n=(n+s)%s),i[Math.max(0,Math.min(n,s-1))])},kd=/[^.]*(?=\..*)\.|.*/,Ld=/\..*/,Rd=/::\d+$/,En={};let el=1;const tl={mouseenter:"mouseover",mouseleave:"mouseout"},Ad=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function il(i,e){return e&&`${e}::${el++}`||i.uidEvent||el++}function rl(i){const e=il(i);return i.uidEvent=e,En[e]=En[e]||{},En[e]}function sl(i,e,t=null){return Object.values(i).find(r=>r.callable===e&&r.delegationSelector===t)}function nl(i,e,t){const r=typeof e=="string",s=r?t:e||t;let n=al(i);return Ad.has(n)||(n=i),[r,s,n]}function ol(i,e,t,r,s){if(typeof e!="string"||!i)return;let[n,a,o]=nl(e,t,r);e in tl&&(a=(d=>function(p){if(!p.relatedTarget||p.relatedTarget!==p.delegateTarget&&!p.delegateTarget.contains(p.relatedTarget))return d.call(this,p)})(a));const c=rl(i),l=c[o]||(c[o]={}),h=sl(l,a,n?t:null);if(h)return void(h.oneOff=h.oneOff&&s);const u=il(a,e.replace(kd,"")),f=n?function(m,d,p){return function g(_){const y=m.querySelectorAll(d);for(let{target:O}=_;O&&O!==this;O=O.parentNode)for(const v of y)if(v===O)return kn(_,{delegateTarget:O}),g.oneOff&&q.off(m,_.type,d,p),p.apply(O,[_])}}(i,t,a):function(m,d){return function p(g){return kn(g,{delegateTarget:m}),p.oneOff&&q.off(m,g.type,d),d.apply(m,[g])}}(i,a);f.delegationSelector=n?t:null,f.callable=a,f.oneOff=s,f.uidEvent=u,l[u]=f,i.addEventListener(o,f,n)}function Pn(i,e,t,r,s){const n=sl(e[t],r,s);n&&(i.removeEventListener(t,n,!!s),delete e[t][n.uidEvent])}function Md(i,e,t,r){const s=e[t]||{};for(const[n,a]of Object.entries(s))n.includes(r)&&Pn(i,e,t,a.callable,a.delegationSelector)}function al(i){return i=i.replace(Ld,""),tl[i]||i}const q={on(i,e,t,r){ol(i,e,t,r,!1)},one(i,e,t,r){ol(i,e,t,r,!0)},off(i,e,t,r){if(typeof e!="string"||!i)return;const[s,n,a]=nl(e,t,r),o=a!==e,c=rl(i),l=c[a]||{},h=e.startsWith(".");if(n===void 0){if(h)for(const u of Object.keys(c))Md(i,c,u,e.slice(1));for(const[u,f]of Object.entries(l)){const m=u.replace(Rd,"");o&&!e.includes(m)||Pn(i,c,a,f.callable,f.delegationSelector)}}else{if(!Object.keys(l).length)return;Pn(i,c,a,n,s?t:null)}},trigger(i,e,t){if(typeof e!="string"||!i)return null;const r=Jc();let s=null,n=!0,a=!0,o=!1;e!==al(e)&&r&&(s=r.Event(e,t),r(i).trigger(s),n=!s.isPropagationStopped(),a=!s.isImmediatePropagationStopped(),o=s.isDefaultPrevented());const c=kn(new Event(e,{bubbles:n,cancelable:!0}),t);return o&&c.preventDefault(),a&&i.dispatchEvent(c),c.defaultPrevented&&s&&s.preventDefault(),c}};function kn(i,e={}){for(const[t,r]of Object.entries(e))try{i[t]=r}catch{Object.defineProperty(i,t,{configurable:!0,get:()=>r})}return i}function cl(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Ln(i){return i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const _t={setDataAttribute(i,e,t){i.setAttribute(`data-bs-${Ln(e)}`,t)},removeDataAttribute(i,e){i.removeAttribute(`data-bs-${Ln(e)}`)},getDataAttributes(i){if(!i)return{};const e={},t=Object.keys(i.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let s=r.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=cl(i.dataset[r])}return e},getDataAttribute:(i,e)=>cl(i.getAttribute(`data-bs-${Ln(e)}`))};class Mi{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=mt(t)?_t.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...mt(t)?_t.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,n]of Object.entries(t)){const a=e[s],o=mt(a)?"element":(r=a)==null?`${r}`:Object.prototype.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}var r}}class et extends Mi{constructor(e,t){super(),(e=Tt(e))&&(this._element=e,this._config=this._getConfig(t),Cn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Cn.remove(this._element,this.constructor.DATA_KEY),q.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){Kc(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Cn.get(Tt(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Rn=i=>{let e=i.getAttribute("data-bs-target");if(!e||e==="#"){let t=i.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?Gc(t.trim()):null}return e},Z={find:(i,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,i)),findOne:(i,e=document.documentElement)=>Element.prototype.querySelector.call(e,i),children:(i,e)=>[].concat(...i.children).filter(t=>t.matches(e)),parents(i,e){const t=[];let r=i.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(i,e){let t=i.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(i,e){let t=i.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(i){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,i).filter(t=>!Et(t)&&hi(t))},getSelectorFromElement(i){const e=Rn(i);return e&&Z.findOne(e)?e:null},getElementFromSelector(i){const e=Rn(i);return e?Z.findOne(e):null},getMultipleElementsFromSelector(i){const e=Rn(i);return e?Z.find(e):[]}},Br=(i,e="hide")=>{const t=`click.dismiss${i.EVENT_KEY}`,r=i.NAME;q.on(document,t,`[data-bs-dismiss="${r}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Et(this))return;const n=Z.getElementFromSelector(this)||this.closest(`.${r}`);i.getOrCreateInstance(n)[e]()})},ll=".bs.alert",Fd=`close${ll}`,$d=`closed${ll}`;class Qr extends et{static get NAME(){return"alert"}close(){if(q.trigger(this._element,Fd).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),q.trigger(this._element,$d),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Qr.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Br(Qr,"close"),Ue(Qr);const hl='[data-bs-toggle="button"]';class Ir extends et{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Ir.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}q.on(document,"click.bs.button.data-api",hl,i=>{i.preventDefault();const e=i.target.closest(hl);Ir.getOrCreateInstance(e).toggle()}),Ue(Ir);const ui=".bs.swipe",Bd=`touchstart${ui}`,Qd=`touchmove${ui}`,Id=`touchend${ui}`,qd=`pointerdown${ui}`,Wd=`pointerup${ui}`,jd={endCallback:null,leftCallback:null,rightCallback:null},zd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class qr extends Mi{constructor(e,t){super(),this._element=e,e&&qr.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return jd}static get DefaultType(){return zd}static get NAME(){return"swipe"}dispose(){q.off(this._element,ui)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),$e(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&$e(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(q.on(this._element,qd,e=>this._start(e)),q.on(this._element,Wd,e=>this._end(e)),this._element.classList.add("pointer-event")):(q.on(this._element,Bd,e=>this._start(e)),q.on(this._element,Qd,e=>this._move(e)),q.on(this._element,Id,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType==="pen"||e.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Pt=".bs.carousel",ul=".data-api",Fi="next",di="prev",pi="left",Wr="right",Xd=`slide${Pt}`,An=`slid${Pt}`,Nd=`keydown${Pt}`,Ud=`mouseenter${Pt}`,Yd=`mouseleave${Pt}`,Vd=`dragstart${Pt}`,Gd=`load${Pt}${ul}`,Hd=`click${Pt}${ul}`,dl="carousel",jr="active",pl=".active",fl=".carousel-item",Zd=pl+fl,Jd={ArrowLeft:Wr,ArrowRight:pi},Kd={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ep={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $i extends et{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===dl&&this.cycle()}static get Default(){return Kd}static get DefaultType(){return ep}static get NAME(){return"carousel"}next(){this._slide(Fi)}nextWhenVisible(){!document.hidden&&hi(this._element)&&this.next()}prev(){this._slide(di)}pause(){this._isSliding&&Hc(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?q.one(this._element,An,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void q.one(this._element,An,()=>this.to(e));const r=this._getItemIndex(this._getActive());if(r===e)return;const s=e>r?Fi:di;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&q.on(this._element,Nd,e=>this._keydown(e)),this._config.pause==="hover"&&(q.on(this._element,Ud,()=>this.pause()),q.on(this._element,Yd,()=>this._maybeEnableCycle())),this._config.touch&&qr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of Z.find(".carousel-item img",this._element))q.on(t,Vd,r=>r.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(pi)),rightCallback:()=>this._slide(this._directionToOrder(Wr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new qr(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Jd[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Z.findOne(pl,this._indicatorsElement);t.classList.remove(jr),t.removeAttribute("aria-current");const r=Z.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(jr),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const r=this._getActive(),s=e===Fi,n=t||Tn(this._getItems(),r,s,this._config.wrap);if(n===r)return;const a=this._getItemIndex(n),o=u=>q.trigger(this._element,u,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:a});if(o(Xd).defaultPrevented||!r||!n)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=n;const l=s?"carousel-item-start":"carousel-item-end",h=s?"carousel-item-next":"carousel-item-prev";n.classList.add(h),Ai(n),r.classList.add(l),n.classList.add(l),this._queueCallback(()=>{n.classList.remove(l,h),n.classList.add(jr),r.classList.remove(jr,h,l),this._isSliding=!1,o(An)},r,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Z.findOne(Zd,this._element)}_getItems(){return Z.find(fl,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Ne()?e===pi?di:Fi:e===pi?Fi:di}_orderToDirection(e){return Ne()?e===di?pi:Wr:e===di?Wr:pi}static jQueryInterface(e){return this.each(function(){const t=$i.getOrCreateInstance(this,e);if(typeof e!="number"){if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}q.on(document,Hd,"[data-bs-slide], [data-bs-slide-to]",function(i){const e=Z.getElementFromSelector(this);if(!e||!e.classList.contains(dl))return;i.preventDefault();const t=$i.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");return r?(t.to(r),void t._maybeEnableCycle()):_t.getDataAttribute(this,"slide")==="next"?(t.next(),void t._maybeEnableCycle()):(t.prev(),void t._maybeEnableCycle())}),q.on(window,Gd,()=>{const i=Z.find('[data-bs-ride="carousel"]');for(const e of i)$i.getOrCreateInstance(e)}),Ue($i);const Bi=".bs.collapse",tp=`show${Bi}`,ip=`shown${Bi}`,rp=`hide${Bi}`,sp=`hidden${Bi}`,np=`click${Bi}.data-api`,Mn="show",fi="collapse",zr="collapsing",op=`:scope .${fi} .${fi}`,Fn='[data-bs-toggle="collapse"]',ap={parent:null,toggle:!0},cp={parent:"(null|element)",toggle:"boolean"};class Qi extends et{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const r=Z.find(Fn);for(const s of r){const n=Z.getSelectorFromElement(s),a=Z.find(n).filter(o=>o===this._element);n!==null&&a.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ap}static get DefaultType(){return cp}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(s=>s!==this._element).map(s=>Qi.getOrCreateInstance(s,{toggle:!1}))),e.length&&e[0]._isTransitioning||q.trigger(this._element,tp).defaultPrevented)return;for(const s of e)s.hide();const t=this._getDimension();this._element.classList.remove(fi),this._element.classList.add(zr),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zr),this._element.classList.add(fi,Mn),this._element.style[t]="",q.trigger(this._element,ip)},this._element,!0),this._element.style[t]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown()||q.trigger(this._element,rp).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ai(this._element),this._element.classList.add(zr),this._element.classList.remove(fi,Mn);for(const t of this._triggerArray){const r=Z.getElementFromSelector(t);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zr),this._element.classList.add(fi),q.trigger(this._element,sp)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Mn)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Tt(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Fn);for(const t of e){const r=Z.getElementFromSelector(t);r&&this._addAriaAndCollapsedClass([t],this._isShown(r))}}_getFirstLevelChildren(e){const t=Z.find(op,this._config.parent);return Z.find(e,this._config.parent).filter(r=>!t.includes(r))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const r of e)r.classList.toggle("collapsed",!t),r.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const r=Qi.getOrCreateInstance(this,t);if(typeof e=="string"){if(r[e]===void 0)throw new TypeError(`No method named "${e}"`);r[e]()}})}}q.on(document,np,Fn,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const e of Z.getMultipleElementsFromSelector(this))Qi.getOrCreateInstance(e,{toggle:!1}).toggle()}),Ue(Qi);const gl="dropdown",jt=".bs.dropdown",$n=".data-api",lp="ArrowUp",ml="ArrowDown",hp=`hide${jt}`,up=`hidden${jt}`,dp=`show${jt}`,pp=`shown${jt}`,_l=`click${jt}${$n}`,Ol=`keydown${jt}${$n}`,fp=`keyup${jt}${$n}`,gi="show",zt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gp=`${zt}.${gi}`,Xr=".dropdown-menu",mp=Ne()?"top-end":"top-start",_p=Ne()?"top-start":"top-end",Op=Ne()?"bottom-end":"bottom-start",vp=Ne()?"bottom-start":"bottom-end",yp=Ne()?"left-start":"right-start",bp=Ne()?"right-start":"left-start",wp={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Dp={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class dt extends et{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,Xr)[0]||Z.prev(this._element,Xr)[0]||Z.findOne(Xr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wp}static get DefaultType(){return Dp}static get NAME(){return gl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Et(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!q.trigger(this._element,dp,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))q.on(t,"mouseover",$r);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(gi),this._element.classList.add(gi),q.trigger(this._element,pp,e)}}hide(){if(Et(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!q.trigger(this._element,hp,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))q.off(t,"mouseover",$r);this._popper&&this._popper.destroy(),this._menu.classList.remove(gi),this._element.classList.remove(gi),this._element.setAttribute("aria-expanded","false"),_t.removeDataAttribute(this._menu,"popper"),q.trigger(this._element,up,e)}}_getConfig(e){if(typeof(e=super._getConfig(e)).reference=="object"&&!mt(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${gl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(Vc===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:mt(this._config.reference)?e=Tt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=Dn(e,this._menu,t)}_isShown(){return this._menu.classList.contains(gi)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return yp;if(e.classList.contains("dropstart"))return bp;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains("dropup")?t?_p:mp:t?vp:Op}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(_t.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...$e(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const r=Z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(s=>hi(s));r.length&&Tn(r,t,e===ml,!r.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=dt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0)throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===2||e.type==="keyup"&&e.key!=="Tab")return;const t=Z.find(gp);for(const r of t){const s=dt.getInstance(r);if(!s||s._config.autoClose===!1)continue;const n=e.composedPath(),a=n.includes(s._menu);if(n.includes(s._element)||s._config.autoClose==="inside"&&!a||s._config.autoClose==="outside"&&a||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key==="Tab"||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:s._element};e.type==="click"&&(o.clickEvent=e),s._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),r=e.key==="Escape",s=[lp,ml].includes(e.key);if(!s&&!r||t&&!r)return;e.preventDefault();const n=this.matches(zt)?this:Z.prev(this,zt)[0]||Z.next(this,zt)[0]||Z.findOne(zt,e.delegateTarget.parentNode),a=dt.getOrCreateInstance(n);if(s)return e.stopPropagation(),a.show(),void a._selectMenuItem(e);a._isShown()&&(e.stopPropagation(),a.hide(),n.focus())}}q.on(document,Ol,zt,dt.dataApiKeydownHandler),q.on(document,Ol,Xr,dt.dataApiKeydownHandler),q.on(document,_l,dt.clearMenus),q.on(document,fp,dt.clearMenus),q.on(document,_l,zt,function(i){i.preventDefault(),dt.getOrCreateInstance(this).toggle()}),Ue(dt);const vl="backdrop",yl="show",bl=`mousedown.bs.${vl}`,Cp={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},xp={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class wl extends Mi{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Cp}static get DefaultType(){return xp}static get NAME(){return vl}show(e){if(!this._config.isVisible)return void $e(e);this._append();const t=this._getElement();this._config.isAnimated&&Ai(t),t.classList.add(yl),this._emulateAnimation(()=>{$e(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(yl),this._emulateAnimation(()=>{this.dispose(),$e(e)})):$e(e)}dispose(){this._isAppended&&(q.off(this._element,bl),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Tt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),q.on(e,bl,()=>{$e(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Kc(e,this._getElement(),this._config.isAnimated)}}const Nr=".bs.focustrap",Sp=`focusin${Nr}`,Tp=`keydown.tab${Nr}`,Dl="backward",Ep={autofocus:!0,trapElement:null},Pp={autofocus:"boolean",trapElement:"element"};class Cl extends Mi{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ep}static get DefaultType(){return Pp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),q.off(document,Nr),q.on(document,Sp,e=>this._handleFocusin(e)),q.on(document,Tp,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,q.off(document,Nr))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=Z.focusableChildren(t);r.length===0?t.focus():this._lastTabNavDirection===Dl?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key==="Tab"&&(this._lastTabNavDirection=e.shiftKey?Dl:"forward")}}const xl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Sl=".sticky-top",Ur="padding-right",Tl="margin-right";class Bn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ur,t=>t+e),this._setElementAttributes(xl,Ur,t=>t+e),this._setElementAttributes(Sl,Tl,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ur),this._resetElementAttributes(xl,Ur),this._resetElementAttributes(Sl,Tl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const s=this.getWidth();this._applyManipulationCallback(e,n=>{if(n!==this._element&&window.innerWidth>n.clientWidth+s)return;this._saveInitialAttribute(n,t);const a=window.getComputedStyle(n).getPropertyValue(t);n.style.setProperty(t,`${r(Number.parseFloat(a))}px`)})}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&_t.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,r=>{const s=_t.getDataAttribute(r,t);s!==null?(_t.removeDataAttribute(r,t),r.style.setProperty(t,s)):r.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(mt(e))t(e);else for(const r of Z.find(e,this._element))t(r)}}const Ye=".bs.modal",kp=`hide${Ye}`,Lp=`hidePrevented${Ye}`,El=`hidden${Ye}`,Pl=`show${Ye}`,Rp=`shown${Ye}`,Ap=`resize${Ye}`,Mp=`click.dismiss${Ye}`,Fp=`mousedown.dismiss${Ye}`,$p=`keydown.dismiss${Ye}`,Bp=`click${Ye}.data-api`,kl="modal-open",Ll="show",Qn="modal-static",Qp={backdrop:!0,focus:!0,keyboard:!0},Ip={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Xt extends et{constructor(e,t){super(e,t),this._dialog=Z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Bn,this._addEventListeners()}static get Default(){return Qp}static get DefaultType(){return Ip}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||q.trigger(this._element,Pl,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(kl),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||q.trigger(this._element,kp).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ll),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){q.off(window,Ye),q.off(this._dialog,Ye),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wl({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Cl({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Z.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),Ai(this._element),this._element.classList.add(Ll),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,q.trigger(this._element,Rp,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){q.on(this._element,$p,e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),q.on(window,Ap,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),q.on(this._element,Fp,e=>{q.one(this._element,Mp,t=>{this._element===e.target&&this._element===t.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(kl),this._resetAdjustments(),this._scrollBar.reset(),q.trigger(this._element,El)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(q.trigger(this._element,Lp).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;t==="hidden"||this._element.classList.contains(Qn)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Qn),this._queueCallback(()=>{this._element.classList.remove(Qn),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const s=Ne()?"paddingLeft":"paddingRight";this._element.style[s]=`${t}px`}if(!r&&e){const s=Ne()?"paddingRight":"paddingLeft";this._element.style[s]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const r=Xt.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0)throw new TypeError(`No method named "${e}"`);r[e](t)}})}}q.on(document,Bp,'[data-bs-toggle="modal"]',function(i){const e=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),q.one(e,Pl,r=>{r.defaultPrevented||q.one(e,El,()=>{hi(this)&&this.focus()})});const t=Z.findOne(".modal.show");t&&Xt.getInstance(t).hide(),Xt.getOrCreateInstance(e).toggle(this)}),Br(Xt),Ue(Xt);const Ot=".bs.offcanvas",Rl=".data-api",qp=`load${Ot}${Rl}`,Al="show",Ml="showing",Fl="hiding",$l=".offcanvas.show",Wp=`show${Ot}`,jp=`shown${Ot}`,zp=`hide${Ot}`,Bl=`hidePrevented${Ot}`,Ql=`hidden${Ot}`,Xp=`resize${Ot}`,Np=`click${Ot}${Rl}`,Up=`keydown.dismiss${Ot}`,Yp={backdrop:!0,keyboard:!0,scroll:!1},Vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class kt extends et{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yp}static get DefaultType(){return Vp}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||q.trigger(this._element,Wp,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Bn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ml),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Al),this._element.classList.remove(Ml),q.trigger(this._element,jp,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(q.trigger(this._element,zp).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Fl),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Al,Fl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Bn().reset(),q.trigger(this._element,Ql)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=!!this._config.backdrop;return new wl({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{this._config.backdrop!=="static"?this.hide():q.trigger(this._element,Bl)}:null})}_initializeFocusTrap(){return new Cl({trapElement:this._element})}_addEventListeners(){q.on(this._element,Up,e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():q.trigger(this._element,Bl))})}static jQueryInterface(e){return this.each(function(){const t=kt.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}q.on(document,Np,'[data-bs-toggle="offcanvas"]',function(i){const e=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Et(this))return;q.one(e,Ql,()=>{hi(this)&&this.focus()});const t=Z.findOne($l);t&&t!==e&&kt.getInstance(t).hide(),kt.getOrCreateInstance(e).toggle(this)}),q.on(window,qp,()=>{for(const i of Z.find($l))kt.getOrCreateInstance(i).show()}),q.on(window,Xp,()=>{for(const i of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&kt.getOrCreateInstance(i).hide()}),Br(kt),Ue(kt);const Il={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Gp=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Hp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Zp=(i,e)=>{const t=i.nodeName.toLowerCase();return e.includes(t)?!Gp.has(t)||!!Hp.test(i.nodeValue):e.filter(r=>r instanceof RegExp).some(r=>r.test(t))},Jp={allowList:Il,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Kp={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ef={entry:"(string|element|function|null)",selector:"(string|element)"};class tf extends Mi{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Jp}static get DefaultType(){return Kp}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,n]of Object.entries(this._config.content))this._setContent(e,n,s);const t=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&t.classList.add(...r.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,r]of Object.entries(e))super._typeCheckConfig({selector:t,entry:r},ef)}_setContent(e,t,r){const s=Z.findOne(r,e);s&&((t=this._resolvePossibleFunction(t))?mt(t)?this._putElementInTemplate(Tt(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(t,r,s){if(!t.length)return t;if(s&&typeof s=="function")return s(t);const n=new window.DOMParser().parseFromString(t,"text/html"),a=[].concat(...n.body.querySelectorAll("*"));for(const o of a){const c=o.nodeName.toLowerCase();if(!Object.keys(r).includes(c)){o.remove();continue}const l=[].concat(...o.attributes),h=[].concat(r["*"]||[],r[c]||[]);for(const u of l)Zp(u,h)||o.removeAttribute(u.nodeName)}return n.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return $e(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const rf=new Set(["sanitize","allowList","sanitizeFn"]),In="fade",Yr="show",ql=".modal",Wl="hide.bs.modal",Ii="hover",qn="focus",sf={AUTO:"auto",TOP:"top",RIGHT:Ne()?"left":"right",BOTTOM:"bottom",LEFT:Ne()?"right":"left"},nf={allowList:Il,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},of={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class qe extends et{constructor(e,t){if(Vc===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return nf}static get DefaultType(){return of}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),q.off(this._element.closest(ql),Wl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=q.trigger(this._element,this.constructor.eventName("show")),t=(Zc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),q.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(r),r.classList.add(Yr),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))q.on(n,"mouseover",$r);this._queueCallback(()=>{q.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!q.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Yr),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))q.off(e,"mouseover",$r);this._activeTrigger.click=!1,this._activeTrigger[qn]=!1,this._activeTrigger[Ii]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),q.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(In,Yr),t.classList.add(`bs-${this.constructor.NAME}-auto`);const r=(s=>{do s+=Math.floor(1e6*Math.random());while(document.getElementById(s));return s})(this.constructor.NAME).toString();return t.setAttribute("id",r),this._isAnimated()&&t.classList.add(In),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new tf({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(In)}_isShown(){return this.tip&&this.tip.classList.contains(Yr)}_createPopper(e){const t=$e(this._config.placement,[this,e,this._element]),r=sf[t.toUpperCase()];return Dn(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return $e(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...t,...$e(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")q.on(this._element,this.constructor.eventName("click"),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(t!=="manual"){const r=t===Ii?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),s=t===Ii?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");q.on(this._element,r,this._config.selector,n=>{const a=this._initializeOnDelegatedTarget(n);a._activeTrigger[n.type==="focusin"?qn:Ii]=!0,a._enter()}),q.on(this._element,s,this._config.selector,n=>{const a=this._initializeOnDelegatedTarget(n);a._activeTrigger[n.type==="focusout"?qn:Ii]=a._element.contains(n.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},q.on(this._element.closest(ql),Wl,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=_t.getDataAttributes(this._element);for(const r of Object.keys(t))rf.has(r)&&delete t[r];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Tt(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,r]of Object.entries(this._config))this.constructor.Default[t]!==r&&(e[t]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=qe.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0)throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ue(qe);const af={...qe.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},cf={...qe.DefaultType,content:"(null|string|element|function)"};class Wn extends qe{static get Default(){return af}static get DefaultType(){return cf}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Wn.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0)throw new TypeError(`No method named "${e}"`);t[e]()}})}}Ue(Wn);const jn=".bs.scrollspy",lf=`activate${jn}`,jl=`click${jn}`,hf=`load${jn}.data-api`,mi="active",zn="[href]",zl=".nav-link",uf=`${zl}, .nav-item > ${zl}, .list-group-item`,df={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},pf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Vr extends et{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return df}static get DefaultType(){return pf}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Tt(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(q.off(this._config.target,jl),q.on(this._config.target,jl,zn,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const r=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(r.scrollTo)return void r.scrollTo({top:s,behavior:"smooth"});r.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=a=>this._targetLinks.get(`#${a.target.id}`),r=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(t(a))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const a of e){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(a));continue}const o=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&o){if(r(a),!s)return}else n||o||r(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Z.find(zn,this._config.target);for(const t of e){if(!t.hash||Et(t))continue;const r=Z.findOne(decodeURI(t.hash),this._element);hi(r)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(mi),this._activateParents(e),q.trigger(this._element,lf,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))Z.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(mi);else for(const t of Z.parents(e,".nav, .list-group"))for(const r of Z.prev(t,uf))r.classList.add(mi)}_clearActiveClass(e){e.classList.remove(mi);const t=Z.find(`${zn}.${mi}`,e);for(const r of t)r.classList.remove(mi)}static jQueryInterface(e){return this.each(function(){const t=Vr.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}q.on(window,hf,()=>{for(const i of Z.find('[data-bs-spy="scroll"]'))Vr.getOrCreateInstance(i)}),Ue(Vr);const Nt=".bs.tab",ff=`hide${Nt}`,gf=`hidden${Nt}`,mf=`show${Nt}`,_f=`shown${Nt}`,Of=`click${Nt}`,vf=`keydown${Nt}`,yf=`load${Nt}`,bf="ArrowLeft",Xl="ArrowRight",wf="ArrowUp",Nl="ArrowDown",Xn="Home",Ul="End",Ut="active",Yl="fade",Nn="show",Vl=".dropdown-toggle",Un=`:not(${Vl})`,Gl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Yn=`${`.nav-link${Un}, .list-group-item${Un}, [role="tab"]${Un}`}, ${Gl}`,Df=`.${Ut}[data-bs-toggle="tab"], .${Ut}[data-bs-toggle="pill"], .${Ut}[data-bs-toggle="list"]`;class _i extends et{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),q.on(this._element,vf,t=>this._keydown(t)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),r=t?q.trigger(t,ff,{relatedTarget:e}):null;q.trigger(e,mf,{relatedTarget:t}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ut),this._activate(Z.getElementFromSelector(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),q.trigger(e,_f,{relatedTarget:t})):e.classList.add(Nn)},e,e.classList.contains(Yl)))}_deactivate(e,t){e&&(e.classList.remove(Ut),e.blur(),this._deactivate(Z.getElementFromSelector(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),q.trigger(e,gf,{relatedTarget:t})):e.classList.remove(Nn)},e,e.classList.contains(Yl)))}_keydown(e){if(![bf,Xl,wf,Nl,Xn,Ul].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(s=>!Et(s));let r;if([Xn,Ul].includes(e.key))r=t[e.key===Xn?0:t.length-1];else{const s=[Xl,Nl].includes(e.key);r=Tn(t,e.target,s,!0)}r&&(r.focus({preventScroll:!0}),_i.getOrCreateInstance(r).show())}_getChildren(){return Z.find(Yn,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const r of t)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",t),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Z.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const r=this._getOuterElement(e);if(!r.classList.contains("dropdown"))return;const s=(n,a)=>{const o=Z.findOne(n,r);o&&o.classList.toggle(a,t)};s(Vl,Ut),s(".dropdown-menu",Nn),r.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,r){e.hasAttribute(t)||e.setAttribute(t,r)}_elemIsActive(e){return e.classList.contains(Ut)}_getInnerElement(e){return e.matches(Yn)?e:Z.findOne(Yn,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=_i.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}q.on(document,Of,Gl,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),Et(this)||_i.getOrCreateInstance(this).show()}),q.on(window,yf,()=>{for(const i of Z.find(Df))_i.getOrCreateInstance(i)}),Ue(_i);const Lt=".bs.toast",Cf=`mouseover${Lt}`,xf=`mouseout${Lt}`,Sf=`focusin${Lt}`,Tf=`focusout${Lt}`,Ef=`hide${Lt}`,Pf=`hidden${Lt}`,kf=`show${Lt}`,Lf=`shown${Lt}`,Hl="hide",Gr="show",Hr="showing",Rf={animation:"boolean",autohide:"boolean",delay:"number"},Af={animation:!0,autohide:!0,delay:5e3};class Zr extends et{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Af}static get DefaultType(){return Rf}static get NAME(){return"toast"}show(){q.trigger(this._element,kf).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Hl),Ai(this._element),this._element.classList.add(Gr,Hr),this._queueCallback(()=>{this._element.classList.remove(Hr),q.trigger(this._element,Lf),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(q.trigger(this._element,Ef).defaultPrevented||(this._element.classList.add(Hr),this._queueCallback(()=>{this._element.classList.add(Hl),this._element.classList.remove(Hr,Gr),q.trigger(this._element,Pf)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gr),super.dispose()}isShown(){return this._element.classList.contains(Gr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){q.on(this._element,Cf,e=>this._onInteraction(e,!0)),q.on(this._element,xf,e=>this._onInteraction(e,!1)),q.on(this._element,Sf,e=>this._onInteraction(e,!0)),q.on(this._element,Tf,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Zr.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Br(Zr),Ue(Zr);const Mf=typeof navigator>"u"?"node":navigator.userAgent,Zl=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(Mf);let Vn;const Ff=async()=>Vn??(Vn=await(async()=>{try{return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(await navigator.mediaDevices.enumerateDevices()).some(i=>i.kind==="videoinput"):(console.warn("navigator.mediaDevices.enumerateDevices not supported"),!1)}catch(i){return console.warn(i),!1}})()),Gn=(i,e=100)=>{let t;return function(...r){clearTimeout(t),t=setTimeout(()=>i.apply(this,r),e)}};function Jl(i,e){localStorage[i]=e,sessionStorage[i]=e}function Jr(i){return Yg.sanitize(i)}class $f{constructor(e,t){this.contentSelector=e,this.buttonSelector=t,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(t),this.buttonEl.addEventListener("click",()=>{let r=new URL("./",window.location.href);r.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(r.toString()).then(()=>{qe.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),te(`${this.buttonSelector}.btn-primary`).style.display="none",te(`${this.buttonSelector}.btn-success`).style.display="",setTimeout(()=>{te(`${this.buttonSelector}.btn-primary`).style.display="",te(`${this.buttonSelector}.btn-success`).style.display="none",qe.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(s){console.error("Async: Could not copy text: ",s)})})}}var Kl,Bf={exports:{}};Kl=()=>(()=>{var i={903:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseRenderLayer=void 0;const o=a(274),c=a(627),l=a(237),h=a(860),u=a(374),f=a(296),m=a(345),d=a(859),p=a(399),g=a(855);class _ extends d.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var v;return(v=this._charAtlas)===null||v===void 0?void 0:v.pages[0].canvas}constructor(v,S,T,k,b,D,E,w,x,L){super(),this._terminal=v,this._container=S,this._alpha=b,this._themeService=D,this._bufferService=E,this._optionsService=w,this._decorationService=x,this._coreBrowserService=L,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,f.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new d.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new m.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new o.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${T}-layer`),this._canvas.style.zIndex=k.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(P=>{this._refreshCharAtlas(P),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,d.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(v,S){}handleSelectionChanged(v,S,T=!1){this._selectionModel.update(this._terminal,v,S,T)}_setTransparency(v){if(v===this._alpha)return;const S=this._canvas;this._alpha=v,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,S),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(v){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,c.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,v,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,m.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let S=0;S<this._charAtlas.pages.length;S++)this._bitmapGenerator[S]=new y(this._charAtlas.pages[S].canvas)}}resize(v){this._deviceCellWidth=v.device.cell.width,this._deviceCellHeight=v.device.cell.height,this._deviceCharWidth=v.device.char.width,this._deviceCharHeight=v.device.char.height,this._deviceCharLeft=v.device.char.left,this._deviceCharTop=v.device.char.top,this._canvas.width=v.device.canvas.width,this._canvas.height=v.device.canvas.height,this._canvas.style.width=`${v.css.canvas.width}px`,this._canvas.style.height=`${v.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var v;(v=this._charAtlas)===null||v===void 0||v.clearTexture()}_fillCells(v,S,T,k){this._ctx.fillRect(v*this._deviceCellWidth,S*this._deviceCellHeight,T*this._deviceCellWidth,k*this._deviceCellHeight)}_fillMiddleLineAtCells(v,S,T=1){const k=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(v*this._deviceCellWidth,(S+1)*this._deviceCellHeight-k-this._coreBrowserService.dpr,T*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(v,S,T=1,k=0){this._ctx.fillRect(v*this._deviceCellWidth,(S+1)*this._deviceCellHeight+k-this._coreBrowserService.dpr-1,T*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(v,S,T=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const k=this._coreBrowserService.dpr;this._ctx.lineWidth=k;for(let b=0;b<T;b++){const D=(v+b)*this._deviceCellWidth,E=(v+b+.5)*this._deviceCellWidth,w=(v+b+1)*this._deviceCellWidth,x=(S+1)*this._deviceCellHeight-k-1,L=x-k,P=x+k;this._ctx.moveTo(D,x),this._ctx.bezierCurveTo(D,L,E,L,E,x),this._ctx.bezierCurveTo(E,P,w,P,w,x)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(v,S,T=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const k=this._coreBrowserService.dpr;this._ctx.lineWidth=k,this._ctx.setLineDash([2*k,k]);const b=v*this._deviceCellWidth,D=(S+1)*this._deviceCellHeight-k-1;this._ctx.moveTo(b,D);for(let E=0;E<T;E++){const w=(v+T+E)*this._deviceCellWidth;this._ctx.lineTo(w,D)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(v,S,T=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const k=this._coreBrowserService.dpr;this._ctx.lineWidth=k,this._ctx.setLineDash([4*k,3*k]);const b=v*this._deviceCellWidth,D=(v+T)*this._deviceCellWidth,E=(S+1)*this._deviceCellHeight-k-1;this._ctx.moveTo(b,E),this._ctx.lineTo(D,E),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(v,S,T){this._ctx.fillRect(v*this._deviceCellWidth,S*this._deviceCellHeight,this._coreBrowserService.dpr*T,this._deviceCellHeight)}_strokeRectAtCell(v,S,T,k){const b=this._coreBrowserService.dpr;this._ctx.lineWidth=b,this._ctx.strokeRect(v*this._deviceCellWidth+b/2,S*this._deviceCellHeight+b/2,T*this._deviceCellWidth-b,k*this._deviceCellHeight-b)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(v,S,T,k){this._alpha?this._ctx.clearRect(v*this._deviceCellWidth,S*this._deviceCellHeight,T*this._deviceCellWidth,k*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(v*this._deviceCellWidth,S*this._deviceCellHeight,T*this._deviceCellWidth,k*this._deviceCellHeight))}_fillCharTrueColor(v,S,T){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=l.TEXT_BASELINE,this._clipRow(T);let k=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(k=(0,h.tryDrawCustomChar)(this._ctx,v.getChars(),S*this._deviceCellWidth,T*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),k||this._ctx.fillText(v.getChars(),S*this._deviceCellWidth+this._deviceCharLeft,T*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(v,S,T){var k,b,D,E;const w=v.getChars();if(this._cellColorResolver.resolve(v,S,this._bufferService.buffer.ydisp+T),!this._charAtlas)return;let x;x=w&&w.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(w,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(v.getCode()||g.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),x.size.x&&x.size.y&&(this._ctx.save(),this._clipRow(T),this._bitmapGenerator[x.texturePage]&&this._charAtlas.pages[x.texturePage].canvas!==this._bitmapGenerator[x.texturePage].canvas&&((b=(k=this._bitmapGenerator[x.texturePage])===null||k===void 0?void 0:k.bitmap)===null||b===void 0||b.close(),delete this._bitmapGenerator[x.texturePage]),this._charAtlas.pages[x.texturePage].version!==((D=this._bitmapGenerator[x.texturePage])===null||D===void 0?void 0:D.version)&&(this._bitmapGenerator[x.texturePage]||(this._bitmapGenerator[x.texturePage]=new y(this._charAtlas.pages[x.texturePage].canvas)),this._bitmapGenerator[x.texturePage].refresh(),this._bitmapGenerator[x.texturePage].version=this._charAtlas.pages[x.texturePage].version),this._ctx.drawImage(((E=this._bitmapGenerator[x.texturePage])===null||E===void 0?void 0:E.bitmap)||this._charAtlas.pages[x.texturePage].canvas,x.texturePosition.x,x.texturePosition.y,x.size.x,x.size.y,S*this._deviceCellWidth+this._deviceCharLeft-x.offset.x,T*this._deviceCellHeight+this._deviceCharTop-x.offset.y,x.size.x,x.size.y),this._ctx.restore())}_clipRow(v){this._ctx.beginPath(),this._ctx.rect(0,v*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(v,S){return`${S?"italic":""} ${v?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}n.BaseRenderLayer=_;class y{get bitmap(){return this._bitmap}constructor(v){this.canvas=v,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var v;(v=this._bitmap)===null||v===void 0||v.close(),this._bitmap=void 0,p.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){var v;this._state===0&&((v=this._bitmap)===null||v===void 0||v.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(S=>{this._state===2?this.refresh():this._bitmap=S,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasRenderer=void 0;const o=a(627),c=a(56),l=a(374),h=a(345),u=a(859),f=a(873),m=a(43),d=a(630),p=a(744);class g extends u.Disposable{constructor(y,O,v,S,T,k,b,D,E,w,x){super(),this._terminal=y,this._screenElement=O,this._bufferService=S,this._charSizeService=T,this._optionsService=k,this._coreBrowserService=E,this._themeService=x,this._onRequestRedraw=this.register(new h.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new h.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new h.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const L=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new p.TextRenderLayer(this._terminal,this._screenElement,0,L,this._bufferService,this._optionsService,b,w,this._coreBrowserService,x),new d.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,w,this._optionsService,x),new m.LinkRenderLayer(this._terminal,this._screenElement,2,v,this._bufferService,this._optionsService,w,this._coreBrowserService,x),new f.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,D,this._coreBrowserService,w,x)];for(const P of this._renderLayers)(0,h.forwardEvent)(P.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,l.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,c.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(P,R)=>this._setCanvasDevicePixelDimensions(P,R))),this.register((0,u.toDisposable)(()=>{for(const P of this._renderLayers)P.dispose();(0,o.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(y,O){this._updateDimensions();for(const v of this._renderLayers)v.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(y=>y.handleBlur())}handleFocus(){this._runOperation(y=>y.handleFocus())}handleSelectionChanged(y,O,v=!1){this._runOperation(S=>S.handleSelectionChanged(y,O,v)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(y=>y.handleCursorMove())}clear(){this._runOperation(y=>y.reset())}_runOperation(y){for(const O of this._renderLayers)y(O)}renderRows(y,O){for(const v of this._renderLayers)v.handleGridChanged(y,O)}clearTextureAtlas(){for(const y of this._renderLayers)y.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const y=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*y),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*y),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/y),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/y),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(y,O){this.dimensions.device.canvas.height=O,this.dimensions.device.canvas.width=y;for(const v of this._renderLayers)v.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}n.CanvasRenderer=g},873:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CursorRenderLayer=void 0;const o=a(457),c=a(859),l=a(399),h=a(782),u=a(903);class f extends u.BaseRenderLayer{constructor(d,p,g,_,y,O,v,S,T,k){super(d,p,"cursor",g,!0,k,y,O,T,S),this._onRequestRedraw=_,this._coreService=v,this._cursorBlinkStateManager=this.register(new c.MutableDisposable),this._cell=new h.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(O.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(d){super.resize(d),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var d;this._clearCursor(),(d=this._cursorBlinkStateManager.value)===null||d===void 0||d.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var d;(d=this._cursorBlinkStateManager.value)===null||d===void 0||d.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var d;(d=this._cursorBlinkStateManager.value)===null||d===void 0||d.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new o.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var d;(d=this._cursorBlinkStateManager.value)===null||d===void 0||d.restartBlinkAnimation()}handleGridChanged(d,p){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(d){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const p=this._bufferService.buffer.ybase+this._bufferService.buffer.y,g=p-this._bufferService.buffer.ydisp;if(g<0||g>=this._bufferService.rows)return void this._clearCursor();const _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(p).loadCell(_,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const y=this._optionsService.rawOptions.cursorStyle,O=this._optionsService.rawOptions.cursorInactiveStyle;return O&&O!=="none"&&this._cursorRenderers[O](_,g,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=g,this._state.isFocused=!1,this._state.style=y,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===_&&this._state.y===g&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](_,g,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=g,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(l.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(d,p,g){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(d,p,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(d,p,g){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(d,p,g.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(g,d,p),this._ctx.restore()}_renderUnderlineCursor(d,p,g){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(d,p),this._ctx.restore()}_renderOutlineCursor(d,p,g){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(d,p,g.getWidth(),1),this._ctx.restore()}}n.CursorRenderLayer=f},574:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GridCache=void 0,n.GridCache=class{constructor(){this.cache=[]}resize(a,o){for(let c=0;c<a;c++){this.cache.length<=c&&this.cache.push([]);for(let l=this.cache[c].length;l<o;l++)this.cache[c].push(void 0);this.cache[c].length=o}this.cache.length=a}clear(){for(let a=0;a<this.cache.length;a++)for(let o=0;o<this.cache[a].length;o++)this.cache[a][o]=void 0}}},43:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LinkRenderLayer=void 0;const o=a(197),c=a(237),l=a(903);class h extends l.BaseRenderLayer{constructor(f,m,d,p,g,_,y,O,v){super(f,m,"link",d,!0,v,g,_,y,O),this.register(p.onShowLinkUnderline(S=>this._handleShowLinkUnderline(S))),this.register(p.onHideLinkUnderline(S=>this._handleHideLinkUnderline(S)))}resize(f){super.resize(f),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(f){if(f.fg===c.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:f.fg&&(0,o.is256Color)(f.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[f.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(let m=f.y1+1;m<f.y2;m++)this._fillBottomLineAtCells(0,m,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f}_handleHideLinkUnderline(f){this._clearCurrentLink()}}n.LinkRenderLayer=h},630:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionRenderLayer=void 0;const o=a(903);class c extends o.BaseRenderLayer{constructor(h,u,f,m,d,p,g,_){super(h,u,"selection",f,!0,_,m,g,p,d),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(h){super.resize(h),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(h,u,f){super.handleSelectionChanged(h,u,f),this._redrawSelection(h,u,f)}_redrawSelection(h,u,f){if(!this._didStateChange(h,u,f,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!h||!u)return void this._clearState();const m=h[1]-this._bufferService.buffer.ydisp,d=u[1]-this._bufferService.buffer.ydisp,p=Math.max(m,0),g=Math.min(d,this._bufferService.rows-1);if(p>=this._bufferService.rows||g<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,f){const _=h[0],y=u[0]-_,O=g-p+1;this._fillCells(_,p,y,O)}else{const _=m===p?h[0]:0,y=p===d?u[0]:this._bufferService.cols;this._fillCells(_,p,y-_,1);const O=Math.max(g-p-1,0);if(this._fillCells(0,p+1,this._bufferService.cols,O),p!==g){const v=d===g?u[0]:this._bufferService.cols;this._fillCells(0,g,v,1)}}this._state.start=[h[0],h[1]],this._state.end=[u[0],u[1]],this._state.columnSelectMode=f,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(h,u,f,m){return!this._areCoordinatesEqual(h,this._state.start)||!this._areCoordinatesEqual(u,this._state.end)||f!==this._state.columnSelectMode||m!==this._state.ydisp}_areCoordinatesEqual(h,u){return!(!h||!u)&&h[0]===u[0]&&h[1]===u[1]}}n.SelectionRenderLayer=c},744:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextRenderLayer=void 0;const o=a(577),c=a(147),l=a(782),h=a(855),u=a(903),f=a(574);class m extends u.BaseRenderLayer{constructor(p,g,_,y,O,v,S,T,k,b){super(p,g,"text",_,y,b,O,v,T,k),this._characterJoinerService=S,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new l.CellData,this._state=new f.GridCache,this.register(v.onSpecificOptionChange("allowTransparency",D=>this._setTransparency(D)))}resize(p){super.resize(p);const g=this._getFont(!1,!1);this._characterWidth===p.device.char.width&&this._characterFont===g||(this._characterWidth=p.device.char.width,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(p,g,_){for(let y=p;y<=g;y++){const O=y+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(O),S=this._characterJoinerService.getJoinedCharacters(O);for(let T=0;T<this._bufferService.cols;T++){v.loadCell(T,this._workCell);let k=this._workCell,b=!1,D=T;if(k.getWidth()!==0){if(S.length>0&&T===S[0][0]){b=!0;const E=S.shift();k=new o.JoinedCellData(this._workCell,v.translateToString(!0,E[0],E[1]),E[1]-E[0]),D=E[1]-1}!b&&this._isOverlapping(k)&&D<v.length-1&&v.getCodePoint(D+1)===h.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=8388608),_(k,T,y),T=D}}}}_drawBackground(p,g){const _=this._ctx,y=this._bufferService.cols;let O=0,v=0,S=null;_.save(),this._forEachCell(p,g,(T,k,b)=>{let D=null;T.isInverse()?D=T.isFgDefault()?this._themeService.colors.foreground.css:T.isFgRGB()?`rgb(${c.AttributeData.toColorRGB(T.getFgColor()).join(",")})`:this._themeService.colors.ansi[T.getFgColor()].css:T.isBgRGB()?D=`rgb(${c.AttributeData.toColorRGB(T.getBgColor()).join(",")})`:T.isBgPalette()&&(D=this._themeService.colors.ansi[T.getBgColor()].css);let E=!1;this._decorationService.forEachDecorationAtCell(k,this._bufferService.buffer.ydisp+b,void 0,w=>{w.options.layer!=="top"&&E||(w.backgroundColorRGB&&(D=w.backgroundColorRGB.css),E=w.options.layer==="top")}),S===null&&(O=k,v=b),b!==v?(_.fillStyle=S||"",this._fillCells(O,v,y-O,1),O=k,v=b):S!==D&&(_.fillStyle=S||"",this._fillCells(O,v,k-O,1),O=k,v=b),S=D}),S!==null&&(_.fillStyle=S,this._fillCells(O,v,y-O,1)),_.restore()}_drawForeground(p,g){this._forEachCell(p,g,(_,y,O)=>this._drawChars(_,y,O))}handleGridChanged(p,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,p,this._bufferService.cols,g-p+1),this._drawBackground(p,g),this._drawForeground(p,g))}_isOverlapping(p){if(p.getWidth()!==1||p.getCode()<256)return!1;const g=p.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;const _=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=_,_}}n.TextRenderLayer=m},274:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellColorResolver=void 0;let a,o=0,c=0,l=!1,h=!1,u=!1;n.CellColorResolver=class{constructor(f,m,d,p,g){this._terminal=f,this._selectionRenderModel=m,this._decorationService=d,this._coreBrowserService=p,this._themeService=g,this.result={fg:0,bg:0,ext:0}}resolve(f,m,d){this.result.bg=f.bg,this.result.fg=f.fg,this.result.ext=268435456&f.bg?f.extended.ext:0,c=0,o=0,h=!1,l=!1,u=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(m,d,"bottom",p=>{p.backgroundColorRGB&&(c=p.backgroundColorRGB.rgba>>8&16777215,h=!0),p.foregroundColorRGB&&(o=p.foregroundColorRGB.rgba>>8&16777215,l=!0)}),u=this._selectionRenderModel.isCellSelected(this._terminal,m,d),u&&(c=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,h=!0,a.selectionForeground&&(o=a.selectionForeground.rgba>>8&16777215,l=!0)),this._decorationService.forEachDecorationAtCell(m,d,"top",p=>{p.backgroundColorRGB&&(c=p.backgroundColorRGB.rgba>>8&16777215,h=!0),p.foregroundColorRGB&&(o=p.foregroundColorRGB.rgba>>8&16777215,l=!0)}),h&&(c=u?-16777216&f.bg&-134217729|c|50331648:-16777216&f.bg|c|50331648),l&&(o=-16777216&f.fg&-67108865|o|50331648),67108864&this.result.fg&&(h&&!l&&(o=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,l=!0),!h&&l&&(c=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,h=!0)),a=void 0,this.result.bg=h?c:this.result.bg,this.result.fg=l?o:this.result.fg}}},627:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.removeTerminalFromCache=n.acquireTextureAtlas=void 0;const o=a(509),c=a(197),l=[];n.acquireTextureAtlas=function(h,u,f,m,d,p,g,_){const y=(0,c.generateConfig)(m,d,p,g,u,f,_);for(let S=0;S<l.length;S++){const T=l[S],k=T.ownedBy.indexOf(h);if(k>=0){if((0,c.configEquals)(T.config,y))return T.atlas;T.ownedBy.length===1?(T.atlas.dispose(),l.splice(S,1)):T.ownedBy.splice(k,1);break}}for(let S=0;S<l.length;S++){const T=l[S];if((0,c.configEquals)(T.config,y))return T.ownedBy.push(h),T.atlas}const O=h._core,v={atlas:new o.TextureAtlas(document,y,O.unicodeService),config:y,ownedBy:[h]};return l.push(v),v.atlas},n.removeTerminalFromCache=function(h){for(let u=0;u<l.length;u++){const f=l[u].ownedBy.indexOf(h);if(f!==-1){l[u].ownedBy.length===1?(l[u].atlas.dispose(),l.splice(u,1)):l[u].ownedBy.splice(f,1);break}}}},197:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.is256Color=n.configEquals=n.generateConfig=void 0;const o=a(160);n.generateConfig=function(c,l,h,u,f,m,d){const p={foreground:m.foreground,background:m.background,cursor:o.NULL_COLOR,cursorAccent:o.NULL_COLOR,selectionForeground:o.NULL_COLOR,selectionBackgroundTransparent:o.NULL_COLOR,selectionBackgroundOpaque:o.NULL_COLOR,selectionInactiveBackgroundTransparent:o.NULL_COLOR,selectionInactiveBackgroundOpaque:o.NULL_COLOR,ansi:m.ansi.slice(),contrastCache:m.contrastCache,halfContrastCache:m.halfContrastCache};return{customGlyphs:f.customGlyphs,devicePixelRatio:d,letterSpacing:f.letterSpacing,lineHeight:f.lineHeight,deviceCellWidth:c,deviceCellHeight:l,deviceCharWidth:h,deviceCharHeight:u,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,drawBoldTextInBrightColors:f.drawBoldTextInBrightColors,minimumContrastRatio:f.minimumContrastRatio,colors:p}},n.configEquals=function(c,l){for(let h=0;h<c.colors.ansi.length;h++)if(c.colors.ansi[h].rgba!==l.colors.ansi[h].rgba)return!1;return c.devicePixelRatio===l.devicePixelRatio&&c.customGlyphs===l.customGlyphs&&c.lineHeight===l.lineHeight&&c.letterSpacing===l.letterSpacing&&c.fontFamily===l.fontFamily&&c.fontSize===l.fontSize&&c.fontWeight===l.fontWeight&&c.fontWeightBold===l.fontWeightBold&&c.allowTransparency===l.allowTransparency&&c.deviceCharWidth===l.deviceCharWidth&&c.deviceCharHeight===l.deviceCharHeight&&c.drawBoldTextInBrightColors===l.drawBoldTextInBrightColors&&c.minimumContrastRatio===l.minimumContrastRatio&&c.colors.foreground.rgba===l.colors.foreground.rgba&&c.colors.background.rgba===l.colors.background.rgba},n.is256Color=function(c){return(50331648&c)==16777216||(50331648&c)==33554432}},237:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const o=a(399);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=o.isFirefox||o.isLegacyEdge?"bottom":"ideographic"},457:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CursorBlinkStateManager=void 0,n.CursorBlinkStateManager=class{constructor(a,o){this._renderCallback=a,this._coreBrowserService=o,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const o=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,o>0)return void this._restartInterval(o)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const o=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(o)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tryDrawCustomChar=n.powerlineDefinitions=n.boxDrawingDefinitions=n.blockElementDefinitions=void 0;const o=a(374);n.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const c={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};n.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(m,d)=>`M0,${.5-d} L1,${.5-d} M0,${.5+d} L1,${.5+d}`},"\u2551":{1:(m,d)=>`M${.5-m},0 L${.5-m},1 M${.5+m},0 L${.5+m},1`},"\u2552":{1:(m,d)=>`M.5,1 L.5,${.5-d} L1,${.5-d} M.5,${.5+d} L1,${.5+d}`},"\u2553":{1:(m,d)=>`M${.5-m},1 L${.5-m},.5 L1,.5 M${.5+m},.5 L${.5+m},1`},"\u2554":{1:(m,d)=>`M1,${.5-d} L${.5-m},${.5-d} L${.5-m},1 M1,${.5+d} L${.5+m},${.5+d} L${.5+m},1`},"\u2555":{1:(m,d)=>`M0,${.5-d} L.5,${.5-d} L.5,1 M0,${.5+d} L.5,${.5+d}`},"\u2556":{1:(m,d)=>`M${.5+m},1 L${.5+m},.5 L0,.5 M${.5-m},.5 L${.5-m},1`},"\u2557":{1:(m,d)=>`M0,${.5+d} L${.5-m},${.5+d} L${.5-m},1 M0,${.5-d} L${.5+m},${.5-d} L${.5+m},1`},"\u2558":{1:(m,d)=>`M.5,0 L.5,${.5+d} L1,${.5+d} M.5,${.5-d} L1,${.5-d}`},"\u2559":{1:(m,d)=>`M1,.5 L${.5-m},.5 L${.5-m},0 M${.5+m},.5 L${.5+m},0`},"\u255A":{1:(m,d)=>`M1,${.5-d} L${.5+m},${.5-d} L${.5+m},0 M1,${.5+d} L${.5-m},${.5+d} L${.5-m},0`},"\u255B":{1:(m,d)=>`M0,${.5+d} L.5,${.5+d} L.5,0 M0,${.5-d} L.5,${.5-d}`},"\u255C":{1:(m,d)=>`M0,.5 L${.5+m},.5 L${.5+m},0 M${.5-m},.5 L${.5-m},0`},"\u255D":{1:(m,d)=>`M0,${.5-d} L${.5-m},${.5-d} L${.5-m},0 M0,${.5+d} L${.5+m},${.5+d} L${.5+m},0`},"\u255E":{1:(m,d)=>`M.5,0 L.5,1 M.5,${.5-d} L1,${.5-d} M.5,${.5+d} L1,${.5+d}`},"\u255F":{1:(m,d)=>`M${.5-m},0 L${.5-m},1 M${.5+m},0 L${.5+m},1 M${.5+m},.5 L1,.5`},"\u2560":{1:(m,d)=>`M${.5-m},0 L${.5-m},1 M1,${.5+d} L${.5+m},${.5+d} L${.5+m},1 M1,${.5-d} L${.5+m},${.5-d} L${.5+m},0`},"\u2561":{1:(m,d)=>`M.5,0 L.5,1 M0,${.5-d} L.5,${.5-d} M0,${.5+d} L.5,${.5+d}`},"\u2562":{1:(m,d)=>`M0,.5 L${.5-m},.5 M${.5-m},0 L${.5-m},1 M${.5+m},0 L${.5+m},1`},"\u2563":{1:(m,d)=>`M${.5+m},0 L${.5+m},1 M0,${.5+d} L${.5-m},${.5+d} L${.5-m},1 M0,${.5-d} L${.5-m},${.5-d} L${.5-m},0`},"\u2564":{1:(m,d)=>`M0,${.5-d} L1,${.5-d} M0,${.5+d} L1,${.5+d} M.5,${.5+d} L.5,1`},"\u2565":{1:(m,d)=>`M0,.5 L1,.5 M${.5-m},.5 L${.5-m},1 M${.5+m},.5 L${.5+m},1`},"\u2566":{1:(m,d)=>`M0,${.5-d} L1,${.5-d} M0,${.5+d} L${.5-m},${.5+d} L${.5-m},1 M1,${.5+d} L${.5+m},${.5+d} L${.5+m},1`},"\u2567":{1:(m,d)=>`M.5,0 L.5,${.5-d} M0,${.5-d} L1,${.5-d} M0,${.5+d} L1,${.5+d}`},"\u2568":{1:(m,d)=>`M0,.5 L1,.5 M${.5-m},.5 L${.5-m},0 M${.5+m},.5 L${.5+m},0`},"\u2569":{1:(m,d)=>`M0,${.5+d} L1,${.5+d} M0,${.5-d} L${.5-m},${.5-d} L${.5-m},0 M1,${.5-d} L${.5+m},${.5-d} L${.5+m},0`},"\u256A":{1:(m,d)=>`M.5,0 L.5,1 M0,${.5-d} L1,${.5-d} M0,${.5+d} L1,${.5+d}`},"\u256B":{1:(m,d)=>`M0,.5 L1,.5 M${.5-m},0 L${.5-m},1 M${.5+m},0 L${.5+m},1`},"\u256C":{1:(m,d)=>`M0,${.5+d} L${.5-m},${.5+d} L${.5-m},1 M1,${.5+d} L${.5+m},${.5+d} L${.5+m},1 M0,${.5-d} L${.5-m},${.5-d} L${.5-m},0 M1,${.5-d} L${.5+m},${.5-d} L${.5+m},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(m,d)=>`M.5,1 L.5,${.5+d/.15*.5} C.5,${.5+d/.15*.5},.5,.5,1,.5`},"\u256E":{1:(m,d)=>`M.5,1 L.5,${.5+d/.15*.5} C.5,${.5+d/.15*.5},.5,.5,0,.5`},"\u256F":{1:(m,d)=>`M.5,0 L.5,${.5-d/.15*.5} C.5,${.5-d/.15*.5},.5,.5,0,.5`},"\u2570":{1:(m,d)=>`M.5,0 L.5,${.5-d/.15*.5} C.5,${.5-d/.15*.5},.5,.5,1,.5`}},n.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},n.powerlineDefinitions["\uE0BB"]=n.powerlineDefinitions["\uE0BD"],n.powerlineDefinitions["\uE0BF"]=n.powerlineDefinitions["\uE0B9"],n.tryDrawCustomChar=function(m,d,p,g,_,y,O,v){const S=n.blockElementDefinitions[d];if(S)return function(D,E,w,x,L,P){for(let R=0;R<E.length;R++){const A=E[R],F=L/8,M=P/8;D.fillRect(w+A.x*F,x+A.y*M,A.w*F,A.h*M)}}(m,S,p,g,_,y),!0;const T=c[d];if(T)return function(D,E,w,x,L,P){let R=l.get(E);R||(R=new Map,l.set(E,R));const A=D.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let F=R.get(A);if(!F){const M=E[0].length,$=E.length,B=document.createElement("canvas");B.width=M,B.height=$;const j=(0,o.throwIfFalsy)(B.getContext("2d")),z=new ImageData(M,$);let W,Q,I,N;if(A.startsWith("#"))W=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),I=parseInt(A.slice(5,7),16),N=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[W,Q,I,N]=A.substring(5,A.length-1).split(",").map(J=>parseFloat(J))}for(let J=0;J<$;J++)for(let U=0;U<M;U++)z.data[4*(J*M+U)]=W,z.data[4*(J*M+U)+1]=Q,z.data[4*(J*M+U)+2]=I,z.data[4*(J*M+U)+3]=E[J][U]*(255*N);j.putImageData(z,0,0),F=(0,o.throwIfFalsy)(D.createPattern(B,null)),R.set(A,F)}D.fillStyle=F,D.fillRect(w,x,L,P)}(m,T,p,g,_,y),!0;const k=n.boxDrawingDefinitions[d];if(k)return function(D,E,w,x,L,P,R){D.strokeStyle=D.fillStyle;for(const[A,F]of Object.entries(E)){let M;D.beginPath(),D.lineWidth=R*Number.parseInt(A),M=typeof F=="function"?F(.15,.15/P*L):F;for(const $ of M.split(" ")){const B=$[0],j=u[B];if(!j){console.error(`Could not find drawing instructions for "${B}"`);continue}const z=$.substring(1).split(",");z[0]&&z[1]&&j(D,f(z,L,P,w,x,!0,R))}D.stroke(),D.closePath()}}(m,k,p,g,_,y,v),!0;const b=n.powerlineDefinitions[d];return!!b&&(function(D,E,w,x,L,P,R,A){var F,M;const $=new Path2D;$.rect(w,x,L,P),D.clip($),D.beginPath();const B=R/12;D.lineWidth=A*B;for(const j of E.d.split(" ")){const z=j[0],W=u[z];if(!W){console.error(`Could not find drawing instructions for "${z}"`);continue}const Q=j.substring(1).split(",");Q[0]&&Q[1]&&W(D,f(Q,L,P,w,x,!1,A,((F=E.leftPadding)!==null&&F!==void 0?F:0)*(B/2),((M=E.rightPadding)!==null&&M!==void 0?M:0)*(B/2)))}E.type===1?(D.strokeStyle=D.fillStyle,D.stroke()):D.fill(),D.closePath()}(m,b,p,g,_,y,O,v),!0)};const l=new Map;function h(m,d,p=0){return Math.max(Math.min(m,d),p)}const u={C:(m,d)=>m.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]),L:(m,d)=>m.lineTo(d[0],d[1]),M:(m,d)=>m.moveTo(d[0],d[1])};function f(m,d,p,g,_,y,O,v=0,S=0){const T=m.map(k=>parseFloat(k)||parseInt(k));if(T.length<2)throw new Error("Too few arguments for instruction");for(let k=0;k<T.length;k+=2)T[k]*=d-v*O-S*O,y&&T[k]!==0&&(T[k]=h(Math.round(T[k]+.5)-.5,d,0)),T[k]+=g+v*O;for(let k=1;k<T.length;k+=2)T[k]*=p,y&&T[k]!==0&&(T[k]=h(Math.round(T[k]+.5)-.5,p,0)),T[k]+=_;return T}},56:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.observeDevicePixelDimensions=void 0;const o=a(859);n.observeDevicePixelDimensions=function(c,l,h){let u=new l.ResizeObserver(f=>{const m=f.find(g=>g.target===c);if(!m)return;if(!("devicePixelContentBoxSize"in m))return u?.disconnect(),void(u=void 0);const d=m.devicePixelContentBoxSize[0].inlineSize,p=m.devicePixelContentBoxSize[0].blockSize;d>0&&p>0&&h(d,p)});try{u.observe(c,{box:["device-pixel-content-box"]})}catch{u.disconnect(),u=void 0}return(0,o.toDisposable)(()=>u?.disconnect())}},374:(s,n)=>{function a(o){return 57508<=o&&o<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(o){if(!o)throw new Error("value must not be falsy");return o},n.isPowerlineGlyph=a,n.isRestrictedPowerlineGlyph=function(o){return 57520<=o&&o<=57527},n.excludeFromContrastRatioDemands=function(o){return a(o)||function(c){return 9472<=c&&c<=9631}(o)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(c,l,h,u=!1){if(this.selectionStart=l,this.selectionEnd=h,!l||!h||l[0]===h[0]&&l[1]===h[1])return void this.clear();const f=l[1]-c.buffer.active.viewportY,m=h[1]-c.buffer.active.viewportY,d=Math.max(f,0),p=Math.min(m,c.rows-1);d>=c.rows||p<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=u,this.viewportStartRow=f,this.viewportEndRow=m,this.viewportCappedStartRow=d,this.viewportCappedEndRow=p,this.startCol=l[0],this.endCol=h[0])}isCellSelected(c,l,h){return!!this.hasSelection&&(h-=c.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?l>=this.startCol&&h>=this.viewportCappedStartRow&&l<this.endCol&&h<=this.viewportCappedEndRow:l<this.startCol&&h>=this.viewportCappedStartRow&&l>=this.endCol&&h<=this.viewportCappedEndRow:h>this.viewportStartRow&&h<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&h===this.viewportStartRow&&l>=this.startCol&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportEndRow&&l<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportStartRow&&l>=this.startCol)}}n.createSelectionRenderModel=function(){return new a}},509:function(s,n,a){var o=this&&this.__decorate||function(b,D,E,w){var x,L=arguments.length,P=L<3?D:w===null?w=Object.getOwnPropertyDescriptor(D,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(b,D,E,w);else for(var R=b.length-1;R>=0;R--)(x=b[R])&&(P=(L<3?x(P):L>3?x(D,E,P):x(D,E))||P);return L>3&&P&&Object.defineProperty(D,E,P),P};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureAtlas=void 0;const c=a(237),l=a(860),h=a(374),u=a(160),f=a(345),m=a(485),d=a(385),p=a(147),g=a(855),_=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let O;class v{get pages(){return this._pages}constructor(D,E,w){this._document=D,this._config=E,this._unicodeService=w,this._didWarmUp=!1,this._cacheMap=new m.FourKeyMap,this._cacheMapCombined=new m.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new p.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new f.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new f.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=k(D,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const D of this.pages)D.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const D=new d.IdleTaskQueue;for(let E=33;E<126;E++)D.enqueue(()=>{if(!this._cacheMap.get(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT)){const w=this._drawToCache(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT);this._cacheMap.set(E,g.DEFAULT_COLOR,g.DEFAULT_COLOR,g.DEFAULT_EXT,w)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const D of this._pages)D.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(v.maxAtlasPages&&this._pages.length>=Math.max(4,v.maxAtlasPages)){const E=this._pages.filter(F=>2*F.canvas.width<=(v.maxTextureSize||4096)).sort((F,M)=>M.canvas.width!==F.canvas.width?M.canvas.width-F.canvas.width:M.percentageUsed-F.percentageUsed);let w=-1,x=0;for(let F=0;F<E.length;F++)if(E[F].canvas.width!==x)w=F,x=E[F].canvas.width;else if(F-w==3)break;const L=E.slice(w,w+4),P=L.map(F=>F.glyphs[0].texturePage).sort((F,M)=>F>M?1:-1),R=this.pages.length-L.length,A=this._mergePages(L,R);A.version++;for(let F=P.length-1;F>=0;F--)this._deletePage(P[F]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}const D=new S(this._document,this._textureSize);return this._pages.push(D),this._activePages.push(D),this._onAddTextureAtlasCanvas.fire(D.canvas),D}_mergePages(D,E){const w=2*D[0].canvas.width,x=new S(this._document,w,D);for(const[L,P]of D.entries()){const R=L*P.canvas.width%w,A=Math.floor(L/2)*P.canvas.height;x.ctx.drawImage(P.canvas,R,A);for(const M of P.glyphs)M.texturePage=E,M.sizeClipSpace.x=M.size.x/w,M.sizeClipSpace.y=M.size.y/w,M.texturePosition.x+=R,M.texturePosition.y+=A,M.texturePositionClipSpace.x=M.texturePosition.x/w,M.texturePositionClipSpace.y=M.texturePosition.y/w;this._onRemoveTextureAtlasCanvas.fire(P.canvas);const F=this._activePages.indexOf(P);F!==-1&&this._activePages.splice(F,1)}return x}_deletePage(D){this._pages.splice(D,1);for(let E=D;E<this._pages.length;E++){const w=this._pages[E];for(const x of w.glyphs)x.texturePage--;w.version++}}getRasterizedGlyphCombinedChar(D,E,w,x,L){return this._getFromCacheMap(this._cacheMapCombined,D,E,w,x,L)}getRasterizedGlyph(D,E,w,x,L){return this._getFromCacheMap(this._cacheMap,D,E,w,x,L)}_getFromCacheMap(D,E,w,x,L,P=!1){return O=D.get(E,w,x,L),O||(O=this._drawToCache(E,w,x,L,P),D.set(E,w,x,L,O)),O}_getColorFromAnsiIndex(D){if(D>=this._config.colors.ansi.length)throw new Error("No color found for idx "+D);return this._config.colors.ansi[D]}_getBackgroundColor(D,E,w,x){if(this._config.allowTransparency)return u.NULL_COLOR;let L;switch(D){case 16777216:case 33554432:L=this._getColorFromAnsiIndex(E);break;case 50331648:const P=p.AttributeData.toColorRGB(E);L=u.rgba.toColor(P[0],P[1],P[2]);break;default:L=w?u.color.opaque(this._config.colors.foreground):this._config.colors.background}return L}_getForegroundColor(D,E,w,x,L,P,R,A,F,M){const $=this._getMinimumContrastColor(D,E,w,x,L,P,!1,F,A,M);if($)return $;let B;switch(L){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&F&&P<8&&(P+=8),B=this._getColorFromAnsiIndex(P);break;case 50331648:const j=p.AttributeData.toColorRGB(P);B=u.rgba.toColor(j[0],j[1],j[2]);break;default:B=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(B=u.color.opaque(B)),A&&(B=u.color.multiplyOpacity(B,c.DIM_OPACITY)),B}_resolveBackgroundRgba(D,E,w){switch(D){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return w?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(D,E,w,x){switch(D){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&x&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return w?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(D,E,w,x,L,P,R,A,F,M){if(this._config.minimumContrastRatio===1||M)return;const $=this._getContrastCache(F),B=$.getColor(D,x);if(B!==void 0)return B||void 0;const j=this._resolveBackgroundRgba(E,w,R),z=this._resolveForegroundRgba(L,P,R,A),W=u.rgba.ensureContrastRatio(j,z,this._config.minimumContrastRatio/(F?2:1));if(!W)return void $.setColor(D,x,null);const Q=u.rgba.toColor(W>>24&255,W>>16&255,W>>8&255);return $.setColor(D,x,Q),Q}_getContrastCache(D){return D?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(D,E,w,x,L=!1){const P=typeof D=="number"?String.fromCharCode(D):D,R=Math.min(this._config.deviceCellWidth*Math.max(P.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);const A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=w,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=x,this._workAttributeData.isInvisible())return y;const F=!!this._workAttributeData.isBold(),M=!!this._workAttributeData.isInverse(),$=!!this._workAttributeData.isDim(),B=!!this._workAttributeData.isItalic(),j=!!this._workAttributeData.isUnderline(),z=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let Q=this._workAttributeData.getFgColor(),I=this._workAttributeData.getFgColorMode(),N=this._workAttributeData.getBgColor(),J=this._workAttributeData.getBgColorMode();if(M){const X=Q;Q=N,N=X;const G=I;I=J,J=G}const U=this._getBackgroundColor(J,N,M,$);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=U.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const K=F?this._config.fontWeightBold:this._config.fontWeight,ie=B?"italic":"";this._tmpCtx.font=`${ie} ${K} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=c.TEXT_BASELINE;const Ce=P.length===1&&(0,h.isPowerlineGlyph)(P.charCodeAt(0)),me=P.length===1&&(0,h.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),ke=this._getForegroundColor(E,J,N,w,I,Q,M,$,F,(0,h.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=ke.css;const ae=me?0:4;let Le=!1;this._config.customGlyphs!==!1&&(Le=(0,l.tryDrawCustomChar)(this._tmpCtx,P,ae,ae,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let ne,Ge=!Ce;if(ne=typeof D=="number"?this._unicodeService.wcwidth(D):this._unicodeService.getStringCellWidth(D),j){this._tmpCtx.save();const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=X%2==1?.5:0;if(this._tmpCtx.lineWidth=X,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ge=!1,this._tmpCtx.strokeStyle=`rgb(${p.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ge=!1;let _e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_e<8&&(_e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_e).css}this._tmpCtx.beginPath();const H=ae,ee=Math.ceil(ae+this._config.deviceCharHeight)-G-(L?2*X:0),ge=ee+X,pe=ee+2*X;for(let _e=0;_e<ne;_e++){this._tmpCtx.save();const ue=H+_e*this._config.deviceCellWidth,de=H+(_e+1)*this._config.deviceCellWidth,Oe=ue+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ue,ee),this._tmpCtx.lineTo(de,ee),this._tmpCtx.moveTo(ue,pe),this._tmpCtx.lineTo(de,pe);break;case 3:const Re=X<=1?pe:Math.ceil(ae+this._config.deviceCharHeight-X/2)-G,At=X<=1?ee:Math.ceil(ae+this._config.deviceCharHeight+X/2)-G,Gt=new Path2D;Gt.rect(ue,ee,this._config.deviceCellWidth,pe-ee),this._tmpCtx.clip(Gt),this._tmpCtx.moveTo(ue-this._config.deviceCellWidth/2,ge),this._tmpCtx.bezierCurveTo(ue-this._config.deviceCellWidth/2,At,ue,At,ue,ge),this._tmpCtx.bezierCurveTo(ue,Re,Oe,Re,Oe,ge),this._tmpCtx.bezierCurveTo(Oe,At,de,At,de,ge),this._tmpCtx.bezierCurveTo(de,Re,de+this._config.deviceCellWidth/2,Re,de+this._config.deviceCellWidth/2,ge);break;case 4:this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(ue,ee),this._tmpCtx.lineTo(de,ee);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(ue,ee),this._tmpCtx.lineTo(de,ee);break;default:this._tmpCtx.moveTo(ue,ee),this._tmpCtx.lineTo(de,ee)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Le&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const _e=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _e&&_e.actualBoundingBoxDescent>0){this._tmpCtx.save();const ue=new Path2D;ue.rect(H,ee-Math.ceil(X/2),this._config.deviceCellWidth*ne,pe-ee+Math.ceil(X/2)),this._tmpCtx.clip(ue),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=U.css,this._tmpCtx.strokeText(P,ae,ae+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),G=X%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ae,ae+G),this._tmpCtx.lineTo(ae+this._config.deviceCharWidth*ne,ae+G),this._tmpCtx.stroke()}if(Le||this._tmpCtx.fillText(P,ae,ae+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let X=T(this._tmpCtx.getImageData(ae,ae,this._config.deviceCellWidth,this._config.deviceCellHeight),U,ke,Ge);if(X)for(let G=1;G<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=U.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,ae,ae+this._config.deviceCharHeight-G),X=T(this._tmpCtx.getImageData(ae,ae,this._config.deviceCellWidth,this._config.deviceCellHeight),U,ke,Ge),X);G++);}if(z){const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),G=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ae,ae+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.lineTo(ae+this._config.deviceCharWidth*ne,ae+Math.floor(this._config.deviceCharHeight/2)-G),this._tmpCtx.stroke()}this._tmpCtx.restore();const He=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let xe;if(xe=this._config.allowTransparency?function(X){for(let G=0;G<X.data.length;G+=4)if(X.data[G+3]>0)return!1;return!0}(He):T(He,U,ke,Ge),xe)return y;const re=this._findGlyphBoundingBox(He,this._workBoundingBox,R,me,Le,ae);let se,V;for(;;){if(this._activePages.length===0){const X=this._createNewPage();se=X,V=X.currentRow,V.height=re.size.y;break}se=this._activePages[this._activePages.length-1],V=se.currentRow;for(const X of this._activePages)re.size.y<=X.currentRow.height&&(se=X,V=X.currentRow);for(let X=this._activePages.length-1;X>=0;X--)for(const G of this._activePages[X].fixedRows)G.height<=V.height&&re.size.y<=G.height&&(se=this._activePages[X],V=G);if(V.y+re.size.y>=se.canvas.height||V.height>re.size.y+2){let X=!1;if(se.currentRow.y+se.currentRow.height+re.size.y>=se.canvas.height){let G;for(const H of this._activePages)if(H.currentRow.y+H.currentRow.height+re.size.y<H.canvas.height){G=H;break}if(G)se=G;else if(v.maxAtlasPages&&this._pages.length>=v.maxAtlasPages&&V.y+re.size.y<=se.canvas.height&&V.height>=re.size.y&&V.x+re.size.x<=se.canvas.width)X=!0;else{const H=this._createNewPage();se=H,V=H.currentRow,V.height=re.size.y,X=!0}}X||(se.currentRow.height>0&&se.fixedRows.push(se.currentRow),V={x:0,y:se.currentRow.y+se.currentRow.height,height:re.size.y},se.fixedRows.push(V),se.currentRow={x:0,y:V.y+V.height,height:0})}if(V.x+re.size.x<=se.canvas.width)break;V===se.currentRow?(V.x=0,V.y+=V.height,V.height=0):se.fixedRows.splice(se.fixedRows.indexOf(V),1)}return re.texturePage=this._pages.indexOf(se),re.texturePosition.x=V.x,re.texturePosition.y=V.y,re.texturePositionClipSpace.x=V.x/se.canvas.width,re.texturePositionClipSpace.y=V.y/se.canvas.height,re.sizeClipSpace.x/=se.canvas.width,re.sizeClipSpace.y/=se.canvas.height,V.height=Math.max(V.height,re.size.y),V.x+=re.size.x,se.ctx.putImageData(He,re.texturePosition.x-this._workBoundingBox.left,re.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,re.size.x,re.size.y),se.addGlyph(re),se.version++,re}_findGlyphBoundingBox(D,E,w,x,L,P){E.top=0;const R=x?this._config.deviceCellHeight:this._tmpCanvas.height,A=x?this._config.deviceCellWidth:w;let F=!1;for(let M=0;M<R;M++){for(let $=0;$<A;$++){const B=M*this._tmpCanvas.width*4+4*$+3;if(D.data[B]!==0){E.top=M,F=!0;break}}if(F)break}E.left=0,F=!1;for(let M=0;M<P+A;M++){for(let $=0;$<R;$++){const B=$*this._tmpCanvas.width*4+4*M+3;if(D.data[B]!==0){E.left=M,F=!0;break}}if(F)break}E.right=A,F=!1;for(let M=P+A-1;M>=P;M--){for(let $=0;$<R;$++){const B=$*this._tmpCanvas.width*4+4*M+3;if(D.data[B]!==0){E.right=M,F=!0;break}}if(F)break}E.bottom=R,F=!1;for(let M=R-1;M>=0;M--){for(let $=0;$<A;$++){const B=M*this._tmpCanvas.width*4+4*$+3;if(D.data[B]!==0){E.bottom=M,F=!0;break}}if(F)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+P+(x||L?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+P+(x||L?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}n.TextureAtlas=v,o([_.traceCall],v.prototype,"_drawToCache",null);class S{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(D){this._glyphs.push(D),this._usedPixels+=D.size.x*D.size.y}constructor(D,E,w){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],w)for(const x of w)this._glyphs.push(...x.glyphs),this._usedPixels+=x._usedPixels;this.canvas=k(D,E,E),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function T(b,D,E,w){const x=D.rgba>>>24,L=D.rgba>>>16&255,P=D.rgba>>>8&255,R=E.rgba>>>24,A=E.rgba>>>16&255,F=E.rgba>>>8&255,M=Math.floor((Math.abs(x-R)+Math.abs(L-A)+Math.abs(P-F))/12);let $=!0;for(let B=0;B<b.data.length;B+=4)b.data[B]===x&&b.data[B+1]===L&&b.data[B+2]===P||w&&Math.abs(b.data[B]-x)+Math.abs(b.data[B+1]-L)+Math.abs(b.data[B+2]-P)<M?b.data[B+3]=0:$=!1;return $}function k(b,D,E){const w=b.createElement("canvas");return w.width=D,w.height=E,w}},577:function(s,n,a){var o=this&&this.__decorate||function(p,g,_,y){var O,v=arguments.length,S=v<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,_):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(p,g,_,y);else for(var T=p.length-1;T>=0;T--)(O=p[T])&&(S=(v<3?O(S):v>3?O(g,_,S):O(g,_))||S);return v>3&&S&&Object.defineProperty(g,_,S),S},c=this&&this.__param||function(p,g){return function(_,y){g(_,y,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const l=a(147),h=a(855),u=a(782),f=a(97);class m extends l.AttributeData{constructor(g,_,y){super(),this.content=0,this.combinedData="",this.fg=g.fg,this.bg=g.bg,this.combinedData=_,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(g){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=m;let d=n.CharacterJoinerService=class zh{constructor(g){this._bufferService=g,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}register(g){const _={id:this._nextCharacterJoinerId++,handler:g};return this._characterJoiners.push(_),_.id}deregister(g){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===g)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(g){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(g);if(!_||_.length===0)return[];const y=[],O=_.translateToString(!0);let v=0,S=0,T=0,k=_.getFg(0),b=_.getBg(0);for(let D=0;D<_.getTrimmedLength();D++)if(_.loadCell(D,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==b){if(D-v>1){const E=this._getJoinedRanges(O,T,S,_,v);for(let w=0;w<E.length;w++)y.push(E[w])}v=D,T=S,k=this._workCell.fg,b=this._workCell.bg}S+=this._workCell.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1){const D=this._getJoinedRanges(O,T,S,_,v);for(let E=0;E<D.length;E++)y.push(D[E])}return y}_getJoinedRanges(g,_,y,O,v){const S=g.substring(_,y);let T=[];try{T=this._characterJoiners[0].handler(S)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const b=this._characterJoiners[k].handler(S);for(let D=0;D<b.length;D++)zh._mergeRanges(T,b[D])}catch(b){console.error(b)}return this._stringRangesToCellRanges(T,O,v),T}_stringRangesToCellRanges(g,_,y){let O=0,v=!1,S=0,T=g[O];if(T){for(let k=y;k<this._bufferService.cols;k++){const b=_.getWidth(k),D=_.getString(k).length||h.WHITESPACE_CELL_CHAR.length;if(b!==0){if(!v&&T[0]<=S&&(T[0]=k,v=!0),T[1]<=S){if(T[1]=k,T=g[++O],!T)break;T[0]<=S?(T[0]=k,v=!0):v=!1}S+=D}}T&&(T[1]=this._bufferService.cols)}}static _mergeRanges(g,_){let y=!1;for(let O=0;O<g.length;O++){const v=g[O];if(y){if(_[1]<=v[0])return g[O-1][1]=_[1],g;if(_[1]<=v[1])return g[O-1][1]=Math.max(_[1],v[1]),g.splice(O,1),g;g.splice(O,1),O--}else{if(_[1]<=v[0])return g.splice(O,0,_),g;if(_[1]<=v[1])return v[0]=Math.min(_[0],v[0]),g;_[0]<v[1]&&(v[0]=Math.min(_[0],v[0]),y=!0)}}return y?g[g.length-1][1]=_[1]:g.push(_),g}};n.CharacterJoinerService=d=o([c(0,f.IBufferService)],d)},160:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const o=a(399);let c=0,l=0,h=0,u=0;var f,m,d,p,g;function _(O){const v=O.toString(16);return v.length<2?"0"+v:v}function y(O,v){return O<v?(v+.05)/(O+.05):(O+.05)/(v+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(O){O.toCss=function(v,S,T,k){return k!==void 0?`#${_(v)}${_(S)}${_(T)}${_(k)}`:`#${_(v)}${_(S)}${_(T)}`},O.toRgba=function(v,S,T,k=255){return(v<<24|S<<16|T<<8|k)>>>0}}(f||(n.channels=f={})),function(O){function v(S,T){return u=Math.round(255*T),[c,l,h]=g.toChannels(S.rgba),{css:f.toCss(c,l,h,u),rgba:f.toRgba(c,l,h,u)}}O.blend=function(S,T){if(u=(255&T.rgba)/255,u===1)return{css:T.css,rgba:T.rgba};const k=T.rgba>>24&255,b=T.rgba>>16&255,D=T.rgba>>8&255,E=S.rgba>>24&255,w=S.rgba>>16&255,x=S.rgba>>8&255;return c=E+Math.round((k-E)*u),l=w+Math.round((b-w)*u),h=x+Math.round((D-x)*u),{css:f.toCss(c,l,h),rgba:f.toRgba(c,l,h)}},O.isOpaque=function(S){return(255&S.rgba)==255},O.ensureContrastRatio=function(S,T,k){const b=g.ensureContrastRatio(S.rgba,T.rgba,k);if(b)return g.toColor(b>>24&255,b>>16&255,b>>8&255)},O.opaque=function(S){const T=(255|S.rgba)>>>0;return[c,l,h]=g.toChannels(T),{css:f.toCss(c,l,h),rgba:T}},O.opacity=v,O.multiplyOpacity=function(S,T){return u=255&S.rgba,v(S,u*T/255)},O.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(m||(n.color=m={})),function(O){let v,S;if(!o.isNode){const T=document.createElement("canvas");T.width=1,T.height=1;const k=T.getContext("2d",{willReadFrequently:!0});k&&(v=k,v.globalCompositeOperation="copy",S=v.createLinearGradient(0,0,1,1))}O.toColor=function(T){if(T.match(/#[\da-f]{3,8}/i))switch(T.length){case 4:return c=parseInt(T.slice(1,2).repeat(2),16),l=parseInt(T.slice(2,3).repeat(2),16),h=parseInt(T.slice(3,4).repeat(2),16),g.toColor(c,l,h);case 5:return c=parseInt(T.slice(1,2).repeat(2),16),l=parseInt(T.slice(2,3).repeat(2),16),h=parseInt(T.slice(3,4).repeat(2),16),u=parseInt(T.slice(4,5).repeat(2),16),g.toColor(c,l,h,u);case 7:return{css:T,rgba:(parseInt(T.slice(1),16)<<8|255)>>>0};case 9:return{css:T,rgba:parseInt(T.slice(1),16)>>>0}}const k=T.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return c=parseInt(k[1]),l=parseInt(k[2]),h=parseInt(k[3]),u=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),g.toColor(c,l,h,u);if(!v||!S)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=S,v.fillStyle=T,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[c,l,h,u]=v.getImageData(0,0,1,1).data,u!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(c,l,h,u),css:T}}}(d||(n.css=d={})),function(O){function v(S,T,k){const b=S/255,D=T/255,E=k/255;return .2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}O.relativeLuminance=function(S){return v(S>>16&255,S>>8&255,255&S)},O.relativeLuminance2=v}(p||(n.rgb=p={})),function(O){function v(T,k,b){const D=T>>24&255,E=T>>16&255,w=T>>8&255;let x=k>>24&255,L=k>>16&255,P=k>>8&255,R=y(p.relativeLuminance2(x,L,P),p.relativeLuminance2(D,E,w));for(;R<b&&(x>0||L>0||P>0);)x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),P-=Math.max(0,Math.ceil(.1*P)),R=y(p.relativeLuminance2(x,L,P),p.relativeLuminance2(D,E,w));return(x<<24|L<<16|P<<8|255)>>>0}function S(T,k,b){const D=T>>24&255,E=T>>16&255,w=T>>8&255;let x=k>>24&255,L=k>>16&255,P=k>>8&255,R=y(p.relativeLuminance2(x,L,P),p.relativeLuminance2(D,E,w));for(;R<b&&(x<255||L<255||P<255);)x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),P=Math.min(255,P+Math.ceil(.1*(255-P))),R=y(p.relativeLuminance2(x,L,P),p.relativeLuminance2(D,E,w));return(x<<24|L<<16|P<<8|255)>>>0}O.ensureContrastRatio=function(T,k,b){const D=p.relativeLuminance(T>>8),E=p.relativeLuminance(k>>8);if(y(D,E)<b){if(E<D){const L=v(T,k,b),P=y(D,p.relativeLuminance(L>>8));if(P<b){const R=S(T,k,b);return P>y(D,p.relativeLuminance(R>>8))?L:R}return L}const w=S(T,k,b),x=y(D,p.relativeLuminance(w>>8));if(x<b){const L=v(T,k,b);return x>y(D,p.relativeLuminance(L>>8))?w:L}return w}},O.reduceLuminance=v,O.increaseLuminance=S,O.toChannels=function(T){return[T>>24&255,T>>16&255,T>>8&255,255&T]},O.toColor=function(T,k,b,D){return{css:f.toCss(T,k,b,D),rgba:f.toRgba(T,k,b,D)}}}(g||(n.rgba=g={})),n.toPaddedHex=_,n.contrastRatio=y},345:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let o=0;o<this._listeners.length;o++)if(this._listeners[o]===a)return void this._listeners.splice(o,1)}}})),this._event}fire(a,o){const c=[];for(let l=0;l<this._listeners.length;l++)c.push(this._listeners[l]);for(let l=0;l<c.length;l++)c[l].call(void 0,a,o)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(a,o){return a(c=>o.fire(c))}},859:(s,n)=>{function a(o){for(const c of o)c.dispose();o.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const o of this._disposables)o.dispose();this._disposables.length=0}register(o){return this._disposables.push(o),o}unregister(o){const c=this._disposables.indexOf(o);c!==-1&&this._disposables.splice(c,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(o){var c;this._isDisposed||o===this._value||((c=this._value)===null||c===void 0||c.dispose(),this._value=o)}clear(){this.value=void 0}dispose(){var o;this._isDisposed=!0,(o=this._value)===null||o===void 0||o.dispose(),this._value=void 0}},n.toDisposable=function(o){return{dispose:o}},n.disposeArray=a,n.getDisposeArrayDisposable=function(o){return{dispose:()=>a(o)}}},485:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(c,l,h){this._data[c]||(this._data[c]={}),this._data[c][l]=h}get(c,l){return this._data[c]?this._data[c][l]:void 0}clear(){this._data={}}}n.TwoKeyMap=a,n.FourKeyMap=class{constructor(){this._data=new a}set(o,c,l,h,u){this._data.get(o,c)||this._data.set(o,c,new a),this._data.get(o,c).set(l,h,u)}get(o,c,l,h){var u;return(u=this._data.get(o,c))===null||u===void 0?void 0:u.get(l,h)}clear(){this._data.clear()}}},399:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const a=n.isNode?"node":navigator.userAgent,o=n.isNode?"node":navigator.platform;n.isFirefox=a.includes("Firefox"),n.isLegacyEdge=a.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(a),n.getSafariVersion=function(){if(!n.isSafari)return 0;const c=a.match(/Version\/(\d+)/);return c===null||c.length<2?0:parseInt(c[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(o),n.isIpad=o==="iPad",n.isIphone=o==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(o),n.isLinux=o.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(a)},385:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const o=a(399);class c{constructor(){this._tasks=[],this._i=0}enqueue(u){this._tasks.push(u),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(u){this._idleCallback=void 0;let f=0,m=0,d=u.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),m=Math.max(f,m),p=u.timeRemaining(),1.5*m>p)return d-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(d-f))}ms`),void this._start();d=p}this.clear()}}class l extends c{_requestCallback(u){return setTimeout(()=>u(this._createDeadline(16)))}_cancelCallback(u){clearTimeout(u)}_createDeadline(u){const f=Date.now()+u;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}n.PriorityTaskQueue=l,n.IdleTaskQueue=!o.isNode&&"requestIdleCallback"in window?class extends c{_requestCallback(h){return requestIdleCallback(h)}_cancelCallback(h){cancelIdleCallback(h)}}:l,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(h){this._queue.clear(),this._queue.enqueue(h)}flush(){this._queue.flush()}}},147:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new o}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new a;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=a;class o{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,h=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=h}clone(){return new o(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=o},782:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const o=a(133),c=a(855),l=a(147);class h extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(f){const m=new h;return m.setFromCharData(f),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,o.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[c.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(f[c.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(f[c.CHAR_DATA_CHAR_INDEX].length===2){const d=f[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){const p=f[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(d-55296)+p-56320+65536|f[c.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=f[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[c.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=f[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[c.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=h},855:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},133:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},n.utf32ToString=function(a,o=0,c=a.length){let l="";for(let h=o;h<c;++h){let u=a[h];u>65535?(u-=65536,l+=String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):l+=String.fromCharCode(u)}return l},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,o){const c=a.length;if(!c)return 0;let l=0,h=0;if(this._interim){const u=a.charCodeAt(h++);56320<=u&&u<=57343?o[l++]=1024*(this._interim-55296)+u-56320+65536:(o[l++]=this._interim,o[l++]=u),this._interim=0}for(let u=h;u<c;++u){const f=a.charCodeAt(u);if(55296<=f&&f<=56319){if(++u>=c)return this._interim=f,l;const m=a.charCodeAt(u);56320<=m&&m<=57343?o[l++]=1024*(f-55296)+m-56320+65536:(o[l++]=f,o[l++]=m)}else f!==65279&&(o[l++]=f)}return l}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,o){const c=a.length;if(!c)return 0;let l,h,u,f,m=0,d=0,p=0;if(this.interim[0]){let y=!1,O=this.interim[0];O&=(224&O)==192?31:(240&O)==224?15:7;let v,S=0;for(;(v=63&this.interim[++S])&&S<4;)O<<=6,O|=v;const T=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=T-S;for(;p<k;){if(p>=c)return 0;if(v=a[p++],(192&v)!=128){p--,y=!0;break}this.interim[S++]=v,O<<=6,O|=63&v}y||(T===2?O<128?p--:o[m++]=O:T===3?O<2048||O>=55296&&O<=57343||O===65279||(o[m++]=O):O<65536||O>1114111||(o[m++]=O)),this.interim.fill(0)}const g=c-4;let _=p;for(;_<c;){for(;!(!(_<g)||128&(l=a[_])||128&(h=a[_+1])||128&(u=a[_+2])||128&(f=a[_+3]));)o[m++]=l,o[m++]=h,o[m++]=u,o[m++]=f,_+=4;if(l=a[_++],l<128)o[m++]=l;else if((224&l)==192){if(_>=c)return this.interim[0]=l,m;if(h=a[_++],(192&h)!=128){_--;continue}if(d=(31&l)<<6|63&h,d<128){_--;continue}o[m++]=d}else if((240&l)==224){if(_>=c)return this.interim[0]=l,m;if(h=a[_++],(192&h)!=128){_--;continue}if(_>=c)return this.interim[0]=l,this.interim[1]=h,m;if(u=a[_++],(192&u)!=128){_--;continue}if(d=(15&l)<<12|(63&h)<<6|63&u,d<2048||d>=55296&&d<=57343||d===65279)continue;o[m++]=d}else if((248&l)==240){if(_>=c)return this.interim[0]=l,m;if(h=a[_++],(192&h)!=128){_--;continue}if(_>=c)return this.interim[0]=l,this.interim[1]=h,m;if(u=a[_++],(192&u)!=128){_--;continue}if(_>=c)return this.interim[0]=l,this.interim[1]=h,this.interim[2]=u,m;if(f=a[_++],(192&f)!=128){_--;continue}if(d=(7&l)<<18|(63&h)<<12|(63&u)<<6|63&f,d<65536||d>1114111)continue;o[m++]=d}}return m}}},776:function(s,n,a){var o=this&&this.__decorate||function(d,p,g,_){var y,O=arguments.length,v=O<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,g):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,p,g,_);else for(var S=d.length-1;S>=0;S--)(y=d[S])&&(v=(O<3?y(v):O>3?y(p,g,v):y(p,g))||v);return O>3&&v&&Object.defineProperty(p,g,v),v},c=this&&this.__param||function(d,p){return function(g,_){p(g,_,d)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const l=a(859),h=a(97),u={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF};let f,m=n.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(d){super(),this._optionsService=d,this._logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),f=this}_updateLogLevel(){this._logLevel=u[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(d){for(let p=0;p<d.length;p++)typeof d[p]=="function"&&(d[p]=d[p]())}_log(d,p,g){this._evalLazyOptionalParams(g),d.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...g)}trace(d,...p){var g,_;this._logLevel<=h.LogLevelEnum.TRACE&&this._log((_=(g=this._optionsService.options.logger)===null||g===void 0?void 0:g.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,d,p)}debug(d,...p){var g,_;this._logLevel<=h.LogLevelEnum.DEBUG&&this._log((_=(g=this._optionsService.options.logger)===null||g===void 0?void 0:g.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,d,p)}info(d,...p){var g,_;this._logLevel<=h.LogLevelEnum.INFO&&this._log((_=(g=this._optionsService.options.logger)===null||g===void 0?void 0:g.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,d,p)}warn(d,...p){var g,_;this._logLevel<=h.LogLevelEnum.WARN&&this._log((_=(g=this._optionsService.options.logger)===null||g===void 0?void 0:g.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,d,p)}error(d,...p){var g,_;this._logLevel<=h.LogLevelEnum.ERROR&&this._log((_=(g=this._optionsService.options.logger)===null||g===void 0?void 0:g.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,d,p)}};n.LogService=m=o([c(0,h.IOptionsService)],m),n.setTraceLogger=function(d){f=d},n.traceCall=function(d,p,g){if(typeof g.value!="function")throw new Error("not supported");const _=g.value;g.value=function(...y){if(f.logLevel!==h.LogLevelEnum.TRACE)return _.apply(this,y);f.trace(`GlyphRenderer#${_.name}(${y.map(v=>JSON.stringify(v)).join(", ")})`);const O=_.apply(this,y);return f.trace(`GlyphRenderer#${_.name} return`,O),O}}},726:(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const a="di$target",o="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(c){return c[o]||[]},n.createDecorator=function(c){if(n.serviceRegistry.has(c))return n.serviceRegistry.get(c);const l=function(h,u,f){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,d,p){d[a]===d?d[o].push({id:m,index:p}):(d[o]=[{id:m,index:p}],d[a]=d)})(l,h,f)};return l.toString=()=>c,n.serviceRegistry.set(c,l),l}},97:(s,n,a)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const o=a(726);var c;n.IBufferService=(0,o.createDecorator)("BufferService"),n.ICoreMouseService=(0,o.createDecorator)("CoreMouseService"),n.ICoreService=(0,o.createDecorator)("CoreService"),n.ICharsetService=(0,o.createDecorator)("CharsetService"),n.IInstantiationService=(0,o.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(c||(n.LogLevelEnum=c={})),n.ILogService=(0,o.createDecorator)("LogService"),n.IOptionsService=(0,o.createDecorator)("OptionsService"),n.IOscLinkService=(0,o.createDecorator)("OscLinkService"),n.IUnicodeService=(0,o.createDecorator)("UnicodeService"),n.IDecorationService=(0,o.createDecorator)("DecorationService")}},e={};function t(s){var n=e[s];if(n!==void 0)return n.exports;var a=e[s]={exports:{}};return i[s].call(a.exports,a,a.exports,t),a.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasAddon=void 0;const n=t(345),a=t(859),o=t(776),c=t(949);class l extends a.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new n.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new n.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var u;return(u=this._renderer)===null||u===void 0?void 0:u.textureAtlas}activate(u){const f=u._core;if(!u.element)return void this.register(f.onWillOpen(()=>this.activate(u)));this._terminal=u;const m=f.coreService,d=f.optionsService,p=f.screenElement,g=f.linkifier2,_=f,y=_._bufferService,O=_._renderService,v=_._characterJoinerService,S=_._charSizeService,T=_._coreBrowserService,k=_._decorationService,b=_._logService,D=_._themeService;(0,o.setTraceLogger)(b),this._renderer=new c.CanvasRenderer(u,p,g,y,S,d,v,m,T,k,D),this.register((0,n.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,n.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),O.setRenderer(this._renderer),O.handleResize(y.cols,y.rows),this.register((0,a.toDisposable)(()=>{var E;O.setRenderer(this._terminal._core._createRenderer()),O.handleResize(u.cols,u.rows),(E=this._renderer)===null||E===void 0||E.dispose(),this._renderer=void 0}))}}s.CanvasAddon=l})(),r})();var eh,Qf=Bf.exports=Kl(),th={exports:{}};eh=th,function(i,e){eh.exports=e()}(self,()=>{return i={},(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(t){this._terminal=t}dispose(){}fit(){const t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;const r=this._terminal._core;this._terminal.rows===t.rows&&this._terminal.cols===t.cols||(r._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const t=this._terminal._core,r=t._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;const s=this._terminal.options.scrollback===0?0:t.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(n.getPropertyValue("height")),o=Math.max(0,parseInt(n.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),l=a-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),h=o-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-s;return{cols:Math.max(2,Math.floor(h/r.css.cell.width)),rows:Math.max(1,Math.floor(l/r.css.cell.height))}}}})(),i;var i});var If=th.exports,ih={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(self,()=>(()=>{var t={345:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===c)return void this._listeners.splice(l,1)}}})),this._event}fire(c,l){const h=[];for(let u=0;u<this._listeners.length;u++)h.push(this._listeners[u]);for(let u=0;u<h.length;u++)h[u].call(void 0,c,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(c,l){return c(h=>l.fire(h))}},859:(a,o)=>{function c(l){for(const h of l)h.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const h=this._disposables.indexOf(l);h!==-1&&this._disposables.splice(h,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var h;this._isDisposed||l===this._value||((h=this._value)===null||h===void 0||h.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=c,o.getDisposeArrayDisposable=function(l){return{dispose:()=>c(l)}}}},r={};function s(a){var o=r[a];if(o!==void 0)return o.exports;var c=r[a]={exports:{}};return t[a](c,c.exports,s),c.exports}var n={};return(()=>{var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.SearchAddon=void 0;const o=s(345),c=s(859),l=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class h extends c.Disposable{constructor(f){var m;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new c.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new o.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(m=f?.highlightLimit)!==null&&m!==void 0?m:1e3}activate(f){this._terminal=f,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,c.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var f;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((f=this._lastSearchOptions)===null||f===void 0)&&f.decorations)&&(this._highlightTimeout=setTimeout(()=>{const m=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(m,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(f){this._selectedDecoration.clear(),(0,c.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),f||(this._cachedSearchTerm=void 0)}findNext(f,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=m,m?.decorations&&(this._cachedSearchTerm!==void 0&&f===this._cachedSearchTerm||this._highlightAllMatches(f,m));const d=this._findNextAndSelect(f,m);return this._fireResults(m),this._cachedSearchTerm=f,d}_highlightAllMatches(f,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!f||f.length===0)return void this.clearDecorations();m=m||{},this.clearDecorations(!0);const d=[];let p,g=this._find(f,0,0,m);for(;g&&(p?.row!==g.row||p?.col!==g.col)&&!(d.length>=this._highlightLimit);)p=g,d.push(p),g=this._find(f,p.col+p.term.length>=this._terminal.cols?p.row+1:p.row,p.col+p.term.length>=this._terminal.cols?0:p.col+1,m);for(const _ of d){const y=this._createResultDecoration(_,m.decorations);y&&(this._highlightedLines.add(y.marker.line),this._highlightDecorations.push({decoration:y,match:_,dispose(){y.dispose()}}))}}_find(f,m,d,p){var g;if(!this._terminal||!f||f.length===0)return(g=this._terminal)===null||g===void 0||g.clearSelection(),void this.clearDecorations();if(d>this._terminal.cols)throw new Error(`Invalid col: ${d} to search in terminal of ${this._terminal.cols} cols`);let _;this._initLinesCache();const y={startRow:m,startCol:d};if(_=this._findInLine(f,y,p),!_)for(let O=m+1;O<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=O,y.startCol=0,_=this._findInLine(f,y,p),!_);O++);return _}_findNextAndSelect(f,m){var d;if(!this._terminal||!f||f.length===0)return(d=this._terminal)===null||d===void 0||d.clearSelection(),this.clearDecorations(),!1;const p=this._terminal.getSelectionPosition();this._terminal.clearSelection();let g=0,_=0;p&&(this._cachedSearchTerm===f?(g=p.end.x,_=p.end.y):(g=p.start.x,_=p.start.y)),this._initLinesCache();const y={startRow:_,startCol:g};let O=this._findInLine(f,y,m);if(!O)for(let v=_+1;v<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=v,y.startCol=0,O=this._findInLine(f,y,m),!O);v++);if(!O&&_!==0)for(let v=0;v<_&&(y.startRow=v,y.startCol=0,O=this._findInLine(f,y,m),!O);v++);return!O&&p&&(y.startRow=p.start.y,y.startCol=0,O=this._findInLine(f,y,m)),this._selectResult(O,m?.decorations,m?.noScroll)}findPrevious(f,m){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=m,m?.decorations&&(this._cachedSearchTerm!==void 0&&f===this._cachedSearchTerm||this._highlightAllMatches(f,m));const d=this._findPreviousAndSelect(f,m);return this._fireResults(m),this._cachedSearchTerm=f,d}_fireResults(f){if(f?.decorations){let m=-1;if(this._selectedDecoration.value){const d=this._selectedDecoration.value.match;for(let p=0;p<this._highlightDecorations.length;p++){const g=this._highlightDecorations[p].match;if(g.row===d.row&&g.col===d.col&&g.size===d.size){m=p;break}}}this._onDidChangeResults.fire({resultIndex:m,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(f,m){var d;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!f||f.length===0)return(d=this._terminal)===null||d===void 0||d.clearSelection(),this.clearDecorations(),!1;const p=this._terminal.getSelectionPosition();this._terminal.clearSelection();let g=this._terminal.buffer.active.baseY+this._terminal.rows-1,_=this._terminal.cols;const y=!0;this._initLinesCache();const O={startRow:g,startCol:_};let v;if(p&&(O.startRow=g=p.start.y,O.startCol=_=p.start.x,this._cachedSearchTerm!==f&&(v=this._findInLine(f,O,m,!1),v||(O.startRow=g=p.end.y,O.startCol=_=p.end.x))),v||(v=this._findInLine(f,O,m,y)),!v){O.startCol=Math.max(O.startCol,this._terminal.cols);for(let S=g-1;S>=0&&(O.startRow=S,v=this._findInLine(f,O,m,y),!v);S--);}if(!v&&g!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let S=this._terminal.buffer.active.baseY+this._terminal.rows-1;S>=g&&(O.startRow=S,v=this._findInLine(f,O,m,y),!v);S--);return this._selectResult(v,m?.decorations,m?.noScroll)}_initLinesCache(){const f=this._terminal;this._linesCache||(this._linesCache=new Array(f.buffer.active.length),this._cursorMoveListener=f.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=f.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(f,m,d){return(f===0||l.includes(m[f-1]))&&(f+d.length===m.length||l.includes(m[f+d.length]))}_findInLine(f,m,d={},p=!1){var g;const _=this._terminal,y=m.startRow,O=m.startCol,v=_.buffer.active.getLine(y);if(v?.isWrapped)return p?void(m.startCol+=_.cols):(m.startRow--,m.startCol+=_.cols,this._findInLine(f,m,d));let S=(g=this._linesCache)===null||g===void 0?void 0:g[y];S||(S=this._translateBufferLineToStringWithWrap(y,!0),this._linesCache&&(this._linesCache[y]=S));const[T,k]=S,b=this._bufferColsToStringOffset(y,O),D=d.caseSensitive?f:f.toLowerCase(),E=d.caseSensitive?T:T.toLowerCase();let w=-1;if(d.regex){const x=RegExp(D,"g");let L;if(p)for(;L=x.exec(E.slice(0,b));)w=x.lastIndex-L[0].length,f=L[0],x.lastIndex-=f.length-1;else L=x.exec(E.slice(b)),L&&L[0].length>0&&(w=b+(x.lastIndex-L[0].length),f=L[0])}else p?b-D.length>=0&&(w=E.lastIndexOf(D,b-D.length)):w=E.indexOf(D,b);if(w>=0){if(d.wholeWord&&!this._isWholeWord(w,E,f))return;let x=0;for(;x<k.length-1&&w>=k[x+1];)x++;let L=x;for(;L<k.length-1&&w+f.length>=k[L+1];)L++;const P=w-k[x],R=w+f.length-k[L],A=this._stringLengthToBufferSize(y+x,P);return{term:f,col:A,row:y+x,size:this._stringLengthToBufferSize(y+L,R)-A+_.cols*(L-x)}}}_stringLengthToBufferSize(f,m){const d=this._terminal.buffer.active.getLine(f);if(!d)return 0;for(let p=0;p<m;p++){const g=d.getCell(p);if(!g)break;const _=g.getChars();_.length>1&&(m-=_.length-1);const y=d.getCell(p+1);y&&y.getWidth()===0&&m++}return m}_bufferColsToStringOffset(f,m){const d=this._terminal;let p=f,g=0,_=d.buffer.active.getLine(p);for(;m>0&&_;){for(let y=0;y<m&&y<d.cols;y++){const O=_.getCell(y);if(!O)break;O.getWidth()&&(g+=O.getCode()===0?1:O.getChars().length)}if(p++,_=d.buffer.active.getLine(p),_&&!_.isWrapped)break;m-=d.cols}return g}_translateBufferLineToStringWithWrap(f,m){var d;const p=this._terminal,g=[],_=[0];let y=p.buffer.active.getLine(f);for(;y;){const O=p.buffer.active.getLine(f+1),v=!!O&&O.isWrapped;let S=y.translateToString(!v&&m);if(v&&O){const T=y.getCell(y.length-1);T&&T.getCode()===0&&T.getWidth()===1&&((d=O.getCell(0))===null||d===void 0?void 0:d.getWidth())===2&&(S=S.slice(0,-1))}if(g.push(S),!v)break;_.push(_[_.length-1]+S.length),f++,y=O}return[g.join(""),_]}_selectResult(f,m,d){const p=this._terminal;if(this._selectedDecoration.clear(),!f)return p.clearSelection(),!1;if(p.select(f.col,f.row,f.size),m){const g=p.registerMarker(-p.buffer.active.baseY-p.buffer.active.cursorY+f.row);if(g){const _=p.registerDecoration({marker:g,x:f.col,width:f.size,backgroundColor:m.activeMatchBackground,layer:"top",overviewRulerOptions:{color:m.activeMatchColorOverviewRuler}});if(_){const y=[];y.push(g),y.push(_.onRender(O=>this._applyStyles(O,m.activeMatchBorder,!0))),y.push(_.onDispose(()=>(0,c.disposeArray)(y))),this._selectedDecoration.value={decoration:_,match:f,dispose(){_.dispose()}}}}}if(!d&&(f.row>=p.buffer.active.viewportY+p.rows||f.row<p.buffer.active.viewportY)){let g=f.row-p.buffer.active.viewportY;g-=Math.floor(p.rows/2),p.scrollLines(g)}return!0}_applyStyles(f,m,d){f.classList.contains("xterm-find-result-decoration")||(f.classList.add("xterm-find-result-decoration"),m&&(f.style.outline=`1px solid ${m}`)),d&&f.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(f,m){const d=this._terminal,p=d.registerMarker(-d.buffer.active.baseY-d.buffer.active.cursorY+f.row);if(!p)return;const g=d.registerDecoration({marker:p,x:f.col,width:f.size,backgroundColor:m.matchBackground,overviewRulerOptions:this._highlightedLines.has(p.line)?void 0:{color:m.matchOverviewRuler,position:"center"}});if(g){const _=[];_.push(p),_.push(g.onRender(y=>this._applyStyles(y,m.matchBorder,!1))),_.push(g.onDispose(()=>(0,c.disposeArray)(_)))}return g}}a.SearchAddon=h})(),n})())})(ih);var qf=ih.exports,rh={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(0,()=>(()=>{var t={433:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV11=void 0;const c=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],l=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],h=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],u=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let f;function m(d,p){let g,_=0,y=p.length-1;if(d<p[0][0]||d>p[y][1])return!1;for(;y>=_;)if(g=_+y>>1,d>p[g][1])_=g+1;else{if(!(d<p[g][0]))return!0;y=g-1}return!1}o.UnicodeV11=class{constructor(){if(this.version="11",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160);for(let d=0;d<c.length;++d)f.fill(0,c[d][0],c[d][1]+1);for(let d=0;d<h.length;++d)f.fill(2,h[d][0],h[d][1]+1)}}wcwidth(d){return d<32?0:d<127?1:d<65536?f[d]:m(d,l)?0:m(d,u)?2:1}}}},r={};function s(a){var o=r[a];if(o!==void 0)return o.exports;var c=r[a]={exports:{}};return t[a](c,c.exports,s),c.exports}var n={};return(()=>{var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.Unicode11Addon=void 0;const o=s(433);a.Unicode11Addon=class{activate(c){c.unicode.register(new o.UnicodeV11)}dispose(){}}})(),n})())})(rh);var Wf=rh.exports,sh={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(self,()=>(()=>{var t={6:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(l,h,u,f={}){this._terminal=l,this._regex=h,this._handler=u,this._options=f}provideLinks(l,h){const u=c.computeLink(l,this._regex,this._terminal,this._handler);h(this._addCallbacks(u))}_addCallbacks(l){return l.map(h=>(h.leave=this._options.leave,h.hover=(u,f)=>{if(this._options.hover){const{range:m}=h;this._options.hover(u,f,m)}},h))}};class c{static computeLink(h,u,f,m){const d=new RegExp(u.source,(u.flags||"")+"g"),[p,g]=c._getWindowedLineStrings(h-1,f),_=p.join("");let y;const O=[];for(;y=d.exec(_);){const v=y[0];try{const E=new URL(v),w=decodeURI(E.toString());if(v!==w&&v+"/"!==w)continue}catch{continue}const[S,T]=c._mapStrIdx(f,g,0,y.index),[k,b]=c._mapStrIdx(f,S,T,v.length);if(S===-1||T===-1||k===-1||b===-1)continue;const D={start:{x:T+1,y:S+1},end:{x:b,y:k+1}};O.push({range:D,text:v,activate:m})}return O}static _getWindowedLineStrings(h,u){let f,m=h,d=h,p=0,g="";const _=[];if(f=u.buffer.active.getLine(h)){const y=f.translateToString(!0);if(f.isWrapped&&y[0]!==" "){for(p=0;(f=u.buffer.active.getLine(--m))&&p<2048&&(g=f.translateToString(!0),p+=g.length,_.push(g),f.isWrapped&&g.indexOf(" ")===-1););_.reverse()}for(_.push(y),p=0;(f=u.buffer.active.getLine(++d))&&f.isWrapped&&p<2048&&(g=f.translateToString(!0),p+=g.length,_.push(g),g.indexOf(" ")===-1););}return[_,m]}static _mapStrIdx(h,u,f,m){const d=h.buffer.active,p=d.getNullCell();let g=f;for(;m;){const _=d.getLine(u);if(!_)return[-1,-1];for(let y=g;y<_.length;++y){_.getCell(y,p);const O=p.getChars();if(p.getWidth()&&(m-=O.length||1,y===_.length-1&&O==="")){const v=d.getLine(u+1);v&&v.isWrapped&&(v.getCell(0,p),p.getWidth()===2&&(m+=1))}if(m<0)return[u,y]}u++,g=0}return[u,g]}}o.LinkComputer=c}},r={};function s(a){var o=r[a];if(o!==void 0)return o.exports;var c=r[a]={exports:{}};return t[a](c,c.exports,s),c.exports}var n={};return(()=>{var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.WebLinksAddon=void 0;const o=s(6),c=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(h,u){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}a.WebLinksAddon=class{constructor(h=l,u={}){this._handler=h,this._options=u}activate(h){this._terminal=h;const u=this._options,f=u.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,f,this._handler,u))}dispose(){var h;(h=this._linkProvider)===null||h===void 0||h.dispose()}}})(),n})())})(sh);var jf=sh.exports,nh={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(self,()=>(()=>{var t={965:function(a,o,c){var l=this&&this.__decorate||function(k,b,D,E){var w,x=arguments.length,L=x<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,D):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(k,b,D,E);else for(var P=k.length-1;P>=0;P--)(w=k[P])&&(L=(x<3?w(L):x>3?w(b,D,L):w(b,D))||L);return x>3&&L&&Object.defineProperty(b,D,L),L};Object.defineProperty(o,"__esModule",{value:!0}),o.GlyphRenderer=void 0;const h=c(374),u=c(509),f=c(855),m=c(859),d=c(776),p=c(381),g=11,_=g*Float32Array.BYTES_PER_ELEMENT;let y,O=0,v=0,S=0;class T extends m.Disposable{constructor(b,D,E){super(),this._terminal=b,this._gl=D,this._dimensions=E,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const w=this._gl;u.TextureAtlas.maxAtlasPages===void 0&&(u.TextureAtlas.maxAtlasPages=Math.min(32,(0,h.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS))),u.TextureAtlas.maxTextureSize=(0,h.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_SIZE))),this._program=(0,h.throwIfFalsy)((0,p.createProgram)(w,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(F){let M="";for(let $=1;$<F;$++)M+=` else if (v_texpage == ${$}) { outColor = texture(u_texture[${$}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${F}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${M}
}`}(u.TextureAtlas.maxAtlasPages))),this.register((0,m.toDisposable)(()=>w.deleteProgram(this._program))),this._projectionLocation=(0,h.throwIfFalsy)(w.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,h.throwIfFalsy)(w.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,h.throwIfFalsy)(w.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=w.createVertexArray(),w.bindVertexArray(this._vertexArrayObject);const x=new Float32Array([0,0,1,0,0,1,1,1]),L=w.createBuffer();this.register((0,m.toDisposable)(()=>w.deleteBuffer(L))),w.bindBuffer(w.ARRAY_BUFFER,L),w.bufferData(w.ARRAY_BUFFER,x,w.STATIC_DRAW),w.enableVertexAttribArray(0),w.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const P=new Uint8Array([0,1,2,3]),R=w.createBuffer();this.register((0,m.toDisposable)(()=>w.deleteBuffer(R))),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,R),w.bufferData(w.ELEMENT_ARRAY_BUFFER,P,w.STATIC_DRAW),this._attributesBuffer=(0,h.throwIfFalsy)(w.createBuffer()),this.register((0,m.toDisposable)(()=>w.deleteBuffer(this._attributesBuffer))),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.enableVertexAttribArray(2),w.vertexAttribPointer(2,2,w.FLOAT,!1,_,0),w.vertexAttribDivisor(2,1),w.enableVertexAttribArray(3),w.vertexAttribPointer(3,2,w.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(3,1),w.enableVertexAttribArray(4),w.vertexAttribPointer(4,1,w.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(4,1),w.enableVertexAttribArray(5),w.vertexAttribPointer(5,2,w.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(5,1),w.enableVertexAttribArray(6),w.vertexAttribPointer(6,2,w.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(6,1),w.enableVertexAttribArray(1),w.vertexAttribPointer(1,2,w.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(1,1),w.useProgram(this._program);const A=new Int32Array(u.TextureAtlas.maxAtlasPages);for(let F=0;F<u.TextureAtlas.maxAtlasPages;F++)A[F]=F;w.uniform1iv(this._textureLocation,A),w.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),this._atlasTextures=[];for(let F=0;F<u.TextureAtlas.maxAtlasPages;F++){const M=new p.GLTexture((0,h.throwIfFalsy)(w.createTexture()));this.register((0,m.toDisposable)(()=>w.deleteTexture(M.texture))),w.activeTexture(w.TEXTURE0+F),w.bindTexture(w.TEXTURE_2D,M.texture),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[F]=M}w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(b,D,E,w,x,L,P,R){this._updateCell(this._vertices.attributes,b,D,E,w,x,L,P,R)}_updateCell(b,D,E,w,x,L,P,R,A){O=(E*this._terminal.cols+D)*g,w!==f.NULL_CELL_CODE&&w!==void 0?this._atlas&&(y=R&&R.length>1?this._atlas.getRasterizedGlyphCombinedChar(R,x,L,P,!1):this._atlas.getRasterizedGlyph(w,x,L,P,!1),v=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),x!==A&&y.offset.x>v?(S=y.offset.x-v,b[O]=-(y.offset.x-S)+this._dimensions.device.char.left,b[O+1]=-y.offset.y+this._dimensions.device.char.top,b[O+2]=(y.size.x-S)/this._dimensions.device.canvas.width,b[O+3]=y.size.y/this._dimensions.device.canvas.height,b[O+4]=y.texturePage,b[O+5]=y.texturePositionClipSpace.x+S/this._atlas.pages[y.texturePage].canvas.width,b[O+6]=y.texturePositionClipSpace.y,b[O+7]=y.sizeClipSpace.x-S/this._atlas.pages[y.texturePage].canvas.width,b[O+8]=y.sizeClipSpace.y):(b[O]=-y.offset.x+this._dimensions.device.char.left,b[O+1]=-y.offset.y+this._dimensions.device.char.top,b[O+2]=y.size.x/this._dimensions.device.canvas.width,b[O+3]=y.size.y/this._dimensions.device.canvas.height,b[O+4]=y.texturePage,b[O+5]=y.texturePositionClipSpace.x,b[O+6]=y.texturePositionClipSpace.y,b[O+7]=y.sizeClipSpace.x,b[O+8]=y.sizeClipSpace.y)):b.fill(0,O,O+g-1-2)}clear(){const b=this._terminal,D=b.cols*b.rows*g;this._vertices.count!==D?this._vertices.attributes=new Float32Array(D):this._vertices.attributes.fill(0);let E=0;for(;E<this._vertices.attributesBuffers.length;E++)this._vertices.count!==D?this._vertices.attributesBuffers[E]=new Float32Array(D):this._vertices.attributesBuffers[E].fill(0);this._vertices.count=D,E=0;for(let w=0;w<b.rows;w++)for(let x=0;x<b.cols;x++)this._vertices.attributes[E+9]=x/b.cols,this._vertices.attributes[E+10]=w/b.rows,E+=g}handleResize(){const b=this._gl;b.useProgram(this._program),b.viewport(0,0,b.canvas.width,b.canvas.height),b.uniform2f(this._resolutionLocation,b.canvas.width,b.canvas.height),this.clear()}render(b){if(!this._atlas)return;const D=this._gl;D.useProgram(this._program),D.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const E=this._vertices.attributesBuffers[this._activeBuffer];let w=0;for(let x=0;x<b.lineLengths.length;x++){const L=x*this._terminal.cols*g,P=this._vertices.attributes.subarray(L,L+b.lineLengths[x]*g);E.set(P,w),w+=P.length}D.bindBuffer(D.ARRAY_BUFFER,this._attributesBuffer),D.bufferData(D.ARRAY_BUFFER,E.subarray(0,w),D.STREAM_DRAW);for(let x=0;x<this._atlas.pages.length;x++)this._atlas.pages[x].version!==this._atlasTextures[x].version&&this._bindAtlasPageTexture(D,this._atlas,x);D.drawElementsInstanced(D.TRIANGLE_STRIP,4,D.UNSIGNED_BYTE,0,w/g)}setAtlas(b){this._atlas=b;for(const D of this._atlasTextures)D.version=-1}_bindAtlasPageTexture(b,D,E){b.activeTexture(b.TEXTURE0+E),b.bindTexture(b.TEXTURE_2D,this._atlasTextures[E].texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,D.pages[E].canvas),b.generateMipmap(b.TEXTURE_2D),this._atlasTextures[E].version=D.pages[E].version}setDimensions(b){this._dimensions=b}}o.GlyphRenderer=T,l([d.traceCall],T.prototype,"updateCell",null)},742:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RectangleRenderer=void 0;const l=c(374),h=c(859),u=c(310),f=c(381),m=8*Float32Array.BYTES_PER_ELEMENT;class d{constructor(){this.attributes=new Float32Array(160),this.count=0}}let p=0,g=0,_=0,y=0,O=0,v=0,S=0;class T extends h.Disposable{constructor(b,D,E,w){super(),this._terminal=b,this._gl=D,this._dimensions=E,this._themeService=w,this._vertices=new d,this._verticesCursor=new d;const x=this._gl;this._program=(0,l.throwIfFalsy)((0,f.createProgram)(x,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,h.toDisposable)(()=>x.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(x.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=x.createVertexArray(),x.bindVertexArray(this._vertexArrayObject);const L=new Float32Array([0,0,1,0,0,1,1,1]),P=x.createBuffer();this.register((0,h.toDisposable)(()=>x.deleteBuffer(P))),x.bindBuffer(x.ARRAY_BUFFER,P),x.bufferData(x.ARRAY_BUFFER,L,x.STATIC_DRAW),x.enableVertexAttribArray(3),x.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const R=new Uint8Array([0,1,2,3]),A=x.createBuffer();this.register((0,h.toDisposable)(()=>x.deleteBuffer(A))),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,A),x.bufferData(x.ELEMENT_ARRAY_BUFFER,R,x.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(x.createBuffer()),this.register((0,h.toDisposable)(()=>x.deleteBuffer(this._attributesBuffer))),x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.enableVertexAttribArray(0),x.vertexAttribPointer(0,2,x.FLOAT,!1,m,0),x.vertexAttribDivisor(0,1),x.enableVertexAttribArray(1),x.vertexAttribPointer(1,2,x.FLOAT,!1,m,2*Float32Array.BYTES_PER_ELEMENT),x.vertexAttribDivisor(1,1),x.enableVertexAttribArray(2),x.vertexAttribPointer(2,4,x.FLOAT,!1,m,4*Float32Array.BYTES_PER_ELEMENT),x.vertexAttribDivisor(2,1),this._updateCachedColors(w.colors),this.register(this._themeService.onChangeColors(F=>{this._updateCachedColors(F),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(b){const D=this._gl;D.useProgram(this._program),D.bindVertexArray(this._vertexArrayObject),D.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),D.bindBuffer(D.ARRAY_BUFFER,this._attributesBuffer),D.bufferData(D.ARRAY_BUFFER,b.attributes,D.DYNAMIC_DRAW),D.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,D.UNSIGNED_BYTE,0,b.count)}handleResize(){this._updateViewportRectangle()}setDimensions(b){this._dimensions=b}_updateCachedColors(b){this._bgFloat=this._colorToFloat32Array(b.background),this._cursorFloat=this._colorToFloat32Array(b.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(b){const D=this._terminal,E=this._vertices;let w,x,L,P,R,A,F,M,$,B,j,z=1;for(w=0;w<D.rows;w++){for(L=-1,P=0,R=0,A=!1,x=0;x<D.cols;x++)F=(w*D.cols+x)*u.RENDER_MODEL_INDICIES_PER_CELL,M=b.cells[F+u.RENDER_MODEL_BG_OFFSET],$=b.cells[F+u.RENDER_MODEL_FG_OFFSET],B=!!(67108864&$),(M!==P||$!==R&&(A||B))&&((P!==0||A&&R!==0)&&(j=8*z++,this._updateRectangle(E,j,R,P,L,x,w)),L=x,P=M,R=$,A=B);(P!==0||A&&R!==0)&&(j=8*z++,this._updateRectangle(E,j,R,P,L,D.cols,w))}E.count=z}updateCursor(b){const D=this._verticesCursor,E=b.cursor;if(!E||E.style==="block")return void(D.count=0);let w,x=0;E.style!=="bar"&&E.style!=="outline"||(w=8*x++,this._addRectangleFloat(D.attributes,w,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(w=8*x++,this._addRectangleFloat(D.attributes,w,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(w=8*x++,this._addRectangleFloat(D.attributes,w,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),w=8*x++,this._addRectangleFloat(D.attributes,w,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),D.count=x}_updateRectangle(b,D,E,w,x,L,P){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:p=(16777215&E)<<8;break;default:p=this._themeService.colors.foreground.rgba}else switch(50331648&w){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&w].rgba;break;case 50331648:p=(16777215&w)<<8;break;default:p=this._themeService.colors.background.rgba}b.attributes.length<D+4&&(b.attributes=(0,f.expandFloat32Array)(b.attributes,this._terminal.rows*this._terminal.cols*8)),g=x*this._dimensions.device.cell.width,_=P*this._dimensions.device.cell.height,y=(p>>24&255)/255,O=(p>>16&255)/255,v=(p>>8&255)/255,S=1,this._addRectangle(b.attributes,D,g,_,(L-x)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,y,O,v,S)}_addRectangle(b,D,E,w,x,L,P,R,A,F){b[D]=E/this._dimensions.device.canvas.width,b[D+1]=w/this._dimensions.device.canvas.height,b[D+2]=x/this._dimensions.device.canvas.width,b[D+3]=L/this._dimensions.device.canvas.height,b[D+4]=P,b[D+5]=R,b[D+6]=A,b[D+7]=F}_addRectangleFloat(b,D,E,w,x,L,P){b[D]=E/this._dimensions.device.canvas.width,b[D+1]=w/this._dimensions.device.canvas.height,b[D+2]=x/this._dimensions.device.canvas.width,b[D+3]=L/this._dimensions.device.canvas.height,b[D+4]=P[0],b[D+5]=P[1],b[D+6]=P[2],b[D+7]=P[3]}_colorToFloat32Array(b){return new Float32Array([(b.rgba>>24&255)/255,(b.rgba>>16&255)/255,(b.rgba>>8&255)/255,(255&b.rgba)/255])}}o.RectangleRenderer=T},310:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderModel=o.COMBINED_CHAR_BIT_MASK=o.RENDER_MODEL_EXT_OFFSET=o.RENDER_MODEL_FG_OFFSET=o.RENDER_MODEL_BG_OFFSET=o.RENDER_MODEL_INDICIES_PER_CELL=void 0;const l=c(296);o.RENDER_MODEL_INDICIES_PER_CELL=4,o.RENDER_MODEL_BG_OFFSET=1,o.RENDER_MODEL_FG_OFFSET=2,o.RENDER_MODEL_EXT_OFFSET=3,o.COMBINED_CHAR_BIT_MASK=2147483648,o.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(h,u){const f=h*u*o.RENDER_MODEL_INDICIES_PER_CELL;f!==this.cells.length&&(this.cells=new Uint32Array(f),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(a,o,c){var l=this&&this.__decorate||function(L,P,R,A){var F,M=arguments.length,$=M<3?P:A===null?A=Object.getOwnPropertyDescriptor(P,R):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(L,P,R,A);else for(var B=L.length-1;B>=0;B--)(F=L[B])&&($=(M<3?F($):M>3?F(P,R,$):F(P,R))||$);return M>3&&$&&Object.defineProperty(P,R,$),$};Object.defineProperty(o,"__esModule",{value:!0}),o.JoinedCellData=o.WebglRenderer=void 0;const h=c(820),u=c(274),f=c(627),m=c(457),d=c(56),p=c(374),g=c(345),_=c(859),y=c(147),O=c(782),v=c(855),S=c(776),T=c(965),k=c(742),b=c(310),D=c(733);class E extends _.Disposable{constructor(P,R,A,F,M,$,B,j,z){super(),this._terminal=P,this._characterJoinerService=R,this._charSizeService=A,this._coreBrowserService=F,this._coreService=M,this._decorationService=$,this._optionsService=B,this._themeService=j,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new b.RenderModel,this._workCell=new O.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new g.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new g.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new g.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new g.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new u.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new D.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,B,this._themeService)],this.dimensions=(0,p.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(B.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const W={antialias:!1,depth:!1,preserveDrawingBuffer:z};if(this._gl=this._canvas.getContext("webgl2",W),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,h.addDisposableDomListener)(this._canvas,"webglcontextlost",Q=>{console.log("webglcontextlost event received"),Q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(Q)},3e3)})),this.register((0,h.addDisposableDomListener)(this._canvas,"webglcontextrestored",Q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,f.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,d.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(Q,I)=>this._setCanvasDevicePixelDimensions(Q,I))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var Q;for(const I of this._renderLayers)I.dispose();(Q=this._canvas.parentElement)===null||Q===void 0||Q.removeChild(this._canvas),(0,f.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var P;return(P=this._charAtlas)===null||P===void 0?void 0:P.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(P,R){var A,F,M,$;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const B of this._renderLayers)B.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(A=this._rectangleRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(F=this._rectangleRenderer.value)===null||F===void 0||F.handleResize(),(M=this._glyphRenderer.value)===null||M===void 0||M.setDimensions(this.dimensions),($=this._glyphRenderer.value)===null||$===void 0||$.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var P;for(const R of this._renderLayers)R.handleBlur(this._terminal);(P=this._cursorBlinkStateManager.value)===null||P===void 0||P.pause(),this._requestRedrawViewport()}handleFocus(){var P;for(const R of this._renderLayers)R.handleFocus(this._terminal);(P=this._cursorBlinkStateManager.value)===null||P===void 0||P.resume(),this._requestRedrawViewport()}handleSelectionChanged(P,R,A){for(const F of this._renderLayers)F.handleSelectionChanged(this._terminal,P,R,A);this._model.selection.update(this._terminal,P,R,A),this._requestRedrawViewport()}handleCursorMove(){var P;for(const R of this._renderLayers)R.handleCursorMove(this._terminal);(P=this._cursorBlinkStateManager.value)===null||P===void 0||P.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new k.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new T.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var P;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const R=(0,f.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,g.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,g.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(P=this._glyphRenderer.value)===null||P===void 0||P.setAtlas(this._charAtlas)}_clearModel(P){var R;this._model.clear(),P&&((R=this._glyphRenderer.value)===null||R===void 0||R.clear())}clearTextureAtlas(){var P;(P=this._charAtlas)===null||P===void 0||P.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var P;this._clearModel(!0);for(const R of this._renderLayers)R.reset(this._terminal);(P=this._cursorBlinkStateManager.value)===null||P===void 0||P.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(P){return-1}deregisterCharacterJoiner(P){return!1}renderRows(P,R){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const A of this._renderLayers)A.handleGridChanged(this._terminal,P,R);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(P,R),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new m.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(P,R){const A=this._core;let F,M,$,B,j,z,W,Q,I,N,J,U,K,ie=this._workCell;P=x(P,A.rows-1,0),R=x(R,A.rows-1,0);const Ce=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,me=Math.min(this._terminal.buffer.active.cursorX,A.cols-1);let ke=-1;const ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let Le=!1;for(M=P;M<=R;M++)for($=M+A.buffer.ydisp,B=A.buffer.lines.get($),this._model.lineLengths[M]=0,j=this._characterJoinerService.getJoinedCharacters($),U=0;U<A.cols;U++)if(F=this._cellColorResolver.result.bg,B.loadCell(U,ie),U===0&&(F=this._cellColorResolver.result.bg),z=!1,W=U,j.length>0&&U===j[0][0]&&(z=!0,Q=j.shift(),ie=new w(ie,B.translateToString(!0,Q[0],Q[1]),Q[1]-Q[0]),W=Q[1]-1),I=ie.getChars(),N=ie.getCode(),J=(M*A.cols+U)*b.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(ie,U,$),ae&&$===Ce&&(U===me&&(this._model.cursor={x:me,y:this._terminal.buffer.active.cursorY,width:ie.getWidth(),style:this._coreBrowserService.isFocused?A.options.cursorStyle||"block":A.options.cursorInactiveStyle,cursorWidth:A.options.cursorWidth,dpr:this._devicePixelRatio},ke=me+ie.getWidth()-1),U>=me&&U<=ke&&(this._coreBrowserService.isFocused&&(A.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&A.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),N!==v.NULL_CELL_CODE&&(this._model.lineLengths[M]=U+1),(this._model.cells[J]!==N||this._model.cells[J+b.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[J+b.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[J+b.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Le=!0,I.length>1&&(N|=b.COMBINED_CHAR_BIT_MASK),this._model.cells[J]=N,this._model.cells[J+b.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[J+b.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[J+b.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(U,M,N,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,I,F),z))for(ie=this._workCell,U++;U<W;U++)K=(M*A.cols+U)*b.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(U,M,v.NULL_CELL_CODE,0,0,0,v.NULL_CELL_CHAR,0),this._model.cells[K]=v.NULL_CELL_CODE,this._model.cells[K+b.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[K+b.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[K+b.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;Le&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(P,R){this._canvas.width===P&&this._canvas.height===R||(this._canvas.width=P,this._canvas.height=R,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const P=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:P,end:P})}}o.WebglRenderer=E,l([S.traceCall],E.prototype,"renderRows",null);class w extends y.AttributeData{constructor(P,R,A){super(),this.content=0,this.combinedData="",this.fg=P.fg,this.bg=P.bg,this.combinedData=R,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(P){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function x(L,P,R=0){return Math.max(Math.min(L,P),R)}o.JoinedCellData=w},381:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GLTexture=o.expandFloat32Array=o.createShader=o.createProgram=o.PROJECTION_MATRIX=void 0;const l=c(374);function h(u,f,m){const d=(0,l.throwIfFalsy)(u.createShader(f));if(u.shaderSource(d,m),u.compileShader(d),u.getShaderParameter(d,u.COMPILE_STATUS))return d;console.error(u.getShaderInfoLog(d)),u.deleteShader(d)}o.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),o.createProgram=function(u,f,m){const d=(0,l.throwIfFalsy)(u.createProgram());if(u.attachShader(d,(0,l.throwIfFalsy)(h(u,u.VERTEX_SHADER,f))),u.attachShader(d,(0,l.throwIfFalsy)(h(u,u.FRAGMENT_SHADER,m))),u.linkProgram(d),u.getProgramParameter(d,u.LINK_STATUS))return d;console.error(u.getProgramInfoLog(d)),u.deleteProgram(d)},o.createShader=h,o.expandFloat32Array=function(u,f){const m=Math.min(2*u.length,f),d=new Float32Array(m);for(let p=0;p<u.length;p++)d[p]=u[p];return d},o.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRenderLayer=void 0;const l=c(627),h=c(237),u=c(374),f=c(859);class m extends f.Disposable{constructor(p,g,_,y,O,v,S,T){super(),this._container=g,this._alpha=O,this._coreBrowserService=v,this._optionsService=S,this._themeService=T,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=y.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(k=>{this._refreshCharAtlas(p,k),this.reset(p)})),this.register((0,f.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(p){}handleFocus(p){}handleCursorMove(p){}handleGridChanged(p,g,_){}handleSelectionChanged(p,g,_,y=!1){}_setTransparency(p,g){if(g===this._alpha)return;const _=this._canvas;this._alpha=g,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(p,this._themeService.colors),this.handleGridChanged(p,0,p.rows-1)}_refreshCharAtlas(p,g){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(p,this._optionsService.rawOptions,g,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(p,g){this._deviceCellWidth=g.device.cell.width,this._deviceCellHeight=g.device.cell.height,this._deviceCharWidth=g.device.char.width,this._deviceCharHeight=g.device.char.height,this._deviceCharLeft=g.device.char.left,this._deviceCharTop=g.device.char.top,this._canvas.width=g.device.canvas.width,this._canvas.height=g.device.canvas.height,this._canvas.style.width=`${g.css.canvas.width}px`,this._canvas.style.height=`${g.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(p,this._themeService.colors)}_fillBottomLineAtCells(p,g,_=1){this._ctx.fillRect(p*this._deviceCellWidth,(g+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(p,g,_,y){this._alpha?this._ctx.clearRect(p*this._deviceCellWidth,g*this._deviceCellHeight,_*this._deviceCellWidth,y*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(p*this._deviceCellWidth,g*this._deviceCellHeight,_*this._deviceCellWidth,y*this._deviceCellHeight))}_fillCharTrueColor(p,g,_,y){this._ctx.font=this._getFont(p,!1,!1),this._ctx.textBaseline=h.TEXT_BASELINE,this._clipCell(_,y,g.getWidth()),this._ctx.fillText(g.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(p,g,_){this._ctx.beginPath(),this._ctx.rect(p*this._deviceCellWidth,g*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(p,g,_){return`${_?"italic":""} ${g?p.options.fontWeightBold:p.options.fontWeight} ${p.options.fontSize*this._coreBrowserService.dpr}px ${p.options.fontFamily}`}}o.BaseRenderLayer=m},733:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkRenderLayer=void 0;const l=c(197),h=c(237),u=c(592);class f extends u.BaseRenderLayer{constructor(d,p,g,_,y,O,v){super(g,d,"link",p,!0,y,O,v),this.register(_.onShowLinkUnderline(S=>this._handleShowLinkUnderline(S))),this.register(_.onHideLinkUnderline(S=>this._handleHideLinkUnderline(S)))}resize(d,p){super.resize(d,p),this._state=void 0}reset(d){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const d=this._state.y2-this._state.y1-1;d>0&&this._clearCells(0,this._state.y1+1,this._state.cols,d),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(d){if(d.fg===h.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:d.fg!==void 0&&(0,l.is256Color)(d.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[d.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,d.y1===d.y2)this._fillBottomLineAtCells(d.x1,d.y1,d.x2-d.x1);else{this._fillBottomLineAtCells(d.x1,d.y1,d.cols-d.x1);for(let p=d.y1+1;p<d.y2;p++)this._fillBottomLineAtCells(0,p,d.cols);this._fillBottomLineAtCells(0,d.y2,d.x2)}this._state=d}_handleHideLinkUnderline(d){this._clearCurrentLink()}}o.LinkRenderLayer=f},820:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(c,l,h,u){c.addEventListener(l,h,u);let f=!1;return{dispose:()=>{f||(f=!0,c.removeEventListener(l,h,u))}}}},274:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellColorResolver=void 0;let c,l=0,h=0,u=!1,f=!1,m=!1;o.CellColorResolver=class{constructor(d,p,g,_,y){this._terminal=d,this._selectionRenderModel=p,this._decorationService=g,this._coreBrowserService=_,this._themeService=y,this.result={fg:0,bg:0,ext:0}}resolve(d,p,g){this.result.bg=d.bg,this.result.fg=d.fg,this.result.ext=268435456&d.bg?d.extended.ext:0,h=0,l=0,f=!1,u=!1,m=!1,c=this._themeService.colors,this._decorationService.forEachDecorationAtCell(p,g,"bottom",_=>{_.backgroundColorRGB&&(h=_.backgroundColorRGB.rgba>>8&16777215,f=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,u=!0)}),m=this._selectionRenderModel.isCellSelected(this._terminal,p,g),m&&(h=(this._coreBrowserService.isFocused?c.selectionBackgroundOpaque:c.selectionInactiveBackgroundOpaque).rgba>>8&16777215,f=!0,c.selectionForeground&&(l=c.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(p,g,"top",_=>{_.backgroundColorRGB&&(h=_.backgroundColorRGB.rgba>>8&16777215,f=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,u=!0)}),f&&(h=m?-16777216&d.bg&-134217729|h|50331648:-16777216&d.bg|h|50331648),u&&(l=-16777216&d.fg&-67108865|l|50331648),67108864&this.result.fg&&(f&&!u&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&c.background.rgba>>8|50331648,u=!0),!f&&u&&(h=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&c.foreground.rgba>>8|50331648,f=!0)),c=void 0,this.result.bg=f?h:this.result.bg,this.result.fg=u?l:this.result.fg}}},627:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.removeTerminalFromCache=o.acquireTextureAtlas=void 0;const l=c(509),h=c(197),u=[];o.acquireTextureAtlas=function(f,m,d,p,g,_,y,O){const v=(0,h.generateConfig)(p,g,_,y,m,d,O);for(let k=0;k<u.length;k++){const b=u[k],D=b.ownedBy.indexOf(f);if(D>=0){if((0,h.configEquals)(b.config,v))return b.atlas;b.ownedBy.length===1?(b.atlas.dispose(),u.splice(k,1)):b.ownedBy.splice(D,1);break}}for(let k=0;k<u.length;k++){const b=u[k];if((0,h.configEquals)(b.config,v))return b.ownedBy.push(f),b.atlas}const S=f._core,T={atlas:new l.TextureAtlas(document,v,S.unicodeService),config:v,ownedBy:[f]};return u.push(T),T.atlas},o.removeTerminalFromCache=function(f){for(let m=0;m<u.length;m++){const d=u[m].ownedBy.indexOf(f);if(d!==-1){u[m].ownedBy.length===1?(u[m].atlas.dispose(),u.splice(m,1)):u[m].ownedBy.splice(d,1);break}}}},197:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.is256Color=o.configEquals=o.generateConfig=void 0;const l=c(160);o.generateConfig=function(h,u,f,m,d,p,g){const _={foreground:p.foreground,background:p.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:p.ansi.slice(),contrastCache:p.contrastCache,halfContrastCache:p.halfContrastCache};return{customGlyphs:d.customGlyphs,devicePixelRatio:g,letterSpacing:d.letterSpacing,lineHeight:d.lineHeight,deviceCellWidth:h,deviceCellHeight:u,deviceCharWidth:f,deviceCharHeight:m,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,drawBoldTextInBrightColors:d.drawBoldTextInBrightColors,minimumContrastRatio:d.minimumContrastRatio,colors:_}},o.configEquals=function(h,u){for(let f=0;f<h.colors.ansi.length;f++)if(h.colors.ansi[f].rgba!==u.colors.ansi[f].rgba)return!1;return h.devicePixelRatio===u.devicePixelRatio&&h.customGlyphs===u.customGlyphs&&h.lineHeight===u.lineHeight&&h.letterSpacing===u.letterSpacing&&h.fontFamily===u.fontFamily&&h.fontSize===u.fontSize&&h.fontWeight===u.fontWeight&&h.fontWeightBold===u.fontWeightBold&&h.allowTransparency===u.allowTransparency&&h.deviceCharWidth===u.deviceCharWidth&&h.deviceCharHeight===u.deviceCharHeight&&h.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&h.minimumContrastRatio===u.minimumContrastRatio&&h.colors.foreground.rgba===u.colors.foreground.rgba&&h.colors.background.rgba===u.colors.background.rgba},o.is256Color=function(h){return(50331648&h)==16777216||(50331648&h)==33554432}},237:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const l=c(399);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CursorBlinkStateManager=void 0,o.CursorBlinkStateManager=class{constructor(c,l){this._renderCallback=c,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(c=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},c)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tryDrawCustomChar=o.powerlineDefinitions=o.boxDrawingDefinitions=o.blockElementDefinitions=void 0;const l=c(374);o.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const h={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};o.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(p,g)=>`M0,${.5-g} L1,${.5-g} M0,${.5+g} L1,${.5+g}`},"\u2551":{1:(p,g)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2552":{1:(p,g)=>`M.5,1 L.5,${.5-g} L1,${.5-g} M.5,${.5+g} L1,${.5+g}`},"\u2553":{1:(p,g)=>`M${.5-p},1 L${.5-p},.5 L1,.5 M${.5+p},.5 L${.5+p},1`},"\u2554":{1:(p,g)=>`M1,${.5-g} L${.5-p},${.5-g} L${.5-p},1 M1,${.5+g} L${.5+p},${.5+g} L${.5+p},1`},"\u2555":{1:(p,g)=>`M0,${.5-g} L.5,${.5-g} L.5,1 M0,${.5+g} L.5,${.5+g}`},"\u2556":{1:(p,g)=>`M${.5+p},1 L${.5+p},.5 L0,.5 M${.5-p},.5 L${.5-p},1`},"\u2557":{1:(p,g)=>`M0,${.5+g} L${.5-p},${.5+g} L${.5-p},1 M0,${.5-g} L${.5+p},${.5-g} L${.5+p},1`},"\u2558":{1:(p,g)=>`M.5,0 L.5,${.5+g} L1,${.5+g} M.5,${.5-g} L1,${.5-g}`},"\u2559":{1:(p,g)=>`M1,.5 L${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u255A":{1:(p,g)=>`M1,${.5-g} L${.5+p},${.5-g} L${.5+p},0 M1,${.5+g} L${.5-p},${.5+g} L${.5-p},0`},"\u255B":{1:(p,g)=>`M0,${.5+g} L.5,${.5+g} L.5,0 M0,${.5-g} L.5,${.5-g}`},"\u255C":{1:(p,g)=>`M0,.5 L${.5+p},.5 L${.5+p},0 M${.5-p},.5 L${.5-p},0`},"\u255D":{1:(p,g)=>`M0,${.5-g} L${.5-p},${.5-g} L${.5-p},0 M0,${.5+g} L${.5+p},${.5+g} L${.5+p},0`},"\u255E":{1:(p,g)=>`M.5,0 L.5,1 M.5,${.5-g} L1,${.5-g} M.5,${.5+g} L1,${.5+g}`},"\u255F":{1:(p,g)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1 M${.5+p},.5 L1,.5`},"\u2560":{1:(p,g)=>`M${.5-p},0 L${.5-p},1 M1,${.5+g} L${.5+p},${.5+g} L${.5+p},1 M1,${.5-g} L${.5+p},${.5-g} L${.5+p},0`},"\u2561":{1:(p,g)=>`M.5,0 L.5,1 M0,${.5-g} L.5,${.5-g} M0,${.5+g} L.5,${.5+g}`},"\u2562":{1:(p,g)=>`M0,.5 L${.5-p},.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2563":{1:(p,g)=>`M${.5+p},0 L${.5+p},1 M0,${.5+g} L${.5-p},${.5+g} L${.5-p},1 M0,${.5-g} L${.5-p},${.5-g} L${.5-p},0`},"\u2564":{1:(p,g)=>`M0,${.5-g} L1,${.5-g} M0,${.5+g} L1,${.5+g} M.5,${.5+g} L.5,1`},"\u2565":{1:(p,g)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},1 M${.5+p},.5 L${.5+p},1`},"\u2566":{1:(p,g)=>`M0,${.5-g} L1,${.5-g} M0,${.5+g} L${.5-p},${.5+g} L${.5-p},1 M1,${.5+g} L${.5+p},${.5+g} L${.5+p},1`},"\u2567":{1:(p,g)=>`M.5,0 L.5,${.5-g} M0,${.5-g} L1,${.5-g} M0,${.5+g} L1,${.5+g}`},"\u2568":{1:(p,g)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u2569":{1:(p,g)=>`M0,${.5+g} L1,${.5+g} M0,${.5-g} L${.5-p},${.5-g} L${.5-p},0 M1,${.5-g} L${.5+p},${.5-g} L${.5+p},0`},"\u256A":{1:(p,g)=>`M.5,0 L.5,1 M0,${.5-g} L1,${.5-g} M0,${.5+g} L1,${.5+g}`},"\u256B":{1:(p,g)=>`M0,.5 L1,.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u256C":{1:(p,g)=>`M0,${.5+g} L${.5-p},${.5+g} L${.5-p},1 M1,${.5+g} L${.5+p},${.5+g} L${.5+p},1 M0,${.5-g} L${.5-p},${.5-g} L${.5-p},0 M1,${.5-g} L${.5+p},${.5-g} L${.5+p},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(p,g)=>`M.5,1 L.5,${.5+g/.15*.5} C.5,${.5+g/.15*.5},.5,.5,1,.5`},"\u256E":{1:(p,g)=>`M.5,1 L.5,${.5+g/.15*.5} C.5,${.5+g/.15*.5},.5,.5,0,.5`},"\u256F":{1:(p,g)=>`M.5,0 L.5,${.5-g/.15*.5} C.5,${.5-g/.15*.5},.5,.5,0,.5`},"\u2570":{1:(p,g)=>`M.5,0 L.5,${.5-g/.15*.5} C.5,${.5-g/.15*.5},.5,.5,1,.5`}},o.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},o.powerlineDefinitions["\uE0BB"]=o.powerlineDefinitions["\uE0BD"],o.powerlineDefinitions["\uE0BF"]=o.powerlineDefinitions["\uE0B9"],o.tryDrawCustomChar=function(p,g,_,y,O,v,S,T){const k=o.blockElementDefinitions[g];if(k)return function(w,x,L,P,R,A){for(let F=0;F<x.length;F++){const M=x[F],$=R/8,B=A/8;w.fillRect(L+M.x*$,P+M.y*B,M.w*$,M.h*B)}}(p,k,_,y,O,v),!0;const b=h[g];if(b)return function(w,x,L,P,R,A){let F=u.get(x);F||(F=new Map,u.set(x,F));const M=w.fillStyle;if(typeof M!="string")throw new Error(`Unexpected fillStyle type "${M}"`);let $=F.get(M);if(!$){const B=x[0].length,j=x.length,z=document.createElement("canvas");z.width=B,z.height=j;const W=(0,l.throwIfFalsy)(z.getContext("2d")),Q=new ImageData(B,j);let I,N,J,U;if(M.startsWith("#"))I=parseInt(M.slice(1,3),16),N=parseInt(M.slice(3,5),16),J=parseInt(M.slice(5,7),16),U=M.length>7&&parseInt(M.slice(7,9),16)||1;else{if(!M.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${M}" when drawing pattern glyph`);[I,N,J,U]=M.substring(5,M.length-1).split(",").map(K=>parseFloat(K))}for(let K=0;K<j;K++)for(let ie=0;ie<B;ie++)Q.data[4*(K*B+ie)]=I,Q.data[4*(K*B+ie)+1]=N,Q.data[4*(K*B+ie)+2]=J,Q.data[4*(K*B+ie)+3]=x[K][ie]*(255*U);W.putImageData(Q,0,0),$=(0,l.throwIfFalsy)(w.createPattern(z,null)),F.set(M,$)}w.fillStyle=$,w.fillRect(L,P,R,A)}(p,b,_,y,O,v),!0;const D=o.boxDrawingDefinitions[g];if(D)return function(w,x,L,P,R,A,F){w.strokeStyle=w.fillStyle;for(const[M,$]of Object.entries(x)){let B;w.beginPath(),w.lineWidth=F*Number.parseInt(M),B=typeof $=="function"?$(.15,.15/A*R):$;for(const j of B.split(" ")){const z=j[0],W=m[z];if(!W){console.error(`Could not find drawing instructions for "${z}"`);continue}const Q=j.substring(1).split(",");Q[0]&&Q[1]&&W(w,d(Q,R,A,L,P,!0,F))}w.stroke(),w.closePath()}}(p,D,_,y,O,v,T),!0;const E=o.powerlineDefinitions[g];return!!E&&(function(w,x,L,P,R,A,F,M){var $,B;const j=new Path2D;j.rect(L,P,R,A),w.clip(j),w.beginPath();const z=F/12;w.lineWidth=M*z;for(const W of x.d.split(" ")){const Q=W[0],I=m[Q];if(!I){console.error(`Could not find drawing instructions for "${Q}"`);continue}const N=W.substring(1).split(",");N[0]&&N[1]&&I(w,d(N,R,A,L,P,!1,M,(($=x.leftPadding)!==null&&$!==void 0?$:0)*(z/2),((B=x.rightPadding)!==null&&B!==void 0?B:0)*(z/2)))}x.type===1?(w.strokeStyle=w.fillStyle,w.stroke()):w.fill(),w.closePath()}(p,E,_,y,O,v,S,T),!0)};const u=new Map;function f(p,g,_=0){return Math.max(Math.min(p,g),_)}const m={C:(p,g)=>p.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]),L:(p,g)=>p.lineTo(g[0],g[1]),M:(p,g)=>p.moveTo(g[0],g[1])};function d(p,g,_,y,O,v,S,T=0,k=0){const b=p.map(D=>parseFloat(D)||parseInt(D));if(b.length<2)throw new Error("Too few arguments for instruction");for(let D=0;D<b.length;D+=2)b[D]*=g-T*S-k*S,v&&b[D]!==0&&(b[D]=f(Math.round(b[D]+.5)-.5,g,0)),b[D]+=y+T*S;for(let D=1;D<b.length;D+=2)b[D]*=_,v&&b[D]!==0&&(b[D]=f(Math.round(b[D]+.5)-.5,_,0)),b[D]+=O;return b}},56:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.observeDevicePixelDimensions=void 0;const l=c(859);o.observeDevicePixelDimensions=function(h,u,f){let m=new u.ResizeObserver(d=>{const p=d.find(y=>y.target===h);if(!p)return;if(!("devicePixelContentBoxSize"in p))return m?.disconnect(),void(m=void 0);const g=p.devicePixelContentBoxSize[0].inlineSize,_=p.devicePixelContentBoxSize[0].blockSize;g>0&&_>0&&f(g,_)});try{m.observe(h,{box:["device-pixel-content-box"]})}catch{m.disconnect(),m=void 0}return(0,l.toDisposable)(()=>m?.disconnect())}},374:(a,o)=>{function c(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=c,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.excludeFromContrastRatioDemands=function(l){return c(l)||function(h){return 9472<=h&&h<=9631}(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(h,u,f,m=!1){if(this.selectionStart=u,this.selectionEnd=f,!u||!f||u[0]===f[0]&&u[1]===f[1])return void this.clear();const d=u[1]-h.buffer.active.viewportY,p=f[1]-h.buffer.active.viewportY,g=Math.max(d,0),_=Math.min(p,h.rows-1);g>=h.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=d,this.viewportEndRow=p,this.viewportCappedStartRow=g,this.viewportCappedEndRow=_,this.startCol=u[0],this.endCol=f[0])}isCellSelected(h,u,f){return!!this.hasSelection&&(f-=h.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&f>=this.viewportCappedStartRow&&u<this.endCol&&f<=this.viewportCappedEndRow:u<this.startCol&&f>=this.viewportCappedStartRow&&u>=this.endCol&&f<=this.viewportCappedEndRow:f>this.viewportStartRow&&f<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&f===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportStartRow&&u>=this.startCol)}}o.createSelectionRenderModel=function(){return new c}},509:function(a,o,c){var l=this&&this.__decorate||function(E,w,x,L){var P,R=arguments.length,A=R<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,x):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,w,x,L);else for(var F=E.length-1;F>=0;F--)(P=E[F])&&(A=(R<3?P(A):R>3?P(w,x,A):P(w,x))||A);return R>3&&A&&Object.defineProperty(w,x,A),A};Object.defineProperty(o,"__esModule",{value:!0}),o.TextureAtlas=void 0;const h=c(237),u=c(860),f=c(374),m=c(160),d=c(345),p=c(485),g=c(385),_=c(147),y=c(855),O=c(776),v={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let S;class T{get pages(){return this._pages}constructor(w,x,L){this._document=w,this._config=x,this._unicodeService=L,this._didWarmUp=!1,this._cacheMap=new p.FourKeyMap,this._cacheMapCombined=new p.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=D(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,f.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const w=new g.IdleTaskQueue;for(let x=33;x<126;x++)w.enqueue(()=>{if(!this._cacheMap.get(x,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){const L=this._drawToCache(x,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);this._cacheMap.set(x,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,L)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(T.maxAtlasPages&&this._pages.length>=Math.max(4,T.maxAtlasPages)){const x=this._pages.filter($=>2*$.canvas.width<=(T.maxTextureSize||4096)).sort(($,B)=>B.canvas.width!==$.canvas.width?B.canvas.width-$.canvas.width:B.percentageUsed-$.percentageUsed);let L=-1,P=0;for(let $=0;$<x.length;$++)if(x[$].canvas.width!==P)L=$,P=x[$].canvas.width;else if($-L==3)break;const R=x.slice(L,L+4),A=R.map($=>$.glyphs[0].texturePage).sort(($,B)=>$>B?1:-1),F=this.pages.length-R.length,M=this._mergePages(R,F);M.version++;for(let $=A.length-1;$>=0;$--)this._deletePage(A[$]);this.pages.push(M),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(M.canvas)}const w=new k(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,x){const L=2*w[0].canvas.width,P=new k(this._document,L,w);for(const[R,A]of w.entries()){const F=R*A.canvas.width%L,M=Math.floor(R/2)*A.canvas.height;P.ctx.drawImage(A.canvas,F,M);for(const B of A.glyphs)B.texturePage=x,B.sizeClipSpace.x=B.size.x/L,B.sizeClipSpace.y=B.size.y/L,B.texturePosition.x+=F,B.texturePosition.y+=M,B.texturePositionClipSpace.x=B.texturePosition.x/L,B.texturePositionClipSpace.y=B.texturePosition.y/L;this._onRemoveTextureAtlasCanvas.fire(A.canvas);const $=this._activePages.indexOf(A);$!==-1&&this._activePages.splice($,1)}return P}_deletePage(w){this._pages.splice(w,1);for(let x=w;x<this._pages.length;x++){const L=this._pages[x];for(const P of L.glyphs)P.texturePage--;L.version++}}getRasterizedGlyphCombinedChar(w,x,L,P,R){return this._getFromCacheMap(this._cacheMapCombined,w,x,L,P,R)}getRasterizedGlyph(w,x,L,P,R){return this._getFromCacheMap(this._cacheMap,w,x,L,P,R)}_getFromCacheMap(w,x,L,P,R,A=!1){return S=w.get(x,L,P,R),S||(S=this._drawToCache(x,L,P,R,A),w.set(x,L,P,R,S)),S}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,x,L,P){if(this._config.allowTransparency)return m.NULL_COLOR;let R;switch(w){case 16777216:case 33554432:R=this._getColorFromAnsiIndex(x);break;case 50331648:const A=_.AttributeData.toColorRGB(x);R=m.rgba.toColor(A[0],A[1],A[2]);break;default:R=L?m.color.opaque(this._config.colors.foreground):this._config.colors.background}return R}_getForegroundColor(w,x,L,P,R,A,F,M,$,B){const j=this._getMinimumContrastColor(w,x,L,P,R,A,!1,$,M,B);if(j)return j;let z;switch(R){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&$&&A<8&&(A+=8),z=this._getColorFromAnsiIndex(A);break;case 50331648:const W=_.AttributeData.toColorRGB(A);z=m.rgba.toColor(W[0],W[1],W[2]);break;default:z=F?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(z=m.color.opaque(z)),M&&(z=m.color.multiplyOpacity(z,h.DIM_OPACITY)),z}_resolveBackgroundRgba(w,x,L){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(x).rgba;case 50331648:return x<<8;default:return L?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,x,L,P){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&P&&x<8&&(x+=8),this._getColorFromAnsiIndex(x).rgba;case 50331648:return x<<8;default:return L?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,x,L,P,R,A,F,M,$,B){if(this._config.minimumContrastRatio===1||B)return;const j=this._getContrastCache($),z=j.getColor(w,P);if(z!==void 0)return z||void 0;const W=this._resolveBackgroundRgba(x,L,F),Q=this._resolveForegroundRgba(R,A,F,M),I=m.rgba.ensureContrastRatio(W,Q,this._config.minimumContrastRatio/($?2:1));if(!I)return void j.setColor(w,P,null);const N=m.rgba.toColor(I>>24&255,I>>16&255,I>>8&255);return j.setColor(w,P,N),N}_getContrastCache(w){return w?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(w,x,L,P,R=!1){const A=typeof w=="number"?String.fromCharCode(w):w,F=Math.min(this._config.deviceCellWidth*Math.max(A.length,2)+4,this._textureSize);this._tmpCanvas.width<F&&(this._tmpCanvas.width=F);const M=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<M&&(this._tmpCanvas.height=M),this._tmpCtx.save(),this._workAttributeData.fg=L,this._workAttributeData.bg=x,this._workAttributeData.extended.ext=P,this._workAttributeData.isInvisible())return v;const $=!!this._workAttributeData.isBold(),B=!!this._workAttributeData.isInverse(),j=!!this._workAttributeData.isDim(),z=!!this._workAttributeData.isItalic(),W=!!this._workAttributeData.isUnderline(),Q=!!this._workAttributeData.isStrikethrough(),I=!!this._workAttributeData.isOverline();let N=this._workAttributeData.getFgColor(),J=this._workAttributeData.getFgColorMode(),U=this._workAttributeData.getBgColor(),K=this._workAttributeData.getBgColorMode();if(B){const H=N;N=U,U=H;const ee=J;J=K,K=ee}const ie=this._getBackgroundColor(K,U,B,j);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ie.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Ce=$?this._config.fontWeightBold:this._config.fontWeight,me=z?"italic":"";this._tmpCtx.font=`${me} ${Ce} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=h.TEXT_BASELINE;const ke=A.length===1&&(0,f.isPowerlineGlyph)(A.charCodeAt(0)),ae=A.length===1&&(0,f.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),Le=this._getForegroundColor(x,K,U,L,J,N,B,j,$,(0,f.excludeFromContrastRatioDemands)(A.charCodeAt(0)));this._tmpCtx.fillStyle=Le.css;const ne=ae?0:4;let Ge=!1;this._config.customGlyphs!==!1&&(Ge=(0,u.tryDrawCustomChar)(this._tmpCtx,A,ne,ne,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let He,xe=!ke;if(He=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),W){this._tmpCtx.save();const H=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ee=H%2==1?.5:0;if(this._tmpCtx.lineWidth=H,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())xe=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{xe=!1;let de=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&de<8&&(de+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(de).css}this._tmpCtx.beginPath();const ge=ne,pe=Math.ceil(ne+this._config.deviceCharHeight)-ee-(R?2*H:0),_e=pe+H,ue=pe+2*H;for(let de=0;de<He;de++){this._tmpCtx.save();const Oe=ge+de*this._config.deviceCellWidth,Re=ge+(de+1)*this._config.deviceCellWidth,At=Oe+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Oe,pe),this._tmpCtx.lineTo(Re,pe),this._tmpCtx.moveTo(Oe,ue),this._tmpCtx.lineTo(Re,ue);break;case 3:const Gt=H<=1?ue:Math.ceil(ne+this._config.deviceCharHeight-H/2)-ee,fs=H<=1?pe:Math.ceil(ne+this._config.deviceCharHeight+H/2)-ee,Qh=new Path2D;Qh.rect(Oe,pe,this._config.deviceCellWidth,ue-pe),this._tmpCtx.clip(Qh),this._tmpCtx.moveTo(Oe-this._config.deviceCellWidth/2,_e),this._tmpCtx.bezierCurveTo(Oe-this._config.deviceCellWidth/2,fs,Oe,fs,Oe,_e),this._tmpCtx.bezierCurveTo(Oe,Gt,At,Gt,At,_e),this._tmpCtx.bezierCurveTo(At,fs,Re,fs,Re,_e),this._tmpCtx.bezierCurveTo(Re,Gt,Re+this._config.deviceCellWidth/2,Gt,Re+this._config.deviceCellWidth/2,_e);break;case 4:this._tmpCtx.setLineDash([Math.round(H),Math.round(H)]),this._tmpCtx.moveTo(Oe,pe),this._tmpCtx.lineTo(Re,pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Oe,pe),this._tmpCtx.lineTo(Re,pe);break;default:this._tmpCtx.moveTo(Oe,pe),this._tmpCtx.lineTo(Re,pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Ge&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const de=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in de&&de.actualBoundingBoxDescent>0){this._tmpCtx.save();const Oe=new Path2D;Oe.rect(ge,pe-Math.ceil(H/2),this._config.deviceCellWidth*He,ue-pe+Math.ceil(H/2)),this._tmpCtx.clip(Oe),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ie.css,this._tmpCtx.strokeText(A,ne,ne+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(I){const H=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),ee=H%2==1?.5:0;this._tmpCtx.lineWidth=H,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ne,ne+ee),this._tmpCtx.lineTo(ne+this._config.deviceCharWidth*He,ne+ee),this._tmpCtx.stroke()}if(Ge||this._tmpCtx.fillText(A,ne,ne+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let H=b(this._tmpCtx.getImageData(ne,ne,this._config.deviceCellWidth,this._config.deviceCellHeight),ie,Le,xe);if(H)for(let ee=1;ee<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ie.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,ne,ne+this._config.deviceCharHeight-ee),H=b(this._tmpCtx.getImageData(ne,ne,this._config.deviceCellWidth,this._config.deviceCellHeight),ie,Le,xe),H);ee++);}if(Q){const H=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),ee=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=H,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ne,ne+Math.floor(this._config.deviceCharHeight/2)-ee),this._tmpCtx.lineTo(ne+this._config.deviceCharWidth*He,ne+Math.floor(this._config.deviceCharHeight/2)-ee),this._tmpCtx.stroke()}this._tmpCtx.restore();const re=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let se;if(se=this._config.allowTransparency?function(H){for(let ee=0;ee<H.data.length;ee+=4)if(H.data[ee+3]>0)return!1;return!0}(re):b(re,ie,Le,xe),se)return v;const V=this._findGlyphBoundingBox(re,this._workBoundingBox,F,ae,Ge,ne);let X,G;for(;;){if(this._activePages.length===0){const H=this._createNewPage();X=H,G=H.currentRow,G.height=V.size.y;break}X=this._activePages[this._activePages.length-1],G=X.currentRow;for(const H of this._activePages)V.size.y<=H.currentRow.height&&(X=H,G=H.currentRow);for(let H=this._activePages.length-1;H>=0;H--)for(const ee of this._activePages[H].fixedRows)ee.height<=G.height&&V.size.y<=ee.height&&(X=this._activePages[H],G=ee);if(G.y+V.size.y>=X.canvas.height||G.height>V.size.y+2){let H=!1;if(X.currentRow.y+X.currentRow.height+V.size.y>=X.canvas.height){let ee;for(const ge of this._activePages)if(ge.currentRow.y+ge.currentRow.height+V.size.y<ge.canvas.height){ee=ge;break}if(ee)X=ee;else if(T.maxAtlasPages&&this._pages.length>=T.maxAtlasPages&&G.y+V.size.y<=X.canvas.height&&G.height>=V.size.y&&G.x+V.size.x<=X.canvas.width)H=!0;else{const ge=this._createNewPage();X=ge,G=ge.currentRow,G.height=V.size.y,H=!0}}H||(X.currentRow.height>0&&X.fixedRows.push(X.currentRow),G={x:0,y:X.currentRow.y+X.currentRow.height,height:V.size.y},X.fixedRows.push(G),X.currentRow={x:0,y:G.y+G.height,height:0})}if(G.x+V.size.x<=X.canvas.width)break;G===X.currentRow?(G.x=0,G.y+=G.height,G.height=0):X.fixedRows.splice(X.fixedRows.indexOf(G),1)}return V.texturePage=this._pages.indexOf(X),V.texturePosition.x=G.x,V.texturePosition.y=G.y,V.texturePositionClipSpace.x=G.x/X.canvas.width,V.texturePositionClipSpace.y=G.y/X.canvas.height,V.sizeClipSpace.x/=X.canvas.width,V.sizeClipSpace.y/=X.canvas.height,G.height=Math.max(G.height,V.size.y),G.x+=V.size.x,X.ctx.putImageData(re,V.texturePosition.x-this._workBoundingBox.left,V.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,V.size.x,V.size.y),X.addGlyph(V),X.version++,V}_findGlyphBoundingBox(w,x,L,P,R,A){x.top=0;const F=P?this._config.deviceCellHeight:this._tmpCanvas.height,M=P?this._config.deviceCellWidth:L;let $=!1;for(let B=0;B<F;B++){for(let j=0;j<M;j++){const z=B*this._tmpCanvas.width*4+4*j+3;if(w.data[z]!==0){x.top=B,$=!0;break}}if($)break}x.left=0,$=!1;for(let B=0;B<A+M;B++){for(let j=0;j<F;j++){const z=j*this._tmpCanvas.width*4+4*B+3;if(w.data[z]!==0){x.left=B,$=!0;break}}if($)break}x.right=M,$=!1;for(let B=A+M-1;B>=A;B--){for(let j=0;j<F;j++){const z=j*this._tmpCanvas.width*4+4*B+3;if(w.data[z]!==0){x.right=B,$=!0;break}}if($)break}x.bottom=F,$=!1;for(let B=F-1;B>=0;B--){for(let j=0;j<M;j++){const z=B*this._tmpCanvas.width*4+4*j+3;if(w.data[z]!==0){x.bottom=B,$=!0;break}}if($)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:x.right-x.left+1,y:x.bottom-x.top+1},sizeClipSpace:{x:x.right-x.left+1,y:x.bottom-x.top+1},offset:{x:-x.left+A+(P||R?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-x.top+A+(P||R?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}o.TextureAtlas=T,l([O.traceCall],T.prototype,"_drawToCache",null);class k{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}constructor(w,x,L){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],L)for(const P of L)this._glyphs.push(...P.glyphs),this._usedPixels+=P._usedPixels;this.canvas=D(w,x,x),this.ctx=(0,f.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function b(E,w,x,L){const P=w.rgba>>>24,R=w.rgba>>>16&255,A=w.rgba>>>8&255,F=x.rgba>>>24,M=x.rgba>>>16&255,$=x.rgba>>>8&255,B=Math.floor((Math.abs(P-F)+Math.abs(R-M)+Math.abs(A-$))/12);let j=!0;for(let z=0;z<E.data.length;z+=4)E.data[z]===P&&E.data[z+1]===R&&E.data[z+2]===A||L&&Math.abs(E.data[z]-P)+Math.abs(E.data[z+1]-R)+Math.abs(E.data[z+2]-A)<B?E.data[z+3]=0:j=!1;return j}function D(E,w,x){const L=E.createElement("canvas");return L.width=w,L.height=x,L}},160:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;const l=c(399);let h=0,u=0,f=0,m=0;var d,p,g,_,y;function O(S){const T=S.toString(16);return T.length<2?"0"+T:T}function v(S,T){return S<T?(T+.05)/(S+.05):(S+.05)/(T+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(T,k,b,D){return D!==void 0?`#${O(T)}${O(k)}${O(b)}${O(D)}`:`#${O(T)}${O(k)}${O(b)}`},S.toRgba=function(T,k,b,D=255){return(T<<24|k<<16|b<<8|D)>>>0}}(d||(o.channels=d={})),function(S){function T(k,b){return m=Math.round(255*b),[h,u,f]=y.toChannels(k.rgba),{css:d.toCss(h,u,f,m),rgba:d.toRgba(h,u,f,m)}}S.blend=function(k,b){if(m=(255&b.rgba)/255,m===1)return{css:b.css,rgba:b.rgba};const D=b.rgba>>24&255,E=b.rgba>>16&255,w=b.rgba>>8&255,x=k.rgba>>24&255,L=k.rgba>>16&255,P=k.rgba>>8&255;return h=x+Math.round((D-x)*m),u=L+Math.round((E-L)*m),f=P+Math.round((w-P)*m),{css:d.toCss(h,u,f),rgba:d.toRgba(h,u,f)}},S.isOpaque=function(k){return(255&k.rgba)==255},S.ensureContrastRatio=function(k,b,D){const E=y.ensureContrastRatio(k.rgba,b.rgba,D);if(E)return y.toColor(E>>24&255,E>>16&255,E>>8&255)},S.opaque=function(k){const b=(255|k.rgba)>>>0;return[h,u,f]=y.toChannels(b),{css:d.toCss(h,u,f),rgba:b}},S.opacity=T,S.multiplyOpacity=function(k,b){return m=255&k.rgba,T(k,m*b/255)},S.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(p||(o.color=p={})),function(S){let T,k;if(!l.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const D=b.getContext("2d",{willReadFrequently:!0});D&&(T=D,T.globalCompositeOperation="copy",k=T.createLinearGradient(0,0,1,1))}S.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return h=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),f=parseInt(b.slice(3,4).repeat(2),16),y.toColor(h,u,f);case 5:return h=parseInt(b.slice(1,2).repeat(2),16),u=parseInt(b.slice(2,3).repeat(2),16),f=parseInt(b.slice(3,4).repeat(2),16),m=parseInt(b.slice(4,5).repeat(2),16),y.toColor(h,u,f,m);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const D=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(D)return h=parseInt(D[1]),u=parseInt(D[2]),f=parseInt(D[3]),m=Math.round(255*(D[5]===void 0?1:parseFloat(D[5]))),y.toColor(h,u,f,m);if(!T||!k)throw new Error("css.toColor: Unsupported css format");if(T.fillStyle=k,T.fillStyle=b,typeof T.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(T.fillRect(0,0,1,1),[h,u,f,m]=T.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(h,u,f,m),css:b}}}(g||(o.css=g={})),function(S){function T(k,b,D){const E=k/255,w=b/255,x=D/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}S.relativeLuminance=function(k){return T(k>>16&255,k>>8&255,255&k)},S.relativeLuminance2=T}(_||(o.rgb=_={})),function(S){function T(b,D,E){const w=b>>24&255,x=b>>16&255,L=b>>8&255;let P=D>>24&255,R=D>>16&255,A=D>>8&255,F=v(_.relativeLuminance2(P,R,A),_.relativeLuminance2(w,x,L));for(;F<E&&(P>0||R>0||A>0);)P-=Math.max(0,Math.ceil(.1*P)),R-=Math.max(0,Math.ceil(.1*R)),A-=Math.max(0,Math.ceil(.1*A)),F=v(_.relativeLuminance2(P,R,A),_.relativeLuminance2(w,x,L));return(P<<24|R<<16|A<<8|255)>>>0}function k(b,D,E){const w=b>>24&255,x=b>>16&255,L=b>>8&255;let P=D>>24&255,R=D>>16&255,A=D>>8&255,F=v(_.relativeLuminance2(P,R,A),_.relativeLuminance2(w,x,L));for(;F<E&&(P<255||R<255||A<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),R=Math.min(255,R+Math.ceil(.1*(255-R))),A=Math.min(255,A+Math.ceil(.1*(255-A))),F=v(_.relativeLuminance2(P,R,A),_.relativeLuminance2(w,x,L));return(P<<24|R<<16|A<<8|255)>>>0}S.ensureContrastRatio=function(b,D,E){const w=_.relativeLuminance(b>>8),x=_.relativeLuminance(D>>8);if(v(w,x)<E){if(x<w){const R=T(b,D,E),A=v(w,_.relativeLuminance(R>>8));if(A<E){const F=k(b,D,E);return A>v(w,_.relativeLuminance(F>>8))?R:F}return R}const L=k(b,D,E),P=v(w,_.relativeLuminance(L>>8));if(P<E){const R=T(b,D,E);return P>v(w,_.relativeLuminance(R>>8))?L:R}return L}},S.reduceLuminance=T,S.increaseLuminance=k,S.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},S.toColor=function(b,D,E,w){return{css:d.toCss(b,D,E,w),rgba:d.toRgba(b,D,E,w)}}}(y||(o.rgba=y={})),o.toPaddedHex=O,o.contrastRatio=v},345:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===c)return void this._listeners.splice(l,1)}}})),this._event}fire(c,l){const h=[];for(let u=0;u<this._listeners.length;u++)h.push(this._listeners[u]);for(let u=0;u<h.length;u++)h[u].call(void 0,c,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(c,l){return c(h=>l.fire(h))}},859:(a,o)=>{function c(l){for(const h of l)h.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const h=this._disposables.indexOf(l);h!==-1&&this._disposables.splice(h,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var h;this._isDisposed||l===this._value||((h=this._value)===null||h===void 0||h.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=c,o.getDisposeArrayDisposable=function(l){return{dispose:()=>c(l)}}},485:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(h,u,f){this._data[h]||(this._data[h]={}),this._data[h][u]=f}get(h,u){return this._data[h]?this._data[h][u]:void 0}clear(){this._data={}}}o.TwoKeyMap=c,o.FourKeyMap=class{constructor(){this._data=new c}set(l,h,u,f,m){this._data.get(l,h)||this._data.set(l,h,new c),this._data.get(l,h).set(u,f,m)}get(l,h,u,f){var m;return(m=this._data.get(l,h))===null||m===void 0?void 0:m.get(u,f)}clear(){this._data.clear()}}},399:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";const c=o.isNode?"node":navigator.userAgent,l=o.isNode?"node":navigator.platform;o.isFirefox=c.includes("Firefox"),o.isLegacyEdge=c.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(c),o.getSafariVersion=function(){if(!o.isSafari)return 0;const h=c.match(/Version\/(\d+)/);return h===null||h.length<2?0:parseInt(h[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(c)},385:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const l=c(399);class h{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let d=0,p=0,g=m.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(d=Date.now(),this._tasks[this._i]()||this._i++,d=Math.max(1,Date.now()-d),p=Math.max(d,p),_=m.timeRemaining(),1.5*p>_)return g-d<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(g-d))}ms`),void this._start();g=_}this.clear()}}class u extends h{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const d=Date.now()+m;return{timeRemaining:()=>Math.max(0,d-Date.now())}}}o.PriorityTaskQueue=u,o.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends h{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:u,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},147:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new c;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=c;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,f=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=f}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=l},782:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const l=c(133),h=c(855),u=c(147);class f extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(d){const p=new f;return p.setFromCharData(d),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(d){this.fg=d[h.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(d[h.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(d[h.CHAR_DATA_CHAR_INDEX].length===2){const g=d[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=g&&g<=56319){const _=d[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(g-55296)+_-56320+65536|d[h.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=d[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[h.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=d[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[h.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=f},855:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},133:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},o.utf32ToString=function(c,l=0,h=c.length){let u="";for(let f=l;f<h;++f){let m=c[f];m>65535?(m-=65536,u+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):u+=String.fromCharCode(m)}return u},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,l){const h=c.length;if(!h)return 0;let u=0,f=0;if(this._interim){const m=c.charCodeAt(f++);56320<=m&&m<=57343?l[u++]=1024*(this._interim-55296)+m-56320+65536:(l[u++]=this._interim,l[u++]=m),this._interim=0}for(let m=f;m<h;++m){const d=c.charCodeAt(m);if(55296<=d&&d<=56319){if(++m>=h)return this._interim=d,u;const p=c.charCodeAt(m);56320<=p&&p<=57343?l[u++]=1024*(d-55296)+p-56320+65536:(l[u++]=d,l[u++]=p)}else d!==65279&&(l[u++]=d)}return u}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,l){const h=c.length;if(!h)return 0;let u,f,m,d,p=0,g=0,_=0;if(this.interim[0]){let v=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let T,k=0;for(;(T=63&this.interim[++k])&&k<4;)S<<=6,S|=T;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,D=b-k;for(;_<D;){if(_>=h)return 0;if(T=c[_++],(192&T)!=128){_--,v=!0;break}this.interim[k++]=T,S<<=6,S|=63&T}v||(b===2?S<128?_--:l[p++]=S:b===3?S<2048||S>=55296&&S<=57343||S===65279||(l[p++]=S):S<65536||S>1114111||(l[p++]=S)),this.interim.fill(0)}const y=h-4;let O=_;for(;O<h;){for(;!(!(O<y)||128&(u=c[O])||128&(f=c[O+1])||128&(m=c[O+2])||128&(d=c[O+3]));)l[p++]=u,l[p++]=f,l[p++]=m,l[p++]=d,O+=4;if(u=c[O++],u<128)l[p++]=u;else if((224&u)==192){if(O>=h)return this.interim[0]=u,p;if(f=c[O++],(192&f)!=128){O--;continue}if(g=(31&u)<<6|63&f,g<128){O--;continue}l[p++]=g}else if((240&u)==224){if(O>=h)return this.interim[0]=u,p;if(f=c[O++],(192&f)!=128){O--;continue}if(O>=h)return this.interim[0]=u,this.interim[1]=f,p;if(m=c[O++],(192&m)!=128){O--;continue}if(g=(15&u)<<12|(63&f)<<6|63&m,g<2048||g>=55296&&g<=57343||g===65279)continue;l[p++]=g}else if((248&u)==240){if(O>=h)return this.interim[0]=u,p;if(f=c[O++],(192&f)!=128){O--;continue}if(O>=h)return this.interim[0]=u,this.interim[1]=f,p;if(m=c[O++],(192&m)!=128){O--;continue}if(O>=h)return this.interim[0]=u,this.interim[1]=f,this.interim[2]=m,p;if(d=c[O++],(192&d)!=128){O--;continue}if(g=(7&u)<<18|(63&f)<<12|(63&m)<<6|63&d,g<65536||g>1114111)continue;l[p++]=g}}return p}}},776:function(a,o,c){var l=this&&this.__decorate||function(g,_,y,O){var v,S=arguments.length,T=S<3?_:O===null?O=Object.getOwnPropertyDescriptor(_,y):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(g,_,y,O);else for(var k=g.length-1;k>=0;k--)(v=g[k])&&(T=(S<3?v(T):S>3?v(_,y,T):v(_,y))||T);return S>3&&T&&Object.defineProperty(_,y,T),T},h=this&&this.__param||function(g,_){return function(y,O){_(y,O,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const u=c(859),f=c(97),m={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let d,p=o.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(g){super(),this._optionsService=g,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),d=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(g){for(let _=0;_<g.length;_++)typeof g[_]=="function"&&(g[_]=g[_]())}_log(g,_,y){this._evalLazyOptionalParams(y),g.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...y)}trace(g,..._){var y,O;this._logLevel<=f.LogLevelEnum.TRACE&&this._log((O=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.trace.bind(this._optionsService.options.logger))!==null&&O!==void 0?O:console.log,g,_)}debug(g,..._){var y,O;this._logLevel<=f.LogLevelEnum.DEBUG&&this._log((O=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.debug.bind(this._optionsService.options.logger))!==null&&O!==void 0?O:console.log,g,_)}info(g,..._){var y,O;this._logLevel<=f.LogLevelEnum.INFO&&this._log((O=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.info.bind(this._optionsService.options.logger))!==null&&O!==void 0?O:console.info,g,_)}warn(g,..._){var y,O;this._logLevel<=f.LogLevelEnum.WARN&&this._log((O=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.warn.bind(this._optionsService.options.logger))!==null&&O!==void 0?O:console.warn,g,_)}error(g,..._){var y,O;this._logLevel<=f.LogLevelEnum.ERROR&&this._log((O=(y=this._optionsService.options.logger)===null||y===void 0?void 0:y.error.bind(this._optionsService.options.logger))!==null&&O!==void 0?O:console.error,g,_)}};o.LogService=p=l([h(0,f.IOptionsService)],p),o.setTraceLogger=function(g){d=g},o.traceCall=function(g,_,y){if(typeof y.value!="function")throw new Error("not supported");const O=y.value;y.value=function(...v){if(d.logLevel!==f.LogLevelEnum.TRACE)return O.apply(this,v);d.trace(`GlyphRenderer#${O.name}(${v.map(T=>JSON.stringify(T)).join(", ")})`);const S=O.apply(this,v);return d.trace(`GlyphRenderer#${O.name} return`,S),S}}},726:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const c="di$target",l="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(h){return h[l]||[]},o.createDecorator=function(h){if(o.serviceRegistry.has(h))return o.serviceRegistry.get(h);const u=function(f,m,d){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,g,_){g[c]===g?g[l].push({id:p,index:_}):(g[l]=[{id:p,index:_}],g[c]=g)})(u,f,d)};return u.toString=()=>h,o.serviceRegistry.set(h,u),u}},97:(a,o,c)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const l=c(726);var h;o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(h||(o.LogLevelEnum=h={})),o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IOscLinkService=(0,l.createDecorator)("OscLinkService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")}},r={};function s(a){var o=r[a];if(o!==void 0)return o.exports;var c=r[a]={exports:{}};return t[a].call(c.exports,c,c.exports,s),c.exports}var n={};return(()=>{var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.WebglAddon=void 0;const o=s(345),c=s(859),l=s(399),h=s(666),u=s(776);class f extends c.Disposable{constructor(d){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=d,this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(d){const p=d._core;if(!d.element)return void this.register(p.onWillOpen(()=>this.activate(d)));this._terminal=d;const g=p.coreService,_=p.optionsService,y=p,O=y._renderService,v=y._characterJoinerService,S=y._charSizeService,T=y._coreBrowserService,k=y._decorationService,b=y._logService,D=y._themeService;(0,u.setTraceLogger)(b),this._renderer=this.register(new h.WebglRenderer(d,v,S,T,g,k,_,D,this._preserveDrawingBuffer)),this.register((0,o.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,o.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,o.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,o.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),O.setRenderer(this._renderer),this.register((0,c.toDisposable)(()=>{const E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(d.cols,d.rows)}))}get textureAtlas(){var d;return(d=this._renderer)===null||d===void 0?void 0:d.textureAtlas}clearTextureAtlas(){var d;(d=this._renderer)===null||d===void 0||d.clearTextureAtlas()}}a.WebglAddon=f})(),n})())})(nh);var Yt,he,zf=nh.exports,Hn={},oh={};Yt=oh,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.parseInput=Yt.InputType=void 0,function(i){i[i.Text=0]="Text",i[i.AltEnter=1]="AltEnter",i[i.ArrowUp=2]="ArrowUp",i[i.ArrowDown=3]="ArrowDown",i[i.ArrowLeft=4]="ArrowLeft",i[i.ArrowRight=5]="ArrowRight",i[i.Delete=6]="Delete",i[i.Backspace=7]="Backspace",i[i.CtrlA=8]="CtrlA",i[i.CtrlC=9]="CtrlC",i[i.CtrlD=10]="CtrlD",i[i.CtrlE=11]="CtrlE",i[i.CtrlK=12]="CtrlK",i[i.CtrlL=13]="CtrlL",i[i.CtrlQ=14]="CtrlQ",i[i.CtrlS=15]="CtrlS",i[i.CtrlU=16]="CtrlU",i[i.End=17]="End",i[i.Enter=18]="Enter",i[i.Home=19]="Home",i[i.ShiftEnter=20]="ShiftEnter",i[i.UnsupportedControlChar=21]="UnsupportedControlChar",i[i.UnsupportedEscape=22]="UnsupportedEscape"}(he=Yt.InputType||(Yt.InputType={})),Yt.parseInput=function(i){return Array.from(function*(e){let t=[];const r=e[Symbol.iterator]();for(let s=r.next();!s.done;s=r.next()){const n=s.value;if(n.length>1){t.push(n);continue}const a=n.charCodeAt(0);if(t.length>0&&(a<32||a===127)&&(yield{inputType:he.Text,data:t},t=[]),a!==27)if(a<32||a===127){let o=he.UnsupportedControlChar;switch(a){case 1:o=he.CtrlA;break;case 3:o=he.CtrlC;break;case 4:o=he.CtrlD;break;case 5:o=he.CtrlE;break;case 11:o=he.CtrlK;break;case 17:o=he.CtrlQ;break;case 19:o=he.CtrlS;break;case 21:o=he.CtrlU;break;case 13:o=he.Enter;break;case 127:o=he.Backspace;break;case 12:o=he.CtrlL}yield{inputType:o,data:[n]}}else t.push(n);else{const o=r.next();if(o.done){t.push("\x1B");continue}let c=he.UnsupportedEscape;if(o.value!=="["){o.value==="\r"&&(c=he.AltEnter),yield{inputType:c,data:["\x1B",o.value]};continue}const l=r.next();if(l.done)continue;if(l.value>="0"&&l.value<="9"){let h=l.value;const u=r.next();if(u.done)return;if(u.value>="0"&&u.value<="9")h+=u.value;else if(u.value!=="~")continue;h==="3"&&(c=he.Delete),yield{inputType:c,data:["\x1B","[",h,"~"]};continue}switch(l.value){case"A":c=he.ArrowUp;break;case"B":c=he.ArrowDown;break;case"C":c=he.ArrowRight;break;case"D":c=he.ArrowLeft;break;case"F":c=he.End;break;case"H":c=he.Home;break;case"\r":c=he.AltEnter}yield{inputType:c,data:["\x1B","[",l.value]}}}t.length>0&&(yield{inputType:he.Text,data:t})}(i))};var Rt={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.LineBuffer=void 0,Kr.LineBuffer=class{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(i,e){this.buf=i,this.pos=e}insert(i){const e=i.length,t=this.pos===this.buf.length;return this.buf=t?this.buf+i:this.buf.slice(0,this.pos)+i+this.buf.slice(this.pos),this.pos+=e,t}moveBack(i){const e=this.prevPos(i);return e!==void 0&&(this.pos=e,!0)}moveForward(i){const e=this.nextPos(i);return e!==void 0&&(this.pos=e,!0)}moveHome(){const i=this.startOfLine();return this.pos>i&&(this.pos=i,!0)}moveEnd(){const i=this.endOfLine();return this.pos!==i&&(this.pos=i,!0)}startOfLine(){const i=this.buf.slice(0,this.pos).lastIndexOf(`
`);return i!==-1?i+1:0}endOfLine(){const i=this.buf.slice(this.pos).indexOf(`
`);return i!==-1?this.pos+i:this.buf.length}moveLineUp(i){const e=this.buf.slice(0,this.pos).lastIndexOf(`
`);if(e===-1)return!1;const t=[...this.buf.slice(e+1,this.pos)].length;let r=this.buf.slice(0,e).lastIndexOf(`
`);r===-1?r=0:r+=1;let s=e;for(let o=1;o<i&&r!==0;o++)s=r-1,r=this.buf.slice(0,s).lastIndexOf(`
`),r===-1?r=0:r+=1;const n=[...this.buf.slice(r,s)].slice(0,t);let a=e;return n.length>0&&(a=n.map(o=>o.length).reduce((o,c)=>o+c,0),a=r+a),this.pos=a,!0}moveLineDown(i){const e=this.buf.slice(this.pos).indexOf(`
`);if(e===-1)return!1;let t=this.buf.slice(0,this.pos).lastIndexOf(`
`);t===-1?t=0:t+=1;const r=[...this.buf.slice(t,this.pos)].length;let s=this.pos+e+1,n=this.buf.slice(s).indexOf(`
`);n=n===-1?this.buf.length:s+n;for(let o=1;o<i&&n!==this.buf.length;o++)s=n+1,n=this.buf.slice(s).indexOf(`
`),n=n===-1?this.buf.length:s+n;const a=[...this.buf.slice(s,n)];return r<a.length?this.pos=a.slice(0,r).map(o=>o.length).reduce((o,c)=>o+c,0)+s:this.pos=n,!0}set_pos(i){this.pos=i}prevPos(i){if(this.pos===0)return;const e=this.buf.slice(0,this.pos);return this.pos-[...e].slice(-i).map(t=>t.length).reduce((t,r)=>t+r,0)}nextPos(i){if(this.pos===this.buf.length)return;const e=this.buf.slice(this.pos);return this.pos+[...e].slice(0,i).map(t=>t.length).reduce((t,r)=>t+r,0)}backspace(i){const e=this.prevPos(i);return e!==void 0&&(this.buf=this.buf.slice(0,e)+this.buf.slice(this.pos),this.pos=e,!0)}delete(i){const e=this.nextPos(i);return e!==void 0&&(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(e),!0)}deleteEndOfLine(){if(this.buf.length==0||this.pos==this.buf.length)return!1;const i=this.pos,e=this.endOfLine();return i==e?this.delete(1):this.buf=this.buf.slice(0,i)+this.buf.slice(e),!0}};var Zn={exports:{}};const Xf=({onlyFirst:i=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,i?void 0:"g")};var Jn={exports:{}};const ah=i=>!Number.isNaN(i)&&i>=4352&&(i<=4447||i===9001||i===9002||11904<=i&&i<=12871&&i!==12351||12880<=i&&i<=19903||19968<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65131||65281<=i&&i<=65376||65504<=i&&i<=65510||110592<=i&&i<=110593||127488<=i&&i<=127569||131072<=i&&i<=262141);Jn.exports=ah,Jn.exports.default=ah;var Nf=Jn.exports;const Uf=i=>typeof i=="string"?i.replace(Xf(),""):i,Yf=Nf,Vf=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},ch=i=>{if(typeof i!="string"||i.length===0||(i=Uf(i)).length===0)return 0;i=i.replace(Vf(),"  ");let e=0;for(let t=0;t<i.length;t++){const r=i.codePointAt(t);r<=31||r>=127&&r<=159||r>=768&&r<=879||(r>65535&&t++,e+=Yf(r)?2:1)}return e};Zn.exports=ch,Zn.exports.default=ch;var lh=Zn.exports,Gf=gs&&gs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.State=Rt.Layout=Rt.Position=void 0;const Hf=Kr,Zf=Gf(lh);class Oi{constructor(e,t){this.row=e!==void 0?e:0,this.col=t!==void 0?t:0}}Rt.Position=Oi;class hh{constructor(e){this.promptSize=e,this.cursor=new Oi,this.end=new Oi}}Rt.Layout=hh,Rt.State=class{constructor(i,e,t,r){this.line=new Hf.LineBuffer,this.highlighting=!1,this.prompt=i,this.tty=e,this.highlighter=t,this.history=r,this.promptSize=e.calculatePosition(i,new Oi),this.layout=new hh(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):!!this.highlighting&&(this.highlighting=!1,!0)}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new Oi,this.layout.end=new Oi,this.refresh()}editInsert(i){const e=this.line.insert(i),t=i.includes(`
`);if(e&&!t){const r=(0,Zf.default)(i);r>0&&this.layout.cursor.col+r<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=r,this.layout.end.col+=r,this.tty.write(i)):this.refresh()}else this.refresh()}update(i){this.line.update(i,i.length),this.refresh()}editBackspace(i){this.line.backspace(i)&&this.refresh()}editDelete(i){this.line.delete(i)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const i=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,i,this.highlighter),this.layout=i}moveCursorBack(i){this.line.moveBack(i)&&this.moveCursor()}moveCursorForward(i){this.line.moveForward(i)&&this.moveCursor()}moveCursorUp(i){this.line.moveLineUp(i)?this.moveCursor():this.previousHistory()}moveCursorDown(i){this.line.moveLineDown(i)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(this.history.cursor===-1&&this.line.length()>0)return;const i=this.history.prev();i!==void 0&&this.update(i)}nextHistory(){if(this.history.cursor===-1)return;const i=this.history.next();i!==void 0?this.update(i):this.update("")}moveCursor(){const i=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);i!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,i),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},i)))}};var es={};Object.defineProperty(es,"__esModule",{value:!0}),es.History=void 0,es.History=class{constructor(i){this.entries=[],this.cursor=-1,this.maxEntries=i}saveToLocalStorage(){const i=window?.localStorage;i!==void 0&&i.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const i=window?.localStorage;if(i!==void 0){const e=i.getItem("history");if(e==null)return;try{const t=JSON.parse(e);Array.isArray(t)&&t.find(r=>typeof r!="string")===void 0?this.entries=t:(this.entries=[],i.setItem("history","[]"))}catch{this.entries=[],i.setItem("history","[]")}}}append(i){this.resetCursor(),this.entries.includes(i)?(this.entries.splice(this.entries.indexOf(i),1),this.entries.unshift(i)):this.entries.unshift(i),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(this.cursor!==-1)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}};var ts={},Jf=gs&&gs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ts,"__esModule",{value:!0}),ts.Tty=void 0;const Kf=Jf(lh);ts.Tty=class{constructor(i,e,t,r){this.tabWidth=t,this.col=i,this.row=e,this.out=r}write(i){return this.out.write(i)}print(i){return this.out.print(i)}println(i){return this.out.println(i)}clearScreen(){this.out.write("\x1B[H\x1B[2J")}calculatePosition(i,e){const t=Object.assign({},e);let r=0;return[...i].forEach(s=>{if(s===`
`)return t.row+=1,void(t.col=0);let n=0;if(s==="	")n=this.tabWidth-t.col%this.tabWidth;else{let a;[a,r]=function(o,c){return c===1?o==="["?[0,2]:[0,0]:c===2?o===";"||o[0]>="0"&&o[0]<="9"?[0,c]:[0,0]:o==="\x1B"?[0,1]:o===`
`?[0,c]:[(0,Kf.default)(o),c]}(s,r),n=a}t.col+=n,t.col>this.col&&(t.row+=1,t.col=n)}),t.col===this.col&&(t.col=0,t.row+=1),t}computeLayout(i,e){const t=Object.assign({},i),r=e.pos,s=this.calculatePosition(e.buf.slice(0,e.pos),i);return{promptSize:t,cursor:s,end:r===e.buf.length?Object.assign({},s):this.calculatePosition(e.buf.slice(r),s)}}refreshLine(i,e,t,r,s){const n=r.cursor,a=r.end;this.clearOldRows(t),this.write(s.highlightPrompt(i)),this.write(s.highlight(e.buf,e.pos)),a.col===0&&a.row>0&&e.buf[e.buf.length-1]!==`
`&&this.write(`
`);const o=a.row-n.row;o>0&&this.write(`\x1B[${o}A`),n.col>0?this.write(`\r\x1B[${n.col}C`):this.write("\r")}clearOldRows(i){const e=i.cursor.row,t=i.end.row,r=Math.max(t-e,0);r>0&&this.write(`\x1B[${r}B`);for(let s=0;s<t;s++)this.write("\r\x1B[0K\x1B[A");this.write("\r\x1B[0K")}moveCursor(i,e){if(e.row>i.row){const t=e.row-i.row;t===1?this.write("\x1B[B"):this.write(`\x1B[${t}B`)}else if(e.row<i.row){const t=i.row-e.row;t===1?this.write("\x1B[A"):this.write(`\x1B[${t}A`)}if(e.col>i.col){const t=e.col-i.col;t===1?this.write("\x1B[C"):this.write(`\x1B[${t}C`)}else if(e.col<i.col){const t=i.col-e.col;t===1?this.write("\x1B[D"):this.write(`\x1B[${t}D`)}}};var is={};Object.defineProperty(is,"__esModule",{value:!0}),is.IdentityHighlighter=void 0,is.IdentityHighlighter=class{highlight(i,e){return i}highlightPrompt(i){return i}highlightChar(i,e){return!1}},Object.defineProperty(Hn,"__esModule",{value:!0});var uh=Hn.Readline=void 0;const ce=oh,Kn=Rt,eg=es,dh=ts,tg=is;uh=Hn.Readline=class{constructor(){this.highlighter=new tg.IdentityHighlighter,this.history=new eg.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new Kn.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=i=>{},this.history.restoreFromLocalStorage()}activate(i){this.term=i,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(i=>i.dispose())}appendHistory(i){this.history.append(i)}setHighlighter(i){this.highlighter=i}setCheckHandler(i){this.checkHandler=i}setCtrlCHandler(i){this.ctrlCHandler=i}setPauseHandler(i){this.pauseHandler=i}writeReady(){return!this.highWater}write(i){const e=(i=i===`
`?`\r
`:(i=i.replace(/^\n/,`\r
`)).replace(/([^\r])\n/g,`$1\r
`)).length;this.watermark+=e,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(i,()=>{this.watermark=Math.max(this.watermark-e,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(i){return this.write(i)}println(i){return this.write(i+`\r
`)}output(){return this}tty(){var i,e;return((e=(i=this.term)===null||i===void 0?void 0:i.options)===null||e===void 0?void 0:e.tabStopWidth)!==void 0?new dh.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new dh.Tty(0,0,8,this.output())}read(i){return new Promise((e,t)=>{this.term!==void 0?(this.state=new Kn.State(i,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:i,resolve:e,reject:t}):t("addon is not active")})}handleKeyEvent(i){return i.key!=="Enter"||!i.shiftKey||(i.type==="keydown"&&this.readKey({inputType:ce.InputType.ShiftEnter,data:["\r"]}),!1)}readData(i){const e=(0,ce.parseInput)(i);e.length>1||e[0].inputType===ce.InputType.Text&&e[0].data.length>1?this.readPaste(e):this.readKey(e[0])}readPaste(i){const e=i.map(t=>t.inputType===ce.InputType.Enter?{inputType:ce.InputType.Text,data:[`
`]}:t);for(const t of e)t.inputType===ce.InputType.Text?this.state.editInsert(t.data.join("")):this.readKey(t)}readKey(i){var e,t,r;if(this.activeRead!==void 0)switch(i.inputType){case ce.InputType.Text:this.state.editInsert(i.data.join(""));break;case ce.InputType.AltEnter:case ce.InputType.ShiftEnter:this.state.editInsert(`
`);break;case ce.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),(e=this.term)===null||e===void 0||e.write(`\r
`),this.history.append(this.state.buffer()),(t=this.activeRead)===null||t===void 0||t.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert(`
`);break;case ce.InputType.CtrlC:this.state.moveCursorToEnd(),(r=this.term)===null||r===void 0||r.write(`^C\r
`),this.state=new Kn.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case ce.InputType.CtrlS:this.pauseHandler(!1);break;case ce.InputType.CtrlU:this.state.update("");break;case ce.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case ce.InputType.CtrlQ:this.pauseHandler(!0);break;case ce.InputType.CtrlL:this.state.clearScreen();break;case ce.InputType.Home:case ce.InputType.CtrlA:this.state.moveCursorHome();break;case ce.InputType.End:case ce.InputType.CtrlE:this.state.moveCursorEnd();break;case ce.InputType.Backspace:this.state.editBackspace(1);break;case ce.InputType.Delete:case ce.InputType.CtrlD:this.state.editDelete(1);break;case ce.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case ce.InputType.ArrowRight:this.state.moveCursorForward(1);break;case ce.InputType.ArrowUp:this.state.moveCursorUp(1);break;case ce.InputType.ArrowDown:this.state.moveCursorDown(1);case ce.InputType.UnsupportedControlChar:case ce.InputType.UnsupportedEscape:}else switch(i.inputType){case ce.InputType.CtrlC:this.ctrlCHandler();break;case ce.InputType.CtrlL:this.write("\x1B[H\x1B[2J")}}};const eo="xterm-search-bar__addon";class ig{constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement)return this.searchBarElement.style.visibility="visible",void this.searchBarElement.querySelector("input").select();this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,e.className=eo;const t=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(t.style.position)||(t.style.position="relative"),t.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",r=>{this.searchKey=r.target.value,this.searchAddon.findNext(this.searchKey,{incremental:r.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,t,r){const s=this.terminal.element.parentElement;s.addEventListener(t,n=>{let a=n.target;for(;a!==document.querySelector(e);){if(a===s){a=null;break}a=a.parentElement}a===document.querySelector(e)&&(r.call(this,n),n.stopPropagation())})}addNewStyle(e){let t=document.getElementById(eo);t||(t=document.createElement("style"),t.type="text/css",t.id=eo,document.getElementsByTagName("head")[0].appendChild(t)),t.appendChild(document.createTextNode(e))}}var ph,to={exports:{}},fh={exports:{}},rg={};const sg=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,gh=()=>{const i={enabled:typeof process<"u"&&rg.FORCE_COLOR!=="0",visible:!0,styles:{},keys:{}},e=(s,n,a)=>typeof s=="function"?s(n):s.wrap(n,a),t=(s,n)=>{if(s===""||s==null)return"";if(i.enabled===!1)return s;if(i.visible===!1)return"";let a=""+s,o=a.includes(`
`),c=n.length;for(c>0&&n.includes("unstyle")&&(n=[...new Set(["unstyle",...n])].reverse());c-- >0;)a=e(i.styles[n[c]],a,o);return a},r=(s,n,a)=>{i.styles[s]=(o=>{let c=o.open=`\x1B[${o.codes[0]}m`,l=o.close=`\x1B[${o.codes[1]}m`,h=o.regex=new RegExp(`\\u001b\\[${o.codes[1]}m`,"g");return o.wrap=(u,f)=>{u.includes(l)&&(u=u.replace(h,l+c));let m=c+u+l;return f?m.replace(/\r*\n/g,`${l}$&${c}`):m},o})({name:s,codes:n}),(i.keys[a]||(i.keys[a]=[])).push(s),Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,set(o){i.alias(s,o)},get(){let o=c=>t(c,o.stack);return Reflect.setPrototypeOf(o,i),o.stack=this.stack?this.stack.concat(s):[s],o}})};return r("reset",[0,0],"modifier"),r("bold",[1,22],"modifier"),r("dim",[2,22],"modifier"),r("italic",[3,23],"modifier"),r("underline",[4,24],"modifier"),r("inverse",[7,27],"modifier"),r("hidden",[8,28],"modifier"),r("strikethrough",[9,29],"modifier"),r("black",[30,39],"color"),r("red",[31,39],"color"),r("green",[32,39],"color"),r("yellow",[33,39],"color"),r("blue",[34,39],"color"),r("magenta",[35,39],"color"),r("cyan",[36,39],"color"),r("white",[37,39],"color"),r("gray",[90,39],"color"),r("grey",[90,39],"color"),r("bgBlack",[40,49],"bg"),r("bgRed",[41,49],"bg"),r("bgGreen",[42,49],"bg"),r("bgYellow",[43,49],"bg"),r("bgBlue",[44,49],"bg"),r("bgMagenta",[45,49],"bg"),r("bgCyan",[46,49],"bg"),r("bgWhite",[47,49],"bg"),r("blackBright",[90,39],"bright"),r("redBright",[91,39],"bright"),r("greenBright",[92,39],"bright"),r("yellowBright",[93,39],"bright"),r("blueBright",[94,39],"bright"),r("magentaBright",[95,39],"bright"),r("cyanBright",[96,39],"bright"),r("whiteBright",[97,39],"bright"),r("bgBlackBright",[100,49],"bgBright"),r("bgRedBright",[101,49],"bgBright"),r("bgGreenBright",[102,49],"bgBright"),r("bgYellowBright",[103,49],"bgBright"),r("bgBlueBright",[104,49],"bgBright"),r("bgMagentaBright",[105,49],"bgBright"),r("bgCyanBright",[106,49],"bgBright"),r("bgWhiteBright",[107,49],"bgBright"),i.ansiRegex=sg,i.hasColor=i.hasAnsi=s=>(i.ansiRegex.lastIndex=0,typeof s=="string"&&s!==""&&i.ansiRegex.test(s)),i.alias=(s,n)=>{let a=typeof n=="string"?i[n]:n;if(typeof a!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");a.stack||(Reflect.defineProperty(a,"name",{value:s}),i.styles[s]=a,a.stack=[s]),Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,set(o){i.alias(s,o)},get(){let o=c=>t(c,o.stack);return Reflect.setPrototypeOf(o,i),o.stack=this.stack?this.stack.concat(a.stack):a.stack,o}})},i.theme=s=>{if((n=s)===null||typeof n!="object"||Array.isArray(n))throw new TypeError("Expected theme to be an object");var n;for(let a of Object.keys(s))i.alias(a,s[a]);return i},i.alias("unstyle",s=>typeof s=="string"&&s!==""?(i.ansiRegex.lastIndex=0,s.replace(i.ansiRegex,"")):""),i.alias("noop",s=>s),i.none=i.clear=i.noop,i.stripColor=i.unstyle,i.symbols=(ph||(ph=1,function(s){const n=typeof process<"u"&&{}.TERM_PROGRAM==="Hyper",a=typeof process<"u"&&process.platform==="win32",o=typeof process<"u"&&process.platform==="linux",c={ballotDisabled:"\u2612",ballotOff:"\u2610",ballotOn:"\u2611",bullet:"\u2022",bulletWhite:"\u25E6",fullBlock:"\u2588",heart:"\u2764",identicalTo:"\u2261",line:"\u2500",mark:"\u203B",middot:"\xB7",minus:"\uFF0D",multiplication:"\xD7",obelus:"\xF7",pencilDownRight:"\u270E",pencilRight:"\u270F",pencilUpRight:"\u2710",percent:"%",pilcrow2:"\u2761",pilcrow:"\xB6",plusMinus:"\xB1",question:"?",section:"\xA7",starsOff:"\u2606",starsOn:"\u2605",upDownArrow:"\u2195"},l=Object.assign({},c,{check:"\u221A",cross:"\xD7",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"\xBB",radioOff:"( )",radioOn:"(*)",warning:"\u203C"}),h=Object.assign({},c,{ballotCross:"\u2718",check:"\u2714",cross:"\u2716",ellipsisLarge:"\u22EF",ellipsis:"\u2026",info:"\u2139",questionFull:"\uFF1F",questionSmall:"\uFE56",pointer:o?"\u25B8":"\u276F",pointerSmall:o?"\u2023":"\u203A",radioOff:"\u25EF",radioOn:"\u25C9",warning:"\u26A0"});s.exports=a&&!n?l:h,Reflect.defineProperty(s.exports,"common",{enumerable:!1,value:c}),Reflect.defineProperty(s.exports,"windows",{enumerable:!1,value:l}),Reflect.defineProperty(s.exports,"other",{enumerable:!1,value:h})}(fh)),fh.exports),i.define=r,i};to.exports=gh(),to.exports.create=gh;const io=_o(to.exports);io.enabled=!0;const le={...io,peerID:io.redBright,grey50:i=>`\x1B[0m\x1B[38;5;244m${i}`};var mh={exports:{}};(function(i){(function(){function e(m,d){document.addEventListener?m.addEventListener("scroll",d,!1):m.attachEvent("scroll",d)}function t(m){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(m)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function r(m,d){m.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+d+";"}function s(m){var d=m.g.offsetWidth,p=d+100;return m.j.style.width=p+"px",m.i.scrollLeft=p,m.h.scrollLeft=m.h.scrollWidth+100,m.l!==d&&(m.l=d,!0)}function n(m,d){function p(){var _=g;s(_)&&_.g.parentNode!==null&&d(_.l)}var g=m;e(m.h,p),e(m.i,p),s(m)}function a(m,d,p){d=d||{},p=p||window,this.family=m,this.style=d.style||"normal",this.weight=d.weight||"normal",this.stretch=d.stretch||"normal",this.context=p}var o=null,c=null,l=null,h=null;function u(m){return h===null&&(h=!!m.document.fonts),h}function f(m,d){var p=m.style,g=m.weight;if(l===null){var _=document.createElement("div");try{_.style.font="condensed 100px sans-serif"}catch{}l=_.style.font!==""}return[p,g,l?m.stretch:"","100px",d].join(" ")}a.prototype.load=function(m,d){var p=this,g=m||"BESbswy",_=0,y=d||3e3,O=new Date().getTime();return new Promise(function(v,S){if(u(p.context)&&!function(b){return c===null&&(u(b)&&/Apple/.test(window.navigator.vendor)?(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!b&&603>parseInt(b[1],10)):c=!1),c}(p.context)){var T=new Promise(function(b,D){(function E(){new Date().getTime()-O>=y?D(Error(y+"ms timeout exceeded")):p.context.document.fonts.load(f(p,'"'+p.family+'"'),g).then(function(w){1<=w.length?b():setTimeout(E,25)},D)})()}),k=new Promise(function(b,D){_=setTimeout(function(){D(Error(y+"ms timeout exceeded"))},y)});Promise.race([k,T]).then(function(){clearTimeout(_),v(p)},S)}else(function(b){document.body?b():document.addEventListener?document.addEventListener("DOMContentLoaded",function D(){document.removeEventListener("DOMContentLoaded",D),b()}):document.attachEvent("onreadystatechange",function D(){document.readyState!="interactive"&&document.readyState!="complete"||(document.detachEvent("onreadystatechange",D),b())})})(function(){function b(){var $;($=x!=-1&&L!=-1||x!=-1&&P!=-1||L!=-1&&P!=-1)&&(($=x!=L&&x!=P&&L!=P)||(o===null&&($=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!$&&(536>parseInt($[1],10)||parseInt($[1],10)===536&&11>=parseInt($[2],10))),$=o&&(x==R&&L==R&&P==R||x==A&&L==A&&P==A||x==F&&L==F&&P==F)),$=!$),$&&(M.parentNode!==null&&M.parentNode.removeChild(M),clearTimeout(_),v(p))}var D=new t(g),E=new t(g),w=new t(g),x=-1,L=-1,P=-1,R=-1,A=-1,F=-1,M=document.createElement("div");M.dir="ltr",r(D,f(p,"sans-serif")),r(E,f(p,"serif")),r(w,f(p,"monospace")),M.appendChild(D.g),M.appendChild(E.g),M.appendChild(w.g),p.context.document.body.appendChild(M),R=D.g.offsetWidth,A=E.g.offsetWidth,F=w.g.offsetWidth,function $(){if(new Date().getTime()-O>=y)M.parentNode!==null&&M.parentNode.removeChild(M),S(Error(y+"ms timeout exceeded"));else{var B=p.context.document.hidden;B!==!0&&B!==void 0||(x=D.g.offsetWidth,L=E.g.offsetWidth,P=w.g.offsetWidth,b()),_=setTimeout($,50)}}(),n(D,function($){x=$,b()}),r(D,f(p,'"'+p.family+'",sans-serif')),n(E,function($){L=$,b()}),r(E,f(p,'"'+p.family+'",serif')),n(w,function($){P=$,b()}),r(w,f(p,'"'+p.family+'",monospace'))})})},i.exports=a})()})(mh);const _h=_o(mh.exports),Oh="\x1B[1A";class ng extends Vg.Terminal{constructor(e,t){let r=te(e);super({screenReaderMode:!1,cols:80,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.isLivePanelVisible=!0,this.livePanel="",this.livePanelLines=0,this.currentLivePanelMessage="",this.infoChar=Zl?"\u24D8":"\u{1F6C8}",this.__fit=()=>{console.log("fitting terminal");const s=this.fitAddon.proposeDimensions();if(!s||!this||isNaN(s.cols)||isNaN(s.rows)||(s.rows=Math.max(s.rows,12),s.cols=Math.max(s.cols,this.cols),s.cols==this.cols&&s.rows==this.rows))return;const n=this._core;console.log("resizing terminal to ",s.cols,s.rows),n._renderService.clear(),this.resize(s.cols,s.rows),this.refresh(0,this.rows-1),this.updateTermSizeEnv()},this.fit=Gn(this.__fit),this.updateTermSizeEnv=Gn(()=>{console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})}),this.mpyc=t,this.terminalContainer=te("#terminal-container"),this.scrollAreaClone=te("div.xterm-scroll-area-clone"),this.onResize(s=>{this.updateTermSizeEnv()}),this.fitAddon=new If.FitAddon,this.searchAddon=new qf.SearchAddon,this.searchBarAddon=new ig({searchAddon:this.searchAddon}),this.webLinksAddon=new jf.WebLinksAddon,this.readlineAddon=new uh,this.readlineAddon.setCheckHandler(s=>!s.trimEnd().endsWith("&&")),this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new zf.WebglAddon,this.loadAddon(this.webglAddon)}catch(s){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",s),this.canvasAddon=new Qf.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new Wf.Unicode11Addon),this.unicode.activeVersion="11",function(s){const n=s.options.fontFamily,a=new _h(n).load(null,5e3),o=new _h(n,{weight:"bold"}).load(null,5e3);return Promise.all([a,o]).then(()=>{},()=>{s.options.fontFamily="Courier"})}(this).then(()=>{this.open(r),this.viewportDiv=te("#terminal-container .xterm-viewport"),this.scrollArea=this.viewportDiv.querySelector("div.xterm-scroll-area"),te(`${e} textarea`).readOnly=!0,new ResizeObserver(()=>{this.scrollAreaClone.style.height=this.scrollArea.clientHeight+"px",this.scrollAreaClone.style.width=this.scrollArea.clientWidth+"px"}).observe(this.scrollArea),this.fit(),og(this.terminalContainer,this.viewportDiv)}),this.mpyc.runtime.setReadlineFn(s=>this.readlineAddon.read(s)),this.attachCustomKeyEventHandler(s=>{if(s.type==="keydown"){if(s.ctrlKey&&s.key=="c"&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if(s.key=="h")return this.mpyc.runtime.toggleStats(),s.preventDefault(),!1;if(s.key=="r")return this.mpyc.runtime.resetStats(),s.preventDefault(),!1;if(s.ctrlKey&&s.key=="f")return this.searchBarAddon.show(),s.preventDefault(),!1}return!0}),document.addEventListener("keyup",s=>{s.key=="Escape"&&this.searchBarAddon.hidden()}),new ResizeObserver(()=>{this.fit()}).observe(document.querySelector(".split-panel-terminal"))}time(){return le.cyan.dim(`[${new Date().toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(le.grey(e),le.gray("\u2692"))}info(e){this._log(le.greenBright(e),le.greenBright(this.infoChar))}_log(e,t=" "){e=`${this.time()}  ${t}  ${e}`,this._write_liveln(e)}_write_liveln(e){this.isLivePanelVisible&&(this.writeln(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_write_live(e){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return e==""?"":`\r${Oh}${(Oh+"\x1B[2K").repeat(this._height(e)-1)}`}live(e){this.isLivePanelVisible&&(e=`
${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,le.green(le.symbols.check))}warn(e){this._log(le.italic(e),le.yellow(le.symbols.warning))}chatMe(e){e=`${le.green("Me")}: ${e}`,this._log(e)}chat(e,t){t=`${le.peerID(Jr(e.substring(0,8)))}: ${t}`,this._log(t)}error(e){this._log(le.redBright(e),le.red(le.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${le.red(le.symbols.cross)}  ${le.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}}const og=(i,e)=>{let t=!1,r=!1;i.addEventListener("scroll",function(s){t||(r=!0,e.scrollTop=i.scrollTop),t=!1}),e.addEventListener("scroll",function(s){r||(t=!0,i.scrollTop=e.scrollTop),r=!1})},rs="qr-canvas",vh="qr-url-span",ag=`canvas.${rs}`,cg=`div.tooltip-inner>img.${rs}`,lg=`div.tooltip-inner>span.${vh}`,yh="div.tooltip-inner";class hg extends nt{constructor(e,t,r,s){super(),this.setupQRScanner=()=>{let n=new Gg("qrScannerEl",{formatsToSupport:[Hg.QR_CODE],verbose:!1});this.scanModalDiv.addEventListener("hidden.bs.modal",async()=>{n.stop()}),this.closeScanModalBtn.addEventListener("click",async()=>{this.closeQRScanner()}),this.scanInput.addEventListener("change",a=>{if(a==null||a.target==null)return;let o=a.target;if(o.files&&o.files.length===0)return;const c=o.files[0];n.scanFileV2(c,!0).then(l=>{this.emit("qr:scanned",l.decodedText)}).catch(l=>{this.emit("qr:error",l)})}),this.scanBtn.addEventListener("click",async()=>{if(!await Ff())return void this.scanInput.click();this.scanner.start({facingMode:"environment"},{fps:10,qrbox:{width:150,height:150}},(a,o)=>{this.emit("qr:scanned",a),this.closeQRScanner()},void 0),this.scanModal.show()})},this.canvasHTML=`
        <canvas hidden class="${rs}"></canvas>
    `,this.modalHTML=`
    <div class="modal fade" id="qrScannerModal" tabindex="-1" aria-labelledby="qrScannerModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen-sm-down">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="qrScannerModalLabel">QR Code scanner</h1>
            <button type="button" id="closeQRCodeScannerButton" class="btn-close" data-bs-dismiss="modal"
              aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div id="qrScannerEl"></div>
          </div>
        </div>
      </div>
    </div>
    `,this.showBtn=e,this.scanBtn=t,this.scanInput=r,this.peerIDGetter=s,document.body.insertAdjacentHTML("beforeend",this.modalHTML),document.body.insertAdjacentHTML("beforeend",this.canvasHTML),this.canvas=te(ag),this.closeScanModalBtn=te("#closeQRCodeScannerButton"),this.scanModalDiv=te("#qrScannerModal"),this.scanModal=new Xt(this.scanModalDiv),this.setupQRGenerator(),this.setupQRScanner()}setupQRGenerator(){this.showBtnTooltip=new qe(this.showBtn,{html:!0,placement:"bottom",trigger:"click hover focus",allowList:{...qe.Default.allowList,span:["style"],img:[]},title:`
            <img class="${rs}"></img>
            <br />
            <span class="${vh}" style='font-size: 10px !important;'></span>
        `}),this.showBtnTooltipEl=te(yh),this.showBtn.addEventListener("shown.bs.tooltip",()=>{let e=this.peerIDGetter(),t=new URL("./",window.location.href),r=`${t}?peer=${e}`,s=`${t}?peer=<br/>${e}`;Zg.toDataURL(this.canvas,r,{errorCorrectionLevel:"H"}).then(n=>{te(cg).src=n,te(lg).innerHTML=Jr(s)}).catch(n=>{})}),document.addEventListener("click",e=>{this.showBtn.matches(":hover")||te(yh)?.matches(":hover")||this.showBtnTooltip.hide()}),this.showBtn.addEventListener("click",async()=>{this.canvas.toBlob(e=>{try{navigator.clipboard.write([new ClipboardItem({[e.type]:e})])}catch{console.warn("Copying images to the clipboard is not supported in this browser - https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write#browser_compatibility")}})})}closeQRScanner(){this.scanner.stop(),this.scanModal.hide()}}var bh={};class ss{constructor(e,t,r,s,n,a,o,c,l,h=0,u){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=n,this.score=a,this.buffer=o,this.bufferBase=c,this.curContext=l,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new ss(e,[],t,r,r,0,[],0,s?new wh(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=65535&e,{parser:n}=this.p,a=n.dynamicPrecedence(s);if(a&&(this.score+=a),r==0)return this.pushState(n.getGoto(this.state,s,!0),this.reducePos),s<n.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),void this.reduceContext(s,this.reducePos);let o=this.stack.length-3*(r-1)-(262144&e?6:0),c=o?this.stack[o-2]:this.p.ranges[0].from,l=this.reducePos-c;l>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=l));let h=o?this.stack[o-1]:0,u=this.bufferBase+this.buffer.length-h;if(s<n.minRepeatTerm||131072&e){let f=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,c,f,u+4,!0)}if(262144&e)this.state=this.stack[o];else{let f=this.stack[o-3];this.state=n.getGoto(f,s,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(s,c)}storeNode(e,t,r,s=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(t==r)return;if(a.buffer[o-2]>=t)return void(a.buffer[o-2]=r)}}if(n&&this.pos!=r){let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}else this.buffer.push(e,t,r,s)}shift(e,t,r,s){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4);else{let n=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(n,1)||(this.reducePos=s)),this.pushState(n,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}}apply(e,t,r,s){65536&e?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new ss(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new ug(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let n,a=0;a<t.length;a+=2)(n=t[a+1])!=this.state&&this.p.parser.hasAction(n,e)&&s.push(t[a],n);if(this.stack.length<120)for(let n=0;s.length<8&&n<t.length;n+=2){let a=t[n+1];s.some((o,c)=>1&c&&o==a)||s.push(t[n],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let n=t[s+1];if(n==this.state)continue;let a=this.split();a.pushState(n,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=65535&t,n=this.stack.length-3*r;if(n<0||e.getGoto(this.stack[n],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,n)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(393216&a))if(65536&a){let o=(a>>19)-n;if(o>1){let c=65535&a,l=this.stack.length-3*o;if(l>=0&&e.getGoto(this.stack[l],c,!1)>=0)return o<<19|65536|c}}else{let o=r(a,n+1);if(o!=null)return o}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new wh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class wh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class ug{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class ns{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new ns(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ns(this.stack,this.pos,this.index)}}function os(i,e=Uint16Array){if(typeof i!="string")return i;let t=null;for(let r=0,s=0;r<i.length;){let n=0;for(;;){let a=i.charCodeAt(r++),o=!1;if(a==126){n=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,o=!0),n+=c,o)break;n*=46}t?t[s++]=n:t=new e(n)}return t}class as{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Dh=new as;class dg{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Dh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,n=this.pos+e;for(;n<r.from;){if(!s)return null;let a=this.ranges[--s];n-=r.from-a.to,r=a}for(;t<0?n>r.to:n>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];n+=a.from-r.to,r=a}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,r,s=this.chunkOff+e;if(s>=0&&s<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(s);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(t=n,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=t;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Dh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class vi{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;(function(s,n,a,o,c,l){let h=0,u=1<<o,{dialect:f}=a.p.parser;e:for(;u&s[h];){let m=s[h+1];for(let _=h+3;_<m;_+=2)if((s[_+1]&u)>0){let y=s[_];if(f.allows(y)&&(n.token.value==-1||n.token.value==y||pg(y,n.token.value,c,l))){n.acceptToken(y);break}}let d=n.next,p=0,g=s[h+2];if(!(n.next<0&&g>p&&s[m+3*g-3]==65535)){for(;p<g;){let _=p+g>>1,y=m+_+(_<<1),O=s[y],v=s[y+1]||65536;if(d<O)g=_;else{if(!(d>=v)){h=s[y+2],n.advance();continue e}p=_+1}}break}h=s[m+3*g-1]}})(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}vi.prototype.contextual=vi.prototype.fallback=vi.prototype.extend=!1,vi.prototype.fallback=vi.prototype.extend=!1;class cs{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Ch(i,e,t){for(let r,s=e;(r=i[s])!=65535;s++)if(r==t)return s-e;return-1}function pg(i,e,t,r){let s=Ch(t,r,e);return s<0||Ch(t,r,i)<s}const We=typeof process<"u"&&bh&&/\bparse\b/.test(bh.LOG);let ro=null;function xh(i,e,t){let r=i.cursor(qh.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(i.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:i.length}}class fg{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?xh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?xh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(n instanceof ms){if(a==e){if(a<this.safeFrom)return null;let o=a+n.length;if(o<=this.safeTo){let c=n.prop(Oo.lookAhead);if(!c||o+c<this.fragment.to)return n}}this.index[t]++,a+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+n.length}}}class gg{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new as)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:n}=s,a=s.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,c=0;for(let l=0;l<n.length;l++){if(!(1<<l&a))continue;let h=n[l],u=this.tokens[l];if((!r||h.fallback)&&((h.contextual||u.start!=e.pos||u.mask!=a||u.context!=o)&&(this.updateCachedToken(u,h,e),u.mask=a,u.context=o),u.lookAhead>u.end+25&&(c=Math.max(u.lookAhead,c)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!h.extend&&(r=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),r||e.pos!=this.stream.end||(r=new as,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new as,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:n}=r.p;for(let a=0;a<n.specialized.length;a++)if(n.specialized[a]==e.value){let o=n.specializers[a](this.stream.read(e.start,e.end),r);if(o>=0&&r.p.parser.dialect.allows(o>>1)){1&o?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let n=0;n<s;n+=3)if(this.actions[n]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:n}=e,{parser:a}=e.p,{data:o}=a;for(let c=0;c<2;c++)for(let l=a.stateSlot(n,c?2:1);;l+=3){if(o[l]==65535){if(o[l+1]!=1){s==0&&o[l+1]==2&&(s=this.putAction(vt(o,l+2),t,r,s));break}l=vt(o,l+2)}o[l]==t&&(s=this.putAction(vt(o,l+1),t,r,s))}return s}}class mg{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new dg(t,s),this.tokens=new gg(e,this.stream),this.topTerm=e.top[1];let{from:n}=s[0];this.stacks=[ss.start(this,e.top[0],n)],this.fragments=r.length&&this.stream.end-n>4*e.bufferLength?new fg(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,s=this.minStackPos,n=this.stacks=[];if(this.bigReductionCount>300&&r.length==1){let[a]=r;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<r.length;a++){let o=r[a];for(;;){if(this.tokens.mainToken=null,o.pos>s)n.push(o);else{if(this.advanceStack(o,n,r))continue;{e||(e=[],t=[]),e.push(o);let c=this.tokens.getMainToken(o);t.push(c.value,c.end)}}break}}if(!n.length){let a=e&&function(o){let c=null;for(let l of o){let h=l.p.stoppedAt;(l.pos==l.p.stream.end||h!=null&&l.pos>h)&&l.p.parser.stateFlag(l.state,2)&&(!c||c.score<l.score)&&(c=l)}return c}(e);if(a)return We&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw We&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&e){let a=this.stoppedAt!=null&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(a)return We&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:3*this.recovering;if(n.length>a)for(n.sort((o,c)=>c.score-o.score);n.length>a;)n.pop();n.some(o=>o.reducePos>s)&&this.recovering--}else if(n.length>1){e:for(let a=0;a<n.length-1;a++){let o=n[a];for(let c=a+1;c<n.length;c++){let l=n[c];if(o.sameState(l)||o.buffer.length>500&&l.buffer.length>500){if(!((o.score-l.score||o.buffer.length-l.buffer.length)>0)){n.splice(a--,1);continue e}n.splice(c--,1)}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let a=1;a<n.length;a++)n[a].pos<this.minStackPos&&(this.minStackPos=n[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:n}=this,a=We?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let l=e.curContext&&e.curContext.tracker.strict,h=l?e.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?n.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!l||(u.prop(Oo.contextHash)||0)==h))return e.useNode(u,f),We&&console.log(a+this.stackID(e)+` (via reuse of ${n.getName(u.type.id)})`),!0;if(!(u instanceof ms)||u.children.length==0||u.positions[0]>0)break;let m=u.children[0];if(!(m instanceof ms&&u.positions[0]==0))break;u=m}}let o=n.stateSlot(e.state,4);if(o>0)return e.reduce(o),We&&console.log(a+this.stackID(e)+` (via always-reduce ${n.getName(65535&o)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let l=0;l<c.length;){let h=c[l++],u=c[l++],f=c[l++],m=l==c.length||!r,d=m?e:e.split(),p=this.tokens.mainToken;if(d.apply(h,u,p?p.start:d.pos,f),We&&console.log(a+this.stackID(d)+` (via ${65536&h?`reduce of ${n.getName(65535&h)}`:"shift"} for ${n.getName(u)} @ ${s}${d==e?"":", split"})`),m)return!0;d.pos>s?t.push(d):r.push(d)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Sh(e,t),!0}}runRecovery(e,t,r){let s=null,n=!1;for(let a=0;a<e.length;a++){let o=e[a],c=t[a<<1],l=t[1+(a<<1)],h=We?this.stackID(o)+" -> ":"";if(o.deadEnd&&(n||(n=!0,o.restart(),We&&console.log(h+this.stackID(o)+" (restarted)"),this.advanceFully(o,r))))continue;let u=o.split(),f=h;for(let m=0;u.forceReduce()&&m<10&&(We&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,r));m++)We&&(f=this.stackID(u)+" -> ");for(let m of o.recoverByInsert(c))We&&console.log(h+this.stackID(m)+" (via recover-insert)"),this.advanceFully(m,r);this.stream.end>o.pos?(l==o.pos&&(l++,c=0),o.recoverByDelete(c,l),We&&console.log(h+this.stackID(o)+` (via recover-delete ${this.parser.getName(c)})`),Sh(o,r)):(!s||s.score<o.score)&&(s=o)}return s}stackToTree(e){return e.close(),ms.build({buffer:ns.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ro||(ro=new WeakMap)).get(e);return t||ro.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Sh(i,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==i.pos&&r.sameState(i))return void(e[t].score<i.score&&(e[t]=i))}e.push(i)}class _g{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const so=i=>i;class ls extends Kg{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let r=Object.keys(e.topRules).map(o=>e.topRules[o][1]),s=[];for(let o=0;o<t.length;o++)s.push([]);function n(o,c,l){s[o].push([c,c.deserialize(String(l))])}if(e.nodeProps)for(let o of e.nodeProps){let c=o[0];typeof c=="string"&&(c=Oo[c]);for(let l=1;l<o.length;){let h=o[l++];if(h>=0)n(h,c,o[l++]);else{let u=o[l+-h];for(let f=-h;f>0;f--)n(o[l++],c,u);l++}}}this.nodeSet=new em(t.map((o,c)=>tm.define({name:c>=this.minRepeatTerm?void 0:o,id:c,props:s[c],top:r.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=im;let a=os(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(Th),this.states=os(e.states,Uint32Array),this.data=os(e.stateData),this.goto=os(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new vi(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new mg(this,e,t,r);for(let n of this.wrappers)s=n(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let n=s[t+1];;){let a=s[n++],o=1&a,c=s[n++];if(o&&r)return c;for(let l=n+(a>>1);n<l;n++)if(s[n]==e)return c;if(o)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let n,a=this.stateSlot(e,s?2:1);;a+=3){if((n=r[a])==65535){if(r[a+1]!=1){if(r[a+1]==2)return vt(r,a+2);break}n=r[a=vt(r,a+2)]}if(n==t||n==0)return vt(r,a+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t||null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let n=this.stateSlot(e,1);s==null;n+=3){if(this.data[n]==65535){if(this.data[n+1]!=1)break;n=vt(this.data,n+2)}s=t(vt(this.data,n+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535){if(this.data[r+1]!=1)break;r=vt(this.data,r+2)}if(!(1&this.data[r+2])){let s=this.data[r+1];t.some((n,a)=>1&a&&n==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(ls.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(n=>n.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let n=e.specializers.find(o=>o.from==r.external);if(!n)return r;let a=Object.assign(Object.assign({},r),{external:n.to});return t.specializers[s]=Th(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let n of e.split(" ")){let a=t.indexOf(n);a>=0&&(r[a]=!0)}let s=null;for(let n=0;n<t.length;n++)if(!r[n])for(let a,o=this.dialects[t[n]];(a=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[a]=1;return new _g(e,r,s)}static deserialize(e){return new ls(e)}}function vt(i,e){return i[e]|i[e+1]<<16}function Th(i){if(i.external){let e=i.extend?1:0;return(t,r)=>i.external(t,r)<<1|e}return i.get}const Og=new Set([27,51,52,270,67,133,58,59,251,64,65,74,62,63,154,155,158,115]);function no(i){return i==10||i==13}const vg=new cs((i,e)=>{let t;if(i.next<0)i.acceptToken(206);else if(e.context.depth<0)no(i.next)&&i.acceptToken(205,1);else if(((t=i.peek(-1))<0||no(t))&&e.canShift(204)){let r=0;for(;i.next==32||i.next==9;)i.advance(),r++;i.next!=10&&i.next!=13&&i.next!=35||i.acceptToken(204,-r)}else no(i.next)&&i.acceptToken(203,1)},{contextual:!0}),yg=new cs((i,e)=>{let t=e.context.depth;if(t<0)return;let r=i.peek(-1);if(r==10||r==13){let s=0,n=0;for(;;){if(i.next==32)s++;else{if(i.next!=9)break;s+=8-s%8}i.advance(),n++}s!=t&&i.next!=10&&i.next!=13&&i.next!=35&&(s<t?i.acceptToken(202,-n):i.acceptToken(201))}});function oo(i,e){this.parent=i,this.depth=e,this.hash=(i?i.hash+i.hash<<8:0)+e+(e<<4)}const bg=new oo(null,0),wg=new class{constructor(i){this.start=i.start,this.shift=i.shift||so,this.reduce=i.reduce||so,this.reuse=i.reuse||so,this.hash=i.hash||(()=>0),this.strict=i.strict!==!1}}({start:bg,reduce:(i,e)=>i.depth<0&&Og.has(e)?i.parent:i,shift:(i,e,t,r)=>e==201?new oo(i,function(s){let n=0;for(let a=0;a<s.length;a++)n+=s.charCodeAt(a)==9?8-n%8:1;return n}(r.read(r.pos,t.pos))):e==202?i.parent:e==26||e==57||e==61?new oo(i,-1):i,hash:i=>i.hash}),Dg=new cs(i=>{for(let e=0;e<5;e++){if(i.next!="print".charCodeAt(e))return;i.advance()}if(!/\w/.test(String.fromCharCode(i.next)))for(let e=0;;e++){let t=i.peek(e);if(t!=32&&t!=9)return void(t!=40&&t!=46&&t!=10&&t!=13&&t!=35&&i.acceptToken(1))}});function hs(i,e,t,r,s){return new cs(n=>{let a=n.pos;for(;!(n.next<0);)if(n.next==123){if(n.peek(1)!=123){if(n.pos==a)return void n.acceptToken(r,1);break}n.advance(2)}else if(n.next==92)n.advance(),n.next>=0&&n.advance();else{if(n.next==i&&(e==1||n.peek(1)==i&&n.peek(2)==i)){if(n.pos==a)return void n.acceptToken(s,e);break}n.advance()}n.pos>a&&n.acceptToken(t)})}const Cg=hs(39,1,207,2,208),xg=hs(34,1,209,3,210),Sg=hs(39,3,211,4,212),Tg=hs(34,3,213,5,214),Eg=rm({'async "*" "**" FormatConversion FormatSpec':C.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":C.controlKeyword,"in not and or is del":C.operatorKeyword,"from def class global nonlocal lambda":C.definitionKeyword,import:C.moduleKeyword,"with as print":C.keyword,Boolean:C.bool,None:C.null,VariableName:C.variableName,"CallExpression/VariableName":C.function(C.variableName),"FunctionDefinition/VariableName":C.function(C.definition(C.variableName)),"ClassDefinition/VariableName":C.definition(C.className),PropertyName:C.propertyName,"CallExpression/MemberExpression/PropertyName":C.function(C.propertyName),Comment:C.lineComment,Number:C.number,String:C.string,FormatString:C.special(C.string),UpdateOp:C.updateOperator,"ArithOp!":C.arithmeticOperator,BitOp:C.bitwiseOperator,CompareOp:C.compareOperator,AssignOp:C.definitionOperator,Ellipsis:C.punctuation,At:C.meta,"( )":C.paren,"[ ]":C.squareBracket,"{ }":C.brace,".":C.derefOperator,", ;":C.separator}),Pg={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},kg=ls.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"\u26A0 print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:wg,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[Eg],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[Dg,yg,vg,Cg,xg,Sg,Tg,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:i=>Pg[i]||-1}],tokenPrec:7372}),Eh=new dm,Ph=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function us(i){return(e,t,r)=>{if(r)return!1;let s=e.node.getChild("VariableName");return s&&t(s,i),!0}}const Lg={FunctionDefinition:us("function"),ClassDefinition:us("class"),ForStatement(i,e,t){if(t){for(let r=i.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name=="in")break}},ImportStatement(i,e){var t,r;let{node:s}=i,n=((t=s.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let a=s.getChild("import");a;a=a.nextSibling)a.name=="VariableName"&&((r=a.nextSibling)===null||r===void 0?void 0:r.name)!="as"&&e(a,n?"variable":"namespace")},AssignStatement(i,e){for(let t=i.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(i,e){for(let t=null,r=i.node.firstChild;r;r=r.nextSibling)r.name!="VariableName"||t&&/\*|AssignOp/.test(t.name)||e(r,"variable"),t=r},CapturePattern:us("variable"),AsPattern:us("variable"),__proto__:null};function kh(i,e){let t=Eh.get(e);if(t)return t;let r=[],s=!0;function n(a,o){let c=i.sliceString(a.from,a.to);r.push({label:c,type:o})}return e.cursor(qh.IncludeAnonymous).iterate(a=>{if(a.name){let o=Lg[a.name];if(o&&o(a,n,s)||!s&&Ph.has(a.name))return!1;s=!1}else if(a.to-a.from>8192){for(let o of kh(i,a.node))r.push(o);return!1}}),Eh.set(e,r),r}const Lh=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,Rh=["String","FormatString","Comment","PropertyName"];function Rg(i){let e=nm(i.state).resolveInner(i.pos,-1);if(Rh.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Lh.test(i.state.sliceDoc(e.from,e.to));if(!t&&!i.explicit)return null;let r=[];for(let s=e;s;s=s.parent)Ph.has(s.name)&&(r=r.concat(kh(i.state.doc,s)));return{options:r,from:t?e.from:i.pos,validFor:Lh}}const Ag=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(i=>({label:i,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(i=>({label:i,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(i=>({label:i,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(i=>({label:i,type:"function"}))),Mg=[bt("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),bt("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),bt("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),bt("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),bt(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),bt("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),bt("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),bt("import ${module}",{label:"import",detail:"statement",type:"keyword"}),bt("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],Fg=om(Rh,um(Ag.concat(Mg)));function Ah(i,e){let t=i.baseIndentFor(e),r=i.lineAt(i.pos,-1),s=r.from+r.text.length;return/^\s*($|#)/.test(r.text)&&i.node.to<s+100&&!/\S/.test(i.state.sliceDoc(s,i.node.to))&&i.lineIndent(i.pos,-1)<=t||/^\s*(else:|elif |except |finally:)/.test(i.textAfter)&&i.lineIndent(i.pos,-1)>t?null:t+i.unit}const ao=am.define({name:"python",parser:kg.configure({props:[cm.add({Body:i=>{var e;return(e=Ah(i,i.node))!==null&&e!==void 0?e:i.continue()},IfStatement:i=>/^\s*(else:|elif )/.test(i.textAfter)?i.baseIndent:i.continue(),TryStatement:i=>/^\s*(except |finally:|else:)/.test(i.textAfter)?i.baseIndent:i.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":vo({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":vo({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":vo({closing:"]"}),"String FormatString":()=>null,Script:i=>{if(i.pos+/\s*/.exec(i.textAfter)[0].length>=i.node.to){let e=null;for(let t=i.node,r=t.to;t=t.lastChild,t&&t.to==r;)t.type.name=="Body"&&(e=t);if(e){let t=Ah(i,e);if(t!=null)return t}}return i.continue()}}),lm.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":hm,Body:(i,e)=>({from:i.from+1,to:i.to-(i.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}}),we=({variant:i,settings:e,styles:t})=>{const r=Wh.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:i==="dark"}),s=pm.define(t);return[r,fm(s)]};we({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:C.comment,color:"#404080"},{tag:[C.string,C.regexp],color:"#999999"},{tag:C.number,color:"#7090B0"},{tag:[C.bool,C.null],color:"#8080A0"},{tag:[C.punctuation,C.derefOperator],color:"#805080"},{tag:C.keyword,color:"#60B0FF"},{tag:C.definitionKeyword,color:"#B0FFF0"},{tag:C.moduleKeyword,color:"#60B0FF"},{tag:C.operator,color:"#A0A0FF"},{tag:[C.variableName,C.self],color:"#008080"},{tag:C.operatorKeyword,color:"#A0A0FF"},{tag:C.controlKeyword,color:"#80A0FF"},{tag:C.className,color:"#70E080"},{tag:[C.function(C.propertyName),C.propertyName],color:"#50A0A0"},{tag:C.tagName,color:"#009090"},{tag:C.modifier,color:"#B0FFF0"},{tag:[C.squareBracket,C.attributeName],color:"#D0D0FF"}]}),we({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:C.comment,color:"#787b8099"},{tag:C.string,color:"#86b300"},{tag:C.regexp,color:"#4cbf99"},{tag:[C.number,C.bool,C.null],color:"#ffaa33"},{tag:C.variableName,color:"#5c6166"},{tag:[C.definitionKeyword,C.modifier],color:"#fa8d3e"},{tag:[C.keyword,C.special(C.brace)],color:"#fa8d3e"},{tag:C.operator,color:"#ed9366"},{tag:C.separator,color:"#5c6166b3"},{tag:C.punctuation,color:"#5c6166"},{tag:[C.definition(C.propertyName),C.function(C.variableName)],color:"#f2ae49"},{tag:[C.className,C.definition(C.typeName)],color:"#22a4e6"},{tag:[C.tagName,C.typeName,C.self,C.labelName],color:"#55b4d4"},{tag:C.angleBracket,color:"#55b4d480"},{tag:C.attributeName,color:"#f2ae49"}]}),we({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:C.comment,color:"#6E6E6E"},{tag:[C.string,C.regexp,C.special(C.brace)],color:"#5C81B3"},{tag:C.number,color:"#C1E1B8"},{tag:C.bool,color:"#53667D"},{tag:[C.definitionKeyword,C.modifier,C.function(C.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[C.keyword,C.moduleKeyword,C.operatorKeyword,C.operator],color:"#697A8E",fontWeight:"bold"},{tag:[C.variableName,C.attributeName],color:"#708E67"},{tag:[C.function(C.variableName),C.definition(C.propertyName),C.derefOperator],color:"#fff"},{tag:C.tagName,color:"#A3D295"}]}),we({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:C.comment,color:"#666666"},{tag:[C.string,C.special(C.brace)],color:"#54BE0D"},{tag:C.regexp,color:"#E9C062"},{tag:C.number,color:"#CF6A4C"},{tag:[C.keyword,C.operator],color:"#5EA6EA"},{tag:C.variableName,color:"#7587A6"},{tag:[C.definitionKeyword,C.modifier],color:"#F9EE98"},{tag:[C.propertyName,C.function(C.variableName)],color:"#937121"},{tag:[C.typeName,C.angleBracket,C.tagName],color:"#9B859D"}]});const $g=we({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:C.comment,color:"#6B4E32"},{tag:[C.keyword,C.operator,C.derefOperator],color:"#EF5D32"},{tag:C.className,color:"#EFAC32",fontWeight:"bold"},{tag:[C.typeName,C.propertyName,C.function(C.variableName),C.definition(C.variableName)],color:"#EFAC32"},{tag:C.definition(C.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:C.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[C.number,C.bool],color:"#6C99BB"},{tag:[C.variableName,C.self],color:"#7DAF9C"},{tag:[C.string,C.special(C.brace),C.regexp],color:"#D9D762"},{tag:[C.angleBracket,C.tagName,C.attributeName],color:"#EFCB43"}]});we({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:C.comment,color:"#404040"},{tag:[C.string,C.special(C.brace),C.regexp],color:"#00D8FF"},{tag:C.number,color:"#E62286"},{tag:[C.variableName,C.attributeName,C.self],color:"#E62286",fontWeight:"bold"},{tag:C.function(C.variableName),color:"#fff",fontWeight:"bold"}]}),we({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:C.comment,color:"#BCC8BA"},{tag:[C.string,C.special(C.brace),C.regexp],color:"#5D90CD"},{tag:[C.number,C.bool,C.null],color:"#46A609"},{tag:C.keyword,color:"#AF956F"},{tag:[C.definitionKeyword,C.modifier],color:"#C52727"},{tag:[C.angleBracket,C.tagName,C.attributeName],color:"#606060"},{tag:C.self,color:"#000"}]}),we({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:C.comment,color:"#0088FF"},{tag:C.string,color:"#3AD900"},{tag:C.regexp,color:"#80FFC2"},{tag:[C.number,C.bool,C.null],color:"#FF628C"},{tag:[C.definitionKeyword,C.modifier],color:"#FFEE80"},{tag:C.variableName,color:"#CCCCCC"},{tag:C.self,color:"#FF80E1"},{tag:[C.className,C.definition(C.propertyName),C.function(C.variableName),C.definition(C.typeName),C.labelName],color:"#FFDD00"},{tag:[C.keyword,C.operator],color:"#FF9D00"},{tag:[C.propertyName,C.typeName],color:"#80FFBB"},{tag:C.special(C.brace),color:"#EDEF7D"},{tag:C.attributeName,color:"#9EFFFF"},{tag:C.derefOperator,color:"#fff"}]}),we({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:C.comment,color:"#AEAEAE"},{tag:[C.string,C.special(C.brace),C.regexp],color:"#8DFF8E"},{tag:[C.className,C.definition(C.propertyName),C.function(C.variableName),C.function(C.definition(C.variableName)),C.definition(C.typeName)],color:"#A3EBFF"},{tag:[C.number,C.bool,C.null],color:"#62E9BD"},{tag:[C.keyword,C.operator],color:"#2BF1DC"},{tag:[C.definitionKeyword,C.modifier],color:"#F8FBB1"},{tag:[C.variableName,C.self],color:"#B683CA"},{tag:[C.angleBracket,C.tagName,C.typeName,C.propertyName],color:"#60A4F1"},{tag:C.derefOperator,color:"#E0E0E0"},{tag:C.attributeName,color:"#7BACCA"}]}),we({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:C.comment,color:"#6272a4"},{tag:[C.string,C.special(C.brace)],color:"#f1fa8c"},{tag:[C.number,C.self,C.bool,C.null],color:"#bd93f9"},{tag:[C.keyword,C.operator],color:"#ff79c6"},{tag:[C.definitionKeyword,C.typeName],color:"#8be9fd"},{tag:C.definition(C.typeName),color:"#f8f8f2"},{tag:[C.className,C.definition(C.propertyName),C.function(C.variableName),C.attributeName],color:"#50fa7b"}]}),we({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:C.comment,color:"#AAAAAA"},{tag:[C.keyword,C.operator,C.typeName,C.tagName,C.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[C.attributeName,C.definition(C.propertyName)],color:"#4F9FD0"},{tag:[C.className,C.string,C.special(C.brace)],color:"#CF4F5F"},{tag:C.number,color:"#CF4F5F",fontWeight:"bold"},{tag:C.variableName,fontWeight:"bold"}]}),we({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:C.comment,color:"#9995b7"},{tag:C.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[C.definitionKeyword,C.modifier],color:"#ff5792"},{tag:[C.className,C.tagName,C.definition(C.typeName)],color:"#0094f0"},{tag:[C.number,C.bool,C.null,C.special(C.brace)],color:"#5842ff"},{tag:[C.definition(C.propertyName),C.function(C.variableName)],color:"#0095a8"},{tag:C.typeName,color:"#b3694d"},{tag:[C.propertyName,C.variableName],color:"#fa8900"},{tag:C.operator,color:"#ff5792"},{tag:C.self,color:"#e64100"},{tag:[C.string,C.regexp],color:"#00b368"},{tag:[C.paren,C.bracket],color:"#0431fa"},{tag:C.labelName,color:"#00bdd6"},{tag:C.attributeName,color:"#e64100"},{tag:C.angleBracket,color:"#9995b7"}]}),we({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:C.comment,color:"#9893a5"},{tag:[C.bool,C.null],color:"#286983"},{tag:C.number,color:"#d7827e"},{tag:C.className,color:"#d7827e"},{tag:[C.angleBracket,C.tagName,C.typeName],color:"#56949f"},{tag:C.attributeName,color:"#907aa9"},{tag:C.punctuation,color:"#797593"},{tag:[C.keyword,C.modifier],color:"#286983"},{tag:[C.string,C.regexp],color:"#ea9d34"},{tag:C.variableName,color:"#d7827e"}]}),we({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:C.comment,color:"#CFCFCF"},{tag:[C.number,C.bool,C.null],color:"#E66C29"},{tag:[C.className,C.definition(C.propertyName),C.function(C.variableName),C.labelName,C.definition(C.typeName)],color:"#2EB43B"},{tag:C.keyword,color:"#D8B229"},{tag:C.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[C.definitionKeyword,C.modifier],color:"#925A47"},{tag:C.string,color:"#704D3D"},{tag:C.typeName,color:"#2F8996"},{tag:[C.variableName,C.propertyName],color:"#77ACB0"},{tag:C.self,color:"#77ACB0",fontWeight:"bold"},{tag:C.regexp,color:"#E3965E"},{tag:[C.tagName,C.angleBracket],color:"#BAA827"},{tag:C.attributeName,color:"#B06520"},{tag:C.derefOperator,color:"#000"}]}),we({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:C.comment,color:"#93A1A1"},{tag:C.string,color:"#2AA198"},{tag:C.regexp,color:"#D30102"},{tag:C.number,color:"#D33682"},{tag:C.variableName,color:"#268BD2"},{tag:[C.keyword,C.operator,C.punctuation],color:"#859900"},{tag:[C.definitionKeyword,C.modifier],color:"#073642",fontWeight:"bold"},{tag:[C.className,C.self,C.definition(C.propertyName)],color:"#268BD2"},{tag:C.function(C.variableName),color:"#268BD2"},{tag:[C.bool,C.null],color:"#B58900"},{tag:C.tagName,color:"#268BD2",fontWeight:"bold"},{tag:C.angleBracket,color:"#93A1A1"},{tag:C.attributeName,color:"#93A1A1"},{tag:C.typeName,color:"#859900"}]}),we({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:C.comment,color:"#8E908C"},{tag:[C.variableName,C.self,C.propertyName,C.attributeName,C.regexp],color:"#C82829"},{tag:[C.number,C.bool,C.null],color:"#F5871F"},{tag:[C.className,C.typeName,C.definition(C.typeName)],color:"#C99E00"},{tag:[C.string,C.special(C.brace)],color:"#718C00"},{tag:C.operator,color:"#3E999F"},{tag:[C.definition(C.propertyName),C.function(C.variableName)],color:"#4271AE"},{tag:C.keyword,color:"#8959A8"},{tag:C.derefOperator,color:"#4D4D4C"}]});class Bg extends Wh{constructor(e,t,r){super({extensions:[gm.of("    "),mm,new sm(ao,[ao.data.of({autocomplete:Rg}),ao.data.of({autocomplete:Fg})]),jh.of([..._m,Om]),vm.highest(jh.of([{key:"Ctrl-Enter",run:()=>(r.runMPC(this.getCode(),t.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(r.runMPC(this.getCode(),t.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),t.selectedIndex!=0&&(t.selectedIndex=0,t.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:ym,preventDefault:!0},{key:"Ctrl-d",run:bm,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:wm,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:Dm,preventDefault:!0},{key:"Ctrl-y",run:Cm,preventDefault:!0}])),$g],parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}const Mh=(()=>{addEventListener("beforeunload",function(){delete sessionStorage.__lock});let i=!1;return sessionStorage.__lock&&(i=!0),sessionStorage.__lock=1,i})();function Qg(){localStorage.tabCount||(localStorage.tabCount=0);let i=parseInt(localStorage.tabCount)+1;return localStorage.tabCount=i,addEventListener("beforeunload",function(){lo("lock","");let e=parseInt(localStorage.tabCount);e>0&&(localStorage.tabCount=e-1)}),Mh&&console.warn("tab is duplicate"),sessionStorage.tabID&&!Mh&&co("lock",sessionStorage.tabID)==""||(sessionStorage.tabID=function(){for(let e=1;e<=1e3;e++)if(co("lock",e)=="")return e}(),sessionStorage.myPeerID=co("myPeerID")),lo("lock","locked"),console.log("tab id: "+sessionStorage.tabID),sessionStorage.myPeerID}function co(i,e=sessionStorage.tabID){return localStorage[`tabState:${e}:`+i]||""}function lo(i,e,t=sessionStorage.tabID){sessionStorage[i]=e,localStorage[`tabState:${t}:`+i]=e}var Ve=typeof window<"u"?window:null,ho=Ve===null,qi=ho?void 0:Ve.document,tt="addEventListener",it="removeEventListener",uo="getBoundingClientRect",Wi="_a",rt="_b",yt="_c",ds="horizontal",st=function(){return!1},Ig=ho?"calc":["","-webkit-","-moz-","-o-"].filter(function(i){var e=qi.createElement("div");return e.style.cssText="width:"+i+"calc(9px)",!!e.style.length}).shift()+"calc",Fh=function(i){return typeof i=="string"||i instanceof String},$h=function(i){if(Fh(i)){var e=qi.querySelector(i);if(!e)throw new Error("Selector "+i+" did not match a DOM element");return e}return i},De=function(i,e,t){var r=i[e];return r!==void 0?r:t},ps=function(i,e,t,r){if(e){if(r==="end")return 0;if(r==="center")return i/2}else if(t){if(r==="start")return 0;if(r==="center")return i/2}return i},qg=function(i,e){var t=qi.createElement("div");return t.className="gutter gutter-"+e,t},Wg=function(i,e,t){var r={};return Fh(e)?r[i]=e:r[i]=Ig+"("+e+"% - "+t+"px)",r},jg=function(i,e){var t;return(t={})[i]=e+"px",t},zg=function(i,e){if(e===void 0&&(e={}),ho)return{};var t,r,s,n,a,o,c=i;Array.from&&(c=Array.from(c));var l=$h(c[0]).parentNode,h=getComputedStyle?getComputedStyle(l):null,u=h?h.flexDirection:null,f=De(e,"sizes")||c.map(function(){return 100/c.length}),m=De(e,"minSize",100),d=Array.isArray(m)?m:c.map(function(){return m}),p=De(e,"maxSize",1/0),g=Array.isArray(p)?p:c.map(function(){return p}),_=De(e,"expandToMin",!1),y=De(e,"gutterSize",10),O=De(e,"gutterAlign","center"),v=De(e,"snapOffset",30),S=Array.isArray(v)?v:c.map(function(){return v}),T=De(e,"dragInterval",1),k=De(e,"direction",ds),b=De(e,"cursor",k===ds?"col-resize":"row-resize"),D=De(e,"gutter",qg),E=De(e,"elementStyle",Wg),w=De(e,"gutterStyle",jg);function x(W,Q,I,N){var J=E(t,Q,I,N);Object.keys(J).forEach(function(U){W.style[U]=J[U]})}function L(){return o.map(function(W){return W.size})}function P(W){return"touches"in W?W.touches[0][r]:W[r]}function R(W){var Q=o[this.a],I=o[this.b],N=Q.size+I.size;Q.size=W/this.size*N,I.size=N-W/this.size*N,x(Q.element,Q.size,this[rt],Q.i),x(I.element,I.size,this[yt],I.i)}function A(W){var Q,I=o[this.a],N=o[this.b];this.dragging&&(Q=P(W)-this.start+(this[rt]-this.dragOffset),T>1&&(Q=Math.round(Q/T)*T),Q<=I.minSize+I.snapOffset+this[rt]?Q=I.minSize+this[rt]:Q>=this.size-(N.minSize+N.snapOffset+this[yt])&&(Q=this.size-(N.minSize+this[yt])),Q>=I.maxSize-I.snapOffset+this[rt]?Q=I.maxSize+this[rt]:Q<=this.size-(N.maxSize-N.snapOffset+this[yt])&&(Q=this.size-(N.maxSize+this[yt])),R.call(this,Q),De(e,"onDrag",st)(L()))}function F(){var W=o[this.a].element,Q=o[this.b].element,I=W[uo](),N=Q[uo]();this.size=I[t]+N[t]+this[rt]+this[yt],this.start=I[s],this.end=I[n]}function M(W){var Q=function(U){if(!getComputedStyle)return null;var K=getComputedStyle(U);if(!K)return null;var ie=U[a];return ie===0?null:ie-=k===ds?parseFloat(K.paddingLeft)+parseFloat(K.paddingRight):parseFloat(K.paddingTop)+parseFloat(K.paddingBottom)}(l);if(Q===null||d.reduce(function(U,K){return U+K},0)>Q)return W;var I=0,N=[],J=W.map(function(U,K){var ie=Q*U/100,Ce=ps(y,K===0,K===W.length-1,O),me=d[K]+Ce;return ie<me?(I+=me-ie,N.push(0),me):(N.push(ie-me),ie)});return I===0?W:J.map(function(U,K){var ie=U;if(I>0&&N[K]-I>0){var Ce=Math.min(I,N[K]-I);I-=Ce,ie=U-Ce}return ie/Q*100})}function $(){var W=this,Q=o[W.a].element,I=o[W.b].element;W.dragging&&De(e,"onDragEnd",st)(L()),W.dragging=!1,Ve[it]("mouseup",W.stop),Ve[it]("touchend",W.stop),Ve[it]("touchcancel",W.stop),Ve[it]("mousemove",W.move),Ve[it]("touchmove",W.move),W.stop=null,W.move=null,Q[it]("selectstart",st),Q[it]("dragstart",st),I[it]("selectstart",st),I[it]("dragstart",st),Q.style.userSelect="",Q.style.webkitUserSelect="",Q.style.MozUserSelect="",Q.style.pointerEvents="",I.style.userSelect="",I.style.webkitUserSelect="",I.style.MozUserSelect="",I.style.pointerEvents="",W.gutter.style.cursor="",W.parent.style.cursor="",qi.body.style.cursor=""}function B(W){if(!("button"in W)||W.button===0){var Q=this,I=o[Q.a].element,N=o[Q.b].element;Q.dragging||De(e,"onDragStart",st)(L()),W.preventDefault(),Q.dragging=!0,Q.move=A.bind(Q),Q.stop=$.bind(Q),Ve[tt]("mouseup",Q.stop),Ve[tt]("touchend",Q.stop),Ve[tt]("touchcancel",Q.stop),Ve[tt]("mousemove",Q.move),Ve[tt]("touchmove",Q.move),I[tt]("selectstart",st),I[tt]("dragstart",st),N[tt]("selectstart",st),N[tt]("dragstart",st),I.style.userSelect="none",I.style.webkitUserSelect="none",I.style.MozUserSelect="none",I.style.pointerEvents="none",N.style.userSelect="none",N.style.webkitUserSelect="none",N.style.MozUserSelect="none",N.style.pointerEvents="none",Q.gutter.style.cursor=b,Q.parent.style.cursor=b,qi.body.style.cursor=b,F.call(Q),Q.dragOffset=P(W)-Q.end}}k===ds?(t="width",r="clientX",s="left",n="right",a="clientWidth"):k==="vertical"&&(t="height",r="clientY",s="top",n="bottom",a="clientHeight"),f=M(f);var j=[];function z(W){var Q=W.i===j.length,I=Q?j[W.i-1]:j[W.i];F.call(I);var N=Q?I.size-W.minSize-I[yt]:W.minSize+I[rt];R.call(I,N)}return o=c.map(function(W,Q){var I,N={element:$h(W),size:f[Q],minSize:d[Q],maxSize:g[Q],snapOffset:S[Q],i:Q};if(Q>0&&((I={a:Q-1,b:Q,dragging:!1,direction:k,parent:l})[rt]=ps(y,Q-1==0,!1,O),I[yt]=ps(y,!1,Q===c.length-1,O),u==="row-reverse"||u==="column-reverse")){var J=I.a;I.a=I.b,I.b=J}if(Q>0){var U=D(Q,k,N.element);(function(K,ie,Ce){var me=w(t,ie,Ce);Object.keys(me).forEach(function(ke){K.style[ke]=me[ke]})})(U,y,Q),I[Wi]=B.bind(I),U[tt]("mousedown",I[Wi]),U[tt]("touchstart",I[Wi]),l.insertBefore(U,N.element),I.gutter=U}return x(N.element,N.size,ps(y,Q===0,Q===c.length-1,O),Q),Q>0&&j.push(I),N}),o.forEach(function(W){var Q=W.element[uo]()[t];Q<W.minSize&&(_?z(W):W.minSize=Q)}),{setSizes:function(W){var Q=M(W);Q.forEach(function(I,N){if(N>0){var J=j[N-1],U=o[J.a],K=o[J.b];U.size=Q[N-1],K.size=I,x(U.element,U.size,J[rt],U.i),x(K.element,K.size,J[yt],K.i)}})},getSizes:L,collapse:function(W){z(o[W])},destroy:function(W,Q){j.forEach(function(I){if(Q!==!0?I.parent.removeChild(I.gutter):(I.gutter[it]("mousedown",I[Wi]),I.gutter[it]("touchstart",I[Wi])),W!==!0){var N=E(t,I.a.size,I[rt]);Object.keys(N).forEach(function(J){o[I.a].element.style[J]="",o[I.b].element.style[J]=""})}})},parent:l,pairs:j}};class Xg{constructor(e,t){this.onPeerConnectedHook=async r=>{this.term.success(`Connected to: ${le.peerID(r)}`),this.updatePeersDiv()},this.onPeerDisconnectedHook=async r=>{this.term.error(`Disconnected from: ${le.peerID(r)}`),this.updatePeersDiv()},this.onPeerConnectionErrorHook=async({peerID:r,err:s})=>{this.term.error(`Failed to connect to: ${le.peerID(r)}: ${s.message}`),this.updatePeersDiv()},this.processChatMessage=async({peerID:r,data:s})=>{s.type=="user:chat"?this.term.chat(r,s.payload):console.warn("unknown message type",s)},this.mpyc=e,this.demoSelect=te(t.demoSelectSelector),this.hostPeerIDInput=te(t.hostPeerIDInputSelector),this.chatInput=te(t.chatInputSelector),this.myPeerIDEl=te(t.myPeerIDSelector),this.knownPeersEl=te(t.peersDivSelector),this.resetPeerIDButton=te(t.resetPeerIDButtonSelector),this.runMPyCButton=te(t.runMPyCButtonSelector),this.runMPyCAsyncButton=te(t.runMPyCAsyncButtonSelector),this.stopMPyCButton=te(t.stopMPyCButtonSelector),this.connectToPeerButton=te(t.connectToPeerButtonSelector),this.sendMessageButton=te(t.sendMessageButtonSelector),this.clearTerminalButton=te(t.clearTerminalButtonSelector),this.toggleStatsEl=te(t.toggleStatsSelector),this.versionDiv=te(t.versionSelector),Jg('[data-bs-toggle="tooltip"]').forEach(r=>new qe(r,{trigger:"hover"})),this.qr=new hg(te(t.qrGenBtnSelector),te(t.qrScanBtnSelector),te(t.qrScanInputSelector),()=>this.mpyc.transport.id()),this.qr.on("qr:scanned",r=>{this.hostPeerIDInput.value=r,this.hostPeerIDInput.dispatchEvent(new Event("input"))}),this.qr.on("qr:error",r=>{this.term.error(r.message)}),this.term=new ng(t.terminalSelector,e),this.editor=new Bg(t.editorSelector,this.demoSelect,e),this.init(e,t)}init(e,t){this.term.info(`Initializing ${le.green("PeerJS")}...`),this.term.info(`Initializing ${le.green(e.runtime.type())} runtime...`),this.updateHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",Gn(()=>{try{let r=new URL(this.hostPeerIDInput.value).searchParams.get("peer");r&&(this.hostPeerIDInput.value=r)}catch{}})),this.setupMPyCEvents(e),this.setupButtonEvents(e,t),this.setupDemoSelector(),function(r){var s,n=localStorage.getItem("split-sizes");s=n?JSON.parse(n):[50,50],zg(r,{sizes:s,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,onDragEnd:function(a){localStorage.setItem("split-sizes",JSON.stringify(a))}})}(t.splitPanelSelectors),this.setupGlobals()}setupMPyCEvents(e){addEventListener("error",t=>{console.error(t),this.term.error(t.message)}),e.on("transport:ready",async t=>{this.myPeerIDEl.value=Jr(t),lo("myPeerID",t),console.log("Peer ID: "+t),this.term.success(`${le.green("PeerJS")} ready with ID: ${le.peerID(t)}`),this.updatePeersDiv()}),e.on("transport:closed",async()=>{this.term.error("PeerJS closed.")}),e.on("transport:error",async t=>{this.term.warn(`PeerJS failed: ${t.message}`),console.warn(`PeerJS failed: ${t.message}
${t.stack}`),t.message==="Lost connection to server."&&setTimeout(()=>{this.mpyc.transport.reconnect()},1e3)}),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",async t=>{this.term.error(t.error)}),e.on("runtime:messageerror",async t=>{this.term.error(t.data)}),e.on("runtime:exec:done",async()=>{this.updatePeersDiv()}),e.on("runtime:exec:init",async()=>{this.updatePeersDiv()}),e.on("runtime:display",async t=>{this.term.display(t)}),e.on("runtime:display:error",async t=>{this.term.displayError(t)}),e.on("runtime:display:stats",async t=>{this.term.live(t)}),e.on("runtime:ready",async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${le.green(e.runtime.type())} runtime ready.`)})}setupButtonEvents(e,t){if(Zl)try{this.setupEruda()}catch(r){console.warn(r)}this.resetPeerIDButton.addEventListener("click",async()=>{delete sessionStorage.myPeerID,this.term.writeln("Restarting PeerJS..."),e.resetTransport(()=>new an)}),this.stopMPyCButton.addEventListener("click",async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()}),this.runMPyCButton.addEventListener("click",async r=>{e.runMPC(this.editor.getCode(),this.demoSelect.value,r.ctrlKey||r.shiftKey)}),this.connectToPeerButton.addEventListener("click",async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)}),this.sendMessageButton.addEventListener("click",async()=>{this.sendChatMessage()}),this.clearTerminalButton.addEventListener("click",async()=>{this.term.clear()}),this.setupStatsToggle(),this.chatInput.addEventListener("keypress",async r=>{let s=r;if(s.key==="Enter"&&!s.shiftKey)return s.preventDefault(),this.sendChatMessage()}),new $f(t.myPeerIDSelector,t.copyPeerIDButtonSelector)}setupStatsToggle(){this.toggleStatsEl.addEventListener("click",async()=>{this.toggleStatsEl.checked?(Jl("showStats","true"),qe.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(Jl("showStats","false"),qe.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())});const e=(t="showStats",localStorage[t]||sessionStorage[t]||r);var t,r;this.toggleStatsEl.checked=e==="true",this.toggleStatsEl.dispatchEvent(new Event("click"))}setupEruda(){let e=document.createElement("div");document.body.prepend(e),Ih.init({container:e,autoScale:!0,defaults:{theme:"dark"},tool:["console","elements","network","info","resources"]}),Ih.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.clearTabCount=()=>{delete localStorage.tabCount},window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach((e,t)=>{let r=`
        <span class="position-relative end-0">
            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>
        </span>`;this.knownPeersEl.innerHTML+=`
        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> 
            <span class="" style="user-select:none">${t}: </span>
            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${Jr(e)}</span> 
            ${r}
        </li>`})}setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),t=r=>{r.matches?(te("#mpc-demos").hidden=!0,te("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,te("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),te("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),te("#chatFooter").insertAdjacentElement("beforeend",te("#chatInputGroup"))):(te("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),te("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),te("#mpc-demos").hidden=!1,te("#connectedPartiesLabel").hidden=!1,te("#chatSidebar").insertAdjacentElement("beforeend",te("#chatInputGroup")),this.demoSelect.size=window.innerHeight/84)};e.addEventListener("change",t),t(e),this.demoSelect.addEventListener("change",async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex;let r=await async function(s){var n;return s.selectedIndex==0?n=localStorage.customCode||"":n=await(await fetch(s.value)).text(),n}(this.demoSelect);this.editor.updateCode(r)}),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.demoSelect.dispatchEvent(new Event("change"))}updateHostPeerIDInput(){var e=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return e&&(this.hostPeerIDInput.value=e,localStorage.hostPeerID=e),e}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}}const Bh="0.6.1";(function(){var i;i=18,console.log("Storage schema generation:",localStorage.gen),localStorage.gen||(localStorage.gen=0),localStorage.gen<i&&(console.log(`Clearing schema, latest generation: ${i}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=i);let e=Qg();document.title+=` - (${sessionStorage.tabID})`;let t=new Nh(()=>{try{return new an(e)}catch(r){return console.warn(r),new an}},()=>new Ku({config:{fetch:[{from:"./py/",to_folder:"./",files:[`mpyc_web-${Bh}-py3-none-any.whl`,"demo.py"]}],packages:[`emfs:./mpyc_web-${Bh}-py3-none-any.whl`]}}));new Xg(t,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",runMPyCAsyncButtonSelector:"button#startAsyncButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",qrGenBtnSelector:"#show-qr",qrScanInputSelector:"#qrCodeFileInput",qrScanBtnSelector:"#scanQRCodeButton",splitPanelSelectors:[".split-panel-editor",".split-panel-terminal"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})})()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}