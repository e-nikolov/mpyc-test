(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();var Bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ze={exports:{}},$=typeof Reflect=="object"?Reflect:null,dt=$&&typeof $.apply=="function"?$.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},fe;$&&typeof $.ownKeys=="function"?fe=$.ownKeys:Object.getOwnPropertySymbols?fe=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:fe=function(e){return Object.getOwnPropertyNames(e)};function di(n){console&&console.warn&&console.warn(n)}var Dt=Number.isNaN||function(e){return e!==e};function h(){h.init.call(this)}ze.exports=h;ze.exports.once=Ti;h.EventEmitter=h;h.prototype._events=void 0;h.prototype._eventsCount=0;h.prototype._maxListeners=void 0;var pt=10;function me(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return pt},set:function(n){if(typeof n!="number"||n<0||Dt(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");pt=n}});h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};h.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Dt(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function It(n){return n._maxListeners===void 0?h.defaultMaxListeners:n._maxListeners}h.prototype.getMaxListeners=function(){return It(this)};h.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var r=e==="error",l=this._events;if(l!==void 0)r=r&&l.error===void 0;else if(!r)return!1;if(r){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var v=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw v.context=c,v}var N=l[e];if(N===void 0)return!1;if(typeof N=="function")dt(N,this,t);else for(var U=N.length,pe=Mt(N,U),s=0;s<U;++s)dt(pe[s],this,t);return!0};function St(n,e,t,s){var r,l,c;if(me(t),l=n._events,l===void 0?(l=n._events=Object.create(null),n._eventsCount=0):(l.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),l=n._events),c=l[e]),c===void 0)c=l[e]=t,++n._eventsCount;else if(typeof c=="function"?c=l[e]=s?[t,c]:[c,t]:s?c.unshift(t):c.push(t),r=It(n),r>0&&c.length>r&&!c.warned){c.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=n,v.type=e,v.count=c.length,di(v)}return n}h.prototype.addListener=function(e,t){return St(this,e,t,!1)};h.prototype.on=h.prototype.addListener;h.prototype.prependListener=function(e,t){return St(this,e,t,!0)};function pi(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nt(n,e,t){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},r=pi.bind(s);return r.listener=t,s.wrapFn=r,r}h.prototype.once=function(e,t){return me(t),this.on(e,Nt(this,e,t)),this};h.prototype.prependOnceListener=function(e,t){return me(t),this.prependListener(e,Nt(this,e,t)),this};h.prototype.removeListener=function(e,t){var s,r,l,c,v;if(me(t),r=this._events,r===void 0)return this;if(s=r[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(l=-1,c=s.length-1;c>=0;c--)if(s[c]===t||s[c].listener===t){v=s[c].listener,l=c;break}if(l<0)return this;l===0?s.shift():_i(s,l),s.length===1&&(r[e]=s[0]),r.removeListener!==void 0&&this.emit("removeListener",e,v||t)}return this};h.prototype.off=h.prototype.removeListener;h.prototype.removeAllListeners=function(e){var t,s,r;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var l=Object.keys(s),c;for(r=0;r<l.length;++r)c=l[r],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function Pt(n,e,t){var s=n._events;if(s===void 0)return[];var r=s[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?gi(r):Mt(r,r.length)}h.prototype.listeners=function(e){return Pt(this,e,!0)};h.prototype.rawListeners=function(e){return Pt(this,e,!1)};h.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):Ct.call(n,e)};h.prototype.listenerCount=Ct;function Ct(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?fe(this._events):[]};function Mt(n,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=n[s];return t}function _i(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function gi(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Ti(n,e){return new Promise(function(t,s){function r(c){n.removeListener(e,l),s(c)}function l(){typeof n.removeListener=="function"&&n.removeListener("error",r),t([].slice.call(arguments))}xt(n,e,l,{once:!0}),e!=="error"&&Ei(n,r,{once:!0})})}function Ei(n,e,t){typeof n.on=="function"&&xt(n,"error",e,t)}function xt(n,e,t,s){if(typeof n.on=="function")s.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function r(l){s.once&&n.removeEventListener(e,r),t(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var vi=ze.exports,Ri=function(n){if(typeof n.create!="function")throw new TypeError("factory.create must be a function");if(typeof n.destroy!="function")throw new TypeError("factory.destroy must be a function");if(typeof n.validate<"u"&&typeof n.validate!="function")throw new TypeError("factory.validate must be a function")};let yi=class{constructor(){this.fifo=!0,this.priorityRange=1,this.testOnBorrow=!1,this.testOnReturn=!1,this.autostart=!0,this.evictionRunIntervalMillis=0,this.numTestsPerEvictionRun=3,this.softIdleTimeoutMillis=-1,this.idleTimeoutMillis=3e4,this.acquireTimeoutMillis=null,this.destroyTimeoutMillis=null,this.maxWaitingClients=null,this.min=null,this.max=null,this.Promise=Promise}};var Ai=yi;const Li=Ai;let bi=class{constructor(e){const t=new Li;e=e||{},this.fifo=typeof e.fifo=="boolean"?e.fifo:t.fifo,this.priorityRange=e.priorityRange||t.priorityRange,this.testOnBorrow=typeof e.testOnBorrow=="boolean"?e.testOnBorrow:t.testOnBorrow,this.testOnReturn=typeof e.testOnReturn=="boolean"?e.testOnReturn:t.testOnReturn,this.autostart=typeof e.autostart=="boolean"?e.autostart:t.autostart,e.acquireTimeoutMillis&&(this.acquireTimeoutMillis=parseInt(e.acquireTimeoutMillis,10)),e.destroyTimeoutMillis&&(this.destroyTimeoutMillis=parseInt(e.destroyTimeoutMillis,10)),e.maxWaitingClients!==void 0&&(this.maxWaitingClients=parseInt(e.maxWaitingClients,10)),this.max=parseInt(e.max,10),this.min=parseInt(e.min,10),this.max=Math.max(isNaN(this.max)?1:this.max,1),this.min=Math.min(isNaN(this.min)?0:this.min,this.max),this.evictionRunIntervalMillis=e.evictionRunIntervalMillis||t.evictionRunIntervalMillis,this.numTestsPerEvictionRun=e.numTestsPerEvictionRun||t.numTestsPerEvictionRun,this.softIdleTimeoutMillis=e.softIdleTimeoutMillis||t.softIdleTimeoutMillis,this.idleTimeoutMillis=e.idleTimeoutMillis||t.idleTimeoutMillis,this.Promise=e.Promise!=null?e.Promise:t.Promise}};var Oi=bi;let de=class q{constructor(e){this._state=q.PENDING,this._resolve=void 0,this._reject=void 0,this._promise=new e((t,s)=>{this._resolve=t,this._reject=s})}get state(){return this._state}get promise(){return this._promise}reject(e){this._state===q.PENDING&&(this._state=q.REJECTED,this._reject(e))}resolve(e){this._state===q.PENDING&&(this._state=q.FULFILLED,this._resolve(e))}};de.PENDING="PENDING";de.FULFILLED="FULFILLED";de.REJECTED="REJECTED";var He=de;class wi extends Error{constructor(e){super(e),this.name=this.constructor.name,this.message=e,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Di extends wi{constructor(e){super(e)}}var Ii={TimeoutError:Di};const Si=He,Ni=Ii;function Pi(n,e){return function(){return n.apply(e,arguments)}}let Ci=class kt extends Si{constructor(e,t){super(t),this._creationTimestamp=Date.now(),this._timeout=null,e!==void 0&&this.setTimeout(e)}setTimeout(e){if(this._state!==kt.PENDING)return;const t=parseInt(e,10);if(isNaN(t)||t<=0)throw new Error("delay must be a positive int");const s=Date.now()-this._creationTimestamp;this._timeout&&this.removeTimeout(),this._timeout=setTimeout(Pi(this._fireTimeout,this),Math.max(t-s,0))}removeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=null}_fireTimeout(){this.reject(new Ni.TimeoutError("ResourceRequest timed out"))}reject(e){this.removeTimeout(),super.reject(e)}resolve(e){this.removeTimeout(),super.resolve(e)}};var Mi=Ci;const xi=He;let ki=class extends xi{constructor(e,t){super(t),this._creationTimestamp=Date.now(),this.pooledResource=e}reject(){}};var Ui=ki;const Fi={ALLOCATED:"ALLOCATED",IDLE:"IDLE",INVALID:"INVALID",RETURNING:"RETURNING",VALIDATION:"VALIDATION"};var ji=Fi;const k=ji;let Bi=class{constructor(e){this.creationTime=Date.now(),this.lastReturnTime=null,this.lastBorrowTime=null,this.lastIdleTime=null,this.obj=e,this.state=k.IDLE}allocate(){this.lastBorrowTime=Date.now(),this.state=k.ALLOCATED}deallocate(){this.lastReturnTime=Date.now(),this.state=k.IDLE}invalidate(){this.state=k.INVALID}test(){this.state=k.VALIDATION}idle(){this.lastIdleTime=Date.now(),this.state=k.IDLE}returning(){this.state=k.RETURNING}};var zi=Bi;let Hi=class{evict(e,t,s){const r=Date.now()-t.lastIdleTime;return e.softIdleTimeoutMillis>0&&e.softIdleTimeoutMillis<r&&e.min<s||e.idleTimeoutMillis<r}};var Wi=Hi;let Gi=class{constructor(){this.head=null,this.tail=null,this.length=0}insertBeginning(e){this.head===null?(this.head=e,this.tail=e,e.prev=null,e.next=null,this.length++):this.insertBefore(this.head,e)}insertEnd(e){this.tail===null?this.insertBeginning(e):this.insertAfter(this.tail,e)}insertAfter(e,t){t.prev=e,t.next=e.next,e.next===null?this.tail=t:e.next.prev=t,e.next=t,this.length++}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev===null?this.head=t:e.prev.next=t,e.prev=t,this.length++}remove(e){e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,e.prev=null,e.next=null,this.length--}static createNode(e){return{prev:null,next:null,data:e}}};var Ut=Gi;let qi=class{constructor(e,t){this._list=e,this._direction=t===!0?"prev":"next",this._startPosition=t===!0?"tail":"head",this._started=!1,this._cursor=null,this._done=!1}_start(){this._cursor=this._list[this._startPosition],this._started=!0}_advanceCursor(){if(this._started===!1){this._started=!0,this._cursor=this._list[this._startPosition];return}this._cursor=this._cursor[this._direction]}reset(){this._done=!1,this._started=!1,this._cursor=null}remove(){if(this._started===!1||this._done===!0||this._isCursorDetached())return!1;this._list.remove(this._cursor)}next(){return this._done===!0?{done:!0}:(this._advanceCursor(),this._cursor===null||this._isCursorDetached()?(this._done=!0,{done:!0}):{value:this._cursor,done:!1})}_isCursorDetached(){return this._cursor.prev===null&&this._cursor.next===null&&this._list.tail!==this._cursor&&this._list.head!==this._cursor}};var $i=qi;const Yi=$i;let Vi=class extends Yi{next(){const e=super.next();return e.value&&(e.value=e.value.data),e}};var Qi=Vi;const Pe=Ut,Ce=Qi;let Xi=class{constructor(){this._list=new Pe}shift(){if(this.length===0)return;const e=this._list.head;return this._list.remove(e),e.data}unshift(e){const t=Pe.createNode(e);this._list.insertBeginning(t)}push(e){const t=Pe.createNode(e);this._list.insertEnd(t)}pop(){if(this.length===0)return;const e=this._list.tail;return this._list.remove(e),e.data}[Symbol.iterator](){return new Ce(this._list)}iterator(){return new Ce(this._list)}reverseIterator(){return new Ce(this._list,!0)}get head(){return this.length===0?void 0:this._list.head.data}get tail(){return this.length===0?void 0:this._list.tail.data}get length(){return this._list.length}};var Ft=Xi;const Ki=Ut,Zi=Ft;let Ji=class extends Zi{push(e){const t=Ki.createNode(e);e.promise.catch(this._createTimeoutRejectionHandler(t)),this._list.insertEnd(t)}_createTimeoutRejectionHandler(e){return t=>{t.name==="TimeoutError"&&this._list.remove(e)}}};var en=Ji;const tn=en;let nn=class{constructor(e){this._size=Math.max(+e|0,1),this._slots=[];for(let t=0;t<this._size;t++)this._slots.push(new tn)}get length(){let e=0;for(let t=0,s=this._slots.length;t<s;t++)e+=this._slots[t].length;return e}enqueue(e,t){t=t&&+t|0||0,t&&(t<0||t>=this._size)&&(t=this._size-1),this._slots[t].push(e)}dequeue(){for(let e=0,t=this._slots.length;e<t;e+=1)if(this._slots[e].length)return this._slots[e].shift()}get head(){for(let e=0,t=this._slots.length;e<t;e+=1)if(this._slots[e].length>0)return this._slots[e].head}get tail(){for(let e=this._slots.length-1;e>=0;e--)if(this._slots[e].length>0)return this._slots[e].tail}};var sn=nn,jt={};function _t(){}jt.reflector=function(n){return n.then(_t,_t)};const rn=vi.EventEmitter,on=Ri,an=Oi,ln=Mi,un=Ui,cn=zi,fn=He,K=jt.reflector,hn="factoryCreateError",mn="factoryDestroyError";let dn=class extends rn{constructor(e,t,s,r,l){super(),on(r),this._config=new an(l),this._Promise=this._config.Promise,this._factory=r,this._draining=!1,this._started=!1,this._waitingClientsQueue=new s(this._config.priorityRange),this._factoryCreateOperations=new Set,this._factoryDestroyOperations=new Set,this._availableObjects=new t,this._testOnBorrowResources=new Set,this._testOnReturnResources=new Set,this._validationOperations=new Set,this._allObjects=new Set,this._resourceLoans=new Map,this._evictionIterator=this._availableObjects.iterator(),this._evictor=new e,this._scheduledEviction=null,this._config.autostart===!0&&this.start()}_destroy(e){e.invalidate(),this._allObjects.delete(e);const t=this._factory.destroy(e.obj),s=this._config.destroyTimeoutMillis?this._Promise.resolve(this._applyDestroyTimeout(t)):this._Promise.resolve(t);this._trackOperation(s,this._factoryDestroyOperations).catch(r=>{this.emit(mn,r)}),this._ensureMinimum()}_applyDestroyTimeout(e){const t=new this._Promise((s,r)=>{setTimeout(()=>{r(new Error("destroy timed out"))},this._config.destroyTimeoutMillis).unref()});return this._Promise.race([t,e])}_testOnBorrow(){if(this._availableObjects.length<1)return!1;const e=this._availableObjects.shift();e.test(),this._testOnBorrowResources.add(e);const t=this._factory.validate(e.obj),s=this._Promise.resolve(t);return this._trackOperation(s,this._validationOperations).then(r=>{if(this._testOnBorrowResources.delete(e),r===!1){e.invalidate(),this._destroy(e),this._dispense();return}this._dispatchPooledResourceToNextWaitingClient(e)}),!0}_dispatchResource(){if(this._availableObjects.length<1)return!1;const e=this._availableObjects.shift();return this._dispatchPooledResourceToNextWaitingClient(e),!1}_dispense(){const e=this._waitingClientsQueue.length;if(e<1)return;const t=e-this._potentiallyAllocableResourceCount,s=Math.min(this.spareResourceCapacity,t);for(let r=0;s>r;r++)this._createResource();if(this._config.testOnBorrow===!0){const r=e-this._testOnBorrowResources.size,l=Math.min(this._availableObjects.length,r);for(let c=0;l>c;c++)this._testOnBorrow()}if(this._config.testOnBorrow===!1){const r=Math.min(this._availableObjects.length,e);for(let l=0;r>l;l++)this._dispatchResource()}}_dispatchPooledResourceToNextWaitingClient(e){const t=this._waitingClientsQueue.dequeue();if(t===void 0||t.state!==fn.PENDING)return this._addPooledResourceToAvailableObjects(e),!1;const s=new un(e,this._Promise);return this._resourceLoans.set(e.obj,s),e.allocate(),t.resolve(e.obj),!0}_trackOperation(e,t){return t.add(e),e.then(s=>(t.delete(e),this._Promise.resolve(s)),s=>(t.delete(e),this._Promise.reject(s)))}_createResource(){const e=this._factory.create(),t=this._Promise.resolve(e).then(s=>{const r=new cn(s);this._allObjects.add(r),this._addPooledResourceToAvailableObjects(r)});this._trackOperation(t,this._factoryCreateOperations).then(()=>(this._dispense(),null)).catch(s=>{this.emit(hn,s),this._dispense()})}_ensureMinimum(){if(this._draining===!0)return;const e=this._config.min-this._count;for(let t=0;t<e;t++)this._createResource()}_evict(){const e=Math.min(this._config.numTestsPerEvictionRun,this._availableObjects.length),t={softIdleTimeoutMillis:this._config.softIdleTimeoutMillis,idleTimeoutMillis:this._config.idleTimeoutMillis,min:this._config.min};for(let s=0;s<e;){const r=this._evictionIterator.next();if(r.done===!0&&this._availableObjects.length<1){this._evictionIterator.reset();return}if(r.done===!0&&this._availableObjects.length>0){this._evictionIterator.reset();continue}const l=r.value,c=this._evictor.evict(t,l,this._availableObjects.length);s++,c===!0&&(this._evictionIterator.remove(),this._destroy(l))}}_scheduleEvictorRun(){this._config.evictionRunIntervalMillis>0&&(this._scheduledEviction=setTimeout(()=>{this._evict(),this._scheduleEvictorRun()},this._config.evictionRunIntervalMillis).unref())}_descheduleEvictorRun(){this._scheduledEviction&&clearTimeout(this._scheduledEviction),this._scheduledEviction=null}start(){this._draining!==!0&&this._started!==!0&&(this._started=!0,this._scheduleEvictorRun(),this._ensureMinimum())}acquire(e){if(this._started===!1&&this._config.autostart===!1&&this.start(),this._draining)return this._Promise.reject(new Error("pool is draining and cannot accept work"));if(this.spareResourceCapacity<1&&this._availableObjects.length<1&&this._config.maxWaitingClients!==void 0&&this._waitingClientsQueue.length>=this._config.maxWaitingClients)return this._Promise.reject(new Error("max waitingClients count exceeded"));const t=new ln(this._config.acquireTimeoutMillis,this._Promise);return this._waitingClientsQueue.enqueue(t,e),this._dispense(),t.promise}use(e,t){return this.acquire(t).then(s=>e(s).then(r=>(this.release(s),r),r=>{throw this.destroy(s),r}))}isBorrowedResource(e){return this._resourceLoans.has(e)}release(e){const t=this._resourceLoans.get(e);if(t===void 0)return this._Promise.reject(new Error("Resource not currently part of this pool"));this._resourceLoans.delete(e),t.resolve();const s=t.pooledResource;return s.deallocate(),this._addPooledResourceToAvailableObjects(s),this._dispense(),this._Promise.resolve()}destroy(e){const t=this._resourceLoans.get(e);if(t===void 0)return this._Promise.reject(new Error("Resource not currently part of this pool"));this._resourceLoans.delete(e),t.resolve();const s=t.pooledResource;return s.deallocate(),this._destroy(s),this._dispense(),this._Promise.resolve()}_addPooledResourceToAvailableObjects(e){e.idle(),this._config.fifo===!0?this._availableObjects.push(e):this._availableObjects.unshift(e)}drain(){return this._draining=!0,this.__allResourceRequestsSettled().then(()=>this.__allResourcesReturned()).then(()=>{this._descheduleEvictorRun()})}__allResourceRequestsSettled(){return this._waitingClientsQueue.length>0?K(this._waitingClientsQueue.tail.promise):this._Promise.resolve()}__allResourcesReturned(){const e=Array.from(this._resourceLoans.values()).map(t=>t.promise).map(K);return this._Promise.all(e)}clear(){const e=Array.from(this._factoryCreateOperations).map(K);return this._Promise.all(e).then(()=>{for(const s of this._availableObjects)this._destroy(s);const t=Array.from(this._factoryDestroyOperations).map(K);return K(this._Promise.all(t))})}ready(){return new this._Promise(e=>{const t=()=>{this.available>=this.min?e():setTimeout(t,100)};t()})}get _potentiallyAllocableResourceCount(){return this._availableObjects.length+this._testOnBorrowResources.size+this._testOnReturnResources.size+this._factoryCreateOperations.size}get _count(){return this._allObjects.size+this._factoryCreateOperations.size}get spareResourceCapacity(){return this._config.max-(this._allObjects.size+this._factoryCreateOperations.size)}get size(){return this._count}get available(){return this._availableObjects.length}get borrowed(){return this._resourceLoans.size}get pending(){return this._waitingClientsQueue.length}get max(){return this._config.max}get min(){return this._config.min}};var pn=dn;const gt=pn,Tt=Ft,Et=sn,vt=Wi;var _n={Pool:gt,Deque:Tt,PriorityQueue:Et,DefaultEvictor:vt,createPool:function(n,e){return new gt(vt,Tt,Et,n,e)}};const gn=mi(_n);gn.createPool({create:async()=>new MessageChannel,destroy:async n=>{n.port1.close(),n.port2.close()}},{min:3,max:3});function Tn(n,e){if((e==null||isNaN(e)||e<0)&&(e=0),e<1){let t=new MessageChannel;t.port1.onmessage=()=>{n()},t.port2.postMessage("")}else setTimeout(n,e)}const En=new MessageChannel,vn=[];En.port1.onmessage=()=>{vn.pop()()};let Rn=n=>e=>new Promise(t=>n(t,e));const yn=Rn(Tn),Jn=yn;console.log("selector");const es=(n,e=document)=>e.querySelector(n),ts=(n,e=document)=>[...e.querySelectorAll(n)];/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:Bt,setPrototypeOf:Rt,isFrozen:An,getPrototypeOf:Ln,getOwnPropertyDescriptor:zt}=Object;let{freeze:y,seal:w,create:Ht}=Object,{apply:je,construct:Be}=typeof Reflect<"u"&&Reflect;y||(y=function(e){return e});w||(w=function(e){return e});je||(je=function(e,t,s){return e.apply(t,s)});Be||(Be=function(e,t){return new e(...t)});const le=O(Array.prototype.forEach),yt=O(Array.prototype.pop),Z=O(Array.prototype.push),he=O(String.prototype.toLowerCase),Me=O(String.prototype.toString),bn=O(String.prototype.match),J=O(String.prototype.replace),On=O(String.prototype.indexOf),wn=O(String.prototype.trim),b=O(RegExp.prototype.test),ee=Dn(TypeError);function O(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return je(n,e,s)}}function Dn(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Be(n,t)}}function f(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:he;Rt&&Rt(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const l=t(r);l!==r&&(An(e)||(e[s]=l),r=l)}n[r]=!0}return n}function G(n){const e=Ht(null);for(const[t,s]of Bt(n))zt(n,t)!==void 0&&(e[t]=s);return e}function ue(n,e){for(;n!==null;){const s=zt(n,e);if(s){if(s.get)return O(s.get);if(typeof s.value=="function")return O(s.value)}n=Ln(n)}function t(s){return console.warn("fallback value for",s),null}return t}const At=y(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xe=y(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ke=y(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),In=y(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ue=y(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Sn=y(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Lt=y(["#text"]),bt=y(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Fe=y(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ot=y(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ce=y(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Nn=w(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Pn=w(/<%[\w\W]*|[\w\W]*%>/gm),Cn=w(/\${[\w\W]*}/gm),Mn=w(/^data-[\-\w.\u00B7-\uFFFF]/),xn=w(/^aria-[\-\w]+$/),Wt=w(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kn=w(/^(?:\w+script|data):/i),Un=w(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gt=w(/^html$/i);var wt=Object.freeze({__proto__:null,MUSTACHE_EXPR:Nn,ERB_EXPR:Pn,TMPLIT_EXPR:Cn,DATA_ATTR:Mn,ARIA_ATTR:xn,IS_ALLOWED_URI:Wt,IS_SCRIPT_OR_DATA:kn,ATTR_WHITESPACE:Un,DOCTYPE_NAME:Gt});const Fn=function(){return typeof window>"u"?null:window},jn=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const l="dompurify"+(s?"#"+s:"");try{return e.createPolicy(l,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function qt(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fn();const e=u=>qt(u);if(e.version="3.0.6",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:v,Element:N,NodeFilter:U,NamedNodeMap:pe=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:$t,DOMParser:Yt,trustedTypes:te}=n,ie=N.prototype,Vt=ue(ie,"cloneNode"),Qt=ue(ie,"nextSibling"),Xt=ue(ie,"childNodes"),_e=ue(ie,"parentNode");if(typeof c=="function"){const u=t.createElement("template");u.content&&u.content.ownerDocument&&(t=u.content.ownerDocument)}let R,Y="";const{implementation:ge,createNodeIterator:Kt,createDocumentFragment:Zt,getElementsByTagName:Jt}=t,{importNode:ei}=s;let D={};e.isSupported=typeof Bt=="function"&&typeof _e=="function"&&ge&&ge.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Te,ERB_EXPR:Ee,TMPLIT_EXPR:ve,DATA_ATTR:ti,ARIA_ATTR:ii,IS_SCRIPT_OR_DATA:ni,ATTR_WHITESPACE:We}=wt;let{IS_ALLOWED_URI:Ge}=wt,p=null;const qe=f({},[...At,...xe,...ke,...Ue,...Lt]);let _=null;const $e=f({},[...bt,...Fe,...Ot,...ce]);let d=Object.seal(Ht(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,Re=null,Ye=!0,ye=!0,Ve=!1,Qe=!0,F=!1,P=!1,Ae=!1,Le=!1,j=!1,ne=!1,se=!1,Xe=!0,Ke=!1;const si="user-content-";let be=!0,Q=!1,B={},z=null;const Ze=f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Je=null;const et=f({},["audio","video","img","source","image","track"]);let Oe=null;const tt=f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),re="http://www.w3.org/1998/Math/MathML",oe="http://www.w3.org/2000/svg",I="http://www.w3.org/1999/xhtml";let H=I,we=!1,De=null;const ri=f({},[re,oe,I],Me);let C=null;const oi=["application/xhtml+xml","text/html"],ai="text/html";let g=null,W=null;const li=t.createElement("form"),it=function(i){return i instanceof RegExp||i instanceof Function},Ie=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(W&&W===i)){if((!i||typeof i!="object")&&(i={}),i=G(i),C=oi.indexOf(i.PARSER_MEDIA_TYPE)===-1?C=ai:C=i.PARSER_MEDIA_TYPE,g=C==="application/xhtml+xml"?Me:he,p="ALLOWED_TAGS"in i?f({},i.ALLOWED_TAGS,g):qe,_="ALLOWED_ATTR"in i?f({},i.ALLOWED_ATTR,g):$e,De="ALLOWED_NAMESPACES"in i?f({},i.ALLOWED_NAMESPACES,Me):ri,Oe="ADD_URI_SAFE_ATTR"in i?f(G(tt),i.ADD_URI_SAFE_ATTR,g):tt,Je="ADD_DATA_URI_TAGS"in i?f(G(et),i.ADD_DATA_URI_TAGS,g):et,z="FORBID_CONTENTS"in i?f({},i.FORBID_CONTENTS,g):Ze,V="FORBID_TAGS"in i?f({},i.FORBID_TAGS,g):{},Re="FORBID_ATTR"in i?f({},i.FORBID_ATTR,g):{},B="USE_PROFILES"in i?i.USE_PROFILES:!1,Ye=i.ALLOW_ARIA_ATTR!==!1,ye=i.ALLOW_DATA_ATTR!==!1,Ve=i.ALLOW_UNKNOWN_PROTOCOLS||!1,Qe=i.ALLOW_SELF_CLOSE_IN_ATTR!==!1,F=i.SAFE_FOR_TEMPLATES||!1,P=i.WHOLE_DOCUMENT||!1,j=i.RETURN_DOM||!1,ne=i.RETURN_DOM_FRAGMENT||!1,se=i.RETURN_TRUSTED_TYPE||!1,Le=i.FORCE_BODY||!1,Xe=i.SANITIZE_DOM!==!1,Ke=i.SANITIZE_NAMED_PROPS||!1,be=i.KEEP_CONTENT!==!1,Q=i.IN_PLACE||!1,Ge=i.ALLOWED_URI_REGEXP||Wt,H=i.NAMESPACE||I,d=i.CUSTOM_ELEMENT_HANDLING||{},i.CUSTOM_ELEMENT_HANDLING&&it(i.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(d.tagNameCheck=i.CUSTOM_ELEMENT_HANDLING.tagNameCheck),i.CUSTOM_ELEMENT_HANDLING&&it(i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(d.attributeNameCheck=i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),i.CUSTOM_ELEMENT_HANDLING&&typeof i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(d.allowCustomizedBuiltInElements=i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),F&&(ye=!1),ne&&(j=!0),B&&(p=f({},[...Lt]),_=[],B.html===!0&&(f(p,At),f(_,bt)),B.svg===!0&&(f(p,xe),f(_,Fe),f(_,ce)),B.svgFilters===!0&&(f(p,ke),f(_,Fe),f(_,ce)),B.mathMl===!0&&(f(p,Ue),f(_,Ot),f(_,ce))),i.ADD_TAGS&&(p===qe&&(p=G(p)),f(p,i.ADD_TAGS,g)),i.ADD_ATTR&&(_===$e&&(_=G(_)),f(_,i.ADD_ATTR,g)),i.ADD_URI_SAFE_ATTR&&f(Oe,i.ADD_URI_SAFE_ATTR,g),i.FORBID_CONTENTS&&(z===Ze&&(z=G(z)),f(z,i.FORBID_CONTENTS,g)),be&&(p["#text"]=!0),P&&f(p,["html","head","body"]),p.table&&(f(p,["tbody"]),delete V.tbody),i.TRUSTED_TYPES_POLICY){if(typeof i.TRUSTED_TYPES_POLICY.createHTML!="function")throw ee('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof i.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ee('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=i.TRUSTED_TYPES_POLICY,Y=R.createHTML("")}else R===void 0&&(R=jn(te,r)),R!==null&&typeof Y=="string"&&(Y=R.createHTML(""));y&&y(i),W=i}},nt=f({},["mi","mo","mn","ms","mtext"]),st=f({},["foreignobject","desc","title","annotation-xml"]),ui=f({},["title","style","font","a","script"]),ae=f({},xe);f(ae,ke),f(ae,In);const Se=f({},Ue);f(Se,Sn);const ci=function(i){let o=_e(i);(!o||!o.tagName)&&(o={namespaceURI:H,tagName:"template"});const a=he(i.tagName),m=he(o.tagName);return De[i.namespaceURI]?i.namespaceURI===oe?o.namespaceURI===I?a==="svg":o.namespaceURI===re?a==="svg"&&(m==="annotation-xml"||nt[m]):!!ae[a]:i.namespaceURI===re?o.namespaceURI===I?a==="math":o.namespaceURI===oe?a==="math"&&st[m]:!!Se[a]:i.namespaceURI===I?o.namespaceURI===oe&&!st[m]||o.namespaceURI===re&&!nt[m]?!1:!Se[a]&&(ui[a]||!ae[a]):!!(C==="application/xhtml+xml"&&De[i.namespaceURI]):!1},M=function(i){Z(e.removed,{element:i});try{i.parentNode.removeChild(i)}catch{i.remove()}},Ne=function(i,o){try{Z(e.removed,{attribute:o.getAttributeNode(i),from:o})}catch{Z(e.removed,{attribute:null,from:o})}if(o.removeAttribute(i),i==="is"&&!_[i])if(j||ne)try{M(o)}catch{}else try{o.setAttribute(i,"")}catch{}},rt=function(i){let o=null,a=null;if(Le)i="<remove></remove>"+i;else{const E=bn(i,/^[\r\n\t ]+/);a=E&&E[0]}C==="application/xhtml+xml"&&H===I&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");const m=R?R.createHTML(i):i;if(H===I)try{o=new Yt().parseFromString(m,C)}catch{}if(!o||!o.documentElement){o=ge.createDocument(H,"template",null);try{o.documentElement.innerHTML=we?Y:m}catch{}}const T=o.body||o.documentElement;return i&&a&&T.insertBefore(t.createTextNode(a),T.childNodes[0]||null),H===I?Jt.call(o,P?"html":"body")[0]:P?o.documentElement:T},ot=function(i){return Kt.call(i.ownerDocument||i,i,U.SHOW_ELEMENT|U.SHOW_COMMENT|U.SHOW_TEXT,null)},fi=function(i){return i instanceof $t&&(typeof i.nodeName!="string"||typeof i.textContent!="string"||typeof i.removeChild!="function"||!(i.attributes instanceof pe)||typeof i.removeAttribute!="function"||typeof i.setAttribute!="function"||typeof i.namespaceURI!="string"||typeof i.insertBefore!="function"||typeof i.hasChildNodes!="function")},at=function(i){return typeof v=="function"&&i instanceof v},S=function(i,o,a){D[i]&&le(D[i],m=>{m.call(e,o,a,W)})},lt=function(i){let o=null;if(S("beforeSanitizeElements",i,null),fi(i))return M(i),!0;const a=g(i.nodeName);if(S("uponSanitizeElement",i,{tagName:a,allowedTags:p}),i.hasChildNodes()&&!at(i.firstElementChild)&&b(/<[/\w]/g,i.innerHTML)&&b(/<[/\w]/g,i.textContent))return M(i),!0;if(!p[a]||V[a]){if(!V[a]&&ct(a)&&(d.tagNameCheck instanceof RegExp&&b(d.tagNameCheck,a)||d.tagNameCheck instanceof Function&&d.tagNameCheck(a)))return!1;if(be&&!z[a]){const m=_e(i)||i.parentNode,T=Xt(i)||i.childNodes;if(T&&m){const E=T.length;for(let A=E-1;A>=0;--A)m.insertBefore(Vt(T[A],!0),Qt(i))}}return M(i),!0}return i instanceof N&&!ci(i)||(a==="noscript"||a==="noembed"||a==="noframes")&&b(/<\/no(script|embed|frames)/i,i.innerHTML)?(M(i),!0):(F&&i.nodeType===3&&(o=i.textContent,le([Te,Ee,ve],m=>{o=J(o,m," ")}),i.textContent!==o&&(Z(e.removed,{element:i.cloneNode()}),i.textContent=o)),S("afterSanitizeElements",i,null),!1)},ut=function(i,o,a){if(Xe&&(o==="id"||o==="name")&&(a in t||a in li))return!1;if(!(ye&&!Re[o]&&b(ti,o))){if(!(Ye&&b(ii,o))){if(!_[o]||Re[o]){if(!(ct(i)&&(d.tagNameCheck instanceof RegExp&&b(d.tagNameCheck,i)||d.tagNameCheck instanceof Function&&d.tagNameCheck(i))&&(d.attributeNameCheck instanceof RegExp&&b(d.attributeNameCheck,o)||d.attributeNameCheck instanceof Function&&d.attributeNameCheck(o))||o==="is"&&d.allowCustomizedBuiltInElements&&(d.tagNameCheck instanceof RegExp&&b(d.tagNameCheck,a)||d.tagNameCheck instanceof Function&&d.tagNameCheck(a))))return!1}else if(!Oe[o]){if(!b(Ge,J(a,We,""))){if(!((o==="src"||o==="xlink:href"||o==="href")&&i!=="script"&&On(a,"data:")===0&&Je[i])){if(!(Ve&&!b(ni,J(a,We,"")))){if(a)return!1}}}}}}return!0},ct=function(i){return i.indexOf("-")>0},ft=function(i){S("beforeSanitizeAttributes",i,null);const{attributes:o}=i;if(!o)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_};let m=o.length;for(;m--;){const T=o[m],{name:E,namespaceURI:A,value:x}=T,X=g(E);let L=E==="value"?x:wn(x);if(a.attrName=X,a.attrValue=L,a.keepAttr=!0,a.forceKeepAttr=void 0,S("uponSanitizeAttribute",i,a),L=a.attrValue,a.forceKeepAttr||(Ne(E,i),!a.keepAttr))continue;if(!Qe&&b(/\/>/i,L)){Ne(E,i);continue}F&&le([Te,Ee,ve],mt=>{L=J(L,mt," ")});const ht=g(i.nodeName);if(ut(ht,X,L)){if(Ke&&(X==="id"||X==="name")&&(Ne(E,i),L=si+L),R&&typeof te=="object"&&typeof te.getAttributeType=="function"&&!A)switch(te.getAttributeType(ht,X)){case"TrustedHTML":{L=R.createHTML(L);break}case"TrustedScriptURL":{L=R.createScriptURL(L);break}}try{A?i.setAttributeNS(A,E,L):i.setAttribute(E,L),yt(e.removed)}catch{}}}S("afterSanitizeAttributes",i,null)},hi=function u(i){let o=null;const a=ot(i);for(S("beforeSanitizeShadowDOM",i,null);o=a.nextNode();)S("uponSanitizeShadowNode",o,null),!lt(o)&&(o.content instanceof l&&u(o.content),ft(o));S("afterSanitizeShadowDOM",i,null)};return e.sanitize=function(u){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=null,a=null,m=null,T=null;if(we=!u,we&&(u="<!-->"),typeof u!="string"&&!at(u))if(typeof u.toString=="function"){if(u=u.toString(),typeof u!="string")throw ee("dirty is not a string, aborting")}else throw ee("toString is not a function");if(!e.isSupported)return u;if(Ae||Ie(i),e.removed=[],typeof u=="string"&&(Q=!1),Q){if(u.nodeName){const x=g(u.nodeName);if(!p[x]||V[x])throw ee("root node is forbidden and cannot be sanitized in-place")}}else if(u instanceof v)o=rt("<!---->"),a=o.ownerDocument.importNode(u,!0),a.nodeType===1&&a.nodeName==="BODY"||a.nodeName==="HTML"?o=a:o.appendChild(a);else{if(!j&&!F&&!P&&u.indexOf("<")===-1)return R&&se?R.createHTML(u):u;if(o=rt(u),!o)return j?null:se?Y:""}o&&Le&&M(o.firstChild);const E=ot(Q?u:o);for(;m=E.nextNode();)lt(m)||(m.content instanceof l&&hi(m.content),ft(m));if(Q)return u;if(j){if(ne)for(T=Zt.call(o.ownerDocument);o.firstChild;)T.appendChild(o.firstChild);else T=o;return(_.shadowroot||_.shadowrootmode)&&(T=ei.call(s,T,!0)),T}let A=P?o.outerHTML:o.innerHTML;return P&&p["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&b(Gt,o.ownerDocument.doctype.name)&&(A="<!DOCTYPE "+o.ownerDocument.doctype.name+`>
`+A),F&&le([Te,Ee,ve],x=>{A=J(A,x," ")}),R&&se?R.createHTML(A):A},e.setConfig=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie(u),Ae=!0},e.clearConfig=function(){W=null,Ae=!1},e.isValidAttribute=function(u,i,o){W||Ie({});const a=g(u),m=g(i);return ut(a,m,o)},e.addHook=function(u,i){typeof i=="function"&&(D[u]=D[u]||[],Z(D[u],i))},e.removeHook=function(u){if(D[u])return yt(D[u])},e.removeHooks=function(u){D[u]&&(D[u]=[])},e.removeAllHooks=function(){D={}},e}var is=qt();export{es as $,ts as a,Bn as c,mi as g,is as p,Jn as s};
