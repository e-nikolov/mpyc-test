import"./style-MBsm7SJM.js";import{g as getDefaultExportFromCjs,p as purify,a as getAugmentedNamespace,c as commonjsGlobal}from"./purify.es-WdA8GcVy.js";import"./encode-GRFFunDQ.js";function _mergeNamespaces(s,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in s)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var define_BUILD_INFO_default$1={version:"0.6.0",dirty:!1,deployment:"test",timestamp:1701786658490,time:"5/12/2023, 15:30:58",revision:"cb99125"};document.title=`MPyC Web (${define_BUILD_INFO_default$1.deployment})`;const regMobileAll=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,regMobileFour=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,isMobileFn=s=>regMobileAll.test(s)||regMobileFour.test(s.substr(0,4)),isNode=typeof navigator>"u",userAgent=isNode?"node":navigator.userAgent,isMobile=isMobileFn(userAgent),callSoonChan=new MessageChannel,callSoonCallbacks=[];callSoonChan.port1.onmessage=()=>{callSoonCallbacks.pop()()};const anyMap=new WeakMap,eventsMap=new WeakMap,producersMap=new WeakMap;var define_globalThis_process_env_default={};const anyProducer=Symbol("anyProducer"),resolvedPromise=Promise.resolve(),listenerAdded=Symbol("listenerAdded"),listenerRemoved=Symbol("listenerRemoved");let canEmitMetaEvents=!1,isGlobalDebugEnabled=!1;function assertEventName(s){if(typeof s!="string"&&typeof s!="symbol"&&typeof s!="number")throw new TypeError("`eventName` must be a string, symbol, or number")}function assertListener(s){if(typeof s!="function")throw new TypeError("listener must be a function")}function getListeners(s,e){const r=eventsMap.get(s);if(r.has(e))return r.get(e)}function getEventProducers(s,e){const r=typeof e=="string"||typeof e=="symbol"||typeof e=="number"?e:anyProducer,n=producersMap.get(s);if(n.has(r))return n.get(r)}function enqueueProducers(s,e,r){const n=producersMap.get(s);if(n.has(e))for(const o of n.get(e))o.enqueue(r);if(n.has(anyProducer)){const o=Promise.all([e,r]);for(const a of n.get(anyProducer))a.enqueue(o)}}function iterator(s,e){e=Array.isArray(e)?e:[e];let r=!1,n=()=>{},o=[];const a={enqueue(c){o.push(c),n()},finish(){r=!0,n()}};for(const c of e){let l=getEventProducers(s,c);l||(l=new Set,producersMap.get(s).set(c,l)),l.add(a)}return{async next(){return o?o.length===0?r?(o=void 0,this.next()):(await new Promise(c=>{n=c}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(c){o=void 0;for(const l of e){const h=getEventProducers(s,l);h&&(h.delete(a),h.size===0&&producersMap.get(s).delete(l))}return n(),arguments.length>0?{done:!0,value:await c}:{done:!0}},[Symbol.asyncIterator](){return this}}}function defaultMethodNamesOrAssert(s){if(s===void 0)return allEmitteryMethods;if(!Array.isArray(s))throw new TypeError("`methodNames` must be an array of strings");for(const e of s)if(!allEmitteryMethods.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return s}const isMetaEvent=s=>s===listenerAdded||s===listenerRemoved;function emitMetaEvent(s,e,r){if(isMetaEvent(e))try{canEmitMetaEvents=!0,s.emit(e,r)}finally{canEmitMetaEvents=!1}}class Emittery{static mixin(e,r){return r=defaultMethodNamesOrAssert(r),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const c of r)if(n.prototype[c]!==void 0)throw new Error(`The property \`${c}\` already exists on \`target\``);function o(){return Object.defineProperty(this,e,{enumerable:!1,value:new Emittery}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:o});const a=c=>function(...l){return this[e][c](...l)};for(const c of r)Object.defineProperty(n.prototype,c,{enumerable:!1,value:a(c)});return n}}static get isDebugEnabled(){if(typeof define_globalThis_process_env_default!="object")return isGlobalDebugEnabled;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||isGlobalDebugEnabled}static set isDebugEnabled(e){isGlobalDebugEnabled=e}constructor(e={}){anyMap.set(this,new Set),eventsMap.set(this,new Map),producersMap.set(this,new Map),producersMap.get(this).set(anyProducer,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(r,n,o,a)=>{try{a=JSON.stringify(a)}catch{a=`Object with the following keys failed to stringify: ${Object.keys(a).join(",")}`}(typeof o=="symbol"||typeof o=="number")&&(o=o.toString());const c=new Date,l=`${c.getHours()}:${c.getMinutes()}:${c.getSeconds()}.${c.getMilliseconds()}`;console.log(`[${l}][emittery:${r}][${n}] Event Name: ${o}
	data: ${a}`)})}logIfDebugEnabled(e,r,n){(Emittery.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,r,n)}on(e,r){assertListener(r),e=Array.isArray(e)?e:[e];for(const n of e){assertEventName(n);let o=getListeners(this,n);o||(o=new Set,eventsMap.get(this).set(n,o)),o.add(r),this.logIfDebugEnabled("subscribe",n,void 0),isMetaEvent(n)||emitMetaEvent(this,listenerAdded,{eventName:n,listener:r})}return this.off.bind(this,e,r)}off(e,r){assertListener(r),e=Array.isArray(e)?e:[e];for(const n of e){assertEventName(n);const o=getListeners(this,n);o&&(o.delete(r),o.size===0&&eventsMap.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),isMetaEvent(n)||emitMetaEvent(this,listenerRemoved,{eventName:n,listener:r})}}once(e){let r;const n=new Promise(o=>{r=this.on(e,a=>{r(),o(a)})});return n.off=r,n}events(e){e=Array.isArray(e)?e:[e];for(const r of e)assertEventName(r);return iterator(this,e)}async emit(e,r){if(assertEventName(e),isMetaEvent(e)&&!canEmitMetaEvents)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,r),enqueueProducers(this,e,r);const n=getListeners(this,e)??new Set,o=anyMap.get(this),a=[...n],c=isMetaEvent(e)?[]:[...o];await resolvedPromise,await Promise.all([...a.map(async l=>{if(n.has(l))return l(r)}),...c.map(async l=>{if(o.has(l))return l(e,r)})])}async emitSerial(e,r){if(assertEventName(e),isMetaEvent(e)&&!canEmitMetaEvents)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,r);const n=getListeners(this,e)??new Set,o=anyMap.get(this),a=[...n],c=[...o];await resolvedPromise;for(const l of a)n.has(l)&&await l(r);for(const l of c)o.has(l)&&await l(e,r)}onAny(e){return assertListener(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),anyMap.get(this).add(e),emitMetaEvent(this,listenerAdded,{listener:e}),this.offAny.bind(this,e)}anyEvent(){return iterator(this)}offAny(e){assertListener(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),emitMetaEvent(this,listenerRemoved,{listener:e}),anyMap.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const r of e)if(this.logIfDebugEnabled("clear",r,void 0),typeof r=="string"||typeof r=="symbol"||typeof r=="number"){const n=getListeners(this,r);n&&n.clear();const o=getEventProducers(this,r);if(o){for(const a of o)a.finish();o.clear()}}else{anyMap.get(this).clear();for(const[n,o]of eventsMap.get(this).entries())o.clear(),eventsMap.get(this).delete(n);for(const[n,o]of producersMap.get(this).entries()){for(const a of o)a.finish();o.clear(),producersMap.get(this).delete(n)}}}listenerCount(e){e=Array.isArray(e)?e:[e];let r=0;for(const n of e){if(typeof n=="string"){r+=anyMap.get(this).size+(getListeners(this,n)?.size??0)+(getEventProducers(this,n)?.size??0)+(getEventProducers(this)?.size??0);continue}typeof n<"u"&&assertEventName(n),r+=anyMap.get(this).size;for(const o of eventsMap.get(this).values())r+=o.size;for(const o of producersMap.get(this).values())r+=o.size}return r}bindMethods(e,r){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");r=defaultMethodNamesOrAssert(r);for(const n of r){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const allEmitteryMethods=Object.getOwnPropertyNames(Emittery.prototype).filter(s=>s!=="constructor");Object.defineProperty(Emittery,"listenerAdded",{value:listenerAdded,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Emittery,"listenerRemoved",{value:listenerRemoved,writable:!1,enumerable:!0,configurable:!1});const wrapEvent=(s,e,r)=>{s.on(r,n=>{e.emit(`runtime:${r}`,n)})};class MPCManager extends Emittery{transport;peerIDToPID=new Map;pidToPeerID=new Map;peersReady=new Map;runtime;running=!1;runtimeFactory;transportFactory;env={};constructor(e,r,n={}){super(),this.transport=this.newTransport(e),this.runtime=this.newRuntime(r),this.env=n}newTransport(e){this.transportFactory=e,this.peerIDToPID=new Map,this.peersReady=new Map,this.pidToPeerID=new Map;const r=e();return this.addTransportEvents(r),r}newRuntime(e=this.runtimeFactory){this.runtimeFactory=e;const r=e();return this.addRuntimeEvents(r),r}addTransportEvents(e){e.on("ready",r=>{this.emit("transport:ready",r)}),e.on("closed",()=>{this.emit("transport:closed")}),e.on("error",r=>{this.emit("transport:error",r)}),e.on("conn:ready",r=>{this.emit("transport:conn:ready",r)}),e.on("conn:disconnected",r=>{this.emit("transport:conn:disconnected",r)}),e.on("conn:error",({peerID:r,err:n})=>{this.emit("transport:conn:error",{peerID:r,err:n})}),e.on("conn:data",({peerID:r,data:n})=>{switch(n.type){case"mpyc:ready":this.processReadyMessage(r,n.payload);break;case"mpyc:runtime":this.processRuntimeMessage(r,n.payload);break;default:this.emit("transport:conn:data:custom",{peerID:r,data:n})}})}addRuntimeEvents(e){["exec:init","exec:done","error","messageerror","display","display:error","display:stats"].forEach(r=>{wrapEvent(e,this,r)}),e.on("ready",()=>{this.emit("runtime:ready")}),e.on("send",({type:r,pid:n,payload:o})=>{this.sendMPCMessage(r,n,o)})}runMPC(e,r,n=!0){this.running=!0;let o=this.transport.getPeers(!0),a=o.findIndex(c=>c===this.transport.id());for(let c=0;c<o.length;c++)this.peerIDToPID.set(o[c],c),this.pidToPeerID.set(c,o[c]);this.peersReady.set(this.transport.id(),!0),this.runtime.run_mpc({pid:a,filename:r,parties:o,is_async:n,no_async:!n,code:e})}reset(e=this.transportFactory,r=this.runtimeFactory){this.resetTransport(e),this.resetRuntime(r)}resetTransport(e=this.transportFactory){console.log("resetting transport"),this.transport.destroy(),this.transport=this.newTransport(e)}resetRuntime(e=this.runtimeFactory){console.log("resetting runtime"),this.runtime.destroy(),this.runtime=this.newRuntime(e),this.running=!1}sendMPCMessage(e,r,n){let o=this.pidToPeerID.get(r);this.transport.send(o,`mpyc:${e}`,n)}processReadyMessage=(e,r)=>{if(this.peersReady.set(e,!0),!this.running){console.log("ignoring mpc ready message because we are not running");return}let n=this.peerIDToPID.get(e);this.runtime.processReadyMessage(n,r)};processRuntimeMessage=(e,r)=>{if(!this.running){console.log("ignoring mpc runtime message because we are not running");return}let n=this.peerIDToPID.get(e);this.runtime.processRuntimeMessage(n,r)}}const VOID=-1,PRIMITIVE=0,ARRAY$1=1,OBJECT$1=2,DATE=3,REGEXP=4,MAP=5,SET$2=6,ERROR=7,BIGINT$1=8,env$2=typeof self=="object"?self:globalThis,deserializer=(s,e)=>{const r=(o,a)=>(s.set(a,o),o),n=o=>{if(s.has(o))return s.get(o);const[a,c]=e[o];switch(a){case PRIMITIVE:case VOID:return r(c,o);case ARRAY$1:{const l=r([],o);for(const h of c)l.push(n(h));return l}case OBJECT$1:{const l=r({},o);for(const[h,d]of c)l[n(h)]=n(d);return l}case DATE:return r(new Date(c),o);case REGEXP:{const{source:l,flags:h}=c;return r(new RegExp(l,h),o)}case MAP:{const l=r(new Map,o);for(const[h,d]of c)l.set(n(h),n(d));return l}case SET$2:{const l=r(new Set,o);for(const h of c)l.add(n(h));return l}case ERROR:{const{name:l,message:h}=c;return r(new env$2[l](h),o)}case BIGINT$1:return r(BigInt(c),o);case"BigInt":return r(Object(BigInt(c)),o)}return r(new env$2[a](c),o)};return n},deserialize=s=>deserializer(new Map,s)(0),EMPTY="",{toString}={},{keys:keys$1}=Object,typeOf=s=>{const e=typeof s;if(e!=="object"||!s)return[PRIMITIVE,e];const r=toString.call(s).slice(8,-1);switch(r){case"Array":return[ARRAY$1,EMPTY];case"Object":return[OBJECT$1,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET$2,EMPTY]}return r.includes("Array")?[ARRAY$1,r]:r.includes("Error")?[ERROR,r]:[OBJECT$1,r]},shouldSkip=([s,e])=>s===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(s,e,r,n)=>{const o=(c,l)=>{const h=n.push(c)-1;return r.set(l,h),h},a=c=>{if(r.has(c))return r.get(c);let[l,h]=typeOf(c);switch(l){case PRIMITIVE:{let f=c;switch(h){case"bigint":l=BIGINT$1,f=c.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+h);f=null;break;case"undefined":return o([VOID],c)}return o([l,f],c)}case ARRAY$1:{if(h)return o([h,[...c]],c);const f=[],g=o([l,f],c);for(const v of c)f.push(a(v));return g}case OBJECT$1:{if(h)switch(h){case"BigInt":return o([h,c.toString()],c);case"Boolean":case"Number":case"String":return o([h,c.valueOf()],c)}if(e&&"toJSON"in c)return a(c.toJSON());const f=[],g=o([l,f],c);for(const v of keys$1(c))(s||!shouldSkip(typeOf(c[v])))&&f.push([a(v),a(c[v])]);return g}case DATE:return o([l,c.toISOString()],c);case REGEXP:{const{source:f,flags:g}=c;return o([l,{source:f,flags:g}],c)}case MAP:{const f=[],g=o([l,f],c);for(const[v,S]of c)(s||!(shouldSkip(typeOf(v))||shouldSkip(typeOf(S))))&&f.push([a(v),a(S)]);return g}case SET$2:{const f=[],g=o([l,f],c);for(const v of c)(s||!shouldSkip(typeOf(v)))&&f.push(a(v));return g}}const{message:d}=c;return o([l,{name:h,message:d}],c)};return a},serialize=(s,{json:e,lossy:r}={})=>{const n=[];return serializer(!(e||r),!!e,new Map,n)(s),n};/*! (c) Andrea Giammarchi - ISC */const{parse:$parse,stringify:$stringify}=JSON,options={json:!0,lossy:!0},parse$1=s=>deserialize($parse(s)),stringify=s=>$stringify(serialize(s,options)),JSON$1=Object.freeze(Object.defineProperty({__proto__:null,parse:parse$1,stringify},Symbol.toStringTag,{value:"Module"})),CHANNEL="4ee55850-17cb-4a85-a071-03fe2aa108bd",MAIN="M"+CHANNEL,THREAD="T"+CHANNEL,ARRAY="array",BIGINT="bigint",BOOLEAN="boolean",FUNCTION="function",NULL="null",NUMBER="number",OBJECT="object",STRING="string",SYMBOL="symbol",UNDEFINED="undefined",APPLY="apply",CONSTRUCT="construct",DEFINE_PROPERTY="defineProperty",DELETE_PROPERTY="deleteProperty",GET="get",GET_OWN_PROPERTY_DESCRIPTOR="getOwnPropertyDescriptor",GET_PROTOTYPE_OF="getPrototypeOf",HAS="has",IS_EXTENSIBLE="isExtensible",OWN_KEYS="ownKeys",PREVENT_EXTENSION="preventExtensions",SET$1="set",SET_PROTOTYPE_OF="setPrototypeOf",DELETE="delete",waitAsyncFallback=s=>({value:new Promise(e=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=e,r.postMessage(s)})});/*! (c) Andrea Giammarchi - ISC */const{Int32Array:Int32Array$1,Map:Map$1,SharedArrayBuffer,Uint16Array:Uint16Array$1}=globalThis,{BYTES_PER_ELEMENT:I32_BYTES}=Int32Array$1,{BYTES_PER_ELEMENT:UI16_BYTES}=Uint16Array$1,{isArray:isArray$2}=Array,{notify,wait,waitAsync}=Atomics,waitInterrupt=(s,e,r)=>{for(;wait(s,0,0,e)==="timed-out";)r()},buffers=new WeakSet,context=new WeakMap,syncResult={value:{then:s=>s()}};let uid=0;const coincident$1=(s,{parse:e=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:o}=JSON)=>{if(!context.has(s)){const a=(g,...v)=>s.postMessage({[CHANNEL]:v},{transfer:g}),c=typeof o===FUNCTION?o:o?.handler,l=o?.delay||42,h=new TextDecoder("utf-16"),d=(g,v)=>g?(waitAsync||waitAsyncFallback)(v,0):(c?waitInterrupt(v,l,c):wait(v,0),syncResult);let f=!1;context.set(s,new Proxy(new Map$1,{[HAS]:(g,v)=>typeof v=="string"&&!v.startsWith("_"),[GET]:(g,v)=>v==="then"?null:(...S)=>{const A=uid++;let w=new Int32Array$1(new SharedArrayBuffer(I32_BYTES*2)),m=[];buffers.has(S.at(-1)||m)&&buffers.delete(m=S.pop()),a(m,A,w,v,n?S.map(n):S);const b=s!==globalThis;let x=0;return f&&b&&(x=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${v}(...args) is awaited`)),d(b,w).value.then(()=>{clearTimeout(x);const y=w[1];if(!y)return;const O=UI16_BYTES*y;return w=new Int32Array$1(new SharedArrayBuffer(O+O%I32_BYTES)),a([],A,w),d(b,w).value.then(()=>e(h.decode(new Uint16Array$1(w.buffer).slice(0,y))))})},[SET$1](g,v,S){const A=typeof S;if(A!==FUNCTION)throw new Error(`Unable to assign ${v} as ${A}`);if(!g.size){const w=new Map$1;s.addEventListener("message",async m=>{const b=m.data?.[CHANNEL];if(isArray$2(b)){m.stopImmediatePropagation();const[x,y,...O]=b;let k;if(O.length){const[P,L]=O;if(g.has(P)){f=!0;try{const M=await g.get(P)(...L);if(M!==void 0){const B=r(n?n(M):M);w.set(x,B),y[1]=B.length}}catch(M){k=M}finally{f=!1}}else k=new Error(`Unsupported action: ${P}`);y[0]=1}else{const P=w.get(x);w.delete(x);for(let L=new Uint16Array$1(y.buffer),M=0;M<P.length;M++)L[M]=P.charCodeAt(M)}if(notify(y,0),k)throw k}})}return!!g.set(v,S)}}))}return context.get(s)};coincident$1.transfer=(...s)=>(buffers.add(s),s);const{isArray:isArray$1}=Array,invoke=s=>s(),reviver=(s,e)=>e,obj=(s,e)=>({t:s,v:e}),bound=s=>Context.bind(s),unbound=s=>typeof s===FUNCTION?invoke(s):s;function Context(){return this}const target=(s,e)=>s===ARRAY?[e]:obj(s,e),unwrap=(s,e=reviver)=>{let r=typeof s,n=s;return r===OBJECT&&(isArray$1(s)?(r=ARRAY,n=s.at(0)):{t:r,v:n}=s),e(r,n)},resolver=(s,e)=>s===FUNCTION?e:target(s,e),wrap=(s,e=resolver)=>{const r=s===null?NULL:typeof s;return e(r===OBJECT&&isArray$1(s)?ARRAY:r,s)},registry$2=new FinalizationRegistry(([s,e,r])=>{r&&console.debug(`Held value ${String(e)} not relevant anymore`),s(e)}),handler=Object.create(null),create$3=(s,e,{debug:r,return:n,token:o=s}=handler)=>{const a=n||new Proxy(s,handler),c=[a,[e,s,!!r]];return o!==!1&&c.push(o),registry$2.register(...c),a},{defineProperty:defineProperty$1,deleteProperty,getOwnPropertyDescriptor,getPrototypeOf,isExtensible,ownKeys,preventExtensions,set,setPrototypeOf}=Reflect,{assign:assign$1,create:create$2}=Object,TypedArray=getPrototypeOf(Int8Array),augment=(s,e)=>{const{get:r,set:n,value:o}=s;return r&&(s.get=e(r)),n&&(s.set=e(n)),o&&(s.value=e(o)),s},asEntry=s=>e=>wrap(e,(r,n)=>{switch(r){case NULL:return target(NULL,n);case OBJECT:if(n===globalThis)return target(r,null);case ARRAY:case FUNCTION:return s(r,n);case BOOLEAN:case NUMBER:case STRING:case UNDEFINED:case BIGINT:return target(r,n);case SYMBOL:if(symbols$1.has(n))return target(r,symbols$1.get(n))}throw new Error(`Unable to handle this ${r} type`)}),symbols$1=new Map(ownKeys(Symbol).filter(s=>typeof Symbol[s]===SYMBOL).map(s=>[Symbol[s],s])),symbol=s=>{for(const[e,r]of symbols$1)if(r===s)return e},transform=s=>s,main$3=(s,e)=>{const r=e&&new WeakMap;if(e){const{addEventListener:o}=EventTarget.prototype;defineProperty$1(EventTarget.prototype,"addEventListener",{value(a,c,...l){return l.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(a,[].concat(l[0].invoke)),delete l[0].invoke),o.call(this,a,c,...l)}})}const n=e&&(o=>{const{currentTarget:a,target:c,type:l}=o;for(const h of r.get(a||c)?.get(l)||[])o[h]()});return function(o,a,c,...l){let h=0,d=this?.transform||transform;const f=new Map,g=new Map,{[c]:v}=o,S=l.length?assign$1(create$2(globalThis),...l):globalThis,A=asEntry((y,O)=>{if(!f.has(O)){let k;for(;g.has(k=h++););f.set(O,k),g.set(k,y===FUNCTION?O:d(O))}return target(y,f.get(O))}),w=y=>{v(DELETE,target(STRING,y))},m=(y,O)=>{switch(y){case OBJECT:if(O==null)return S;case ARRAY:if(typeof O===NUMBER)return g.get(O);if(!(O instanceof TypedArray))for(const k in O)O[k]=b(O[k]);return O;case FUNCTION:if(typeof O===STRING){if(!g.has(O)){const k=function(...P){return e&&P.at(0)instanceof Event&&n(...P),v(APPLY,target(FUNCTION,O),A(this),P.map(A))};return g.set(O,new WeakRef(k)),create$3(O,w,{return:k,token:!1})}return g.get(O).deref()}return g.get(O);case SYMBOL:return symbol(O)}return O},b=y=>unwrap(y,m),x={[APPLY]:(y,O,k)=>A(y.apply(O,k)),[CONSTRUCT]:(y,O)=>A(new y(...O)),[DEFINE_PROPERTY]:(y,O,k)=>A(defineProperty$1(y,O,k)),[DELETE_PROPERTY]:(y,O)=>A(deleteProperty(y,O)),[GET_PROTOTYPE_OF]:y=>A(getPrototypeOf(y)),[GET]:(y,O)=>A(y[O]),[GET_OWN_PROPERTY_DESCRIPTOR]:(y,O)=>{const k=getOwnPropertyDescriptor(y,O);return k?target(OBJECT,augment(k,A)):target(UNDEFINED,k)},[HAS]:(y,O)=>A(O in y),[IS_EXTENSIBLE]:y=>A(isExtensible(y)),[OWN_KEYS]:y=>target(ARRAY,ownKeys(y).map(A)),[PREVENT_EXTENSION]:y=>A(preventExtensions(y)),[SET$1]:(y,O,k)=>A(set(y,O,k)),[SET_PROTOTYPE_OF]:(y,O)=>A(setPrototypeOf(y,O)),[DELETE](y){f.delete(g.get(y)),g.delete(y)}};return o[a]=(y,O,...k)=>{switch(y){case APPLY:k[0]=b(k[0]),k[1]=k[1].map(b);break;case CONSTRUCT:k[0]=k[0].map(b);break;case DEFINE_PROPERTY:{const[P,L]=k;k[0]=b(P);const{get:M,set:B,value:j}=L;M&&(L.get=b(M)),B&&(L.set=b(B)),j&&(L.value=b(j));break}default:k=k.map(b);break}return x[y](b(O),...k)},{proxy:o,[s.toLowerCase()]:S,[`is${s}Proxy`]:()=>!1}}},main$2=main$3("Window",!0),thread$1=s=>{let e=0;const r=new Map,n=new Map,o=Symbol();return function(a,c,l){const h=this?.transform||transform,{[c]:d}=a,f=new Map,g=x=>{f.delete(x),d(DELETE,v(x))},v=asEntry((x,y)=>{if(o in y)return unbound(y[o]);if(x===FUNCTION){if(y=h(y),!n.has(y)){let O;for(;n.has(O=String(e++)););r.set(y,O),n.set(O,y)}return target(x,r.get(y))}if(!(y instanceof TypedArray)){(x===OBJECT||x===ARRAY)&&(y=h(y));for(const O in y)y[O]=v(y[O])}return target(x,y)}),S=(x,y,O)=>{if(!f.has(O)){const k=y===FUNCTION?bound(x):x,P=new Proxy(k,m);return f.set(O,new WeakRef(P)),create$3(O,g,{return:P,token:!1})}return f.get(O).deref()},A=x=>unwrap(x,(y,O)=>{switch(y){case OBJECT:if(O===null)return globalThis;case ARRAY:return typeof O===NUMBER?S(x,y,O):O;case FUNCTION:return typeof O===STRING?n.get(O):S(x,y,O);case SYMBOL:return symbol(O)}return O}),w=(x,y,...O)=>A(d(x,unbound(y),...O)),m={[APPLY]:(x,y,O)=>w(APPLY,x,v(y),O.map(v)),[CONSTRUCT]:(x,y)=>w(CONSTRUCT,x,y.map(v)),[DEFINE_PROPERTY]:(x,y,O)=>{const{get:k,set:P,value:L}=O;return typeof k===FUNCTION&&(O.get=v(k)),typeof P===FUNCTION&&(O.set=v(P)),typeof L===FUNCTION&&(O.value=v(L)),w(DEFINE_PROPERTY,x,v(y),O)},[DELETE_PROPERTY]:(x,y)=>w(DELETE_PROPERTY,x,v(y)),[GET_PROTOTYPE_OF]:x=>w(GET_PROTOTYPE_OF,x),[GET]:(x,y)=>y===o?x:w(GET,x,v(y)),[GET_OWN_PROPERTY_DESCRIPTOR]:(x,y)=>{const O=w(GET_OWN_PROPERTY_DESCRIPTOR,x,v(y));return O&&augment(O,A)},[HAS]:(x,y)=>y===o||w(HAS,x,v(y)),[IS_EXTENSIBLE]:x=>w(IS_EXTENSIBLE,x),[OWN_KEYS]:x=>w(OWN_KEYS,x).map(A),[PREVENT_EXTENSION]:x=>w(PREVENT_EXTENSION,x),[SET$1]:(x,y,O)=>w(SET$1,x,v(y),v(O)),[SET_PROTOTYPE_OF]:(x,y)=>w(SET_PROTOTYPE_OF,x,v(y))};a[l]=(x,y,O,k)=>{switch(x){case APPLY:return A(y).apply(A(O),k.map(A));case DELETE:{const P=A(y);r.delete(n.get(P)),n.delete(P)}}};const b=new Proxy(target(OBJECT,null),m);return{[s.toLowerCase()]:b,[`is${s}Proxy`]:x=>typeof x===OBJECT&&!!x&&o in x,proxy:a}}},thread=thread$1("Window"),Worker$1=typeof Worker===FUNCTION?Worker:class{},proxies=new WeakMap,coincident=(s,...e)=>{const r=coincident$1(s,...e);if(!proxies.has(r)){const n=s instanceof Worker$1?main$2:thread;proxies.set(r,n.call(e.at(0),r,MAIN,THREAD))}return proxies.get(r)};coincident.transfer=coincident$1.transfer;const xworker=()=>new Worker(URL.createObjectURL(new Blob(['const e="object"==typeof self?self:globalThis,t=t=>((t,r)=>{const n=(e,r)=>(t.set(r,e),e),s=o=>{if(t.has(o))return t.get(o);const[a,i]=r[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},o);for(const[t,r]of i)e[s(t)]=s(r);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,r]of i)e.set(s(t),s(r));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(s(t));return e}case 7:{const{name:t,message:r}=i;return n(new e[t](r),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new e[a](i),o)};return s})(new Map,t)(0),r="",{toString:n}={},{keys:s}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const s=n.call(e).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),i=(e,{json:t,lossy:r}={})=>{const n=[];return((e,t,r,n)=>{const i=(e,t)=>{const s=n.push(e)-1;return r.set(t,s),s},c=n=>{if(r.has(n))return r.get(n);let[l,u]=o(n);switch(l){case 0:{let t=n;switch(u){case"bigint":l=8,t=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return i([-1],n)}return i([l,t],n)}case 1:{if(u)return i([u,[...n]],n);const e=[],t=i([l,e],n);for(const t of n)e.push(c(t));return t}case 2:{if(u)switch(u){case"BigInt":return i([u,n.toString()],n);case"Boolean":case"Number":case"String":return i([u,n.valueOf()],n)}if(t&&"toJSON"in n)return c(n.toJSON());const r=[],f=i([l,r],n);for(const t of s(n))!e&&a(o(n[t]))||r.push([c(t),c(n[t])]);return f}case 3:return i([l,n.toISOString()],n);case 4:{const{source:e,flags:t}=n;return i([l,{source:e,flags:t}],n)}case 5:{const t=[],r=i([l,t],n);for(const[r,s]of n)(e||!a(o(r))&&!a(o(s)))&&t.push([c(r),c(s)]);return r}case 6:{const t=[],r=i([l,t],n);for(const r of n)!e&&a(o(r))||t.push(c(r));return r}}const{message:f}=n;return i([l,{name:u,message:f}],n)};return c})(!(t||r),!!t,new Map,n)(e),n},{parse:c,stringify:l}=JSON,u={json:!0,lossy:!0};var f=Object.freeze({__proto__:null,parse:e=>t(c(e)),stringify:e=>l(i(e,u))});const p="4ee55850-17cb-4a85-a071-03fe2aa108bd",d="M"+p,y="T"+p,h="array",g="function",w="null",m="number",b="object",v="string",$="symbol",S="undefined",E="apply",A="construct",P="defineProperty",k="deleteProperty",x="get",M="getOwnPropertyDescriptor",j="getPrototypeOf",T="has",_="isExtensible",O="ownKeys",W="preventExtensions",F="set",R="setPrototypeOf",B="delete";var J=e=>({value:new Promise((t=>{let r=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");r.onmessage=t,r.postMessage(e)}))})\n/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:I,Map:L,SharedArrayBuffer:D,Uint16Array:C}=globalThis,{BYTES_PER_ELEMENT:H}=I,{BYTES_PER_ELEMENT:N}=C,{isArray:U}=Array,{notify:z,wait:q,waitAsync:K}=Atomics,Y=new WeakSet,G=new WeakMap,V={value:{then:e=>e()}};let Q=0;const X=(e,{parse:t=JSON.parse,stringify:r=JSON.stringify,transform:n,interrupt:s}=JSON)=>{if(!G.has(e)){const o=(t,...r)=>e.postMessage({[p]:r},{transfer:t}),a=typeof s===g?s:s?.handler,i=s?.delay||42,c=new TextDecoder("utf-16"),l=(e,t)=>e?(K||J)(t,0):(a?((e,t,r)=>{for(;"timed-out"===q(e,0,0,t);)r()})(t,i,a):q(t,0),V);let u=!1;G.set(e,new Proxy(new L,{[T]:(e,t)=>"string"==typeof t&&!t.startsWith("_"),[x]:(r,s)=>"then"===s?null:(...r)=>{const a=Q++;let i=new I(new D(2*H)),f=[];Y.has(r.at(-1)||f)&&Y.delete(f=r.pop()),o(f,a,i,s,n?r.map(n):r);const p=e!==globalThis;let d=0;return u&&p&&(d=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${s}(...args) is awaited`)),l(p,i).value.then((()=>{clearTimeout(d);const e=i[1];if(!e)return;const r=N*e;return i=new I(new D(r+r%H)),o([],a,i),l(p,i).value.then((()=>t(c.decode(new C(i.buffer).slice(0,e)))))}))},[F](t,s,o){const a=typeof o;if(a!==g)throw new Error(`Unable to assign ${s} as ${a}`);if(!t.size){const s=new L;e.addEventListener("message",(async e=>{const o=e.data?.[p];if(U(o)){e.stopImmediatePropagation();const[a,i,...c]=o;let l;if(c.length){const[e,o]=c;if(t.has(e)){u=!0;try{const c=await t.get(e)(...o);if(void 0!==c){const e=r(n?n(c):c);s.set(a,e),i[1]=e.length}}catch(e){l=e}finally{u=!1}}else l=new Error(`Unsupported action: ${e}`);i[0]=1}else{const e=s.get(a);s.delete(a);for(let t=new C(i.buffer),r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}if(z(i,0),l)throw l}}))}return!!t.set(s,o)}}))}return G.get(e)};X.transfer=(...e)=>(Y.add(e),e);const{isArray:Z}=Array,ee=(e,t)=>t,te=e=>typeof e===g?(e=>e())(e):e;function re(){return this}const ne=(e,t)=>e===h?[t]:{t:e,v:t},se=(e,t=ee)=>{let r=typeof e,n=e;return r===b&&(Z(e)?(r=h,n=e.at(0)):({t:r,v:n}=e)),t(r,n)},oe=(e,t)=>e===g?t:ne(e,t),ae=(e,t=oe)=>{const r=null===e?w:typeof e;return t(r===b&&Z(e)?h:r,e)},ie=new FinalizationRegistry((([e,t,r])=>{r&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),ce=Object.create(null),le=(e,t,{debug:r,return:n,token:s=e}=ce)=>{const o=n||new Proxy(e,ce),a=[o,[t,e,!!r]];return!1!==s&&a.push(s),ie.register(...a),o},{defineProperty:ue,deleteProperty:fe,getOwnPropertyDescriptor:pe,getPrototypeOf:de,isExtensible:ye,ownKeys:he,preventExtensions:ge,set:we,setPrototypeOf:me}=Reflect,{assign:be,create:ve}=Object,$e=de(Int8Array),Se=(e,t)=>{const{get:r,set:n,value:s}=e;return r&&(e.get=t(r)),n&&(e.set=t(n)),s&&(e.value=t(s)),e},Ee=e=>t=>ae(t,((t,r)=>{switch(t){case w:return ne(w,r);case b:if(r===globalThis)return ne(t,null);case h:case g:return e(t,r);case"boolean":case m:case v:case S:case"bigint":return ne(t,r);case $:if(Ae.has(r))return ne(t,Ae.get(r))}throw new Error(`Unable to handle this ${t} type`)})),Ae=new Map(he(Symbol).filter((e=>typeof Symbol[e]===$)).map((e=>[Symbol[e],e]))),Pe=e=>{for(const[t,r]of Ae)if(r===e)return t},ke=e=>e;var xe=((e,t)=>{const r=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;ue(EventTarget.prototype,"addEventListener",{value(t,n,...s){return s.at(0)?.invoke&&(r.has(this)||r.set(this,new Map),r.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,n,...s)}})}const n=t&&(e=>{const{currentTarget:t,target:n,type:s}=e;for(const o of r.get(t||n)?.get(s)||[])e[o]()});return function(r,s,o,...a){let i=0,c=this?.transform||ke;const l=new Map,u=new Map,{[o]:f}=r,p=a.length?be(ve(globalThis),...a):globalThis,d=Ee(((e,t)=>{if(!l.has(t)){let r;for(;u.has(r=i++););l.set(t,r),u.set(r,e===g?t:c(t))}return ne(e,l.get(t))})),y=e=>{f(B,ne(v,e))},w=(e,r)=>{switch(e){case b:if(null==r)return p;case h:if(typeof r===m)return u.get(r);if(!(r instanceof $e))for(const e in r)r[e]=J(r[e]);return r;case g:if(typeof r===v){if(!u.has(r)){const e=function(...e){return t&&e.at(0)instanceof Event&&n(...e),f(E,ne(g,r),d(this),e.map(d))};return u.set(r,new WeakRef(e)),le(r,y,{return:e,token:!1})}return u.get(r).deref()}return u.get(r);case $:return Pe(r)}return r},J=e=>se(e,w),I={[E]:(e,t,r)=>d(e.apply(t,r)),[A]:(e,t)=>d(new e(...t)),[P]:(e,t,r)=>d(ue(e,t,r)),[k]:(e,t)=>d(fe(e,t)),[j]:e=>d(de(e)),[x]:(e,t)=>d(e[t]),[M]:(e,t)=>{const r=pe(e,t);return r?ne(b,Se(r,d)):ne(S,r)},[T]:(e,t)=>d(t in e),[_]:e=>d(ye(e)),[O]:e=>ne(h,he(e).map(d)),[W]:e=>d(ge(e)),[F]:(e,t,r)=>d(we(e,t,r)),[R]:(e,t)=>d(me(e,t)),[B](e){l.delete(u.get(e)),u.delete(e)}};return r[s]=(e,t,...r)=>{switch(e){case E:r[0]=J(r[0]),r[1]=r[1].map(J);break;case A:r[0]=r[0].map(J);break;case P:{const[e,t]=r;r[0]=J(e);const{get:n,set:s,value:o}=t;n&&(t.get=J(n)),s&&(t.set=J(s)),o&&(t.value=J(o));break}default:r=r.map(J)}return I[e](J(t),...r)},{proxy:r,[e.toLowerCase()]:p,[`is${e}Proxy`]:()=>!1}}})("Window",!0),Me=(e=>{let t=0;const r=new Map,n=new Map,s=Symbol();return function(o,a,i){const c=this?.transform||ke,{[a]:l}=o,u=new Map,f=e=>{u.delete(e),l(B,p(e))},p=Ee(((e,o)=>{if(s in o)return te(o[s]);if(e===g){if(o=c(o),!n.has(o)){let e;for(;n.has(e=String(t++)););r.set(o,e),n.set(e,o)}return ne(e,r.get(o))}if(!(o instanceof $e)){e!==b&&e!==h||(o=c(o));for(const e in o)o[e]=p(o[e])}return ne(e,o)})),d=(e,t,r)=>{if(!u.has(r)){const n=t===g?(e=>re.bind(e))(e):e,s=new Proxy(n,S);return u.set(r,new WeakRef(s)),le(r,f,{return:s,token:!1})}return u.get(r).deref()},y=e=>se(e,((t,r)=>{switch(t){case b:if(null===r)return globalThis;case h:return typeof r===m?d(e,t,r):r;case g:return typeof r===v?n.get(r):d(e,t,r);case $:return Pe(r)}return r})),w=(e,t,...r)=>y(l(e,te(t),...r)),S={[E]:(e,t,r)=>w(E,e,p(t),r.map(p)),[A]:(e,t)=>w(A,e,t.map(p)),[P]:(e,t,r)=>{const{get:n,set:s,value:o}=r;return typeof n===g&&(r.get=p(n)),typeof s===g&&(r.set=p(s)),typeof o===g&&(r.value=p(o)),w(P,e,p(t),r)},[k]:(e,t)=>w(k,e,p(t)),[j]:e=>w(j,e),[x]:(e,t)=>t===s?e:w(x,e,p(t)),[M]:(e,t)=>{const r=w(M,e,p(t));return r&&Se(r,y)},[T]:(e,t)=>t===s||w(T,e,p(t)),[_]:e=>w(_,e),[O]:e=>w(O,e).map(y),[W]:e=>w(W,e),[F]:(e,t,r)=>w(F,e,p(t),p(r)),[R]:(e,t)=>w(R,e,p(t))};o[i]=(e,t,s,o)=>{switch(e){case E:return y(t).apply(y(s),o.map(y));case B:{const e=y(t);r.delete(n.get(e)),n.delete(e)}}};const J=new Proxy(ne(b,null),S);return{[e.toLowerCase()]:J,[`is${e}Proxy`]:e=>typeof e===b&&!!e&&s in e,proxy:o}}})("Window"),je=typeof Worker===g?Worker:class{};const Te=new WeakMap,_e=(e,...t)=>{const r=X(e,...t);if(!Te.has(r)){const n=e instanceof je?xe:Me;Te.set(r,n.call(t.at(0),r,d,y))}return Te.get(r)};_e.transfer=X.transfer;const Oe={object(...e){return this.string(function(e){for(var t=e[0],r=1,n=arguments.length;r<n;r++)t+=arguments[r]+e[r];return t}(...e))},string(e){for(const t of e.split(/[\\r\\n]+/))if(t.trim().length){/^(\\s+)/.test(t)&&(e=e.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return e}};Promise.withResolvers||(Promise.withResolvers=function(){var e,t,r=new this((function(r,n){e=r,t=n}));return{resolve:e,reject:t,promise:r}});const We=e=>e.arrayBuffer(),Fe=e=>e.json(),Re=e=>e.text(),Be=new WeakMap,Je=e=>{const t=e||console,r={stderr:(t.stderr||console.error).bind(t),stdout:(t.stdout||console.log).bind(t)};return{stderr:(...e)=>r.stderr(...e),stdout:(...e)=>r.stdout(...e),async get(e){const t=await e;return Be.set(t,r),t}}},Ie=({FS:e,PATH:t,PATH_FS:r},n,s)=>{const o=r.resolve(n);return e.mkdirTree(t.dirname(o)),e.writeFile(o,new Uint8Array(s),{canOwn:!0})},Le=e=>{const t=e.split("/");return t.pop(),t.join("/")},De=(e,t)=>{const r=[];for(const n of t.split("/"))"."!==n&&(r.push(n),n&&e.mkdir(r.join("/")))},Ce=(e,t)=>{const r=[];for(const e of t.split("/"))switch(e){case"":case".":break;case"..":r.pop();break;default:r.push(e)}return[e.cwd()].concat(r).join("/").replace(/^\\/+/,"/")},He=e=>{const t=e.map((e=>e.trim().replace(/(^[/]*|[/]*$)/g,""))).filter((e=>""!==e&&"."!==e)).join("/");return e[0].startsWith("/")?`/${t}`:t},Ne=(e,t)=>fetch(st(t,Ue.get(e))),Ue=new WeakMap,ze=(e,t,r)=>rt((e=>{for(const{files:t,to_file:r,from:n=""}of e){if(void 0!==t&&void 0!==r)throw new Error("Cannot use \'to_file\' and \'files\' parameters together!");if(void 0===t&&void 0===r&&n.endsWith("/"))throw new Error(`Couldn\'t determine the filename from the path ${n}, please supply \'to_file\' parameter.`)}return e.flatMap((({from:e="",to_folder:t=".",to_file:r,files:n})=>{if(Ve(n))return n.map((r=>({url:He([e,r]),path:He([t,r])})));const s=r||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:He([t,s])}]}))})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),qe=(e,t)=>t.endsWith("/")?`${t}${e.split("/").pop()}`:t,Ke=(e,t)=>e.replace(/\\{.+?\\}/g,(e=>{if(!t.has(e))throw new SyntaxError(`Invalid template: ${e}`);return t.get(e)})),Ye=(e,t,r)=>rt((e=>{const t=new Map,r=new Set,n=[];for(const[s,o]of Object.entries(e))if(/^\\{.+\\}$/.test(s)){if(t.has(s))throw new SyntaxError(`Duplicated template: ${s}`);t.set(s,Ke(o,t))}else{const e=Ke(s,t),a=qe(e,Ke(o||"./",t));if(r.has(a))throw new SyntaxError(`Duplicated destination: ${a}`);r.add(a),n.push({url:e,path:a})}return n})(r).map((({url:n,path:s})=>Ne(r,n).then(We).then((r=>e.writeFile(t,s,r)))))),Ge=(e,...t)=>Oe[typeof e](e,...t),{isArray:Ve}=Array,{assign:Qe,create:Xe,defineProperties:Ze,defineProperty:et,entries:tt}=Object,{all:rt,resolve:nt}=new Proxy(Promise,{get:(e,t)=>e[t].bind(e)}),st=(e,t=location.href)=>new URL(e,t.replace(/^blob:/,"")).href,ot=(e,t,r,n=!1,s=CustomEvent)=>{e.dispatchEvent(new s(`${t}:${r}`,{bubbles:!0,detail:{worker:n}}))},at=e=>Function(`\'use strict\';return (${e})`)(),it=(e,t,r)=>{e.registerJsModule(t,r)},ct=(e,t,...r)=>{try{return e.runPython(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},lt=async(e,t,...r)=>{try{return await e.runPythonAsync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},ut=async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.globals.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}};var ft={type:"micropython",module:(e="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${e}/micropython.mjs`,async engine({loadMicroPython:e},t,r){const{stderr:n,stdout:s,get:o}=Je();r=r.replace(/\\.m?js$/,".wasm");const a=await o(e({stderr:n,stdout:s,url:r}));return t.files&&await Ye(this,a,t.files),t.fetch&&await ze(this,a,t.fetch),a},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t,writeFile:({FS:e,_module:{PATH:t,PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const pt={dict_converter:Object.fromEntries};var dt={type:"pyodide",module:(e="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${e}/full/pyodide.mjs`,async engine({loadPyodide:e},t,r){const{stderr:n,stdout:s,get:o}=Je(),a=r.slice(0,r.lastIndexOf("/")),i=await o(e({stderr:n,stdout:s,indexURL:a}));if(t.files&&await Ye(this,i,t.files),t.fetch&&await ze(this,i,t.fetch),t.packages){await i.loadPackage("micropip");const e=await i.pyimport("micropip");await e.install(t.packages,{keep_going:!0}),e.destroy()}return i},registerJSModule:it,run:ct,runAsync:lt,runEvent:ut,transform:(e,t)=>t instanceof e.ffi.PyProxy?t.toJs(pt):t,writeFile:({FS:e,PATH:t,_module:{PATH_FS:r}},n,s)=>Ie({FS:e,PATH:t,PATH_FS:r},n,s)};const yt="ruby-wasm-wasi",ht=yt.replace(/\\W+/g,"_");var gt={type:yt,experimental:!0,module:(e="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${e}/dist/browser.esm.js`,async engine({DefaultRubyVM:e},t,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),s=await WebAssembly.compile(await n.arrayBuffer()),{vm:o}=await e(s);return t.files&&await Ye(this,o,t.files),t.fetch&&await ze(this,o,t.fetch),o},registerJSModule(e,t,r){const n=`__module_${ht}_${t}`;globalThis[n]=r,this.run(e,`require "js";$${t}=JS.global[:${n}]`),delete globalThis[n]},run:(e,t,...r)=>e.eval(Ge(t),...r),runAsync:(e,t,...r)=>e.evalAsync(Ge(t),...r),async runEvent(e,t,r){if(/^xworker\\.(on\\w+)$/.test(t)){const{$1:t}=RegExp,n=`__module_${ht}_event`;globalThis[n]=r,this.run(e,`require "js";$xworker.call("${t}",JS.global[:${n}])`),delete globalThis[n]}else{const n=this.run(e,`method(:${t})`);await n.call(t,e.wrap(r))}},transform:(e,t)=>t,writeFile:()=>{throw new Error(`writeFile is not supported in ${yt}`)}};var wt={type:"wasmoon",module:(e="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${e}/+esm`,async engine({LuaFactory:e,LuaLibraries:t},r){const{stderr:n,stdout:s,get:o}=Je(),a=await o((new e).createEngine());return a.global.getTable(t.Base,(e=>{a.global.setField(e,"print",s),a.global.setField(e,"printErr",n)})),r.files&&await Ye(this,a,r.files),r.fetch&&await ze(this,a,r.fetch),a},registerJSModule:(e,t,r)=>{e.global.set(t,r)},run:(e,t,...r)=>{try{return e.doStringSync(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runAsync:async(e,t,...r)=>{try{return await e.doString(Ge(t),...r)}catch(t){Be.get(e).stderr(t)}},runEvent:async(e,t,r)=>{const[n,...s]=t.split(".");let o,a=e.global.get(n);for(const e of s)[o,a]=[a,a[e]];try{await a.call(o,r)}catch(t){Be.get(e).stderr(t)}},transform:(e,t)=>t,writeFile:({cmodule:{module:{FS:e}}},t,r)=>((e,t,r)=>(De(e,Le(t)),t=Ce(e,t),e.writeFile(t,new Uint8Array(r),{canOwn:!0})))(e,t,r)};const mt=new Map,bt=new Map,vt=new Proxy(new Map,{get(e,t){if(!e.has(t)){const[r,...n]=t.split("@"),s=mt.get(r),o=/^(?:\\.?\\.?\\/|https?:\\/\\/)/i.test(n)?n.join("@"):s.module(...n);e.set(t,{url:o,module:import(o),engine:s.engine.bind(s)})}const{url:r,module:n,engine:s}=e.get(t);return(e,o)=>n.then((n=>{bt.set(t,e);for(const t of["files","fetch"]){const r=e?.[t];r&&Ue.set(r,o)}return s(n,e,r)}))}}),$t=e=>{for(const t of[].concat(e.type))mt.set(t,e)};for(const e of[ft,dt,gt,wt])$t(e);const St=async e=>(await import("https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js")).parse(e),Et=(e,t,r={})=>{if(t){const[e,n]=(e=>{let t=typeof e;return"string"===t&&/\\.(json|toml|txt)$/.test(e)?t=RegExp.$1:e="./config.txt",[st(e),t]})(t);if("json"===n)r=fetch(e).then(Fe);else if("toml"===n)r=fetch(e).then(Re).then(St);else if("string"===n)try{r=JSON.parse(t)}catch(e){r=St(t)}else"object"===n&&t&&(r=t);t=e}return nt(r).then((r=>vt[e](r,t)))},At="BeforeRun",Pt="AfterRun",kt=[`code${At}`,`code${At}Async`,`code${Pt}`,`code${Pt}Async`],xt=["onWorker","onReady",`on${At}`,`on${At}Async`,`on${Pt}`,`on${Pt}Async`];function Mt(e,t){const{run:r,runAsync:n}=mt.get(this.type);return{...e,run:r.bind(this,t),runAsync:n.bind(this,t)}}const jt=(e,t,r,n,s,o)=>{if(s||o){const a=Mt.bind(e,t),i=n?"runAsync":"run",c=e[i];e[i]=n?async function(e,t,...n){s&&await s.call(this,a(e),r);const i=await c.call(this,e,t,...n);return o&&await o.call(this,a(e),r),i}:function(e,t,...n){s&&s.call(this,a(e),r);const i=c.call(this,e,t,...n);return o&&o.call(this,a(e),r),i}}};try{new SharedArrayBuffer(4)}catch(e){throw new Error(["Unable to use SharedArrayBuffer due insecure environment.","Please read requirements in MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements"].join("\\n"))}let Tt,_t,Ot;const Wt=(e,t)=>{addEventListener(e,t||(async t=>{try{await Tt,_t(`xworker.on${e}`,t)}catch(e){postMessage(e)}}),!!t&&{once:!0})},{parse:Ft,stringify:Rt}=f,{proxy:Bt,window:Jt,isWindowProxy:It}=_e(self,{parse:Ft,stringify:Rt,transform:e=>Ot?Ot(e):e}),Lt={sync:Bt,window:Jt,isWindowProxy:It,onmessage:console.info,onerror:console.error,onmessageerror:console.warn,postMessage:postMessage.bind(self)};Wt("message",(({data:{options:e,config:t,code:r,hooks:n}})=>{Tt=(async()=>{try{const{id:s,tag:o,type:a,custom:i,version:c,config:l,async:u}=e,f=await Et(((e,t="")=>`${e}@${t}`.replace(/@$/,""))(a,c),t,l),p=Xe(mt.get(a)),d=((e,t,r,n)=>({type:t,config:r,interpreter:n,io:Be.get(n),run:(t,...r)=>e.run(n,t,...r),runAsync:(t,...r)=>e.runAsync(n,t,...r),runEvent:(...t)=>e.runEvent(n,...t)}))(p,i||a,l,f);let y="run";if(u&&(y+="Async"),n){const e=((e,t)=>(r,n)=>{const s=e[t].bind(e);e[t]=(e,t,...o)=>s(e,`${n?r:t}\\n${n?t:r}`,...o)})(p,y);let t,r,s="",o="";for(const e of kt){const t=n[e];if(t){const r=e.endsWith("Async");(r&&u||!r&&!u)&&(e.startsWith("codeBefore")?s=t:o=t)}}o&&e(o,!1),s&&e(s,!0);for(const e of xt.slice(2)){const s=n[e];if(s){const n=e.endsWith("Async");if(n&&u||!n&&!u){const n=at(s);e.startsWith("onBefore")?t=n:r=n}}}jt(p,d,Lt,u,t,r)}const{CustomEvent:h,document:g}=Jt,w=s&&g.getElementById(s)||null,m=e=>ot(w,i||a,e,!0,h);let b="";return p.registerJSModule(f,"polyscript",{xworker:Lt,get target(){return!b&&w&&("SCRIPT"===o?w.after(Qe(g.createElement(`script-${i||a}`),{id:b=`${s}-target`})):(b=s,w.replaceChildren(),w.style.display="block")),b}}),_t=p.runEvent.bind(p,f),Ot=p.transform.bind(p,f),w&&m("ready"),n?.onReady&&at(n?.onReady).call(p,Mt.call(p,d,f),Lt),await p[y](f,r),w&&m("done"),f}catch(e){postMessage(e)}})(),Wt("error"),Wt("message"),Wt("messageerror")}));\n'],{type:"application/javascript"})),{type:"module"}),scriptRel="modulepreload",assetsURL=function(s,e){return new URL(s,e).href},seen={},__vitePreload=function(e,r,n){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=assetsURL(a,n),a in seen)return;seen[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!n)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===a&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":scriptRel,c||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a})};Promise.withResolvers||(Promise.withResolvers=function(){var e,r,n=new this(function(o,a){e=o,r=a});return{resolve:e,reject:r,promise:n}});const getBuffer=s=>s.arrayBuffer(),getJSON=s=>s.json(),getText=s=>s.text();function content$1(s){for(var e=s[0],r=1,n=arguments.length;r<n;r++)e+=arguments[r]+s[r];return e}const dedent$2={object(...s){return this.string(content$1(...s))},string(s){for(const e of s.split(/[\r\n]+/))if(e.trim().length){/^(\s+)/.test(e)&&(s=s.replace(new RegExp("^"+RegExp.$1,"gm"),""));break}return s}},codedent=(s,...e)=>dedent$2[typeof s](s,...e),{replace}="",es=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,unes={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},cape=s=>unes[s],unescape$2=s=>replace.call(s,es,cape),dedent$1=codedent,unescape$1=unescape$2,{isArray}=Array,{assign,create:create$1,defineProperties,defineProperty,entries}=Object,{all,resolve:resolve$1}=new Proxy(Promise,{get:(s,e)=>s[e].bind(s)}),absoluteURL=(s,e=location.href)=>new URL(s,e.replace(/^blob:/,"")).href;let id$1=0;const nodeInfo=(s,e)=>({id:s.id||(s.id=`${e}-w${id$1++}`),tag:s.tagName}),dispatch=(s,e,r,n=!1,o=CustomEvent)=>{s.dispatchEvent(new o(`${e}:${r}`,{bubbles:!0,detail:{worker:n}}))},createResolved=(s,e,r,n)=>({type:e,config:r,interpreter:n,io:io.get(n),run:(o,...a)=>s.run(n,o,...a),runAsync:(o,...a)=>s.runAsync(n,o,...a),runEvent:(...o)=>s.runEvent(n,...o)}),createOverload=(s,e)=>(r,n)=>{const o=s[e].bind(s);s[e]=(a,c,...l)=>o(a,`${n?r:c}
${n?c:r}`,...l)},io=new WeakMap,stdio=s=>{const e=s||console,r={stderr:(e.stderr||console.error).bind(e),stdout:(e.stdout||console.log).bind(e)};return{stderr:(...n)=>r.stderr(...n),stdout:(...n)=>r.stdout(...n),async get(n){const o=await n;return io.set(o,r),o}}},writeFile=({FS:s,PATH:e,PATH_FS:r},n,o)=>{const a=r.resolve(n);return s.mkdirTree(e.dirname(a)),s.writeFile(a,new Uint8Array(o),{canOwn:!0})},writeFileShim=(s,e,r)=>(mkdirTree(s,dirname(e)),e=resolve(s,e),s.writeFile(e,new Uint8Array(r),{canOwn:!0})),dirname=s=>{const e=s.split("/");return e.pop(),e.join("/")},mkdirTree=(s,e)=>{const r=[];for(const n of e.split("/"))n!=="."&&(r.push(n),n&&s.mkdir(r.join("/")))},resolve=(s,e)=>{const r=[];for(const n of e.split("/"))switch(n){case"":break;case".":break;case"..":r.pop();break;default:r.push(n)}return[s.cwd()].concat(r).join("/").replace(/^\/+/,"/")},calculateFetchPaths=s=>{for(const{files:e,to_file:r,from:n=""}of s){if(e!==void 0&&r!==void 0)throw new Error("Cannot use 'to_file' and 'files' parameters together!");if(e===void 0&&r===void 0&&n.endsWith("/"))throw new Error(`Couldn't determine the filename from the path ${n}, please supply 'to_file' parameter.`)}return s.flatMap(({from:e="",to_folder:r=".",to_file:n,files:o})=>{if(isArray(o))return o.map(c=>({url:joinPaths([e,c]),path:joinPaths([r,c])}));const a=n||e.slice(1+e.lastIndexOf("/"));return[{url:e,path:joinPaths([r,a])}]})},joinPaths=s=>{const e=s.map(r=>r.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(r=>r!==""&&r!==".").join("/");return s[0].startsWith("/")?`/${e}`:e},fetchResolved=(s,e)=>fetch(absoluteURL(e,base$1.get(s))),base$1=new WeakMap,fetchPaths=(s,e,r)=>all(calculateFetchPaths(r).map(({url:n,path:o})=>fetchResolved(r,n).then(getBuffer).then(a=>s.writeFile(e,o,a)))),fillName=(s,e)=>e.endsWith("/")?`${e}${s.split("/").pop()}`:e,parseTemplate=(s,e)=>s.replace(/\{.+?\}/g,r=>{if(!e.has(r))throw new SyntaxError(`Invalid template: ${r}`);return e.get(r)}),calculateFilesPaths=s=>{const e=new Map,r=new Set,n=[];for(const[o,a]of Object.entries(s))if(/^\{.+\}$/.test(o)){if(e.has(o))throw new SyntaxError(`Duplicated template: ${o}`);e.set(o,parseTemplate(a,e))}else{const c=parseTemplate(o,e),l=fillName(c,parseTemplate(a||"./",e));if(r.has(l))throw new SyntaxError(`Duplicated destination: ${l}`);r.add(l),n.push({url:c,path:l})}return n},fetchFiles=(s,e,r)=>all(calculateFilesPaths(r).map(({url:n,path:o})=>fetchResolved(r,n).then(getBuffer).then(a=>s.writeFile(e,o,a)))),registerJSModule=(s,e,r)=>{s.registerJsModule(e,r)},run=(s,e,...r)=>{try{return s.runPython(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runAsync=async(s,e,...r)=>{try{return await s.runPythonAsync(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runEvent=async(s,e,r)=>{const[n,...o]=e.split(".");let a=s.globals.get(n),c;for(const l of o)[c,a]=[a,a[l]];try{await a.call(c,r)}catch(l){io.get(s).stderr(l)}},type$3="micropython",micropython={type:type$3,module:(s="1.20.0-297")=>`https://cdn.jsdelivr.net/npm/@micropython/micropython-webassembly-pyscript@${s}/micropython.mjs`,async engine({loadMicroPython:s},e,r){const{stderr:n,stdout:o,get:a}=stdio();r=r.replace(/\.m?js$/,".wasm");const c=await a(s({stderr:n,stdout:o,url:r}));return e.files&&await fetchFiles(this,c,e.files),e.fetch&&await fetchPaths(this,c,e.fetch),c},registerJSModule,run,runAsync,runEvent,transform:(s,e)=>e,writeFile:({FS:s,_module:{PATH:e,PATH_FS:r}},n,o)=>writeFile({FS:s,PATH:e,PATH_FS:r},n,o)},type$2="pyodide",toJsOptions={dict_converter:Object.fromEntries},pyodide={type:type$2,module:(s="0.24.1")=>`https://cdn.jsdelivr.net/pyodide/v${s}/full/pyodide.mjs`,async engine({loadPyodide:s},e,r){const{stderr:n,stdout:o,get:a}=stdio(),c=r.slice(0,r.lastIndexOf("/")),l=await a(s({stderr:n,stdout:o,indexURL:c}));if(e.files&&await fetchFiles(this,l,e.files),e.fetch&&await fetchPaths(this,l,e.fetch),e.packages){await l.loadPackage("micropip");const h=await l.pyimport("micropip");await h.install(e.packages,{keep_going:!0}),h.destroy()}return l},registerJSModule,run,runAsync,runEvent,transform:(s,e)=>e instanceof s.ffi.PyProxy?e.toJs(toJsOptions):e,writeFile:({FS:s,PATH:e,_module:{PATH_FS:r}},n,o)=>writeFile({FS:s,PATH:e,PATH_FS:r},n,o)},type$1="ruby-wasm-wasi",jsType=type$1.replace(/\W+/g,"_"),ruby_wasm_wasi={type:type$1,experimental:!0,module:(s="2.2.0")=>`https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@${s}/dist/browser.esm.js`,async engine({DefaultRubyVM:s},e,r){const n=await fetch(`${r.slice(0,r.lastIndexOf("/"))}/ruby.wasm`),o=await WebAssembly.compile(await n.arrayBuffer()),{vm:a}=await s(o);return e.files&&await fetchFiles(this,a,e.files),e.fetch&&await fetchPaths(this,a,e.fetch),a},registerJSModule(s,e,r){const n=`__module_${jsType}_${e}`;globalThis[n]=r,this.run(s,`require "js";$${e}=JS.global[:${n}]`),delete globalThis[n]},run:(s,e,...r)=>s.eval(dedent$1(e),...r),runAsync:(s,e,...r)=>s.evalAsync(dedent$1(e),...r),async runEvent(s,e,r){if(/^xworker\.(on\w+)$/.test(e)){const{$1:n}=RegExp,o=`__module_${jsType}_event`;globalThis[o]=r,this.run(s,`require "js";$xworker.call("${n}",JS.global[:${o}])`),delete globalThis[o]}else await this.run(s,`method(:${e})`).call(e,s.wrap(r))},transform:(s,e)=>e,writeFile:()=>{throw new Error(`writeFile is not supported in ${type$1}`)}},type="wasmoon",wasmoon={type,module:(s="1.15.1")=>`https://cdn.jsdelivr.net/npm/wasmoon@${s}/+esm`,async engine({LuaFactory:s,LuaLibraries:e},r){const{stderr:n,stdout:o,get:a}=stdio(),c=await a(new s().createEngine());return c.global.getTable(e.Base,l=>{c.global.setField(l,"print",o),c.global.setField(l,"printErr",n)}),r.files&&await fetchFiles(this,c,r.files),r.fetch&&await fetchPaths(this,c,r.fetch),c},registerJSModule:(s,e,r)=>{s.global.set(e,r)},run:(s,e,...r)=>{try{return s.doStringSync(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runAsync:async(s,e,...r)=>{try{return await s.doString(dedent$1(e),...r)}catch(n){io.get(s).stderr(n)}},runEvent:async(s,e,r)=>{const[n,...o]=e.split(".");let a=s.global.get(n),c;for(const l of o)[c,a]=[a,a[l]];try{await a.call(c,r)}catch(l){io.get(s).stderr(l)}},transform:(s,e)=>e,writeFile:({cmodule:{module:{FS:s}}},e,r)=>writeFileShim(s,e,r)},registry$1=new Map,configs=new Map,selectors=[],prefixes=[],interpreter=new Proxy(new Map,{get(s,e){if(!s.has(e)){const[a,...c]=e.split("@"),l=registry$1.get(a),h=/^(?:\.?\.?\/|https?:\/\/)/i.test(c)?c.join("@"):l.module(...c);s.set(e,{url:h,module:__vitePreload(()=>import(h),__vite__mapDeps([]),import.meta.url),engine:l.engine.bind(l)})}const{url:r,module:n,engine:o}=s.get(e);return(a,c)=>n.then(l=>{configs.set(e,a);for(const h of["files","fetch"]){const d=a?.[h];d&&base$1.set(d,c)}return o(l,a,r)})}}),register=s=>{for(const e of[].concat(s.type))registry$1.set(e,s),selectors.push(`script[type="${e}"]`),prefixes.push(`${e}-`)};for(const s of[micropython,pyodide,ruby_wasm_wasi,wasmoon])register(s);const TOML_LIB="https://cdn.jsdelivr.net/npm/basic-toml@0.3.1/es.js",parse=async s=>(await __vitePreload(()=>import(TOML_LIB),__vite__mapDeps([]),import.meta.url)).parse(s),getConfigURLAndType=s=>{let e=typeof s;return e==="string"&&/\.(json|toml|txt)$/.test(s)?e=RegExp.$1:s="./config.txt",[absoluteURL(s),e]},getRuntime=(s,e,r={})=>{if(e){const[n,o]=getConfigURLAndType(e);if(o==="json")r=fetch(n).then(getJSON);else if(o==="toml")r=fetch(n).then(getText).then(parse);else if(o==="string")try{r=JSON.parse(e)}catch{r=parse(e)}else o==="object"&&e&&(r=e);e=n}return resolve$1(r).then(n=>interpreter[s](n,e))},getRuntimeID=(s,e="")=>`${s}@${e}`.replace(/@$/,""),beforeRun="BeforeRun",afterRun="AfterRun",code$1=[`code${beforeRun}`,`code${beforeRun}Async`,`code${afterRun}`,`code${afterRun}Async`],js=["onWorker","onReady",`on${beforeRun}`,`on${beforeRun}Async`,`on${afterRun}`,`on${afterRun}Async`];function patch(s,e){const{run:r,runAsync:n}=registry$1.get(this.type);return{...s,run:r.bind(this,e),runAsync:n.bind(this,e)}}const polluteJS=(s,e,r,n,o,a)=>{if(o||a){const c=patch.bind(s,e),l=n?"runAsync":"run",h=s[l];s[l]=n?async function(d,f,...g){o&&await o.call(this,c(d),r);const v=await h.call(this,d,f,...g);return a&&await a.call(this,c(d),r),v}:function(d,f,...g){o&&o.call(this,c(d),r);const v=h.call(this,d,f,...g);return a&&a.call(this,c(d),r),v}}};let Hook$1=class{constructor(e,r={}){const{main:n,worker:o}=r;this.interpreter=e,this.onWorker=n?.onWorker;for(const a of js.slice(1))this[a]=o?.[a];for(const a of code$1)this[a]=o?.[a]}toJSON(){const e={};for(const r of js.slice(1))this[r]&&(e[r]=String(this[r]));for(const r of code$1)this[r]&&(e[r]=dedent$1(this[r]()));return e}};const $xworker=(...s)=>function(r,n){const o=xworker(),{postMessage:a}=o,c=this instanceof Hook$1;if(s.length){const[d,f]=s;n=assign({},n||{type:d,version:f}),n.type||(n.type=d)}const[l]=getConfigURLAndType(n.config),h=fetch(r).then(getText).then(d=>{const f=c?this.toJSON():void 0;a.call(o,{options:n,config:l,code:d,hooks:f})});return defineProperties(o,{postMessage:{value:(d,...f)=>h.then(()=>a.call(o,d,...f))},sync:{value:coincident(o,JSON$1).proxy},onerror:{writable:!0,configurable:!0,value:console.error}}),o.addEventListener("message",d=>{const{data:f}=d;f instanceof Error&&(d.stopImmediatePropagation(),o.onerror(create$1(d,{type:{value:"error"},error:{value:f}})))}),c&&this.onWorker?.(this.interpreter,o),o},XWorker$1=$xworker();class MPCRuntimeBase extends Emittery{peersReady=new Map;workerInitializing=!1;running=!1;env={};syncProxyPy;asyncProxyPy;constructor(e,r,n={}){super(),e.getEnv=this.getEnv.bind(this),this.syncProxyPy=e,this.asyncProxyPy=r,e.fetch=this.fetch.bind(this),r.onerror=o=>{console.warn("asyncProxyPy.onerror"),console.warn(o),this.emit("error",o)},r.onmessageerror=o=>{console.warn("asyncProxyPy.onmessageerror"),console.warn(o),this.emit("messageerror",o)},r.onmessage=o=>{let a=o.data;if(!Array.isArray(a)){console.warn("asyncProxyPy.onmessage",a),this.emit("display:error",`invalid message from worker 
`+JSON.stringify(a,null,2)+`
`);return}const[c,...l]=a;switch(c){case"proxy:js:init":this.workerInitializing=!0,this.updateEnv();break;case"proxy:js:mpc:exec:done":this.emit("exec:done");break;case"proxy:js:runtime:ready":this.emit("ready");break;case"proxy:js:display:stats":let[h]=l;this.emit("display:stats",h);break;case"proxy:js:mpc:msg:ready":let[d,f]=l;f.getBuffer&&(f=f.getBuffer()),this.emit("send",{type:"ready",pid:d,payload:f});break;case"proxy:js:mpc:msg:runtime":let[g,v]=l;v.getBuffer&&(v=v.getBuffer()),this.emit("send",{type:"runtime",pid:g,payload:v});break;case"proxy:js:display":let[S]=l;this.display(S);break;case"proxy:js:display:error":let[A]=l;this.displayError(A+`
`);break}},this.env=n}exec=async e=>{try{console.log("exec"),this.asyncProxyPy.postMessage(["proxy:py:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};run_mpc=async e=>{this.emit("exec:init"),e.filename||(e.filename="<exec>");try{console.log("run_mpc",e),this.asyncProxyPy.postMessage(["proxy:py:mpc:exec",e])}catch(r){console.error(r),this.emit("error",new ErrorEvent("runtime:error",{error:r}))}};processReadyMessage(e,r){this.asyncProxyPy.postMessage(["proxy:py:mpc:ready",e,r])}processRuntimeMessage(e,r){try{let n;if(r&&r instanceof Uint8Array&&(n=[r.buffer]),n){this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r],n);return}this.asyncProxyPy.postMessage(["proxy:py:mpc:runtime",e,r])}catch(n){console.warn("runtime:error"),console.warn("runtime:error",n),this.emit("error",new ErrorEvent("runtime:error",{error:n}))}}updateEnv(e={}){this.env={...this.env,...e},this.workerInitializing&&this.asyncProxyPy.postMessage(["proxy:py:env:update",this.env])}fetch2=async e=>{console.log("fetching",e);let n=await(await fetch("./"+e)).arrayBuffer();return new Uint8Array(n)};fetch=async e=>{e.endsWith(".gz")&&(e+="ip"),console.log("js/fetch fetching",e);let n=await(await fetch(e)).arrayBuffer();return new Uint8Array(n)};getEnv=()=>this.env;readline=e=>{};destroy(){console.log("destroying worker"),this.running=!1,this._close()}display=e=>{this.emit("display",e)};displayError=e=>{this.emit("display:error",e)};resetStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:reset"])}toggleStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:toggle"])}showStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:show"])}hideStats(){this.asyncProxyPy.postMessage(["proxy:py:stats:hide"])}onerror=e=>{console.warn("MPCRuntime.onerror"),console.warn(e.error),this.emit("error",e)};onmessageerror=e=>{console.warn("MPCRuntime.onmessageerror"),console.warn(e),this.emit("messageerror",e)};setReadlineFn(e){this.readline=e,this.syncProxyPy.readline=e}}function XXWorker(s,e,r){let n={async:!0,type:"pyodide",version:"0.24.1",config:e};return console.log("creating a new worker"),XWorker$1.call(new Hook$1(null,r),s,n)}let emptyBlob=URL.createObjectURL(new Blob([""],{type:"text/plain"}));class PyScriptWorkerRuntime extends MPCRuntimeBase{_close(){this.worker.terminate()}worker;constructor(e,r,n={}){(!e||e=="")&&(e=emptyBlob);let o=XXWorker(e,r,{worker:{onReady:(a,c)=>{console.log("worker onReady/init"),a.io.stderr=l=>{typeof l!="string"&&(l=l.toString()),console.error(l),c.postMessage(["proxy:js:display:error",l])},a.io.stdout=l=>{c.postMessage(["proxy:js:display",l+`
`])},c.postMessage(["proxy:js:init"]),self.wrap=a,self.pyodide=a.interpreter,console.log(self.pyodide),self.runAsync=async(l,h)=>{try{return await a.interpreter.runPythonAsync(l,{filename:h})}catch(d){a.io.stderr(d)}},self.runAsync(`
                        import asyncio
                        import js
                        import sys
                        from startup import *
                    `,"startup.py")}}});o.onmessageerror=a=>{console.error("worker.onmessageerror"),console.error(a)},o.onerror=a=>{console.error("worker.onerror"),console.error(a)},super(o.sync,o,n),this.worker=o}type(){return"PyScript/Worker"}}const stickyModule=(s,e,r=globalThis)=>{const n=Symbol.for(s),o=n in r;return[o?r[n]:Object.defineProperty(r,n,{value:e})[n],o]},$$1=(s,e=document)=>e.querySelector(s),$$$1=(s,e=document)=>[...e.querySelectorAll(s)],$x=(s,e=document)=>{const n=new XPathEvaluator().createExpression(s).evaluate(e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),o=[];for(let a=0,{snapshotLength:c}=n;a<c;a++)o.push(n.snapshotItem(a));return o},INVALID_CONTENT="Invalid content",INVALID_SRC_ATTR="Invalid worker attribute",INVALID_WORKER_ATTR="Invalid worker attribute",hasCommentsOnly=s=>!s.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*(?:\/\/|#).*/gm,"").trim(),workerURL=s=>{const{src:e,worker:r}=s.attributes;if(r){let{value:n}=r;if(n)throw new SyntaxError(INVALID_WORKER_ATTR);if(n=e?.value,!n){if(e)throw new SyntaxError(INVALID_SRC_ATTR);if(!s.childElementCount)n=s.textContent;else{const{innerHTML:a,localName:c,type:l}=s,h=l||c.replace(/-script$/,"");n=unescape$1(a),console.warn(`Deprecated: use <script type="${h}"> for an always safe content parsing:
`,n)}return URL.createObjectURL(new Blob([dedent$1(n)],{type:"text/plain"}))}return n}if(e&&!hasCommentsOnly(s.textContent))throw new SyntaxError(INVALID_CONTENT)},getRoot$1=s=>{let e=s;for(;e.parentNode;)e=e.parentNode;return e},queryTarget=(s,e)=>{const r=getRoot$1(s);return r.getElementById(e)||$$1(e,r)},targets=new WeakMap,targetDescriptor={get(){let s=targets.get(this);return s||(s=document.createElement(`${this.type}-script`),targets.set(this,s),handle(this)),s},set(s){typeof s=="string"?targets.set(this,queryTarget(this,s)):(targets.set(this,s),handle(this))}},handled=new WeakMap,interpreters=new Map,execute$1=async(s,e,r,n)=>{const{type:o}=s,a=registry$1.get(o);a.experimental&&console.warn(`The ${o} interpreter is experimental`);const[c,l]=await all([handled.get(s).interpreter,e]);try{defineProperty(document,"currentScript",{configurable:!0,get:()=>s}),a.registerJSModule(c,"polyscript",{XWorker:r}),dispatch(s,o,"ready");const h=a[n?"runAsync":"run"](c,l),d=dispatch.bind(null,s,o,"done");return n?h.then(d):d(),h}finally{delete document.currentScript}},getValue=(s,e)=>{const r=s?.value;return r?e+r:""},getDetails=(s,e,r,n,o,a=s)=>{if(!interpreters.has(e)){const c={interpreter:getRuntime(r,o),queue:resolve$1(),XWorker:$xworker(s,n)};interpreters.set(e,c),interpreters.has(s)||interpreters.set(s,c),interpreters.has(a)||interpreters.set(a,c)}return interpreters.get(e)},handle=async s=>{if(handled.has(s)){const{target:e}=s;e&&(s.closest("head")?document.body.append(e):s.after(e))}else{const{attributes:{async:e,config:r,env:n,target:o,version:a},src:c,type:l}=s,h=a?.value,d=getRuntimeID(l,h);let f=getValue(r,"|");const g=getValue(n,"")||`${d}${f}`;f=f.slice(1);const v=workerURL(s);if(v){const m=$xworker(l,h),b=new m(v,{...nodeInfo(s,l),async:!!e,config:f});handled.set(defineProperty(s,"xworker",{value:b}),{xworker:b});return}const S=getValue(o,""),A=getDetails(l,g,d,h,f);handled.set(defineProperty(s,"target",targetDescriptor),A),S&&targets.set(s,queryTarget(s,S));const w=c?fetch(c).then(getText):s.textContent;A.queue=A.queue.then(()=>execute$1(s,w,A.XWorker,!!e))}},env$1=new Proxy(create$1(null),{get:(s,e)=>new Promise(queueMicrotask).then(()=>awaitInterpreter(e))}),awaitInterpreter=async s=>{if(interpreters.has(s)){const{interpreter:r,queue:n}=interpreters.get(s);return(await all([r,n]))[0]}const e=interpreters.size?`Available interpreters are: ${[...interpreters.keys()].map(r=>`"${r}"`).join(", ")}.`:"There are no interpreters in this page.";throw new Error(`The interpreter "${s}" was not found. ${e}`)},listener=async s=>{const{type:e,currentTarget:r}=s;if(prefixes.length)for(let{name:n,value:o,ownerElement:a}of $x(`./@*[${prefixes.map(c=>`name()="${c}${e}"`).join(" or ")}]`,r)){n=n.slice(0,-(e.length+1));const c=await awaitInterpreter(a.getAttribute(`${n}-env`)||n);registry$1.get(n).runEvent(c,o,s)}},addAllListeners=s=>{if(prefixes.length)for(let{name:e,ownerElement:r}of $x(`.//@*[${prefixes.map(n=>`starts-with(name(),"${n}")`).join(" or ")}]`,s)){const n=e.lastIndexOf("-"),o=e.slice(n+1);o!=="env"&&(r.addEventListener(o,listener),"disabled"in r&&!r.disabled&&(r.disabled=!0,env$1[e.slice(0,n)].then(()=>{r.disabled=!1})))}},CUSTOM_SELECTORS=[],types$1=new Map,waitList=new Map,handleCustomType=s=>{for(const e of CUSTOM_SELECTORS)if(s.matches(e)){const r=types$1.get(e),n=registry.get(r),{resolve:o}=waitList.get(r),{options:a,known:c}=n;if(!c.has(s)){c.add(s);const{interpreter:l,config:h,version:d,env:f,onerror:g,hooks:v}=a;let S;try{const x=workerURL(s);if(x){const y=XWorker$1.call(new Hook$1(null,v),x,{...nodeInfo(s,r),version:d,type:l,custom:r,config:s.getAttribute("config")||h||{},async:s.hasAttribute("async")});defineProperty(s,"xworker",{value:y}),o({type:r,xworker:y});return}}catch(x){S=x}const A=getRuntimeID(l,d),w=f||`${A}${h?`|${h}`:""}`,{interpreter:m,XWorker:b}=getDetails(r,w,A,d,h,l);m.then(x=>{const y=create$1(registry$1.get(l)),O=new Hook$1(x,v),k=function(...M){return b.apply(O,M)},P={...createResolved(y,r,structuredClone(configs.get(A)),x),XWorker:k};y.registerJSModule(x,"polyscript",{XWorker:k});for(const L of["Run","RunAsync"]){const M=createOverload(y,`r${L.slice(1)}`);let B="",j="";for(const V of code$1){const Q=v?.main?.[V];Q&&V.endsWith(L)&&(V.startsWith("codeBefore")?B=dedent$1(Q()):j=dedent$1(Q()))}j&&M(j,!1),B&&M(B,!0);let F,U;for(let V=2;V<js.length;V++){const Q=js[V],q=v?.main?.[Q];q&&Q.endsWith(L)&&(Q.startsWith("onBefore")?F=q:U=q)}polluteJS(y,P,s,L.endsWith("Async"),F,U)}n.queue=n.queue.then(()=>(o(P),S&&g?.(S,s),v?.main?.onReady?.(P,s)))})}}},registry=new Map;let dontBotherCount=0;const define$1=(s,e)=>{let r=s==null;if(r)s=`_ps${dontBotherCount++}`;else if(registry$1.has(s)||registry.has(s))throw new Error(`<script type="${s}"> already registered`);if(!registry$1.has(e?.interpreter))throw new Error("Unspecified interpreter");registry$1.set(s,registry$1.get(e.interpreter));const n=[`script[type="${s}"]`];if(whenDefined$1(s),r){const{hooks:o}=e,a=o?.main?.onReady;e={...e,hooks:{...o,main:{...o?.main,onReady(c,l){CUSTOM_SELECTORS.splice(CUSTOM_SELECTORS.indexOf(s),1),registry$1.delete(s),registry.delete(s),waitList.delete(s),l.remove(),a?.(c)}}}},document.head.append(assign(document.createElement("script"),{type:s}))}else n.push(`${s}-script`),prefixes.push(`${s}-`);for(const o of n)types$1.set(o,s);CUSTOM_SELECTORS.push(...n),registry.set(s,{options:assign({env:s},e),known:new WeakSet,queue:Promise.resolve()}),r||addAllListeners(document),$$$1(n.join(",")).forEach(handleCustomType)},whenDefined$1=s=>(waitList.has(s)||waitList.set(s,Promise.withResolvers()),waitList.get(s).promise),[{define,whenDefined,env,Hook,XWorker},alreadyLive]=stickyModule("polyscript",{define:define$1,whenDefined:whenDefined$1,env:env$1,Hook:Hook$1,XWorker:XWorker$1});if(!alreadyLive){const s=new MutationObserver(o=>{const a=selectors.join(",");for(const{type:c,target:l,attributeName:h,addedNodes:d}of o){if(c==="attributes"){const f=h.lastIndexOf("-")+1;if(f){const g=h.slice(0,f);for(const v of prefixes)if(g===v){const S=h.slice(f);if(S!=="env"){const A=l.hasAttribute(h)?"add":"remove";l[`${A}EventListener`](S,listener)}break}}continue}for(const f of d)f.nodeType===1&&(addAllListeners(f),a&&f.matches(a)?handle(f):e(a,f,!0))}}),e=(o,a,c)=>{o&&$$$1(o,a).forEach(handle),o=CUSTOM_SELECTORS.join(","),o&&(c&&handleCustomType(a),$$$1(o,a).forEach(handleCustomType))},r=o=>(s.observe(o,{childList:!0,subtree:!0,attributes:!0}),o),{attachShadow:n}=Element.prototype;assign(Element.prototype,{attachShadow(o){return r(n.call(this,o))}}),queueMicrotask(()=>{addAllListeners(r(document)),e(selectors.join(","),document,!1)})}class $e8379818650e2442$export$93654d4f2d6cd524{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return $e8379818650e2442$var$concatArrayBuffers(e).buffer}}function $e8379818650e2442$var$concatArrayBuffers(s){let e=0;for(const o of s)e+=o.byteLength;const r=new Uint8Array(e);let n=0;for(const o of s){const a=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);r.set(a,n),n+=o.byteLength}return r}function $0cfd7828ad59115f$export$417857010dc9287f(s){return new $0cfd7828ad59115f$var$Unpacker(s).unpack()}function $0cfd7828ad59115f$export$2a703dbb0cb35339(s){const e=new $0cfd7828ad59115f$export$b9ec4b114aa40074;return e.pack(s),e.getBuffer()}class $0cfd7828ad59115f$var$Unpacker{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let n=0,o="",a,c;for(;n<e;)a=r[n],a<160?(c=a,n++):(a^192)<32?(c=(a&31)<<6|r[n+1]&63,n+=2):(a^224)<16?(c=(a&15)<<12|(r[n+1]&63)<<6|r[n+2]&63,n+=3):(c=(a&7)<<18|(r[n+1]&63)<<12|(r[n+2]&63)<<6|r[n+3]&63,n+=4),o+=String.fromCodePoint(c);return this.index+=e,o}unpack_array(e){const r=new Array(e);for(let n=0;n<e;n++)r[n]=this.unpack();return r}unpack_map(e){const r={};for(let n=0;n<e;n++){const o=this.unpack();r[o]=this.unpack()}return r}unpack_float(){const e=this.unpack_uint32(),r=e>>31,n=(e>>23&255)-127,o=e&8388607|8388608;return(r===0?1:-1)*o*2**(n-23)}unpack_double(){const e=this.unpack_uint32(),r=this.unpack_uint32(),n=e>>31,o=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(o-20)+r*2**(o-52);return(n===0?1:-1)*c}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class $0cfd7828ad59115f$export$b9ec4b114aa40074{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array)this.pack_array(e);else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const n=e;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else throw new Error(`Type "${r.toString()}" not yet supported`)}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),n=r.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");for(let n=0;n<r;n++)this.pack(e[n])}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let r=0;e<0&&(r=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),o=e/2**n-1,a=Math.floor(o*2**52),c=2**32,l=r<<31|n+1023<<20|a/c&1048575,h=a%c;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(h)}pack_object(e){const n=Object.keys(e).length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(const o in e)e.hasOwnProperty(o)&&(this.pack(o),this.pack(e[o]))}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const r=e&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(e){const r=e/4294967296,n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const r=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new $e8379818650e2442$export$93654d4f2d6cd524,this._textEncoder=new TextEncoder}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(s,e,r){const n=s.match(e);return n&&n.length>=r&&parseInt(n[r],10)}function wrapPeerConnectionEvent(s,e,r){if(!s.RTCPeerConnection)return;const n=s.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(c,l){if(c!==e)return o.apply(this,arguments);const h=d=>{const f=r(d);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,h),o.apply(this,[c,h])};const a=n.removeEventListener;n.removeEventListener=function(c,l){if(c!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const h=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,h])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function disableLog(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(logDisabled_=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(deprecationWarnings_=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(s,e){deprecationWarnings_&&console.warn(s+" is deprecated, please use "+e+" instead.")}function detectBrowser(s){const e={browser:null,version:null};if(typeof s>"u"||!s.navigator||!s.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=s;if(r.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||s.isSecureContext===!1&&s.webkitRTCPeerConnection)e.browser="chrome",e.version=extractVersion(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject$1(s){return Object.prototype.toString.call(s)==="[object Object]"}function compactObject(s){return isObject$1(s)?Object.keys(s).reduce(function(e,r){const n=isObject$1(s[r]),o=n?compactObject(s[r]):s[r],a=n&&!Object.keys(o).length;return o===void 0||a?e:Object.assign(e,{[r]:o})},{}):s}function walkStats(s,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?walkStats(s,s.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(o=>{walkStats(s,s.get(o),r)})}))}function filterStats(s,e,r){const n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(e===null)return o;const a=[];return s.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&a.push(c)}),a.forEach(c=>{s.forEach(l=>{l.type===n&&l.trackId===c.id&&walkStats(s,l,o)})}),o}const logging=log;function shimGetUserMedia$2(s,e){const r=s&&s.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const h={};return Object.keys(l).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const f=typeof l[d]=="object"?l[d]:{ideal:l[d]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const g=function(v,S){return v?v+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(f.ideal!==void 0){h.optional=h.optional||[];let v={};typeof f.ideal=="number"?(v[g("min",d)]=f.ideal,h.optional.push(v),v={},v[g("max",d)]=f.ideal,h.optional.push(v)):(v[g("",d)]=f.ideal,h.optional.push(v))}f.exact!==void 0&&typeof f.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[g("",d)]=f.exact):["min","max"].forEach(v=>{f[v]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[g(v,d)]=f[v])})}),l.advanced&&(h.optional=(h.optional||[]).concat(l.advanced)),h},o=function(l,h){if(e.version>=61)return h(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const d=function(f,g,v){g in f&&!(v in f)&&(f[v]=f[g],delete f[g])};l=JSON.parse(JSON.stringify(l)),d(l.audio,"autoGainControl","googAutoGainControl"),d(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let d=l.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const f=e.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return r.mediaDevices.enumerateDevices().then(v=>{v=v.filter(A=>A.kind==="videoinput");let S=v.find(A=>g.some(w=>A.label.toLowerCase().includes(w)));return!S&&v.length&&g.includes("back")&&(S=v[v.length-1]),S&&(l.video.deviceId=d.exact?{exact:S.deviceId}:{ideal:S.deviceId}),l.video=n(l.video),logging("chrome: "+JSON.stringify(l)),h(l)})}l.video=n(l.video)}return logging("chrome: "+JSON.stringify(l)),h(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,h,d){o(l,f=>{r.webkitGetUserMedia(f,h,g=>{d&&d(a(g))})})};if(r.getUserMedia=c.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(h){return o(h,d=>l(d).then(f=>{if(d.audio&&!f.getAudioTracks().length||d.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(a(f))))}}}function shimGetDisplayMedia$1(s,e){if(!(s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices)&&s.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}s.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(o=>{const a=n.video&&n.video.width,c=n.video&&n.video.height,l=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o,maxFrameRate:l||3}},a&&(n.video.mandatory.maxWidth=a),c&&(n.video.mandatory.maxHeight=c),s.navigator.mediaDevices.getUserMedia(n)})}}}function shimMediaStream(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function shimOnTrack$1(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",o=>{let a;s.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===o.track.id):a={track:o.track};const c=new Event("track");c.track=o.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)}),n.stream.getTracks().forEach(o=>{let a;s.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===o.id):a={track:o};const c=new Event("track");c.track=o,c.receiver=a,c.transceiver={receiver:a},c.streams=[n.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(s,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const e=function(o,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=o.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:o}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(l,h){let d=o.apply(this,arguments);return d||(d=e(this,l),this._senders.push(d)),d};const a=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const h=this._senders.indexOf(l);h!==-1&&this._senders.splice(h,1)}}const r=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(h=>h.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof s=="object"&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const e=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(o=>o._pc=this),n},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[n,o,a]=arguments;if(arguments.length>0&&typeof n=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof n!="function"))return e.apply(this,[]);const c=function(h){const d={};return h.result().forEach(g=>{const v={id:g.id,timestamp:g.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[g.type]||g.type};g.names().forEach(S=>{v[S]=g.stat(S)}),d[v.id]=v}),d},l=function(h){return new Map(Object.keys(h).map(d=>[d,h[d]]))};if(arguments.length>=2){const h=function(d){o(l(c(d)))};return e.apply(this,[h,n])}return new Promise((h,d)=>{e.apply(this,[function(f){h(l(c(f)))},d])}).then(o,a)}}function shimSenderReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const r=s.RTCPeerConnection.prototype.getSenders;r&&(s.RTCPeerConnection.prototype.getSenders=function(){const a=r.apply(this,[]);return a.forEach(c=>c._pc=this),a});const n=s.RTCPeerConnection.prototype.addTrack;n&&(s.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),s.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>filterStats(c,a.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const r=s.RTCPeerConnection.prototype.getReceivers;r&&(s.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(a=>a._pc=this),o}),wrapPeerConnectionEvent(s,"track",n=>(n.receiver._pc=n.srcElement,n)),s.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>filterStats(a,o.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype))return;const e=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const n=arguments[0];let o,a,c;return this.getSenders().forEach(l=>{l.track===n&&(o?c=!0:o=l)}),this.getReceivers().forEach(l=>(l.track===n&&(a?c=!0:a=l),l.track===n)),c||o&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(h)===-1&&this._shimmedLocalStreams[l.id].push(h):this._shimmedLocalStreams[l.id]=[l,h],h};const r=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const h=this.getSenders().filter(d=>l.indexOf(d)===-1);this._shimmedLocalStreams[c.id]=[c].concat(h)};const n=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],n.apply(this,arguments)};const o=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const h=this._shimmedLocalStreams[l].indexOf(c);h!==-1&&this._shimmedLocalStreams[l].splice(h,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),o.apply(this,arguments)}}function shimAddTrackRemoveTrack(s,e){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(s);const r=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(g=>this._reverseStreams[g.id])};const n=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(g=>{if(this.getSenders().find(S=>S.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const g=new s.MediaStream(f.getTracks());this._streams[f.id]=g,this._reverseStreams[g.id]=f,f=g}n.apply(this,[f])};const o=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},s.RTCPeerConnection.prototype.addTrack=function(f,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(w=>w===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(w=>w.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const A=this._streams[g.id];if(A)A.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const w=new s.MediaStream([f]);this._streams[g.id]=w,this._reverseStreams[w.id]=g,this.addStream(w)}return this.getSenders().find(w=>w.track===f)};function a(d,f){let g=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(v=>{const S=d._reverseStreams[v],A=d._streams[S.id];g=g.replace(new RegExp(A.id,"g"),S.id)}),new RTCSessionDescription({type:f.type,sdp:g})}function c(d,f){let g=f.sdp;return Object.keys(d._reverseStreams||[]).forEach(v=>{const S=d._reverseStreams[v],A=d._streams[S.id];g=g.replace(new RegExp(S.id,"g"),A.id)}),new RTCSessionDescription({type:f.type,sdp:g})}["createOffer","createAnswer"].forEach(function(d){const f=s.RTCPeerConnection.prototype[d],g={[d](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[A=>{const w=a(this,A);v[0].apply(null,[w])},A=>{v[1]&&v[1].apply(null,A)},arguments[2]]):f.apply(this,arguments).then(A=>a(this,A))}};s.RTCPeerConnection.prototype[d]=g[d]});const l=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const d=h.get.apply(this);return d.type===""?d:a(this,d)}}),s.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(w=>f.track===w)&&(v=this._streams[S])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(s,e){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=s.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};s.RTCPeerConnection.prototype[r]=o[r]})}function fixNegotiationNeeded(s,e){wrapPeerConnectionEvent(s,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(s,e){const r=s&&s.navigator,n=s&&s.MediaStreamTrack;if(r.getUserMedia=function(o,a,c){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(o).then(a,c)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const o=function(c,l,h){l in c&&!(h in c)&&(c[h]=c[l],delete c[l])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),o(c.audio,"autoGainControl","mozAutoGainControl"),o(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},n&&n.prototype.getSettings){const c=n.prototype.getSettings;n.prototype.getSettings=function(){const l=c.apply(this,arguments);return o(l,"mozAutoGainControl","autoGainControl"),o(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const c=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),o(l,"autoGainControl","mozAutoGainControl"),o(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function shimGetDisplayMedia(s,e){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,s.navigator.mediaDevices.getUserMedia(n)})}function shimOnTrack(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(s,e){if(typeof s!="object"||!(s.RTCPeerConnection||s.mozRTCPeerConnection))return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const a=s.RTCPeerConnection.prototype[o],c={[o](){return arguments[0]=new(o==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};s.RTCPeerConnection.prototype[o]=c[o]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return n.apply(this,[a||null]).then(h=>{if(e.version<53&&!c)try{h.forEach(d=>{d.type=r[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;h.forEach((f,g)=>{h.set(g,Object.assign({},f,{type:r[f.type]||f.type}))})}return h}).then(c,l)}}function shimSenderGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const e=s.RTCPeerConnection.prototype.getSenders;e&&(s.RTCPeerConnection.prototype.getSenders=function(){const o=e.apply(this,[]);return o.forEach(a=>a._pc=this),o});const r=s.RTCPeerConnection.prototype.addTrack;r&&(s.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const e=s.RTCPeerConnection.prototype.getReceivers;e&&(s.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(o=>o._pc=this),n}),wrapPeerConnectionEvent(s,"track",r=>(r.receiver._pc=r.srcElement,r)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(s){!s.RTCPeerConnection||"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(r){deprecated("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function shimRTCDataChannel(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function shimAddTransceiver(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.addTransceiver;e&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const o=n.length>0;o&&n.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(o){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,c.sendEncodings=n,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function shimGetParameters(s){if(!(typeof s=="object"&&s.RTCRtpSender))return;const e=s.RTCRtpSender.prototype.getParameters;e&&(s.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function shimCreateOffer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const e=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const e=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(o=>e.call(this,o,n)),n.getVideoTracks().forEach(o=>e.call(this,o,n))},s.RTCPeerConnection.prototype.addTrack=function(n,...o){return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const o=r.getTracks();this.getSenders().forEach(a=>{o.includes(a.track)&&this.removeTrack(a)})})}}function shimRemoteStreamsAPI(s){if(!(typeof s!="object"||!s.RTCPeerConnection)&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,this.dispatchEvent(a)})})}});const e=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,n.dispatchEvent(c)})}),e.apply(n,arguments)}}}function shimCallbacksAPI(s){if(typeof s!="object"||!s.RTCPeerConnection)return;const e=s.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,o=e.setLocalDescription,a=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(d,f){const g=arguments.length>=2?arguments[2]:arguments[0],v=r.apply(this,[g]);return f?(v.then(d,f),Promise.resolve()):v},e.createAnswer=function(d,f){const g=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[g]);return f?(v.then(d,f),Promise.resolve()):v};let l=function(h,d,f){const g=o.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g};e.setLocalDescription=l,l=function(h,d,f){const g=a.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g},e.setRemoteDescription=l,l=function(h,d,f){const g=c.apply(this,[h]);return f?(g.then(d,f),Promise.resolve()):g},e.addIceCandidate=l}function shimGetUserMedia(s){const e=s&&s.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=o=>n(shimConstraints(o))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,o,a){e.mediaDevices.getUserMedia(n).then(o,a)}.bind(e))}function shimConstraints(s){return s&&s.video!==void 0?Object.assign({},s,{video:compactObject(s.video)}):s}function shimRTCIceServerUrls(s){if(!s.RTCPeerConnection)return;const e=s.RTCPeerConnection;s.RTCPeerConnection=function(n,o){if(n&&n.iceServers){const a=[];for(let c=0;c<n.iceServers.length;c++){let l=n.iceServers[c];l.urls===void 0&&l.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(n.iceServers[c])}n.iceServers=a}return new e(n,o)},s.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(s){const e=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const o=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function shimAudioContext(s){typeof s!="object"||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver},Symbol.toStringTag,{value:"Module"}));var sdp$1={exports:{}};(function(s){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((o,a)=>(a>0?"m="+o:o).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(o=>o.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const o={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":o.relatedAddress=n[a+1];break;case"rport":o.relatedPort=parseInt(n[a+1],10);break;case"tcptype":o.tcpType=n[a+1];break;case"ufrag":o.ufrag=n[a+1],o.usernameFragment=n[a+1];break;default:o[n[a]]===void 0&&(o[n[a]]=n[a+1]);break}return o},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const o=r.component;o==="rtp"?n.push(1):o==="rtcp"?n.push(2):n.push(o),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const a=r.type;return n.push("typ"),n.push(a),a!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const o={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),o.name=n[0],o.clockRate=parseInt(n[1],10),o.channels=n.length===3?parseInt(n[2],10):1,o.numChannels=o.channels,o},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const o=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(o!==1?"/"+o:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let o;const a=r.substring(r.indexOf(" ")+1).split(";");for(let c=0;c<a.length;c++)o=a[c].trim().split("="),n[o[0].trim()]=o[1];return n},e.writeFmtp=function(r){let n="",o=r.payloadType;if(r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const a=[];Object.keys(r.parameters).forEach(c=>{r.parameters[c]!==void 0?a.push(c+"="+r.parameters[c]):a.push(c)}),n+="a=fmtp:"+o+" "+a.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",o=r.payloadType;return r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+o+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),o={ssrc:parseInt(r.substring(7,n),10)},a=r.indexOf(":",n);return a>-1?(o.attribute=r.substring(n+1,a),o.value=r.substring(a+1)):o.attribute=r.substring(n+1),o},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(o=>parseInt(o,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let o="a=setup:"+n+`\r
`;return r.fingerprints.forEach(a=>{o+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),o},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const o=e.matchPrefix(r+n,"a=ice-ufrag:")[0],a=e.matchPrefix(r+n,"a=ice-pwd:")[0];return o&&a?{usernameFragment:o.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(r)[0].split(" ");n.profile=a[2];for(let l=3;l<a.length;l++){const h=a[l],d=e.matchPrefix(r,"a=rtpmap:"+h+" ")[0];if(d){const f=e.parseRtpMap(d),g=e.matchPrefix(r,"a=fmtp:"+h+" ");switch(f.parameters=g.length?e.parseFmtp(g[0]):{},f.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),n.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(f.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const c=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{c.forEach(h=>{l.rtcpFeedback.find(f=>f.type===h.type&&f.parameter===h.parameter)||l.rtcpFeedback.push(h)})}),n},e.writeRtpDescription=function(r,n){let o="";o+="m="+r+" ",o+=n.codecs.length>0?"9":"0",o+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=n.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(c=>{o+=e.writeRtpMap(c),o+=e.writeFmtp(c),o+=e.writeRtcpFb(c)});let a=0;return n.codecs.forEach(c=>{c.maxptime>a&&(a=c.maxptime)}),a>0&&(o+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(c=>{o+=e.writeExtmap(c)}),o},e.parseRtpEncodingParameters=function(r){const n=[],o=e.parseRtpParameters(r),a=o.fecMechanisms.indexOf("RED")!==-1,c=o.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),h=l.length>0&&l[0].ssrc;let d;const f=e.matchPrefix(r,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(A=>parseInt(A,10)));f.length>0&&f[0].length>1&&f[0][0]===h&&(d=f[0][1]),o.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let S={ssrc:h,codecPayloadType:parseInt(v.parameters.apt,10)};h&&d&&(S.rtx={ssrc:d}),n.push(S),a&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:h,mechanism:c?"red+ulpfec":"red"},n.push(S))}}),n.length===0&&h&&n.push({ssrc:h});let g=e.matchPrefix(r,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-50*40*8:g=void 0,n.forEach(v=>{v.maxBitrate=g})),n},e.parseRtcpParameters=function(r){const n={},o=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];o&&(n.cname=o.value,n.ssrc=o.ssrc);const a=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;const c=e.matchPrefix(r,"a=rtcp-mux");return n.mux=c.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const o=e.matchPrefix(r,"a=msid:");if(o.length===1)return n=o[0].substring(7).split(" "),{stream:n[0],track:n[1]};const a=e.matchPrefix(r,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),o=e.matchPrefix(r,"a=max-message-size:");let a;o.length>0&&(a=parseInt(o[0].substring(19),10)),isNaN(a)&&(a=65536);const c=e.matchPrefix(r,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:n.fmt,maxMessageSize:a};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const h=l[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:a}}},e.writeSctpDescription=function(r,n){let o=[];return r.protocol!=="DTLS/SCTP"?o=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:o=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&o.push("a=max-message-size:"+n.maxMessageSize+`\r
`),o.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,o){let a;const c=n!==void 0?n:2;return r?a=r:a=e.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const o=e.splitLines(r);for(let a=0;a<o.length;a++)switch(o[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[a].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const o=e.splitLines(r)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},e.parseOLine=function(r){const o=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let o=0;o<n.length;o++)if(n[o].length<2||n[o].charAt(1)!=="=")return!1;return!0},s.exports=e})(sdp$1);var sdpExports=sdp$1.exports;const SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const e=s.RTCIceCandidate;s.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const o=new e(n),a=SDPUtils.parseCandidate(n.candidate);for(const c in a)c in o||Object.defineProperty(o,c,{value:a[c]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(n)},s.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(s,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new s.RTCIceCandidate(r.candidate),writable:"false"}),r))}function shimRTCIceCandidateRelayProtocol(s){!s.RTCIceCandidate||s.RTCIceCandidate&&"relayProtocol"in s.RTCIceCandidate.prototype||wrapPeerConnectionEvent(s,"icecandidate",e=>{if(e.candidate){const r=SDPUtils.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function shimMaxMessageSize(s,e){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const h=SDPUtils.splitSections(l.sdp);return h.shift(),h.some(d=>{const f=SDPUtils.parseMLine(d);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(l){const h=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const d=parseInt(h[1],10);return d!==d?-1:d},o=function(l){let h=65536;return e.browser==="firefox"&&(e.version<57?l===-1?h=16384:h=2147483637:e.version<60?h=e.version===57?65535:65536:h=2147483637),h},a=function(l,h){let d=65536;e.browser==="firefox"&&e.version===57&&(d=65535);const f=SDPUtils.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?d=parseInt(f[0].substring(19),10):e.browser==="firefox"&&h!==-1&&(d=2147483637),d},c=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const h=n(arguments[0]),d=o(h),f=a(arguments[0],h);let g;d===0&&f===0?g=Number.POSITIVE_INFINITY:d===0||f===0?g=Math.max(d,f):g=Math.min(d,f);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return g}}),this._sctp=v}return c.apply(this,arguments)}}function shimSendThrowTypeError(s){if(!(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype))return;function e(n,o){const a=n.send;n.send=function(){const l=arguments[0],h=l.length||l.size||l.byteLength;if(n.readyState==="open"&&o.sctp&&h>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const r=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const o=r.apply(this,arguments);return e(o,this),o},wrapPeerConnectionEvent(s,"datachannel",n=>(e(n.channel,n.target),n))}function shimConnectionState(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const e=s.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const a=o.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",o);a.dispatchEvent(c)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function removeExtmapAllowMixed(s,e){if(!s.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=o.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);s.RTCSessionDescription&&o instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:o.type,sdp:a}):o.sdp=a}return r.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const r=s.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(s,e){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const r=s.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(s.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return r.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?r.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>r.apply(this,[c]))})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:s}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=log,n=detectBrowser(s),o={browserDetails:n,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(n.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimGetUserMedia$2(s,n),shimMediaStream(s),shimPeerConnection$1(s,n),shimOnTrack$1(s),shimAddTrackRemoveTrack(s,n),shimGetSendersWithDtmf(s),shimGetStats(s),shimSenderReceiverGetStats(s),fixNegotiationNeeded(s,n),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimConnectionState(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,n);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimGetUserMedia$1(s,n),shimPeerConnection(s,n),shimOnTrack(s),shimRemoveStream(s),shimSenderGetStats(s),shimReceiverGetStats(s),shimRTCDataChannel(s),shimAddTransceiver(s),shimGetParameters(s),shimCreateOffer(s),shimCreateAnswer(s),shimRTCIceCandidate(s),shimConnectionState(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s);break;case"safari":if(!safariShim||!e.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(s,n),shimParameterlessSetLocalDescription(s),shimRTCIceServerUrls(s),shimCreateOfferLegacy(s),shimCallbacksAPI(s),shimLocalStreamsAPI(s),shimRemoteStreamsAPI(s),shimTrackEventTransceiver(s),shimGetUserMedia(s),shimAudioContext(s),shimRTCIceCandidate(s),shimRTCIceCandidateRelayProtocol(s),shimMaxMessageSize(s,n),shimSendThrowTypeError(s),removeExtmapAllowMixed(s,n);break;default:r("Unsupported browser!");break}return o}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(s,e,r,n){Object.defineProperty(s,e,{get:r,set:n,enumerable:!0,configurable:!0})}class $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],n=e.byteLength,o=Math.ceil(n/this.chunkedMTU);let a=0,c=0;for(;c<n;){const l=Math.min(n,c+this.chunkedMTU),h=e.slice(c,l),d={__peerData:this._dataCount,n:a,data:h,total:o};r.push(d),c=l,a++}return this._dataCount++,r}}}function $fcbcc7538a6776d5$export$52c89ebcdc4f53f2(s){let e=0;for(const o of s)e+=o.byteLength;const r=new Uint8Array(e);let n=0;for(const o of s)r.set(o,n),n+=o.byteLength;return r}const $fb63e766cfafaab9$var$webRTCAdapter=adapter.default||adapter,$fb63e766cfafaab9$export$25be9502477c137d=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const s=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(s)?s==="chrome"?e>=this.minChromeVersion:s==="firefox"?e>=this.minFirefoxVersion:s==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.browser}getVersion(){return $fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0}isUnifiedPlanSupported(){const s=this.getBrowser(),e=$fb63e766cfafaab9$var$webRTCAdapter.browserDetails.version||0;if(s==="chrome"&&e<this.minChromeVersion)return!1;if(s==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),n=!0}catch{}finally{r&&r.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$9a84a32bf0bf36bb$export$f35f128fd59ea256=s=>!s||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(s),$0e5fd1585784c252$export$4e61f672936bec77=()=>Math.random().toString(36).slice(2),$4f4134156c446392$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class $4f4134156c446392$export$f8f26dd395d7e1bd extends $fcbcc7538a6776d5$export$f1c5f4c9cb95390b{noop(){}blobToArrayBuffer(e,r){const n=new FileReader;return n.onload=function(o){o.target&&r(o.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=$4f4134156c446392$var$DEFAULT_CONFIG,this.browser=$fb63e766cfafaab9$export$25be9502477c137d.getBrowser(),this.browserVersion=$fb63e766cfafaab9$export$25be9502477c137d.getVersion(),this.pack=$0cfd7828ad59115f$export$2a703dbb0cb35339,this.unpack=$0cfd7828ad59115f$export$417857010dc9287f,this.supports=function(){const r={browser:$fb63e766cfafaab9$export$25be9502477c137d.isBrowserSupported(),webRTC:$fb63e766cfafaab9$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let n;try{n=new RTCPeerConnection($4f4134156c446392$var$DEFAULT_CONFIG),r.audioVideo=!0;let o;try{o=n.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!o.ordered;try{o.binaryType="blob",r.binaryBlob=!$fb63e766cfafaab9$export$25be9502477c137d.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{n&&n.close()}return r}(),this.validateId=$9a84a32bf0bf36bb$export$f35f128fd59ea256,this.randomToken=$0e5fd1585784c252$export$4e61f672936bec77}}const $4f4134156c446392$export$7debb50ef11d5e0b=new $4f4134156c446392$export$f8f26dd395d7e1bd,$257947e92926277a$var$LOG_PREFIX="PeerJS: ";var $257947e92926277a$export$243e62d78d3b544d;(function(s){s[s.Disabled=0]="Disabled",s[s.Errors=1]="Errors",s[s.Warnings=2]="Warnings",s[s.All=3]="All"})($257947e92926277a$export$243e62d78d3b544d||($257947e92926277a$export$243e62d78d3b544d={}));class $257947e92926277a$var$Logger{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.All&&this._print($257947e92926277a$export$243e62d78d3b544d.All,...e)}warn(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.Warnings&&this._print($257947e92926277a$export$243e62d78d3b544d.Warnings,...e)}error(...e){this._logLevel>=$257947e92926277a$export$243e62d78d3b544d.Errors&&this._print($257947e92926277a$export$243e62d78d3b544d.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...r){const n=[$257947e92926277a$var$LOG_PREFIX,...r];for(const o in n)n[o]instanceof Error&&(n[o]="("+n[o].name+") "+n[o].message);e>=$257947e92926277a$export$243e62d78d3b544d.All?console.log(...n):e>=$257947e92926277a$export$243e62d78d3b544d.Warnings?console.warn("WARNING",...n):e>=$257947e92926277a$export$243e62d78d3b544d.Errors&&console.error("ERROR",...n)}constructor(){this._logLevel=$257947e92926277a$export$243e62d78d3b544d.Disabled}}var $257947e92926277a$export$2e2bcd8739ae039=new $257947e92926277a$var$Logger,$c4dcfd1d1ea86647$exports={},$c4dcfd1d1ea86647$var$has=Object.prototype.hasOwnProperty,$c4dcfd1d1ea86647$var$prefix="~";function $c4dcfd1d1ea86647$var$Events(){}Object.create&&($c4dcfd1d1ea86647$var$Events.prototype=Object.create(null),new $c4dcfd1d1ea86647$var$Events().__proto__||($c4dcfd1d1ea86647$var$prefix=!1));function $c4dcfd1d1ea86647$var$EE(s,e,r){this.fn=s,this.context=e,this.once=r||!1}function $c4dcfd1d1ea86647$var$addListener(s,e,r,n,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new $c4dcfd1d1ea86647$var$EE(r,n||s,o),c=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;return s._events[c]?s._events[c].fn?s._events[c]=[s._events[c],a]:s._events[c].push(a):(s._events[c]=a,s._eventsCount++),s}function $c4dcfd1d1ea86647$var$clearEvent(s,e){--s._eventsCount===0?s._events=new $c4dcfd1d1ea86647$var$Events:delete s._events[e]}function $c4dcfd1d1ea86647$var$EventEmitter(){this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0}$c4dcfd1d1ea86647$var$EventEmitter.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)$c4dcfd1d1ea86647$var$has.call(r,n)&&e.push($c4dcfd1d1ea86647$var$prefix?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listeners=function(e){var r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,c=new Array(a);o<a;o++)c[o]=n[o].fn;return c};$c4dcfd1d1ea86647$var$EventEmitter.prototype.listenerCount=function(e){var r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,n=this._events[r];return n?n.fn?1:n.length:0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.emit=function(e,r,n,o,a,c){var l=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[l])return!1;var h=this._events[l],d=arguments.length,f,g;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,r),!0;case 3:return h.fn.call(h.context,r,n),!0;case 4:return h.fn.call(h.context,r,n,o),!0;case 5:return h.fn.call(h.context,r,n,o,a),!0;case 6:return h.fn.call(h.context,r,n,o,a,c),!0}for(g=1,f=new Array(d-1);g<d;g++)f[g-1]=arguments[g];h.fn.apply(h.context,f)}else{var v=h.length,S;for(g=0;g<v;g++)switch(h[g].once&&this.removeListener(e,h[g].fn,void 0,!0),d){case 1:h[g].fn.call(h[g].context);break;case 2:h[g].fn.call(h[g].context,r);break;case 3:h[g].fn.call(h[g].context,r,n);break;case 4:h[g].fn.call(h[g].context,r,n,o);break;default:if(!f)for(S=1,f=new Array(d-1);S<d;S++)f[S-1]=arguments[S];h[g].fn.apply(h[g].context,f)}}return!0};$c4dcfd1d1ea86647$var$EventEmitter.prototype.on=function(e,r,n){return $c4dcfd1d1ea86647$var$addListener(this,e,r,n,!1)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.once=function(e,r,n){return $c4dcfd1d1ea86647$var$addListener(this,e,r,n,!0)};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener=function(e,r,n,o){var a=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e;if(!this._events[a])return this;if(!r)return $c4dcfd1d1ea86647$var$clearEvent(this,a),this;var c=this._events[a];if(c.fn)c.fn===r&&(!o||c.once)&&(!n||c.context===n)&&$c4dcfd1d1ea86647$var$clearEvent(this,a);else{for(var l=0,h=[],d=c.length;l<d;l++)(c[l].fn!==r||o&&!c[l].once||n&&c[l].context!==n)&&h.push(c[l]);h.length?this._events[a]=h.length===1?h[0]:h:$c4dcfd1d1ea86647$var$clearEvent(this,a)}return this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeAllListeners=function(e){var r;return e?(r=$c4dcfd1d1ea86647$var$prefix?$c4dcfd1d1ea86647$var$prefix+e:e,this._events[r]&&$c4dcfd1d1ea86647$var$clearEvent(this,r)):(this._events=new $c4dcfd1d1ea86647$var$Events,this._eventsCount=0),this};$c4dcfd1d1ea86647$var$EventEmitter.prototype.off=$c4dcfd1d1ea86647$var$EventEmitter.prototype.removeListener;$c4dcfd1d1ea86647$var$EventEmitter.prototype.addListener=$c4dcfd1d1ea86647$var$EventEmitter.prototype.on;$c4dcfd1d1ea86647$var$EventEmitter.prefixed=$c4dcfd1d1ea86647$var$prefix;$c4dcfd1d1ea86647$var$EventEmitter.EventEmitter=$c4dcfd1d1ea86647$var$EventEmitter;$c4dcfd1d1ea86647$exports=$c4dcfd1d1ea86647$var$EventEmitter;var $78455e22dea96b8c$exports={};$parcel$export($78455e22dea96b8c$exports,"ConnectionType",()=>$78455e22dea96b8c$export$3157d57b4135e3bc);$parcel$export($78455e22dea96b8c$exports,"PeerErrorType",()=>$78455e22dea96b8c$export$9547aaa2e39030ff);$parcel$export($78455e22dea96b8c$exports,"BaseConnectionErrorType",()=>$78455e22dea96b8c$export$7974935686149686);$parcel$export($78455e22dea96b8c$exports,"DataConnectionErrorType",()=>$78455e22dea96b8c$export$49ae800c114df41d);$parcel$export($78455e22dea96b8c$exports,"SerializationType",()=>$78455e22dea96b8c$export$89f507cf986a947);$parcel$export($78455e22dea96b8c$exports,"SocketEventType",()=>$78455e22dea96b8c$export$3b5c4a4b6354f023);$parcel$export($78455e22dea96b8c$exports,"ServerMessageType",()=>$78455e22dea96b8c$export$adb4a1754da6f10d);var $78455e22dea96b8c$export$3157d57b4135e3bc;(function(s){s.Data="data",s.Media="media"})($78455e22dea96b8c$export$3157d57b4135e3bc||($78455e22dea96b8c$export$3157d57b4135e3bc={}));var $78455e22dea96b8c$export$9547aaa2e39030ff;(function(s){s.BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc"})($78455e22dea96b8c$export$9547aaa2e39030ff||($78455e22dea96b8c$export$9547aaa2e39030ff={}));var $78455e22dea96b8c$export$7974935686149686;(function(s){s.NegotiationFailed="negotiation-failed",s.ConnectionClosed="connection-closed"})($78455e22dea96b8c$export$7974935686149686||($78455e22dea96b8c$export$7974935686149686={}));var $78455e22dea96b8c$export$49ae800c114df41d;(function(s){s.NotOpenYet="not-open-yet",s.MessageToBig="message-too-big"})($78455e22dea96b8c$export$49ae800c114df41d||($78455e22dea96b8c$export$49ae800c114df41d={}));var $78455e22dea96b8c$export$89f507cf986a947;(function(s){s.Binary="binary",s.BinaryUTF8="binary-utf8",s.JSON="json",s.None="raw"})($78455e22dea96b8c$export$89f507cf986a947||($78455e22dea96b8c$export$89f507cf986a947={}));var $78455e22dea96b8c$export$3b5c4a4b6354f023;(function(s){s.Message="message",s.Disconnected="disconnected",s.Error="error",s.Close="close"})($78455e22dea96b8c$export$3b5c4a4b6354f023||($78455e22dea96b8c$export$3b5c4a4b6354f023={}));var $78455e22dea96b8c$export$adb4a1754da6f10d;(function(s){s.Heartbeat="HEARTBEAT",s.Candidate="CANDIDATE",s.Offer="OFFER",s.Answer="ANSWER",s.Open="OPEN",s.Error="ERROR",s.IdTaken="ID-TAKEN",s.InvalidKey="INVALID-KEY",s.Leave="LEAVE",s.Expire="EXPIRE"})($78455e22dea96b8c$export$adb4a1754da6f10d||($78455e22dea96b8c$export$adb4a1754da6f10d={}));var $f5f881ec4575f1fc$exports={};$f5f881ec4575f1fc$exports=JSON.parse('{"name":"peerjs","version":"1.5.1","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"^1.5.3","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.0.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class $8f5bfa60836d261d$export$4798917dbf149b79 extends $c4dcfd1d1ea86647$exports.EventEmitter{constructor(e,r,n,o,a,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const l=e?"wss://":"ws://";this._baseUrl=l+r+":"+n+o+"peerjs?key="+a}start(e,r){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+$f5f881ec4575f1fc$exports.version),this._disconnected=!1,this._socket.onmessage=o=>{let a;try{a=JSON.parse(o.data),$257947e92926277a$export$2e2bcd8739ae039.log("Server message received:",a)}catch{$257947e92926277a$export$2e2bcd8739ae039.log("Invalid server message",o.data);return}this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,a)},this._socket.onclose=o=>{this._disconnected||($257947e92926277a$export$2e2bcd8739ae039.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),$257947e92926277a$export$2e2bcd8739ae039.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){$257947e92926277a$export$2e2bcd8739ae039.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const n=this.connection,o={ordered:!!e.reliable},a=r.createDataChannel(n.label,o);n._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){$257947e92926277a$export$2e2bcd8739ae039.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,n=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||($257947e92926277a$export$2e2bcd8739ae039.log(`Received ICE candidates for ${r}:`,c.candidate),a.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Candidate,payload:{candidate:c.candidate,type:o,connectionId:n},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError($78455e22dea96b8c$export$7974935686149686.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":$257947e92926277a$export$2e2bcd8739ae039.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for data channel"),e.ondatachannel=c=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received data channel");const l=c.channel;a.getConnection(r,n)._initializeDataChannel(l)},$257947e92926277a$export$2e2bcd8739ae039.log("Listening for remote stream"),e.ontrack=c=>{$257947e92926277a$export$2e2bcd8739ae039.log("Received remote stream");const l=c.streams[0],h=a.getConnection(r,n);if(h.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const d=h;this._addStreamToMediaConnection(l,d)}}}cleanup(){$257947e92926277a$export$2e2bcd8739ae039.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const r=e.signalingState!=="closed";let n=!1;const o=this.connection.dataChannel;o&&(n=!!o.readyState&&o.readyState!=="closed"),(r||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);$257947e92926277a$export$2e2bcd8739ae039.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",n,`for:${this.connection.peer}`);let o={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const a=this.connection;o={...o,label:a.label,reliable:a.reliable,serialization:a.serialization}}r.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,o),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",o))}}catch(n){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,n),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createAnswer();$257947e92926277a$export$2e2bcd8739ae039.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),$257947e92926277a$export$2e2bcd8739ae039.log("Set localDescription:",n,`for:${this.connection.peer}`),r.socket.send({type:$78455e22dea96b8c$export$adb4a1754da6f10d.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,o),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setLocalDescription, ",o)}}catch(n){r.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,n),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to create answer, ",n)}}async handleSDP(e,r){r=new RTCSessionDescription(r);const n=this.connection.peerConnection,o=this.connection.provider;$257947e92926277a$export$2e2bcd8739ae039.log("Setting remote description",r);const a=this;try{await n.setRemoteDescription(r),$257947e92926277a$export$2e2bcd8739ae039.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await a._makeAnswer()}catch(c){o.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,c),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){$257947e92926277a$export$2e2bcd8739ae039.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),$257947e92926277a$export$2e2bcd8739ae039.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.WebRTC,r),$257947e92926277a$export$2e2bcd8739ae039.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(e,r){if($257947e92926277a$export$2e2bcd8739ae039.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return $257947e92926277a$export$2e2bcd8739ae039.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{r.addTrack(n,e)})}_addStreamToMediaConnection(e,r){$257947e92926277a$export$2e2bcd8739ae039.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class $23779d1881157a18$export$6a678e589c8a4542 extends $c4dcfd1d1ea86647$exports.EventEmitter{emitError(e,r){$257947e92926277a$export$2e2bcd8739ae039.error("Error:",r),this.emit("error",new $23779d1881157a18$export$98871882f492de82(`${e}`,r))}}class $23779d1881157a18$export$98871882f492de82 extends Error{constructor(e,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=e}}class $5045192fc6d387ba$export$23a2a68283c24d80 extends $23779d1881157a18$export$6a678e589c8a4542{get open(){return this._open}constructor(e,r,n){super(),this.peer=e,this.provider=r,this.options=n,this._open=!1,this.metadata=n.metadata}}class $5c1d08c7c57da9a3$export$4a84e95a2324ac29 extends $5045192fc6d387ba$export$23a2a68283c24d80{static#e=(()=>{this.ID_PREFIX="mc_"})();get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,n){super(e,r,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||$5c1d08c7c57da9a3$export$4a84e95a2324ac29.ID_PREFIX+$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){$257947e92926277a$export$2e2bcd8739ae039.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,n=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(r,n.sdp),this._open=!0;break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(e,r={}){if(this._localStream){$257947e92926277a$export$2e2bcd8739ae039.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const o of n)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class $abf266641927cd89$export$2c4e825dc9120f87{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:n,port:o,path:a,key:c}=this._options,l=new URL(`${r}://${n}:${o}${a}${c}/${e}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",$f5f881ec4575f1fc$exports.version),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){$257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving ID",e);let r="";throw this._options.path==="/"&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let r="";throw this._options.host===$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw $257947e92926277a$export$2e2bcd8739ae039.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class $6366c4ca161bc297$export$d365f7ad9d7df9c9 extends $5045192fc6d387ba$export$23a2a68283c24d80{static#e=(()=>{this.ID_PREFIX="dc_"})();static#t=(()=>{this.MAX_BUFFERED_AMOUNT=8388608})();get type(){return $78455e22dea96b8c$export$3157d57b4135e3bc.Data}constructor(e,r,n){super(e,r,n),this.connectionId=this.options.connectionId||$6366c4ca161bc297$export$d365f7ad9d7df9c9.ID_PREFIX+$0e5fd1585784c252$export$4e61f672936bec77(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new $b82fb8fc0514bfc1$export$89e6bb5ad64bf4a(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,r=!1){if(!this.open){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,r)}async handleMessage(e){const r=e.payload;switch(e.type){case $78455e22dea96b8c$export$adb4a1754da6f10d.Answer:await this._negotiator.handleSDP(e.type,r.sdp);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:$257947e92926277a$export$2e2bcd8739ae039.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b extends $6366c4ca161bc297$export$d365f7ad9d7df9c9{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>$6366c4ca161bc297$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return $257947e92926277a$export$2e2bcd8739ae039.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class $9fcfddb3ae148f88$export$f0a5a64d5bb37108 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{close(e){super.close(e),this._chunkedData={}}constructor(e,r,n){super(e,r,n),this.chunker=new $fcbcc7538a6776d5$export$f1c5f4c9cb95390b,this.serialization=$78455e22dea96b8c$export$89f507cf986a947.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=$0cfd7828ad59115f$export$417857010dc9287f(e),n=r.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(e){const r=e.__peerData,n=this._chunkedData[r]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[r]=n,n.total===n.count){delete this._chunkedData[r];const o=$fcbcc7538a6776d5$export$52c89ebcdc4f53f2(n.data);this._handleDataMessage({data:o})}}_send(e,r){if(e instanceof Blob)return e.arrayBuffer().then(o=>{this._send(o,r)});const n=$0cfd7828ad59115f$export$2a703dbb0cb35339(e);if(!r&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const r=this.chunker.chunk(e);$257947e92926277a$export$2e2bcd8739ae039.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const n of r)this.send(n,!0)}}class $bbaee3f15f714663$export$6f88fe47d32c9c94 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.None}}class $817f931e3f9096cf$export$48880ac635f47186 extends $a229bedbcaa6ca23$export$ff7c9d4c11d94e8b{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),n=r.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",r)}_send(e,r){const n=this.encoder.encode(this.stringify(e));if(n.byteLength>=$4f4134156c446392$export$7debb50ef11d5e0b.chunkedMTU){this.emitError($78455e22dea96b8c$export$49ae800c114df41d.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=$78455e22dea96b8c$export$89f507cf986a947.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class $416260bce337df90$export$ecd1fc136c422448 extends $23779d1881157a18$export$6a678e589c8a4542{static#e=(()=>{this.DEFAULT_KEY="peerjs"})();get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,n]of this._connections)e[r]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){super(),this._serializers={raw:$bbaee3f15f714663$export$6f88fe47d32c9c94,json:$817f931e3f9096cf$export$48880ac635f47186,binary:$9fcfddb3ae148f88$export$f0a5a64d5bb37108,"binary-utf8":$9fcfddb3ae148f88$export$f0a5a64d5bb37108,default:$9fcfddb3ae148f88$export$f0a5a64d5bb37108},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(e&&e.constructor==Object?r=e:e&&(n=e.toString()),r={debug:0,host:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST,port:$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:$416260bce337df90$export$ecd1fc136c422448.DEFAULT_KEY,token:$4f4134156c446392$export$7debb50ef11d5e0b.randomToken(),config:$4f4134156c446392$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST?this._options.secure=$4f4134156c446392$export$7debb50ef11d5e0b.isSecure():this._options.host==$4f4134156c446392$export$7debb50ef11d5e0b.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&$257947e92926277a$export$2e2bcd8739ae039.setLogFunction(this._options.logFunction),$257947e92926277a$export$2e2bcd8739ae039.logLevel=this._options.debug||0,this._api=new $abf266641927cd89$export$2c4e825dc9120f87(r),this._socket=this._createServerConnection(),!$4f4134156c446392$export$7debb50ef11d5e0b.supports.audioVideo&&!$4f4134156c446392$export$7debb50ef11d5e0b.supports.data){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!$4f4134156c446392$export$7debb50ef11d5e0b.validateId(n)){this._delayedAbort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,o))}_createServerConnection(){const e=new $8f5bfa60836d261d$export$4798917dbf149b79(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Message,r=>{this._handleMessage(r)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Error,r=>{this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketError,r)}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Disconnected,()=>{this.disconnected||(this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Network,"Lost connection to server."),this.disconnect())}),e.on($78455e22dea96b8c$export$3b5c4a4b6354f023.Close,()=>{this.disconnected||this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,n=e.payload,o=e.src;switch(r){case $78455e22dea96b8c$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Error:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,n.msg);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.IdTaken:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.UnavailableID,`ID "${this.id}" is taken`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.InvalidKey:this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Leave:$257947e92926277a$export$2e2bcd8739ae039.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Expire:this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.PeerUnavailable,`Could not connect to peer ${o}`);break;case $78455e22dea96b8c$export$adb4a1754da6f10d.Offer:{const a=n.connectionId;let c=this.getConnection(o,a);if(c&&(c.close(),$257947e92926277a$export$2e2bcd8739ae039.warn(`Offer received for existing Connection ID:${a}`)),n.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Media){const h=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(o,this,{connectionId:a,_payload:n,metadata:n.metadata});c=h,this._addConnection(o,c),this.emit("call",h)}else if(n.type===$78455e22dea96b8c$export$3157d57b4135e3bc.Data){const h=new this._serializers[n.serialization](o,this,{connectionId:a,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});c=h,this._addConnection(o,c),this.emit("connection",h)}else{$257947e92926277a$export$2e2bcd8739ae039.warn(`Received malformed connection type:${n.type}`);return}const l=this._getMessages(a);for(const h of l)c.handleMessage(h);break}default:{if(!n){$257947e92926277a$export$2e2bcd8739ae039.warn(`You received a malformed message from ${o} of type ${r}`);return}const a=n.connectionId,c=this.getConnection(o,a);c&&c.peerConnection?c.handleMessage(e):a?this._storeMessage(a,e):$257947e92926277a$export$2e2bcd8739ae039.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,n),n}call(e,r,n={}){if(this.disconnected){$257947e92926277a$export$2e2bcd8739ae039.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($78455e22dea96b8c$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){$257947e92926277a$export$2e2bcd8739ae039.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new $5c1d08c7c57da9a3$export$4a84e95a2324ac29(e,this,{...n,_stream:r});return this._addConnection(e,o),o}_addConnection(e,r){$257947e92926277a$export$2e2bcd8739ae039.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const n=this._connections.get(e);if(!n)return null;for(const o of n)if(o.connectionId===r)return o;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){$257947e92926277a$export$2e2bcd8739ae039.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||($257947e92926277a$export$2e2bcd8739ae039.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const n of r)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;$257947e92926277a$export$2e2bcd8739ae039.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)$257947e92926277a$export$2e2bcd8739ae039.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$257947e92926277a$export$2e2bcd8739ae039.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=r=>{}){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort($78455e22dea96b8c$export$9547aaa2e39030ff.ServerError,r))}}class PeerJSTransport extends Emittery{peer;conns=new Map;constructor(e){super();let r={secure:!0,host:"mpyc-demo--headscale-ams3-c99f82e5.demo.mpyc.tech",port:443,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"}};try{e?this.peer=new $416260bce337df90$export$ecd1fc136c422448(e,r):this.peer=new $416260bce337df90$export$ecd1fc136c422448(r)}catch(n){console.warn(n)}this.addPeerEventHandlers(this.peer)}reconnect(){this.peer.reconnect()}id=()=>this.peer.id;addPeerEventHandlers(e){e.on("open",async r=>{this.emit("ready",r)}),e.on("error",async r=>{this.emit("error",r)}),e.on("close",async()=>{this.emit("closed")}),e.on("connection",async r=>{this.addConnEventHandlers(r)})}addConnEventHandlers(e){console.log(`transport:conn ${e.peer} is trying to connect`),e.on("open",async()=>{this.conns.set(e.peer,e),this.sendPeers(e),this.emit("conn:ready",e.peer)}),e.on("error",async r=>{this.emit("conn:error",{peerID:e.peer,err:r})}),e.on("close",async()=>{this.conns.delete(e.peer),this.emit("conn:disconnected",e.peer)}),e.on("data",async r=>{let{type:n,payload:o}=r;switch(n){case"peers":this.processNewPeers(o);break;default:this.emit("conn:data",{peerID:e.peer,data:r});break}})}async send(e,r,n){this.conns.get(e).send({type:r,payload:n})}destroy(){this.peer.destroy()}processNewPeers=async e=>{e.forEach(r=>{!this.conns.get(r)&&r!=this.peer.id&&this.connect(r)})};async broadcast(e,r){this.conns.forEach(n=>{this.send(n.peer,`user:${e}`,r)})}async sendPeers(e){e.send({type:"peers",payload:this.getPeers()})}getPeers(e=!1){let r=Array.from(this.conns,([n,o])=>o.peer);return e&&r.push(this.peer.id),r.sort()}async connect(e){let r=this.peer.connect(e,{reliable:!0});this.addConnEventHandlers(r)}}var top$1="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top$1,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(s,e){return s.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(s,e){return s.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write,afterWrite];function getNodeName(s){return s?(s.nodeName||"").toLowerCase():null}function getWindow(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function isElement$1(s){var e=getWindow(s).Element;return s instanceof e||s instanceof Element}function isHTMLElement(s){var e=getWindow(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function isShadowRoot(s){if(typeof ShadowRoot>"u")return!1;var e=getWindow(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function applyStyles(s){var e=s.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},o=e.attributes[r]||{},a=e.elements[r];!isHTMLElement(a)||!getNodeName(a)||(Object.assign(a.style,n),Object.keys(o).forEach(function(c){var l=o[c];l===!1?a.removeAttribute(c):a.setAttribute(c,l===!0?"":l)}))})}function effect$2(s){var e=s.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var o=e.elements[n],a=e.attributes[n]||{},c=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=c.reduce(function(h,d){return h[d]="",h},{});!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,l),Object.keys(a).forEach(function(h){o.removeAttribute(h)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(s){return s.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect$1(s,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=s.getBoundingClientRect(),o=1,a=1;e&&isHTMLElement(s)&&(o=s.offsetWidth>0&&round(n.width)/s.offsetWidth||1,a=s.offsetHeight>0&&round(n.height)/s.offsetHeight||1);var c=isElement$1(s)?getWindow(s):window,l=c.visualViewport,h=!isLayoutViewport()&&r,d=(n.left+(h&&l?l.offsetLeft:0))/o,f=(n.top+(h&&l?l.offsetTop:0))/a,g=n.width/o,v=n.height/a;return{width:g,height:v,top:f,right:d+g,bottom:f+v,left:d,x:d,y:f}}function getLayoutRect(s){var e=getBoundingClientRect$1(s),r=s.offsetWidth,n=s.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:s.offsetLeft,y:s.offsetTop,width:r,height:n}}function contains$1(s,e){var r=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(r&&isShadowRoot(r)){var n=e;do{if(n&&s.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(s){return getWindow(s).getComputedStyle(s)}function isTableElement(s){return["table","td","th"].indexOf(getNodeName(s))>=0}function getDocumentElement(s){return((isElement$1(s)?s.ownerDocument:s.document)||window.document).documentElement}function getParentNode(s){return getNodeName(s)==="html"?s:s.assignedSlot||s.parentNode||(isShadowRoot(s)?s.host:null)||getDocumentElement(s)}function getTrueOffsetParent(s){return!isHTMLElement(s)||getComputedStyle$1(s).position==="fixed"?null:s.offsetParent}function getContainingBlock(s){var e=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(s)){var n=getComputedStyle$1(s);if(n.position==="fixed")return null}var o=getParentNode(s);for(isShadowRoot(o)&&(o=o.host);isHTMLElement(o)&&["html","body"].indexOf(getNodeName(o))<0;){var a=getComputedStyle$1(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function getOffsetParent(s){for(var e=getWindow(s),r=getTrueOffsetParent(s);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?e:r||getContainingBlock(s)||e}function getMainAxisFromPlacement(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function within(s,e,r){return max(s,min(e,r))}function withinMaxClamp(s,e,r){var n=within(s,e,r);return n>r?r:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(s){return Object.assign({},getFreshSideObject(),s)}function expandToHashMap(s,e){return e.reduce(function(r,n){return r[n]=s,r},{})}var toPaddingObject=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(s){var e,r=s.state,n=s.name,o=s.options,a=r.elements.arrow,c=r.modifiersData.popperOffsets,l=getBasePlacement(r.placement),h=getMainAxisFromPlacement(l),d=[left,right].indexOf(l)>=0,f=d?"height":"width";if(!(!a||!c)){var g=toPaddingObject(o.padding,r),v=getLayoutRect(a),S=h==="y"?top$1:left,A=h==="y"?bottom:right,w=r.rects.reference[f]+r.rects.reference[h]-c[h]-r.rects.popper[f],m=c[h]-r.rects.reference[h],b=getOffsetParent(a),x=b?h==="y"?b.clientHeight||0:b.clientWidth||0:0,y=w/2-m/2,O=g[S],k=x-v[f]-g[A],P=x/2-v[f]/2+y,L=within(O,P,k),M=h;r.modifiersData[n]=(e={},e[M]=L,e.centerOffset=L-P,e)}}function effect$1(s){var e=s.state,r=s.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||contains$1(e.elements.popper,o)&&(e.elements.arrow=o))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(s){return s.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(s,e){var r=s.x,n=s.y,o=e.devicePixelRatio||1;return{x:round(r*o)/o||0,y:round(n*o)/o||0}}function mapToStyles(s){var e,r=s.popper,n=s.popperRect,o=s.placement,a=s.variation,c=s.offsets,l=s.position,h=s.gpuAcceleration,d=s.adaptive,f=s.roundOffsets,g=s.isFixed,v=c.x,S=v===void 0?0:v,A=c.y,w=A===void 0?0:A,m=typeof f=="function"?f({x:S,y:w}):{x:S,y:w};S=m.x,w=m.y;var b=c.hasOwnProperty("x"),x=c.hasOwnProperty("y"),y=left,O=top$1,k=window;if(d){var P=getOffsetParent(r),L="clientHeight",M="clientWidth";if(P===getWindow(r)&&(P=getDocumentElement(r),getComputedStyle$1(P).position!=="static"&&l==="absolute"&&(L="scrollHeight",M="scrollWidth")),P=P,o===top$1||(o===left||o===right)&&a===end){O=bottom;var B=g&&P===k&&k.visualViewport?k.visualViewport.height:P[L];w-=B-n.height,w*=h?1:-1}if(o===left||(o===top$1||o===bottom)&&a===end){y=right;var j=g&&P===k&&k.visualViewport?k.visualViewport.width:P[M];S-=j-n.width,S*=h?1:-1}}var F=Object.assign({position:l},d&&unsetSides),U=f===!0?roundOffsetsByDPR({x:S,y:w},getWindow(r)):{x:S,y:w};if(S=U.x,w=U.y,h){var V;return Object.assign({},F,(V={},V[O]=x?"0":"",V[y]=b?"0":"",V.transform=(k.devicePixelRatio||1)<=1?"translate("+S+"px, "+w+"px)":"translate3d("+S+"px, "+w+"px, 0)",V))}return Object.assign({},F,(e={},e[O]=x?w+"px":"",e[y]=b?S+"px":"",e.transform="",e))}function computeStyles(s){var e=s.state,r=s.options,n=r.gpuAcceleration,o=n===void 0?!0:n,a=r.adaptive,c=a===void 0?!0:a,l=r.roundOffsets,h=l===void 0?!0:l,d={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(s){var e=s.state,r=s.instance,n=s.options,o=n.scroll,a=o===void 0?!0:o,c=n.resize,l=c===void 0?!0:c,h=getWindow(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(f){f.addEventListener("scroll",r.update,passive)}),l&&h.addEventListener("resize",r.update,passive),function(){a&&d.forEach(function(f){f.removeEventListener("scroll",r.update,passive)}),l&&h.removeEventListener("resize",r.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$2={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(s){return s.replace(/left|right|bottom|top/g,function(e){return hash$2[e]})}var hash$1={start:"end",end:"start"};function getOppositeVariationPlacement(s){return s.replace(/start|end/g,function(e){return hash$1[e]})}function getWindowScroll(s){var e=getWindow(s),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function getWindowScrollBarX(s){return getBoundingClientRect$1(getDocumentElement(s)).left+getWindowScroll(s).scrollLeft}function getViewportRect(s,e){var r=getWindow(s),n=getDocumentElement(s),o=r.visualViewport,a=n.clientWidth,c=n.clientHeight,l=0,h=0;if(o){a=o.width,c=o.height;var d=isLayoutViewport();(d||!d&&e==="fixed")&&(l=o.offsetLeft,h=o.offsetTop)}return{width:a,height:c,x:l+getWindowScrollBarX(s),y:h}}function getDocumentRect(s){var e,r=getDocumentElement(s),n=getWindowScroll(s),o=(e=s.ownerDocument)==null?void 0:e.body,a=max(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=max(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-n.scrollLeft+getWindowScrollBarX(s),h=-n.scrollTop;return getComputedStyle$1(o||r).direction==="rtl"&&(l+=max(r.clientWidth,o?o.clientWidth:0)-a),{width:a,height:c,x:l,y:h}}function isScrollParent(s){var e=getComputedStyle$1(s),r=e.overflow,n=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function getScrollParent(s){return["html","body","#document"].indexOf(getNodeName(s))>=0?s.ownerDocument.body:isHTMLElement(s)&&isScrollParent(s)?s:getScrollParent(getParentNode(s))}function listScrollParents(s,e){var r;e===void 0&&(e=[]);var n=getScrollParent(s),o=n===((r=s.ownerDocument)==null?void 0:r.body),a=getWindow(n),c=o?[a].concat(a.visualViewport||[],isScrollParent(n)?n:[]):n,l=e.concat(c);return o?l:l.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function getInnerBoundingClientRect(s,e){var r=getBoundingClientRect$1(s,!1,e==="fixed");return r.top=r.top+s.clientTop,r.left=r.left+s.clientLeft,r.bottom=r.top+s.clientHeight,r.right=r.left+s.clientWidth,r.width=s.clientWidth,r.height=s.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(s,e,r){return e===viewport?rectToClientRect(getViewportRect(s,r)):isElement$1(e)?getInnerBoundingClientRect(e,r):rectToClientRect(getDocumentRect(getDocumentElement(s)))}function getClippingParents(s){var e=listScrollParents(getParentNode(s)),r=["absolute","fixed"].indexOf(getComputedStyle$1(s).position)>=0,n=r&&isHTMLElement(s)?getOffsetParent(s):s;return isElement$1(n)?e.filter(function(o){return isElement$1(o)&&contains$1(o,n)&&getNodeName(o)!=="body"}):[]}function getClippingRect(s,e,r,n){var o=e==="clippingParents"?getClippingParents(s):[].concat(e),a=[].concat(o,[r]),c=a[0],l=a.reduce(function(h,d){var f=getClientRectFromMixedType(s,d,n);return h.top=max(f.top,h.top),h.right=min(f.right,h.right),h.bottom=min(f.bottom,h.bottom),h.left=max(f.left,h.left),h},getClientRectFromMixedType(s,c,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function computeOffsets(s){var e=s.reference,r=s.element,n=s.placement,o=n?getBasePlacement(n):null,a=n?getVariation(n):null,c=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,h;switch(o){case top$1:h={x:c,y:e.y-r.height};break;case bottom:h={x:c,y:e.y+e.height};break;case right:h={x:e.x+e.width,y:l};break;case left:h={x:e.x-r.width,y:l};break;default:h={x:e.x,y:e.y}}var d=o?getMainAxisFromPlacement(o):null;if(d!=null){var f=d==="y"?"height":"width";switch(a){case start:h[d]=h[d]-(e[f]/2-r[f]/2);break;case end:h[d]=h[d]+(e[f]/2-r[f]/2);break}}return h}function detectOverflow(s,e){e===void 0&&(e={});var r=e,n=r.placement,o=n===void 0?s.placement:n,a=r.strategy,c=a===void 0?s.strategy:a,l=r.boundary,h=l===void 0?clippingParents:l,d=r.rootBoundary,f=d===void 0?viewport:d,g=r.elementContext,v=g===void 0?popper:g,S=r.altBoundary,A=S===void 0?!1:S,w=r.padding,m=w===void 0?0:w,b=mergePaddingObject(typeof m!="number"?m:expandToHashMap(m,basePlacements)),x=v===popper?reference:popper,y=s.rects.popper,O=s.elements[A?x:v],k=getClippingRect(isElement$1(O)?O:O.contextElement||getDocumentElement(s.elements.popper),h,f,c),P=getBoundingClientRect$1(s.elements.reference),L=computeOffsets({reference:P,element:y,strategy:"absolute",placement:o}),M=rectToClientRect(Object.assign({},y,L)),B=v===popper?M:P,j={top:k.top-B.top+b.top,bottom:B.bottom-k.bottom+b.bottom,left:k.left-B.left+b.left,right:B.right-k.right+b.right},F=s.modifiersData.offset;if(v===popper&&F){var U=F[o];Object.keys(j).forEach(function(V){var Q=[right,bottom].indexOf(V)>=0?1:-1,q=[top$1,bottom].indexOf(V)>=0?"y":"x";j[V]+=U[q]*Q})}return j}function computeAutoPlacement(s,e){e===void 0&&(e={});var r=e,n=r.placement,o=r.boundary,a=r.rootBoundary,c=r.padding,l=r.flipVariations,h=r.allowedAutoPlacements,d=h===void 0?placements:h,f=getVariation(n),g=f?l?variationPlacements:variationPlacements.filter(function(A){return getVariation(A)===f}):basePlacements,v=g.filter(function(A){return d.indexOf(A)>=0});v.length===0&&(v=g);var S=v.reduce(function(A,w){return A[w]=detectOverflow(s,{placement:w,boundary:o,rootBoundary:a,padding:c})[getBasePlacement(w)],A},{});return Object.keys(S).sort(function(A,w){return S[A]-S[w]})}function getExpandedFallbackPlacements(s){if(getBasePlacement(s)===auto)return[];var e=getOppositePlacement(s);return[getOppositeVariationPlacement(s),e,getOppositeVariationPlacement(e)]}function flip(s){var e=s.state,r=s.options,n=s.name;if(!e.modifiersData[n]._skip){for(var o=r.mainAxis,a=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!0:c,h=r.fallbackPlacements,d=r.padding,f=r.boundary,g=r.rootBoundary,v=r.altBoundary,S=r.flipVariations,A=S===void 0?!0:S,w=r.allowedAutoPlacements,m=e.options.placement,b=getBasePlacement(m),x=b===m,y=h||(x||!A?[getOppositePlacement(m)]:getExpandedFallbackPlacements(m)),O=[m].concat(y).reduce(function(Te,Me){return Te.concat(getBasePlacement(Me)===auto?computeAutoPlacement(e,{placement:Me,boundary:f,rootBoundary:g,padding:d,flipVariations:A,allowedAutoPlacements:w}):Me)},[]),k=e.rects.reference,P=e.rects.popper,L=new Map,M=!0,B=O[0],j=0;j<O.length;j++){var F=O[j],U=getBasePlacement(F),V=getVariation(F)===start,Q=[top$1,bottom].indexOf(U)>=0,q=Q?"width":"height",G=detectOverflow(e,{placement:F,boundary:f,rootBoundary:g,altBoundary:v,padding:d}),te=Q?V?right:left:V?bottom:top$1;k[q]>P[q]&&(te=getOppositePlacement(te));var Y=getOppositePlacement(te),J=[];if(a&&J.push(G[U]<=0),l&&J.push(G[te]<=0,G[Y]<=0),J.every(function(Te){return Te})){B=F,M=!1;break}L.set(F,J)}if(M)for(var K=A?3:1,ne=function(Me){var Ie=O.find(function(ce){var pe=L.get(ce);if(pe)return pe.slice(0,Me).every(function(me){return me})});if(Ie)return B=Ie,"break"},de=K;de>0;de--){var Re=ne(de);if(Re==="break")break}e.placement!==B&&(e.modifiersData[n]._skip=!0,e.placement=B,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(s,e,r){return r===void 0&&(r={x:0,y:0}),{top:s.top-e.height-r.y,right:s.right-e.width+r.x,bottom:s.bottom-e.height+r.y,left:s.left-e.width-r.x}}function isAnySideFullyClipped(s){return[top$1,right,bottom,left].some(function(e){return s[e]>=0})}function hide(s){var e=s.state,r=s.name,n=e.rects.reference,o=e.rects.popper,a=e.modifiersData.preventOverflow,c=detectOverflow(e,{elementContext:"reference"}),l=detectOverflow(e,{altBoundary:!0}),h=getSideOffsets(c,n),d=getSideOffsets(l,o,a),f=isAnySideFullyClipped(h),g=isAnySideFullyClipped(d);e.modifiersData[r]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(s,e,r){var n=getBasePlacement(s),o=[left,top$1].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:s})):r,c=a[0],l=a[1];return c=c||0,l=(l||0)*o,[left,right].indexOf(n)>=0?{x:l,y:c}:{x:c,y:l}}function offset(s){var e=s.state,r=s.options,n=s.name,o=r.offset,a=o===void 0?[0,0]:o,c=placements.reduce(function(f,g){return f[g]=distanceAndSkiddingToXY(g,e.rects,a),f},{}),l=c[e.placement],h=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[n]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(s){var e=s.state,r=s.name;e.modifiersData[r]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(s){return s==="x"?"y":"x"}function preventOverflow(s){var e=s.state,r=s.options,n=s.name,o=r.mainAxis,a=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!1:c,h=r.boundary,d=r.rootBoundary,f=r.altBoundary,g=r.padding,v=r.tether,S=v===void 0?!0:v,A=r.tetherOffset,w=A===void 0?0:A,m=detectOverflow(e,{boundary:h,rootBoundary:d,padding:g,altBoundary:f}),b=getBasePlacement(e.placement),x=getVariation(e.placement),y=!x,O=getMainAxisFromPlacement(b),k=getAltAxis(O),P=e.modifiersData.popperOffsets,L=e.rects.reference,M=e.rects.popper,B=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,j=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(P){if(a){var V,Q=O==="y"?top$1:left,q=O==="y"?bottom:right,G=O==="y"?"height":"width",te=P[O],Y=te+m[Q],J=te-m[q],K=S?-M[G]/2:0,ne=x===start?L[G]:M[G],de=x===start?-M[G]:-L[G],Re=e.elements.arrow,Te=S&&Re?getLayoutRect(Re):{width:0,height:0},Me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Ie=Me[Q],ce=Me[q],pe=within(0,L[G],Te[G]),me=y?L[G]/2-K-pe-Ie-j.mainAxis:ne-pe-Ie-j.mainAxis,we=y?-L[G]/2+K+pe+ce+j.mainAxis:de+pe+ce+j.mainAxis,Xe=e.elements.arrow&&getOffsetParent(e.elements.arrow),Qe=Xe?O==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,Pe=(V=F?.[O])!=null?V:0,Ze=te+me-Pe-Qe,_e=te+we-Pe,qe=within(S?min(Y,Ze):Y,te,S?max(J,_e):J);P[O]=qe,U[O]=qe-te}if(l){var Be,mt=O==="x"?top$1:left,ht=O==="x"?bottom:right,Dt=P[k],Se=k==="y"?"height":"width",Ye=Dt+m[mt],Le=Dt-m[ht],ze=[top$1,left].indexOf(b)!==-1,Ue=(Be=F?.[k])!=null?Be:0,Ge=ze?Ye:Dt-L[Se]-M[Se]-Ue+j.altAxis,ut=ze?Dt+L[Se]+M[Se]-Ue-j.altAxis:Le,at=S&&ze?withinMaxClamp(Ge,Dt,ut):within(S?Ge:Ye,Dt,S?ut:Le);P[k]=at,U[k]=at-Dt}e.modifiersData[n]=U}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function getNodeScroll(s){return s===getWindow(s)||!isHTMLElement(s)?getWindowScroll(s):getHTMLElementScroll(s)}function isElementScaled(s){var e=s.getBoundingClientRect(),r=round(e.width)/s.offsetWidth||1,n=round(e.height)/s.offsetHeight||1;return r!==1||n!==1}function getCompositeRect(s,e,r){r===void 0&&(r=!1);var n=isHTMLElement(e),o=isHTMLElement(e)&&isElementScaled(e),a=getDocumentElement(e),c=getBoundingClientRect$1(s,o,r),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!r)&&((getNodeName(e)!=="body"||isScrollParent(a))&&(l=getNodeScroll(e)),isHTMLElement(e)?(h=getBoundingClientRect$1(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=getWindowScrollBarX(a))),{x:c.left+l.scrollLeft-h.x,y:c.top+l.scrollTop-h.y,width:c.width,height:c.height}}function order(s){var e=new Map,r=new Set,n=[];s.forEach(function(a){e.set(a.name,a)});function o(a){r.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(l){if(!r.has(l)){var h=e.get(l);h&&o(h)}}),n.push(a)}return s.forEach(function(a){r.has(a.name)||o(a)}),n}function orderModifiers(s){var e=order(s);return modifierPhases.reduce(function(r,n){return r.concat(e.filter(function(o){return o.phase===n}))},[])}function debounce$1(s){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(s())})})),e}}function mergeByName(s){var e=s.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function popperGenerator(s){s===void 0&&(s={});var e=s,r=e.defaultModifiers,n=r===void 0?[]:r,o=e.defaultOptions,a=o===void 0?DEFAULT_OPTIONS:o;return function(l,h,d){d===void 0&&(d=a);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,a),modifiersData:{},elements:{reference:l,popper:h},attributes:{},styles:{}},g=[],v=!1,S={state:f,setOptions:function(b){var x=typeof b=="function"?b(f.options):b;w(),f.options=Object.assign({},a,f.options,x),f.scrollParents={reference:isElement$1(l)?listScrollParents(l):l.contextElement?listScrollParents(l.contextElement):[],popper:listScrollParents(h)};var y=orderModifiers(mergeByName([].concat(n,f.options.modifiers)));return f.orderedModifiers=y.filter(function(O){return O.enabled}),A(),S.update()},forceUpdate:function(){if(!v){var b=f.elements,x=b.reference,y=b.popper;if(areValidElements(x,y)){f.rects={reference:getCompositeRect(x,getOffsetParent(y),f.options.strategy==="fixed"),popper:getLayoutRect(y)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(j){return f.modifiersData[j.name]=Object.assign({},j.data)});for(var O=0;O<f.orderedModifiers.length;O++){if(f.reset===!0){f.reset=!1,O=-1;continue}var k=f.orderedModifiers[O],P=k.fn,L=k.options,M=L===void 0?{}:L,B=k.name;typeof P=="function"&&(f=P({state:f,options:M,name:B,instance:S})||f)}}}},update:debounce$1(function(){return new Promise(function(m){S.forceUpdate(),m(f)})}),destroy:function(){w(),v=!0}};if(!areValidElements(l,h))return S;S.setOptions(d).then(function(m){!v&&d.onFirstUpdate&&d.onFirstUpdate(m)});function A(){f.orderedModifiers.forEach(function(m){var b=m.name,x=m.options,y=x===void 0?{}:x,O=m.effect;if(typeof O=="function"){var k=O({state:f,name:b,instance:S,options:y}),P=function(){};g.push(k||P)}})}function w(){g.forEach(function(m){return m()}),g=[]}return S}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,afterMain,afterRead,afterWrite,applyStyles:applyStyles$1,arrow:arrow$1,auto,basePlacements,beforeMain,beforeRead,beforeWrite,bottom,clippingParents,computeStyles:computeStyles$1,createPopper,createPopperBase:createPopper$2,createPopperLite:createPopper$1,detectOverflow,end,eventListeners,flip:flip$1,hide:hide$1,left,main:main$1,modifierPhases,offset:offset$1,placements,popper,popperGenerator,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1,read,reference,right,start,top:top$1,variationPlacements,viewport,write},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const elementMap=new Map,Data={set(s,e,r){elementMap.has(s)||elementMap.set(s,new Map);const n=elementMap.get(s);if(!n.has(e)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(e,r)},get(s,e){return elementMap.has(s)&&elementMap.get(s).get(e)||null},remove(s,e){if(!elementMap.has(s))return;const r=elementMap.get(s);r.delete(e),r.size===0&&elementMap.delete(s)}},MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",parseSelector=s=>(s&&window.CSS&&window.CSS.escape&&(s=s.replace(/#([^\s"#']+)/g,(e,r)=>`#${CSS.escape(r)}`)),s),toType=s=>s==null?`${s}`:Object.prototype.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=s=>{do s+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(s));return s},getTransitionDurationFromElement=s=>{if(!s)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(s);const n=Number.parseFloat(e),o=Number.parseFloat(r);return!n&&!o?0:(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=s=>{s.dispatchEvent(new Event(TRANSITION_END))},isElement=s=>!s||typeof s!="object"?!1:(typeof s.jquery<"u"&&(s=s[0]),typeof s.nodeType<"u"),getElement=s=>isElement(s)?s.jquery?s[0]:s:typeof s=="string"&&s.length>0?document.querySelector(parseSelector(s)):null,isVisible=s=>{if(!isElement(s)||s.getClientRects().length===0)return!1;const e=getComputedStyle(s).getPropertyValue("visibility")==="visible",r=s.closest("details:not([open])");if(!r)return e;if(r!==s){const n=s.closest("summary");if(n&&n.parentNode!==r||n===null)return!1}return e},isDisabled=s=>!s||s.nodeType!==Node.ELEMENT_NODE||s.classList.contains("disabled")?!0:typeof s.disabled<"u"?s.disabled:s.hasAttribute("disabled")&&s.getAttribute("disabled")!=="false",findShadowRoot=s=>{if(!document.documentElement.attachShadow)return null;if(typeof s.getRootNode=="function"){const e=s.getRootNode();return e instanceof ShadowRoot?e:null}return s instanceof ShadowRoot?s:s.parentNode?findShadowRoot(s.parentNode):null},noop=()=>{},reflow=s=>{s.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=s=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of DOMContentLoadedCallbacks)e()}),DOMContentLoadedCallbacks.push(s)):s()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=s=>{onDOMContentLoaded(()=>{const e=getjQuery();if(e){const r=s.NAME,n=e.fn[r];e.fn[r]=s.jQueryInterface,e.fn[r].Constructor=s,e.fn[r].noConflict=()=>(e.fn[r]=n,s.jQueryInterface)}})},execute=(s,e=[],r=s)=>typeof s=="function"?s(...e):r,executeAfterTransition=(s,e,r=!0)=>{if(!r){execute(s);return}const n=5,o=getTransitionDurationFromElement(e)+n;let a=!1;const c=({target:l})=>{l===e&&(a=!0,e.removeEventListener(TRANSITION_END,c),execute(s))};e.addEventListener(TRANSITION_END,c),setTimeout(()=>{a||triggerTransitionEnd(e)},o)},getNextActiveElement=(s,e,r,n)=>{const o=s.length;let a=s.indexOf(e);return a===-1?!r&&n?s[o-1]:s[0]:(a+=r?1:-1,n&&(a=(a+o)%o),s[Math.max(0,Math.min(a,o-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(s,e){return e&&`${e}::${uidEvent++}`||s.uidEvent||uidEvent++}function getElementEvents(s){const e=makeEventUid(s);return s.uidEvent=e,eventRegistry[e]=eventRegistry[e]||{},eventRegistry[e]}function bootstrapHandler(s,e){return function r(n){return hydrateObj(n,{delegateTarget:s}),r.oneOff&&EventHandler.off(s,n.type,e),e.apply(s,[n])}}function bootstrapDelegationHandler(s,e,r){return function n(o){const a=s.querySelectorAll(e);for(let{target:c}=o;c&&c!==this;c=c.parentNode)for(const l of a)if(l===c)return hydrateObj(o,{delegateTarget:c}),n.oneOff&&EventHandler.off(s,o.type,e,r),r.apply(c,[o])}}function findHandler(s,e,r=null){return Object.values(s).find(n=>n.callable===e&&n.delegationSelector===r)}function normalizeParameters(s,e,r){const n=typeof e=="string",o=n?r:e||r;let a=getTypeEvent(s);return nativeEvents.has(a)||(a=s),[n,o,a]}function addHandler(s,e,r,n,o){if(typeof e!="string"||!s)return;let[a,c,l]=normalizeParameters(e,r,n);e in customEvents&&(c=(A=>function(w){if(!w.relatedTarget||w.relatedTarget!==w.delegateTarget&&!w.delegateTarget.contains(w.relatedTarget))return A.call(this,w)})(c));const h=getElementEvents(s),d=h[l]||(h[l]={}),f=findHandler(d,c,a?r:null);if(f){f.oneOff=f.oneOff&&o;return}const g=makeEventUid(c,e.replace(namespaceRegex,"")),v=a?bootstrapDelegationHandler(s,r,c):bootstrapHandler(s,c);v.delegationSelector=a?r:null,v.callable=c,v.oneOff=o,v.uidEvent=g,d[g]=v,s.addEventListener(l,v,a)}function removeHandler(s,e,r,n,o){const a=findHandler(e[r],n,o);a&&(s.removeEventListener(r,a,!!o),delete e[r][a.uidEvent])}function removeNamespacedHandlers(s,e,r,n){const o=e[r]||{};for(const[a,c]of Object.entries(o))a.includes(n)&&removeHandler(s,e,r,c.callable,c.delegationSelector)}function getTypeEvent(s){return s=s.replace(stripNameRegex,""),customEvents[s]||s}const EventHandler={on(s,e,r,n){addHandler(s,e,r,n,!1)},one(s,e,r,n){addHandler(s,e,r,n,!0)},off(s,e,r,n){if(typeof e!="string"||!s)return;const[o,a,c]=normalizeParameters(e,r,n),l=c!==e,h=getElementEvents(s),d=h[c]||{},f=e.startsWith(".");if(typeof a<"u"){if(!Object.keys(d).length)return;removeHandler(s,h,c,a,o?r:null);return}if(f)for(const g of Object.keys(h))removeNamespacedHandlers(s,h,g,e.slice(1));for(const[g,v]of Object.entries(d)){const S=g.replace(stripUidRegex,"");(!l||e.includes(S))&&removeHandler(s,h,c,v.callable,v.delegationSelector)}},trigger(s,e,r){if(typeof e!="string"||!s)return null;const n=getjQuery(),o=getTypeEvent(e),a=e!==o;let c=null,l=!0,h=!0,d=!1;a&&n&&(c=n.Event(e,r),n(s).trigger(c),l=!c.isPropagationStopped(),h=!c.isImmediatePropagationStopped(),d=c.isDefaultPrevented());const f=hydrateObj(new Event(e,{bubbles:l,cancelable:!0}),r);return d&&f.preventDefault(),h&&s.dispatchEvent(f),f.defaultPrevented&&c&&c.preventDefault(),f}};function hydrateObj(s,e={}){for(const[r,n]of Object.entries(e))try{s[r]=n}catch{Object.defineProperty(s,r,{configurable:!0,get(){return n}})}return s}function normalizeData(s){if(s==="true")return!0;if(s==="false")return!1;if(s===Number(s).toString())return Number(s);if(s===""||s==="null")return null;if(typeof s!="string")return s;try{return JSON.parse(decodeURIComponent(s))}catch{return s}}function normalizeDataKey(s){return s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Manipulator={setDataAttribute(s,e,r){s.setAttribute(`data-bs-${normalizeDataKey(e)}`,r)},removeDataAttribute(s,e){s.removeAttribute(`data-bs-${normalizeDataKey(e)}`)},getDataAttributes(s){if(!s)return{};const e={},r=Object.keys(s.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of r){let o=n.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=normalizeData(s.dataset[n])}return e},getDataAttribute(s,e){return normalizeData(s.getAttribute(`data-bs-${normalizeDataKey(e)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,r){const n=isElement(r)?Manipulator.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...isElement(r)?Manipulator.getDataAttributes(r):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,r=this.constructor.DefaultType){for(const[n,o]of Object.entries(r)){const a=e[n],c=isElement(a)?"element":toType(a);if(!new RegExp(o).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${c}" but expected type "${o}".`)}}}const VERSION="5.3.2";class BaseComponent extends Config{constructor(e,r){super(),e=getElement(e),e&&(this._element=e,this._config=this._getConfig(r),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,r,n=!0){executeAfterTransition(e,r,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,r={}){return this.getInstance(e)||new this(e,typeof r=="object"?r:null)}static get VERSION(){return VERSION}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const getSelector=s=>{let e=s.getAttribute("data-bs-target");if(!e||e==="#"){let r=s.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&r!=="#"?parseSelector(r.trim()):null}return e},SelectorEngine={find(s,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,s))},findOne(s,e=document.documentElement){return Element.prototype.querySelector.call(e,s)},children(s,e){return[].concat(...s.children).filter(r=>r.matches(e))},parents(s,e){const r=[];let n=s.parentNode.closest(e);for(;n;)r.push(n),n=n.parentNode.closest(e);return r},prev(s,e){let r=s.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(s,e){let r=s.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(s){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(e,s).filter(r=>!isDisabled(r)&&isVisible(r))},getSelectorFromElement(s){const e=getSelector(s);return e&&SelectorEngine.findOne(e)?e:null},getElementFromSelector(s){const e=getSelector(s);return e?SelectorEngine.findOne(e):null},getMultipleElementsFromSelector(s){const e=getSelector(s);return e?SelectorEngine.find(e):[]}},enableDismissTrigger=(s,e="hide")=>{const r=`click.dismiss${s.EVENT_KEY}`,n=s.NAME;EventHandler.on(document,r,`[data-bs-dismiss="${n}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),isDisabled(this))return;const a=SelectorEngine.getElementFromSelector(this)||this.closest(`.${n}`);s.getOrCreateInstance(a)[e]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const r=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(e){return this.each(function(){const r=Alert.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(e){return this.each(function(){const r=Button.getOrCreateInstance(this);e==="toggle"&&r[e]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,s=>{s.preventDefault();const e=s.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(e).toggle()});defineJQueryPlugin(Button);const NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(e,r){super(),this._element=e,!(!e||!Swipe.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=SWIPE_THRESHOLD)return;const r=e/this._deltaX;this._deltaX=0,r&&execute(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,e=>this._start(e)),EventHandler.on(this._element,EVENT_POINTERUP,e=>this._end(e)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,e=>this._start(e)),EventHandler.on(this._element,EVENT_TOUCHMOVE,e=>this._move(e)),EventHandler.on(this._element,EVENT_TOUCHEND,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===POINTER_TYPE_PEN||e.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(e,r){super(e,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(e){const r=this._getItems();if(e>r.length-1||e<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(e));return}const n=this._getItemIndex(this._getActive());if(n===e)return;const o=e>n?ORDER_NEXT:ORDER_PREV;this._slide(o,r[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,e=>this._keydown(e)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(n,EVENT_DRAG_START,o=>o.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,r)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const r=KEY_TO_DIRECTION[e.key];r&&(e.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const r=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);r.classList.remove(CLASS_NAME_ACTIVE$2),r.removeAttribute("aria-current");const n=SelectorEngine.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(CLASS_NAME_ACTIVE$2),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const r=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(e,r=null){if(this._isSliding)return;const n=this._getActive(),o=e===ORDER_NEXT,a=r||getNextActiveElement(this._getItems(),n,o,this._config.wrap);if(a===n)return;const c=this._getItemIndex(a),l=S=>EventHandler.trigger(this._element,S,{relatedTarget:a,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:c});if(l(EVENT_SLIDE).defaultPrevented||!n||!a)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=a;const f=o?CLASS_NAME_START:CLASS_NAME_END,g=o?CLASS_NAME_NEXT:CLASS_NAME_PREV;a.classList.add(g),reflow(a),n.classList.add(f),a.classList.add(f);const v=()=>{a.classList.remove(f,g),a.classList.add(CLASS_NAME_ACTIVE$2),n.classList.remove(CLASS_NAME_ACTIVE$2,g,f),this._isSliding=!1,l(EVENT_SLID)};this._queueCallback(v,n,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return isRTL()?e===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:e===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(e){return isRTL()?e===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:e===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(e){return this.each(function(){const r=Carousel.getOrCreateInstance(this,e);if(typeof e=="number"){r.to(e);return}if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(s){const e=SelectorEngine.getElementFromSelector(this);if(!e||!e.classList.contains(CLASS_NAME_CAROUSEL))return;s.preventDefault();const r=Carousel.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){r.to(n),r._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const s=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const e of s)Carousel.getOrCreateInstance(e)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,r){super(e,r),this._isTransitioning=!1,this._triggerArray=[];const n=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const o of n){const a=SelectorEngine.getSelectorFromElement(o),c=SelectorEngine.find(a).filter(l=>l===this._element);a!==null&&c.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(l=>l!==this._element).map(l=>Collapse.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const l of e)l.hide();const n=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[n]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},c=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[n]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const o of this._triggerArray){const a=SelectorEngine.getElementFromSelector(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[r]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const r of e){const n=SelectorEngine.getElementFromSelector(r);n&&this._addAriaAndCollapsedClass([r],this._isShown(n))}}_getFirstLevelChildren(e){const r=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter(n=>!r.includes(n))}_addAriaAndCollapsedClass(e,r){if(e.length)for(const n of e)n.classList.toggle(CLASS_NAME_COLLAPSED,!r),n.setAttribute("aria-expanded",r)}static jQueryInterface(e){const r={};return typeof e=="string"&&/show|hide/.test(e)&&(r.toggle=!1),this.each(function(){const n=Collapse.getOrCreateInstance(this,r);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(s){(s.target.tagName==="A"||s.delegateTarget&&s.delegateTarget.tagName==="A")&&s.preventDefault();for(const e of SelectorEngine.getMultipleElementsFromSelector(this))Collapse.getOrCreateInstance(e,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(e,r){super(e,r),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const n of[].concat(...document.body.children))EventHandler.on(n,"mouseover",noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,e)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))EventHandler.off(n,"mouseover",noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!isElement(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:isElement(this._config.reference)?e=getElement(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const r=this._getPopperConfig();this._popper=createPopper(e,this._menu,r)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const e=this._parent;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(e.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(e.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(CLASS_NAME_DROPUP)?r?PLACEMENT_TOPEND:PLACEMENT_TOP:r?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...execute(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:r}){const n=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(o=>isVisible(o));n.length&&getNextActiveElement(n,r,e===ARROW_DOWN_KEY$1,!n.includes(r)).focus()}static jQueryInterface(e){return this.each(function(){const r=Dropdown.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}static clearMenus(e){if(e.button===RIGHT_MOUSE_BUTTON||e.type==="keyup"&&e.key!==TAB_KEY$1)return;const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const n of r){const o=Dropdown.getInstance(n);if(!o||o._config.autoClose===!1)continue;const a=e.composedPath(),c=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!c||o._config.autoClose==="outside"&&c||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:o._element};e.type==="click"&&(l.clickEvent=e),o._completeHide(l)}}static dataApiKeydownHandler(e){const r=/input|textarea/i.test(e.target.tagName),n=e.key===ESCAPE_KEY$2,o=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(e.key);if(!o&&!n||r&&!n)return;e.preventDefault();const a=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,e.delegateTarget.parentNode),c=Dropdown.getOrCreateInstance(a);if(o){e.stopPropagation(),c.show(),c._selectMenuItem(e);return}c._isShown()&&(e.stopPropagation(),c.hide(),a.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(s){s.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(e){if(!this._config.isVisible){execute(e);return}this._append();const r=this._getElement();this._config.isAnimated&&reflow(r),r.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(e)})}hide(e){if(!this._config.isVisible){execute(e);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(e)})}dispose(){this._isAppended&&(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(CLASS_NAME_FADE$4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=getElement(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),EventHandler.on(e,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,e=>this._handleFocusin(e)),EventHandler.on(document,EVENT_KEYDOWN_TAB,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(e){const{trapElement:r}=this._config;if(e.target===document||e.target===r||r.contains(e.target))return;const n=SelectorEngine.focusableChildren(r);n.length===0?r.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===TAB_KEY&&(this._lastTabNavDirection=e.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,r=>r-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,r,n){const o=this.getWidth(),a=c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+o)return;this._saveInitialAttribute(c,r);const l=window.getComputedStyle(c).getPropertyValue(r);c.style.setProperty(r,`${n(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,a)}_saveInitialAttribute(e,r){const n=e.style.getPropertyValue(r);n&&Manipulator.setDataAttribute(e,r,n)}_resetElementAttributes(e,r){const n=o=>{const a=Manipulator.getDataAttribute(o,r);if(a===null){o.style.removeProperty(r);return}Manipulator.removeDataAttribute(o,r),o.style.setProperty(r,a)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,r){if(isElement(e)){r(e);return}for(const n of SelectorEngine.find(e,this._element))r(n)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(e,r){super(e,r),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){EventHandler.off(window,EVENT_KEY$4),EventHandler.off(this._dialog,EVENT_KEY$4),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);r&&(r.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,e=>{if(e.key===ESCAPE_KEY$1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,e=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,r=>{if(!(this._element!==e.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),n=r>0;if(n&&!e){const o=isRTL()?"paddingLeft":"paddingRight";this._element.style[o]=`${r}px`}if(!n&&e){const o=isRTL()?"paddingRight":"paddingLeft";this._element.style[o]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,r){return this.each(function(){const n=Modal.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](r)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(s){const e=SelectorEngine.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&s.preventDefault(),EventHandler.one(e,EVENT_SHOW$4,o=>{o.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const r=SelectorEngine.findOne(OPEN_SELECTOR$1);r&&Modal.getInstance(r).hide(),Modal.getOrCreateInstance(e).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(e,r){super(e,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const r=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},r=!!this._config.backdrop;return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?e:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,e=>{if(e.key===ESCAPE_KEY){if(this._config.keyboard){this.hide();return}EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED)}})}static jQueryInterface(e){return this.each(function(){const r=Offcanvas.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(s){const e=SelectorEngine.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),isDisabled(this))return;EventHandler.one(e,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const r=SelectorEngine.findOne(OPEN_SELECTOR);r&&r!==e&&Offcanvas.getInstance(r).hide(),Offcanvas.getOrCreateInstance(e).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const s of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(s).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const s of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(s).position!=="fixed"&&Offcanvas.getOrCreateInstance(s).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),SAFE_URL_PATTERN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,allowedAttribute=(s,e)=>{const r=s.nodeName.toLowerCase();return e.includes(r)?uriAttributes.has(r)?!!SAFE_URL_PATTERN.test(s.nodeValue):!0:e.filter(n=>n instanceof RegExp).some(n=>n.test(r))};function sanitizeHtml(s,e,r){if(!s.length)return s;if(r&&typeof r=="function")return r(s);const o=new window.DOMParser().parseFromString(s,"text/html"),a=[].concat(...o.body.querySelectorAll("*"));for(const c of a){const l=c.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){c.remove();continue}const h=[].concat(...c.attributes),d=[].concat(e["*"]||[],e[l]||[]);for(const f of h)allowedAttribute(f,d)||c.removeAttribute(f.nodeName)}return o.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,a]of Object.entries(this._config.content))this._setContent(e,a,o);const r=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&r.classList.add(...n.split(" ")),r}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[r,n]of Object.entries(e))super._typeCheckConfig({selector:r,entry:n},DefaultContentType)}_setContent(e,r,n){const o=SelectorEngine.findOne(n,e);if(o){if(r=this._resolvePossibleFunction(r),!r){o.remove();return}if(isElement(r)){this._putElementInTemplate(getElement(r),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(r);return}o.textContent=r}}_maybeSanitize(e){return this._config.sanitize?sanitizeHtml(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return execute(e,[this])}_putElementInTemplate(e,r){if(this._config.html){r.innerHTML="",r.append(e);return}r.textContent=e.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(e,r){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),n=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:a}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(o),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(o),o.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))EventHandler.on(l,"mouseover",noop);const c=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(c,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))EventHandler.off(o,"mouseover",noop);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const r=this._getTemplateFactory(e).toHtml();if(!r)return null;r.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),r.classList.add(`bs-${this.constructor.NAME}-auto`);const n=getUID(this.constructor.NAME).toString();return r.setAttribute("id",n),this._isAnimated()&&r.classList.add(CLASS_NAME_FADE$2),r}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new TemplateFactory({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(e){const r=execute(this._config.placement,[this,e,this._element]),n=AttachmentMap[r.toUpperCase()];return createPopper(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_resolvePossibleFunction(e){return execute(e,[this._element])}_getPopperConfig(e){const r={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...r,...execute(this._config.popperConfig,[r])}}_setListeners(){const e=this._config.trigger.split(" ");for(const r of e)if(r==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(r!==TRIGGER_MANUAL){const n=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),o=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,n,this._config.selector,a=>{const c=this._initializeOnDelegatedTarget(a);c._activeTrigger[a.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,c._enter()}),EventHandler.on(this._element,o,this._config.selector,a=>{const c=this._initializeOnDelegatedTarget(a);c._activeTrigger[a.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=c._element.contains(a.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,r){clearTimeout(this._timeout),this._timeout=setTimeout(e,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const r=Manipulator.getDataAttributes(this._element);for(const n of Object.keys(r))DISALLOWED_ATTRIBUTES.has(n)&&delete r[n];return e={...r,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:getElement(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[r,n]of Object.entries(this._config))this.constructor.Default[r]!==n&&(e[r]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const r=Tooltip.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const r=Popover.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(e,r){super(e,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=getElement(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(r=>Number.parseFloat(r))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,e=>{const r=this._observableSections.get(e.target.hash);if(r){e.preventDefault();const n=this._rootElement||window,o=r.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:o,behavior:"smooth"});return}n.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),e)}_observerCallback(e){const r=c=>this._targetLinks.get(`#${c.target.id}`),n=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(r(c))},o=(this._rootElement||document.documentElement).scrollTop,a=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const c of e){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(c));continue}const l=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(a&&l){if(n(c),!o)return;continue}!a&&!l&&n(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const r of e){if(!r.hash||isDisabled(r))continue;const n=SelectorEngine.findOne(decodeURI(r.hash),this._element);isVisible(n)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,n))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(e),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,e.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const r of SelectorEngine.parents(e,SELECTOR_NAV_LIST_GROUP))for(const n of SelectorEngine.prev(r,SELECTOR_LINK_ITEMS))n.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(e){e.classList.remove(CLASS_NAME_ACTIVE$1);const r=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,e);for(const n of r)n.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(e){return this.each(function(){const r=ScrollSpy.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const s of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(s)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",HOME_KEY="Home",END_KEY="End",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=`:not(${SELECTOR_DROPDOWN_TOGGLE})`,SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(e){super(e),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,r=>this._keydown(r)))}static get NAME(){return NAME$1}show(){const e=this._element;if(this._elemIsActive(e))return;const r=this._getActiveElem(),n=r?EventHandler.trigger(r,EVENT_HIDE$1,{relatedTarget:e}):null;EventHandler.trigger(e,EVENT_SHOW$1,{relatedTarget:r}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(r,e),this._activate(e,r))}_activate(e,r){if(!e)return;e.classList.add(CLASS_NAME_ACTIVE),this._activate(SelectorEngine.getElementFromSelector(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(CLASS_NAME_SHOW$1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),EventHandler.trigger(e,EVENT_SHOWN$1,{relatedTarget:r})};this._queueCallback(n,e,e.classList.contains(CLASS_NAME_FADE$1))}_deactivate(e,r){if(!e)return;e.classList.remove(CLASS_NAME_ACTIVE),e.blur(),this._deactivate(SelectorEngine.getElementFromSelector(e));const n=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(CLASS_NAME_SHOW$1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),EventHandler.trigger(e,EVENT_HIDDEN$1,{relatedTarget:r})};this._queueCallback(n,e,e.classList.contains(CLASS_NAME_FADE$1))}_keydown(e){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY,HOME_KEY,END_KEY].includes(e.key))return;e.stopPropagation(),e.preventDefault();const r=this._getChildren().filter(o=>!isDisabled(o));let n;if([HOME_KEY,END_KEY].includes(e.key))n=r[e.key===HOME_KEY?0:r.length-1];else{const o=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(e.key);n=getNextActiveElement(r,e.target,o,!0)}n&&(n.focus({preventScroll:!0}),Tab.getOrCreateInstance(n).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,r){this._setAttributeIfNotExists(e,"role","tablist");for(const n of r)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const r=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",r),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),r||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const r=SelectorEngine.getElementFromSelector(e);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,r){const n=this._getOuterElement(e);if(!n.classList.contains(CLASS_DROPDOWN))return;const o=(a,c)=>{const l=SelectorEngine.findOne(a,n);l&&l.classList.toggle(c,r)};o(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),o(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),n.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(e,r,n){e.hasAttribute(r)||e.setAttribute(r,n)}_elemIsActive(e){return e.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(e){return e.matches(SELECTOR_INNER_ELEM)?e:SelectorEngine.findOne(SELECTOR_INNER_ELEM,e)}_getOuterElement(e){return e.closest(SELECTOR_OUTER)||e}static jQueryInterface(e){return this.each(function(){const r=Tab.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(s){["A","AREA"].includes(this.tagName)&&s.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const s of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(s)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(e,r){super(e,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const r=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const r=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,r){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,e=>this._onInteraction(e,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const r=Toast.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const debounce=(s,e=100)=>{let r;return function(...n){clearTimeout(r),r=setTimeout(()=>s.apply(this,n),e)}},$=(s,e=document)=>e.querySelector(s),$$=(s,e=document)=>[...e.querySelectorAll(s)];function setStorage(s,e){localStorage[s]=e,sessionStorage[s]=e}function getStorage(s,e){return localStorage[s]||sessionStorage[s]||e}function safe(s){return purify.sanitize(s)}class CopyButton{contentSelector;buttonSelector;contentEl;buttonEl;constructor(e,r){this.contentSelector=e,this.buttonSelector=r,this.contentEl=document.querySelector(e),this.buttonEl=document.querySelector(r),this.buttonEl.addEventListener("click",()=>{let n=new URL("./",window.location.href);n.searchParams.set("peer",this.contentEl.value),navigator.clipboard.writeText(n.toString()).then(()=>{Tooltip.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copied!"}),$(`${this.buttonSelector}.btn-primary`).style.display="none",$(`${this.buttonSelector}.btn-success`).style.display="",setTimeout(()=>{$(`${this.buttonSelector}.btn-primary`).style.display="",$(`${this.buttonSelector}.btn-success`).style.display="none",Tooltip.getInstance(this.buttonSelector).setContent({".tooltip-inner":"Copy to clipboard"})},2e3)},function(o){console.error("Async: Could not copy text: ",o)})})}}var xterm={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={4567:function(c,l,h){var d=this&&this.__decorate||function(y,O,k,P){var L,M=arguments.length,B=M<3?O:P===null?P=Object.getOwnPropertyDescriptor(O,k):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,O,k,P);else for(var j=y.length-1;j>=0;j--)(L=y[j])&&(B=(M<3?L(B):M>3?L(O,k,B):L(O,k))||B);return M>3&&B&&Object.defineProperty(O,k,B),B},f=this&&this.__param||function(y,O){return function(k,P){O(k,P,y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const g=h(9042),v=h(6114),S=h(9924),A=h(844),w=h(5596),m=h(4725),b=h(3656);let x=l.AccessibilityManager=class extends A.Disposable{constructor(y,O){super(),this._terminal=y,this._renderService=O,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let k=0;k<this._terminal.rows;k++)this._rowElements[k]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[k]);if(this._topBoundaryFocusListener=k=>this._handleBoundaryFocus(k,0),this._bottomBoundaryFocusListener=k=>this._handleBoundaryFocus(k,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new S.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(k=>this._handleResize(k.rows))),this.register(this._terminal.onRender(k=>this._refreshRows(k.start,k.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(k=>this._handleChar(k))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(k=>this._handleTab(k))),this.register(this._terminal.onKey(k=>this._handleKey(k.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new w.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,b.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,A.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(y){for(let O=0;O<y;O++)this._handleChar(" ")}_handleChar(y){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==y&&(this._charsToAnnounce+=y):this._charsToAnnounce+=y,y===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=g.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(y){this._clearLiveRegion(),/\p{Control}/u.test(y)||this._charsToConsume.push(y)}_refreshRows(y,O){this._liveRegionDebouncer.refresh(y,O,this._terminal.rows)}_renderRows(y,O){const k=this._terminal.buffer,P=k.lines.length.toString();for(let L=y;L<=O;L++){const M=k.translateBufferLineToString(k.ydisp+L,!0),B=(k.ydisp+L+1).toString(),j=this._rowElements[L];j&&(M.length===0?j.innerText=" ":j.textContent=M,j.setAttribute("aria-posinset",B),j.setAttribute("aria-setsize",P))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(y,O){const k=y.target,P=this._rowElements[O===0?1:this._rowElements.length-2];if(k.getAttribute("aria-posinset")===(O===0?"1":`${this._terminal.buffer.lines.length}`)||y.relatedTarget!==P)return;let L,M;if(O===0?(L=k,M=this._rowElements.pop(),this._rowContainer.removeChild(M)):(L=this._rowElements.shift(),M=k,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),M.removeEventListener("focus",this._bottomBoundaryFocusListener),O===0){const B=this._createAccessibilityTreeNode();this._rowElements.unshift(B),this._rowContainer.insertAdjacentElement("afterbegin",B)}else{const B=this._createAccessibilityTreeNode();this._rowElements.push(B),this._rowContainer.appendChild(B)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(O===0?-1:1),this._rowElements[O===0?1:this._rowElements.length-2].focus(),y.preventDefault(),y.stopImmediatePropagation()}_handleResize(y){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let O=this._rowContainer.children.length;O<this._terminal.rows;O++)this._rowElements[O]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[O]);for(;this._rowElements.length>y;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const y=document.createElement("div");return y.setAttribute("role","listitem"),y.tabIndex=-1,this._refreshRowDimensions(y),y}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let y=0;y<this._terminal.rows;y++)this._refreshRowDimensions(this._rowElements[y])}}_refreshRowDimensions(y){y.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=x=d([f(1,m.IRenderService)],x)},3614:(c,l)=>{function h(v){return v.replace(/\r?\n/g,"\r")}function d(v,S){return S?"\x1B[200~"+v+"\x1B[201~":v}function f(v,S,A,w){v=d(v=h(v),A.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),A.triggerDataEvent(v,!0),S.value=""}function g(v,S,A){const w=A.getBoundingClientRect(),m=v.clientX-w.left-10,b=v.clientY-w.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${m}px`,S.style.top=`${b}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=h,l.bracketTextForPaste=d,l.copyHandler=function(v,S){v.clipboardData&&v.clipboardData.setData("text/plain",S.selectionText),v.preventDefault()},l.handlePasteEvent=function(v,S,A,w){v.stopPropagation(),v.clipboardData&&f(v.clipboardData.getData("text/plain"),S,A,w)},l.paste=f,l.moveTextAreaUnderMouseCursor=g,l.rightClickHandler=function(v,S,A,w,m){g(v,S,A),m&&w.rightClickSelect(v),S.value=w.selectionText,S.select()}},7239:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const d=h(1505);l.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(f,g,v){this._css.set(f,g,v)}getCss(f,g){return this._css.get(f,g)}setColor(f,g,v){this._color.set(f,g,v)}getColor(f,g){return this._color.get(f,g)}clear(){this._color.clear(),this._css.clear()}}},3656:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(h,d,f,g){h.addEventListener(d,f,g);let v=!1;return{dispose:()=>{v||(v=!0,h.removeEventListener(d,f,g))}}}},6465:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const g=h(3656),v=h(8460),S=h(844),A=h(2585);let w=l.Linkifier2=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(m){super(),this._bufferService=m,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(m){return this._linkProviders.push(m),{dispose:()=>{const b=this._linkProviders.indexOf(m);b!==-1&&this._linkProviders.splice(b,1)}}}attachToDom(m,b,x){this._element=m,this._mouseService=b,this._renderService=x,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(m){if(this._lastMouseEvent=m,!this._element||!this._mouseService)return;const b=this._positionFromMouseEvent(m,this._element,this._mouseService);if(!b)return;this._isMouseOut=!1;const x=m.composedPath();for(let y=0;y<x.length;y++){const O=x[y];if(O.classList.contains("xterm"))break;if(O.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._handleHover(b),this._lastBufferCell=b)}_handleHover(m){if(this._activeLine!==m.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(m,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,m)||(this._clearCurrentLink(),this._askForLink(m,!0))}_askForLink(m,b){var x,y;this._activeProviderReplies&&b||((x=this._activeProviderReplies)===null||x===void 0||x.forEach(k=>{k?.forEach(P=>{P.link.dispose&&P.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=m.y);let O=!1;for(const[k,P]of this._linkProviders.entries())b?!((y=this._activeProviderReplies)===null||y===void 0)&&y.get(k)&&(O=this._checkLinkProviderResult(k,m,O)):P.provideLinks(m.y,L=>{var M,B;if(this._isMouseOut)return;const j=L?.map(F=>({link:F}));(M=this._activeProviderReplies)===null||M===void 0||M.set(k,j),O=this._checkLinkProviderResult(k,m,O),((B=this._activeProviderReplies)===null||B===void 0?void 0:B.size)===this._linkProviders.length&&this._removeIntersectingLinks(m.y,this._activeProviderReplies)})}_removeIntersectingLinks(m,b){const x=new Set;for(let y=0;y<b.size;y++){const O=b.get(y);if(O)for(let k=0;k<O.length;k++){const P=O[k],L=P.link.range.start.y<m?0:P.link.range.start.x,M=P.link.range.end.y>m?this._bufferService.cols:P.link.range.end.x;for(let B=L;B<=M;B++){if(x.has(B)){O.splice(k--,1);break}x.add(B)}}}}_checkLinkProviderResult(m,b,x){var y;if(!this._activeProviderReplies)return x;const O=this._activeProviderReplies.get(m);let k=!1;for(let P=0;P<m;P++)this._activeProviderReplies.has(P)&&!this._activeProviderReplies.get(P)||(k=!0);if(!k&&O){const P=O.find(L=>this._linkAtPosition(L.link,b));P&&(x=!0,this._handleNewLink(P))}if(this._activeProviderReplies.size===this._linkProviders.length&&!x)for(let P=0;P<this._activeProviderReplies.size;P++){const L=(y=this._activeProviderReplies.get(P))===null||y===void 0?void 0:y.find(M=>this._linkAtPosition(M.link,b));if(L){x=!0,this._handleNewLink(L);break}}return x}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(m){if(!this._element||!this._mouseService||!this._currentLink)return;const b=this._positionFromMouseEvent(m,this._element,this._mouseService);b&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(m,this._currentLink.link.text)}_clearCurrentLink(m,b){this._element&&this._currentLink&&this._lastMouseEvent&&(!m||!b||this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(m){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._linkAtPosition(m.link,b)&&(this._currentLink=m,this._currentLink.state={decorations:{underline:m.link.decorations===void 0||m.link.decorations.underline,pointerCursor:m.link.decorations===void 0||m.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,m.link,this._lastMouseEvent),m.link.decorations={},Object.defineProperties(m.link.decorations,{pointerCursor:{get:()=>{var x,y;return(y=(x=this._currentLink)===null||x===void 0?void 0:x.state)===null||y===void 0?void 0:y.decorations.pointerCursor},set:x=>{var y,O;!((y=this._currentLink)===null||y===void 0)&&y.state&&this._currentLink.state.decorations.pointerCursor!==x&&(this._currentLink.state.decorations.pointerCursor=x,this._currentLink.state.isHovered&&((O=this._element)===null||O===void 0||O.classList.toggle("xterm-cursor-pointer",x)))}},underline:{get:()=>{var x,y;return(y=(x=this._currentLink)===null||x===void 0?void 0:x.state)===null||y===void 0?void 0:y.decorations.underline},set:x=>{var y,O,k;!((y=this._currentLink)===null||y===void 0)&&y.state&&((k=(O=this._currentLink)===null||O===void 0?void 0:O.state)===null||k===void 0?void 0:k.decorations.underline)!==x&&(this._currentLink.state.decorations.underline=x,this._currentLink.state.isHovered&&this._fireUnderlineEvent(m.link,x))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(x=>{if(!this._currentLink)return;const y=x.start===0?0:x.start+1+this._bufferService.buffer.ydisp,O=this._bufferService.buffer.ydisp+1+x.end;if(this._currentLink.link.range.start.y>=y&&this._currentLink.link.range.end.y<=O&&(this._clearCurrentLink(y,O),this._lastMouseEvent&&this._element)){const k=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);k&&this._askForLink(k,!1)}})))}_linkHover(m,b,x){var y;!((y=this._currentLink)===null||y===void 0)&&y.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&m.classList.add("xterm-cursor-pointer")),b.hover&&b.hover(x,b.text)}_fireUnderlineEvent(m,b){const x=m.range,y=this._bufferService.buffer.ydisp,O=this._createLinkUnderlineEvent(x.start.x-1,x.start.y-y-1,x.end.x,x.end.y-y-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(O)}_linkLeave(m,b,x){var y;!((y=this._currentLink)===null||y===void 0)&&y.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&m.classList.remove("xterm-cursor-pointer")),b.leave&&b.leave(x,b.text)}_linkAtPosition(m,b){const x=m.range.start.y*this._bufferService.cols+m.range.start.x,y=m.range.end.y*this._bufferService.cols+m.range.end.x,O=b.y*this._bufferService.cols+b.x;return x<=O&&O<=y}_positionFromMouseEvent(m,b,x){const y=x.getCoords(m,b,this._bufferService.cols,this._bufferService.rows);if(y)return{x:y[0],y:y[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(m,b,x,y,O){return{x1:m,y1:b,x2:x,y2:y,cols:this._bufferService.cols,fg:O}}};l.Linkifier2=w=d([f(0,A.IBufferService)],w)},9042:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(c,l,h){var d=this&&this.__decorate||function(w,m,b,x){var y,O=arguments.length,k=O<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(w,m,b,x);else for(var P=w.length-1;P>=0;P--)(y=w[P])&&(k=(O<3?y(k):O>3?y(m,b,k):y(m,b))||k);return O>3&&k&&Object.defineProperty(m,b,k),k},f=this&&this.__param||function(w,m){return function(b,x){m(b,x,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const g=h(511),v=h(2585);let S=l.OscLinkProvider=class{constructor(w,m,b){this._bufferService=w,this._optionsService=m,this._oscLinkService=b}provideLinks(w,m){var b;const x=this._bufferService.buffer.lines.get(w-1);if(!x)return void m(void 0);const y=[],O=this._optionsService.rawOptions.linkHandler,k=new g.CellData,P=x.getTrimmedLength();let L=-1,M=-1,B=!1;for(let j=0;j<P;j++)if(M!==-1||x.hasContent(j)){if(x.loadCell(j,k),k.hasExtendedAttrs()&&k.extended.urlId){if(M===-1){M=j,L=k.extended.urlId;continue}B=k.extended.urlId!==L}else M!==-1&&(B=!0);if(B||M!==-1&&j===P-1){const F=(b=this._oscLinkService.getLinkData(L))===null||b===void 0?void 0:b.uri;if(F){const U={start:{x:M+1,y:w},end:{x:j+(B||j!==P-1?0:1),y:w}};let V=!1;if(!O?.allowNonHttpProtocols)try{const Q=new URL(F);["http:","https:"].includes(Q.protocol)||(V=!0)}catch{V=!0}V||y.push({text:F,range:U,activate:(Q,q)=>O?O.activate(Q,q,U):A(0,q),hover:(Q,q)=>{var G;return(G=O?.hover)===null||G===void 0?void 0:G.call(O,Q,q,U)},leave:(Q,q)=>{var G;return(G=O?.leave)===null||G===void 0?void 0:G.call(O,Q,q,U)}})}B=!1,k.hasExtendedAttrs()&&k.extended.urlId?(M=j,L=k.extended.urlId):(M=-1,L=-1)}}m(y)}};function A(w,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const b=window.open();if(b){try{b.opener=null}catch{}b.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=S=d([f(0,v.IBufferService),f(1,v.IOptionsService),f(2,v.IOscLinkService)],S)},6193:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(h,d){this._parentWindow=h,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(h){return this._refreshCallbacks.push(h),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(h,d,f){this._rowCount=f,h=h!==void 0?h:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const h=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const h of this._refreshCallbacks)h(0);this._refreshCallbacks=[]}}},5596:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const d=h(844);class f extends d.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=f},3236:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const d=h(3614),f=h(3656),g=h(6465),v=h(9042),S=h(3730),A=h(1680),w=h(3107),m=h(5744),b=h(2950),x=h(1296),y=h(428),O=h(4269),k=h(5114),P=h(8934),L=h(3230),M=h(9312),B=h(4725),j=h(6731),F=h(8055),U=h(8969),V=h(8460),Q=h(844),q=h(6114),G=h(8437),te=h(2584),Y=h(7399),J=h(5941),K=h(9074),ne=h(2585),de=h(5435),Re=h(4567),Te=typeof window<"u"?window.document:null;class Me extends U.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(ce={}){super(ce),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new Q.MutableDisposable),this._onCursorMove=this.register(new V.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new V.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new V.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new V.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new V.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new V.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new V.EventEmitter),this._onBlur=this.register(new V.EventEmitter),this._onA11yCharEmitter=this.register(new V.EventEmitter),this._onA11yTabEmitter=this.register(new V.EventEmitter),this._onWillOpen=this.register(new V.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(g.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(K.DecorationService),this._instantiationService.setService(ne.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((pe,me)=>this.refresh(pe,me))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(pe=>this._reportWindowsOptions(pe))),this.register(this._inputHandler.onColor(pe=>this._handleColorEvent(pe))),this.register((0,V.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,V.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,V.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,V.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(pe=>this._afterResize(pe.cols,pe.rows))),this.register((0,Q.toDisposable)(()=>{var pe,me;this._customKeyEventHandler=void 0,(me=(pe=this.element)===null||pe===void 0?void 0:pe.parentNode)===null||me===void 0||me.removeChild(this.element)}))}_handleColorEvent(ce){if(this._themeService)for(const pe of ce){let me,we="";switch(pe.index){case 256:me="foreground",we="10";break;case 257:me="background",we="11";break;case 258:me="cursor",we="12";break;default:me="ansi",we="4;"+pe.index}switch(pe.type){case 0:const Xe=F.color.toColorRGB(me==="ansi"?this._themeService.colors.ansi[pe.index]:this._themeService.colors[me]);this.coreService.triggerDataEvent(`${te.C0.ESC}]${we};${(0,J.toRgbString)(Xe)}${te.C1_ESCAPED.ST}`);break;case 1:if(me==="ansi")this._themeService.modifyColors(Qe=>Qe.ansi[pe.index]=F.rgba.toColor(...pe.color));else{const Qe=me;this._themeService.modifyColors(Pe=>Pe[Qe]=F.rgba.toColor(...pe.color))}break;case 2:this._themeService.restoreColor(pe.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(ce){ce?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Re.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(ce){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[I"),this.updateCursorStyle(ce),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var ce;return(ce=this.textarea)===null||ce===void 0?void 0:ce.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const ce=this.buffer.ybase+this.buffer.y,pe=this.buffer.lines.get(ce);if(!pe)return;const me=Math.min(this.buffer.x,this.cols-1),we=this._renderService.dimensions.css.cell.height,Xe=pe.getWidth(me),Qe=this._renderService.dimensions.css.cell.width*Xe,Pe=this.buffer.y*this._renderService.dimensions.css.cell.height,Ze=me*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ze+"px",this.textarea.style.top=Pe+"px",this.textarea.style.width=Qe+"px",this.textarea.style.height=we+"px",this.textarea.style.lineHeight=we+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",pe=>{this.hasSelection()&&(0,d.copyHandler)(pe,this._selectionService)}));const ce=pe=>(0,d.handlePasteEvent)(pe,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",ce)),this.register((0,f.addDisposableDomListener)(this.element,"paste",ce)),q.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",pe=>{pe.button===2&&(0,d.rightClickHandler)(pe,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",pe=>{(0,d.rightClickHandler)(pe,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",pe=>{pe.button===1&&(0,d.moveTextAreaUnderMouseCursor)(pe,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",ce=>this._keyUp(ce),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",ce=>this._keyDown(ce),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",ce=>this._keyPress(ce),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",ce=>this._compositionHelper.compositionupdate(ce))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",ce=>this._inputEvent(ce),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(ce){var pe;if(!ce)throw new Error("Terminal requires a parent element.");ce.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=ce.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),ce.appendChild(this.element);const me=Te.createDocumentFragment();this._viewportElement=Te.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),me.appendChild(this._viewportElement),this._viewportScrollArea=Te.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Te.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Te.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),me.appendChild(this.screenElement),this.textarea=Te.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(k.CoreBrowserService,this.textarea,(pe=this._document.defaultView)!==null&&pe!==void 0?pe:window),this._instantiationService.setService(B.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",we=>this._handleTextAreaFocus(we))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(B.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(j.ThemeService),this._instantiationService.setService(B.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(O.CharacterJoinerService),this._instantiationService.setService(B.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(B.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(we=>this._onRender.fire(we))),this.onResize(we=>this._renderService.resize(we.cols,we.rows)),this._compositionView=Te.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(b.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(me);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(P.MouseService),this._instantiationService.setService(B.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(A.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(we=>this.scrollLines(we.amount,we.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(M.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(B.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(we=>this.scrollLines(we.amount,we.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(we=>this._renderService.handleSelectionChanged(we.start,we.end,we.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(we=>{this.textarea.value=we,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(we=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",we=>this._selectionService.handleMouseDown(we))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Re.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",we=>this._handleScreenReaderModeOptionChange(we))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",we=>{!this._overviewRulerRenderer&&we&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(x.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const ce=this,pe=this.element;function me(Qe){const Pe=ce._mouseService.getMouseReportCoords(Qe,ce.screenElement);if(!Pe)return!1;let Ze,_e;switch(Qe.overrideType||Qe.type){case"mousemove":_e=32,Qe.buttons===void 0?(Ze=3,Qe.button!==void 0&&(Ze=Qe.button<3?Qe.button:3)):Ze=1&Qe.buttons?0:4&Qe.buttons?1:2&Qe.buttons?2:3;break;case"mouseup":_e=0,Ze=Qe.button<3?Qe.button:3;break;case"mousedown":_e=1,Ze=Qe.button<3?Qe.button:3;break;case"wheel":if(ce.viewport.getLinesScrolled(Qe)===0)return!1;_e=Qe.deltaY<0?0:1,Ze=4;break;default:return!1}return!(_e===void 0||Ze===void 0||Ze>4)&&ce.coreMouseService.triggerMouseEvent({col:Pe.col,row:Pe.row,x:Pe.x,y:Pe.y,button:Ze,action:_e,ctrl:Qe.ctrlKey,alt:Qe.altKey,shift:Qe.shiftKey})}const we={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Xe={mouseup:Qe=>(me(Qe),Qe.buttons||(this._document.removeEventListener("mouseup",we.mouseup),we.mousedrag&&this._document.removeEventListener("mousemove",we.mousedrag)),this.cancel(Qe)),wheel:Qe=>(me(Qe),this.cancel(Qe,!0)),mousedrag:Qe=>{Qe.buttons&&me(Qe)},mousemove:Qe=>{Qe.buttons||me(Qe)}};this.register(this.coreMouseService.onProtocolChange(Qe=>{Qe?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Qe)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Qe?we.mousemove||(pe.addEventListener("mousemove",Xe.mousemove),we.mousemove=Xe.mousemove):(pe.removeEventListener("mousemove",we.mousemove),we.mousemove=null),16&Qe?we.wheel||(pe.addEventListener("wheel",Xe.wheel,{passive:!1}),we.wheel=Xe.wheel):(pe.removeEventListener("wheel",we.wheel),we.wheel=null),2&Qe?we.mouseup||(pe.addEventListener("mouseup",Xe.mouseup),we.mouseup=Xe.mouseup):(this._document.removeEventListener("mouseup",we.mouseup),pe.removeEventListener("mouseup",we.mouseup),we.mouseup=null),4&Qe?we.mousedrag||(we.mousedrag=Xe.mousedrag):(this._document.removeEventListener("mousemove",we.mousedrag),we.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(pe,"mousedown",Qe=>{if(Qe.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Qe))return me(Qe),we.mouseup&&this._document.addEventListener("mouseup",we.mouseup),we.mousedrag&&this._document.addEventListener("mousemove",we.mousedrag),this.cancel(Qe)})),this.register((0,f.addDisposableDomListener)(pe,"wheel",Qe=>{if(!we.wheel){if(!this.buffer.hasScrollback){const Pe=this.viewport.getLinesScrolled(Qe);if(Pe===0)return;const Ze=te.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Qe.deltaY<0?"A":"B");let _e="";for(let qe=0;qe<Math.abs(Pe);qe++)_e+=Ze;return this.coreService.triggerDataEvent(_e,!0),this.cancel(Qe,!0)}return this.viewport.handleWheel(Qe)?this.cancel(Qe):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(pe,"touchstart",Qe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Qe),this.cancel(Qe)},{passive:!0})),this.register((0,f.addDisposableDomListener)(pe,"touchmove",Qe=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Qe)?void 0:this.cancel(Qe)},{passive:!1}))}refresh(ce,pe){var me;(me=this._renderService)===null||me===void 0||me.refreshRows(ce,pe)}updateCursorStyle(ce){var pe;!((pe=this._selectionService)===null||pe===void 0)&&pe.shouldColumnSelect(ce)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(ce,pe,me=0){var we;me===1?(super.scrollLines(ce,pe,me),this.refresh(0,this.rows-1)):(we=this.viewport)===null||we===void 0||we.scrollLines(ce)}paste(ce){(0,d.paste)(ce,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(ce){this._customKeyEventHandler=ce}registerLinkProvider(ce){return this.linkifier2.registerLinkProvider(ce)}registerCharacterJoiner(ce){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const pe=this._characterJoinerService.register(ce);return this.refresh(0,this.rows-1),pe}deregisterCharacterJoiner(ce){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(ce)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(ce){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+ce)}registerDecoration(ce){return this._decorationService.registerDecoration(ce)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(ce,pe,me){this._selectionService.setSelection(ce,pe,me)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var ce;(ce=this._selectionService)===null||ce===void 0||ce.clearSelection()}selectAll(){var ce;(ce=this._selectionService)===null||ce===void 0||ce.selectAll()}selectLines(ce,pe){var me;(me=this._selectionService)===null||me===void 0||me.selectLines(ce,pe)}_keyDown(ce){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(ce)===!1)return!1;const pe=this.browser.isMac&&this.options.macOptionIsMeta&&ce.altKey;if(!pe&&!this._compositionHelper.keydown(ce))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;pe||ce.key!=="Dead"&&ce.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const me=(0,Y.evaluateKeyboardEvent)(ce,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(ce),me.type===3||me.type===2){const we=this.rows-1;return this.scrollLines(me.type===2?-we:we),this.cancel(ce,!0)}return me.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,ce)||(me.cancel&&this.cancel(ce,!0),!me.key||!!(ce.key&&!ce.ctrlKey&&!ce.altKey&&!ce.metaKey&&ce.key.length===1&&ce.key.charCodeAt(0)>=65&&ce.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(me.key!==te.C0.ETX&&me.key!==te.C0.CR||(this.textarea.value=""),this._onKey.fire({key:me.key,domEvent:ce}),this._showCursor(),this.coreService.triggerDataEvent(me.key,!0),!this.optionsService.rawOptions.screenReaderMode||ce.altKey||ce.ctrlKey?this.cancel(ce,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(ce,pe){const me=ce.isMac&&!this.options.macOptionIsMeta&&pe.altKey&&!pe.ctrlKey&&!pe.metaKey||ce.isWindows&&pe.altKey&&pe.ctrlKey&&!pe.metaKey||ce.isWindows&&pe.getModifierState("AltGraph");return pe.type==="keypress"?me:me&&(!pe.keyCode||pe.keyCode>47)}_keyUp(ce){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(ce)===!1||(function(pe){return pe.keyCode===16||pe.keyCode===17||pe.keyCode===18}(ce)||this.focus(),this.updateCursorStyle(ce),this._keyPressHandled=!1)}_keyPress(ce){let pe;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(ce)===!1)return!1;if(this.cancel(ce),ce.charCode)pe=ce.charCode;else if(ce.which===null||ce.which===void 0)pe=ce.keyCode;else{if(ce.which===0||ce.charCode===0)return!1;pe=ce.which}return!(!pe||(ce.altKey||ce.ctrlKey||ce.metaKey)&&!this._isThirdLevelShift(this.browser,ce)||(pe=String.fromCharCode(pe),this._onKey.fire({key:pe,domEvent:ce}),this._showCursor(),this.coreService.triggerDataEvent(pe,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(ce){if(ce.data&&ce.inputType==="insertText"&&(!ce.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const pe=ce.data;return this.coreService.triggerDataEvent(pe,!0),this.cancel(ce),!0}return!1}resize(ce,pe){ce!==this.cols||pe!==this.rows?super.resize(ce,pe):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(ce,pe){var me,we;(me=this._charSizeService)===null||me===void 0||me.measure(),(we=this.viewport)===null||we===void 0||we.syncScrollArea(!0)}clear(){var ce;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let pe=1;pe<this.rows;pe++)this.buffer.lines.push(this.buffer.getBlankLine(G.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(ce=this.viewport)===null||ce===void 0||ce.reset(),this.refresh(0,this.rows-1)}}reset(){var ce,pe;this.options.rows=this.rows,this.options.cols=this.cols;const me=this._customKeyEventHandler;this._setup(),super.reset(),(ce=this._selectionService)===null||ce===void 0||ce.reset(),this._decorationService.reset(),(pe=this.viewport)===null||pe===void 0||pe.reset(),this._customKeyEventHandler=me,this.refresh(0,this.rows-1)}clearTextureAtlas(){var ce;(ce=this._renderService)===null||ce===void 0||ce.clearTextureAtlas()}_reportFocus(){var ce;!((ce=this.element)===null||ce===void 0)&&ce.classList.contains("focus")?this.coreService.triggerDataEvent(te.C0.ESC+"[I"):this.coreService.triggerDataEvent(te.C0.ESC+"[O")}_reportWindowsOptions(ce){if(this._renderService)switch(ce){case de.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const pe=this._renderService.dimensions.css.canvas.width.toFixed(0),me=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[4;${me};${pe}t`);break;case de.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const we=this._renderService.dimensions.css.cell.width.toFixed(0),Xe=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[6;${Xe};${we}t`)}}cancel(ce,pe){if(this.options.cancelEvents||pe)return ce.preventDefault(),ce.stopPropagation(),!1}}l.Terminal=Me},9924:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(h,d=1e3){this._renderCallback=h,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(h,d,f){this._rowCount=f,h=h!==void 0?h:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=g-this._lastRefreshMs,S=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const h=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,d)}}},1680:function(c,l,h){var d=this&&this.__decorate||function(b,x,y,O){var k,P=arguments.length,L=P<3?x:O===null?O=Object.getOwnPropertyDescriptor(x,y):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,x,y,O);else for(var M=b.length-1;M>=0;M--)(k=b[M])&&(L=(P<3?k(L):P>3?k(x,y,L):k(x,y))||L);return P>3&&L&&Object.defineProperty(x,y,L),L},f=this&&this.__param||function(b,x){return function(y,O){x(y,O,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const g=h(3656),v=h(4725),S=h(8460),A=h(844),w=h(2585);let m=l.Viewport=class extends A.Disposable{constructor(b,x,y,O,k,P,L,M){super(),this._viewportElement=b,this._scrollArea=x,this._bufferService=y,this._optionsService=O,this._charSizeService=k,this._renderService=P,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(B=>this._activeBuffer=B.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(B=>this._renderDimensions=B)),this._handleThemeChange(M.colors),this.register(M.onChangeColors(B=>this._handleThemeChange(B))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(b){this._viewportElement.style.backgroundColor=b.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(b){if(b)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const x=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==x&&(this._lastRecordedBufferHeight=x,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const b=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==b&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=b),this._refreshAnimationFrame=null}syncScrollArea(b=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(b);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(b)}_handleScroll(b){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const x=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:x,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const b=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(b*(this._smoothScrollState.target-this._smoothScrollState.origin)),b<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(b,x){const y=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(x<0&&this._viewportElement.scrollTop!==0||x>0&&y<this._lastRecordedBufferHeight)||(b.cancelable&&b.preventDefault(),!1)}handleWheel(b){const x=this._getPixelsScrolled(b);return x!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+x:this._smoothScrollState.target+=x,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=x,this._bubbleScroll(b,x))}scrollLines(b){if(b!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const x=b*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+x,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!1})}_getPixelsScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let x=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_LINE?x*=this._currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(x*=this._currentRowHeight*this._bufferService.rows),x}getBufferElements(b,x){var y;let O,k="";const P=[],L=x??this._bufferService.buffer.lines.length,M=this._bufferService.buffer.lines;for(let B=b;B<L;B++){const j=M.get(B);if(!j)continue;const F=(y=M.get(B+1))===null||y===void 0?void 0:y.isWrapped;if(k+=j.translateToString(!F),!F||B===M.length-1){const U=document.createElement("div");U.textContent=k,P.push(U),k.length>0&&(O=U),k=""}}return{bufferElements:P,cursorElement:O}}getLinesScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let x=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(x/=this._currentRowHeight+0,this._wheelPartialScroll+=x,x=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(x*=this._bufferService.rows),x}_applyScrollModifier(b,x){const y=this._optionsService.rawOptions.fastScrollModifier;return y==="alt"&&x.altKey||y==="ctrl"&&x.ctrlKey||y==="shift"&&x.shiftKey?b*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:b*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(b){this._lastTouchY=b.touches[0].pageY}handleTouchMove(b){const x=this._lastTouchY-b.touches[0].pageY;return this._lastTouchY=b.touches[0].pageY,x!==0&&(this._viewportElement.scrollTop+=x,this._bubbleScroll(b,x))}};l.Viewport=m=d([f(2,w.IBufferService),f(3,w.IOptionsService),f(4,v.ICharSizeService),f(5,v.IRenderService),f(6,v.ICoreBrowserService),f(7,v.IThemeService)],m)},3107:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const g=h(3656),v=h(4725),S=h(844),A=h(2585);let w=l.BufferDecorationRenderer=class extends S.Disposable{constructor(m,b,x,y){super(),this._screenElement=m,this._bufferService=b,this._decorationService=x,this._renderService=y,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(O=>this._removeDecoration(O))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){var b,x;const y=document.createElement("div");y.classList.add("xterm-decoration"),y.classList.toggle("xterm-decoration-top-layer",((b=m?.options)===null||b===void 0?void 0:b.layer)==="top"),y.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,y.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",y.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",y.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const O=(x=m.options.x)!==null&&x!==void 0?x:0;return O&&O>this._bufferService.cols&&(y.style.display="none"),this._refreshXPosition(m,y),y}_refreshStyle(m){const b=m.marker.line-this._bufferService.buffers.active.ydisp;if(b<0||b>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let x=this._decorationElements.get(m);x||(x=this._createElement(m),m.element=x,this._decorationElements.set(m,x),this._container.appendChild(x),m.onDispose(()=>{this._decorationElements.delete(m),x.remove()})),x.style.top=b*this._renderService.dimensions.css.cell.height+"px",x.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(x)}}_refreshXPosition(m,b=m.element){var x;if(!b)return;const y=(x=m.options.x)!==null&&x!==void 0?x:0;(m.options.anchor||"left")==="right"?b.style.right=y?y*this._renderService.dimensions.css.cell.width+"px":"":b.style.left=y?y*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){var b;(b=this._decorationElements.get(m))===null||b===void 0||b.remove(),this._decorationElements.delete(m),m.dispose()}};l.BufferDecorationRenderer=w=d([f(1,A.IBufferService),f(2,A.IDecorationService),f(3,v.IRenderService)],w)},5871:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(h){if(h.options.overviewRulerOptions){for(const d of this._zones)if(d.color===h.options.overviewRulerOptions.color&&d.position===h.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,h.marker.line))return;if(this._lineAdjacentToZone(d,h.marker.line,h.options.overviewRulerOptions.position))return void this._addLineToZone(d,h.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=h.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=h.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=h.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=h.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:h.options.overviewRulerOptions.color,position:h.options.overviewRulerOptions.position,startBufferLine:h.marker.line,endBufferLine:h.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(h){this._linePadding=h}_lineIntersectsZone(h,d){return d>=h.startBufferLine&&d<=h.endBufferLine}_lineAdjacentToZone(h,d,f){return d>=h.startBufferLine-this._linePadding[f||"full"]&&d<=h.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(h,d){h.startBufferLine=Math.min(h.startBufferLine,d),h.endBufferLine=Math.max(h.endBufferLine,d)}}},5744:function(c,l,h){var d=this&&this.__decorate||function(O,k,P,L){var M,B=arguments.length,j=B<3?k:L===null?L=Object.getOwnPropertyDescriptor(k,P):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(O,k,P,L);else for(var F=O.length-1;F>=0;F--)(M=O[F])&&(j=(B<3?M(j):B>3?M(k,P,j):M(k,P))||j);return B>3&&j&&Object.defineProperty(k,P,j),j},f=this&&this.__param||function(O,k){return function(P,L){k(P,L,O)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const g=h(5871),v=h(3656),S=h(4725),A=h(844),w=h(2585),m={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0},x={full:0,left:0,center:0,right:0};let y=l.OverviewRulerRenderer=class extends A.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(O,k,P,L,M,B,j){var F;super(),this._viewportElement=O,this._screenElement=k,this._bufferService=P,this._decorationService=L,this._renderService=M,this._optionsService=B,this._coreBrowseService=j,this._colorZoneStore=new g.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(F=this._viewportElement.parentElement)===null||F===void 0||F.insertBefore(this._canvas,this._viewportElement);const U=this._canvas.getContext("2d");if(!U)throw new Error("Ctx cannot be null");this._ctx=U,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,A.toDisposable)(()=>{var V;(V=this._canvas)===null||V===void 0||V.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const O=Math.floor(this._canvas.width/3),k=Math.ceil(this._canvas.width/3);b.full=this._canvas.width,b.left=O,b.center=k,b.right=O,this._refreshDrawHeightConstants(),x.full=0,x.left=0,x.center=b.left,x.right=b.left+b.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowseService.dpr);const O=this._canvas.height/this._bufferService.buffer.lines.length,k=Math.round(Math.max(Math.min(O,12),6)*this._coreBrowseService.dpr);m.left=k,m.center=k,m.right=k}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const k of this._decorationService.decorations)this._colorZoneStore.addDecoration(k);this._ctx.lineWidth=1;const O=this._colorZoneStore.zones;for(const k of O)k.position!=="full"&&this._renderColorZone(k);for(const k of O)k.position==="full"&&this._renderColorZone(k);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(O){this._ctx.fillStyle=O.color,this._ctx.fillRect(x[O.position||"full"],Math.round((this._canvas.height-1)*(O.startBufferLine/this._bufferService.buffers.active.lines.length)-m[O.position||"full"]/2),b[O.position||"full"],Math.round((this._canvas.height-1)*((O.endBufferLine-O.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[O.position||"full"]))}_queueRefresh(O,k){this._shouldUpdateDimensions=O||this._shouldUpdateDimensions,this._shouldUpdateAnchor=k||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};l.OverviewRulerRenderer=y=d([f(2,w.IBufferService),f(3,w.IDecorationService),f(4,S.IRenderService),f(5,w.IOptionsService),f(6,S.ICoreBrowserService)],y)},2950:function(c,l,h){var d=this&&this.__decorate||function(w,m,b,x){var y,O=arguments.length,k=O<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(w,m,b,x);else for(var P=w.length-1;P>=0;P--)(y=w[P])&&(k=(O<3?y(k):O>3?y(m,b,k):y(m,b))||k);return O>3&&k&&Object.defineProperty(m,b,k),k},f=this&&this.__param||function(w,m){return function(b,x){m(b,x,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const g=h(4725),v=h(2585),S=h(2584);let A=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,m,b,x,y,O){this._textarea=w,this._compositionView=m,this._bufferService=b,this._optionsService=x,this._coreService=y,this._renderService=O,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let b;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,b=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),b.length>0&&this._coreService.triggerDataEvent(b,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,b=m.replace(w,"");this._dataAlreadySent=b,m.length>w.length?this._coreService.triggerDataEvent(b,!0):m.length<w.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):m.length===w.length&&m!==w&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),b=this._renderService.dimensions.css.cell.height,x=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,y=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=y+"px",this._compositionView.style.top=x+"px",this._compositionView.style.height=b+"px",this._compositionView.style.lineHeight=b+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const O=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=x+"px",this._textarea.style.width=Math.max(O.width,1)+"px",this._textarea.style.height=Math.max(O.height,1)+"px",this._textarea.style.lineHeight=O.height+"px"}w||setTimeout(()=>this.updateCompositionElements(!0),0)}}};l.CompositionHelper=A=d([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,v.ICoreService),f(5,g.IRenderService)],A)},9806:(c,l)=>{function h(d,f,g){const v=g.getBoundingClientRect(),S=d.getComputedStyle(g),A=parseInt(S.getPropertyValue("padding-left")),w=parseInt(S.getPropertyValue("padding-top"));return[f.clientX-v.left-A,f.clientY-v.top-w]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=h,l.getCoords=function(d,f,g,v,S,A,w,m,b){if(!A)return;const x=h(d,f,g);return x?(x[0]=Math.ceil((x[0]+(b?w/2:0))/w),x[1]=Math.ceil(x[1]/m),x[0]=Math.min(Math.max(x[0],1),v+(b?1:0)),x[1]=Math.min(Math.max(x[1],1),S),x):void 0}},9504:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const d=h(2584);function f(m,b,x,y){const O=m-g(m,x),k=b-g(b,x),P=Math.abs(O-k)-function(L,M,B){let j=0;const F=L-g(L,B),U=M-g(M,B);for(let V=0;V<Math.abs(F-U);V++){const Q=v(L,M)==="A"?-1:1,q=B.buffer.lines.get(F+Q*V);q?.isWrapped&&j++}return j}(m,b,x);return w(P,A(v(m,b),y))}function g(m,b){let x=0,y=b.buffer.lines.get(m),O=y?.isWrapped;for(;O&&m>=0&&m<b.rows;)x++,y=b.buffer.lines.get(--m),O=y?.isWrapped;return x}function v(m,b){return m>b?"A":"B"}function S(m,b,x,y,O,k){let P=m,L=b,M="";for(;P!==x||L!==y;)P+=O?1:-1,O&&P>k.cols-1?(M+=k.buffer.translateBufferLineToString(L,!1,m,P),P=0,m=0,L++):!O&&P<0&&(M+=k.buffer.translateBufferLineToString(L,!1,0,m+1),P=k.cols-1,m=P,L--);return M+k.buffer.translateBufferLineToString(L,!1,m,P)}function A(m,b){const x=b?"O":"[";return d.C0.ESC+x+m}function w(m,b){m=Math.floor(m);let x="";for(let y=0;y<m;y++)x+=b;return x}l.moveToCellSequence=function(m,b,x,y){const O=x.buffer.x,k=x.buffer.y;if(!x.buffer.hasScrollback)return function(M,B,j,F,U,V){return f(B,F,U,V).length===0?"":w(S(M,B,M,B-g(B,U),!1,U).length,A("D",V))}(O,k,0,b,x,y)+f(k,b,x,y)+function(M,B,j,F,U,V){let Q;Q=f(B,F,U,V).length>0?F-g(F,U):B;const q=F,G=function(te,Y,J,K,ne,de){let Re;return Re=f(J,K,ne,de).length>0?K-g(K,ne):Y,te<J&&Re<=K||te>=J&&Re<K?"C":"D"}(M,B,j,F,U,V);return w(S(M,Q,j,q,G==="C",U).length,A(G,V))}(O,k,m,b,x,y);let P;if(k===b)return P=O>m?"D":"C",w(Math.abs(O-m),A(P,y));P=k>b?"D":"C";const L=Math.abs(k-b);return w(function(M,B){return B.cols-M}(k>b?m:O,x)+(L-1)*x.cols+1+((k>b?O:m)-1),A(P,y))}},1296:function(c,l,h){var d=this&&this.__decorate||function(U,V,Q,q){var G,te=arguments.length,Y=te<3?V:q===null?q=Object.getOwnPropertyDescriptor(V,Q):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Y=Reflect.decorate(U,V,Q,q);else for(var J=U.length-1;J>=0;J--)(G=U[J])&&(Y=(te<3?G(Y):te>3?G(V,Q,Y):G(V,Q))||Y);return te>3&&Y&&Object.defineProperty(V,Q,Y),Y},f=this&&this.__param||function(U,V){return function(Q,q){V(Q,q,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const g=h(3787),v=h(2550),S=h(2223),A=h(6171),w=h(4725),m=h(8055),b=h(8460),x=h(844),y=h(2585),O="xterm-dom-renderer-owner-",k="xterm-rows",P="xterm-fg-",L="xterm-bg-",M="xterm-focus",B="xterm-selection";let j=1,F=l.DomRenderer=class extends x.Disposable{constructor(U,V,Q,q,G,te,Y,J,K,ne){super(),this._element=U,this._screenElement=V,this._viewportElement=Q,this._linkifier2=q,this._charSizeService=te,this._optionsService=Y,this._bufferService=J,this._coreBrowserService=K,this._themeService=ne,this._terminalClass=j++,this._rowElements=[],this.onRequestRedraw=this.register(new b.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(k),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(B),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,A.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(de=>this._injectCss(de))),this._injectCss(this._themeService.colors),this._rowFactory=G.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(O+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(de=>this._handleLinkHover(de))),this.register(this._linkifier2.onHideLinkUnderline(de=>this._handleLinkLeave(de))),this.register((0,x.toDisposable)(()=>{this._element.classList.remove(O+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Q of this._rowElements)Q.style.width=`${this.dimensions.css.canvas.width}px`,Q.style.height=`${this.dimensions.css.cell.height}px`,Q.style.lineHeight=`${this.dimensions.css.cell.height}px`,Q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const V=`${this._terminalSelector} .${k} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=V,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let V=`${this._terminalSelector} .${k} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;V+=`${this._terminalSelector} .${k} .xterm-dim { color: ${m.color.multiplyOpacity(U.foreground,.5).css};}`,V+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,V+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",V+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,V+=`${this._terminalSelector} .${k}.${M} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${k}.${M} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${k} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,V+=`${this._terminalSelector} .${B} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${B} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${B} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[Q,q]of U.ansi.entries())V+=`${this._terminalSelector} .${P}${Q} { color: ${q.css}; }${this._terminalSelector} .${P}${Q}.xterm-dim { color: ${m.color.multiplyOpacity(q,.5).css}; }${this._terminalSelector} .${L}${Q} { background-color: ${q.css}; }`;V+=`${this._terminalSelector} .${P}${S.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(U.background).css}; }${this._terminalSelector} .${P}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${m.color.multiplyOpacity(m.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${L}${S.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=V}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,V){for(let Q=this._rowElements.length;Q<=V;Q++){const q=document.createElement("div");this._rowContainer.appendChild(q),this._rowElements.push(q)}for(;this._rowElements.length>V;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,V){this._refreshRowElements(U,V),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(M)}handleFocus(){this._rowContainer.classList.add(M),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,V,Q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,V,Q),this.renderRows(0,this._bufferService.rows-1),!U||!V)return;const q=U[1]-this._bufferService.buffer.ydisp,G=V[1]-this._bufferService.buffer.ydisp,te=Math.max(q,0),Y=Math.min(G,this._bufferService.rows-1);if(te>=this._bufferService.rows||Y<0)return;const J=document.createDocumentFragment();if(Q){const K=U[0]>V[0];J.appendChild(this._createSelectionElement(te,K?V[0]:U[0],K?U[0]:V[0],Y-te+1))}else{const K=q===te?U[0]:0,ne=te===G?V[0]:this._bufferService.cols;J.appendChild(this._createSelectionElement(te,K,ne));const de=Y-te-1;if(J.appendChild(this._createSelectionElement(te+1,0,this._bufferService.cols,de)),te!==Y){const Re=G===Y?V[0]:this._bufferService.cols;J.appendChild(this._createSelectionElement(Y,0,Re))}}this._selectionContainer.appendChild(J)}_createSelectionElement(U,V,Q,q=1){const G=document.createElement("div");return G.style.height=q*this.dimensions.css.cell.height+"px",G.style.top=U*this.dimensions.css.cell.height+"px",G.style.left=V*this.dimensions.css.cell.width+"px",G.style.width=this.dimensions.css.cell.width*(Q-V)+"px",G}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,V){const Q=this._bufferService.buffer,q=Q.ybase+Q.y,G=Math.min(Q.x,this._bufferService.cols-1),te=this._optionsService.rawOptions.cursorBlink,Y=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=U;K<=V;K++){const ne=K+Q.ydisp,de=this._rowElements[K],Re=Q.lines.get(ne);if(!de||!Re)break;de.replaceChildren(...this._rowFactory.createRow(Re,ne,ne===q,Y,J,G,te,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${O}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,V,Q,q,G,te){Q<0&&(U=0),q<0&&(V=0);const Y=this._bufferService.rows-1;Q=Math.max(Math.min(Q,Y),0),q=Math.max(Math.min(q,Y),0),G=Math.min(G,this._bufferService.cols);const J=this._bufferService.buffer,K=J.ybase+J.y,ne=Math.min(J.x,G-1),de=this._optionsService.rawOptions.cursorBlink,Re=this._optionsService.rawOptions.cursorStyle,Te=this._optionsService.rawOptions.cursorInactiveStyle;for(let Me=Q;Me<=q;++Me){const Ie=Me+J.ydisp,ce=this._rowElements[Me],pe=J.lines.get(Ie);if(!ce||!pe)break;ce.replaceChildren(...this._rowFactory.createRow(pe,Ie,Ie===K,Re,Te,ne,de,this.dimensions.css.cell.width,this._widthCache,te?Me===Q?U:0:-1,te?(Me===q?V:G)-1:-1))}}};l.DomRenderer=F=d([f(4,y.IInstantiationService),f(5,w.ICharSizeService),f(6,y.IOptionsService),f(7,y.IBufferService),f(8,w.ICoreBrowserService),f(9,w.IThemeService)],F)},3787:function(c,l,h){var d=this&&this.__decorate||function(P,L,M,B){var j,F=arguments.length,U=F<3?L:B===null?B=Object.getOwnPropertyDescriptor(L,M):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(P,L,M,B);else for(var V=P.length-1;V>=0;V--)(j=P[V])&&(U=(F<3?j(U):F>3?j(L,M,U):j(L,M))||U);return F>3&&U&&Object.defineProperty(L,M,U),U},f=this&&this.__param||function(P,L){return function(M,B){L(M,B,P)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const g=h(2223),v=h(643),S=h(511),A=h(2585),w=h(8055),m=h(4725),b=h(4269),x=h(6171),y=h(3734);let O=l.DomRendererRowFactory=class{constructor(P,L,M,B,j,F,U){this._document=P,this._characterJoinerService=L,this._optionsService=M,this._coreBrowserService=B,this._coreService=j,this._decorationService=F,this._themeService=U,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(P,L,M){this._selectionStart=P,this._selectionEnd=L,this._columnSelectMode=M}createRow(P,L,M,B,j,F,U,V,Q,q,G){const te=[],Y=this._characterJoinerService.getJoinedCharacters(L),J=this._themeService.colors;let K,ne=P.getNoBgTrimmedLength();M&&ne<F+1&&(ne=F+1);let de=0,Re="",Te=0,Me=0,Ie=0,ce=!1,pe=0,me=!1,we=0;const Xe=[],Qe=q!==-1&&G!==-1;for(let Pe=0;Pe<ne;Pe++){P.loadCell(Pe,this._workCell);let Ze=this._workCell.getWidth();if(Ze===0)continue;let _e=!1,qe=Pe,Be=this._workCell;if(Y.length>0&&Pe===Y[0][0]){_e=!0;const Ot=Y.shift();Be=new b.JoinedCellData(this._workCell,P.translateToString(!0,Ot[0],Ot[1]),Ot[1]-Ot[0]),qe=Ot[1]-1,Ze=Be.getWidth()}const mt=this._isCellInSelection(Pe,L),ht=M&&Pe===F,Dt=Qe&&Pe>=q&&Pe<=G;let Se=!1;this._decorationService.forEachDecorationAtCell(Pe,L,void 0,Ot=>{Se=!0});let Ye=Be.getChars()||v.WHITESPACE_CELL_CHAR;if(Ye===" "&&(Be.isUnderline()||Be.isOverline())&&(Ye=" "),we=Ze*V-Q.get(Ye,Be.isBold(),Be.isItalic()),K){if(de&&(mt&&me||!mt&&!me&&Be.bg===Te)&&(mt&&me&&J.selectionForeground||Be.fg===Me)&&Be.extended.ext===Ie&&Dt===ce&&we===pe&&!ht&&!_e&&!Se){Re+=Ye,de++;continue}de&&(K.textContent=Re),K=this._document.createElement("span"),de=0,Re=""}else K=this._document.createElement("span");if(Te=Be.bg,Me=Be.fg,Ie=Be.extended.ext,ce=Dt,pe=we,me=mt,_e&&F>=Pe&&F<=qe&&(F=Pe),!this._coreService.isCursorHidden&&ht){if(Xe.push("xterm-cursor"),this._coreBrowserService.isFocused)U&&Xe.push("xterm-cursor-blink"),Xe.push(B==="bar"?"xterm-cursor-bar":B==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(j)switch(j){case"outline":Xe.push("xterm-cursor-outline");break;case"block":Xe.push("xterm-cursor-block");break;case"bar":Xe.push("xterm-cursor-bar");break;case"underline":Xe.push("xterm-cursor-underline")}}if(Be.isBold()&&Xe.push("xterm-bold"),Be.isItalic()&&Xe.push("xterm-italic"),Be.isDim()&&Xe.push("xterm-dim"),Re=Be.isInvisible()?v.WHITESPACE_CELL_CHAR:Be.getChars()||v.WHITESPACE_CELL_CHAR,Be.isUnderline()&&(Xe.push(`xterm-underline-${Be.extended.underlineStyle}`),Re===" "&&(Re=" "),!Be.isUnderlineColorDefault()))if(Be.isUnderlineColorRGB())K.style.textDecorationColor=`rgb(${y.AttributeData.toColorRGB(Be.getUnderlineColor()).join(",")})`;else{let Ot=Be.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Be.isBold()&&Ot<8&&(Ot+=8),K.style.textDecorationColor=J.ansi[Ot].css}Be.isOverline()&&(Xe.push("xterm-overline"),Re===" "&&(Re=" ")),Be.isStrikethrough()&&Xe.push("xterm-strikethrough"),Dt&&(K.style.textDecoration="underline");let Le=Be.getFgColor(),ze=Be.getFgColorMode(),Ue=Be.getBgColor(),Ge=Be.getBgColorMode();const ut=!!Be.isInverse();if(ut){const Ot=Le;Le=Ue,Ue=Ot;const vt=ze;ze=Ge,Ge=vt}let at,Ut,Zt,Pt=!1;switch(this._decorationService.forEachDecorationAtCell(Pe,L,void 0,Ot=>{Ot.options.layer!=="top"&&Pt||(Ot.backgroundColorRGB&&(Ge=50331648,Ue=Ot.backgroundColorRGB.rgba>>8&16777215,at=Ot.backgroundColorRGB),Ot.foregroundColorRGB&&(ze=50331648,Le=Ot.foregroundColorRGB.rgba>>8&16777215,Ut=Ot.foregroundColorRGB),Pt=Ot.options.layer==="top")}),!Pt&&mt&&(at=this._coreBrowserService.isFocused?J.selectionBackgroundOpaque:J.selectionInactiveBackgroundOpaque,Ue=at.rgba>>8&16777215,Ge=50331648,Pt=!0,J.selectionForeground&&(ze=50331648,Le=J.selectionForeground.rgba>>8&16777215,Ut=J.selectionForeground)),Pt&&Xe.push("xterm-decoration-top"),Ge){case 16777216:case 33554432:Zt=J.ansi[Ue],Xe.push(`xterm-bg-${Ue}`);break;case 50331648:Zt=w.rgba.toColor(Ue>>16,Ue>>8&255,255&Ue),this._addStyle(K,`background-color:#${k((Ue>>>0).toString(16),"0",6)}`);break;default:ut?(Zt=J.foreground,Xe.push(`xterm-bg-${g.INVERTED_DEFAULT_COLOR}`)):Zt=J.background}switch(at||Be.isDim()&&(at=w.color.multiplyOpacity(Zt,.5)),ze){case 16777216:case 33554432:Be.isBold()&&Le<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Le+=8),this._applyMinimumContrast(K,Zt,J.ansi[Le],Be,at,void 0)||Xe.push(`xterm-fg-${Le}`);break;case 50331648:const Ot=w.rgba.toColor(Le>>16&255,Le>>8&255,255&Le);this._applyMinimumContrast(K,Zt,Ot,Be,at,Ut)||this._addStyle(K,`color:#${k(Le.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(K,Zt,J.foreground,Be,at,void 0)||ut&&Xe.push(`xterm-fg-${g.INVERTED_DEFAULT_COLOR}`)}Xe.length&&(K.className=Xe.join(" "),Xe.length=0),ht||_e||Se?K.textContent=Re:de++,we!==this.defaultSpacing&&(K.style.letterSpacing=`${we}px`),te.push(K),Pe=qe}return K&&de&&(K.textContent=Re),te}_applyMinimumContrast(P,L,M,B,j,F){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,x.excludeFromContrastRatioDemands)(B.getCode()))return!1;const U=this._getContrastCache(B);let V;if(j||F||(V=U.getColor(L.rgba,M.rgba)),V===void 0){const Q=this._optionsService.rawOptions.minimumContrastRatio/(B.isDim()?2:1);V=w.color.ensureContrastRatio(j||L,F||M,Q),U.setColor((j||L).rgba,(F||M).rgba,V??null)}return!!V&&(this._addStyle(P,`color:${V.css}`),!0)}_getContrastCache(P){return P.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(P,L){P.setAttribute("style",`${P.getAttribute("style")||""}${L};`)}_isCellInSelection(P,L){const M=this._selectionStart,B=this._selectionEnd;return!(!M||!B)&&(this._columnSelectMode?M[0]<=B[0]?P>=M[0]&&L>=M[1]&&P<B[0]&&L<=B[1]:P<M[0]&&L>=M[1]&&P>=B[0]&&L<=B[1]:L>M[1]&&L<B[1]||M[1]===B[1]&&L===M[1]&&P>=M[0]&&P<B[0]||M[1]<B[1]&&L===B[1]&&P<B[0]||M[1]<B[1]&&L===M[1]&&P>=M[0])}};function k(P,L,M){for(;P.length<M;)P=L+P;return P}l.DomRendererRowFactory=O=d([f(1,m.ICharacterJoinerService),f(2,A.IOptionsService),f(3,m.ICoreBrowserService),f(4,A.ICoreService),f(5,A.IDecorationService),f(6,m.IThemeService)],O)},2550:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=h.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=h.createElement("span"),f=h.createElement("span");f.style.fontWeight="bold";const g=h.createElement("span");g.style.fontStyle="italic";const v=h.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[d,f,g,v],this._container.appendChild(d),this._container.appendChild(f),this._container.appendChild(g),this._container.appendChild(v),h.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(h,d,f,g){h===this._font&&d===this._fontSize&&f===this._weight&&g===this._weightBold||(this._font=h,this._fontSize=d,this._weight=f,this._weightBold=g,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${g}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${g}`,this.clear())}get(h,d,f){let g=0;if(!d&&!f&&h.length===1&&(g=h.charCodeAt(0))<256)return this._flat[g]!==-9999?this._flat[g]:this._flat[g]=this._measure(h,0);let v=h;d&&(v+="B"),f&&(v+="I");let S=this._holey.get(v);if(S===void 0){let A=0;d&&(A|=1),f&&(A|=2),S=this._measure(h,A),this._holey.set(v,S)}return S}_measure(h,d){const f=this._measureElements[d];return f.textContent=h.repeat(32),f.offsetWidth/32}}},2223:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const h=this.selectionStart,d=this.selectionEnd;return!(!h||!d)&&(h[1]>d[1]||h[1]===d[1]&&h[0]>d[0])}handleTrim(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const g=h(2585),v=h(8460),S=h(844);let A=l.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(m,b,x){super(),this._optionsService=x,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new w(m,b,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const m=this._measureStrategy.measure();m.width===this.width&&m.height===this.height||(this.width=m.width,this.height=m.height,this._onCharSizeChange.fire())}};l.CharSizeService=A=d([f(2,g.IOptionsService)],A);class w{constructor(b,x,y){this._document=b,this._parentElement=x,this._optionsService=y,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const b={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return b.width!==0&&b.height!==0&&(this._result.width=b.width/32,this._result.height=Math.ceil(b.height)),this._result}}},4269:function(c,l,h){var d=this&&this.__decorate||function(b,x,y,O){var k,P=arguments.length,L=P<3?x:O===null?O=Object.getOwnPropertyDescriptor(x,y):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,x,y,O);else for(var M=b.length-1;M>=0;M--)(k=b[M])&&(L=(P<3?k(L):P>3?k(x,y,L):k(x,y))||L);return P>3&&L&&Object.defineProperty(x,y,L),L},f=this&&this.__param||function(b,x){return function(y,O){x(y,O,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const g=h(3734),v=h(643),S=h(511),A=h(2585);class w extends g.AttributeData{constructor(x,y,O){super(),this.content=0,this.combinedData="",this.fg=x.fg,this.bg=x.bg,this.combinedData=y,this._width=O}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(x){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let m=l.CharacterJoinerService=class vi{constructor(x){this._bufferService=x,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(x){const y={id:this._nextCharacterJoinerId++,handler:x};return this._characterJoiners.push(y),y.id}deregister(x){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===x)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(x){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(x);if(!y||y.length===0)return[];const O=[],k=y.translateToString(!0);let P=0,L=0,M=0,B=y.getFg(0),j=y.getBg(0);for(let F=0;F<y.getTrimmedLength();F++)if(y.loadCell(F,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==B||this._workCell.bg!==j){if(F-P>1){const U=this._getJoinedRanges(k,M,L,y,P);for(let V=0;V<U.length;V++)O.push(U[V])}P=F,M=L,B=this._workCell.fg,j=this._workCell.bg}L+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-P>1){const F=this._getJoinedRanges(k,M,L,y,P);for(let U=0;U<F.length;U++)O.push(F[U])}return O}_getJoinedRanges(x,y,O,k,P){const L=x.substring(y,O);let M=[];try{M=this._characterJoiners[0].handler(L)}catch(B){console.error(B)}for(let B=1;B<this._characterJoiners.length;B++)try{const j=this._characterJoiners[B].handler(L);for(let F=0;F<j.length;F++)vi._mergeRanges(M,j[F])}catch(j){console.error(j)}return this._stringRangesToCellRanges(M,k,P),M}_stringRangesToCellRanges(x,y,O){let k=0,P=!1,L=0,M=x[k];if(M){for(let B=O;B<this._bufferService.cols;B++){const j=y.getWidth(B),F=y.getString(B).length||v.WHITESPACE_CELL_CHAR.length;if(j!==0){if(!P&&M[0]<=L&&(M[0]=B,P=!0),M[1]<=L){if(M[1]=B,M=x[++k],!M)break;M[0]<=L?(M[0]=B,P=!0):P=!1}L+=F}}M&&(M[1]=this._bufferService.cols)}}static _mergeRanges(x,y){let O=!1;for(let k=0;k<x.length;k++){const P=x[k];if(O){if(y[1]<=P[0])return x[k-1][1]=y[1],x;if(y[1]<=P[1])return x[k-1][1]=Math.max(y[1],P[1]),x.splice(k,1),x;x.splice(k,1),k--}else{if(y[1]<=P[0])return x.splice(k,0,y),x;if(y[1]<=P[1])return P[0]=Math.min(y[0],P[0]),x;y[0]<P[1]&&(P[0]=Math.min(y[0],P[0]),O=!0)}}return O?x[x.length-1][1]=y[1]:x.push(y),x}};l.CharacterJoinerService=m=d([f(0,A.IBufferService)],m)},5114:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(h,d){this._textarea=h,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(c,l,h){var d=this&&this.__decorate||function(A,w,m,b){var x,y=arguments.length,O=y<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(A,w,m,b);else for(var k=A.length-1;k>=0;k--)(x=A[k])&&(O=(y<3?x(O):y>3?x(w,m,O):x(w,m))||O);return y>3&&O&&Object.defineProperty(w,m,O),O},f=this&&this.__param||function(A,w){return function(m,b){w(m,b,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const g=h(4725),v=h(9806);let S=l.MouseService=class{constructor(A,w){this._renderService=A,this._charSizeService=w}getCoords(A,w,m,b,x){return(0,v.getCoords)(window,A,w,m,b,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,x)}getMouseReportCoords(A,w){const m=(0,v.getCoordsRelativeToElement)(window,A,w);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};l.MouseService=S=d([f(0,g.IRenderService),f(1,g.ICharSizeService)],S)},3230:function(c,l,h){var d=this&&this.__decorate||function(O,k,P,L){var M,B=arguments.length,j=B<3?k:L===null?L=Object.getOwnPropertyDescriptor(k,P):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(O,k,P,L);else for(var F=O.length-1;F>=0;F--)(M=O[F])&&(j=(B<3?M(j):B>3?M(k,P,j):M(k,P))||j);return B>3&&j&&Object.defineProperty(k,P,j),j},f=this&&this.__param||function(O,k){return function(P,L){k(P,L,O)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const g=h(3656),v=h(6193),S=h(5596),A=h(4725),w=h(8460),m=h(844),b=h(7226),x=h(2585);let y=l.RenderService=class extends m.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(O,k,P,L,M,B,j,F){if(super(),this._rowCount=O,this._charSizeService=L,this._renderer=this.register(new m.MutableDisposable),this._pausedResizeTask=new b.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(j.window,(U,V)=>this._renderRows(U,V)),this.register(this._renderDebouncer),this._screenDprMonitor=new S.ScreenDprMonitor(j.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(B.onResize(()=>this._fullRefresh())),this.register(B.buffers.onBufferActivate(()=>{var U;return(U=this._renderer.value)===null||U===void 0?void 0:U.clear()})),this.register(P.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(M.onDecorationRegistered(()=>this._fullRefresh())),this.register(M.onDecorationRemoved(()=>this._fullRefresh())),this.register(P.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(B.cols,B.rows),this._fullRefresh()})),this.register(P.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(B.buffer.y,B.buffer.y,!0))),this.register((0,g.addDisposableDomListener)(j.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(F.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in j.window){const U=new j.window.IntersectionObserver(V=>this._handleIntersectionChange(V[V.length-1]),{threshold:0});U.observe(k),this.register({dispose:()=>U.disconnect()})}}_handleIntersectionChange(O){this._isPaused=O.isIntersecting===void 0?O.intersectionRatio===0:!O.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(O,k,P=!1){this._isPaused?this._needsFullRefresh=!0:(P||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(O,k,this._rowCount))}_renderRows(O,k){this._renderer.value&&(O=Math.min(O,this._rowCount-1),k=Math.min(k,this._rowCount-1),this._renderer.value.renderRows(O,k),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:O,end:k}),this._onRender.fire({start:O,end:k}),this._isNextRenderRedrawOnly=!0)}resize(O,k){this._rowCount=k,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(O){this._renderer.value=O,this._renderer.value.onRequestRedraw(k=>this.refreshRows(k.start,k.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(O){return this._renderDebouncer.addRefreshCallback(O)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var O,k;this._renderer.value&&((k=(O=this._renderer.value).clearTextureAtlas)===null||k===void 0||k.call(O),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(O,k){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(O,k)):this._renderer.value.handleResize(O,k),this._fullRefresh())}handleCharSizeChanged(){var O;(O=this._renderer.value)===null||O===void 0||O.handleCharSizeChanged()}handleBlur(){var O;(O=this._renderer.value)===null||O===void 0||O.handleBlur()}handleFocus(){var O;(O=this._renderer.value)===null||O===void 0||O.handleFocus()}handleSelectionChanged(O,k,P){var L;this._selectionState.start=O,this._selectionState.end=k,this._selectionState.columnSelectMode=P,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(O,k,P)}handleCursorMove(){var O;(O=this._renderer.value)===null||O===void 0||O.handleCursorMove()}clear(){var O;(O=this._renderer.value)===null||O===void 0||O.clear()}};l.RenderService=y=d([f(2,x.IOptionsService),f(3,A.ICharSizeService),f(4,x.IDecorationService),f(5,x.IBufferService),f(6,A.ICoreBrowserService),f(7,A.IThemeService)],y)},9312:function(c,l,h){var d=this&&this.__decorate||function(M,B,j,F){var U,V=arguments.length,Q=V<3?B:F===null?F=Object.getOwnPropertyDescriptor(B,j):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(M,B,j,F);else for(var q=M.length-1;q>=0;q--)(U=M[q])&&(Q=(V<3?U(Q):V>3?U(B,j,Q):U(B,j))||Q);return V>3&&Q&&Object.defineProperty(B,j,Q),Q},f=this&&this.__param||function(M,B){return function(j,F){B(j,F,M)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const g=h(9806),v=h(9504),S=h(456),A=h(4725),w=h(8460),m=h(844),b=h(6114),x=h(4841),y=h(511),O=h(2585),k=" ",P=new RegExp(k,"g");let L=l.SelectionService=class extends m.Disposable{constructor(M,B,j,F,U,V,Q,q,G){super(),this._element=M,this._screenElement=B,this._linkifier=j,this._bufferService=F,this._coreService=U,this._mouseService=V,this._optionsService=Q,this._renderService=q,this._coreBrowserService=G,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=te=>this._handleMouseMove(te),this._mouseUpListener=te=>this._handleMouseUp(te),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(te=>this._handleTrim(te)),this.register(this._bufferService.buffers.onBufferActivate(te=>this._handleBufferActivate(te))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const M=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!M||!B||M[0]===B[0]&&M[1]===B[1])}get selectionText(){const M=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;if(!M||!B)return"";const j=this._bufferService.buffer,F=[];if(this._activeSelectionMode===3){if(M[0]===B[0])return"";const U=M[0]<B[0]?M[0]:B[0],V=M[0]<B[0]?B[0]:M[0];for(let Q=M[1];Q<=B[1];Q++){const q=j.translateBufferLineToString(Q,!0,U,V);F.push(q)}}else{const U=M[1]===B[1]?B[0]:void 0;F.push(j.translateBufferLineToString(M[1],!0,M[0],U));for(let V=M[1]+1;V<=B[1]-1;V++){const Q=j.lines.get(V),q=j.translateBufferLineToString(V,!0);Q?.isWrapped?F[F.length-1]+=q:F.push(q)}if(M[1]!==B[1]){const V=j.lines.get(B[1]),Q=j.translateBufferLineToString(B[1],!0,0,B[0]);V&&V.isWrapped?F[F.length-1]+=Q:F.push(Q)}}return F.map(U=>U.replace(P," ")).join(b.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(M){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),b.isLinux&&M&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(M){const B=this._getMouseBufferCoords(M),j=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!!(j&&F&&B)&&this._areCoordsInSelection(B,j,F)}isCellInSelection(M,B){const j=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!(!j||!F)&&this._areCoordsInSelection([M,B],j,F)}_areCoordsInSelection(M,B,j){return M[1]>B[1]&&M[1]<j[1]||B[1]===j[1]&&M[1]===B[1]&&M[0]>=B[0]&&M[0]<j[0]||B[1]<j[1]&&M[1]===j[1]&&M[0]<j[0]||B[1]<j[1]&&M[1]===B[1]&&M[0]>=B[0]}_selectWordAtCursor(M,B){var j,F;const U=(F=(j=this._linkifier.currentLink)===null||j===void 0?void 0:j.link)===null||F===void 0?void 0:F.range;if(U)return this._model.selectionStart=[U.start.x-1,U.start.y-1],this._model.selectionStartLength=(0,x.getRangeLength)(U,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const V=this._getMouseBufferCoords(M);return!!V&&(this._selectWordAt(V,B),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(M,B){this._model.clearSelection(),M=Math.max(M,0),B=Math.min(B,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,M],this._model.selectionEnd=[this._bufferService.cols,B],this.refresh(),this._onSelectionChange.fire()}_handleTrim(M){this._model.handleTrim(M)&&this.refresh()}_getMouseBufferCoords(M){const B=this._mouseService.getCoords(M,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(B)return B[0]--,B[1]--,B[1]+=this._bufferService.buffer.ydisp,B}_getMouseEventScrollAmount(M){let B=(0,g.getCoordsRelativeToElement)(this._coreBrowserService.window,M,this._screenElement)[1];const j=this._renderService.dimensions.css.canvas.height;return B>=0&&B<=j?0:(B>j&&(B-=j),B=Math.min(Math.max(B,-50),50),B/=50,B/Math.abs(B)+Math.round(14*B))}shouldForceSelection(M){return b.isMac?M.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:M.shiftKey}handleMouseDown(M){if(this._mouseDownTimeStamp=M.timeStamp,(M.button!==2||!this.hasSelection)&&M.button===0){if(!this._enabled){if(!this.shouldForceSelection(M))return;M.stopPropagation()}M.preventDefault(),this._dragScrollAmount=0,this._enabled&&M.shiftKey?this._handleIncrementalClick(M):M.detail===1?this._handleSingleClick(M):M.detail===2?this._handleDoubleClick(M):M.detail===3&&this._handleTripleClick(M),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(M){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(M))}_handleSingleClick(M){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(M)?3:0,this._model.selectionStart=this._getMouseBufferCoords(M),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const B=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);B&&B.length!==this._model.selectionStart[0]&&B.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(M){this._selectWordAtCursor(M,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(M){const B=this._getMouseBufferCoords(M);B&&(this._activeSelectionMode=2,this._selectLineAt(B[1]))}shouldColumnSelect(M){return M.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(M){if(M.stopImmediatePropagation(),!this._model.selectionStart)return;const B=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(M),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(M),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const j=this._bufferService.buffer;if(this._model.selectionEnd[1]<j.lines.length){const F=j.lines.get(this._model.selectionEnd[1]);F&&F.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}B&&B[0]===this._model.selectionEnd[0]&&B[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const M=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(M.ydisp+this._bufferService.rows,M.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=M.ydisp),this.refresh()}}_handleMouseUp(M){const B=M.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&B<500&&M.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const j=this._mouseService.getCoords(M,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(j&&j[0]!==void 0&&j[1]!==void 0){const F=(0,v.moveToCellSequence)(j[0]-1,j[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(F,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const M=this._model.finalSelectionStart,B=this._model.finalSelectionEnd,j=!(!M||!B||M[0]===B[0]&&M[1]===B[1]);j?M&&B&&(this._oldSelectionStart&&this._oldSelectionEnd&&M[0]===this._oldSelectionStart[0]&&M[1]===this._oldSelectionStart[1]&&B[0]===this._oldSelectionEnd[0]&&B[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(M,B,j)):this._oldHasSelection&&this._fireOnSelectionChange(M,B,j)}_fireOnSelectionChange(M,B,j){this._oldSelectionStart=M,this._oldSelectionEnd=B,this._oldHasSelection=j,this._onSelectionChange.fire()}_handleBufferActivate(M){this.clearSelection(),this._trimListener.dispose(),this._trimListener=M.activeBuffer.lines.onTrim(B=>this._handleTrim(B))}_convertViewportColToCharacterIndex(M,B){let j=B;for(let F=0;B>=F;F++){const U=M.loadCell(F,this._workCell).getChars().length;this._workCell.getWidth()===0?j--:U>1&&B!==F&&(j+=U-1)}return j}setSelection(M,B,j){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[M,B],this._model.selectionStartLength=j,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(M){this._isClickInSelection(M)||(this._selectWordAtCursor(M,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(M,B,j=!0,F=!0){if(M[0]>=this._bufferService.cols)return;const U=this._bufferService.buffer,V=U.lines.get(M[1]);if(!V)return;const Q=U.translateBufferLineToString(M[1],!1);let q=this._convertViewportColToCharacterIndex(V,M[0]),G=q;const te=M[0]-q;let Y=0,J=0,K=0,ne=0;if(Q.charAt(q)===" "){for(;q>0&&Q.charAt(q-1)===" ";)q--;for(;G<Q.length&&Q.charAt(G+1)===" ";)G++}else{let Te=M[0],Me=M[0];V.getWidth(Te)===0&&(Y++,Te--),V.getWidth(Me)===2&&(J++,Me++);const Ie=V.getString(Me).length;for(Ie>1&&(ne+=Ie-1,G+=Ie-1);Te>0&&q>0&&!this._isCharWordSeparator(V.loadCell(Te-1,this._workCell));){V.loadCell(Te-1,this._workCell);const ce=this._workCell.getChars().length;this._workCell.getWidth()===0?(Y++,Te--):ce>1&&(K+=ce-1,q-=ce-1),q--,Te--}for(;Me<V.length&&G+1<Q.length&&!this._isCharWordSeparator(V.loadCell(Me+1,this._workCell));){V.loadCell(Me+1,this._workCell);const ce=this._workCell.getChars().length;this._workCell.getWidth()===2?(J++,Me++):ce>1&&(ne+=ce-1,G+=ce-1),G++,Me++}}G++;let de=q+te-Y+K,Re=Math.min(this._bufferService.cols,G-q+Y+J-K-ne);if(B||Q.slice(q,G).trim()!==""){if(j&&de===0&&V.getCodePoint(0)!==32){const Te=U.lines.get(M[1]-1);if(Te&&V.isWrapped&&Te.getCodePoint(this._bufferService.cols-1)!==32){const Me=this._getWordAt([this._bufferService.cols-1,M[1]-1],!1,!0,!1);if(Me){const Ie=this._bufferService.cols-Me.start;de-=Ie,Re+=Ie}}}if(F&&de+Re===this._bufferService.cols&&V.getCodePoint(this._bufferService.cols-1)!==32){const Te=U.lines.get(M[1]+1);if(Te?.isWrapped&&Te.getCodePoint(0)!==32){const Me=this._getWordAt([0,M[1]+1],!1,!1,!0);Me&&(Re+=Me.length)}}return{start:de,length:Re}}}_selectWordAt(M,B){const j=this._getWordAt(M,B);if(j){for(;j.start<0;)j.start+=this._bufferService.cols,M[1]--;this._model.selectionStart=[j.start,M[1]],this._model.selectionStartLength=j.length}}_selectToWordAt(M){const B=this._getWordAt(M,!0);if(B){let j=M[1];for(;B.start<0;)B.start+=this._bufferService.cols,j--;if(!this._model.areSelectionValuesReversed())for(;B.start+B.length>this._bufferService.cols;)B.length-=this._bufferService.cols,j++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?B.start:B.start+B.length,j]}}_isCharWordSeparator(M){return M.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(M.getChars())>=0}_selectLineAt(M){const B=this._bufferService.buffer.getWrappedRangeForLine(M),j={start:{x:0,y:B.first},end:{x:this._bufferService.cols-1,y:B.last}};this._model.selectionStart=[0,B.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,x.getRangeLength)(j,this._bufferService.cols)}};l.SelectionService=L=d([f(3,O.IBufferService),f(4,O.ICoreService),f(5,A.IMouseService),f(6,O.IOptionsService),f(7,A.IRenderService),f(8,A.ICoreBrowserService)],L)},4725:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const d=h(8343);l.ICharSizeService=(0,d.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),l.IMouseService=(0,d.createDecorator)("MouseService"),l.IRenderService=(0,d.createDecorator)("RenderService"),l.ISelectionService=(0,d.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(c,l,h){var d=this&&this.__decorate||function(L,M,B,j){var F,U=arguments.length,V=U<3?M:j===null?j=Object.getOwnPropertyDescriptor(M,B):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(L,M,B,j);else for(var Q=L.length-1;Q>=0;Q--)(F=L[Q])&&(V=(U<3?F(V):U>3?F(M,B,V):F(M,B))||V);return U>3&&V&&Object.defineProperty(M,B,V),V},f=this&&this.__param||function(L,M){return function(B,j){M(B,j,L)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const g=h(7239),v=h(8055),S=h(8460),A=h(844),w=h(2585),m=v.css.toColor("#ffffff"),b=v.css.toColor("#000000"),x=v.css.toColor("#ffffff"),y=v.css.toColor("#000000"),O={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],M=[0,95,135,175,215,255];for(let B=0;B<216;B++){const j=M[B/36%6|0],F=M[B/6%6|0],U=M[B%6];L.push({css:v.channels.toCss(j,F,U),rgba:v.channels.toRgba(j,F,U)})}for(let B=0;B<24;B++){const j=8+10*B;L.push({css:v.channels.toCss(j,j,j),rgba:v.channels.toRgba(j,j,j)})}return L})());let k=l.ThemeService=class extends A.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new g.ColorContrastCache,this._halfContrastCache=new g.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:b,cursor:x,cursorAccent:y,selectionForeground:void 0,selectionBackgroundTransparent:O,selectionBackgroundOpaque:v.color.blend(b,O),selectionInactiveBackgroundTransparent:O,selectionInactiveBackgroundOpaque:v.color.blend(b,O),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const M=this._colors;if(M.foreground=P(L.foreground,m),M.background=P(L.background,b),M.cursor=P(L.cursor,x),M.cursorAccent=P(L.cursorAccent,y),M.selectionBackgroundTransparent=P(L.selectionBackground,O),M.selectionBackgroundOpaque=v.color.blend(M.background,M.selectionBackgroundTransparent),M.selectionInactiveBackgroundTransparent=P(L.selectionInactiveBackground,M.selectionBackgroundTransparent),M.selectionInactiveBackgroundOpaque=v.color.blend(M.background,M.selectionInactiveBackgroundTransparent),M.selectionForeground=L.selectionForeground?P(L.selectionForeground,v.NULL_COLOR):void 0,M.selectionForeground===v.NULL_COLOR&&(M.selectionForeground=void 0),v.color.isOpaque(M.selectionBackgroundTransparent)&&(M.selectionBackgroundTransparent=v.color.opacity(M.selectionBackgroundTransparent,.3)),v.color.isOpaque(M.selectionInactiveBackgroundTransparent)&&(M.selectionInactiveBackgroundTransparent=v.color.opacity(M.selectionInactiveBackgroundTransparent,.3)),M.ansi=l.DEFAULT_ANSI_COLORS.slice(),M.ansi[0]=P(L.black,l.DEFAULT_ANSI_COLORS[0]),M.ansi[1]=P(L.red,l.DEFAULT_ANSI_COLORS[1]),M.ansi[2]=P(L.green,l.DEFAULT_ANSI_COLORS[2]),M.ansi[3]=P(L.yellow,l.DEFAULT_ANSI_COLORS[3]),M.ansi[4]=P(L.blue,l.DEFAULT_ANSI_COLORS[4]),M.ansi[5]=P(L.magenta,l.DEFAULT_ANSI_COLORS[5]),M.ansi[6]=P(L.cyan,l.DEFAULT_ANSI_COLORS[6]),M.ansi[7]=P(L.white,l.DEFAULT_ANSI_COLORS[7]),M.ansi[8]=P(L.brightBlack,l.DEFAULT_ANSI_COLORS[8]),M.ansi[9]=P(L.brightRed,l.DEFAULT_ANSI_COLORS[9]),M.ansi[10]=P(L.brightGreen,l.DEFAULT_ANSI_COLORS[10]),M.ansi[11]=P(L.brightYellow,l.DEFAULT_ANSI_COLORS[11]),M.ansi[12]=P(L.brightBlue,l.DEFAULT_ANSI_COLORS[12]),M.ansi[13]=P(L.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),M.ansi[14]=P(L.brightCyan,l.DEFAULT_ANSI_COLORS[14]),M.ansi[15]=P(L.brightWhite,l.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const B=Math.min(M.ansi.length-16,L.extendedAnsi.length);for(let j=0;j<B;j++)M.ansi[j+16]=P(L.extendedAnsi[j],l.DEFAULT_ANSI_COLORS[j+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let M=0;M<this._restoreColors.ansi.length;++M)this._colors.ansi[M]=this._restoreColors.ansi[M]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function P(L,M){if(L!==void 0)try{return v.css.toColor(L)}catch{}return M}l.ThemeService=k=d([f(0,w.IOptionsService)],k)},6349:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const d=h(8460),f=h(844);class g extends f.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const A=new Array(S);for(let w=0;w<Math.min(S,this.length);w++)A[w]=this._array[this._getCyclicIndex(w)];this._array=A,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let A=this._length;A<S;A++)this._array[A]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,A){this._array[this._getCyclicIndex(S)]=A}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,A,...w){if(A){for(let m=S;m<this._length-A;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+A)];this._length-=A,this.onDeleteEmitter.fire({index:S,amount:A})}for(let m=this._length-1;m>=S;m--)this._array[this._getCyclicIndex(m+w.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<w.length;m++)this._array[this._getCyclicIndex(S+m)]=w[m];if(w.length&&this.onInsertEmitter.fire({index:S,amount:w.length}),this._length+w.length>this._maxLength){const m=this._length+w.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=w.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,A,w){if(!(A<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let b=A-1;b>=0;b--)this.set(S+b+w,this.get(S+b));const m=S+A+w-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<A;m++)this.set(S+m+w,this.get(S+m))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}l.CircularList=g},1439:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function h(d,f=5){if(typeof d!="object")return d;const g=Array.isArray(d)?[]:{};for(const v in d)g[v]=f<=1?d[v]:d[v]&&h(d[v],f-1);return g}},8055:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(6114);let f=0,g=0,v=0,S=0;var A,w,m,b,x;function y(k){const P=k.toString(16);return P.length<2?"0"+P:P}function O(k,P){return k<P?(P+.05)/(k+.05):(k+.05)/(P+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(k){k.toCss=function(P,L,M,B){return B!==void 0?`#${y(P)}${y(L)}${y(M)}${y(B)}`:`#${y(P)}${y(L)}${y(M)}`},k.toRgba=function(P,L,M,B=255){return(P<<24|L<<16|M<<8|B)>>>0}}(A||(l.channels=A={})),function(k){function P(L,M){return S=Math.round(255*M),[f,g,v]=x.toChannels(L.rgba),{css:A.toCss(f,g,v,S),rgba:A.toRgba(f,g,v,S)}}k.blend=function(L,M){if(S=(255&M.rgba)/255,S===1)return{css:M.css,rgba:M.rgba};const B=M.rgba>>24&255,j=M.rgba>>16&255,F=M.rgba>>8&255,U=L.rgba>>24&255,V=L.rgba>>16&255,Q=L.rgba>>8&255;return f=U+Math.round((B-U)*S),g=V+Math.round((j-V)*S),v=Q+Math.round((F-Q)*S),{css:A.toCss(f,g,v),rgba:A.toRgba(f,g,v)}},k.isOpaque=function(L){return(255&L.rgba)==255},k.ensureContrastRatio=function(L,M,B){const j=x.ensureContrastRatio(L.rgba,M.rgba,B);if(j)return x.toColor(j>>24&255,j>>16&255,j>>8&255)},k.opaque=function(L){const M=(255|L.rgba)>>>0;return[f,g,v]=x.toChannels(M),{css:A.toCss(f,g,v),rgba:M}},k.opacity=P,k.multiplyOpacity=function(L,M){return S=255&L.rgba,P(L,S*M/255)},k.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(k){let P,L;if(!d.isNode){const M=document.createElement("canvas");M.width=1,M.height=1;const B=M.getContext("2d",{willReadFrequently:!0});B&&(P=B,P.globalCompositeOperation="copy",L=P.createLinearGradient(0,0,1,1))}k.toColor=function(M){if(M.match(/#[\da-f]{3,8}/i))switch(M.length){case 4:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),x.toColor(f,g,v);case 5:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),S=parseInt(M.slice(4,5).repeat(2),16),x.toColor(f,g,v,S);case 7:return{css:M,rgba:(parseInt(M.slice(1),16)<<8|255)>>>0};case 9:return{css:M,rgba:parseInt(M.slice(1),16)>>>0}}const B=M.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(B)return f=parseInt(B[1]),g=parseInt(B[2]),v=parseInt(B[3]),S=Math.round(255*(B[5]===void 0?1:parseFloat(B[5]))),x.toColor(f,g,v,S);if(!P||!L)throw new Error("css.toColor: Unsupported css format");if(P.fillStyle=L,P.fillStyle=M,typeof P.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(P.fillRect(0,0,1,1),[f,g,v,S]=P.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,v,S),css:M}}}(m||(l.css=m={})),function(k){function P(L,M,B){const j=L/255,F=M/255,U=B/255;return .2126*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.7152*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))}k.relativeLuminance=function(L){return P(L>>16&255,L>>8&255,255&L)},k.relativeLuminance2=P}(b||(l.rgb=b={})),function(k){function P(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q>0||q>0||G>0);)Q-=Math.max(0,Math.ceil(.1*Q)),q-=Math.max(0,Math.ceil(.1*q)),G-=Math.max(0,Math.ceil(.1*G)),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}function L(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q<255||q<255||G<255);)Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),q=Math.min(255,q+Math.ceil(.1*(255-q))),G=Math.min(255,G+Math.ceil(.1*(255-G))),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}k.ensureContrastRatio=function(M,B,j){const F=b.relativeLuminance(M>>8),U=b.relativeLuminance(B>>8);if(O(F,U)<j){if(U<F){const q=P(M,B,j),G=O(F,b.relativeLuminance(q>>8));if(G<j){const te=L(M,B,j);return G>O(F,b.relativeLuminance(te>>8))?q:te}return q}const V=L(M,B,j),Q=O(F,b.relativeLuminance(V>>8));if(Q<j){const q=P(M,B,j);return Q>O(F,b.relativeLuminance(q>>8))?V:q}return V}},k.reduceLuminance=P,k.increaseLuminance=L,k.toChannels=function(M){return[M>>24&255,M>>16&255,M>>8&255,255&M]},k.toColor=function(M,B,j,F){return{css:A.toCss(M,B,j,F),rgba:A.toRgba(M,B,j,F)}}}(x||(l.rgba=x={})),l.toPaddedHex=y,l.contrastRatio=O},8969:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const d=h(844),f=h(2585),g=h(4348),v=h(7866),S=h(744),A=h(7302),w=h(6975),m=h(8460),b=h(1753),x=h(1480),y=h(7994),O=h(9282),k=h(5435),P=h(5981),L=h(2660);let M=!1;class B extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(F=>{var U;(U=this._onScrollApi)===null||U===void 0||U.fire(F.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(F){for(const U in F)this.optionsService.options[U]=F[U]}constructor(F){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new g.InstantiationService,this.optionsService=this.register(new A.OptionsService(F)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(b.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(x.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(y.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new k.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(U=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(U=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new P.WriteBuffer((U,V)=>this._inputHandler.parse(U,V))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(F,U){this._writeBuffer.write(F,U)}writeSync(F,U){this._logService.logLevel<=f.LogLevelEnum.WARN&&!M&&(this._logService.warn("writeSync is unreliable and will be removed soon."),M=!0),this._writeBuffer.writeSync(F,U)}resize(F,U){isNaN(F)||isNaN(U)||(F=Math.max(F,S.MINIMUM_COLS),U=Math.max(U,S.MINIMUM_ROWS),this._bufferService.resize(F,U))}scroll(F,U=!1){this._bufferService.scroll(F,U)}scrollLines(F,U,V){this._bufferService.scrollLines(F,U,V)}scrollPages(F){this.scrollLines(F*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(F){const U=F-this._bufferService.buffer.ydisp;U!==0&&this.scrollLines(U)}registerEscHandler(F,U){return this._inputHandler.registerEscHandler(F,U)}registerDcsHandler(F,U){return this._inputHandler.registerDcsHandler(F,U)}registerCsiHandler(F,U){return this._inputHandler.registerCsiHandler(F,U)}registerOscHandler(F,U){return this._inputHandler.registerOscHandler(F,U)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let F=!1;const U=this.optionsService.rawOptions.windowsPty;U&&U.buildNumber!==void 0&&U.buildNumber!==void 0?F=U.backend==="conpty"&&U.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(F=!0),F?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const F=[];F.push(this.onLineFeed(O.updateWindowsModeWrappedState.bind(null,this._bufferService))),F.push(this.registerCsiHandler({final:"H"},()=>((0,O.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const U of F)U.dispose()})}}}l.CoreTerminal=B},8460:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},5435:function(c,l,h){var d=this&&this.__decorate||function(te,Y,J,K){var ne,de=arguments.length,Re=de<3?Y:K===null?K=Object.getOwnPropertyDescriptor(Y,J):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Re=Reflect.decorate(te,Y,J,K);else for(var Te=te.length-1;Te>=0;Te--)(ne=te[Te])&&(Re=(de<3?ne(Re):de>3?ne(Y,J,Re):ne(Y,J))||Re);return de>3&&Re&&Object.defineProperty(Y,J,Re),Re},f=this&&this.__param||function(te,Y){return function(J,K){Y(J,K,te)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const g=h(2584),v=h(7116),S=h(2015),A=h(844),w=h(482),m=h(8437),b=h(8460),x=h(643),y=h(511),O=h(3734),k=h(2585),P=h(6242),L=h(6351),M=h(5941),B={"(":0,")":1,"*":2,"+":3,"-":1,".":2},j=131072;function F(te,Y){if(te>24)return Y.setWinLines||!1;switch(te){case 1:return!!Y.restoreWin;case 2:return!!Y.minimizeWin;case 3:return!!Y.setWinPosition;case 4:return!!Y.setWinSizePixels;case 5:return!!Y.raiseWin;case 6:return!!Y.lowerWin;case 7:return!!Y.refreshWin;case 8:return!!Y.setWinSizeChars;case 9:return!!Y.maximizeWin;case 10:return!!Y.fullscreenWin;case 11:return!!Y.getWinState;case 13:return!!Y.getWinPosition;case 14:return!!Y.getWinSizePixels;case 15:return!!Y.getScreenSizePixels;case 16:return!!Y.getCellSizePixels;case 18:return!!Y.getWinSizeChars;case 19:return!!Y.getScreenSizeChars;case 20:return!!Y.getIconTitle;case 21:return!!Y.getWinTitle;case 22:return!!Y.pushTitle;case 23:return!!Y.popTitle;case 24:return!!Y.setWinLines}return!1}var U;(function(te){te[te.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",te[te.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let V=0;class Q extends A.Disposable{getAttrData(){return this._curAttrData}constructor(Y,J,K,ne,de,Re,Te,Me,Ie=new S.EscapeSequenceParser){super(),this._bufferService=Y,this._charsetService=J,this._coreService=K,this._logService=ne,this._optionsService=de,this._oscLinkService=Re,this._coreMouseService=Te,this._unicodeService=Me,this._parser=Ie,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new y.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new b.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new b.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new b.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new b.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new b.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new b.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new b.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new b.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new b.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new b.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new q(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(ce=>this._activeBuffer=ce.activeBuffer)),this._parser.setCsiHandlerFallback((ce,pe)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(ce),params:pe.toArray()})}),this._parser.setEscHandlerFallback(ce=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(ce)})}),this._parser.setExecuteHandlerFallback(ce=>{this._logService.debug("Unknown EXECUTE code: ",{code:ce})}),this._parser.setOscHandlerFallback((ce,pe,me)=>{this._logService.debug("Unknown OSC code: ",{identifier:ce,action:pe,data:me})}),this._parser.setDcsHandlerFallback((ce,pe,me)=>{pe==="HOOK"&&(me=me.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(ce),action:pe,payload:me})}),this._parser.setPrintHandler((ce,pe,me)=>this.print(ce,pe,me)),this._parser.registerCsiHandler({final:"@"},ce=>this.insertChars(ce)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},ce=>this.scrollLeft(ce)),this._parser.registerCsiHandler({final:"A"},ce=>this.cursorUp(ce)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},ce=>this.scrollRight(ce)),this._parser.registerCsiHandler({final:"B"},ce=>this.cursorDown(ce)),this._parser.registerCsiHandler({final:"C"},ce=>this.cursorForward(ce)),this._parser.registerCsiHandler({final:"D"},ce=>this.cursorBackward(ce)),this._parser.registerCsiHandler({final:"E"},ce=>this.cursorNextLine(ce)),this._parser.registerCsiHandler({final:"F"},ce=>this.cursorPrecedingLine(ce)),this._parser.registerCsiHandler({final:"G"},ce=>this.cursorCharAbsolute(ce)),this._parser.registerCsiHandler({final:"H"},ce=>this.cursorPosition(ce)),this._parser.registerCsiHandler({final:"I"},ce=>this.cursorForwardTab(ce)),this._parser.registerCsiHandler({final:"J"},ce=>this.eraseInDisplay(ce,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},ce=>this.eraseInDisplay(ce,!0)),this._parser.registerCsiHandler({final:"K"},ce=>this.eraseInLine(ce,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},ce=>this.eraseInLine(ce,!0)),this._parser.registerCsiHandler({final:"L"},ce=>this.insertLines(ce)),this._parser.registerCsiHandler({final:"M"},ce=>this.deleteLines(ce)),this._parser.registerCsiHandler({final:"P"},ce=>this.deleteChars(ce)),this._parser.registerCsiHandler({final:"S"},ce=>this.scrollUp(ce)),this._parser.registerCsiHandler({final:"T"},ce=>this.scrollDown(ce)),this._parser.registerCsiHandler({final:"X"},ce=>this.eraseChars(ce)),this._parser.registerCsiHandler({final:"Z"},ce=>this.cursorBackwardTab(ce)),this._parser.registerCsiHandler({final:"`"},ce=>this.charPosAbsolute(ce)),this._parser.registerCsiHandler({final:"a"},ce=>this.hPositionRelative(ce)),this._parser.registerCsiHandler({final:"b"},ce=>this.repeatPrecedingCharacter(ce)),this._parser.registerCsiHandler({final:"c"},ce=>this.sendDeviceAttributesPrimary(ce)),this._parser.registerCsiHandler({prefix:">",final:"c"},ce=>this.sendDeviceAttributesSecondary(ce)),this._parser.registerCsiHandler({final:"d"},ce=>this.linePosAbsolute(ce)),this._parser.registerCsiHandler({final:"e"},ce=>this.vPositionRelative(ce)),this._parser.registerCsiHandler({final:"f"},ce=>this.hVPosition(ce)),this._parser.registerCsiHandler({final:"g"},ce=>this.tabClear(ce)),this._parser.registerCsiHandler({final:"h"},ce=>this.setMode(ce)),this._parser.registerCsiHandler({prefix:"?",final:"h"},ce=>this.setModePrivate(ce)),this._parser.registerCsiHandler({final:"l"},ce=>this.resetMode(ce)),this._parser.registerCsiHandler({prefix:"?",final:"l"},ce=>this.resetModePrivate(ce)),this._parser.registerCsiHandler({final:"m"},ce=>this.charAttributes(ce)),this._parser.registerCsiHandler({final:"n"},ce=>this.deviceStatus(ce)),this._parser.registerCsiHandler({prefix:"?",final:"n"},ce=>this.deviceStatusPrivate(ce)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},ce=>this.softReset(ce)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},ce=>this.setCursorStyle(ce)),this._parser.registerCsiHandler({final:"r"},ce=>this.setScrollRegion(ce)),this._parser.registerCsiHandler({final:"s"},ce=>this.saveCursor(ce)),this._parser.registerCsiHandler({final:"t"},ce=>this.windowOptions(ce)),this._parser.registerCsiHandler({final:"u"},ce=>this.restoreCursor(ce)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},ce=>this.insertColumns(ce)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},ce=>this.deleteColumns(ce)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},ce=>this.selectProtected(ce)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},ce=>this.requestMode(ce,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},ce=>this.requestMode(ce,!1)),this._parser.setExecuteHandler(g.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(g.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(g.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(g.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(g.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(g.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(g.C1.IND,()=>this.index()),this._parser.setExecuteHandler(g.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(g.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new P.OscHandler(ce=>(this.setTitle(ce),this.setIconName(ce),!0))),this._parser.registerOscHandler(1,new P.OscHandler(ce=>this.setIconName(ce))),this._parser.registerOscHandler(2,new P.OscHandler(ce=>this.setTitle(ce))),this._parser.registerOscHandler(4,new P.OscHandler(ce=>this.setOrReportIndexedColor(ce))),this._parser.registerOscHandler(8,new P.OscHandler(ce=>this.setHyperlink(ce))),this._parser.registerOscHandler(10,new P.OscHandler(ce=>this.setOrReportFgColor(ce))),this._parser.registerOscHandler(11,new P.OscHandler(ce=>this.setOrReportBgColor(ce))),this._parser.registerOscHandler(12,new P.OscHandler(ce=>this.setOrReportCursorColor(ce))),this._parser.registerOscHandler(104,new P.OscHandler(ce=>this.restoreIndexedColor(ce))),this._parser.registerOscHandler(110,new P.OscHandler(ce=>this.restoreFgColor(ce))),this._parser.registerOscHandler(111,new P.OscHandler(ce=>this.restoreBgColor(ce))),this._parser.registerOscHandler(112,new P.OscHandler(ce=>this.restoreCursorColor(ce))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const ce in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:ce},()=>this.selectCharset("("+ce)),this._parser.registerEscHandler({intermediates:")",final:ce},()=>this.selectCharset(")"+ce)),this._parser.registerEscHandler({intermediates:"*",final:ce},()=>this.selectCharset("*"+ce)),this._parser.registerEscHandler({intermediates:"+",final:ce},()=>this.selectCharset("+"+ce)),this._parser.registerEscHandler({intermediates:"-",final:ce},()=>this.selectCharset("-"+ce)),this._parser.registerEscHandler({intermediates:".",final:ce},()=>this.selectCharset("."+ce)),this._parser.registerEscHandler({intermediates:"/",final:ce},()=>this.selectCharset("/"+ce));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(ce=>(this._logService.error("Parsing error: ",ce),ce)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((ce,pe)=>this.requestStatusString(ce,pe)))}_preserveStack(Y,J,K,ne){this._parseStack.paused=!0,this._parseStack.cursorStartX=Y,this._parseStack.cursorStartY=J,this._parseStack.decodedLength=K,this._parseStack.position=ne}_logSlowResolvingAsync(Y){this._logService.logLevel<=k.LogLevelEnum.WARN&&Promise.race([Y,new Promise((J,K)=>setTimeout(()=>K("#SLOW_TIMEOUT"),5e3))]).catch(J=>{if(J!=="#SLOW_TIMEOUT")throw J;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(Y,J){let K,ne=this._activeBuffer.x,de=this._activeBuffer.y,Re=0;const Te=this._parseStack.paused;if(Te){if(K=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,J))return this._logSlowResolvingAsync(K),K;ne=this._parseStack.cursorStartX,de=this._parseStack.cursorStartY,this._parseStack.paused=!1,Y.length>j&&(Re=this._parseStack.position+j)}if(this._logService.logLevel<=k.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof Y=="string"?` "${Y}"`:` "${Array.prototype.map.call(Y,Me=>String.fromCharCode(Me)).join("")}"`),typeof Y=="string"?Y.split("").map(Me=>Me.charCodeAt(0)):Y),this._parseBuffer.length<Y.length&&this._parseBuffer.length<j&&(this._parseBuffer=new Uint32Array(Math.min(Y.length,j))),Te||this._dirtyRowTracker.clearRange(),Y.length>j)for(let Me=Re;Me<Y.length;Me+=j){const Ie=Me+j<Y.length?Me+j:Y.length,ce=typeof Y=="string"?this._stringDecoder.decode(Y.substring(Me,Ie),this._parseBuffer):this._utf8Decoder.decode(Y.subarray(Me,Ie),this._parseBuffer);if(K=this._parser.parse(this._parseBuffer,ce))return this._preserveStack(ne,de,ce,Me),this._logSlowResolvingAsync(K),K}else if(!Te){const Me=typeof Y=="string"?this._stringDecoder.decode(Y,this._parseBuffer):this._utf8Decoder.decode(Y,this._parseBuffer);if(K=this._parser.parse(this._parseBuffer,Me))return this._preserveStack(ne,de,Me,0),this._logSlowResolvingAsync(K),K}this._activeBuffer.x===ne&&this._activeBuffer.y===de||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(Y,J,K){let ne,de;const Re=this._charsetService.charset,Te=this._optionsService.rawOptions.screenReaderMode,Me=this._bufferService.cols,Ie=this._coreService.decPrivateModes.wraparound,ce=this._coreService.modes.insertMode,pe=this._curAttrData;let me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&K-J>0&&me.getWidth(this._activeBuffer.x-1)===2&&me.setCellFromCodePoint(this._activeBuffer.x-1,0,1,pe.fg,pe.bg,pe.extended);for(let we=J;we<K;++we){if(ne=Y[we],de=this._unicodeService.wcwidth(ne),ne<127&&Re){const Xe=Re[String.fromCharCode(ne)];Xe&&(ne=Xe.charCodeAt(0))}if(Te&&this._onA11yChar.fire((0,w.stringFromCodePoint)(ne)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),de||!this._activeBuffer.x){if(this._activeBuffer.x+de-1>=Me){if(Ie){for(;this._activeBuffer.x<Me;)me.setCellFromCodePoint(this._activeBuffer.x++,0,1,pe.fg,pe.bg,pe.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),me=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Me-1,de===2)continue}if(ce&&(me.insertCells(this._activeBuffer.x,de,this._activeBuffer.getNullCell(pe),pe),me.getWidth(Me-1)===2&&me.setCellFromCodePoint(Me-1,x.NULL_CELL_CODE,x.NULL_CELL_WIDTH,pe.fg,pe.bg,pe.extended)),me.setCellFromCodePoint(this._activeBuffer.x++,ne,de,pe.fg,pe.bg,pe.extended),de>0)for(;--de;)me.setCellFromCodePoint(this._activeBuffer.x++,0,0,pe.fg,pe.bg,pe.extended)}else me.getWidth(this._activeBuffer.x-1)?me.addCodepointToCell(this._activeBuffer.x-1,ne):me.addCodepointToCell(this._activeBuffer.x-2,ne)}K-J>0&&(me.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Me&&K-J>0&&me.getWidth(this._activeBuffer.x)===0&&!me.hasContent(this._activeBuffer.x)&&me.setCellFromCodePoint(this._activeBuffer.x,0,1,pe.fg,pe.bg,pe.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(Y,J){return Y.final!=="t"||Y.prefix||Y.intermediates?this._parser.registerCsiHandler(Y,J):this._parser.registerCsiHandler(Y,K=>!F(K.params[0],this._optionsService.rawOptions.windowOptions)||J(K))}registerDcsHandler(Y,J){return this._parser.registerDcsHandler(Y,new L.DcsHandler(J))}registerEscHandler(Y,J){return this._parser.registerEscHandler(Y,J)}registerOscHandler(Y,J){return this._parser.registerOscHandler(Y,new P.OscHandler(J))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var Y;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||Y===void 0)&&Y.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);J.hasWidth(this._activeBuffer.x)&&!J.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const Y=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-Y),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(Y=this._bufferService.cols-1){this._activeBuffer.x=Math.min(Y,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(Y,J){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=Y,this._activeBuffer.y=this._activeBuffer.scrollTop+J):(this._activeBuffer.x=Y,this._activeBuffer.y=J),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(Y,J){this._restrictCursor(),this._setCursor(this._activeBuffer.x+Y,this._activeBuffer.y+J)}cursorUp(Y){const J=this._activeBuffer.y-this._activeBuffer.scrollTop;return J>=0?this._moveCursor(0,-Math.min(J,Y.params[0]||1)):this._moveCursor(0,-(Y.params[0]||1)),!0}cursorDown(Y){const J=this._activeBuffer.scrollBottom-this._activeBuffer.y;return J>=0?this._moveCursor(0,Math.min(J,Y.params[0]||1)):this._moveCursor(0,Y.params[0]||1),!0}cursorForward(Y){return this._moveCursor(Y.params[0]||1,0),!0}cursorBackward(Y){return this._moveCursor(-(Y.params[0]||1),0),!0}cursorNextLine(Y){return this.cursorDown(Y),this._activeBuffer.x=0,!0}cursorPrecedingLine(Y){return this.cursorUp(Y),this._activeBuffer.x=0,!0}cursorCharAbsolute(Y){return this._setCursor((Y.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(Y){return this._setCursor(Y.length>=2?(Y.params[1]||1)-1:0,(Y.params[0]||1)-1),!0}charPosAbsolute(Y){return this._setCursor((Y.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(Y){return this._moveCursor(Y.params[0]||1,0),!0}linePosAbsolute(Y){return this._setCursor(this._activeBuffer.x,(Y.params[0]||1)-1),!0}vPositionRelative(Y){return this._moveCursor(0,Y.params[0]||1),!0}hVPosition(Y){return this.cursorPosition(Y),!0}tabClear(Y){const J=Y.params[0];return J===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:J===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(Y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let J=Y.params[0]||1;for(;J--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(Y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let J=Y.params[0]||1;for(;J--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(Y){const J=Y.params[0];return J===1&&(this._curAttrData.bg|=536870912),J!==2&&J!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(Y,J,K,ne=!1,de=!1){const Re=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);Re.replaceCells(J,K,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),de),ne&&(Re.isWrapped=!1)}_resetBufferLine(Y,J=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+Y);K&&(K.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),J),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+Y),K.isWrapped=!1)}eraseInDisplay(Y,J=!1){let K;switch(this._restrictCursor(this._bufferService.cols),Y.params[0]){case 0:for(K=this._activeBuffer.y,this._dirtyRowTracker.markDirty(K),this._eraseInBufferLine(K++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,J);K<this._bufferService.rows;K++)this._resetBufferLine(K,J);this._dirtyRowTracker.markDirty(K);break;case 1:for(K=this._activeBuffer.y,this._dirtyRowTracker.markDirty(K),this._eraseInBufferLine(K,0,this._activeBuffer.x+1,!0,J),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(K+1).isWrapped=!1);K--;)this._resetBufferLine(K,J);this._dirtyRowTracker.markDirty(0);break;case 2:for(K=this._bufferService.rows,this._dirtyRowTracker.markDirty(K-1);K--;)this._resetBufferLine(K,J);this._dirtyRowTracker.markDirty(0);break;case 3:const ne=this._activeBuffer.lines.length-this._bufferService.rows;ne>0&&(this._activeBuffer.lines.trimStart(ne),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-ne,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-ne,0),this._onScroll.fire(0))}return!0}eraseInLine(Y,J=!1){switch(this._restrictCursor(this._bufferService.cols),Y.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,J);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,J);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,J)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(Y){this._restrictCursor();let J=Y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const K=this._activeBuffer.ybase+this._activeBuffer.y,ne=this._bufferService.rows-1-this._activeBuffer.scrollBottom,de=this._bufferService.rows-1+this._activeBuffer.ybase-ne+1;for(;J--;)this._activeBuffer.lines.splice(de-1,1),this._activeBuffer.lines.splice(K,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(Y){this._restrictCursor();let J=Y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const K=this._activeBuffer.ybase+this._activeBuffer.y;let ne;for(ne=this._bufferService.rows-1-this._activeBuffer.scrollBottom,ne=this._bufferService.rows-1+this._activeBuffer.ybase-ne;J--;)this._activeBuffer.lines.splice(K,1),this._activeBuffer.lines.splice(ne,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(Y){this._restrictCursor();const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return J&&(J.insertCells(this._activeBuffer.x,Y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(Y){this._restrictCursor();const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return J&&(J.deleteCells(this._activeBuffer.x,Y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(Y){let J=Y.params[0]||1;for(;J--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(Y){let J=Y.params[0]||1;for(;J--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(Y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const J=Y.params[0]||1;for(let K=this._activeBuffer.scrollTop;K<=this._activeBuffer.scrollBottom;++K){const ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+K);ne.deleteCells(0,J,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),ne.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(Y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const J=Y.params[0]||1;for(let K=this._activeBuffer.scrollTop;K<=this._activeBuffer.scrollBottom;++K){const ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+K);ne.insertCells(0,J,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),ne.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(Y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const J=Y.params[0]||1;for(let K=this._activeBuffer.scrollTop;K<=this._activeBuffer.scrollBottom;++K){const ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+K);ne.insertCells(this._activeBuffer.x,J,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),ne.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(Y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const J=Y.params[0]||1;for(let K=this._activeBuffer.scrollTop;K<=this._activeBuffer.scrollBottom;++K){const ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+K);ne.deleteCells(this._activeBuffer.x,J,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),ne.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(Y){this._restrictCursor();const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return J&&(J.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(Y.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(Y){if(!this._parser.precedingCodepoint)return!0;const J=Y.params[0]||1,K=new Uint32Array(J);for(let ne=0;ne<J;++ne)K[ne]=this._parser.precedingCodepoint;return this.print(K,0,K.length),!0}sendDeviceAttributesPrimary(Y){return Y.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(Y){return Y.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(Y.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c")),!0}_is(Y){return(this._optionsService.rawOptions.termName+"").indexOf(Y)===0}setMode(Y){for(let J=0;J<Y.length;J++)switch(Y.params[J]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(Y){for(let J=0;J<Y.length;J++)switch(Y.params[J]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(Y){for(let J=0;J<Y.length;J++)switch(Y.params[J]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(Y){for(let J=0;J<Y.length;J++)switch(Y.params[J]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),Y.params[J]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(Y,J){const K=this._coreService.decPrivateModes,{activeProtocol:ne,activeEncoding:de}=this._coreMouseService,Re=this._coreService,{buffers:Te,cols:Me}=this._bufferService,{active:Ie,alt:ce}=Te,pe=this._optionsService.rawOptions,me=Pe=>Pe?1:2,we=Y.params[0];return Xe=we,Qe=J?we===2?4:we===4?me(Re.modes.insertMode):we===12?3:we===20?me(pe.convertEol):0:we===1?me(K.applicationCursorKeys):we===3?pe.windowOptions.setWinLines?Me===80?2:Me===132?1:0:0:we===6?me(K.origin):we===7?me(K.wraparound):we===8?3:we===9?me(ne==="X10"):we===12?me(pe.cursorBlink):we===25?me(!Re.isCursorHidden):we===45?me(K.reverseWraparound):we===66?me(K.applicationKeypad):we===67?4:we===1e3?me(ne==="VT200"):we===1002?me(ne==="DRAG"):we===1003?me(ne==="ANY"):we===1004?me(K.sendFocus):we===1005?4:we===1006?me(de==="SGR"):we===1015?4:we===1016?me(de==="SGR_PIXELS"):we===1048?1:we===47||we===1047||we===1049?me(Ie===ce):we===2004?me(K.bracketedPasteMode):0,Re.triggerDataEvent(`${g.C0.ESC}[${J?"":"?"}${Xe};${Qe}$y`),!0;var Xe,Qe}_updateAttrColor(Y,J,K,ne,de){return J===2?(Y|=50331648,Y&=-16777216,Y|=O.AttributeData.fromColorRGB([K,ne,de])):J===5&&(Y&=-50331904,Y|=33554432|255&K),Y}_extractColor(Y,J,K){const ne=[0,0,-1,0,0,0];let de=0,Re=0;do{if(ne[Re+de]=Y.params[J+Re],Y.hasSubParams(J+Re)){const Te=Y.getSubParams(J+Re);let Me=0;do ne[1]===5&&(de=1),ne[Re+Me+1+de]=Te[Me];while(++Me<Te.length&&Me+Re+1+de<ne.length);break}if(ne[1]===5&&Re+de>=2||ne[1]===2&&Re+de>=5)break;ne[1]&&(de=1)}while(++Re+J<Y.length&&Re+de<ne.length);for(let Te=2;Te<ne.length;++Te)ne[Te]===-1&&(ne[Te]=0);switch(ne[0]){case 38:K.fg=this._updateAttrColor(K.fg,ne[1],ne[3],ne[4],ne[5]);break;case 48:K.bg=this._updateAttrColor(K.bg,ne[1],ne[3],ne[4],ne[5]);break;case 58:K.extended=K.extended.clone(),K.extended.underlineColor=this._updateAttrColor(K.extended.underlineColor,ne[1],ne[3],ne[4],ne[5])}return Re}_processUnderline(Y,J){J.extended=J.extended.clone(),(!~Y||Y>5)&&(Y=1),J.extended.underlineStyle=Y,J.fg|=268435456,Y===0&&(J.fg&=-268435457),J.updateExtended()}_processSGR0(Y){Y.fg=m.DEFAULT_ATTR_DATA.fg,Y.bg=m.DEFAULT_ATTR_DATA.bg,Y.extended=Y.extended.clone(),Y.extended.underlineStyle=0,Y.extended.underlineColor&=-67108864,Y.updateExtended()}charAttributes(Y){if(Y.length===1&&Y.params[0]===0)return this._processSGR0(this._curAttrData),!0;const J=Y.length;let K;const ne=this._curAttrData;for(let de=0;de<J;de++)K=Y.params[de],K>=30&&K<=37?(ne.fg&=-50331904,ne.fg|=16777216|K-30):K>=40&&K<=47?(ne.bg&=-50331904,ne.bg|=16777216|K-40):K>=90&&K<=97?(ne.fg&=-50331904,ne.fg|=16777224|K-90):K>=100&&K<=107?(ne.bg&=-50331904,ne.bg|=16777224|K-100):K===0?this._processSGR0(ne):K===1?ne.fg|=134217728:K===3?ne.bg|=67108864:K===4?(ne.fg|=268435456,this._processUnderline(Y.hasSubParams(de)?Y.getSubParams(de)[0]:1,ne)):K===5?ne.fg|=536870912:K===7?ne.fg|=67108864:K===8?ne.fg|=1073741824:K===9?ne.fg|=2147483648:K===2?ne.bg|=134217728:K===21?this._processUnderline(2,ne):K===22?(ne.fg&=-134217729,ne.bg&=-134217729):K===23?ne.bg&=-67108865:K===24?(ne.fg&=-268435457,this._processUnderline(0,ne)):K===25?ne.fg&=-536870913:K===27?ne.fg&=-67108865:K===28?ne.fg&=-1073741825:K===29?ne.fg&=2147483647:K===39?(ne.fg&=-67108864,ne.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):K===49?(ne.bg&=-67108864,ne.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):K===38||K===48||K===58?de+=this._extractColor(Y,de,ne):K===53?ne.bg|=1073741824:K===55?ne.bg&=-1073741825:K===59?(ne.extended=ne.extended.clone(),ne.extended.underlineColor=-1,ne.updateExtended()):K===100?(ne.fg&=-67108864,ne.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,ne.bg&=-67108864,ne.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",K);return!0}deviceStatus(Y){switch(Y.params[0]){case 5:this._coreService.triggerDataEvent(`${g.C0.ESC}[0n`);break;case 6:const J=this._activeBuffer.y+1,K=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[${J};${K}R`)}return!0}deviceStatusPrivate(Y){if(Y.params[0]===6){const J=this._activeBuffer.y+1,K=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[?${J};${K}R`)}return!0}softReset(Y){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(Y){const J=Y.params[0]||1;switch(J){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const K=J%2==1;return this._optionsService.options.cursorBlink=K,!0}setScrollRegion(Y){const J=Y.params[0]||1;let K;return(Y.length<2||(K=Y.params[1])>this._bufferService.rows||K===0)&&(K=this._bufferService.rows),K>J&&(this._activeBuffer.scrollTop=J-1,this._activeBuffer.scrollBottom=K-1,this._setCursor(0,0)),!0}windowOptions(Y){if(!F(Y.params[0],this._optionsService.rawOptions.windowOptions))return!0;const J=Y.length>1?Y.params[1]:0;switch(Y.params[0]){case 14:J!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${g.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:J!==0&&J!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),J!==0&&J!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:J!==0&&J!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),J!==0&&J!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(Y){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(Y){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(Y){return this._windowTitle=Y,this._onTitleChange.fire(Y),!0}setIconName(Y){return this._iconName=Y,!0}setOrReportIndexedColor(Y){const J=[],K=Y.split(";");for(;K.length>1;){const ne=K.shift(),de=K.shift();if(/^\d+$/.exec(ne)){const Re=parseInt(ne);if(G(Re))if(de==="?")J.push({type:0,index:Re});else{const Te=(0,M.parseColor)(de);Te&&J.push({type:1,index:Re,color:Te})}}}return J.length&&this._onColor.fire(J),!0}setHyperlink(Y){const J=Y.split(";");return!(J.length<2)&&(J[1]?this._createHyperlink(J[0],J[1]):!J[0]&&this._finishHyperlink())}_createHyperlink(Y,J){this._getCurrentLinkId()&&this._finishHyperlink();const K=Y.split(":");let ne;const de=K.findIndex(Re=>Re.startsWith("id="));return de!==-1&&(ne=K[de].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:ne,uri:J}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(Y,J){const K=Y.split(";");for(let ne=0;ne<K.length&&!(J>=this._specialColors.length);++ne,++J)if(K[ne]==="?")this._onColor.fire([{type:0,index:this._specialColors[J]}]);else{const de=(0,M.parseColor)(K[ne]);de&&this._onColor.fire([{type:1,index:this._specialColors[J],color:de}])}return!0}setOrReportFgColor(Y){return this._setOrReportSpecialColor(Y,0)}setOrReportBgColor(Y){return this._setOrReportSpecialColor(Y,1)}setOrReportCursorColor(Y){return this._setOrReportSpecialColor(Y,2)}restoreIndexedColor(Y){if(!Y)return this._onColor.fire([{type:2}]),!0;const J=[],K=Y.split(";");for(let ne=0;ne<K.length;++ne)if(/^\d+$/.exec(K[ne])){const de=parseInt(K[ne]);G(de)&&J.push({type:2,index:de})}return J.length&&this._onColor.fire(J),!0}restoreFgColor(Y){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(Y){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(Y){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(Y){return Y.length!==2?(this.selectDefaultCharset(),!0):(Y[0]==="/"||this._charsetService.setgCharset(B[Y[0]],v.CHARSETS[Y[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const Y=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,Y,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(Y){return this._charsetService.setgLevel(Y),!0}screenAlignmentPattern(){const Y=new y.CellData;Y.content=4194373,Y.fg=this._curAttrData.fg,Y.bg=this._curAttrData.bg,this._setCursor(0,0);for(let J=0;J<this._bufferService.rows;++J){const K=this._activeBuffer.ybase+this._activeBuffer.y+J,ne=this._activeBuffer.lines.get(K);ne&&(ne.fill(Y),ne.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(Y,J){const K=this._bufferService.buffer,ne=this._optionsService.rawOptions;return(de=>(this._coreService.triggerDataEvent(`${g.C0.ESC}${de}${g.C0.ESC}\\`),!0))(Y==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:Y==='"p'?'P1$r61;1"p':Y==="r"?`P1$r${K.scrollTop+1};${K.scrollBottom+1}r`:Y==="m"?"P1$r0m":Y===" q"?`P1$r${{block:2,underline:4,bar:6}[ne.cursorStyle]-(ne.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(Y,J){this._dirtyRowTracker.markRangeDirty(Y,J)}}l.InputHandler=Q;let q=class{constructor(te){this._bufferService=te,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(te){te<this.start?this.start=te:te>this.end&&(this.end=te)}markRangeDirty(te,Y){te>Y&&(V=te,te=Y,Y=V),te<this.start&&(this.start=te),Y>this.end&&(this.end=Y)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function G(te){return 0<=te&&te<256}q=d([f(0,k.IBufferService)],q)},844:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},1505:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,v){this._data[f]||(this._data[f]={}),this._data[f][g]=v}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,v,S){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,v,S)}get(d,f,g,v){var S;return(S=this._data.get(d,f))===null||S===void 0?void 0:S.get(g,v)}clear(){this._data.clear()}}},6114:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},6106:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let h=0;l.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(h=this._search(this._getKey(d)),this._array.splice(h,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const f=this._getKey(d);if(f===void 0||(h=this._search(f),h===-1)||this._getKey(this._array[h])!==f)return!1;do if(this._array[h]===d)return this._array.splice(h,1),!0;while(++h<this._array.length&&this._getKey(this._array[h])===f);return!1}*getKeyIterator(d){if(this._array.length!==0&&(h=this._search(d),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===d))do yield this._array[h];while(++h<this._array.length&&this._getKey(this._array[h])===d)}forEachByKey(d,f){if(this._array.length!==0&&(h=this._search(d),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===d))do f(this._array[h]);while(++h<this._array.length&&this._getKey(this._array[h])===d)}values(){return[...this._array].values()}_search(d){let f=0,g=this._array.length-1;for(;g>=f;){let v=f+g>>1;const S=this._getKey(this._array[v]);if(S>d)g=v-1;else{if(!(S<d)){for(;v>0&&this._getKey(this._array[v-1])===d;)v--;return v}f=v+1}}return f}}},7226:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let A=0,w=0,m=S.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=S.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const A=Date.now()+S;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const d=h(643);l.updateWindowsModeWrappedState=function(f){const g=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),v=g?.get(f.cols-1),S=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);S&&v&&(S.isWrapped=v[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&v[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,v=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=v}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},9092:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const d=h(6349),f=h(7226),g=h(3734),v=h(8437),S=h(4634),A=h(511),w=h(643),m=h(4863),b=h(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(x,y,O){this._hasScrollback=x,this._optionsService=y,this._bufferService=O,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=b.DEFAULT_CHARSET,this.markers=[],this._nullCell=A.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=A.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(x){return x?(this._nullCell.fg=x.fg,this._nullCell.bg=x.bg,this._nullCell.extended=x.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell}getWhitespaceCell(x){return x?(this._whitespaceCell.fg=x.fg,this._whitespaceCell.bg=x.bg,this._whitespaceCell.extended=x.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell}getBlankLine(x,y){return new v.BufferLine(this._bufferService.cols,this.getNullCell(x),y)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const x=this.ybase+this.y-this.ydisp;return x>=0&&x<this._rows}_getCorrectBufferLength(x){if(!this._hasScrollback)return x;const y=x+this._optionsService.rawOptions.scrollback;return y>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:y}fillViewportRows(x){if(this.lines.length===0){x===void 0&&(x=v.DEFAULT_ATTR_DATA);let y=this._rows;for(;y--;)this.lines.push(this.getBlankLine(x))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(x,y){const O=this.getNullCell(v.DEFAULT_ATTR_DATA);let k=0;const P=this._getCorrectBufferLength(y);if(P>this.lines.maxLength&&(this.lines.maxLength=P),this.lines.length>0){if(this._cols<x)for(let M=0;M<this.lines.length;M++)k+=+this.lines.get(M).resize(x,O);let L=0;if(this._rows<y)for(let M=this._rows;M<y;M++)this.lines.length<y+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(x,O)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(x,O)));else for(let M=this._rows;M>y;M--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(P<this.lines.maxLength){const M=this.lines.length-P;M>0&&(this.lines.trimStart(M),this.ybase=Math.max(this.ybase-M,0),this.ydisp=Math.max(this.ydisp-M,0),this.savedY=Math.max(this.savedY-M,0)),this.lines.maxLength=P}this.x=Math.min(this.x,x-1),this.y=Math.min(this.y,y-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,x-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(x,y),this._cols>x))for(let L=0;L<this.lines.length;L++)k+=+this.lines.get(L).resize(x,O);this._cols=x,this._rows=y,this._memoryCleanupQueue.clear(),k>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let x=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,x=!1);let y=0;for(;this._memoryCleanupPosition<this.lines.length;)if(y+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),y>100)return!0;return x}get _isReflowEnabled(){const x=this._optionsService.rawOptions.windowsPty;return x&&x.buildNumber?this._hasScrollback&&x.backend==="conpty"&&x.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(x,y){this._cols!==x&&(x>this._cols?this._reflowLarger(x,y):this._reflowSmaller(x,y))}_reflowLarger(x,y){const O=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,x,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(O.length>0){const k=(0,S.reflowLargerCreateNewLayout)(this.lines,O);(0,S.reflowLargerApplyNewLayout)(this.lines,k.layout),this._reflowLargerAdjustViewport(x,y,k.countRemoved)}}_reflowLargerAdjustViewport(x,y,O){const k=this.getNullCell(v.DEFAULT_ATTR_DATA);let P=O;for(;P-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<y&&this.lines.push(new v.BufferLine(x,k))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-O,0)}_reflowSmaller(x,y){const O=this.getNullCell(v.DEFAULT_ATTR_DATA),k=[];let P=0;for(let L=this.lines.length-1;L>=0;L--){let M=this.lines.get(L);if(!M||!M.isWrapped&&M.getTrimmedLength()<=x)continue;const B=[M];for(;M.isWrapped&&L>0;)M=this.lines.get(--L),B.unshift(M);const j=this.ybase+this.y;if(j>=L&&j<L+B.length)continue;const F=B[B.length-1].getTrimmedLength(),U=(0,S.reflowSmallerGetNewLineLengths)(B,this._cols,x),V=U.length-B.length;let Q;Q=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+V):Math.max(0,this.lines.length-this.lines.maxLength+V);const q=[];for(let ne=0;ne<V;ne++){const de=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);q.push(de)}q.length>0&&(k.push({start:L+B.length+P,newLines:q}),P+=q.length),B.push(...q);let G=U.length-1,te=U[G];te===0&&(G--,te=U[G]);let Y=B.length-V-1,J=F;for(;Y>=0;){const ne=Math.min(J,te);if(B[G]===void 0)break;if(B[G].copyCellsFrom(B[Y],J-ne,te-ne,ne,!0),te-=ne,te===0&&(G--,te=U[G]),J-=ne,J===0){Y--;const de=Math.max(Y,0);J=(0,S.getWrappedLineTrimmedLength)(B,de,this._cols)}}for(let ne=0;ne<B.length;ne++)U[ne]<x&&B[ne].setCell(U[ne],O);let K=V-Q;for(;K-- >0;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+P)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+V,this.ybase+y-1)}if(k.length>0){const L=[],M=[];for(let G=0;G<this.lines.length;G++)M.push(this.lines.get(G));const B=this.lines.length;let j=B-1,F=0,U=k[F];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+P);let V=0;for(let G=Math.min(this.lines.maxLength-1,B+P-1);G>=0;G--)if(U&&U.start>j+V){for(let te=U.newLines.length-1;te>=0;te--)this.lines.set(G--,U.newLines[te]);G++,L.push({index:j+1,amount:U.newLines.length}),V+=U.newLines.length,U=k[++F]}else this.lines.set(G,M[j--]);let Q=0;for(let G=L.length-1;G>=0;G--)L[G].index+=Q,this.lines.onInsertEmitter.fire(L[G]),Q+=L[G].amount;const q=Math.max(0,B+P-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(x,y,O=0,k){const P=this.lines.get(x);return P?P.translateToString(y,O,k):""}getWrappedRangeForLine(x){let y=x,O=x;for(;y>0&&this.lines.get(y).isWrapped;)y--;for(;O+1<this.lines.length&&this.lines.get(O+1).isWrapped;)O++;return{first:y,last:O}}setupTabStops(x){for(x!=null?this.tabs[x]||(x=this.prevStop(x)):(this.tabs={},x=0);x<this._cols;x+=this._optionsService.rawOptions.tabStopWidth)this.tabs[x]=!0}prevStop(x){for(x==null&&(x=this.x);!this.tabs[--x]&&x>0;);return x>=this._cols?this._cols-1:x<0?0:x}nextStop(x){for(x==null&&(x=this.x);!this.tabs[++x]&&x<this._cols;);return x>=this._cols?this._cols-1:x<0?0:x}clearMarkers(x){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].line===x&&(this.markers[y].dispose(),this.markers.splice(y--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let x=0;x<this.markers.length;x++)this.markers[x].dispose(),this.markers.splice(x--,1);this._isClearing=!1}addMarker(x){const y=new m.Marker(x);return this.markers.push(y),y.register(this.lines.onTrim(O=>{y.line-=O,y.line<0&&y.dispose()})),y.register(this.lines.onInsert(O=>{y.line>=O.index&&(y.line+=O.amount)})),y.register(this.lines.onDelete(O=>{y.line>=O.index&&y.line<O.index+O.amount&&y.dispose(),y.line>O.index&&(y.line-=O.amount)})),y.register(y.onDispose(()=>this._removeMarker(y))),y}_removeMarker(x){this._isClearing||this.markers.splice(this.markers.indexOf(x),1)}}},8437:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const d=h(3734),f=h(511),g=h(643),v=h(482);l.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let S=0;class A{constructor(m,b,x=!1){this.isWrapped=x,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const y=b||f.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]);for(let O=0;O<m;++O)this.setCell(O,y);this.length=m}get(m){const b=this._data[3*m+0],x=2097151&b;return[this._data[3*m+1],2097152&b?this._combined[m]:x?(0,v.stringFromCodePoint)(x):"",b>>22,2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):x]}set(m,b){this._data[3*m+1]=b[g.CHAR_DATA_ATTR_INDEX],b[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=b[1],this._data[3*m+0]=2097152|m|b[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=b[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[g.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&b}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m]:2097151&b?(0,v.stringFromCodePoint)(2097151&b):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,b){return S=3*m,b.content=this._data[S+0],b.fg=this._data[S+1],b.bg=this._data[S+2],2097152&b.content&&(b.combinedData=this._combined[m]),268435456&b.bg&&(b.extended=this._extendedAttrs[m]),b}setCell(m,b){2097152&b.content&&(this._combined[m]=b.combinedData),268435456&b.bg&&(this._extendedAttrs[m]=b.extended),this._data[3*m+0]=b.content,this._data[3*m+1]=b.fg,this._data[3*m+2]=b.bg}setCellFromCodePoint(m,b,x,y,O,k){268435456&O&&(this._extendedAttrs[m]=k),this._data[3*m+0]=b|x<<22,this._data[3*m+1]=y,this._data[3*m+2]=O}addCodepointToCell(m,b){let x=this._data[3*m+0];2097152&x?this._combined[m]+=(0,v.stringFromCodePoint)(b):(2097151&x?(this._combined[m]=(0,v.stringFromCodePoint)(2097151&x)+(0,v.stringFromCodePoint)(b),x&=-2097152,x|=2097152):x=b|4194304,this._data[3*m+0]=x)}insertCells(m,b,x,y){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs),b<this.length-m){const O=new f.CellData;for(let k=this.length-m-b-1;k>=0;--k)this.setCell(m+b+k,this.loadCell(m+k,O));for(let k=0;k<b;++k)this.setCell(m+k,x)}else for(let O=m;O<this.length;++O)this.setCell(O,x);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs)}deleteCells(m,b,x,y){if(m%=this.length,b<this.length-m){const O=new f.CellData;for(let k=0;k<this.length-m-b;++k)this.setCell(m+k,this.loadCell(m+b+k,O));for(let k=this.length-b;k<this.length;++k)this.setCell(k,x)}else for(let O=m;O<this.length;++O)this.setCell(O,x);m&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodePoint(m,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs)}replaceCells(m,b,x,y,O=!1){if(O)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodePoint(m-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs),b<this.length&&this.getWidth(b-1)===2&&!this.isProtected(b)&&this.setCellFromCodePoint(b,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs);m<b&&m<this.length;)this.isProtected(m)||this.setCell(m,x),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodePoint(m-1,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs),b<this.length&&this.getWidth(b-1)===2&&this.setCellFromCodePoint(b,0,1,y?.fg||0,y?.bg||0,y?.extended||new d.ExtendedAttrs);m<b&&m<this.length;)this.setCell(m++,x)}resize(m,b){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const x=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*x)this._data=new Uint32Array(this._data.buffer,0,x);else{const y=new Uint32Array(x);y.set(this._data),this._data=y}for(let y=this.length;y<m;++y)this.setCell(y,b)}else{this._data=this._data.subarray(0,x);const y=Object.keys(this._combined);for(let k=0;k<y.length;k++){const P=parseInt(y[k],10);P>=m&&delete this._combined[P]}const O=Object.keys(this._extendedAttrs);for(let k=0;k<O.length;k++){const P=parseInt(O[k],10);P>=m&&delete this._extendedAttrs[P]}}return this.length=m,4*x*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,b=!1){if(b)for(let x=0;x<this.length;++x)this.isProtected(x)||this.setCell(x,m);else{this._combined={},this._extendedAttrs={};for(let x=0;x<this.length;++x)this.setCell(x,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const b in m._combined)this._combined[b]=m._combined[b];this._extendedAttrs={};for(const b in m._extendedAttrs)this._extendedAttrs[b]=m._extendedAttrs[b];this.isWrapped=m.isWrapped}clone(){const m=new A(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const b in this._combined)m._combined[b]=this._combined[b];for(const b in this._extendedAttrs)m._extendedAttrs[b]=this._extendedAttrs[b];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,b,x,y,O){const k=m._data;if(O)for(let L=y-1;L>=0;L--){for(let M=0;M<3;M++)this._data[3*(x+L)+M]=k[3*(b+L)+M];268435456&k[3*(b+L)+2]&&(this._extendedAttrs[x+L]=m._extendedAttrs[b+L])}else for(let L=0;L<y;L++){for(let M=0;M<3;M++)this._data[3*(x+L)+M]=k[3*(b+L)+M];268435456&k[3*(b+L)+2]&&(this._extendedAttrs[x+L]=m._extendedAttrs[b+L])}const P=Object.keys(m._combined);for(let L=0;L<P.length;L++){const M=parseInt(P[L],10);M>=b&&(this._combined[M-b+x]=m._combined[M])}}translateToString(m=!1,b=0,x=this.length){m&&(x=Math.min(x,this.getTrimmedLength()));let y="";for(;b<x;){const O=this._data[3*b+0],k=2097151&O;y+=2097152&O?this._combined[b]:k?(0,v.stringFromCodePoint)(k):g.WHITESPACE_CELL_CHAR,b+=O>>22||1}return y}}l.BufferLine=A},4841:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(h,d){if(h.start.y>h.end.y)throw new Error(`Buffer range end (${h.end.x}, ${h.end.y}) cannot be before start (${h.start.x}, ${h.start.y})`);return d*(h.end.y-h.start.y)+(h.end.x-h.start.x+1)}},4634:(c,l)=>{function h(d,f,g){if(f===d.length-1)return d[f].getTrimmedLength();const v=!d[f].hasContent(g-1)&&d[f].getWidth(g-1)===1,S=d[f+1].getWidth(0)===2;return v&&S?g-1:g}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(d,f,g,v,S){const A=[];for(let w=0;w<d.length-1;w++){let m=w,b=d.get(++m);if(!b.isWrapped)continue;const x=[d.get(w)];for(;m<d.length&&b.isWrapped;)x.push(b),b=d.get(++m);if(v>=w&&v<m){w+=x.length-1;continue}let y=0,O=h(x,y,f),k=1,P=0;for(;k<x.length;){const M=h(x,k,f),B=M-P,j=g-O,F=Math.min(B,j);x[y].copyCellsFrom(x[k],P,O,F,!1),O+=F,O===g&&(y++,O=0),P+=F,P===M&&(k++,P=0),O===0&&y!==0&&x[y-1].getWidth(g-1)===2&&(x[y].copyCellsFrom(x[y-1],g-1,O++,1,!1),x[y-1].setCell(g-1,S))}x[y].replaceCells(O,g,S);let L=0;for(let M=x.length-1;M>0&&(M>y||x[M].getTrimmedLength()===0);M--)L++;L>0&&(A.push(w+x.length-L),A.push(L)),w+=x.length-1}return A},l.reflowLargerCreateNewLayout=function(d,f){const g=[];let v=0,S=f[v],A=0;for(let w=0;w<d.length;w++)if(S===w){const m=f[++v];d.onDeleteEmitter.fire({index:w-A,amount:m}),w+=m-1,A+=m,S=f[++v]}else g.push(w);return{layout:g,countRemoved:A}},l.reflowLargerApplyNewLayout=function(d,f){const g=[];for(let v=0;v<f.length;v++)g.push(d.get(f[v]));for(let v=0;v<g.length;v++)d.set(v,g[v]);d.length=f.length},l.reflowSmallerGetNewLineLengths=function(d,f,g){const v=[],S=d.map((b,x)=>h(d,x,f)).reduce((b,x)=>b+x);let A=0,w=0,m=0;for(;m<S;){if(S-m<g){v.push(S-m);break}A+=g;const b=h(d,w,f);A>b&&(A-=b,w++);const x=d[w].getWidth(A-1)===2;x&&A--;const y=x?g-1:g;v.push(y),m+=y}return v},l.getWrappedLineTrimmedLength=h},5295:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const d=h(8460),f=h(844),g=h(9092);class v extends f.Disposable{constructor(A,w){super(),this._optionsService=A,this._bufferService=w,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new g.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new g.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(A){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(A),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(A,w){this._normal.resize(A,w),this._alt.resize(A,w),this.setupTabStops(A)}setupTabStops(A){this._normal.setupTabStops(A),this._alt.setupTabStops(A)}}l.BufferSet=v},511:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(482),f=h(643),g=h(3734);class v extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new v;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=v},643:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const d=h(8460),f=h(844);class g{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=g._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}l.Marker=g,g._nextId=1},7116:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},l.CHARSETS.A={"#":"£"},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},l.CHARSETS.C=l.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},l.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},l.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},l.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},l.CHARSETS.E=l.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},l.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},l.CHARSETS.H=l.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},l.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(c,l)=>{var h,d,f;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,function(g){g.NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL=""}(h||(l.C0=h={})),function(g){g.PAD="",g.HOP="",g.BPH="",g.NBH="",g.IND="",g.NEL="",g.SSA="",g.ESA="",g.HTS="",g.HTJ="",g.VTS="",g.PLD="",g.PLU="",g.RI="",g.SS2="",g.SS3="",g.DCS="",g.PU1="",g.PU2="",g.STS="",g.CCH="",g.MW="",g.SPA="",g.EPA="",g.SOS="",g.SGCI="",g.SCI="",g.CSI="",g.ST="",g.OSC="",g.PM="",g.APC=""}(d||(l.C1=d={})),function(g){g.ST=`${h.ESC}\\`}(f||(l.C1_ESCAPED=f={}))},7399:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const d=h(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(g,v,S,A){const w={type:0,cancel:!1,key:void 0},m=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:g.key==="UIKeyInputUpArrow"?w.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A":g.key==="UIKeyInputLeftArrow"?w.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D":g.key==="UIKeyInputRightArrow"?w.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C":g.key==="UIKeyInputDownArrow"&&(w.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(g.altKey){w.key=d.C0.ESC+d.C0.DEL;break}w.key=d.C0.DEL;break;case 9:if(g.shiftKey){w.key=d.C0.ESC+"[Z";break}w.key=d.C0.HT,w.cancel=!0;break;case 13:w.key=g.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,w.cancel=!0;break;case 27:w.key=d.C0.ESC,g.altKey&&(w.key=d.C0.ESC+d.C0.ESC),w.cancel=!0;break;case 37:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"D",w.key===d.C0.ESC+"[1;3D"&&(w.key=d.C0.ESC+(S?"b":"[1;5D"))):w.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"C",w.key===d.C0.ESC+"[1;3C"&&(w.key=d.C0.ESC+(S?"f":"[1;5C"))):w.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"A",S||w.key!==d.C0.ESC+"[1;3A"||(w.key=d.C0.ESC+"[1;5A")):w.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(g.metaKey)break;m?(w.key=d.C0.ESC+"[1;"+(m+1)+"B",S||w.key!==d.C0.ESC+"[1;3B"||(w.key=d.C0.ESC+"[1;5B")):w.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(w.key=d.C0.ESC+"[2~");break;case 46:w.key=m?d.C0.ESC+"[3;"+(m+1)+"~":d.C0.ESC+"[3~";break;case 36:w.key=m?d.C0.ESC+"[1;"+(m+1)+"H":v?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:w.key=m?d.C0.ESC+"[1;"+(m+1)+"F":v?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:g.shiftKey?w.type=2:g.ctrlKey?w.key=d.C0.ESC+"[5;"+(m+1)+"~":w.key=d.C0.ESC+"[5~";break;case 34:g.shiftKey?w.type=3:g.ctrlKey?w.key=d.C0.ESC+"[6;"+(m+1)+"~":w.key=d.C0.ESC+"[6~";break;case 112:w.key=m?d.C0.ESC+"[1;"+(m+1)+"P":d.C0.ESC+"OP";break;case 113:w.key=m?d.C0.ESC+"[1;"+(m+1)+"Q":d.C0.ESC+"OQ";break;case 114:w.key=m?d.C0.ESC+"[1;"+(m+1)+"R":d.C0.ESC+"OR";break;case 115:w.key=m?d.C0.ESC+"[1;"+(m+1)+"S":d.C0.ESC+"OS";break;case 116:w.key=m?d.C0.ESC+"[15;"+(m+1)+"~":d.C0.ESC+"[15~";break;case 117:w.key=m?d.C0.ESC+"[17;"+(m+1)+"~":d.C0.ESC+"[17~";break;case 118:w.key=m?d.C0.ESC+"[18;"+(m+1)+"~":d.C0.ESC+"[18~";break;case 119:w.key=m?d.C0.ESC+"[19;"+(m+1)+"~":d.C0.ESC+"[19~";break;case 120:w.key=m?d.C0.ESC+"[20;"+(m+1)+"~":d.C0.ESC+"[20~";break;case 121:w.key=m?d.C0.ESC+"[21;"+(m+1)+"~":d.C0.ESC+"[21~";break;case 122:w.key=m?d.C0.ESC+"[23;"+(m+1)+"~":d.C0.ESC+"[23~";break;case 123:w.key=m?d.C0.ESC+"[24;"+(m+1)+"~":d.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(S&&!A||!g.altKey||g.metaKey)!S||g.altKey||g.ctrlKey||g.shiftKey||!g.metaKey?g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&g.key.length===1?w.key=g.key:g.key&&g.ctrlKey&&(g.key==="_"&&(w.key=d.C0.US),g.key==="@"&&(w.key=d.C0.NUL)):g.keyCode===65&&(w.type=1);else{const b=f[g.keyCode],x=b?.[g.shiftKey?1:0];if(x)w.key=d.C0.ESC+x;else if(g.keyCode>=65&&g.keyCode<=90){const y=g.ctrlKey?g.keyCode-64:g.keyCode+32;let O=String.fromCharCode(y);g.shiftKey&&(O=O.toUpperCase()),w.key=d.C0.ESC+O}else if(g.keyCode===32)w.key=d.C0.ESC+(g.ctrlKey?d.C0.NUL:" ");else if(g.key==="Dead"&&g.code.startsWith("Key")){let y=g.code.slice(3,4);g.shiftKey||(y=y.toLowerCase()),w.key=d.C0.ESC+y,w.cancel=!0}}else g.keyCode>=65&&g.keyCode<=90?w.key=String.fromCharCode(g.keyCode-64):g.keyCode===32?w.key=d.C0.NUL:g.keyCode>=51&&g.keyCode<=55?w.key=String.fromCharCode(g.keyCode-51+27):g.keyCode===56?w.key=d.C0.DEL:g.keyCode===219?w.key=d.C0.ESC:g.keyCode===220?w.key=d.C0.FS:g.keyCode===221&&(w.key=d.C0.GS)}return w}},482:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let v=d;v<f;++v){let S=h[v];S>65535?(S-=65536,g+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):g+=String.fromCharCode(S)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,v=0;if(this._interim){const S=h.charCodeAt(v++);56320<=S&&S<=57343?d[g++]=1024*(this._interim-55296)+S-56320+65536:(d[g++]=this._interim,d[g++]=S),this._interim=0}for(let S=v;S<f;++S){const A=h.charCodeAt(S);if(55296<=A&&A<=56319){if(++S>=f)return this._interim=A,g;const w=h.charCodeAt(S);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,v,S,A,w=0,m=0,b=0;if(this.interim[0]){let O=!1,k=this.interim[0];k&=(224&k)==192?31:(240&k)==224?15:7;let P,L=0;for(;(P=63&this.interim[++L])&&L<4;)k<<=6,k|=P;const M=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=M-L;for(;b<B;){if(b>=f)return 0;if(P=h[b++],(192&P)!=128){b--,O=!0;break}this.interim[L++]=P,k<<=6,k|=63&P}O||(M===2?k<128?b--:d[w++]=k:M===3?k<2048||k>=55296&&k<=57343||k===65279||(d[w++]=k):k<65536||k>1114111||(d[w++]=k)),this.interim.fill(0)}const x=f-4;let y=b;for(;y<f;){for(;!(!(y<x)||128&(g=h[y])||128&(v=h[y+1])||128&(S=h[y+2])||128&(A=h[y+3]));)d[w++]=g,d[w++]=v,d[w++]=S,d[w++]=A,y+=4;if(g=h[y++],g<128)d[w++]=g;else if((224&g)==192){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(m=(31&g)<<6|63&v,m<128){y--;continue}d[w++]=m}else if((240&g)==224){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(m=(15&g)<<12|(63&v)<<6|63&S,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,this.interim[2]=S,w;if(A=h[y++],(192&A)!=128){y--;continue}if(m=(7&g)<<18|(63&v)<<12|(63&S)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},225:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const h=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;l.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let g=0;g<h.length;++g)f.fill(0,h[g][0],h[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?f[g]:function(v,S){let A,w=0,m=S.length-1;if(v<S[0][0]||v>S[m][1])return!1;for(;m>=w;)if(A=w+m>>1,v>S[A][1])w=A+1;else{if(!(v<S[A][0]))return!0;m=A-1}return!1}(g,d)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}}},5981:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const d=h(8460),f=h(844);class g extends f.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,A){if(A!==void 0&&this._syncCalls>A)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,A){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(A),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(A)}_innerWrite(S=0,A=!0){const w=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],b=this._action(m,A);if(b){const y=O=>Date.now()-w>=12?setTimeout(()=>this._innerWrite(0,O)):this._innerWrite(w,O);return void b.catch(O=>(queueMicrotask(()=>{throw O}),Promise.resolve(!1))).then(y)}const x=this._callbacks[this._bufferOffset];if(x&&x(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=g},5941:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const h=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function f(g,v){const S=g.toString(16),A=S.length<2?"0"+S:S;switch(v){case 4:return S[0];case 8:return A;case 12:return(A+A).slice(0,3);default:return A+A}}l.parseColor=function(g){if(!g)return;let v=g.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const S=h.exec(v);if(S){const A=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/A*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/A*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/A*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),d.exec(v)&&[3,6,9,12].includes(v.length))){const S=v.length/3,A=[0,0,0];for(let w=0;w<3;++w){const m=parseInt(v.slice(S*w,S*w+S),16);A[w]=S===1?m<<4:S===2?m:S===3?m>>4:m>>8}return A}},l.toRgbString=function(g,v=16){const[S,A,w]=g;return`rgb:${f(S,v)}/${f(A,v)}/${f(w,v)}`}},5770:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const d=h(482),f=h(8742),g=h(5770),v=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(A,w){this._handlers[A]===void 0&&(this._handlers[A]=[]);const m=this._handlers[A];return m.push(w),{dispose:()=>{const b=m.indexOf(w);b!==-1&&m.splice(b,1)}}}clearHandler(A){this._handlers[A]&&delete this._handlers[A]}setHandlerFallback(A){this._handlerFb=A}reset(){if(this._active.length)for(let A=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;A>=0;--A)this._active[A].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(A,w){if(this.reset(),this._ident=A,this._active=this._handlers[A]||v,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(A,w,m){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(A,w,m);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(A,w,m))}unhook(A,w=!0){if(this._active.length){let m=!1,b=this._active.length-1,x=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,m=w,x=this._stack.fallThrough,this._stack.paused=!1),!x&&m===!1){for(;b>=0&&(m=this._active[b].unhook(A),m!==!0);b--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,m;b--}for(;b>=0;b--)if(m=this._active[b].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",A);this._active=v,this._ident=0}};const S=new f.Params;S.addParam(0),l.DcsHandler=class{constructor(A){this._handler=A,this._data="",this._params=S,this._hitLimit=!1}hook(A){this._params=A.length>1||A.params[0]?A.clone():S,this._data="",this._hitLimit=!1}put(A,w,m){this._hitLimit||(this._data+=(0,d.utf32ToString)(A,w,m),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(A){let w=!1;if(this._hitLimit)w=!1;else if(A&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then(m=>(this._params=S,this._data="",this._hitLimit=!1,m));return this._params=S,this._data="",this._hitLimit=!1,w}}},2015:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const d=h(844),f=h(8742),g=h(6242),v=h(6351);class S{constructor(b){this.table=new Uint8Array(b)}setDefault(b,x){this.table.fill(b<<4|x)}add(b,x,y,O){this.table[x<<8|b]=y<<4|O}addMany(b,x,y,O){for(let k=0;k<b.length;k++)this.table[x<<8|b[k]]=y<<4|O}}l.TransitionTable=S;const A=160;l.VT500_TRANSITION_TABLE=function(){const m=new S(4095),b=Array.apply(null,Array(256)).map((L,M)=>M),x=(L,M)=>b.slice(L,M),y=x(32,127),O=x(0,24);O.push(25),O.push.apply(O,x(28,32));const k=x(0,14);let P;for(P in m.setDefault(1,0),m.addMany(y,0,2,0),k)m.addMany([24,26,153,154],P,3,0),m.addMany(x(128,144),P,3,0),m.addMany(x(144,152),P,3,0),m.add(156,P,0,0),m.add(27,P,11,1),m.add(157,P,4,8),m.addMany([152,158,159],P,0,7),m.add(155,P,11,3),m.add(144,P,11,9);return m.addMany(O,0,3,0),m.addMany(O,1,3,1),m.add(127,1,0,1),m.addMany(O,8,0,8),m.addMany(O,3,3,3),m.add(127,3,0,3),m.addMany(O,4,3,4),m.add(127,4,0,4),m.addMany(O,6,3,6),m.addMany(O,5,3,5),m.add(127,5,0,5),m.addMany(O,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(y,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(x(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(y,7,0,7),m.addMany(O,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(x(64,127),3,7,0),m.addMany(x(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(x(48,60),4,8,4),m.addMany(x(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(x(32,64),6,0,6),m.add(127,6,0,6),m.addMany(x(64,127),6,0,0),m.addMany(x(32,48),3,9,5),m.addMany(x(32,48),5,9,5),m.addMany(x(48,64),5,0,6),m.addMany(x(64,127),5,7,0),m.addMany(x(32,48),4,9,5),m.addMany(x(32,48),1,9,2),m.addMany(x(32,48),2,9,2),m.addMany(x(48,127),2,10,0),m.addMany(x(48,80),1,10,0),m.addMany(x(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(x(96,127),1,10,0),m.add(80,1,11,9),m.addMany(O,9,0,9),m.add(127,9,0,9),m.addMany(x(28,32),9,0,9),m.addMany(x(32,48),9,9,12),m.addMany(x(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(O,11,0,11),m.addMany(x(32,128),11,0,11),m.addMany(x(28,32),11,0,11),m.addMany(O,10,0,10),m.add(127,10,0,10),m.addMany(x(28,32),10,0,10),m.addMany(x(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(x(32,48),10,9,12),m.addMany(O,12,0,12),m.add(127,12,0,12),m.addMany(x(28,32),12,0,12),m.addMany(x(32,48),12,9,12),m.addMany(x(48,64),12,0,11),m.addMany(x(64,127),12,12,13),m.addMany(x(64,127),10,12,13),m.addMany(x(64,127),9,12,13),m.addMany(O,13,13,13),m.addMany(y,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(A,0,2,0),m.add(A,8,5,8),m.add(A,6,0,6),m.add(A,11,0,11),m.add(A,13,13,13),m}();class w extends d.Disposable{constructor(b=l.VT500_TRANSITION_TABLE){super(),this._transitions=b,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(x,y,O)=>{},this._executeHandlerFb=x=>{},this._csiHandlerFb=(x,y)=>{},this._escHandlerFb=x=>{},this._errorHandlerFb=x=>x,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new g.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(b,x=[64,126]){let y=0;if(b.prefix){if(b.prefix.length>1)throw new Error("only one byte as prefix supported");if(y=b.prefix.charCodeAt(0),y&&60>y||y>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(b.intermediates){if(b.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let k=0;k<b.intermediates.length;++k){const P=b.intermediates.charCodeAt(k);if(32>P||P>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");y<<=8,y|=P}}if(b.final.length!==1)throw new Error("final must be a single byte");const O=b.final.charCodeAt(0);if(x[0]>O||O>x[1])throw new Error(`final must be in range ${x[0]} .. ${x[1]}`);return y<<=8,y|=O,y}identToString(b){const x=[];for(;b;)x.push(String.fromCharCode(255&b)),b>>=8;return x.reverse().join("")}setPrintHandler(b){this._printHandler=b}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(b,x){const y=this._identifier(b,[48,126]);this._escHandlers[y]===void 0&&(this._escHandlers[y]=[]);const O=this._escHandlers[y];return O.push(x),{dispose:()=>{const k=O.indexOf(x);k!==-1&&O.splice(k,1)}}}clearEscHandler(b){this._escHandlers[this._identifier(b,[48,126])]&&delete this._escHandlers[this._identifier(b,[48,126])]}setEscHandlerFallback(b){this._escHandlerFb=b}setExecuteHandler(b,x){this._executeHandlers[b.charCodeAt(0)]=x}clearExecuteHandler(b){this._executeHandlers[b.charCodeAt(0)]&&delete this._executeHandlers[b.charCodeAt(0)]}setExecuteHandlerFallback(b){this._executeHandlerFb=b}registerCsiHandler(b,x){const y=this._identifier(b);this._csiHandlers[y]===void 0&&(this._csiHandlers[y]=[]);const O=this._csiHandlers[y];return O.push(x),{dispose:()=>{const k=O.indexOf(x);k!==-1&&O.splice(k,1)}}}clearCsiHandler(b){this._csiHandlers[this._identifier(b)]&&delete this._csiHandlers[this._identifier(b)]}setCsiHandlerFallback(b){this._csiHandlerFb=b}registerDcsHandler(b,x){return this._dcsParser.registerHandler(this._identifier(b),x)}clearDcsHandler(b){this._dcsParser.clearHandler(this._identifier(b))}setDcsHandlerFallback(b){this._dcsParser.setHandlerFallback(b)}registerOscHandler(b,x){return this._oscParser.registerHandler(b,x)}clearOscHandler(b){this._oscParser.clearHandler(b)}setOscHandlerFallback(b){this._oscParser.setHandlerFallback(b)}setErrorHandler(b){this._errorHandler=b}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(b,x,y,O,k){this._parseStack.state=b,this._parseStack.handlers=x,this._parseStack.handlerPos=y,this._parseStack.transition=O,this._parseStack.chunkPos=k}parse(b,x,y){let O,k=0,P=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(y===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const M=this._parseStack.handlers;let B=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(y===!1&&B>-1){for(;B>=0&&(O=M[B](this._params),O!==!0);B--)if(O instanceof Promise)return this._parseStack.handlerPos=B,O}this._parseStack.handlers=[];break;case 4:if(y===!1&&B>-1){for(;B>=0&&(O=M[B](),O!==!0);B--)if(O instanceof Promise)return this._parseStack.handlerPos=B,O}this._parseStack.handlers=[];break;case 6:if(k=b[this._parseStack.chunkPos],O=this._dcsParser.unhook(k!==24&&k!==26,y),O)return O;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(k=b[this._parseStack.chunkPos],O=this._oscParser.end(k!==24&&k!==26,y),O)return O;k===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let M=L;M<x;++M){switch(k=b[M],P=this._transitions.table[this.currentState<<8|(k<160?k:A)],P>>4){case 2:for(let V=M+1;;++V){if(V>=x||(k=b[V])<32||k>126&&k<A){this._printHandler(b,M,V),M=V-1;break}if(++V>=x||(k=b[V])<32||k>126&&k<A){this._printHandler(b,M,V),M=V-1;break}if(++V>=x||(k=b[V])<32||k>126&&k<A){this._printHandler(b,M,V),M=V-1;break}if(++V>=x||(k=b[V])<32||k>126&&k<A){this._printHandler(b,M,V),M=V-1;break}}break;case 3:this._executeHandlers[k]?this._executeHandlers[k]():this._executeHandlerFb(k),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:M,code:k,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const B=this._csiHandlers[this._collect<<8|k];let j=B?B.length-1:-1;for(;j>=0&&(O=B[j](this._params),O!==!0);j--)if(O instanceof Promise)return this._preserveStack(3,B,j,P,M),O;j<0&&this._csiHandlerFb(this._collect<<8|k,this._params),this.precedingCodepoint=0;break;case 8:do switch(k){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(k-48)}while(++M<x&&(k=b[M])>47&&k<60);M--;break;case 9:this._collect<<=8,this._collect|=k;break;case 10:const F=this._escHandlers[this._collect<<8|k];let U=F?F.length-1:-1;for(;U>=0&&(O=F[U](),O!==!0);U--)if(O instanceof Promise)return this._preserveStack(4,F,U,P,M),O;U<0&&this._escHandlerFb(this._collect<<8|k),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|k,this._params);break;case 13:for(let V=M+1;;++V)if(V>=x||(k=b[V])===24||k===26||k===27||k>127&&k<A){this._dcsParser.put(b,M,V),M=V-1;break}break;case 14:if(O=this._dcsParser.unhook(k!==24&&k!==26),O)return this._preserveStack(6,[],0,P,M),O;k===27&&(P|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let V=M+1;;V++)if(V>=x||(k=b[V])<32||k>127&&k<A){this._oscParser.put(b,M,V),M=V-1;break}break;case 6:if(O=this._oscParser.end(k!==24&&k!==26),O)return this._preserveStack(5,[],0,P,M),O;k===27&&(P|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&P}}}l.EscapeSequenceParser=w},6242:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const d=h(5770),f=h(482),g=[];l.OscParser=class{constructor(){this._state=0,this._active=g,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,S){this._handlers[v]===void 0&&(this._handlers[v]=[]);const A=this._handlers[v];return A.push(S),{dispose:()=>{const w=A.indexOf(S);w!==-1&&A.splice(w,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=g,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||g,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,S,A){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(v,S,A);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(v,S,A))}start(){this.reset(),this._state=1}put(v,S,A){if(this._state!==3){if(this._state===1)for(;S<A;){const w=v[S++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&A-S>0&&this._put(v,S,A)}}end(v,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let A=!1,w=this._active.length-1,m=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,A=S,m=this._stack.fallThrough,this._stack.paused=!1),!m&&A===!1){for(;w>=0&&(A=this._active[w].end(v),A!==!0);w--)if(A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,A;w--}for(;w>=0;w--)if(A=this._active[w].end(!1),A instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,A}else this._handlerFb(this._id,"END",v);this._active=g,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,S,A){this._hitLimit||(this._data+=(0,f.utf32ToString)(v,S,A),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let S=!1;if(this._hitLimit)S=!1;else if(v&&(S=this._handler(this._data),S instanceof Promise))return S.then(A=>(this._data="",this._hitLimit=!1,A));return this._data="",this._hitLimit=!1,S}}},8742:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const h=2147483647;class d{static fromArray(g){const v=new d;if(!g.length)return v;for(let S=Array.isArray(g[0])?1:0;S<g.length;++S){const A=g[S];if(Array.isArray(A))for(let w=0;w<A.length;++w)v.addSubParam(A[w]);else v.addParam(A)}return v}constructor(g=32,v=32){if(this.maxLength=g,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const g=new d(this.maxLength,this.maxSubParamsLength);return g.params.set(this.params),g.length=this.length,g._subParams.set(this._subParams),g._subParamsLength=this._subParamsLength,g._subParamsIdx.set(this._subParamsIdx),g._rejectDigits=this._rejectDigits,g._rejectSubDigits=this._rejectSubDigits,g._digitIsSub=this._digitIsSub,g}toArray(){const g=[];for(let v=0;v<this.length;++v){g.push(this.params[v]);const S=this._subParamsIdx[v]>>8,A=255&this._subParamsIdx[v];A-S>0&&g.push(Array.prototype.slice.call(this._subParams,S,A))}return g}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>h?h:g}}addSubParam(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>h?h:g,this._subParamsIdx[this.length-1]++}}hasSubParams(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0}getSubParams(g){const v=this._subParamsIdx[g]>>8,S=255&this._subParamsIdx[g];return S-v>0?this._subParams.subarray(v,S):null}getSubParamsAll(){const g={};for(let v=0;v<this.length;++v){const S=this._subParamsIdx[v]>>8,A=255&this._subParamsIdx[v];A-S>0&&(g[v]=this._subParams.slice(S,A))}return g}addDigit(g){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,A=S[v-1];S[v-1]=~A?Math.min(10*A+g,h):g}}l.Params=d},5741:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()}loadAddon(h,d){const f={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(f),d.dispose=()=>this._wrappedAddonDispose(f),d.activate(h)}_wrappedAddonDispose(h){if(h.isDisposed)return;let d=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===h){d=f;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(d,1)}}},8771:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const d=h(3785),f=h(511);l.BufferApiView=class{constructor(g,v){this._buffer=g,this.type=v}init(g){return this._buffer=g,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(g){const v=this._buffer.lines.get(g);if(v)return new d.BufferLineApiView(v)}getNullCell(){return new f.CellData}}},3785:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const d=h(511);l.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,g){if(!(f<0||f>=this._line.length))return g?(this._line.loadCell(f,g),g):this._line.loadCell(f,new d.CellData)}translateToString(f,g,v){return this._line.translateToString(f,g,v)}}},8285:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const d=h(8771),f=h(8460),g=h(844);class v extends g.Disposable{constructor(A){super(),this._core=A,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=v},7975:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(h){this._core=h}registerCsiHandler(h,d){return this._core.registerCsiHandler(h,f=>d(f.toArray()))}addCsiHandler(h,d){return this.registerCsiHandler(h,d)}registerDcsHandler(h,d){return this._core.registerDcsHandler(h,(f,g)=>d(f,g.toArray()))}addDcsHandler(h,d){return this.registerDcsHandler(h,d)}registerEscHandler(h,d){return this._core.registerEscHandler(h,d)}addEscHandler(h,d){return this.registerEscHandler(h,d)}registerOscHandler(h,d){return this._core.registerOscHandler(h,d)}addOscHandler(h,d){return this.registerOscHandler(h,d)}}},7090:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(h){this._core=h}register(h){this._core.unicodeService.register(h)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(h){this._core.unicodeService.activeVersion=h}}},744:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const g=h(8460),v=h(844),S=h(5295),A=h(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let w=l.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(m,this))}resize(m,b){this.cols=m,this.rows=b,this.buffers.resize(m,b),this._onResize.fire({cols:m,rows:b})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,b=!1){const x=this.buffer;let y;y=this._cachedBlankLine,y&&y.length===this.cols&&y.getFg(0)===m.fg&&y.getBg(0)===m.bg||(y=x.getBlankLine(m,b),this._cachedBlankLine=y),y.isWrapped=b;const O=x.ybase+x.scrollTop,k=x.ybase+x.scrollBottom;if(x.scrollTop===0){const P=x.lines.isFull;k===x.lines.length-1?P?x.lines.recycle().copyFrom(y):x.lines.push(y.clone()):x.lines.splice(k+1,0,y.clone()),P?this.isUserScrolling&&(x.ydisp=Math.max(x.ydisp-1,0)):(x.ybase++,this.isUserScrolling||x.ydisp++)}else{const P=k-O+1;x.lines.shiftElements(O+1,P-1,-1),x.lines.set(k,y.clone())}this.isUserScrolling||(x.ydisp=x.ybase),this._onScroll.fire(x.ydisp)}scrollLines(m,b,x){const y=this.buffer;if(m<0){if(y.ydisp===0)return;this.isUserScrolling=!0}else m+y.ydisp>=y.ybase&&(this.isUserScrolling=!1);const O=y.ydisp;y.ydisp=Math.max(Math.min(y.ydisp+m,y.ybase),0),O!==y.ydisp&&(b||this._onScroll.fire(y.ydisp))}};l.BufferService=w=d([f(0,A.IOptionsService)],w)},7994:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(h){this.glevel=h,this.charset=this._charsets[h]}setgCharset(h,d){this._charsets[h]=d,this.glevel===h&&(this.charset=d)}}},1753:function(c,l,h){var d=this&&this.__decorate||function(y,O,k,P){var L,M=arguments.length,B=M<3?O:P===null?P=Object.getOwnPropertyDescriptor(O,k):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,O,k,P);else for(var j=y.length-1;j>=0;j--)(L=y[j])&&(B=(M<3?L(B):M>3?L(O,k,B):L(O,k))||B);return M>3&&B&&Object.defineProperty(O,k,B),B},f=this&&this.__param||function(y,O){return function(k,P){O(k,P,y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const g=h(2585),v=h(8460),S=h(844),A={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:y=>y.button!==4&&y.action===1&&(y.ctrl=!1,y.alt=!1,y.shift=!1,!0)},VT200:{events:19,restrict:y=>y.action!==32},DRAG:{events:23,restrict:y=>y.action!==32||y.button!==3},ANY:{events:31,restrict:y=>!0}};function w(y,O){let k=(y.ctrl?16:0)|(y.shift?4:0)|(y.alt?8:0);return y.button===4?(k|=64,k|=y.action):(k|=3&y.button,4&y.button&&(k|=64),8&y.button&&(k|=128),y.action===32?k|=32:y.action!==0||O||(k|=3)),k}const m=String.fromCharCode,b={DEFAULT:y=>{const O=[w(y,!1)+32,y.col+32,y.row+32];return O[0]>255||O[1]>255||O[2]>255?"":`\x1B[M${m(O[0])}${m(O[1])}${m(O[2])}`},SGR:y=>{const O=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${w(y,!0)};${y.col};${y.row}${O}`},SGR_PIXELS:y=>{const O=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${w(y,!0)};${y.x};${y.y}${O}`}};let x=l.CoreMouseService=class extends S.Disposable{constructor(y,O){super(),this._bufferService=y,this._coreService=O,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const k of Object.keys(A))this.addProtocol(k,A[k]);for(const k of Object.keys(b))this.addEncoding(k,b[k]);this.reset()}addProtocol(y,O){this._protocols[y]=O}addEncoding(y,O){this._encodings[y]=O}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(y){if(!this._protocols[y])throw new Error(`unknown protocol "${y}"`);this._activeProtocol=y,this._onProtocolChange.fire(this._protocols[y].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(y){if(!this._encodings[y])throw new Error(`unknown encoding "${y}"`);this._activeEncoding=y}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(y){if(y.col<0||y.col>=this._bufferService.cols||y.row<0||y.row>=this._bufferService.rows||y.button===4&&y.action===32||y.button===3&&y.action!==32||y.button!==4&&(y.action===2||y.action===3)||(y.col++,y.row++,y.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,y,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(y))return!1;const O=this._encodings[this._activeEncoding](y);return O&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(O):this._coreService.triggerDataEvent(O,!0)),this._lastEvent=y,!0}explainEvents(y){return{down:!!(1&y),up:!!(2&y),drag:!!(4&y),move:!!(8&y),wheel:!!(16&y)}}_equalEvents(y,O,k){if(k){if(y.x!==O.x||y.y!==O.y)return!1}else if(y.col!==O.col||y.row!==O.row)return!1;return y.button===O.button&&y.action===O.action&&y.ctrl===O.ctrl&&y.alt===O.alt&&y.shift===O.shift}};l.CoreMouseService=x=d([f(0,g.IBufferService),f(1,g.ICoreService)],x)},6975:function(c,l,h){var d=this&&this.__decorate||function(x,y,O,k){var P,L=arguments.length,M=L<3?y:k===null?k=Object.getOwnPropertyDescriptor(y,O):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(x,y,O,k);else for(var B=x.length-1;B>=0;B--)(P=x[B])&&(M=(L<3?P(M):L>3?P(y,O,M):P(y,O))||M);return L>3&&M&&Object.defineProperty(y,O,M),M},f=this&&this.__param||function(x,y){return function(O,k){y(O,k,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const g=h(1439),v=h(8460),S=h(844),A=h(2585),w=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let b=l.CoreService=class extends S.Disposable{constructor(x,y,O){super(),this._bufferService=x,this._logService=y,this._optionsService=O,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(w),this.decPrivateModes=(0,g.clone)(m)}reset(){this.modes=(0,g.clone)(w),this.decPrivateModes=(0,g.clone)(m)}triggerDataEvent(x,y=!1){if(this._optionsService.rawOptions.disableStdin)return;const O=this._bufferService.buffer;y&&this._optionsService.rawOptions.scrollOnUserInput&&O.ybase!==O.ydisp&&this._onRequestScrollToBottom.fire(),y&&this._onUserInput.fire(),this._logService.debug(`sending data "${x}"`,()=>x.split("").map(k=>k.charCodeAt(0))),this._onData.fire(x)}triggerBinaryEvent(x){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${x}"`,()=>x.split("").map(y=>y.charCodeAt(0))),this._onBinary.fire(x))}};l.CoreService=b=d([f(0,A.IBufferService),f(1,A.ILogService),f(2,A.IOptionsService)],b)},9074:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const d=h(8055),f=h(8460),g=h(844),v=h(6106);let S=0,A=0;class w extends g.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(x=>x?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,g.toDisposable)(()=>this.reset()))}registerDecoration(x){if(x.marker.isDisposed)return;const y=new m(x);if(y){const O=y.marker.onDispose(()=>y.dispose());y.onDispose(()=>{y&&(this._decorations.delete(y)&&this._onDecorationRemoved.fire(y),O.dispose())}),this._decorations.insert(y),this._onDecorationRegistered.fire(y)}return y}reset(){for(const x of this._decorations.values())x.dispose();this._decorations.clear()}*getDecorationsAtCell(x,y,O){var k,P,L;let M=0,B=0;for(const j of this._decorations.getKeyIterator(y))M=(k=j.options.x)!==null&&k!==void 0?k:0,B=M+((P=j.options.width)!==null&&P!==void 0?P:1),x>=M&&x<B&&(!O||((L=j.options.layer)!==null&&L!==void 0?L:"bottom")===O)&&(yield j)}forEachDecorationAtCell(x,y,O,k){this._decorations.forEachByKey(y,P=>{var L,M,B;S=(L=P.options.x)!==null&&L!==void 0?L:0,A=S+((M=P.options.width)!==null&&M!==void 0?M:1),x>=S&&x<A&&(!O||((B=P.options.layer)!==null&&B!==void 0?B:"bottom")===O)&&k(P)})}}l.DecorationService=w;class m extends g.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(x){super(),this.options=x,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=x.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const d=h(2585),f=h(8343);class g{constructor(...S){this._entries=new Map;for(const[A,w]of S)this.set(A,w)}set(S,A){const w=this._entries.get(S);return this._entries.set(S,A),w}forEach(S){for(const[A,w]of this._entries.entries())S(A,w)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}l.ServiceCollection=g,l.InstantiationService=class{constructor(){this._services=new g,this._services.set(d.IInstantiationService,this)}setService(v,S){this._services.set(v,S)}getService(v){return this._services.get(v)}createInstance(v,...S){const A=(0,f.getServiceDependencies)(v).sort((b,x)=>b.index-x.index),w=[];for(const b of A){const x=this._services.get(b.id);if(!x)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${b.id}.`);w.push(x)}const m=A.length>0?A[0].index:S.length;if(S.length!==m)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${m+1} conflicts with ${S.length} static arguments`);return new v(...S,...w)}}},7866:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(844),v=h(2585),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,x){this._evalLazyOptionalParams(x),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...x)}trace(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.trace.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}debug(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.debug.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}info(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.INFO&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.info.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.info,m,b)}warn(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.WARN&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.warn.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.warn,m,b)}error(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.error.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.error,m,b)}};l.LogService=w=d([f(0,v.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,x){if(typeof x.value!="function")throw new Error("not supported");const y=x.value;x.value=function(...O){if(A.logLevel!==v.LogLevelEnum.TRACE)return y.apply(this,O);A.trace(`GlyphRenderer#${y.name}(${O.map(P=>JSON.stringify(P)).join(", ")})`);const k=y.apply(this,O);return A.trace(`GlyphRenderer#${y.name} return`,k),k}}},7302:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const d=h(8460),f=h(844),g=h(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:g.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends f.Disposable{constructor(w){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m=Object.assign({},l.DEFAULT_OPTIONS);for(const b in w)if(b in m)try{const x=w[b];m[b]=this._sanitizeAndValidateOption(b,x)}catch(x){console.error(x)}this.rawOptions=m,this.options=Object.assign({},m),this._setupOptions()}onSpecificOptionChange(w,m){return this.onOptionChange(b=>{b===w&&m(this.rawOptions[w])})}onMultipleOptionChange(w,m){return this.onOptionChange(b=>{w.indexOf(b)!==-1&&m()})}_setupOptions(){const w=b=>{if(!(b in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);return this.rawOptions[b]},m=(b,x)=>{if(!(b in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);x=this._sanitizeAndValidateOption(b,x),this.rawOptions[b]!==x&&(this.rawOptions[b]=x,this._onOptionChange.fire(b))};for(const b in this.rawOptions){const x={get:w.bind(this,b),set:m.bind(this,b)};Object.defineProperty(this.options,b,x)}}_sanitizeAndValidateOption(w,m){switch(w){case"cursorStyle":if(m||(m=l.DEFAULT_OPTIONS[w]),!function(b){return b==="block"||b==="underline"||b==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${w}`);break;case"wordSeparator":m||(m=l.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=v.includes(m)?m:l.DEFAULT_OPTIONS[w];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${w} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${w} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}l.OptionsService=S},2660:function(c,l,h){var d=this&&this.__decorate||function(S,A,w,m){var b,x=arguments.length,y=x<3?A:m===null?m=Object.getOwnPropertyDescriptor(A,w):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,A,w,m);else for(var O=S.length-1;O>=0;O--)(b=S[O])&&(y=(x<3?b(y):x>3?b(A,w,y):b(A,w))||y);return x>3&&y&&Object.defineProperty(A,w,y),y},f=this&&this.__param||function(S,A){return function(w,m){A(w,m,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const g=h(2585);let v=l.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const A=this._bufferService.buffer;if(S.id===void 0){const O=A.addMarker(A.ybase+A.y),k={data:S,id:this._nextId++,lines:[O]};return O.onDispose(()=>this._removeMarkerFromLink(k,O)),this._dataByLinkId.set(k.id,k),k.id}const w=S,m=this._getEntryIdKey(w),b=this._entriesWithId.get(m);if(b)return this.addLineToLink(b.id,A.ybase+A.y),b.id;const x=A.addMarker(A.ybase+A.y),y={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[x]};return x.onDispose(()=>this._removeMarkerFromLink(y,x)),this._entriesWithId.set(y.key,y),this._dataByLinkId.set(y.id,y),y.id}addLineToLink(S,A){const w=this._dataByLinkId.get(S);if(w&&w.lines.every(m=>m.line!==A)){const m=this._bufferService.buffer.addMarker(A);w.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(w,m))}}getLinkData(S){var A;return(A=this._dataByLinkId.get(S))===null||A===void 0?void 0:A.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,A){const w=S.lines.indexOf(A);w!==-1&&(S.lines.splice(w,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};l.OscLinkService=v=d([f(0,g.IBufferService)],v)},8343:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(v,S,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,v,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},2585:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(8343);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const d=h(8460),f=h(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const g=new f.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let v=0;const S=g.length;for(let A=0;A<S;++A){let w=g.charCodeAt(A);if(55296<=w&&w<=56319){if(++A>=S)return v+this.wcwidth(w);const m=g.charCodeAt(A);56320<=m&&m<=57343?w=1024*(w-55296)+m-56320+65536:v+=this.wcwidth(m)}v+=this.wcwidth(w)}return v}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const l=o(9042),h=o(3236),d=o(844),f=o(5741),g=o(8285),v=o(7975),S=o(7090),A=["cols","rows"];class w extends d.Disposable{constructor(b){super(),this._core=this.register(new h.Terminal(b)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const x=O=>this._core.options[O],y=(O,k)=>{this._checkReadonlyOptions(O),this._core.options[O]=k};for(const O in this._core.options){const k={get:x.bind(this,O),set:y.bind(this,O)};Object.defineProperty(this._publicOptions,O,k)}}_checkReadonlyOptions(b){if(A.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new g.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let x="none";switch(this._core.coreMouseService.activeProtocol){case"X10":x="x10";break;case"VT200":x="vt200";break;case"DRAG":x="drag";break;case"ANY":x="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:x,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const x in b)this._publicOptions[x]=b[x]}blur(){this._core.blur()}focus(){this._core.focus()}resize(b,x){this._verifyIntegers(b,x),this._core.resize(b,x)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.registerMarker(b)}registerDecoration(b){var x,y,O;return this._checkProposedApi(),this._verifyPositiveIntegers((x=b.x)!==null&&x!==void 0?x:0,(y=b.width)!==null&&y!==void 0?y:0,(O=b.height)!==null&&O!==void 0?O:0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,x,y){this._verifyIntegers(b,x,y),this._core.select(b,x,y)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,x){this._verifyIntegers(b,x),this._core.selectLines(b,x)}dispose(){super.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,x){this._core.write(b,x)}writeln(b,x){this._core.write(b),this._core.write(`\r
`,x)}paste(b){this._core.paste(b)}refresh(b,x){this._verifyIntegers(b,x),this._core.refresh(b,x)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){this._addonManager.loadAddon(this,b)}static get strings(){return l}_verifyIntegers(...b){for(const x of b)if(x===1/0||isNaN(x)||x%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const x of b)if(x&&(x===1/0||isNaN(x)||x%1!=0||x<0))throw new Error("This API only accepts positive integers")}}c.Terminal=w})(),a})())})(xterm);var xtermExports=xterm.exports,xtermAddonCanvas={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={903:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;const d=h(274),f=h(627),g=h(237),v=h(860),S=h(374),A=h(296),w=h(345),m=h(859),b=h(399),x=h(855);class y extends m.Disposable{get canvas(){return this._canvas}get cacheCanvas(){var P;return(P=this._charAtlas)===null||P===void 0?void 0:P.pages[0].canvas}constructor(P,L,M,B,j,F,U,V,Q,q){super(),this._terminal=P,this._container=L,this._alpha=j,this._themeService=F,this._bufferService=U,this._optionsService=V,this._decorationService=Q,this._coreBrowserService=q,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,A.createSelectionRenderModel)(),this._bitmapGenerator=[],this._charAtlasDisposable=this.register(new m.MutableDisposable),this._onAddTextureAtlasCanvas=this.register(new w.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new d.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${M}-layer`),this._canvas.style.zIndex=B.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(G=>{this._refreshCharAtlas(G),this.reset(),this.handleSelectionChanged(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)})),this.register((0,m.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(P,L){}handleSelectionChanged(P,L,M=!1){this._selectionModel.update(this._terminal,P,L,M)}_setTransparency(P){if(P===this._alpha)return;const L=this._canvas;this._alpha=P,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,L),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(P){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,f.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,P,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,w.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let L=0;L<this._charAtlas.pages.length;L++)this._bitmapGenerator[L]=new O(this._charAtlas.pages[L].canvas)}}resize(P){this._deviceCellWidth=P.device.cell.width,this._deviceCellHeight=P.device.cell.height,this._deviceCharWidth=P.device.char.width,this._deviceCharHeight=P.device.char.height,this._deviceCharLeft=P.device.char.left,this._deviceCharTop=P.device.char.top,this._canvas.width=P.device.canvas.width,this._canvas.height=P.device.canvas.height,this._canvas.style.width=`${P.css.canvas.width}px`,this._canvas.style.height=`${P.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var P;(P=this._charAtlas)===null||P===void 0||P.clearTexture()}_fillCells(P,L,M,B){this._ctx.fillRect(P*this._deviceCellWidth,L*this._deviceCellHeight,M*this._deviceCellWidth,B*this._deviceCellHeight)}_fillMiddleLineAtCells(P,L,M=1){const B=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(P*this._deviceCellWidth,(L+1)*this._deviceCellHeight-B-this._coreBrowserService.dpr,M*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(P,L,M=1,B=0){this._ctx.fillRect(P*this._deviceCellWidth,(L+1)*this._deviceCellHeight+B-this._coreBrowserService.dpr-1,M*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(P,L,M=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const B=this._coreBrowserService.dpr;this._ctx.lineWidth=B;for(let j=0;j<M;j++){const F=(P+j)*this._deviceCellWidth,U=(P+j+.5)*this._deviceCellWidth,V=(P+j+1)*this._deviceCellWidth,Q=(L+1)*this._deviceCellHeight-B-1,q=Q-B,G=Q+B;this._ctx.moveTo(F,Q),this._ctx.bezierCurveTo(F,q,U,q,U,Q),this._ctx.bezierCurveTo(U,G,V,G,V,Q)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(P,L,M=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const B=this._coreBrowserService.dpr;this._ctx.lineWidth=B,this._ctx.setLineDash([2*B,B]);const j=P*this._deviceCellWidth,F=(L+1)*this._deviceCellHeight-B-1;this._ctx.moveTo(j,F);for(let U=0;U<M;U++){const V=(P+M+U)*this._deviceCellWidth;this._ctx.lineTo(V,F)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(P,L,M=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const B=this._coreBrowserService.dpr;this._ctx.lineWidth=B,this._ctx.setLineDash([4*B,3*B]);const j=P*this._deviceCellWidth,F=(P+M)*this._deviceCellWidth,U=(L+1)*this._deviceCellHeight-B-1;this._ctx.moveTo(j,U),this._ctx.lineTo(F,U),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(P,L,M){this._ctx.fillRect(P*this._deviceCellWidth,L*this._deviceCellHeight,this._coreBrowserService.dpr*M,this._deviceCellHeight)}_strokeRectAtCell(P,L,M,B){const j=this._coreBrowserService.dpr;this._ctx.lineWidth=j,this._ctx.strokeRect(P*this._deviceCellWidth+j/2,L*this._deviceCellHeight+j/2,M*this._deviceCellWidth-j,B*this._deviceCellHeight-j)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(P,L,M,B){this._alpha?this._ctx.clearRect(P*this._deviceCellWidth,L*this._deviceCellHeight,M*this._deviceCellWidth,B*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(P*this._deviceCellWidth,L*this._deviceCellHeight,M*this._deviceCellWidth,B*this._deviceCellHeight))}_fillCharTrueColor(P,L,M){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=g.TEXT_BASELINE,this._clipRow(M);let B=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(B=(0,v.tryDrawCustomChar)(this._ctx,P.getChars(),L*this._deviceCellWidth,M*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),B||this._ctx.fillText(P.getChars(),L*this._deviceCellWidth+this._deviceCharLeft,M*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(P,L,M){var B,j,F,U;const V=P.getChars();if(this._cellColorResolver.resolve(P,L,this._bufferService.buffer.ydisp+M),!this._charAtlas)return;let Q;Q=V&&V.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(V,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(P.getCode()||x.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0),Q.size.x&&Q.size.y&&(this._ctx.save(),this._clipRow(M),this._bitmapGenerator[Q.texturePage]&&this._charAtlas.pages[Q.texturePage].canvas!==this._bitmapGenerator[Q.texturePage].canvas&&((j=(B=this._bitmapGenerator[Q.texturePage])===null||B===void 0?void 0:B.bitmap)===null||j===void 0||j.close(),delete this._bitmapGenerator[Q.texturePage]),this._charAtlas.pages[Q.texturePage].version!==((F=this._bitmapGenerator[Q.texturePage])===null||F===void 0?void 0:F.version)&&(this._bitmapGenerator[Q.texturePage]||(this._bitmapGenerator[Q.texturePage]=new O(this._charAtlas.pages[Q.texturePage].canvas)),this._bitmapGenerator[Q.texturePage].refresh(),this._bitmapGenerator[Q.texturePage].version=this._charAtlas.pages[Q.texturePage].version),this._ctx.drawImage(((U=this._bitmapGenerator[Q.texturePage])===null||U===void 0?void 0:U.bitmap)||this._charAtlas.pages[Q.texturePage].canvas,Q.texturePosition.x,Q.texturePosition.y,Q.size.x,Q.size.y,L*this._deviceCellWidth+this._deviceCharLeft-Q.offset.x,M*this._deviceCellHeight+this._deviceCharTop-Q.offset.y,Q.size.x,Q.size.y),this._ctx.restore())}_clipRow(P){this._ctx.beginPath(),this._ctx.rect(0,P*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(P,L){return`${L?"italic":""} ${P?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}l.BaseRenderLayer=y;class O{get bitmap(){return this._bitmap}constructor(P){this.canvas=P,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}refresh(){var P;(P=this._bitmap)===null||P===void 0||P.close(),this._bitmap=void 0,b.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){var P;this._state===0&&((P=this._bitmap)===null||P===void 0||P.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(L=>{this._state===2?this.refresh():this._bitmap=L,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasRenderer=void 0;const d=h(627),f=h(56),g=h(374),v=h(345),S=h(859),A=h(873),w=h(43),m=h(630),b=h(744);class x extends S.Disposable{constructor(O,k,P,L,M,B,j,F,U,V,Q){super(),this._terminal=O,this._screenElement=k,this._bufferService=L,this._charSizeService=M,this._optionsService=B,this._coreBrowserService=U,this._themeService=Q,this._onRequestRedraw=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new v.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new v.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const q=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new b.TextRenderLayer(this._terminal,this._screenElement,0,q,this._bufferService,this._optionsService,j,V,this._coreBrowserService,Q),new m.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,V,this._optionsService,Q),new w.LinkRenderLayer(this._terminal,this._screenElement,2,P,this._bufferService,this._optionsService,V,this._coreBrowserService,Q),new A.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,F,this._coreBrowserService,V,Q)];for(const G of this._renderLayers)(0,v.forwardEvent)(G.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,g.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,f.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(G,te)=>this._setCanvasDevicePixelDimensions(G,te))),this.register((0,S.toDisposable)(()=>{for(const G of this._renderLayers)G.dispose();(0,d.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(O,k){this._updateDimensions();for(const P of this._renderLayers)P.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(O=>O.handleBlur())}handleFocus(){this._runOperation(O=>O.handleFocus())}handleSelectionChanged(O,k,P=!1){this._runOperation(L=>L.handleSelectionChanged(O,k,P)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(O=>O.handleCursorMove())}clear(){this._runOperation(O=>O.reset())}_runOperation(O){for(const k of this._renderLayers)O(k)}renderRows(O,k){for(const P of this._renderLayers)P.handleGridChanged(O,k)}clearTextureAtlas(){for(const O of this._renderLayers)O.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*O),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(O,k){this.dimensions.device.canvas.height=k,this.dimensions.device.canvas.width=O;for(const P of this._renderLayers)P.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}l.CanvasRenderer=x},873:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorRenderLayer=void 0;const d=h(457),f=h(859),g=h(399),v=h(782),S=h(903);class A extends S.BaseRenderLayer{constructor(m,b,x,y,O,k,P,L,M,B){super(m,b,"cursor",x,!0,B,O,k,M,L),this._onRequestRedraw=y,this._coreService=P,this._cursorBlinkStateManager=this.register(new f.MutableDisposable),this._cell=new v.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this),outline:this._renderOutlineCursor.bind(this)},this.register(k.onOptionChange(()=>this._handleOptionsChanged())),this._handleOptionsChanged()}resize(m){super.resize(m),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var m;this._clearCursor(),(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new d.CursorBlinkStateManager(()=>this._render(!0),this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var m;(m=this._cursorBlinkStateManager.value)===null||m===void 0||m.restartBlinkAnimation()}handleGridChanged(m,b){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}_render(m){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const b=this._bufferService.buffer.ybase+this._bufferService.buffer.y,x=b-this._bufferService.buffer.ydisp;if(x<0||x>=this._bufferService.rows)return void this._clearCursor();const y=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(b).loadCell(y,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const O=this._optionsService.rawOptions.cursorStyle,k=this._optionsService.rawOptions.cursorInactiveStyle;return k&&k!=="none"&&this._cursorRenderers[k](y,x,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=x,this._state.isFocused=!1,this._state.style=O,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===y&&this._state.y===x&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](y,x,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=x,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(g.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(m,b,x){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(m,b,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(m,b,x){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(m,b,x.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(x,m,b),this._ctx.restore()}_renderUnderlineCursor(m,b,x){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(m,b),this._ctx.restore()}_renderOutlineCursor(m,b,x){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(m,b,x.getWidth(),1),this._ctx.restore()}}l.CursorRenderLayer=A},574:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GridCache=void 0,l.GridCache=class{constructor(){this.cache=[]}resize(h,d){for(let f=0;f<h;f++){this.cache.length<=f&&this.cache.push([]);for(let g=this.cache[f].length;g<d;g++)this.cache[f].push(void 0);this.cache[f].length=d}this.cache.length=h}clear(){for(let h=0;h<this.cache.length;h++)for(let d=0;d<this.cache[h].length;d++)this.cache[h][d]=void 0}}},43:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;const d=h(197),f=h(237),g=h(903);class v extends g.BaseRenderLayer{constructor(A,w,m,b,x,y,O,k,P){super(A,w,"link",m,!0,P,x,y,O,k),this.register(b.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(b.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(A){super.resize(A),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const A=this._state.y2-this._state.y1-1;A>0&&this._clearCells(0,this._state.y1+1,this._state.cols,A),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(A){if(A.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:A.fg&&(0,d.is256Color)(A.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[A.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,A.y1===A.y2)this._fillBottomLineAtCells(A.x1,A.y1,A.x2-A.x1);else{this._fillBottomLineAtCells(A.x1,A.y1,A.cols-A.x1);for(let w=A.y1+1;w<A.y2;w++)this._fillBottomLineAtCells(0,w,A.cols);this._fillBottomLineAtCells(0,A.y2,A.x2)}this._state=A}_handleHideLinkUnderline(A){this._clearCurrentLink()}}l.LinkRenderLayer=v},630:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionRenderLayer=void 0;const d=h(903);class f extends d.BaseRenderLayer{constructor(v,S,A,w,m,b,x,y){super(v,S,"selection",A,!0,y,w,x,b,m),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(v){super.resize(v),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(v,S,A){super.handleSelectionChanged(v,S,A),this._redrawSelection(v,S,A)}_redrawSelection(v,S,A){if(!this._didStateChange(v,S,A,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!v||!S)return void this._clearState();const w=v[1]-this._bufferService.buffer.ydisp,m=S[1]-this._bufferService.buffer.ydisp,b=Math.max(w,0),x=Math.min(m,this._bufferService.rows-1);if(b>=this._bufferService.rows||x<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,A){const y=v[0],O=S[0]-y,k=x-b+1;this._fillCells(y,b,O,k)}else{const y=w===b?v[0]:0,O=b===m?S[0]:this._bufferService.cols;this._fillCells(y,b,O-y,1);const k=Math.max(x-b-1,0);if(this._fillCells(0,b+1,this._bufferService.cols,k),b!==x){const P=m===x?S[0]:this._bufferService.cols;this._fillCells(0,x,P,1)}}this._state.start=[v[0],v[1]],this._state.end=[S[0],S[1]],this._state.columnSelectMode=A,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(v,S,A,w){return!this._areCoordinatesEqual(v,this._state.start)||!this._areCoordinatesEqual(S,this._state.end)||A!==this._state.columnSelectMode||w!==this._state.ydisp}_areCoordinatesEqual(v,S){return!(!v||!S)&&v[0]===S[0]&&v[1]===S[1]}}l.SelectionRenderLayer=f},744:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextRenderLayer=void 0;const d=h(577),f=h(147),g=h(782),v=h(855),S=h(903),A=h(574);class w extends S.BaseRenderLayer{constructor(b,x,y,O,k,P,L,M,B,j){super(b,x,"text",y,O,j,k,P,M,B),this._characterJoinerService=L,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new g.CellData,this._state=new A.GridCache,this.register(P.onSpecificOptionChange("allowTransparency",F=>this._setTransparency(F)))}resize(b){super.resize(b);const x=this._getFont(!1,!1);this._characterWidth===b.device.char.width&&this._characterFont===x||(this._characterWidth=b.device.char.width,this._characterFont=x,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(b,x,y){for(let O=b;O<=x;O++){const k=O+this._bufferService.buffer.ydisp,P=this._bufferService.buffer.lines.get(k),L=this._characterJoinerService.getJoinedCharacters(k);for(let M=0;M<this._bufferService.cols;M++){P.loadCell(M,this._workCell);let B=this._workCell,j=!1,F=M;if(B.getWidth()!==0){if(L.length>0&&M===L[0][0]){j=!0;const U=L.shift();B=new d.JoinedCellData(this._workCell,P.translateToString(!0,U[0],U[1]),U[1]-U[0]),F=U[1]-1}!j&&this._isOverlapping(B)&&F<P.length-1&&P.getCodePoint(F+1)===v.NULL_CELL_CODE&&(B.content&=-12582913,B.content|=8388608),y(B,M,O),M=F}}}}_drawBackground(b,x){const y=this._ctx,O=this._bufferService.cols;let k=0,P=0,L=null;y.save(),this._forEachCell(b,x,(M,B,j)=>{let F=null;M.isInverse()?F=M.isFgDefault()?this._themeService.colors.foreground.css:M.isFgRGB()?`rgb(${f.AttributeData.toColorRGB(M.getFgColor()).join(",")})`:this._themeService.colors.ansi[M.getFgColor()].css:M.isBgRGB()?F=`rgb(${f.AttributeData.toColorRGB(M.getBgColor()).join(",")})`:M.isBgPalette()&&(F=this._themeService.colors.ansi[M.getBgColor()].css);let U=!1;this._decorationService.forEachDecorationAtCell(B,this._bufferService.buffer.ydisp+j,void 0,V=>{V.options.layer!=="top"&&U||(V.backgroundColorRGB&&(F=V.backgroundColorRGB.css),U=V.options.layer==="top")}),L===null&&(k=B,P=j),j!==P?(y.fillStyle=L||"",this._fillCells(k,P,O-k,1),k=B,P=j):L!==F&&(y.fillStyle=L||"",this._fillCells(k,P,B-k,1),k=B,P=j),L=F}),L!==null&&(y.fillStyle=L,this._fillCells(k,P,O-k,1)),y.restore()}_drawForeground(b,x){this._forEachCell(b,x,(y,O,k)=>this._drawChars(y,O,k))}handleGridChanged(b,x){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,b,this._bufferService.cols,x-b+1),this._drawBackground(b,x),this._drawForeground(b,x))}_isOverlapping(b){if(b.getWidth()!==1||b.getCode()<256)return!1;const x=b.getChars();if(this._characterOverlapCache.hasOwnProperty(x))return this._characterOverlapCache[x];this._ctx.save(),this._ctx.font=this._characterFont;const y=Math.floor(this._ctx.measureText(x).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[x]=y,y}}l.TextRenderLayer=w},274:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellColorResolver=void 0;let h,d=0,f=0,g=!1,v=!1,S=!1;l.CellColorResolver=class{constructor(A,w,m,b,x){this._terminal=A,this._selectionRenderModel=w,this._decorationService=m,this._coreBrowserService=b,this._themeService=x,this.result={fg:0,bg:0,ext:0}}resolve(A,w,m){this.result.bg=A.bg,this.result.fg=A.fg,this.result.ext=268435456&A.bg?A.extended.ext:0,f=0,d=0,v=!1,g=!1,S=!1,h=this._themeService.colors,this._decorationService.forEachDecorationAtCell(w,m,"bottom",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,v=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),S=this._selectionRenderModel.isCellSelected(this._terminal,w,m),S&&(f=(this._coreBrowserService.isFocused?h.selectionBackgroundOpaque:h.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,h.selectionForeground&&(d=h.selectionForeground.rgba>>8&16777215,g=!0)),this._decorationService.forEachDecorationAtCell(w,m,"top",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,v=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),v&&(f=S?-16777216&A.bg&-134217729|f|50331648:-16777216&A.bg|f|50331648),g&&(d=-16777216&A.fg&-67108865|d|50331648),67108864&this.result.fg&&(v&&!g&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&h.background.rgba>>8|50331648,g=!0),!v&&g&&(f=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&h.foreground.rgba>>8|50331648,v=!0)),h=void 0,this.result.bg=v?f:this.result.bg,this.result.fg=g?d:this.result.fg}}},627:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireTextureAtlas=void 0;const d=h(509),f=h(197),g=[];l.acquireTextureAtlas=function(v,S,A,w,m,b,x,y){const O=(0,f.generateConfig)(w,m,b,x,S,A,y);for(let L=0;L<g.length;L++){const M=g[L],B=M.ownedBy.indexOf(v);if(B>=0){if((0,f.configEquals)(M.config,O))return M.atlas;M.ownedBy.length===1?(M.atlas.dispose(),g.splice(L,1)):M.ownedBy.splice(B,1);break}}for(let L=0;L<g.length;L++){const M=g[L];if((0,f.configEquals)(M.config,O))return M.ownedBy.push(v),M.atlas}const k=v._core,P={atlas:new d.TextureAtlas(document,O,k.unicodeService),config:O,ownedBy:[v]};return g.push(P),P.atlas},l.removeTerminalFromCache=function(v){for(let S=0;S<g.length;S++){const A=g[S].ownedBy.indexOf(v);if(A!==-1){g[S].ownedBy.length===1?(g[S].atlas.dispose(),g.splice(S,1)):g[S].ownedBy.splice(A,1);break}}}},197:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;const d=h(160);l.generateConfig=function(f,g,v,S,A,w,m){const b={foreground:w.foreground,background:w.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:w.ansi.slice(),contrastCache:w.contrastCache,halfContrastCache:w.halfContrastCache};return{customGlyphs:A.customGlyphs,devicePixelRatio:m,letterSpacing:A.letterSpacing,lineHeight:A.lineHeight,deviceCellWidth:f,deviceCellHeight:g,deviceCharWidth:v,deviceCharHeight:S,fontFamily:A.fontFamily,fontSize:A.fontSize,fontWeight:A.fontWeight,fontWeightBold:A.fontWeightBold,allowTransparency:A.allowTransparency,drawBoldTextInBrightColors:A.drawBoldTextInBrightColors,minimumContrastRatio:A.minimumContrastRatio,colors:b}},l.configEquals=function(f,g){for(let v=0;v<f.colors.ansi.length;v++)if(f.colors.ansi[v].rgba!==g.colors.ansi[v].rgba)return!1;return f.devicePixelRatio===g.devicePixelRatio&&f.customGlyphs===g.customGlyphs&&f.lineHeight===g.lineHeight&&f.letterSpacing===g.letterSpacing&&f.fontFamily===g.fontFamily&&f.fontSize===g.fontSize&&f.fontWeight===g.fontWeight&&f.fontWeightBold===g.fontWeightBold&&f.allowTransparency===g.allowTransparency&&f.deviceCharWidth===g.deviceCharWidth&&f.deviceCharHeight===g.deviceCharHeight&&f.drawBoldTextInBrightColors===g.drawBoldTextInBrightColors&&f.minimumContrastRatio===g.minimumContrastRatio&&f.colors.foreground.rgba===g.colors.foreground.rgba&&f.colors.background.rgba===g.colors.background.rgba},l.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(399);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorBlinkStateManager=void 0,l.CursorBlinkStateManager=class{constructor(h,d){this._renderCallback=h,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(h=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},h)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tryDrawCustomChar=l.powerlineDefinitions=l.boxDrawingDefinitions=l.blockElementDefinitions=void 0;const d=h(374);l.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const f={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};l.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"║":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╒":{1:(w,m)=>`M.5,1 L.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╓":{1:(w,m)=>`M${.5-w},1 L${.5-w},.5 L1,.5 M${.5+w},.5 L${.5+w},1`},"╔":{1:(w,m)=>`M1,${.5-m} L${.5-w},${.5-m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╕":{1:(w,m)=>`M0,${.5-m} L.5,${.5-m} L.5,1 M0,${.5+m} L.5,${.5+m}`},"╖":{1:(w,m)=>`M${.5+w},1 L${.5+w},.5 L0,.5 M${.5-w},.5 L${.5-w},1`},"╗":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5+w},${.5-m} L${.5+w},1`},"╘":{1:(w,m)=>`M.5,0 L.5,${.5+m} L1,${.5+m} M.5,${.5-m} L1,${.5-m}`},"╙":{1:(w,m)=>`M1,.5 L${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╚":{1:(w,m)=>`M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0 M1,${.5+m} L${.5-w},${.5+m} L${.5-w},0`},"╛":{1:(w,m)=>`M0,${.5+m} L.5,${.5+m} L.5,0 M0,${.5-m} L.5,${.5-m}`},"╜":{1:(w,m)=>`M0,.5 L${.5+w},.5 L${.5+w},0 M${.5-w},.5 L${.5-w},0`},"╝":{1:(w,m)=>`M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M0,${.5+m} L${.5+w},${.5+m} L${.5+w},0`},"╞":{1:(w,m)=>`M.5,0 L.5,1 M.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╟":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1 M${.5+w},.5 L1,.5`},"╠":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╡":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L.5,${.5-m} M0,${.5+m} L.5,${.5+m}`},"╢":{1:(w,m)=>`M0,.5 L${.5-w},.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╣":{1:(w,m)=>`M${.5+w},0 L${.5+w},1 M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0`},"╤":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m} M.5,${.5+m} L.5,1`},"╥":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},1 M${.5+w},.5 L${.5+w},1`},"╦":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╧":{1:(w,m)=>`M.5,0 L.5,${.5-m} M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╨":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╩":{1:(w,m)=>`M0,${.5+m} L1,${.5+m} M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╪":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╫":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╬":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,1,.5`},"╮":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,0,.5`},"╯":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,0,.5`},"╰":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,1,.5`}},l.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.tryDrawCustomChar=function(w,m,b,x,y,O,k,P){const L=l.blockElementDefinitions[m];if(L)return function(F,U,V,Q,q,G){for(let te=0;te<U.length;te++){const Y=U[te],J=q/8,K=G/8;F.fillRect(V+Y.x*J,Q+Y.y*K,Y.w*J,Y.h*K)}}(w,L,b,x,y,O),!0;const M=f[m];if(M)return function(F,U,V,Q,q,G){let te=g.get(U);te||(te=new Map,g.set(U,te));const Y=F.fillStyle;if(typeof Y!="string")throw new Error(`Unexpected fillStyle type "${Y}"`);let J=te.get(Y);if(!J){const K=U[0].length,ne=U.length,de=document.createElement("canvas");de.width=K,de.height=ne;const Re=(0,d.throwIfFalsy)(de.getContext("2d")),Te=new ImageData(K,ne);let Me,Ie,ce,pe;if(Y.startsWith("#"))Me=parseInt(Y.slice(1,3),16),Ie=parseInt(Y.slice(3,5),16),ce=parseInt(Y.slice(5,7),16),pe=Y.length>7&&parseInt(Y.slice(7,9),16)||1;else{if(!Y.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${Y}" when drawing pattern glyph`);[Me,Ie,ce,pe]=Y.substring(5,Y.length-1).split(",").map(me=>parseFloat(me))}for(let me=0;me<ne;me++)for(let we=0;we<K;we++)Te.data[4*(me*K+we)]=Me,Te.data[4*(me*K+we)+1]=Ie,Te.data[4*(me*K+we)+2]=ce,Te.data[4*(me*K+we)+3]=U[me][we]*(255*pe);Re.putImageData(Te,0,0),J=(0,d.throwIfFalsy)(F.createPattern(de,null)),te.set(Y,J)}F.fillStyle=J,F.fillRect(V,Q,q,G)}(w,M,b,x,y,O),!0;const B=l.boxDrawingDefinitions[m];if(B)return function(F,U,V,Q,q,G,te){F.strokeStyle=F.fillStyle;for(const[Y,J]of Object.entries(U)){let K;F.beginPath(),F.lineWidth=te*Number.parseInt(Y),K=typeof J=="function"?J(.15,.15/G*q):J;for(const ne of K.split(" ")){const de=ne[0],Re=S[de];if(!Re){console.error(`Could not find drawing instructions for "${de}"`);continue}const Te=ne.substring(1).split(",");Te[0]&&Te[1]&&Re(F,A(Te,q,G,V,Q,!0,te))}F.stroke(),F.closePath()}}(w,B,b,x,y,O,P),!0;const j=l.powerlineDefinitions[m];return!!j&&(function(F,U,V,Q,q,G,te,Y){var J,K;const ne=new Path2D;ne.rect(V,Q,q,G),F.clip(ne),F.beginPath();const de=te/12;F.lineWidth=Y*de;for(const Re of U.d.split(" ")){const Te=Re[0],Me=S[Te];if(!Me){console.error(`Could not find drawing instructions for "${Te}"`);continue}const Ie=Re.substring(1).split(",");Ie[0]&&Ie[1]&&Me(F,A(Ie,q,G,V,Q,!1,Y,((J=U.leftPadding)!==null&&J!==void 0?J:0)*(de/2),((K=U.rightPadding)!==null&&K!==void 0?K:0)*(de/2)))}U.type===1?(F.strokeStyle=F.fillStyle,F.stroke()):F.fill(),F.closePath()}(w,j,b,x,y,O,k,P),!0)};const g=new Map;function v(w,m,b=0){return Math.max(Math.min(w,m),b)}const S={C:(w,m)=>w.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]),L:(w,m)=>w.lineTo(m[0],m[1]),M:(w,m)=>w.moveTo(m[0],m[1])};function A(w,m,b,x,y,O,k,P=0,L=0){const M=w.map(B=>parseFloat(B)||parseInt(B));if(M.length<2)throw new Error("Too few arguments for instruction");for(let B=0;B<M.length;B+=2)M[B]*=m-P*k-L*k,O&&M[B]!==0&&(M[B]=v(Math.round(M[B]+.5)-.5,m,0)),M[B]+=x+P*k;for(let B=1;B<M.length;B+=2)M[B]*=b,O&&M[B]!==0&&(M[B]=v(Math.round(M[B]+.5)-.5,b,0)),M[B]+=y;return M}},56:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.observeDevicePixelDimensions=void 0;const d=h(859);l.observeDevicePixelDimensions=function(f,g,v){let S=new g.ResizeObserver(A=>{const w=A.find(x=>x.target===f);if(!w)return;if(!("devicePixelContentBoxSize"in w))return S?.disconnect(),void(S=void 0);const m=w.devicePixelContentBoxSize[0].inlineSize,b=w.devicePixelContentBoxSize[0].blockSize;m>0&&b>0&&v(m,b)});try{S.observe(f,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,d.toDisposable)(()=>S?.disconnect())}},374:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class h{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,g,v,S=!1){if(this.selectionStart=g,this.selectionEnd=v,!g||!v||g[0]===v[0]&&g[1]===v[1])return void this.clear();const A=g[1]-f.buffer.active.viewportY,w=v[1]-f.buffer.active.viewportY,m=Math.max(A,0),b=Math.min(w,f.rows-1);m>=f.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=A,this.viewportEndRow=w,this.viewportCappedStartRow=m,this.viewportCappedEndRow=b,this.startCol=g[0],this.endCol=v[0])}isCellSelected(f,g,v){return!!this.hasSelection&&(v-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?g>=this.startCol&&v>=this.viewportCappedStartRow&&g<this.endCol&&v<=this.viewportCappedEndRow:g<this.startCol&&v>=this.viewportCappedStartRow&&g>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&g>=this.startCol&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&g>=this.startCol)}}l.createSelectionRenderModel=function(){return new h}},509:function(c,l,h){var d=this&&this.__decorate||function(j,F,U,V){var Q,q=arguments.length,G=q<3?F:V===null?V=Object.getOwnPropertyDescriptor(F,U):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(j,F,U,V);else for(var te=j.length-1;te>=0;te--)(Q=j[te])&&(G=(q<3?Q(G):q>3?Q(F,U,G):Q(F,U))||G);return q>3&&G&&Object.defineProperty(F,U,G),G};Object.defineProperty(l,"__esModule",{value:!0}),l.TextureAtlas=void 0;const f=h(237),g=h(860),v=h(374),S=h(160),A=h(345),w=h(485),m=h(385),b=h(147),x=h(855),y=h(776),O={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let k;class P{get pages(){return this._pages}constructor(F,U,V){this._document=F,this._config=U,this._unicodeService=V,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new A.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new A.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=B(F,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const F of this.pages)F.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const F=new m.IdleTaskQueue;for(let U=33;U<126;U++)F.enqueue(()=>{if(!this._cacheMap.get(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT)){const V=this._drawToCache(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT);this._cacheMap.set(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT,V)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const F of this._pages)F.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(P.maxAtlasPages&&this._pages.length>=Math.max(4,P.maxAtlasPages)){const U=this._pages.filter(J=>2*J.canvas.width<=(P.maxTextureSize||4096)).sort((J,K)=>K.canvas.width!==J.canvas.width?K.canvas.width-J.canvas.width:K.percentageUsed-J.percentageUsed);let V=-1,Q=0;for(let J=0;J<U.length;J++)if(U[J].canvas.width!==Q)V=J,Q=U[J].canvas.width;else if(J-V==3)break;const q=U.slice(V,V+4),G=q.map(J=>J.glyphs[0].texturePage).sort((J,K)=>J>K?1:-1),te=this.pages.length-q.length,Y=this._mergePages(q,te);Y.version++;for(let J=G.length-1;J>=0;J--)this._deletePage(G[J]);this.pages.push(Y),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(Y.canvas)}const F=new L(this._document,this._textureSize);return this._pages.push(F),this._activePages.push(F),this._onAddTextureAtlasCanvas.fire(F.canvas),F}_mergePages(F,U){const V=2*F[0].canvas.width,Q=new L(this._document,V,F);for(const[q,G]of F.entries()){const te=q*G.canvas.width%V,Y=Math.floor(q/2)*G.canvas.height;Q.ctx.drawImage(G.canvas,te,Y);for(const K of G.glyphs)K.texturePage=U,K.sizeClipSpace.x=K.size.x/V,K.sizeClipSpace.y=K.size.y/V,K.texturePosition.x+=te,K.texturePosition.y+=Y,K.texturePositionClipSpace.x=K.texturePosition.x/V,K.texturePositionClipSpace.y=K.texturePosition.y/V;this._onRemoveTextureAtlasCanvas.fire(G.canvas);const J=this._activePages.indexOf(G);J!==-1&&this._activePages.splice(J,1)}return Q}_deletePage(F){this._pages.splice(F,1);for(let U=F;U<this._pages.length;U++){const V=this._pages[U];for(const Q of V.glyphs)Q.texturePage--;V.version++}}getRasterizedGlyphCombinedChar(F,U,V,Q,q){return this._getFromCacheMap(this._cacheMapCombined,F,U,V,Q,q)}getRasterizedGlyph(F,U,V,Q,q){return this._getFromCacheMap(this._cacheMap,F,U,V,Q,q)}_getFromCacheMap(F,U,V,Q,q,G=!1){return k=F.get(U,V,Q,q),k||(k=this._drawToCache(U,V,Q,q,G),F.set(U,V,Q,q,k)),k}_getColorFromAnsiIndex(F){if(F>=this._config.colors.ansi.length)throw new Error("No color found for idx "+F);return this._config.colors.ansi[F]}_getBackgroundColor(F,U,V,Q){if(this._config.allowTransparency)return S.NULL_COLOR;let q;switch(F){case 16777216:case 33554432:q=this._getColorFromAnsiIndex(U);break;case 50331648:const G=b.AttributeData.toColorRGB(U);q=S.rgba.toColor(G[0],G[1],G[2]);break;default:q=V?S.color.opaque(this._config.colors.foreground):this._config.colors.background}return q}_getForegroundColor(F,U,V,Q,q,G,te,Y,J,K){const ne=this._getMinimumContrastColor(F,U,V,Q,q,G,!1,J,Y,K);if(ne)return ne;let de;switch(q){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&J&&G<8&&(G+=8),de=this._getColorFromAnsiIndex(G);break;case 50331648:const Re=b.AttributeData.toColorRGB(G);de=S.rgba.toColor(Re[0],Re[1],Re[2]);break;default:de=te?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(de=S.color.opaque(de)),Y&&(de=S.color.multiplyOpacity(de,f.DIM_OPACITY)),de}_resolveBackgroundRgba(F,U,V){switch(F){case 16777216:case 33554432:return this._getColorFromAnsiIndex(U).rgba;case 50331648:return U<<8;default:return V?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(F,U,V,Q){switch(F){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&Q&&U<8&&(U+=8),this._getColorFromAnsiIndex(U).rgba;case 50331648:return U<<8;default:return V?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(F,U,V,Q,q,G,te,Y,J,K){if(this._config.minimumContrastRatio===1||K)return;const ne=this._getContrastCache(J),de=ne.getColor(F,Q);if(de!==void 0)return de||void 0;const Re=this._resolveBackgroundRgba(U,V,te),Te=this._resolveForegroundRgba(q,G,te,Y),Me=S.rgba.ensureContrastRatio(Re,Te,this._config.minimumContrastRatio/(J?2:1));if(!Me)return void ne.setColor(F,Q,null);const Ie=S.rgba.toColor(Me>>24&255,Me>>16&255,Me>>8&255);return ne.setColor(F,Q,Ie),Ie}_getContrastCache(F){return F?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(F,U,V,Q,q=!1){const G=typeof F=="number"?String.fromCharCode(F):F,te=Math.min(this._config.deviceCellWidth*Math.max(G.length,2)+4,this._textureSize);this._tmpCanvas.width<te&&(this._tmpCanvas.width=te);const Y=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<Y&&(this._tmpCanvas.height=Y),this._tmpCtx.save(),this._workAttributeData.fg=V,this._workAttributeData.bg=U,this._workAttributeData.extended.ext=Q,this._workAttributeData.isInvisible())return O;const J=!!this._workAttributeData.isBold(),K=!!this._workAttributeData.isInverse(),ne=!!this._workAttributeData.isDim(),de=!!this._workAttributeData.isItalic(),Re=!!this._workAttributeData.isUnderline(),Te=!!this._workAttributeData.isStrikethrough(),Me=!!this._workAttributeData.isOverline();let Ie=this._workAttributeData.getFgColor(),ce=this._workAttributeData.getFgColorMode(),pe=this._workAttributeData.getBgColor(),me=this._workAttributeData.getBgColorMode();if(K){const Ue=Ie;Ie=pe,pe=Ue;const Ge=ce;ce=me,me=Ge}const we=this._getBackgroundColor(me,pe,K,ne);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=we.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Xe=J?this._config.fontWeightBold:this._config.fontWeight,Qe=de?"italic":"";this._tmpCtx.font=`${Qe} ${Xe} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Pe=G.length===1&&(0,v.isPowerlineGlyph)(G.charCodeAt(0)),Ze=G.length===1&&(0,v.isRestrictedPowerlineGlyph)(G.charCodeAt(0)),_e=this._getForegroundColor(U,me,pe,V,ce,Ie,K,ne,J,(0,v.excludeFromContrastRatioDemands)(G.charCodeAt(0)));this._tmpCtx.fillStyle=_e.css;const qe=Ze?0:4;let Be=!1;this._config.customGlyphs!==!1&&(Be=(0,g.tryDrawCustomChar)(this._tmpCtx,G,qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let mt,ht=!Pe;if(mt=typeof F=="number"?this._unicodeService.wcwidth(F):this._unicodeService.getStringCellWidth(F),Re){this._tmpCtx.save();const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ge=Ue%2==1?.5:0;if(this._tmpCtx.lineWidth=Ue,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ht=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ht=!1;let Pt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Pt<8&&(Pt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Pt).css}this._tmpCtx.beginPath();const ut=qe,at=Math.ceil(qe+this._config.deviceCharHeight)-Ge-(q?2*Ue:0),Ut=at+Ue,Zt=at+2*Ue;for(let Pt=0;Pt<mt;Pt++){this._tmpCtx.save();const Ot=ut+Pt*this._config.deviceCellWidth,vt=ut+(Pt+1)*this._config.deviceCellWidth,Ve=Ot+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at),this._tmpCtx.moveTo(Ot,Zt),this._tmpCtx.lineTo(vt,Zt);break;case 3:const pt=Ue<=1?Zt:Math.ceil(qe+this._config.deviceCharHeight-Ue/2)-Ge,wt=Ue<=1?at:Math.ceil(qe+this._config.deviceCharHeight+Ue/2)-Ge,Ct=new Path2D;Ct.rect(Ot,at,this._config.deviceCellWidth,Zt-at),this._tmpCtx.clip(Ct),this._tmpCtx.moveTo(Ot-this._config.deviceCellWidth/2,Ut),this._tmpCtx.bezierCurveTo(Ot-this._config.deviceCellWidth/2,wt,Ot,wt,Ot,Ut),this._tmpCtx.bezierCurveTo(Ot,pt,Ve,pt,Ve,Ut),this._tmpCtx.bezierCurveTo(Ve,wt,vt,wt,vt,Ut),this._tmpCtx.bezierCurveTo(vt,pt,vt+this._config.deviceCellWidth/2,pt,vt+this._config.deviceCellWidth/2,Ut);break;case 4:this._tmpCtx.setLineDash([Math.round(Ue),Math.round(Ue)]),this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at);break;default:this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Be&&this._config.fontSize>=12&&!this._config.allowTransparency&&G!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Pt=this._tmpCtx.measureText(G);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Pt&&Pt.actualBoundingBoxDescent>0){this._tmpCtx.save();const Ot=new Path2D;Ot.rect(ut,at-Math.ceil(Ue/2),this._config.deviceCellWidth*mt,Zt-at+Math.ceil(Ue/2)),this._tmpCtx.clip(Ot),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=we.css,this._tmpCtx.strokeText(G,qe,qe+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(Me){const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ge=Ue%2==1?.5:0;this._tmpCtx.lineWidth=Ue,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(qe,qe+Ge),this._tmpCtx.lineTo(qe+this._config.deviceCharWidth*mt,qe+Ge),this._tmpCtx.stroke()}if(Be||this._tmpCtx.fillText(G,qe,qe+this._config.deviceCharHeight),G==="_"&&!this._config.allowTransparency){let Ue=M(this._tmpCtx.getImageData(qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight),we,_e,ht);if(Ue)for(let Ge=1;Ge<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=we.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(G,qe,qe+this._config.deviceCharHeight-Ge),Ue=M(this._tmpCtx.getImageData(qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight),we,_e,ht),Ue);Ge++);}if(Te){const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Ge=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Ue,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(qe,qe+Math.floor(this._config.deviceCharHeight/2)-Ge),this._tmpCtx.lineTo(qe+this._config.deviceCharWidth*mt,qe+Math.floor(this._config.deviceCharHeight/2)-Ge),this._tmpCtx.stroke()}this._tmpCtx.restore();const Dt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Se;if(Se=this._config.allowTransparency?function(Ue){for(let Ge=0;Ge<Ue.data.length;Ge+=4)if(Ue.data[Ge+3]>0)return!1;return!0}(Dt):M(Dt,we,_e,ht),Se)return O;const Ye=this._findGlyphBoundingBox(Dt,this._workBoundingBox,te,Ze,Be,qe);let Le,ze;for(;;){if(this._activePages.length===0){const Ue=this._createNewPage();Le=Ue,ze=Ue.currentRow,ze.height=Ye.size.y;break}Le=this._activePages[this._activePages.length-1],ze=Le.currentRow;for(const Ue of this._activePages)Ye.size.y<=Ue.currentRow.height&&(Le=Ue,ze=Ue.currentRow);for(let Ue=this._activePages.length-1;Ue>=0;Ue--)for(const Ge of this._activePages[Ue].fixedRows)Ge.height<=ze.height&&Ye.size.y<=Ge.height&&(Le=this._activePages[Ue],ze=Ge);if(ze.y+Ye.size.y>=Le.canvas.height||ze.height>Ye.size.y+2){let Ue=!1;if(Le.currentRow.y+Le.currentRow.height+Ye.size.y>=Le.canvas.height){let Ge;for(const ut of this._activePages)if(ut.currentRow.y+ut.currentRow.height+Ye.size.y<ut.canvas.height){Ge=ut;break}if(Ge)Le=Ge;else if(P.maxAtlasPages&&this._pages.length>=P.maxAtlasPages&&ze.y+Ye.size.y<=Le.canvas.height&&ze.height>=Ye.size.y&&ze.x+Ye.size.x<=Le.canvas.width)Ue=!0;else{const ut=this._createNewPage();Le=ut,ze=ut.currentRow,ze.height=Ye.size.y,Ue=!0}}Ue||(Le.currentRow.height>0&&Le.fixedRows.push(Le.currentRow),ze={x:0,y:Le.currentRow.y+Le.currentRow.height,height:Ye.size.y},Le.fixedRows.push(ze),Le.currentRow={x:0,y:ze.y+ze.height,height:0})}if(ze.x+Ye.size.x<=Le.canvas.width)break;ze===Le.currentRow?(ze.x=0,ze.y+=ze.height,ze.height=0):Le.fixedRows.splice(Le.fixedRows.indexOf(ze),1)}return Ye.texturePage=this._pages.indexOf(Le),Ye.texturePosition.x=ze.x,Ye.texturePosition.y=ze.y,Ye.texturePositionClipSpace.x=ze.x/Le.canvas.width,Ye.texturePositionClipSpace.y=ze.y/Le.canvas.height,Ye.sizeClipSpace.x/=Le.canvas.width,Ye.sizeClipSpace.y/=Le.canvas.height,ze.height=Math.max(ze.height,Ye.size.y),ze.x+=Ye.size.x,Le.ctx.putImageData(Dt,Ye.texturePosition.x-this._workBoundingBox.left,Ye.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Ye.size.x,Ye.size.y),Le.addGlyph(Ye),Le.version++,Ye}_findGlyphBoundingBox(F,U,V,Q,q,G){U.top=0;const te=Q?this._config.deviceCellHeight:this._tmpCanvas.height,Y=Q?this._config.deviceCellWidth:V;let J=!1;for(let K=0;K<te;K++){for(let ne=0;ne<Y;ne++){const de=K*this._tmpCanvas.width*4+4*ne+3;if(F.data[de]!==0){U.top=K,J=!0;break}}if(J)break}U.left=0,J=!1;for(let K=0;K<G+Y;K++){for(let ne=0;ne<te;ne++){const de=ne*this._tmpCanvas.width*4+4*K+3;if(F.data[de]!==0){U.left=K,J=!0;break}}if(J)break}U.right=Y,J=!1;for(let K=G+Y-1;K>=G;K--){for(let ne=0;ne<te;ne++){const de=ne*this._tmpCanvas.width*4+4*K+3;if(F.data[de]!==0){U.right=K,J=!0;break}}if(J)break}U.bottom=te,J=!1;for(let K=te-1;K>=0;K--){for(let ne=0;ne<Y;ne++){const de=K*this._tmpCanvas.width*4+4*ne+3;if(F.data[de]!==0){U.bottom=K,J=!0;break}}if(J)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:U.right-U.left+1,y:U.bottom-U.top+1},sizeClipSpace:{x:U.right-U.left+1,y:U.bottom-U.top+1},offset:{x:-U.left+G+(Q||q?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-U.top+G+(Q||q?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}l.TextureAtlas=P,d([y.traceCall],P.prototype,"_drawToCache",null);class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(F){this._glyphs.push(F),this._usedPixels+=F.size.x*F.size.y}constructor(F,U,V){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],V)for(const Q of V)this._glyphs.push(...Q.glyphs),this._usedPixels+=Q._usedPixels;this.canvas=B(F,U,U),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function M(j,F,U,V){const Q=F.rgba>>>24,q=F.rgba>>>16&255,G=F.rgba>>>8&255,te=U.rgba>>>24,Y=U.rgba>>>16&255,J=U.rgba>>>8&255,K=Math.floor((Math.abs(Q-te)+Math.abs(q-Y)+Math.abs(G-J))/12);let ne=!0;for(let de=0;de<j.data.length;de+=4)j.data[de]===Q&&j.data[de+1]===q&&j.data[de+2]===G||V&&Math.abs(j.data[de]-Q)+Math.abs(j.data[de+1]-q)+Math.abs(j.data[de+2]-G)<K?j.data[de+3]=0:ne=!1;return ne}function B(j,F,U){const V=j.createElement("canvas");return V.width=F,V.height=U,V}},577:function(c,l,h){var d=this&&this.__decorate||function(b,x,y,O){var k,P=arguments.length,L=P<3?x:O===null?O=Object.getOwnPropertyDescriptor(x,y):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,x,y,O);else for(var M=b.length-1;M>=0;M--)(k=b[M])&&(L=(P<3?k(L):P>3?k(x,y,L):k(x,y))||L);return P>3&&L&&Object.defineProperty(x,y,L),L},f=this&&this.__param||function(b,x){return function(y,O){x(y,O,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const g=h(147),v=h(855),S=h(782),A=h(97);class w extends g.AttributeData{constructor(x,y,O){super(),this.content=0,this.combinedData="",this.fg=x.fg,this.bg=x.bg,this.combinedData=y,this._width=O}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(x){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=w;let m=l.CharacterJoinerService=class _i{constructor(x){this._bufferService=x,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(x){const y={id:this._nextCharacterJoinerId++,handler:x};return this._characterJoiners.push(y),y.id}deregister(x){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===x)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(x){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(x);if(!y||y.length===0)return[];const O=[],k=y.translateToString(!0);let P=0,L=0,M=0,B=y.getFg(0),j=y.getBg(0);for(let F=0;F<y.getTrimmedLength();F++)if(y.loadCell(F,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==B||this._workCell.bg!==j){if(F-P>1){const U=this._getJoinedRanges(k,M,L,y,P);for(let V=0;V<U.length;V++)O.push(U[V])}P=F,M=L,B=this._workCell.fg,j=this._workCell.bg}L+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-P>1){const F=this._getJoinedRanges(k,M,L,y,P);for(let U=0;U<F.length;U++)O.push(F[U])}return O}_getJoinedRanges(x,y,O,k,P){const L=x.substring(y,O);let M=[];try{M=this._characterJoiners[0].handler(L)}catch(B){console.error(B)}for(let B=1;B<this._characterJoiners.length;B++)try{const j=this._characterJoiners[B].handler(L);for(let F=0;F<j.length;F++)_i._mergeRanges(M,j[F])}catch(j){console.error(j)}return this._stringRangesToCellRanges(M,k,P),M}_stringRangesToCellRanges(x,y,O){let k=0,P=!1,L=0,M=x[k];if(M){for(let B=O;B<this._bufferService.cols;B++){const j=y.getWidth(B),F=y.getString(B).length||v.WHITESPACE_CELL_CHAR.length;if(j!==0){if(!P&&M[0]<=L&&(M[0]=B,P=!0),M[1]<=L){if(M[1]=B,M=x[++k],!M)break;M[0]<=L?(M[0]=B,P=!0):P=!1}L+=F}}M&&(M[1]=this._bufferService.cols)}}static _mergeRanges(x,y){let O=!1;for(let k=0;k<x.length;k++){const P=x[k];if(O){if(y[1]<=P[0])return x[k-1][1]=y[1],x;if(y[1]<=P[1])return x[k-1][1]=Math.max(y[1],P[1]),x.splice(k,1),x;x.splice(k,1),k--}else{if(y[1]<=P[0])return x.splice(k,0,y),x;if(y[1]<=P[1])return P[0]=Math.min(y[0],P[0]),x;y[0]<P[1]&&(P[0]=Math.min(y[0],P[0]),O=!0)}}return O?x[x.length-1][1]=y[1]:x.push(y),x}};l.CharacterJoinerService=m=d([f(0,A.IBufferService)],m)},160:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(399);let f=0,g=0,v=0,S=0;var A,w,m,b,x;function y(k){const P=k.toString(16);return P.length<2?"0"+P:P}function O(k,P){return k<P?(P+.05)/(k+.05):(k+.05)/(P+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(k){k.toCss=function(P,L,M,B){return B!==void 0?`#${y(P)}${y(L)}${y(M)}${y(B)}`:`#${y(P)}${y(L)}${y(M)}`},k.toRgba=function(P,L,M,B=255){return(P<<24|L<<16|M<<8|B)>>>0}}(A||(l.channels=A={})),function(k){function P(L,M){return S=Math.round(255*M),[f,g,v]=x.toChannels(L.rgba),{css:A.toCss(f,g,v,S),rgba:A.toRgba(f,g,v,S)}}k.blend=function(L,M){if(S=(255&M.rgba)/255,S===1)return{css:M.css,rgba:M.rgba};const B=M.rgba>>24&255,j=M.rgba>>16&255,F=M.rgba>>8&255,U=L.rgba>>24&255,V=L.rgba>>16&255,Q=L.rgba>>8&255;return f=U+Math.round((B-U)*S),g=V+Math.round((j-V)*S),v=Q+Math.round((F-Q)*S),{css:A.toCss(f,g,v),rgba:A.toRgba(f,g,v)}},k.isOpaque=function(L){return(255&L.rgba)==255},k.ensureContrastRatio=function(L,M,B){const j=x.ensureContrastRatio(L.rgba,M.rgba,B);if(j)return x.toColor(j>>24&255,j>>16&255,j>>8&255)},k.opaque=function(L){const M=(255|L.rgba)>>>0;return[f,g,v]=x.toChannels(M),{css:A.toCss(f,g,v),rgba:M}},k.opacity=P,k.multiplyOpacity=function(L,M){return S=255&L.rgba,P(L,S*M/255)},k.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(k){let P,L;if(!d.isNode){const M=document.createElement("canvas");M.width=1,M.height=1;const B=M.getContext("2d",{willReadFrequently:!0});B&&(P=B,P.globalCompositeOperation="copy",L=P.createLinearGradient(0,0,1,1))}k.toColor=function(M){if(M.match(/#[\da-f]{3,8}/i))switch(M.length){case 4:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),x.toColor(f,g,v);case 5:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),S=parseInt(M.slice(4,5).repeat(2),16),x.toColor(f,g,v,S);case 7:return{css:M,rgba:(parseInt(M.slice(1),16)<<8|255)>>>0};case 9:return{css:M,rgba:parseInt(M.slice(1),16)>>>0}}const B=M.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(B)return f=parseInt(B[1]),g=parseInt(B[2]),v=parseInt(B[3]),S=Math.round(255*(B[5]===void 0?1:parseFloat(B[5]))),x.toColor(f,g,v,S);if(!P||!L)throw new Error("css.toColor: Unsupported css format");if(P.fillStyle=L,P.fillStyle=M,typeof P.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(P.fillRect(0,0,1,1),[f,g,v,S]=P.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,v,S),css:M}}}(m||(l.css=m={})),function(k){function P(L,M,B){const j=L/255,F=M/255,U=B/255;return .2126*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.7152*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))}k.relativeLuminance=function(L){return P(L>>16&255,L>>8&255,255&L)},k.relativeLuminance2=P}(b||(l.rgb=b={})),function(k){function P(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q>0||q>0||G>0);)Q-=Math.max(0,Math.ceil(.1*Q)),q-=Math.max(0,Math.ceil(.1*q)),G-=Math.max(0,Math.ceil(.1*G)),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}function L(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q<255||q<255||G<255);)Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),q=Math.min(255,q+Math.ceil(.1*(255-q))),G=Math.min(255,G+Math.ceil(.1*(255-G))),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}k.ensureContrastRatio=function(M,B,j){const F=b.relativeLuminance(M>>8),U=b.relativeLuminance(B>>8);if(O(F,U)<j){if(U<F){const q=P(M,B,j),G=O(F,b.relativeLuminance(q>>8));if(G<j){const te=L(M,B,j);return G>O(F,b.relativeLuminance(te>>8))?q:te}return q}const V=L(M,B,j),Q=O(F,b.relativeLuminance(V>>8));if(Q<j){const q=P(M,B,j);return Q>O(F,b.relativeLuminance(q>>8))?V:q}return V}},k.reduceLuminance=P,k.increaseLuminance=L,k.toChannels=function(M){return[M>>24&255,M>>16&255,M>>8&255,255&M]},k.toColor=function(M,B,j,F){return{css:A.toCss(M,B,j,F),rgba:A.toRgba(M,B,j,F)}}}(x||(l.rgba=x={})),l.toPaddedHex=y,l.contrastRatio=O},345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},485:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,v){this._data[f]||(this._data[f]={}),this._data[f][g]=v}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,v,S){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,v,S)}get(d,f,g,v){var S;return(S=this._data.get(d,f))===null||S===void 0?void 0:S.get(g,v)}clear(){this._data.clear()}}},399:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},385:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let A=0,w=0,m=S.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=S.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const A=Date.now()+S;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,v=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=v}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},782:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(133),f=h(855),g=h(147);class v extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new v;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=v},855:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},133:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let v=d;v<f;++v){let S=h[v];S>65535?(S-=65536,g+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):g+=String.fromCharCode(S)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,v=0;if(this._interim){const S=h.charCodeAt(v++);56320<=S&&S<=57343?d[g++]=1024*(this._interim-55296)+S-56320+65536:(d[g++]=this._interim,d[g++]=S),this._interim=0}for(let S=v;S<f;++S){const A=h.charCodeAt(S);if(55296<=A&&A<=56319){if(++S>=f)return this._interim=A,g;const w=h.charCodeAt(S);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,v,S,A,w=0,m=0,b=0;if(this.interim[0]){let O=!1,k=this.interim[0];k&=(224&k)==192?31:(240&k)==224?15:7;let P,L=0;for(;(P=63&this.interim[++L])&&L<4;)k<<=6,k|=P;const M=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=M-L;for(;b<B;){if(b>=f)return 0;if(P=h[b++],(192&P)!=128){b--,O=!0;break}this.interim[L++]=P,k<<=6,k|=63&P}O||(M===2?k<128?b--:d[w++]=k:M===3?k<2048||k>=55296&&k<=57343||k===65279||(d[w++]=k):k<65536||k>1114111||(d[w++]=k)),this.interim.fill(0)}const x=f-4;let y=b;for(;y<f;){for(;!(!(y<x)||128&(g=h[y])||128&(v=h[y+1])||128&(S=h[y+2])||128&(A=h[y+3]));)d[w++]=g,d[w++]=v,d[w++]=S,d[w++]=A,y+=4;if(g=h[y++],g<128)d[w++]=g;else if((224&g)==192){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(m=(31&g)<<6|63&v,m<128){y--;continue}d[w++]=m}else if((240&g)==224){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(m=(15&g)<<12|(63&v)<<6|63&S,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,this.interim[2]=S,w;if(A=h[y++],(192&A)!=128){y--;continue}if(m=(7&g)<<18|(63&v)<<12|(63&S)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},776:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(859),v=h(97),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,x){this._evalLazyOptionalParams(x),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...x)}trace(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.trace.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}debug(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.debug.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}info(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.INFO&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.info.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.info,m,b)}warn(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.WARN&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.warn.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.warn,m,b)}error(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.error.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.error,m,b)}};l.LogService=w=d([f(0,v.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,x){if(typeof x.value!="function")throw new Error("not supported");const y=x.value;x.value=function(...O){if(A.logLevel!==v.LogLevelEnum.TRACE)return y.apply(this,O);A.trace(`GlyphRenderer#${y.name}(${O.map(P=>JSON.stringify(P)).join(", ")})`);const k=y.apply(this,O);return A.trace(`GlyphRenderer#${y.name} return`,k),k}}},726:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(v,S,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,v,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},97:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(726);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasAddon=void 0;const l=o(345),h=o(859),d=o(776),f=o(949);class g extends h.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var S;return(S=this._renderer)===null||S===void 0?void 0:S.textureAtlas}activate(S){const A=S._core;if(!S.element)return void this.register(A.onWillOpen(()=>this.activate(S)));this._terminal=S;const w=A.coreService,m=A.optionsService,b=A.screenElement,x=A.linkifier2,y=A,O=y._bufferService,k=y._renderService,P=y._characterJoinerService,L=y._charSizeService,M=y._coreBrowserService,B=y._decorationService,j=y._logService,F=y._themeService;(0,d.setTraceLogger)(j),this._renderer=new f.CanvasRenderer(S,b,x,O,L,m,P,w,M,B,F),this.register((0,l.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,l.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),k.setRenderer(this._renderer),k.handleResize(O.cols,O.rows),this.register((0,h.toDisposable)(()=>{var U;k.setRenderer(this._terminal._core._createRenderer()),k.handleResize(S.cols,S.rows),(U=this._renderer)===null||U===void 0||U.dispose(),this._renderer=void 0}))}}c.CanvasAddon=g})(),a})())})(xtermAddonCanvas);var xtermAddonCanvasExports=xtermAddonCanvas.exports,xtermAddonFit={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const a=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(a._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,a=o._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const c=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(l.getPropertyValue("height")),d=Math.max(0,parseInt(l.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),g=h-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=d-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-c;return{cols:Math.max(2,Math.floor(v/a.css.cell.width)),rows:Math.max(1,Math.floor(g/a.css.cell.height))}}}})(),r})())})(xtermAddonFit);var xtermAddonFitExports=xtermAddonFit.exports,xtermAddonLigatures={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1);(function(s,e){var r={};/*! For license information please see xterm-addon-ligatures.js.LICENSE.txt */(function(n,o){s.exports=o(require$$3,require$$3,require$$3,require$$3)})(self,(n,o,a,c)=>(()=>{var l={185:(g,v)=>{function S(w){const m={};for(const[b,x]of Object.entries(w.individual))m[b]=A(x);for(const{range:b,entry:x}of w.range){const y=A(x);for(let O=b[0];O<b[1];O++)m[O]=y}return m}function A(w){const m={};return w.forward&&(m.forward=S(w.forward)),w.reverse&&(m.reverse=S(w.reverse)),w.lookup&&(m.lookup=w.lookup),m}Object.defineProperty(v,"__esModule",{value:!0}),v.default=S},98:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(602),w=S(593),m=S(233),b=S(694),x=S(532),y=S(595),O=S(223),k=S(439),P=S(349),L=S(185);class M{constructor(F,U){this._lookupTrees=[],this._glyphLookups={},this._font=F,U.cacheSize>0&&(this._cache=new w({max:U.cacheSize,length:(G,te)=>te.length}));const V=(this._font.tables.gsub&&this._font.tables.gsub.features.filter(G=>G.tag==="calt")||[]).reduce((G,te)=>[...G,...te.feature.lookupListIndexes],[]),Q=this._font.tables.gsub&&this._font.tables.gsub.lookups||[],q=Q.filter((G,te)=>V.some(Y=>Y===te));for(const[G,te]of q.entries()){const Y=[];switch(te.lookupType){case 6:for(const[K,ne]of te.subtables.entries())switch(ne.substFormat){case 1:Y.push(y.default(ne,Q,K));break;case 2:Y.push(O.default(ne,Q,K));break;case 3:Y.push(k.default(ne,Q,K))}break;case 8:for(const[K,ne]of te.subtables.entries())Y.push(P.default(ne,K))}const J=L.default(m.default(Y));this._lookupTrees.push({tree:J,processForward:te.lookupType!==8});for(const K of Object.keys(J))this._glyphLookups[K]||(this._glyphLookups[K]=[]),this._glyphLookups[K].push(G)}}findLigatures(F){const U=this._cache&&this._cache.get(F);if(U&&!Array.isArray(U))return U;const V=[];for(const G of F)V.push(this._font.charToGlyphIndex(G));if(this._lookupTrees.length===0)return{inputGlyphs:V,outputGlyphs:V,contextRanges:[]};const Q=this._findInternal(V.slice()),q={inputGlyphs:V,outputGlyphs:Q.sequence,contextRanges:Q.ranges};return this._cache&&this._cache.set(F,q),q}findLigatureRanges(F){if(this._lookupTrees.length===0)return[];const U=this._cache&&this._cache.get(F);if(U)return Array.isArray(U)?U:U.contextRanges;const V=[];for(const q of F)V.push(this._font.charToGlyphIndex(q));const Q=this._findInternal(V);return this._cache&&this._cache.set(F,Q.ranges),Q.ranges}_findInternal(F){const U=[];let V=this._getNextLookup(F,0);for(;V.index!==null;){const Q=this._lookupTrees[V.index];if(Q.processForward){let q=V.last;for(let G=V.first;G<q;G++){const te=b.default(Q.tree,F,G,G);if(te){for(let Y=0;Y<te.substitutions.length;Y++){const J=te.substitutions[Y];J!==null&&(F[G+Y]=J)}x.default(U,te.contextRange[0]+G,te.contextRange[1]+G),G+te.length>=q&&(q=G+te.length+1),G+=te.length-1}}}else for(let q=V.last-1;q>=V.first;q--){const G=b.default(Q.tree,F,q,q);if(G){for(let te=0;te<G.substitutions.length;te++){const Y=G.substitutions[te];Y!==null&&(F[q+te]=Y)}x.default(U,G.contextRange[0]+q,G.contextRange[1]+q),q-=G.length-1}}V=this._getNextLookup(F,V.index+1)}return{sequence:F,ranges:U}}_getNextLookup(F,U){const V={index:null,first:1/0,last:-1};for(let Q=0;Q<F.length;Q++){const q=this._glyphLookups[F[Q]];if(q)for(let G=0;G<q.length;G++){const te=q[G];if(te>=U){(V.index===null||te<=V.index)&&(V.index=te,V.first>Q&&(V.first=Q),V.last=Q+1);break}}}return V}}async function B(j,F){const U=await Promise.resolve().then(()=>S(269)).then(V=>V.promisify(A.load)(j));return new M(U,Object.assign({cacheSize:0},F))}v.load=async function(j,F){const[U]=await Promise.resolve().then(()=>S(781)).then(V=>V.listVariants(j));if(!U)throw new Error(`Font ${j} not found`);return B(U.path,F)},v.loadFile=B,v.loadBuffer=function(j,F){const U=A.parse(j);return new M(U,Object.assign({cacheSize:0},F))}},233:(g,v)=>{function S(O,k){for(const[P,L]of Object.entries(k.individual))if(O.individual[P])A(O.individual[P],L);else{let M=!1;for(const[B,{range:j,entry:F}]of O.range.entries()){const U=m(Number(P),j);if(U.both!==null){M=!0,O.individual[P]=L,A(O.individual[P],x(F)),O.range.splice(B,1);for(const V of U.second)Array.isArray(V)?O.range.push({range:V,entry:x(F)}):O.individual[V]=x(F)}}M||(O.individual[P]=L)}for(const{range:P,entry:L}of k.range){let M=[P];for(let B=0;B<O.range.length;B++){const{range:j,entry:F}=O.range[B];for(const[U,V]of M.entries()){if(!Array.isArray(V)){const Q=m(V,j);if(Q.both===null)continue;O.individual[V]=x(L),A(O.individual[V],x(F)),O.range.splice(B,1),B--;for(const q of Q.second)Array.isArray(q)?O.range.push({range:q,entry:x(F)}):O.individual[q]=x(F);M.splice(U,1,...Q.first);break}{const Q=w(V,j);if(Q.both===null)continue;O.range.splice(B,1),B--;const q=x(F);Array.isArray(Q.both)?O.range.push({range:Q.both,entry:q}):O.individual[Q.both]=q,A(q,x(L));for(const G of Q.second)Array.isArray(G)?O.range.push({range:G,entry:x(F)}):O.individual[G]=x(F);M=Q.first}}}for(const B of Object.keys(O.individual))for(const[j,F]of M.entries()){if(Array.isArray(F)){const U=m(Number(B),F);if(U.both===null)continue;A(O.individual[B],x(L)),M.splice(j,1,...U.second);break}if(Number(B)===F){A(O.individual[B],x(L));break}}for(const B of M)Array.isArray(B)?O.range.push({range:B,entry:x(L)}):O.individual[B]=x(L)}}function A(O,k){k.lookup&&(!O.lookup||O.lookup.index>k.lookup.index||O.lookup.index===k.lookup.index&&O.lookup.subIndex>k.lookup.subIndex)&&(O.lookup=k.lookup),k.forward&&(O.forward?S(O.forward,k.forward):O.forward=k.forward),k.reverse&&(O.reverse?S(O.reverse,k.reverse):O.reverse=k.reverse)}function w(O,k){const P={first:[],second:[],both:null};if(O[0]<k[1]&&k[0]<O[1]){const L=Math.max(O[0],k[0]),M=Math.min(O[1],k[1]);P.both=b(L,M)}if(O[0]<k[0]){const L=O[0],M=Math.min(k[0],O[1]);P.first.push(b(L,M))}else if(k[0]<O[0]){const L=k[0],M=Math.min(k[1],O[0]);P.second.push(b(L,M))}if(O[1]>k[1]){const L=Math.max(O[0],k[1]),M=O[1];P.first.push(b(L,M))}else if(k[1]>O[1]){const L=Math.max(O[1],k[0]),M=k[1];P.second.push(b(L,M))}return P}function m(O,k){if(O<k[0]||O>k[1])return{first:[O],second:[k],both:null};const P={first:[],second:[],both:O};return k[0]<O&&P.second.push(b(k[0],O)),k[1]>O&&P.second.push(b(O+1,k[1])),P}function b(O,k){return k-O==1?O:[O,k]}function x(O){const k={};return O.forward&&(k.forward=y(O.forward)),O.reverse&&(k.reverse=y(O.reverse)),O.lookup&&(k.lookup={contextRange:O.lookup.contextRange.slice(),index:O.lookup.index,length:O.lookup.length,subIndex:O.lookup.subIndex,substitutions:O.lookup.substitutions.slice()}),k}function y(O){const k={};for(const[P,L]of Object.entries(O.individual))k[P]=x(L);return{individual:k,range:O.range.map(({range:P,entry:L})=>({range:P.slice(),entry:x(L)}))}}Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(O){const k={individual:{},range:[]};for(const P of O)S(k,P);return k}},532:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(S,A,w){let m=!1;for(let b=0;b<S.length;b++){const x=S[b];if(m){if(w<=x[0])return S[b-1][1]=w,S;if(w<=x[1])return S[b-1][1]=Math.max(w,x[1]),S.splice(b,1),m=!1,S;S.splice(b,1),b--}else{if(w<=x[0])return S.splice(b,0,[A,w]),S;if(w<=x[1])return x[0]=Math.min(A,x[0]),S;if(!(A<x[1]))continue;x[0]=Math.min(A,x[0]),m=!0}}return m?S[S.length-1][1]=w:S.push([A,w]),S}},595:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(283),w=S(267);v.default=function(m,b,x){const y={individual:{},range:[]},O=A.listGlyphsByIndex(m.coverage);for(const{glyphId:k,index:P}of O){const L=m.chainRuleSets[P];if(L)for(const[M,B]of L.entries()){let j=w.getInputTree(y,B.lookupRecords,b,0,k).map(({entry:F,substitution:U})=>({entry:F,substitutions:[U]}));for(const[F,U]of B.input.entries())j=w.processInputPosition([U],F+1,j,B.lookupRecords,b);for(const F of B.lookahead)j=w.processLookaheadPosition([F],j);for(const F of B.backtrack)j=w.processBacktrackPosition([F],j);for(const{entry:F,substitutions:U}of j)F.lookup={substitutions:U,length:B.input.length+1,index:x,subIndex:M,contextRange:[-1*B.backtrack.length,1+B.input.length+B.lookahead.length]}}}return y}},223:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(233),w=S(283),m=S(91),b=S(267);v.default=function(x,y,O){const k=[],P=w.listGlyphsByIndex(x.coverage);for(const{glyphId:L}of P){const M=m.default(x.inputClassDef,L);for(const[B,j]of M.entries()){if(j===null)continue;const F=x.chainClassSet[j];if(F)for(const[U,V]of F.entries()){const Q={individual:{},range:[]};let q=b.getInputTree(Q,V.lookupRecords,y,0,B).map(({entry:G,substitution:te})=>({entry:G,substitutions:[te]}));for(const[G,te]of V.input.entries())q=b.processInputPosition(m.listClassGlyphs(x.inputClassDef,te),G+1,q,V.lookupRecords,y);for(const G of V.lookahead)q=b.processLookaheadPosition(m.listClassGlyphs(x.lookaheadClassDef,G),q);for(const G of V.backtrack)q=b.processBacktrackPosition(m.listClassGlyphs(x.backtrackClassDef,G),q);for(const{entry:G,substitutions:te}of q)G.lookup={substitutions:te,index:O,subIndex:U,length:V.input.length+1,contextRange:[-1*V.backtrack.length,1+V.input.length+V.lookahead.length]};k.push(Q)}}}return A.default(k)}},439:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(283),w=S(267);v.default=function(m,b,x){const y={individual:{},range:[]},O=A.listGlyphsByIndex(m.inputCoverage[0]);for(const{glyphId:k}of O){let P=w.getInputTree(y,m.lookupRecords,b,0,k).map(({entry:L,substitution:M})=>({entry:L,substitutions:[M]}));for(const[L,M]of m.inputCoverage.slice(1).entries())P=w.processInputPosition(A.listGlyphsByIndex(M).map(B=>B.glyphId),L+1,P,m.lookupRecords,b);for(const L of m.lookaheadCoverage)P=w.processLookaheadPosition(A.listGlyphsByIndex(L).map(M=>M.glyphId),P);for(const L of m.backtrackCoverage)P=w.processBacktrackPosition(A.listGlyphsByIndex(L).map(M=>M.glyphId),P);for(const{entry:L,substitutions:M}of P)L.lookup={substitutions:M,index:x,subIndex:0,length:m.inputCoverage.length,contextRange:[-1*m.backtrackCoverage.length,m.inputCoverage.length+m.lookaheadCoverage.length]}}return y}},349:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(283),w=S(267);v.default=function(m,b){const x={individual:{},range:[]},y=A.listGlyphsByIndex(m.coverage);for(const{glyphId:O,index:k}of y){const P={};Array.isArray(O)?x.range.push({entry:P,range:O}):x.individual[O]=P;let L=[{entry:P,substitutions:[m.substitutes[k]]}];for(const M of m.lookaheadCoverage)L=w.processLookaheadPosition(A.listGlyphsByIndex(M).map(B=>B.glyphId),L);for(const M of m.backtrackCoverage)L=w.processBacktrackPosition(A.listGlyphsByIndex(M).map(B=>B.glyphId),L);for(const{entry:M,substitutions:B}of L)M.lookup={substitutions:B,index:b,subIndex:0,length:1,contextRange:[-1*m.backtrackCoverage.length,1+m.lookaheadCoverage.length]}}return x}},91:(g,v)=>{function S(A,w){for(const m of A.ranges)if(m.start<=w&&m.end>=w)return m.classId;return null}Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(A,w){return A.format===2?Array.isArray(w)?function(m,b){let x=b[0],y=S(m,x),O=b[0]+1;const k=new Map;for(;O<b[1];)S(m,O)!==y&&(O-x<=1?k.set(x,y):k.set([x,O],y)),O++;return O-x<=1?k.set(x,y):k.set([x,O],y),k}(A,w):new Map([[w,S(A,w)]]):new Map([[w,null]])},v.listClassGlyphs=function(A,w){if(A.format===2){const m=[];for(const b of A.ranges)b.classId===w&&(b.end===b.start?m.push(b.start):m.push([b.start,b.end+1]));return m}return[]}},283:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(S,A){switch(S.format){case 1:const w=S.glyphs.indexOf(A);return w!==-1?w:null;case 2:const m=S.ranges.find(b=>b.start<=A&&b.end>=A);return m?m.index:null}},v.listGlyphsByIndex=function(S){switch(S.format){case 1:return S.glyphs.map((w,m)=>({glyphId:w,index:m}));case 2:let A=[];for(const[w,m]of S.ranges.entries())m.end===m.start?A.push({glyphId:m.start,index:w}):A.push({glyphId:[m.start,m.end+1],index:w});return A}}},267:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(603);function w(b,x,y,O,k){const P=[];if(Array.isArray(k)){const L=function(M,B,j,F){for(const U of M.filter(V=>V.sequenceIndex===j))for(const V of B[U.lookupListIndex].subtables){const Q=A.getRangeSubstitutionGlyphs(V,F);if(!Array.from(Q.values()).every(q=>q!==null))return Q}return new Map([[F,null]])}(x,y,O,k);for(const[M,B]of L){const j={};Array.isArray(M)?b.range.push({range:M,entry:j}):b.individual[M]={},P.push({entry:j,substitution:B})}}else b.individual[k]={},P.push({entry:b.individual[k],substitution:m(x,y,O,k)});return P}function m(b,x,y,O){for(const k of b.filter(P=>P.sequenceIndex===y))for(const P of x[k.lookupListIndex].subtables){const L=A.getIndividualSubstitutionGlyph(P,O);if(L!==null)return L}return null}v.processInputPosition=function(b,x,y,O,k){const P=[];for(const L of y){L.entry.forward={individual:{},range:[]};for(const M of b)P.push(...w(L.entry.forward,O,k,x,M).map(({entry:B,substitution:j})=>({entry:B,substitutions:[...L.substitutions,j]})))}return P},v.processLookaheadPosition=function(b,x){const y=[];for(const O of x)for(const k of b){const P={};O.entry.forward||(O.entry.forward={individual:{},range:[]}),y.push({entry:P,substitutions:O.substitutions}),Array.isArray(k)?O.entry.forward.range.push({entry:P,range:k}):O.entry.forward.individual[k]=P}return y},v.processBacktrackPosition=function(b,x){const y=[];for(const O of x)for(const k of b){const P={};O.entry.reverse||(O.entry.reverse={individual:{},range:[]}),y.push({entry:P,substitutions:O.substitutions}),Array.isArray(k)?O.entry.reverse.range.push({entry:P,range:k}):O.entry.reverse.individual[k]=P}return y},v.getInputTree=w},603:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(283);function w(m,b){const x=A.default(m.coverage,b);if(x===null)return null;switch(m.substFormat){case 1:return(b+m.deltaGlyphId)%65536;case 2:return m.substitute[x]!=null?m.substitute[x]:null}}v.getRangeSubstitutionGlyphs=function(m,b){let x=b[0],y=w(m,x),O=b[0]+1;const k=new Map;for(;O<b[1];)w(m,O)!==y&&(O-x<=1?k.set(x,y):k.set([x,O],y)),O++;return O-x<=1?k.set(x,y):k.set([x,O],y),k},v.getIndividualSubstitutionGlyph=w},694:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=function S(A,w,m,b){let x=A[w[b]];if(!x)return;let y=x.lookup;if(x.reverse){const k=function(P,L,M){let B=P[L[--M]],j=B&&B.lookup;for(;B&&((!j&&B.lookup||B.lookup&&j&&j.index>B.lookup.index)&&(j=B.lookup),!(--M<0)&&B.reverse);)B=B.reverse[L[M]];return j}(x.reverse,w,m);(!y&&k||k&&y&&(y.index>k.index||y.index===k.index&&y.subIndex>k.subIndex))&&(y=k)}if(++b>=w.length||!x.forward)return y;const O=S(x.forward,w,m,b);return(!y&&O||O&&y&&(y.index>O.index||y.index===O.index&&y.subIndex>O.subIndex))&&(y=O),y}},814:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(82);var w,m;(function(O){O.Serif="serif",O.SansSerif="sansSerif",O.Monospace="monospace",O.Cursive="cursive",O.Unknown="unknown"})(w=v.Type||(v.Type={})),function(O){O.Regular="regular",O.Italic="italic",O.Oblique="oblique",O.Bold="bold",O.BoldItalic="boldItalic",O.BoldOblique="boldOblique",O.Other="other"}(m=v.Style||(v.Style={}));const b=[" Regular"," Bold"," Bold Italic"," Bold Oblique"," Italic"," Oblique"];function x(O){if(!O.os2&&!O.head)return m.Other;const k=O.os2?32&O.os2.fsSelection:1&O.head.macStyle,P=O.os2?1&O.os2.fsSelection:O.post?O.post.italicAngle<0:2&O.head.macStyle,L=O.os2?512&O.os2.fsSelection:O.post?O.post.italicAngle>0:0,M=O.os2?320&O.os2.fsSelection:1;return k?L?m.BoldOblique:P?m.BoldItalic:m.Bold:L?m.Oblique:P?m.Italic:M?m.Regular:m.Other}v.name=function(O,k){const P=O.names.preferredFamily&&O.names.preferredFamily[k]?O.names.preferredFamily[k]:O.names.fontFamily[k];if(A.platform()==="win32"){const L=`${P} ${O.names.preferredSubfamily&&O.names.preferredSubfamily[k]?O.names.preferredSubfamily[k]:O.names.fontSubfamily[k]}`;let M=-1;for(const B of b){const j=L.lastIndexOf(B);if(j!==-1){M=j;break}}return M!==-1?L.substring(0,M):L}return P},v.type=function(O){if(O.os2)switch(O.os2.panose[0]){case 2:return O.os2.panose[3]===9?w.Monospace:O.os2.panose[1]>=11&&O.os2.panose[1]<=15||O.os2.panose[1]===0?w.SansSerif:w.Serif;case 3:return w.Cursive}else if(O.post&&O.post.isFixedPitch)return w.Monospace;return w.Unknown},v.style=x;const y=[m.Bold,m.BoldItalic,m.BoldOblique];v.weight=function(O){return O.os2?O.os2.usWeightClass:y.includes(x(O))?700:400}},781:function(g,v,S){var A=this&&this.__rest||function(k,P){var L={};for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&P.indexOf(M)<0&&(L[M]=k[M]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var B=0;for(M=Object.getOwnPropertySymbols(k);B<M.length;B++)P.indexOf(M[B])<0&&(L[M[B]]=k[M[B]])}return L};Object.defineProperty(v,"__esModule",{value:!0});const w=S(459),m=S(934),b=S(814);var x=S(814);async function y(k){const P=Object.assign({concurrency:4,language:"en"},k),L=await w.default({extensions:["ttf","otf"]}),M=await async function(j,F,U){const V=[];let Q=0;const q=async te=>{V.push(await(async Y=>{try{return O(Y,await m.default(Y),P.language)}catch(J){if(["TypeError","SyntaxError","ReferenceError","RangeError","AssertionError"].includes(J.name))throw J}})(F[te])),Q<F.length&&await q(Q++)},G=[];for(;Q<F.length&&Q<U;Q++)G.push(q(Q));return await Promise.all(G),V}(0,L,P.concurrency),B={};for(let j of M.filter(F=>F)){const{name:F}=j,U=A(j,["name"]);B[F]||(B[F]=[]),B[F].push(U)}return B}function O(k,P,L){return{name:b.name(P,L),path:k,type:b.type(P),weight:b.weight(P),style:b.style(P)}}v.Type=x.Type,v.Style=x.Style,v.list=y,v.listVariants=async function(k,P){return(await y(P))[k]||[]},v.get=async function(k,P){const L=Object.assign({language:"en"},P);return O(k,await m.default(k),L.language)}},934:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(89),w=S(896),m=S(380),b=S(879),x=S(130),y=S(731),O=S(954);var k;(function(M){M[M.TrueType=0]="TrueType",M[M.CFF=1]="CFF",M[M.Woff=2]="Woff"})(k||(k={}));const P={name:{tag:Buffer.from("name"),parse:m.default},ltag:{tag:Buffer.from("ltag"),parse:b.default},os2:{tag:Buffer.from("OS/2"),parse:x.default},head:{tag:Buffer.from("head"),parse:y.default},post:{tag:Buffer.from("post"),parse:O.default}};v.default=async function(M){return new Promise((B,j)=>{(async()=>{const F=w.default(),U=A.createReadStream(M);let V=!1;const Q=()=>{V=!0};U.once("close",Q),U.once("end",Q),U.once("error",q=>{V=!0,j(q)}),U.pipe(F);try{switch(function(q){if(q.equals(L.one)||q.equals(L.true)||q.equals(L.typ1))return k.TrueType;if(q.equals(L.otto))return k.CFF;if(q.equals(L.woff))return k.Woff;throw new Error(`Unsupported signature type: ${q}`)}(await F.read(4))){case k.TrueType:case k.CFF:const q=(await F.read(2)).readUInt16BE(0);await F.skip(6);const G=await async function(K,ne){const de={};for(let Re=0;Re<ne;Re++){const Te=await K.read(4),Me=await K.read(12);for(const[Ie,ce]of Object.entries(P))if(Te.equals(ce.tag)&&(de[Ie]={offset:Me.readUInt32BE(4),length:Me.readUInt32BE(8)},de.name&&de.ltag&&de.os2))return de}return de}(F,q),te=Object.entries(G).sort((K,ne)=>K[1].offset-ne[1].offset),Y={};for(const[K,ne]of te)await F.skip(ne.offset-F.offset),Y[K]=await F.read(ne.length);let J=[];if(Y.ltag&&(J=P.ltag.parse(Y.ltag)),!Y.name)throw new Error(`missing required OpenType table 'name' in font file: ${M}`);return{names:P.name.parse(Y.name,J),os2:Y.os2&&P.os2.parse(Y.os2),head:Y.head&&P.head.parse(Y.head),post:Y.post&&P.post.parse(Y.post)};case k.Woff:default:throw new Error("provided font type is not supported yet")}}finally{U.unpipe(F),V||(U.destroy(),F.destroy())}})().then(B,j)})};const L={one:Buffer.from([0,1,0,0]),otto:Buffer.from("OTTO"),true:Buffer.from("true"),typ1:Buffer.from("typ1"),woff:Buffer.from("wOFF")}},731:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(980);v.default=function(w){return{version:A.formatFixed(w.readUInt16BE(0),w.readUInt16BE(2)),fontRevision:A.formatFixed(w.readUInt16BE(4),w.readUInt16BE(6)),checkSumAdjustment:w.readUInt32BE(8),magicNumber:w.readUInt32BE(12),flags:w.readUInt16BE(16),unitsPerEm:w.readUInt16BE(18),created:A.formatLongDateTime(w.readUInt32BE(20),w.readUInt32BE(24)),modified:A.formatLongDateTime(w.readUInt32BE(28),w.readUInt32BE(32)),xMin:w.readInt16BE(36),yMin:w.readInt16BE(38),xMax:w.readInt16BE(40),yMax:w.readInt16BE(42),macStyle:w.readUInt16BE(44),lowestRecPPEM:w.readUInt16BE(46),fontDirectionHint:w.readInt16BE(48),indexToLocFormat:w.readInt16BE(50),glyphDataFormat:w.readInt16BE(52)}}},879:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(S){if(S.readUInt32BE(0)!==1)throw new Error("Unsupported ltag table version.");const A=S.readUInt32BE(8),w=[];for(let m=0;m<A;m++){let b="";const x=S.readUInt16BE(12+4*m),y=S.readUInt16BE(14+4*m);for(let O=x;O<x+y;++O)b+=String.fromCharCode(S.readInt8(O));w.push(b)}return w}},380:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0});const S=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],A={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},w={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function m(L,M,B){switch(L){case 0:if(M===65535)return"und";if(B)return B[M];break;case 1:return A[M];case 3:return w[M]}}const b="utf-16",x={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},y={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function O(L,M,B){switch(L){case 0:return b;case 1:return y[B]||x[M];case 3:if(M===1||M===10)return b}}v.default=function(L,M){const B={},j=L.readUInt16BE(2),F=L.readUInt16BE(4);let U=6;for(let V=0;V<j;V++){const Q=L.readUInt16BE(U+0),q=L.readUInt16BE(U+2),G=L.readUInt16BE(U+4),te=L.readUInt16BE(U+6),Y=S[te]||String(te),J=L.readUInt16BE(U+8),K=L.readUInt16BE(U+10),ne=m(Q,G,M),de=O(Q,q,G);if(U+=12,de!==void 0&&ne!==void 0){let Re;if(de===b){const Te=J/2,Me=Array(Te);for(let Ie=0;Ie<Te;Ie++)Me[Ie]=L.readUInt16BE(F+K+2*Ie);Re=String.fromCharCode(...Me)}else Re=P(L,F+K,J,de);if(Re){let Te=B[Y];Te===void 0&&(Te=B[Y]={}),Te[ne]=Re}}}return B};const k={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};function P(L,M,B,j){const F=k[j];if(F===void 0)return;let U="";for(let V=0;V<B;V++){const Q=L.readUInt8(M+V);U+=Q<=127?String.fromCharCode(Q):F[127&Q]}return U}},130:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(S){const A={version:S.readUInt16BE(0),xAvgCharWidth:S.readUInt16BE(2),usWeightClass:S.readUInt16BE(4),usWidthClass:S.readUInt16BE(6),fsType:S.readUInt16BE(8),ySubscriptXSize:S.readInt16BE(10),ySubscriptYSize:S.readInt16BE(12),ySubscriptXOffset:S.readInt16BE(14),ySubscriptYOffset:S.readInt16BE(16),ySuperscriptXSize:S.readInt16BE(18),ySuperscriptYSize:S.readInt16BE(20),ySuperscriptXOffset:S.readInt16BE(22),ySuperscriptYOffset:S.readInt16BE(24),yStrikeoutSize:S.readInt16BE(26),yStrikeoutPosition:S.readInt16BE(28),sFamilyClass:S.readInt16BE(30),panose:[S.readUInt8(32),S.readUInt8(33),S.readUInt8(34),S.readUInt8(35),S.readUInt8(36),S.readUInt8(37),S.readUInt8(38),S.readUInt8(39),S.readUInt8(40),S.readUInt8(41)],ulUnicodeRange1:S.readUInt32BE(42),ulUnicodeRange2:S.readUInt32BE(46),ulUnicodeRange3:S.readUInt32BE(50),ulUnicodeRange4:S.readUInt32BE(54),achVendID:String.fromCharCode(S.readUInt8(58),S.readUInt8(59),S.readUInt8(60),S.readUInt8(61)),fsSelection:S.readUInt16BE(62),usFirstCharIndex:S.readUInt16BE(64),usLastCharIndex:S.readUInt16BE(66),sTypoAscender:S.readInt16BE(68),sTypoDescender:S.readInt16BE(70),sTypoLineGap:S.readInt16BE(72),usWinAscent:S.readUInt16BE(74),usWinDescent:S.readUInt16BE(76)};return A.version>=1&&(A.ulCodePageRange1=S.readUInt32BE(78),A.ulCodePageRange2=S.readUInt32BE(82)),A.version>=2&&(A.sxHeight=S.readInt16BE(86),A.sCapHeight=S.readInt16BE(88),A.usDefaultChar=S.readUInt16BE(90),A.usBreakChar=S.readUInt16BE(92),A.usMaxContent=S.readUInt16BE(94)),A}},954:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(980);v.default=function(w){return{version:A.formatFixed(w.readUInt16BE(0),w.readUInt16BE(2)),italicAngle:A.formatFixed(w.readUInt16BE(4),w.readUInt16BE(6)),underlinePosition:w.readInt16BE(8),underlineThickness:w.readInt16BE(10),isFixedPitch:w.readUInt32BE(12),minMemType42:w.readUInt32BE(16),maxMemType42:w.readUInt32BE(20),minMemType1:w.readUInt32BE(24),maxMemType1:w.readUInt32BE(28)}}},980:(g,v)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.formatFixed=function(S,A){return S+A/65536},v.formatLongDateTime=function(S,A){return 1e3*(S*4294967296+A-2082844800)}},459:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(56),w=S(456),m=S(49),b={win32:()=>r.WINDIR?[A.join(r.WINDIR,"Fonts")]:["C:\\Windows\\Fonts"],darwin:()=>{const y=w.homedir();return[...y?[A.join(y,"/Library/Fonts")]:[],"/Library/Fonts","/Network/Library/Fonts","/System/Library/Fonts","/System Folder/Fonts"]},linux:()=>{const y=w.homedir();return["/usr/share/fonts","/usr/local/share/fonts",...y?[A.join(y,".fonts"),A.join(y,".local/share/fonts")]:[]]}};function x(y){const O=Object.assign({extensions:["ttf","otf","ttc","woff","woff2"],additionalFolders:[]},y),k=w.platform(),P=b[k];if(!P)throw new Error(`Unsupported platform: ${k}`);const L=P();return m.default([...L,...O.additionalFolders],O.extensions)}g.exports=Object.assign(x,{default:x}),v.default=x},49:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(89),w=S(269),m=S(56),b=w.promisify(A.readdir),x=w.promisify(A.stat);async function y(O,k,P=10){if(P<=0)return[];let L;try{L=await b(O)}catch{return[]}const M=[];return await Promise.all(L.map(async B=>{const j=m.join(O,B);let F;try{F=await x(j)}catch{return}F.isFile()&&k.test(j)?M.push(j):F.isDirectory()&&M.push(...await y(j,k,P-1))})),M}v.default=async function(O,k){const P=new Set;return await Promise.all(O.map(async L=>{const M=await y(m.resolve(L),new RegExp(`\\.${k.map(B=>`(?:${B})`).join("|")}$`));for(const B of M)P.add(B)})),[...P]}},593:(g,v,S)=>{const A=S(411),w=Symbol("max"),m=Symbol("length"),b=Symbol("lengthCalculator"),x=Symbol("allowStale"),y=Symbol("maxAge"),O=Symbol("dispose"),k=Symbol("noDisposeOnSet"),P=Symbol("lruList"),L=Symbol("cache"),M=Symbol("updateAgeOnGet"),B=()=>1,j=(G,te,Y)=>{const J=G[L].get(te);if(J){const K=J.value;if(F(G,K)){if(V(G,J),!G[x])return}else Y&&(G[M]&&(J.value.now=Date.now()),G[P].unshiftNode(J));return K.value}},F=(G,te)=>{if(!te||!te.maxAge&&!G[y])return!1;const Y=Date.now()-te.now;return te.maxAge?Y>te.maxAge:G[y]&&Y>G[y]},U=G=>{if(G[m]>G[w])for(let te=G[P].tail;G[m]>G[w]&&te!==null;){const Y=te.prev;V(G,te),te=Y}},V=(G,te)=>{if(te){const Y=te.value;G[O]&&G[O](Y.key,Y.value),G[m]-=Y.length,G[L].delete(Y.key),G[P].removeNode(te)}};class Q{constructor(te,Y,J,K,ne){this.key=te,this.value=Y,this.length=J,this.now=K,this.maxAge=ne||0}}const q=(G,te,Y,J)=>{let K=Y.value;F(G,K)&&(V(G,Y),G[x]||(K=void 0)),K&&te.call(J,K.value,K.key,G)};g.exports=class{constructor(G){if(typeof G=="number"&&(G={max:G}),G||(G={}),G.max&&(typeof G.max!="number"||G.max<0))throw new TypeError("max must be a non-negative number");this[w]=G.max||1/0;const te=G.length||B;if(this[b]=typeof te!="function"?B:te,this[x]=G.stale||!1,G.maxAge&&typeof G.maxAge!="number")throw new TypeError("maxAge must be a number");this[y]=G.maxAge||0,this[O]=G.dispose,this[k]=G.noDisposeOnSet||!1,this[M]=G.updateAgeOnGet||!1,this.reset()}set max(G){if(typeof G!="number"||G<0)throw new TypeError("max must be a non-negative number");this[w]=G||1/0,U(this)}get max(){return this[w]}set allowStale(G){this[x]=!!G}get allowStale(){return this[x]}set maxAge(G){if(typeof G!="number")throw new TypeError("maxAge must be a non-negative number");this[y]=G,U(this)}get maxAge(){return this[y]}set lengthCalculator(G){typeof G!="function"&&(G=B),G!==this[b]&&(this[b]=G,this[m]=0,this[P].forEach(te=>{te.length=this[b](te.value,te.key),this[m]+=te.length})),U(this)}get lengthCalculator(){return this[b]}get length(){return this[m]}get itemCount(){return this[P].length}rforEach(G,te){te=te||this;for(let Y=this[P].tail;Y!==null;){const J=Y.prev;q(this,G,Y,te),Y=J}}forEach(G,te){te=te||this;for(let Y=this[P].head;Y!==null;){const J=Y.next;q(this,G,Y,te),Y=J}}keys(){return this[P].toArray().map(G=>G.key)}values(){return this[P].toArray().map(G=>G.value)}reset(){this[O]&&this[P]&&this[P].length&&this[P].forEach(G=>this[O](G.key,G.value)),this[L]=new Map,this[P]=new A,this[m]=0}dump(){return this[P].map(G=>!F(this,G)&&{k:G.key,v:G.value,e:G.now+(G.maxAge||0)}).toArray().filter(G=>G)}dumpLru(){return this[P]}set(G,te,Y){if((Y=Y||this[y])&&typeof Y!="number")throw new TypeError("maxAge must be a number");const J=Y?Date.now():0,K=this[b](te,G);if(this[L].has(G)){if(K>this[w])return V(this,this[L].get(G)),!1;const de=this[L].get(G).value;return this[O]&&(this[k]||this[O](G,de.value)),de.now=J,de.maxAge=Y,de.value=te,this[m]+=K-de.length,de.length=K,this.get(G),U(this),!0}const ne=new Q(G,te,K,J,Y);return ne.length>this[w]?(this[O]&&this[O](G,te),!1):(this[m]+=ne.length,this[P].unshift(ne),this[L].set(G,this[P].head),U(this),!0)}has(G){if(!this[L].has(G))return!1;const te=this[L].get(G).value;return!F(this,te)}get(G){return j(this,G,!0)}peek(G){return j(this,G,!1)}pop(){const G=this[P].tail;return G?(V(this,G),G.value):null}del(G){V(this,this[L].get(G))}load(G){this.reset();const te=Date.now();for(let Y=G.length-1;Y>=0;Y--){const J=G[Y],K=J.e||0;if(K===0)this.set(J.k,J.v);else{const ne=K-te;ne>0&&this.set(J.k,J.v,ne)}}}prune(){this[L].forEach((G,te)=>j(this,te,!1))}}},602:(g,v,S)=>{S.r(v),S.d(v,{BoundingBox:()=>x,Font:()=>Nn,Glyph:()=>wt,Path:()=>O,_parse:()=>Be,load:()=>qr,loadSync:()=>ti,parse:()=>Dn});var A=S(311),w=S.n(A);function m(D,I,H,W,X){return Math.pow(1-X,3)*D+3*Math.pow(1-X,2)*X*I+3*(1-X)*Math.pow(X,2)*H+Math.pow(X,3)*W}function b(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}b.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},b.prototype.addPoint=function(D,I){typeof D=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=D,this.x2=D),D<this.x1&&(this.x1=D),D>this.x2&&(this.x2=D)),typeof I=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=I,this.y2=I),I<this.y1&&(this.y1=I),I>this.y2&&(this.y2=I))},b.prototype.addX=function(D){this.addPoint(D,null)},b.prototype.addY=function(D){this.addPoint(null,D)},b.prototype.addBezier=function(D,I,H,W,X,re,se,fe){const le=[D,I],ke=[H,W],je=[X,re],Ke=[se,fe];this.addPoint(D,I),this.addPoint(se,fe);for(let nt=0;nt<=1;nt++){const Ft=6*le[nt]-12*ke[nt]+6*je[nt],Tt=-3*le[nt]+9*ke[nt]-9*je[nt]+3*Ke[nt],Ht=3*ke[nt]-3*le[nt];if(Tt===0){if(Ft===0)continue;const p=-Ht/Ft;0<p&&p<1&&(nt===0&&this.addX(m(le[nt],ke[nt],je[nt],Ke[nt],p)),nt===1&&this.addY(m(le[nt],ke[nt],je[nt],Ke[nt],p)));continue}const St=Math.pow(Ft,2)-4*Ht*Tt;if(St<0)continue;const ae=(-Ft+Math.sqrt(St))/(2*Tt);0<ae&&ae<1&&(nt===0&&this.addX(m(le[nt],ke[nt],je[nt],Ke[nt],ae)),nt===1&&this.addY(m(le[nt],ke[nt],je[nt],Ke[nt],ae)));const u=(-Ft-Math.sqrt(St))/(2*Tt);0<u&&u<1&&(nt===0&&this.addX(m(le[nt],ke[nt],je[nt],Ke[nt],u)),nt===1&&this.addY(m(le[nt],ke[nt],je[nt],Ke[nt],u)))}},b.prototype.addQuad=function(D,I,H,W,X,re){const se=D+.6666666666666666*(H-D),fe=I+2/3*(W-I),le=se+1/3*(X-D),ke=fe+1/3*(re-I);this.addBezier(D,I,se,fe,le,ke,X,re)};const x=b;function y(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}y.prototype.moveTo=function(D,I){this.commands.push({type:"M",x:D,y:I})},y.prototype.lineTo=function(D,I){this.commands.push({type:"L",x:D,y:I})},y.prototype.curveTo=y.prototype.bezierCurveTo=function(D,I,H,W,X,re){this.commands.push({type:"C",x1:D,y1:I,x2:H,y2:W,x:X,y:re})},y.prototype.quadTo=y.prototype.quadraticCurveTo=function(D,I,H,W){this.commands.push({type:"Q",x1:D,y1:I,x:H,y:W})},y.prototype.close=y.prototype.closePath=function(){this.commands.push({type:"Z"})},y.prototype.extend=function(D){if(D.commands)D=D.commands;else if(D instanceof x){const I=D;return this.moveTo(I.x1,I.y1),this.lineTo(I.x2,I.y1),this.lineTo(I.x2,I.y2),this.lineTo(I.x1,I.y2),void this.close()}Array.prototype.push.apply(this.commands,D)},y.prototype.getBoundingBox=function(){const D=new x;let I=0,H=0,W=0,X=0;for(let re=0;re<this.commands.length;re++){const se=this.commands[re];switch(se.type){case"M":D.addPoint(se.x,se.y),I=W=se.x,H=X=se.y;break;case"L":D.addPoint(se.x,se.y),W=se.x,X=se.y;break;case"Q":D.addQuad(W,X,se.x1,se.y1,se.x,se.y),W=se.x,X=se.y;break;case"C":D.addBezier(W,X,se.x1,se.y1,se.x2,se.y2,se.x,se.y),W=se.x,X=se.y;break;case"Z":W=I,X=H;break;default:throw new Error("Unexpected path command "+se.type)}}return D.isEmpty()&&D.addPoint(0,0),D},y.prototype.draw=function(D){D.beginPath();for(let I=0;I<this.commands.length;I+=1){const H=this.commands[I];H.type==="M"?D.moveTo(H.x,H.y):H.type==="L"?D.lineTo(H.x,H.y):H.type==="C"?D.bezierCurveTo(H.x1,H.y1,H.x2,H.y2,H.x,H.y):H.type==="Q"?D.quadraticCurveTo(H.x1,H.y1,H.x,H.y):H.type==="Z"&&D.closePath()}this.fill&&(D.fillStyle=this.fill,D.fill()),this.stroke&&(D.strokeStyle=this.stroke,D.lineWidth=this.strokeWidth,D.stroke())},y.prototype.toPathData=function(D){function I(X){return Math.round(X)===X?""+Math.round(X):X.toFixed(D)}function H(){let X="";for(let re=0;re<arguments.length;re+=1){const se=arguments[re];se>=0&&re>0&&(X+=" "),X+=I(se)}return X}D=D!==void 0?D:2;let W="";for(let X=0;X<this.commands.length;X+=1){const re=this.commands[X];re.type==="M"?W+="M"+H(re.x,re.y):re.type==="L"?W+="L"+H(re.x,re.y):re.type==="C"?W+="C"+H(re.x1,re.y1,re.x2,re.y2,re.x,re.y):re.type==="Q"?W+="Q"+H(re.x1,re.y1,re.x,re.y):re.type==="Z"&&(W+="Z")}return W},y.prototype.toSVG=function(D){let I='<path d="';return I+=this.toPathData(D),I+='"',this.fill&&this.fill!=="black"&&(this.fill===null?I+=' fill="none"':I+=' fill="'+this.fill+'"'),this.stroke&&(I+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),I+="/>",I},y.prototype.toDOMElement=function(D){const I=this.toPathData(D),H=document.createElementNS("http://www.w3.org/2000/svg","path");return H.setAttribute("d",I),H};const O=y;function k(D){throw new Error(D)}function P(D,I){D||k(I)}const L={fail:k,argument:P,assert:P},M=2147483648,B={},j={},F={};function U(D){return function(){return D}}j.BYTE=function(D){return L.argument(D>=0&&D<=255,"Byte value should be between 0 and 255."),[D]},F.BYTE=U(1),j.CHAR=function(D){return[D.charCodeAt(0)]},F.CHAR=U(1),j.CHARARRAY=function(D){const I=[];for(let H=0;H<D.length;H+=1)I[H]=D.charCodeAt(H);return I},F.CHARARRAY=function(D){return D.length},j.USHORT=function(D){return[D>>8&255,255&D]},F.USHORT=U(2),j.SHORT=function(D){return D>=32768&&(D=-(65536-D)),[D>>8&255,255&D]},F.SHORT=U(2),j.UINT24=function(D){return[D>>16&255,D>>8&255,255&D]},F.UINT24=U(3),j.ULONG=function(D){return[D>>24&255,D>>16&255,D>>8&255,255&D]},F.ULONG=U(4),j.LONG=function(D){return D>=M&&(D=-(2*M-D)),[D>>24&255,D>>16&255,D>>8&255,255&D]},F.LONG=U(4),j.FIXED=j.ULONG,F.FIXED=F.ULONG,j.FWORD=j.SHORT,F.FWORD=F.SHORT,j.UFWORD=j.USHORT,F.UFWORD=F.USHORT,j.LONGDATETIME=function(D){return[0,0,0,0,D>>24&255,D>>16&255,D>>8&255,255&D]},F.LONGDATETIME=U(8),j.TAG=function(D){return L.argument(D.length===4,"Tag should be exactly 4 ASCII characters."),[D.charCodeAt(0),D.charCodeAt(1),D.charCodeAt(2),D.charCodeAt(3)]},F.TAG=U(4),j.Card8=j.BYTE,F.Card8=F.BYTE,j.Card16=j.USHORT,F.Card16=F.USHORT,j.OffSize=j.BYTE,F.OffSize=F.BYTE,j.SID=j.USHORT,F.SID=F.USHORT,j.NUMBER=function(D){return D>=-107&&D<=107?[D+139]:D>=108&&D<=1131?[247+((D-=108)>>8),255&D]:D>=-1131&&D<=-108?[251+((D=-D-108)>>8),255&D]:D>=-32768&&D<=32767?j.NUMBER16(D):j.NUMBER32(D)},F.NUMBER=function(D){return j.NUMBER(D).length},j.NUMBER16=function(D){return[28,D>>8&255,255&D]},F.NUMBER16=U(3),j.NUMBER32=function(D){return[29,D>>24&255,D>>16&255,D>>8&255,255&D]},F.NUMBER32=U(5),j.REAL=function(D){let I=D.toString();const H=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(I);if(H){const re=parseFloat("1e"+((H[2]?+H[2]:0)+H[1].length));I=(Math.round(D*re)/re).toString()}let W="";for(let re=0,se=I.length;re<se;re+=1){const fe=I[re];W+=fe==="e"?I[++re]==="-"?"c":"b":fe==="."?"a":fe==="-"?"e":fe}W+=1&W.length?"f":"ff";const X=[30];for(let re=0,se=W.length;re<se;re+=2)X.push(parseInt(W.substr(re,2),16));return X},F.REAL=function(D){return j.REAL(D).length},j.NAME=j.CHARARRAY,F.NAME=F.CHARARRAY,j.STRING=j.CHARARRAY,F.STRING=F.CHARARRAY,B.UTF8=function(D,I,H){const W=[],X=H;for(let re=0;re<X;re++,I+=1)W[re]=D.getUint8(I);return String.fromCharCode.apply(null,W)},B.UTF16=function(D,I,H){const W=[],X=H/2;for(let re=0;re<X;re++,I+=2)W[re]=D.getUint16(I);return String.fromCharCode.apply(null,W)},j.UTF16=function(D){const I=[];for(let H=0;H<D.length;H+=1){const W=D.charCodeAt(H);I[I.length]=W>>8&255,I[I.length]=255&W}return I},F.UTF16=function(D){return 2*D.length};const V={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};B.MACSTRING=function(D,I,H,W){const X=V[W];if(X===void 0)return;let re="";for(let se=0;se<H;se++){const fe=D.getUint8(I+se);re+=fe<=127?String.fromCharCode(fe):X[127&fe]}return re};const Q=typeof WeakMap=="function"&&new WeakMap;let q;function G(D){return D>=-128&&D<=127}function te(D,I,H){let W=0;const X=D.length;for(;I<X&&W<64&&D[I]===0;)++I,++W;return H.push(128|W-1),I}function Y(D,I,H){let W=0;const X=D.length;let re=I;for(;re<X&&W<64;){const se=D[re];if(!G(se)||se===0&&re+1<X&&D[re+1]===0)break;++re,++W}H.push(W-1);for(let se=I;se<re;++se)H.push(D[se]+256&255);return re}function J(D,I,H){let W=0;const X=D.length;let re=I;for(;re<X&&W<64;){const se=D[re];if(se===0||G(se)&&re+1<X&&G(D[re+1]))break;++re,++W}H.push(64|W-1);for(let se=I;se<re;++se){const fe=D[se];H.push(fe+65536>>8&255,fe+256&255)}return re}j.MACSTRING=function(D,I){const H=function(X){if(!q){q={};for(let le in V)q[le]=new String(le)}const re=q[X];if(re===void 0)return;if(Q){const le=Q.get(re);if(le!==void 0)return le}const se=V[X];if(se===void 0)return;const fe={};for(let le=0;le<se.length;le++)fe[se.charCodeAt(le)]=le+128;return Q&&Q.set(re,fe),fe}(I);if(H===void 0)return;const W=[];for(let X=0;X<D.length;X++){let re=D.charCodeAt(X);if(re>=128&&(re=H[re],re===void 0))return;W[X]=re}return W},F.MACSTRING=function(D,I){const H=j.MACSTRING(D,I);return H!==void 0?H.length:0},j.VARDELTAS=function(D){let I=0;const H=[];for(;I<D.length;){const W=D[I];I=W===0?te(D,I,H):W>=-128&&W<=127?Y(D,I,H):J(D,I,H)}return H},j.INDEX=function(D){let I=1;const H=[I],W=[];for(let fe=0;fe<D.length;fe+=1){const le=j.OBJECT(D[fe]);Array.prototype.push.apply(W,le),I+=le.length,H.push(I)}if(W.length===0)return[0,0];const X=[],re=1+Math.floor(Math.log(I)/Math.log(2))/8|0,se=[void 0,j.BYTE,j.USHORT,j.UINT24,j.ULONG][re];for(let fe=0;fe<H.length;fe+=1){const le=se(H[fe]);Array.prototype.push.apply(X,le)}return Array.prototype.concat(j.Card16(D.length),j.OffSize(re),X,W)},F.INDEX=function(D){return j.INDEX(D).length},j.DICT=function(D){let I=[];const H=Object.keys(D),W=H.length;for(let X=0;X<W;X+=1){const re=parseInt(H[X],0),se=D[re];I=I.concat(j.OPERAND(se.value,se.type)),I=I.concat(j.OPERATOR(re))}return I},F.DICT=function(D){return j.DICT(D).length},j.OPERATOR=function(D){return D<1200?[D]:[12,D-1200]},j.OPERAND=function(D,I){let H=[];if(Array.isArray(I))for(let W=0;W<I.length;W+=1)L.argument(D.length===I.length,"Not enough arguments given for type"+I),H=H.concat(j.OPERAND(D[W],I[W]));else if(I==="SID")H=H.concat(j.NUMBER(D));else if(I==="offset")H=H.concat(j.NUMBER32(D));else if(I==="number")H=H.concat(j.NUMBER(D));else{if(I!=="real")throw new Error("Unknown operand type "+I);H=H.concat(j.REAL(D))}return H},j.OP=j.BYTE,F.OP=F.BYTE;const K=typeof WeakMap=="function"&&new WeakMap;function ne(D,I,H){for(let W=0;W<I.length;W+=1){const X=I[W];this[X.name]=X.value}if(this.tableName=D,this.fields=I,H){const W=Object.keys(H);for(let X=0;X<W.length;X+=1){const re=W[X],se=H[re];this[re]!==void 0&&(this[re]=se)}}}function de(D,I,H){H===void 0&&(H=I.length);const W=new Array(I.length+1);W[0]={name:D+"Count",type:"USHORT",value:H};for(let X=0;X<I.length;X++)W[X+1]={name:D+X,type:"USHORT",value:I[X]};return W}function Re(D,I,H){const W=I.length,X=new Array(W+1);X[0]={name:D+"Count",type:"USHORT",value:W};for(let re=0;re<W;re++)X[re+1]={name:D+re,type:"TABLE",value:H(I[re],re)};return X}function Te(D,I,H){const W=I.length;let X=[];X[0]={name:D+"Count",type:"USHORT",value:W};for(let re=0;re<W;re++)X=X.concat(H(I[re],re));return X}function Me(D){D.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(de("glyph",D.glyphs))):L.assert(!1,"Can't create coverage table format 2 yet.")}function Ie(D){ne.call(this,"scriptListTable",Te("scriptRecord",D,function(I,H){const W=I.script;let X=W.defaultLangSys;return L.assert(!!X,"Unable to write GSUB: script "+I.tag+" has no default language system."),[{name:"scriptTag"+H,type:"TAG",value:I.tag},{name:"script"+H,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:X.reqFeatureIndex}].concat(de("featureIndex",X.featureIndexes)))}].concat(Te("langSys",W.langSysRecords,function(re,se){const fe=re.langSys;return[{name:"langSysTag"+se,type:"TAG",value:re.tag},{name:"langSys"+se,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:fe.reqFeatureIndex}].concat(de("featureIndex",fe.featureIndexes)))}]})))}]}))}function ce(D){ne.call(this,"featureListTable",Te("featureRecord",D,function(I,H){const W=I.feature;return[{name:"featureTag"+H,type:"TAG",value:I.tag},{name:"feature"+H,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:W.featureParams}].concat(de("lookupListIndex",W.lookupListIndexes)))}]}))}function pe(D,I){ne.call(this,"lookupListTable",Re("lookup",D,function(H){let W=I[H.lookupType];return L.assert(!!W,"Unable to write GSUB lookup type "+H.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:H.lookupType},{name:"lookupFlag",type:"USHORT",value:H.lookupFlag}].concat(Re("subtable",H.subtables,W)))}))}j.CHARSTRING=function(D){if(K){const W=K.get(D);if(W!==void 0)return W}let I=[];const H=D.length;for(let W=0;W<H;W+=1){const X=D[W];I=I.concat(j[X.type](X.value))}return K&&K.set(D,I),I},F.CHARSTRING=function(D){return j.CHARSTRING(D).length},j.OBJECT=function(D){const I=j[D.type];return L.argument(I!==void 0,"No encoding function for type "+D.type),I(D.value)},F.OBJECT=function(D){const I=F[D.type];return L.argument(I!==void 0,"No sizeOf function for type "+D.type),I(D.value)},j.TABLE=function(D){let I=[];const H=D.fields.length,W=[],X=[];for(let re=0;re<H;re+=1){const se=D.fields[re],fe=j[se.type];L.argument(fe!==void 0,"No encoding function for field type "+se.type+" ("+se.name+")");let le=D[se.name];le===void 0&&(le=se.value);const ke=fe(le);se.type==="TABLE"?(X.push(I.length),I=I.concat([0,0]),W.push(ke)):I=I.concat(ke)}for(let re=0;re<W.length;re+=1){const se=X[re],fe=I.length;L.argument(fe<65536,"Table "+D.tableName+" too big."),I[se]=fe>>8,I[se+1]=255&fe,I=I.concat(W[re])}return I},F.TABLE=function(D){let I=0;const H=D.fields.length;for(let W=0;W<H;W+=1){const X=D.fields[W],re=F[X.type];L.argument(re!==void 0,"No sizeOf function for field type "+X.type+" ("+X.name+")");let se=D[X.name];se===void 0&&(se=X.value),I+=re(se),X.type==="TABLE"&&(I+=2)}return I},j.RECORD=j.TABLE,F.RECORD=F.TABLE,j.LITERAL=function(D){return D},F.LITERAL=function(D){return D.length},ne.prototype.encode=function(){return j.TABLE(this)},ne.prototype.sizeOf=function(){return F.TABLE(this)},Me.prototype=Object.create(ne.prototype),Me.prototype.constructor=Me,Ie.prototype=Object.create(ne.prototype),Ie.prototype.constructor=Ie,ce.prototype=Object.create(ne.prototype),ce.prototype.constructor=ce,pe.prototype=Object.create(ne.prototype),pe.prototype.constructor=pe;const me={Table:ne,Record:ne,Coverage:Me,ScriptList:Ie,FeatureList:ce,LookupList:pe,ushortList:de,tableList:Re,recordList:Te};function we(D,I){return D.getUint8(I)}function Xe(D,I){return D.getUint16(I,!1)}function Qe(D,I){return D.getUint32(I,!1)}function Pe(D,I){return D.getInt16(I,!1)+D.getUint16(I+2,!1)/65535}const Ze={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function _e(D,I){this.data=D,this.offset=I,this.relativeOffset=0}_e.prototype.parseByte=function(){const D=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,D},_e.prototype.parseChar=function(){const D=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,D},_e.prototype.parseCard8=_e.prototype.parseByte,_e.prototype.parseUShort=function(){const D=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,D},_e.prototype.parseCard16=_e.prototype.parseUShort,_e.prototype.parseSID=_e.prototype.parseUShort,_e.prototype.parseOffset16=_e.prototype.parseUShort,_e.prototype.parseShort=function(){const D=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,D},_e.prototype.parseF2Dot14=function(){const D=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,D},_e.prototype.parseULong=function(){const D=Qe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,D},_e.prototype.parseOffset32=_e.prototype.parseULong,_e.prototype.parseFixed=function(){const D=Pe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,D},_e.prototype.parseString=function(D){const I=this.data,H=this.offset+this.relativeOffset;let W="";this.relativeOffset+=D;for(let X=0;X<D;X++)W+=String.fromCharCode(I.getUint8(H+X));return W},_e.prototype.parseTag=function(){return this.parseString(4)},_e.prototype.parseLongDateTime=function(){let D=Qe(this.data,this.offset+this.relativeOffset+4);return D-=2082844800,this.relativeOffset+=8,D},_e.prototype.parseVersion=function(D){const I=Xe(this.data,this.offset+this.relativeOffset),H=Xe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,D===void 0&&(D=4096),I+H/D/10},_e.prototype.skip=function(D,I){I===void 0&&(I=1),this.relativeOffset+=Ze[D]*I},_e.prototype.parseULongList=function(D){D===void 0&&(D=this.parseULong());const I=new Array(D),H=this.data;let W=this.offset+this.relativeOffset;for(let X=0;X<D;X++)I[X]=H.getUint32(W),W+=4;return this.relativeOffset+=4*D,I},_e.prototype.parseOffset16List=_e.prototype.parseUShortList=function(D){D===void 0&&(D=this.parseUShort());const I=new Array(D),H=this.data;let W=this.offset+this.relativeOffset;for(let X=0;X<D;X++)I[X]=H.getUint16(W),W+=2;return this.relativeOffset+=2*D,I},_e.prototype.parseShortList=function(D){const I=new Array(D),H=this.data;let W=this.offset+this.relativeOffset;for(let X=0;X<D;X++)I[X]=H.getInt16(W),W+=2;return this.relativeOffset+=2*D,I},_e.prototype.parseByteList=function(D){const I=new Array(D),H=this.data;let W=this.offset+this.relativeOffset;for(let X=0;X<D;X++)I[X]=H.getUint8(W++);return this.relativeOffset+=D,I},_e.prototype.parseList=function(D,I){I||(I=D,D=this.parseUShort());const H=new Array(D);for(let W=0;W<D;W++)H[W]=I.call(this);return H},_e.prototype.parseList32=function(D,I){I||(I=D,D=this.parseULong());const H=new Array(D);for(let W=0;W<D;W++)H[W]=I.call(this);return H},_e.prototype.parseRecordList=function(D,I){I||(I=D,D=this.parseUShort());const H=new Array(D),W=Object.keys(I);for(let X=0;X<D;X++){const re={};for(let se=0;se<W.length;se++){const fe=W[se],le=I[fe];re[fe]=le.call(this)}H[X]=re}return H},_e.prototype.parseRecordList32=function(D,I){I||(I=D,D=this.parseULong());const H=new Array(D),W=Object.keys(I);for(let X=0;X<D;X++){const re={};for(let se=0;se<W.length;se++){const fe=W[se],le=I[fe];re[fe]=le.call(this)}H[X]=re}return H},_e.prototype.parseStruct=function(D){if(typeof D=="function")return D.call(this);{const I=Object.keys(D),H={};for(let W=0;W<I.length;W++){const X=I[W],re=D[X];H[X]=re.call(this)}return H}},_e.prototype.parseValueRecord=function(D){if(D===void 0&&(D=this.parseUShort()),D===0)return;const I={};return 1&D&&(I.xPlacement=this.parseShort()),2&D&&(I.yPlacement=this.parseShort()),4&D&&(I.xAdvance=this.parseShort()),8&D&&(I.yAdvance=this.parseShort()),16&D&&(I.xPlaDevice=void 0,this.parseShort()),32&D&&(I.yPlaDevice=void 0,this.parseShort()),64&D&&(I.xAdvDevice=void 0,this.parseShort()),128&D&&(I.yAdvDevice=void 0,this.parseShort()),I},_e.prototype.parseValueRecordList=function(){const D=this.parseUShort(),I=this.parseUShort(),H=new Array(I);for(let W=0;W<I;W++)H[W]=this.parseValueRecord(D);return H},_e.prototype.parsePointer=function(D){const I=this.parseOffset16();if(I>0)return new _e(this.data,this.offset+I).parseStruct(D)},_e.prototype.parsePointer32=function(D){const I=this.parseOffset32();if(I>0)return new _e(this.data,this.offset+I).parseStruct(D)},_e.prototype.parseListOfLists=function(D){const I=this.parseOffset16List(),H=I.length,W=this.relativeOffset,X=new Array(H);for(let re=0;re<H;re++){const se=I[re];if(se!==0)if(this.relativeOffset=se,D){const fe=this.parseOffset16List(),le=new Array(fe.length);for(let ke=0;ke<fe.length;ke++)this.relativeOffset=se+fe[ke],le[ke]=D.call(this);X[re]=le}else X[re]=this.parseUShortList();else X[re]=void 0}return this.relativeOffset=W,X},_e.prototype.parseCoverage=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort(),H=this.parseUShort();if(I===1)return{format:1,glyphs:this.parseUShortList(H)};if(I===2){const W=new Array(H);for(let X=0;X<H;X++)W[X]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:W}}throw new Error("0x"+D.toString(16)+": Coverage format must be 1 or 2.")},_e.prototype.parseClassDef=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort();if(I===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(I===2)return{format:2,ranges:this.parseRecordList({start:_e.uShort,end:_e.uShort,classId:_e.uShort})};throw new Error("0x"+D.toString(16)+": ClassDef format must be 1 or 2.")},_e.list=function(D,I){return function(){return this.parseList(D,I)}},_e.list32=function(D,I){return function(){return this.parseList32(D,I)}},_e.recordList=function(D,I){return function(){return this.parseRecordList(D,I)}},_e.recordList32=function(D,I){return function(){return this.parseRecordList32(D,I)}},_e.pointer=function(D){return function(){return this.parsePointer(D)}},_e.pointer32=function(D){return function(){return this.parsePointer32(D)}},_e.tag=_e.prototype.parseTag,_e.byte=_e.prototype.parseByte,_e.uShort=_e.offset16=_e.prototype.parseUShort,_e.uShortList=_e.prototype.parseUShortList,_e.uLong=_e.offset32=_e.prototype.parseULong,_e.uLongList=_e.prototype.parseULongList,_e.struct=_e.prototype.parseStruct,_e.coverage=_e.prototype.parseCoverage,_e.classDef=_e.prototype.parseClassDef;const qe={reserved:_e.uShort,reqFeatureIndex:_e.uShort,featureIndexes:_e.uShortList};_e.prototype.parseScriptList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,script:_e.pointer({defaultLangSys:_e.pointer(qe),langSysRecords:_e.recordList({tag:_e.tag,langSys:_e.pointer(qe)})})}))||[]},_e.prototype.parseFeatureList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,feature:_e.pointer({featureParams:_e.offset16,lookupListIndexes:_e.uShortList})}))||[]},_e.prototype.parseLookupList=function(D){return this.parsePointer(_e.list(_e.pointer(function(){const I=this.parseUShort();L.argument(1<=I&&I<=9,"GPOS/GSUB lookup type "+I+" unknown.");const H=this.parseUShort(),W=16&H;return{lookupType:I,lookupFlag:H,subtables:this.parseList(_e.pointer(D[I])),markFilteringSet:W?this.parseUShort():void 0}})))||[]},_e.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){const D=this.parseUShort(),I=this.parseUShort();return L.argument(D===1&&I<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:_e.offset32,featureTableSubstitutionOffset:_e.offset32})})||[]};const Be={getByte:we,getCard8:we,getUShort:Xe,getCard16:Xe,getShort:function(D,I){return D.getInt16(I,!1)},getULong:Qe,getFixed:Pe,getTag:function(D,I){let H="";for(let W=I;W<I+4;W+=1)H+=String.fromCharCode(D.getInt8(W));return H},getOffset:function(D,I,H){let W=0;for(let X=0;X<H;X+=1)W<<=8,W+=D.getUint8(I+X);return W},getBytes:function(D,I,H){const W=[];for(let X=I;X<H;X+=1)W.push(D.getUint8(X));return W},bytesToString:function(D){let I="";for(let H=0;H<D.length;H+=1)I+=String.fromCharCode(D[H]);return I},Parser:_e};function mt(D,I,H){D.segments.push({end:I,start:I,delta:-(I-H),offset:0,glyphIndex:H})}const ht={parse:function(D,I){const H={};H.version=Be.getUShort(D,I),L.argument(H.version===0,"cmap table version should be 0."),H.numTables=Be.getUShort(D,I+2);let W=-1;for(let re=H.numTables-1;re>=0;re-=1){const se=Be.getUShort(D,I+4+8*re),fe=Be.getUShort(D,I+4+8*re+2);if(se===3&&(fe===0||fe===1||fe===10)){W=Be.getULong(D,I+4+8*re+4);break}}if(W===-1)throw new Error("No valid cmap sub-tables found.");const X=new Be.Parser(D,I+W);if(H.format=X.parseUShort(),H.format===12)(function(re,se){let fe;se.parseUShort(),re.length=se.parseULong(),re.language=se.parseULong(),re.groupCount=fe=se.parseULong(),re.glyphIndexMap={};for(let le=0;le<fe;le+=1){const ke=se.parseULong(),je=se.parseULong();let Ke=se.parseULong();for(let nt=ke;nt<=je;nt+=1)re.glyphIndexMap[nt]=Ke,Ke++}})(H,X);else{if(H.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+H.format+").");(function(re,se,fe,le,ke){let je;re.length=se.parseUShort(),re.language=se.parseUShort(),re.segCount=je=se.parseUShort()>>1,se.skip("uShort",3),re.glyphIndexMap={};const Ke=new Be.Parser(fe,le+ke+14),nt=new Be.Parser(fe,le+ke+16+2*je),Ft=new Be.Parser(fe,le+ke+16+4*je),Tt=new Be.Parser(fe,le+ke+16+6*je);let Ht=le+ke+16+8*je;for(let St=0;St<je-1;St+=1){let ae;const u=Ke.parseUShort(),p=nt.parseUShort(),_=Ft.parseShort(),E=Tt.parseUShort();for(let T=p;T<=u;T+=1)E!==0?(Ht=Tt.offset+Tt.relativeOffset-2,Ht+=E,Ht+=2*(T-p),ae=Be.getUShort(fe,Ht),ae!==0&&(ae=ae+_&65535)):ae=T+_&65535,re.glyphIndexMap[T]=ae}})(H,X,D,I,W)}return H},make:function(D){let I,H=!0;for(I=D.length-1;I>0;I-=1)if(D.get(I).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),H=!1;break}let W=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:H?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:H?12:20}];H||(W=W.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),W=W.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);const X=new me.Table("cmap",W);for(X.segments=[],I=0;I<D.length;I+=1){const Ft=D.get(I);for(let Tt=0;Tt<Ft.unicodes.length;Tt+=1)mt(X,Ft.unicodes[Tt],I);X.segments=X.segments.sort(function(Tt,Ht){return Tt.start-Ht.start})}(function(Ft){Ft.segments.push({end:65535,start:65535,delta:1,offset:0})})(X);const re=X.segments.length;let se=0,fe=[],le=[],ke=[],je=[],Ke=[],nt=[];for(I=0;I<re;I+=1){const Ft=X.segments[I];Ft.end<=65535&&Ft.start<=65535?(fe=fe.concat({name:"end_"+I,type:"USHORT",value:Ft.end}),le=le.concat({name:"start_"+I,type:"USHORT",value:Ft.start}),ke=ke.concat({name:"idDelta_"+I,type:"SHORT",value:Ft.delta}),je=je.concat({name:"idRangeOffset_"+I,type:"USHORT",value:Ft.offset}),Ft.glyphId!==void 0&&(Ke=Ke.concat({name:"glyph_"+I,type:"USHORT",value:Ft.glyphId}))):se+=1,H||Ft.glyphIndex===void 0||(nt=nt.concat({name:"cmap12Start_"+I,type:"ULONG",value:Ft.start}),nt=nt.concat({name:"cmap12End_"+I,type:"ULONG",value:Ft.end}),nt=nt.concat({name:"cmap12Glyph_"+I,type:"ULONG",value:Ft.glyphIndex}))}if(X.segCountX2=2*(re-se),X.searchRange=2*Math.pow(2,Math.floor(Math.log(re-se)/Math.log(2))),X.entrySelector=Math.log(X.searchRange/2)/Math.log(2),X.rangeShift=X.segCountX2-X.searchRange,X.fields=X.fields.concat(fe),X.fields.push({name:"reservedPad",type:"USHORT",value:0}),X.fields=X.fields.concat(le),X.fields=X.fields.concat(ke),X.fields=X.fields.concat(je),X.fields=X.fields.concat(Ke),X.cmap4Length=14+2*fe.length+2+2*le.length+2*ke.length+2*je.length+2*Ke.length,!H){const Ft=16+4*nt.length;X.cmap12Offset=20+X.cmap4Length,X.fields=X.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Ft},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:nt.length/3}]),X.fields=X.fields.concat(nt)}return X}},Dt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Ye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Le=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ze(D){this.font=D}function Ue(D){this.cmap=D}function Ge(D,I){this.encoding=D,this.charset=I}function ut(D){switch(D.version){case 1:this.names=Le.slice();break;case 2:this.names=new Array(D.numberOfGlyphs);for(let I=0;I<D.numberOfGlyphs;I++)D.glyphNameIndex[I]<Le.length?this.names[I]=Le[D.glyphNameIndex[I]]:this.names[I]=D.names[D.glyphNameIndex[I]-Le.length];break;case 2.5:this.names=new Array(D.numberOfGlyphs);for(let I=0;I<D.numberOfGlyphs;I++)this.names[I]=Le[I+D.glyphNameIndex[I]];break;default:this.names=[]}}ze.prototype.charToGlyphIndex=function(D){const I=D.charCodeAt(0),H=this.font.glyphs;if(H)for(let W=0;W<H.length;W+=1){const X=H.get(W);for(let re=0;re<X.unicodes.length;re+=1)if(X.unicodes[re]===I)return W}return null},Ue.prototype.charToGlyphIndex=function(D){return this.cmap.glyphIndexMap[D.charCodeAt(0)]||0},Ge.prototype.charToGlyphIndex=function(D){const I=D.charCodeAt(0),H=this.encoding[I];return this.charset.indexOf(H)},ut.prototype.nameToGlyphIndex=function(D){return this.names.indexOf(D)},ut.prototype.glyphIndexToName=function(D){return this.names[D]};const at=function(D,I,H,W,X){D.beginPath(),D.moveTo(I,H),D.lineTo(W,X),D.stroke()};function Ut(D,I,H,W,X){let re;return(I&W)>0?(re=D.parseByte(),!(I&X)&&(re=-re),re=H+re):re=(I&X)>0?H:H+D.parseShort(),re}function Zt(D,I,H){const W=new Be.Parser(I,H);let X,re;if(D.numberOfContours=W.parseShort(),D._xMin=W.parseShort(),D._yMin=W.parseShort(),D._xMax=W.parseShort(),D._yMax=W.parseShort(),D.numberOfContours>0){const se=D.endPointIndices=[];for(let le=0;le<D.numberOfContours;le+=1)se.push(W.parseUShort());D.instructionLength=W.parseUShort(),D.instructions=[];for(let le=0;le<D.instructionLength;le+=1)D.instructions.push(W.parseByte());const fe=se[se.length-1]+1;X=[];for(let le=0;le<fe;le+=1)if(re=W.parseByte(),X.push(re),(8&re)>0){const ke=W.parseByte();for(let je=0;je<ke;je+=1)X.push(re),le+=1}if(L.argument(X.length===fe,"Bad flags."),se.length>0){const le=[];let ke;if(fe>0){for(let nt=0;nt<fe;nt+=1)re=X[nt],ke={},ke.onCurve=!!(1&re),ke.lastPointOfContour=se.indexOf(nt)>=0,le.push(ke);let je=0;for(let nt=0;nt<fe;nt+=1)re=X[nt],ke=le[nt],ke.x=Ut(W,re,je,2,16),je=ke.x;let Ke=0;for(let nt=0;nt<fe;nt+=1)re=X[nt],ke=le[nt],ke.y=Ut(W,re,Ke,4,32),Ke=ke.y}D.points=le}else D.points=[]}else if(D.numberOfContours===0)D.points=[];else{D.isComposite=!0,D.points=[],D.components=[];let se=!0;for(;se;){X=W.parseUShort();const fe={glyphIndex:W.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&X)>0?(2&X)>0?(fe.dx=W.parseShort(),fe.dy=W.parseShort()):fe.matchedPoints=[W.parseUShort(),W.parseUShort()]:(2&X)>0?(fe.dx=W.parseChar(),fe.dy=W.parseChar()):fe.matchedPoints=[W.parseByte(),W.parseByte()],(8&X)>0?fe.xScale=fe.yScale=W.parseF2Dot14():(64&X)>0?(fe.xScale=W.parseF2Dot14(),fe.yScale=W.parseF2Dot14()):(128&X)>0&&(fe.xScale=W.parseF2Dot14(),fe.scale01=W.parseF2Dot14(),fe.scale10=W.parseF2Dot14(),fe.yScale=W.parseF2Dot14()),D.components.push(fe),se=!!(32&X)}if(256&X){D.instructionLength=W.parseUShort(),D.instructions=[];for(let fe=0;fe<D.instructionLength;fe+=1)D.instructions.push(W.parseByte())}}}function Pt(D,I){const H=[];for(let W=0;W<D.length;W+=1){const X=D[W],re={x:I.xScale*X.x+I.scale01*X.y+I.dx,y:I.scale10*X.x+I.yScale*X.y+I.dy,onCurve:X.onCurve,lastPointOfContour:X.lastPointOfContour};H.push(re)}return H}function Ot(D){const I=new O;if(!D)return I;const H=function(W){const X=[];let re=[];for(let se=0;se<W.length;se+=1){const fe=W[se];re.push(fe),fe.lastPointOfContour&&(X.push(re),re=[])}return L.argument(re.length===0,"There are still points left in the current contour."),X}(D);for(let W=0;W<H.length;++W){const X=H[W];let re=null,se=X[X.length-1],fe=X[0];if(se.onCurve)I.moveTo(se.x,se.y);else if(fe.onCurve)I.moveTo(fe.x,fe.y);else{const le={x:.5*(se.x+fe.x),y:.5*(se.y+fe.y)};I.moveTo(le.x,le.y)}for(let le=0;le<X.length;++le)if(re=se,se=fe,fe=X[(le+1)%X.length],se.onCurve)I.lineTo(se.x,se.y);else{let ke=re,je=fe;re.onCurve||(ke={x:.5*(se.x+re.x),y:.5*(se.y+re.y)},I.lineTo(ke.x,ke.y)),fe.onCurve||(je={x:.5*(se.x+fe.x),y:.5*(se.y+fe.y)}),I.lineTo(ke.x,ke.y),I.quadraticCurveTo(se.x,se.y,je.x,je.y)}I.closePath()}return I}function vt(D,I){if(I.isComposite)for(let H=0;H<I.components.length;H+=1){const W=I.components[H],X=D.get(W.glyphIndex);if(X.getPath(),X.points){let re;if(W.matchedPoints===void 0)re=Pt(X.points,W);else{if(W.matchedPoints[0]>I.points.length-1||W.matchedPoints[1]>X.points.length-1)throw Error("Matched points out of range in "+I.name);const se=I.points[W.matchedPoints[0]];let fe=X.points[W.matchedPoints[1]];const le={xScale:W.xScale,scale01:W.scale01,scale10:W.scale10,yScale:W.yScale,dx:0,dy:0};fe=Pt([fe],le)[0],le.dx=se.x-fe.x,le.dy=se.y-fe.y,re=Pt(X.points,le)}I.points=I.points.concat(re)}}return Ot(I.points)}const Ve={getPath:Ot,parse:function(D,I,H,W){const X=new yt.GlyphSet(W);for(let re=0;re<H.length-1;re+=1){const se=H[re];se!==H[re+1]?X.push(re,yt.ttfGlyphLoader(W,re,Zt,D,I+se,vt)):X.push(re,yt.glyphLoader(W,re))}return X}};function pt(D){this.bindConstructorValues(D)}pt.prototype.bindConstructorValues=function(D){this.index=D.index||0,this.name=D.name||null,this.unicode=D.unicode||void 0,this.unicodes=D.unicodes||D.unicode!==void 0?[D.unicode]:[],D.xMin&&(this.xMin=D.xMin),D.yMin&&(this.yMin=D.yMin),D.xMax&&(this.xMax=D.xMax),D.yMax&&(this.yMax=D.yMax),D.advanceWidth&&(this.advanceWidth=D.advanceWidth),Object.defineProperty(this,"path",function(I,H){let W=H||new O;return{configurable:!0,get:function(){return typeof W=="function"&&(W=W()),W},set:function(X){W=X}}}(0,D.path))},pt.prototype.addUnicode=function(D){this.unicodes.length===0&&(this.unicode=D),this.unicodes.push(D)},pt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},pt.prototype.getPath=function(D,I,H,W,X){let re,se;D=D!==void 0?D:0,I=I!==void 0?I:0,H=H!==void 0?H:72,W||(W={});let fe=W.xScale,le=W.yScale;if(W.hinting&&X&&X.hinting&&(se=this.path&&X.hinting.exec(this,H)),se)re=Ve.getPath(se).commands,D=Math.round(D),I=Math.round(I),fe=le=1;else{re=this.path.commands;const je=1/this.path.unitsPerEm*H;fe===void 0&&(fe=je),le===void 0&&(le=je)}const ke=new O;for(let je=0;je<re.length;je+=1){const Ke=re[je];Ke.type==="M"?ke.moveTo(D+Ke.x*fe,I+-Ke.y*le):Ke.type==="L"?ke.lineTo(D+Ke.x*fe,I+-Ke.y*le):Ke.type==="Q"?ke.quadraticCurveTo(D+Ke.x1*fe,I+-Ke.y1*le,D+Ke.x*fe,I+-Ke.y*le):Ke.type==="C"?ke.curveTo(D+Ke.x1*fe,I+-Ke.y1*le,D+Ke.x2*fe,I+-Ke.y2*le,D+Ke.x*fe,I+-Ke.y*le):Ke.type==="Z"&&ke.closePath()}return ke},pt.prototype.getContours=function(){if(this.points===void 0)return[];const D=[];let I=[];for(let H=0;H<this.points.length;H+=1){const W=this.points[H];I.push(W),W.lastPointOfContour&&(D.push(I),I=[])}return L.argument(I.length===0,"There are still points left in the current contour."),D},pt.prototype.getMetrics=function(){const D=this.path.commands,I=[],H=[];for(let X=0;X<D.length;X+=1){const re=D[X];re.type!=="Z"&&(I.push(re.x),H.push(re.y)),re.type!=="Q"&&re.type!=="C"||(I.push(re.x1),H.push(re.y1)),re.type==="C"&&(I.push(re.x2),H.push(re.y2))}const W={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,H),xMax:Math.max.apply(null,I),yMax:Math.max.apply(null,H),leftSideBearing:this.leftSideBearing};return isFinite(W.xMin)||(W.xMin=0),isFinite(W.xMax)||(W.xMax=this.advanceWidth),isFinite(W.yMin)||(W.yMin=0),isFinite(W.yMax)||(W.yMax=0),W.rightSideBearing=this.advanceWidth-W.leftSideBearing-(W.xMax-W.xMin),W},pt.prototype.draw=function(D,I,H,W,X){this.getPath(I,H,W,X).draw(D)},pt.prototype.drawPoints=function(D,I,H,W){function X(ke,je,Ke,nt){const Ft=2*Math.PI;D.beginPath();for(let Tt=0;Tt<ke.length;Tt+=1)D.moveTo(je+ke[Tt].x*nt,Ke+ke[Tt].y*nt),D.arc(je+ke[Tt].x*nt,Ke+ke[Tt].y*nt,2,0,Ft,!1);D.closePath(),D.fill()}I=I!==void 0?I:0,H=H!==void 0?H:0,W=W!==void 0?W:24;const re=1/this.path.unitsPerEm*W,se=[],fe=[],le=this.path;for(let ke=0;ke<le.commands.length;ke+=1){const je=le.commands[ke];je.x!==void 0&&se.push({x:je.x,y:-je.y}),je.x1!==void 0&&fe.push({x:je.x1,y:-je.y1}),je.x2!==void 0&&fe.push({x:je.x2,y:-je.y2})}D.fillStyle="blue",X(se,I,H,re),D.fillStyle="red",X(fe,I,H,re)},pt.prototype.drawMetrics=function(D,I,H,W){let X;I=I!==void 0?I:0,H=H!==void 0?H:0,W=W!==void 0?W:24,X=1/this.path.unitsPerEm*W,D.lineWidth=1,D.strokeStyle="black",at(D,I,-1e4,I,1e4),at(D,-1e4,H,1e4,H);const re=this.xMin||0;let se=this.yMin||0;const fe=this.xMax||0;let le=this.yMax||0;const ke=this.advanceWidth||0;D.strokeStyle="blue",at(D,I+re*X,-1e4,I+re*X,1e4),at(D,I+fe*X,-1e4,I+fe*X,1e4),at(D,-1e4,H+-se*X,1e4,H+-se*X),at(D,-1e4,H+-le*X,1e4,H+-le*X),D.strokeStyle="green",at(D,I+ke*X,-1e4,I+ke*X,1e4)};const wt=pt;function Ct(D,I,H){Object.defineProperty(D,I,{get:function(){return D.path,D[H]},set:function(W){D[H]=W},enumerable:!0,configurable:!0})}function $t(D,I){if(this.font=D,this.glyphs={},Array.isArray(I))for(let H=0;H<I.length;H++)this.glyphs[H]=I[H];this.length=I&&I.length||0}$t.prototype.get=function(D){return typeof this.glyphs[D]=="function"&&(this.glyphs[D]=this.glyphs[D]()),this.glyphs[D]},$t.prototype.push=function(D,I){this.glyphs[D]=I,this.length++};const yt={GlyphSet:$t,glyphLoader:function(D,I){return new wt({index:I,font:D})},ttfGlyphLoader:function(D,I,H,W,X,re){return function(){const se=new wt({index:I,font:D});return se.path=function(){H(se,W,X);const fe=re(D.glyphs,se);return fe.unitsPerEm=D.unitsPerEm,fe},Ct(se,"xMin","_xMin"),Ct(se,"xMax","_xMax"),Ct(se,"yMin","_yMin"),Ct(se,"yMax","_yMax"),se}},cffGlyphLoader:function(D,I,H,W){return function(){const X=new wt({index:I,font:D});return X.path=function(){const re=H(D,X,W);return re.unitsPerEm=D.unitsPerEm,re},X}}};function lt(D,I){if(D===I)return!0;if(Array.isArray(D)&&Array.isArray(I)){if(D.length!==I.length)return!1;for(let H=0;H<D.length;H+=1)if(!lt(D[H],I[H]))return!1;return!0}return!1}function dt(D){let I;return I=D.length<1240?107:D.length<33900?1131:32768,I}function xt(D,I,H){const W=[],X=[],re=Be.getCard16(D,I);let se,fe;if(re!==0){const le=Be.getByte(D,I+2);se=I+(re+1)*le+2;let ke=I+3;for(let je=0;je<re+1;je+=1)W.push(Be.getOffset(D,ke,le)),ke+=le;fe=se+W[re]}else fe=I+2;for(let le=0;le<W.length-1;le+=1){let ke=Be.getBytes(D,se+W[le],se+W[le+1]);H&&(ke=H(ke)),X.push(ke)}return{objects:X,startOffset:I,endOffset:fe}}function Wt(D,I){let H,W,X,re;if(I===28)return H=D.parseByte(),W=D.parseByte(),H<<8|W;if(I===29)return H=D.parseByte(),W=D.parseByte(),X=D.parseByte(),re=D.parseByte(),H<<24|W<<16|X<<8|re;if(I===30)return function(se){let fe="";const le=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const ke=se.parseByte(),je=ke>>4,Ke=15&ke;if(je===15||(fe+=le[je],Ke===15))break;fe+=le[Ke]}return parseFloat(fe)}(D);if(I>=32&&I<=246)return I-139;if(I>=247&&I<=250)return H=D.parseByte(),256*(I-247)+H+108;if(I>=251&&I<=254)return H=D.parseByte(),256*-(I-251)-H-108;throw new Error("Invalid b0 "+I)}function hr(D,I,H){I=I!==void 0?I:0;const W=new Be.Parser(D,I),X=[];let re=[];for(H=H!==void 0?H:D.length;W.relativeOffset<H;){let se=W.parseByte();se<=21?(se===12&&(se=1200+W.parseByte()),X.push([se,re]),re=[]):re.push(Wt(W,se))}return function(se){const fe={};for(let le=0;le<se.length;le+=1){const ke=se[le][0],je=se[le][1];let Ke;if(Ke=je.length===1?je[0]:je,fe.hasOwnProperty(ke)&&!isNaN(fe[ke]))throw new Error("Object "+fe+" already has key "+ke);fe[ke]=Ke}return fe}(X)}function Yt(D,I){return I<=390?Dt[I]:D[I-391]}function vr(D,I,H){const W={};let X;for(let re=0;re<I.length;re+=1){const se=I[re];if(Array.isArray(se.type)){const fe=[];fe.length=se.type.length;for(let le=0;le<se.type.length;le++)X=D[se.op]!==void 0?D[se.op][le]:void 0,X===void 0&&(X=se.value!==void 0&&se.value[le]!==void 0?se.value[le]:null),se.type[le]==="SID"&&(X=Yt(H,X)),fe[le]=X;W[se.name]=fe}else X=D[se.op],X===void 0&&(X=se.value!==void 0?se.value:null),se.type==="SID"&&(X=Yt(H,X)),W[se.name]=X}return W}const fr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],br=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function $r(D,I){return vr(hr(D,0,D.byteLength),fr,I)}function Lr(D,I,H,W){return vr(hr(D,I,H),br,W)}function fn(D,I,H,W){const X=[];for(let re=0;re<H.length;re+=1){const se=$r(new DataView(new Uint8Array(H[re]).buffer),W);se._subrs=[],se._subrsBias=0;const fe=se.private[0],le=se.private[1];if(fe!==0&&le!==0){const ke=Lr(D,le+I,fe,W);if(se._defaultWidthX=ke.defaultWidthX,se._nominalWidthX=ke.nominalWidthX,ke.subrs!==0){const je=xt(D,le+ke.subrs+I);se._subrs=je.objects,se._subrsBias=dt(se._subrs)}se._privateDict=ke}X.push(se)}return X}function pn(D,I,H){let W,X,re,se;const fe=new O,le=[];let ke,je,Ke,nt,Ft=0,Tt=!1,Ht=!1,St=0,ae=0;if(D.isCIDFont){const E=D.tables.cff.topDict._fdSelect[I.index],T=D.tables.cff.topDict._fdArray[E];ke=T._subrs,je=T._subrsBias,Ke=T._defaultWidthX,nt=T._nominalWidthX}else ke=D.tables.cff.topDict._subrs,je=D.tables.cff.topDict._subrsBias,Ke=D.tables.cff.topDict._defaultWidthX,nt=D.tables.cff.topDict._nominalWidthX;let u=Ke;function p(E,T){Ht&&fe.closePath(),fe.moveTo(E,T),Ht=!0}function _(){let E;E=le.length%2!=0,E&&!Tt&&(u=le.shift()+nt),Ft+=le.length>>1,le.length=0,Tt=!0}return function E(T){let R,N,z,Z,oe,ue,ge,Ae,$e,We,Je,st,kt=0;for(;kt<T.length;){let Mt=T[kt];switch(kt+=1,Mt){case 1:case 3:case 18:case 23:_();break;case 4:le.length>1&&!Tt&&(u=le.shift()+nt,Tt=!0),ae+=le.pop(),p(St,ae);break;case 5:for(;le.length>0;)St+=le.shift(),ae+=le.shift(),fe.lineTo(St,ae);break;case 6:for(;le.length>0&&(St+=le.shift(),fe.lineTo(St,ae),le.length!==0);)ae+=le.shift(),fe.lineTo(St,ae);break;case 7:for(;le.length>0&&(ae+=le.shift(),fe.lineTo(St,ae),le.length!==0);)St+=le.shift(),fe.lineTo(St,ae);break;case 8:for(;le.length>0;)W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se+le.shift(),fe.curveTo(W,X,re,se,St,ae);break;case 10:oe=le.pop()+je,ue=ke[oe],ue&&E(ue);break;case 11:return;case 12:switch(Mt=T[kt],kt+=1,Mt){case 35:W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),ge=re+le.shift(),Ae=se+le.shift(),$e=ge+le.shift(),We=Ae+le.shift(),Je=$e+le.shift(),st=We+le.shift(),St=Je+le.shift(),ae=st+le.shift(),le.shift(),fe.curveTo(W,X,re,se,ge,Ae),fe.curveTo($e,We,Je,st,St,ae);break;case 34:W=St+le.shift(),X=ae,re=W+le.shift(),se=X+le.shift(),ge=re+le.shift(),Ae=se,$e=ge+le.shift(),We=se,Je=$e+le.shift(),st=ae,St=Je+le.shift(),fe.curveTo(W,X,re,se,ge,Ae),fe.curveTo($e,We,Je,st,St,ae);break;case 36:W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),ge=re+le.shift(),Ae=se,$e=ge+le.shift(),We=se,Je=$e+le.shift(),st=We+le.shift(),St=Je+le.shift(),fe.curveTo(W,X,re,se,ge,Ae),fe.curveTo($e,We,Je,st,St,ae);break;case 37:W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),ge=re+le.shift(),Ae=se+le.shift(),$e=ge+le.shift(),We=Ae+le.shift(),Je=$e+le.shift(),st=We+le.shift(),Math.abs(Je-St)>Math.abs(st-ae)?St=Je+le.shift():ae=st+le.shift(),fe.curveTo(W,X,re,se,ge,Ae),fe.curveTo($e,We,Je,st,St,ae);break;default:console.log("Glyph "+I.index+": unknown operator 1200"+Mt),le.length=0}break;case 14:le.length>0&&!Tt&&(u=le.shift()+nt,Tt=!0),Ht&&(fe.closePath(),Ht=!1);break;case 19:case 20:_(),kt+=Ft+7>>3;break;case 21:le.length>2&&!Tt&&(u=le.shift()+nt,Tt=!0),ae+=le.pop(),St+=le.pop(),p(St,ae);break;case 22:le.length>1&&!Tt&&(u=le.shift()+nt,Tt=!0),St+=le.pop(),p(St,ae);break;case 24:for(;le.length>2;)W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se+le.shift(),fe.curveTo(W,X,re,se,St,ae);St+=le.shift(),ae+=le.shift(),fe.lineTo(St,ae);break;case 25:for(;le.length>6;)St+=le.shift(),ae+=le.shift(),fe.lineTo(St,ae);W=St+le.shift(),X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se+le.shift(),fe.curveTo(W,X,re,se,St,ae);break;case 26:for(le.length%2&&(St+=le.shift());le.length>0;)W=St,X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re,ae=se+le.shift(),fe.curveTo(W,X,re,se,St,ae);break;case 27:for(le.length%2&&(ae+=le.shift());le.length>0;)W=St+le.shift(),X=ae,re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se,fe.curveTo(W,X,re,se,St,ae);break;case 28:R=T[kt],N=T[kt+1],le.push((R<<24|N<<16)>>16),kt+=2;break;case 29:oe=le.pop()+D.gsubrsBias,ue=D.gsubrs[oe],ue&&E(ue);break;case 30:for(;le.length>0&&(W=St,X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se+(le.length===1?le.shift():0),fe.curveTo(W,X,re,se,St,ae),le.length!==0);)W=St+le.shift(),X=ae,re=W+le.shift(),se=X+le.shift(),ae=se+le.shift(),St=re+(le.length===1?le.shift():0),fe.curveTo(W,X,re,se,St,ae);break;case 31:for(;le.length>0&&(W=St+le.shift(),X=ae,re=W+le.shift(),se=X+le.shift(),ae=se+le.shift(),St=re+(le.length===1?le.shift():0),fe.curveTo(W,X,re,se,St,ae),le.length!==0);)W=St,X=ae+le.shift(),re=W+le.shift(),se=X+le.shift(),St=re+le.shift(),ae=se+(le.length===1?le.shift():0),fe.curveTo(W,X,re,se,St,ae);break;default:Mt<32?console.log("Glyph "+I.index+": unknown operator "+Mt):Mt<247?le.push(Mt-139):Mt<251?(R=T[kt],kt+=1,le.push(256*(Mt-247)+R+108)):Mt<255?(R=T[kt],kt+=1,le.push(256*-(Mt-251)-R-108)):(R=T[kt],N=T[kt+1],z=T[kt+2],Z=T[kt+3],kt+=4,le.push((R<<24|N<<16|z<<8|Z)/65536))}}}(H),I.advanceWidth=u,fe}function _r(D,I){let H,W=Dt.indexOf(D);return W>=0&&(H=W),W=I.indexOf(D),W>=0?H=W+Dt.length:(H=Dt.length+I.length,I.push(D)),H}function ir(D,I,H){const W={};for(let X=0;X<D.length;X+=1){const re=D[X];let se=I[re.name];se===void 0||lt(se,re.value)||(re.type==="SID"&&(se=_r(se,H)),W[re.op]={name:re.name,type:re.type,value:se})}return W}function Jt(D,I){const H=new me.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return H.dict=ir(fr,D,I),H}function gt(D){const I=new me.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return I.topDicts=[{name:"topDict_0",type:"TABLE",value:D}],I}function it(D){const I=[],H=D.path;I.push({name:"width",type:"NUMBER",value:D.advanceWidth});let W=0,X=0;for(let re=0;re<H.commands.length;re+=1){let se,fe,le=H.commands[re];if(le.type==="Q"){const ke=.3333333333333333,je=2/3;le={type:"C",x:le.x,y:le.y,x1:ke*W+je*le.x1,y1:ke*X+je*le.y1,x2:ke*le.x+je*le.x1,y2:ke*le.y+je*le.y1}}if(le.type==="M")se=Math.round(le.x-W),fe=Math.round(le.y-X),I.push({name:"dx",type:"NUMBER",value:se}),I.push({name:"dy",type:"NUMBER",value:fe}),I.push({name:"rmoveto",type:"OP",value:21}),W=Math.round(le.x),X=Math.round(le.y);else if(le.type==="L")se=Math.round(le.x-W),fe=Math.round(le.y-X),I.push({name:"dx",type:"NUMBER",value:se}),I.push({name:"dy",type:"NUMBER",value:fe}),I.push({name:"rlineto",type:"OP",value:5}),W=Math.round(le.x),X=Math.round(le.y);else if(le.type==="C"){const ke=Math.round(le.x1-W),je=Math.round(le.y1-X),Ke=Math.round(le.x2-le.x1),nt=Math.round(le.y2-le.y1);se=Math.round(le.x-le.x2),fe=Math.round(le.y-le.y2),I.push({name:"dx1",type:"NUMBER",value:ke}),I.push({name:"dy1",type:"NUMBER",value:je}),I.push({name:"dx2",type:"NUMBER",value:Ke}),I.push({name:"dy2",type:"NUMBER",value:nt}),I.push({name:"dx",type:"NUMBER",value:se}),I.push({name:"dy",type:"NUMBER",value:fe}),I.push({name:"rrcurveto",type:"OP",value:8}),W=Math.round(le.x),X=Math.round(le.y)}}return I.push({name:"endchar",type:"OP",value:14}),I}const ct={parse:function(D,I,H){H.tables.cff={};const W=function(Tt,Ht){const St={};return St.formatMajor=Be.getCard8(Tt,Ht),St.formatMinor=Be.getCard8(Tt,Ht+1),St.size=Be.getCard8(Tt,Ht+2),St.offsetSize=Be.getCard8(Tt,Ht+3),St.startOffset=Ht,St.endOffset=Ht+4,St}(D,I),X=xt(D,W.endOffset,Be.bytesToString),re=xt(D,X.endOffset),se=xt(D,re.endOffset,Be.bytesToString),fe=xt(D,se.endOffset);H.gsubrs=fe.objects,H.gsubrsBias=dt(H.gsubrs);const le=fn(D,I,re.objects,se.objects);if(le.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+le.length);const ke=le[0];if(H.tables.cff.topDict=ke,ke._privateDict&&(H.defaultWidthX=ke._privateDict.defaultWidthX,H.nominalWidthX=ke._privateDict.nominalWidthX),ke.ros[0]!==void 0&&ke.ros[1]!==void 0&&(H.isCIDFont=!0),H.isCIDFont){let Tt=ke.fdArray,Ht=ke.fdSelect;if(Tt===0||Ht===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");Tt+=I;const St=fn(D,I,xt(D,Tt).objects,se.objects);ke._fdArray=St,Ht+=I,ke._fdSelect=function(ae,u,p,_){const E=[];let T;const R=new Be.Parser(ae,u),N=R.parseCard8();if(N===0)for(let z=0;z<p;z++){if(T=R.parseCard8(),T>=_)throw new Error("CFF table CID Font FDSelect has bad FD index value "+T+" (FD count "+_+")");E.push(T)}else{if(N!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+N);{const z=R.parseCard16();let Z,oe=R.parseCard16();if(oe!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+oe);for(let ue=0;ue<z;ue++){if(T=R.parseCard8(),Z=R.parseCard16(),T>=_)throw new Error("CFF table CID Font FDSelect has bad FD index value "+T+" (FD count "+_+")");if(Z>p)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Z);for(;oe<Z;oe++)E.push(T);oe=Z}if(Z!==p)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Z)}}return E}(D,Ht,H.numGlyphs,St.length)}const je=I+ke.private[1],Ke=Lr(D,je,ke.private[0],se.objects);if(H.defaultWidthX=Ke.defaultWidthX,H.nominalWidthX=Ke.nominalWidthX,Ke.subrs!==0){const Tt=xt(D,je+Ke.subrs);H.subrs=Tt.objects,H.subrsBias=dt(H.subrs)}else H.subrs=[],H.subrsBias=0;const nt=xt(D,I+ke.charStrings);H.nGlyphs=nt.objects.length;const Ft=function(Tt,Ht,St,ae){let u,p;const _=new Be.Parser(Tt,Ht);St-=1;const E=[".notdef"],T=_.parseCard8();if(T===0)for(let R=0;R<St;R+=1)u=_.parseSID(),E.push(Yt(ae,u));else if(T===1)for(;E.length<=St;){u=_.parseSID(),p=_.parseCard8();for(let R=0;R<=p;R+=1)E.push(Yt(ae,u)),u+=1}else{if(T!==2)throw new Error("Unknown charset format "+T);for(;E.length<=St;){u=_.parseSID(),p=_.parseCard16();for(let R=0;R<=p;R+=1)E.push(Yt(ae,u)),u+=1}}return E}(D,I+ke.charset,H.nGlyphs,se.objects);ke.encoding===0?H.cffEncoding=new Ge(Se,Ft):ke.encoding===1?H.cffEncoding=new Ge(Ye,Ft):H.cffEncoding=function(Tt,Ht,St){let ae;const u={},p=new Be.Parser(Tt,Ht),_=p.parseCard8();if(_===0){const E=p.parseCard8();for(let T=0;T<E;T+=1)ae=p.parseCard8(),u[ae]=T}else{if(_!==1)throw new Error("Unknown encoding format "+_);{const E=p.parseCard8();ae=1;for(let T=0;T<E;T+=1){const R=p.parseCard8(),N=p.parseCard8();for(let z=R;z<=R+N;z+=1)u[z]=ae,ae+=1}}}return new Ge(u,St)}(D,I+ke.encoding,Ft),H.encoding=H.encoding||H.cffEncoding,H.glyphs=new yt.GlyphSet(H);for(let Tt=0;Tt<H.nGlyphs;Tt+=1){const Ht=nt.objects[Tt];H.glyphs.push(Tt,yt.cffGlyphLoader(H,Tt,pn,Ht))}},make:function(D,I){const H=new me.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),W=1/I.unitsPerEm,X={version:I.version,fullName:I.fullName,familyName:I.familyName,weight:I.weightName,fontBBox:I.fontBBox||[0,0,0,0],fontMatrix:[W,0,0,W,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},re=[];let se;for(let je=1;je<D.length;je+=1)se=D.get(je),re.push(se.name);const fe=[];H.header=new me.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),H.nameIndex=function(je){const Ke=new me.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ke.names=[];for(let nt=0;nt<je.length;nt+=1)Ke.names.push({name:"name_"+nt,type:"NAME",value:je[nt]});return Ke}([I.postScriptName]);let le=Jt(X,fe);H.topDictIndex=gt(le),H.globalSubrIndex=new me.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),H.charsets=function(je,Ke){const nt=new me.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let Ft=0;Ft<je.length;Ft+=1){const Tt=_r(je[Ft],Ke);nt.fields.push({name:"glyph_"+Ft,type:"SID",value:Tt})}return nt}(re,fe),H.charStringsIndex=function(je){const Ke=new me.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let nt=0;nt<je.length;nt+=1){const Ft=je.get(nt),Tt=it(Ft);Ke.charStrings.push({name:Ft.name,type:"CHARSTRING",value:Tt})}return Ke}(D),H.privateDict=function(je,Ke){const nt=new me.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return nt.dict=ir(br,{},Ke),nt}(0,fe),H.stringIndex=function(je){const Ke=new me.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ke.strings=[];for(let nt=0;nt<je.length;nt+=1)Ke.strings.push({name:"string_"+nt,type:"STRING",value:je[nt]});return Ke}(fe);const ke=H.header.sizeOf()+H.nameIndex.sizeOf()+H.topDictIndex.sizeOf()+H.stringIndex.sizeOf()+H.globalSubrIndex.sizeOf();return X.charset=ke,X.encoding=0,X.charStrings=X.charset+H.charsets.sizeOf(),X.private[1]=X.charStrings+H.charStringsIndex.sizeOf(),le=Jt(X,fe),H.topDictIndex=gt(le),H}},De={parse:function(D,I){const H={},W=new Be.Parser(D,I);return H.version=W.parseVersion(),H.fontRevision=Math.round(1e3*W.parseFixed())/1e3,H.checkSumAdjustment=W.parseULong(),H.magicNumber=W.parseULong(),L.argument(H.magicNumber===1594834165,"Font header has wrong magic number."),H.flags=W.parseUShort(),H.unitsPerEm=W.parseUShort(),H.created=W.parseLongDateTime(),H.modified=W.parseLongDateTime(),H.xMin=W.parseShort(),H.yMin=W.parseShort(),H.xMax=W.parseShort(),H.yMax=W.parseShort(),H.macStyle=W.parseUShort(),H.lowestRecPPEM=W.parseUShort(),H.fontDirectionHint=W.parseShort(),H.indexToLocFormat=W.parseShort(),H.glyphDataFormat=W.parseShort(),H},make:function(D){const I=Math.round(new Date().getTime()/1e3)+2082844800;let H=I;return D.createdTimestamp&&(H=D.createdTimestamp+2082844800),new me.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:H},{name:"modified",type:"LONGDATETIME",value:I},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],D)}},er={parse:function(D,I){const H={},W=new Be.Parser(D,I);return H.version=W.parseVersion(),H.ascender=W.parseShort(),H.descender=W.parseShort(),H.lineGap=W.parseShort(),H.advanceWidthMax=W.parseUShort(),H.minLeftSideBearing=W.parseShort(),H.minRightSideBearing=W.parseShort(),H.xMaxExtent=W.parseShort(),H.caretSlopeRise=W.parseShort(),H.caretSlopeRun=W.parseShort(),H.caretOffset=W.parseShort(),W.relativeOffset+=8,H.metricDataFormat=W.parseShort(),H.numberOfHMetrics=W.parseUShort(),H},make:function(D){return new me.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],D)}},Cr={parse:function(D,I,H,W,X){let re,se;const fe=new Be.Parser(D,I);for(let le=0;le<W;le+=1){le<H&&(re=fe.parseUShort(),se=fe.parseShort());const ke=X.get(le);ke.advanceWidth=re,ke.leftSideBearing=se}},make:function(D){const I=new me.Table("hmtx",[]);for(let H=0;H<D.length;H+=1){const W=D.get(H),X=W.advanceWidth||0,re=W.leftSideBearing||0;I.fields.push({name:"advanceWidth_"+H,type:"USHORT",value:X}),I.fields.push({name:"leftSideBearing_"+H,type:"SHORT",value:re})}return I}},wr={make:function(D){const I=new me.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:D.length}]);let H="";const W=12+4*D.length;for(let X=0;X<D.length;++X){let re=H.indexOf(D[X]);re<0&&(re=H.length,H+=D[X]),I.fields.push({name:"offset "+X,type:"USHORT",value:W+re}),I.fields.push({name:"length "+X,type:"USHORT",value:D[X].length})}return I.fields.push({name:"stringPool",type:"CHARARRAY",value:H}),I},parse:function(D,I){const H=new Be.Parser(D,I),W=H.parseULong();L.argument(W===1,"Unsupported ltag table version."),H.skip("uLong",1);const X=H.parseULong(),re=[];for(let se=0;se<X;se++){let fe="";const le=I+H.parseUShort(),ke=H.parseUShort();for(let je=le;je<le+ke;++je)fe+=String.fromCharCode(D.getInt8(je));re.push(fe)}return re}},Xt={parse:function(D,I){const H={},W=new Be.Parser(D,I);return H.version=W.parseVersion(),H.numGlyphs=W.parseUShort(),H.version===1&&(H.maxPoints=W.parseUShort(),H.maxContours=W.parseUShort(),H.maxCompositePoints=W.parseUShort(),H.maxCompositeContours=W.parseUShort(),H.maxZones=W.parseUShort(),H.maxTwilightPoints=W.parseUShort(),H.maxStorage=W.parseUShort(),H.maxFunctionDefs=W.parseUShort(),H.maxInstructionDefs=W.parseUShort(),H.maxStackElements=W.parseUShort(),H.maxSizeOfInstructions=W.parseUShort(),H.maxComponentElements=W.parseUShort(),H.maxComponentDepth=W.parseUShort()),H},make:function(D){return new me.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:D}])}},Vt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],zt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},bt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Lt(D,I,H){switch(D){case 0:if(I===65535)return"und";if(H)return H[I];break;case 1:return zt[I];case 3:return _t[I]}}const Gt="utf-16",lr={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},rr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Kt(D,I,H){switch(D){case 0:return Gt;case 1:return rr[H]||lr[I];case 3:if(I===1||I===10)return Gt}}function ot(D){const I={};for(let H in D)I[D[H]]=parseInt(H);return I}function ur(D,I,H,W,X,re){return new me.Record("NameRecord",[{name:"platformID",type:"USHORT",value:D},{name:"encodingID",type:"USHORT",value:I},{name:"languageID",type:"USHORT",value:H},{name:"nameID",type:"USHORT",value:W},{name:"length",type:"USHORT",value:X},{name:"offset",type:"USHORT",value:re}])}function nr(D,I){let H=function(W,X){const re=W.length,se=X.length-re+1;e:for(let fe=0;fe<se;fe++)for(;fe<se;fe++){for(let le=0;le<re;le++)if(X[fe+le]!==W[le])continue e;return fe}return-1}(D,I);if(H<0){H=I.length;let W=0;const X=D.length;for(;W<X;++W)I.push(D[W])}return H}const kr={parse:function(D,I,H){const W={},X=new Be.Parser(D,I),re=X.parseUShort(),se=X.parseUShort(),fe=X.offset+X.parseUShort();for(let le=0;le<se;le++){const ke=X.parseUShort(),je=X.parseUShort(),Ke=X.parseUShort(),nt=X.parseUShort(),Ft=Vt[nt]||nt,Tt=X.parseUShort(),Ht=X.parseUShort(),St=Lt(ke,Ke,H),ae=Kt(ke,je,Ke);if(ae!==void 0&&St!==void 0){let u;if(u=ae===Gt?B.UTF16(D,fe+Ht,Tt):B.MACSTRING(D,fe+Ht,Tt,ae),u){let p=W[Ft];p===void 0&&(p=W[Ft]={}),p[St]=u}}}return re===1&&X.parseUShort(),W},make:function(D,I){let H;const W=[],X={},re=ot(Vt);for(let Ke in D){let nt=re[Ke];if(nt===void 0&&(nt=Ke),H=parseInt(nt),isNaN(H))throw new Error('Name table entry "'+Ke+'" does not exist, see nameTableNames for complete list.');X[H]=D[Ke],W.push(H)}const se=ot(zt),fe=ot(_t),le=[],ke=[];for(let Ke=0;Ke<W.length;Ke++){H=W[Ke];const nt=X[H];for(let Ft in nt){const Tt=nt[Ft];let Ht=1,St=se[Ft],ae=bt[St];const u=Kt(Ht,ae,St);let p=j.MACSTRING(Tt,u);p===void 0&&(Ht=0,St=I.indexOf(Ft),St<0&&(St=I.length,I.push(Ft)),ae=4,p=j.UTF16(Tt));const _=nr(p,ke);le.push(ur(Ht,ae,St,H,p.length,_));const E=fe[Ft];if(E!==void 0){const T=j.UTF16(Tt),R=nr(T,ke);le.push(ur(3,1,E,H,T.length,R))}}}le.sort(function(Ke,nt){return Ke.platformID-nt.platformID||Ke.encodingID-nt.encodingID||Ke.languageID-nt.languageID||Ke.nameID-nt.nameID});const je=new me.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:le.length},{name:"stringOffset",type:"USHORT",value:6+12*le.length}]);for(let Ke=0;Ke<le.length;Ke++)je.fields.push({name:"record_"+Ke,type:"RECORD",value:le[Ke]});return je.fields.push({name:"strings",type:"LITERAL",value:ke}),je}},Ur=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],dr={parse:function(D,I){const H={},W=new Be.Parser(D,I);H.version=W.parseUShort(),H.xAvgCharWidth=W.parseShort(),H.usWeightClass=W.parseUShort(),H.usWidthClass=W.parseUShort(),H.fsType=W.parseUShort(),H.ySubscriptXSize=W.parseShort(),H.ySubscriptYSize=W.parseShort(),H.ySubscriptXOffset=W.parseShort(),H.ySubscriptYOffset=W.parseShort(),H.ySuperscriptXSize=W.parseShort(),H.ySuperscriptYSize=W.parseShort(),H.ySuperscriptXOffset=W.parseShort(),H.ySuperscriptYOffset=W.parseShort(),H.yStrikeoutSize=W.parseShort(),H.yStrikeoutPosition=W.parseShort(),H.sFamilyClass=W.parseShort(),H.panose=[];for(let X=0;X<10;X++)H.panose[X]=W.parseByte();return H.ulUnicodeRange1=W.parseULong(),H.ulUnicodeRange2=W.parseULong(),H.ulUnicodeRange3=W.parseULong(),H.ulUnicodeRange4=W.parseULong(),H.achVendID=String.fromCharCode(W.parseByte(),W.parseByte(),W.parseByte(),W.parseByte()),H.fsSelection=W.parseUShort(),H.usFirstCharIndex=W.parseUShort(),H.usLastCharIndex=W.parseUShort(),H.sTypoAscender=W.parseShort(),H.sTypoDescender=W.parseShort(),H.sTypoLineGap=W.parseShort(),H.usWinAscent=W.parseUShort(),H.usWinDescent=W.parseUShort(),H.version>=1&&(H.ulCodePageRange1=W.parseULong(),H.ulCodePageRange2=W.parseULong()),H.version>=2&&(H.sxHeight=W.parseShort(),H.sCapHeight=W.parseShort(),H.usDefaultChar=W.parseUShort(),H.usBreakChar=W.parseUShort(),H.usMaxContent=W.parseUShort()),H},make:function(D){return new me.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],D)},unicodeRanges:Ur,getUnicodeRange:function(D){for(let I=0;I<Ur.length;I+=1){const H=Ur[I];if(D>=H.begin&&D<H.end)return I}return-1}},mr={parse:function(D,I){const H={},W=new Be.Parser(D,I);switch(H.version=W.parseVersion(),H.italicAngle=W.parseFixed(),H.underlinePosition=W.parseShort(),H.underlineThickness=W.parseShort(),H.isFixedPitch=W.parseULong(),H.minMemType42=W.parseULong(),H.maxMemType42=W.parseULong(),H.minMemType1=W.parseULong(),H.maxMemType1=W.parseULong(),H.version){case 1:H.names=Le.slice();break;case 2:H.numberOfGlyphs=W.parseUShort(),H.glyphNameIndex=new Array(H.numberOfGlyphs);for(let X=0;X<H.numberOfGlyphs;X++)H.glyphNameIndex[X]=W.parseUShort();H.names=[];for(let X=0;X<H.numberOfGlyphs;X++)if(H.glyphNameIndex[X]>=Le.length){const re=W.parseChar();H.names.push(W.parseString(re))}break;case 2.5:H.numberOfGlyphs=W.parseUShort(),H.offset=new Array(H.numberOfGlyphs);for(let X=0;X<H.numberOfGlyphs;X++)H.offset[X]=W.parseChar()}return H},make:function(){return new me.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ar=new Array(9);ar[1]=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),deltaGlyphId:this.parseUShort()}:I===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),substitute:this.parseOffset16List()}:void L.assert(!1,"0x"+D.toString(16)+": lookup type 1 format must be 1 or 2.")},ar[2]=function(){const D=this.parseUShort();return L.argument(D===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:D,coverage:this.parsePointer(_e.coverage),sequences:this.parseListOfLists()}},ar[3]=function(){const D=this.parseUShort();return L.argument(D===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:D,coverage:this.parsePointer(_e.coverage),alternateSets:this.parseListOfLists()}},ar[4]=function(){const D=this.parseUShort();return L.argument(D===1,"GSUB ligature table identifier-format must be 1"),{substFormat:D,coverage:this.parsePointer(_e.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const Yr={sequenceIndex:_e.uShort,lookupListIndex:_e.uShort};ar[5]=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort();if(I===1)return{substFormat:I,coverage:this.parsePointer(_e.coverage),ruleSets:this.parseListOfLists(function(){const H=this.parseUShort(),W=this.parseUShort();return{input:this.parseUShortList(H-1),lookupRecords:this.parseRecordList(W,Yr)}})};if(I===2)return{substFormat:I,coverage:this.parsePointer(_e.coverage),classDef:this.parsePointer(_e.classDef),classSets:this.parseListOfLists(function(){const H=this.parseUShort(),W=this.parseUShort();return{classes:this.parseUShortList(H-1),lookupRecords:this.parseRecordList(W,Yr)}})};if(I===3){const H=this.parseUShort(),W=this.parseUShort();return{substFormat:I,coverages:this.parseList(H,_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(W,Yr)}}L.assert(!1,"0x"+D.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ar[6]=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yr)}})}:I===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),backtrackClassDef:this.parsePointer(_e.classDef),inputClassDef:this.parsePointer(_e.classDef),lookaheadClassDef:this.parsePointer(_e.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yr)}})}:I===3?{substFormat:3,backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),inputCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(Yr)}:void L.assert(!1,"0x"+D.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ar[7]=function(){const D=this.parseUShort();L.argument(D===1,"GSUB Extension Substitution subtable identifier-format must be 1");const I=this.parseUShort(),H=new _e(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:I,extension:ar[I].call(H)}},ar[8]=function(){const D=this.parseUShort();return L.argument(D===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:D,coverage:this.parsePointer(_e.coverage),backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),substitutes:this.parseUShortList()}};const nn=new Array(9);nn[1]=function(D){return D.substFormat===1?new me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new me.Coverage(D.coverage)},{name:"deltaGlyphID",type:"USHORT",value:D.deltaGlyphId}]):new me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new me.Coverage(D.coverage)}].concat(me.ushortList("substitute",D.substitute)))},nn[3]=function(D){return L.assert(D.substFormat===1,"Lookup type 3 substFormat must be 1."),new me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new me.Coverage(D.coverage)}].concat(me.tableList("altSet",D.alternateSets,function(I){return new me.Table("alternateSetTable",me.ushortList("alternate",I))})))},nn[4]=function(D){return L.assert(D.substFormat===1,"Lookup type 4 substFormat must be 1."),new me.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new me.Coverage(D.coverage)}].concat(me.tableList("ligSet",D.ligatureSets,function(I){return new me.Table("ligatureSetTable",me.tableList("ligature",I,function(H){return new me.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:H.ligGlyph}].concat(me.ushortList("component",H.components,H.components.length+1)))}))})))};const gn={parse:function(D,I){const H=new _e(D,I=I||0),W=H.parseVersion(1);return L.argument(W===1||W===1.1,"Unsupported GSUB table version."),W===1?{version:W,scripts:H.parseScriptList(),features:H.parseFeatureList(),lookups:H.parseLookupList(ar)}:{version:W,scripts:H.parseScriptList(),features:H.parseFeatureList(),lookups:H.parseLookupList(ar),variations:H.parseFeatureVariationsList()}},make:function(D){return new me.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new me.ScriptList(D.scripts)},{name:"features",type:"TABLE",value:new me.FeatureList(D.features)},{name:"lookups",type:"TABLE",value:new me.LookupList(D.lookups,nn)}])}},Dr={parse:function(D,I){const H=new Be.Parser(D,I),W=H.parseULong();L.argument(W===1,"Unsupported META table version."),H.parseULong(),H.parseULong();const X=H.parseULong(),re={};for(let se=0;se<X;se++){const fe=H.parseTag(),le=H.parseULong(),ke=H.parseULong(),je=B.UTF8(D,I+le,ke);re[fe]=je}return re},make:function(D){const I=Object.keys(D).length;let H="";const W=16+12*I,X=new me.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:W},{name:"numTags",type:"ULONG",value:I}]);for(let re in D){const se=H.length;H+=D[re],X.fields.push({name:"tag "+re,type:"TAG",value:re}),X.fields.push({name:"offset "+re,type:"ULONG",value:W+se}),X.fields.push({name:"length "+re,type:"ULONG",value:D[re].length})}return X.fields.push({name:"stringPool",type:"CHARARRAY",value:H}),X}};function sn(D){return Math.log(D)/Math.log(2)|0}function mn(D){for(;D.length%4!=0;)D.push(0);let I=0;for(let H=0;H<D.length;H+=4)I+=(D[H]<<24)+(D[H+1]<<16)+(D[H+2]<<8)+D[H+3];return I%=Math.pow(2,32),I}function Hr(D,I,H,W){return new me.Record("Table Record",[{name:"tag",type:"TAG",value:D!==void 0?D:""},{name:"checkSum",type:"ULONG",value:I!==void 0?I:0},{name:"offset",type:"ULONG",value:H!==void 0?H:0},{name:"length",type:"ULONG",value:W!==void 0?W:0}])}function Kr(D){const I=new me.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);I.tables=D,I.numTables=D.length;const H=Math.pow(2,sn(I.numTables));I.searchRange=16*H,I.entrySelector=sn(H),I.rangeShift=16*I.numTables-I.searchRange;const W=[],X=[];let re=I.sizeOf()+Hr().sizeOf()*I.numTables;for(;re%4!=0;)re+=1,X.push({name:"padding",type:"BYTE",value:0});for(let se=0;se<D.length;se+=1){const fe=D[se];L.argument(fe.tableName.length===4,"Table name"+fe.tableName+" is invalid.");const le=fe.sizeOf(),ke=Hr(fe.tableName,mn(fe.encode()),re,le);for(W.push({name:ke.tag+" Table Record",type:"RECORD",value:ke}),X.push({name:fe.tableName+" table",type:"RECORD",value:fe}),re+=le,L.argument(!isNaN(re),"Something went wrong calculating the offset.");re%4!=0;)re+=1,X.push({name:"padding",type:"BYTE",value:0})}return W.sort(function(se,fe){return se.value.tag>fe.value.tag?1:-1}),I.fields=I.fields.concat(W),I.fields=I.fields.concat(X),I}function An(D,I,H){for(let W=0;W<I.length;W+=1){const X=D.charToGlyphIndex(I[W]);if(X>0)return D.glyphs.get(X).getMetrics()}return H}function bn(D){let I=0;for(let H=0;H<D.length;H+=1)I+=D[H];return I/D.length}const Br=function(D){const I=[],H=[],W=[],X=[],re=[],se=[],fe=[];let le,ke=0,je=0,Ke=0,nt=0,Ft=0;for(let Rt=0;Rt<D.glyphs.length;Rt+=1){const Tr=D.glyphs.get(Rt),yr=0|Tr.unicode;if(isNaN(Tr.advanceWidth))throw new Error("Glyph "+Tr.name+" ("+Rt+"): advanceWidth is not a number.");(le>yr||le===void 0)&&yr>0&&(le=yr),ke<yr&&(ke=yr);const Qr=dr.getUnicodeRange(yr);if(Qr<32)je|=1<<Qr;else if(Qr<64)Ke|=1<<Qr-32;else if(Qr<96)nt|=1<<Qr-64;else{if(!(Qr<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ft|=1<<Qr-96}if(Tr.name===".notdef")continue;const ln=Tr.getMetrics();I.push(ln.xMin),H.push(ln.yMin),W.push(ln.xMax),X.push(ln.yMax),se.push(ln.leftSideBearing),fe.push(ln.rightSideBearing),re.push(Tr.advanceWidth)}const Tt={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,H),xMax:Math.max.apply(null,W),yMax:Math.max.apply(null,X),advanceWidthMax:Math.max.apply(null,re),advanceWidthAvg:bn(re),minLeftSideBearing:Math.min.apply(null,se),maxLeftSideBearing:Math.max.apply(null,se),minRightSideBearing:Math.min.apply(null,fe)};Tt.ascender=D.ascender,Tt.descender=D.descender;const Ht=De.make({flags:3,unitsPerEm:D.unitsPerEm,xMin:Tt.xMin,yMin:Tt.yMin,xMax:Tt.xMax,yMax:Tt.yMax,lowestRecPPEM:3,createdTimestamp:D.createdTimestamp}),St=er.make({ascender:Tt.ascender,descender:Tt.descender,advanceWidthMax:Tt.advanceWidthMax,minLeftSideBearing:Tt.minLeftSideBearing,minRightSideBearing:Tt.minRightSideBearing,xMaxExtent:Tt.maxLeftSideBearing+(Tt.xMax-Tt.xMin),numberOfHMetrics:D.glyphs.length}),ae=Xt.make(D.glyphs.length),u=dr.make({xAvgCharWidth:Math.round(Tt.advanceWidthAvg),usWeightClass:D.tables.os2.usWeightClass,usWidthClass:D.tables.os2.usWidthClass,usFirstCharIndex:le,usLastCharIndex:ke,ulUnicodeRange1:je,ulUnicodeRange2:Ke,ulUnicodeRange3:nt,ulUnicodeRange4:Ft,fsSelection:D.tables.os2.fsSelection,sTypoAscender:Tt.ascender,sTypoDescender:Tt.descender,sTypoLineGap:0,usWinAscent:Tt.yMax,usWinDescent:Math.abs(Tt.yMin),ulCodePageRange1:1,sxHeight:An(D,"xyvw",{yMax:Math.round(Tt.ascender/2)}).yMax,sCapHeight:An(D,"HIKLEFJMNTZBDPRAGOQSUVWXY",Tt).yMax,usDefaultChar:D.hasChar(" ")?32:0,usBreakChar:D.hasChar(" ")?32:0}),p=Cr.make(D.glyphs),_=ht.make(D.glyphs),E=D.getEnglishName("fontFamily"),T=D.getEnglishName("fontSubfamily"),R=E+" "+T;let N=D.getEnglishName("postScriptName");N||(N=E.replace(/\s/g,"")+"-"+T);const z={};for(let Rt in D.names)z[Rt]=D.names[Rt];z.uniqueID||(z.uniqueID={en:D.getEnglishName("manufacturer")+":"+R}),z.postScriptName||(z.postScriptName={en:N}),z.preferredFamily||(z.preferredFamily=D.names.fontFamily),z.preferredSubfamily||(z.preferredSubfamily=D.names.fontSubfamily);const Z=[],oe=kr.make(z,Z),ue=Z.length>0?wr.make(Z):void 0,ge=mr.make(),Ae=ct.make(D.glyphs,{version:D.getEnglishName("version"),fullName:R,familyName:E,weightName:T,postScriptName:N,unitsPerEm:D.unitsPerEm,fontBBox:[0,Tt.yMin,Tt.ascender,Tt.advanceWidthMax]}),$e=D.metas&&Object.keys(D.metas).length>0?Dr.make(D.metas):void 0,We=[Ht,St,ae,u,oe,_,ge,Ae,p];ue&&We.push(ue),D.tables.gsub&&We.push(gn.make(D.tables.gsub)),$e&&We.push($e);const Je=Kr(We),st=mn(Je.encode()),kt=Je.fields;let Mt=!1;for(let Rt=0;Rt<kt.length;Rt+=1)if(kt[Rt].name==="head table"){kt[Rt].value.checkSumAdjustment=2981146554-st,Mt=!0;break}if(!Mt)throw new Error("Could not find head table with checkSum to adjust.");return Je};function Jr(D,I){let H=0,W=D.length-1;for(;H<=W;){const X=H+W>>>1,re=D[X].tag;if(re===I)return X;re<I?H=X+1:W=X-1}return-H-1}function et(D,I){let H=0,W=D.length-1;for(;H<=W;){const X=H+W>>>1,re=D[X];if(re===I)return X;re<I?H=X+1:W=X-1}return-H-1}function Ee(D,I){let H,W=0,X=D.length-1;for(;W<=X;){const re=W+X>>>1;H=D[re];const se=H.start;if(se===I)return H;se<I?W=re+1:X=re-1}if(W>0)return H=D[W-1],I>H.end?0:H}function or(D,I){this.font=D,this.tableName=I}or.prototype={searchTag:Jr,binSearch:et,getTable:function(D){let I=this.font.tables[this.tableName];return!I&&D&&(I=this.font.tables[this.tableName]=this.createDefaultTable()),I},getScriptNames:function(){let D=this.getTable();return D?D.scripts.map(function(I){return I.tag}):[]},getDefaultScriptName:function(){let D=this.getTable();if(!D)return;let I=!1;for(let H=0;H<D.scripts.length;H++){const W=D.scripts[H].tag;if(W==="DFLT")return W;W==="latn"&&(I=!0)}return I?"latn":void 0},getScriptTable:function(D,I){const H=this.getTable(I);if(H){D=D||"DFLT";const W=H.scripts,X=Jr(H.scripts,D);if(X>=0)return W[X].script;if(I){const re={tag:D,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return W.splice(-1-X,0,re),re.script}}},getLangSysTable:function(D,I,H){const W=this.getScriptTable(D,H);if(W){if(!I||I==="dflt"||I==="DFLT")return W.defaultLangSys;const X=Jr(W.langSysRecords,I);if(X>=0)return W.langSysRecords[X].langSys;if(H){const re={tag:I,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return W.langSysRecords.splice(-1-X,0,re),re.langSys}}},getFeatureTable:function(D,I,H,W){const X=this.getLangSysTable(D,I,W);if(X){let re;const se=X.featureIndexes,fe=this.font.tables[this.tableName].features;for(let le=0;le<se.length;le++)if(re=fe[se[le]],re.tag===H)return re.feature;if(W){const le=fe.length;return L.assert(le===0||H>=fe[le-1].tag,"Features must be added in alphabetical order."),re={tag:H,feature:{params:0,lookupListIndexes:[]}},fe.push(re),se.push(le),re.feature}}},getLookupTables:function(D,I,H,W,X){const re=this.getFeatureTable(D,I,H,X),se=[];if(re){let fe;const le=re.lookupListIndexes,ke=this.font.tables[this.tableName].lookups;for(let je=0;je<le.length;je++)fe=ke[le[je]],fe.lookupType===W&&se.push(fe);if(se.length===0&&X){fe={lookupType:W,lookupFlag:0,subtables:[],markFilteringSet:void 0};const je=ke.length;return ke.push(fe),le.push(je),[fe]}}return se},getGlyphClass:function(D,I){switch(D.format){case 1:return D.startGlyph<=I&&I<D.startGlyph+D.classes.length?D.classes[I-D.startGlyph]:0;case 2:const H=Ee(D.ranges,I);return H?H.classId:0}},getCoverageIndex:function(D,I){switch(D.format){case 1:const H=et(D.glyphs,I);return H>=0?H:-1;case 2:const W=Ee(D.ranges,I);return W?W.index+I-W.start:-1}},expandCoverage:function(D){if(D.format===1)return D.glyphs;{const I=[],H=D.ranges;for(let W=0;W<H.length;W++){const X=H[W],re=X.start,se=X.end;for(let fe=re;fe<=se;fe++)I.push(fe)}return I}}};const Xr=or;function on(D){Xr.call(this,D,"gpos")}on.prototype=Xr.prototype,on.prototype.getKerningValue=function(D,I,H){for(let W=0;W<D.length;W++){const X=D[W].subtables;for(let re=0;re<X.length;re++){const se=X[re],fe=this.getCoverageIndex(se.coverage,I);if(!(fe<0))switch(se.posFormat){case 1:let le=se.pairSets[fe];for(let nt=0;nt<le.length;nt++){let Ft=le[nt];if(Ft.secondGlyph===H)return Ft.value1&&Ft.value1.xAdvance||0}break;case 2:const ke=this.getGlyphClass(se.classDef1,I),je=this.getGlyphClass(se.classDef2,H),Ke=se.classRecords[ke][je];return Ke.value1&&Ke.value1.xAdvance||0}}}return 0},on.prototype.getKerningTables=function(D,I){if(this.font.tables.gpos)return this.getLookupTables(D,I,"kern",2)};const ai=on;function cn(D){Xr.call(this,D,"gsub")}function Sn(D,I){const H=D.length;if(H!==I.length)return!1;for(let W=0;W<H;W++)if(D[W]!==I[W])return!1;return!0}function cr(D,I,H){const W=D.subtables;for(let X=0;X<W.length;X++){const re=W[X];if(re.substFormat===I)return re}if(H)return W.push(H),H}cn.prototype=Xr.prototype,cn.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},cn.prototype.getSingle=function(D,I,H){const W=[],X=this.getLookupTables(I,H,D,1);for(let re=0;re<X.length;re++){const se=X[re].subtables;for(let fe=0;fe<se.length;fe++){const le=se[fe],ke=this.expandCoverage(le.coverage);let je;if(le.substFormat===1){const Ke=le.deltaGlyphId;for(je=0;je<ke.length;je++){const nt=ke[je];W.push({sub:nt,by:nt+Ke})}}else{const Ke=le.substitute;for(je=0;je<ke.length;je++)W.push({sub:ke[je],by:Ke[je]})}}}return W},cn.prototype.getAlternates=function(D,I,H){const W=[],X=this.getLookupTables(I,H,D,3);for(let re=0;re<X.length;re++){const se=X[re].subtables;for(let fe=0;fe<se.length;fe++){const le=se[fe],ke=this.expandCoverage(le.coverage),je=le.alternateSets;for(let Ke=0;Ke<ke.length;Ke++)W.push({sub:ke[Ke],by:je[Ke]})}}return W},cn.prototype.getLigatures=function(D,I,H){const W=[],X=this.getLookupTables(I,H,D,4);for(let re=0;re<X.length;re++){const se=X[re].subtables;for(let fe=0;fe<se.length;fe++){const le=se[fe],ke=this.expandCoverage(le.coverage),je=le.ligatureSets;for(let Ke=0;Ke<ke.length;Ke++){const nt=ke[Ke],Ft=je[Ke];for(let Tt=0;Tt<Ft.length;Tt++){const Ht=Ft[Tt];W.push({sub:[nt].concat(Ht.components),by:Ht.ligGlyph})}}}}return W},cn.prototype.addSingle=function(D,I,H,W){const X=cr(this.getLookupTables(H,W,D,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});L.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format);const re=I.sub;let se=this.binSearch(X.coverage.glyphs,re);se<0&&(se=-1-se,X.coverage.glyphs.splice(se,0,re),X.substitute.splice(se,0,0)),X.substitute[se]=I.by},cn.prototype.addAlternate=function(D,I,H,W){const X=cr(this.getLookupTables(H,W,D,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});L.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format);const re=I.sub;let se=this.binSearch(X.coverage.glyphs,re);se<0&&(se=-1-se,X.coverage.glyphs.splice(se,0,re),X.alternateSets.splice(se,0,0)),X.alternateSets[se]=I.by},cn.prototype.addLigature=function(D,I,H,W){const X=this.getLookupTables(H,W,D,4,!0)[0];let re=X.subtables[0];re||(re={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},X.subtables[0]=re),L.assert(re.coverage.format===1,"Ligature: unable to modify coverage table format "+re.coverage.format);const se=I.sub[0],fe=I.sub.slice(1),le={ligGlyph:I.by,components:fe};let ke=this.binSearch(re.coverage.glyphs,se);if(ke>=0){const je=re.ligatureSets[ke];for(let Ke=0;Ke<je.length;Ke++)if(Sn(je[Ke].components,fe))return;je.push(le)}else ke=-1-ke,re.coverage.glyphs.splice(ke,0,se),re.ligatureSets.splice(ke,0,[le])},cn.prototype.getFeature=function(D,I,H){if(/ss\d\d/.test(D))return this.getSingle(D,I,H);switch(D){case"aalt":case"salt":return this.getSingle(D,I,H).concat(this.getAlternates(D,I,H));case"dlig":case"liga":case"rlig":return this.getLigatures(D,I,H)}},cn.prototype.add=function(D,I,H,W){if(/ss\d\d/.test(D))return this.addSingle(D,I,H,W);switch(D){case"aalt":case"salt":return typeof I.by=="number"?this.addSingle(D,I,H,W):this.addAlternate(D,I,H,W);case"dlig":case"liga":case"rlig":return this.addLigature(D,I,H,W)}};const zr=cn;function $n(D){const I=new ArrayBuffer(D.length),H=new Uint8Array(I);for(let W=0;W<D.length;++W)H[W]=D[W];return I}function zn(D,I){if(!D)throw I}let Gn,kn,Hn,ri;function tn(D){this.font=D,this._fpgmState=this._prepState=void 0,this._errorState=0}function qn(D){return D}function en(D){return Math.sign(D)*Math.round(Math.abs(D))}function gr(D){return Math.sign(D)*Math.round(Math.abs(2*D))/2}function Nr(D){return Math.sign(D)*(Math.round(Math.abs(D)+.5)-.5)}function Er(D){return Math.sign(D)*Math.ceil(Math.abs(D))}function jr(D){return Math.sign(D)*Math.floor(Math.abs(D))}const ii=function(D){const I=this.srPeriod;let H=this.srPhase,W=1;return D<0&&(D=-D,W=-1),D+=this.srThreshold-H,D=Math.trunc(D/I)*I,(D+=H)<0?H*W:D*W},Cn={x:1,y:0,axis:"x",distance:function(D,I,H,W){return(H?D.xo:D.x)-(W?I.xo:I.x)},interpolate:function(D,I,H,W){let X,re,se,fe,le,ke,je;if(!W||W===this)return X=D.xo-I.xo,re=D.xo-H.xo,le=I.x-I.xo,ke=H.x-H.xo,se=Math.abs(X),fe=Math.abs(re),je=se+fe,je===0?void(D.x=D.xo+(le+ke)/2):void(D.x=D.xo+(le*fe+ke*se)/je);X=W.distance(D,I,!0,!0),re=W.distance(D,H,!0,!0),le=W.distance(I,I,!1,!0),ke=W.distance(H,H,!1,!0),se=Math.abs(X),fe=Math.abs(re),je=se+fe,je!==0?Cn.setRelative(D,D,(le*fe+ke*se)/je,W,!0):Cn.setRelative(D,D,(le+ke)/2,W,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(D,I,H,W,X){if(!W||W===this)return void(D.x=(X?I.xo:I.x)+H);const re=X?I.xo:I.x,se=X?I.yo:I.y,fe=re+H*W.x,le=se+H*W.y;D.x=fe+(D.y-le)/W.normalSlope},slope:0,touch:function(D){D.xTouched=!0},touched:function(D){return D.xTouched},untouch:function(D){D.xTouched=!1}},Rn={x:0,y:1,axis:"y",distance:function(D,I,H,W){return(H?D.yo:D.y)-(W?I.yo:I.y)},interpolate:function(D,I,H,W){let X,re,se,fe,le,ke,je;if(!W||W===this)return X=D.yo-I.yo,re=D.yo-H.yo,le=I.y-I.yo,ke=H.y-H.yo,se=Math.abs(X),fe=Math.abs(re),je=se+fe,je===0?void(D.y=D.yo+(le+ke)/2):void(D.y=D.yo+(le*fe+ke*se)/je);X=W.distance(D,I,!0,!0),re=W.distance(D,H,!0,!0),le=W.distance(I,I,!1,!0),ke=W.distance(H,H,!1,!0),se=Math.abs(X),fe=Math.abs(re),je=se+fe,je!==0?Rn.setRelative(D,D,(le*fe+ke*se)/je,W,!0):Rn.setRelative(D,D,(le+ke)/2,W,!0)},normalSlope:0,setRelative:function(D,I,H,W,X){if(!W||W===this)return void(D.y=(X?I.yo:I.y)+H);const re=X?I.xo:I.x,se=X?I.yo:I.y,fe=re+H*W.x,le=se+H*W.y;D.y=le+W.normalSlope*(D.x-fe)},slope:Number.POSITIVE_INFINITY,touch:function(D){D.yTouched=!0},touched:function(D){return D.yTouched},untouch:function(D){D.yTouched=!1}};function vn(D,I){this.x=D,this.y=I,this.axis=void 0,this.slope=I/D,this.normalSlope=-D/I,Object.freeze(this)}function Qn(D,I){const H=Math.sqrt(D*D+I*I);return I/=H,(D/=H)==1&&I===0?Cn:D===0&&I===1?Rn:new vn(D,I)}function xn(D,I,H,W){this.x=this.xo=Math.round(64*D)/64,this.y=this.yo=Math.round(64*I)/64,this.lastPointOfContour=H,this.onCurve=W,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Cn),Object.freeze(Rn),vn.prototype.distance=function(D,I,H,W){return this.x*Cn.distance(D,I,H,W)+this.y*Rn.distance(D,I,H,W)},vn.prototype.interpolate=function(D,I,H,W){let X,re,se,fe,le,ke,je;se=W.distance(D,I,!0,!0),fe=W.distance(D,H,!0,!0),X=W.distance(I,I,!1,!0),re=W.distance(H,H,!1,!0),le=Math.abs(se),ke=Math.abs(fe),je=le+ke,je!==0?this.setRelative(D,D,(X*ke+re*le)/je,W,!0):this.setRelative(D,D,(X+re)/2,W,!0)},vn.prototype.setRelative=function(D,I,H,W,X){W=W||this;const re=X?I.xo:I.x,se=X?I.yo:I.y,fe=re+H*W.x,le=se+H*W.y,ke=W.normalSlope,je=this.slope,Ke=D.x,nt=D.y;D.x=(je*Ke-ke*fe+le-nt)/(je-ke),D.y=je*(D.x-Ke)+nt},vn.prototype.touch=function(D){D.xTouched=!0,D.yTouched=!0},xn.prototype.nextTouched=function(D){let I=this.nextPointOnContour;for(;!D.touched(I)&&I!==this;)I=I.nextPointOnContour;return I},xn.prototype.prevTouched=function(D){let I=this.prevPointOnContour;for(;!D.touched(I)&&I!==this;)I=I.prevPointOnContour;return I};const Mn=Object.freeze(new xn(0,0)),Yn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Ln(D,I){switch(this.env=D,this.stack=[],this.prog=I,D){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Cn,this.round=en}}function Bn(D){const I=D.tZone=new Array(D.gZone.length);for(let H=0;H<I.length;H++)I[H]=new xn(0,0)}function jn(D,I){const H=D.prog;let W,X=D.ip,re=1;do if(W=H[++X],W===88)re++;else if(W===89)re--;else if(W===64)X+=H[X+1]+1;else if(W===65)X+=2*H[X+1]+1;else if(W>=176&&W<=183)X+=W-176+1;else if(W>=184&&W<=191)X+=2*(W-184+1);else if(I&&re===1&&W===27)break;while(re>0);D.ip=X}function hn(D,I){e.DEBUG&&console.log(I.step,"SVTCA["+D.axis+"]"),I.fv=I.pv=I.dpv=D}function ni(D,I){e.DEBUG&&console.log(I.step,"SPVTCA["+D.axis+"]"),I.pv=I.dpv=D}function Xn(D,I){e.DEBUG&&console.log(I.step,"SFVTCA["+D.axis+"]"),I.fv=D}function tr(D,I){const H=I.stack,W=H.pop(),X=H.pop(),re=I.z2[W],se=I.z1[X];let fe,le;e.DEBUG&&console.log("SPVTL["+D+"]",W,X),D?(fe=re.y-se.y,le=se.x-re.x):(fe=se.x-re.x,le=se.y-re.y),I.pv=I.dpv=Qn(fe,le)}function Ar(D,I){const H=I.stack,W=H.pop(),X=H.pop(),re=I.z2[W],se=I.z1[X];let fe,le;e.DEBUG&&console.log("SFVTL["+D+"]",W,X),D?(fe=re.y-se.y,le=se.x-re.x):(fe=se.x-re.x,le=se.y-re.y),I.fv=Qn(fe,le)}function Qt(D){e.DEBUG&&console.log(D.step,"POP[]"),D.stack.pop()}function be(D,I){const H=I.stack.pop(),W=I.z0[H],X=I.fv,re=I.pv;e.DEBUG&&console.log(I.step,"MDAP["+D+"]",H);let se=re.distance(W,Mn);D&&(se=I.round(se)),X.setRelative(W,Mn,se,re),X.touch(W),I.rp0=I.rp1=H}function ve(D,I){const H=I.z2,W=H.length-2;let X,re,se;e.DEBUG&&console.log(I.step,"IUP["+D.axis+"]");for(let fe=0;fe<W;fe++)X=H[fe],D.touched(X)||(re=X.prevTouched(D),re!==X&&(se=X.nextTouched(D),re===se&&D.setRelative(X,X,D.distance(re,re,!1,!0),D,!0),D.interpolate(X,re,se,D)))}function Fe(D,I){const H=I.stack,W=D?I.rp1:I.rp2,X=(D?I.z0:I.z1)[W],re=I.fv,se=I.pv;let fe=I.loop;const le=I.z2;for(;fe--;){const ke=H.pop(),je=le[ke],Ke=se.distance(X,X,!1,!0);re.setRelative(je,je,Ke,se),re.touch(je),e.DEBUG&&console.log(I.step,(I.loop>1?"loop "+(I.loop-fe)+": ":"")+"SHP["+(D?"rp1":"rp2")+"]",ke)}I.loop=1}function tt(D,I){const H=I.stack,W=D?I.rp1:I.rp2,X=(D?I.z0:I.z1)[W],re=I.fv,se=I.pv,fe=H.pop(),le=I.z2[I.contours[fe]];let ke=le;e.DEBUG&&console.log(I.step,"SHC["+D+"]",fe);const je=se.distance(X,X,!1,!0);do ke!==X&&re.setRelative(ke,ke,je,se),ke=ke.nextPointOnContour;while(ke!==le)}function Bt(D,I){const H=I.stack,W=D?I.rp1:I.rp2,X=(D?I.z0:I.z1)[W],re=I.fv,se=I.pv,fe=H.pop();let le,ke;switch(e.DEBUG&&console.log(I.step,"SHZ["+D+"]",fe),fe){case 0:le=I.tZone;break;case 1:le=I.gZone;break;default:throw new Error("Invalid zone")}const je=se.distance(X,X,!1,!0),Ke=le.length-2;for(let nt=0;nt<Ke;nt++)ke=le[nt],re.setRelative(ke,ke,je,se)}function Et(D,I){const H=I.stack,W=H.pop()/64,X=H.pop(),re=I.z1[X],se=I.z0[I.rp0],fe=I.fv,le=I.pv;fe.setRelative(re,se,W,le),fe.touch(re),e.DEBUG&&console.log(I.step,"MSIRP["+D+"]",W,X),I.rp1=I.rp0,I.rp2=X,D&&(I.rp0=X)}function He(D,I){const H=I.stack,W=H.pop(),X=H.pop(),re=I.z0[X],se=I.fv,fe=I.pv;let le=I.cvt[W];e.DEBUG&&console.log(I.step,"MIAP["+D+"]",W,"(",le,")",X);let ke=fe.distance(re,Mn);D&&(Math.abs(ke-le)<I.cvCutIn&&(ke=le),ke=I.round(ke)),se.setRelative(re,Mn,ke,fe),I.zp0===0&&(re.xo=re.x,re.yo=re.y),se.touch(re),I.rp0=I.rp1=X}function At(D,I){const H=I.stack,W=H.pop(),X=I.z2[W];e.DEBUG&&console.log(I.step,"GC["+D+"]",W),H.push(64*I.dpv.distance(X,Mn,D,!1))}function qt(D,I){const H=I.stack,W=H.pop(),X=H.pop(),re=I.z1[W],se=I.z0[X],fe=I.dpv.distance(se,re,D,D);e.DEBUG&&console.log(I.step,"MD["+D+"]",W,X,"->",fe),I.stack.push(Math.round(64*fe))}function Or(D,I){const H=I.stack,W=H.pop(),X=I.fv,re=I.pv,se=I.ppem,fe=I.deltaBase+16*(D-1),le=I.deltaShift,ke=I.z0;e.DEBUG&&console.log(I.step,"DELTAP["+D+"]",W,H);for(let je=0;je<W;je++){const Ke=H.pop(),nt=H.pop();if(fe+((240&nt)>>4)!==se)continue;let Ft=(15&nt)-8;Ft>=0&&Ft++,e.DEBUG&&console.log(I.step,"DELTAPFIX",Ke,"by",Ft*le);const Tt=ke[Ke];X.setRelative(Tt,Tt,Ft*le,re)}}function Rr(D,I){const H=I.stack,W=H.pop();e.DEBUG&&console.log(I.step,"ROUND[]"),H.push(64*I.round(W/64))}function Wr(D,I){const H=I.stack,W=H.pop(),X=I.ppem,re=I.deltaBase+16*(D-1),se=I.deltaShift;e.DEBUG&&console.log(I.step,"DELTAC["+D+"]",W,H);for(let fe=0;fe<W;fe++){const le=H.pop(),ke=H.pop();if(re+((240&ke)>>4)!==X)continue;let je=(15&ke)-8;je>=0&&je++;const Ke=je*se;e.DEBUG&&console.log(I.step,"DELTACFIX",le,"by",Ke),I.cvt[le]+=Ke}}function an(D,I){const H=I.stack,W=H.pop(),X=H.pop(),re=I.z2[W],se=I.z1[X];let fe,le;e.DEBUG&&console.log(I.step,"SDPVTL["+D+"]",W,X),D?(fe=re.y-se.y,le=se.x-re.x):(fe=se.x-re.x,le=se.y-re.y),I.dpv=Qn(fe,le)}function Sr(D,I){const H=I.stack,W=I.prog;let X=I.ip;e.DEBUG&&console.log(I.step,"PUSHB["+D+"]");for(let re=0;re<D;re++)H.push(W[++X]);I.ip=X}function Ir(D,I){let H=I.ip;const W=I.prog,X=I.stack;e.DEBUG&&console.log(I.ip,"PUSHW["+D+"]");for(let re=0;re<D;re++){let se=W[++H]<<8|W[++H];32768&se&&(se=-(1+(65535^se))),X.push(se)}I.ip=H}function Nt(D,I,H,W,X,re){const se=re.stack,fe=D&&se.pop(),le=se.pop(),ke=re.rp0,je=re.z0[ke],Ke=re.z1[le],nt=re.minDis,Ft=re.fv,Tt=re.dpv;let Ht,St,ae,u;St=Ht=Tt.distance(Ke,je,!0,!0),ae=St>=0?1:-1,St=Math.abs(St),D&&(u=re.cvt[fe],W&&Math.abs(St-u)<re.cvCutIn&&(St=u)),H&&St<nt&&(St=nt),W&&(St=re.round(St)),Ft.setRelative(Ke,je,ae*St,Tt),Ft.touch(Ke),e.DEBUG&&console.log(re.step,(D?"MIRP[":"MDRP[")+(I?"M":"m")+(H?">":"_")+(W?"R":"_")+(X===0?"Gr":X===1?"Bl":X===2?"Wh":"")+"]",D?fe+"("+re.cvt[fe]+","+u+")":"",le,"(d =",Ht,"->",ae*St,")"),re.rp1=re.rp0,re.rp2=le,I&&(re.rp0=le)}tn.prototype.exec=function(D,I){if(typeof I!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const H=this.font;let W=this._prepState;if(!W||W.ppem!==I){let X=this._fpgmState;if(!X){Ln.prototype=Yn,X=this._fpgmState=new Ln("fpgm",H.tables.fpgm),X.funcs=[],X.font=H,e.DEBUG&&(console.log("---EXEC FPGM---"),X.step=-1);try{kn(X)}catch(se){return console.log("Hinting error in FPGM:"+se),void(this._errorState=3)}}Ln.prototype=X,W=this._prepState=new Ln("prep",H.tables.prep),W.ppem=I;const re=H.tables.cvt;if(re){const se=W.cvt=new Array(re.length),fe=I/H.unitsPerEm;for(let le=0;le<re.length;le++)se[le]=re[le]*fe}else W.cvt=[];e.DEBUG&&(console.log("---EXEC PREP---"),W.step=-1);try{kn(W)}catch(se){this._errorState<2&&console.log("Hinting error in PREP:"+se),this._errorState=2}}if(!(this._errorState>1))try{return Hn(D,W)}catch(X){return this._errorState<1&&(console.log("Hinting error:"+X),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}},Hn=function(D,I){const H=I.ppem/I.font.unitsPerEm,W=H;let X,re,se,fe=D.components;if(Ln.prototype=I,fe){const le=I.font;re=[],X=[];for(let ke=0;ke<fe.length;ke++){const je=fe[ke],Ke=le.glyphs.get(je.glyphIndex);se=new Ln("glyf",Ke.instructions),e.DEBUG&&(console.log("---EXEC COMP "+ke+"---"),se.step=-1),ri(Ke,se,H,W);const nt=Math.round(je.dx*H),Ft=Math.round(je.dy*W),Tt=se.gZone,Ht=se.contours;for(let ae=0;ae<Tt.length;ae++){const u=Tt[ae];u.xTouched=u.yTouched=!1,u.xo=u.x=u.x+nt,u.yo=u.y=u.y+Ft}const St=re.length;re.push.apply(re,Tt);for(let ae=0;ae<Ht.length;ae++)X.push(Ht[ae]+St)}D.instructions&&!se.inhibitGridFit&&(se=new Ln("glyf",D.instructions),se.gZone=se.z0=se.z1=se.z2=re,se.contours=X,re.push(new xn(0,0),new xn(Math.round(D.advanceWidth*H),0)),e.DEBUG&&(console.log("---EXEC COMPOSITE---"),se.step=-1),kn(se),re.length-=2)}else se=new Ln("glyf",D.instructions),e.DEBUG&&(console.log("---EXEC GLYPH---"),se.step=-1),ri(D,se,H,W),re=se.gZone;return re},ri=function(D,I,H,W){const X=D.points||[],re=X.length,se=I.gZone=I.z0=I.z1=I.z2=[],fe=I.contours=[];let le,ke,je;for(let Ke=0;Ke<re;Ke++)le=X[Ke],se[Ke]=new xn(le.x*H,le.y*W,le.lastPointOfContour,le.onCurve);for(let Ke=0;Ke<re;Ke++)le=se[Ke],ke||(ke=le,fe.push(Ke)),le.lastPointOfContour?(le.nextPointOnContour=ke,ke.prevPointOnContour=le,ke=void 0):(je=se[Ke+1],le.nextPointOnContour=je,je.prevPointOnContour=le);if(!I.inhibitGridFit){if(e.DEBUG){console.log("PROCESSING GLYPH",I.stack);for(let Ke=0;Ke<re;Ke++)console.log(Ke,se[Ke].x,se[Ke].y)}if(se.push(new xn(0,0),new xn(Math.round(D.advanceWidth*H),0)),kn(I),se.length-=2,e.DEBUG){console.log("FINISHED GLYPH",I.stack);for(let Ke=0;Ke<re;Ke++)console.log(Ke,se[Ke].x,se[Ke].y)}}},kn=function(D){let I=D.prog;if(!I)return;const H=I.length;let W;for(D.ip=0;D.ip<H;D.ip++){if(e.DEBUG&&D.step++,W=Gn[I[D.ip]],!W)throw new Error("unknown instruction: 0x"+Number(I[D.ip]).toString(16));W(D)}},Gn=[hn.bind(void 0,Rn),hn.bind(void 0,Cn),ni.bind(void 0,Rn),ni.bind(void 0,Cn),Xn.bind(void 0,Rn),Xn.bind(void 0,Cn),tr.bind(void 0,0),tr.bind(void 0,1),Ar.bind(void 0,0),Ar.bind(void 0,1),function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"SPVFS[]",H,W),D.pv=D.dpv=Qn(W,H)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"SPVFS[]",H,W),D.fv=Qn(W,H)},function(D){const I=D.stack,H=D.pv;e.DEBUG&&console.log(D.step,"GPV[]"),I.push(16384*H.x),I.push(16384*H.y)},function(D){const I=D.stack,H=D.fv;e.DEBUG&&console.log(D.step,"GFV[]"),I.push(16384*H.x),I.push(16384*H.y)},function(D){D.fv=D.pv,e.DEBUG&&console.log(D.step,"SFVTPV[]")},function(D){const I=D.stack,H=I.pop(),W=I.pop(),X=I.pop(),re=I.pop(),se=I.pop(),fe=D.z0,le=D.z1,ke=fe[H],je=fe[W],Ke=le[X],nt=le[re],Ft=D.z2[se];e.DEBUG&&console.log("ISECT[], ",H,W,X,re,se);const Tt=ke.x,Ht=ke.y,St=je.x,ae=je.y,u=Ke.x,p=Ke.y,_=nt.x,E=nt.y,T=(Tt-St)*(p-E)-(Ht-ae)*(u-_),R=Tt*ae-Ht*St,N=u*E-p*_;Ft.x=(R*(u-_)-N*(Tt-St))/T,Ft.y=(R*(p-E)-N*(Ht-ae))/T},function(D){D.rp0=D.stack.pop(),e.DEBUG&&console.log(D.step,"SRP0[]",D.rp0)},function(D){D.rp1=D.stack.pop(),e.DEBUG&&console.log(D.step,"SRP1[]",D.rp1)},function(D){D.rp2=D.stack.pop(),e.DEBUG&&console.log(D.step,"SRP2[]",D.rp2)},function(D){const I=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"SZP0[]",I),D.zp0=I,I){case 0:D.tZone||Bn(D),D.z0=D.tZone;break;case 1:D.z0=D.gZone;break;default:throw new Error("Invalid zone pointer")}},function(D){const I=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"SZP1[]",I),D.zp1=I,I){case 0:D.tZone||Bn(D),D.z1=D.tZone;break;case 1:D.z1=D.gZone;break;default:throw new Error("Invalid zone pointer")}},function(D){const I=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"SZP2[]",I),D.zp2=I,I){case 0:D.tZone||Bn(D),D.z2=D.tZone;break;case 1:D.z2=D.gZone;break;default:throw new Error("Invalid zone pointer")}},function(D){const I=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"SZPS[]",I),D.zp0=D.zp1=D.zp2=I,I){case 0:D.tZone||Bn(D),D.z0=D.z1=D.z2=D.tZone;break;case 1:D.z0=D.z1=D.z2=D.gZone;break;default:throw new Error("Invalid zone pointer")}},function(D){D.loop=D.stack.pop(),e.DEBUG&&console.log(D.step,"SLOOP[]",D.loop)},function(D){e.DEBUG&&console.log(D.step,"RTG[]"),D.round=en},function(D){e.DEBUG&&console.log(D.step,"RTHG[]"),D.round=Nr},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SMD[]",I),D.minDis=I/64},function(D){e.DEBUG&&console.log(D.step,"ELSE[]"),jn(D,!1)},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"JMPR[]",I),D.ip+=I-1},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SCVTCI[]",I),D.cvCutIn=I/64},void 0,void 0,function(D){const I=D.stack;e.DEBUG&&console.log(D.step,"DUP[]"),I.push(I[I.length-1])},Qt,function(D){e.DEBUG&&console.log(D.step,"CLEAR[]"),D.stack.length=0},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"SWAP[]"),I.push(H),I.push(W)},function(D){const I=D.stack;e.DEBUG&&console.log(D.step,"DEPTH[]"),I.push(I.length)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"CINDEX[]",H),I.push(I[I.length-H])},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"MINDEX[]",H),I.push(I.splice(I.length-H,1)[0])},void 0,void 0,void 0,function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"LOOPCALL[]",H,W);const X=D.ip,re=D.prog;D.prog=D.funcs[H];for(let se=0;se<W;se++)kn(D),e.DEBUG&&console.log(++D.step,se+1<W?"next loopcall":"done loopcall",se);D.ip=X,D.prog=re},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"CALL[]",I);const H=D.ip,W=D.prog;D.prog=D.funcs[I],kn(D),D.ip=H,D.prog=W,e.DEBUG&&console.log(++D.step,"returning from",I)},function(D){if(D.env!=="fpgm")throw new Error("FDEF not allowed here");const I=D.stack,H=D.prog;let W=D.ip;const X=I.pop(),re=W;for(e.DEBUG&&console.log(D.step,"FDEF[]",X);H[++W]!==45;);D.ip=W,D.funcs[X]=H.slice(re+1,W)},void 0,be.bind(void 0,0),be.bind(void 0,1),ve.bind(void 0,Rn),ve.bind(void 0,Cn),Fe.bind(void 0,0),Fe.bind(void 0,1),tt.bind(void 0,0),tt.bind(void 0,1),Bt.bind(void 0,0),Bt.bind(void 0,1),function(D){const I=D.stack;let H=D.loop;const W=D.fv,X=I.pop()/64,re=D.z2;for(;H--;){const se=I.pop(),fe=re[se];e.DEBUG&&console.log(D.step,(D.loop>1?"loop "+(D.loop-H)+": ":"")+"SHPIX[]",se,X),W.setRelative(fe,fe,X),W.touch(fe)}D.loop=1},function(D){const I=D.stack,H=D.rp1,W=D.rp2;let X=D.loop;const re=D.z0[H],se=D.z1[W],fe=D.fv,le=D.dpv,ke=D.z2;for(;X--;){const je=I.pop(),Ke=ke[je];e.DEBUG&&console.log(D.step,(D.loop>1?"loop "+(D.loop-X)+": ":"")+"IP[]",je,H,"<->",W),fe.interpolate(Ke,re,se,le),fe.touch(Ke)}D.loop=1},Et.bind(void 0,0),Et.bind(void 0,1),function(D){const I=D.stack,H=D.rp0,W=D.z0[H];let X=D.loop;const re=D.fv,se=D.pv,fe=D.z1;for(;X--;){const le=I.pop(),ke=fe[le];e.DEBUG&&console.log(D.step,(D.loop>1?"loop "+(D.loop-X)+": ":"")+"ALIGNRP[]",le),re.setRelative(ke,W,0,se),re.touch(ke)}D.loop=1},function(D){e.DEBUG&&console.log(D.step,"RTDG[]"),D.round=gr},He.bind(void 0,0),He.bind(void 0,1),function(D){const I=D.prog;let H=D.ip;const W=D.stack,X=I[++H];e.DEBUG&&console.log(D.step,"NPUSHB[]",X);for(let re=0;re<X;re++)W.push(I[++H]);D.ip=H},function(D){let I=D.ip;const H=D.prog,W=D.stack,X=H[++I];e.DEBUG&&console.log(D.step,"NPUSHW[]",X);for(let re=0;re<X;re++){let se=H[++I]<<8|H[++I];32768&se&&(se=-(1+(65535^se))),W.push(se)}D.ip=I},function(D){const I=D.stack;let H=D.store;H||(H=D.store=[]);const W=I.pop(),X=I.pop();e.DEBUG&&console.log(D.step,"WS",W,X),H[X]=W},function(D){const I=D.stack,H=D.store,W=I.pop();e.DEBUG&&console.log(D.step,"RS",W);const X=H&&H[W]||0;I.push(X)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"WCVTP",H,W),D.cvt[W]=H/64},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"RCVT",H),I.push(64*D.cvt[H])},At.bind(void 0,0),At.bind(void 0,1),void 0,qt.bind(void 0,0),qt.bind(void 0,1),function(D){e.DEBUG&&console.log(D.step,"MPPEM[]"),D.stack.push(D.ppem)},void 0,function(D){e.DEBUG&&console.log(D.step,"FLIPON[]"),D.autoFlip=!0},void 0,void 0,function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"LT[]",H,W),I.push(W<H?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"LTEQ[]",H,W),I.push(W<=H?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"GT[]",H,W),I.push(W>H?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"GTEQ[]",H,W),I.push(W>=H?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"EQ[]",H,W),I.push(H===W?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"NEQ[]",H,W),I.push(H!==W?1:0)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"ODD[]",H),I.push(Math.trunc(H)%2?1:0)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"EVEN[]",H),I.push(Math.trunc(H)%2?0:1)},function(D){let I=D.stack.pop();e.DEBUG&&console.log(D.step,"IF[]",I),I||(jn(D,!0),e.DEBUG&&console.log(D.step,"EIF[]"))},function(D){e.DEBUG&&console.log(D.step,"EIF[]")},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"AND[]",H,W),I.push(H&&W?1:0)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"OR[]",H,W),I.push(H||W?1:0)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"NOT[]",H),I.push(H?0:1)},Or.bind(void 0,1),function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SDB[]",I),D.deltaBase=I},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SDS[]",I),D.deltaShift=Math.pow(.5,I)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"ADD[]",H,W),I.push(W+H)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"SUB[]",H,W),I.push(W-H)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"DIV[]",H,W),I.push(64*W/H)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"MUL[]",H,W),I.push(W*H/64)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"ABS[]",H),I.push(Math.abs(H))},function(D){const I=D.stack;let H=I.pop();e.DEBUG&&console.log(D.step,"NEG[]",H),I.push(-H)},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"FLOOR[]",H),I.push(64*Math.floor(H/64))},function(D){const I=D.stack,H=I.pop();e.DEBUG&&console.log(D.step,"CEILING[]",H),I.push(64*Math.ceil(H/64))},Rr.bind(void 0,0),Rr.bind(void 0,1),Rr.bind(void 0,2),Rr.bind(void 0,3),void 0,void 0,void 0,void 0,function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"WCVTF[]",H,W),D.cvt[W]=H*D.ppem/D.font.unitsPerEm},Or.bind(void 0,2),Or.bind(void 0,3),Wr.bind(void 0,1),Wr.bind(void 0,2),Wr.bind(void 0,3),function(D){let I,H=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"SROUND[]",H),D.round=ii,192&H){case 0:I=.5;break;case 64:I=1;break;case 128:I=2;break;default:throw new Error("invalid SROUND value")}switch(D.srPeriod=I,48&H){case 0:D.srPhase=0;break;case 16:D.srPhase=.25*I;break;case 32:D.srPhase=.5*I;break;case 48:D.srPhase=.75*I;break;default:throw new Error("invalid SROUND value")}H&=15,D.srThreshold=H===0?0:(H/8-.5)*I},function(D){let I,H=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"S45ROUND[]",H),D.round=ii,192&H){case 0:I=Math.sqrt(2)/2;break;case 64:I=Math.sqrt(2);break;case 128:I=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(D.srPeriod=I,48&H){case 0:D.srPhase=0;break;case 16:D.srPhase=.25*I;break;case 32:D.srPhase=.5*I;break;case 48:D.srPhase=.75*I;break;default:throw new Error("invalid S45ROUND value")}H&=15,D.srThreshold=H===0?0:(H/8-.5)*I},void 0,void 0,function(D){e.DEBUG&&console.log(D.step,"ROFF[]"),D.round=qn},void 0,function(D){e.DEBUG&&console.log(D.step,"RUTG[]"),D.round=Er},function(D){e.DEBUG&&console.log(D.step,"RDTG[]"),D.round=jr},Qt,Qt,void 0,void 0,void 0,void 0,void 0,function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SCANCTRL[]",I)},an.bind(void 0,0),an.bind(void 0,1),function(D){const I=D.stack,H=I.pop();let W=0;e.DEBUG&&console.log(D.step,"GETINFO[]",H),1&H&&(W=35),32&H&&(W|=4096),I.push(W)},void 0,function(D){const I=D.stack,H=I.pop(),W=I.pop(),X=I.pop();e.DEBUG&&console.log(D.step,"ROLL[]"),I.push(W),I.push(H),I.push(X)},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"MAX[]",H,W),I.push(Math.max(W,H))},function(D){const I=D.stack,H=I.pop(),W=I.pop();e.DEBUG&&console.log(D.step,"MIN[]",H,W),I.push(Math.min(W,H))},function(D){const I=D.stack.pop();e.DEBUG&&console.log(D.step,"SCANTYPE[]",I)},function(D){const I=D.stack.pop();let H=D.stack.pop();switch(e.DEBUG&&console.log(D.step,"INSTCTRL[]",I,H),I){case 1:return void(D.inhibitGridFit=!!H);case 2:return void(D.ignoreCvt=!!H);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Sr.bind(void 0,1),Sr.bind(void 0,2),Sr.bind(void 0,3),Sr.bind(void 0,4),Sr.bind(void 0,5),Sr.bind(void 0,6),Sr.bind(void 0,7),Sr.bind(void 0,8),Ir.bind(void 0,1),Ir.bind(void 0,2),Ir.bind(void 0,3),Ir.bind(void 0,4),Ir.bind(void 0,5),Ir.bind(void 0,6),Ir.bind(void 0,7),Ir.bind(void 0,8),Nt.bind(void 0,0,0,0,0,0),Nt.bind(void 0,0,0,0,0,1),Nt.bind(void 0,0,0,0,0,2),Nt.bind(void 0,0,0,0,0,3),Nt.bind(void 0,0,0,0,1,0),Nt.bind(void 0,0,0,0,1,1),Nt.bind(void 0,0,0,0,1,2),Nt.bind(void 0,0,0,0,1,3),Nt.bind(void 0,0,0,1,0,0),Nt.bind(void 0,0,0,1,0,1),Nt.bind(void 0,0,0,1,0,2),Nt.bind(void 0,0,0,1,0,3),Nt.bind(void 0,0,0,1,1,0),Nt.bind(void 0,0,0,1,1,1),Nt.bind(void 0,0,0,1,1,2),Nt.bind(void 0,0,0,1,1,3),Nt.bind(void 0,0,1,0,0,0),Nt.bind(void 0,0,1,0,0,1),Nt.bind(void 0,0,1,0,0,2),Nt.bind(void 0,0,1,0,0,3),Nt.bind(void 0,0,1,0,1,0),Nt.bind(void 0,0,1,0,1,1),Nt.bind(void 0,0,1,0,1,2),Nt.bind(void 0,0,1,0,1,3),Nt.bind(void 0,0,1,1,0,0),Nt.bind(void 0,0,1,1,0,1),Nt.bind(void 0,0,1,1,0,2),Nt.bind(void 0,0,1,1,0,3),Nt.bind(void 0,0,1,1,1,0),Nt.bind(void 0,0,1,1,1,1),Nt.bind(void 0,0,1,1,1,2),Nt.bind(void 0,0,1,1,1,3),Nt.bind(void 0,1,0,0,0,0),Nt.bind(void 0,1,0,0,0,1),Nt.bind(void 0,1,0,0,0,2),Nt.bind(void 0,1,0,0,0,3),Nt.bind(void 0,1,0,0,1,0),Nt.bind(void 0,1,0,0,1,1),Nt.bind(void 0,1,0,0,1,2),Nt.bind(void 0,1,0,0,1,3),Nt.bind(void 0,1,0,1,0,0),Nt.bind(void 0,1,0,1,0,1),Nt.bind(void 0,1,0,1,0,2),Nt.bind(void 0,1,0,1,0,3),Nt.bind(void 0,1,0,1,1,0),Nt.bind(void 0,1,0,1,1,1),Nt.bind(void 0,1,0,1,1,2),Nt.bind(void 0,1,0,1,1,3),Nt.bind(void 0,1,1,0,0,0),Nt.bind(void 0,1,1,0,0,1),Nt.bind(void 0,1,1,0,0,2),Nt.bind(void 0,1,1,0,0,3),Nt.bind(void 0,1,1,0,1,0),Nt.bind(void 0,1,1,0,1,1),Nt.bind(void 0,1,1,0,1,2),Nt.bind(void 0,1,1,0,1,3),Nt.bind(void 0,1,1,1,0,0),Nt.bind(void 0,1,1,1,0,1),Nt.bind(void 0,1,1,1,0,2),Nt.bind(void 0,1,1,1,0,3),Nt.bind(void 0,1,1,1,1,0),Nt.bind(void 0,1,1,1,1,1),Nt.bind(void 0,1,1,1,1,2),Nt.bind(void 0,1,1,1,1,3)];const un=tn;function pr(D){(D=D||{}).empty||(zn(D.familyName,"When creating a new Font object, familyName is required."),zn(D.styleName,"When creating a new Font object, styleName is required."),zn(D.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),zn(D.ascender,"When creating a new Font object, ascender is required."),zn(D.descender,"When creating a new Font object, descender is required."),zn(D.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:D.familyName||" "},fontSubfamily:{en:D.styleName||" "},fullName:{en:D.fullName||D.familyName+" "+D.styleName},postScriptName:{en:D.postScriptName||D.familyName+D.styleName},designer:{en:D.designer||" "},designerURL:{en:D.designerURL||" "},manufacturer:{en:D.manufacturer||" "},manufacturerURL:{en:D.manufacturerURL||" "},license:{en:D.license||" "},licenseURL:{en:D.licenseURL||" "},version:{en:D.version||"Version 0.1"},description:{en:D.description||" "},copyright:{en:D.copyright||" "},trademark:{en:D.trademark||" "}},this.unitsPerEm=D.unitsPerEm||1e3,this.ascender=D.ascender,this.descender=D.descender,this.createdTimestamp=D.createdTimestamp,this.tables={os2:{usWeightClass:D.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:D.widthClass||this.usWidthClasses.MEDIUM,fsSelection:D.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new yt.GlyphSet(this,D.glyphs||[]),this.encoding=new ze(this),this.position=new ai(this),this.substitution=new zr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new un(this):void 0}})}pr.prototype.hasChar=function(D){return this.encoding.charToGlyphIndex(D)!==null},pr.prototype.charToGlyphIndex=function(D){return this.encoding.charToGlyphIndex(D)},pr.prototype.charToGlyph=function(D){const I=this.charToGlyphIndex(D);let H=this.glyphs.get(I);return H||(H=this.glyphs.get(0)),H},pr.prototype.stringToGlyphs=function(D,I){I=I||this.defaultRenderOptions;const H=[];for(let se=0;se<D.length;se+=1){const fe=D[se];H.push(this.charToGlyphIndex(fe))}let W=H.length;if(I.features){const se=I.script||this.substitution.getDefaultScriptName();let fe=[];I.features.liga&&(fe=fe.concat(this.substitution.getFeature("liga",se,I.language))),I.features.rlig&&(fe=fe.concat(this.substitution.getFeature("rlig",se,I.language)));for(let le=0;le<W;le+=1)for(let ke=0;ke<fe.length;ke++){const je=fe[ke],Ke=je.sub,nt=Ke.length;let Ft=0;for(;Ft<nt&&Ke[Ft]===H[le+Ft];)Ft++;Ft===nt&&(H.splice(le,nt,je.by),W=W-nt+1)}}const X=new Array(W),re=this.glyphs.get(0);for(let se=0;se<W;se+=1)X[se]=this.glyphs.get(H[se])||re;return X},pr.prototype.nameToGlyphIndex=function(D){return this.glyphNames.nameToGlyphIndex(D)},pr.prototype.nameToGlyph=function(D){const I=this.nameToGlyphIndex(D);let H=this.glyphs.get(I);return H||(H=this.glyphs.get(0)),H},pr.prototype.glyphIndexToName=function(D){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(D):""},pr.prototype.getKerningValue=function(D,I){return D=D.index||D,I=I.index||I,this.kerningPairs[D+","+I]||0},pr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},pr.prototype.forEachGlyph=function(D,I,H,W,X,re){I=I!==void 0?I:0,H=H!==void 0?H:0,W=W!==void 0?W:72,X=X||this.defaultRenderOptions;const se=1/this.unitsPerEm*W,fe=this.stringToGlyphs(D,X);let le;if(X.kerning){const ke=X.script||this.position.getDefaultScriptName();le=this.position.getKerningTables(ke,X.language)}for(let ke=0;ke<fe.length;ke+=1){const je=fe[ke];re.call(this,je,I,H,W,X),je.advanceWidth&&(I+=je.advanceWidth*se),X.kerning&&ke<fe.length-1&&(I+=(le?this.position.getKerningValue(le,je.index,fe[ke+1].index):this.getKerningValue(je,fe[ke+1]))*se),X.letterSpacing?I+=X.letterSpacing*W:X.tracking&&(I+=X.tracking/1e3*W)}return I},pr.prototype.getPath=function(D,I,H,W,X){const re=new O;return this.forEachGlyph(D,I,H,W,X,function(se,fe,le,ke){const je=se.getPath(fe,le,ke,X,this);re.extend(je)}),re},pr.prototype.getPaths=function(D,I,H,W,X){const re=[];return this.forEachGlyph(D,I,H,W,X,function(se,fe,le,ke){const je=se.getPath(fe,le,ke,X,this);re.push(je)}),re},pr.prototype.getAdvanceWidth=function(D,I,H){return this.forEachGlyph(D,0,0,I,H,function(){})},pr.prototype.draw=function(D,I,H,W,X,re){this.getPath(I,H,W,X,re).draw(D)},pr.prototype.drawPoints=function(D,I,H,W,X,re){this.forEachGlyph(I,H,W,X,re,function(se,fe,le,ke){se.drawPoints(D,fe,le,ke)})},pr.prototype.drawMetrics=function(D,I,H,W,X,re){this.forEachGlyph(I,H,W,X,re,function(se,fe,le,ke){se.drawMetrics(D,fe,le,ke)})},pr.prototype.getEnglishName=function(D){const I=this.names[D];if(I)return I.en},pr.prototype.validate=function(){const D=this;function I(W,X){}function H(W){const X=D.getEnglishName(W);X&&X.trim().length>0}H("fontFamily"),H("weightName"),H("manufacturer"),H("copyright"),H("version"),this.unitsPerEm>0},pr.prototype.toTables=function(){return Br(this)},pr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},pr.prototype.toArrayBuffer=function(){const D=this.toTables().encode(),I=new ArrayBuffer(D.length),H=new Uint8Array(I);for(let W=0;W<D.length;W++)H[W]=D[W];return I},pr.prototype.download=function(D){const I=this.getEnglishName("fontFamily"),H=this.getEnglishName("fontSubfamily");D=D||I.replace(/\s/g,"")+"-"+H+".otf";const W=this.toArrayBuffer();if(typeof window<"u")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,W.byteLength,function(X){X.root.getFile(D,{create:!0},function(re){re.createWriter(function(se){const fe=new DataView(W),le=new Blob([fe],{type:"font/opentype"});se.write(le),se.addEventListener("writeend",function(){location.href=re.toURL()},!1)})})},function(X){throw new Error(X.name+": "+X.message)});else{const X=S(89),re=function(se){const fe=new Buffer(se.byteLength),le=new Uint8Array(se);for(let ke=0;ke<fe.length;++ke)fe[ke]=le[ke];return fe}(W);X.writeFileSync(D,re)}},pr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},pr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},pr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};const Nn=pr;function On(D,I){const H=JSON.stringify(D);let W=256;for(let X in I){let re=parseInt(X);if(re&&!(re<256)){if(JSON.stringify(I[X])===H)return re;W<=re&&(W=re+1)}}return I[W]=D,W}function Mr(D,I,H){const W=On(I.name,H);return[{name:"tag_"+D,type:"TAG",value:I.tag},{name:"minValue_"+D,type:"FIXED",value:I.minValue<<16},{name:"defaultValue_"+D,type:"FIXED",value:I.defaultValue<<16},{name:"maxValue_"+D,type:"FIXED",value:I.maxValue<<16},{name:"flags_"+D,type:"USHORT",value:0},{name:"nameID_"+D,type:"USHORT",value:W}]}function sr(D,I,H){const W={},X=new Be.Parser(D,I);return W.tag=X.parseTag(),W.minValue=X.parseFixed(),W.defaultValue=X.parseFixed(),W.maxValue=X.parseFixed(),X.skip("uShort",1),W.name=H[X.parseUShort()]||{},W}function Tn(D,I,H,W){const X=[{name:"nameID_"+D,type:"USHORT",value:On(I.name,W)},{name:"flags_"+D,type:"USHORT",value:0}];for(let re=0;re<H.length;++re){const se=H[re].tag;X.push({name:"axis_"+D+" "+se,type:"FIXED",value:I.coordinates[se]<<16})}return X}function Pr(D,I,H,W){const X={},re=new Be.Parser(D,I);X.name=W[re.parseUShort()]||{},re.skip("uShort",1),X.coordinates={};for(let se=0;se<H.length;++se)X.coordinates[H[se].tag]=re.parseFixed();return X}const En={make:function(D,I){const H=new me.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:D.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:D.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*D.axes.length}]);H.offsetToData=H.sizeOf();for(let W=0;W<D.axes.length;W++)H.fields=H.fields.concat(Mr(W,D.axes[W],I));for(let W=0;W<D.instances.length;W++)H.fields=H.fields.concat(Tn(W,D.instances[W],D.axes,I));return H},parse:function(D,I,H){const W=new Be.Parser(D,I),X=W.parseULong();L.argument(X===65536,"Unsupported fvar table version.");const re=W.parseOffset16();W.skip("uShort",1);const se=W.parseUShort(),fe=W.parseUShort(),le=W.parseUShort(),ke=W.parseUShort(),je=[];for(let Ft=0;Ft<se;Ft++)je.push(sr(D,I+re+Ft*fe,H));const Ke=[],nt=I+re+se*fe;for(let Ft=0;Ft<le;Ft++)Ke.push(Pr(D,nt+Ft*ke,je,H));return{axes:je,instances:Ke}}},rn=new Array(10);rn[1]=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort();return I===1?{posFormat:1,coverage:this.parsePointer(_e.coverage),value:this.parseValueRecord()}:I===2?{posFormat:2,coverage:this.parsePointer(_e.coverage),values:this.parseValueRecordList()}:void L.assert(!1,"0x"+D.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},rn[2]=function(){const D=this.offset+this.relativeOffset,I=this.parseUShort(),H=this.parsePointer(_e.coverage),W=this.parseUShort(),X=this.parseUShort();if(I===1)return{posFormat:I,coverage:H,valueFormat1:W,valueFormat2:X,pairSets:this.parseList(_e.pointer(_e.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(W),value2:this.parseValueRecord(X)}})))};if(I===2){const re=this.parsePointer(_e.classDef),se=this.parsePointer(_e.classDef),fe=this.parseUShort(),le=this.parseUShort();return{posFormat:I,coverage:H,valueFormat1:W,valueFormat2:X,classDef1:re,classDef2:se,class1Count:fe,class2Count:le,classRecords:this.parseList(fe,_e.list(le,function(){return{value1:this.parseValueRecord(W),value2:this.parseValueRecord(X)}}))}}L.assert(!1,"0x"+D.toString(16)+": GPOS lookup type 2 format must be 1 or 2.")},rn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},rn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},rn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},rn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},rn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},rn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},rn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};const Jn=new Array(10),_n={parse:function(D,I){const H=new _e(D,I=I||0),W=H.parseVersion(1);return L.argument(W===1||W===1.1,"Unsupported GPOS table version "+W),W===1?{version:W,scripts:H.parseScriptList(),features:H.parseFeatureList(),lookups:H.parseLookupList(rn)}:{version:W,scripts:H.parseScriptList(),features:H.parseFeatureList(),lookups:H.parseLookupList(rn),variations:H.parseFeatureVariationsList()}},make:function(D){return new me.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new me.ScriptList(D.scripts)},{name:"features",type:"TABLE",value:new me.FeatureList(D.features)},{name:"lookups",type:"TABLE",value:new me.LookupList(D.lookups,Jn)}])}},Vn={parse:function(D,I){const H=new Be.Parser(D,I),W=H.parseUShort();if(W===0)return function(X){const re={};X.skip("uShort");const se=X.parseUShort();L.argument(se===0,"Unsupported kern sub-table version."),X.skip("uShort",2);const fe=X.parseUShort();X.skip("uShort",3);for(let le=0;le<fe;le+=1){const ke=X.parseUShort(),je=X.parseUShort(),Ke=X.parseShort();re[ke+","+je]=Ke}return re}(H);if(W===1)return function(X){const re={};X.skip("uShort"),X.parseULong()>1&&console.warn("Only the first kern subtable is supported."),X.skip("uLong");const se=255&X.parseUShort();if(X.skip("uShort"),se===0){const fe=X.parseUShort();X.skip("uShort",3);for(let le=0;le<fe;le+=1){const ke=X.parseUShort(),je=X.parseUShort(),Ke=X.parseShort();re[ke+","+je]=Ke}}return re}(H);throw new Error("Unsupported kern table version ("+W+").")}},ei={parse:function(D,I,H,W){const X=new Be.Parser(D,I),re=W?X.parseUShort:X.parseULong,se=[];for(let fe=0;fe<H+1;fe+=1){let le=re.call(X);W&&(le*=2),se.push(le)}return se}};function Fn(D,I){S(89).readFile(D,function(H,W){if(H)return I(H.message);I(null,$n(W))})}function Zn(D,I){const H=new XMLHttpRequest;H.open("get",D,!0),H.responseType="arraybuffer",H.onload=function(){return H.response?I(null,H.response):I("Font could not be loaded: "+H.statusText)},H.onerror=function(){I("Font could not be loaded")},H.send()}function Kn(D,I){const H=[];let W=12;for(let X=0;X<I;X+=1){const re=Be.getTag(D,W),se=Be.getULong(D,W+4),fe=Be.getULong(D,W+8),le=Be.getULong(D,W+12);H.push({tag:re,checksum:se,offset:fe,length:le,compression:!1}),W+=16}return H}function Zr(D,I){if(I.compression==="WOFF"){const H=new Uint8Array(D.buffer,I.offset+2,I.compressedLength-2),W=new Uint8Array(I.length);if(w()(H,W),W.byteLength!==I.length)throw new Error("Decompression error: "+I.tag+" decompressed length doesn't match recorded length");return{data:new DataView(W.buffer,0),offset:0}}return{data:D,offset:I.offset}}function Dn(D){let I,H;const W=new Nn({empty:!0}),X=new DataView(D,0);let re,se=[];const fe=Be.getTag(X,0);if(fe==="\0\0\0"||fe==="true"||fe==="typ1")W.outlinesFormat="truetype",re=Be.getUShort(X,4),se=Kn(X,re);else if(fe==="OTTO")W.outlinesFormat="cff",re=Be.getUShort(X,4),se=Kn(X,re);else{if(fe!=="wOFF")throw new Error("Unsupported OpenType signature "+fe);{const E=Be.getTag(X,4);if(E==="\0\0\0")W.outlinesFormat="truetype";else{if(E!=="OTTO")throw new Error("Unsupported OpenType flavor "+fe);W.outlinesFormat="cff"}re=Be.getUShort(X,12),se=function(T,R){const N=[];let z=44;for(let Z=0;Z<R;Z+=1){const oe=Be.getTag(T,z),ue=Be.getULong(T,z+4),ge=Be.getULong(T,z+8),Ae=Be.getULong(T,z+12);let $e;$e=ge<Ae&&"WOFF",N.push({tag:oe,offset:ue,compression:$e,compressedLength:ge,length:Ae}),z+=20}return N}(X,re)}}let le,ke,je,Ke,nt,Ft,Tt,Ht,St,ae,u;for(let E=0;E<re;E+=1){const T=se[E];let R;switch(T.tag){case"cmap":R=Zr(X,T),W.tables.cmap=ht.parse(R.data,R.offset),W.encoding=new Ue(W.tables.cmap);break;case"cvt ":R=Zr(X,T),u=new Be.Parser(R.data,R.offset),W.tables.cvt=u.parseShortList(T.length/2);break;case"fvar":ke=T;break;case"fpgm":R=Zr(X,T),u=new Be.Parser(R.data,R.offset),W.tables.fpgm=u.parseByteList(T.length);break;case"head":R=Zr(X,T),W.tables.head=De.parse(R.data,R.offset),W.unitsPerEm=W.tables.head.unitsPerEm,I=W.tables.head.indexToLocFormat;break;case"hhea":R=Zr(X,T),W.tables.hhea=er.parse(R.data,R.offset),W.ascender=W.tables.hhea.ascender,W.descender=W.tables.hhea.descender,W.numberOfHMetrics=W.tables.hhea.numberOfHMetrics;break;case"hmtx":Ft=T;break;case"ltag":R=Zr(X,T),H=wr.parse(R.data,R.offset);break;case"maxp":R=Zr(X,T),W.tables.maxp=Xt.parse(R.data,R.offset),W.numGlyphs=W.tables.maxp.numGlyphs;break;case"name":St=T;break;case"OS/2":R=Zr(X,T),W.tables.os2=dr.parse(R.data,R.offset);break;case"post":R=Zr(X,T),W.tables.post=mr.parse(R.data,R.offset),W.glyphNames=new ut(W.tables.post);break;case"prep":R=Zr(X,T),u=new Be.Parser(R.data,R.offset),W.tables.prep=u.parseByteList(T.length);break;case"glyf":je=T;break;case"loca":Ht=T;break;case"CFF ":le=T;break;case"kern":Tt=T;break;case"GPOS":Ke=T;break;case"GSUB":nt=T;break;case"meta":ae=T}}const p=Zr(X,St);if(W.tables.name=kr.parse(p.data,p.offset,H),W.names=W.tables.name,je&&Ht){const E=I===0,T=Zr(X,Ht),R=ei.parse(T.data,T.offset,W.numGlyphs,E),N=Zr(X,je);W.glyphs=Ve.parse(N.data,N.offset,R,W)}else{if(!le)throw new Error("Font doesn't contain TrueType or CFF outlines.");{const E=Zr(X,le);ct.parse(E.data,E.offset,W)}}const _=Zr(X,Ft);if(Cr.parse(_.data,_.offset,W.numberOfHMetrics,W.numGlyphs,W.glyphs),function(E){let T;const R=E.tables.cmap.glyphIndexMap,N=Object.keys(R);for(let z=0;z<N.length;z+=1){const Z=N[z],oe=R[Z];T=E.glyphs.get(oe),T.addUnicode(parseInt(Z))}for(let z=0;z<E.glyphs.length;z+=1)T=E.glyphs.get(z),E.cffEncoding?E.isCIDFont?T.name="gid"+z:T.name=E.cffEncoding.charset[z]:E.glyphNames.names&&(T.name=E.glyphNames.glyphIndexToName(z))}(W),Tt){const E=Zr(X,Tt);W.kerningPairs=Vn.parse(E.data,E.offset)}else W.kerningPairs={};if(Ke){const E=Zr(X,Ke);W.tables.gpos=_n.parse(E.data,E.offset)}if(nt){const E=Zr(X,nt);W.tables.gsub=gn.parse(E.data,E.offset)}if(ke){const E=Zr(X,ke);W.tables.fvar=En.parse(E.data,E.offset,W.names)}if(ae){const E=Zr(X,ae);W.tables.meta=Dr.parse(E.data,E.offset),W.metas=W.tables.meta}return W}function qr(D,I){(typeof window>"u"?Fn:Zn)(D,function(H,W){if(H)return I(H);let X;try{X=Dn(W)}catch(re){return I(re,null)}return I(null,X)})}function ti(D){return Dn($n(S(89).readFileSync(D)))}},896:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(978);class w extends A.Writable{constructor(){super(...arguments),this.offset=0,this._waiters=[],this._closed=!1}_write(x,y,O){let k=0;const P=()=>{for(;this._waiters.length>0;){const L=this._waiters[0];if(this._buffer){const M=this._buffer.size-this._buffer.offset;if(!(M+x.length>=L.size)){if(!L.skip){const B=Buffer.alloc(M+x.length);this._buffer.buf.copy(B,0,this._buffer.offset,this._buffer.size),x.copy(B,M,0,x.length),this._buffer.buf=B}this._buffer.offset=0,this._buffer.size=M+x.length,O();break}if(L.skip)this._buffer=void 0,L.resolve();else{const B=Math.min(M,L.size),j=Buffer.alloc(L.size);this._buffer.buf.copy(j,0,this._buffer.offset,this._buffer.offset+B),x.copy(j,B,0,L.size-B),L.resolve(j)}if(this.offset+=L.size,this._waiters.shift(),this._buffer=void 0,M+x.length===L.size){O();break}k+=L.size-M}else{if(!(x.length-k>=L.size)){this._buffer={buf:L.skip?void 0:x.slice(k),offset:0,size:x.length-k},k=x.length,O();break}if(L.skip?L.resolve():L.resolve(x.slice(k,k+L.size)),this.offset+=L.size,this._waiters.shift(),k+=L.size,x.length===k){O();break}}}this._processTrigger=x.length-k>0?P:void 0};P()}_destroy(x,y){this._processTrigger=void 0;for(const O of this._waiters)O.reject(x||new Error("stream destroyed"));this._waiters=[],this._closed=!0}_final(x){this._processTrigger=void 0;for(const y of this._waiters)y.reject(new Error("not enough data in stream"));this._waiters=[],this._closed=!0}read(x){return new Promise((y,O)=>{this._closed&&O(new Error("stream is closed")),this._waiters.push({resolve:y,reject:O,size:x,skip:!1}),this._processTrigger&&this._processTrigger()})}skip(x){return new Promise((y,O)=>{this._closed&&O(new Error("stream is closed")),this._waiters.push({resolve:y,reject:O,size:x,skip:!0}),this._processTrigger&&this._processTrigger()})}}function m(){return new w}g.exports=Object.assign(m,{default:m}),v.default=m},311:g=>{function v(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function S(G,te){this.source=G,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=te,this.destLen=0,this.ltree=new v,this.dtree=new v}var A=new v,w=new v,m=new Uint8Array(30),b=new Uint16Array(30),x=new Uint8Array(30),y=new Uint16Array(30),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),k=new v,P=new Uint8Array(320);function L(G,te,Y,J){var K,ne;for(K=0;K<Y;++K)G[K]=0;for(K=0;K<30-Y;++K)G[K+Y]=K/Y|0;for(ne=J,K=0;K<30;++K)te[K]=ne,ne+=1<<G[K]}var M=new Uint16Array(16);function B(G,te,Y,J){var K,ne;for(K=0;K<16;++K)G.table[K]=0;for(K=0;K<J;++K)G.table[te[Y+K]]++;for(G.table[0]=0,ne=0,K=0;K<16;++K)M[K]=ne,ne+=G.table[K];for(K=0;K<J;++K)te[Y+K]&&(G.trans[M[te[Y+K]]++]=K)}function j(G){G.bitcount--||(G.tag=G.source[G.sourceIndex++],G.bitcount=7);var te=1&G.tag;return G.tag>>>=1,te}function F(G,te,Y){if(!te)return Y;for(;G.bitcount<24;)G.tag|=G.source[G.sourceIndex++]<<G.bitcount,G.bitcount+=8;var J=G.tag&65535>>>16-te;return G.tag>>>=te,G.bitcount-=te,J+Y}function U(G,te){for(;G.bitcount<24;)G.tag|=G.source[G.sourceIndex++]<<G.bitcount,G.bitcount+=8;var Y=0,J=0,K=0,ne=G.tag;do J=2*J+(1&ne),ne>>>=1,++K,Y+=te.table[K],J-=te.table[K];while(J>=0);return G.tag=ne,G.bitcount-=K,te.trans[Y+J]}function V(G,te,Y){var J,K,ne,de,Re,Te;for(J=F(G,5,257),K=F(G,5,1),ne=F(G,4,4),de=0;de<19;++de)P[de]=0;for(de=0;de<ne;++de){var Me=F(G,3,0);P[O[de]]=Me}for(B(k,P,0,19),Re=0;Re<J+K;){var Ie=U(G,k);switch(Ie){case 16:var ce=P[Re-1];for(Te=F(G,2,3);Te;--Te)P[Re++]=ce;break;case 17:for(Te=F(G,3,3);Te;--Te)P[Re++]=0;break;case 18:for(Te=F(G,7,11);Te;--Te)P[Re++]=0;break;default:P[Re++]=Ie}}B(te,P,0,J),B(Y,P,J,K)}function Q(G,te,Y){for(;;){var J,K,ne,de,Re=U(G,te);if(Re===256)return 0;if(Re<256)G.dest[G.destLen++]=Re;else for(J=F(G,m[Re-=257],b[Re]),K=U(G,Y),de=ne=G.destLen-F(G,x[K],y[K]);de<ne+J;++de)G.dest[G.destLen++]=G.dest[de]}}function q(G){for(var te,Y;G.bitcount>8;)G.sourceIndex--,G.bitcount-=8;if((te=256*(te=G.source[G.sourceIndex+1])+G.source[G.sourceIndex])!==(65535&~(256*G.source[G.sourceIndex+3]+G.source[G.sourceIndex+2])))return-3;for(G.sourceIndex+=4,Y=te;Y;--Y)G.dest[G.destLen++]=G.source[G.sourceIndex++];return G.bitcount=0,0}(function(G,te){var Y;for(Y=0;Y<7;++Y)G.table[Y]=0;for(G.table[7]=24,G.table[8]=152,G.table[9]=112,Y=0;Y<24;++Y)G.trans[Y]=256+Y;for(Y=0;Y<144;++Y)G.trans[24+Y]=Y;for(Y=0;Y<8;++Y)G.trans[168+Y]=280+Y;for(Y=0;Y<112;++Y)G.trans[176+Y]=144+Y;for(Y=0;Y<5;++Y)te.table[Y]=0;for(te.table[5]=32,Y=0;Y<32;++Y)te.trans[Y]=Y})(A,w),L(m,b,4,3),L(x,y,2,1),m[28]=0,b[28]=258,g.exports=function(G,te){var Y,J,K=new S(G,te);do{switch(Y=j(K),F(K,2,0)){case 0:J=q(K);break;case 1:J=Q(K,A,w);break;case 2:V(K,K.ltree,K.dtree),J=Q(K,K.ltree,K.dtree);break;default:J=-3}if(J!==0)throw new Error("Data error")}while(!Y);return K.destLen<K.dest.length?typeof K.dest.slice=="function"?K.dest.slice(0,K.destLen):K.dest.subarray(0,K.destLen):K.dest}},371:g=>{g.exports=function(v){v.prototype[Symbol.iterator]=function*(){for(let S=this.head;S;S=S.next)yield S.value}}},411:(g,v,S)=>{function A(y){var O=this;if(O instanceof A||(O=new A),O.tail=null,O.head=null,O.length=0,y&&typeof y.forEach=="function")y.forEach(function(L){O.push(L)});else if(arguments.length>0)for(var k=0,P=arguments.length;k<P;k++)O.push(arguments[k]);return O}function w(y,O,k){var P=O===y.head?new x(k,null,O,y):new x(k,O,O.next,y);return P.next===null&&(y.tail=P),P.prev===null&&(y.head=P),y.length++,P}function m(y,O){y.tail=new x(O,y.tail,null,y),y.head||(y.head=y.tail),y.length++}function b(y,O){y.head=new x(O,null,y.head,y),y.tail||(y.tail=y.head),y.length++}function x(y,O,k,P){if(!(this instanceof x))return new x(y,O,k,P);this.list=P,this.value=y,O?(O.next=this,this.prev=O):this.prev=null,k?(k.prev=this,this.next=k):this.next=null}g.exports=A,A.Node=x,A.create=A,A.prototype.removeNode=function(y){if(y.list!==this)throw new Error("removing node which does not belong to this list");var O=y.next,k=y.prev;return O&&(O.prev=k),k&&(k.next=O),y===this.head&&(this.head=O),y===this.tail&&(this.tail=k),y.list.length--,y.next=null,y.prev=null,y.list=null,O},A.prototype.unshiftNode=function(y){if(y!==this.head){y.list&&y.list.removeNode(y);var O=this.head;y.list=this,y.next=O,O&&(O.prev=y),this.head=y,this.tail||(this.tail=y),this.length++}},A.prototype.pushNode=function(y){if(y!==this.tail){y.list&&y.list.removeNode(y);var O=this.tail;y.list=this,y.prev=O,O&&(O.next=y),this.tail=y,this.head||(this.head=y),this.length++}},A.prototype.push=function(){for(var y=0,O=arguments.length;y<O;y++)m(this,arguments[y]);return this.length},A.prototype.unshift=function(){for(var y=0,O=arguments.length;y<O;y++)b(this,arguments[y]);return this.length},A.prototype.pop=function(){if(this.tail){var y=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,y}},A.prototype.shift=function(){if(this.head){var y=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,y}},A.prototype.forEach=function(y,O){O=O||this;for(var k=this.head,P=0;k!==null;P++)y.call(O,k.value,P,this),k=k.next},A.prototype.forEachReverse=function(y,O){O=O||this;for(var k=this.tail,P=this.length-1;k!==null;P--)y.call(O,k.value,P,this),k=k.prev},A.prototype.get=function(y){for(var O=0,k=this.head;k!==null&&O<y;O++)k=k.next;if(O===y&&k!==null)return k.value},A.prototype.getReverse=function(y){for(var O=0,k=this.tail;k!==null&&O<y;O++)k=k.prev;if(O===y&&k!==null)return k.value},A.prototype.map=function(y,O){O=O||this;for(var k=new A,P=this.head;P!==null;)k.push(y.call(O,P.value,this)),P=P.next;return k},A.prototype.mapReverse=function(y,O){O=O||this;for(var k=new A,P=this.tail;P!==null;)k.push(y.call(O,P.value,this)),P=P.prev;return k},A.prototype.reduce=function(y,O){var k,P=this.head;if(arguments.length>1)k=O;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");P=this.head.next,k=this.head.value}for(var L=0;P!==null;L++)k=y(k,P.value,L),P=P.next;return k},A.prototype.reduceReverse=function(y,O){var k,P=this.tail;if(arguments.length>1)k=O;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");P=this.tail.prev,k=this.tail.value}for(var L=this.length-1;P!==null;L--)k=y(k,P.value,L),P=P.prev;return k},A.prototype.toArray=function(){for(var y=new Array(this.length),O=0,k=this.head;k!==null;O++)y[O]=k.value,k=k.next;return y},A.prototype.toArrayReverse=function(){for(var y=new Array(this.length),O=0,k=this.tail;k!==null;O++)y[O]=k.value,k=k.prev;return y},A.prototype.slice=function(y,O){(O=O||this.length)<0&&(O+=this.length),(y=y||0)<0&&(y+=this.length);var k=new A;if(O<y||O<0)return k;y<0&&(y=0),O>this.length&&(O=this.length);for(var P=0,L=this.head;L!==null&&P<y;P++)L=L.next;for(;L!==null&&P<O;P++,L=L.next)k.push(L.value);return k},A.prototype.sliceReverse=function(y,O){(O=O||this.length)<0&&(O+=this.length),(y=y||0)<0&&(y+=this.length);var k=new A;if(O<y||O<0)return k;y<0&&(y=0),O>this.length&&(O=this.length);for(var P=this.length,L=this.tail;L!==null&&P>O;P--)L=L.prev;for(;L!==null&&P>y;P--,L=L.prev)k.push(L.value);return k},A.prototype.splice=function(y,O,...k){y>this.length&&(y=this.length-1),y<0&&(y=this.length+y);for(var P=0,L=this.head;L!==null&&P<y;P++)L=L.next;var M=[];for(P=0;L&&P<O;P++)M.push(L.value),L=this.removeNode(L);for(L===null&&(L=this.tail),L!==this.head&&L!==this.tail&&(L=L.prev),P=0;P<k.length;P++)L=w(this,L,k[P]);return M},A.prototype.reverse=function(){for(var y=this.head,O=this.tail,k=y;k!==null;k=k.prev){var P=k.prev;k.prev=k.next,k.next=P}return this.head=O,this.tail=y,this};try{S(371)(A)}catch{}},109:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0});const A=S(98),w=S(104);let m;v.default=async function(x,y){var O,k;if(!m){if(typeof navigator<"u"&&"fonts"in navigator){try{const M=await((k=(O=navigator.permissions).request)===null||k===void 0?void 0:k.call(O,{name:"local-fonts"}));if(M&&M.state!=="granted")throw new Error("Permission to access local fonts not granted.")}catch(M){if(M.name!=="TypeError")throw M}const L={};try{const M=await navigator.fonts.query();for(const B of M)L.hasOwnProperty(B.family)||(L[B.family]=[]),L[B.family].push(B);m=Promise.resolve(L)}catch(M){console.error(M.name,M.message)}}else if(typeof window<"u"&&"queryLocalFonts"in window){const L={};try{const M=await window.queryLocalFonts();for(const B of M)L.hasOwnProperty(B.family)||(L[B.family]=[]),L[B.family].push(B);m=Promise.resolve(L)}catch(M){console.error(M.name,M.message)}}m||(m=Promise.resolve({}))}const P=await m;for(const L of(0,w.default)(x)){if(b.includes(L))return;if(P.hasOwnProperty(L)&&P[L].length>0){const M=P[L][0];if("blob"in M){const B=await M.blob(),j=await B.arrayBuffer();return(0,A.loadBuffer)(j,{cacheSize:y})}return}}};const b=["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong"]},833:(g,v,S)=>{Object.defineProperty(v,"__esModule",{value:!0}),v.enableLigatures=void 0;const A=S(109);v.enableLigatures=function(w,m=[]){let b,x,y,O=0;return w.registerCharacterJoiner(k=>{const P=w.options.fontFamily;if(P&&(O===0||b!==P)){x=void 0,O=1,b=P;const L=b;(0,A.default)(L,1e5).then(M=>{L===w.options.fontFamily&&(O=2,x=M,M&&w.refresh(0,w.rows-1))}).catch(M=>{L===w.options.fontFamily&&(O=3,w.options.logLevel==="debug"&&console.debug(y,new Error("Failure while loading font")),x=void 0,y=M)})}return x&&O===2?x.findLigatureRanges(k).map(L=>[L[0],L[1]]):function(L,M){const B=[];for(let j=0;j<L.length;j++)for(let F=0;F<M.length;F++)if(L.startsWith(M[F],j)){B.push([j,j+M[F].length]),j+=M[F].length-1;break}return B}(k,m)})}},104:(g,v)=>{function S(b,x){let y="",O=!1;for(;b.offset<b.input.length;){const k=b.input[b.offset++];if(O)/[\dA-Fa-f]/.test(k)?(b.offset--,y+=w(b)):k!==`
`&&(y+=k),O=!1;else switch(k){case x:return y;case"\\":O=!0;break;default:y+=k}}throw new Error("Unterminated string")}function A(b){let x="",y=!1;for(;b.offset<b.input.length;){const O=b.input[b.offset++];if(y)/[\dA-Fa-f]/.test(O)?(b.offset--,x+=w(b)):x+=O,y=!1;else switch(O){case"\\":y=!0;break;case",":return x;default:/\s/.test(O)?x.endsWith(" ")||(x+=" "):x+=O}}return x}function w(b){let x="";for(;b.offset<b.input.length;){const y=b.input[b.offset++];if(/\s/.test(y))return m(x);if(x.length>=6||!/[\dA-Fa-f]/.test(y))return b.offset--,m(x);x+=y}return m(x)}function m(b){return String.fromCodePoint(parseInt(b,16))}Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(b){if(typeof b!="string")throw new Error("Font family must be a string");const x={input:b,offset:0},y=[];let O="";for(;x.offset<x.input.length;){const k=x.input[x.offset++];switch(k){case"'":case'"':O+=S(x,k);break;case",":y.push(O),O="";break;default:/\s/.test(k)||(x.offset--,O+=A(x),y.push(O),O="")}}return y}},89:g=>{g.exports=n},56:g=>{g.exports=o},978:g=>{g.exports=c},269:g=>{g.exports=a},82:()=>{},456:()=>{}},h={};function d(g){var v=h[g];if(v!==void 0)return v.exports;var S=h[g]={exports:{}};return l[g].call(S.exports,S,S.exports,d),S.exports}d.n=g=>{var v=g&&g.__esModule?()=>g.default:()=>g;return d.d(v,{a:v}),v},d.d=(g,v)=>{for(var S in v)d.o(v,S)&&!d.o(g,S)&&Object.defineProperty(g,S,{enumerable:!0,get:v[S]})},d.o=(g,v)=>Object.prototype.hasOwnProperty.call(g,v),d.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var f={};return(()=>{var g=f;Object.defineProperty(g,"__esModule",{value:!0}),g.LigaturesAddon=void 0;const v=d(833);g.LigaturesAddon=class{constructor(S){this._fallbackLigatures=(S?.fallbackLigatures||["<--","<---","<<-","<-","->","->>","-->","--->","<==","<===","<<=","<=","=>","=>>","==>","===>",">=",">>=","<->","<-->","<--->","<---->","<=>","<==>","<===>","<====>","-------->","<~~","<~","~>","~~>","::",":::","==","!=","===","!==",":=",":-",":+","<*","<*>","*>","<|","<|>","|>","+:","-:","=:",":>","++","+++","<!--","<!---","<***>"]).sort((A,w)=>w.length-A.length)}activate(S){this._terminal=S,this._characterJoinerId=(0,v.enableLigatures)(S,this._fallbackLigatures)}dispose(){var S;this._characterJoinerId!==void 0&&((S=this._terminal)===null||S===void 0||S.deregisterCharacterJoiner(this._characterJoinerId),this._characterJoinerId=void 0)}}})(),f})())})(xtermAddonLigatures,xtermAddonLigatures.exports);var xtermAddonLigaturesExports=xtermAddonLigatures.exports,xtermAddonSearch={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.SearchAddon=void 0;const l=o(345),h=o(859),d=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class f extends h.Disposable{constructor(v){var S;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new h.MutableDisposable),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new l.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(S=v?.highlightLimit)!==null&&S!==void 0?S:1e3}activate(v){this._terminal=v,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,h.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var v;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((v=this._lastSearchOptions)===null||v===void 0)&&v.decorations)&&(this._highlightTimeout=setTimeout(()=>{const S=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(S,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(v){this._selectedDecoration.clear(),(0,h.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),v||(this._cachedSearchTerm=void 0)}findNext(v,S){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=S,S?.decorations&&(this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,S));const A=this._findNextAndSelect(v,S);return this._fireResults(S),this._cachedSearchTerm=v,A}_highlightAllMatches(v,S){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!v||v.length===0)return void this.clearDecorations();S=S||{},this.clearDecorations(!0);const A=[];let w,m=this._find(v,0,0,S);for(;m&&(w?.row!==m.row||w?.col!==m.col)&&!(A.length>=this._highlightLimit);)w=m,A.push(w),m=this._find(v,w.col+w.term.length>=this._terminal.cols?w.row+1:w.row,w.col+w.term.length>=this._terminal.cols?0:w.col+1,S);for(const b of A){const x=this._createResultDecoration(b,S.decorations);x&&(this._highlightedLines.add(x.marker.line),this._highlightDecorations.push({decoration:x,match:b,dispose(){x.dispose()}}))}}_find(v,S,A,w){var m;if(!this._terminal||!v||v.length===0)return(m=this._terminal)===null||m===void 0||m.clearSelection(),void this.clearDecorations();if(A>this._terminal.cols)throw new Error(`Invalid col: ${A} to search in terminal of ${this._terminal.cols} cols`);let b;this._initLinesCache();const x={startRow:S,startCol:A};if(b=this._findInLine(v,x,w),!b)for(let y=S+1;y<this._terminal.buffer.active.baseY+this._terminal.rows&&(x.startRow=y,x.startCol=0,b=this._findInLine(v,x,w),!b);y++);return b}_findNextAndSelect(v,S){var A;if(!this._terminal||!v||v.length===0)return(A=this._terminal)===null||A===void 0||A.clearSelection(),this.clearDecorations(),!1;const w=this._terminal.getSelectionPosition();this._terminal.clearSelection();let m=0,b=0;w&&(this._cachedSearchTerm===v?(m=w.end.x,b=w.end.y):(m=w.start.x,b=w.start.y)),this._initLinesCache();const x={startRow:b,startCol:m};let y=this._findInLine(v,x,S);if(!y)for(let O=b+1;O<this._terminal.buffer.active.baseY+this._terminal.rows&&(x.startRow=O,x.startCol=0,y=this._findInLine(v,x,S),!y);O++);if(!y&&b!==0)for(let O=0;O<b&&(x.startRow=O,x.startCol=0,y=this._findInLine(v,x,S),!y);O++);return!y&&w&&(x.startRow=w.start.y,x.startCol=0,y=this._findInLine(v,x,S)),this._selectResult(y,S?.decorations,S?.noScroll)}findPrevious(v,S){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");this._lastSearchOptions=S,S?.decorations&&(this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,S));const A=this._findPreviousAndSelect(v,S);return this._fireResults(S),this._cachedSearchTerm=v,A}_fireResults(v){if(v?.decorations){let S=-1;if(this._selectedDecoration.value){const A=this._selectedDecoration.value.match;for(let w=0;w<this._highlightDecorations.length;w++){const m=this._highlightDecorations[w].match;if(m.row===A.row&&m.col===A.col&&m.size===A.size){S=w;break}}}this._onDidChangeResults.fire({resultIndex:S,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(v,S){var A;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!v||v.length===0)return(A=this._terminal)===null||A===void 0||A.clearSelection(),this.clearDecorations(),!1;const w=this._terminal.getSelectionPosition();this._terminal.clearSelection();let m=this._terminal.buffer.active.baseY+this._terminal.rows-1,b=this._terminal.cols;const x=!0;this._initLinesCache();const y={startRow:m,startCol:b};let O;if(w&&(y.startRow=m=w.start.y,y.startCol=b=w.start.x,this._cachedSearchTerm!==v&&(O=this._findInLine(v,y,S,!1),O||(y.startRow=m=w.end.y,y.startCol=b=w.end.x))),O||(O=this._findInLine(v,y,S,x)),!O){y.startCol=Math.max(y.startCol,this._terminal.cols);for(let k=m-1;k>=0&&(y.startRow=k,O=this._findInLine(v,y,S,x),!O);k--);}if(!O&&m!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let k=this._terminal.buffer.active.baseY+this._terminal.rows-1;k>=m&&(y.startRow=k,O=this._findInLine(v,y,S,x),!O);k--);return this._selectResult(O,S?.decorations,S?.noScroll)}_initLinesCache(){const v=this._terminal;this._linesCache||(this._linesCache=new Array(v.buffer.active.length),this._cursorMoveListener=v.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=v.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(v,S,A){return(v===0||d.includes(S[v-1]))&&(v+A.length===S.length||d.includes(S[v+A.length]))}_findInLine(v,S,A={},w=!1){var m;const b=this._terminal,x=S.startRow,y=S.startCol,O=b.buffer.active.getLine(x);if(O?.isWrapped)return w?void(S.startCol+=b.cols):(S.startRow--,S.startCol+=b.cols,this._findInLine(v,S,A));let k=(m=this._linesCache)===null||m===void 0?void 0:m[x];k||(k=this._translateBufferLineToStringWithWrap(x,!0),this._linesCache&&(this._linesCache[x]=k));const[P,L]=k,M=this._bufferColsToStringOffset(x,y),B=A.caseSensitive?v:v.toLowerCase(),j=A.caseSensitive?P:P.toLowerCase();let F=-1;if(A.regex){const U=RegExp(B,"g");let V;if(w)for(;V=U.exec(j.slice(0,M));)F=U.lastIndex-V[0].length,v=V[0],U.lastIndex-=v.length-1;else V=U.exec(j.slice(M)),V&&V[0].length>0&&(F=M+(U.lastIndex-V[0].length),v=V[0])}else w?M-B.length>=0&&(F=j.lastIndexOf(B,M-B.length)):F=j.indexOf(B,M);if(F>=0){if(A.wholeWord&&!this._isWholeWord(F,j,v))return;let U=0;for(;U<L.length-1&&F>=L[U+1];)U++;let V=U;for(;V<L.length-1&&F+v.length>=L[V+1];)V++;const Q=F-L[U],q=F+v.length-L[V],G=this._stringLengthToBufferSize(x+U,Q);return{term:v,col:G,row:x+U,size:this._stringLengthToBufferSize(x+V,q)-G+b.cols*(V-U)}}}_stringLengthToBufferSize(v,S){const A=this._terminal.buffer.active.getLine(v);if(!A)return 0;for(let w=0;w<S;w++){const m=A.getCell(w);if(!m)break;const b=m.getChars();b.length>1&&(S-=b.length-1);const x=A.getCell(w+1);x&&x.getWidth()===0&&S++}return S}_bufferColsToStringOffset(v,S){const A=this._terminal;let w=v,m=0,b=A.buffer.active.getLine(w);for(;S>0&&b;){for(let x=0;x<S&&x<A.cols;x++){const y=b.getCell(x);if(!y)break;y.getWidth()&&(m+=y.getCode()===0?1:y.getChars().length)}if(w++,b=A.buffer.active.getLine(w),b&&!b.isWrapped)break;S-=A.cols}return m}_translateBufferLineToStringWithWrap(v,S){var A;const w=this._terminal,m=[],b=[0];let x=w.buffer.active.getLine(v);for(;x;){const y=w.buffer.active.getLine(v+1),O=!!y&&y.isWrapped;let k=x.translateToString(!O&&S);if(O&&y){const P=x.getCell(x.length-1);P&&P.getCode()===0&&P.getWidth()===1&&((A=y.getCell(0))===null||A===void 0?void 0:A.getWidth())===2&&(k=k.slice(0,-1))}if(m.push(k),!O)break;b.push(b[b.length-1]+k.length),v++,x=y}return[m.join(""),b]}_selectResult(v,S,A){const w=this._terminal;if(this._selectedDecoration.clear(),!v)return w.clearSelection(),!1;if(w.select(v.col,v.row,v.size),S){const m=w.registerMarker(-w.buffer.active.baseY-w.buffer.active.cursorY+v.row);if(m){const b=w.registerDecoration({marker:m,x:v.col,width:v.size,backgroundColor:S.activeMatchBackground,layer:"top",overviewRulerOptions:{color:S.activeMatchColorOverviewRuler}});if(b){const x=[];x.push(m),x.push(b.onRender(y=>this._applyStyles(y,S.activeMatchBorder,!0))),x.push(b.onDispose(()=>(0,h.disposeArray)(x))),this._selectedDecoration.value={decoration:b,match:v,dispose(){b.dispose()}}}}}if(!A&&(v.row>=w.buffer.active.viewportY+w.rows||v.row<w.buffer.active.viewportY)){let m=v.row-w.buffer.active.viewportY;m-=Math.floor(w.rows/2),w.scrollLines(m)}return!0}_applyStyles(v,S,A){v.classList.contains("xterm-find-result-decoration")||(v.classList.add("xterm-find-result-decoration"),S&&(v.style.outline=`1px solid ${S}`)),A&&v.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(v,S){const A=this._terminal,w=A.registerMarker(-A.buffer.active.baseY-A.buffer.active.cursorY+v.row);if(!w)return;const m=A.registerDecoration({marker:w,x:v.col,width:v.size,backgroundColor:S.matchBackground,overviewRulerOptions:this._highlightedLines.has(w.line)?void 0:{color:S.matchOverviewRuler,position:"center"}});if(m){const b=[];b.push(w),b.push(m.onRender(x=>this._applyStyles(x,S.matchBorder,!1))),b.push(m.onDispose(()=>(0,h.disposeArray)(b)))}return m}}c.SearchAddon=f})(),a})())})(xtermAddonSearch);var xtermAddonSearchExports=xtermAddonSearch.exports,xtermAddonUnicode11={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(commonjsGlobal,()=>(()=>{var r={433:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV11=void 0;const h=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],d=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],f=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],g=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let v;function S(A,w){let m,b=0,x=w.length-1;if(A<w[0][0]||A>w[x][1])return!1;for(;x>=b;)if(m=b+x>>1,A>w[m][1])b=m+1;else{if(!(A<w[m][0]))return!0;x=m-1}return!1}l.UnicodeV11=class{constructor(){if(this.version="11",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160);for(let A=0;A<h.length;++A)v.fill(0,h[A][0],h[A][1]+1);for(let A=0;A<f.length;++A)v.fill(2,f[A][0],f[A][1]+1)}}wcwidth(A){return A<32?0:A<127?1:A<65536?v[A]:S(A,d)?0:S(A,g)?2:1}}}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.Unicode11Addon=void 0;const l=o(433);c.Unicode11Addon=class{activate(h){h.unicode.register(new l.UnicodeV11)}dispose(){}}})(),a})())})(xtermAddonUnicode11);var xtermAddonUnicode11Exports=xtermAddonUnicode11.exports,xtermAddonWebLinks={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={6:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkComputer=l.WebLinkProvider=void 0,l.WebLinkProvider=class{constructor(d,f,g,v={}){this._terminal=d,this._regex=f,this._handler=g,this._options=v}provideLinks(d,f){const g=h.computeLink(d,this._regex,this._terminal,this._handler);f(this._addCallbacks(g))}_addCallbacks(d){return d.map(f=>(f.leave=this._options.leave,f.hover=(g,v)=>{if(this._options.hover){const{range:S}=f;this._options.hover(g,v,S)}},f))}};class h{static computeLink(f,g,v,S){const A=new RegExp(g.source,(g.flags||"")+"g"),[w,m]=h._getWindowedLineStrings(f-1,v),b=w.join("");let x;const y=[];for(;x=A.exec(b);){const O=x[0];try{const j=new URL(O),F=decodeURI(j.toString());if(O!==F&&O+"/"!==F)continue}catch{continue}const[k,P]=h._mapStrIdx(v,m,0,x.index),[L,M]=h._mapStrIdx(v,k,P,O.length);if(k===-1||P===-1||L===-1||M===-1)continue;const B={start:{x:P+1,y:k+1},end:{x:M,y:L+1}};y.push({range:B,text:O,activate:S})}return y}static _getWindowedLineStrings(f,g){let v,S=f,A=f,w=0,m="";const b=[];if(v=g.buffer.active.getLine(f)){const x=v.translateToString(!0);if(v.isWrapped&&x[0]!==" "){for(w=0;(v=g.buffer.active.getLine(--S))&&w<2048&&(m=v.translateToString(!0),w+=m.length,b.push(m),v.isWrapped&&m.indexOf(" ")===-1););b.reverse()}for(b.push(x),w=0;(v=g.buffer.active.getLine(++A))&&v.isWrapped&&w<2048&&(m=v.translateToString(!0),w+=m.length,b.push(m),m.indexOf(" ")===-1););}return[b,S]}static _mapStrIdx(f,g,v,S){const A=f.buffer.active,w=A.getNullCell();let m=v;for(;S;){const b=A.getLine(g);if(!b)return[-1,-1];for(let x=m;x<b.length;++x){b.getCell(x,w);const y=w.getChars();if(w.getWidth()&&(S-=y.length||1,x===b.length-1&&y==="")){const O=A.getLine(g+1);O&&O.isWrapped&&(O.getCell(0,w),w.getWidth()===2&&(S+=1))}if(S<0)return[g,x]}g++,m=0}return[g,m]}}l.LinkComputer=h}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c](h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.WebLinksAddon=void 0;const l=o(6),h=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(f,g){const v=window.open();if(v){try{v.opener=null}catch{}v.location.href=g}else console.warn("Opening link blocked as opener could not be cleared")}c.WebLinksAddon=class{constructor(f=d,g={}){this._handler=f,this._options=g}activate(f){this._terminal=f;const g=this._options,v=g.urlRegex||h;this._linkProvider=this._terminal.registerLinkProvider(new l.WebLinkProvider(this._terminal,v,this._handler,g))}dispose(){var f;(f=this._linkProvider)===null||f===void 0||f.dispose()}}})(),a})())})(xtermAddonWebLinks);var xtermAddonWebLinksExports=xtermAddonWebLinks.exports,xtermAddonWebgl={exports:{}};(function(s,e){(function(r,n){s.exports=n()})(self,()=>(()=>{var r={965:function(c,l,h){var d=this&&this.__decorate||function(L,M,B,j){var F,U=arguments.length,V=U<3?M:j===null?j=Object.getOwnPropertyDescriptor(M,B):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(L,M,B,j);else for(var Q=L.length-1;Q>=0;Q--)(F=L[Q])&&(V=(U<3?F(V):U>3?F(M,B,V):F(M,B))||V);return U>3&&V&&Object.defineProperty(M,B,V),V};Object.defineProperty(l,"__esModule",{value:!0}),l.GlyphRenderer=void 0;const f=h(374),g=h(509),v=h(855),S=h(859),A=h(776),w=h(381),m=11,b=m*Float32Array.BYTES_PER_ELEMENT;let x,y=0,O=0,k=0;class P extends S.Disposable{constructor(M,B,j){super(),this._terminal=M,this._gl=B,this._dimensions=j,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const F=this._gl;g.TextureAtlas.maxAtlasPages===void 0&&(g.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(F.getParameter(F.MAX_TEXTURE_IMAGE_UNITS))),g.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(F.getParameter(F.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,w.createProgram)(F,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(te){let Y="";for(let J=1;J<te;J++)Y+=` else if (v_texpage == ${J}) { outColor = texture(u_texture[${J}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${te}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${Y}
}`}(g.TextureAtlas.maxAtlasPages))),this.register((0,S.toDisposable)(()=>F.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(F.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(F.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(F.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=F.createVertexArray(),F.bindVertexArray(this._vertexArrayObject);const U=new Float32Array([0,0,1,0,0,1,1,1]),V=F.createBuffer();this.register((0,S.toDisposable)(()=>F.deleteBuffer(V))),F.bindBuffer(F.ARRAY_BUFFER,V),F.bufferData(F.ARRAY_BUFFER,U,F.STATIC_DRAW),F.enableVertexAttribArray(0),F.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const Q=new Uint8Array([0,1,2,3]),q=F.createBuffer();this.register((0,S.toDisposable)(()=>F.deleteBuffer(q))),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,q),F.bufferData(F.ELEMENT_ARRAY_BUFFER,Q,F.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(F.createBuffer()),this.register((0,S.toDisposable)(()=>F.deleteBuffer(this._attributesBuffer))),F.bindBuffer(F.ARRAY_BUFFER,this._attributesBuffer),F.enableVertexAttribArray(2),F.vertexAttribPointer(2,2,F.FLOAT,!1,b,0),F.vertexAttribDivisor(2,1),F.enableVertexAttribArray(3),F.vertexAttribPointer(3,2,F.FLOAT,!1,b,2*Float32Array.BYTES_PER_ELEMENT),F.vertexAttribDivisor(3,1),F.enableVertexAttribArray(4),F.vertexAttribPointer(4,1,F.FLOAT,!1,b,4*Float32Array.BYTES_PER_ELEMENT),F.vertexAttribDivisor(4,1),F.enableVertexAttribArray(5),F.vertexAttribPointer(5,2,F.FLOAT,!1,b,5*Float32Array.BYTES_PER_ELEMENT),F.vertexAttribDivisor(5,1),F.enableVertexAttribArray(6),F.vertexAttribPointer(6,2,F.FLOAT,!1,b,7*Float32Array.BYTES_PER_ELEMENT),F.vertexAttribDivisor(6,1),F.enableVertexAttribArray(1),F.vertexAttribPointer(1,2,F.FLOAT,!1,b,9*Float32Array.BYTES_PER_ELEMENT),F.vertexAttribDivisor(1,1),F.useProgram(this._program);const G=new Int32Array(g.TextureAtlas.maxAtlasPages);for(let te=0;te<g.TextureAtlas.maxAtlasPages;te++)G[te]=te;F.uniform1iv(this._textureLocation,G),F.uniformMatrix4fv(this._projectionLocation,!1,w.PROJECTION_MATRIX),this._atlasTextures=[];for(let te=0;te<g.TextureAtlas.maxAtlasPages;te++){const Y=new w.GLTexture((0,f.throwIfFalsy)(F.createTexture()));this.register((0,S.toDisposable)(()=>F.deleteTexture(Y.texture))),F.activeTexture(F.TEXTURE0+te),F.bindTexture(F.TEXTURE_2D,Y.texture),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[te]=Y}F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(M,B,j,F,U,V,Q,q){this._updateCell(this._vertices.attributes,M,B,j,F,U,V,Q,q)}_updateCell(M,B,j,F,U,V,Q,q,G){y=(j*this._terminal.cols+B)*m,F!==v.NULL_CELL_CODE&&F!==void 0?this._atlas&&(x=q&&q.length>1?this._atlas.getRasterizedGlyphCombinedChar(q,U,V,Q,!1):this._atlas.getRasterizedGlyph(F,U,V,Q,!1),O=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),U!==G&&x.offset.x>O?(k=x.offset.x-O,M[y]=-(x.offset.x-k)+this._dimensions.device.char.left,M[y+1]=-x.offset.y+this._dimensions.device.char.top,M[y+2]=(x.size.x-k)/this._dimensions.device.canvas.width,M[y+3]=x.size.y/this._dimensions.device.canvas.height,M[y+4]=x.texturePage,M[y+5]=x.texturePositionClipSpace.x+k/this._atlas.pages[x.texturePage].canvas.width,M[y+6]=x.texturePositionClipSpace.y,M[y+7]=x.sizeClipSpace.x-k/this._atlas.pages[x.texturePage].canvas.width,M[y+8]=x.sizeClipSpace.y):(M[y]=-x.offset.x+this._dimensions.device.char.left,M[y+1]=-x.offset.y+this._dimensions.device.char.top,M[y+2]=x.size.x/this._dimensions.device.canvas.width,M[y+3]=x.size.y/this._dimensions.device.canvas.height,M[y+4]=x.texturePage,M[y+5]=x.texturePositionClipSpace.x,M[y+6]=x.texturePositionClipSpace.y,M[y+7]=x.sizeClipSpace.x,M[y+8]=x.sizeClipSpace.y)):M.fill(0,y,y+m-1-2)}clear(){const M=this._terminal,B=M.cols*M.rows*m;this._vertices.count!==B?this._vertices.attributes=new Float32Array(B):this._vertices.attributes.fill(0);let j=0;for(;j<this._vertices.attributesBuffers.length;j++)this._vertices.count!==B?this._vertices.attributesBuffers[j]=new Float32Array(B):this._vertices.attributesBuffers[j].fill(0);this._vertices.count=B,j=0;for(let F=0;F<M.rows;F++)for(let U=0;U<M.cols;U++)this._vertices.attributes[j+9]=U/M.cols,this._vertices.attributes[j+10]=F/M.rows,j+=m}handleResize(){const M=this._gl;M.useProgram(this._program),M.viewport(0,0,M.canvas.width,M.canvas.height),M.uniform2f(this._resolutionLocation,M.canvas.width,M.canvas.height),this.clear()}render(M){if(!this._atlas)return;const B=this._gl;B.useProgram(this._program),B.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const j=this._vertices.attributesBuffers[this._activeBuffer];let F=0;for(let U=0;U<M.lineLengths.length;U++){const V=U*this._terminal.cols*m,Q=this._vertices.attributes.subarray(V,V+M.lineLengths[U]*m);j.set(Q,F),F+=Q.length}B.bindBuffer(B.ARRAY_BUFFER,this._attributesBuffer),B.bufferData(B.ARRAY_BUFFER,j.subarray(0,F),B.STREAM_DRAW);for(let U=0;U<this._atlas.pages.length;U++)this._atlas.pages[U].version!==this._atlasTextures[U].version&&this._bindAtlasPageTexture(B,this._atlas,U);B.drawElementsInstanced(B.TRIANGLE_STRIP,4,B.UNSIGNED_BYTE,0,F/m)}setAtlas(M){this._atlas=M;for(const B of this._atlasTextures)B.version=-1}_bindAtlasPageTexture(M,B,j){M.activeTexture(M.TEXTURE0+j),M.bindTexture(M.TEXTURE_2D,this._atlasTextures[j].texture),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,B.pages[j].canvas),M.generateMipmap(M.TEXTURE_2D),this._atlasTextures[j].version=B.pages[j].version}setDimensions(M){this._dimensions=M}}l.GlyphRenderer=P,d([A.traceCall],P.prototype,"updateCell",null)},742:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RectangleRenderer=void 0;const d=h(374),f=h(859),g=h(310),v=h(381),S=8*Float32Array.BYTES_PER_ELEMENT;class A{constructor(){this.attributes=new Float32Array(160),this.count=0}}let w=0,m=0,b=0,x=0,y=0,O=0,k=0;class P extends f.Disposable{constructor(M,B,j,F){super(),this._terminal=M,this._gl=B,this._dimensions=j,this._themeService=F,this._vertices=new A,this._verticesCursor=new A;const U=this._gl;this._program=(0,d.throwIfFalsy)((0,v.createProgram)(U,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,f.toDisposable)(()=>U.deleteProgram(this._program))),this._projectionLocation=(0,d.throwIfFalsy)(U.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=U.createVertexArray(),U.bindVertexArray(this._vertexArrayObject);const V=new Float32Array([0,0,1,0,0,1,1,1]),Q=U.createBuffer();this.register((0,f.toDisposable)(()=>U.deleteBuffer(Q))),U.bindBuffer(U.ARRAY_BUFFER,Q),U.bufferData(U.ARRAY_BUFFER,V,U.STATIC_DRAW),U.enableVertexAttribArray(3),U.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const q=new Uint8Array([0,1,2,3]),G=U.createBuffer();this.register((0,f.toDisposable)(()=>U.deleteBuffer(G))),U.bindBuffer(U.ELEMENT_ARRAY_BUFFER,G),U.bufferData(U.ELEMENT_ARRAY_BUFFER,q,U.STATIC_DRAW),this._attributesBuffer=(0,d.throwIfFalsy)(U.createBuffer()),this.register((0,f.toDisposable)(()=>U.deleteBuffer(this._attributesBuffer))),U.bindBuffer(U.ARRAY_BUFFER,this._attributesBuffer),U.enableVertexAttribArray(0),U.vertexAttribPointer(0,2,U.FLOAT,!1,S,0),U.vertexAttribDivisor(0,1),U.enableVertexAttribArray(1),U.vertexAttribPointer(1,2,U.FLOAT,!1,S,2*Float32Array.BYTES_PER_ELEMENT),U.vertexAttribDivisor(1,1),U.enableVertexAttribArray(2),U.vertexAttribPointer(2,4,U.FLOAT,!1,S,4*Float32Array.BYTES_PER_ELEMENT),U.vertexAttribDivisor(2,1),this._updateCachedColors(F.colors),this.register(this._themeService.onChangeColors(te=>{this._updateCachedColors(te),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(M){const B=this._gl;B.useProgram(this._program),B.bindVertexArray(this._vertexArrayObject),B.uniformMatrix4fv(this._projectionLocation,!1,v.PROJECTION_MATRIX),B.bindBuffer(B.ARRAY_BUFFER,this._attributesBuffer),B.bufferData(B.ARRAY_BUFFER,M.attributes,B.DYNAMIC_DRAW),B.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,B.UNSIGNED_BYTE,0,M.count)}handleResize(){this._updateViewportRectangle()}setDimensions(M){this._dimensions=M}_updateCachedColors(M){this._bgFloat=this._colorToFloat32Array(M.background),this._cursorFloat=this._colorToFloat32Array(M.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(M){const B=this._terminal,j=this._vertices;let F,U,V,Q,q,G,te,Y,J,K,ne,de=1;for(F=0;F<B.rows;F++){for(V=-1,Q=0,q=0,G=!1,U=0;U<B.cols;U++)te=(F*B.cols+U)*g.RENDER_MODEL_INDICIES_PER_CELL,Y=M.cells[te+g.RENDER_MODEL_BG_OFFSET],J=M.cells[te+g.RENDER_MODEL_FG_OFFSET],K=!!(67108864&J),(Y!==Q||J!==q&&(G||K))&&((Q!==0||G&&q!==0)&&(ne=8*de++,this._updateRectangle(j,ne,q,Q,V,U,F)),V=U,Q=Y,q=J,G=K);(Q!==0||G&&q!==0)&&(ne=8*de++,this._updateRectangle(j,ne,q,Q,V,B.cols,F))}j.count=de}updateCursor(M){const B=this._verticesCursor,j=M.cursor;if(!j||j.style==="block")return void(B.count=0);let F,U=0;j.style!=="bar"&&j.style!=="outline"||(F=8*U++,this._addRectangleFloat(B.attributes,F,j.x*this._dimensions.device.cell.width,j.y*this._dimensions.device.cell.height,j.style==="bar"?j.dpr*j.cursorWidth:j.dpr,this._dimensions.device.cell.height,this._cursorFloat)),j.style!=="underline"&&j.style!=="outline"||(F=8*U++,this._addRectangleFloat(B.attributes,F,j.x*this._dimensions.device.cell.width,(j.y+1)*this._dimensions.device.cell.height-j.dpr,j.width*this._dimensions.device.cell.width,j.dpr,this._cursorFloat)),j.style==="outline"&&(F=8*U++,this._addRectangleFloat(B.attributes,F,j.x*this._dimensions.device.cell.width,j.y*this._dimensions.device.cell.height,j.width*this._dimensions.device.cell.width,j.dpr,this._cursorFloat),F=8*U++,this._addRectangleFloat(B.attributes,F,(j.x+j.width)*this._dimensions.device.cell.width-j.dpr,j.y*this._dimensions.device.cell.height,j.dpr,this._dimensions.device.cell.height,this._cursorFloat)),B.count=U}_updateRectangle(M,B,j,F,U,V,Q){if(67108864&j)switch(50331648&j){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&j].rgba;break;case 50331648:w=(16777215&j)<<8;break;default:w=this._themeService.colors.foreground.rgba}else switch(50331648&F){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:w=(16777215&F)<<8;break;default:w=this._themeService.colors.background.rgba}M.attributes.length<B+4&&(M.attributes=(0,v.expandFloat32Array)(M.attributes,this._terminal.rows*this._terminal.cols*8)),m=U*this._dimensions.device.cell.width,b=Q*this._dimensions.device.cell.height,x=(w>>24&255)/255,y=(w>>16&255)/255,O=(w>>8&255)/255,k=1,this._addRectangle(M.attributes,B,m,b,(V-U)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,x,y,O,k)}_addRectangle(M,B,j,F,U,V,Q,q,G,te){M[B]=j/this._dimensions.device.canvas.width,M[B+1]=F/this._dimensions.device.canvas.height,M[B+2]=U/this._dimensions.device.canvas.width,M[B+3]=V/this._dimensions.device.canvas.height,M[B+4]=Q,M[B+5]=q,M[B+6]=G,M[B+7]=te}_addRectangleFloat(M,B,j,F,U,V,Q){M[B]=j/this._dimensions.device.canvas.width,M[B+1]=F/this._dimensions.device.canvas.height,M[B+2]=U/this._dimensions.device.canvas.width,M[B+3]=V/this._dimensions.device.canvas.height,M[B+4]=Q[0],M[B+5]=Q[1],M[B+6]=Q[2],M[B+7]=Q[3]}_colorToFloat32Array(M){return new Float32Array([(M.rgba>>24&255)/255,(M.rgba>>16&255)/255,(M.rgba>>8&255)/255,(255&M.rgba)/255])}}l.RectangleRenderer=P},310:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderModel=l.COMBINED_CHAR_BIT_MASK=l.RENDER_MODEL_EXT_OFFSET=l.RENDER_MODEL_FG_OFFSET=l.RENDER_MODEL_BG_OFFSET=l.RENDER_MODEL_INDICIES_PER_CELL=void 0;const d=h(296);l.RENDER_MODEL_INDICIES_PER_CELL=4,l.RENDER_MODEL_BG_OFFSET=1,l.RENDER_MODEL_FG_OFFSET=2,l.RENDER_MODEL_EXT_OFFSET=3,l.COMBINED_CHAR_BIT_MASK=2147483648,l.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(f,g){const v=f*g*l.RENDER_MODEL_INDICIES_PER_CELL;v!==this.cells.length&&(this.cells=new Uint32Array(v),this.lineLengths=new Uint32Array(g))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(c,l,h){var d=this&&this.__decorate||function(V,Q,q,G){var te,Y=arguments.length,J=Y<3?Q:G===null?G=Object.getOwnPropertyDescriptor(Q,q):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(V,Q,q,G);else for(var K=V.length-1;K>=0;K--)(te=V[K])&&(J=(Y<3?te(J):Y>3?te(Q,q,J):te(Q,q))||J);return Y>3&&J&&Object.defineProperty(Q,q,J),J};Object.defineProperty(l,"__esModule",{value:!0}),l.JoinedCellData=l.WebglRenderer=void 0;const f=h(820),g=h(274),v=h(627),S=h(457),A=h(56),w=h(374),m=h(345),b=h(859),x=h(147),y=h(782),O=h(855),k=h(776),P=h(965),L=h(742),M=h(310),B=h(733);class j extends b.Disposable{constructor(Q,q,G,te,Y,J,K,ne,de){super(),this._terminal=Q,this._characterJoinerService=q,this._charSizeService=G,this._coreBrowserService=te,this._coreService=Y,this._decorationService=J,this._optionsService=K,this._themeService=ne,this._cursorBlinkStateManager=new b.MutableDisposable,this._charAtlasDisposable=this.register(new b.MutableDisposable),this._model=new M.RenderModel,this._workCell=new y.CellData,this._rectangleRenderer=this.register(new b.MutableDisposable),this._glyphRenderer=this.register(new b.MutableDisposable),this._onChangeTextureAtlas=this.register(new m.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new m.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new m.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new m.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new g.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new B.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,K,this._themeService)],this.dimensions=(0,w.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(K.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");const Re={antialias:!1,depth:!1,preserveDrawingBuffer:de};if(this._gl=this._canvas.getContext("webgl2",Re),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",Te=>{console.log("webglcontextlost event received"),Te.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(Te)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",Te=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,v.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,A.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(Te,Me)=>this._setCanvasDevicePixelDimensions(Te,Me))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,b.toDisposable)(()=>{var Te;for(const Me of this._renderLayers)Me.dispose();(Te=this._canvas.parentElement)===null||Te===void 0||Te.removeChild(this._canvas),(0,v.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var Q;return(Q=this._charAtlas)===null||Q===void 0?void 0:Q.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(Q,q){var G,te,Y,J;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const K of this._renderLayers)K.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(G=this._rectangleRenderer.value)===null||G===void 0||G.setDimensions(this.dimensions),(te=this._rectangleRenderer.value)===null||te===void 0||te.handleResize(),(Y=this._glyphRenderer.value)===null||Y===void 0||Y.setDimensions(this.dimensions),(J=this._glyphRenderer.value)===null||J===void 0||J.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var Q;for(const q of this._renderLayers)q.handleBlur(this._terminal);(Q=this._cursorBlinkStateManager.value)===null||Q===void 0||Q.pause(),this._requestRedrawViewport()}handleFocus(){var Q;for(const q of this._renderLayers)q.handleFocus(this._terminal);(Q=this._cursorBlinkStateManager.value)===null||Q===void 0||Q.resume(),this._requestRedrawViewport()}handleSelectionChanged(Q,q,G){for(const te of this._renderLayers)te.handleSelectionChanged(this._terminal,Q,q,G);this._model.selection.update(this._terminal,Q,q,G),this._requestRedrawViewport()}handleCursorMove(){var Q;for(const q of this._renderLayers)q.handleCursorMove(this._terminal);(Q=this._cursorBlinkStateManager.value)===null||Q===void 0||Q.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new L.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new P.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var Q;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const q=(0,v.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==q&&(this._onChangeTextureAtlas.fire(q.pages[0].canvas),this._charAtlasDisposable.value=(0,b.getDisposeArrayDisposable)([(0,m.forwardEvent)(q.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,m.forwardEvent)(q.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=q,this._charAtlas.warmUp(),(Q=this._glyphRenderer.value)===null||Q===void 0||Q.setAtlas(this._charAtlas)}_clearModel(Q){var q;this._model.clear(),Q&&((q=this._glyphRenderer.value)===null||q===void 0||q.clear())}clearTextureAtlas(){var Q;(Q=this._charAtlas)===null||Q===void 0||Q.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var Q;this._clearModel(!0);for(const q of this._renderLayers)q.reset(this._terminal);(Q=this._cursorBlinkStateManager.value)===null||Q===void 0||Q.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(Q){return-1}deregisterCharacterJoiner(Q){return!1}renderRows(Q,q){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const G of this._renderLayers)G.handleGridChanged(this._terminal,Q,q);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(Q,q),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new S.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(Q,q){const G=this._core;let te,Y,J,K,ne,de,Re,Te,Me,Ie,ce,pe,me,we=this._workCell;Q=U(Q,G.rows-1,0),q=U(q,G.rows-1,0);const Xe=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Qe=Math.min(this._terminal.buffer.active.cursorX,G.cols-1);let Pe=-1;const Ze=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let _e=!1;for(Y=Q;Y<=q;Y++)for(J=Y+G.buffer.ydisp,K=G.buffer.lines.get(J),this._model.lineLengths[Y]=0,ne=this._characterJoinerService.getJoinedCharacters(J),pe=0;pe<G.cols;pe++)if(te=this._cellColorResolver.result.bg,K.loadCell(pe,we),pe===0&&(te=this._cellColorResolver.result.bg),de=!1,Re=pe,ne.length>0&&pe===ne[0][0]&&(de=!0,Te=ne.shift(),we=new F(we,K.translateToString(!0,Te[0],Te[1]),Te[1]-Te[0]),Re=Te[1]-1),Me=we.getChars(),Ie=we.getCode(),ce=(Y*G.cols+pe)*M.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(we,pe,J),Ze&&J===Xe&&(pe===Qe&&(this._model.cursor={x:Qe,y:this._terminal.buffer.active.cursorY,width:we.getWidth(),style:this._coreBrowserService.isFocused?G.options.cursorStyle||"block":G.options.cursorInactiveStyle,cursorWidth:G.options.cursorWidth,dpr:this._devicePixelRatio},Pe=Qe+we.getWidth()-1),pe>=Qe&&pe<=Pe&&(this._coreBrowserService.isFocused&&(G.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&G.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Ie!==O.NULL_CELL_CODE&&(this._model.lineLengths[Y]=pe+1),(this._model.cells[ce]!==Ie||this._model.cells[ce+M.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[ce+M.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[ce+M.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(_e=!0,Me.length>1&&(Ie|=M.COMBINED_CHAR_BIT_MASK),this._model.cells[ce]=Ie,this._model.cells[ce+M.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[ce+M.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[ce+M.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(pe,Y,Ie,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,Me,te),de))for(we=this._workCell,pe++;pe<Re;pe++)me=(Y*G.cols+pe)*M.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(pe,Y,O.NULL_CELL_CODE,0,0,0,O.NULL_CELL_CHAR,0),this._model.cells[me]=O.NULL_CELL_CODE,this._model.cells[me+M.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[me+M.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[me+M.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;_e&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(Q,q){this._canvas.width===Q&&this._canvas.height===q||(this._canvas.width=Q,this._canvas.height=q,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const Q=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:Q,end:Q})}}l.WebglRenderer=j,d([k.traceCall],j.prototype,"renderRows",null);class F extends x.AttributeData{constructor(Q,q,G){super(),this.content=0,this.combinedData="",this.fg=Q.fg,this.bg=Q.bg,this.combinedData=q,this._width=G}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(Q){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function U(V,Q,q=0){return Math.max(Math.min(V,Q),q)}l.JoinedCellData=F},381:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GLTexture=l.expandFloat32Array=l.createShader=l.createProgram=l.PROJECTION_MATRIX=void 0;const d=h(374);function f(g,v,S){const A=(0,d.throwIfFalsy)(g.createShader(v));if(g.shaderSource(A,S),g.compileShader(A),g.getShaderParameter(A,g.COMPILE_STATUS))return A;console.error(g.getShaderInfoLog(A)),g.deleteShader(A)}l.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),l.createProgram=function(g,v,S){const A=(0,d.throwIfFalsy)(g.createProgram());if(g.attachShader(A,(0,d.throwIfFalsy)(f(g,g.VERTEX_SHADER,v))),g.attachShader(A,(0,d.throwIfFalsy)(f(g,g.FRAGMENT_SHADER,S))),g.linkProgram(A),g.getProgramParameter(A,g.LINK_STATUS))return A;console.error(g.getProgramInfoLog(A)),g.deleteProgram(A)},l.createShader=f,l.expandFloat32Array=function(g,v){const S=Math.min(2*g.length,v),A=new Float32Array(S);for(let w=0;w<g.length;w++)A[w]=g[w];return A},l.GLTexture=class{constructor(g){this.texture=g,this.version=-1}}},592:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseRenderLayer=void 0;const d=h(627),f=h(237),g=h(374),v=h(859);class S extends v.Disposable{constructor(w,m,b,x,y,O,k,P){super(),this._container=m,this._alpha=y,this._coreBrowserService=O,this._optionsService=k,this._themeService=P,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${b}-layer`),this._canvas.style.zIndex=x.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(w,L),this.reset(w)})),this.register((0,v.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,g.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(w){}handleFocus(w){}handleCursorMove(w){}handleGridChanged(w,m,b){}handleSelectionChanged(w,m,b,x=!1){}_setTransparency(w,m){if(m===this._alpha)return;const b=this._canvas;this._alpha=m,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,b),this._refreshCharAtlas(w,this._themeService.colors),this.handleGridChanged(w,0,w.rows-1)}_refreshCharAtlas(w,m){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(w,this._optionsService.rawOptions,m,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(w,m){this._deviceCellWidth=m.device.cell.width,this._deviceCellHeight=m.device.cell.height,this._deviceCharWidth=m.device.char.width,this._deviceCharHeight=m.device.char.height,this._deviceCharLeft=m.device.char.left,this._deviceCharTop=m.device.char.top,this._canvas.width=m.device.canvas.width,this._canvas.height=m.device.canvas.height,this._canvas.style.width=`${m.css.canvas.width}px`,this._canvas.style.height=`${m.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(w,this._themeService.colors)}_fillBottomLineAtCells(w,m,b=1){this._ctx.fillRect(w*this._deviceCellWidth,(m+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,b*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(w,m,b,x){this._alpha?this._ctx.clearRect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,x*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,x*this._deviceCellHeight))}_fillCharTrueColor(w,m,b,x){this._ctx.font=this._getFont(w,!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipCell(b,x,m.getWidth()),this._ctx.fillText(m.getChars(),b*this._deviceCellWidth+this._deviceCharLeft,x*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(w,m,b){this._ctx.beginPath(),this._ctx.rect(w*this._deviceCellWidth,m*this._deviceCellHeight,b*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(w,m,b){return`${b?"italic":""} ${m?w.options.fontWeightBold:w.options.fontWeight} ${w.options.fontSize*this._coreBrowserService.dpr}px ${w.options.fontFamily}`}}l.BaseRenderLayer=S},733:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.LinkRenderLayer=void 0;const d=h(197),f=h(237),g=h(592);class v extends g.BaseRenderLayer{constructor(A,w,m,b,x,y,O){super(m,A,"link",w,!0,x,y,O),this.register(b.onShowLinkUnderline(k=>this._handleShowLinkUnderline(k))),this.register(b.onHideLinkUnderline(k=>this._handleHideLinkUnderline(k)))}resize(A,w){super.resize(A,w),this._state=void 0}reset(A){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const A=this._state.y2-this._state.y1-1;A>0&&this._clearCells(0,this._state.y1+1,this._state.cols,A),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(A){if(A.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:A.fg!==void 0&&(0,d.is256Color)(A.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[A.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,A.y1===A.y2)this._fillBottomLineAtCells(A.x1,A.y1,A.x2-A.x1);else{this._fillBottomLineAtCells(A.x1,A.y1,A.cols-A.x1);for(let w=A.y1+1;w<A.y2;w++)this._fillBottomLineAtCells(0,w,A.cols);this._fillBottomLineAtCells(0,A.y2,A.x2)}this._state=A}_handleHideLinkUnderline(A){this._clearCurrentLink()}}l.LinkRenderLayer=v},820:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(h,d,f,g){h.addEventListener(d,f,g);let v=!1;return{dispose:()=>{v||(v=!0,h.removeEventListener(d,f,g))}}}},274:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellColorResolver=void 0;let h,d=0,f=0,g=!1,v=!1,S=!1;l.CellColorResolver=class{constructor(A,w,m,b,x){this._terminal=A,this._selectionRenderModel=w,this._decorationService=m,this._coreBrowserService=b,this._themeService=x,this.result={fg:0,bg:0,ext:0}}resolve(A,w,m){this.result.bg=A.bg,this.result.fg=A.fg,this.result.ext=268435456&A.bg?A.extended.ext:0,f=0,d=0,v=!1,g=!1,S=!1,h=this._themeService.colors,this._decorationService.forEachDecorationAtCell(w,m,"bottom",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,v=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),S=this._selectionRenderModel.isCellSelected(this._terminal,w,m),S&&(f=(this._coreBrowserService.isFocused?h.selectionBackgroundOpaque:h.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,h.selectionForeground&&(d=h.selectionForeground.rgba>>8&16777215,g=!0)),this._decorationService.forEachDecorationAtCell(w,m,"top",b=>{b.backgroundColorRGB&&(f=b.backgroundColorRGB.rgba>>8&16777215,v=!0),b.foregroundColorRGB&&(d=b.foregroundColorRGB.rgba>>8&16777215,g=!0)}),v&&(f=S?-16777216&A.bg&-134217729|f|50331648:-16777216&A.bg|f|50331648),g&&(d=-16777216&A.fg&-67108865|d|50331648),67108864&this.result.fg&&(v&&!g&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&h.background.rgba>>8|50331648,g=!0),!v&&g&&(f=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&h.foreground.rgba>>8|50331648,v=!0)),h=void 0,this.result.bg=v?f:this.result.bg,this.result.fg=g?d:this.result.fg}}},627:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.removeTerminalFromCache=l.acquireTextureAtlas=void 0;const d=h(509),f=h(197),g=[];l.acquireTextureAtlas=function(v,S,A,w,m,b,x,y){const O=(0,f.generateConfig)(w,m,b,x,S,A,y);for(let L=0;L<g.length;L++){const M=g[L],B=M.ownedBy.indexOf(v);if(B>=0){if((0,f.configEquals)(M.config,O))return M.atlas;M.ownedBy.length===1?(M.atlas.dispose(),g.splice(L,1)):M.ownedBy.splice(B,1);break}}for(let L=0;L<g.length;L++){const M=g[L];if((0,f.configEquals)(M.config,O))return M.ownedBy.push(v),M.atlas}const k=v._core,P={atlas:new d.TextureAtlas(document,O,k.unicodeService),config:O,ownedBy:[v]};return g.push(P),P.atlas},l.removeTerminalFromCache=function(v){for(let S=0;S<g.length;S++){const A=g[S].ownedBy.indexOf(v);if(A!==-1){g[S].ownedBy.length===1?(g[S].atlas.dispose(),g.splice(S,1)):g[S].ownedBy.splice(A,1);break}}}},197:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.is256Color=l.configEquals=l.generateConfig=void 0;const d=h(160);l.generateConfig=function(f,g,v,S,A,w,m){const b={foreground:w.foreground,background:w.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:w.ansi.slice(),contrastCache:w.contrastCache,halfContrastCache:w.halfContrastCache};return{customGlyphs:A.customGlyphs,devicePixelRatio:m,letterSpacing:A.letterSpacing,lineHeight:A.lineHeight,deviceCellWidth:f,deviceCellHeight:g,deviceCharWidth:v,deviceCharHeight:S,fontFamily:A.fontFamily,fontSize:A.fontSize,fontWeight:A.fontWeight,fontWeightBold:A.fontWeightBold,allowTransparency:A.allowTransparency,drawBoldTextInBrightColors:A.drawBoldTextInBrightColors,minimumContrastRatio:A.minimumContrastRatio,colors:b}},l.configEquals=function(f,g){for(let v=0;v<f.colors.ansi.length;v++)if(f.colors.ansi[v].rgba!==g.colors.ansi[v].rgba)return!1;return f.devicePixelRatio===g.devicePixelRatio&&f.customGlyphs===g.customGlyphs&&f.lineHeight===g.lineHeight&&f.letterSpacing===g.letterSpacing&&f.fontFamily===g.fontFamily&&f.fontSize===g.fontSize&&f.fontWeight===g.fontWeight&&f.fontWeightBold===g.fontWeightBold&&f.allowTransparency===g.allowTransparency&&f.deviceCharWidth===g.deviceCharWidth&&f.deviceCharHeight===g.deviceCharHeight&&f.drawBoldTextInBrightColors===g.drawBoldTextInBrightColors&&f.minimumContrastRatio===g.minimumContrastRatio&&f.colors.foreground.rgba===g.colors.foreground.rgba&&f.colors.background.rgba===g.colors.background.rgba},l.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const d=h(399);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CursorBlinkStateManager=void 0,l.CursorBlinkStateManager=class{constructor(h,d){this._renderCallback=h,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(h=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},h)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tryDrawCustomChar=l.powerlineDefinitions=l.boxDrawingDefinitions=l.blockElementDefinitions=void 0;const d=h(374);l.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const f={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};l.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"║":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╒":{1:(w,m)=>`M.5,1 L.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╓":{1:(w,m)=>`M${.5-w},1 L${.5-w},.5 L1,.5 M${.5+w},.5 L${.5+w},1`},"╔":{1:(w,m)=>`M1,${.5-m} L${.5-w},${.5-m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╕":{1:(w,m)=>`M0,${.5-m} L.5,${.5-m} L.5,1 M0,${.5+m} L.5,${.5+m}`},"╖":{1:(w,m)=>`M${.5+w},1 L${.5+w},.5 L0,.5 M${.5-w},.5 L${.5-w},1`},"╗":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5+w},${.5-m} L${.5+w},1`},"╘":{1:(w,m)=>`M.5,0 L.5,${.5+m} L1,${.5+m} M.5,${.5-m} L1,${.5-m}`},"╙":{1:(w,m)=>`M1,.5 L${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╚":{1:(w,m)=>`M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0 M1,${.5+m} L${.5-w},${.5+m} L${.5-w},0`},"╛":{1:(w,m)=>`M0,${.5+m} L.5,${.5+m} L.5,0 M0,${.5-m} L.5,${.5-m}`},"╜":{1:(w,m)=>`M0,.5 L${.5+w},.5 L${.5+w},0 M${.5-w},.5 L${.5-w},0`},"╝":{1:(w,m)=>`M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M0,${.5+m} L${.5+w},${.5+m} L${.5+w},0`},"╞":{1:(w,m)=>`M.5,0 L.5,1 M.5,${.5-m} L1,${.5-m} M.5,${.5+m} L1,${.5+m}`},"╟":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1 M${.5+w},.5 L1,.5`},"╠":{1:(w,m)=>`M${.5-w},0 L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╡":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L.5,${.5-m} M0,${.5+m} L.5,${.5+m}`},"╢":{1:(w,m)=>`M0,.5 L${.5-w},.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╣":{1:(w,m)=>`M${.5+w},0 L${.5+w},1 M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0`},"╤":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m} M.5,${.5+m} L.5,1`},"╥":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},1 M${.5+w},.5 L${.5+w},1`},"╦":{1:(w,m)=>`M0,${.5-m} L1,${.5-m} M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1`},"╧":{1:(w,m)=>`M.5,0 L.5,${.5-m} M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╨":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},.5 L${.5-w},0 M${.5+w},.5 L${.5+w},0`},"╩":{1:(w,m)=>`M0,${.5+m} L1,${.5+m} M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╪":{1:(w,m)=>`M.5,0 L.5,1 M0,${.5-m} L1,${.5-m} M0,${.5+m} L1,${.5+m}`},"╫":{1:(w,m)=>`M0,.5 L1,.5 M${.5-w},0 L${.5-w},1 M${.5+w},0 L${.5+w},1`},"╬":{1:(w,m)=>`M0,${.5+m} L${.5-w},${.5+m} L${.5-w},1 M1,${.5+m} L${.5+w},${.5+m} L${.5+w},1 M0,${.5-m} L${.5-w},${.5-m} L${.5-w},0 M1,${.5-m} L${.5+w},${.5-m} L${.5+w},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,1,.5`},"╮":{1:(w,m)=>`M.5,1 L.5,${.5+m/.15*.5} C.5,${.5+m/.15*.5},.5,.5,0,.5`},"╯":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,0,.5`},"╰":{1:(w,m)=>`M.5,0 L.5,${.5-m/.15*.5} C.5,${.5-m/.15*.5},.5,.5,1,.5`}},l.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.powerlineDefinitions[""]=l.powerlineDefinitions[""],l.tryDrawCustomChar=function(w,m,b,x,y,O,k,P){const L=l.blockElementDefinitions[m];if(L)return function(F,U,V,Q,q,G){for(let te=0;te<U.length;te++){const Y=U[te],J=q/8,K=G/8;F.fillRect(V+Y.x*J,Q+Y.y*K,Y.w*J,Y.h*K)}}(w,L,b,x,y,O),!0;const M=f[m];if(M)return function(F,U,V,Q,q,G){let te=g.get(U);te||(te=new Map,g.set(U,te));const Y=F.fillStyle;if(typeof Y!="string")throw new Error(`Unexpected fillStyle type "${Y}"`);let J=te.get(Y);if(!J){const K=U[0].length,ne=U.length,de=document.createElement("canvas");de.width=K,de.height=ne;const Re=(0,d.throwIfFalsy)(de.getContext("2d")),Te=new ImageData(K,ne);let Me,Ie,ce,pe;if(Y.startsWith("#"))Me=parseInt(Y.slice(1,3),16),Ie=parseInt(Y.slice(3,5),16),ce=parseInt(Y.slice(5,7),16),pe=Y.length>7&&parseInt(Y.slice(7,9),16)||1;else{if(!Y.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${Y}" when drawing pattern glyph`);[Me,Ie,ce,pe]=Y.substring(5,Y.length-1).split(",").map(me=>parseFloat(me))}for(let me=0;me<ne;me++)for(let we=0;we<K;we++)Te.data[4*(me*K+we)]=Me,Te.data[4*(me*K+we)+1]=Ie,Te.data[4*(me*K+we)+2]=ce,Te.data[4*(me*K+we)+3]=U[me][we]*(255*pe);Re.putImageData(Te,0,0),J=(0,d.throwIfFalsy)(F.createPattern(de,null)),te.set(Y,J)}F.fillStyle=J,F.fillRect(V,Q,q,G)}(w,M,b,x,y,O),!0;const B=l.boxDrawingDefinitions[m];if(B)return function(F,U,V,Q,q,G,te){F.strokeStyle=F.fillStyle;for(const[Y,J]of Object.entries(U)){let K;F.beginPath(),F.lineWidth=te*Number.parseInt(Y),K=typeof J=="function"?J(.15,.15/G*q):J;for(const ne of K.split(" ")){const de=ne[0],Re=S[de];if(!Re){console.error(`Could not find drawing instructions for "${de}"`);continue}const Te=ne.substring(1).split(",");Te[0]&&Te[1]&&Re(F,A(Te,q,G,V,Q,!0,te))}F.stroke(),F.closePath()}}(w,B,b,x,y,O,P),!0;const j=l.powerlineDefinitions[m];return!!j&&(function(F,U,V,Q,q,G,te,Y){var J,K;const ne=new Path2D;ne.rect(V,Q,q,G),F.clip(ne),F.beginPath();const de=te/12;F.lineWidth=Y*de;for(const Re of U.d.split(" ")){const Te=Re[0],Me=S[Te];if(!Me){console.error(`Could not find drawing instructions for "${Te}"`);continue}const Ie=Re.substring(1).split(",");Ie[0]&&Ie[1]&&Me(F,A(Ie,q,G,V,Q,!1,Y,((J=U.leftPadding)!==null&&J!==void 0?J:0)*(de/2),((K=U.rightPadding)!==null&&K!==void 0?K:0)*(de/2)))}U.type===1?(F.strokeStyle=F.fillStyle,F.stroke()):F.fill(),F.closePath()}(w,j,b,x,y,O,k,P),!0)};const g=new Map;function v(w,m,b=0){return Math.max(Math.min(w,m),b)}const S={C:(w,m)=>w.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]),L:(w,m)=>w.lineTo(m[0],m[1]),M:(w,m)=>w.moveTo(m[0],m[1])};function A(w,m,b,x,y,O,k,P=0,L=0){const M=w.map(B=>parseFloat(B)||parseInt(B));if(M.length<2)throw new Error("Too few arguments for instruction");for(let B=0;B<M.length;B+=2)M[B]*=m-P*k-L*k,O&&M[B]!==0&&(M[B]=v(Math.round(M[B]+.5)-.5,m,0)),M[B]+=x+P*k;for(let B=1;B<M.length;B+=2)M[B]*=b,O&&M[B]!==0&&(M[B]=v(Math.round(M[B]+.5)-.5,b,0)),M[B]+=y;return M}},56:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.observeDevicePixelDimensions=void 0;const d=h(859);l.observeDevicePixelDimensions=function(f,g,v){let S=new g.ResizeObserver(A=>{const w=A.find(x=>x.target===f);if(!w)return;if(!("devicePixelContentBoxSize"in w))return S?.disconnect(),void(S=void 0);const m=w.devicePixelContentBoxSize[0].inlineSize,b=w.devicePixelContentBoxSize[0].blockSize;m>0&&b>0&&v(m,b)});try{S.observe(f,{box:["device-pixel-content-box"]})}catch{S.disconnect(),S=void 0}return(0,d.toDisposable)(()=>S?.disconnect())}},374:(c,l)=>{function h(d){return 57508<=d&&d<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},l.excludeFromContrastRatioDemands=function(d){return h(d)||function(f){return 9472<=f&&f<=9631}(d)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createSelectionRenderModel=void 0;class h{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,g,v,S=!1){if(this.selectionStart=g,this.selectionEnd=v,!g||!v||g[0]===v[0]&&g[1]===v[1])return void this.clear();const A=g[1]-f.buffer.active.viewportY,w=v[1]-f.buffer.active.viewportY,m=Math.max(A,0),b=Math.min(w,f.rows-1);m>=f.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=A,this.viewportEndRow=w,this.viewportCappedStartRow=m,this.viewportCappedEndRow=b,this.startCol=g[0],this.endCol=v[0])}isCellSelected(f,g,v){return!!this.hasSelection&&(v-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?g>=this.startCol&&v>=this.viewportCappedStartRow&&g<this.endCol&&v<=this.viewportCappedEndRow:g<this.startCol&&v>=this.viewportCappedStartRow&&g>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&g>=this.startCol&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&g<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&g>=this.startCol)}}l.createSelectionRenderModel=function(){return new h}},509:function(c,l,h){var d=this&&this.__decorate||function(j,F,U,V){var Q,q=arguments.length,G=q<3?F:V===null?V=Object.getOwnPropertyDescriptor(F,U):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(j,F,U,V);else for(var te=j.length-1;te>=0;te--)(Q=j[te])&&(G=(q<3?Q(G):q>3?Q(F,U,G):Q(F,U))||G);return q>3&&G&&Object.defineProperty(F,U,G),G};Object.defineProperty(l,"__esModule",{value:!0}),l.TextureAtlas=void 0;const f=h(237),g=h(860),v=h(374),S=h(160),A=h(345),w=h(485),m=h(385),b=h(147),x=h(855),y=h(776),O={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let k;class P{get pages(){return this._pages}constructor(F,U,V){this._document=F,this._config=U,this._unicodeService=V,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new b.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new A.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new A.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=B(F,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const F of this.pages)F.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const F=new m.IdleTaskQueue;for(let U=33;U<126;U++)F.enqueue(()=>{if(!this._cacheMap.get(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT)){const V=this._drawToCache(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT);this._cacheMap.set(U,x.DEFAULT_COLOR,x.DEFAULT_COLOR,x.DEFAULT_EXT,V)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const F of this._pages)F.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(P.maxAtlasPages&&this._pages.length>=Math.max(4,P.maxAtlasPages)){const U=this._pages.filter(J=>2*J.canvas.width<=(P.maxTextureSize||4096)).sort((J,K)=>K.canvas.width!==J.canvas.width?K.canvas.width-J.canvas.width:K.percentageUsed-J.percentageUsed);let V=-1,Q=0;for(let J=0;J<U.length;J++)if(U[J].canvas.width!==Q)V=J,Q=U[J].canvas.width;else if(J-V==3)break;const q=U.slice(V,V+4),G=q.map(J=>J.glyphs[0].texturePage).sort((J,K)=>J>K?1:-1),te=this.pages.length-q.length,Y=this._mergePages(q,te);Y.version++;for(let J=G.length-1;J>=0;J--)this._deletePage(G[J]);this.pages.push(Y),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(Y.canvas)}const F=new L(this._document,this._textureSize);return this._pages.push(F),this._activePages.push(F),this._onAddTextureAtlasCanvas.fire(F.canvas),F}_mergePages(F,U){const V=2*F[0].canvas.width,Q=new L(this._document,V,F);for(const[q,G]of F.entries()){const te=q*G.canvas.width%V,Y=Math.floor(q/2)*G.canvas.height;Q.ctx.drawImage(G.canvas,te,Y);for(const K of G.glyphs)K.texturePage=U,K.sizeClipSpace.x=K.size.x/V,K.sizeClipSpace.y=K.size.y/V,K.texturePosition.x+=te,K.texturePosition.y+=Y,K.texturePositionClipSpace.x=K.texturePosition.x/V,K.texturePositionClipSpace.y=K.texturePosition.y/V;this._onRemoveTextureAtlasCanvas.fire(G.canvas);const J=this._activePages.indexOf(G);J!==-1&&this._activePages.splice(J,1)}return Q}_deletePage(F){this._pages.splice(F,1);for(let U=F;U<this._pages.length;U++){const V=this._pages[U];for(const Q of V.glyphs)Q.texturePage--;V.version++}}getRasterizedGlyphCombinedChar(F,U,V,Q,q){return this._getFromCacheMap(this._cacheMapCombined,F,U,V,Q,q)}getRasterizedGlyph(F,U,V,Q,q){return this._getFromCacheMap(this._cacheMap,F,U,V,Q,q)}_getFromCacheMap(F,U,V,Q,q,G=!1){return k=F.get(U,V,Q,q),k||(k=this._drawToCache(U,V,Q,q,G),F.set(U,V,Q,q,k)),k}_getColorFromAnsiIndex(F){if(F>=this._config.colors.ansi.length)throw new Error("No color found for idx "+F);return this._config.colors.ansi[F]}_getBackgroundColor(F,U,V,Q){if(this._config.allowTransparency)return S.NULL_COLOR;let q;switch(F){case 16777216:case 33554432:q=this._getColorFromAnsiIndex(U);break;case 50331648:const G=b.AttributeData.toColorRGB(U);q=S.rgba.toColor(G[0],G[1],G[2]);break;default:q=V?S.color.opaque(this._config.colors.foreground):this._config.colors.background}return q}_getForegroundColor(F,U,V,Q,q,G,te,Y,J,K){const ne=this._getMinimumContrastColor(F,U,V,Q,q,G,!1,J,Y,K);if(ne)return ne;let de;switch(q){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&J&&G<8&&(G+=8),de=this._getColorFromAnsiIndex(G);break;case 50331648:const Re=b.AttributeData.toColorRGB(G);de=S.rgba.toColor(Re[0],Re[1],Re[2]);break;default:de=te?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(de=S.color.opaque(de)),Y&&(de=S.color.multiplyOpacity(de,f.DIM_OPACITY)),de}_resolveBackgroundRgba(F,U,V){switch(F){case 16777216:case 33554432:return this._getColorFromAnsiIndex(U).rgba;case 50331648:return U<<8;default:return V?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(F,U,V,Q){switch(F){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&Q&&U<8&&(U+=8),this._getColorFromAnsiIndex(U).rgba;case 50331648:return U<<8;default:return V?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(F,U,V,Q,q,G,te,Y,J,K){if(this._config.minimumContrastRatio===1||K)return;const ne=this._getContrastCache(J),de=ne.getColor(F,Q);if(de!==void 0)return de||void 0;const Re=this._resolveBackgroundRgba(U,V,te),Te=this._resolveForegroundRgba(q,G,te,Y),Me=S.rgba.ensureContrastRatio(Re,Te,this._config.minimumContrastRatio/(J?2:1));if(!Me)return void ne.setColor(F,Q,null);const Ie=S.rgba.toColor(Me>>24&255,Me>>16&255,Me>>8&255);return ne.setColor(F,Q,Ie),Ie}_getContrastCache(F){return F?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(F,U,V,Q,q=!1){const G=typeof F=="number"?String.fromCharCode(F):F,te=Math.min(this._config.deviceCellWidth*Math.max(G.length,2)+4,this._textureSize);this._tmpCanvas.width<te&&(this._tmpCanvas.width=te);const Y=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<Y&&(this._tmpCanvas.height=Y),this._tmpCtx.save(),this._workAttributeData.fg=V,this._workAttributeData.bg=U,this._workAttributeData.extended.ext=Q,this._workAttributeData.isInvisible())return O;const J=!!this._workAttributeData.isBold(),K=!!this._workAttributeData.isInverse(),ne=!!this._workAttributeData.isDim(),de=!!this._workAttributeData.isItalic(),Re=!!this._workAttributeData.isUnderline(),Te=!!this._workAttributeData.isStrikethrough(),Me=!!this._workAttributeData.isOverline();let Ie=this._workAttributeData.getFgColor(),ce=this._workAttributeData.getFgColorMode(),pe=this._workAttributeData.getBgColor(),me=this._workAttributeData.getBgColorMode();if(K){const Ue=Ie;Ie=pe,pe=Ue;const Ge=ce;ce=me,me=Ge}const we=this._getBackgroundColor(me,pe,K,ne);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=we.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const Xe=J?this._config.fontWeightBold:this._config.fontWeight,Qe=de?"italic":"";this._tmpCtx.font=`${Qe} ${Xe} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Pe=G.length===1&&(0,v.isPowerlineGlyph)(G.charCodeAt(0)),Ze=G.length===1&&(0,v.isRestrictedPowerlineGlyph)(G.charCodeAt(0)),_e=this._getForegroundColor(U,me,pe,V,ce,Ie,K,ne,J,(0,v.excludeFromContrastRatioDemands)(G.charCodeAt(0)));this._tmpCtx.fillStyle=_e.css;const qe=Ze?0:4;let Be=!1;this._config.customGlyphs!==!1&&(Be=(0,g.tryDrawCustomChar)(this._tmpCtx,G,qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let mt,ht=!Pe;if(mt=typeof F=="number"?this._unicodeService.wcwidth(F):this._unicodeService.getStringCellWidth(F),Re){this._tmpCtx.save();const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ge=Ue%2==1?.5:0;if(this._tmpCtx.lineWidth=Ue,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ht=!1,this._tmpCtx.strokeStyle=`rgb(${b.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ht=!1;let Pt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Pt<8&&(Pt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Pt).css}this._tmpCtx.beginPath();const ut=qe,at=Math.ceil(qe+this._config.deviceCharHeight)-Ge-(q?2*Ue:0),Ut=at+Ue,Zt=at+2*Ue;for(let Pt=0;Pt<mt;Pt++){this._tmpCtx.save();const Ot=ut+Pt*this._config.deviceCellWidth,vt=ut+(Pt+1)*this._config.deviceCellWidth,Ve=Ot+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at),this._tmpCtx.moveTo(Ot,Zt),this._tmpCtx.lineTo(vt,Zt);break;case 3:const pt=Ue<=1?Zt:Math.ceil(qe+this._config.deviceCharHeight-Ue/2)-Ge,wt=Ue<=1?at:Math.ceil(qe+this._config.deviceCharHeight+Ue/2)-Ge,Ct=new Path2D;Ct.rect(Ot,at,this._config.deviceCellWidth,Zt-at),this._tmpCtx.clip(Ct),this._tmpCtx.moveTo(Ot-this._config.deviceCellWidth/2,Ut),this._tmpCtx.bezierCurveTo(Ot-this._config.deviceCellWidth/2,wt,Ot,wt,Ot,Ut),this._tmpCtx.bezierCurveTo(Ot,pt,Ve,pt,Ve,Ut),this._tmpCtx.bezierCurveTo(Ve,wt,vt,wt,vt,Ut),this._tmpCtx.bezierCurveTo(vt,pt,vt+this._config.deviceCellWidth/2,pt,vt+this._config.deviceCellWidth/2,Ut);break;case 4:this._tmpCtx.setLineDash([Math.round(Ue),Math.round(Ue)]),this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at);break;default:this._tmpCtx.moveTo(Ot,at),this._tmpCtx.lineTo(vt,at)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Be&&this._config.fontSize>=12&&!this._config.allowTransparency&&G!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Pt=this._tmpCtx.measureText(G);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Pt&&Pt.actualBoundingBoxDescent>0){this._tmpCtx.save();const Ot=new Path2D;Ot.rect(ut,at-Math.ceil(Ue/2),this._config.deviceCellWidth*mt,Zt-at+Math.ceil(Ue/2)),this._tmpCtx.clip(Ot),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=we.css,this._tmpCtx.strokeText(G,qe,qe+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(Me){const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ge=Ue%2==1?.5:0;this._tmpCtx.lineWidth=Ue,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(qe,qe+Ge),this._tmpCtx.lineTo(qe+this._config.deviceCharWidth*mt,qe+Ge),this._tmpCtx.stroke()}if(Be||this._tmpCtx.fillText(G,qe,qe+this._config.deviceCharHeight),G==="_"&&!this._config.allowTransparency){let Ue=M(this._tmpCtx.getImageData(qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight),we,_e,ht);if(Ue)for(let Ge=1;Ge<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=we.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(G,qe,qe+this._config.deviceCharHeight-Ge),Ue=M(this._tmpCtx.getImageData(qe,qe,this._config.deviceCellWidth,this._config.deviceCellHeight),we,_e,ht),Ue);Ge++);}if(Te){const Ue=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Ge=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Ue,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(qe,qe+Math.floor(this._config.deviceCharHeight/2)-Ge),this._tmpCtx.lineTo(qe+this._config.deviceCharWidth*mt,qe+Math.floor(this._config.deviceCharHeight/2)-Ge),this._tmpCtx.stroke()}this._tmpCtx.restore();const Dt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Se;if(Se=this._config.allowTransparency?function(Ue){for(let Ge=0;Ge<Ue.data.length;Ge+=4)if(Ue.data[Ge+3]>0)return!1;return!0}(Dt):M(Dt,we,_e,ht),Se)return O;const Ye=this._findGlyphBoundingBox(Dt,this._workBoundingBox,te,Ze,Be,qe);let Le,ze;for(;;){if(this._activePages.length===0){const Ue=this._createNewPage();Le=Ue,ze=Ue.currentRow,ze.height=Ye.size.y;break}Le=this._activePages[this._activePages.length-1],ze=Le.currentRow;for(const Ue of this._activePages)Ye.size.y<=Ue.currentRow.height&&(Le=Ue,ze=Ue.currentRow);for(let Ue=this._activePages.length-1;Ue>=0;Ue--)for(const Ge of this._activePages[Ue].fixedRows)Ge.height<=ze.height&&Ye.size.y<=Ge.height&&(Le=this._activePages[Ue],ze=Ge);if(ze.y+Ye.size.y>=Le.canvas.height||ze.height>Ye.size.y+2){let Ue=!1;if(Le.currentRow.y+Le.currentRow.height+Ye.size.y>=Le.canvas.height){let Ge;for(const ut of this._activePages)if(ut.currentRow.y+ut.currentRow.height+Ye.size.y<ut.canvas.height){Ge=ut;break}if(Ge)Le=Ge;else if(P.maxAtlasPages&&this._pages.length>=P.maxAtlasPages&&ze.y+Ye.size.y<=Le.canvas.height&&ze.height>=Ye.size.y&&ze.x+Ye.size.x<=Le.canvas.width)Ue=!0;else{const ut=this._createNewPage();Le=ut,ze=ut.currentRow,ze.height=Ye.size.y,Ue=!0}}Ue||(Le.currentRow.height>0&&Le.fixedRows.push(Le.currentRow),ze={x:0,y:Le.currentRow.y+Le.currentRow.height,height:Ye.size.y},Le.fixedRows.push(ze),Le.currentRow={x:0,y:ze.y+ze.height,height:0})}if(ze.x+Ye.size.x<=Le.canvas.width)break;ze===Le.currentRow?(ze.x=0,ze.y+=ze.height,ze.height=0):Le.fixedRows.splice(Le.fixedRows.indexOf(ze),1)}return Ye.texturePage=this._pages.indexOf(Le),Ye.texturePosition.x=ze.x,Ye.texturePosition.y=ze.y,Ye.texturePositionClipSpace.x=ze.x/Le.canvas.width,Ye.texturePositionClipSpace.y=ze.y/Le.canvas.height,Ye.sizeClipSpace.x/=Le.canvas.width,Ye.sizeClipSpace.y/=Le.canvas.height,ze.height=Math.max(ze.height,Ye.size.y),ze.x+=Ye.size.x,Le.ctx.putImageData(Dt,Ye.texturePosition.x-this._workBoundingBox.left,Ye.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Ye.size.x,Ye.size.y),Le.addGlyph(Ye),Le.version++,Ye}_findGlyphBoundingBox(F,U,V,Q,q,G){U.top=0;const te=Q?this._config.deviceCellHeight:this._tmpCanvas.height,Y=Q?this._config.deviceCellWidth:V;let J=!1;for(let K=0;K<te;K++){for(let ne=0;ne<Y;ne++){const de=K*this._tmpCanvas.width*4+4*ne+3;if(F.data[de]!==0){U.top=K,J=!0;break}}if(J)break}U.left=0,J=!1;for(let K=0;K<G+Y;K++){for(let ne=0;ne<te;ne++){const de=ne*this._tmpCanvas.width*4+4*K+3;if(F.data[de]!==0){U.left=K,J=!0;break}}if(J)break}U.right=Y,J=!1;for(let K=G+Y-1;K>=G;K--){for(let ne=0;ne<te;ne++){const de=ne*this._tmpCanvas.width*4+4*K+3;if(F.data[de]!==0){U.right=K,J=!0;break}}if(J)break}U.bottom=te,J=!1;for(let K=te-1;K>=0;K--){for(let ne=0;ne<Y;ne++){const de=K*this._tmpCanvas.width*4+4*ne+3;if(F.data[de]!==0){U.bottom=K,J=!0;break}}if(J)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:U.right-U.left+1,y:U.bottom-U.top+1},sizeClipSpace:{x:U.right-U.left+1,y:U.bottom-U.top+1},offset:{x:-U.left+G+(Q||q?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-U.top+G+(Q||q?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}l.TextureAtlas=P,d([y.traceCall],P.prototype,"_drawToCache",null);class L{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(F){this._glyphs.push(F),this._usedPixels+=F.size.x*F.size.y}constructor(F,U,V){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],V)for(const Q of V)this._glyphs.push(...Q.glyphs),this._usedPixels+=Q._usedPixels;this.canvas=B(F,U,U),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function M(j,F,U,V){const Q=F.rgba>>>24,q=F.rgba>>>16&255,G=F.rgba>>>8&255,te=U.rgba>>>24,Y=U.rgba>>>16&255,J=U.rgba>>>8&255,K=Math.floor((Math.abs(Q-te)+Math.abs(q-Y)+Math.abs(G-J))/12);let ne=!0;for(let de=0;de<j.data.length;de+=4)j.data[de]===Q&&j.data[de+1]===q&&j.data[de+2]===G||V&&Math.abs(j.data[de]-Q)+Math.abs(j.data[de+1]-q)+Math.abs(j.data[de+2]-G)<K?j.data[de+3]=0:ne=!1;return ne}function B(j,F,U){const V=j.createElement("canvas");return V.width=F,V.height=U,V}},160:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const d=h(399);let f=0,g=0,v=0,S=0;var A,w,m,b,x;function y(k){const P=k.toString(16);return P.length<2?"0"+P:P}function O(k,P){return k<P?(P+.05)/(k+.05):(k+.05)/(P+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(k){k.toCss=function(P,L,M,B){return B!==void 0?`#${y(P)}${y(L)}${y(M)}${y(B)}`:`#${y(P)}${y(L)}${y(M)}`},k.toRgba=function(P,L,M,B=255){return(P<<24|L<<16|M<<8|B)>>>0}}(A||(l.channels=A={})),function(k){function P(L,M){return S=Math.round(255*M),[f,g,v]=x.toChannels(L.rgba),{css:A.toCss(f,g,v,S),rgba:A.toRgba(f,g,v,S)}}k.blend=function(L,M){if(S=(255&M.rgba)/255,S===1)return{css:M.css,rgba:M.rgba};const B=M.rgba>>24&255,j=M.rgba>>16&255,F=M.rgba>>8&255,U=L.rgba>>24&255,V=L.rgba>>16&255,Q=L.rgba>>8&255;return f=U+Math.round((B-U)*S),g=V+Math.round((j-V)*S),v=Q+Math.round((F-Q)*S),{css:A.toCss(f,g,v),rgba:A.toRgba(f,g,v)}},k.isOpaque=function(L){return(255&L.rgba)==255},k.ensureContrastRatio=function(L,M,B){const j=x.ensureContrastRatio(L.rgba,M.rgba,B);if(j)return x.toColor(j>>24&255,j>>16&255,j>>8&255)},k.opaque=function(L){const M=(255|L.rgba)>>>0;return[f,g,v]=x.toChannels(M),{css:A.toCss(f,g,v),rgba:M}},k.opacity=P,k.multiplyOpacity=function(L,M){return S=255&L.rgba,P(L,S*M/255)},k.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(w||(l.color=w={})),function(k){let P,L;if(!d.isNode){const M=document.createElement("canvas");M.width=1,M.height=1;const B=M.getContext("2d",{willReadFrequently:!0});B&&(P=B,P.globalCompositeOperation="copy",L=P.createLinearGradient(0,0,1,1))}k.toColor=function(M){if(M.match(/#[\da-f]{3,8}/i))switch(M.length){case 4:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),x.toColor(f,g,v);case 5:return f=parseInt(M.slice(1,2).repeat(2),16),g=parseInt(M.slice(2,3).repeat(2),16),v=parseInt(M.slice(3,4).repeat(2),16),S=parseInt(M.slice(4,5).repeat(2),16),x.toColor(f,g,v,S);case 7:return{css:M,rgba:(parseInt(M.slice(1),16)<<8|255)>>>0};case 9:return{css:M,rgba:parseInt(M.slice(1),16)>>>0}}const B=M.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(B)return f=parseInt(B[1]),g=parseInt(B[2]),v=parseInt(B[3]),S=Math.round(255*(B[5]===void 0?1:parseFloat(B[5]))),x.toColor(f,g,v,S);if(!P||!L)throw new Error("css.toColor: Unsupported css format");if(P.fillStyle=L,P.fillStyle=M,typeof P.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(P.fillRect(0,0,1,1),[f,g,v,S]=P.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:A.toRgba(f,g,v,S),css:M}}}(m||(l.css=m={})),function(k){function P(L,M,B){const j=L/255,F=M/255,U=B/255;return .2126*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.7152*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))}k.relativeLuminance=function(L){return P(L>>16&255,L>>8&255,255&L)},k.relativeLuminance2=P}(b||(l.rgb=b={})),function(k){function P(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q>0||q>0||G>0);)Q-=Math.max(0,Math.ceil(.1*Q)),q-=Math.max(0,Math.ceil(.1*q)),G-=Math.max(0,Math.ceil(.1*G)),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}function L(M,B,j){const F=M>>24&255,U=M>>16&255,V=M>>8&255;let Q=B>>24&255,q=B>>16&255,G=B>>8&255,te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));for(;te<j&&(Q<255||q<255||G<255);)Q=Math.min(255,Q+Math.ceil(.1*(255-Q))),q=Math.min(255,q+Math.ceil(.1*(255-q))),G=Math.min(255,G+Math.ceil(.1*(255-G))),te=O(b.relativeLuminance2(Q,q,G),b.relativeLuminance2(F,U,V));return(Q<<24|q<<16|G<<8|255)>>>0}k.ensureContrastRatio=function(M,B,j){const F=b.relativeLuminance(M>>8),U=b.relativeLuminance(B>>8);if(O(F,U)<j){if(U<F){const q=P(M,B,j),G=O(F,b.relativeLuminance(q>>8));if(G<j){const te=L(M,B,j);return G>O(F,b.relativeLuminance(te>>8))?q:te}return q}const V=L(M,B,j),Q=O(F,b.relativeLuminance(V>>8));if(Q<j){const q=P(M,B,j);return Q>O(F,b.relativeLuminance(q>>8))?V:q}return V}},k.reduceLuminance=P,k.increaseLuminance=L,k.toChannels=function(M){return[M>>24&255,M>>16&255,M>>8&255,255&M]},k.toColor=function(M,B,j,F){return{css:A.toCss(M,B,j,F),rgba:A.toRgba(M,B,j,F)}}}(x||(l.rgba=x={})),l.toPaddedHex=y,l.contrastRatio=O},345:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===h)return void this._listeners.splice(d,1)}}})),this._event}fire(h,d){const f=[];for(let g=0;g<this._listeners.length;g++)f.push(this._listeners[g]);for(let g=0;g<f.length;g++)f[g].call(void 0,h,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,d){return h(f=>d.fire(f))}},859:(c,l)=>{function h(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},l.toDisposable=function(d){return{dispose:d}},l.disposeArray=h,l.getDisposeArrayDisposable=function(d){return{dispose:()=>h(d)}}},485:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(f,g,v){this._data[f]||(this._data[f]={}),this._data[f][g]=v}get(f,g){return this._data[f]?this._data[f][g]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(d,f,g,v,S){this._data.get(d,f)||this._data.set(d,f,new h),this._data.get(d,f).set(g,v,S)}get(d,f,g,v){var S;return(S=this._data.get(d,f))===null||S===void 0?void 0:S.get(g,v)}clear(){this._data.clear()}}},399:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,d=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const f=h.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),l.isIpad=d==="iPad",l.isIphone=d==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),l.isLinux=d.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},385:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const d=h(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let A=0,w=0,m=S.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(A=Date.now(),this._tasks[this._i]()||this._i++,A=Math.max(1,Date.now()-A),w=Math.max(A,w),b=S.timeRemaining(),1.5*w>b)return m-A<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-A))}ms`),void this._start();m=b}this.clear()}}class g extends f{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const A=Date.now()+S;return{timeRemaining:()=>Math.max(0,A-Date.now())}}}l.PriorityTaskQueue=g,l.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:g,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new h;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,v=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=v}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=d},782:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const d=h(133),f=h(855),g=h(147);class v extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(A){const w=new v;return w.setFromCharData(A),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(A){this.fg=A[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(A[f.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(A[f.CHAR_DATA_CHAR_INDEX].length===2){const m=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|A[f.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=A[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|A[f.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=A[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|A[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=v},855:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},133:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,d=0,f=h.length){let g="";for(let v=d;v<f;++v){let S=h[v];S>65535?(S-=65536,g+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):g+=String.fromCharCode(S)}return g},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,d){const f=h.length;if(!f)return 0;let g=0,v=0;if(this._interim){const S=h.charCodeAt(v++);56320<=S&&S<=57343?d[g++]=1024*(this._interim-55296)+S-56320+65536:(d[g++]=this._interim,d[g++]=S),this._interim=0}for(let S=v;S<f;++S){const A=h.charCodeAt(S);if(55296<=A&&A<=56319){if(++S>=f)return this._interim=A,g;const w=h.charCodeAt(S);56320<=w&&w<=57343?d[g++]=1024*(A-55296)+w-56320+65536:(d[g++]=A,d[g++]=w)}else A!==65279&&(d[g++]=A)}return g}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,d){const f=h.length;if(!f)return 0;let g,v,S,A,w=0,m=0,b=0;if(this.interim[0]){let O=!1,k=this.interim[0];k&=(224&k)==192?31:(240&k)==224?15:7;let P,L=0;for(;(P=63&this.interim[++L])&&L<4;)k<<=6,k|=P;const M=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,B=M-L;for(;b<B;){if(b>=f)return 0;if(P=h[b++],(192&P)!=128){b--,O=!0;break}this.interim[L++]=P,k<<=6,k|=63&P}O||(M===2?k<128?b--:d[w++]=k:M===3?k<2048||k>=55296&&k<=57343||k===65279||(d[w++]=k):k<65536||k>1114111||(d[w++]=k)),this.interim.fill(0)}const x=f-4;let y=b;for(;y<f;){for(;!(!(y<x)||128&(g=h[y])||128&(v=h[y+1])||128&(S=h[y+2])||128&(A=h[y+3]));)d[w++]=g,d[w++]=v,d[w++]=S,d[w++]=A,y+=4;if(g=h[y++],g<128)d[w++]=g;else if((224&g)==192){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(m=(31&g)<<6|63&v,m<128){y--;continue}d[w++]=m}else if((240&g)==224){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(m=(15&g)<<12|(63&v)<<6|63&S,m<2048||m>=55296&&m<=57343||m===65279)continue;d[w++]=m}else if((248&g)==240){if(y>=f)return this.interim[0]=g,w;if(v=h[y++],(192&v)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,w;if(S=h[y++],(192&S)!=128){y--;continue}if(y>=f)return this.interim[0]=g,this.interim[1]=v,this.interim[2]=S,w;if(A=h[y++],(192&A)!=128){y--;continue}if(m=(7&g)<<18|(63&v)<<12|(63&S)<<6|63&A,m<65536||m>1114111)continue;d[w++]=m}}return w}}},776:function(c,l,h){var d=this&&this.__decorate||function(m,b,x,y){var O,k=arguments.length,P=k<3?b:y===null?y=Object.getOwnPropertyDescriptor(b,x):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,b,x,y);else for(var L=m.length-1;L>=0;L--)(O=m[L])&&(P=(k<3?O(P):k>3?O(b,x,P):O(b,x))||P);return k>3&&P&&Object.defineProperty(b,x,P),P},f=this&&this.__param||function(m,b){return function(x,y){b(x,y,m)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const g=h(859),v=h(97),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let A,w=l.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),A=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,x){this._evalLazyOptionalParams(x),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...x)}trace(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.trace.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}debug(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.debug.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.log,m,b)}info(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.INFO&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.info.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.info,m,b)}warn(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.WARN&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.warn.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.warn,m,b)}error(m,...b){var x,y;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((y=(x=this._optionsService.options.logger)===null||x===void 0?void 0:x.error.bind(this._optionsService.options.logger))!==null&&y!==void 0?y:console.error,m,b)}};l.LogService=w=d([f(0,v.IOptionsService)],w),l.setTraceLogger=function(m){A=m},l.traceCall=function(m,b,x){if(typeof x.value!="function")throw new Error("not supported");const y=x.value;x.value=function(...O){if(A.logLevel!==v.LogLevelEnum.TRACE)return y.apply(this,O);A.trace(`GlyphRenderer#${y.name}(${O.map(P=>JSON.stringify(P)).join(", ")})`);const k=y.apply(this,O);return A.trace(`GlyphRenderer#${y.name} return`,k),k}}},726:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",d="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(f){return f[d]||[]},l.createDecorator=function(f){if(l.serviceRegistry.has(f))return l.serviceRegistry.get(f);const g=function(v,S,A){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,m,b){m[h]===m?m[d].push({id:w,index:b}):(m[d]=[{id:w,index:b}],m[h]=m)})(g,v,A)};return g.toString=()=>f,l.serviceRegistry.set(f,g),g}},97:(c,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const d=h(726);var f;l.IBufferService=(0,d.createDecorator)("BufferService"),l.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),l.ICoreService=(0,d.createDecorator)("CoreService"),l.ICharsetService=(0,d.createDecorator)("CharsetService"),l.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(f||(l.LogLevelEnum=f={})),l.ILogService=(0,d.createDecorator)("LogService"),l.IOptionsService=(0,d.createDecorator)("OptionsService"),l.IOscLinkService=(0,d.createDecorator)("OscLinkService"),l.IUnicodeService=(0,d.createDecorator)("UnicodeService"),l.IDecorationService=(0,d.createDecorator)("DecorationService")}},n={};function o(c){var l=n[c];if(l!==void 0)return l.exports;var h=n[c]={exports:{}};return r[c].call(h.exports,h,h.exports,o),h.exports}var a={};return(()=>{var c=a;Object.defineProperty(c,"__esModule",{value:!0}),c.WebglAddon=void 0;const l=o(345),h=o(859),d=o(399),f=o(666),g=o(776);class v extends h.Disposable{constructor(A){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=A,this._onChangeTextureAtlas=this.register(new l.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new l.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new l.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new l.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(A){const w=A._core;if(!A.element)return void this.register(w.onWillOpen(()=>this.activate(A)));this._terminal=A;const m=w.coreService,b=w.optionsService,x=w,y=x._renderService,O=x._characterJoinerService,k=x._charSizeService,P=x._coreBrowserService,L=x._decorationService,M=x._logService,B=x._themeService;(0,g.setTraceLogger)(M),this._renderer=this.register(new f.WebglRenderer(A,O,k,P,m,L,b,B,this._preserveDrawingBuffer)),this.register((0,l.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,l.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,l.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,l.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),y.setRenderer(this._renderer),this.register((0,h.toDisposable)(()=>{const j=this._terminal._core._renderService;j.setRenderer(this._terminal._core._createRenderer()),j.handleResize(A.cols,A.rows)}))}get textureAtlas(){var A;return(A=this._renderer)===null||A===void 0?void 0:A.textureAtlas}clearTextureAtlas(){var A;(A=this._renderer)===null||A===void 0||A.clearTextureAtlas()}}c.WebglAddon=v})(),a})())})(xtermAddonWebgl);var xtermAddonWebglExports=xtermAddonWebgl.exports,readline={},keymap$1={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.parseInput=s.InputType=void 0;var e;(function(o){o[o.Text=0]="Text",o[o.AltEnter=1]="AltEnter",o[o.ArrowUp=2]="ArrowUp",o[o.ArrowDown=3]="ArrowDown",o[o.ArrowLeft=4]="ArrowLeft",o[o.ArrowRight=5]="ArrowRight",o[o.Delete=6]="Delete",o[o.Backspace=7]="Backspace",o[o.CtrlA=8]="CtrlA",o[o.CtrlC=9]="CtrlC",o[o.CtrlD=10]="CtrlD",o[o.CtrlE=11]="CtrlE",o[o.CtrlK=12]="CtrlK",o[o.CtrlL=13]="CtrlL",o[o.CtrlQ=14]="CtrlQ",o[o.CtrlS=15]="CtrlS",o[o.CtrlU=16]="CtrlU",o[o.End=17]="End",o[o.Enter=18]="Enter",o[o.Home=19]="Home",o[o.ShiftEnter=20]="ShiftEnter",o[o.UnsupportedControlChar=21]="UnsupportedControlChar",o[o.UnsupportedEscape=22]="UnsupportedEscape"})(e=s.InputType||(s.InputType={}));function r(o){return Array.from(n(o))}s.parseInput=r;function*n(o){let a=[];const c=o[Symbol.iterator]();for(let l=c.next();!l.done;l=c.next()){const h=l.value;if(h.length>1){a.push(h);continue}const d=h.charCodeAt(0);if(a.length>0&&(d<32||d===127)&&(yield{inputType:e.Text,data:a},a=[]),d===27){const f=c.next();if(f.done){a.push("\x1B");continue}let g=e.UnsupportedEscape;if(f.value!=="["){switch(f.value){case"\r":g=e.AltEnter;break}yield{inputType:g,data:["\x1B",f.value]};continue}const v=c.next();if(v.done)continue;if(v.value>="0"&&v.value<="9"){let S=v.value;const A=c.next();if(A.done)return;if(A.value>="0"&&A.value<="9")S+=A.value;else if(A.value!=="~")continue;switch(S){case"3":g=e.Delete;break}yield{inputType:g,data:["\x1B","[",S,"~"]};continue}switch(v.value){case"A":g=e.ArrowUp;break;case"B":g=e.ArrowDown;break;case"C":g=e.ArrowRight;break;case"D":g=e.ArrowLeft;break;case"F":g=e.End;break;case"H":g=e.Home;break;case"\r":g=e.AltEnter;break}yield{inputType:g,data:["\x1B","[",v.value]};continue}if(d<32||d===127){let f=e.UnsupportedControlChar;switch(d){case 1:f=e.CtrlA;break;case 3:f=e.CtrlC;break;case 4:f=e.CtrlD;break;case 5:f=e.CtrlE;break;case 11:f=e.CtrlK;break;case 17:f=e.CtrlQ;break;case 19:f=e.CtrlS;break;case 21:f=e.CtrlU;break;case 13:f=e.Enter;break;case 127:f=e.Backspace;break;case 12:f=e.CtrlL;break}yield{inputType:f,data:[h]};continue}a.push(h)}a.length>0&&(yield{inputType:e.Text,data:a})}})(keymap$1);var state={},line={};Object.defineProperty(line,"__esModule",{value:!0});line.LineBuffer=void 0;class LineBuffer{constructor(){this.buf="",this.pos=0}buffer(){return this.buf}pos_buffer(){return this.buf.slice(0,this.pos)}length(){return this.buf.length}char_length(){return[...this.buf].length}update(e,r){this.buf=e,this.pos=r}insert(e){const r=e.length,n=this.pos===this.buf.length;return n?this.buf=this.buf+e:this.buf=this.buf.slice(0,this.pos)+e+this.buf.slice(this.pos),this.pos+=r,n}moveBack(e){const r=this.prevPos(e);return r!==void 0?(this.pos=r,!0):!1}moveForward(e){const r=this.nextPos(e);return r!==void 0?(this.pos=r,!0):!1}moveHome(){const e=this.startOfLine();return this.pos>e?(this.pos=e,!0):!1}moveEnd(){const e=this.endOfLine();return this.pos===e?!1:(this.pos=e,!0)}startOfLine(){const e=this.buf.slice(0,this.pos).lastIndexOf(`
`);return e!==-1?e+1:0}endOfLine(){const e=this.buf.slice(this.pos).indexOf(`
`);return e!==-1?this.pos+e:this.buf.length}moveLineUp(e){const r=this.buf.slice(0,this.pos).lastIndexOf(`
`);if(r===-1)return!1;const n=[...this.buf.slice(r+1,this.pos)].length;let o=this.buf.slice(0,r).lastIndexOf(`
`);o===-1?o=0:o=o+1;let a=r;for(let h=1;h<e&&o!==0;h++)a=o-1,o=this.buf.slice(0,a).lastIndexOf(`
`),o===-1?o=0:o=o+1;const c=[...this.buf.slice(o,a)].slice(0,n);let l=r;return c.length>0&&(l=c.map(h=>h.length).reduce((h,d)=>h+d,0),l=o+l),this.pos=l,!0}moveLineDown(e){const r=this.buf.slice(this.pos).indexOf(`
`);if(r===-1)return!1;let n=this.buf.slice(0,this.pos).lastIndexOf(`
`);n===-1?n=0:n+=1;const o=[...this.buf.slice(n,this.pos)].length;let a=this.pos+r+1,c=this.buf.slice(a).indexOf(`
`);c===-1?c=this.buf.length:c=a+c;for(let h=1;h<e&&c!==this.buf.length;h++)a=c+1,c=this.buf.slice(a).indexOf(`
`),c===-1?c=this.buf.length:c=a+c;const l=[...this.buf.slice(a,c)];return o<l.length?this.pos=l.slice(0,o).map(h=>h.length).reduce((h,d)=>h+d,0)+a:this.pos=c,!0}set_pos(e){this.pos=e}prevPos(e){if(this.pos===0)return;const r=this.buf.slice(0,this.pos);return this.pos-[...r].slice(-e).map(n=>n.length).reduce((n,o)=>n+o,0)}nextPos(e){if(this.pos===this.buf.length)return;const r=this.buf.slice(this.pos);return this.pos+[...r].slice(0,e).map(n=>n.length).reduce((n,o)=>n+o,0)}backspace(e){const r=this.prevPos(e);return r===void 0?!1:(this.buf=this.buf.slice(0,r)+this.buf.slice(this.pos),this.pos=r,!0)}delete(e){const r=this.nextPos(e);return r!==void 0?(this.buf=this.buf.slice(0,this.pos)+this.buf.slice(r),!0):!1}deleteEndOfLine(){if(this.buf.length==0||this.pos==this.buf.length)return!1;const e=this.pos,r=this.endOfLine();return e==r?this.delete(1):this.buf=this.buf.slice(0,e)+this.buf.slice(r),!0}}line.LineBuffer=LineBuffer;var stringWidth$1={exports:{}},ansiRegex$1=({onlyFirst:s=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,s?void 0:"g")};const ansiRegex=ansiRegex$1;var stripAnsi$1=s=>typeof s=="string"?s.replace(ansiRegex(),""):s,isFullwidthCodePoint$2={exports:{}};const isFullwidthCodePoint$1=s=>Number.isNaN(s)?!1:s>=4352&&(s<=4447||s===9001||s===9002||11904<=s&&s<=12871&&s!==12351||12880<=s&&s<=19903||19968<=s&&s<=42182||43360<=s&&s<=43388||44032<=s&&s<=55203||63744<=s&&s<=64255||65040<=s&&s<=65049||65072<=s&&s<=65131||65281<=s&&s<=65376||65504<=s&&s<=65510||110592<=s&&s<=110593||127488<=s&&s<=127569||131072<=s&&s<=262141);isFullwidthCodePoint$2.exports=isFullwidthCodePoint$1;isFullwidthCodePoint$2.exports.default=isFullwidthCodePoint$1;var isFullwidthCodePointExports=isFullwidthCodePoint$2.exports,emojiRegex$1=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const stripAnsi=stripAnsi$1,isFullwidthCodePoint=isFullwidthCodePointExports,emojiRegex=emojiRegex$1,stringWidth=s=>{if(typeof s!="string"||s.length===0||(s=stripAnsi(s),s.length===0))return 0;s=s.replace(emojiRegex(),"  ");let e=0;for(let r=0;r<s.length;r++){const n=s.codePointAt(r);n<=31||n>=127&&n<=159||n>=768&&n<=879||(n>65535&&r++,e+=isFullwidthCodePoint(n)?2:1)}return e};stringWidth$1.exports=stringWidth;stringWidth$1.exports.default=stringWidth;var stringWidthExports=stringWidth$1.exports,__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(state,"__esModule",{value:!0});state.State=state.Layout=state.Position=void 0;const line_1=line,string_width_1$1=__importDefault$1(stringWidthExports);class Position{constructor(e,r){e!==void 0?this.row=e:this.row=0,r!==void 0?this.col=r:this.col=0}}state.Position=Position;class Layout{constructor(e){this.promptSize=e,this.cursor=new Position,this.end=new Position}}state.Layout=Layout;class State{constructor(e,r,n,o){this.line=new line_1.LineBuffer,this.highlighting=!1,this.prompt=e,this.tty=r,this.highlighter=n,this.history=o,this.promptSize=r.calculatePosition(e,new Position),this.layout=new Layout(this.promptSize)}buffer(){return this.line.buffer()}shouldHighlight(){return this.highlighter.highlightChar(this.line.buf,this.line.pos)?(this.highlighting=!0,!0):this.highlighting?(this.highlighting=!1,!0):!1}clearScreen(){this.tty.clearScreen(),this.layout.cursor=new Position,this.layout.end=new Position,this.refresh()}editInsert(e){const r=this.line.insert(e),n=e.includes(`
`);if(r&&!n){const o=(0,string_width_1$1.default)(e);o>0&&this.layout.cursor.col+o<this.tty.col&&!this.shouldHighlight()?(this.layout.cursor.col+=o,this.layout.end.col+=o,this.tty.write(e)):this.refresh()}else this.refresh()}update(e){this.line.update(e,e.length),this.refresh()}editBackspace(e){this.line.backspace(e)&&this.refresh()}editDelete(e){this.line.delete(e)&&this.refresh()}editDeleteEndOfLine(){this.line.deleteEndOfLine()&&this.refresh()}refresh(){const e=this.tty.computeLayout(this.promptSize,this.line);this.tty.refreshLine(this.prompt,this.line,this.layout,e,this.highlighter),this.layout=e}moveCursorBack(e){this.line.moveBack(e)&&this.moveCursor()}moveCursorForward(e){this.line.moveForward(e)&&this.moveCursor()}moveCursorUp(e){this.line.moveLineUp(e)?this.moveCursor():this.previousHistory()}moveCursorDown(e){this.line.moveLineDown(e)?this.moveCursor():this.nextHistory()}moveCursorHome(){this.line.moveHome()&&this.moveCursor()}moveCursorEnd(){this.line.moveEnd()&&this.moveCursor()}moveCursorToEnd(){this.layout.cursor!==this.layout.end&&(this.tty.moveCursor(this.layout.cursor,this.layout.end),this.layout.cursor=Object.assign({},this.layout.end))}previousHistory(){if(this.history.cursor===-1&&this.line.length()>0)return;const e=this.history.prev();e!==void 0&&this.update(e)}nextHistory(){if(this.history.cursor===-1)return;const e=this.history.next();e!==void 0?this.update(e):this.update("")}moveCursor(){const e=this.tty.calculatePosition(this.line.pos_buffer(),this.promptSize);e!==this.layout.cursor&&(this.shouldHighlight()?this.refresh():(this.tty.moveCursor(this.layout.cursor,e),this.layout.promptSize=Object.assign({},this.promptSize),this.layout.cursor=Object.assign({},e)))}}state.State=State;var history$1={};Object.defineProperty(history$1,"__esModule",{value:!0});history$1.History=void 0;class History{constructor(e){this.entries=[],this.cursor=-1,this.maxEntries=e}saveToLocalStorage(){const e=window?.localStorage;e!==void 0&&e.setItem("history",JSON.stringify(this.entries))}restoreFromLocalStorage(){const e=window?.localStorage;if(e!==void 0){const r=e.getItem("history");if(r==null)return;try{const n=JSON.parse(r);!Array.isArray(n)||n.find(o=>typeof o!="string")!==void 0?(this.entries=[],e.setItem("history","[]")):this.entries=n}catch{this.entries=[],e.setItem("history","[]")}}}append(e){this.resetCursor(),this.entries.includes(e)?(this.entries.splice(this.entries.indexOf(e),1),this.entries.unshift(e)):this.entries.unshift(e),this.entries.length>this.maxEntries&&this.entries.pop(),this.saveToLocalStorage()}resetCursor(){this.cursor=-1}next(){if(this.cursor!==-1)return this.cursor-=1,this.entries[this.cursor]}prev(){if(!(this.cursor+1>=this.entries.length))return this.cursor+=1,this.entries[this.cursor]}}history$1.History=History;var tty={},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(tty,"__esModule",{value:!0});tty.Tty=void 0;const string_width_1=__importDefault(stringWidthExports);class Tty{constructor(e,r,n,o){this.tabWidth=n,this.col=e,this.row=r,this.out=o}write(e){return this.out.write(e)}print(e){return this.out.print(e)}println(e){return this.out.println(e)}clearScreen(){this.out.write("\x1B[H\x1B[2J")}calculatePosition(e,r){const n=Object.assign({},r);let o=0;return[...e].forEach(a=>{if(a===`
`){n.row+=1,n.col=0;return}let c=0;if(a==="	")c=this.tabWidth-n.col%this.tabWidth;else{let l;[l,o]=width(a,o),c=l}n.col+=c,n.col>this.col&&(n.row+=1,n.col=c)}),n.col===this.col&&(n.col=0,n.row+=1),n}computeLayout(e,r){const n=Object.assign({},e),o=r.pos,a=this.calculatePosition(r.buf.slice(0,r.pos),e),c=o===r.buf.length?Object.assign({},a):this.calculatePosition(r.buf.slice(o),a);return{promptSize:n,cursor:a,end:c}}refreshLine(e,r,n,o,a){const c=o.cursor,l=o.end;this.clearOldRows(n),this.write(a.highlightPrompt(e)),this.write(a.highlight(r.buf,r.pos)),l.col===0&&l.row>0&&r.buf[r.buf.length-1]!==`
`&&this.write(`
`);const h=l.row-c.row;h>0&&this.write(`\x1B[${h}A`),c.col>0?this.write(`\r\x1B[${c.col}C`):this.write("\r")}clearOldRows(e){const r=e.cursor.row,n=e.end.row,o=Math.max(n-r,0);o>0&&this.write(`\x1B[${o}B`);for(let a=0;a<n;a++)this.write("\r\x1B[0K\x1B[A");this.write("\r\x1B[0K")}moveCursor(e,r){if(r.row>e.row){const n=r.row-e.row;n===1?this.write("\x1B[B"):this.write(`\x1B[${n}B`)}else if(r.row<e.row){const n=e.row-r.row;n===1?this.write("\x1B[A"):this.write(`\x1B[${n}A`)}if(r.col>e.col){const n=r.col-e.col;n===1?this.write("\x1B[C"):this.write(`\x1B[${n}C`)}else if(r.col<e.col){const n=e.col-r.col;n===1?this.write("\x1B[D"):this.write(`\x1B[${n}D`)}}}tty.Tty=Tty;function width(s,e){return e===1?s==="["?[0,2]:[0,0]:e===2?s===";"||s[0]>="0"&&s[0]<="9"?[0,e]:[0,0]:s==="\x1B"?[0,1]:s===`
`?[0,e]:[(0,string_width_1.default)(s),e]}var highlight={};Object.defineProperty(highlight,"__esModule",{value:!0});highlight.IdentityHighlighter=void 0;class IdentityHighlighter{highlight(e,r){return e}highlightPrompt(e){return e}highlightChar(e,r){return!1}}highlight.IdentityHighlighter=IdentityHighlighter;Object.defineProperty(readline,"__esModule",{value:!0});var Readline_1=readline.Readline=void 0;const keymap_1=keymap$1,state_1=state,history_1=history$1,tty_1=tty,highlight_1=highlight;class Readline{constructor(){this.highlighter=new highlight_1.IdentityHighlighter,this.history=new history_1.History(50),this.disposables=[],this.watermark=0,this.highWatermark=1e4,this.lowWatermark=1e3,this.highWater=!1,this.state=new state_1.State(">",this.tty(),this.highlighter,this.history),this.checkHandler=()=>!0,this.ctrlCHandler=()=>{},this.pauseHandler=e=>{},this.history.restoreFromLocalStorage()}activate(e){this.term=e,this.term.onData(this.readData.bind(this)),this.term.attachCustomKeyEventHandler(this.handleKeyEvent.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}appendHistory(e){this.history.append(e)}setHighlighter(e){this.highlighter=e}setCheckHandler(e){this.checkHandler=e}setCtrlCHandler(e){this.ctrlCHandler=e}setPauseHandler(e){this.pauseHandler=e}writeReady(){return!this.highWater}write(e){e===`
`?e=`\r
`:(e=e.replace(/^\n/,`\r
`),e=e.replace(/([^\r])\n/g,`$1\r
`));const r=e.length;this.watermark+=r,this.watermark>this.highWatermark&&(this.highWater=!0),this.term&&this.term.write(e,()=>{this.watermark=Math.max(this.watermark-r,0),this.highWater&&this.watermark<this.lowWatermark&&(this.highWater=!1)})}print(e){return this.write(e)}println(e){return this.write(e+`\r
`)}output(){return this}tty(){var e,r;return((r=(e=this.term)===null||e===void 0?void 0:e.options)===null||r===void 0?void 0:r.tabStopWidth)!==void 0?new tty_1.Tty(this.term.cols,this.term.rows,this.term.options.tabStopWidth,this.output()):new tty_1.Tty(0,0,8,this.output())}read(e){return new Promise((r,n)=>{if(this.term===void 0){n("addon is not active");return}this.state=new state_1.State(e,this.tty(),this.highlighter,this.history),this.state.refresh(),this.activeRead={prompt:e,resolve:r,reject:n}})}handleKeyEvent(e){return e.key==="Enter"&&e.shiftKey?(e.type==="keydown"&&this.readKey({inputType:keymap_1.InputType.ShiftEnter,data:["\r"]}),!1):!0}readData(e){const r=(0,keymap_1.parseInput)(e);if(r.length>1||r[0].inputType===keymap_1.InputType.Text&&r[0].data.length>1){this.readPaste(r);return}this.readKey(r[0])}readPaste(e){const r=e.map(n=>n.inputType===keymap_1.InputType.Enter?{inputType:keymap_1.InputType.Text,data:[`
`]}:n);for(const n of r)n.inputType===keymap_1.InputType.Text?this.state.editInsert(n.data.join("")):this.readKey(n)}readKey(e){var r,n,o;if(this.activeRead===void 0){switch(e.inputType){case keymap_1.InputType.CtrlC:this.ctrlCHandler();break;case keymap_1.InputType.CtrlL:this.write("\x1B[H\x1B[2J");break}return}switch(e.inputType){case keymap_1.InputType.Text:this.state.editInsert(e.data.join(""));break;case keymap_1.InputType.AltEnter:case keymap_1.InputType.ShiftEnter:this.state.editInsert(`
`);break;case keymap_1.InputType.Enter:this.checkHandler(this.state.buffer())?(this.state.moveCursorToEnd(),(r=this.term)===null||r===void 0||r.write(`\r
`),this.history.append(this.state.buffer()),(n=this.activeRead)===null||n===void 0||n.resolve(this.state.buffer()),this.activeRead=void 0):this.state.editInsert(`
`);break;case keymap_1.InputType.CtrlC:this.state.moveCursorToEnd(),(o=this.term)===null||o===void 0||o.write(`^C\r
`),this.state=new state_1.State(this.activeRead.prompt,this.tty(),this.highlighter,this.history),this.state.refresh();break;case keymap_1.InputType.CtrlS:this.pauseHandler(!1);break;case keymap_1.InputType.CtrlU:this.state.update("");break;case keymap_1.InputType.CtrlK:this.state.editDeleteEndOfLine();break;case keymap_1.InputType.CtrlQ:this.pauseHandler(!0);break;case keymap_1.InputType.CtrlL:this.state.clearScreen();break;case keymap_1.InputType.Home:case keymap_1.InputType.CtrlA:this.state.moveCursorHome();break;case keymap_1.InputType.End:case keymap_1.InputType.CtrlE:this.state.moveCursorEnd();break;case keymap_1.InputType.Backspace:this.state.editBackspace(1);break;case keymap_1.InputType.Delete:case keymap_1.InputType.CtrlD:this.state.editDelete(1);break;case keymap_1.InputType.ArrowLeft:this.state.moveCursorBack(1);break;case keymap_1.InputType.ArrowRight:this.state.moveCursorForward(1);break;case keymap_1.InputType.ArrowUp:this.state.moveCursorUp(1);break;case keymap_1.InputType.ArrowDown:this.state.moveCursorDown(1);break;case keymap_1.InputType.UnsupportedControlChar:case keymap_1.InputType.UnsupportedEscape:break}}}Readline_1=readline.Readline=Readline;const ADDON_MARKER_NAME="xterm-search-bar__addon";class SearchBarAddon{options;terminal;searchAddon;searchBarElement;searchKey;constructor(e){this.options=e||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(e){this.terminal=e,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement){this.searchBarElement.style.visibility="visible",this.searchBarElement.querySelector("input").select();return}this.terminal.element.style.position="relative";const e=document.createElement("div");e.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,e.className=ADDON_MARKER_NAME;const r=this.terminal.element.parentElement;this.searchBarElement=e,["relative","absoulte","fixed"].includes(r.style.position)||(r.style.position="relative"),r.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",n=>{this.searchKey=n.target.value,this.searchAddon.findNext(this.searchKey,{incremental:n.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(e,r,n){const o=this.terminal.element.parentElement;o.addEventListener(r,a=>{let c=a.target;for(;c!==document.querySelector(e);){if(c===o){c=null;break}c=c.parentElement}c===document.querySelector(e)&&(n.call(this,a),a.stopPropagation())})}addNewStyle(e){let r=document.getElementById(ADDON_MARKER_NAME);r||(r=document.createElement("style"),r.type="text/css",r.id=ADDON_MARKER_NAME,document.getElementsByTagName("head")[0].appendChild(r)),r.appendChild(document.createTextNode(e))}}var fontfaceobserver_standalone={exports:{}};(function(s){(function(){function e(w,m){document.addEventListener?w.addEventListener("scroll",m,!1):w.attachEvent("scroll",m)}function r(w){document.body?w():document.addEventListener?document.addEventListener("DOMContentLoaded",function m(){document.removeEventListener("DOMContentLoaded",m),w()}):document.attachEvent("onreadystatechange",function m(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",m),w())})}function n(w){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(w)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function o(w,m){w.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+m+";"}function a(w){var m=w.g.offsetWidth,b=m+100;return w.j.style.width=b+"px",w.i.scrollLeft=b,w.h.scrollLeft=w.h.scrollWidth+100,w.l!==m?(w.l=m,!0):!1}function c(w,m){function b(){var y=x;a(y)&&y.g.parentNode!==null&&m(y.l)}var x=w;e(w.h,b),e(w.i,b),a(w)}function l(w,m,b){m=m||{},b=b||window,this.family=w,this.style=m.style||"normal",this.weight=m.weight||"normal",this.stretch=m.stretch||"normal",this.context=b}var h=null,d=null,f=null,g=null;function v(w){return d===null&&(S(w)&&/Apple/.test(window.navigator.vendor)?(w=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!w&&603>parseInt(w[1],10)):d=!1),d}function S(w){return g===null&&(g=!!w.document.fonts),g}function A(w,m){var b=w.style,x=w.weight;if(f===null){var y=document.createElement("div");try{y.style.font="condensed 100px sans-serif"}catch{}f=y.style.font!==""}return[b,x,f?w.stretch:"","100px",m].join(" ")}l.prototype.load=function(w,m){var b=this,x=w||"BESbswy",y=0,O=m||3e3,k=new Date().getTime();return new Promise(function(P,L){if(S(b.context)&&!v(b.context)){var M=new Promise(function(j,F){function U(){new Date().getTime()-k>=O?F(Error(""+O+"ms timeout exceeded")):b.context.document.fonts.load(A(b,'"'+b.family+'"'),x).then(function(V){1<=V.length?j():setTimeout(U,25)},F)}U()}),B=new Promise(function(j,F){y=setTimeout(function(){F(Error(""+O+"ms timeout exceeded"))},O)});Promise.race([B,M]).then(function(){clearTimeout(y),P(b)},L)}else r(function(){function j(){var de;(de=q!=-1&&G!=-1||q!=-1&&te!=-1||G!=-1&&te!=-1)&&((de=q!=G&&q!=te&&G!=te)||(h===null&&(de=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),h=!!de&&(536>parseInt(de[1],10)||parseInt(de[1],10)===536&&11>=parseInt(de[2],10))),de=h&&(q==Y&&G==Y&&te==Y||q==J&&G==J&&te==J||q==K&&G==K&&te==K)),de=!de),de&&(ne.parentNode!==null&&ne.parentNode.removeChild(ne),clearTimeout(y),P(b))}function F(){if(new Date().getTime()-k>=O)ne.parentNode!==null&&ne.parentNode.removeChild(ne),L(Error(""+O+"ms timeout exceeded"));else{var de=b.context.document.hidden;(de===!0||de===void 0)&&(q=U.g.offsetWidth,G=V.g.offsetWidth,te=Q.g.offsetWidth,j()),y=setTimeout(F,50)}}var U=new n(x),V=new n(x),Q=new n(x),q=-1,G=-1,te=-1,Y=-1,J=-1,K=-1,ne=document.createElement("div");ne.dir="ltr",o(U,A(b,"sans-serif")),o(V,A(b,"serif")),o(Q,A(b,"monospace")),ne.appendChild(U.g),ne.appendChild(V.g),ne.appendChild(Q.g),b.context.document.body.appendChild(ne),Y=U.g.offsetWidth,J=V.g.offsetWidth,K=Q.g.offsetWidth,F(),c(U,function(de){q=de,j()}),o(U,A(b,'"'+b.family+'",sans-serif')),c(V,function(de){G=de,j()}),o(V,A(b,'"'+b.family+'",serif')),c(Q,function(de){te=de,j()}),o(Q,A(b,'"'+b.family+'",monospace'))})})},s.exports=l})()})(fontfaceobserver_standalone);var fontfaceobserver_standaloneExports=fontfaceobserver_standalone.exports;const FontFaceObserver=getDefaultExportFromCjs(fontfaceobserver_standaloneExports);function loadWebFont(s){const e=s.options.fontFamily,r=new FontFaceObserver(e).load(null,5e3),n=new FontFaceObserver(e,{weight:"bold"}).load(null,5e3);return Promise.all([r,n]).then(()=>{},()=>{s.options.fontFamily="Courier"})}var ansiColors={exports:{}},symbols={exports:{}},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,function(s){var e={};const r=typeof process<"u"&&e.TERM_PROGRAM==="Hyper",n=typeof process<"u"&&process.platform==="win32",o=typeof process<"u"&&process.platform==="linux",a={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",question:"?",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},c=Object.assign({},a,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),l=Object.assign({},a,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",questionFull:"？",questionSmall:"﹖",pointer:o?"▸":"❯",pointerSmall:o?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});s.exports=n&&!r?c:l,Reflect.defineProperty(s.exports,"common",{enumerable:!1,value:a}),Reflect.defineProperty(s.exports,"windows",{enumerable:!1,value:c}),Reflect.defineProperty(s.exports,"other",{enumerable:!1,value:l})}(symbols)),symbols.exports}var define_process_env_default$1={};const isObject=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),ANSI_REGEX=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,hasColor=()=>typeof process<"u"?define_process_env_default$1.FORCE_COLOR!=="0":!1,create=()=>{const s={enabled:hasColor(),visible:!0,styles:{},keys:{}},e=a=>{let c=a.open=`\x1B[${a.codes[0]}m`,l=a.close=`\x1B[${a.codes[1]}m`,h=a.regex=new RegExp(`\\u001b\\[${a.codes[1]}m`,"g");return a.wrap=(d,f)=>{d.includes(l)&&(d=d.replace(h,l+c));let g=c+d+l;return f?g.replace(/\r*\n/g,`${l}$&${c}`):g},a},r=(a,c,l)=>typeof a=="function"?a(c):a.wrap(c,l),n=(a,c)=>{if(a===""||a==null)return"";if(s.enabled===!1)return a;if(s.visible===!1)return"";let l=""+a,h=l.includes(`
`),d=c.length;for(d>0&&c.includes("unstyle")&&(c=[...new Set(["unstyle",...c])].reverse());d-- >0;)l=r(s.styles[c[d]],l,h);return l},o=(a,c,l)=>{s.styles[a]=e({name:a,codes:c}),(s.keys[l]||(s.keys[l]=[])).push(a),Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,set(d){s.alias(a,d)},get(){let d=f=>n(f,d.stack);return Reflect.setPrototypeOf(d,s),d.stack=this.stack?this.stack.concat(a):[a],d}})};return o("reset",[0,0],"modifier"),o("bold",[1,22],"modifier"),o("dim",[2,22],"modifier"),o("italic",[3,23],"modifier"),o("underline",[4,24],"modifier"),o("inverse",[7,27],"modifier"),o("hidden",[8,28],"modifier"),o("strikethrough",[9,29],"modifier"),o("black",[30,39],"color"),o("red",[31,39],"color"),o("green",[32,39],"color"),o("yellow",[33,39],"color"),o("blue",[34,39],"color"),o("magenta",[35,39],"color"),o("cyan",[36,39],"color"),o("white",[37,39],"color"),o("gray",[90,39],"color"),o("grey",[90,39],"color"),o("bgBlack",[40,49],"bg"),o("bgRed",[41,49],"bg"),o("bgGreen",[42,49],"bg"),o("bgYellow",[43,49],"bg"),o("bgBlue",[44,49],"bg"),o("bgMagenta",[45,49],"bg"),o("bgCyan",[46,49],"bg"),o("bgWhite",[47,49],"bg"),o("blackBright",[90,39],"bright"),o("redBright",[91,39],"bright"),o("greenBright",[92,39],"bright"),o("yellowBright",[93,39],"bright"),o("blueBright",[94,39],"bright"),o("magentaBright",[95,39],"bright"),o("cyanBright",[96,39],"bright"),o("whiteBright",[97,39],"bright"),o("bgBlackBright",[100,49],"bgBright"),o("bgRedBright",[101,49],"bgBright"),o("bgGreenBright",[102,49],"bgBright"),o("bgYellowBright",[103,49],"bgBright"),o("bgBlueBright",[104,49],"bgBright"),o("bgMagentaBright",[105,49],"bgBright"),o("bgCyanBright",[106,49],"bgBright"),o("bgWhiteBright",[107,49],"bgBright"),s.ansiRegex=ANSI_REGEX,s.hasColor=s.hasAnsi=a=>(s.ansiRegex.lastIndex=0,typeof a=="string"&&a!==""&&s.ansiRegex.test(a)),s.alias=(a,c)=>{let l=typeof c=="string"?s[c]:c;if(typeof l!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");l.stack||(Reflect.defineProperty(l,"name",{value:a}),s.styles[a]=l,l.stack=[a]),Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,set(h){s.alias(a,h)},get(){let h=d=>n(d,h.stack);return Reflect.setPrototypeOf(h,s),h.stack=this.stack?this.stack.concat(l.stack):l.stack,h}})},s.theme=a=>{if(!isObject(a))throw new TypeError("Expected theme to be an object");for(let c of Object.keys(a))s.alias(c,a[c]);return s},s.alias("unstyle",a=>typeof a=="string"&&a!==""?(s.ansiRegex.lastIndex=0,a.replace(s.ansiRegex,"")):""),s.alias("noop",a=>a),s.none=s.clear=s.noop,s.stripColor=s.unstyle,s.symbols=requireSymbols(),s.define=o,s};ansiColors.exports=create();ansiColors.exports.create=create;var ansiColorsExports=ansiColors.exports;const ansi=getDefaultExportFromCjs(ansiColorsExports);ansi.enabled=!0;const format={...ansi,peerID:ansi.redBright,grey50:s=>`\x1B[0m\x1B[38;5;244m${s}`},CARRIAGE_RETURN="\r",CURSOR_UP="\x1B[1A",ERASE_IN_LINE="\x1B[2K";class Term extends xtermExports.Terminal{fitAddon;searchAddon;webglAddon;canvasAddon;searchBarAddon;webLinksAddon;readlineAddon;mpyc;isLivePanelVisible=!0;livePanel="";livePanelLines=0;currentLivePanelMessage="";terminalContainer;scrollAreaClone;scrollArea;viewportDiv;calculateWrappedLines(e){const r=e.split(`
`);let n=0;for(const o of r){const a=o.length;n+=Math.ceil(a/this.cols)||1}return n}updateLivePanel(e){const r=this.calculateWrappedLines(e);this.write("\x1B7"),this.write(`\x1B[${this.rows-this.livePanelLines+1};1H`);for(let n=0;n<this.livePanelLines;n++)this.write("\x1B[2K"),n<this.livePanelLines-1&&this.write("\x1B[1B\x1B[1G");this.livePanelLines=r,this.currentLivePanelMessage=e,this.write(`\x1B[${this.rows-r+1};1H`),this.write(e),this.write("\x1B8")}writeAboveLivePanel(e){const r=this.currentLivePanelMessage;this.clearLivePanel(),this.write("\x1B7");const n=this.calculateWrappedLines(e);this.write(`\x1B[${this.rows-this.livePanelLines-n+1};1H`),this.write(e),this.write("\x1B8"),this.updateLivePanel(r)}clearLivePanel(){this.write(`\x1B[${this.rows-this.livePanelLines+1};1H`);for(let e=0;e<this.livePanelLines;e++)this.write("\x1B[2K"),e<this.livePanelLines-1&&this.write("\x1B[1B\x1B[1G");this.livePanelLines=0}constructor(e,r){let n=$(e);super({screenReaderMode:!1,cols:80,allowProposedApi:!0,customGlyphs:!0,rightClickSelectsWord:!0,windowOptions:{},scrollback:1e3,cursorBlink:!1,convertEol:!0,fontFamily:"JetBrains Mono",fontSize:16,fontWeight:400,allowTransparency:!0,disableStdin:!0,altClickMovesCursor:!0,theme:{black:"#000000",red:"#c13900",green:"#a4a900",yellow:"#caaf00",blue:"#bd6d00",magenta:"#fc5e00",cyan:"#f79500",white:"#ffc88a",brightBlack:"#6a4f2a",brightRed:"#ff8c68",brightGreen:"#f6ff40",brightYellow:"#ffe36e",brightBlue:"#ffbe55",brightMagenta:"#fc874f",brightCyan:"#c69752",brightWhite:"#fafaff",background:"#3a2f29",foreground:"#ffcb83",selectionBackground:"#c14020",cursor:"#fc531d"}}),this.mpyc=r,this.terminalContainer=$("#terminal-container"),this.scrollAreaClone=$("div.xterm-scroll-area-clone"),this.onResize(a=>{this.updateTermSizeEnv()}),this.fitAddon=new xtermAddonFitExports.FitAddon,this.searchAddon=new xtermAddonSearchExports.SearchAddon,this.searchBarAddon=new SearchBarAddon({searchAddon:this.searchAddon}),this.webLinksAddon=new xtermAddonWebLinksExports.WebLinksAddon,this.readlineAddon=new Readline_1,this.readlineAddon.setCheckHandler(a=>!a.trimEnd().endsWith("&&")),this.loadAddon(this.fitAddon),this.loadAddon(this.searchAddon),this.loadAddon(this.searchBarAddon);try{this.webglAddon=new xtermAddonWebglExports.WebglAddon,this.loadAddon(this.webglAddon)}catch(a){console.warn("term: webgl 2.0 not supported, falling back to canvas renderer",a),this.canvasAddon=new xtermAddonCanvasExports.CanvasAddon,this.loadAddon(this.canvasAddon)}this.loadAddon(this.webLinksAddon),this.loadAddon(this.readlineAddon),this.loadAddon(new xtermAddonUnicode11Exports.Unicode11Addon),this.unicode.activeVersion="11",loadWebFont(this).then(()=>{this.open(n),this.viewportDiv=$("#terminal-container .xterm-viewport"),this.scrollArea=this.viewportDiv.querySelector("div.xterm-scroll-area"),$(`${e} textarea`).readOnly=!0,new ResizeObserver(()=>{this.scrollAreaClone.style.height=this.scrollArea.clientHeight+"px",this.scrollAreaClone.style.width=this.scrollArea.clientWidth+"px"}).observe(this.scrollArea);try{this.loadAddon(new xtermAddonLigaturesExports.LigaturesAddon)}catch{}this.fit(),scrollSync(this.terminalContainer,this.viewportDiv)}),this.mpyc.runtime.setReadlineFn(a=>this.readlineAddon.read(a)),this.attachCustomKeyEventHandler(a=>{if(a.type==="keydown"){if(a.ctrlKey&&a.key=="c"&&this.hasSelection())return navigator.clipboard.writeText(this.getSelection()),this.clearSelection(),!1;if(a.key=="h")return this.mpyc.runtime.toggleStats(),a.preventDefault(),!1;if(a.key=="r")return this.mpyc.runtime.resetStats(),a.preventDefault(),!1;if(a.ctrlKey&&a.key=="f")return this.searchBarAddon.show(),a.preventDefault(),!1}return!0}),document.addEventListener("keyup",a=>{a.key=="Escape"&&this.searchBarAddon.hidden()}),new ResizeObserver(()=>{this.fit()}).observe(document.querySelector(".split-panel-terminal"))}time(){return format.cyan.dim(`[${new Date().toLocaleTimeString("en-IE",{hour12:!1})}]`)}debug(e){this._log(format.italic.grey(e),format.gray("⚒"))}infoChar=isMobile?"ⓘ":"🛈";info(e){this._log(format.greenBright(e),format.greenBright(this.infoChar))}_log(e,r=" "){e=`${this.time()}  ${r}  ${e}`,this._write_liveln(e)}_write_liveln(e){this.isLivePanelVisible&&(this.writeln(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_write_live(e){this.isLivePanelVisible&&(this.write(this._control(this.livePanel)+e),this.livePanel!=""&&this.writeln(this.livePanel))}_height(e){return e.split(/\r\n|\r|\n/).length}_control(e=this.livePanel){return e==""?"":`${CARRIAGE_RETURN}${CURSOR_UP}${(CURSOR_UP+ERASE_IN_LINE).repeat(this._height(e)-1)}`}live(e){this.isLivePanelVisible&&(e=`
${e}`,this.writeln(this._control(this.livePanel)+e),this.livePanel=e)}success(e){this._log(e,format.green(format.symbols.check))}warn(e){this._log(format.italic(e),format.yellow(format.symbols.warning))}chatMe(e){e=`${format.green("Me")}: ${e}`,this._log(e)}chat(e,r){r=`${format.peerID(safe(e.substring(0,8)))}: ${r}`,this._log(r)}error(e){this._log(format.redBright(e),format.red(format.symbols.cross))}display(e){this._write_live(e)}displayError(e){e=`${this.time()}  ${format.red(format.symbols.cross)}  ${format.redBright(e)}`,this._write_live(e)}forceRefresh(){this._core.viewport?._innerRefresh()}forceRedraw(){this.clearTextureAtlas()}__fit=()=>{console.log("fitting terminal");const e=this.fitAddon.proposeDimensions();if(!e||!this||isNaN(e.cols)||isNaN(e.rows)||(e.rows=Math.max(e.rows,10),e.cols=Math.max(e.cols,this.cols),e.cols==this.cols&&e.rows==this.rows))return;const r=this._core;console.log("resizing terminal to ",e.cols,e.rows),r._renderService.clear(),this.resize(e.cols,e.rows),this.refresh(0,this.rows-1),this.updateTermSizeEnv()};fit=debounce(this.__fit);updateTermSizeEnv=debounce(()=>{console.log("updating terminal size env: ",this.cols,this.rows),this.mpyc.runtime.updateEnv({COLUMNS:this.cols.toString(),LINES:this.rows.toString()})})}const scrollSync=(s,e)=>{let r=!1,n=!1;s.addEventListener("scroll",function(o){r||(n=!0,e.scrollTop=s.scrollTop),r=!1}),e.addEventListener("scroll",function(o){n||(r=!0,s.scrollTop=e.scrollTop),n=!1})};var browser$1={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};utils$1.getSymbolTotalCodewords=function(e){return CODEWORDS_COUNT[e]};utils$1.getBCHDigit=function(s){let e=0;for(;s!==0;)e++,s>>>=1;return e};utils$1.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=e};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(e){return toSJISFunction(e)};var errorCorrectionLevel={};(function(s){s.L={bit:1},s.M={bit:0},s.Q={bit:3},s.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return s.L;case"m":case"medium":return s.M;case"q":case"quartile":return s.Q;case"h":case"high":return s.H;default:throw new Error("Unknown EC Level: "+r)}}s.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},s.from=function(n,o){if(s.isValid(n))return n;try{return e(n)}catch{return o}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(s){const e=Math.floor(s/8);return(this.buffer[e]>>>7-s%8&1)===1},put:function(s,e){for(let r=0;r<e;r++)this.putBit((s>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),s&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}BitMatrix$1.prototype.set=function(s,e,r,n){const o=s*this.size+e;this.data[o]=r,n&&(this.reservedBit[o]=!0)};BitMatrix$1.prototype.get=function(s,e){return this.data[s*this.size+e]};BitMatrix$1.prototype.xor=function(s,e,r){this.data[s*this.size+e]^=r};BitMatrix$1.prototype.isReserved=function(s,e){return this.reservedBit[s*this.size+e]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(s){const e=utils$1.getSymbolSize;s.getRowColCoords=function(n){if(n===1)return[];const o=Math.floor(n/7)+2,a=e(n),c=a===145?26:Math.ceil((a-13)/(2*o-2))*2,l=[a-7];for(let h=1;h<o-1;h++)l[h]=l[h-1]-c;return l.push(6),l.reverse()},s.getPositions=function(n){const o=[],a=s.getRowColCoords(n),c=a.length;for(let l=0;l<c;l++)for(let h=0;h<c;h++)l===0&&h===0||l===0&&h===c-1||l===c-1&&h===0||o.push([a[l],a[h]]);return o}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(e){const r=getSymbolSize(e);return[[0,0],[r-FINDER_PATTERN_SIZE,0],[0,r-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(s){s.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};s.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},s.from=function(o){return s.isValid(o)?parseInt(o,10):void 0},s.getPenaltyN1=function(o){const a=o.size;let c=0,l=0,h=0,d=null,f=null;for(let g=0;g<a;g++){l=h=0,d=f=null;for(let v=0;v<a;v++){let S=o.get(g,v);S===d?l++:(l>=5&&(c+=e.N1+(l-5)),d=S,l=1),S=o.get(v,g),S===f?h++:(h>=5&&(c+=e.N1+(h-5)),f=S,h=1)}l>=5&&(c+=e.N1+(l-5)),h>=5&&(c+=e.N1+(h-5))}return c},s.getPenaltyN2=function(o){const a=o.size;let c=0;for(let l=0;l<a-1;l++)for(let h=0;h<a-1;h++){const d=o.get(l,h)+o.get(l,h+1)+o.get(l+1,h)+o.get(l+1,h+1);(d===4||d===0)&&c++}return c*e.N2},s.getPenaltyN3=function(o){const a=o.size;let c=0,l=0,h=0;for(let d=0;d<a;d++){l=h=0;for(let f=0;f<a;f++)l=l<<1&2047|o.get(d,f),f>=10&&(l===1488||l===93)&&c++,h=h<<1&2047|o.get(f,d),f>=10&&(h===1488||h===93)&&c++}return c*e.N3},s.getPenaltyN4=function(o){let a=0;const c=o.data.length;for(let h=0;h<c;h++)a+=o.data[h];return Math.abs(Math.ceil(a*100/c/5)-10)*e.N4};function r(n,o,a){switch(n){case s.Patterns.PATTERN000:return(o+a)%2===0;case s.Patterns.PATTERN001:return o%2===0;case s.Patterns.PATTERN010:return a%3===0;case s.Patterns.PATTERN011:return(o+a)%3===0;case s.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case s.Patterns.PATTERN101:return o*a%2+o*a%3===0;case s.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case s.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}s.applyMask=function(o,a){const c=a.size;for(let l=0;l<c;l++)for(let h=0;h<c;h++)a.isReserved(h,l)||a.xor(h,l,r(o,h,l))},s.getBestMask=function(o,a){const c=Object.keys(s.Patterns).length;let l=0,h=1/0;for(let d=0;d<c;d++){a(d),s.applyMask(d,o);const f=s.getPenaltyN1(o)+s.getPenaltyN2(o)+s.getPenaltyN3(o)+s.getPenaltyN4(o);s.applyMask(d,o),f<h&&(h=f,l=d)}return l}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(e,r){switch(r){case ECLevel$1.L:return EC_BLOCKS_TABLE[(e-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(e-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(e-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(e-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(e,r){switch(r){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(e-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(e-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(e-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(e-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)EXP_TABLE[r]=e,LOG_TABLE[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)EXP_TABLE[r]=EXP_TABLE[r-255]})();galoisField.log=function(e){if(e<1)throw new Error("log("+e+")");return LOG_TABLE[e]};galoisField.exp=function(e){return EXP_TABLE[e]};galoisField.mul=function(e,r){return e===0||r===0?0:EXP_TABLE[LOG_TABLE[e]+LOG_TABLE[r]]};(function(s){const e=galoisField;s.mul=function(n,o){const a=new Uint8Array(n.length+o.length-1);for(let c=0;c<n.length;c++)for(let l=0;l<o.length;l++)a[c+l]^=e.mul(n[c],o[l]);return a},s.mod=function(n,o){let a=new Uint8Array(n);for(;a.length-o.length>=0;){const c=a[0];for(let h=0;h<o.length;h++)a[h]^=e.mul(o[h],c);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},s.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let a=0;a<n;a++)o=s.mul(o,new Uint8Array([1,e.exp(a)]));return o}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(e){this.degree=e,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Polynomial.mod(r,this.genPoly),o=this.degree-n.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(n,o),a}return n};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(e){return TEST_KANJI.test(e)};regex.testNumeric=function(e){return TEST_NUMERIC.test(e)};regex.testAlphanumeric=function(e){return TEST_ALPHANUMERIC.test(e)};(function(s){const e=versionCheck,r=regex;s.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},s.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},s.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},s.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},s.MIXED={bit:-1},s.getCharCountIndicator=function(a,c){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?a.ccBits[0]:c<27?a.ccBits[1]:a.ccBits[2]},s.getBestModeForData=function(a){return r.testNumeric(a)?s.NUMERIC:r.testAlphanumeric(a)?s.ALPHANUMERIC:r.testKanji(a)?s.KANJI:s.BYTE},s.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},s.isValid=function(a){return a&&a.bit&&a.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return s.NUMERIC;case"alphanumeric":return s.ALPHANUMERIC;case"kanji":return s.KANJI;case"byte":return s.BYTE;default:throw new Error("Unknown mode: "+o)}}s.from=function(a,c){if(s.isValid(a))return a;try{return n(a)}catch{return c}}})(mode);(function(s){const e=utils$1,r=errorCorrectionCode,n=errorCorrectionLevel,o=mode,a=versionCheck,c=7973,l=e.getBCHDigit(c);function h(v,S,A){for(let w=1;w<=40;w++)if(S<=s.getCapacity(w,A,v))return w}function d(v,S){return o.getCharCountIndicator(v,S)+4}function f(v,S){let A=0;return v.forEach(function(w){const m=d(w.mode,S);A+=m+w.getBitsLength()}),A}function g(v,S){for(let A=1;A<=40;A++)if(f(v,A)<=s.getCapacity(A,S,o.MIXED))return A}s.from=function(S,A){return a.isValid(S)?parseInt(S,10):A},s.getCapacity=function(S,A,w){if(!a.isValid(S))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=o.BYTE);const m=e.getSymbolTotalCodewords(S),b=r.getTotalCodewordsCount(S,A),x=(m-b)*8;if(w===o.MIXED)return x;const y=x-d(w,S);switch(w){case o.NUMERIC:return Math.floor(y/10*3);case o.ALPHANUMERIC:return Math.floor(y/11*2);case o.KANJI:return Math.floor(y/13);case o.BYTE:default:return Math.floor(y/8)}},s.getBestVersionForData=function(S,A){let w;const m=n.from(A,n.M);if(Array.isArray(S)){if(S.length>1)return g(S,m);if(S.length===0)return 1;w=S[0]}else w=S;return h(w.mode,w.getLength(),m)},s.getEncodedBits=function(S){if(!a.isValid(S)||S<7)throw new Error("Invalid QR Code version");let A=S<<12;for(;e.getBCHDigit(A)-l>=0;)A^=c<<e.getBCHDigit(A)-l;return S<<12|A}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(e,r){const n=e.bit<<3|r;let o=n<<10;for(;Utils$3.getBCHDigit(o)-G15_BCH>=0;)o^=G15<<Utils$3.getBCHDigit(o)-G15_BCH;return(n<<10|o)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(s){this.mode=Mode$4.NUMERIC,this.data=s.toString()}NumericData.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(e){let r,n,o;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),o=parseInt(n,10),e.put(o,10);const a=this.data.length-r;a>0&&(n=this.data.substr(r),o=parseInt(n,10),e.put(o,a*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(s){this.mode=Mode$3.ALPHANUMERIC,this.data=s}AlphanumericData.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=ALPHA_NUM_CHARS.indexOf(this.data[r])*45;n+=ALPHA_NUM_CHARS.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(ALPHA_NUM_CHARS.indexOf(this.data[r]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(e){for(var r=[],n=e.length,o=0;o<n;o++){var a=e.charCodeAt(o);if(a>=55296&&a<=56319&&n>o+1){var c=e.charCodeAt(o+1);c>=56320&&c<=57343&&(a=(a-55296)*1024+c-56320+65536,o+=1)}if(a<128){r.push(a);continue}if(a<2048){r.push(a>>6|192),r.push(a&63|128);continue}if(a<55296||a>=57344&&a<65536){r.push(a>>12|224),r.push(a>>6&63|128),r.push(a&63|128);continue}if(a>=65536&&a<=1114111){r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(s){this.mode=Mode$2.BYTE,typeof s=="string"&&(s=encodeUtf8(s)),this.data=new Uint8Array(s)}ByteData.getBitsLength=function(e){return e*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(s){for(let e=0,r=this.data.length;e<r;e++)s.put(this.data[e],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(s){this.mode=Mode$1.KANJI,this.data=s}KanjiData.getBitsLength=function(e){return e*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(s){let e;for(e=0;e<this.data.length;e++){let r=Utils$2.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),s.put(r,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(s){var e={single_source_shortest_paths:function(r,n,o){var a={},c={};c[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var h,d,f,g,v,S,A,w,m;!l.empty();){h=l.pop(),d=h.value,g=h.cost,v=r[d]||{};for(f in v)v.hasOwnProperty(f)&&(S=v[f],A=g+S,w=c[f],m=typeof c[f]>"u",(m||w>A)&&(c[f]=A,l.push(f,A),a[f]=d))}if(typeof o<"u"&&typeof c[o]>"u"){var b=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(b)}return a},extract_shortest_path_from_predecessor_list:function(r,n){for(var o=[],a=n;a;)o.push(a),r[a],a=r[a];return o.reverse(),o},find_path:function(r,n,o){var a=e.single_source_shortest_paths(r,n,o);return e.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,o={},a;r=r||{};for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o.queue=[],o.sorter=r.sorter||n.default_sorter,o},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var o={value:r,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};s.exports=e})(dijkstra);var dijkstraExports=dijkstra.exports;(function(s){const e=mode,r=numericData,n=alphanumericData,o=byteData,a=kanjiData,c=regex,l=utils$1,h=dijkstraExports;function d(b){return unescape(encodeURIComponent(b)).length}function f(b,x,y){const O=[];let k;for(;(k=b.exec(y))!==null;)O.push({data:k[0],index:k.index,mode:x,length:k[0].length});return O}function g(b){const x=f(c.NUMERIC,e.NUMERIC,b),y=f(c.ALPHANUMERIC,e.ALPHANUMERIC,b);let O,k;return l.isKanjiModeEnabled()?(O=f(c.BYTE,e.BYTE,b),k=f(c.KANJI,e.KANJI,b)):(O=f(c.BYTE_KANJI,e.BYTE,b),k=[]),x.concat(y,O,k).sort(function(L,M){return L.index-M.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function v(b,x){switch(x){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return a.getBitsLength(b);case e.BYTE:return o.getBitsLength(b)}}function S(b){return b.reduce(function(x,y){const O=x.length-1>=0?x[x.length-1]:null;return O&&O.mode===y.mode?(x[x.length-1].data+=y.data,x):(x.push(y),x)},[])}function A(b){const x=[];for(let y=0;y<b.length;y++){const O=b[y];switch(O.mode){case e.NUMERIC:x.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:x.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:x.push([O,{data:O.data,mode:e.BYTE,length:d(O.data)}]);break;case e.BYTE:x.push([{data:O.data,mode:e.BYTE,length:d(O.data)}])}}return x}function w(b,x){const y={},O={start:{}};let k=["start"];for(let P=0;P<b.length;P++){const L=b[P],M=[];for(let B=0;B<L.length;B++){const j=L[B],F=""+P+B;M.push(F),y[F]={node:j,lastCount:0},O[F]={};for(let U=0;U<k.length;U++){const V=k[U];y[V]&&y[V].node.mode===j.mode?(O[V][F]=v(y[V].lastCount+j.length,j.mode)-v(y[V].lastCount,j.mode),y[V].lastCount+=j.length):(y[V]&&(y[V].lastCount=j.length),O[V][F]=v(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,x))}}k=M}for(let P=0;P<k.length;P++)O[k[P]].end=0;return{map:O,table:y}}function m(b,x){let y;const O=e.getBestModeForData(b);if(y=e.from(x,O),y!==e.BYTE&&y.bit<O.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(y)+`.
 Suggested mode is: `+e.toString(O));switch(y===e.KANJI&&!l.isKanjiModeEnabled()&&(y=e.BYTE),y){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new a(b);case e.BYTE:return new o(b)}}s.fromArray=function(x){return x.reduce(function(y,O){return typeof O=="string"?y.push(m(O,null)):O.data&&y.push(m(O.data,O.mode)),y},[])},s.fromString=function(x,y){const O=g(x,l.isKanjiModeEnabled()),k=A(O),P=w(k,y),L=h.find_path(P.map,"start","end"),M=[];for(let B=1;B<L.length-1;B++)M.push(P.table[L[B]].node);return s.fromArray(S(M))},s.rawSplit=function(x){return s.fromArray(g(x,l.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(s,e){const r=s.size,n=FinderPattern.getPositions(e);for(let o=0;o<n.length;o++){const a=n[o][0],c=n[o][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||r<=a+l))for(let h=-1;h<=7;h++)c+h<=-1||r<=c+h||(l>=0&&l<=6&&(h===0||h===6)||h>=0&&h<=6&&(l===0||l===6)||l>=2&&l<=4&&h>=2&&h<=4?s.set(a+l,c+h,!0,!0):s.set(a+l,c+h,!1,!0))}}function setupTimingPattern(s){const e=s.size;for(let r=8;r<e-8;r++){const n=r%2===0;s.set(r,6,n,!0),s.set(6,r,n,!0)}}function setupAlignmentPattern(s,e){const r=AlignmentPattern.getPositions(e);for(let n=0;n<r.length;n++){const o=r[n][0],a=r[n][1];for(let c=-2;c<=2;c++)for(let l=-2;l<=2;l++)c===-2||c===2||l===-2||l===2||c===0&&l===0?s.set(o+c,a+l,!0,!0):s.set(o+c,a+l,!1,!0)}}function setupVersionInfo(s,e){const r=s.size,n=Version.getEncodedBits(e);let o,a,c;for(let l=0;l<18;l++)o=Math.floor(l/3),a=l%3+r-8-3,c=(n>>l&1)===1,s.set(o,a,c,!0),s.set(a,o,c,!0)}function setupFormatInfo(s,e,r){const n=s.size,o=FormatInfo.getEncodedBits(e,r);let a,c;for(a=0;a<15;a++)c=(o>>a&1)===1,a<6?s.set(a,8,c,!0):a<8?s.set(a+1,8,c,!0):s.set(n-15+a,8,c,!0),a<8?s.set(8,n-a-1,c,!0):a<9?s.set(8,15-a-1+1,c,!0):s.set(8,15-a-1,c,!0);s.set(n-8,8,1,!0)}function setupData(s,e){const r=s.size;let n=-1,o=r-1,a=7,c=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let h=0;h<2;h++)if(!s.isReserved(o,l-h)){let d=!1;c<e.length&&(d=(e[c]>>>a&1)===1),s.set(o,l-h,d),a--,a===-1&&(c++,a=7)}if(o+=n,o<0||r<=o){o-=n,n=-n;break}}}function createData(s,e,r){const n=new BitBuffer;r.forEach(function(h){n.put(h.mode.bit,4),n.put(h.getLength(),Mode.getCharCountIndicator(h.mode,s)),h.write(n)});const o=Utils$1.getSymbolTotalCodewords(s),a=ECCode.getTotalCodewordsCount(s,e),c=(o-a)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(c-n.getLengthInBits())/8;for(let h=0;h<l;h++)n.put(h%2?17:236,8);return createCodewords(n,s,e)}function createCodewords(s,e,r){const n=Utils$1.getSymbolTotalCodewords(e),o=ECCode.getTotalCodewordsCount(e,r),a=n-o,c=ECCode.getBlocksCount(e,r),l=n%c,h=c-l,d=Math.floor(n/c),f=Math.floor(a/c),g=f+1,v=d-f,S=new ReedSolomonEncoder(v);let A=0;const w=new Array(c),m=new Array(c);let b=0;const x=new Uint8Array(s.buffer);for(let L=0;L<c;L++){const M=L<h?f:g;w[L]=x.slice(A,A+M),m[L]=S.encode(w[L]),A+=M,b=Math.max(b,M)}const y=new Uint8Array(n);let O=0,k,P;for(k=0;k<b;k++)for(P=0;P<c;P++)k<w[P].length&&(y[O++]=w[P][k]);for(k=0;k<v;k++)for(P=0;P<c;P++)y[O++]=m[P][k];return y}function createSymbol(s,e,r,n){let o;if(Array.isArray(s))o=Segments.fromArray(s);else if(typeof s=="string"){let d=e;if(!d){const f=Segments.rawSplit(s);d=Version.getBestVersionForData(f,r)}o=Segments.fromString(s,d||40)}else throw new Error("Invalid data");const a=Version.getBestVersionForData(o,r);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const c=createData(e,r,o),l=Utils$1.getSymbolSize(e),h=new BitMatrix(l);return setupFinderPattern(h,e),setupTimingPattern(h),setupAlignmentPattern(h,e),setupFormatInfo(h,r,0),e>=7&&setupVersionInfo(h,e),setupData(h,c),isNaN(n)&&(n=MaskPattern.getBestMask(h,setupFormatInfo.bind(null,h,r))),MaskPattern.applyMask(n,h),setupFormatInfo(h,r,n),{modules:h,version:e,errorCorrectionLevel:r,maskPattern:n,segments:o}}qrcode.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=ECLevel.M,o,a;return typeof r<"u"&&(n=ECLevel.from(r.errorCorrectionLevel,ECLevel.M),o=Version.from(r.version),a=MaskPattern.from(r.maskPattern),r.toSJISFunc&&Utils$1.setToSJISFunction(r.toSJISFunc)),createSymbol(e,o,n,a)};var canvas={},utils={};(function(s){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}s.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:a,scale:a?4:c,margin:o,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},s.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},s.getImageWidth=function(n,o){const a=s.getScale(n,o);return Math.floor((n+o.margin*2)*a)},s.qrToImageData=function(n,o,a){const c=o.modules.size,l=o.modules.data,h=s.getScale(c,a),d=Math.floor((c+a.margin*2)*h),f=a.margin*h,g=[a.color.light,a.color.dark];for(let v=0;v<d;v++)for(let S=0;S<d;S++){let A=(v*d+S)*4,w=a.color.light;if(v>=f&&S>=f&&v<d-f&&S<d-f){const m=Math.floor((v-f)/h),b=Math.floor((S-f)/h);w=g[l[m*c+b]?1:0]}n[A++]=w.r,n[A++]=w.g,n[A++]=w.b,n[A]=w.a}}})(utils);(function(s){const e=utils;function r(o,a,c){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=c,a.width=c,a.style.height=c+"px",a.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}s.render=function(a,c,l){let h=l,d=c;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),c||(d=n()),h=e.getOptions(h);const f=e.getImageWidth(a.modules.size,h),g=d.getContext("2d"),v=g.createImageData(f,f);return e.qrToImageData(v.data,a,h),r(g,d,f),g.putImageData(v,0,0),d},s.renderToDataURL=function(a,c,l){let h=l;typeof h>"u"&&(!c||!c.getContext)&&(h=c,c=void 0),h||(h={});const d=s.render(a,c,h),f=h.type||"image/png",g=h.rendererOpts||{};return d.toDataURL(f,g.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(s,e){const r=s.a/255,n=e+'="'+s.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function svgCmd(s,e,r){let n=s+e;return typeof r<"u"&&(n+=" "+r),n}function qrToPath(s,e,r){let n="",o=0,a=!1,c=0;for(let l=0;l<s.length;l++){const h=Math.floor(l%e),d=Math.floor(l/e);!h&&!a&&(a=!0),s[l]?(c++,l>0&&h>0&&s[l-1]||(n+=a?svgCmd("M",h+r,.5+d+r):svgCmd("m",o,0),o=0,a=!1),h+1<e&&s[l+1]||(n+=svgCmd("h",c),c=0)):o++}return n}svgTag.render=function(e,r,n){const o=Utils.getOptions(r),a=e.modules.size,c=e.modules.data,l=a+o.margin*2,h=o.color.light.a?"<path "+getColorAttrib(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+getColorAttrib(o.color.dark,"stroke")+' d="'+qrToPath(c,a,o.margin)+'"/>',f='viewBox="0 0 '+l+" "+l+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+h+d+`</svg>
`;return typeof n=="function"&&n(null,v),v};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(s,e,r,n,o){const a=[].slice.call(arguments,1),c=a.length,l=typeof a[c-1]=="function";if(!l&&!canPromise())throw new Error("Callback required as last argument");if(l){if(c<2)throw new Error("Too few arguments provided");c===2?(o=r,r=e,e=n=void 0):c===3&&(e.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=r,r=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=e,e=n=void 0):c===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(h,d){try{const f=QRCode.create(r,n);h(s(f,e,n))}catch(f){d(f)}})}try{const h=QRCode.create(r,n);o(null,s(h,e,n))}catch(h){o(h)}}browser$1.create=QRCode.create;browser$1.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser$1.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser$1.toString=renderCanvas.bind(null,function(s,e,r){return SvgRenderer.render(s,r)});const QR_CANVAS_CLASS="qr-canvas",QR_URL_SPAN_CLASS="qr-url-span",QR_CANVAS_SELECTOR=`div.tooltip-inner>canvas.${QR_CANVAS_CLASS}`,QR_URL_SPAN_SELECTOR=`div.tooltip-inner>span.${QR_URL_SPAN_CLASS}`;function makeQRButton(s,e){let r=document.querySelector(s);new Tooltip(r,{html:!0,allowList:{...Tooltip.Default.allowList,span:["style"],canvas:[]},title:`
            <canvas class="${QR_CANVAS_CLASS}"></canvas>
            <br />
            <span class="${QR_URL_SPAN_CLASS}" style='font-size: 10px !important;'></span>
        `}),r.addEventListener("shown.bs.tooltip",()=>{let n=new URL("./",window.location.href),o=`${n}?peer=${e()}`,a=`${n}?peer=<br/>${e()}`;browser$1.toCanvas(document.querySelector(QR_CANVAS_SELECTOR),o,{errorCorrectionLevel:"H"}).then(c=>{document.querySelector(QR_URL_SPAN_SELECTOR).innerHTML=safe(a)}).catch(c=>{})}),r.addEventListener("click",()=>{document.querySelector(QR_CANVAS_SELECTOR).toBlob(n=>{navigator.clipboard.write([new ClipboardItem({[n.type]:n})])})})}let Text$1=class yi{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,r,n){let o=[];return this.decompose(0,e,o,2),n.length&&n.decompose(0,n.length,o,3),this.decompose(r,this.length,o,1),TextNode.from(o,this.length-(r-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,r=this.length){let n=[];return this.decompose(e,r,n,0),TextNode.from(n,r-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let r=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),a=new RawTextCursor(e);for(let c=r,l=r;;){if(o.next(c),a.next(c),c=0,o.lineBreak!=a.lineBreak||o.done!=a.done||o.value!=a.value)return!1;if(l+=o.value.length,o.done||l>=n)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,r=this.length){return new PartialTextCursor(this,e,r)}iterLines(e,r){let n;if(e==null)n=this.iter();else{r==null&&(r=this.lines+1);let o=this.line(e).from;n=this.iterRange(o,Math.max(o,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new LineCursor(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?yi.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}};class TextLeaf extends Text$1{constructor(e,r=textLength(e)){super(),this.text=e,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(e,r,n,o){for(let a=0;;a++){let c=this.text[a],l=o+c.length;if((r?n:l)>=e)return new Line(o,l,n,c);o=l+1,n++}}decompose(e,r,n,o){let a=e<=0&&r>=this.length?this:new TextLeaf(sliceText(this.text,e,r),Math.min(r,this.length)-Math.max(0,e));if(o&1){let c=n.pop(),l=appendText(a.text,c.text.slice(),0,a.length);if(l.length<=32)n.push(new TextLeaf(l,c.length+a.length));else{let h=l.length>>1;n.push(new TextLeaf(l.slice(0,h)),new TextLeaf(l.slice(h)))}}else n.push(a)}replace(e,r,n){if(!(n instanceof TextLeaf))return super.replace(e,r,n);let o=appendText(this.text,appendText(n.text,sliceText(this.text,0,e)),r),a=this.length+n.length-(r-e);return o.length<=32?new TextLeaf(o,a):TextNode.from(TextLeaf.split(o,[]),a)}sliceString(e,r=this.length,n=`
`){let o="";for(let a=0,c=0;a<=r&&c<this.text.length;c++){let l=this.text[c],h=a+l.length;a>e&&c&&(o+=n),e<h&&r>a&&(o+=l.slice(Math.max(0,e-a),r-a)),a=h+1}return o}flatten(e){for(let r of this.text)e.push(r)}scanIdentical(){return 0}static split(e,r){let n=[],o=-1;for(let a of e)n.push(a),o+=a.length+1,n.length==32&&(r.push(new TextLeaf(n,o)),n=[],o=-1);return o>-1&&r.push(new TextLeaf(n,o)),r}}class TextNode extends Text$1{constructor(e,r){super(),this.children=e,this.length=r,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,r,n,o){for(let a=0;;a++){let c=this.children[a],l=o+c.length,h=n+c.lines-1;if((r?h:l)>=e)return c.lineInner(e,r,n,o);o=l+1,n=h+1}}decompose(e,r,n,o){for(let a=0,c=0;c<=r&&a<this.children.length;a++){let l=this.children[a],h=c+l.length;if(e<=h&&r>=c){let d=o&((c<=e?1:0)|(h>=r?2:0));c>=e&&h<=r&&!d?n.push(l):l.decompose(e-c,r-c,n,d)}c=h+1}}replace(e,r,n){if(n.lines<this.lines)for(let o=0,a=0;o<this.children.length;o++){let c=this.children[o],l=a+c.length;if(e>=a&&r<=l){let h=c.replace(e-a,r-a,n),d=this.lines-c.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let f=this.children.slice();return f[o]=h,new TextNode(f,this.length-(r-e)+n.length)}return super.replace(a,l,h)}a=l+1}return super.replace(e,r,n)}sliceString(e,r=this.length,n=`
`){let o="";for(let a=0,c=0;a<this.children.length&&c<=r;a++){let l=this.children[a],h=c+l.length;c>e&&a&&(o+=n),e<h&&r>c&&(o+=l.sliceString(e-c,r-c,n)),c=h+1}return o}flatten(e){for(let r of this.children)r.flatten(e)}scanIdentical(e,r){if(!(e instanceof TextNode))return 0;let n=0,[o,a,c,l]=r>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=r,a+=r){if(o==c||a==l)return n;let h=this.children[o],d=e.children[a];if(h!=d)return n+h.scanIdentical(d,r);n+=h.length+1}}static from(e,r=e.reduce((n,o)=>n+o.length+1,-1)){let n=0;for(let S of e)n+=S.lines;if(n<32){let S=[];for(let A of e)A.flatten(S);return new TextLeaf(S,r)}let o=Math.max(32,n>>5),a=o<<1,c=o>>1,l=[],h=0,d=-1,f=[];function g(S){let A;if(S.lines>a&&S instanceof TextNode)for(let w of S.children)g(w);else S.lines>c&&(h>c||!h)?(v(),l.push(S)):S instanceof TextLeaf&&h&&(A=f[f.length-1])instanceof TextLeaf&&S.lines+A.lines<=32?(h+=S.lines,d+=S.length+1,f[f.length-1]=new TextLeaf(A.text.concat(S.text),A.length+1+S.length)):(h+S.lines>o&&v(),h+=S.lines,d+=S.length+1,f.push(S))}function v(){h!=0&&(l.push(f.length==1?f[0]:TextNode.from(f,d)),d=-1,h=f.length=0)}for(let S of e)g(S);return v(),l.length==1?l[0]:new TextNode(l,r)}}Text$1.empty=new TextLeaf([""],0);function textLength(s){let e=-1;for(let r of s)e+=r.length+1;return e}function appendText(s,e,r=0,n=1e9){for(let o=0,a=0,c=!0;a<s.length&&o<=n;a++){let l=s[a],h=o+l.length;h>=r&&(h>n&&(l=l.slice(0,n-o)),o<r&&(l=l.slice(r-o)),c?(e[e.length-1]+=l,c=!1):e.push(l)),o=h+1}return e}function sliceText(s,e,r){return appendText(s,[""],e,r)}class RawTextCursor{constructor(e,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[r>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,r){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],a=this.offsets[n],c=a>>1,l=o instanceof TextLeaf?o.text.length:o.children.length;if(c==(r>0?l:0)){if(n==0)return this.done=!0,this.value="",this;r>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(r>0?0:1)){if(this.offsets[n]+=r,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let h=o.text[c+(r<0?-1:0)];if(this.offsets[n]+=r,h.length>Math.max(0,e))return this.value=e==0?h:r>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=o.children[c+(r<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=r):(r<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(r>0?1:(h instanceof TextLeaf?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,r,n){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,r>n?-1:1),this.pos=r>n?e.length:0,this.from=Math.min(r,n),this.to=Math.max(r,n)}nextInner(e,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let n=r<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*r,this.value=o.length<=n?o:r<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:r,lineBreak:n,value:o}=this.inner.next(e);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text$1.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,r,n,o){this.from=e,this.to=r,this.number=n,this.text=o}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<extend.length;s++)extend[s]+=extend[s-1];function isExtendingChar(s){for(let e=1;e<extend.length;e+=2)if(extend[e]>s)return extend[e-1]<=s;return!1}function isRegionalIndicator(s){return s>=127462&&s<=127487}const ZWJ=8205;function findClusterBreak(s,e,r=!0,n=!0){return(r?nextClusterBreak:prevClusterBreak)(s,e,n)}function nextClusterBreak(s,e,r){if(e==s.length)return e;e&&surrogateLow(s.charCodeAt(e))&&surrogateHigh(s.charCodeAt(e-1))&&e--;let n=codePointAt(s,e);for(e+=codePointSize(n);e<s.length;){let o=codePointAt(s,e);if(n==ZWJ||o==ZWJ||r&&isExtendingChar(o))e+=codePointSize(o),n=o;else if(isRegionalIndicator(o)){let a=0,c=e-2;for(;c>=0&&isRegionalIndicator(codePointAt(s,c));)a++,c-=2;if(a%2==0)break;e+=2}else break}return e}function prevClusterBreak(s,e,r){for(;e>0;){let n=nextClusterBreak(s,e-2,r);if(n<e)return n;e--}return 0}function surrogateLow(s){return s>=56320&&s<57344}function surrogateHigh(s){return s>=55296&&s<56320}function codePointAt(s,e){let r=s.charCodeAt(e);if(!surrogateHigh(r)||e+1==s.length)return r;let n=s.charCodeAt(e+1);return surrogateLow(n)?(r-55296<<10)+(n-56320)+65536:r}function fromCodePoint(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function codePointSize(s){return s<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let r=0;r<this.sections.length;r+=2)e+=this.sections[r];return e}get newLength(){let e=0;for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r+1];e+=n<0?this.sections[r]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let r=0,n=0,o=0;r<this.sections.length;){let a=this.sections[r++],c=this.sections[r++];c<0?(e(n,o,a),o+=a):o+=c,n+=a}}iterChangedRanges(e,r=!1){iterChanges(this,e,r)}get invertedDesc(){let e=[];for(let r=0;r<this.sections.length;){let n=this.sections[r++],o=this.sections[r++];o<0?e.push(n,o):e.push(o,n)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,r=!1){return e.empty?this:mapSet(this,e,r)}mapPos(e,r=-1,n=MapMode.Simple){let o=0,a=0;for(let c=0;c<this.sections.length;){let l=this.sections[c++],h=this.sections[c++],d=o+l;if(h<0){if(d>e)return a+(e-o);a+=l}else{if(n!=MapMode.Simple&&d>=e&&(n==MapMode.TrackDel&&o<e&&d>e||n==MapMode.TrackBefore&&o<e||n==MapMode.TrackAfter&&d>e))return null;if(d>e||d==e&&r<0&&!l)return e==o||r<0?a:a+h;a+=h}o=d}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return a}touchesRange(e,r=e){for(let n=0,o=0;n<this.sections.length&&o<=r;){let a=this.sections[n++],c=this.sections[n++],l=o+a;if(c>=0&&o<=r&&l>=e)return o<e&&l>r?"cover":!0;o=l}return!1}toString(){let e="";for(let r=0;r<this.sections.length;){let n=this.sections[r++],o=this.sections[r++];e+=(e?" ":"")+n+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,r){super(e),this.inserted=r}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(r,n,o,a,c)=>e=e.replace(o,o+(n-r),c),!1),e}mapDesc(e,r=!1){return mapSet(this,e,r,!0)}invert(e){let r=this.sections.slice(),n=[];for(let o=0,a=0;o<r.length;o+=2){let c=r[o],l=r[o+1];if(l>=0){r[o]=l,r[o+1]=c;let h=o>>1;for(;n.length<h;)n.push(Text$1.empty);n.push(c?e.slice(a,a+c):Text$1.empty)}a+=c}return new ChangeSet(r,n)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,r=!1){return e.empty?this:mapSet(this,e,r,!0)}iterChanges(e,r=!1){iterChanges(this,e,r)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let r=[],n=[],o=[],a=new SectionIter(this);e:for(let c=0,l=0;;){let h=c==e.length?1e9:e[c++];for(;l<h||l==h&&a.len==0;){if(a.done)break e;let f=Math.min(a.len,h-l);addSection(o,f,-1);let g=a.ins==-1?-1:a.off==0?a.ins:0;addSection(r,f,g),g>0&&addInsert(n,r,a.text),a.forward(f),l+=f}let d=e[c++];for(;l<d;){if(a.done)break e;let f=Math.min(a.len,d-l);addSection(r,f,-1),addSection(o,f,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(f),l+=f}}return{changes:new ChangeSet(r,n),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let r=0;r<this.sections.length;r+=2){let n=this.sections[r],o=this.sections[r+1];o<0?e.push(n):o==0?e.push([n]):e.push([n].concat(this.inserted[r>>1].toJSON()))}return e}static of(e,r,n){let o=[],a=[],c=0,l=null;function h(f=!1){if(!f&&!o.length)return;c<r&&addSection(o,r-c,-1);let g=new ChangeSet(o,a);l=l?l.compose(g.map(l)):g,o=[],a=[],c=0}function d(f){if(Array.isArray(f))for(let g of f)d(g);else if(f instanceof ChangeSet){if(f.length!=r)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${r})`);h(),l=l?l.compose(f.map(l)):f}else{let{from:g,to:v=g,insert:S}=f;if(g>v||g<0||v>r)throw new RangeError(`Invalid change range ${g} to ${v} (in doc of length ${r})`);let A=S?typeof S=="string"?Text$1.of(S.split(n||DefaultSplit)):S:Text$1.empty,w=A.length;if(g==v&&w==0)return;g<c&&h(),g>c&&addSection(o,g-c,-1),addSection(o,v-g,w),addInsert(a,o,A),c=v}}return d(e),h(!l),l}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],n=[];for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")r.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((c,l)=>l&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)r.push(a[0],0);else{for(;n.length<o;)n.push(Text$1.empty);n[o]=Text$1.of(a.slice(1)),r.push(a[0],n[o].length)}}}return new ChangeSet(r,n)}static createSet(e,r){return new ChangeSet(e,r)}}function addSection(s,e,r,n=!1){if(e==0&&r<=0)return;let o=s.length-2;o>=0&&r<=0&&r==s[o+1]?s[o]+=e:e==0&&s[o]==0?s[o+1]+=r:n?(s[o]+=e,s[o+1]+=r):s.push(e,r)}function addInsert(s,e,r){if(r.length==0)return;let n=e.length-2>>1;if(n<s.length)s[s.length-1]=s[s.length-1].append(r);else{for(;s.length<n;)s.push(Text$1.empty);s.push(r)}}function iterChanges(s,e,r){let n=s.inserted;for(let o=0,a=0,c=0;c<s.sections.length;){let l=s.sections[c++],h=s.sections[c++];if(h<0)o+=l,a+=l;else{let d=o,f=a,g=Text$1.empty;for(;d+=l,f+=h,h&&n&&(g=g.append(n[c-2>>1])),!(r||c==s.sections.length||s.sections[c+1]<0);)l=s.sections[c++],h=s.sections[c++];e(o,d,a,f,g),o=d,a=f}}}function mapSet(s,e,r,n=!1){let o=[],a=n?[]:null,c=new SectionIter(s),l=new SectionIter(e);for(let h=-1;;)if(c.ins==-1&&l.ins==-1){let d=Math.min(c.len,l.len);addSection(o,d,-1),c.forward(d),l.forward(d)}else if(l.ins>=0&&(c.ins<0||h==c.i||c.off==0&&(l.len<c.len||l.len==c.len&&!r))){let d=l.len;for(addSection(o,l.ins,-1);d;){let f=Math.min(c.len,d);c.ins>=0&&h<c.i&&c.len<=f&&(addSection(o,0,c.ins),a&&addInsert(a,o,c.text),h=c.i),c.forward(f),d-=f}l.next()}else if(c.ins>=0){let d=0,f=c.len;for(;f;)if(l.ins==-1){let g=Math.min(f,l.len);d+=g,f-=g,l.forward(g)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;addSection(o,d,h<c.i?c.ins:0),a&&h<c.i&&addInsert(a,o,c.text),h=c.i,c.forward(c.len-f)}else{if(c.done&&l.done)return a?ChangeSet.createSet(o,a):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}function composeSets(s,e,r=!1){let n=[],o=r?[]:null,a=new SectionIter(s),c=new SectionIter(e);for(let l=!1;;){if(a.done&&c.done)return o?ChangeSet.createSet(n,o):ChangeDesc.create(n);if(a.ins==0)addSection(n,a.len,0,l),a.next();else if(c.len==0&&!c.done)addSection(n,0,c.ins,l),o&&addInsert(o,n,c.text),c.next();else{if(a.done||c.done)throw new Error("Mismatched change set lengths");{let h=Math.min(a.len2,c.len),d=n.length;if(a.ins==-1){let f=c.ins==-1?-1:c.off?0:c.ins;addSection(n,h,f,l),o&&f&&addInsert(o,n,c.text)}else c.ins==-1?(addSection(n,a.off?0:a.len,h,l),o&&addInsert(o,n,a.textBit(h))):(addSection(n,a.off?0:a.len,c.off?0:c.ins,l),o&&!c.off&&addInsert(o,n,c.text));l=(a.ins>h||c.ins>=0&&c.len>h)&&(l||n.length>d),a.forward2(h),c.forward(h)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,r=this.i-2>>1;return r>=e.length?Text$1.empty:e[r]}textBit(e){let{inserted:r}=this.set,n=this.i-2>>1;return n>=r.length&&!e?Text$1.empty:r[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,r,n){this.from=e,this.to=r,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,r=-1){let n,o;return this.empty?n=o=e.mapPos(this.from,r):(n=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new SelectionRange(n,o,this.flags)}extend(e,r=e){if(e<=this.anchor&&r>=this.anchor)return EditorSelection.range(e,r);let n=Math.abs(e-this.anchor)>Math.abs(r-this.anchor)?e:r;return EditorSelection.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,r,n){return new SelectionRange(e,r,n)}}class EditorSelection{constructor(e,r){this.ranges=e,this.mainIndex=r}map(e,r=-1){return e.empty?this:EditorSelection.create(this.ranges.map(n=>n.map(e,r)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,r=!0){return EditorSelection.create([e].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(e,r=this.mainIndex){let n=this.ranges.slice();return n[r]=e,EditorSelection.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(r=>SelectionRange.fromJSON(r)),e.main)}static single(e,r=e){return new EditorSelection([EditorSelection.range(e,r)],0)}static create(e,r=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<e.length;o++){let a=e[o];if(a.empty?a.from<=n:a.from<n)return EditorSelection.normalized(e.slice(),r);n=a.to}return new EditorSelection(e,r)}static cursor(e,r=0,n,o){return SelectionRange.create(e,e,(r==0?0:r<0?8:16)|(n==null?7:Math.min(6,n))|(o??16777215)<<6)}static range(e,r,n,o){let a=(n??16777215)<<6|(o==null?7:Math.min(6,o));return r<e?SelectionRange.create(r,e,48|a):SelectionRange.create(e,r,(r>e?8:0)|a)}static normalized(e,r=0){let n=e[r];e.sort((o,a)=>o.from-a.from),r=e.indexOf(n);for(let o=1;o<e.length;o++){let a=e[o],c=e[o-1];if(a.empty?a.from<=c.to:a.from<c.to){let l=c.from,h=Math.max(a.to,c.to);o<=r&&r--,e.splice(--o,2,a.anchor>a.head?EditorSelection.range(h,l):EditorSelection.range(l,h))}}return new EditorSelection(e,r)}}function checkSelection(s,e){for(let r of s.ranges)if(r.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,r,n,o,a){this.combine=e,this.compareInput=r,this.compare=n,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Facet(e.combine||(r=>r),e.compareInput||((r,n)=>r===n),e.compare||(e.combine?(r,n)=>r===n:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,r)}computeN(e,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,r)}from(e,r){return r||(r=n=>n),this.compute([e],n=>r(n.field(e)))}}function sameArray$1(s,e){return s==e||s.length==e.length&&s.every((r,n)=>r===e[n])}class FacetProvider{constructor(e,r,n,o){this.dependencies=e,this.facet=r,this.type=n,this.value=o,this.id=nextID++}dynamicSlot(e){var r;let n=this.value,o=this.facet.compareInput,a=this.id,c=e[a]>>1,l=this.type==2,h=!1,d=!1,f=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?d=!0:((r=e[g.id])!==null&&r!==void 0?r:1)&1||f.push(e[g.id]);return{create(g){return g.values[c]=n(g),1},update(g,v){if(h&&v.docChanged||d&&(v.docChanged||v.selection)||ensureAll(g,f)){let S=n(g);if(l?!compareArray(S,g.values[c],o):!o(S,g.values[c]))return g.values[c]=S,1}return 0},reconfigure:(g,v)=>{let S,A=v.config.address[a];if(A!=null){let w=getAddr(v,A);if(this.dependencies.every(m=>m instanceof Facet?v.facet(m)===g.facet(m):m instanceof StateField?v.field(m,!1)==g.field(m,!1):!0)||(l?compareArray(S=n(g),w,o):o(S=n(g),w)))return g.values[c]=w,0}else S=n(g);return g.values[c]=S,1}}}}function compareArray(s,e,r){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!r(s[n],e[n]))return!1;return!0}function ensureAll(s,e){let r=!1;for(let n of e)ensureAddr(s,n)&1&&(r=!0);return r}function dynamicFacetSlot(s,e,r){let n=r.map(h=>s[h.id]),o=r.map(h=>h.type),a=n.filter(h=>!(h&1)),c=s[e.id]>>1;function l(h){let d=[];for(let f=0;f<n.length;f++){let g=getAddr(h,n[f]);if(o[f]==2)for(let v of g)d.push(v);else d.push(g)}return e.combine(d)}return{create(h){for(let d of n)ensureAddr(h,d);return h.values[c]=l(h),1},update(h,d){if(!ensureAll(h,a))return 0;let f=l(h);return e.compare(f,h.values[c])?0:(h.values[c]=f,1)},reconfigure(h,d){let f=ensureAll(h,n),g=d.config.facets[e.id],v=d.facet(e);if(g&&!f&&sameArray$1(r,g))return h.values[c]=v,0;let S=l(h);return e.compare(S,v)?(h.values[c]=v,0):(h.values[c]=S,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,r,n,o,a){this.id=e,this.createF=r,this.updateF=n,this.compareF=o,this.spec=a,this.provides=void 0}static define(e){let r=new StateField(nextID++,e.create,e.update,e.compare||((n,o)=>n===o),e);return e.provide&&(r.provides=e.provide(r)),r}create(e){let r=e.facet(initField).find(n=>n.field==this);return(r?.create||this.createF)(e)}slot(e){let r=e[this.id]>>1;return{create:n=>(n.values[r]=this.create(n),1),update:(n,o)=>{let a=n.values[r],c=this.updateF(a,o);return this.compareF(a,c)?0:(n.values[r]=c,1)},reconfigure:(n,o)=>o.config.address[this.id]!=null?(n.values[r]=o.field(this),0):(n.values[r]=this.create(n),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(s){return e=>new PrecExtension(e,s)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,r){this.inner=e,this.prec=r}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,r){this.compartment=e,this.inner=r}}class Configuration{constructor(e,r,n,o,a,c){for(this.base=e,this.compartments=r,this.dynamicSlots=n,this.address=o,this.staticValues=a,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let r=this.address[e.id];return r==null?e.default:this.staticValues[r>>1]}static resolve(e,r,n){let o=[],a=Object.create(null),c=new Map;for(let v of flatten(e,r,c))v instanceof StateField?o.push(v):(a[v.facet.id]||(a[v.facet.id]=[])).push(v);let l=Object.create(null),h=[],d=[];for(let v of o)l[v.id]=d.length<<1,d.push(S=>v.slot(S));let f=n?.config.facets;for(let v in a){let S=a[v],A=S[0].facet,w=f&&f[v]||[];if(S.every(m=>m.type==0))if(l[A.id]=h.length<<1|1,sameArray$1(w,S))h.push(n.facet(A));else{let m=A.combine(S.map(b=>b.value));h.push(n&&A.compare(m,n.facet(A))?n.facet(A):m)}else{for(let m of S)m.type==0?(l[m.id]=h.length<<1|1,h.push(m.value)):(l[m.id]=d.length<<1,d.push(b=>m.dynamicSlot(b)));l[A.id]=d.length<<1,d.push(m=>dynamicFacetSlot(m,A,S))}}let g=d.map(v=>v(l));return new Configuration(e,c,g,l,h,a)}}function flatten(s,e,r){let n=[[],[],[],[],[]],o=new Map;function a(c,l){let h=o.get(c);if(h!=null){if(h<=l)return;let d=n[h].indexOf(c);d>-1&&n[h].splice(d,1),c instanceof CompartmentInstance&&r.delete(c.compartment)}if(o.set(c,l),Array.isArray(c))for(let d of c)a(d,l);else if(c instanceof CompartmentInstance){if(r.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(c.compartment)||c.inner;r.set(c.compartment,d),a(d,l)}else if(c instanceof PrecExtension)a(c.inner,c.prec);else if(c instanceof StateField)n[l].push(c),c.provides&&a(c.provides,l);else if(c instanceof FacetProvider)n[l].push(c),c.facet.extensions&&a(c.facet.extensions,Prec_.default);else{let d=c.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(d,l)}}return a(s,Prec_.default),n.reduce((c,l)=>c.concat(l))}function ensureAddr(s,e){if(e&1)return 2;let r=e>>1,n=s.status[r];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[r]=4;let o=s.computeSlot(s,s.config.dynamicSlots[r]);return s.status[r]=2|o}function getAddr(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:s=>s.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:s=>s.length?s[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:s=>s.length?s[0]:!1});class Annotation{constructor(e,r){this.type=e,this.value=r}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,r){this.type=e,this.value=r}map(e){let r=this.type.map(this.value,e);return r===void 0?void 0:r==this.value?this:new StateEffect(this.type,r)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(r=>r))}static mapEffects(e,r){if(!e.length)return e;let n=[];for(let o of e){let a=o.map(r);a&&n.push(a)}return n}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,r,n,o,a,c){this.startState=e,this.changes=r,this.selection=n,this.effects=o,this.annotations=a,this.scrollIntoView=c,this._doc=null,this._state=null,n&&checkSelection(n,r.newLength),a.some(l=>l.type==Transaction.time)||(this.annotations=a.concat(Transaction.time.of(Date.now())))}static create(e,r,n,o,a,c){return new Transaction(e,r,n,o,a,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let r of this.annotations)if(r.type==e)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let r=this.annotation(Transaction.userEvent);return!!(r&&(r==e||r.length>e.length&&r.slice(0,e.length)==e&&r[e.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(s,e){let r=[];for(let n=0,o=0;;){let a,c;if(n<s.length&&(o==e.length||e[o]>=s[n]))a=s[n++],c=s[n++];else if(o<e.length)a=e[o++],c=e[o++];else return r;!r.length||r[r.length-1]<a?r.push(a,c):r[r.length-1]<c&&(r[r.length-1]=c)}}function mergeTransaction(s,e,r){var n;let o,a,c;return r?(o=e.changes,a=ChangeSet.empty(e.changes.length),c=s.changes.compose(e.changes)):(o=e.changes.map(s.changes),a=s.changes.mapDesc(e.changes,!0),c=s.changes.compose(o)),{changes:c,selection:e.selection?e.selection.map(a):(n=s.selection)===null||n===void 0?void 0:n.map(o),effects:StateEffect.mapEffects(s.effects,o).concat(StateEffect.mapEffects(e.effects,a)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(s,e,r){let n=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],r,s.facet(lineSeparator)),selection:n&&(n instanceof EditorSelection?n:EditorSelection.single(n.anchor,n.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(s,e,r){let n=resolveTransactionInner(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(r=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(r=!1);let c=!!e[a].sequential;n=mergeTransaction(n,resolveTransactionInner(s,e[a],c?n.changes.newLength:s.doc.length),c)}let o=Transaction.create(s,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return extendTransaction(r?filterTransaction(o):o)}function filterTransaction(s){let e=s.startState,r=!0;for(let o of e.facet(changeFilter)){let a=o(s);if(a===!1){r=!1;break}Array.isArray(a)&&(r=r===!0?a:joinRanges(r,a))}if(r!==!0){let o,a;if(r===!1)a=s.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let c=s.changes.filter(r);o=c.changes,a=c.filtered.mapDesc(c.changes).invertedDesc}s=Transaction.create(e,o,s.selection&&s.selection.map(a),StateEffect.mapEffects(s.effects,a),s.annotations,s.scrollIntoView)}let n=e.facet(transactionFilter);for(let o=n.length-1;o>=0;o--){let a=n[o](s);a instanceof Transaction?s=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Transaction?s=a[0]:s=resolveTransaction(e,asArray$1(a),!1)}return s}function extendTransaction(s){let e=s.startState,r=e.facet(transactionExtender),n=s;for(let o=r.length-1;o>=0;o--){let a=r[o](s);a&&Object.keys(a).length&&(n=mergeTransaction(n,resolveTransactionInner(e,a,s.changes.newLength),!0))}return n==s?s:Transaction.create(e,s.changes,s.selection,n.effects,n.annotations,n.scrollIntoView)}const none$2=[];function asArray$1(s){return s==null?none$2:Array.isArray(s)?s:[s]}var CharCategory=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(s){if(wordChar)return wordChar.test(s);for(let e=0;e<s.length;e++){let r=s[e];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(s){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let r=0;r<s.length;r++)if(e.indexOf(s[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,r,n,o,a,c){this.config=e,this.doc=r,this.selection=n,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=a,c&&(c._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ensureAddr(this,l<<1);this.computeSlot=null}field(e,r=!0){let n=this.config.address[e.id];if(n==null){if(r)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,n),getAddr(this,n)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let r=this.config,{base:n,compartments:o}=r;for(let l of e.effects)l.is(Compartment.reconfigure)?(r&&(o=new Map,r.compartments.forEach((h,d)=>o.set(d,h)),r=null),o.set(l.value.compartment,l.value.extension)):l.is(StateEffect.reconfigure)?(r=null,n=l.value):l.is(StateEffect.appendConfig)&&(r=null,n=asArray$1(n).concat(l.value));let a;r?a=e.startState.values.slice():(r=Configuration.resolve(n,o,this),a=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let c=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(r,e.newDoc,c,a,(l,h)=>h.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:e},range:EditorSelection.cursor(r.from+e.length)}))}changeByRange(e){let r=this.selection,n=e(r.ranges[0]),o=this.changes(n.changes),a=[n.range],c=asArray$1(n.effects);for(let l=1;l<r.ranges.length;l++){let h=e(r.ranges[l]),d=this.changes(h.changes),f=d.map(o);for(let v=0;v<l;v++)a[v]=a[v].map(f);let g=o.mapDesc(d,!0);a.push(h.range.map(g)),o=o.compose(f),c=StateEffect.mapEffects(c,f).concat(StateEffect.mapEffects(asArray$1(h.effects),g))}return{changes:o,selection:EditorSelection.create(a,r.mainIndex),effects:c}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text$1.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,r=this.doc.length){return this.doc.sliceString(e,r,this.lineBreak)}facet(e){let r=this.config.address[e.id];return r==null?e.default:(ensureAddr(this,r),getAddr(this,r))}toJSON(e){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let o=e[n];o instanceof StateField&&this.config.address[o.id]!=null&&(r[n]=o.spec.toJSON(this.field(e[n]),this))}return r}static fromJSON(e,r={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let c=n[a],l=e[a];o.push(c.init(h=>c.spec.fromJSON(l,h)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:r.extensions?o.concat([r.extensions]):o})}static create(e={}){let r=Configuration.resolve(e.extensions||[],new Map),n=e.doc instanceof Text$1?e.doc:Text$1.of((e.doc||"").split(r.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,n.length),r.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(r,n,o,r.dynamicSlots.map(()=>null),(a,c)=>c.create(a),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...r){for(let n of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return r.length&&(e=e.replace(/\$(\$|\d*)/g,(n,o)=>{if(o=="$")return"$";let a=+(o||1);return!a||a>r.length?n:r[a-1]})),e}languageDataAt(e,r,n=-1){let o=[];for(let a of this.facet(languageData))for(let c of a(this,r,n))Object.prototype.hasOwnProperty.call(c,e)&&o.push(c[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:r,from:n,length:o}=this.doc.lineAt(e),a=this.charCategorizer(e),c=e-n,l=e-n;for(;c>0;){let h=findClusterBreak(r,c,!1);if(a(r.slice(h,c))!=CharCategory.Word)break;c=h}for(;l<o;){let h=findClusterBreak(r,l);if(a(r.slice(l,h))!=CharCategory.Word)break;l=h}return c==l?null:EditorSelection.range(c+n,l+n)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:s=>s.length?s[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(s,e){let r=Object.keys(s),n=Object.keys(e);return r.length==n.length&&r.every(o=>s[o]==e[o])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(s,e,r={}){let n={};for(let o of s)for(let a of Object.keys(o)){let c=o[a],l=n[a];if(l===void 0)n[a]=c;else if(!(l===c||c===void 0))if(Object.hasOwnProperty.call(r,a))n[a]=r[a](l,c);else throw new Error("Config merge conflict for field "+a)}for(let o in e)n[o]===void 0&&(n[o]=e[o]);return n}class RangeValue{eq(e){return this==e}range(e,r=e){return Range$1.create(e,r,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class bi{constructor(e,r,n){this.from=e,this.to=r,this.value=n}static create(e,r,n){return new bi(e,r,n)}};function cmpRange(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Chunk{constructor(e,r,n,o){this.from=e,this.to=r,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,r,n,o=0){let a=n?this.to:this.from;for(let c=o,l=a.length;;){if(c==l)return c;let h=c+l>>1,d=a[h]-e||(n?this.value[h].endSide:this.value[h].startSide)-r;if(h==c)return d>=0?c:l;d>=0?l=h:c=h+1}}between(e,r,n,o){for(let a=this.findIndex(r,-1e9,!0),c=this.findIndex(n,1e9,!1,a);a<c;a++)if(o(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,r){let n=[],o=[],a=[],c=-1,l=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],f=this.from[h]+e,g=this.to[h]+e,v,S;if(f==g){let A=r.mapPos(f,d.startSide,d.mapMode);if(A==null||(v=S=A,d.startSide!=d.endSide&&(S=r.mapPos(f,d.endSide),S<v)))continue}else if(v=r.mapPos(f,d.startSide),S=r.mapPos(g,d.endSide),v>S||v==S&&d.startSide>0&&d.endSide<=0)continue;(S-v||d.endSide-d.startSide)<0||(c<0&&(c=v),d.point&&(l=Math.max(l,S-v)),n.push(d),o.push(v-c),a.push(S-c))}return{mapped:n.length?new Chunk(o,a,n,l):null,pos:c}}}class RangeSet{constructor(e,r,n,o){this.chunkPos=e,this.chunk=r,this.nextLayer=n,this.maxPoint=o}static create(e,r,n,o){return new RangeSet(e,r,n,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let r of this.chunk)e+=r.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:r=[],sort:n=!1,filterFrom:o=0,filterTo:a=this.length}=e,c=e.filter;if(r.length==0&&!c)return this;if(n&&(r=r.slice().sort(cmpRange)),this.isEmpty)return r.length?RangeSet.of(r):this;let l=new LayerCursor(this,null,-1).goto(0),h=0,d=[],f=new RangeSetBuilder;for(;l.value||h<r.length;)if(h<r.length&&(l.from-r[h].from||l.startSide-r[h].value.startSide)>=0){let g=r[h++];f.addInner(g.from,g.to,g.value)||d.push(g)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==r.length||this.chunkEnd(l.chunkIndex)<r[h].from)&&(!c||o>this.chunkEnd(l.chunkIndex)||a<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!c||o>l.to||a<l.from||c(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||d.push(Range$1.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!d.length?RangeSet.empty:this.nextLayer.update({add:d,filter:c,filterFrom:o,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let r=[],n=[],o=-1;for(let c=0;c<this.chunk.length;c++){let l=this.chunkPos[c],h=this.chunk[c],d=e.touchesRange(l,l+h.length);if(d===!1)o=Math.max(o,h.maxPoint),r.push(h),n.push(e.mapPos(l));else if(d===!0){let{mapped:f,pos:g}=h.map(l,e);f&&(o=Math.max(o,f.maxPoint),r.push(f),n.push(g))}}let a=this.nextLayer.map(e);return r.length==0?a:new RangeSet(n,r,a||RangeSet.empty,o)}between(e,r,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],c=this.chunk[o];if(r>=a&&e<=a+c.length&&c.between(a,e-a,r-a,n)===!1)return}this.nextLayer.between(e,r,n)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,r=0){return HeapCursor.from(e).goto(r)}static compare(e,r,n,o,a=-1){let c=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),l=r.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=a),h=findSharedChunks(c,l,n),d=new SpanCursor(c,h,a),f=new SpanCursor(l,h,a);n.iterGaps((g,v,S)=>compare(d,g,f,v,S,o)),n.empty&&n.length==0&&compare(d,0,f,0,0,o)}static eq(e,r,n=0,o){o==null&&(o=999999999);let a=e.filter(f=>!f.isEmpty&&r.indexOf(f)<0),c=r.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(a.length!=c.length)return!1;if(!a.length)return!0;let l=findSharedChunks(a,c),h=new SpanCursor(a,l,0).goto(n),d=new SpanCursor(c,l,0).goto(n);for(;;){if(h.to!=d.to||!sameValues(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>o)return!0;h.next(),d.next()}}static spans(e,r,n,o,a=-1){let c=new SpanCursor(e,null,a).goto(r),l=r,h=c.openStart;for(;;){let d=Math.min(c.to,n);if(c.point){let f=c.activeForPoint(c.to),g=c.pointFrom<r?f.length+1:Math.min(f.length,h);o.point(l,d,c.point,f,g,c.pointRank),h=Math.min(c.openEnd(d),f.length)}else d>l&&(o.span(l,d,c.active,h),h=c.openEnd(d));if(c.to>n)return h+(c.point&&c.to>n?1:0);l=c.to,c.next()}}static of(e,r=!1){let n=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:r?lazySort(e):e)n.add(o.from,o.to,o.value);return n.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(s){if(s.length>1)for(let e=s[0],r=1;r<s.length;r++){let n=s[r];if(cmpRange(e,n)>0)return s.slice().sort(cmpRange);e=n}return s}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,r,n){this.addInner(e,r,n)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,r,n)}addInner(e,r,n){let o=e-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(r-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=r,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,r-e)),!0)}addChunk(e,r){if((e-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(e);let n=r.value.length-1;return this.last=r.value[n],this.lastFrom=r.from[n]+e,this.lastTo=r.to[n]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let r=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,r}}function findSharedChunks(s,e,r){let n=new Map;for(let a of s)for(let c=0;c<a.chunk.length;c++)a.chunk[c].maxPoint<=0&&n.set(a.chunk[c],a.chunkPos[c]);let o=new Set;for(let a of e)for(let c=0;c<a.chunk.length;c++){let l=n.get(a.chunk[c]);l!=null&&(r?r.mapPos(l):l)==a.chunkPos[c]&&!r?.touchesRange(l,l+a.chunk[c].length)&&o.add(a.chunk[c])}return o}class LayerCursor{constructor(e,r,n,o=0){this.layer=e,this.skip=r,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,r,!1),this}gotoInner(e,r,n){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],r,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,r){(this.to-e||this.endSide-r)<0&&this.gotoInner(e,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],n=e+r.from[this.rangeIndex];if(this.from=n,this.to=e+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,r=null,n=-1){let o=[];for(let a=0;a<e.length;a++)for(let c=e[a];!c.isEmpty;c=c.nextLayer)c.maxPoint>=n&&o.push(new LayerCursor(c,r,n,a));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,r=-1e9){for(let n of this.heap)n.goto(e,r);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);return this.next(),this}forward(e,r){for(let n of this.heap)n.forward(e,r);for(let n=this.heap.length>>1;n>=0;n--)heapBubble(this.heap,n);(this.to-e||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(s,e){for(let r=s[e];;){let n=(e<<1)+1;if(n>=s.length)break;let o=s[n];if(n+1<s.length&&o.compare(s[n+1])>=0&&(o=s[n+1],n++),r.compare(o)<0)break;s[n]=r,s[e]=o,e=n}}class SpanCursor{constructor(e,r,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,r,n)}goto(e,r=-1e9){return this.cursor.goto(e,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=r,this.openStart=-1,this.next(),this}forward(e,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(e,r)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let r=0,{value:n,to:o,rank:a}=this.cursor;for(;r<this.activeRank.length&&this.activeRank[r]<=a;)r++;insert(this.active,r,n),insert(this.activeTo,r,o),insert(this.activeRank,r,a),e&&insert(e,r,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,r=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&remove(n,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let o=n.length-1;o>=0&&n[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let r=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&r.push(this.active[n]);return r.reverse()}openEnd(e){let r=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)r++;return r}}function compare(s,e,r,n,o,a){s.goto(e),r.goto(n);let c=n+o,l=n,h=n-e;for(;;){let d=s.to+h-r.to||s.endSide-r.endSide,f=d<0?s.to+h:r.to,g=Math.min(f,c);if(s.point||r.point?s.point&&r.point&&(s.point==r.point||s.point.eq(r.point))&&sameValues(s.activeForPoint(s.to),r.activeForPoint(r.to))||a.comparePoint(l,g,s.point,r.point):g>l&&!sameValues(s.active,r.active)&&a.compareRange(l,g,s.active,r.active),f>c)break;l=f,d<=0&&s.next(),d>=0&&r.next()}}function sameValues(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!=e[r]&&!s[r].eq(e[r]))return!1;return!0}function remove(s,e){for(let r=e,n=s.length-1;r<n;r++)s[r]=s[r+1];s.pop()}function insert(s,e,r){for(let n=s.length-1;n>=e;n--)s[n+1]=s[n];s[e]=r}function findMinIndex(s,e){let r=-1,n=1e9;for(let o=0;o<e.length;o++)(e[o]-n||s[o].endSide-s[r].endSide)<0&&(r=o,n=e[o]);return r}function countColumn(s,e,r=s.length){let n=0;for(let o=0;o<r;)s.charCodeAt(o)==9?(n+=e-n%e,o++):(n++,o=findClusterBreak(s,o));return n}function findColumn(s,e,r,n){for(let o=0,a=0;;){if(a>=e)return o;if(o==s.length)break;a+=s.charCodeAt(o)==9?r-a%r:1,o=findClusterBreak(s,o)}return n===!0?-1:s.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,r){this.rules=[];let{finish:n}=r||{};function o(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function a(c,l,h,d){let f=[],g=/^@(\w+)\b/.exec(c[0]),v=g&&g[1]=="keyframes";if(g&&l==null)return h.push(c[0]+";");for(let S in l){let A=l[S];if(/&/.test(S))a(S.split(/,\s*/).map(w=>c.map(m=>w.replace(/&/,m))).reduce((w,m)=>w.concat(m)),A,h);else if(A&&typeof A=="object"){if(!g)throw new RangeError("The value of a property ("+S+") should be a primitive value.");a(o(S),A,f,v)}else A!=null&&f.push(S.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+A+";")}(f.length||v)&&h.push((n&&!g&&!d?c.map(n):c).join(", ")+" {"+f.join(" ")+"}")}for(let c in e)a(o(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C+e.toString(36)}static mount(e,r,n){let o=e[SET],a=n&&n.nonce;o?a&&o.setNonce(a):o=new StyleSet(e,a),o.mount(Array.isArray(r)?r:[r])}}let adoptedSet=new Map;class StyleSet{constructor(e,r){let n=e.ownerDocument||e,o=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let a=adoptedSet.get(n);if(a)return e.adoptedStyleSheets=[a.sheet,...e.adoptedStyleSheets],e[SET]=a;this.sheet=new o.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],adoptedSet.set(n,this)}else{this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[SET]=this}mount(e){let r=this.sheet,n=0,o=0;for(let a=0;a<e.length;a++){let c=e[a],l=this.modules.indexOf(c);if(l<o&&l>-1&&(this.modules.splice(l,1),o--,l=-1),l==-1){if(this.modules.splice(o++,0,c),r)for(let h=0;h<c.rules.length;h++)r.insertRule(c.rules[h],n++)}else{for(;o<l;)n+=this.modules[o++].rules.length;n+=c.rules.length,o++}}if(!r){let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var e=mac&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||ie$1&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",r=!e&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function getSelection(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function contains(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hasSelection(s,e){if(!e.anchorNode)return!1;try{return contains(s,e.anchorNode)}catch{return!1}}function clientRectsFor(s){return s.nodeType==3?textRange(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function isEquivalentPosition(s,e,r,n){return r?scanFor(s,e,r,n,-1)||scanFor(s,e,r,n,1):!1}function domIndex(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function scanFor(s,e,r,n,o){for(;;){if(s==r&&e==n)return!0;if(e==(o<0?0:maxOffset(s))){if(s.nodeName=="DIV")return!1;let a=s.parentNode;if(!a||a.nodeType!=1)return!1;e=domIndex(s)+(o<0?0:1),s=a}else if(s.nodeType==1){if(s=s.childNodes[e+(o<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=o<0?maxOffset(s):0}else return!1}}function maxOffset(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function flattenRect(s,e){let r=e?s.left:s.right;return{left:r,right:r,top:s.top,bottom:s.bottom}}function windowRect(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function scrollRectIntoView(s,e,r,n,o,a,c,l){let h=s.ownerDocument,d=h.defaultView||window;for(let f=s,g=!1;f&&!g;)if(f.nodeType==1){let v,S=f==h.body,A=1,w=1;if(S)v=windowRect(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(g=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let x=f.getBoundingClientRect();A=x.width/f.offsetWidth,w=x.height/f.offsetHeight,v={left:x.left,right:x.left+f.clientWidth*A,top:x.top,bottom:x.top+f.clientHeight*w}}let m=0,b=0;if(o=="nearest")e.top<v.top?(b=-(v.top-e.top+c),r>0&&e.bottom>v.bottom+b&&(b=e.bottom-v.bottom+b+c)):e.bottom>v.bottom&&(b=e.bottom-v.bottom+c,r<0&&e.top-b<v.top&&(b=-(v.top+b-e.top+c)));else{let x=e.bottom-e.top,y=v.bottom-v.top;b=(o=="center"&&x<=y?e.top+x/2-y/2:o=="start"||o=="center"&&r<0?e.top-c:e.bottom-y+c)-v.top}if(n=="nearest"?e.left<v.left?(m=-(v.left-e.left+a),r>0&&e.right>v.right+m&&(m=e.right-v.right+m+a)):e.right>v.right&&(m=e.right-v.right+a,r<0&&e.left<v.left+m&&(m=-(v.left+m-e.left+a))):m=(n=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:n=="start"==l?e.left-a:e.right-(v.right-v.left)+a)-v.left,m||b)if(S)d.scrollBy(m,b);else{let x=0,y=0;if(b){let O=f.scrollTop;f.scrollTop+=b/w,y=(f.scrollTop-O)*w}if(m){let O=f.scrollLeft;f.scrollLeft+=m/A,x=(f.scrollLeft-O)*A}e={left:e.left-x,top:e.top-y,right:e.right-x,bottom:e.bottom-y},x&&Math.abs(x-m)<1&&(n="nearest"),y&&Math.abs(y-b)<1&&(o="nearest")}if(S)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function scrollableParent(s){let e=s.ownerDocument;for(let r=s.parentNode;r&&r!=e.body;)if(r.nodeType==1){if(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth)return r;r=r.assignedSlot||r.parentNode}else if(r.nodeType==11)r=r.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:r,focusNode:n}=e;this.set(r,Math.min(e.anchorOffset,r?maxOffset(r):0),n,Math.min(e.focusOffset,n?maxOffset(n):0))}set(e,r,n,o){this.anchorNode=e,this.anchorOffset=r,this.focusNode=n,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let e=[];for(let r=s;r&&(e.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let r=0;r<e.length;){let n=e[r++],o=e[r++],a=e[r++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let scratchRange;function textRange(s,e,r=e){let n=scratchRange||(scratchRange=document.createRange());return n.setEnd(s,r),n.setStart(s,e),n}function dispatchKey(s,e,r){let n={key:e,code:e,keyCode:r,which:r,cancelable:!0},o=new KeyboardEvent("keydown",n);o.synthetic=!0,s.dispatchEvent(o);let a=new KeyboardEvent("keyup",n);return a.synthetic=!0,s.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function getRoot(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function clearAttributes(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function atElementStart(s,e){let r=e.focusNode,n=e.focusOffset;if(!r||e.anchorNode!=r||e.anchorOffset!=n)return!1;for(n=Math.min(n,maxOffset(r));;)if(n){if(r.nodeType!=1)return!1;let o=r.childNodes[n-1];o.contentEditable=="false"?n--:(r=o,n=maxOffset(r))}else{if(r==s)return!0;n=domIndex(r),r=r.parentNode}}function isScrolledToBottom(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}class DOMPos{constructor(e,r,n=!0){this.node=e,this.offset=r,this.precise=n}static before(e,r){return new DOMPos(e.parentNode,domIndex(e),r)}static after(e,r){return new DOMPos(e.parentNode,domIndex(e)+1,r)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let r=this.posAtStart;for(let n of this.children){if(n==e)return r;r+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,r){if(this.flags&2){let n=this.dom,o=null,a;for(let c of this.children){if(c.flags&7){if(!c.dom&&(a=o?o.nextSibling:n.firstChild)){let l=ContentView.get(a);(!l||!l.parent&&l.canReuseDOM(c))&&c.reuseDOM(a)}c.sync(e,r),c.flags&=-8}if(a=o?o.nextSibling:n.firstChild,r&&!r.written&&r.node==n&&a!=c.dom&&(r.written=!0),c.dom.parentNode==n)for(;a&&a!=c.dom;)a=rm$1(a);else n.insertBefore(c.dom,a);o=c.dom}for(a=o?o.nextSibling:n.firstChild,a&&r&&r.node==n&&(r.written=!0);a;)a=rm$1(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,r),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,r){let n;if(e==this.dom)n=this.dom.childNodes[r];else{let o=maxOffset(e)==0?0:r==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ContentView.get(n);)n=n.nextSibling;if(!n)return this.length;for(let o=0,a=0;;o++){let c=this.children[o];if(c.dom==n)return a;a+=c.length+c.breakAfter}}domBoundsAround(e,r,n=0){let o=-1,a=-1,c=-1,l=-1;for(let h=0,d=n,f=n;h<this.children.length;h++){let g=this.children[h],v=d+g.length;if(d<e&&v>r)return g.domBoundsAround(e,r,d);if(v>=e&&o==-1&&(o=h,a=d),d>r&&g.dom.parentNode==this.dom){c=h,l=f;break}f=v,d=v+g.breakAfter}return{from:a,to:l<0?n+this.length:l,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:c<this.children.length&&c>=0?this.children[c].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let r=this.parent;r;r=r.parent){if(e&&(r.flags|=2),r.flags&1)return;r.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let r=e.parent;if(!r)return e;e=r}}replaceChildren(e,r,n=noChildren){this.markDirty();for(let o=e;o<r;o++){let a=this.children[o];a.parent==this&&n.indexOf(a)<0&&a.destroy()}this.children.splice(e,r-e,...n);for(let o=0;o<n.length;o++)n[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,r=1){return this.childCursor().findPos(e,r)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,r,n,o,a,c){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ChildCursor{constructor(e,r,n){this.children=e,this.pos=r,this.i=n,this.off=0}findPos(e,r=1){for(;;){if(e>this.pos||e==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function replaceRange(s,e,r,n,o,a,c,l,h){let{children:d}=s,f=d.length?d[e]:null,g=a.length?a[a.length-1]:null,v=g?g.breakAfter:c;if(!(e==n&&f&&!c&&!v&&a.length<2&&f.merge(r,o,a.length?g:null,r==0,l,h))){if(n<d.length){let S=d[n];S&&(o<S.length||S.breakAfter&&g?.breakAfter)?(e==n&&(S=S.split(o),o=0),!v&&g&&S.merge(0,o,g,!0,0,h)?a[a.length-1]=S:((o||S.children.length&&!S.children[0].length)&&S.merge(0,o,null,!1,0,h),a.push(S))):S?.breakAfter&&(g?g.breakAfter=1:c=1),n++}for(f&&(f.breakAfter=c,r>0&&(!c&&a.length&&f.merge(r,f.length,a[0],!1,l,0)?f.breakAfter=a.shift().breakAfter:(r<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(r,f.length,null,!1,l,0),e++));e<n&&a.length;)if(d[n-1].become(a[a.length-1]))n--,a.pop(),h=a.length?0:l;else if(d[e].become(a[0]))e++,a.shift(),l=a.length?0:h;else break;!a.length&&e&&n<d.length&&!d[e-1].breakAfter&&d[n].merge(0,0,d[e-1],!1,l,h)&&e--,(e<n||a.length)&&s.replaceChildren(e,n,a)}}function mergeChildrenInto(s,e,r,n,o,a){let c=s.childCursor(),{i:l,off:h}=c.findPos(r,1),{i:d,off:f}=c.findPos(e,-1),g=e-r;for(let v of n)g+=v.length;s.length+=g,replaceRange(s,d,f,l,h,n,0,o,a)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,r,n){return this.flags&8||n&&(!(n instanceof TextView)||this.length-(r-e)+n.length>MaxJoinLen||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(r),this.markDirty(),!0)}split(e){let r=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(e,r){return e==this.dom?r:r?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,r,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,r){return textCoords(this.dom,e,r)}}class MarkView extends ContentView{constructor(e,r=[],n=0){super(),this.mark=e,this.children=r,this.length=n;for(let o of r)o.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)e.setAttribute(r,this.mark.attrs[r]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,r)}merge(e,r,n,o,a,c){return n&&(!(n instanceof MarkView&&n.mark.eq(this.mark))||e&&a<=0||r<this.length&&c<=0)?!1:(mergeChildrenInto(this,e,r,n?n.children:[],a-1,c-1),this.markDirty(),!0)}split(e){let r=[],n=0,o=-1,a=0;for(let l of this.children){let h=n+l.length;h>e&&r.push(n<e?l.split(e-n):l),o<0&&n>=e&&(o=a),n=h,a++}let c=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,r,c)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,r){return coordsInChildren(this,e,r)}}function textCoords(s,e,r){let n=s.nodeValue.length;e>n&&(e=n);let o=e,a=e,c=0;e==0&&r<0||e==n&&r>=0?browser.chrome||browser.gecko||(e?(o--,c=1):a<n&&(a++,c=-1)):r<0?o--:a<n&&a++;let l=textRange(s,o,a).getClientRects();if(!l.length)return null;let h=l[(c?c<0:r>=0)?0:l.length-1];return browser.safari&&!c&&h.width==0&&(h=Array.prototype.find.call(l,d=>d.width)||h),c?flattenRect(h,c<0):h||null}class WidgetView extends ContentView{static create(e,r,n){return new WidgetView(e,r,n)}constructor(e,r,n){super(),this.widget=e,this.length=r,this.side=n,this.prevWidget=null}split(e){let r=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,r}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,r,n,o,a,c){return n&&(!(n instanceof WidgetView)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&c<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text$1.empty;let e=this;for(;e.parent;)e=e.parent;let{view:r}=e,n=r&&r.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):Text$1.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,r){let n=this.widget.coordsAt(this.dom,e,r);if(n)return n;let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let c=this.side?this.side<0:e>0;for(let l=c?o.length-1:0;a=o[l],!(e>0?l==0:l==o.length-1||a.top<a.bottom);l+=c?-1:1);return flattenRect(a,!c)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text$1.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(s,e){let r=s.dom,{children:n}=s,o=0;for(let a=0;o<n.length;o++){let c=n[o],l=a+c.length;if(!(l==a&&c.getSide()<=0)){if(e>a&&e<l&&c.dom.parentNode==r)return c.domAtPos(e-a);if(e<=a)break;a=l}}for(let a=o;a>0;a--){let c=n[a-1];if(c.dom.parentNode==r)return c.domAtPos(c.length)}for(let a=o;a<n.length;a++){let c=n[a];if(c.dom.parentNode==r)return c.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(s,e,r){let n,{children:o}=s;r>0&&e instanceof MarkView&&o.length&&(n=o[o.length-1])instanceof MarkView&&n.mark.eq(e.mark)?joinInlineInto(n,e.children[0],r-1):(o.push(e),e.setParent(s)),s.length+=e.length}function coordsInChildren(s,e,r){let n=null,o=-1,a=null,c=-1;function l(d,f){for(let g=0,v=0;g<d.children.length&&v<=f;g++){let S=d.children[g],A=v+S.length;A>=f&&(S.children.length?l(S,f-v):(!a||a.isHidden&&r>0)&&(A>f||v==A&&S.getSide()>0)?(a=S,c=f-v):(v<f||v==A&&S.getSide()<0&&!S.isHidden)&&(n=S,o=f-v)),v=A}}l(s,e);let h=(r<0?n:a)||n||a;return h?h.coordsAt(Math.max(0,h==n?o:c),r):fallbackRect(s)}function fallbackRect(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let r=clientRectsFor(e);return r[r.length-1]||null}function combineAttrs(s,e){for(let r in s)r=="class"&&e.class?e.class+=" "+s.class:r=="style"&&e.style?e.style+=";"+s.style:e[r]=s[r];return e}const noAttrs=Object.create(null);function attrsEq(s,e,r){if(s==e)return!0;s||(s=noAttrs),e||(e=noAttrs);let n=Object.keys(s),o=Object.keys(e);if(n.length-(r&&n.indexOf(r)>-1?1:0)!=o.length-(r&&o.indexOf(r)>-1?1:0))return!1;for(let a of n)if(a!=r&&(o.indexOf(a)==-1||s[a]!==e[a]))return!1;return!0}function updateAttrs(s,e,r){let n=!1;if(e)for(let o in e)r&&o in r||(n=!0,o=="style"?s.style.cssText="":s.removeAttribute(o));if(r)for(let o in r)e&&e[o]==r[o]||(n=!0,o=="style"?s.style.cssText=r[o]:s.setAttribute(o,r[o]));return n}function getAttrs(s){let e=Object.create(null);for(let r=0;r<s.attributes.length;r++){let n=s.attributes[r];e[n.name]=n.value}return e}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,r,n,o,a,c){if(n){if(!(n instanceof LineView))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),mergeChildrenInto(this,e,r,n?n.children:[],a,c),!0}split(e){let r=new LineView;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:n,off:o}=this.childPos(e);o&&(r.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)r.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,r}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,r){joinInlineInto(this,e,r)}addLineDeco(e){let r=e.spec.attributes,n=e.spec.class;r&&(this.attrs=combineAttrs(r,this.attrs||{})),n&&(this.attrs=combineAttrs({class:n},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,r){var n;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,r);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((n=ContentView.get(o))===null||n===void 0?void 0:n.isEditable)==!1&&(!browser.ios||!this.children.some(a=>a instanceof TextView))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,r;for(let n of this.children){if(!(n instanceof TextView)||/[^ -~]/.test(n.text))return null;let o=clientRectsFor(n.dom);if(o.length!=1)return null;e+=o[0].width,r=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:r}:null}coordsAt(e,r){let n=coordsInChildren(this,e,r);if(!this.children.length&&n&&this.parent){let{heightOracle:o}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-o.lineHeight)<2&&o.textHeight<a){let c=(a-o.textHeight)/2;return{top:n.top+c,bottom:n.bottom-c,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,r){for(let n=0,o=0;n<e.children.length;n++){let a=e.children[n],c=o+a.length;if(c>=r){if(a instanceof LineView)return a;if(c>r)break}o=c+a.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,r,n){super(),this.widget=e,this.length=r,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,r,n,o,a,c){return n&&(!(n instanceof BlockWidgetView)||!this.widget.compare(n.widget)||e>0&&a<=0||r<this.length&&c<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-r),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let r=this.length-e;this.length=e;let n=new BlockWidgetView(this.widget,r,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text$1.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,r){return this.widget.coordsAt(this.dom,e,r)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:r,endSide:n}=this.deco;return r==n?!1:e<0?r<0:n>0}}class WidgetType{eq(e){return!1}updateDOM(e,r){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,r,n){return null}get isHidden(){return!1}destroy(e){}}var BlockType=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,r,n,o){super(),this.startSide=e,this.endSide=r,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let r=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return r+=n&&!e.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new PointDecoration(e,r,r,n,e.widget||null,!1)}static replace(e){let r=!!e.block,n,o;if(e.isBlockGap)n=-5e8,o=4e8;else{let{start:a,end:c}=getInclusive(e,r);n=(a?r?-3e8:-1:5e8)-1,o=(c?r?2e8:1:-6e8)+1}return new PointDecoration(e,n,o,r,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,r=!1){return RangeSet.of(e,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:r,end:n}=getInclusive(e);super(r?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var r,n;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,r=e){if(e>=r)throw new RangeError("Mark decorations may not be empty");return super.range(e,r)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,r=e){if(r!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,r)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,r,n,o,a,c){super(r,n,a,e),this.block=o,this.isReplace=c,this.mapMode=o?r<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,r=e){if(this.isReplace&&(e>r||e==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,r)}}PointDecoration.prototype.point=!0;function getInclusive(s,e=!1){let{inclusiveStart:r,inclusiveEnd:n}=s;return r==null&&(r=s.inclusive),n==null&&(n=s.inclusive),{start:r??e,end:n??e}}function widgetsEq(s,e){return s==e||!!(s&&e&&s.compare(e))}function addRange(s,e,r,n=0){let o=r.length-1;o>=0&&r[o]+n>=s?r[o]=Math.max(r[o],e):r.push(s,e)}class ContentBuilder{constructor(e,r,n,o){this.doc=e,this.pos=r,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,r,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(r.slice(r.length-n)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),r),n),this.atCursorPos=!0,this.textOff+=o,e-=o,n=0}}span(e,r,n,o){this.buildText(r-e,n,o),this.pos=r,this.openStart<0&&(this.openStart=o)}point(e,r,n,o,a,c){if(this.disallowBlockEffectsFor[c]&&n instanceof PointDecoration){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=r-e;if(n instanceof PointDecoration)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(n.widget||new NullWidget("div"),l,n));else{let h=WidgetView.create(n.widget||new NullWidget("span"),l,l?0:n.startSide),d=this.atCursorPos&&!h.isEditable&&a<=o.length&&(e<r||n.startSide>0),f=!h.isEditable&&(e<r||a>o.length||n.startSide<=0),g=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),d&&(g.append(wrapMarks(new WidgetBufferView(1),o),a),a=o.length+Math.max(0,a-o.length)),g.append(wrapMarks(h,o),a),this.atCursorPos=f,this.pendingBuffer=f?e<r||a>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=a)}static build(e,r,n,o,a){let c=new ContentBuilder(e,r,n,a);return c.openEnd=RangeSet.spans(o,r,n,c),c.openStart<0&&(c.openStart=c.openEnd),c.finish(c.openEnd),c}}function wrapMarks(s,e){for(let r of e)s=new MarkView(r,[s],s.length);return s}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:s=>s.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:s=>s.some(e=>e)});class ScrollTarget{constructor(e,r="nearest",n="nearest",o=5,a=5,c=!1){this.range=e,this.y=r,this.x=n,this.yMargin=o,this.xMargin=a,this.isSnapshot=c}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(s,e)=>s.map(e)});function logException(s,e,r){let n=s.facet(exceptionSink);n.length?n[0](e):window.onerror?window.onerror(String(e),r,void 0,void 0,e):r?console.error(r+":",e):console.error(e)}const editable=Facet.define({combine:s=>s.length?s[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,r,n,o,a){this.id=e,this.create=r,this.domEventHandlers=n,this.domEventObservers=o,this.extension=a(this)}static define(e,r){const{eventHandlers:n,eventObservers:o,provide:a,decorations:c}=r||{};return new ViewPlugin(nextPluginID++,e,n,o,l=>{let h=[viewPlugin.of(l)];return c&&h.push(decorations.of(d=>{let f=d.plugin(l);return f?c(f):Decoration.none})),a&&h.push(a(l)),h})}static fromClass(e,r){return ViewPlugin.define(n=>new e(n),r)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(n){if(logException(r.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(r){logException(e.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(n){logException(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(s,e,r){let n=s.state.facet(bidiIsolatedRanges);if(!n.length)return n;let o=n.map(c=>c instanceof Function?c(s):c),a=[];return RangeSet.spans(o,e,r,{point(){},span(c,l,h,d){let f=a;for(let g=h.length-1;g>=0;g--,d--){let v=h[g].spec.bidiIsolate,S;if(v!=null)if(d>0&&f.length&&(S=f[f.length-1]).to==c&&S.direction==v)S.to=l,f=S.inner;else{let A={from:c,to:l,direction:v,inner:[]};f.push(A),f=A.inner}}}}),a}const scrollMargins=Facet.define();function getScrollMargins(s){let e=0,r=0,n=0,o=0;for(let a of s.state.facet(scrollMargins)){let c=a(s);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(r=Math.max(r,c.right)),c.top!=null&&(n=Math.max(n,c.top)),c.bottom!=null&&(o=Math.max(o,c.bottom)))}return{left:e,right:r,top:n,bottom:o}}const styleModule=Facet.define();class ChangedRange{constructor(e,r,n,o){this.fromA=e,this.toA=r,this.fromB=n,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let r=e.length,n=this;for(;r>0;r--){let o=e[r-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),e.splice(r-1,1)}}return e.splice(r,0,n),e}static extendWithRanges(e,r){if(r.length==0)return e;let n=[];for(let o=0,a=0,c=0,l=0;;o++){let h=o==e.length?null:e[o],d=c-l,f=h?h.fromB:1e9;for(;a<r.length&&r[a]<f;){let g=r[a],v=r[a+1],S=Math.max(l,g),A=Math.min(f,v);if(S<=A&&new ChangedRange(S+d,A+d,S,A).addToSet(n),v>f)break;a+=2}if(!h)return n;new ChangedRange(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),c=h.toA,l=h.toB}}}class ViewUpdate{constructor(e,r,n){this.view=e,this.state=r,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let o=[];this.changes.iterChangedRanges((a,c,l,h)=>o.push(new ChangedRange(a,c,l,h))),this.changedRanges=o}static create(e,r,n){return new ViewUpdate(e,r,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(s){let e=[];for(let r=0;r<s.length;r++)e.push(1<<+s[r]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),r=s.charCodeAt(1);Brackets[e]=r,Brackets[r]=-e}function charType(s){return s<=247?LowTypes[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?ArabicTypes[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:s==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,r,n){this.from=e,this.to=r,this.level=n}side(e,r){return this.dir==r==e?this.to:this.from}static find(e,r,n,o){let a=-1;for(let c=0;c<e.length;c++){let l=e[c];if(l.from<=r&&l.to>=r){if(l.level==n)return c;(a<0||(o!=0?o<0?l.from<r:l.to>r:e[a].level>l.level))&&(a=c)}}if(a<0)throw new RangeError("Index out of range");return a}}function isolatesEq(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++){let n=s[r],o=e[r];if(n.from!=o.from||n.to!=o.to||n.direction!=o.direction||!isolatesEq(n.inner,o.inner))return!1}return!0}const types=[];function computeCharTypes(s,e,r,n,o){for(let a=0;a<=n.length;a++){let c=a?n[a-1].to:e,l=a<n.length?n[a].from:r,h=a?256:o;for(let d=c,f=h,g=h;d<l;d++){let v=charType(s.charCodeAt(d));v==512?v=f:v==8&&g==4&&(v=16),types[d]=v==4?2:v,v&7&&(g=v),f=v}for(let d=c,f=h,g=h;d<l;d++){let v=types[d];if(v==128)d<l-1&&f==types[d+1]&&f&24?v=types[d]=f:types[d]=256;else if(v==64){let S=d+1;for(;S<l&&types[S]==64;)S++;let A=d&&f==8||S<r&&types[S]==8?g==1?1:8:256;for(let w=d;w<S;w++)types[w]=A;d=S-1}else v==8&&g==1&&(types[d]=1);f=v,v&7&&(g=v)}}}function processBracketPairs(s,e,r,n,o){let a=o==1?2:1;for(let c=0,l=0,h=0;c<=n.length;c++){let d=c?n[c-1].to:e,f=c<n.length?n[c].from:r;for(let g=d,v,S,A;g<f;g++)if(S=Brackets[v=s.charCodeAt(g)])if(S<0){for(let w=l-3;w>=0;w-=3)if(BracketStack[w+1]==-S){let m=BracketStack[w+2],b=m&2?o:m&4?m&1?a:o:0;b&&(types[g]=types[BracketStack[w]]=b),l=w;break}}else{if(BracketStack.length==189)break;BracketStack[l++]=g,BracketStack[l++]=v,BracketStack[l++]=h}else if((A=types[g])==2||A==1){let w=A==o;h=w?0:1;for(let m=l-3;m>=0;m-=3){let b=BracketStack[m+2];if(b&2)break;if(w)BracketStack[m+2]|=2;else{if(b&4)break;BracketStack[m+2]|=4}}}}}function processNeutrals(s,e,r,n){for(let o=0,a=n;o<=r.length;o++){let c=o?r[o-1].to:s,l=o<r.length?r[o].from:e;for(let h=c;h<l;){let d=types[h];if(d==256){let f=h+1;for(;;)if(f==l){if(o==r.length)break;f=r[o++].to,l=o<r.length?r[o].from:e}else if(types[f]==256)f++;else break;let g=a==1,v=(f<e?types[f]:n)==1,S=g==v?g?1:2:n;for(let A=f,w=o,m=w?r[w-1].to:s;A>h;)A==m&&(A=r[--w].from,m=w?r[w-1].to:s),types[--A]=S;h=f}else a=d,h++}}}function emitSpans(s,e,r,n,o,a,c){let l=n%2?2:1;if(n%2==o%2)for(let h=e,d=0;h<r;){let f=!0,g=!1;if(d==a.length||h<a[d].from){let w=types[h];w!=l&&(f=!1,g=w==16)}let v=!f&&l==1?[]:null,S=f?n:n+1,A=h;e:for(;;)if(d<a.length&&A==a[d].from){if(g)break e;let w=a[d];if(!f)for(let m=w.to,b=d+1;;){if(m==r)break e;if(b<a.length&&a[b].from==m)m=a[b++].to;else{if(types[m]==l)break e;break}}if(d++,v)v.push(w);else{w.from>h&&c.push(new BidiSpan(h,w.from,S));let m=w.direction==LTR!=!(S%2);computeSectionOrder(s,m?n+1:n,o,w.inner,w.from,w.to,c),h=w.to}A=w.to}else{if(A==r||(f?types[A]!=l:types[A]==l))break;A++}v?emitSpans(s,h,A,n+1,o,v,c):h<A&&c.push(new BidiSpan(h,A,S)),h=A}else for(let h=r,d=a.length;h>e;){let f=!0,g=!1;if(!d||h>a[d-1].to){let w=types[h-1];w!=l&&(f=!1,g=w==16)}let v=!f&&l==1?[]:null,S=f?n:n+1,A=h;e:for(;;)if(d&&A==a[d-1].to){if(g)break e;let w=a[--d];if(!f)for(let m=w.from,b=d;;){if(m==e)break e;if(b&&a[b-1].to==m)m=a[--b].from;else{if(types[m-1]==l)break e;break}}if(v)v.push(w);else{w.to<h&&c.push(new BidiSpan(w.to,h,S));let m=w.direction==LTR!=!(S%2);computeSectionOrder(s,m?n+1:n,o,w.inner,w.from,w.to,c),h=w.from}A=w.from}else{if(A==e||(f?types[A-1]!=l:types[A-1]==l))break;A--}v?emitSpans(s,A,h,n+1,o,v,c):A<h&&c.push(new BidiSpan(A,h,S)),h=A}}function computeSectionOrder(s,e,r,n,o,a,c){let l=e%2?2:1;computeCharTypes(s,o,a,n,l),processBracketPairs(s,o,a,n,l),processNeutrals(o,a,n,l),emitSpans(s,o,a,e,r,n,c)}function computeOrder(s,e,r){if(!s)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!r.length&&!BidiRE.test(s))return trivialOrder(s.length);if(r.length)for(;s.length>types.length;)types[types.length]=256;let n=[],o=e==LTR?0:1;return computeSectionOrder(s,o,o,r,0,s.length,n),n}function trivialOrder(s){return[new BidiSpan(0,s,0)]}let movedOver="";function moveVisually(s,e,r,n,o){var a;let c=n.head-s.from,l=-1;if(c==0){if(!o||!s.length)return null;e[0].level!=r&&(c=e[0].side(!1,r),l=0)}else if(c==s.length){if(o)return null;let v=e[e.length-1];v.level!=r&&(c=v.side(!0,r),l=e.length-1)}l<0&&(l=BidiSpan.find(e,c,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc));let h=e[l];c==h.side(o,r)&&(h=e[l+=o?1:-1],c=h.side(!o,r));let d=o==(h.dir==r),f=findClusterBreak(s.text,c,d);if(movedOver=s.text.slice(Math.min(c,f),Math.max(c,f)),f!=h.side(o,r))return EditorSelection.cursor(f+s.from,d?-1:1,h.level);let g=l==(o?e.length-1:0)?null:e[l+(o?1:-1)];return!g&&h.level!=r?EditorSelection.cursor(o?s.to:s.from,o?-1:1,r):g&&g.level<h.level?EditorSelection.cursor(g.side(!o,r)+s.from,o?1:-1,g.level):EditorSelection.cursor(f+s.from,o?-1:1,h.level)}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var r;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:f})=>f<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let o=-1;this.view.inputState.composing>=0&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?o=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let a=o>-1?findCompositionRange(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:f}=this.hasComposition;n=new ChangedRange(d,f,e.changes.mapPos(d,-1),e.changes.mapPos(f,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(browser.ie||browser.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,l=this.updateDeco(),h=findChangedDeco(c,l,e.changes);return n=ChangedRange.extendWithRanges(n,h),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,r,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,r,n);let{observer:o}=this.view;o.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let c=browser.chrome||browser.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,c),this.flags&=-8,c&&(c.written||o.selectionRange.focusNode!=c.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(c=>c.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let c of this.children)c instanceof BlockWidgetView&&c.widget instanceof BlockGapWidget&&a.push(c.dom);o.updateGaps(a)}updateChildren(e,r,n){let o=n?n.range.addToSet(e.slice()):e,a=this.childCursor(r);for(let c=o.length-1;;c--){let l=c>=0?o[c]:null;if(!l)break;let{fromA:h,toA:d,fromB:f,toB:g}=l,v,S,A,w;if(n&&n.range.fromB<g&&n.range.toB>f){let O=ContentBuilder.build(this.view.state.doc,f,n.range.fromB,this.decorations,this.dynamicDecorationMap),k=ContentBuilder.build(this.view.state.doc,n.range.toB,g,this.decorations,this.dynamicDecorationMap);S=O.breakAtStart,A=O.openStart,w=k.openEnd;let P=this.compositionView(n);k.breakAtStart?P.breakAfter=1:k.content.length&&P.merge(P.length,P.length,k.content[0],!1,k.openStart,0)&&(P.breakAfter=k.content[0].breakAfter,k.content.shift()),O.content.length&&P.merge(0,0,O.content[O.content.length-1],!0,0,O.openEnd)&&O.content.pop(),v=O.content.concat(P).concat(k.content)}else({content:v,breakAtStart:S,openStart:A,openEnd:w}=ContentBuilder.build(this.view.state.doc,f,g,this.decorations,this.dynamicDecorationMap));let{i:m,off:b}=a.findPos(d,1),{i:x,off:y}=a.findPos(h,-1);replaceRange(this,x,y,m,b,v,S,A,w)}n&&this.fixCompositionDOM(n)}compositionView(e){let r=new TextView(e.text.nodeValue);r.flags|=8;for(let{deco:o}of e.marks)r=new MarkView(o,[r],r.length);let n=new LineView;return n.append(r,0),n}fixCompositionDOM(e){let r=(a,c)=>{c.flags|=8|(c.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(c);let l=ContentView.get(a);l&&l!=c&&(l.dom=null),c.setDOM(a)},n=this.childPos(e.range.fromB,1),o=this.children[n.i];r(e.line,o);for(let a=e.marks.length-1;a>=-1;a--)n=o.childPos(n.off,1),o=o.children[n.i],r(a>=0?e.marks[a].node:e.text,o)}updateSelection(e=!1,r=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,a=!o&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||r||a))return;let c=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),d=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(browser.gecko&&l.empty&&!this.hasComposition&&betweenUneditable(h)){let g=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(g,h.node.childNodes[h.offset]||null)),h=d=new DOMPos(g,0),c=!0}let f=this.view.observer.selectionRange;(c||!f.focusNode||!isEquivalentPosition(h.node,h.offset,f.anchorNode,f.anchorOffset)||!isEquivalentPosition(d.node,d.offset,f.focusNode,f.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(f.focusNode)&&inUneditable(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let g=getSelection(this.view.root);if(g)if(l.empty){if(browser.gecko){let v=nextToUneditable(h.node,h.offset);if(v&&v!=3){let S=nearbyTextNode(h.node,h.offset,v==1?1:-1);S&&(h=new DOMPos(S.node,S.offset))}}g.collapse(h.node,h.offset),l.bidiLevel!=null&&g.caretBidiLevel!==void 0&&(g.caretBidiLevel=l.bidiLevel)}else if(g.extend){g.collapse(h.node,h.offset);try{g.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();l.anchor>l.head&&([h,d]=[d,h]),v.setEnd(d.node,d.offset),v.setStart(h.node,h.offset),g.removeAllRanges(),g.addRange(v)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new DOMPos(f.anchorNode,f.anchorOffset),this.impreciseHead=d.precise?null:new DOMPos(f.focusNode,f.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,r=e.state.selection.main,n=getSelection(e.root),{anchorNode:o,anchorOffset:a}=e.observer.selectionRange;if(!n||!r.empty||!r.assoc||!n.modify)return;let c=LineView.find(this,r.head);if(!c)return;let l=c.posAtStart;if(r.head==l||r.head==l+c.length)return;let h=this.coordsAt(r.head,-1),d=this.coordsAt(r.head,1);if(!h||!d||h.bottom>d.top)return;let f=this.domAtPos(r.head+r.assoc);n.collapse(f.node,f.offset),n.modify("move",r.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=r.from&&n.collapse(o,a)}moveToLine(e){let r=this.dom,n;if(e.node!=r)return e;for(let o=e.offset;!n&&o<r.childNodes.length;o++){let a=ContentView.get(r.childNodes[o]);a instanceof LineView&&(n=a.domAtPos(0))}for(let o=e.offset-1;!n&&o>=0;o--){let a=ContentView.get(r.childNodes[o]);a instanceof LineView&&(n=a.domAtPos(a.length))}return n?new DOMPos(n.node,n.offset,!0):e}nearest(e){for(let r=e;r;){let n=ContentView.get(r);if(n&&n.rootView==this)return n;r=r.parentNode}return null}posFromDOM(e,r){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,r)+n.posAtStart}domAtPos(e){let{i:r,off:n}=this.childCursor().findPos(e,-1);for(;r<this.children.length-1;){let o=this.children[r];if(n<o.length||o instanceof LineView)break;r++,n=0}return this.children[r].domAtPos(n)}coordsAt(e,r){let n=null,o=0;for(let a=this.length,c=this.children.length-1;c>=0;c--){let l=this.children[c],h=a-l.breakAfter,d=h-l.length;if(h<e)break;d<=e&&(d<e||l.covers(-1))&&(h>e||l.covers(1))&&(!n||l instanceof LineView&&!(n instanceof LineView&&r>=0))&&(n=l,o=d),a=d}return n?n.coordsAt(e-o,r):null}coordsForChar(e){let{i:r,off:n}=this.childPos(e,1),o=this.children[r];if(!(o instanceof LineView))return null;for(;o.children.length;){let{i:l,off:h}=o.childPos(n,1);for(;;l++){if(l==o.children.length)return null;if((o=o.children[l]).length)break}n=h}if(!(o instanceof TextView))return null;let a=findClusterBreak(o.text,n);if(a==n)return null;let c=textRange(o.dom,n,a).getClientRects();for(let l=0;l<c.length;l++){let h=c[l];if(l==c.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let r=[],{from:n,to:o}=e,a=this.view.contentDOM.clientWidth,c=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==Direction.LTR;for(let d=0,f=0;f<this.children.length;f++){let g=this.children[f],v=d+g.length;if(v>o)break;if(d>=n){let S=g.dom.getBoundingClientRect();if(r.push(S.height),c){let A=g.dom.lastChild,w=A?clientRectsFor(A):[];if(w.length){let m=w[w.length-1],b=h?m.right-S.left:S.right-m.left;b>l&&(l=b,this.minWidth=a,this.minWidthFrom=d,this.minWidthTo=v)}}}d=v+g.breakAfter}return r}textDirectionAt(e){let{i:r}=this.childPos(e,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let a of this.children)if(a instanceof LineView){let c=a.measureTextSize();if(c)return c}let e=document.createElement("div"),r,n,o;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=clientRectsFor(e.firstChild)[0];r=e.getBoundingClientRect().height,n=a?a.width/27:7,o=a?a.height:r,e.remove()}),{lineHeight:r,charWidth:n,textHeight:o}}childCursor(e=this.length){let r=this.children.length;return r&&(e-=this.children[--r].length),new ChildCursor(this.children,e,r)}computeBlockGapDeco(){let e=[],r=this.view.viewState;for(let n=0,o=0;;o++){let a=o==r.viewports.length?null:r.viewports[o],c=a?a.from-1:this.length;if(c>n){let l=(r.lineBlockAt(c).bottom-r.lineBlockAt(n).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,c))}if(!a)break;n=a.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((r,n)=>(this.dynamicDecorationMap[n]=typeof r=="function")?r(this.view):r);for(let r=e.length;r<e.length+3;r++)this.dynamicDecorationMap[r]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:r}=e,n=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),o;if(!n)return;!r.empty&&(o=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(n={left:Math.min(n.left,o.left),top:Math.min(n.top,o.top),right:Math.max(n.right,o.right),bottom:Math.max(n.bottom,o.bottom)});let a=getScrollMargins(this.view),c={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:l,offsetHeight:h}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,c,r.head<r.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Direction.LTR)}}function betweenUneditable(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function findCompositionNode(s,e){let r=s.observer.selectionRange,n=r.focusNode&&nearbyTextNode(r.focusNode,r.focusOffset,0);if(!n)return null;let o=e-n.offset;return{from:o,to:o+n.node.nodeValue.length,node:n.node}}function findCompositionRange(s,e,r){let n=findCompositionNode(s,r);if(!n)return null;let{node:o,from:a,to:c}=n,l=o.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(n.from,n.to)!=l)return null;let h=e.invertedDesc,d=new ChangedRange(h.mapPos(a),h.mapPos(c),a,c),f=[];for(let g=o.parentNode;;g=g.parentNode){let v=ContentView.get(g);if(v instanceof MarkView)f.push({node:g,deco:v.mark});else{if(v instanceof LineView||g.nodeName=="DIV"&&g.parentNode==s.contentDOM)return{range:d,text:o,marks:f,line:g};if(g!=s.contentDOM)f.push({node:g,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(g),tagName:g.tagName.toLowerCase()})});else return null}}}function nearbyTextNode(s,e,r){if(r<=0)for(let n=s,o=e;;){if(n.nodeType==3)return{node:n,offset:o};if(n.nodeType==1&&o>0)n=n.childNodes[o-1],o=maxOffset(n);else break}if(r>=0)for(let n=s,o=e;;){if(n.nodeType==3)return{node:n,offset:o};if(n.nodeType==1&&o<n.childNodes.length&&r>=0)n=n.childNodes[o],o=0;else break}return null}function nextToUneditable(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,r){addRange(e,r,this.changes)}comparePoint(e,r){addRange(e,r,this.changes)}};function findChangedDeco(s,e,r){let n=new DecorationComparator$1;return RangeSet.compare(s,e,r,n),n.changes}function inUneditable(s,e){for(let r=s;r&&r!=e;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function touchesComposition(s,e){let r=!1;return e&&s.iterChangedRanges((n,o)=>{n<e.to&&o>e.from&&(r=!0)}),r}function groupAt(s,e,r=1){let n=s.charCategorizer(e),o=s.doc.lineAt(e),a=e-o.from;if(o.length==0)return EditorSelection.cursor(e);a==0?r=1:a==o.length&&(r=-1);let c=a,l=a;r<0?c=findClusterBreak(o.text,a,!1):l=findClusterBreak(o.text,a);let h=n(o.text.slice(c,l));for(;c>0;){let d=findClusterBreak(o.text,c,!1);if(n(o.text.slice(d,c))!=h)break;c=d}for(;l<o.length;){let d=findClusterBreak(o.text,l);if(n(o.text.slice(l,d))!=h)break;l=d}return EditorSelection.range(c+o.from,l+o.from)}function getdx(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function getdy(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function yOverlap(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function upTop(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function upBot(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function domPosAtCoords(s,e,r){let n,o,a,c,l=!1,h,d,f,g;for(let A=s.firstChild;A;A=A.nextSibling){let w=clientRectsFor(A);for(let m=0;m<w.length;m++){let b=w[m];o&&yOverlap(o,b)&&(b=upTop(upBot(b,o.bottom),o.top));let x=getdx(e,b),y=getdy(r,b);if(x==0&&y==0)return A.nodeType==3?domPosInText(A,e,r):domPosAtCoords(A,e,r);if(!n||c>y||c==y&&a>x){n=A,o=b,a=x,c=y;let O=y?r<b.top?-1:1:x?e<b.left?-1:1:0;l=!O||(O>0?m<w.length-1:m>0)}x==0?r>b.bottom&&(!f||f.bottom<b.bottom)?(h=A,f=b):r<b.top&&(!g||g.top>b.top)&&(d=A,g=b):f&&yOverlap(f,b)?f=upBot(f,b.bottom):g&&yOverlap(g,b)&&(g=upTop(g,b.top))}}if(f&&f.bottom>=r?(n=h,o=f):g&&g.top<=r&&(n=d,o=g),!n)return{node:s,offset:0};let v=Math.max(o.left,Math.min(o.right,e));if(n.nodeType==3)return domPosInText(n,v,r);if(l&&n.contentEditable!="false")return domPosAtCoords(n,v,r);let S=Array.prototype.indexOf.call(s.childNodes,n)+(e>=(o.left+o.right)/2?1:0);return{node:s,offset:S}}function domPosInText(s,e,r){let n=s.nodeValue.length,o=-1,a=1e9,c=0;for(let l=0;l<n;l++){let h=textRange(s,l,l+1).getClientRects();for(let d=0;d<h.length;d++){let f=h[d];if(f.top==f.bottom)continue;c||(c=e-f.left);let g=(f.top>r?f.top-r:r-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&g<a){let v=e>=(f.left+f.right)/2,S=v;if((browser.chrome||browser.gecko)&&textRange(s,l).getBoundingClientRect().left==f.right&&(S=!v),g<=0)return{node:s,offset:l+(S?1:0)};o=l+(S?1:0),a=g}}}return{node:s,offset:o>-1?o:c>0?s.nodeValue.length:0}}function posAtCoords(s,e,r,n=-1){var o,a;let c=s.contentDOM.getBoundingClientRect(),l=c.top+s.viewState.paddingTop,h,{docHeight:d}=s.viewState,{x:f,y:g}=e,v=g-l;if(v<0)return 0;if(v>d)return s.state.doc.length;for(let O=s.viewState.heightOracle.textHeight/2,k=!1;h=s.elementAtHeight(v),h.type!=BlockType.Text;)for(;v=n>0?h.bottom+O:h.top-O,!(v>=0&&v<=d);){if(k)return r?null:0;k=!0,n=-n}g=l+v;let S=h.from;if(S<s.viewport.from)return s.viewport.from==0?0:r?null:posAtCoordsImprecise(s,c,h,f,g);if(S>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:r?null:posAtCoordsImprecise(s,c,h,f,g);let A=s.dom.ownerDocument,w=s.root.elementFromPoint?s.root:A,m=w.elementFromPoint(f,g);m&&!s.contentDOM.contains(m)&&(m=null),m||(f=Math.max(c.left+1,Math.min(c.right-1,f)),m=w.elementFromPoint(f,g),m&&!s.contentDOM.contains(m)&&(m=null));let b,x=-1;if(m&&((o=s.docView.nearest(m))===null||o===void 0?void 0:o.isEditable)!=!1){if(A.caretPositionFromPoint){let O=A.caretPositionFromPoint(f,g);O&&({offsetNode:b,offset:x}=O)}else if(A.caretRangeFromPoint){let O=A.caretRangeFromPoint(f,g);O&&({startContainer:b,startOffset:x}=O,(!s.contentDOM.contains(b)||browser.safari&&isSuspiciousSafariCaretResult(b,x,f)||browser.chrome&&isSuspiciousChromeCaretResult(b,x,f))&&(b=void 0))}}if(!b||!s.docView.dom.contains(b)){let O=LineView.find(s.docView,S);if(!O)return v>h.top+h.height/2?h.to:h.from;({node:b,offset:x}=domPosAtCoords(O.dom,f,g))}let y=s.docView.nearest(b);if(!y)return null;if(y.isWidget&&((a=y.dom)===null||a===void 0?void 0:a.nodeType)==1){let O=y.dom.getBoundingClientRect();return e.y<O.top||e.y<=O.bottom&&e.x<=(O.left+O.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(b,x)+y.posAtStart}function posAtCoordsImprecise(s,e,r,n,o){let a=Math.round((n-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&r.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,h=Math.floor((o-r.top-(s.defaultLineHeight-l)*.5)/l);a+=h*s.viewState.heightOracle.lineLength}let c=s.state.sliceDoc(r.from,r.to);return r.from+findColumn(c,a,s.state.tabSize)}function isSuspiciousSafariCaretResult(s,e,r){let n;if(s.nodeType!=3||e!=(n=s.nodeValue.length))return!1;for(let o=s.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(s,n-1,n).getBoundingClientRect().left>r}function isSuspiciousChromeCaretResult(s,e,r){if(e!=0)return!1;for(let o=s;;){let a=o.parentNode;if(!a||a.nodeType!=1||a.firstChild!=o)return!1;if(a.classList.contains("cm-line"))break;o=a}let n=s.nodeType==1?s.getBoundingClientRect():textRange(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return r-n.left>5}function blockAt(s,e){let r=s.lineBlockAt(e);if(Array.isArray(r.type)){for(let n of r.type)if(n.to>e||n.to==e&&(n.to==r.to||n.type==BlockType.Text))return n}return r}function moveToLineBoundary(s,e,r,n){let o=blockAt(s,e.head),a=!n||o.type!=BlockType.Text||!(s.lineWrapping||o.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(a){let c=s.dom.getBoundingClientRect(),l=s.textDirectionAt(o.from),h=s.posAtCoords({x:r==(l==Direction.LTR)?c.right-1:c.left+1,y:(a.top+a.bottom)/2});if(h!=null)return EditorSelection.cursor(h,r?-1:1)}return EditorSelection.cursor(r?o.to:o.from,r?-1:1)}function moveByChar(s,e,r,n){let o=s.state.doc.lineAt(e.head),a=s.bidiSpans(o),c=s.textDirectionAt(o.from);for(let l=e,h=null;;){let d=moveVisually(o,a,c,l,r),f=movedOver;if(!d){if(o.number==(r?s.state.doc.lines:1))return l;f=`
`,o=s.state.doc.line(o.number+(r?1:-1)),a=s.bidiSpans(o),d=EditorSelection.cursor(r?o.from:o.to)}if(h){if(!h(f))return l}else{if(!n)return d;h=n(f)}l=d}}function byGroup(s,e,r){let n=s.state.charCategorizer(e),o=n(r);return a=>{let c=n(a);return o==CharCategory.Space&&(o=c),o==c}}function moveVertically(s,e,r,n){let o=e.head,a=r?1:-1;if(o==(r?s.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let c=e.goalColumn,l,h=s.contentDOM.getBoundingClientRect(),d=s.coordsAtPos(o,e.assoc||-1),f=s.documentTop;if(d)c==null&&(c=d.left-h.left),l=a<0?d.top:d.bottom;else{let S=s.viewState.lineBlockAt(o);c==null&&(c=Math.min(h.right-h.left,s.defaultCharacterWidth*(o-S.from))),l=(a<0?S.top:S.bottom)+f}let g=h.left+c,v=n??s.viewState.heightOracle.textHeight>>1;for(let S=0;;S+=10){let A=l+(v+S)*a,w=posAtCoords(s,{x:g,y:A},!1,a);if(A<h.top||A>h.bottom||(a<0?w<o:w>o)){let m=s.docView.coordsForChar(w),b=!m||A<m.top?-1:1;return EditorSelection.cursor(w,b,void 0,c)}}}function skipAtomicRanges(s,e,r){for(;;){let n=0;for(let o of s)o.between(e-1,e+1,(a,c,l)=>{if(e>a&&e<c){let h=n||r||(e-a<c-e?-1:1);e=h<0?a:c,n=h}});if(!n)return e}}function skipAtoms(s,e,r){let n=skipAtomicRanges(s.state.facet(atomicRanges).map(o=>o(s)),r.from,e.head>r.from?-1:1);return n==r.from?r:EditorSelection.cursor(n,n<r.from?1:-1)}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,r){let n=this.handlers[e];if(n){for(let o of n.observers)o(this.view,r);for(let o of n.handlers){if(r.defaultPrevented)break;if(o(this.view,r)){r.preventDefault();break}}}}ensureHandlers(e){let r=computeHandlers(e),n=this.handlers,o=this.view.contentDOM;for(let a in r)if(a!="scroll"){let c=!r[a].handlers.length,l=n[a];l&&c!=!l.handlers.length&&(o.removeEventListener(a,this.handleEvent),l=null),l||o.addEventListener(a,this.handleEvent,{passive:c})}for(let a in n)a!="scroll"&&!r[a]&&o.removeEventListener(a,this.handleEvent);this.handlers=r}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let r;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((r=PendingKeys.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=r||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(s,e){return(r,n)=>{try{return e.call(s,n,r)}catch(o){logException(r.state,o)}}}function computeHandlers(s){let e=Object.create(null);function r(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of s){let o=n.spec;if(o&&o.domEventHandlers)for(let a in o.domEventHandlers){let c=o.domEventHandlers[a];c&&r(a).handlers.push(bindHandler(n.value,c))}if(o&&o.domEventObservers)for(let a in o.domEventObservers){let c=o.domEventObservers[a];c&&r(a).observers.push(bindHandler(n.value,c))}}for(let n in handlers)r(n).handlers.push(handlers[n]);for(let n in observers)r(n).observers.push(observers[n]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(s){return Math.max(0,s)*.7+8}function dist(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class MouseSelection{constructor(e,r,n,o){this.view=e,this.startEvent=r,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParent=scrollableParent(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(c=>c(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,r),this.dragging=isInPrimarySelection(e,r)&&getClickType(r)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var r;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,o=0,a=((r=this.scrollParent)===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},c=getScrollMargins(this.view);e.clientX-c.left<=a.left+dragScrollMargin?n=-dragScrollSpeed(a.left-e.clientX):e.clientX+c.right>=a.right-dragScrollMargin&&(n=dragScrollSpeed(e.clientX-a.right)),e.clientY-c.top<=a.top+dragScrollMargin?o=-dragScrollSpeed(a.top-e.clientY):e.clientY+c.bottom>=a.bottom-dragScrollMargin&&(o=dragScrollSpeed(e.clientY-a.bottom)),this.setScrollSpeed(n,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,r){this.scrollSpeed={x:e,y:r},e||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let r=null;for(let n=0;n<e.ranges.length;n++){let o=e.ranges[n],a=null;if(o.empty){let c=skipAtomicRanges(this.atoms,o.from,0);c!=o.from&&(a=EditorSelection.cursor(c,-1))}else{let c=skipAtomicRanges(this.atoms,o.from,-1),l=skipAtomicRanges(this.atoms,o.to,1);(c!=o.from||l!=o.to)&&(a=EditorSelection.range(o.from==o.anchor?c:l,o.from==o.head?c:l))}a&&(r||(r=e.ranges.slice()),r[n]=a)}return r?EditorSelection.create(r,e.mainIndex):e}select(e){let{view:r}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(r.state.selection)||n.main.assoc!=r.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(s,e){let r=s.state.facet(clickAddsSelectionRange);return r.length?r[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(s,e){let r=s.state.facet(dragMovesSelection$1);return r.length?r[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(s,e){let{main:r}=s.state.selection;if(r.empty)return!1;let n=getSelection(s.root);if(!n||n.rangeCount==0)return!0;let o=n.getRangeAt(0).getClientRects();for(let a=0;a<o.length;a++){let c=o[a];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target,n;r!=s.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(n=ContentView.get(r))&&n.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(s){let e=s.dom.parentNode;if(!e)return;let r=e.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{s.focus(),r.remove(),doPaste(s,r.value)},50)}function doPaste(s,e){let{state:r}=s,n,o=1,a=r.toText(e),c=a.lines==r.selection.ranges.length;if(lastLinewiseCopy!=null&&r.selection.ranges.every(h=>h.empty)&&lastLinewiseCopy==a.toString()){let h=-1;n=r.changeByRange(d=>{let f=r.doc.lineAt(d.from);if(f.from==h)return{range:d};h=f.from;let g=r.toText((c?a.line(o++).text:e)+r.lineBreak);return{changes:{from:f.from,insert:g},range:EditorSelection.cursor(d.from+g.length)}})}else c?n=r.changeByRange(h=>{let d=a.line(o++);return{changes:{from:h.from,to:h.to,insert:d.text},range:EditorSelection.cursor(h.from+d.length)}}):n=r.replaceSelection(a);s.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};handlers.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now()),!1);observers.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let n of s.state.facet(mouseSelectionStyle))if(r=n(s,e),r)break;if(!r&&e.button==0&&(r=basicMouseSelection(s,e)),r){let n=!s.hasFocus;s.inputState.startMouseSelection(new MouseSelection(s,e,r,n)),n&&s.observer.ignore(()=>focusPreventScroll(s.contentDOM));let o=s.inputState.mouseSelection;if(o)return o.start(e),o.dragging===!1}return!1};function rangeForClick(s,e,r,n){if(n==1)return EditorSelection.cursor(e,r);if(n==2)return groupAt(s.state,e,r);{let o=LineView.find(s.docView,e),a=s.state.doc.lineAt(o?o.posAtEnd:e),c=o?o.posAtStart:a.from,l=o?o.posAtEnd:a.to;return l<s.state.doc.length&&l==a.to&&l++,EditorSelection.range(c,l)}}let insideY=(s,e)=>s>=e.top&&s<=e.bottom,inside=(s,e,r)=>insideY(e,r)&&s>=r.left&&s<=r.right;function findPositionSide(s,e,r,n){let o=LineView.find(s.docView,e);if(!o)return 1;let a=e-o.posAtStart;if(a==0)return 1;if(a==o.length)return-1;let c=o.coordsAt(a,-1);if(c&&inside(r,n,c))return-1;let l=o.coordsAt(a,1);return l&&inside(r,n,l)?1:c&&insideY(n,c)?-1:1}function queryPos(s,e){let r=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:r,bias:findPositionSide(s,r,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(s){if(!BadMouseDetail)return s.detail;let e=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=s,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||r>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(s,e){let r=queryPos(s,e),n=getClickType(e),o=s.state.selection;return{update(a){a.docChanged&&(r.pos=a.changes.mapPos(r.pos),o=o.map(a.changes))},get(a,c,l){let h=queryPos(s,a),d,f=rangeForClick(s,h.pos,h.bias,n);if(r.pos!=h.pos&&!c){let g=rangeForClick(s,r.pos,r.bias,n),v=Math.min(g.from,f.from),S=Math.max(g.to,f.to);f=v<f.from?EditorSelection.range(v,S):EditorSelection.range(S,v)}return c?o.replaceRange(o.main.extend(f.from,f.to)):l&&n==1&&o.ranges.length>1&&(d=removeRangeAround(o,h.pos))?d:l?o.addRange(f):EditorSelection.create([f])}}}function removeRangeAround(s,e){for(let r=0;r<s.ranges.length;r++){let{from:n,to:o}=s.ranges[r];if(n<=e&&o>=e)return EditorSelection.create(s.ranges.slice(0,r).concat(s.ranges.slice(r+1)),s.mainIndex==r?0:s.mainIndex-(s.mainIndex>r?1:0))}return null}handlers.dragstart=(s,e)=>{let{selection:{main:r}}=s.state;if(e.target.draggable){let o=s.docView.nearest(e.target);if(o&&o.isWidget){let a=o.posAtStart,c=a+o.length;(a>=r.to||c<=r.from)&&(r=EditorSelection.range(a,c))}}let{inputState:n}=s;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=r,e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(r.from,r.to)),e.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=s=>(s.inputState.draggedContent=null,!1);function dropText(s,e,r,n){if(!r)return;let o=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=s.inputState,c=n&&a&&dragMovesSelection(s,e)?{from:a.from,to:a.to}:null,l={from:o,insert:r},h=s.state.changes(c?[c,l]:l);s.focus(),s.dispatch({changes:h,selection:{anchor:h.mapPos(o,-1),head:h.mapPos(o,1)},userEvent:c?"move.drop":"input.drop"}),s.inputState.draggedContent=null}handlers.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let r=e.dataTransfer.files;if(r&&r.length){let n=Array(r.length),o=0,a=()=>{++o==r.length&&dropText(s,e,n.filter(c=>c!=null).join(s.state.lineBreak),!1)};for(let c=0;c<r.length;c++){let l=new FileReader;l.onerror=a,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[c]=l.result),a()},l.readAsText(r[c])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return dropText(s,e,n,!0),!0}return!1};handlers.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let r=brokenClipboardAPI?null:e.clipboardData;return r?(doPaste(s,r.getData("text/plain")||r.getData("text/uri-text")),!0):(capturePaste(s),!1)};function captureCopy(s,e){let r=s.dom.parentNode;if(!r)return;let n=r.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),s.focus()},50)}function copiedRange(s){let e=[],r=[],n=!1;for(let o of s.selection.ranges)o.empty||(e.push(s.sliceDoc(o.from,o.to)),r.push(o));if(!e.length){let o=-1;for(let{from:a}of s.selection.ranges){let c=s.doc.lineAt(a);c.number>o&&(e.push(c.text),r.push({from:c.from,to:Math.min(s.doc.length,c.to+1)})),o=c.number}n=!0}return{text:e.join(s.lineBreak),ranges:r,linewise:n}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(s,e)=>{let{text:r,ranges:n,linewise:o}=copiedRange(s.state);if(!r&&!o)return!1;lastLinewiseCopy=o?r:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=brokenClipboardAPI?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",r),!0):(captureCopy(s,r),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(s,e){let r=[];for(let n of s.facet(focusChangeEffect)){let o=n(s,e);o&&r.push(o)}return r?s.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let r=focusChangeTransaction(s.state,e);r?s.dispatch(r):s.update([])}},10)}observers.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),updateForFocusChange(s)};observers.blur=s=>{s.observer.clearSelectionRange(),updateForFocusChange(s)};observers.compositionstart=observers.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)};observers.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,browser.chrome&&browser.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50)};observers.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(s,e)=>{var r;let n;if(browser.chrome&&browser.android&&(n=PendingKeys.find(o=>o.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(s){appliedFirefoxHack.has(s)||(appliedFirefoxHack.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text$1.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,r){let n=this.doc.lineAt(r).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((r-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let r=!1;for(let n=0;n<e.length;n++){let o=e[n];o<0?n++:this.heightSamples[Math.floor(o*10)]||(r=!0,this.heightSamples[Math.floor(o*10)]=!0)}return r}refresh(e,r,n,o,a,c){let l=wrappingWhiteSpace.indexOf(e)>-1,h=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=r,this.charWidth=n,this.textHeight=o,this.lineLength=a,h){this.heightSamples={};for(let d=0;d<c.length;d++){let f=c[d];f<0?d++:this.heightSamples[Math.floor(f*10)]=!0}}return h}}class MeasuredHeights{constructor(e,r){this.from=e,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,r,n,o,a){this.from=e,this.length=r,this.top=n,this.height=o,this._content=a}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,r)}}var QueryType$1=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,r,n=2){this.length=e,this.height=r,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,r){this.height!=r&&(Math.abs(this.height-r)>Epsilon&&(e.heightChanged=!0),this.height=r)}replace(e,r,n){return HeightMap.of(n)}decomposeLeft(e,r){r.push(this)}decomposeRight(e,r){r.push(this)}applyChanges(e,r,n,o){let a=this,c=n.doc;for(let l=o.length-1;l>=0;l--){let{fromA:h,toA:d,fromB:f,toB:g}=o[l],v=a.lineAt(h,QueryType$1.ByPosNoHeight,n.setDoc(r),0,0),S=v.to>=d?v:a.lineAt(d,QueryType$1.ByPosNoHeight,n,0,0);for(g+=S.to-d,d=S.to;l>0&&v.from<=o[l-1].toA;)h=o[l-1].fromA,f=o[l-1].fromB,l--,h<v.from&&(v=a.lineAt(h,QueryType$1.ByPosNoHeight,n,0,0));f+=v.from-h,h=v.from;let A=NodeBuilder.build(n.setDoc(c),e,f,g);a=a.replace(h,d,A)}return a.updateHeight(n,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let r=0,n=e.length,o=0,a=0;for(;;)if(r==n)if(o>a*2){let l=e[r-1];l.break?e.splice(--r,1,l.left,null,l.right):e.splice(--r,1,l.left,l.right),n+=1+l.break,o-=l.size}else if(a>o*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,a-=l.size}else break;else if(o<a){let l=e[r++];l&&(o+=l.size)}else{let l=e[--n];l&&(a+=l.size)}let c=0;return e[r-1]==null?(c=1,r--):e[r]==null&&(c=1,n++),new HeightMapBranch(HeightMap.of(e.slice(0,r)),c,HeightMap.of(e.slice(n)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,r,n){super(e,r),this.deco=n}blockAt(e,r,n,o){return new BlockInfo(o,this.length,n,this.height,this.deco||0)}lineAt(e,r,n,o,a){return this.blockAt(0,n,o,a)}forEachLine(e,r,n,o,a,c){e<=a+this.length&&r>=a&&c(this.blockAt(0,n,o,a))}updateHeight(e,r=0,n=!1,o){return o&&o.from<=r&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,r){super(e,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,r,n,o){return new BlockInfo(o,this.length,n,this.height,this.breaks)}replace(e,r,n){let o=n[0];return n.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(n)}updateHeight(e,r=0,n=!1,o){return o&&o.from<=r&&o.more?this.setHeight(e,o.heights[o.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,r){let n=e.doc.lineAt(r).number,o=e.doc.lineAt(r+this.length).number,a=o-n+1,c,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*a);c=h/a,this.length>a+1&&(l=(this.height-h)/(this.length-a-1))}else c=this.height/a;return{firstLine:n,lastLine:o,perLine:c,perChar:l}}blockAt(e,r,n,o){let{firstLine:a,lastLine:c,perLine:l,perChar:h}=this.heightMetrics(r,o);if(r.lineWrapping){let d=o+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),f=r.doc.lineAt(d),g=l+f.length*h,v=Math.max(n,e-g/2);return new BlockInfo(f.from,f.length,v,g,0)}else{let d=Math.max(0,Math.min(c-a,Math.floor((e-n)/l))),{from:f,length:g}=r.doc.line(a+d);return new BlockInfo(f,g,n+l*d,l,0)}}lineAt(e,r,n,o,a){if(r==QueryType$1.ByHeight)return this.blockAt(e,n,o,a);if(r==QueryType$1.ByPosNoHeight){let{from:S,to:A}=n.doc.lineAt(e);return new BlockInfo(S,A-S,0,0,0)}let{firstLine:c,perLine:l,perChar:h}=this.heightMetrics(n,a),d=n.doc.lineAt(e),f=l+d.length*h,g=d.number-c,v=o+l*g+h*(d.from-a-g);return new BlockInfo(d.from,d.length,Math.max(o,Math.min(v,o+this.height-f)),f,0)}forEachLine(e,r,n,o,a,c){e=Math.max(e,a),r=Math.min(r,a+this.length);let{firstLine:l,perLine:h,perChar:d}=this.heightMetrics(n,a);for(let f=e,g=o;f<=r;){let v=n.doc.lineAt(f);if(f==e){let A=v.number-l;g+=h*A+d*(e-a-A)}let S=h+d*v.length;c(new BlockInfo(v.from,v.length,g,S,0)),g+=S,f=v.to+1}}replace(e,r,n){let o=this.length-r;if(o>0){let a=n[n.length-1];a instanceof HeightMapGap?n[n.length-1]=new HeightMapGap(a.length+o):n.push(null,new HeightMapGap(o-1))}if(e>0){let a=n[0];a instanceof HeightMapGap?n[0]=new HeightMapGap(e+a.length):n.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(n)}decomposeLeft(e,r){r.push(new HeightMapGap(e-1),null)}decomposeRight(e,r){r.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,r=0,n=!1,o){let a=r+this.length;if(o&&o.from<=r+this.length&&o.more){let c=[],l=Math.max(r,o.from),h=-1;for(o.from>r&&c.push(new HeightMapGap(o.from-r-1).updateHeight(e,r));l<=a&&o.more;){let f=e.doc.lineAt(l).length;c.length&&c.push(null);let g=o.heights[o.index++];h==-1?h=g:Math.abs(g-h)>=Epsilon&&(h=-2);let v=new HeightMapText(f,g);v.outdated=!1,c.push(v),l+=f+1}l<=a&&c.push(null,new HeightMapGap(a-l).updateHeight(e,l));let d=HeightMap.of(c);return(h<0||Math.abs(d.height-this.height)>=Epsilon||Math.abs(h-this.heightMetrics(e,r).perLine)>=Epsilon)&&(e.heightChanged=!0),d}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,r,n){super(e.length+r+n.length,e.height+n.height,r|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,r,n,o){let a=n+this.left.height;return e<a?this.left.blockAt(e,r,n,o):this.right.blockAt(e,r,a,o+this.left.length+this.break)}lineAt(e,r,n,o,a){let c=o+this.left.height,l=a+this.left.length+this.break,h=r==QueryType$1.ByHeight?e<c:e<l,d=h?this.left.lineAt(e,r,n,o,a):this.right.lineAt(e,r,n,c,l);if(this.break||(h?d.to<l:d.from>l))return d;let f=r==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return h?d.join(this.right.lineAt(l,f,n,c,l)):this.left.lineAt(l,f,n,o,a).join(d)}forEachLine(e,r,n,o,a,c){let l=o+this.left.height,h=a+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,r,n,o,a,c),r>=h&&this.right.forEachLine(e,r,n,l,h,c);else{let d=this.lineAt(h,QueryType$1.ByPos,n,o,a);e<d.from&&this.left.forEachLine(e,d.from-1,n,o,a,c),d.to>=e&&d.from<=r&&c(d),r>d.to&&this.right.forEachLine(d.to+1,r,n,l,h,c)}}replace(e,r,n){let o=this.left.length+this.break;if(r<o)return this.balanced(this.left.replace(e,r,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,r-o,n));let a=[];e>0&&this.decomposeLeft(e,a);let c=a.length;for(let l of n)a.push(l);if(e>0&&mergeGaps(a,c-1),r<this.length){let l=a.length;this.decomposeRight(r,a),mergeGaps(a,l)}return HeightMap.of(a)}decomposeLeft(e,r){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,r);r.push(this.left),this.break&&(n++,e>=n&&r.push(null)),e>n&&this.right.decomposeLeft(e-n,r)}decomposeRight(e,r){let n=this.left.length,o=n+this.break;if(e>=o)return this.right.decomposeRight(e-o,r);e<n&&this.left.decomposeRight(e,r),this.break&&e<o&&r.push(null),r.push(this.right)}balanced(e,r){return e.size>2*r.size||r.size>2*e.size?HeightMap.of(this.break?[e,null,r]:[e,r]):(this.left=e,this.right=r,this.height=e.height+r.height,this.outdated=e.outdated||r.outdated,this.size=e.size+r.size,this.length=e.length+this.break+r.length,this)}updateHeight(e,r=0,n=!1,o){let{left:a,right:c}=this,l=r+a.length+this.break,h=null;return o&&o.from<=r+a.length&&o.more?h=a=a.updateHeight(e,r,n,o):a.updateHeight(e,r,n),o&&o.from<=l+c.length&&o.more?h=c=c.updateHeight(e,l,n,o):c.updateHeight(e,l,n),h?this.balanced(a,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(s,e){let r,n;s[e]==null&&(r=s[e-1])instanceof HeightMapGap&&(n=s[e+1])instanceof HeightMapGap&&s.splice(e-1,3,new HeightMapGap(r.length+1+n.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,r){this.pos=e,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,r){if(this.lineStart>-1){let n=Math.min(r,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(n-this.pos,-1)),this.writtenTo=n,r>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(e,r,n){if(e<r||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let c=r-e;n.block?this.addBlock(new HeightMapBlock(c,o,n)):(c||a||o>=relevantWidgetHeight)&&this.addLineDeco(o,a,c)}else r>e&&this.span(e,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=r,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,r){let n=new HeightMapGap(r-e);return this.oracle.doc.lineAt(e).to==r&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let r=new HeightMapText(0,-1);return this.nodes.push(r),r}addBlock(e){this.enterLine();let r=e.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r&&r.endSide>0&&(this.covering=e)}addLineDeco(e,r,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=r,this.writtenTo=this.pos=this.pos+n}finish(e){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,n),n+=o?o.length:1;return this.nodes}static build(e,r,n,o){let a=new NodeBuilder(n,e);return RangeSet.spans(r,n,o,a,0),a.finish(n)}}function heightRelevantDecoChanges(s,e,r){let n=new DecorationComparator;return RangeSet.compare(s,e,r,n,0),n.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,r,n,o){(e<r||n&&n.heightRelevant||o&&o.heightRelevant)&&addRange(e,r,this.changes,5)}}function visiblePixelRange(s,e){let r=s.getBoundingClientRect(),n=s.ownerDocument,o=n.defaultView||window,a=Math.max(0,r.left),c=Math.min(o.innerWidth,r.right),l=Math.max(0,r.top),h=Math.min(o.innerHeight,r.bottom);for(let d=s.parentNode;d&&d!=n.body;)if(d.nodeType==1){let f=d,g=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&g.overflow!="visible"){let v=f.getBoundingClientRect();a=Math.max(a,v.left),c=Math.min(c,v.right),l=Math.max(l,v.top),h=d==s.parentNode?v.bottom:Math.min(h,v.bottom)}d=g.position=="absolute"||g.position=="fixed"?f.offsetParent:f.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:a-r.left,right:Math.max(a,c)-r.left,top:l-(r.top+e),bottom:Math.max(l,h)-(r.top+e)}}function fullPixelRange(s,e){let r=s.getBoundingClientRect();return{left:0,right:r.right-r.left,top:e,bottom:r.bottom-(r.top+e)}}class LineGap{constructor(e,r,n){this.from=e,this.to=r,this.size=n}static same(e,r){if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++){let o=e[n],a=r[n];if(o.from!=a.from||o.to!=a.to||o.size!=a.size)return!1}return!0}draw(e,r){return Decoration.replace({widget:new LineGapWidget(this.size*(r?e.scaleY:e.scaleX),r)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,r){super(),this.size=e,this.vertical=r}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=e.facet(contentAttributes).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(r),this.stateDeco=e.facet(decorations).filter(n=>typeof n!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:r}=this.state.selection;for(let n=0;n<=1;n++){let o=n?r.head:r.anchor;if(!e.some(({from:a,to:c})=>o>=a&&o<=c)){let{from:a,to:c}=this.lineBlockAt(o);e.push(new Viewport(a,c))}}this.viewports=e.sort((n,o)=>n.from-o.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,r=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(f=>typeof f!="function");let o=e.changedRanges,a=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(n,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),c=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=c&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(r&&(r.range.head<h.from||r.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,r));let d=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),d&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let r=e.contentDOM,n=window.getComputedStyle(r),o=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Direction.RTL:Direction.LTR;let c=this.heightOracle.mustRefreshForWrapping(a),l=r.getBoundingClientRect(),h=c||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let d=0,f=0;if(l.width&&l.height){let O=l.width/r.offsetWidth,k=l.height/r.offsetHeight;(O>.995&&O<1.005||!isFinite(O)||Math.abs(l.width-r.offsetWidth)<1)&&(O=1),(k>.995&&k<1.005||!isFinite(k)||Math.abs(l.height-r.offsetHeight)<1)&&(k=1),(this.scaleX!=O||this.scaleY!=k)&&(this.scaleX=O,this.scaleY=k,d|=8,c=h=!0)}let g=(parseInt(n.paddingTop)||0)*this.scaleY,v=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=v)&&(this.paddingTop=g,this.paddingBottom=v,d|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8);let S=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let A=(this.printing?fullPixelRange:visiblePixelRange)(r,this.paddingTop),w=A.top-this.pixelViewport.top,m=A.bottom-this.pixelViewport.bottom;this.pixelViewport=A;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let x=l.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,d|=8),h){let O=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(O)&&(c=!0),c||o.lineWrapping&&Math.abs(x-this.contentDOMWidth)>o.charWidth){let{lineHeight:k,charWidth:P,textHeight:L}=e.docView.measureTextSize();c=k>0&&o.refresh(a,k,P,L,x/P,O),c&&(e.docView.minWidth=0,d|=8)}w>0&&m>0?f=Math.max(w,m):w<0&&m<0&&(f=Math.min(w,m)),o.heightChanged=!1;for(let k of this.viewports){let P=k.from==this.viewport.from?O:e.docView.measureVisibleLineHeights(k);this.heightMap=(c?HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,c,new MeasuredHeights(k.from,P))}o.heightChanged&&(d|=2)}let y=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(f,this.scrollTarget)),this.updateForViewport(),(d&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,r){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,a=this.heightOracle,{visibleTop:c,visibleBottom:l}=this,h=new Viewport(o.lineAt(c-n*1e3,QueryType$1.ByHeight,a,0,0).from,o.lineAt(l+(1-n)*1e3,QueryType$1.ByHeight,a,0,0).to);if(r){let{head:d}=r.range;if(d<h.from||d>h.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=o.lineAt(d,QueryType$1.ByPos,a,0,0),v;r.y=="center"?v=(g.top+g.bottom)/2-f/2:r.y=="start"||r.y=="nearest"&&d<h.from?v=g.top:v=g.bottom-f,h=new Viewport(o.lineAt(v-1e3/2,QueryType$1.ByHeight,a,0,0).from,o.lineAt(v+f+1e3/2,QueryType$1.ByHeight,a,0,0).to)}}return h}mapViewport(e,r){let n=r.mapPos(e.from,-1),o=r.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:r},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:l}=this;return(e==0||o<=c-Math.max(10,Math.min(-n,250)))&&(r==this.state.doc.length||a>=l+Math.max(10,Math.min(n,250)))&&o>c-2*1e3&&a<l+2*1e3}mapLineGaps(e,r){if(!e.length||r.empty)return e;let n=[];for(let o of e)r.touchesRange(o.from,o.to)||n.push(new LineGap(r.mapPos(o.from),r.mapPos(o.to),o.size));return n}ensureLineGaps(e,r){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,a=o>>1,c=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!n)return[];let l=[],h=(d,f,g,v)=>{if(f-d<a)return;let S=this.state.selection.main,A=[S.from];S.empty||A.push(S.to);for(let m of A)if(m>d&&m<f){h(d,m-10,g,v),h(m+10,f,g,v);return}let w=find(e,m=>m.from>=g.from&&m.to<=g.to&&Math.abs(m.from-d)<a&&Math.abs(m.to-f)<a&&!A.some(b=>m.from<b&&m.to>b));if(!w){if(f<g.to&&r&&n&&r.visibleRanges.some(m=>m.from<=f&&m.to>=f)){let m=r.moveToLineBoundary(EditorSelection.cursor(f),!1,!0).head;m>d&&(f=m)}w=new LineGap(d,f,this.gapSize(g,d,f,v))}l.push(w)};for(let d of this.viewportLines){if(d.length<c)continue;let f=lineStructure(d.from,d.to,this.stateDeco);if(f.total<c)continue;let g=this.scrollTarget?this.scrollTarget.range.head:null,v,S;if(n){let A=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(g!=null){let b=findFraction(f,g),x=((this.visibleBottom-this.visibleTop)/2+A)/d.height;w=b-x,m=b+x}else w=(this.visibleTop-d.top-A)/d.height,m=(this.visibleBottom-d.top+A)/d.height;v=findPosition(f,w),S=findPosition(f,m)}else{let A=f.total*this.heightOracle.charWidth,w=o*this.heightOracle.charWidth,m,b;if(g!=null){let x=findFraction(f,g),y=((this.pixelViewport.right-this.pixelViewport.left)/2+w)/A;m=x-y,b=x+y}else m=(this.pixelViewport.left-w)/A,b=(this.pixelViewport.right+w)/A;v=findPosition(f,m),S=findPosition(f,b)}v>d.from&&h(d.from,v,d,f),S<d.to&&h(S,d.to,d,f)}return l}gapSize(e,r,n,o){let a=findFraction(o,n)-findFraction(o,r);return this.heightOracle.lineWrapping?e.height*a:o.total*this.heightOracle.charWidth*a}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let r=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(o,a){r.push({from:o,to:a})},point(){}},20);let n=r.length!=this.visibleRanges.length||this.visibleRanges.some((o,a)=>o.from!=r[a].from||o.to!=r[a].to);return this.visibleRanges=r,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(r=>r.from<=e&&r.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let r=this.lineBlockAtHeight(e+8);return r.from>=this.viewport.from||this.viewportLines[0].top-e>200?r:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,r){this.from=e,this.to=r}}function lineStructure(s,e,r){let n=[],o=s,a=0;return RangeSet.spans(r,s,e,{span(){},point(c,l){c>o&&(n.push({from:o,to:c}),a+=c-o),o=l}},20),o<e&&(n.push({from:o,to:e}),a+=e-o),{total:a,ranges:n}}function findPosition({total:s,ranges:e},r){if(r<=0)return e[0].from;if(r>=1)return e[e.length-1].to;let n=Math.floor(s*r);for(let o=0;;o++){let{from:a,to:c}=e[o],l=c-a;if(n<=l)return a+n;n-=l}}function findFraction(s,e){let r=0;for(let{from:n,to:o}of s.ranges){if(e<=o){r+=e-n;break}r+=o-n}return r/s.total}function find(s,e){for(let r of s)if(e(r))return r}const IdScaler={toDOM(s){return s},fromDOM(s){return s},scale:1};class BigScaler{constructor(e,r,n){let o=0,a=0,c=0;this.viewports=n.map(({from:l,to:h})=>{let d=r.lineAt(l,QueryType$1.ByPos,e,0,0).top,f=r.lineAt(h,QueryType$1.ByPos,e,0,0).bottom;return o+=f-d,{from:l,to:h,top:d,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(r.height-o);for(let l of this.viewports)l.domTop=c+(l.top-a)*this.scale,c=l.domBottom=l.domTop+(l.bottom-l.top),a=l.bottom}toDOM(e){for(let r=0,n=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.top)return o+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,o=a.domBottom}}fromDOM(e){for(let r=0,n=0,o=0;;r++){let a=r<this.viewports.length?this.viewports[r]:null;if(!a||e<a.domTop)return n+(e-o)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,o=a.domBottom}}}function scaleBlock(s,e){if(e.scale==1)return s;let r=e.toDOM(s.top),n=e.toDOM(s.bottom);return new BlockInfo(s.from,s.length,r,n-r,Array.isArray(s._content)?s._content.map(o=>scaleBlock(o,e)):s._content)}const theme=Facet.define({combine:s=>s.join(" ")}),darkTheme=Facet.define({combine:s=>s.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(s,e,r){return new StyleModule(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,o=>{if(o=="&")return s;if(!r||!r[o])throw new RangeError(`Unsupported selector: ${o}`);return r[o]}):s+" "+n}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="￿";class DOMReader{constructor(e,r){this.points=e,this.text="",this.lineSeparator=r.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,r){if(!e)return this;let n=e.parentNode;for(let o=e;;){this.findPointBefore(n,o);let a=this.text.length;this.readNode(o);let c=o.nextSibling;if(c==r)break;let l=ContentView.get(o),h=ContentView.get(c);(l&&h?l.breakAfter:(l?l.breakAfter:isBlockElement(o))||isBlockElement(c)&&(o.nodeName!="BR"||o.cmIgnore)&&this.text.length>a)&&this.lineBreak(),o=c}return this.findPointBefore(n,r),this}readTextNode(e){let r=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,r.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,c=1,l;if(this.lineSeparator?(a=r.indexOf(this.lineSeparator,n),c=this.lineSeparator.length):(l=o.exec(r))&&(a=l.index,c=l[0].length),this.append(r.slice(n,a<0?r.length:a)),a<0)break;if(this.lineBreak(),c>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=c-1);n=a+c}}readNode(e){if(e.cmIgnore)return;let r=ContentView.get(e),n=r&&r.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let o=n.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,r){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==r&&(n.pos=this.text.length)}findPointInside(e,r){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(isAtEnd(e,n.node,n.offset)?r:0))}}function isAtEnd(s,e,r){for(;;){if(!e||r<maxOffset(e))return!1;if(e==s)return!0;r=domIndex(e)+1,e=e.parentNode}}function isBlockElement(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}let DOMPoint$1=class{constructor(e,r){this.node=e,this.offset=r,this.pos=-1}};class DOMChange{constructor(e,r,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:a,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=e.docView.domBoundsAround(r,n,0))){let l=a||c?[]:selectionPoints(e),h=new DOMReader(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=selectionFromPoints(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=a&&a.node==l.focusNode&&a.offset==l.focusOffset||!contains(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),d=c&&c.node==l.anchorNode&&c.offset==l.anchorOffset||!contains(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=EditorSelection.single(d,h)}}}function applyDOMChange(s,e){let r,{newSel:n}=e,o=s.state.selection.main,a=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:l}=e.bounds,h=o.from,d=null;(a===8||browser.android&&e.text.length<l-c)&&(h=o.to,d="end");let f=findDiff(s.state.doc.sliceString(c,l,LineBreakPlaceholder),e.text,h-c,d);f&&(browser.chrome&&a==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&f.toB--,r={from:c+f.from,to:c+f.toA,insert:Text$1.of(e.text.slice(f.from,f.toB).split(LineBreakPlaceholder))})}else n&&(!s.hasFocus&&s.state.facet(editable)||n.main.eq(o))&&(n=null);if(!r&&!n)return!1;if(!r&&e.typeOver&&!o.empty&&n&&n.main.empty?r={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,o.to)}:r&&r.from>=o.from&&r.to<=o.to&&(r.from!=o.from||r.to!=o.to)&&o.to-o.from-(r.to-r.from)<=4?r={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,r.from).append(r.insert).append(s.state.doc.slice(r.to,o.to))}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==o.head-1&&/^\. ?$/.test(r.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(n&&r.insert.length==2&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:o.from,to:o.to,insert:Text$1.of([" "])}):browser.chrome&&r&&r.from==r.to&&r.from==o.head&&r.insert.toString()==`
 `&&s.lineWrapping&&(n&&(n=EditorSelection.single(n.main.anchor-1,n.main.head-1)),r={from:o.from,to:o.to,insert:Text$1.of([" "])}),r){if(browser.ios&&s.inputState.flushIOSKey()||browser.android&&(r.from==o.from&&r.to==o.to&&r.insert.length==1&&r.insert.lines==2&&dispatchKey(s.contentDOM,"Enter",13)||(r.from==o.from-1&&r.to==o.to&&r.insert.length==0||a==8&&r.insert.length<r.to-r.from&&r.to>o.head)&&dispatchKey(s.contentDOM,"Backspace",8)||r.from==o.from&&r.to==o.to+1&&r.insert.length==0&&dispatchKey(s.contentDOM,"Delete",46)))return!0;let c=r.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let l,h=()=>l||(l=applyDefaultInsert(s,r,n));return s.state.facet(inputHandler$1).some(d=>d(s,r.from,r.to,c,h))||s.dispatch(h()),!0}else if(n&&!n.main.eq(o)){let c=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(c=!0),l=s.inputState.lastSelectionOrigin),s.dispatch({selection:n,scrollIntoView:c,userEvent:l}),!0}else return!1}function applyDefaultInsert(s,e,r){let n,o=s.state,a=o.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!r||r.main.empty&&r.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let l=a.from<e.from?o.sliceDoc(a.from,e.from):"",h=a.to>e.to?o.sliceDoc(e.to,a.to):"";n=o.replaceSelection(s.state.toText(l+e.insert.sliceString(0,void 0,s.state.lineBreak)+h))}else{let l=o.changes(e),h=r&&r.main.to<=l.newLength?r.main:void 0;if(o.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let d=s.state.sliceDoc(e.from,e.to),f,g=r&&findCompositionNode(s,r.main.head);if(g){let A=e.insert.length-(e.to-e.from);f={from:g.from,to:g.to-A}}else f=s.state.doc.lineAt(a.head);let v=a.to-e.to,S=a.to-a.from;n=o.changeByRange(A=>{if(A.from==a.from&&A.to==a.to)return{changes:l,range:h||A.map(l)};let w=A.to-v,m=w-d.length;if(A.to-A.from!=S||s.state.sliceDoc(m,w)!=d||A.to>=f.from&&A.from<=f.to)return{range:A};let b=o.changes({from:m,to:w,insert:e.insert}),x=A.to-a.to;return{changes:b,range:h?EditorSelection.range(Math.max(0,h.anchor+x),Math.max(0,h.head+x)):A.map(b)}})}else n={changes:l,selection:h&&o.selection.replaceRange(h)}}let c="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,c+=".compose",s.inputState.compositionFirstChange&&(c+=".start",s.inputState.compositionFirstChange=!1)),o.update(n,{userEvent:c,scrollIntoView:!0})}function findDiff(s,e,r,n){let o=Math.min(s.length,e.length),a=0;for(;a<o&&s.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==o&&s.length==e.length)return null;let c=s.length,l=e.length;for(;c>0&&l>0&&s.charCodeAt(c-1)==e.charCodeAt(l-1);)c--,l--;if(n=="end"){let h=Math.max(0,a-Math.min(c,l));r-=c+h-a}if(c<a&&s.length<e.length){let h=r<=a&&r>=c?a-r:0;a-=h,l=a+(l-c),c=a}else if(l<a){let h=r<=a&&r>=l?a-r:0;a-=h,c=a+(c-l),l=a}return{from:a,toA:c,toB:l}}function selectionPoints(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:r,anchorOffset:n,focusNode:o,focusOffset:a}=s.observer.selectionRange;return r&&(e.push(new DOMPoint$1(r,n)),(o!=r||a!=n)&&e.push(new DOMPoint$1(o,a))),e}function selectionFromPoints(s,e){if(s.length==0)return null;let r=s[0].pos,n=s.length==2?s[1].pos:r;return r>-1&&n>-1?EditorSelection.single(r+e,n+e):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(r=>{for(let n of r)this.queue.push(n);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&r.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((r,n)=>r!=e[n]))){this.gapIntersection.disconnect();for(let r of e)this.gapIntersection.observe(r);this.gaps=e}}onSelectionChange(e){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(editable)?n.root.activeElement!=this.dom:!hasSelection(n.dom,o))return;let a=o.anchorNode&&n.docView.nearest(o.anchorNode);if(a&&a.ignoreEvent(e)){r||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!n.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,r=browser.safari&&e.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!r||this.selectionRange.eq(r))return!1;let n=hasSelection(this.dom,r);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,r){this.selectionRange.set(e.node,e.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,r=null;for(let n=this.dom;n;)if(n.nodeType==1)!r&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:r||(r=this.scrollTargets.slice(0,e)),r&&r.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,e)),r){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=r)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,r){var n;if(!this.delayedAndroidKey){let o=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&dispatchKey(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let r=-1,n=-1,o=!1;for(let a of e){let c=this.readMutation(a);c&&(c.typeOver&&(o=!0),r==-1?{from:r,to:n}=c:(r=Math.min(c.from,r),n=Math.max(c.to,n)))}return{from:r,to:n,typeOver:o}}readChange(){let{from:e,to:r,typeOver:n}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new DOMChange(this.view,e,r,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let n=this.view.state,o=applyDOMChange(this.view,r);return this.view.state==n&&this.view.update([]),o}readMutation(e){let r=this.view.docView.nearest(e.target);if(!r||r.ignoreMutation(e))return null;if(r.markDirty(e.type=="attributes"),e.type=="attributes"&&(r.flags|=4),e.type=="childList"){let n=findChild(r,e.previousSibling||e.target.previousSibling,-1),o=findChild(r,e.nextSibling||e.target.nextSibling,1);return{from:n?r.posAfter(n):r.posAtStart,to:o?r.posBefore(o):r.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,r,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(s,e,r){for(;e;){let n=ContentView.get(e);if(n&&n.parent==s)return n;let o=e.parentNode;e=o!=s.dom?o:r>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(s){let e=null;function r(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",r,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",r,!0),!e)return null;let n=e.startContainer,o=e.startOffset,a=e.endContainer,c=e.endOffset,l=s.docView.domAtPos(s.state.selection.main.anchor);return isEquivalentPosition(l.node,l.offset,a,c)&&([n,o,a,c]=[a,c,n,o]),{anchorNode:n,anchorOffset:o,focusNode:a,focusOffset:c}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(n=>n.forEach(o=>r(o,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(n=>new PluginInstance(n));for(let n of this.plugins)n.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let r=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(r,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,n=!1,o,a=this.state;for(let v of e){if(v.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=v.state}if(this.destroyed){this.viewState.state=a;return}let c=this.hasFocus,l=0,h=null;e.some(v=>v.annotation(isFocusChange))?(this.inputState.notifiedFocused=c,l=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,h=focusChangeTransaction(a,c),h||(l=1));let d=this.observer.delayedAndroidKey,f=null;if(d?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(f=null)):this.observer.clear(),a.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(a);o=ViewUpdate.create(this,a,e),o.flags|=l;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(g&&(g=g.map(v.changes)),v.scrollIntoView){let{main:S}=v.state.selection;g=new ScrollTarget(S.empty?S:EditorSelection.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of v.effects)S.is(scrollIntoView$1)&&(g=S.value.clip(this.state))}this.viewState.update(o,g),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),r=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme)!=o.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||n||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let v of this.state.facet(updateListener))try{v(o)}catch(S){logException(this.state,S,"update listener")}(h||f)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),f&&!applyDOMChange(this,f)&&d.force&&dispatchKey(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let r=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(n=>new PluginInstance(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(e){let r=e.startState.facet(viewPlugin),n=e.state.facet(viewPlugin);if(r!=n){let o=[];for(let a of n){let c=r.indexOf(a);if(c<0)o.push(new PluginInstance(a));else{let l=this.plugins[c];l.mustUpdate=e,o.push(l)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this);r!=n&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let r=null,n=this.scrollDOM,o=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:c}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(c<0)if(isScrolledToBottom(n))a=-1,c=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(o);a=S.from,c=S.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let f=d.map(S=>{try{return S.read(this)}catch(A){return logException(this.state,A),BadMeasure}}),g=ViewUpdate.create(this,this.state,[]),v=!1;g.flags|=h,r?r.flags|=h:r=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),v=this.docView.update(g));for(let S=0;S<d.length;S++)if(f[S]!=BadMeasure)try{let A=d[S];A.write&&A.write(f[S],this)}catch(A){logException(this.state,A)}if(v&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let A=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-c;if(A>1||A<-1){o=o+A,n.scrollTop=o/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let l of this.state.facet(updateListener))l(r)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,r);let n=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,r),a=updateAttrs(this.dom,this.editorAttrs,e);return o||a});return this.editorAttrs=e,this.contentAttrs=r,n}showAnnouncements(e){let r=!0;for(let n of e)for(let o of n.effects)if(o.is(EditorView.announce)){r&&(this.announceDOM.textContent=""),r=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===e.key){this.measureRequests[r]=e;return}}this.measureRequests.push(e)}}plugin(e){let r=this.pluginMap.get(e);return(r===void 0||r&&r.spec!=e)&&this.pluginMap.set(e,r=this.plugins.find(n=>n.spec==e)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,r,n){return skipAtoms(this,e,moveByChar(this,e,r,n))}moveByGroup(e,r){return skipAtoms(this,e,moveByChar(this,e,r,n=>byGroup(this,e.head,n)))}moveToLineBoundary(e,r,n=!0){return moveToLineBoundary(this,e,r,n)}moveVertically(e,r,n){return skipAtoms(this,e,moveVertically(this,e,r,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,r=0){return this.docView.posFromDOM(e,r)}posAtCoords(e,r=!0){return this.readMeasured(),posAtCoords(this,e,r)}coordsAtPos(e,r=1){this.readMeasured();let n=this.docView.coordsAt(e,r);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(e),a=this.bidiSpans(o),c=a[BidiSpan.find(a,e-o.from,-1,r)];return flattenRect(n,c.dir==Direction.LTR==r>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let r=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==r&&(a.fresh||isolatesEq(a.isolates,n=getIsolatedRanges(this,e.from,e.to))))return a.order;n||(n=getIsolatedRanges(this,e.from,e.to));let o=computeOrder(e.text,r,n);return this.bidiCache.push(new CachedOrder(e.from,e.to,r,n,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,r={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:r}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(n.from),"start","start",n.top-e,r,!0))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,r){let n=StyleModule.newName(),o=[theme.of(n),styleModule.of(buildTheme(`.${n}`,e))];return r&&r.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var r;let n=e.querySelector(".cm-content"),o=n&&ContentView.get(n)||ContentView.get(e);return((r=o?.rootView)===null||r===void 0?void 0:r.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:s=>s.length?s[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,r,n,o,a,c){this.from=e,this.to=r,this.dir=n,this.isolates=o,this.fresh=a,this.order=c}static update(e,r){if(r.empty&&!e.some(a=>a.fresh))return e;let n=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let c=e[a];c.dir==o&&!r.touchesRange(c.from,c.to)&&n.push(new CachedOrder(r.mapPos(c.from,1),r.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return n}}function attrsFromFacet(s,e,r){for(let n=s.state.facet(e),o=n.length-1;o>=0;o--){let a=n[o],c=typeof a=="function"?a(s):a;c&&combineAttrs(c,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(s,e){const r=s.split(/-(?!$)/);let n=r[r.length-1];n=="Space"&&(n=" ");let o,a,c,l;for(let h=0;h<r.length-1;++h){const d=r[h];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))o=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))c=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return o&&(n="Alt-"+n),a&&(n="Ctrl-"+n),l&&(n="Meta-"+n),c&&(n="Shift-"+n),n}function modifiers(s,e,r){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),r!==!1&&e.shiftKey&&(s="Shift-"+s),s}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(s,e){return runHandlers(getKeymap(e.state),s,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(s){let e=s.facet(keymap),r=Keymaps.get(e);return r||Keymaps.set(e,r=buildKeymap(e.reduce((n,o)=>n.concat(o),[]))),r}function runScopeHandlers(s,e,r){return runHandlers(getKeymap(s.state),e,s,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(s,e=currentPlatform){let r=Object.create(null),n=Object.create(null),o=(c,l)=>{let h=n[c];if(h==null)n[c]=l;else if(h!=l)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},a=(c,l,h,d,f)=>{var g,v;let S=r[c]||(r[c]=Object.create(null)),A=l.split(/ (?!$)/).map(b=>normalizeKeyName(b,e));for(let b=1;b<A.length;b++){let x=A.slice(0,b).join(" ");o(x,!0),S[x]||(S[x]={preventDefault:!0,stopPropagation:!1,run:[y=>{let O=storedPrefix={view:y,prefix:x,scope:c};return setTimeout(()=>{storedPrefix==O&&(storedPrefix=null)},PrefixTimeout),!0}]})}let w=A.join(" ");o(w,!1);let m=S[w]||(S[w]={preventDefault:!1,stopPropagation:!1,run:((v=(g=S._any)===null||g===void 0?void 0:g.run)===null||v===void 0?void 0:v.slice())||[]});h&&m.run.push(h),d&&(m.preventDefault=!0),f&&(m.stopPropagation=!0)};for(let c of s){let l=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let d of l){let f=r[d]||(r[d]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let g in f)f[g].run.push(c.any)}let h=c[e]||c.key;if(h)for(let d of l)a(d,h,c.run,c.preventDefault,c.stopPropagation),c.shift&&a(d,"Shift-"+h,c.shift,c.preventDefault,c.stopPropagation)}return r}function runHandlers(s,e,r,n){let o=keyName(e),a=codePointAt(o,0),c=codePointSize(a)==o.length&&o!=" ",l="",h=!1,d=!1,f=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==n&&(l=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(d=!0,storedPrefix=null));let g=new Set,v=m=>{if(m){for(let b of m.run)if(!g.has(b)&&(g.add(b),b(r,e)))return m.stopPropagation&&(f=!0),!0;m.preventDefault&&(m.stopPropagation&&(f=!0),d=!0)}return!1},S=s[n],A,w;return S&&(v(S[l+modifiers(o,e,!c)])?h=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(A=base[e.keyCode])&&A!=o?(v(S[l+modifiers(A,e,!0)])||e.shiftKey&&(w=shift[e.keyCode])!=o&&w!=A&&v(S[l+modifiers(w,e,!1)]))&&(h=!0):c&&e.shiftKey&&v(S[l+modifiers(o,e,!0)])&&(h=!0),!h&&v(S._any)&&(h=!0)),d&&(h=!0),h&&f&&e.stopPropagation(),h}class RectangleMarker{constructor(e,r,n,o,a){this.className=e,this.left=r,this.top=n,this.width=o,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,r){return r.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,r,n){if(n.empty){let o=e.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let a=getBase(e);return[new RectangleMarker(r,o.left-a.left,o.top-a.top,null,o.bottom-o.top)]}else return rectanglesForRange(e,r,n)}}function getBase(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Direction.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function wrappedLine(s,e,r){let n=EditorSelection.cursor(e);return{from:Math.max(r.from,s.moveToLineBoundary(n,!1,!0).from),to:Math.min(r.to,s.moveToLineBoundary(n,!0,!0).from),type:BlockType.Text}}function rectanglesForRange(s,e,r){if(r.to<=s.viewport.from||r.from>=s.viewport.to)return[];let n=Math.max(r.from,s.viewport.from),o=Math.min(r.to,s.viewport.to),a=s.textDirection==Direction.LTR,c=s.contentDOM,l=c.getBoundingClientRect(),h=getBase(s),d=c.querySelector(".cm-line"),f=d&&window.getComputedStyle(d),g=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),v=l.right-(f?parseInt(f.paddingRight):0),S=blockAt(s,n),A=blockAt(s,o),w=S.type==BlockType.Text?S:null,m=A.type==BlockType.Text?A:null;if(w&&(s.lineWrapping||S.widgetLineBreaks)&&(w=wrappedLine(s,n,w)),m&&(s.lineWrapping||A.widgetLineBreaks)&&(m=wrappedLine(s,o,m)),w&&m&&w.from==m.from)return x(y(r.from,r.to,w));{let k=w?y(r.from,null,w):O(S,!1),P=m?y(null,r.to,m):O(A,!0),L=[];return(w||S).to<(m||A).from-(w&&m?1:0)||S.widgetLineBreaks>1&&k.bottom+s.defaultLineHeight/2<P.top?L.push(b(g,k.bottom,v,P.top)):k.bottom<P.top&&s.elementAtHeight((k.bottom+P.top)/2).type==BlockType.Text&&(k.bottom=P.top=(k.bottom+P.top)/2),x(k).concat(L).concat(x(P))}function b(k,P,L,M){return new RectangleMarker(e,k-h.left,P-h.top-.01,L-k,M-P+.01)}function x({top:k,bottom:P,horizontal:L}){let M=[];for(let B=0;B<L.length;B+=2)M.push(b(L[B],k,L[B+1],P));return M}function y(k,P,L){let M=1e9,B=-1e9,j=[];function F(Q,q,G,te,Y){let J=s.coordsAtPos(Q,Q==L.to?-2:2),K=s.coordsAtPos(G,G==L.from?2:-2);!J||!K||(M=Math.min(J.top,K.top,M),B=Math.max(J.bottom,K.bottom,B),Y==Direction.LTR?j.push(a&&q?g:J.left,a&&te?v:K.right):j.push(!a&&te?g:K.left,!a&&q?v:J.right))}let U=k??L.from,V=P??L.to;for(let Q of s.visibleRanges)if(Q.to>U&&Q.from<V)for(let q=Math.max(Q.from,U),G=Math.min(Q.to,V);;){let te=s.state.doc.lineAt(q);for(let Y of s.bidiSpans(te)){let J=Y.from+te.from,K=Y.to+te.from;if(J>=G)break;K>q&&F(Math.max(J,q),k==null&&J<=U,Math.min(K,G),P==null&&K>=V,Y.dir)}if(q=te.to+1,q>=G)break}return j.length==0&&F(U,k==null,V,P==null,s.textDirection),{top:M,bottom:B,horizontal:j}}function O(k,P){let L=l.top+(P?k.top:k.bottom);return{top:L,bottom:L,horizontal:[]}}}function sameMarker(s,e){return s.constructor==e.constructor&&s.eq(e)}class LayerView{constructor(e,r){this.view=e,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let r=0,n=e.facet(layerOrder);for(;r<n.length&&n[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:r}=this.view;(e!=this.scaleX||r!=this.scaleY)&&(this.scaleX=e,this.scaleY=r,this.dom.style.transform=`scale(${1/e}, ${1/r})`)}draw(e){if(e.length!=this.drawn.length||e.some((r,n)=>!sameMarker(r,this.drawn[n]))){let r=this.dom.firstChild,n=0;for(let o of e)o.update&&r&&o.constructor&&this.drawn[n].constructor&&o.update(r,this.drawn[n])?(r=r.nextSibling,n++):this.dom.insertBefore(o.draw(),r);for(;r;){let o=r.nextSibling;r.remove(),r=o}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(s){return[ViewPlugin.define(e=>new LayerView(e,s)),layerOrder.of(s)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(s){return combineConfig(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,r)=>Math.min(e,r),drawRangeCursor:(e,r)=>e||r})}});function drawSelection(s={}){return[selectionConfig.of(s),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(s){return s.startState.facet(selectionConfig)!=s.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(s){let{state:e}=s,r=e.facet(selectionConfig),n=[];for(let o of e.selection.ranges){let a=o==e.selection.main;if(o.empty?!a||CanHidePrimary:r.drawRangeCursor){let c=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=o.empty?o:EditorSelection.cursor(o.head,o.head>o.anchor?-1:1);for(let h of RectangleMarker.forRange(s,c,l))n.push(h)}}return n},update(s,e){s.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=configChanged(s);return r&&setBlinkRate(s.state,e),s.docChanged||s.selectionSet||r},mount(s,e){setBlinkRate(e.state,s)},class:"cm-cursorLayer"});function setBlinkRate(s,e){e.style.animationDuration=s.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(s,"cm-selectionBackground",e)).reduce((e,r)=>e.concat(r))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||configChanged(s)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important",themeSpec[".cm-content"]={caretColor:"transparent !important"});const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(s,e){return s==null?null:e.mapPos(s)}}),dropCursorPos=StateField.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((r,n)=>n.is(setDropCursorPos)?n.value:r,s)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let r=s.state.field(dropCursorPos);r==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(dropCursorPos)!=r||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(dropCursorPos),r=e!=null&&s.coordsAtPos(e);if(!r)return null;let n=s.scrollDOM.getBoundingClientRect();return{left:r.left-n.left+s.scrollDOM.scrollLeft*s.scaleX,top:r.top-n.top+s.scrollDOM.scrollTop*s.scaleY,height:r.bottom-r.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:r}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/r+"px",this.cursor.style.height=s.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(dropCursorPos)!=s&&this.view.dispatch({effects:setDropCursorPos.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(s,e,r,n,o){e.lastIndex=0;for(let a=s.iterRange(r,n),c=r,l;!a.next().done;c+=a.value.length)if(!a.lineBreak)for(;l=e.exec(a.value);)o(c+l.index,l)}function matchRanges(s,e){let r=s.visibleRanges;if(r.length==1&&r[0].from==s.viewport.from&&r[0].to==s.viewport.to)return r;let n=[];for(let{from:o,to:a}of r)o=Math.max(s.state.doc.lineAt(o).from,o-e),a=Math.min(s.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=o?n[n.length-1].to=a:n.push({from:o,to:a});return n}class MatchDecorator{constructor(e){const{regexp:r,decoration:n,decorate:o,boundary:a,maxLength:c=1e3}=e;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,o)this.addMatch=(l,h,d,f)=>o(f,d,d+l[0].length,l,h);else if(typeof n=="function")this.addMatch=(l,h,d,f)=>{let g=n(l,h,d);g&&f(d,d+l[0].length,g)};else if(n)this.addMatch=(l,h,d,f)=>f(d,d+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=c}createDeco(e){let r=new RangeSetBuilder,n=r.add.bind(r);for(let{from:o,to:a}of matchRanges(e,this.maxLength))iterMatches(e.state.doc,this.regexp,o,a,(c,l)=>this.addMatch(l,e,c,n));return r.finish()}updateDeco(e,r){let n=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((a,c,l,h)=>{h>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),o=Math.max(h,o))}),e.viewportChanged||o-n>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,r.map(e.changes),n,o):r}updateRange(e,r,n,o){for(let a of e.visibleRanges){let c=Math.max(a.from,n),l=Math.min(a.to,o);if(l>c){let h=e.state.doc.lineAt(c),d=h.to<l?e.state.doc.lineAt(l):h,f=Math.max(a.from,h.from),g=Math.min(a.to,d.to);if(this.boundary){for(;c>h.from;c--)if(this.boundary.test(h.text[c-1-h.from])){f=c;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){g=l;break}}let v=[],S,A=(w,m,b)=>v.push(b.range(w,m));if(h==d)for(this.regexp.lastIndex=f-h.from;(S=this.regexp.exec(h.text))&&S.index<g-h.from;)this.addMatch(S,e,S.index+h.from,A);else iterMatches(e.state.doc,this.regexp,f,g,(w,m)=>this.addMatch(m,e,w,A));r=r.update({filterFrom:f,filterTo:g,filter:(w,m)=>w<f||m>g,add:v})}}return r}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var s;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let e=document.body.style;_supportsTabSize=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(s){let e=combineConfig(s,{render:null,specialChars:Specials,addSpecialChars:null});return(e.replaceTabs=!supportsTabSize())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,UnicodeRegexpSupport)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,UnicodeRegexpSupport)),e}});function highlightSpecialChars(s={}){return[specialCharConfig.of(s),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new MatchDecorator({regexp:s.specialChars,decoration:(e,r,n)=>{let{doc:o}=r.state,a=codePointAt(e[0],0);if(a==9){let c=o.lineAt(n),l=r.state.tabSize,h=countColumn(c.text,l,n-c.from);return Decoration.replace({widget:new TabWidget((l-h%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=Decoration.replace({widget:new SpecialCharWidget(s,a)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(specialCharConfig);s.startState.facet(specialCharConfig)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const DefaultPlaceholder="•";function placeholder$1(s){return s>=32?DefaultPlaceholder:s==10?"␤":String.fromCharCode(9216+s)}class SpecialCharWidget extends WidgetType{constructor(e,r){super(),this.options=e,this.code=r}eq(e){return e.code==this.code}toDOM(e){let r=placeholder$1(this.code),n=e.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,r);if(o)return o;let a=document.createElement("span");return a.textContent=r,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,r=[];for(let n of s.state.selection.ranges){let o=s.lineBlockAt(n.head);o.from>e&&(r.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(r)}},{decorations:s=>s.decorations}),MaxOff=2e3;function rectangleFor(s,e,r){let n=Math.min(e.line,r.line),o=Math.max(e.line,r.line),a=[];if(e.off>MaxOff||r.off>MaxOff||e.col<0||r.col<0){let c=Math.min(e.off,r.off),l=Math.max(e.off,r.off);for(let h=n;h<=o;h++){let d=s.doc.line(h);d.length<=l&&a.push(EditorSelection.range(d.from+c,d.to+l))}}else{let c=Math.min(e.col,r.col),l=Math.max(e.col,r.col);for(let h=n;h<=o;h++){let d=s.doc.line(h),f=findColumn(d.text,c,s.tabSize,!0);if(f<0)a.push(EditorSelection.cursor(d.to));else{let g=findColumn(d.text,l,s.tabSize);a.push(EditorSelection.range(d.from+f,d.from+g))}}}return a}function absoluteColumn(s,e){let r=s.coordsAtPos(s.viewport.from);return r?Math.round(Math.abs((r.left-e)/s.defaultCharacterWidth)):-1}function getPos(s,e){let r=s.posAtCoords({x:e.clientX,y:e.clientY},!1),n=s.state.doc.lineAt(r),o=r-n.from,a=o>MaxOff?-1:o==n.length?absoluteColumn(s,e.clientX):countColumn(n.text,s.state.tabSize,r-n.from);return{line:n.number,col:a,off:o}}function rectangleSelectionStyle(s,e){let r=getPos(s,e),n=s.state.selection;return r?{update(o){if(o.docChanged){let a=o.changes.mapPos(o.startState.doc.line(r.line).from),c=o.state.doc.lineAt(a);r={line:c.number,col:r.col,off:Math.min(r.off,c.length)},n=n.map(o.changes)}},get(o,a,c){let l=getPos(s,o);if(!l)return n;let h=rectangleFor(s.state,r,l);return h.length?c?EditorSelection.create(h.concat(n.ranges)):EditorSelection.create(h):n}}:null}function rectangularSelection(s){let e=s?.eventFilter||(r=>r.altKey&&r.button==0);return EditorView.mouseSelectionStyle.of((r,n)=>e(n)?rectangleSelectionStyle(r,n):null)}const keys={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(s={}){let[e,r]=keys[s.key||"Alt"],n=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.isDown=!1}set(o){this.isDown!=o&&(this.isDown=o,this.view.update([]))}},{eventObservers:{keydown(o){this.set(o.keyCode==e||r(o))},keyup(o){(o.keyCode==e||!r(o))&&this.set(!1)},mousemove(o){this.set(r(o))}}});return[n,EditorView.contentAttributes.of(o=>{var a;return!((a=o.plugin(n))===null||a===void 0)&&a.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(e,r,n){this.facet=r,this.createTooltipView=n,this.input=e.state.facet(r),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(n)}update(e,r){var n;let o=e.state.facet(this.facet),a=o.filter(h=>h);if(o===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let c=[],l=r?[]:null;for(let h=0;h<a.length;h++){let d=a[h],f=-1;if(d){for(let g=0;g<this.tooltips.length;g++){let v=this.tooltips[g];v&&v.create==d.create&&(f=g)}if(f<0)c[h]=this.createTooltipView(d),l&&(l[h]=!!d.above);else{let g=c[h]=this.tooltipViews[f];l&&(l[h]=r[f]),g.update&&g.update(e)}}}for(let h of this.tooltipViews)c.indexOf(h)<0&&(h.dom.remove(),(n=h.destroy)===null||n===void 0||n.call(h));return r&&(l.forEach((h,d)=>r[d]=h),r.length=l.length),this.input=o,this.tooltips=a,this.tooltipViews=c,!0}}function windowSpace(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const tooltipConfig=Facet.define({combine:s=>{var e,r,n;return{position:browser.ios?"absolute":((e=s.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((r=s.find(o=>o.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((n=s.find(o=>o.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(s,showTooltip,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let r=e||s.geometryChanged,n=s.state.facet(tooltipConfig);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;r=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=Outside,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(s=r.destroy)===null||s===void 0||s.call(r);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect(),e=1,r=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(browser.gecko)n=o.offsetParent!=this.container.ownerDocument.body;else if(this.view.scaleX!=1||this.view.scaleY!=1)n=!0;else if(o.style.top==Outside&&o.style.left=="0px"){let a=o.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(e=o.width/this.parent.offsetWidth,r=o.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:r}=this.view.viewState);return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((o,a)=>{let c=this.manager.tooltipViews[a];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:r,makeAbsolute:n}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:r,space:n,scaleX:o,scaleY:a}=s,c=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:f}=d,g=s.pos[l],v=s.size[l];if(!g||g.bottom<=Math.max(r.top,n.top)||g.top>=Math.min(r.bottom,n.bottom)||g.right<Math.max(r.left,n.left)-.1||g.left>Math.min(r.right,n.right)+.1){f.style.top=Outside;continue}let S=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,A=S?7:0,w=v.right-v.left,m=(e=knownHeight.get(d))!==null&&e!==void 0?e:v.bottom-v.top,b=d.offset||noOffset,x=this.view.textDirection==Direction.LTR,y=v.width>n.right-n.left?x?n.left:n.right-v.width:x?Math.min(g.left-(S?14:0)+b.x,n.right-w):Math.max(n.left,g.left-w+(S?14:0)-b.x),O=this.above[l];!h.strictSide&&(O?g.top-(v.bottom-v.top)-b.y<n.top:g.bottom+(v.bottom-v.top)+b.y>n.bottom)&&O==n.bottom-g.bottom>g.top-n.top&&(O=this.above[l]=!O);let k=(O?g.top-n.top:n.bottom-g.bottom)-A;if(k<m&&d.resize!==!1){if(k<this.view.defaultLineHeight){f.style.top=Outside;continue}knownHeight.set(d,m),f.style.height=(m=k)/a+"px"}else f.style.height&&(f.style.height="");let P=O?g.top-m-A-b.y:g.bottom+A+b.y,L=y+w;if(d.overlap!==!0)for(let M of c)M.left<L&&M.right>y&&M.top<P+m&&M.bottom>P&&(P=O?M.top-m-2-A:M.bottom+A+2);if(this.position=="absolute"?(f.style.top=(P-s.parent.top)/a+"px",f.style.left=(y-s.parent.left)/o+"px"):(f.style.top=P/a+"px",f.style.left=y/o+"px"),S){let M=g.left+(x?b.x:-b.x)-(y+14-7);S.style.left=M/o+"px"}d.overlap!==!0&&c.push({left:y,top:P,right:L,bottom:P+m}),f.classList.toggle("cm-tooltip-above",O),f.classList.toggle("cm-tooltip-below",!O),d.positioned&&d.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{static create(e){return new HoverTooltipHost(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,r=>this.createHostedView(r))}createHostedView(e){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(r.dom),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let r of this.manager.tooltipViews)r.mount&&r.mount(e);this.mounted=!0}positioned(e){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let r of this.manager.tooltipViews)(e=r.destroy)===null||e===void 0||e.call(r)}passProp(e){let r;for(let n of this.manager.tooltipViews){let o=n[e];if(o!==void 0){if(r===void 0)r=o;else if(r!==o)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],s=>{let e=s.facet(showHoverTooltip).filter(r=>r);return e.length===0?null:{pos:Math.min(...e.map(r=>r.pos)),end:Math.max(...e.map(r=>{var n;return(n=r.end)!==null&&n!==void 0?n:r.pos})),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(r=>r.arrow)}});class HoverPlugin{constructor(e,r,n,o,a){this.view=e,this.source=r,this.field=n,this.setHover=o,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:r}=this,n=e.docView.nearest(r.target);if(!n)return;let o,a=1;if(n instanceof WidgetView)o=n.posAtStart;else{if(o=e.posAtCoords(r),o==null)return;let l=e.coordsAtPos(o);if(!l||r.y<l.top||r.y>l.bottom||r.x<l.left-e.defaultCharacterWidth||r.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(o)).find(f=>f.from<=o&&f.to>=o),d=h&&h.dir==Direction.RTL?-1:1;a=r.x<l.left?-d:d}let c=this.source(e,o,a);if(c?.then){let l=this.pending={pos:o};c.then(h=>{this.pending==l&&(this.pending=null,h&&e.dispatch({effects:this.setHover.of(h)}))},h=>logException(e.state,h,"hover tooltip"))}else c&&e.dispatch({effects:this.setHover.of(c)})}get tooltip(){let e=this.view.plugin(tooltipPlugin),r=e?e.manager.tooltips.findIndex(n=>n.create==HoverTooltipHost.create):-1;return r>-1?e.manager.tooltipViews[r]:null}mousemove(e){var r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:o}=this;if(n&&o&&!isInTooltip(o.dom,e)||this.pending){let{pos:a}=n||this.pending,c=(r=n?.end)!==null&&r!==void 0?r:a;(a==c?this.view.posAtCoords(this.lastMove)!=a:!isOverRange(this.view,a,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let r=n=>{e.removeEventListener("mouseleave",r),this.active&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(s,e){let r=s.getBoundingClientRect();return e.clientX>=r.left-tooltipMargin&&e.clientX<=r.right+tooltipMargin&&e.clientY>=r.top-tooltipMargin&&e.clientY<=r.bottom+tooltipMargin}function isOverRange(s,e,r,n,o,a){let c=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(c.left>n||c.right<n||c.top>o||Math.min(c.bottom,l)<o)return!1;let h=s.posAtCoords({x:n,y:o},!1);return h>=e&&h<=r}function hoverTooltip(s,e={}){let r=StateEffect.define(),n=StateField.define({create(){return null},update(o,a){if(o&&(e.hideOnChange&&(a.docChanged||a.selection)||e.hideOn&&e.hideOn(a,o)))return null;if(o&&a.docChanged){let c=a.changes.mapPos(o.pos,-1,MapMode.TrackDel);if(c==null)return null;let l=Object.assign(Object.create(null),o);l.pos=c,o.end!=null&&(l.end=a.changes.mapPos(o.end)),o=l}for(let c of a.effects)c.is(r)&&(o=c.value),c.is(closeHoverTooltipEffect)&&(o=null);return o},provide:o=>showHoverTooltip.from(o)});return[n,ViewPlugin.define(o=>new HoverPlugin(o,s,n,r,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(s,e){let r=s.plugin(tooltipPlugin);if(!r)return null;let n=r.manager.tooltips.indexOf(e);return n<0?null:r.manager.tooltipViews[n]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(s){let e,r;for(let n of s)e=e||n.topContainer,r=r||n.bottomContainer;return{topContainer:e,bottomContainer:r}}});function getPanel(s,e){let r=s.plugin(panelPlugin),n=r?r.specs.indexOf(e):-1;return n>-1?r.panels[n]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(s){this.input=s.state.facet(showPanel),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(s));let e=s.state.facet(panelConfig);this.top=new PanelGroup(s,!0,e.topContainer),this.bottom=new PanelGroup(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(s){let e=s.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=s.state.facet(showPanel);if(r!=this.input){let n=r.filter(h=>h),o=[],a=[],c=[],l=[];for(let h of n){let d=this.specs.indexOf(h),f;d<0?(f=h(s.view),l.push(f)):(f=this.panels[d],f.update&&f.update(s)),o.push(f),(f.top?a:c).push(f)}this.specs=n,this.panels=o,this.top.sync(a),this.bottom.sync(c);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>EditorView.scrollMargins.of(e=>{let r=e.plugin(s);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(e,r,n){this.view=e,this.top=r,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let r of this.panels)r.destroy&&e.indexOf(r)<0&&r.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let e=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(s){let e=s.nextSibling;return s.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(s){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),s))]}const unfixGutters=Facet.define({combine:s=>s.some(e=>e)});function gutters(s){let e=[gutterView];return s&&s.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(activeGutters).map(e=>new SingleGutterView(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,r=s.view.viewport,n=Math.min(e.to,r.to)-Math.max(e.from,r.from);this.syncGutters(n<(r.to-r.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let r=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),n=[],o=this.gutters.map(a=>new UpdateContext(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let c=!0;for(let l of a.type)if(l.type==BlockType.Text&&c){advanceCursor(r,n,l.from);for(let h of o)h.line(this.view,l,n);c=!1}else if(l.widget)for(let h of o)h.widget(this.view,l)}else if(a.type==BlockType.Text){advanceCursor(r,n,a.from);for(let c of o)c.line(this.view,a,n)}else if(a.widget)for(let c of o)c.widget(this.view,a);for(let a of o)a.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(activeGutters),r=s.state.facet(activeGutters),n=s.docChanged||s.heightChanged||s.viewportChanged||!RangeSet.eq(s.startState.facet(gutterLineClass),s.state.facet(gutterLineClass),s.view.viewport.from,s.view.viewport.to);if(e==r)for(let o of this.gutters)o.update(s)&&(n=!0);else{n=!0;let o=[];for(let a of r){let c=e.indexOf(a);c<0?o.push(new SingleGutterView(this.view,a)):(this.gutters[c].update(s),o.push(this.gutters[c]))}for(let a of this.gutters)a.dom.remove(),o.indexOf(a)<0&&a.destroy();for(let a of o)this.dom.appendChild(a.dom);this.gutters=o}return n}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>EditorView.scrollMargins.of(e=>{let r=e.plugin(s);return!r||r.gutters.length==0||!r.fixed?null:e.textDirection==Direction.LTR?{left:r.dom.offsetWidth*e.scaleX}:{right:r.dom.offsetWidth*e.scaleX}})});function asArray(s){return Array.isArray(s)?s:[s]}function advanceCursor(s,e,r){for(;s.value&&s.from<=r;)s.from==r&&e.push(s.value),s.next()}class UpdateContext{constructor(e,r,n){this.gutter=e,this.height=n,this.i=0,this.cursor=RangeSet.iter(e.markers,r.from)}addElement(e,r,n){let{gutter:o}=this,a=(r.top-this.height)/e.scaleY,c=r.height/e.scaleY;if(this.i==o.elements.length){let l=new GutterElement(e,c,a,n);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,c,a,n);this.height=r.bottom,this.i++}line(e,r,n){let o=[];advanceCursor(this.cursor,o,r.from),n.length&&(o=o.concat(n));let a=this.gutter.config.lineMarker(e,r,o);a&&o.unshift(a);let c=this.gutter;o.length==0&&!c.config.renderEmptyElements||this.addElement(e,r,o)}widget(e,r){let n=this.gutter.config.widgetMarker(e,r.widget,r);n&&this.addElement(e,r,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let r=e.elements.pop();e.dom.removeChild(r.dom),r.destroy()}}}class SingleGutterView{constructor(e,r){this.view=e,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in r.domEventHandlers)this.dom.addEventListener(n,o=>{let a=o.target,c;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let h=a.getBoundingClientRect();c=(h.top+h.bottom)/2}else c=o.clientY;let l=e.lineBlockAtHeight(c-e.documentTop);r.domEventHandlers[n](e,l,o)&&o.preventDefault()});this.markers=asArray(r.markers(e)),r.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[r.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let r=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let n=e.view.viewport;return!RangeSet.eq(this.markers,r,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,r,n,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,r,n,o)}update(e,r,n,o){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,r){let n="cm-gutterElement",o=this.dom.firstChild;for(let a=0,c=0;;){let l=c,h=a<r.length?r[a++]:null,d=!1;if(h){let f=h.elementClass;f&&(n+=" "+f);for(let g=c;g<this.markers.length;g++)if(this.markers[g].compare(h)){l=g,d=!0;break}}else l=this.markers.length;for(;c<l;){let f=this.markers[c++];if(f.toDOM){f.destroy(o);let g=o.nextSibling;o.remove(),o=g}}if(!h)break;h.toDOM&&(d?o=o.nextSibling:this.dom.insertBefore(h.toDOM(e),o)),d&&c++}this.dom.className=n,this.markers=r}destroy(){this.setMarkers(null,[])}}function sameMarkers(s,e){if(s.length!=e.length)return!1;for(let r=0;r<s.length;r++)if(!s[r].compare(e[r]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(s){return combineConfig(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,r){let n=Object.assign({},e);for(let o in r){let a=n[o],c=r[o];n[o]=a?(l,h,d)=>a(l,h,d)||c(l,h,d):c}return n}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(s,e){return s.state.facet(lineNumberConfig).formatNumber(e,s.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,r,n){return n.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(r.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,r){let n=formatNumber(r.view,maxLineNumber(r.view.state.doc.lines));return n==e.number?e:new NumberMarker(n)},domEventHandlers:s.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(s={}){return[lineNumberConfig.of(s),gutters(),lineNumberGutter]}function maxLineNumber(s){let e=9;for(;e<s;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],s=>{let e=[],r=-1;for(let n of s.selection.ranges){let o=s.doc.lineAt(n.head).from;o>r&&(r=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,r){this.from=e,this.to=r}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}}NodeProp.closedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.group=new NodeProp({deserialize:s=>s.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(e,r,n){this.tree=e,this.overlay=r,this.parser=n}static get(e){return e&&e.props&&e.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(e,r,n,o=0){this.name=e,this.props=r,this.id=n,this.flags=o}static define(e){let r=e.props&&e.props.length?Object.create(null):noProps,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",r,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(o)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[a[0].id]=a[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(NodeProp.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let o of n.split(" "))r[o]=e[n];return n=>{for(let o=n.prop(NodeProp.group),a=-1;a<(o?o.length:0);a++){let c=r[a<0?n.name:o[a]];if(c)return c}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let o=null;for(let a of e){let c=a(n);c&&(o||(o=Object.assign({},n.props)),o[c[0].id]=c[1])}r.push(o?new NodeType(n.name,o,n.id,n.flags):n)}return new NodeSet(r)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,r,n,o,a){if(this.type=e,this.children=r,this.positions=n,this.length=o,this.props=null,a&&a.length){this.props=Object.create(null);for(let[c,l]of a)this.props[typeof c=="number"?c:c.id]=l}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let r="";for(let n of this.children){let o=n.toString();o&&(r&&(r+=","),r+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,r=0,n=0){let o=CachedNode.get(this)||this.topNode,a=new TreeCursor(o);return a.moveTo(e,r),CachedNode.set(this,a._tree),a}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,r=0){let n=resolveNode(CachedNode.get(this)||this.topNode,e,r,!1);return CachedNode.set(this,n),n}resolveInner(e,r=0){let n=resolveNode(CachedInnerNode.get(this)||this.topNode,e,r,!0);return CachedInnerNode.set(this,n),n}resolveStack(e,r=0){return stackIterator(this,e,r)}iterate(e){let{enter:r,leave:n,from:o=0,to:a=this.length}=e,c=e.mode||0,l=(c&IterMode.IncludeAnonymous)>0;for(let h=this.cursor(c|IterMode.IncludeAnonymous);;){let d=!1;if(h.from<=a&&h.to>=o&&(!l&&h.type.isAnonymous||r(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(l||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let r in this.props)e.push([+r,this.props[r]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,o)=>new Tree(this.type,r,n,o,this.propValues),e.makeTree||((r,n,o)=>new Tree(NodeType.none,r,n,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,r,n){this.buffer=e,this.length=r,this.set=n}get type(){return NodeType.none}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],o=this.set.types[r],a=o.name;if(/\W/.test(a)&&!o.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let c=[];for(;e<n;)c.push(this.childString(e)),e=this.buffer[e+3];return a+"("+c.join(",")+")"}findChild(e,r,n,o,a){let{buffer:c}=this,l=-1;for(let h=e;h!=r&&!(checkSide(a,o,c[h+1],c[h+2])&&(l=h,n>0));h=c[h+3]);return l}slice(e,r,n){let o=this.buffer,a=new Uint16Array(r-e),c=0;for(let l=e,h=0;l<r;){a[h++]=o[l++],a[h++]=o[l++]-n;let d=a[h++]=o[l++]-n;a[h++]=o[l++]-e,c=Math.max(c,d)}return new TreeBuffer(a,c,this.set)}}function checkSide(s,e,r,n){switch(s){case-2:return r<e;case-1:return n>=e&&r<e;case 0:return r<e&&n>e;case 1:return r<=e&&n>e;case 2:return n>e;case 4:return!0}}function resolveNode(s,e,r,n){for(var o;s.from==s.to||(r<1?s.from>=e:s.from>e)||(r>-1?s.to<=e:s.to<e);){let c=!n&&s instanceof TreeNode&&s.index<0?null:s.parent;if(!c)return s;s=c}let a=n?0:IterMode.IgnoreOverlays;if(n)for(let c=s,l=c.parent;l;c=l,l=c.parent)c instanceof TreeNode&&c.index<0&&((o=l.enter(e,r,a))===null||o===void 0?void 0:o.from)!=c.from&&(s=l);for(;;){let c=s.enter(e,r,a);if(!c)return s;s=c}}class BaseNode{cursor(e=0){return new TreeCursor(this,e)}getChild(e,r=null,n=null){let o=getChildren(this,e,r,n);return o.length?o[0]:null}getChildren(e,r=null,n=null){return getChildren(this,e,r,n)}resolve(e,r=0){return resolveNode(this,e,r,!1)}resolveInner(e,r=0){return resolveNode(this,e,r,!0)}matchContext(e){return matchNodeContext(this,e)}enterUnfinishedNodesBefore(e){let r=this.childBefore(e),n=this;for(;r;){let o=r.lastChild;if(!o||o.to!=r.to)break;o.type.isError&&o.from==o.to?(n=r,r=o.prevSibling):r=o}return n}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(e,r,n,o){super(),this._tree=e,this.from=r,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,r,n,o,a=0){for(let c=this;;){for(let{children:l,positions:h}=c._tree,d=r>0?l.length:-1;e!=d;e+=r){let f=l[e],g=h[e]+c.from;if(checkSide(o,n,g,g+f.length)){if(f instanceof TreeBuffer){if(a&IterMode.ExcludeBuffers)continue;let v=f.findChild(0,f.buffer.length,r,n-g,o);if(v>-1)return new BufferNode(new BufferContext(c,f,e,g),null,v)}else if(a&IterMode.IncludeAnonymous||!f.type.isAnonymous||hasChild(f)){let v;if(!(a&IterMode.IgnoreMounts)&&(v=MountedTree.get(f))&&!v.overlay)return new TreeNode(v.tree,g,e,c);let S=new TreeNode(f,g,e,c);return a&IterMode.IncludeAnonymous||!S.type.isAnonymous?S:S.nextChild(r<0?f.children.length-1:0,r,n,o)}}}if(a&IterMode.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+r:e=r<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,r,n=0){let o;if(!(n&IterMode.IgnoreOverlays)&&(o=MountedTree.get(this._tree))&&o.overlay){let a=e-this.from;for(let{from:c,to:l}of o.overlay)if((r>0?c<=a:c<a)&&(r<0?l>=a:l>a))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,r,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(s,e,r,n){let o=s.cursor(),a=[];if(!o.firstChild())return a;if(r!=null){for(;!o.type.is(r);)if(!o.nextSibling())return a}for(;;){if(n!=null&&o.type.is(n))return a;if(o.type.is(e)&&a.push(o.node),!o.nextSibling())return n==null?a:[]}}function matchNodeContext(s,e,r=e.length-1){for(let n=s.parent;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}class BufferContext{constructor(e,r,n,o){this.parent=e,this.buffer=r,this.index=n,this.start=o}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,r,n){super(),this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,r,n){let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.context.start,n);return a<0?null:new BufferNode(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,r,n=0){if(n&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,a=o.findChild(this.index+4,o.buffer[this.index+3],r>0?1:-1,e-this.context.start,r);return a<0?null:new BufferNode(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],r=[],{buffer:n}=this.context,o=this.index+4,a=n.buffer[this.index+3];if(a>o){let c=n.buffer[this.index+1];e.push(n.slice(o,a,c)),r.push(0)}return new Tree(this.type,e,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(s){if(!s.length)return null;let e=0,r=s[0];for(let a=1;a<s.length;a++){let c=s[a];(c.from>r.from||c.to<r.to)&&(r=c,e=a)}let n=r instanceof TreeNode&&r.index<0?null:r.parent,o=s.slice();return n?o[e]=n:o.splice(e,1),new StackIterator(o,r)}class StackIterator{constructor(e,r){this.heads=e,this.node=r}get next(){return iterStack(this.heads)}}function stackIterator(s,e,r){let n=s.resolveInner(e,r),o=null;for(let a=n instanceof TreeNode?n:n.context.parent;a;a=a.parent)if(a.index<0){let c=a.parent;(o||(o=[n])).push(c.resolve(e,r)),a=c}else{let c=MountedTree.get(a.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let l=new TreeNode(c.tree,c.overlay[0].from+a.from,-1,a);(o||(o=[n])).push(resolveNode(l,e,r,!1))}}return o?iterStack(o):n}class TreeCursor{get name(){return this.type.name}constructor(e,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:o}=this.buffer;return this.type=r||o.set.types[o.buffer[e]],this.from=n+o.buffer[e+1],this.to=n+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,r,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,r,n,this.mode));let{buffer:o}=this.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],e,r-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,r,n=this.mode){return this.buffer?n&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,r):this.yield(this._tree.enter(e,r,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let o=n<0?0:this.stack[n]+4;if(this.index!=o)return this.yieldBuf(r.findChild(o,this.index,-1,0,4))}else{let o=r.buffer[this.index+3];if(o<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(o)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return!1;({index:r,parent:n}=o)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)if(r>-1)for(let a=r+e,c=e<0?-1:n._tree.children.length;a!=c;a+=e){let l=n._tree.children[a];if(this.mode&IterMode.IncludeAnonymous||l instanceof TreeBuffer||!l.type.isAnonymous||hasChild(l))return!1}return!0}move(e,r){if(r&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,r););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let o=this.index,a=this.stack.length;a>=0;){for(let c=e;c;c=c._parent)if(c.index==o){if(o==this.index)return c;r=c,n=a+1;break e}o=this.stack[--a]}for(let o=n;o<this.stack.length;o++)r=new BufferNode(this.buffer,r,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,r){for(let n=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;o&&r&&r(this),o=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:r}=this.buffer,{types:n}=r.set;for(let o=e.length-1,a=this.stack.length-1;o>=0;a--){if(a<0)return matchNodeContext(this.node,e,o);let c=n[r.buffer[this.stack[a]]];if(!c.isAnonymous){if(e[o]&&e[o]!=c.name)return!1;o--}}return!0}}function hasChild(s){return s.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(s){var e;let{buffer:r,nodeSet:n,maxBufferLength:o=DefaultBufferLength,reused:a=[],minRepeatType:c=n.types.length}=s,l=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,h=n.types,d=0,f=0;function g(k,P,L,M,B,j){let{id:F,start:U,end:V,size:Q}=l,q=f;for(;Q<0;)if(l.next(),Q==-1){let K=a[F];L.push(K),M.push(U-k);return}else if(Q==-3){d=F;return}else if(Q==-4){f=F;return}else throw new RangeError(`Unrecognized record size: ${Q}`);let G=h[F],te,Y,J=U-k;if(V-U<=o&&(Y=m(l.pos-P,B))){let K=new Uint16Array(Y.size-Y.skip),ne=l.pos-Y.size,de=K.length;for(;l.pos>ne;)de=b(Y.start,K,de);te=new TreeBuffer(K,V-Y.start,n),J=Y.start-k}else{let K=l.pos-Q;l.next();let ne=[],de=[],Re=F>=c?F:-1,Te=0,Me=V;for(;l.pos>K;)Re>=0&&l.id==Re&&l.size>=0?(l.end<=Me-o&&(A(ne,de,U,Te,l.end,Me,Re,q),Te=ne.length,Me=l.end),l.next()):j>2500?v(U,K,ne,de):g(U,K,ne,de,Re,j+1);if(Re>=0&&Te>0&&Te<ne.length&&A(ne,de,U,Te,U,Me,Re,q),ne.reverse(),de.reverse(),Re>-1&&Te>0){let Ie=S(G);te=balanceRange(G,ne,de,0,ne.length,0,V-U,Ie,Ie)}else te=w(G,ne,de,V-U,q-V)}L.push(te),M.push(J)}function v(k,P,L,M){let B=[],j=0,F=-1;for(;l.pos>P;){let{id:U,start:V,end:Q,size:q}=l;if(q>4)l.next();else{if(F>-1&&V<F)break;F<0&&(F=Q-o),B.push(U,V,Q),j++,l.next()}}if(j){let U=new Uint16Array(j*4),V=B[B.length-2];for(let Q=B.length-3,q=0;Q>=0;Q-=3)U[q++]=B[Q],U[q++]=B[Q+1]-V,U[q++]=B[Q+2]-V,U[q++]=q;L.push(new TreeBuffer(U,B[2]-V,n)),M.push(V-k)}}function S(k){return(P,L,M)=>{let B=0,j=P.length-1,F,U;if(j>=0&&(F=P[j])instanceof Tree){if(!j&&F.type==k&&F.length==M)return F;(U=F.prop(NodeProp.lookAhead))&&(B=L[j]+F.length+U)}return w(k,P,L,M,B)}}function A(k,P,L,M,B,j,F,U){let V=[],Q=[];for(;k.length>M;)V.push(k.pop()),Q.push(P.pop()+L-B);k.push(w(n.types[F],V,Q,j-B,U-j)),P.push(B-L)}function w(k,P,L,M,B=0,j){if(d){let F=[NodeProp.contextHash,d];j=j?[F].concat(j):[F]}if(B>25){let F=[NodeProp.lookAhead,B];j=j?[F].concat(j):[F]}return new Tree(k,P,L,M,j)}function m(k,P){let L=l.fork(),M=0,B=0,j=0,F=L.end-o,U={size:0,start:0,skip:0};e:for(let V=L.pos-k;L.pos>V;){let Q=L.size;if(L.id==P&&Q>=0){U.size=M,U.start=B,U.skip=j,j+=4,M+=4,L.next();continue}let q=L.pos-Q;if(Q<0||q<V||L.start<F)break;let G=L.id>=c?4:0,te=L.start;for(L.next();L.pos>q;){if(L.size<0)if(L.size==-3)G+=4;else break e;else L.id>=c&&(G+=4);L.next()}B=te,M+=Q,j+=G}return(P<0||M==k)&&(U.size=M,U.start=B,U.skip=j),U.size>4?U:void 0}function b(k,P,L){let{id:M,start:B,end:j,size:F}=l;if(l.next(),F>=0&&M<c){let U=L;if(F>4){let V=l.pos-(F-4);for(;l.pos>V;)L=b(k,P,L)}P[--L]=U,P[--L]=j-k,P[--L]=B-k,P[--L]=M}else F==-3?d=M:F==-4&&(f=M);return L}let x=[],y=[];for(;l.pos>0;)g(s.start||0,s.bufferStart||0,x,y,-1,0);let O=(e=s.length)!==null&&e!==void 0?e:x.length?y[0]+x[0].length:0;return new Tree(h[s.topID],x.reverse(),y.reverse(),O)}const nodeSizeCache=new WeakMap;function nodeSize(s,e){if(!s.isAnonymous||e instanceof TreeBuffer||e.type!=s)return 1;let r=nodeSizeCache.get(e);if(r==null){r=1;for(let n of e.children){if(n.type!=s||!(n instanceof Tree)){r=1;break}r+=nodeSize(s,n)}nodeSizeCache.set(e,r)}return r}function balanceRange(s,e,r,n,o,a,c,l,h){let d=0;for(let A=n;A<o;A++)d+=nodeSize(s,e[A]);let f=Math.ceil(d*1.5/8),g=[],v=[];function S(A,w,m,b,x){for(let y=m;y<b;){let O=y,k=w[y],P=nodeSize(s,A[y]);for(y++;y<b;y++){let L=nodeSize(s,A[y]);if(P+L>=f)break;P+=L}if(y==O+1){if(P>f){let L=A[O];S(L.children,L.positions,0,L.children.length,w[O]+x);continue}g.push(A[O])}else{let L=w[y-1]+A[y-1].length-k;g.push(balanceRange(s,A,w,O,y,k,L,null,h))}v.push(k+x-a)}}return S(e,r,n,o,0),(l||h)(g,v,c)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,r,n){let o=this.map.get(e);o||this.map.set(e,o=new Map),o.set(r,n)}getBuffer(e,r){let n=this.map.get(e);return n&&n.get(r)}set(e,r){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,r):e instanceof TreeNode&&this.map.set(e.tree,r)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,r){e.buffer?this.setBuffer(e.buffer.buffer,e.index,r):this.map.set(e.tree,r)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,r,n,o,a=!1,c=!1){this.from=e,this.to=r,this.tree=n,this.offset=o,this.open=(a?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,r=[],n=!1){let o=[new TreeFragment(0,e.length,e,0,!1,n)];for(let a of r)a.to>e.length&&o.push(a);return o}static applyChanges(e,r,n=128){if(!r.length)return e;let o=[],a=1,c=e.length?e[0]:null;for(let l=0,h=0,d=0;;l++){let f=l<r.length?r[l]:null,g=f?f.fromA:1e9;if(g-h>=n)for(;c&&c.from<g;){let v=c;if(h>=v.from||g<=v.to||d){let S=Math.max(v.from,h)-d,A=Math.min(v.to,g)-d;v=S>=A?null:new TreeFragment(S,A,v.tree,v.offset+d,l>0,!!f)}if(v&&o.push(v),c.to>g)break;c=a<e.length?e[a++]:null}if(!f)break;h=f.toA,d=f.toA-f.toB}return o}}class Parser{startParse(e,r,n){return typeof e=="string"&&(e=new StringInput(e)),n=n?n.length?n.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,r||[],n)}parse(e,r,n){let o=this.startParse(e,r,n);for(;;){let a=o.advance();if(a)return a}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,r){return this.string.slice(e,r)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,r,n){this.set=e,this.base=r,this.modified=n,this.id=nextTagID++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let r=new Tag([],null,[]);if(r.set.push(r),e)for(let n of e.set)r.set.push(n);return r}static defineModifier(){let e=new Modifier;return r=>r.modified.indexOf(e)>-1?r:Modifier.get(r.base||r,r.modified.concat(e).sort((n,o)=>n.id-o.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,r){if(!r.length)return e;let n=r[0].instances.find(l=>l.base==e&&sameArray(r,l.modified));if(n)return n;let o=[],a=new Tag(o,e,r);for(let l of r)l.instances.push(a);let c=powerSet(r);for(let l of e.set)if(!l.modified.length)for(let h of c)o.push(Modifier.get(l,h));return a}}function sameArray(s,e){return s.length==e.length&&s.every((r,n)=>r==e[n])}function powerSet(s){let e=[[]];for(let r=0;r<s.length;r++)for(let n=0,o=e.length;n<o;n++)e.push(e[n].concat(s[r]));return e.sort((r,n)=>n.length-r.length)}function styleTags(s){let e=Object.create(null);for(let r in s){let n=s[r];Array.isArray(n)||(n=[n]);for(let o of r.split(" "))if(o){let a=[],c=2,l=o;for(let g=0;;){if(l=="..."&&g>0&&g+3==o.length){c=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!v)throw new RangeError("Invalid path: "+o);if(a.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),g+=v[0].length,g==o.length)break;let S=o[g++];if(g==o.length&&S=="!"){c=0;break}if(S!="/")throw new RangeError("Invalid path: "+o);l=o.slice(g)}let h=a.length-1,d=a[h];if(!d)throw new RangeError("Invalid path: "+o);let f=new Rule(n,c,h>0?a.slice(0,h):null);e[d]=f.sort(e[d])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,r,n,o){this.tags=e,this.mode=r,this.context=n,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(s,e){let r=Object.create(null);for(let a of s)if(!Array.isArray(a.tag))r[a.tag.id]=a.class;else for(let c of a.tag)r[c.id]=a.class;let{scope:n,all:o=null}=e||{};return{style:a=>{let c=o;for(let l of a)for(let h of l.set){let d=r[h.id];if(d){c=c?c+" "+d:d;break}}return c},scope:n}}function highlightTags(s,e){let r=null;for(let n of s){let o=n.style(e);o&&(r=r?r+" "+o:o)}return r}function highlightTree(s,e,r,n=0,o=s.length){let a=new HighlightBuilder(n,Array.isArray(e)?e:[e],r);a.highlightRange(s.cursor(),n,o,"",a.highlighters),a.flush(o)}class HighlightBuilder{constructor(e,r,n){this.at=e,this.highlighters=r,this.span=n,this.class=""}startSpan(e,r){r!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=r)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,r,n,o,a){let{type:c,from:l,to:h}=e;if(l>=n||h<=r)return;c.isTop&&(a=this.highlighters.filter(S=>!S.scope||S.scope(c)));let d=o,f=getStyleTags(e)||Rule.empty,g=highlightTags(a,f.tags);if(g&&(d&&(d+=" "),d+=g,f.mode==1&&(o+=(o?" ":"")+g)),this.startSpan(Math.max(r,l),d),f.opaque)return;let v=e.tree&&e.tree.prop(NodeProp.mounted);if(v&&v.overlay){let S=e.node.enter(v.overlay[0].from+l,1),A=this.highlighters.filter(m=>!m.scope||m.scope(v.tree.type)),w=e.firstChild();for(let m=0,b=l;;m++){let x=m<v.overlay.length?v.overlay[m]:null,y=x?x.from+l:h,O=Math.max(r,b),k=Math.min(n,y);if(O<k&&w)for(;e.from<k&&(this.highlightRange(e,O,k,o,a),this.startSpan(Math.min(k,e.to),d),!(e.to>=y||!e.nextSibling())););if(!x||y>n)break;b=x.to+l,b>r&&(this.highlightRange(S.cursor(),Math.max(r,x.from+l),Math.min(n,b),"",A),this.startSpan(Math.min(n,b),d))}w&&e.parent()}else if(e.firstChild()){v&&(o="");do if(!(e.to<=r)){if(e.from>=n)break;this.highlightRange(e,r,n,o,a),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}}function getStyleTags(s){let e=s.type.prop(ruleNodeProp);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(s){return Facet.define({combine:s?e=>e.concat(s):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,r,n=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=r,this.extension=[language.of(this),EditorState.languageData.of((a,c,l)=>{let h=topNodeAt(a,c,l),d=h.type.prop(languageDataProp);if(!d)return[];let f=a.facet(d),g=h.type.prop(sublanguageProp);if(g){let v=h.resolve(c-h.from,l);for(let S of g)if(S.test(v,a)){let A=a.facet(S.facet);return S.type=="replace"?A:A.concat(f)}}return f})].concat(n)}isActiveAt(e,r,n=-1){return topNodeAt(e,r,n).type.prop(languageDataProp)==this.data}findRegions(e){let r=e.facet(language);if(r?.data==this.data)return[{from:0,to:e.doc.length}];if(!r||!r.allowsNesting)return[];let n=[],o=(a,c)=>{if(a.prop(languageDataProp)==this.data){n.push({from:c,to:c+a.length});return}let l=a.prop(NodeProp.mounted);if(l){if(l.tree.prop(languageDataProp)==this.data){if(l.overlay)for(let h of l.overlay)n.push({from:h.from+c,to:h.to+c});else n.push({from:c,to:c+a.length});return}else if(l.overlay){let h=n.length;if(o(l.tree,l.overlay[0].from+c),n.length>h)return}}for(let h=0;h<a.children.length;h++){let d=a.children[h];d instanceof Tree&&o(d,a.positions[h]+c)}};return o(syntaxTree(e),0),n}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(s,e,r){let n=s.facet(language),o=syntaxTree(s).topNode;if(!n||n.allowsNesting)for(let a=o;a;a=a.enter(e,r,IterMode.ExcludeBuffers))a.type.isTop&&(o=a);return o}class LRLanguage extends Language{constructor(e,r,n){super(e,r,[],n),this.parser=r}static define(e){let r=defineLanguageFacet(e.languageData);return new LRLanguage(r,e.parser.configure({props:[languageDataProp.add(n=>n.isTop?r:void 0)]}),e.name)}configure(e,r){return new LRLanguage(this.data,this.parser.configure(e),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(s){let e=s.field(Language.state,!1);return e?e.tree:Tree.empty}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,r){let n=this.cursorPos-this.string.length;return e<n||r>=this.cursorPos?this.doc.sliceString(e,r):this.string.slice(e-n,r-n)}}let currentContext=null;class ParseContext{constructor(e,r,n=[],o,a,c,l,h){this.parser=e,this.state=r,this.fragments=n,this.tree=o,this.treeLen=a,this.viewport=c,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,r,n){return new ParseContext(e,r,[],Tree.empty,0,n,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Tree.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,r;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=e,this.tree=r,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let r=currentContext;currentContext=this;try{return e()}finally{currentContext=r}}withoutTempSkipped(e){for(let r;r=this.tempSkipped.pop();)e=cutFragments(e,r.from,r.to);return e}changes(e,r){let{fragments:n,tree:o,treeLen:a,viewport:c,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,f,g,v)=>h.push({fromA:d,toA:f,fromB:g,toB:v})),n=TreeFragment.applyChanges(n,h),o=Tree.empty,a=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let f=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);f<g&&l.push({from:f,to:g})}}}return new ParseContext(this.parser,r,n,o,a,c,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let r=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:o,to:a}=this.skipped[n];o<e.to&&a>e.from&&(this.fragments=cutFragments(this.fragments,o,a),this.skipped.splice(n--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,r){this.skipped.push({from:e,to:r})}static getSkippingParser(e){return new class extends Parser{createParse(r,n,o){let a=o[0].from,c=o[o.length-1].to;return{parsedPos:a,advance(){let h=currentContext;if(h){for(let d of o)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=c,new Tree(NodeType.none,[],[],c-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let r=this.fragments;return this.treeLen>=e&&r.length&&r[0].from==0&&r[0].to>=e}static get(){return currentContext}}function cutFragments(s,e,r){return TreeFragment.applyChanges(s,[{fromA:e,toA:r,fromB:e,toB:r}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,n)||r.takeTree(),new LanguageState(r)}static init(e){let r=Math.min(3e3,e.doc.length),n=ParseContext.create(e.facet(language).parser,e,{from:0,to:r});return n.work(20,r)||n.takeTree(),new LanguageState(n)}}Language.state=StateField.define({create:LanguageState.init,update(s,e){for(let r of e.effects)if(r.is(Language.setState))return r.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):s.apply(e)}});let requestIdle=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=s=>{let e=-1,r=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(r):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let r=this.view.state.field(Language.state).context;(r.updateViewport(e.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:e}=this.view,r=e.field(Language.state);(r.tree!=r.context.tree||!r.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,a=n.field(Language.state);if(a.tree==a.context.tree&&a.context.isDone(o+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),l=a.context.treeLen<o&&n.doc.length>o+1e3,h=a.context.work(()=>isInputPending&&isInputPending()||Date.now()>c,o+(l?0:1e5));this.chunkBudget-=Date.now()-r,(h||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(a.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(r=>logException(this.view.state,r)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(s){return s.length?s[0]:null},enables:s=>[Language.state,parseWorker,EditorView.contentAttributes.compute([s],e=>{let r=e.facet(s);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(e,r=[]){this.language=e,this.support=r,this.extension=[e,r]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(r=>r!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function getIndentUnit(s){let e=s.facet(indentUnit);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function indentString(s,e){let r="",n=s.tabSize,o=s.facet(indentUnit)[0];if(o=="	"){for(;e>=n;)r+="	",e-=n;o=" "}for(let a=0;a<e;a++)r+=o;return r}function getIndentation(s,e){s instanceof EditorState&&(s=new IndentContext(s));for(let n of s.state.facet(indentService)){let o=n(s,e);if(o!==void 0)return o}let r=syntaxTree(s.state);return r.length>=e?syntaxIndentation(s,r,e):null}class IndentContext{constructor(e,r={}){this.state=e,this.options=r,this.unit=getIndentUnit(e)}lineAt(e,r=1){let n=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:a}=this.options;return o!=null&&o>=n.from&&o<=n.to?a&&o==e?{text:"",from:e}:(r<0?o<e:o<=e)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(e,r=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(e,r);return n.slice(e-o,Math.min(n.length,e+100-o))}column(e,r=1){let{text:n,from:o}=this.lineAt(e,r),a=this.countColumn(n,e-o),c=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return c>-1&&(a+=c-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,r=e.length){return countColumn(e,this.state.tabSize,r)}lineIndent(e,r=1){let{text:n,from:o}=this.lineAt(e,r),a=this.options.overrideIndentation;if(a){let c=a(o);if(c>-1)return c}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(s,e,r){let n=e.resolveStack(r),o=n.node.enterUnfinishedNodesBefore(r);if(o!=n.node){let a=[];for(let c=o;c!=n.node;c=c.parent)a.push(c);for(let c=a.length-1;c>=0;c--)n={node:a[c],next:n}}return indentFor(n,s,r)}function indentFor(s,e,r){for(let n=s;n;n=n.next){let o=indentStrategy(n.node);if(o)return o(TreeIndentContext.create(e,r,n))}return 0}function ignoreClosed(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function indentStrategy(s){let e=s.type.prop(indentNodeProp);if(e)return e;let r=s.firstChild,n;if(r&&(n=r.type.prop(NodeProp.closedBy))){let o=s.lastChild,a=o&&n.indexOf(o.name)>-1;return c=>delimitedStrategy(c,!0,1,void 0,a&&!ignoreClosed(c)?o.from:void 0)}return s.parent==null?topIndent$1:null}function topIndent$1(){return 0}class TreeIndentContext extends IndentContext{constructor(e,r,n){super(e.state,e.options),this.base=e,this.pos=r,this.context=n}get node(){return this.context.node}static create(e,r,n){return new TreeIndentContext(e,r,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let r=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(r.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(isParent(n,e))break;r=this.state.doc.lineAt(n.from)}return this.lineIndent(r.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(s,e){for(let r=e;r;r=r.parent)if(s==r)return!0;return!1}function bracketedAligned(s){let e=s.node,r=e.childAfter(e.from),n=e.lastChild;if(!r)return null;let o=s.options.simulateBreak,a=s.state.doc.lineAt(r.from),c=o==null||o<=a.from?a.to:Math.min(a.to,o);for(let l=r.to;;){let h=e.childAfter(l);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<c?r:null;l=h.to}}function delimitedIndent({closing:s,align:e=!0,units:r=1}){return n=>delimitedStrategy(n,e,r,s)}function delimitedStrategy(s,e,r,n,o){let a=s.textAfter,c=a.match(/^\s*/)[0].length,l=n&&a.slice(c,c+n.length)==n||o==s.pos+c,h=e?bracketedAligned(s):null;return h?l?s.column(h.from):s.column(h.to):s.baseIndent+(l?0:s.unit*r)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let r=s.newDoc,{head:n}=s.newSelection.main,o=r.lineAt(n);if(n>o.from+DontIndentBeyond)return s;let a=r.sliceString(o.from,n);if(!e.some(d=>d.test(a)))return s;let{state:c}=s,l=-1,h=[];for(let{head:d}of c.selection.ranges){let f=c.doc.lineAt(d);if(f.from==l)continue;l=f.from;let g=getIndentation(c,f.from);if(g==null)continue;let v=/^\s*/.exec(f.text)[0],S=indentString(c,g);v!=S&&h.push({from:f.from,to:f.from+v.length,insert:S})}return h.length?[s,{changes:h,sequential:!0}]:s})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(s){let e=s.firstChild,r=s.lastChild;return e&&e.to<r.from?{from:e.to,to:r.type.isError?s.to:r.from}:null}function syntaxFolding(s,e,r){let n=syntaxTree(s);if(n.length<r)return null;let o=n.resolveStack(r,1),a=null;for(let c=o;c;c=c.next){let l=c.node;if(l.to<=r||l.from>r)continue;if(a&&l.from<e)break;let h=l.type.prop(foldNodeProp);if(h&&(l.to<n.length-50||n.length==s.doc.length||!isUnfinished(l))){let d=h(l,s);d&&d.from<=r&&d.from>=e&&d.to>r&&(a=d)}}return a}function isUnfinished(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function foldable(s,e,r){for(let n of s.facet(foldService)){let o=n(s,e,r);if(o)return o}return syntaxFolding(s,e,r)}function mapRange(s,e){let r=e.mapPos(s.from,1),n=e.mapPos(s.to,-1);return r>=n?void 0:{from:r,to:n}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(s){let e=[];for(let{head:r}of s.state.selection.ranges)e.some(n=>n.from<=r&&n.to>=r)||e.push(s.lineBlockAt(r));return e}const foldState=StateField.define({create(){return Decoration.none},update(s,e){s=s.map(e.changes);for(let r of e.effects)if(r.is(foldEffect)&&!foldExists(s,r.value.from,r.value.to)){let{preparePlaceholder:n}=e.state.facet(foldConfig),o=n?Decoration.replace({widget:new PreparedFoldWidget(n(e.state,r.value))}):foldWidget;s=s.update({add:[o.range(r.value.from,r.value.to)]})}else r.is(unfoldEffect)&&(s=s.update({filter:(n,o)=>r.value.from!=n||r.value.to!=o,filterFrom:r.value.from,filterTo:r.value.to}));if(e.selection){let r=!1,{head:n}=e.selection.main;s.between(n,n,(o,a)=>{o<n&&a>n&&(r=!0)}),r&&(s=s.update({filterFrom:n,filterTo:n,filter:(o,a)=>a<=n||o>=n}))}return s},provide:s=>EditorView.decorations.from(s),toJSON(s,e){let r=[];return s.between(0,e.doc.length,(n,o)=>{r.push(n,o)}),r},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let r=0;r<s.length;){let n=s[r++],o=s[r++];if(typeof n!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(n,o))}return Decoration.set(e,!0)}});function findFold(s,e,r){var n;let o=null;return(n=s.field(foldState,!1))===null||n===void 0||n.between(e,r,(a,c)=>{(!o||o.from>a)&&(o={from:a,to:c})}),o}function foldExists(s,e,r){let n=!1;return s.between(e,e,(o,a)=>{o==e&&a==r&&(n=!0)}),n}function maybeEnable(s,e){return s.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=s=>{for(let e of selectedLines(s)){let r=foldable(s.state,e.from,e.to);if(r)return s.dispatch({effects:maybeEnable(s.state,[foldEffect.of(r),announceFold(s,r)])}),!0}return!1},unfoldCode=s=>{if(!s.state.field(foldState,!1))return!1;let e=[];for(let r of selectedLines(s)){let n=findFold(s.state,r.from,r.to);n&&e.push(unfoldEffect.of(n),announceFold(s,n,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function announceFold(s,e,r=!0){let n=s.state.doc.lineAt(e.from).number,o=s.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${s.state.phrase(r?"Folded lines":"Unfolded lines")} ${n} ${s.state.phrase("to")} ${o}.`)}const foldAll=s=>{let{state:e}=s,r=[];for(let n=0;n<e.doc.length;){let o=s.lineBlockAt(n),a=foldable(e,o.from,o.to);a&&r.push(foldEffect.of(a)),n=(a?s.lineBlockAt(a.to):o).to+1}return r.length&&s.dispatch({effects:maybeEnable(s.state,r)}),!!r.length},unfoldAll=s=>{let e=s.state.field(foldState,!1);if(!e||!e.size)return!1;let r=[];return e.between(0,s.state.doc.length,(n,o)=>{r.push(unfoldEffect.of({from:n,to:o}))}),s.dispatch({effects:r}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(s){return combineConfig(s,defaultConfig)}});function codeFolding(s){let e=[foldState,baseTheme$1$1];return s&&e.push(foldConfig.of(s)),e}function widgetToDOM(s,e){let{state:r}=s,n=r.facet(foldConfig),o=c=>{let l=s.lineBlockAt(s.posAtDOM(c.target)),h=findFold(s.state,l.from,l.to);h&&s.dispatch({effects:unfoldEffect.of(h)}),c.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,o,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",r.phrase("folded code")),a.title=r.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=o,a}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(s){return widgetToDOM(s,null)}}});class PreparedFoldWidget extends WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return widgetToDOM(e,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(e,r){super(),this.config=e,this.open=r}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=e.state.phrase(this.open?"Fold line":"Unfold line"),r}}function foldGutter(s={}){let e=Object.assign(Object.assign({},foldGutterDefaults),s),r=new FoldMarker(e,!0),n=new FoldMarker(e,!1),o=ViewPlugin.fromClass(class{constructor(c){this.from=c.viewport.from,this.markers=this.buildMarkers(c)}update(c){(c.docChanged||c.viewportChanged||c.startState.facet(language)!=c.state.facet(language)||c.startState.field(foldState,!1)!=c.state.field(foldState,!1)||syntaxTree(c.startState)!=syntaxTree(c.state)||e.foldingChanged(c))&&(this.markers=this.buildMarkers(c.view))}buildMarkers(c){let l=new RangeSetBuilder;for(let h of c.viewportLineBlocks){let d=findFold(c.state,h.from,h.to)?n:foldable(c.state,h.from,h.to)?r:null;d&&l.add(h.from,h.from,d)}return l.finish()}}),{domEventHandlers:a}=e;return[o,gutter({class:"cm-foldGutter",markers(c){var l;return((l=c.plugin(o))===null||l===void 0?void 0:l.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(e,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:(c,l,h)=>{if(a.click&&a.click(c,l,h))return!0;let d=findFold(c.state,l.from,l.to);if(d)return c.dispatch({effects:unfoldEffect.of(d)}),!0;let f=foldable(c.state,l.from,l.to);return f?(c.dispatch({effects:foldEffect.of(f)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,r){this.specs=e;let n;function o(l){let h=StyleModule.newName();return(n||(n=Object.create(null)))["."+h]=l,h}const a=typeof r.all=="string"?r.all:r.all?o(r.all):void 0,c=r.scope;this.scope=c instanceof Language?l=>l.prop(languageDataProp)==c.data:c?l=>l==c:void 0,this.style=tagHighlighter(e.map(l=>({tag:l.tag,class:l.class||o(Object.assign({},l,{tag:null}))})),{all:a}).style,this.module=n?new StyleModule(n):null,this.themeType=r.themeType}static define(e,r){return new HighlightStyle(e,r||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(s){return s.length?[s[0]]:null}});function getHighlighters(s){let e=s.facet(highlighterFacet);return e.length?e:s.facet(fallbackHighlighter)}function syntaxHighlighting(s,e){let r=[treeHighlighter],n;return s instanceof HighlightStyle&&(s.module&&r.push(EditorView.styleModule.of(s.module)),n=s.themeType),e?.fallback?r.push(fallbackHighlighter.of(s)):n?r.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(n=="dark")?[s]:[])):r.push(highlighterFacet.of(s)),r}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let r=syntaxTree(e.state),n=getHighlighters(e.state),o=n!=getHighlighters(e.startState);r.length<e.view.viewport.to&&!o&&r.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(r!=this.tree||e.viewportChanged||o)&&(this.tree=r,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,r){if(!r||!this.tree.length)return Decoration.none;let n=new RangeSetBuilder;for(let{from:o,to:a}of e.visibleRanges)highlightTree(this.tree,r,(c,l,h)=>{n.add(c,l,this.markCache[h]||(this.markCache[h]=Decoration.mark({class:h})))},o,a);return n.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:s=>s.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(s){return combineConfig(s,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(s){let e=[],r=s.matched?matchingMark:nonmatchingMark;return e.push(r.range(s.start.from,s.start.to)),s.end&&e.push(r.range(s.end.from,s.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let r=[],n=e.state.facet(bracketMatchingConfig);for(let o of e.state.selection.ranges){if(!o.empty)continue;let a=matchBrackets(e.state,o.head,-1,n)||o.head>0&&matchBrackets(e.state,o.head-1,1,n)||n.afterCursor&&(matchBrackets(e.state,o.head,1,n)||o.head<e.state.doc.length&&matchBrackets(e.state,o.head+1,-1,n));a&&(r=r.concat(n.renderMatch(a,e.state)))}return Decoration.set(r,!0)},provide:s=>EditorView.decorations.from(s)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(s={}){return[bracketMatchingConfig.of(s),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(s,e,r){let n=s.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(n)return n;if(s.name.length==1){let o=r.indexOf(s.name);if(o>-1&&o%2==(e<0?1:0))return[r[o+e]]}return null}function findHandle(s){let e=s.type.prop(bracketMatchingHandle);return e?e(s.node):s}function matchBrackets(s,e,r,n={}){let o=n.maxScanDistance||DefaultScanDist,a=n.brackets||DefaultBrackets,c=syntaxTree(s),l=c.resolveInner(e,r);for(let h=l;h;h=h.parent){let d=matchingNodes(h.type,r,a);if(d&&h.from<h.to){let f=findHandle(h);if(f&&(r>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return matchMarkedBrackets(s,e,r,h,f,d,a)}}return matchPlainBrackets(s,e,r,c,l.type,o,a)}function matchMarkedBrackets(s,e,r,n,o,a,c){let l=n.parent,h={from:o.from,to:o.to},d=0,f=l?.cursor();if(f&&(r<0?f.childBefore(n.from):f.childAfter(n.to)))do if(r<0?f.to<=n.from:f.from>=n.to){if(d==0&&a.indexOf(f.type.name)>-1&&f.from<f.to){let g=findHandle(f);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(matchingNodes(f.type,r,c))d++;else if(matchingNodes(f.type,-r,c)){if(d==0){let g=findHandle(f);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}d--}}while(r<0?f.prevSibling():f.nextSibling());return{start:h,matched:!1}}function matchPlainBrackets(s,e,r,n,o,a,c){let l=r<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),h=c.indexOf(l);if(h<0||h%2==0!=r>0)return null;let d={from:r<0?e-1:e,to:r>0?e+1:e},f=s.doc.iterRange(e,r>0?s.doc.length:0),g=0;for(let v=0;!f.next().done&&v<=a;){let S=f.value;r<0&&(v+=S.length);let A=e+v*r;for(let w=r>0?0:S.length-1,m=r>0?S.length:-1;w!=m;w+=r){let b=c.indexOf(S[w]);if(!(b<0||n.resolveInner(A+w,1).type!=o))if(b%2==0==r>0)g++;else{if(g==1)return{start:d,end:{from:A+w,to:A+w+1},matched:b>>1==h>>1};g--}}r>0&&(v+=S.length)}return f.done?{start:d,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[s]=createTokenType(noTokens,e);function warnForPart(s,e){warned.indexOf(s)>-1||(warned.push(s),console.warn(e))}function createTokenType(s,e){let r=[];for(let l of e.split(" ")){let h=[];for(let d of l.split(".")){let f=s[d]||tags[d];f?typeof f=="function"?h.length?h=h.map(f):warnForPart(d,`Modifier ${d} used at start of tag`):h.length?warnForPart(d,`Tag ${d} used as modifier`):h=Array.isArray(f)?f:[f]:warnForPart(d,`Unknown highlighting tag ${d}`)}for(let d of h)r.push(d)}if(!r.length)return 0;let n=e.replace(/ /g,"_"),o=n+" "+r.map(l=>l.id),a=byTag[o];if(a)return a.id;let c=byTag[o]=NodeType.define({id:typeArray.length,name:n,props:[styleTags({[n]:r})]});return typeArray.push(c),c.id}const toggleComment=s=>{let{state:e}=s,r=e.doc.lineAt(e.selection.main.from),n=getConfig(s.state,r.from);return n.line?toggleLineComment(s):n.block?toggleBlockCommentByLine(s):!1};function command(s,e){return({state:r,dispatch:n})=>{if(r.readOnly)return!1;let o=s(e,r);return o?(n(r.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((s,e)=>changeBlockComment(s,e,selectedLineRanges(e)),0);function getConfig(s,e){let r=s.languageDataAt("commentTokens",e);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(s,{open:e,close:r},n,o){let a=s.sliceDoc(n-SearchMargin,n),c=s.sliceDoc(o,o+SearchMargin),l=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(c)[0].length,d=a.length-l;if(a.slice(d-e.length,d)==e&&c.slice(h,h+r.length)==r)return{open:{pos:n-l,margin:l&&1},close:{pos:o+h,margin:h&&1}};let f,g;o-n<=2*SearchMargin?f=g=s.sliceDoc(n,o):(f=s.sliceDoc(n,n+SearchMargin),g=s.sliceDoc(o-SearchMargin,o));let v=/^\s*/.exec(f)[0].length,S=/\s*$/.exec(g)[0].length,A=g.length-S-r.length;return f.slice(v,v+e.length)==e&&g.slice(A,A+r.length)==r?{open:{pos:n+v+e.length,margin:/\s/.test(f.charAt(v+e.length))?1:0},close:{pos:o-S-r.length,margin:/\s/.test(g.charAt(A-1))?1:0}}:null}function selectedLineRanges(s){let e=[];for(let r of s.selection.ranges){let n=s.doc.lineAt(r.from),o=r.to<=n.to?n:s.doc.lineAt(r.to),a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=o.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:o.to})}return e}function changeBlockComment(s,e,r=e.selection.ranges){let n=r.map(a=>getConfig(e,a.from).block);if(!n.every(a=>a))return null;let o=r.map((a,c)=>findBlockComment(e,n[c],a.from,a.to));if(s!=2&&!o.every(a=>a))return{changes:e.changes(r.map((a,c)=>o[c]?[]:[{from:a.from,insert:n[c].open+" "},{from:a.to,insert:" "+n[c].close}]))};if(s!=1&&o.some(a=>a)){let a=[];for(let c=0,l;c<o.length;c++)if(l=o[c]){let h=n[c],{open:d,close:f}=l;a.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:f.pos-f.margin,to:f.pos+h.close.length})}return{changes:a}}return null}function changeLineComment(s,e,r=e.selection.ranges){let n=[],o=-1;for(let{from:a,to:c}of r){let l=n.length,h=1e9,d=getConfig(e,a).line;if(d){for(let f=a;f<=c;){let g=e.doc.lineAt(f);if(g.from>o&&(a==c||c>g.from)){o=g.from;let v=/^\s*/.exec(g.text)[0].length,S=v==g.length,A=g.text.slice(v,v+d.length)==d?v:-1;v<g.text.length&&v<h&&(h=v),n.push({line:g,comment:A,token:d,indent:v,empty:S,single:!1})}f=g.to+1}if(h<1e9)for(let f=l;f<n.length;f++)n[f].indent<n[f].line.text.length&&(n[f].indent=h);n.length==l+1&&(n[l].single=!0)}}if(s!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:l,token:h,indent:d,empty:f,single:g}of n)(g||!f)&&a.push({from:l.from+d,insert:h+" "});let c=e.changes(a);return{changes:c,selection:e.selection.map(c,1)}}else if(s!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:c,comment:l,token:h}of n)if(l>=0){let d=c.from+l,f=d+h.length;c.text[f-c.from]==" "&&f++,a.push({from:d,to:f})}return{changes:a}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(s){return combineConfig(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(n,o)=>e(n,o)||r(n,o)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(s,e){let r=e.state.facet(historyConfig),n=e.annotation(fromHistory);if(n){let h=HistEvent.fromTransaction(e,n.selection),d=n.side,f=d==0?s.undone:s.done;return h?f=updateBranch(f,f.length,r.minDepth,h):f=addSelection(f,e.startState.selection),new HistoryState(d==0?n.rest:f,d==0?f:n.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(s=s.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let a=HistEvent.fromTransaction(e),c=e.annotation(Transaction.time),l=e.annotation(Transaction.userEvent);return a?s=s.addChanges(a,c,l,r,e):e.selection&&(s=s.addSelection(e.startState.selection,c,l,r.newGroupDelay)),(o=="full"||o=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new HistoryState(s.done.map(HistEvent.fromJSON),s.undone.map(HistEvent.fromJSON))}});function history(s={}){return[historyField_,historyConfig.of(s),EditorView.domEventHandlers({beforeinput(e,r){let n=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return n?(e.preventDefault(),n(r)):!1}})]}function cmd(s,e){return function({state:r,dispatch:n}){if(!e&&r.readOnly)return!1;let o=r.field(historyField_,!1);if(!o)return!1;let a=o.pop(s,r,e);return a?(n(a),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,r,n,o,a){this.changes=e,this.effects=r,this.mapped=n,this.startSelection=o,this.selectionsAfter=a}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,r){let n=none$1;for(let o of e.startState.facet(invertedEffects)){let a=o(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),n,void 0,r||e.startState.selection,none$1)}static selection(e){return new HistEvent(void 0,none$1,void 0,void 0,e)}}function updateBranch(s,e,r,n){let o=e+1>r+20?e-r-1:0,a=s.slice(o,e);return a.push(n),a}function isAdjacent(s,e){let r=[],n=!1;return s.iterChangedRanges((o,a)=>r.push(o,a)),e.iterChangedRanges((o,a,c,l)=>{for(let h=0;h<r.length;){let d=r[h++],f=r[h++];l>=d&&c<=f&&(n=!0)}}),n}function eqSelectionShape(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((r,n)=>r.empty!=e.ranges[n].empty).length===0}function conc(s,e){return s.length?e.length?s.concat(e):s:e}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(s,e){if(s.length){let r=s[s.length-1],n=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return n.length&&n[n.length-1].eq(e)?s:(n.push(e),updateBranch(s,s.length-1,1e9,r.setSelAfter(n)))}else return[HistEvent.selection([e])]}function popSelection(s){let e=s[s.length-1],r=s.slice();return r[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function addMappingToBranch(s,e){if(!s.length)return s;let r=s.length,n=none$1;for(;r;){let o=mapEvent(s[r-1],e,n);if(o.changes&&!o.changes.empty||o.effects.length){let a=s.slice(0,r);return a[r-1]=o,a}else e=o.mapped,r--,n=o.selectionsAfter}return n.length?[HistEvent.selection(n)]:none$1}function mapEvent(s,e,r){let n=conc(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):none$1,r);if(!s.changes)return HistEvent.selection(n);let o=s.changes.map(e),a=e.mapDesc(s.changes,!0),c=s.mapped?s.mapped.composeDesc(a):a;return new HistEvent(o,StateEffect.mapEffects(s.effects,e),c,s.startSelection.map(a),n)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,r,n=0,o=void 0){this.done=e,this.undone=r,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,r,n,o,a){let c=this.done,l=c[c.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||joinableUserEvent.test(n))&&(!l.selectionsAfter.length&&r-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,isAdjacent(l.changes,e.changes))||n=="input.type.compose")?c=updateBranch(c,c.length-1,o.minDepth,new HistEvent(e.changes.compose(l.changes),conc(e.effects,l.effects),l.mapped,l.startSelection,none$1)):c=updateBranch(c,c.length,o.minDepth,e),new HistoryState(c,none$1,r,n)}addSelection(e,r,n,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return a.length>0&&r-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&eqSelectionShape(a[a.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,r,n)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,n){let o=e==0?this.done:this.undone;if(o.length==0)return null;let a=o[o.length-1],c=a.selectionsAfter[0]||r.selection;if(n&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let l=o.length==1?none$1:o.slice(0,o.length-1);return a.mapped&&(l=addMappingToBranch(l,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:fromHistory.of({side:e,rest:l,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(s,e){return EditorSelection.create(s.ranges.map(e),s.mainIndex)}function setSel(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:s,dispatch:e},r){let n=updateSel(s.selection,r);return n.eq(s.selection)?!1:(e(setSel(s,n)),!0)}function rangeEnd(s,e){return EditorSelection.cursor(e?s.to:s.from)}function cursorByChar(s,e){return moveSel(s,r=>r.empty?s.moveByChar(r,e):rangeEnd(r,e))}function ltrAtCursor(s){return s.textDirectionAt(s.state.selection.main.head)==Direction.LTR}const cursorCharLeft=s=>cursorByChar(s,!ltrAtCursor(s)),cursorCharRight=s=>cursorByChar(s,ltrAtCursor(s));function cursorByGroup(s,e){return moveSel(s,r=>r.empty?s.moveByGroup(r,e):rangeEnd(r,e))}const cursorGroupLeft=s=>cursorByGroup(s,!ltrAtCursor(s)),cursorGroupRight=s=>cursorByGroup(s,ltrAtCursor(s));function interestingNode(s,e,r){if(e.type.prop(r))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(s,e,r){let n=syntaxTree(s).resolveInner(e.head),o=r?NodeProp.closedBy:NodeProp.openedBy;for(let h=e.head;;){let d=r?n.childAfter(h):n.childBefore(h);if(!d)break;interestingNode(s,d,o)?n=d:h=r?d.to:d.from}let a=n.type.prop(o),c,l;return a&&(c=r?matchBrackets(s,n.from,1):matchBrackets(s,n.to,-1))&&c.matched?l=r?c.end.to:c.end.from:l=r?n.to:n.from,EditorSelection.cursor(l,r?-1:1)}const cursorSyntaxLeft=s=>moveSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),cursorSyntaxRight=s=>moveSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function cursorByLine(s,e){return moveSel(s,r=>{if(!r.empty)return rangeEnd(r,e);let n=s.moveVertically(r,e);return n.head!=r.head?n:s.moveToLineBoundary(r,e)})}const cursorLineUp=s=>cursorByLine(s,!1),cursorLineDown=s=>cursorByLine(s,!0);function pageInfo(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,r=0,n=0,o;if(e){for(let a of s.state.facet(EditorView.scrollMargins)){let c=a(s);c?.top&&(r=Math.max(c?.top,r)),c?.bottom&&(n=Math.max(c?.bottom,n))}o=s.scrollDOM.clientHeight-r-n}else o=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:e,height:Math.max(s.defaultLineHeight,o-5)}}function cursorByPage(s,e){let r=pageInfo(s),{state:n}=s,o=updateSel(n.selection,c=>c.empty?s.moveVertically(c,e,r.height):rangeEnd(c,e));if(o.eq(n.selection))return!1;let a;if(r.selfScroll){let c=s.coordsAtPos(n.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),h=l.top+r.marginTop,d=l.bottom-r.marginBottom;c&&c.top>h&&c.bottom<d&&(a=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:c.top-h}))}return s.dispatch(setSel(n,o),{effects:a}),!0}const cursorPageUp=s=>cursorByPage(s,!1),cursorPageDown=s=>cursorByPage(s,!0);function moveByLineBoundary(s,e,r){let n=s.lineBlockAt(e.head),o=s.moveToLineBoundary(e,r);if(o.head==e.head&&o.head!=(r?n.to:n.from)&&(o=s.moveToLineBoundary(e,r,!1)),!r&&o.head==n.from&&n.length){let a=/^\s*/.exec(s.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(o=EditorSelection.cursor(n.from+a))}return o}const cursorLineBoundaryForward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!0)),cursorLineBoundaryBackward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!1)),cursorLineBoundaryLeft=s=>moveSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),cursorLineBoundaryRight=s=>moveSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),cursorLineStart=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from,1)),cursorLineEnd=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to,-1));function toMatchingBracket(s,e,r){let n=!1,o=updateSel(s.selection,a=>{let c=matchBrackets(s,a.head,-1)||matchBrackets(s,a.head,1)||a.head>0&&matchBrackets(s,a.head-1,1)||a.head<s.doc.length&&matchBrackets(s,a.head+1,-1);if(!c||!c.end)return a;n=!0;let l=c.start.from==a.head?c.end.to:c.end.from;return r?EditorSelection.range(a.anchor,l):EditorSelection.cursor(l)});return n?(e(setSel(s,o)),!0):!1}const cursorMatchingBracket=({state:s,dispatch:e})=>toMatchingBracket(s,e,!1);function extendSel(s,e){let r=updateSel(s.state.selection,n=>{let o=e(n);return EditorSelection.range(n.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return r.eq(s.state.selection)?!1:(s.dispatch(setSel(s.state,r)),!0)}function selectByChar(s,e){return extendSel(s,r=>s.moveByChar(r,e))}const selectCharLeft=s=>selectByChar(s,!ltrAtCursor(s)),selectCharRight=s=>selectByChar(s,ltrAtCursor(s));function selectByGroup(s,e){return extendSel(s,r=>s.moveByGroup(r,e))}const selectGroupLeft=s=>selectByGroup(s,!ltrAtCursor(s)),selectGroupRight=s=>selectByGroup(s,ltrAtCursor(s)),selectSyntaxLeft=s=>extendSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),selectSyntaxRight=s=>extendSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function selectByLine(s,e){return extendSel(s,r=>s.moveVertically(r,e))}const selectLineUp=s=>selectByLine(s,!1),selectLineDown=s=>selectByLine(s,!0);function selectByPage(s,e){return extendSel(s,r=>s.moveVertically(r,e,pageInfo(s).height))}const selectPageUp=s=>selectByPage(s,!1),selectPageDown=s=>selectByPage(s,!0),selectLineBoundaryForward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!0)),selectLineBoundaryBackward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!1)),selectLineBoundaryLeft=s=>extendSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),selectLineBoundaryRight=s=>extendSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),selectLineStart=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from)),selectLineEnd=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to)),cursorDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:0})),!0),cursorDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.doc.length})),!0),selectDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:0})),!0),selectDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),selectAll=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),selectLine=({state:s,dispatch:e})=>{let r=selectedLineBlocks(s).map(({from:n,to:o})=>EditorSelection.range(n,Math.min(o+1,s.doc.length)));return e(s.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:s,dispatch:e})=>{let r=updateSel(s.selection,n=>{var o;let a=syntaxTree(s).resolveStack(n.from,1);for(let c=a;c;c=c.next){let{node:l}=c;if((l.from<n.from&&l.to>=n.to||l.to>n.to&&l.from<=n.from)&&(!((o=l.parent)===null||o===void 0)&&o.parent))return EditorSelection.range(l.to,l.from)}return n});return e(setSel(s,r)),!0},simplifySelection=({state:s,dispatch:e})=>{let r=s.selection,n=null;return r.ranges.length>1?n=EditorSelection.create([r.main]):r.main.empty||(n=EditorSelection.create([EditorSelection.cursor(r.main.head)])),n?(e(setSel(s,n)),!0):!1};function deleteBy(s,e){if(s.state.readOnly)return!1;let r="delete.selection",{state:n}=s,o=n.changeByRange(a=>{let{from:c,to:l}=a;if(c==l){let h=e(a);h<c?(r="delete.backward",h=skipAtomic(s,h,!1)):h>c&&(r="delete.forward",h=skipAtomic(s,h,!0)),c=Math.min(c,h),l=Math.max(l,h)}else c=skipAtomic(s,c,!1),l=skipAtomic(s,l,!0);return c==l?{range:a}:{changes:{from:c,to:l},range:EditorSelection.cursor(c,c<a.head?-1:1)}});return o.changes.empty?!1:(s.dispatch(n.update(o,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?EditorView.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(s,e,r){if(s instanceof EditorView)for(let n of s.state.facet(EditorView.atomicRanges).map(o=>o(s)))n.between(e,e,(o,a)=>{o<e&&a>e&&(e=r?a:o)});return e}const deleteByChar=(s,e)=>deleteBy(s,r=>{let n=r.from,{state:o}=s,a=o.doc.lineAt(n),c,l;if(!e&&n>a.from&&n<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,n-a.from))){if(c[c.length-1]=="	")return n-1;let h=countColumn(c,o.tabSize),d=h%getIndentUnit(o)||getIndentUnit(o);for(let f=0;f<d&&c[c.length-1-f]==" ";f++)n--;l=n}else l=findClusterBreak(a.text,n-a.from,e,e)+a.from,l==n&&a.number!=(e?o.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,n-a.from))&&(l=findClusterBreak(a.text,l-a.from,!1,!1)+a.from);return l}),deleteCharBackward=s=>deleteByChar(s,!1),deleteCharForward=s=>deleteByChar(s,!0),deleteByGroup=(s,e)=>deleteBy(s,r=>{let n=r.head,{state:o}=s,a=o.doc.lineAt(n),c=o.charCategorizer(n);for(let l=null;;){if(n==(e?a.to:a.from)){n==r.head&&a.number!=(e?o.doc.lines:1)&&(n+=e?1:-1);break}let h=findClusterBreak(a.text,n-a.from,e)+a.from,d=a.text.slice(Math.min(n,h)-a.from,Math.max(n,h)-a.from),f=c(d);if(l!=null&&f!=l)break;(d!=" "||n!=r.head)&&(l=f),n=h}return n}),deleteGroupBackward=s=>deleteByGroup(s,!1),deleteGroupForward=s=>deleteByGroup(s,!0),deleteToLineEnd=s=>deleteBy(s,e=>{let r=s.lineBlockAt(e.head).to;return e.head<r?r:Math.min(s.state.doc.length,e.head+1)}),deleteLineBoundaryBackward=s=>deleteBy(s,e=>{let r=s.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),deleteLineBoundaryForward=s=>deleteBy(s,e=>{let r=s.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(s.state.doc.length,e.head+1)}),splitLine=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=s.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Text$1.of(["",""])},range:EditorSelection.cursor(n.from)}));return e(s.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=s.changeByRange(n=>{if(!n.empty||n.from==0||n.from==s.doc.length)return{range:n};let o=n.from,a=s.doc.lineAt(o),c=o==a.from?o-1:findClusterBreak(a.text,o-a.from,!1)+a.from,l=o==a.to?o+1:findClusterBreak(a.text,o-a.from,!0)+a.from;return{changes:{from:c,to:l,insert:s.doc.slice(o,l).append(s.doc.slice(c,o))},range:EditorSelection.cursor(l)}});return r.changes.empty?!1:(e(s.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(s){let e=[],r=-1;for(let n of s.selection.ranges){let o=s.doc.lineAt(n.from),a=s.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=s.doc.lineAt(n.to-1)),r>=o.number){let c=e[e.length-1];c.to=a.to,c.ranges.push(n)}else e.push({from:o.from,to:a.to,ranges:[n]});r=a.number+1}return e}function moveLine(s,e,r){if(s.readOnly)return!1;let n=[],o=[];for(let a of selectedLineBlocks(s)){if(r?a.to==s.doc.length:a.from==0)continue;let c=s.doc.lineAt(r?a.to+1:a.from-1),l=c.length+1;if(r){n.push({from:a.to,to:c.to},{from:a.from,insert:c.text+s.lineBreak});for(let h of a.ranges)o.push(EditorSelection.range(Math.min(s.doc.length,h.anchor+l),Math.min(s.doc.length,h.head+l)))}else{n.push({from:c.from,to:a.from},{from:a.to,insert:s.lineBreak+c.text});for(let h of a.ranges)o.push(EditorSelection.range(h.anchor-l,h.head-l))}}return n.length?(e(s.update({changes:n,scrollIntoView:!0,selection:EditorSelection.create(o,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:s,dispatch:e})=>moveLine(s,e,!1),moveLineDown=({state:s,dispatch:e})=>moveLine(s,e,!0);function copyLine(s,e,r){if(s.readOnly)return!1;let n=[];for(let o of selectedLineBlocks(s))r?n.push({from:o.from,insert:s.doc.slice(o.from,o.to)+s.lineBreak}):n.push({from:o.to,insert:s.lineBreak+s.doc.slice(o.from,o.to)});return e(s.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:s,dispatch:e})=>copyLine(s,e,!1),copyLineDown=({state:s,dispatch:e})=>copyLine(s,e,!0),deleteLine=s=>{if(s.state.readOnly)return!1;let{state:e}=s,r=e.changes(selectedLineBlocks(e).map(({from:o,to:a})=>(o>0?o--:a<e.doc.length&&a++,{from:o,to:a}))),n=updateSel(e.selection,o=>s.moveVertically(o,!0)).map(r);return s.dispatch({changes:r,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=syntaxTree(s).resolveInner(e),n=r.childBefore(e),o=r.childAfter(e),a;return n&&o&&n.to<=e&&o.from>=e&&(a=n.type.prop(NodeProp.closedBy))&&a.indexOf(o.name)>-1&&s.doc.lineAt(n.to).from==s.doc.lineAt(o.from).from&&!/\S/.test(s.sliceDoc(n.to,o.from))?{from:n.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(s){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let n=e.changeByRange(o=>{let{from:a,to:c}=o,l=e.doc.lineAt(a),h=!s&&a==c&&isBetweenBrackets(e,a);s&&(a=c=(c<=l.to?l:e.doc.lineAt(c)).to);let d=new IndentContext(e,{simulateBreak:a,simulateDoubleBreak:!!h}),f=getIndentation(d,a);for(f==null&&(f=countColumn(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));c<l.to&&/\s/.test(l.text[c-l.from]);)c++;h?{from:a,to:c}=h:a>l.from&&a<l.from+100&&!/\S/.test(l.text.slice(0,a))&&(a=l.from);let g=["",indentString(e,f)];return h&&g.push(indentString(e,d.lineIndent(l.from,-1))),{changes:{from:a,to:c,insert:Text$1.of(g)},range:EditorSelection.cursor(a+1+g[1].length)}});return r(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(s,e){let r=-1;return s.changeByRange(n=>{let o=[];for(let c=n.from;c<=n.to;){let l=s.doc.lineAt(c);l.number>r&&(n.empty||n.to>l.from)&&(e(l,o,n),r=l.number),c=l.to+1}let a=s.changes(o);return{changes:o,range:EditorSelection.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const indentSelection=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let r=Object.create(null),n=new IndentContext(s,{overrideIndentation:a=>{let c=r[a];return c??-1}}),o=changeBySelectedLine(s,(a,c,l)=>{let h=getIndentation(n,a.from);if(h==null)return;/\S/.test(a.text)||(h=0);let d=/^\s*/.exec(a.text)[0],f=indentString(s,h);(d!=f||l.from<a.from+d.length)&&(r[a.from]=h,c.push({from:a.from,to:a.from+d.length,insert:f}))});return o.changes.empty||e(s.update(o,{userEvent:"indent"})),!0},indentMore=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(r,n)=>{n.push({from:r.from,insert:s.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(r,n)=>{let o=/^\s*/.exec(r.text)[0];if(!o)return;let a=countColumn(o,s.tabSize),c=0,l=indentString(s,Math.max(0,a-getIndentUnit(s)));for(;c<o.length&&c<l.length&&o.charCodeAt(c)==l.charCodeAt(c);)c++;n.push({from:r.from+c,to:r.from+o.length,insert:l.slice(c)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};var define_process_env_default={};class Stack{constructor(e,r,n,o,a,c,l,h,d,f=0,g){this.p=e,this.stack=r,this.state=n,this.reducePos=o,this.pos=a,this.score=c,this.buffer=l,this.bufferBase=h,this.curContext=d,this.lookAhead=f,this.parent=g}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,n=0){let o=e.parser.context;return new Stack(e,[],r,n,n,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var r;let n=e>>19,o=e&65535,{parser:a}=this.p,c=a.dynamicPrecedence(o);if(c&&(this.score+=c),n==0){this.pushState(a.getGoto(this.state,o,!0),this.reducePos),o<a.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),this.reduceContext(o,this.reducePos);return}let l=this.stack.length-(n-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,d=this.reducePos-h;d>=2e3&&!(!((r=this.p.parser.nodeSet.types[o])===null||r===void 0)&&r.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=d));let f=l?this.stack[l-1]:0,g=this.bufferBase+this.buffer.length-f;if(o<a.minRepeatTerm||e&131072){let v=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,h,v,g+4,!0)}if(e&262144)this.state=this.stack[l];else{let v=this.stack[l-3];this.state=a.getGoto(v,o,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(o,h)}storeNode(e,r,n,o=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let c=this,l=this.buffer.length;if(l==0&&c.parent&&(l=c.bufferBase-c.parent.bufferBase,c=c.parent),l>0&&c.buffer[l-4]==0&&c.buffer[l-1]>-1){if(r==n)return;if(c.buffer[l-2]>=r){c.buffer[l-2]=n;return}}}if(!a||this.pos==n)this.buffer.push(e,r,n,o);else{let c=this.buffer.length;if(c>0&&this.buffer[c-4]!=0)for(;c>0&&this.buffer[c-2]>n;)this.buffer[c]=this.buffer[c-4],this.buffer[c+1]=this.buffer[c-3],this.buffer[c+2]=this.buffer[c-2],this.buffer[c+3]=this.buffer[c-1],c-=4,o>4&&(o-=4);this.buffer[c]=e,this.buffer[c+1]=r,this.buffer[c+2]=n,this.buffer[c+3]=o}}shift(e,r,n,o){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=o,this.shiftContext(r,n),r<=this.p.parser.maxNode&&this.buffer.push(r,n,o,4);else{let a=e,{parser:c}=this.p;(o>this.pos||r<=c.maxNode)&&(this.pos=o,c.stateFlag(a,1)||(this.reducePos=o)),this.pushState(a,n),this.shiftContext(r,n),r<=c.maxNode&&this.buffer.push(r,n,o,4)}}apply(e,r,n,o){e&65536?this.reduce(e):this.shift(e,r,n,o)}useNode(e,r){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(r,o),this.buffer.push(n,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let n=e.buffer.slice(r),o=e.bufferBase+r;for(;e&&o==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,r){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,r,4),this.storeNode(0,this.pos,r,n?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(e){for(let r=new SimulatedStack(this);;){let n=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,e);if(n==0)return!1;if(!(n&65536))return!0;r.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let o=[];for(let a=0,c;a<r.length;a+=2)(c=r[a+1])!=this.state&&this.p.parser.hasAction(c,e)&&o.push(r[a],c);if(this.stack.length<120)for(let a=0;o.length<8&&a<r.length;a+=2){let c=r[a+1];o.some((l,h)=>h&1&&l==c)||o.push(r[a],c)}r=o}let n=[];for(let o=0;o<r.length&&n.length<4;o+=2){let a=r[o+1];if(a==this.state)continue;let c=this.split();c.pushState(a,this.pos),c.storeNode(0,c.pos,c.pos,4,!0),c.shiftContext(r[o],this.pos),c.reducePos=this.pos,c.score-=200,n.push(c)}return n}forceReduce(){let{parser:e}=this.p,r=e.stateSlot(this.state,5);if(!(r&65536))return!1;if(!e.validAction(this.state,r)){let n=r>>19,o=r&65535,a=this.stack.length-n*3;if(a<0||e.getGoto(this.stack[a],o,!1)<0){let c=this.findForcedReduction();if(c==null)return!1;r=c}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:e}=this.p,r=[],n=(o,a)=>{if(!r.includes(o))return r.push(o),e.allActions(o,c=>{if(!(c&393216))if(c&65536){let l=(c>>19)-a;if(l>1){let h=c&65535,d=this.stack.length-l*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return l<<19|65536|h}}else{let l=n(c,a+1);if(l!=null)return l}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(r)))}reduceContext(e,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(r)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let r=new StackContext(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.strict?e.hash(r):0}}class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let r=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=o}}class StackBufferCursor{constructor(e,r,n){this.stack=e,this.pos=r,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,r=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,r,r-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(s,e=Uint16Array){if(typeof s!="string")return s;let r=null;for(let n=0,o=0;n<s.length;){let a=0;for(;;){let c=s.charCodeAt(n++),l=!1;if(c==126){a=65535;break}c>=92&&c--,c>=34&&c--;let h=c-32;if(h>=46&&(h-=46,l=!0),a+=h,l)break;a*=46}r?r[o++]=a:r=new e(a)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,r){this.input=e,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(e,r){let n=this.range,o=this.rangeIndex,a=this.pos+e;for(;a<n.from;){if(!o)return null;let c=this.ranges[--o];a-=n.from-c.to,n=c}for(;r<0?a>n.to:a>=n.to;){if(o==this.ranges.length-1)return null;let c=this.ranges[++o];a+=c.from-n.to,n=c}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let r of this.ranges)if(r.to>e)return Math.max(e,r.from);return this.end}peek(e){let r=this.chunkOff+e,n,o;if(r>=0&&r<this.chunk.length)n=this.pos+e,o=this.chunk.charCodeAt(r);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(n=a,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let c=this.rangeIndex,l=this.range;for(;l.to<=n;)l=this.ranges[++c];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-n)),o=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),o}acceptToken(e,r=0){let n=r?this.resolveOffset(r,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),r=this.pos+e.length;this.chunk=r>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,r){if(r?(this.token=r,r.start=e,r.lookAhead=e+1,r.value=r.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,r){if(e>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,r-this.chunkPos);if(e>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,r-this.chunk2Pos);if(e>=this.range.from&&r<=this.range.to)return this.input.read(e,r);let n="";for(let o of this.ranges){if(o.from>=r)break;o.to>e&&(n+=this.input.read(Math.max(o.from,e),Math.min(o.to,r)))}return n}}class TokenGroup{constructor(e,r){this.data=e,this.id=r}token(e,r){let{parser:n}=r.p;readToken(this.data,e,r,this.id,n.data,n.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,r={}){this.token=e,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function readToken(s,e,r,n,o,a){let c=0,l=1<<n,{dialect:h}=r.p.parser;e:for(;l&s[c];){let d=s[c+1];for(let S=c+3;S<d;S+=2)if((s[S+1]&l)>0){let A=s[S];if(h.allows(A)&&(e.token.value==-1||e.token.value==A||overrides(A,e.token.value,o,a))){e.acceptToken(A);break}}let f=e.next,g=0,v=s[c+2];if(e.next<0&&v>g&&s[d+v*3-3]==65535){c=s[d+v*3-1];continue e}for(;g<v;){let S=g+v>>1,A=d+S+(S<<1),w=s[A],m=s[A+1]||65536;if(f<w)v=S;else if(f>=m)g=S+1;else{c=s[A+2],e.advance();continue e}}break}}function findOffset(s,e,r){for(let n=e,o;(o=s[n])!=65535;n++)if(o==r)return n-e;return-1}function overrides(s,e,r,n){let o=findOffset(r,n,e);return o<0||findOffset(r,n,s)<o}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(s,e,r){let n=s.cursor(IterMode.IncludeAnonymous);for(n.moveTo(e);;)if(!(r<0?n.childBefore(e):n.childAfter(e)))for(;;){if((r<0?n.to<e:n.from>e)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(s.length,Math.max(n.from+1,e+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:s.length}}class FragmentCursor{constructor(e,r){this.fragments=e,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let n=this.trees[r],o=this.index[r];if(o==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=n.children[o],c=this.start[r]+n.positions[o];if(c>e)return this.nextStart=c,null;if(a instanceof Tree){if(c==e){if(c<this.safeFrom)return null;let l=c+a.length;if(l<=this.safeTo){let h=a.prop(NodeProp.lookAhead);if(!h||l+h<this.fragment.to)return a}}this.index[r]++,c+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(c),this.index.push(0))}else this.index[r]++,this.nextStart=c+a.length}}}class TokenCache{constructor(e,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new CachedToken)}getActions(e){let r=0,n=null,{parser:o}=e.p,{tokenizers:a}=o,c=o.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<a.length;d++){if(!(1<<d&c))continue;let f=a[d],g=this.tokens[d];if(!(n&&!f.fallback)&&((f.contextual||g.start!=e.pos||g.mask!=c||g.context!=l)&&(this.updateCachedToken(g,f,e),g.mask=c,g.context=l),g.lookAhead>g.end+25&&(h=Math.max(g.lookAhead,h)),g.value!=0)){let v=r;if(g.extended>-1&&(r=this.addActions(e,g.extended,g.end,r)),r=this.addActions(e,g.value,g.end,r),!f.extend&&(n=g,r>v))break}}for(;this.actions.length>r;)this.actions.pop();return h&&e.setLookAhead(h),!n&&e.pos==this.stream.end&&(n=new CachedToken,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,r=this.addActions(e,n.value,n.end,r)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let r=new CachedToken,{pos:n,p:o}=e;return r.start=n,r.end=Math.min(n+1,o.stream.end),r.value=n==o.stream.end?o.parser.eofTerm:0,r}updateCachedToken(e,r,n){let o=this.stream.clipPos(n.pos);if(r.token(this.stream.reset(o,e),n),e.value>-1){let{parser:a}=n.p;for(let c=0;c<a.specialized.length;c++)if(a.specialized[c]==e.value){let l=a.specializers[c](this.stream.read(e.start,e.end),n);if(l>=0&&n.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,r,n,o){for(let a=0;a<o;a+=3)if(this.actions[a]==e)return o;return this.actions[o++]=e,this.actions[o++]=r,this.actions[o++]=n,o}addActions(e,r,n,o){let{state:a}=e,{parser:c}=e.p,{data:l}=c;for(let h=0;h<2;h++)for(let d=c.stateSlot(a,h?2:1);;d+=3){if(l[d]==65535)if(l[d+1]==1)d=pair(l,d+2);else{o==0&&l[d+1]==2&&(o=this.putAction(pair(l,d+2),r,n,o));break}l[d]==r&&(o=this.putAction(pair(l,d+1),r,n,o))}return o}}class Parse{constructor(e,r,n,o){this.parser=e,this.input=r,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(r,o),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:a}=o[0];this.stacks=[Stack.start(this,e.top[0],a)],this.fragments=n.length&&this.stream.end-a>e.bufferLength*4?new FragmentCursor(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,r=this.minStackPos,n=this.stacks=[],o,a;if(this.bigReductionCount>300&&e.length==1){let[c]=e;for(;c.forceReduce()&&c.stack.length&&c.stack[c.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let c=0;c<e.length;c++){let l=e[c];for(;;){if(this.tokens.mainToken=null,l.pos>r)n.push(l);else{if(this.advanceStack(l,n,e))continue;{o||(o=[],a=[]),o.push(l);let h=this.tokens.getMainToken(l);a.push(h.value,h.end)}}break}}if(!n.length){let c=o&&findFinished(o);if(c)return verbose&&console.log("Finish with "+this.stackID(c)),this.stackToTree(c);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&o){let c=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,a,n);if(c)return verbose&&console.log("Force-finish "+this.stackID(c)),this.stackToTree(c.forceAll())}if(this.recovering){let c=this.recovering==1?1:this.recovering*3;if(n.length>c)for(n.sort((l,h)=>h.score-l.score);n.length>c;)n.pop();n.some(l=>l.reducePos>r)&&this.recovering--}else if(n.length>1){e:for(let c=0;c<n.length-1;c++){let l=n[c];for(let h=c+1;h<n.length;h++){let d=n[h];if(l.sameState(d)||l.buffer.length>500&&d.buffer.length>500)if((l.score-d.score||l.buffer.length-d.buffer.length)>0)n.splice(h--,1);else{n.splice(c--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let c=1;c<n.length;c++)n[c].pos<this.minStackPos&&(this.minStackPos=n[c].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,r,n){let o=e.pos,{parser:a}=this,c=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,f=d?e.curContext.hash:0;for(let g=this.fragments.nodeAt(o);g;){let v=this.parser.nodeSet.types[g.type.id]==g.type?a.getGoto(e.state,g.type.id):-1;if(v>-1&&g.length&&(!d||(g.prop(NodeProp.contextHash)||0)==f))return e.useNode(g,v),verbose&&console.log(c+this.stackID(e)+` (via reuse of ${a.getName(g.type.id)})`),!0;if(!(g instanceof Tree)||g.children.length==0||g.positions[0]>0)break;let S=g.children[0];if(S instanceof Tree&&g.positions[0]==0)g=S;else break}}let l=a.stateSlot(e.state,4);if(l>0)return e.reduce(l),verbose&&console.log(c+this.stackID(e)+` (via always-reduce ${a.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let f=h[d++],g=h[d++],v=h[d++],S=d==h.length||!n,A=S?e:e.split(),w=this.tokens.mainToken;if(A.apply(f,g,w?w.start:A.pos,v),verbose&&console.log(c+this.stackID(A)+` (via ${f&65536?`reduce of ${a.getName(f&65535)}`:"shift"} for ${a.getName(g)} @ ${o}${A==e?"":", split"})`),S)return!0;A.pos>o?r.push(A):n.push(A)}return!1}advanceFully(e,r){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return pushStackDedup(e,r),!0}}runRecovery(e,r,n){let o=null,a=!1;for(let c=0;c<e.length;c++){let l=e[c],h=r[c<<1],d=r[(c<<1)+1],f=verbose?this.stackID(l)+" -> ":"";if(l.deadEnd&&(a||(a=!0,l.restart(),verbose&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,n))))continue;let g=l.split(),v=f;for(let S=0;g.forceReduce()&&S<10&&(verbose&&console.log(v+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,n));S++)verbose&&(v=this.stackID(g)+" -> ");for(let S of l.recoverByInsert(h))verbose&&console.log(f+this.stackID(S)+" (via recover-insert)"),this.advanceFully(S,n);this.stream.end>l.pos?(d==l.pos&&(d++,h=0),l.recoverByDelete(h,d),verbose&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),pushStackDedup(l,n)):(!o||o.score<l.score)&&(o=l)}return o}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let r=(stackIDs||(stackIDs=new WeakMap)).get(e);return r||stackIDs.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}}function pushStackDedup(s,e){for(let r=0;r<e.length;r++){let n=e[r];if(n.pos==s.pos&&n.sameState(s)){e[r].score<s.score&&(e[r]=s);return}}e.push(s)}class Dialect{constructor(e,r,n){this.source=e,this.flags=r,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const id=s=>s;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let r=e.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let l=0;l<e.repeatNodeCount;l++)r.push("");let n=Object.keys(e.topRules).map(l=>e.topRules[l][1]),o=[];for(let l=0;l<r.length;l++)o.push([]);function a(l,h,d){o[l].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];typeof h=="string"&&(h=NodeProp[h]);for(let d=1;d<l.length;){let f=l[d++];if(f>=0)a(f,h,l[d++]);else{let g=l[d+-f];for(let v=-f;v>0;v--)a(l[d++],h,g);d++}}}this.nodeSet=new NodeSet(r.map((l,h)=>NodeType.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:o[h],top:n.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let c=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new TokenGroup(c,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,r,n){let o=new Parse(this,e,r,n);for(let a of this.wrappers)o=a(o,e,r,n);return o}getGoto(e,r,n=!1){let o=this.goto;if(r>=o[0])return-1;for(let a=o[r+1];;){let c=o[a++],l=c&1,h=o[a++];if(l&&n)return h;for(let d=a+(c>>1);a<d;a++)if(o[a]==e)return h;if(l)return-1}}hasAction(e,r){let n=this.data;for(let o=0;o<2;o++)for(let a=this.stateSlot(e,o?2:1),c;;a+=3){if((c=n[a])==65535)if(n[a+1]==1)c=n[a=pair(n,a+2)];else{if(n[a+1]==2)return pair(n,a+2);break}if(c==r||c==0)return pair(n,a+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}validAction(e,r){return!!this.allActions(e,n=>n==r?!0:null)}allActions(e,r){let n=this.stateSlot(e,4),o=n?r(n):void 0;for(let a=this.stateSlot(e,1);o==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=pair(this.data,a+2);else break;o=r(pair(this.data,a+1))}return o}nextStates(e){let r=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=pair(this.data,n+2);else break;if(!(this.data[n+2]&1)){let o=this.data[n+1];r.some((a,c)=>c&1&&a==o)||r.push(this.data[n],o)}}return r}configure(e){let r=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=n}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(n=>{let o=e.tokenizers.find(a=>a.from==n);return o?o.to:n})),e.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((n,o)=>{let a=e.specializers.find(l=>l.from==n.external);if(!a)return n;let c=Object.assign(Object.assign({},n),{external:a.to});return r.specializers[o]=getSpecializer(c),c})),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){let r=Object.keys(this.dialects),n=r.map(()=>!1);if(e)for(let a of e.split(" ")){let c=r.indexOf(a);c>=0&&(n[c]=!0)}let o=null;for(let a=0;a<r.length;a++)if(!n[a])for(let c=this.dialects[r[a]],l;(l=this.data[c++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[l]=1;return new Dialect(e,n,o)}static deserialize(e){return new LRParser(e)}}function pair(s,e){return s[e]|s[e+1]<<16}function findFinished(s){let e=null;for(let r of s){let n=r.p.stoppedAt;(r.pos==r.p.stream.end||n!=null&&r.pos>n)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}function getSpecializer(s){if(s.external){let e=s.extend?1:0;return(r,n)=>s.external(r,n)<<1|e}return s.get}const printKeyword=1,indent=201,dedent=202,newline$1=203,blankLineStart=204,newlineBracketed=205,eof=206,formatString1Content=207,formatString1Brace=2,formatString1End=208,formatString2Content=209,formatString2Brace=3,formatString2End=210,formatString1lContent=211,formatString1lBrace=4,formatString1lEnd=212,formatString2lContent=213,formatString2lBrace=5,formatString2lEnd=214,ParenL=26,ParenthesizedExpression=27,TupleExpression=51,ComprehensionExpression=52,BracketL=57,ArrayExpression=58,ArrayComprehensionExpression=59,BraceL=61,DictionaryExpression=62,DictionaryComprehensionExpression=63,SetExpression=64,SetComprehensionExpression=65,ArgList=67,subscript=251,FormatString=74,importList=270,TypeParamList=115,ParamList=133,SequencePattern=154,MappingPattern=155,PatternArgList=158,newline=10,carriageReturn=13,space=32,tab=9,hash=35,parenOpen=40,dot=46,braceOpen=123,singleQuote=39,doubleQuote=34,backslash=92,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,FormatString,DictionaryExpression,DictionaryComprehensionExpression,SequencePattern,MappingPattern,PatternArgList,TypeParamList]);function isLineBreak(s){return s==newline||s==carriageReturn}const newlines=new ExternalTokenizer((s,e)=>{let r;if(s.next<0)s.acceptToken(eof);else if(e.context.depth<0)isLineBreak(s.next)&&s.acceptToken(newlineBracketed,1);else if(((r=s.peek(-1))<0||isLineBreak(r))&&e.canShift(blankLineStart)){let n=0;for(;s.next==space||s.next==tab;)s.advance(),n++;(s.next==newline||s.next==carriageReturn||s.next==hash)&&s.acceptToken(blankLineStart,-n)}else isLineBreak(s.next)&&s.acceptToken(newline$1,1)},{contextual:!0}),indentation=new ExternalTokenizer((s,e)=>{let r=e.context.depth;if(r<0)return;let n=s.peek(-1);if(n==newline||n==carriageReturn){let o=0,a=0;for(;;){if(s.next==space)o++;else if(s.next==tab)o+=8-o%8;else break;s.advance(),a++}o!=r&&s.next!=newline&&s.next!=carriageReturn&&s.next!=hash&&(o<r?s.acceptToken(dedent,-a):s.acceptToken(indent))}});function IndentLevel(s,e){this.parent=s,this.depth=e,this.hash=(s?s.hash+s.hash<<8:0)+e+(e<<4)}const topIndent=new IndentLevel(null,0);function countIndent(s){let e=0;for(let r=0;r<s.length;r++)e+=s.charCodeAt(r)==tab?8-e%8:1;return e}const trackIndent=new ContextTracker({start:topIndent,reduce(s,e){return s.depth<0&&bracketed.has(e)?s.parent:s},shift(s,e,r,n){return e==indent?new IndentLevel(s,countIndent(n.read(n.pos,r.pos))):e==dedent?s.parent:e==ParenL||e==BracketL||e==BraceL?new IndentLevel(s,-1):s},hash(s){return s.hash}}),legacyPrint=new ExternalTokenizer(s=>{for(let e=0;e<5;e++){if(s.next!="print".charCodeAt(e))return;s.advance()}if(!/\w/.test(String.fromCharCode(s.next)))for(let e=0;;e++){let r=s.peek(e);if(!(r==space||r==tab)){r!=parenOpen&&r!=dot&&r!=newline&&r!=carriageReturn&&r!=hash&&s.acceptToken(printKeyword);return}}});function formatString(s,e,r,n,o){return new ExternalTokenizer(a=>{let c=a.pos;for(;!(a.next<0);)if(a.next==braceOpen)if(a.peek(1)==braceOpen)a.advance(2);else{if(a.pos==c){a.acceptToken(n,1);return}break}else if(a.next==backslash)a.advance(),a.next>=0&&a.advance();else if(a.next==s&&(e==1||a.peek(1)==s&&a.peek(2)==s)){if(a.pos==c){a.acceptToken(o,e);return}break}else a.advance();a.pos>c&&a.acceptToken(r)})}const formatString1=formatString(singleQuote,1,formatString1Content,formatString1Brace,formatString1End),formatString2=formatString(doubleQuote,1,formatString2Content,formatString2Brace,formatString2End),formatString1l=formatString(singleQuote,3,formatString1lContent,formatString1lBrace,formatString1lEnd),formatString2l=formatString(doubleQuote,3,formatString2lContent,formatString2lBrace,formatString2lEnd),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier={__proto__:null,await:48,or:58,and:60,in:64,not:66,is:68,if:74,else:76,lambda:80,yield:98,from:100,async:106,for:108,None:168,True:170,False:170,del:184,pass:188,break:192,continue:196,return:200,raise:208,import:212,as:214,global:218,nonlocal:220,assert:224,type:229,elif:242,while:246,try:252,except:254,finally:256,with:260,def:264,class:274,match:285,case:291},parser=LRParser.deserialize({version:14,states:"#&jO`Q#yOOP$bOSOOO%kQ&nO'#HcOOQS'#Cq'#CqOOQS'#Cr'#CrO'ZQ#xO'#CpO(|Q&nO'#HbOOQS'#Hc'#HcOOQS'#DW'#DWOOQS'#Hb'#HbO)jQ#xO'#DaO)}Q#xO'#DhO*_Q#xO'#DlOOQS'#Dw'#DwO*rO,UO'#DwO*zO7[O'#DwO+SOWO'#DxO+_O`O'#DxO+jOpO'#DxO+uO!bO'#DxO-wQ&nO'#HSOOQS'#HS'#HSO'ZQ#xO'#HRO/ZQ&nO'#HROOQS'#Ee'#EeO/rQ#xO'#EfOOQS'#HQ'#HQO/|Q#xO'#HPOOQV'#HP'#HPO0XQ#xO'#F]OOQS'#Ge'#GeO0^Q#xO'#F[OOQV'#IY'#IYOOQV'#HO'#HOOOQV'#Ft'#FtQ`Q#yOOO'ZQ#xO'#CsO0lQ#xO'#DPO0sQ#xO'#DTO1RQ#xO'#HgO1cQ&nO'#EYO'ZQ#xO'#EZOOQS'#E]'#E]OOQS'#E_'#E_OOQS'#Ea'#EaO1wQ#xO'#EcO2_Q#xO'#EgO0XQ#xO'#EiO2rQ&nO'#EiO0XQ#xO'#ElO/rQ#xO'#EoO0XQ#xO'#EqO/rQ#xO'#EwO/rQ#xO'#EzO2}Q#xO'#E|O3UQ#xO'#FRO3aQ#xO'#E}O/rQ#xO'#FRO0XQ#xO'#FTO0XQ#xO'#FYO3fQ#xO'#F_P3mO#xO'#G}POOO)CBq)CBqOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Ck'#CkOOQS'#Cl'#ClOOQS'#Cn'#CnO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO'ZQ#xO,59QO3xQ#xO'#DqOOQS,5:[,5:[O4]Q#xO'#HqOOQS,5:_,5:_O4jQMlO,5:_O4oQ&nO,59[O0lQ#xO,59dO0lQ#xO,59dO0lQ#xO,59dO7_Q#xO,59dO7dQ#xO,59dO7kQ#xO,59lO7rQ#xO'#HbO8xQ#xO'#HaOOQS'#Ha'#HaOOQS'#D^'#D^O9aQ#xO,59cO'ZQ#xO,59cO9oQ#xO,59cOOQS,59{,59{O9tQ#xO,5:TO'ZQ#xO,5:TOOQS,5:S,5:SO:SQ#xO,5:SO:XQ#xO,5:ZO'ZQ#xO,5:ZO'ZQ#xO,5:XOOQS,5:W,5:WO:jQ#xO,5:WO:oQ#xO,5:YOOOO'#F|'#F|O:tO,UO,5:cOOQS,5:c,5:cOOOO'#F}'#F}O:|O7[O,5:cO;UQ#xO'#DyOOOW'#GO'#GOO;fOWO,5:dOOQS,5:d,5:dO;UQ#xO'#D}OOO`'#GR'#GRO;qO`O,5:dO;UQ#xO'#EOOOOp'#GS'#GSO;|OpO,5:dO;UQ#xO'#EPOOO!b'#GT'#GTO<XO!bO,5:dOOQS'#GU'#GUO<dQ&nO,5:lO?UQ&nO,5=mO?oQ!LUO,5=mO@`Q&nO,5=mOOQS,5;Q,5;QO@wQ#yO'#G_OBZQ#xO,5;aOOQV,5=k,5=kOBfQ&nO'#ITOB}Q#xO,5;wOOQS-E:c-E:cOOQV,5;v,5;vO3[Q#xO'#FTOOQV-E9r-E9rOCVQ&nO,59_OE^Q&nO,59kOEwQ#xO'#HdOFSQ#xO'#HdO0XQ#xO'#HdOF_Q#xO'#DVOFgQ#xO,59oOFlQ#xO'#HhO'ZQ#xO'#HhO/rQ#xO,5>ROOQS,5>R,5>RO/rQ#xO'#EUOOQS'#EV'#EVOGZQ#xO'#GWOGkQ#xO,59OOGkQ#xO,59OO)pQ#xO,5:rOGyQ&nO'#HjOOQS,5:u,5:uOOQS,5:},5:}OH^Q#xO,5;ROHoQ#xO,5;TOOQS'#GZ'#GZOH}Q&nO,5;TOI]Q#xO,5;TOIbQ#xO'#IWOOQS,5;W,5;WOIpQ#xO'#ISOOQS,5;Z,5;ZOJRQ#xO,5;]O3aQ#xO,5;cO3aQ#xO,5;fOJZQ&nO'#IZO'ZQ#xO'#IZOJeQ#xO,5;hO2}Q#xO,5;hO/rQ#xO,5;mO0XQ#xO,5;oOJjQ#yO'#ExOKvQ#{O,5;iO! [Q#xO'#I[O3aQ#xO,5;mO! gQ#xO,5;oO! oQ#xO,5;tO! zQ&nO,5;yO'ZQ#xO,5;yPOOO,5=i,5=iP!!ROSO,5=iP!!WO#xO,5=iO!${Q&nO1G.lO!%SQ&nO1G.lO!'sQ&nO1G.lO!'}Q&nO1G.lO!*hQ&nO1G.lO!*{Q&nO1G.lO!+`Q#xO'#HpO!+nQ&nO'#HSO/rQ#xO'#HpO!+xQ#xO'#HoOOQS,5:],5:]O!,QQ#xO,5:]O!,VQ#xO'#HrO!,bQ#xO'#HrO!,uQ#xO,5>]OOQS'#Du'#DuOOQS1G/y1G/yOOQS1G/O1G/OO!-uQ&nO1G/OO!-|Q&nO1G/OO0lQ#xO1G/OO!.iQ#xO1G/WOOQS'#D]'#D]O/rQ#xO,59vOOQS1G.}1G.}O!.pQ#xO1G/gO!/QQ#xO1G/gO!/YQ#xO1G/hO'ZQ#xO'#HiO!/_Q#xO'#HiO!/dQ&nO1G.}O!/tQ#xO,59kO!0zQ#xO,5>XO!1[Q#xO,5>XO!1dQ#xO1G/oO!1iQ&nO1G/oOOQS1G/n1G/nO!1yQ#xO,5>SO!2pQ#xO,5>SO/rQ#xO1G/sO!3_Q#xO1G/uO!3dQ&nO1G/uO!3tQ&nO1G/sOOQS1G/r1G/rOOQS1G/t1G/tOOOO-E9z-E9zOOQS1G/}1G/}OOOO-E9{-E9{O!4UQ#xO'#H|O/rQ#xO'#H|O!4dQ#xO,5:eOOOW-E9|-E9|OOQS1G0O1G0OO!4oQ#xO,5:iOOO`-E:P-E:PO!4zQ#xO,5:jOOOp-E:Q-E:QO!5VQ#xO,5:kOOO!b-E:R-E:ROOQS-E:S-E:SO!5bQ!LUO1G3XO!6RQ&nO1G3XO'ZQ#xO,5<qOOQS,5<q,5<qOOQS-E:T-E:TOOQS,5<y,5<yOOQS-E:]-E:]OOQV1G0{1G0{O0XQ#xO'#GYO!6jQ&nO,5>oOOQS1G1c1G1cO!7RQ#xO1G1cOOQS'#DX'#DXO/rQ#xO,5>OOOQS,5>O,5>OO!7WQ#xO'#FuO!7cQ#xO,59qO!7kQ#xO1G/ZO!7uQ&nO,5>SOOQS1G3m1G3mOOQS,5:p,5:pO!8fQ#xO'#HROOQS,5<r,5<rOOQS-E:U-E:UO!8wQ#xO1G.jOOQS1G0^1G0^O!9VQ#xO,5>UO!9gQ#xO,5>UO/rQ#xO1G0mO/rQ#xO1G0mO0XQ#xO1G0oOOQS-E:X-E:XO!9xQ#xO1G0oO!:TQ#xO1G0oO!:YQ#xO,5>rO!:hQ#xO,5>rO!:vQ#xO,5>nO!;^Q#xO,5>nO!;oQ#xO'#EsO/rQ#xO1G0wO!;zQ#xO1G0wO!<PQ#{O1G0}O!?bQ#{O1G1QO!BpQ#xO,5>uO!BzQ#xO,5>uO!CSQ&nO,5>uO/rQ#xO1G1SO!C^Q#xO1G1SO3aQ#xO1G1XO! gQ#xO1G1ZOOQV,5;d,5;dO!CcQ#zO,5;dO!ChQ#{O1G1TO!F|Q#xO'#GbO3aQ#xO1G1TO3aQ#xO1G1TO!G^Q#xO,5>vO!GkQ#xO,5>vO0XQ#xO,5>vOOQV1G1X1G1XO!GsQ#xO'#FVO!HUQMlO1G1ZO!H^Q#xO1G1ZOOQV1G1`1G1`O3aQ#xO1G1`O!HcQ#xO1G1`O!HkQ#xO'#FaOOQV1G1e1G1eO! zQ&nO1G1ePOOO1G3T1G3TP!HpOSO1G3TOOQS,5>[,5>[OOQS'#Dr'#DrO/rQ#xO,5>[O!HuQ#xO,5>ZO!IYQ#xO,5>ZOOQS1G/w1G/wO!IbQ#xO,5>^O!IrQ#xO,5>^O!IzQ#xO,5>^O!J_Q#xO,5>^O!JoQ#xO,5>^OOQS1G3w1G3wOOQS7+$j7+$jO!7kQ#xO7+$rO!LbQ#xO1G/OO!LiQ#xO1G/OOOQS1G/b1G/bOOQS,5<c,5<cO'ZQ#xO,5<cOOQS7+%R7+%RO!LpQ#xO7+%ROOQS-E9u-E9uOOQS7+%S7+%SO!MQQ#xO,5>TO'ZQ#xO,5>TOOQS7+$i7+$iO!MVQ#xO7+%RO!M_Q#xO7+%SO!MdQ#xO1G3sOOQS7+%Z7+%ZO!MtQ#xO1G3sO!M|Q#xO7+%ZOOQS,5<b,5<bO'ZQ#xO,5<bO!NRQ#xO1G3nOOQS-E9t-E9tO!NxQ#xO7+%_OOQS7+%a7+%aO# WQ#xO1G3nO# uQ#xO7+%aO# zQ#xO1G3tO#![Q#xO1G3tO#!dQ#xO7+%_O#!iQ#xO,5>hO##PQ#xO,5>hO##PQ#xO,5>hO##_O$ISO'#D{O##jO#tO'#H}OOOW1G0P1G0PO##oQ#xO1G0POOO`1G0T1G0TO##wQ#xO1G0TOOOp1G0U1G0UO#$PQ#xO1G0UOOO!b1G0V1G0VO#$XQ#xO1G0VO#$aQ!LUO7+(sO#%QQ&nO1G2]P#%kQ#xO'#GVOOQS,5<t,5<tOOQS-E:W-E:WOOQS7+&}7+&}OOQS1G3j1G3jOOQS,5<a,5<aOOQS-E9s-E9sOOQS7+$u7+$uO#%xQ#xO,5=mO#&cQ#xO,5=mO#&tQ&nO,5<dO#'XQ#xO1G3pOOQS-E9v-E9vOOQS7+&X7+&XO#'iQ#xO7+&XOOQS7+&Z7+&ZO#'wQ#xO'#IVO0XQ#xO'#IUO#(]Q#xO7+&ZOOQS,5<w,5<wO#(hQ#xO1G4^OOQS-E:Z-E:ZOOQS,5<s,5<sO#(vQ#xO1G4YOOQS-E:V-E:VO0XQ#xO'#EtO#)^Q#xO'#EtO#)iQ#xO'#IXO#)qQ#xO,5;_OOQS7+&c7+&cO/rQ#xO7+&cO#)vQ#{O7+&iO!GPQ#xO'#G`O3aQ#xO7+&iO3aQ#xO7+&lO#-XQ&nO,5<{O'ZQ#xO,5<{O#-cQ#xO1G4aOOQS-E:_-E:_O#-mQ#xO1G4aO3aQ#xO7+&nO/rQ#xO7+&nOOQV7+&s7+&sO!HUQMlO7+&uO!H^Q#xO7+&uO`Q#yO1G1OOOQV-E:`-E:`O3aQ#xO7+&oO3aQ#xO7+&oOOQV,5<|,5<|O#-uQ#xO,5<|O!GPQ#xO,5<|OOQV7+&o7+&oO#.QQ#{O7+&oO#1`Q#xO,5<}O#1kQ#xO1G4bOOQS-E:a-E:aO#1xQ#xO1G4bO#2QQ#xO'#I^O#2`Q#xO'#I^O0XQ#xO'#I^OOQS'#I^'#I^O#2kQ#xO'#I]OOQS,5;q,5;qO#2sQ#xO,5;qO/rQ#xO'#FXOOQV7+&u7+&uO3aQ#xO7+&uOOQV7+&z7+&zO3aQ#xO7+&zO#2xQ#zO,5;{OOQV7+'P7+'PPOOO7+(o7+(oO#2}Q#xO1G3vOOQS,5<f,5<fO#3]Q#xO1G3uOOQS-E9x-E9xO#3pQ#xO,5<gO#3{Q#xO,5<gO#4`Q#xO1G3xOOQS-E9y-E9yO#4pQ#xO1G3xO#4xQ#xO1G3xO#5YQ#xO1G3xO#4pQ#xO1G3xOOQS<<H^<<H^O#5eQ&nO1G1}OOQS<<Hm<<HmP#5rQ#xO'#FwO7kQ#xO1G3oO#6PQ#xO1G3oO#6UQ#xO<<HmOOQS<<Hn<<HnO#6fQ#xO7+)_OOQS<<Hu<<HuO#6vQ&nO1G1|P#7gQ#xO'#FvO#7tQ#xO7+)`O#8UQ#xO7+)`O#8^Q#xO<<HyO#8cQ#xO7+)YOOQS<<H{<<H{O#9YQ#xO,5<eO'ZQ#xO,5<eOOQS-E9w-E9wOOQS<<Hy<<HyOOQS,5<k,5<kO/rQ#xO,5<kO#9_Q#xO1G4SOOQS-E9}-E9}O#9uQ#xO1G4SO;UQ#xO'#D|OOOO'#GQ'#GQO#:TO$ISO,5:gOOO#l,5>i,5>iOOOW7+%k7+%kOOO`7+%o7+%oOOOp7+%p7+%pOOO!b7+%q7+%qO#:`Q#xO1G3XO#:yQ#xO1G3XP'ZQ#xO'#FxO/rQ#xO<<IsO#;[Q#xO,5>qO#;mQ#xO,5>qO0XQ#xO,5>qO#<OQ#xO,5>pOOQS<<Iu<<IuP0XQ#xO'#G]P/rQ#xO'#GXOOQS,5;`,5;`O#<TQ#xO,5>sO#<cQ#xO,5>sOOQS1G0y1G0yOOQS<<I}<<I}OOQV-E:^-E:^O3aQ#xO<<JTOOQV,5<z,5<zO3aQ#xO,5<zOOQV<<JT<<JTOOQV<<JW<<JWO#<kQ&nO1G2gP#<uQ#xO'#GaO#<|Q#xO7+){O#=WQ#{O<<JYO3aQ#xO<<JYOOQV<<Ja<<JaO3aQ#xO<<JaO!HUQMlO<<JaO#@fQ#{O7+&jOOQV<<JZ<<JZO#@pQ#{O<<JZOOQV1G2h1G2hO0XQ#xO1G2hO#DOQ#xO1G2hO3aQ#xO<<JZO0XQ#xO1G2iP/rQ#xO'#GcO#DZQ#xO7+)|O#DhQ#xO7+)|OOQS'#FW'#FWO/rQ#xO,5>xO#DpQ#xO,5>xOOQS,5>x,5>xO#D{Q#xO,5>wO#E^Q#xO,5>wOOQS1G1]1G1]OOQS,5;s,5;sOOQV<<Jf<<JfO#EfQ#xO1G1gOOQS7+)b7+)bP#EkQ#xO'#FzO#E{Q#xO1G2RO#F`Q#xO1G2RO#FpQ#xO1G2RP#F{Q#xO'#F{O#GYQ#xO7+)dO#GjQ#xO7+)dO#GjQ#xO7+)dO#GrQ#xO7+)dO#HSQ#xO7+)ZO7kQ#xO7+)ZOOQSAN>XAN>XO#HmQ#xO<<LzOOQSAN>eAN>eO/rQ#xO1G2PO#H}Q&nO1G2PP#IXQ#xO'#FyOOQS1G2V1G2VP#IfQ#xO'#GPO#IsQ#xO7+)nO#JZQ#xO,5:hOOOO-E:O-E:OO#JfQ#xO7+(sOOQSAN?_AN?_O#KPQ#xO,5<vO#KeQ#xO1G4]OOQS-E:Y-E:YO#KvQ#xO1G4]OOQS1G4[1G4[OOQS,5<x,5<xO#LXQ#xO1G4_OOQS-E:[-E:[OOQVAN?oAN?oOOQV1G2f1G2fO3aQ#xOAN?tO#LgQ#{OAN?tOOQVAN?{AN?{O3aQ#xOAN?{OOQV<<JU<<JUO3aQ#xOAN?uO3aQ#xO7+(SOOQV7+(S7+(SO0XQ#xO7+(SOOQVAN?uAN?uOOQS7+(T7+(TO$ uQ#xO<<MhOOQS1G4d1G4dO/rQ#xO1G4dOOQS,5=O,5=OO$!SQ#xO1G4cOOQS-E:b-E:bOOQU'#Gf'#GfO$!eQ#zO7+'RO$!pQ#xO'#FbO$#hQ#xO7+'mO$#xQ#xO7+'mOOQS7+'m7+'mO$$TQ#xO<<MOO$$eQ#xO<<MOO$$eQ#xO<<MOO$$mQ#xO'#HkOOQS<<Lu<<LuO$$wQ#xO<<LuOOQS7+'k7+'kOOOO1G0S1G0SO$%bQ#xO1G0SO0XQ#xO1G2bP0XQ#xO'#G[O$%jQ#xO7+)wO$%{Q#xO7+)wP!;oQ#xO'#G^OOQVG25`G25`O3aQ#xOG25`OOQVG25gG25gOOQVG25aG25aOOQV<<Kn<<KnO3aQ#xO<<KnOOQS7+*O7+*OP$&^Q#xO'#GdOOQU-E:d-E:dOOQV<<Jm<<JmO$'QQ&nO'#FdOOQS'#Ff'#FfO$'bQ#xO'#FeO$(SQ#xO'#FeOOQS'#Fe'#FeO$(XQ#xO'#I`O$!pQ#xO'#FlO$!pQ#xO'#FlO$(pQ#xO'#FmO$!pQ#xO'#FnO$(wQ#xO'#IaOOQS'#Ia'#IaO$)fQ#xO,5;|OOQS<<KX<<KXO$)nQ#xO<<KXO$*OQ#xOANBjO$*`Q#xOANBjO$*hQ#xO'#HlOOQS'#Hl'#HlO0sQ#xO'#DeO$+RQ#xO,5>VOOQSANBaANBaOOOO7+%n7+%nOOQS7+'|7+'|O$+jQ#xO<<McOOQVLD*zLD*zOOQVANAYANAYO4jQMlO'#GhO$+{Q&nO,5<VO$!pQ#xO'#FpOOQS,5<Z,5<ZOOQS'#Fg'#FgO$,mQ#xO,5<PO$,rQ#xO,5<POOQS'#Fj'#FjO$!pQ#xO'#GgO$-dQ#xO,5<TO$.OQ#xO,5>zO$.`Q#xO,5>zO0XQ#xO,5<SO$.qQ#xO,5<WO$.vQ#xO,5<WO$!pQ#xO'#IbO$.{Q#xO'#IbO$/QQ#xO,5<XOOQS,5<Y,5<YO'ZQ#xO'#FsOOQU1G1h1G1hO3aQ#xO1G1hOOQSAN@sAN@sO$/VQ#xOG28UO$/gQ#xO,5:POOQS1G3q1G3qOOQS,5=S,5=SOOQS-E:f-E:fO$/lQ&nO'#FdO$/sQ#xO'#IcO$0RQ#xO'#IcO$0ZQ#xO,5<[OOQS1G1k1G1kO$0`Q#xO1G1kO$0eQ#xO,5=ROOQS-E:e-E:eO$1PQ#xO,5=VO$1hQ#xO1G4fOOQS-E:i-E:iOOQS1G1n1G1nOOQS1G1r1G1rO$1xQ#xO,5>|O$!pQ#xO,5>|OOQS1G1s1G1sO$2WQ&nO,5<_OOQU7+'S7+'SO$$mQ#xO1G/kO$!pQ#xO,5<]O$2_Q#xO,5>}O$2fQ#xO,5>}OOQS1G1v1G1vOOQS7+'V7+'VP$!pQ#xO'#GkO$2nQ#xO1G4hO$2xQ#xO1G4hO$3QQ#xO1G4hOOQS7+%V7+%VO$3`Q#xO1G1wO$3nQ&nO'#FdO$3uQ#xO,5=UOOQS,5=U,5=UO$4TQ#xO1G4iOOQS-E:h-E:hO$!pQ#xO,5=TO$4[Q#xO,5=TO$4aQ#xO7+*SOOQS-E:g-E:gO$4kQ#xO7+*SO$!pQ#xO,5<^P$!pQ#xO'#GjO$4sQ#xO1G2oO$!pQ#xO1G2oP$5RQ#xO'#GiO$5YQ#xO<<MnO$5dQ#xO1G1xO$5rQ#xO7+(ZO7kQ#xO'#DPO7kQ#xO,59dO7kQ#xO,59dO7kQ#xO,59dO$6QQ&nO,5=mO7kQ#xO1G/OO/rQ#xO1G/ZO/rQ#xO7+$rP$6eQ#xO'#GVO'ZQ#xO'#HRO$6rQ#xO,59dO$6wQ#xO,59dO$7OQ#xO,59oO$7TQ#xO1G/WO0sQ#xO'#DTO7kQ#xO,59l",stateData:"$7f~O%pOS%eOSUOS%dPQ~OPiOXfOhtOjYOquOu!UOxvO!RwO!S!QO!V!XO!W!WO!ZZO!_[O!jeO!ueO!veO!weO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#o!VO#r!YO#v!ZO#x![O#}!]O$QmO$S!^O%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O%d!_O~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%w!aO%x!bO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fO~Om&VXn&VXo&VXp&VXq&VXr&VXu&VX|&VX}&VX!{&VX#j&VX%c&VX%f&VX&X&VXi&VX!V&VX!W&VX&Y&VX!Y&VX!^&VX!S&VX#_&VXv&VX!n&VX~P$gOhtOjYO!ZZO!_[O!jeO!ueO!veO!weO%|RO%}RO&RSO&SWO&h]O&i^O&l_O&o`O&saO&tbO&ucO~O|&UX}&UX#j&UX%c&UX%f&UX&X&UX~Om!uOn!vOo!tOp!tOq!wOr!xOu!yO!{&UX~P(hOX#POi#ROq0zOx1YO!RwO~P'ZOX#TOq0zOx1YO!Y#UO~P'ZOX#XOc#YOq0zOx1YO!^#ZO~P'ZO&j#^O&k#`O~O&m#aO&n#`O~OQ#cO%g#dO%h#fO~OR#gO%i#hO%j#fO~OS#jO%k#kO%l#fO~OT#mO%m#nO%n#fO~OX%vXa%vXc%vXj%vXm%vXn%vXo%vXp%vXq%vXr%vXu%vX|%vX!Z%vX!h%vX%w%vX%x%vX%y%vX%z%vX%{%vX%|%vX%}%vX&O%vX&P%vX&Q%vXi%vX!V%vX!W%vX~O&h]O&i^O&l_O&o`O&saO&tbO&ucO}%vX!{%vX#j%vX%c%vX%f%vX&X%vX&Y%vX!Y%vX!^%vX!S%vX#_%vXv%vX!n%vX~P,QO|#sO}%uX!{%uX#j%uX%c%uX%f%uX&X%uX~Oq0zOx1YO~P'ZO#j#vO%c#xO%f#xO~O&SWO~O!V#}O#x![O#}!]O$QmO~OquO~P'ZOX$SOc$TO&SWO}yP~OX$XOq0zOx1YO!S$YO~P'ZO}$[O!{$aO&X$]O#j!|X%c!|X%f!|X~OX$XOq0zOx1YO#j#VX%c#VX%f#VX~P'ZOq0zOx1YO#j#ZX%c#ZX%f#ZX~P'ZO!h$gO!u$gO&SWO~OX$rO~P'ZO!W$tO#v$uO#x$vO~O}$wO~OX%OO~P'ZOU%QO%c%PO%p%RO~OX%[Oc%[Oi%^Oq0zOx1YO~P'ZOq0zOx1YO}%aO~P'ZO&g%cO~Oc!gOj!nO!Z!pO!h!rOXdaadamdandaodapdaqdardauda|da}da!{da#jda%cda%fda%wda%xda%yda%zda%{da%|da%}da&Oda&Pda&Qda&Xdaida!Vda!Wda&Yda!Yda!^da!Sda#_davda!nda~Op%hO~Oq%hO~P'ZOq0zO~P'ZOm0|On0}Oo0{Op0{Oq1UOr1VOu1ZOi&UX!V&UX!W&UX&Y&UX!Y&UX!^&UX!S&UX#_&UX!n&UX~P(hO&Y%jOi&TX|&TX!V&TX!W&TX!Y&TX}&TX~Oi%lO|%mO!V%qO!W%pO~Oi%lO~O|%tO!V%qO!W%pO!Y&aX~O!Y%xO~O|%yO}%{O!V%qO!W%pO!^&[X~O!^&PO~O!^&QO~O&j#^O&k&SO~O&m#aO&n&SO~OX&VOq0zOx1YO!RwO~P'ZOQ#cO%g#dO%h&YO~OR#gO%i#hO%j&YO~OS#jO%k#kO%l&YO~OT#mO%m#nO%n&YO~OX!taa!tac!taj!tam!tan!tao!tap!taq!tar!tau!ta|!ta}!ta!Z!ta!h!ta!{!ta#j!ta%c!ta%f!ta%w!ta%x!ta%y!ta%z!ta%{!ta%|!ta%}!ta&O!ta&P!ta&Q!ta&X!tai!ta!V!ta!W!ta&Y!ta!Y!ta!^!ta!S!ta#_!tav!ta!n!ta~P#yO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P$gOX&dOquOxvO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~P'ZO|&bO}%ua!{%ua#j%ua%c%ua%f%ua&X%ua~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO#j%RX%c%RX%f%RX~P'ZO#j#vO%c&iO%f&iO~O!h&jOj&wX%c&wX#_&wX#j&wX%f&wX#^&wX~Oj!nO%c&lO~Omgangaogapgaqgargauga|ga}ga!{ga#jga%cga%fga&Xgaiga!Vga!Wga&Yga!Yga!^ga!Sga#_gavga!nga~P$gOusa|sa}sa#jsa%csa%fsa&Xsa~Om!uOn!vOo!tOp!tOq!wOr!xO!{sa~PDuO&X&nO|&WX}&WX~O&SWO|&WX}&WX~O|&qO}yX~O}&sO~O|%yO#j&[X%c&[X%f&[Xi&[X}&[X!^&[X!n&[X&X&[X~OX1TOq0zOx1YO!RwO~P'ZO&X$]O#jWa%cWa%fWa~O|&|O#j&^X%c&^X%f&^Xp&^X~P$gO|'PO!S'OO#j#Za%c#Za%f#Za~O#_'QO#j#]a%c#]a%f#]a~O!h$gO!u$gO#^'SO&SWO~O#^'SO~O|'UO#j&zX%c&zX%f&zX~O|'WO#j&vX%c&vX%f&vX}&vX~O!Z'YO&X'ZO~O|'_Op&}X~P$gOp'bO~OPiOXfOquOxvO!RwO!S!QO#OyO#QzO#S{O#U|O#W}O#[!OO#^!PO#a!RO#b!RO#d!SO#f!TO%c'gO~P'ZOv'kO#s'iO#t'jOP#qaX#qah#qaj#qaq#qau#qax#qa!R#qa!S#qa!V#qa!W#qa!Z#qa!_#qa!j#qa!u#qa!v#qa!w#qa#O#qa#Q#qa#S#qa#U#qa#W#qa#[#qa#^#qa#a#qa#b#qa#d#qa#f#qa#o#qa#r#qa#v#qa#x#qa#}#qa$Q#qa$S#qa%`#qa%|#qa%}#qa&R#qa&S#qa&h#qa&i#qa&l#qa&o#qa&s#qa&t#qa&u#qa%b#qa%f#qa~O|'lO#_'nO}'OX~Oj'pO!Z'YO~Oj!nO}$wO!Z'YO~O}'vO~P$gO%c'yO~OU'zO%c'yO~OX!fOa!fOc!gOj!nO!Z!pO!h!rO%y!cO%z!dO%{!dO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%x!bO~P!!`O%xYi~P!!`OX!fOa!fOc!gOj!nO!Z!pO!h!rO%|!eO%}!eO&O!fO&P!fO&Q!fOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~O%z!dO%{!dO~P!%ZO%zYi%{Yi~P!%ZOc!gOj!nO!Z!pO!h!rOmYinYioYipYiqYirYiuYi|Yi}Yi!{Yi#jYi%cYi%fYi%wYi%xYi%yYi%zYi%{Yi%|Yi%}Yi&XYiiYi!VYi!WYi&YYi!YYi!^Yi!SYi#_YivYi!nYi~OX!fOa!fO&O!fO&P!fO&Q!fO~P!(XOXYiaYi&OYi&PYi&QYi~P!(XO!V%qO!W%pOi&dX|&dX~O&X'|O&Y'|O~P,QO|(OOi&cX~Oi(QO~O|(RO}(TO!Y&fX~Oq0zOx1YO|(RO}(UO!Y&fX~P'ZO!Y(WO~Oo!tOp!tOq!wOr!xOmliuli|li}li!{li#jli%cli%fli&Xli~On!vO~P!,zOnli~P!,zOm0|On0}Oo0{Op0{Oq1UOr1VO~Ov(YO~P!.TOX(_Oi(`Oq0zOx1YO~P'ZOi(`O|(aO~Oi(cO~O!W(eO~Oi(fO|(aO!V%qO!W%pO~P$gOm0|On0}Oo0{Op0{Oq1UOr1VOisa!Vsa!Wsa&Ysa!Ysa!^sa!Ssa#_savsa!nsa~PDuOX(_Oq0zOx1YO!Y&aa~P'ZO|(iO!Y&aa~O!Y(jO~O|(iO!V%qO!W%pO!Y&aa~P$gOX(nOq0zOx1YO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~P'ZO|(oO!^&[a#j&[a%c&[a%f&[ai&[a}&[a!n&[a&X&[a~O!^(rO~O|(oO!V%qO!W%pO!^&[a~P$gO|(uO!V%qO!W%pO!^&ba~P$gO|(xO}&pX!^&pX!n&pX~O}({O!^(}O!n)OO~O}({O!^)PO!n)QO~O}({O!^)RO!n)SO~O}({O!^)TO!n)UO~OX&dOquOxvO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~P'ZO|)VO}%ui!{%ui#j%ui%c%ui%f%ui&X%ui~O!h&jOj&wa%c&wa#_&wa#j&wa%f&wa#^&wa~O%c)[O~OX$SOc$TO&SWO~O|&qO}ya~OquOxvO~P'ZO|(oO#j&[a%c&[a%f&[ai&[a}&[a!^&[a!n&[a&X&[a~P$gO|)aO#j%uX%c%uX%f%uX&X%uX~O&X$]O#jWi%cWi%fWi~O#j&^a%c&^a%f&^ap&^a~P'ZO|)dO#j&^a%c&^a%f&^ap&^a~OX)hOj)jO&SWO~O#^)kO~O&SWO#j&za%c&za%f&za~O|)mO#j&za%c&za%f&za~Oq0zOx1YO#j&va%c&va%f&va}&va~P'ZO|)pO#j&va%c&va%f&va}&va~OX)rOc)rO&SWO~O&X)wO~Ov)zO#m)yOP#kiX#kih#kij#kiq#kiu#kix#ki!R#ki!S#ki!V#ki!W#ki!Z#ki!_#ki!j#ki!u#ki!v#ki!w#ki#O#ki#Q#ki#S#ki#U#ki#W#ki#[#ki#^#ki#a#ki#b#ki#d#ki#f#ki#o#ki#r#ki#v#ki#x#ki#}#ki$Q#ki$S#ki%`#ki%|#ki%}#ki&R#ki&S#ki&h#ki&i#ki&l#ki&o#ki&s#ki&t#ki&u#ki%b#ki%f#ki~Ov){OP#niX#nih#nij#niq#niu#nix#ni!R#ni!S#ni!V#ni!W#ni!Z#ni!_#ni!j#ni!u#ni!v#ni!w#ni#O#ni#Q#ni#S#ni#U#ni#W#ni#[#ni#^#ni#a#ni#b#ni#d#ni#f#ni#o#ni#r#ni#v#ni#x#ni#}#ni$Q#ni$S#ni%`#ni%|#ni%}#ni&R#ni&S#ni&h#ni&i#ni&l#ni&o#ni&s#ni&t#ni&u#ni%b#ni%f#ni~OX)}Op&}a~P'ZO|*OOp&}a~O|*OOp&}a~P$gOp*SO~O%a*WO~Ov*ZO#s'iO#t*YOP#qiX#qih#qij#qiq#qiu#qix#qi!R#qi!S#qi!V#qi!W#qi!Z#qi!_#qi!j#qi!u#qi!v#qi!w#qi#O#qi#Q#qi#S#qi#U#qi#W#qi#[#qi#^#qi#a#qi#b#qi#d#qi#f#qi#o#qi#r#qi#v#qi#x#qi#}#qi$Q#qi$S#qi%`#qi%|#qi%}#qi&R#qi&S#qi&h#qi&i#qi&l#qi&o#qi&s#qi&t#qi&u#qi%b#qi%f#qi~OX*^Oq0zOx1YO}$wO~P'ZOq0zOx1YO}'Oa~P'ZO|*bO}'Oa~OX*fOc*gOi*jO&O*hO&SWO~O}$wO'R*lO~Oj'pO~Oj!nO}$wO~O%c*qO~O%c*sO~OX%[Oc%[Oq0zOx1YOi&ca~P'ZO|*vOi&ca~Oq0zOx1YO}*yO!Y&fa~P'ZO|*zO!Y&fa~Oq0zOx1YO|*zO}*}O!Y&fa~P'ZOq0zOx1YO|*zO!Y&fa~P'ZO|*zO}*}O!Y&fa~Oo0{Op0{Oq1UOr1VOilimliuli|li!Vli!Wli&Yli!Yli}li!^li#jli%cli%fli!Sli#_livli!nli&Xli~On0}O~P!JzOnli~P!JzOX(_Oi+SOq0zOx1YO~P'ZOp+UO~Oi+SO|+WO~Oi+XO~OX(_Oq0zOx1YO!Y&ai~P'ZO|+YO!Y&ai~O!Y+ZO~OX(nOq0zOx1YO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~P'ZO|+^O!V%qO!W%pO!^&bi~O|+aO!^&[i#j&[i%c&[i%f&[ii&[i}&[i!n&[i&X&[i~O!^+bO~Oc+dOq0zOx1YO!^&bi~P'ZO|+^O!^&bi~O!^+fO~OX+hOq0zOx1YO}&pa!^&pa!n&pa~P'ZO|+iO}&pa!^&pa!n&pa~O!_+lO&r+mO!^!oX~O!^+oO~O}({O!^+pO~O}({O!^+qO~O}({O!^+rO~O}({O!^+sO~OX&dOquOxvO}%uq!{%uq#j%uq%c%uq%f%uq&X%uq~P'ZO|$yi}$yi!{$yi#j$yi%c$yi%f$yi&X$yi~P$gOX&dOquOxvO~P'ZOX&dOq0zOx1YO#j%ua%c%ua%f%ua&X%ua~P'ZO|+tO#j%ua%c%ua%f%ua&X%ua~O|$la#j$la%c$la%f$lap$la~P$gO#j&^i%c&^i%f&^ip&^i~P'ZO|+wO#j#Zq%c#Zq%f#Zq~O|+xO#_+zO#j&yX%c&yX%f&yXi&yX~OX+|Oj)jO&SWO~O&SWO#j&zi%c&zi%f&zi~Oq0zOx1YO#j&vi%c&vi%f&vi}&vi~P'ZO}$[O|#hX!Y#hX~O|,QO!Y&{X~O!Y,SO~Ov,VO#m)yOP#kqX#kqh#kqj#kqq#kqu#kqx#kq!R#kq!S#kq!V#kq!W#kq!Z#kq!_#kq!j#kq!u#kq!v#kq!w#kq#O#kq#Q#kq#S#kq#U#kq#W#kq#[#kq#^#kq#a#kq#b#kq#d#kq#f#kq#o#kq#r#kq#v#kq#x#kq#}#kq$Q#kq$S#kq%`#kq%|#kq%}#kq&R#kq&S#kq&h#kq&i#kq&l#kq&o#kq&s#kq&t#kq&u#kq%b#kq%f#kq~Op%Ta|%Ta~P$gOX)}Op&}i~P'ZO|,^Op&}i~O|,hO}$wO#_,hO~O#t,jOP#qqX#qqh#qqj#qqq#qqu#qqx#qq!R#qq!S#qq!V#qq!W#qq!Z#qq!_#qq!j#qq!u#qq!v#qq!w#qq#O#qq#Q#qq#S#qq#U#qq#W#qq#[#qq#^#qq#a#qq#b#qq#d#qq#f#qq#o#qq#r#qq#v#qq#x#qq#}#qq$Q#qq$S#qq%`#qq%|#qq%}#qq&R#qq&S#qq&h#qq&i#qq&l#qq&o#qq&s#qq&t#qq&u#qq%b#qq%f#qq~O#_,kO|%Va}%Va~Oq0zOx1YO}'Oi~P'ZO|,mO}'Oi~O}$[O&X,oOi'QX|'QX~O&SWOi'QX|'QX~O|,sOi'PX~Oi,uO~O%a,xO~O!V%qO!W%pOi&di|&di~OX%[Oc%[Oq0zOx1YOi&ci~P'ZO},{O|$oa!Y$oa~Oq0zOx1YO},|O|$oa!Y$oa~P'ZOq0zOx1YO}*yO!Y&fi~P'ZO|-PO!Y&fi~Oq0zOx1YO|-PO!Y&fi~P'ZO|-PO}-SO!Y&fi~Oi$ki|$ki!Y$ki~P$gOX(_Oq0zOx1YO~P'ZOp-UO~OX(_Oi-VOq0zOx1YO~P'ZOX(_Oq0zOx1YO!Y&aq~P'ZO|$ji!^$ji#j$ji%c$ji%f$jii$ji}$ji!n$ji&X$ji~P$gOX(nOq0zOx1YO~P'ZOc+dOq0zOx1YO!^&bq~P'ZO|-WO!^&bq~O!^-XO~OX(nOq0zOx1YO!^&[q#j&[q%c&[q%f&[qi&[q}&[q!n&[q&X&[q~P'ZO}-YO~OX+hOq0zOx1YO}&pi!^&pi!n&pi~P'ZO|-_O}&pi!^&pi!n&pi~O!_+lO&r+mO!^!oa~OX&dOq0zOx1YO#j%ui%c%ui%f%ui&X%ui~P'ZO|-bO#j%ui%c%ui%f%ui&X%ui~O&SWO#j&ya%c&ya%f&yai&ya~O|-eO#j&ya%c&ya%f&yai&ya~Oi-hO~OX)rOc)rO&SWO!Y&{a~O|-jO!Y&{a~Op%Ti|%Ti~P$gOX)}O~P'ZOX)}Op&}q~P'ZOv-nOP#pyX#pyh#pyj#pyq#pyu#pyx#py!R#py!S#py!V#py!W#py!Z#py!_#py!j#py!u#py!v#py!w#py#O#py#Q#py#S#py#U#py#W#py#[#py#^#py#a#py#b#py#d#py#f#py#o#py#r#py#v#py#x#py#}#py$Q#py$S#py%`#py%|#py%}#py&R#py&S#py&h#py&i#py&l#py&o#py&s#py&t#py&u#py%b#py%f#py~O%b-rO%f-rO~P`O#t-sOP#qyX#qyh#qyj#qyq#qyu#qyx#qy!R#qy!S#qy!V#qy!W#qy!Z#qy!_#qy!j#qy!u#qy!v#qy!w#qy#O#qy#Q#qy#S#qy#U#qy#W#qy#[#qy#^#qy#a#qy#b#qy#d#qy#f#qy#o#qy#r#qy#v#qy#x#qy#}#qy$Q#qy$S#qy%`#qy%|#qy%}#qy&R#qy&S#qy&h#qy&i#qy&l#qy&o#qy&s#qy&t#qy&u#qy%b#qy%f#qy~O|-vO}$wO#_-vO~Oq0zOx1YO}'Oq~P'ZO|-yO}'Oq~O&X,oOi'Qa|'Qa~OX*fOc*gO&O*hO&SWOi'Pa~O|-}Oi'Pa~O$V.RO~OX%[Oc%[Oq0zOx1YO~P'ZOq0zOx1YO}.SO|$oi!Y$oi~P'ZOq0zOx1YO|$oi!Y$oi~P'ZO}.SO|$oi!Y$oi~Oq0zOx1YO}*yO~P'ZOq0zOx1YO}*yO!Y&fq~P'ZO|.VO!Y&fq~Oq0zOx1YO|.VO!Y&fq~P'ZOu.YO!V%qO!W%pOi&]q!Y&]q!^&]q|&]q~P!.TOc+dOq0zOx1YO!^&by~P'ZO|$mi!^$mi~P$gOc+dOq0zOx1YO~P'ZOX+hOq0zOx1YO~P'ZOX+hOq0zOx1YO}&pq!^&pq!n&pq~P'ZO}({O!^.^O!n._O~OX&dOq0zOx1YO#j%uq%c%uq%f%uq&X%uq~P'ZO#_.`O|%Oa#j%Oa%c%Oa%f%Oai%Oa~O&SWO#j&yi%c&yi%f&yii&yi~O|.bO#j&yi%c&yi%f&yii&yi~OX)rOc)rO&SWO!Y&{i~Ov.fOP#p!RX#p!Rh#p!Rj#p!Rq#p!Ru#p!Rx#p!R!R#p!R!S#p!R!V#p!R!W#p!R!Z#p!R!_#p!R!j#p!R!u#p!R!v#p!R!w#p!R#O#p!R#Q#p!R#S#p!R#U#p!R#W#p!R#[#p!R#^#p!R#a#p!R#b#p!R#d#p!R#f#p!R#o#p!R#r#p!R#v#p!R#x#p!R#}#p!R$Q#p!R$S#p!R%`#p!R%|#p!R%}#p!R&R#p!R&S#p!R&h#p!R&i#p!R&l#p!R&o#p!R&s#p!R&t#p!R&u#p!R%b#p!R%f#p!R~Oq0zOx1YO}'Oy~P'ZOX*fOc*gO&O*hO&SWOi'Pi~O$V.RO%b.nO%f.nO~OX.xOj.vO!Z.uO!_.wO!j.qO!v.sO!w.sO%}.pO&SWO&h]O&i^O&l_O~Oq0zOx1YO|$oq!Y$oq~P'ZO}.}O|$oq!Y$oq~Oq0zOx1YO}*yO!Y&fy~P'ZO|/OO!Y&fy~Oq0zOx/SO~P'ZOu.YO!V%qO!W%pOi&]y!Y&]y!^&]y|&]y~P!.TO}({O!^/VO~O&SWO#j&yq%c&yq%f&yqi&yq~O|/XO#j&yq%c&yq%f&yqi&yq~OX*fOc*gO&O*hO&SWO~Oj/^O!h/[O|$WX#_$WX%w$WXi$WX~Ou$WX}$WX!Y$WX!^$WX~P$&lO%|/`O%}/`Ou$XX|$XX}$XX#_$XX%w$XX!Y$XXi$XX!^$XX~O!j/bO~O|/fO#_/hO%w/cOu'SX}'SX!Y'SXi'SX~Oc/kO~P$!|Oj/^Ou'TX|'TX}'TX#_'TX%w'TX!Y'TXi'TX!^'TX~Ou/oO}$wO~Oq0zOx1YO|$oy!Y$oy~P'ZOq0zOx1YO}*yO!Y&f!R~P'ZO|/sO!Y&f!R~Oi&`Xu&`X!V&`X!W&`X!Y&`X!^&`X|&`X~P!.TOu.YO!V%qO!W%pOi&_a!Y&_a!^&_a|&_a~O&SWO#j&yy%c&yy%f&yyi&yy~O!h/[Oj$_au$_a|$_a}$_a#_$_a%w$_a!Y$_ai$_a!^$_a~O!j/|O~O%|/`O%}/`Ou$Xa|$Xa}$Xa#_$Xa%w$Xa!Y$Xai$Xa!^$Xa~O%w/cOu$]a|$]a}$]a#_$]a!Y$]ai$]a!^$]a~Ou'Sa}'Sa!Y'Sai'Sa~P$!pO|0ROu'Sa}'Sa!Y'Sai'Sa~O!Y0UO~Oi0UO~O}0WO~O!^0XO~Oq0zOx1YO}*yO!Y&f!Z~P'ZO}0[O~O&X0]O~P$&lO|0^O#_/hO%w/cOi'VX~O|0^Oi'VX~Oi0`O~O!j0aO~O#_/hOu%Za|%Za}%Za%w%Za!Y%Zai%Za!^%Za~O#_/hO%w/cOu%_a|%_a}%_a!Y%_ai%_a~Ou'Si}'Si!Y'Sii'Si~P$!pO|0cO#_/hO%w/cO!^'Ua~O}$ga~P$gOi'Va~P$!pO|0kOi'Va~Oc0mO!^'Ui~P$!|O|0oO!^'Ui~O|0oO#_/hO%w/cO!^'Ui~O#_/hO%w/cOi$ei|$ei~O&X0rO~P$&lO#_/hO%w/cOi%^a|%^a~Oi'Vi~P$!pO}0uO~Oc0mO!^'Uq~P$!|O|0wO!^'Uq~O#_/hO%w/cO|%]i!^%]i~Oc0mO~P$!|Oc0mO!^'Uy~P$!|O#_/hO%w/cOi$fi|$fi~O#_/hO%w/cO|%]q!^%]q~O|+tO#j%ua%c%ua%f%ua&X%ua~P$gOX&dOq0zOx1YO~P'ZOp1PO~Oq1PO~P'ZO}1QO~Ov1RO~P!.TO&i&l&t&u&h&o&s&S&h~",goto:"!?b'WPPPPPPPP'XP'a*|+f,P,k-W-tP.cP'a/S/S'aPPP'a2oPPPPPP2o5fPP5fP7y8S>fPP>i?Z?^PP'a'aPP?vPP'a'aPP'a'a'a'a'a?z@t'aP@wP@}EXHxPH|IYI^IbIf'aPPPIjIs'XP'X'XP'XP'XP'XP'XP'X'X'XP'XPP'XPP'XP'XPIyJVJ_PJfJlPJfPJfJfPPPJfPLzPMTM_MeLzPJfMnPJfPMuM{PNPNe! S! mNPNP! s!!QNPNPNPNP!!f!!l!!o!!t!!w!#R!#X!#e!#w!#}!$X!$_!${!%R!%X!%_!%i!%o!%u!%{!&R!&X!&k!&u!&{!'R!'X!'c!'i!'o!'u!'{!(V!(]!(g!(m!(v!(|!)]!)e!)o!)vPPPPPPPPPPPPPPPPP!)|!*P!*V!*`!*j!*uPPPPPPPPPPPP!/l!1Q!5T!8hPP!8p!9S!9]!:U!9{!:_!:e!:h!:k!:n!:v!;gPPPPPPPPP!;j!;yPPPP!<i!<u!=R!=X!=b!=e!=h!=n!=t!=z!=}P!>V!>`!?[!?_]jOs#v$w*W,d(TeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z}!hQ#r$P$b$q$}%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!P!iQ#r$P$b$q$}%S%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!R!jQ#r$P$b$q$}%S%T%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!T!kQ#r$P$b$q$}%S%T%U%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!V!lQ#r$P$b$q$}%S%T%U%V%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!X!mQ#r$P$b$q$}%S%T%U%V%W%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O!]!mQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1O(TTOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1Z&iVOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1Z%sXOYZ[isw}!O!S!U!V!Z!n!p#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$VvQ/t/SR1W1Y'zeOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZW#ym!P!Q$hW$Rv&q/S1YQ$j!RQ$n!TQ${![Q$|!]W%Z!n(O*v,zS&p$S$TQ'e$vQ)Y&jQ)h'QU)i'S)j)kU)l'U)m+}W)s'Y,Q-j.dQ*d'nW*e'p,s-}.lQ,P)rS,r*f*gY-d+x-e.a.b/XQ-g+zQ-t,hQ-x,kQ.j-vl.o.R.u.v.x/d/f/k0R0W0]0b0m0r0uQ/W.`Q/l.wQ/x/^Q0T/hU0h0^0k0sX0n0c0o0v0wR&o$R!_!|YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sR%k!{Q#QYQ&W#cQ&Z#gQ&]#jQ&_#mQ&x$^Q&{$aR-`+lT/R.Y0[![!oQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OQ&m#zQ't$|R*p'uR'}%ZQ%d!rR/v/[(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZS#pd#q!P.s.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0w(SdOTYZ[fistuwy}!O!S!U!V!W!Z!^!h!i!j!k!l!m!n!p!t!u!v!x!y#P#T#X#Y#c#g#j#m#s#v$X$Y$[$^$a$r$t$u$w%O%[%a%h%k%m%p%t%y%{&V&b&d&o&s&|'O'P'W'Z'_'b'i'l'}(O(R(T(U(Y(_(a(e(i(n(o(u(x)V)X)a)d)p)w)y)}*O*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+d+h+i+l+t+v+w,O,],^,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/o/s0[0z0{0|0}1P1Q1R1S1T1V1ZT#pd#qT#d`#ee(|&W&Z&]&_)O)Q)S)U-`._T+m({+nT#ha#iT#kb#lT#nc#oQ$`xQ,P)sR,q*eX$^x$_$`&zQ'[$nQ'r${Q'u$|R*V'eQ)t'YV-i,Q-j.dZlOs$w*W,dXpOs*W,dQ$x!YQ']$oQ'^$pQ'o$zQ's$|Q*T'dQ*['iQ*_'jQ*`'kQ*m'qS*o't'uQ,W)yQ,Y)zQ,Z){Q,_*RS,a*U*nQ,e*YQ,f*ZS,g*]*^Q,w*pQ-l,VQ-m,XQ-o,`S-p,b,cQ-u,iQ-w,jQ.e-nQ.g-qQ.h-sQ.i-tQ/Y.fQ/Z.jQ/p.{R0Z/qWpOs*W,dR#|oQ'q${S*U'e'rR,c*VQ,p*eR-{,qQ*n'qQ,b*UR-q,cZnOos*W,dQ'w$}R*r'xT.P,x.Qu.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0ut.z.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uQ/l.wX0n0c0o0v0w!P.r.R.u.v.w.x/^/d/f/k0R0W0]0^0b0c0k0m0o0r0s0u0v0wQ/a.qR/}/bg/d.t/e/y0Q0V0e0g0i0t0x0yu.y.R.u.v.x/^/d/f/k0R0W0]0^0b0k0m0r0s0uX/_.o.y/x0hR/z/^V0j0^0k0sR/q.{QsOS$Os,dR,d*WQ&r$UR)_&rS%z#W$WS(p%z(sT(s%}&tQ%n#OQ%u#SW(b%n%u(g(kQ(g%rR(k%wQ&}$bR)e&}Q(v&OQ+_(qT+e(v+_Q(P%]R*w(PS(S%`%aY*{(S*|-Q.W/PU*|(T(U(VU-Q*}+O+PS.W-R-SR/P.XQ#_^R&R#_Q#b_R&T#bQ#e`R&X#eQ(y&US+j(y+kR+k(zQ+n({R-a+nQ#iaR&[#iQ#lbR&^#lQ#ocR&`#oQ#qdR&a#qQ#tgQ&c#rW&f#t&c)b+uQ)b&wR+u1OQ$_xS&y$_&zR&z$`Q'X$lR)q'XQ&k#yR)Z&kQ$h!QR'R$hQ+y)iS-f+y.cR.c-gQ'V$jR)n'VQ,R)tR-k,RQ#wkR&h#wQ)x']R,U)xQ'`$qS*P'`*QR*Q'aQ'h$xR*X'hQ'm$yS*c'm,nR,n*dQ,t*iR.O,tWoOs*W,dR#{oQ.Q,xR.m.Qd/e.t/y0Q0V0e0g0i0t0x0yR0P/eU/].o/x0hR/w/]Q0d0VS0p0d0qR0q0eS0_/y/zR0l0_Q/g.tR0S/gR!`PXrOs*W,dWqOs*W,dR'f$wYkOs$w*W,dR&g#v[xOs#v$w*W,dR&x$^&hQOYZ[isuw}!O!S!U!V!Z!n!p!t!u!v!x!y#c#g#j#m#s#v$Y$[$^$a$u$w%[%a%h%k%m%t%y%{&V&b&o&s'O'P'W'Z'b'i'l'}(O(R(T(U(Y(a(i(o(u(x)V)X)a)p)w)y*S*W*^*b*l*v*y*z*}+T+U+W+Y+]+^+a+h+i+l+t+w,O,d,l,m,p,z,{,|-O-P-S-U-W-Y-[-^-_-b-y-{.S.V.Y.}/O/s0[0z0{0|0}1P1Q1R1S1V1ZQ!sTQ#rfQ$PtU$by%p(eS$q!W$tQ$}!^Q%S!hQ%T!iQ%U!jQ%V!kQ%W!lQ%X!mQ%r#PQ%w#TQ%}#XQ&O#YQ&t$XQ'a$rQ'x%OQ)W&dU)c&|)d+vW)|'_*O,],^Q+R(_Q+[(nQ,[)}Q-Z+dQ0Y/oR1O1TQ#OYQ#SZQ$o!UQ$p!VQ%`!pQ(V%a^(^%m%t(a(i+T+W+Y^*x(R*z-O-P.V/O/sQ+O(TQ+P(UQ,X)yQ,}*yQ-R*}Q.T,{Q.U,|Q.X-SQ.|.SR/r.}[gOs#v$w*W,d!^!{YZ!U!V!p%a%m%t(R(T(U(a(i)y*y*z*}+T+W+Y,{,|-O-P-S.S.V.}/O/sQ#W[Q#uiS$Ww}Q$e!OW$l!S$a'b*SS$y!Z$uW%Y!n(O*v,zY&U#c#g#j#m+l`&e#s&b)V)X)a+t-b1SQ&u$YQ&v$[Q&w$^Q'{%[Q(]%kW(m%y(o+]+aQ(q%{Q(z&VQ)]&oS)`&s1QQ)f'OQ)g'PU)o'W)p,OQ)v'ZQ*]'iY*a'l*b,l,m-yQ*t'}S+Q(Y1RW+c(u+^-W-[W+g(x+i-^-_Q,T)wQ,i*^Q,v*lQ-]+hQ-c+wQ-z,pQ.]-YR.k-{hUOs#s#v$w&b&s(Y)V)X*W,d%Y!zYZ[iw}!O!S!U!V!Z!n!p#c#g#j#m$Y$[$^$a$u%[%a%k%m%t%y%{&V&o'O'P'W'Z'b'i'l'}(O(R(T(U(a(i(o(u(x)a)p)w)y*S*^*b*l*v*y*z*}+T+W+Y+]+^+a+h+i+l+t+w,O,l,m,p,z,{,|-O-P-S-W-Y-[-^-_-b-y-{.S.V.}/O/s1Q1R1SQ$QuW%e!t!x0{1VQ%f!uQ%g!vQ%i!yQ%s0zS(X%h1PQ(Z0|Q([0}Q-T+UQ.[-US/Q.Y0[R1X1ZU$Uv/S1YR)^&q[hOs#v$w*W,da!}Y#c#g#j#m$^$a+lQ#][Q$ZwR$d}Q%o#OQ%v#SQ%|#WQ'{%YQ(h%rQ(l%wQ(t%}Q(w&OQ+`(qQ,y*tQ.Z-TQ/U.[R/u/TQ$cyQ(d%pR+V(eQ/T.YR0f0[R#VZR#[[R%_!nQ%]!nV*u(O*v,z!]!qQ!s#r$P$b$q$}%S%T%U%V%W%X%r%w%}&O&t'a'x)W)c)|+R+[,[-Z0Y1OR%b!pQ&W#cQ&Z#gQ&]#jQ&_#mR-`+lQ(}&WQ)P&ZQ)R&]Q)T&_Q+p)OQ+q)QQ+r)SQ+s)UQ.^-`R/V._Q$m!SQ&{$aQ*R'bR,`*SQ#zmQ$f!PQ$i!QR'T$hQ)h'SR+|)kQ)h'SQ+{)jR+|)kR$k!RR)u'YXqOs*W,dQ$s!WR'c$tQ$z!ZR'd$uR*k'pQ*i'pV-|,s-}.lQ.{.RQ/i.uR/j.vU.t.R.u.vQ/n.xQ/y/^Q0O/dU0Q/f0R0bQ0V/kQ0e0WQ0g0]U0i0^0k0sQ0t0mQ0x0rR0y0uR/m.wR/{/^",nodeNames:"⚠ print { { { { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec FormatReplacement FormatReplacement FormatReplacement FormatReplacement ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:283,context:trackIndent,nodeProps:[["group",-15,8,88,90,91,93,95,97,99,101,102,103,105,108,111,113,"Statement Statement",-22,10,20,23,27,42,51,52,58,59,62,63,64,65,66,69,72,73,74,82,83,84,85,"Expression",-10,117,119,122,124,125,129,131,136,138,141,"Statement",-9,146,147,150,151,153,154,155,156,157,"Pattern"],["openedBy",25,"(",56,"[",60,"{"],["closedBy",26,")",57,"]",61,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,6],repeatNodeCount:38,tokenData:"%-W#sR!`OX%TXY=|Y[%T[]=|]p%Tpq=|qr@_rsDOst!+|tu%Tuv!Nnvw#!|wx#$Wxy#:Uyz#;Yz{#<^{|#>x|}#@S}!O#AW!O!P#Ci!P!Q#N_!Q!R$!y!R![$&w![!]$1e!]!^$3s!^!_$4w!_!`$7c!`!a$8m!a!b%T!b!c$;U!c!d$<b!d!e$>W!e!h$<b!h!i$H[!i!t$<b!t!u%#r!u!w$<b!w!x$Fl!x!}$<b!}#O%%z#O#P?d#P#Q%'O#Q#R%(S#R#S$<b#S#T%T#T#U$<b#U#V$>W#V#Y$<b#Y#Z$H[#Z#f$<b#f#g%#r#g#i$<b#i#j$Fl#j#o$<b#o#p%)^#p#q%*S#q#r%+^#r#s%,S#s$g%T$g;'S$<b;'S;=`$>Q<%lO$<b!n%^]&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n&^]&r!b&jSOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n'^]&r!b&jSOr%Trs(Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!f(^Z&r!b&jSOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)UZ&r!bOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!f)|Z&r!bOw(Vwx*ox#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V!b*tT&r!bO#o*o#p#q*o#r;'S*o;'S;=`+T<%lO*o!b+WP;=`<%l*o!f+`W&r!bO#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`.d;=`<%l+x<%lO(VS+}V&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS,gVOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-PUOw+xx#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xS-fRO;'S+x;'S;=`-o;=`O+xS-tW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l+x<%lO+xS.aP;=`<%l+x!f.iW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l(V<%lO+x!f/UP;=`<%l(V!n/`]&r!b&mWOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!n0`]&r!b&mWOr%Trs&Vsw%Twx1Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!j1`Z&r!b&mWOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j2WZ&r!bOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3OZ&r!bOr1Xrs*os#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X!j3vW&r!bO#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`6z;=`<%l4`<%lO1XW4eV&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W4}VOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5gUOr4`s#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`W5|RO;'S4`;'S;=`6V;=`O4`W6[W&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`W6wP;=`<%l4`!j7PW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l1X<%lO4`!j7lP;=`<%l1X!n7tW&r!bO#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T[8eX&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9VX&jSOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[9wX&jSOr8^rs+xsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[:iX&mWOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;ZX&mWOr8^rs9Qsw8^wx4`x#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^[;yRO;'S8^;'S;=`<S;=`O8^[<ZY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l8^<%lO8^[<|P;=`<%l8^!n=WY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l%T<%lO8^!n=yP;=`<%l%T#s>Xc&r!b&jS&mW%p!TOX%TXY=|Y[%T[]=|]p%Tpq=|qr%Trs&Vsw%Twx/Xx#O%T#O#P?d#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s?i[&r!bOY%TYZ=|Z]%T]^=|^#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=P;=`<%l8^<%lO%T!q@hd&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#T%T#T#UBz#U#f%T#f#gBz#g#hBz#h#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qBR]oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!qCV]!nR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cDXa&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs!)|swE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cEia&r!b&jS&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cFw]&r!b&jS&hsOr%Trs'Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#cGya&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxIOx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#cIXa&r!b&mW&hsOYE^YZ%TZ]E^]^%T^rE^rsFnswE^wxJ^x#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#_Jg_&r!b&mW&hsOYJ^YZ1XZ]J^]^1X^rJ^rsKfs#OJ^#O#PL`#P#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`!!o<%lOJ^#_KmZ&r!b&hsOr1Xrs2ys#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#_LeW&r!bO#oJ^#o#pL}#p#qJ^#q#rL}#r;'SJ^;'S;=`! r;=`<%lL}<%lOJ^{MUZ&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l<%lOL}{M|V&hsOr4`rs5ds#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`{NfRO;'SL};'S;=`No;=`OL}{Nv[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lL}<%lOL}{! oP;=`<%lL}#_! y[&mW&hsOYL}YZ4`Z]L}]^4`^rL}rsMws#OL}#O#PNc#P;'SL};'S;=`! l;=`<%lJ^<%lOL}#_!!rP;=`<%lJ^#c!!zW&r!bO#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!(q;=`<%l!#d<%lOE^!P!#m]&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!$mX&jS&hsOr8^rs9rsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P!%a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!&Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!&a]&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwxL}x#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k<%lO!#d!P!']RO;'S!#d;'S;=`!'f;=`O!#d!P!'o^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%l!#d<%lO!#d!P!(nP;=`<%l!#d#c!(z^&jS&mW&hsOY!#dYZ8^Z]!#d]^8^^r!#drs!$fsw!#dwx!%Yx#O!#d#O#P!'Y#P;'S!#d;'S;=`!(k;=`<%lE^<%lO!#d#c!)yP;=`<%lE^#c!*V]&r!b&jS&hsOr%Trs!+Osw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c!+ZZ&nW&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#s!,XaU!T&r!b&jS&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!-gaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!.lsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!.uaU!T&r!b&jSOY!+|YZ%TZ]!+|]^%T^r!+|rs!/zsw!+|wx!:hx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#k!0T_U!T&r!b&jSOY!/zYZ(VZ]!/z]^(V^w!/zwx!1Sx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!1Z_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!2Yx#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#k!2a_U!T&r!bOY!/zYZ(VZ]!/z]^(V^w!/zwx!3`x#O!/z#O#P!4z#P#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!:b<%lO!/z#g!3gZU!T&r!bOY!3`YZ*oZ]!3`]^*o^#o!3`#o#p!4Y#p#q!3`#q#r!4Y#r;'S!3`;'S;=`!4t<%lO!3`!T!4_TU!TOY!4YZ]!4Y^;'S!4Y;'S;=`!4n<%lO!4Y!T!4qP;=`<%l!4Y#g!4wP;=`<%l!3`#k!5R[U!T&r!bOY!/zYZ(VZ]!/z]^(V^#o!/z#o#p!5w#p#q!/z#q#r!5w#r;'S!/z;'S;=`!9s;=`<%l+x<%lO!/z!X!6OZU!T&jSOY!5wYZ+xZ]!5w]^+x^w!5wwx!6qx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!6vZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!7ix#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!7nZU!TOY!5wYZ+xZ]!5w]^+x^w!5wwx!4Yx#O!5w#O#P!8a#P;'S!5w;'S;=`!9m<%lO!5w!X!8fWU!TOY!5wYZ+xZ]!5w]^+x^;'S!5w;'S;=`!9O;=`<%l+x<%lO!5w!X!9TW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!5w<%lO+x!X!9pP;=`<%l!5w#k!9xW&jSOw+xwx,dx#O+x#O#P-c#P;'S+x;'S;=`.^;=`<%l!/z<%lO+x#k!:eP;=`<%l!/z#s!:qaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!;vx#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#s!<PaU!T&r!b&mWOY!+|YZ%TZ]!+|]^%T^r!+|rs!-^sw!+|wx!=Ux#O!+|#O#P!FW#P#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Nh<%lO!+|#o!=__U!T&r!b&mWOY!=UYZ1XZ]!=U]^1X^r!=Urs!>^s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!>e_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!?ds#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!?k_U!T&r!bOY!=UYZ1XZ]!=U]^1X^r!=Urs!3`s#O!=U#O#P!@j#P#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!FQ<%lO!=U#o!@q[U!T&r!bOY!=UYZ1XZ]!=U]^1X^#o!=U#o#p!Ag#p#q!=U#q#r!Ag#r;'S!=U;'S;=`!Ec;=`<%l4`<%lO!=U!]!AnZU!T&mWOY!AgYZ4`Z]!Ag]^4`^r!Agrs!Bas#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!BfZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!CXs#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!C^ZU!TOY!AgYZ4`Z]!Ag]^4`^r!Agrs!4Ys#O!Ag#O#P!DP#P;'S!Ag;'S;=`!E]<%lO!Ag!]!DUWU!TOY!AgYZ4`Z]!Ag]^4`^;'S!Ag;'S;=`!Dn;=`<%l4`<%lO!Ag!]!DsW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!Ag<%lO4`!]!E`P;=`<%l!Ag#o!EhW&mWOr4`rs4zs#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l!=U<%lO4`#o!FTP;=`<%l!=U#s!F_[U!T&r!bOY!+|YZ%TZ]!+|]^%T^#o!+|#o#p!GT#p#q!+|#q#r!GT#r;'S!+|;'S;=`!Mq;=`<%l8^<%lO!+|!a!G^]U!T&jS&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!H^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!IVsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!I^]U!T&jSOY!GTYZ8^Z]!GT]^8^^r!GTrs!5wsw!GTwx!JVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!J^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!KVx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!K^]U!T&mWOY!GTYZ8^Z]!GT]^8^^r!GTrs!HVsw!GTwx!Agx#O!GT#O#P!LV#P;'S!GT;'S;=`!Mk<%lO!GT!a!L[WU!TOY!GTYZ8^Z]!GT]^8^^;'S!GT;'S;=`!Lt;=`<%l8^<%lO!GT!a!L{Y&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!GT<%lO8^!a!MnP;=`<%l!GT#s!MxY&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y;=`<%l!+|<%lO8^#s!NkP;=`<%l!+|#b!Ny_&PQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b#!T]!{r&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b##X_%yQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#$aa&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#8Ux#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#%qa&r!b&jS&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#'Pa&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#(Usw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c#(_a&r!b&jS&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#)dsw#%fwx#/{x#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#Z#)m_&r!b&jS&hsOY#)dYZ(VZ]#)d]^(V^w#)dwx#*lx#O#)d#O#P#+f#P#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#/u<%lO#)d#Z#*sZ&r!b&hsOw(Vwx)wx#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#Z#+kW&r!bO#o#)d#o#p#,T#p#q#)d#q#r#,T#r;'S#)d;'S;=`#.x;=`<%l#,T<%lO#)dw#,[Z&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r<%lO#,Tw#-SV&hsOw+xwx,|x#O+x#O#P-c#P;'S+x;'S;=`.^<%lO+xw#-lRO;'S#,T;'S;=`#-u;=`O#,Tw#-|[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#,T<%lO#,Tw#.uP;=`<%l#,T#Z#/P[&jS&hsOY#,TYZ+xZ]#,T]^+x^w#,Twx#,}x#O#,T#O#P#-i#P;'S#,T;'S;=`#.r;=`<%l#)d<%lO#,T#Z#/xP;=`<%l#)d#c#0U]&r!b&mW&hsOr%Trs&Vsw%Twx0Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#1SW&r!bO#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#6y;=`<%l#1l<%lO#%f!P#1u]&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#2u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#3nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#3u]&jS&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#,Tsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s<%lO#1l!P#4uX&mW&hsOr8^rs9Qsw8^wx;Ux#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^!P#5eRO;'S#1l;'S;=`#5n;=`O#1l!P#5w^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#1l<%lO#1l!P#6vP;=`<%l#1l#c#7S^&jS&mW&hsOY#1lYZ8^Z]#1l]^8^^r#1lrs#2nsw#1lwx#4nx#O#1l#O#P#5b#P;'S#1l;'S;=`#6s;=`<%l#%f<%lO#1l#c#8RP;=`<%l#%f#c#8_]&r!b&mW&hsOr%Trs&Vsw%Twx#9Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#9cZ&kS&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#c#:a]js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#;e]iR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#<iaXs&r!b&jS&mWOr%Trs&Vsw%Twx/Xxz%Tz{#=n{!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#=y_cR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#?T_%|s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q#@_]|R&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s#Ac`%}s&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`!a#Be!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#O#Bp]'R`&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Cta!hQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#Dy!P!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#ES_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P#FR!P#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#F^]!us&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Gbi!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#GV#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#IYc&r!b&jS&mWOr%Trs&Vsw%Twx/Xx{%T{|#Je|}%T}!O#Je!O!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Jn_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Kxe!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#Km![!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S#Km#S#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a#Mf]!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c#Nja&OR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!P%T!P!Q$ o!Q!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$ z_&QQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$#Uw!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!d%T!d!e$(w!e!g%T!g!h#IP!h!l%T!l!m#MZ!m!q%T!q!r$+m!r!z%T!z!{$.]!{#O%T#O#P7o#P#R%T#R#S$&w#S#U%T#U#V$(w#V#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#c%T#c#d$+m#d#l%T#l#m$.]#m#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$%x_&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![#GV![#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$'Sk!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!O%T!O!P$%o!P!Q%T!Q![$&w![!g%T!g!h#IP!h!l%T!l!m#MZ!m#O%T#O#P7o#P#R%T#R#S$&w#S#X%T#X#Y#IP#Y#^%T#^#_#MZ#_#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$)Qb&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$*eb!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!R$*Y!R!S$*Y!S#O%T#O#P7o#P#R%T#R#S$*Y#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$+va&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$-Wa!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q!Y$,{!Y#O%T#O#P7o#P#R%T#R#S$,{#S#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$.fe&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a$0Se!jq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!Q%T!Q![$/w![!c%T!c!i$/w!i#O%T#O#P7o#P#R%T#R#S$/w#S#T%T#T#Z$/w#Z#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$1p_}!T&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`$2o!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q$2z]&YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$4O]#js&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$5SaoR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!^%T!^!_$6X!_!`Av!`!aAv!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$6d_%zQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$7n_&Xs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$8x`oR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`Av!`!a$9z!a#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b$:V_%{Q&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$;c_aQ$QP&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#s$<oe&r!b&jS&mW&g`&SsOr%Trs&Vsw%Twx/Xx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$>TP;=`<%l$<b#s$>ei&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g$Fl#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$@]a&r!b&jS&hsOYE^YZ%TZ]E^]^%T^rE^rs$AbswE^wxGpx#OE^#O#P!!u#P#oE^#o#p!#d#p#qE^#q#r!#d#r;'SE^;'S;=`!)v<%lOE^#c$Ak]&r!b&jS&hsOr%Trs$Bdsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$BmZ&r!b&jS&lsOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$Cia&r!b&mW&hsOY#%fYZ%TZ]#%f]^%T^r#%frs#&vsw#%fwx$Dnx#O#%f#O#P#0}#P#o#%f#o#p#1l#p#q#%f#q#r#1l#r;'S#%f;'S;=`#8O<%lO#%f#c$Dw]&r!b&mW&hsOr%Trs&Vsw%Twx$Epx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_$EyZ&r!b&mW&isOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s$Fye&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s$Hii&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!t$<b!t!u%!S!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#f$<b#f#g%!S#g#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c$Ja]&r!b&jS&ssOr%Trs$KYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$Ka]&r!b&jSOr%Trs$LYsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#Z$LcZ&r!b&jS&usOw(Vwx)Px#O(V#O#P+Z#P#o(V#o#p+x#p#q(V#q#r+x#r;'S(V;'S;=`/R<%lO(V#c$M_]&r!b&mW&osOr%Trs&Vsw%Twx$NWx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#c$N_]&r!b&mWOr%Trs&Vsw%Twx% Wx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#_% aZ&r!b&mW&tsOr1Xrs2Rs#O1X#O#P3q#P#o1X#o#p4`#p#q1X#q#r4`#r;'S1X;'S;=`7i<%lO1X#s%!ae&r!b&jS&mW&g`&SsOr%Trs$JWsw%Twx$MUx!Q%T!Q![$<b![!c%T!c!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#s%$Pm&r!b&jS&mW&g`&SsOr%Trs$@Ssw%Twx$C`x!Q%T!Q![$<b![!c%T!c!h$<b!h!i%!S!i!t$<b!t!u$Fl!u!}$<b!}#O%T#O#P7o#P#R%T#R#S$<b#S#T%T#T#U$<b#U#V$Fl#V#Y$<b#Y#Z%!S#Z#o$<b#o#p8^#p#q%T#q#r8^#r$g%T$g;'S$<b;'S;=`$>Q<%lO$<b#c%&V]!Zs&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%'Z]!YR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#b%(__%xQ&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T#a%)gX!_#T&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#c%*__%wR&r!b&jS&mWOr%Trs&Vsw%Twx/Xx!_%T!_!`# x!`#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T!q%+gX!^!e&jS&mWOr8^rs9Qsw8^wx:dx#O8^#O#P;v#P;'S8^;'S;=`<y<%lO8^#a%,_]&Rq&r!b&jS&mWOr%Trs&Vsw%Twx/Xx#O%T#O#P7o#P#o%T#o#p8^#p#q%T#q#r8^#r;'S%T;'S;=`=v<%lO%T",tokenizers:[legacyPrint,indentation,newlines,formatString1,formatString2,formatString1l,formatString2l,0,1,2,3,4,5,6],topRules:{Script:[0,7]},specialized:[{term:234,get:s=>spec_identifier[s]||-1}],tokenPrec:7372});class CompletionContext{constructor(e,r,n){this.state=e,this.pos=r,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let r=syntaxTree(this.state).resolveInner(this.pos,-1);for(;r&&e.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(e){let r=this.state.doc.lineAt(this.pos),n=Math.max(r.from,this.pos-250),o=r.text.slice(n-r.from,this.pos-r.from),a=o.search(ensureAnchor(e,!1));return a<0?null:{from:n+a,to:this.pos,text:o.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,r){e=="abort"&&this.abortListeners&&this.abortListeners.push(r)}}function toSet(s){let e=Object.keys(s).join(""),r=/\w/.test(e);return r&&(e=e.replace(/\w/g,"")),`[${r?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(s){let e=Object.create(null),r=Object.create(null);for(let{label:o}of s){e[o[0]]=!0;for(let a=1;a<o.length;a++)r[o[a]]=!0}let n=toSet(e)+toSet(r)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function completeFromList(s){let e=s.map(o=>typeof o=="string"?{label:o}:o),[r,n]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let a=o.matchBefore(n);return a||o.explicit?{from:a?a.from:o.pos,options:e,validFor:r}:null}}function ifNotIn(s,e){return r=>{for(let n=syntaxTree(r.state).resolveInner(r.pos,-1);n;n=n.parent){if(s.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(r)}}class Option{constructor(e,r,n,o){this.completion=e,this.source=r,this.match=n,this.score=o}}function cur(s){return s.selection.main.from}function ensureAnchor(s,e){var r;let{source:n}=s,o=e&&n[0]!="^",a=n[n.length-1]!="$";return!o&&!a?s:new RegExp(`${o?"^":""}(?:${n})${a?"$":""}`,(r=s.flags)!==null&&r!==void 0?r:s.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(s,e,r,n){let{main:o}=s.selection,a=r-o.from,c=n-o.from;return Object.assign(Object.assign({},s.changeByRange(l=>l!=o&&r!=n&&s.sliceDoc(l.from+a,l.from+c)!=s.sliceDoc(r,n)?{range:l}:{changes:{from:l.from+a,to:n==o.from?l.to:l.from+c,insert:e},range:EditorSelection.cursor(l.from+a+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(s){if(!Array.isArray(s))return s;let e=SourceCache.get(s);return e||SourceCache.set(s,e=completeFromList(s)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<e.length;){let n=codePointAt(e,r),o=codePointSize(n);this.chars.push(n);let a=e.slice(r,r+o),c=a.toUpperCase();this.folded.push(codePointAt(c==a?a.toLowerCase():c,0)),r+=o}this.astral=e.length!=this.chars.length}ret(e,r){return this.score=e,this.matched=r,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:r,folded:n,any:o,precise:a,byWord:c}=this;if(r.length==1){let x=codePointAt(e,0),y=codePointSize(x),O=y==e.length?0:-100;if(x!=r[0])if(x==n[0])O+=-200;else return!1;return this.ret(O,[0,y])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=r.length,d=0;if(l<0){for(let x=0,y=Math.min(e.length,200);x<y&&d<h;){let O=codePointAt(e,x);(O==r[d]||O==n[d])&&(o[d++]=x),x+=codePointSize(O)}if(d<h)return!1}let f=0,g=0,v=!1,S=0,A=-1,w=-1,m=/[a-z]/.test(e),b=!0;for(let x=0,y=Math.min(e.length,200),O=0;x<y&&g<h;){let k=codePointAt(e,x);l<0&&(f<h&&k==r[f]&&(a[f++]=x),S<h&&(k==r[S]||k==n[S]?(S==0&&(A=x),w=x+1,S++):S=0));let P,L=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(P=fromCodePoint(k))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!x||L==1&&m||O==0&&L!=0)&&(r[g]==k||n[g]==k&&(v=!0)?c[g++]=x:c.length&&(b=!1)),O=L,x+=codePointSize(k)}return g==h&&c[0]==0&&b?this.result(-100+(v?-200:0),c,e):S==h&&A==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):S==h?this.ret(-900-e.length,[A,w]):g==h?this.result(-100+(v?-200:0)+-700+(b?0:-1100),c,e):r.length==2?!1:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,r,n){let o=[],a=0;for(let c of r){let l=c+(this.astral?codePointSize(codePointAt(n,c)):1);a&&o[a-1]==c?o[a-1]=l:(o[a++]=c,o[a++]=l)}return this.ret(e-n.length,o)}}const completionConfig=Facet.define({combine(s){return combineConfig(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(e,r)=>e.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,r)=>e&&r,closeOnBlur:(e,r)=>e&&r,icons:(e,r)=>e&&r,tooltipClass:(e,r)=>n=>joinClass(e(n),r(n)),optionClass:(e,r)=>n=>joinClass(e(n),r(n)),addToOptions:(e,r)=>e.concat(r)})}});function joinClass(s,e){return s?e?s+" "+e:s:e}function defaultPositionInfo(s,e,r,n,o,a){let c=s.textDirection==Direction.RTL,l=c,h=!1,d="top",f,g,v=e.left-o.left,S=o.right-e.right,A=n.right-n.left,w=n.bottom-n.top;if(l&&v<Math.min(A,S)?l=!1:!l&&S<Math.min(A,v)&&(l=!0),A<=(l?v:S))f=Math.max(o.top,Math.min(r.top,o.bottom-w))-e.top,g=Math.min(400,l?v:S);else{h=!0,g=Math.min(400,(c?e.right:o.right-e.left)-30);let x=o.bottom-e.bottom;x>=w||x>e.top?f=r.bottom-e.top:(d="bottom",f=e.bottom-r.top)}let m=(e.bottom-e.top)/a.offsetHeight,b=(e.right-e.left)/a.offsetWidth;return{style:`${d}: ${f/m}px; max-width: ${g/b}px`,class:"cm-completionInfo-"+(h?c?"left-narrow":"right-narrow":l?"left":"right")}}function optionContent(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(r){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),r.type&&n.classList.add(...r.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(r,n,o,a){let c=document.createElement("span");c.className="cm-completionLabel";let l=r.displayLabel||r.label,h=0;for(let d=0;d<a.length;){let f=a[d++],g=a[d++];f>h&&c.appendChild(document.createTextNode(l.slice(h,f)));let v=c.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(l.slice(f,g))),v.className="cm-completionMatchedText",h=g}return h<l.length&&c.appendChild(document.createTextNode(l.slice(h))),c},position:50},{render(r){if(!r.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=r.detail,n},position:80}),e.sort((r,n)=>r.position-n.position).map(r=>r.render)}function rangeAroundSelected(s,e,r){if(s<=r)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let o=Math.floor(e/r);return{from:o*r,to:(o+1)*r}}let n=Math.floor((s-e)/r);return{from:s-(n+1)*r,to:s-n*r}}class CompletionTooltip{constructor(e,r,n){this.view=e,this.stateField=r,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let o=e.state.field(r),{options:a,selected:c}=o.open,l=e.state.facet(completionConfig);this.optionContent=optionContent(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=rangeAroundSelected(a.length,c,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=e.state.field(r).open;for(let f=h.target,g;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(g=/-(\d+)$/.exec(f.id))&&+g[1]<d.length){this.applyCompletion(e,d[+g[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(completionConfig).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(a,o.id)}mount(){this.updateSel()}showOptions(e,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var r;let n=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=o){let{options:a,selected:c,disabled:l}=n.open;(!o.open||o.open.options!=a)&&(this.range=rangeAroundSelected(a.length,c,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),l!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let r=this.tooltipClass(e);if(r!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of r.split(" "))n&&this.dom.classList.add(n);this.currentClass=r}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),r=e.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=rangeAroundSelected(r.options.length,r.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(r.options,e.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:n}=r.options[r.selected],{info:o}=n;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(n);if(!a)return;"then"in a?a.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,n)}).catch(c=>logException(this.view.state,c,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,r){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:a}=e;n.appendChild(o),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let r=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)n.nodeName!="LI"||!n.id?o--:o==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),r=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return r&&scrollIntoView(this.list,r),r}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),a=this.space;if(!a){let c=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:c.innerWidth,bottom:c.innerHeight}}return o.top>Math.min(a.bottom,r.bottom)-10||o.bottom<Math.max(a.top,r.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,r,o,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,r,n){const o=document.createElement("ul");o.id=r,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let c=n.from;c<n.to;c++){let{completion:l,match:h}=e[c],{section:d}=l;if(d){let v=typeof d=="string"?d:d.name;if(v!=a&&(c>n.from||n.from==0))if(a=v,typeof d!="string"&&d.header)o.appendChild(d.header(d));else{let S=o.appendChild(document.createElement("completion-section"));S.textContent=v}}const f=o.appendChild(document.createElement("li"));f.id=r+"-"+c,f.setAttribute("role","option");let g=this.optionClass(l);g&&(f.className=g);for(let v of this.optionContent){let S=v(l,this.view.state,this.view,h);S&&f.appendChild(S)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(s,e){return r=>new CompletionTooltip(r,s,e)}function scrollIntoView(s,e){let r=s.getBoundingClientRect(),n=e.getBoundingClientRect(),o=r.height/s.offsetHeight;n.top<r.top?s.scrollTop-=(r.top-n.top)/o:n.bottom>r.bottom&&(s.scrollTop+=(n.bottom-r.bottom)/o)}function score(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function sortOptions(s,e){let r=[],n=null,o=h=>{r.push(h);let{section:d}=h.completion;if(d){n||(n=[]);let f=typeof d=="string"?d:d.name;n.some(g=>g.name==f)||n.push(typeof d=="string"?{name:f}:d)}};for(let h of s)if(h.hasResult()){let d=h.result.getMatch;if(h.result.filter===!1)for(let f of h.result.options)o(new Option(f,h.source,d?d(f):[],1e9-r.length));else{let f=new FuzzyMatcher(e.sliceDoc(h.from,h.to));for(let g of h.result.options)if(f.match(g.label)){let v=g.displayLabel?d?d(g,f.matched):[]:f.matched;o(new Option(g,h.source,v,f.score+(g.boost||0)))}}}if(n){let h=Object.create(null),d=0,f=(g,v)=>{var S,A;return((S=g.rank)!==null&&S!==void 0?S:1e9)-((A=v.rank)!==null&&A!==void 0?A:1e9)||(g.name<v.name?-1:1)};for(let g of n.sort(f))d-=1e5,h[g.name]=d;for(let g of r){let{section:v}=g.completion;v&&(g.score+=h[typeof v=="string"?v:v.name])}}let a=[],c=null,l=e.facet(completionConfig).compareCompletions;for(let h of r.sort((d,f)=>f.score-d.score||l(d.completion,f.completion))){let d=h.completion;!c||c.label!=d.label||c.detail!=d.detail||c.type!=null&&d.type!=null&&c.type!=d.type||c.apply!=d.apply||c.boost!=d.boost?a.push(h):score(h.completion)>score(c)&&(a[a.length-1]=h),c=h.completion}return a}class CompletionDialog{constructor(e,r,n,o,a,c){this.options=e,this.attrs=r,this.tooltip=n,this.timestamp=o,this.selected=a,this.disabled=c}setSelected(e,r){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(r,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,r,n,o,a){let c=sortOptions(e,r);if(!c.length)return o&&e.some(h=>h.state==1)?new CompletionDialog(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let l=r.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=l&&o.selected!=-1){let h=o.options[o.selected].completion;for(let d=0;d<c.length;d++)if(c[d].completion==h){l=d;break}}return new CompletionDialog(c,makeAttrs(n,l),{pos:e.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:createTooltip,above:a.aboveCursor},o?o.timestamp:Date.now(),l,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,r,n){this.active=e,this.id=r,this.open=n}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:r}=e,n=r.facet(completionConfig),a=(n.override||r.languageDataAt("autocomplete",cur(r)).map(asSource)).map(l=>(this.active.find(d=>d.source==l)||new ActiveSource(l,this.active.some(d=>d.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((l,h)=>l==this.active[h])&&(a=this.active);let c=this.open;c&&e.docChanged&&(c=c.map(e.changes)),e.selection||a.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!sameResults(a,this.active)?c=CompletionDialog.build(a,r,this.id,c,n):c&&c.disabled&&!a.some(l=>l.state==1)&&(c=null),!c&&a.every(l=>l.state!=1)&&a.some(l=>l.hasResult())&&(a=a.map(l=>l.hasResult()?new ActiveSource(l.source,0):l));for(let l of e.effects)l.is(setSelectedEffect)&&(c=c&&c.setSelected(l.value,this.id));return a==this.active&&c==this.open?this:new CompletionState(a,this.id,c)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(s,e){if(s==e)return!0;for(let r=0,n=0;;){for(;r<s.length&&!s[r].hasResult;)r++;for(;n<e.length&&!e[n].hasResult;)n++;let o=r==s.length,a=n==e.length;if(o||a)return o==a;if(s[r++].result!=e[n++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(s,e){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(r["aria-activedescendant"]=s+"-"+e),r}const none=[];function getUserEvent(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,r,n=-1){this.source=e,this.state=r,this.explicitPos=n}hasResult(){return!1}update(e,r){let n=getUserEvent(e),o=this;n?o=o.handleUserEvent(e,n,r):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new ActiveSource(o.source,0));for(let a of e.effects)if(a.is(startCompletionEffect))o=new ActiveSource(o.source,1,a.value?cur(e.state):-1);else if(a.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(a.is(setActiveEffect))for(let c of a.value)c.source==o.source&&(o=c);return o}handleUserEvent(e,r,n){return r=="delete"||!n.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,r,n,o,a){super(e,2,r),this.result=n,this.from=o,this.to=a}hasResult(){return!0}handleUserEvent(e,r,n){var o;let a=e.changes.mapPos(this.from),c=e.changes.mapPos(this.to,1),l=cur(e.state);if((this.explicitPos<0?l<=a:l<this.from)||l>c||r=="delete"&&cur(e.startState)==this.from)return new ActiveSource(this.source,r=="input"&&n.activateOnTyping?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),d;return checkValid(this.result.validFor,e.state,a,c)?new ActiveResult(this.source,h,this.result,a,c):this.result.update&&(d=this.result.update(this.result,a,c,new CompletionContext(e.state,l,h>=0)))?new ActiveResult(this.source,h,d,d.from,(o=d.to)!==null&&o!==void 0?o:cur(e.state)):new ActiveSource(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(s,e,r,n){if(!s)return!1;let o=e.sliceDoc(r,n);return typeof s=="function"?s(o,r,n,e):ensureAnchor(s,!0).test(o)}const setActiveEffect=StateEffect.define({map(s,e){return s.map(r=>r.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(s,e){return s.update(e)},provide:s=>[showTooltip.from(s,e=>e.tooltip),EditorView.contentAttributes.from(s,e=>e.attrs)]});function applyCompletion(s,e){const r=e.completion.apply||e.completion.label;let n=s.state.field(completionState).active.find(o=>o.source==e.source);return n instanceof ActiveResult?(typeof r=="string"?s.dispatch(Object.assign(Object.assign({},insertCompletionText(s.state,r,n.from,n.to)),{annotations:pickedCompletion.of(e.completion)})):r(s,e.completion,n.from,n.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(s,e="option"){return r=>{let n=r.state.field(completionState,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let o=1,a;e=="page"&&(a=getTooltip(r,n.open.tooltip))&&(o=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:c}=n.open.options,l=n.open.selected>-1?n.open.selected+o*(s?1:-1):s?0:c-1;return l<0?l=e=="page"?0:c-1:l>=c&&(l=e=="page"?c-1:0),r.dispatch({effects:setSelectedEffect.of(l)}),!0}}const acceptCompletion=s=>{let e=s.state.field(completionState,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(completionConfig).interactionDelay?!1:applyCompletion(s,e.open.options[e.open.selected])},startCompletion=s=>s.state.field(completionState,!1)?(s.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=s=>{let e=s.state.field(completionState,!1);return!e||!e.active.some(r=>r.state!=0)?!1:(s.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,r){this.active=e,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of s.state.field(completionState).active)e.state==1&&this.startQuery(e)}update(s){let e=s.state.field(completionState);if(!s.selectionSet&&!s.docChanged&&s.startState.field(completionState)==e)return;let r=s.transactions.some(n=>(n.selection||n.docChanged)&&!getUserEvent(n));for(let n=0;n<this.running.length;n++){let o=this.running[n];if(r||o.updates.length+s.transactions.length>MaxUpdateCount&&Date.now()-o.time>MinAbortTime){for(let a of o.context.abortListeners)try{a()}catch(c){logException(this.view.state,c)}o.context.abortListeners=null,this.running.splice(n--,1)}else o.updates.push(...s.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(o=>o.active.source==n.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let n of s.transactions)getUserEvent(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:s}=this.view,e=s.field(completionState);for(let r of e.active)r.state==1&&!this.running.some(n=>n.active.source==r.source)&&this.startQuery(r)}startQuery(s){let{state:e}=this.view,r=cur(e),n=new CompletionContext(e,r,s.explicitPos==r),o=new RunningQuery(s,n);this.running.push(o),Promise.resolve(s.source(n)).then(a=>{o.context.aborted||(o.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,a)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],r=this.view.state.facet(completionConfig);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(o.done===void 0)continue;if(this.running.splice(n--,1),o.done){let c=new ActiveResult(o.active.source,o.active.explicitPos,o.done,o.done.from,(s=o.done.to)!==null&&s!==void 0?s:cur(o.updates.length?o.updates[0].startState:this.view.state));for(let l of o.updates)c=c.update(l,r);if(c.hasResult()){e.push(c);continue}}let a=this.view.state.field(completionState).active.find(c=>c.source==o.active.source);if(a&&a.state==1)if(o.done==null){let c=new ActiveSource(o.active.source,0);for(let l of o.updates)c=c.update(l,r);c.state!=1&&e.push(c)}else this.startQuery(a)}e.length&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let r=e.open&&getTooltip(this.view,e.open.tooltip);(!r||!r.dom.contains(s.relatedTarget))&&this.view.dispatch({effects:closeCompletionEffect.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,r,n,o){this.field=e,this.line=r,this.from=n,this.to=o}}class FieldRange{constructor(e,r,n){this.field=e,this.from=r,this.to=n}map(e){let r=e.mapPos(this.from,-1,MapMode.TrackDel),n=e.mapPos(this.to,1,MapMode.TrackDel);return r==null||n==null?null:new FieldRange(this.field,r,n)}}class Snippet{constructor(e,r){this.lines=e,this.fieldPositions=r}instantiate(e,r){let n=[],o=[r],a=e.doc.lineAt(r),c=/^\s*/.exec(a.text)[0];for(let h of this.lines){if(n.length){let d=c,f=/^\t*/.exec(h)[0].length;for(let g=0;g<f;g++)d+=e.facet(indentUnit);o.push(r+d.length-f),h=d+h.slice(f)}n.push(h),r+=h.length+1}let l=this.fieldPositions.map(h=>new FieldRange(h.field,o[h.line]+h.from,o[h.line]+h.to));return{text:n,ranges:l}}static parse(e){let r=[],n=[],o=[],a;for(let c of e.split(/\r\n?|\n/)){for(;a=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(c);){let l=a[1]?+a[1]:null,h=a[2]||a[3]||"",d=-1;for(let f=0;f<r.length;f++)(l!=null?r[f].seq==l:h&&r[f].name==h)&&(d=f);if(d<0){let f=0;for(;f<r.length&&(l==null||r[f].seq!=null&&r[f].seq<l);)f++;r.splice(f,0,{seq:l,name:h}),d=f;for(let g of o)g.field>=d&&g.field++}o.push(new FieldPos(d,n.length,a.index,a.index+h.length)),c=c.slice(0,a.index)+h+c.slice(a.index+a[0].length)}for(let l;l=/\\([{}])/.exec(c);){c=c.slice(0,l.index)+l[1]+c.slice(l.index+l[0].length);for(let h of o)h.line==n.length&&h.from>l.index&&(h.from--,h.to--)}n.push(c)}return new Snippet(n,o)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,r){this.ranges=e,this.active=r,this.deco=Decoration.set(e.map(n=>(n.from==n.to?fieldMarker:fieldRange).range(n.from,n.to)))}map(e){let r=[];for(let n of this.ranges){let o=n.map(e);if(!o)return null;r.push(o)}return new ActiveSnippet(r,this.active)}selectionInsideField(e){return e.ranges.every(r=>this.ranges.some(n=>n.field==this.active&&n.from<=r.from&&n.to>=r.to))}}const setActive=StateEffect.define({map(s,e){return s&&s.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(s,e){for(let r of e.effects){if(r.is(setActive))return r.value;if(r.is(moveToField)&&s)return new ActiveSnippet(s.ranges,r.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>EditorView.decorations.from(s,e=>e?e.deco:Decoration.none)});function fieldSelection(s,e){return EditorSelection.create(s.filter(r=>r.field==e).map(r=>EditorSelection.range(r.from,r.to)))}function snippet(s){let e=Snippet.parse(s);return(r,n,o,a)=>{let{text:c,ranges:l}=e.instantiate(r.state,o),h={changes:{from:o,to:a,insert:Text$1.of(c)},scrollIntoView:!0,annotations:n?pickedCompletion.of(n):void 0};if(l.length&&(h.selection=fieldSelection(l,0)),l.length>1){let d=new ActiveSnippet(l,0),f=h.effects=[setActive.of(d)];r.state.field(snippetState,!1)===void 0&&f.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}r.dispatch(r.state.update(h))}}function moveField(s){return({state:e,dispatch:r})=>{let n=e.field(snippetState,!1);if(!n||s<0&&n.active==0)return!1;let o=n.active+s,a=s>0&&!n.ranges.some(c=>c.field==o+s);return r(e.update({selection:fieldSelection(n.ranges,o),effects:setActive.of(a?null:new ActiveSnippet(n.ranges,o)),scrollIntoView:!0})),!0}}const clearSnippet=({state:s,dispatch:e})=>s.field(snippetState,!1)?(e(s.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(s){return s.length?s[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],s=>s.facet(snippetKeymap)));function snippetCompletion(s,e){return Object.assign(Object.assign({},e),{apply:snippet(s)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(s,e){let r=e.state.field(snippetState,!1),n;if(!r||(n=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let o=r.ranges.find(a=>a.from<=n&&a.to>=n);return!o||o.field==r.active?!1:(e.dispatch({selection:fieldSelection(r.ranges,o.field),effects:setActive.of(r.ranges.some(a=>a.field>o.field)?new ActiveSnippet(r.ranges,o.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(s,e){let r=e.mapPos(s,-1,MapMode.TrackAfter);return r??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(s,e){if(s=s.map(e.changes),e.selection){let r=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:n=>n>=r.from&&n<=r.to})}for(let r of e.effects)r.is(closeBracketEffect)&&(s=s.update({add:[closedBracket.range(r.value,r.value+1)]}));return s}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(s){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==s)return definedClosing.charAt(e+1);return fromCodePoint(s<128?s:s+1)}function config(s,e){return s.languageDataAt("closeBrackets",e)[0]||defaults}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((s,e,r,n)=>{if((android?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let o=s.state.selection.main;if(n.length>2||n.length==2&&codePointSize(codePointAt(n,0))==1||e!=o.from||r!=o.to)return!1;let a=insertBracket(s.state,n);return a?(s.dispatch(a),!0):!1}),deleteBracketPair=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=config(s,s.selection.main.head).brackets||defaults.brackets,o=null,a=s.changeByRange(c=>{if(c.empty){let l=prevChar(s.doc,c.head);for(let h of n)if(h==l&&nextChar(s.doc,c.head)==closing(codePointAt(h,0)))return{changes:{from:c.head-h.length,to:c.head+h.length},range:EditorSelection.cursor(c.head-h.length)}}return{range:o=c}});return o||e(s.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(s,e){let r=config(s,s.selection.main.head),n=r.brackets||defaults.brackets;for(let o of n){let a=closing(codePointAt(o,0));if(e==o)return a==o?handleSame(s,o,n.indexOf(o+o+o)>-1,r):handleOpen(s,o,a,r.before||defaults.before);if(e==a&&closedBracketAt(s,s.selection.main.from))return handleClose(s,o,a)}return null}function closedBracketAt(s,e){let r=!1;return s.field(bracketState).between(0,s.doc.length,n=>{n==e&&(r=!0)}),r}function nextChar(s,e){let r=s.sliceString(e,e+2);return r.slice(0,codePointSize(codePointAt(r,0)))}function prevChar(s,e){let r=s.sliceString(e-2,e);return codePointSize(codePointAt(r,0))==r.length?r:r.slice(1)}function handleOpen(s,e,r,n){let o=null,a=s.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:r,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let l=nextChar(s.doc,c.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+r,from:c.head},effects:closeBracketEffect.of(c.head+e.length),range:EditorSelection.cursor(c.head+e.length)}:{range:o=c}});return o?null:s.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(s,e,r){let n=null,o=s.changeByRange(a=>a.empty&&nextChar(s.doc,a.head)==r?{changes:{from:a.head,to:a.head+r.length,insert:r},range:EditorSelection.cursor(a.head+r.length)}:n={range:a});return n?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(s,e,r,n){let o=n.stringPrefixes||defaults.stringPrefixes,a=null,c=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:closeBracketEffect.of(l.to+e.length),range:EditorSelection.range(l.anchor+e.length,l.head+e.length)};let h=l.head,d=nextChar(s.doc,h),f;if(d==e){if(nodeStart(s,h))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(closedBracketAt(s,h)){let v=r&&s.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+v.length,insert:v},range:EditorSelection.cursor(h+v.length)}}}else{if(r&&s.sliceDoc(h-2*e.length,h)==e+e&&(f=canStartStringAt(s,h-2*e.length,o))>-1&&nodeStart(s,f))return{changes:{insert:e+e+e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)};if(s.charCategorizer(h)(d)!=CharCategory.Word&&canStartStringAt(s,h,o)>-1&&!probablyInString(s,h,e,o))return{changes:{insert:e+e,from:h},effects:closeBracketEffect.of(h+e.length),range:EditorSelection.cursor(h+e.length)}}return{range:a=l}});return a?null:s.update(c,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(s,e){let r=syntaxTree(s).resolveInner(e+1);return r.parent&&r.from==e}function probablyInString(s,e,r,n){let o=syntaxTree(s).resolveInner(e,-1),a=n.reduce((c,l)=>Math.max(c,l.length),0);for(let c=0;c<5;c++){let l=s.sliceDoc(o.from,Math.min(o.to,o.from+r.length+a)),h=l.indexOf(r);if(!h||h>-1&&n.indexOf(l.slice(0,h))>-1){let f=o.firstChild;for(;f&&f.from==o.from&&f.to-f.from>r.length+h;){if(s.sliceDoc(f.to-r.length,f.to)==r)return!1;f=f.firstChild}return!0}let d=o.to==e&&o.parent;if(!d)break;o=d}return!1}function canStartStringAt(s,e,r){let n=s.charCategorizer(e);if(n(s.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of r){let a=e-o.length;if(s.sliceDoc(a,e)==o&&n(s.sliceDoc(a-1,a))!=CharCategory.Word)return a}return-1}function autocompletion(s={}){return[completionState,completionConfig.of(s),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],s=>s.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID(s){return(e,r,n)=>{if(n)return!1;let o=e.node.getChild("VariableName");return o&&r(o,s),!0}}const gatherCompletions={FunctionDefinition:defID("function"),ClassDefinition:defID("class"),ForStatement(s,e,r){if(r){for(let n=s.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")e(n,"variable");else if(n.name=="in")break}},ImportStatement(s,e){var r,n;let{node:o}=s,a=((r=o.firstChild)===null||r===void 0?void 0:r.name)=="from";for(let c=o.getChild("import");c;c=c.nextSibling)c.name=="VariableName"&&((n=c.nextSibling)===null||n===void 0?void 0:n.name)!="as"&&e(c,a?"variable":"namespace")},AssignStatement(s,e){for(let r=s.node.firstChild;r;r=r.nextSibling)if(r.name=="VariableName")e(r,"variable");else if(r.name==":"||r.name=="AssignOp")break},ParamList(s,e){for(let r=null,n=s.node.firstChild;n;n=n.nextSibling)n.name=="VariableName"&&(!r||!/\*|AssignOp/.test(r.name))&&e(n,"variable"),r=n},CapturePattern:defID("variable"),AsPattern:defID("variable"),__proto__:null};function getScope(s,e){let r=cache.get(e);if(r)return r;let n=[],o=!0;function a(c,l){let h=s.sliceString(c.from,c.to);n.push({label:h,type:l})}return e.cursor(IterMode.IncludeAnonymous).iterate(c=>{if(c.name){let l=gatherCompletions[c.name];if(l&&l(c,a,o)||!o&&ScopeNodes.has(c.name))return!1;o=!1}else if(c.to-c.from>8192){for(let l of getScope(s,c.node))n.push(l);return!1}}),cache.set(e,n),n}const Identifier=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete=["String","FormatString","Comment","PropertyName"];function localCompletionSource(s){let e=syntaxTree(s.state).resolveInner(s.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let r=e.name=="VariableName"||e.to-e.from<20&&Identifier.test(s.state.sliceDoc(e.from,e.to));if(!r&&!s.explicit)return null;let n=[];for(let o=e;o;o=o.parent)ScopeNodes.has(o.name)&&(n=n.concat(getScope(s.state.doc,o)));return{options:n,from:r?e.from:s.pos,validFor:Identifier}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(s=>({label:s,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(s=>({label:s,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(s=>({label:s,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(s=>({label:s,type:"function"}))),snippets=[snippetCompletion("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete,completeFromList(globals.concat(snippets)));function indentBody(s,e){let r=s.baseIndentFor(e),n=s.lineAt(s.pos,-1),o=n.from+n.text.length;return/^\s*($|#)/.test(n.text)&&s.node.to<o+100&&!/\S/.test(s.state.sliceDoc(o,s.node.to))&&s.lineIndent(s.pos,-1)<=r||/^\s*(else:|elif |except |finally:)/.test(s.textAfter)&&s.lineIndent(s.pos,-1)>r?null:r+s.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser.configure({props:[indentNodeProp.add({Body:s=>{var e;return(e=indentBody(s,s.node))!==null&&e!==void 0?e:s.continue()},IfStatement:s=>/^\s*(else:|elif )/.test(s.textAfter)?s.baseIndent:s.continue(),TryStatement:s=>/^\s*(except |finally:|else:)/.test(s.textAfter)?s.baseIndent:s.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:s=>{if(s.pos+/\s*/.exec(s.textAfter)[0].length>=s.node.to){let e=null;for(let r=s.node,n=r.to;r=r.lastChild,!(!r||r.to!=n);)r.type.name=="Body"&&(e=r);if(e){let r=indentBody(s,e);if(r!=null)return r}}return s.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(s,e)=>({from:s.from+1,to:s.to-(s.to==e.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function crelt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var o=r[n];typeof o=="string"?s.setAttribute(n,o):o!=null&&(s[n]=o)}e++}for(;e<arguments.length;e++)add(s,arguments[e]);return s}function add(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)add(s,e[r]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class SearchCursor{constructor(e,r,n=0,o=e.length,a,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,o),this.bufferStart=n,this.normalize=a?l=>a(basicNormalize(l)):basicNormalize,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=fromCodePoint(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(r);for(let a=0,c=n;;a++){let l=o.charCodeAt(a),h=this.match(l,c);if(a==o.length-1){if(h)return this.value=h,this;break}c==n&&a<r.length&&r.charCodeAt(a)==l&&c++}}}match(e,r){let n=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],c=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[o+1],to:r+1}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:r,to:r+1}:this.matches.push(1,r)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,r,n,o=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new MultilineRegExpCursor(e,r,n,o,a);this.re=new RegExp(r,baseFlags+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let c=e.lineAt(o);this.curLineStart=c.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let n=this.curLineStart+r.index,o=n+r[0].length;if(this.matchPos=toCharEnd(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,r)))return this.value={from:n,to:o,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,n){let o=flattened.get(e);if(!o||o.from>=n||o.to<=r){let l=new FlattenedDoc(r,e.sliceString(r,n));return flattened.set(e,l),l}if(o.from==r&&o.to==n)return o;let{text:a,from:c}=o;return c>r&&(a=e.sliceString(r,c)+a,c=r),o.to<n&&(a+=e.sliceString(o.to,n)),flattened.set(e,new FlattenedDoc(c,a)),new FlattenedDoc(r,a.slice(r-c,n-c))}}class MultilineRegExpCursor{constructor(e,r,n,o,a){this.text=e,this.to=a,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(r,baseFlags+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let n=this.flat.from+r.index,o=n+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,o,r)))return this.value={from:n,to:o,match:r},this.matchPos=toCharEnd(this.text,o+(n==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(s){try{return new RegExp(s,baseFlags),!0}catch{return!1}}function toCharEnd(s,e){if(e>=s.length)return e;let r=s.lineAt(e),n;for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function createLineDialog(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),r=crelt("input",{class:"cm-textfield",name:"line",value:e}),n=crelt("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),s.dispatch({effects:dialogEffect.of(!1)}),s.focus()):a.keyCode==13&&(a.preventDefault(),o())},onsubmit:a=>{a.preventDefault(),o()}},crelt("label",s.state.phrase("Go to line"),": ",r)," ",crelt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function o(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!a)return;let{state:c}=s,l=c.doc.lineAt(c.selection.main.head),[,h,d,f,g]=a,v=f?+f.slice(1):0,S=d?+d:l.number;if(d&&g){let m=S/100;h&&(m=m*(h=="-"?-1:1)+l.number/c.doc.lines),S=Math.round(c.doc.lines*m)}else d&&h&&(S=S*(h=="-"?-1:1)+l.number);let A=c.doc.line(Math.max(1,Math.min(c.doc.lines,S))),w=EditorSelection.cursor(A.from+Math.max(0,Math.min(v,A.length)));s.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(w.from,{y:"center"})],selection:w}),s.focus()}return{dom:n}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(s,e){for(let r of e.effects)r.is(dialogEffect)&&(s=r.value);return s},provide:s=>showPanel.from(s,e=>e?createLineDialog:null)}),gotoLine=s=>{let e=getPanel(s,createLineDialog);if(!e){let r=[dialogEffect.of(!0)];s.state.field(dialogField,!1)==null&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),s.dispatch({effects:r}),e=getPanel(s,createLineDialog)}return e&&e.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(s){return combineConfig(s,defaultHighlightOptions,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(s){let e=[defaultTheme,matchHighlighter];return s&&e.push(highlightConfig.of(s)),e}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(s,e,r,n){return(r==0||s(e.sliceDoc(r-1,r))!=CharCategory.Word)&&(n==e.doc.length||s(e.sliceDoc(n,n+1))!=CharCategory.Word)}function insideWord(s,e,r,n){return s(e.sliceDoc(r,r+1))==CharCategory.Word&&s(e.sliceDoc(n-1,n))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(highlightConfig),{state:r}=s,n=r.selection;if(n.ranges.length>1)return Decoration.none;let o=n.main,a,c=null;if(o.empty){if(!e.highlightWordAroundCursor)return Decoration.none;let h=r.wordAt(o.head);if(!h)return Decoration.none;c=r.charCategorizer(o.head),a=r.sliceDoc(h.from,h.to)}else{let h=o.to-o.from;if(h<e.minSelectionLength||h>200)return Decoration.none;if(e.wholeWords){if(a=r.sliceDoc(o.from,o.to),c=r.charCategorizer(o.head),!(insideWordBoundaries(c,r,o.from,o.to)&&insideWord(c,r,o.from,o.to)))return Decoration.none}else if(a=r.sliceDoc(o.from,o.to).trim(),!a)return Decoration.none}let l=[];for(let h of s.visibleRanges){let d=new SearchCursor(r.doc,a,h.from,h.to);for(;!d.next().done;){let{from:f,to:g}=d.value;if((!c||insideWordBoundaries(c,r,f,g))&&(o.empty&&f<=o.from&&g>=o.to?l.push(mainMatchDeco.range(f,g)):(f>=o.to||g<=o.from)&&l.push(matchDeco.range(f,g)),l.length>e.maxMatches))return Decoration.none}}return Decoration.set(l)}},{decorations:s=>s.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:s,dispatch:e})=>{let{selection:r}=s,n=EditorSelection.create(r.ranges.map(o=>s.wordAt(o.head)||EditorSelection.cursor(o.head)),r.mainIndex);return n.eq(r)?!1:(e(s.update({selection:n})),!0)};function findNextOccurrence(s,e){let{main:r,ranges:n}=s.selection,o=s.wordAt(r.head),a=o&&o.from==r.from&&o.to==r.to;for(let c=!1,l=new SearchCursor(s.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(c)return null;l=new SearchCursor(s.doc,e,0,Math.max(0,n[n.length-1].from-1)),c=!0}else{if(c&&n.some(h=>h.from==l.value.from))continue;if(a){let h=s.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const selectNextOccurrence=({state:s,dispatch:e})=>{let{ranges:r}=s.selection;if(r.some(a=>a.from===a.to))return selectWord({state:s,dispatch:e});let n=s.sliceDoc(r[0].from,r[0].to);if(s.selection.ranges.some(a=>s.sliceDoc(a.from,a.to)!=n))return!1;let o=findNextOccurrence(s,n);return o?(e(s.update({selection:s.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(s){return combineConfig(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,r=0,n){let o=e.doc?e:EditorState.create({doc:e});return n==null&&(n=o.doc.length),this.regexp?regexpCursor(this,o,r,n):stringCursor(this,o,r,n)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(s,e,r,n){return new SearchCursor(e.doc,s.unquoted,r,n,s.caseSensitive?void 0:o=>o.toLowerCase(),s.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(s,e){return(r,n,o,a)=>((a>r||a+o.length<n)&&(a=Math.max(0,r-2),o=s.sliceString(a,Math.min(s.length,n+2))),(e(charBefore(o,r-a))!=CharCategory.Word||e(charAfter(o,r-a))!=CharCategory.Word)&&(e(charAfter(o,n-a))!=CharCategory.Word||e(charBefore(o,n-a))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,r,n){let o=stringCursor(this.spec,e,n,e.doc.length).nextOverlapping();return o.done&&(o=stringCursor(this.spec,e,0,r).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,r,n){for(let o=n;;){let a=Math.max(r,o-1e4-this.spec.unquoted.length),c=stringCursor(this.spec,e,a,o),l=null;for(;!c.nextOverlapping().done;)l=c.value;if(l)return l;if(a==r)return null;o-=1e4}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let n=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=r)return null;o.push(n.value)}return o}highlight(e,r,n,o){let a=stringCursor(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}function regexpCursor(s,e,r,n){return new RegExpCursor(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},r,n)}function charBefore(s,e){return s.slice(findClusterBreak(s,e,!1),e)}function charAfter(s,e){return s.slice(e,findClusterBreak(s,e))}function regexpWordTest(s){return(e,r,n)=>!n[0].length||(s(charBefore(n.input,n.index))!=CharCategory.Word||s(charAfter(n.input,n.index))!=CharCategory.Word)&&(s(charAfter(n.input,n.index+n[0].length))!=CharCategory.Word||s(charBefore(n.input,n.index+n[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,r,n){let o=regexpCursor(this.spec,e,n,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,r).next()),o.done?null:o.value}prevMatchInRange(e,r,n){for(let o=1;;o++){let a=Math.max(r,n-o*1e4),c=regexpCursor(this.spec,e,a,n),l=null;for(;!c.next().done;)l=c.value;if(l&&(a==r||l.from>a+10))return l;if(a==r)return null}}prevMatch(e,r,n){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:r)}matchAll(e,r){let n=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!n.next().done;){if(o.length>=r)return null;o.push(n.value)}return o}highlight(e,r,n,o){let a=regexpCursor(this.spec,e,Math.max(0,r-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)o(a.value.from,a.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(s){return new SearchState(defaultQuery(s).create(),null)},update(s,e){for(let r of e.effects)r.is(setSearchQuery)?s=new SearchState(r.value.create(),s.panel):r.is(togglePanel$1)&&(s=new SearchState(s.query,r.value?createSearchPanel:null));return s},provide:s=>showPanel.from(s,e=>e.panel)});class SearchState{constructor(e,r){this.query=e,this.panel=r}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(searchState))}update(s){let e=s.state.field(searchState);(e!=s.startState.field(searchState)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Decoration.none;let{view:r}=this,n=new RangeSetBuilder;for(let o=0,a=r.visibleRanges,c=a.length;o<c;o++){let{from:l,to:h}=a[o];for(;o<c-1&&h>a[o+1].from-2*250;)h=a[++o].to;s.highlight(r.state,l,h,(d,f)=>{let g=r.state.selection.ranges.some(v=>v.from==d&&v.to==f);n.add(d,f,g?selectedMatchMark:matchMark)})}return n.finish()}},{decorations:s=>s.decorations});function searchCommand(s){return e=>{let r=e.state.field(searchState,!1);return r&&r.query.spec.valid?s(e,r):openSearchPanel(e)}}const findNext=searchCommand((s,{query:e})=>{let{to:r}=s.state.selection.main,n=e.nextMatch(s.state,r,r);if(!n)return!1;let o=EditorSelection.single(n.from,n.to),a=s.state.facet(searchConfigFacet);return s.dispatch({selection:o,effects:[announceMatch(s,n),a.scrollToMatch(o.main,s)],userEvent:"select.search"}),selectSearchInput(s),!0}),findPrevious=searchCommand((s,{query:e})=>{let{state:r}=s,{from:n}=r.selection.main,o=e.prevMatch(r,n,n);if(!o)return!1;let a=EditorSelection.single(o.from,o.to),c=s.state.facet(searchConfigFacet);return s.dispatch({selection:a,effects:[announceMatch(s,o),c.scrollToMatch(a.main,s)],userEvent:"select.search"}),selectSearchInput(s),!0}),selectMatches=searchCommand((s,{query:e})=>{let r=e.matchAll(s.state,1e3);return!r||!r.length?!1:(s.dispatch({selection:EditorSelection.create(r.map(n=>EditorSelection.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:s,dispatch:e})=>{let r=s.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:n,to:o}=r.main,a=[],c=0;for(let l=new SearchCursor(s.doc,s.sliceDoc(n,o));!l.next().done;){if(a.length>1e3)return!1;l.value.from==n&&(c=a.length),a.push(EditorSelection.range(l.value.from,l.value.to))}return e(s.update({selection:EditorSelection.create(a,c),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((s,{query:e})=>{let{state:r}=s,{from:n,to:o}=r.selection.main;if(r.readOnly)return!1;let a=e.nextMatch(r,n,n);if(!a)return!1;let c=[],l,h,d=[];if(a.from==n&&a.to==o&&(h=r.toText(e.getReplacement(a)),c.push({from:a.from,to:a.to,insert:h}),a=e.nextMatch(r,a.from,a.to),d.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(n).number)+"."))),a){let f=c.length==0||c[0].from>=a.to?0:a.to-a.from-h.length;l=EditorSelection.single(a.from-f,a.to-f),d.push(announceMatch(s,a)),d.push(r.facet(searchConfigFacet).scrollToMatch(l.main,s))}return s.dispatch({changes:c,selection:l,effects:d,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((s,{query:e})=>{if(s.state.readOnly)return!1;let r=e.matchAll(s.state,1e9).map(o=>{let{from:a,to:c}=o;return{from:a,to:c,insert:e.getReplacement(o)}});if(!r.length)return!1;let n=s.state.phrase("replaced $ matches",r.length)+".";return s.dispatch({changes:r,effects:EditorView.announce.of(n),userEvent:"input.replace.all"}),!0});function createSearchPanel(s){return s.state.facet(searchConfigFacet).createPanel(s)}function defaultQuery(s,e){var r,n,o,a,c;let l=s.selection.main,h=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!h)return e;let d=s.facet(searchConfigFacet);return new SearchQuery({search:((r=e?.literal)!==null&&r!==void 0?r:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:d.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:d.literal,regexp:(a=e?.regexp)!==null&&a!==void 0?a:d.regexp,wholeWord:(c=e?.wholeWord)!==null&&c!==void 0?c:d.wholeWord})}function getSearchInput(s){let e=getPanel(s,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(s){let e=getSearchInput(s);e&&e==s.root.activeElement&&e.select()}const openSearchPanel=s=>{let e=s.state.field(searchState,!1);if(e&&e.panel){let r=getSearchInput(s);if(r&&r!=s.root.activeElement){let n=defaultQuery(s.state,e.query.spec);n.valid&&s.dispatch({effects:setSearchQuery.of(n)}),r.focus(),r.select()}}else s.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(s.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=s=>{let e=s.state.field(searchState,!1);if(!e||!e.panel)return!1;let r=getPanel(s,createSearchPanel);return r&&r.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(e){this.view=e;let r=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:r.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:r.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function n(o,a,c){return crelt("button",{class:"cm-button",name:o,onclick:a,type:"button"},c)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,n("next",()=>findNext(e),[phrase(e,"next")]),n("prev",()=>findPrevious(e),[phrase(e,"previous")]),n("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,n("replace",()=>replaceNext(e),[phrase(e,"replace")]),n("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let r of e.transactions)for(let n of r.effects)n.is(setSearchQuery)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(s,e){return s.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(s,{from:e,to:r}){let n=s.state.doc.lineAt(e),o=s.state.doc.lineAt(r).to,a=Math.max(n.from,e-AnnounceMargin),c=Math.min(o,r+AnnounceMargin),l=s.state.sliceDoc(a,c);if(a!=n.from){for(let h=0;h<AnnounceMargin;h++)if(!Break.test(l[h+1])&&Break.test(l[h])){l=l.slice(h);break}}if(c!=o){for(let h=l.length-1;h>l.length-AnnounceMargin;h--)if(!Break.test(l[h-1])&&Break.test(l[h])){l=l.slice(0,h);break}}return EditorView.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${n.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(e,r,n){this.from=e,this.to=r,this.diagnostic=n}}class LintState{constructor(e,r,n){this.diagnostics=e,this.panel=r,this.selected=n}static init(e,r,n){let o=e,a=n.facet(lintConfig).markerFilter;a&&(o=a(o));let c=Decoration.set(o.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?Decoration.widget({widget:new DiagnosticWidget(l),diagnostic:l}).range(l.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new LintState(c,r,findDiagnostic(c))}}function findDiagnostic(s,e=null,r=0){let n=null;return s.between(r,1e9,(o,a,{spec:c})=>{if(!(e&&c.diagnostic!=e))return n=new SelectedDiagnostic(o,a,c.diagnostic),!1}),n}function hideTooltip(s,e){let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(n=>n.is(setDiagnosticsEffect))||s.changes.touchesRange(r.from,r.to))}function maybeEnableLint(s,e){return s.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(s,e){if(e.docChanged){let r=s.diagnostics.map(e.changes),n=null;if(s.selected){let o=e.changes.mapPos(s.selected.from,1);n=findDiagnostic(r,s.selected.diagnostic,o)||findDiagnostic(r,null,o)}s=new LintState(r,s.panel,n)}for(let r of e.effects)r.is(setDiagnosticsEffect)?s=LintState.init(r.value,s.panel,e.state):r.is(togglePanel)?s=new LintState(s.diagnostics,r.value?LintPanel.open:null,s.selected):r.is(movePanelSelection)&&(s=new LintState(s.diagnostics,s.panel,r.value));return s},provide:s=>[showPanel.from(s,e=>e.panel),EditorView.decorations.from(s,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(s,e,r){let{diagnostics:n}=s.state.field(lintState),o=[],a=2e8,c=0;n.between(e-(r<0?1:0),e+(r>0?1:0),(h,d,{spec:f})=>{e>=h&&e<=d&&(h==d||(e>h||r>0)&&(e<d||r<0))&&(o.push(f.diagnostic),a=Math.min(h,a),c=Math.max(d,c))});let l=s.state.facet(lintConfig).tooltipFilter;return l&&(o=l(o)),o.length?{pos:a,end:c,above:s.state.doc.lineAt(a).to<c,create(){return{dom:diagnosticsTooltip(s,o)}}}:null}function diagnosticsTooltip(s,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(r=>renderDiagnostic(s,r,!1)))}const openLintPanel=s=>{let e=s.state.field(lintState,!1);(!e||!e.panel)&&s.dispatch({effects:maybeEnableLint(s.state,[togglePanel.of(!0)])});let r=getPanel(s,LintPanel.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=s=>{let e=s.state.field(lintState,!1);return!e||!e.panel?!1:(s.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=s=>{let e=s.state.field(lintState,!1);if(!e)return!1;let r=s.state.selection.main,n=e.diagnostics.iter(r.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==r.from&&n.to==r.to)?!1:(s.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},combineConfig(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,r)=>e?r?n=>e(n)||r(n):e:r}))}});function assignKeys(s){let e=[];if(s)e:for(let{name:r}of s){for(let n=0;n<r.length;n++){let o=r[n];if(/[a-zA-Z]/.test(o)&&!e.some(a=>a.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(s,e,r){var n;let o=r?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,c)=>{let l=!1,h=v=>{if(v.preventDefault(),l)return;l=!0;let S=findDiagnostic(s.state.field(lintState).diagnostics,e);S&&a.apply(s,S.from,S.to)},{name:d}=a,f=o[c]?d.indexOf(o[c]):-1,g=f<0?d:[d.slice(0,f),crelt("u",d.slice(f,f+1)),d.slice(f+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${d}${f<0?"":` (access key "${o[c]})"`}.`},g)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let r=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],c=assignKeys(a.actions);for(let l=0;l<c.length;l++)if(c[l].toUpperCase().charCodeAt(0)==o.keyCode){let h=findDiagnostic(this.view.state.field(lintState).diagnostics,a);h&&a.actions[l].apply(e,h.from,h.to)}}else return;o.preventDefault()},n=o=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(o.target)&&this.moveSelection(a)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:n}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(lintState),n=0,o=!1,a=null;for(e.between(0,this.view.state.doc.length,(c,l,{spec:h})=>{let d=-1,f;for(let g=n;g<this.items.length;g++)if(this.items[g].diagnostic==h.diagnostic){d=g;break}d<0?(f=new PanelItem(this.view,h.diagnostic),this.items.splice(n,0,f),o=!0):(f=this.items[d],d>n&&(this.items.splice(n,d-n),o=!0)),r&&f.diagnostic==r.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),a=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:l})=>{let h=l.height/this.list.offsetHeight;c.top<l.top?this.list.scrollTop-=(l.top-c.top)/h:c.bottom>l.bottom&&(this.list.scrollTop+=(c.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function r(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)r();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(lintState),n=findDiagnostic(r.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:movePanelSelection.of(n)})}static open(e){return new LintPanel(e)}}function svg(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function underline(s){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],s=>{let{selected:e,panel:r}=s.field(lintState);return!e||!r||e.from==e.to?Decoration.none:Decoration.set([activeMark.range(e.from,e.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])],createTheme=({variant:s,settings:e,styles:r})=>{const n=EditorView.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:s==="dark"}),o=HighlightStyle.define(r);return[n,syntaxHighlighting(o)]};createTheme({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:tags.comment,color:"#404080"},{tag:[tags.string,tags.regexp],color:"#999999"},{tag:tags.number,color:"#7090B0"},{tag:[tags.bool,tags.null],color:"#8080A0"},{tag:[tags.punctuation,tags.derefOperator],color:"#805080"},{tag:tags.keyword,color:"#60B0FF"},{tag:tags.definitionKeyword,color:"#B0FFF0"},{tag:tags.moduleKeyword,color:"#60B0FF"},{tag:tags.operator,color:"#A0A0FF"},{tag:[tags.variableName,tags.self],color:"#008080"},{tag:tags.operatorKeyword,color:"#A0A0FF"},{tag:tags.controlKeyword,color:"#80A0FF"},{tag:tags.className,color:"#70E080"},{tag:[tags.function(tags.propertyName),tags.propertyName],color:"#50A0A0"},{tag:tags.tagName,color:"#009090"},{tag:tags.modifier,color:"#B0FFF0"},{tag:[tags.squareBracket,tags.attributeName],color:"#D0D0FF"}]});createTheme({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:tags.comment,color:"#787b8099"},{tag:tags.string,color:"#86b300"},{tag:tags.regexp,color:"#4cbf99"},{tag:[tags.number,tags.bool,tags.null],color:"#ffaa33"},{tag:tags.variableName,color:"#5c6166"},{tag:[tags.definitionKeyword,tags.modifier],color:"#fa8d3e"},{tag:[tags.keyword,tags.special(tags.brace)],color:"#fa8d3e"},{tag:tags.operator,color:"#ed9366"},{tag:tags.separator,color:"#5c6166b3"},{tag:tags.punctuation,color:"#5c6166"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#f2ae49"},{tag:[tags.className,tags.definition(tags.typeName)],color:"#22a4e6"},{tag:[tags.tagName,tags.typeName,tags.self,tags.labelName],color:"#55b4d4"},{tag:tags.angleBracket,color:"#55b4d480"},{tag:tags.attributeName,color:"#f2ae49"}]});createTheme({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:tags.comment,color:"#6E6E6E"},{tag:[tags.string,tags.regexp,tags.special(tags.brace)],color:"#5C81B3"},{tag:tags.number,color:"#C1E1B8"},{tag:tags.bool,color:"#53667D"},{tag:[tags.definitionKeyword,tags.modifier,tags.function(tags.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[tags.keyword,tags.moduleKeyword,tags.operatorKeyword,tags.operator],color:"#697A8E",fontWeight:"bold"},{tag:[tags.variableName,tags.attributeName],color:"#708E67"},{tag:[tags.function(tags.variableName),tags.definition(tags.propertyName),tags.derefOperator],color:"#fff"},{tag:tags.tagName,color:"#A3D295"}]});createTheme({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:tags.comment,color:"#666666"},{tag:[tags.string,tags.special(tags.brace)],color:"#54BE0D"},{tag:tags.regexp,color:"#E9C062"},{tag:tags.number,color:"#CF6A4C"},{tag:[tags.keyword,tags.operator],color:"#5EA6EA"},{tag:tags.variableName,color:"#7587A6"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F9EE98"},{tag:[tags.propertyName,tags.function(tags.variableName)],color:"#937121"},{tag:[tags.typeName,tags.angleBracket,tags.tagName],color:"#9B859D"}]});const birdsOfParadise=createTheme({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:tags.comment,color:"#6B4E32"},{tag:[tags.keyword,tags.operator,tags.derefOperator],color:"#EF5D32"},{tag:tags.className,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.typeName,tags.propertyName,tags.function(tags.variableName),tags.definition(tags.variableName)],color:"#EFAC32"},{tag:tags.definition(tags.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:tags.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[tags.number,tags.bool],color:"#6C99BB"},{tag:[tags.variableName,tags.self],color:"#7DAF9C"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#D9D762"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#EFCB43"}]});createTheme({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:tags.comment,color:"#404040"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#00D8FF"},{tag:tags.number,color:"#E62286"},{tag:[tags.variableName,tags.attributeName,tags.self],color:"#E62286",fontWeight:"bold"},{tag:tags.function(tags.variableName),color:"#fff",fontWeight:"bold"}]});createTheme({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:tags.comment,color:"#BCC8BA"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#5D90CD"},{tag:[tags.number,tags.bool,tags.null],color:"#46A609"},{tag:tags.keyword,color:"#AF956F"},{tag:[tags.definitionKeyword,tags.modifier],color:"#C52727"},{tag:[tags.angleBracket,tags.tagName,tags.attributeName],color:"#606060"},{tag:tags.self,color:"#000"}]});createTheme({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:tags.comment,color:"#0088FF"},{tag:tags.string,color:"#3AD900"},{tag:tags.regexp,color:"#80FFC2"},{tag:[tags.number,tags.bool,tags.null],color:"#FF628C"},{tag:[tags.definitionKeyword,tags.modifier],color:"#FFEE80"},{tag:tags.variableName,color:"#CCCCCC"},{tag:tags.self,color:"#FF80E1"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.definition(tags.typeName),tags.labelName],color:"#FFDD00"},{tag:[tags.keyword,tags.operator],color:"#FF9D00"},{tag:[tags.propertyName,tags.typeName],color:"#80FFBB"},{tag:tags.special(tags.brace),color:"#EDEF7D"},{tag:tags.attributeName,color:"#9EFFFF"},{tag:tags.derefOperator,color:"#fff"}]});createTheme({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:tags.comment,color:"#AEAEAE"},{tag:[tags.string,tags.special(tags.brace),tags.regexp],color:"#8DFF8E"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.function(tags.definition(tags.variableName)),tags.definition(tags.typeName)],color:"#A3EBFF"},{tag:[tags.number,tags.bool,tags.null],color:"#62E9BD"},{tag:[tags.keyword,tags.operator],color:"#2BF1DC"},{tag:[tags.definitionKeyword,tags.modifier],color:"#F8FBB1"},{tag:[tags.variableName,tags.self],color:"#B683CA"},{tag:[tags.angleBracket,tags.tagName,tags.typeName,tags.propertyName],color:"#60A4F1"},{tag:tags.derefOperator,color:"#E0E0E0"},{tag:tags.attributeName,color:"#7BACCA"}]});createTheme({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:tags.comment,color:"#6272a4"},{tag:[tags.string,tags.special(tags.brace)],color:"#f1fa8c"},{tag:[tags.number,tags.self,tags.bool,tags.null],color:"#bd93f9"},{tag:[tags.keyword,tags.operator],color:"#ff79c6"},{tag:[tags.definitionKeyword,tags.typeName],color:"#8be9fd"},{tag:tags.definition(tags.typeName),color:"#f8f8f2"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.attributeName],color:"#50fa7b"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:tags.comment,color:"#AAAAAA"},{tag:[tags.keyword,tags.operator,tags.typeName,tags.tagName,tags.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[tags.attributeName,tags.definition(tags.propertyName)],color:"#4F9FD0"},{tag:[tags.className,tags.string,tags.special(tags.brace)],color:"#CF4F5F"},{tag:tags.number,color:"#CF4F5F",fontWeight:"bold"},{tag:tags.variableName,fontWeight:"bold"}]});createTheme({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags.null,tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"}]});createTheme({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:tags.comment,color:"#9893a5"},{tag:[tags.bool,tags.null],color:"#286983"},{tag:tags.number,color:"#d7827e"},{tag:tags.className,color:"#d7827e"},{tag:[tags.angleBracket,tags.tagName,tags.typeName],color:"#56949f"},{tag:tags.attributeName,color:"#907aa9"},{tag:tags.punctuation,color:"#797593"},{tag:[tags.keyword,tags.modifier],color:"#286983"},{tag:[tags.string,tags.regexp],color:"#ea9d34"},{tag:tags.variableName,color:"#d7827e"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:tags.comment,color:"#CFCFCF"},{tag:[tags.number,tags.bool,tags.null],color:"#E66C29"},{tag:[tags.className,tags.definition(tags.propertyName),tags.function(tags.variableName),tags.labelName,tags.definition(tags.typeName)],color:"#2EB43B"},{tag:tags.keyword,color:"#D8B229"},{tag:tags.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#925A47"},{tag:tags.string,color:"#704D3D"},{tag:tags.typeName,color:"#2F8996"},{tag:[tags.variableName,tags.propertyName],color:"#77ACB0"},{tag:tags.self,color:"#77ACB0",fontWeight:"bold"},{tag:tags.regexp,color:"#E3965E"},{tag:[tags.tagName,tags.angleBracket],color:"#BAA827"},{tag:tags.attributeName,color:"#B06520"},{tag:tags.derefOperator,color:"#000"}]});createTheme({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:tags.comment,color:"#93A1A1"},{tag:tags.string,color:"#2AA198"},{tag:tags.regexp,color:"#D30102"},{tag:tags.number,color:"#D33682"},{tag:tags.variableName,color:"#268BD2"},{tag:[tags.keyword,tags.operator,tags.punctuation],color:"#859900"},{tag:[tags.definitionKeyword,tags.modifier],color:"#073642",fontWeight:"bold"},{tag:[tags.className,tags.self,tags.definition(tags.propertyName)],color:"#268BD2"},{tag:tags.function(tags.variableName),color:"#268BD2"},{tag:[tags.bool,tags.null],color:"#B58900"},{tag:tags.tagName,color:"#268BD2",fontWeight:"bold"},{tag:tags.angleBracket,color:"#93A1A1"},{tag:tags.attributeName,color:"#93A1A1"},{tag:tags.typeName,color:"#859900"}]});createTheme({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:tags.comment,color:"#8E908C"},{tag:[tags.variableName,tags.self,tags.propertyName,tags.attributeName,tags.regexp],color:"#C82829"},{tag:[tags.number,tags.bool,tags.null],color:"#F5871F"},{tag:[tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#C99E00"},{tag:[tags.string,tags.special(tags.brace)],color:"#718C00"},{tag:tags.operator,color:"#3E999F"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#4271AE"},{tag:tags.keyword,color:"#8959A8"},{tag:tags.derefOperator,color:"#4D4D4C"}]});class Editor extends EditorView{constructor(e,r,n){const o=new Compartment;let a=[indentUnit.of("    "),basicSetup,o.of(python()),keymap.of([...defaultKeymap,indentWithTab]),Prec.highest(keymap.of([{key:"Ctrl-Enter",run:()=>(n.runMPC(this.getCode(),r.value,!1),!0),preventDefault:!0},{key:"Shift-Enter",run:()=>(n.runMPC(this.getCode(),r.value,!0),!0),preventDefault:!0},{key:"Ctrl-s",run:()=>(localStorage.customCode=this.getCode(),r.selectedIndex!=0&&(r.selectedIndex=0,r.dispatchEvent(new Event("change"))),!0),preventDefault:!0},{key:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Ctrl-d",run:copyLineDown,preventDefault:!0},{key:"Ctrl-Shift-ArrowUp",run:moveLineUp,preventDefault:!0},{key:"Ctrl-Shift-ArrowDown",run:moveLineDown,preventDefault:!0},{key:"Ctrl-y",run:deleteLine,preventDefault:!0}]))];a.push(birdsOfParadise),super({extensions:a,parent:document.querySelector(e)})}getCode(){return this.state.doc.toString()}updateCode(e){this.dispatch({changes:{from:0,to:this.state.doc.length,insert:e},selection:{anchor:0,head:0},scrollIntoView:!0}),this.focus()}}async function fetchSelectedDemo(s){var e;return s.selectedIndex==0?e=localStorage.customCode||"":e=await(await fetch(s.value)).text(),e}function ensureStorageSchema(s){console.log("Storage schema generation:",localStorage.gen),localStorage.gen||=0,localStorage.gen<s&&(console.log(`Clearing schema, latest generation: ${s}`),localStorage.clear(),sessionStorage.clear(),localStorage.gen=s)}const __isTabDuplicate=()=>{addEventListener("beforeunload",function(){delete sessionStorage.__lock});let s=!1;return sessionStorage.__lock&&(s=!0),sessionStorage.__lock=1,s},isTabDuplicate=__isTabDuplicate();function loadPeerID(){localStorage.tabCount||=0;let s=parseInt(localStorage.tabCount)+1;return localStorage.tabCount=s,addEventListener("beforeunload",function(){setTabState("lock","");let e=parseInt(localStorage.tabCount);e>0&&(localStorage.tabCount=e-1)}),isTabDuplicate&&console.warn("tab is duplicate"),(!sessionStorage.tabID||isTabDuplicate||getTabState("lock",sessionStorage.tabID)!="")&&(sessionStorage.tabID=selectTabID(),sessionStorage.myPeerID=getTabState("myPeerID")),setTabState("lock","locked"),console.log("tab id: "+sessionStorage.tabID),sessionStorage.myPeerID}function selectTabID(){for(let s=1;s<=1e3;s++)if(getTabState("lock",s)=="")return s}function getTabState(s,e=sessionStorage.tabID){return localStorage[`tabState:${e}:`+s]||""}function setTabState(s,e,r=sessionStorage.tabID){sessionStorage[s]=e,localStorage[`tabState:${r}:`+s]=e}var Html5QrcodeSupportedFormats;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Html5QrcodeSupportedFormats||(Html5QrcodeSupportedFormats={}));var html5QrcodeSupportedFormatsTextMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"QR_CODE"],[Html5QrcodeSupportedFormats.AZTEC,"AZTEC"],[Html5QrcodeSupportedFormats.CODABAR,"CODABAR"],[Html5QrcodeSupportedFormats.CODE_39,"CODE_39"],[Html5QrcodeSupportedFormats.CODE_93,"CODE_93"],[Html5QrcodeSupportedFormats.CODE_128,"CODE_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"DATA_MATRIX"],[Html5QrcodeSupportedFormats.MAXICODE,"MAXICODE"],[Html5QrcodeSupportedFormats.ITF,"ITF"],[Html5QrcodeSupportedFormats.EAN_13,"EAN_13"],[Html5QrcodeSupportedFormats.EAN_8,"EAN_8"],[Html5QrcodeSupportedFormats.PDF_417,"PDF_417"],[Html5QrcodeSupportedFormats.RSS_14,"RSS_14"],[Html5QrcodeSupportedFormats.RSS_EXPANDED,"RSS_EXPANDED"],[Html5QrcodeSupportedFormats.UPC_A,"UPC_A"],[Html5QrcodeSupportedFormats.UPC_E,"UPC_E"],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DecodedTextType;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(DecodedTextType||(DecodedTextType={}));function isValidHtml5QrcodeSupportedFormats(s){return Object.values(Html5QrcodeSupportedFormats).includes(s)}var Html5QrcodeScanType;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Html5QrcodeScanType||(Html5QrcodeScanType={}));var Html5QrcodeConstants=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[Html5QrcodeScanType.SCAN_TYPE_CAMERA,Html5QrcodeScanType.SCAN_TYPE_FILE],s}(),QrcodeResultFormat=function(){function s(e,r){this.format=e,this.formatName=r}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!html5QrcodeSupportedFormatsTextMap.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,html5QrcodeSupportedFormatsTextMap.get(e))},s}(),Html5QrcodeResultFactory=function(){function s(){}return s.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s}(),Html5QrcodeErrorTypes;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Html5QrcodeErrorTypes||(Html5QrcodeErrorTypes={}));var Html5QrcodeErrorFactory=function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:Html5QrcodeErrorTypes.UNKWOWN_ERROR}},s}(),BaseLoggger=function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s}();function isNullOrUndefined(s){return typeof s>"u"||s===null}var Html5QrcodeStrings=function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),VideoConstraintsUtil=function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(o),c=Object.keys(e),l=0,h=c;l<h.length;l++){var d=h[l];if(a.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},s}(),zxingJs_umd$1={exports:{}};(function(s,e){(function(r,n){n(e)})(commonjsGlobal,function(r){function n(ae){return ae==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,u){ae.__proto__=u}||function(ae,u){for(var p in u)u.hasOwnProperty(p)&&(ae[p]=u[p])};function a(ae,u){o(ae,u);function p(){this.constructor=ae}ae.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}function c(ae,u){var p=Object.setPrototypeOf;p?p(ae,u):ae.__proto__=u}function l(ae,u){u===void 0&&(u=ae.constructor);var p=Error.captureStackTrace;p&&p(ae,u)}var h=function(ae){a(u,ae);function u(p){var _=this.constructor,E=ae.call(this,p)||this;return Object.defineProperty(E,"name",{value:_.name,enumerable:!1}),c(E,_.prototype),l(E),E}return u}(Error);class d extends h{constructor(u=void 0){super(u),this.message=u}getKind(){return this.constructor.kind}}d.kind="Exception";class f extends d{}f.kind="ArgumentException";class g extends d{}g.kind="IllegalArgumentException";class v{constructor(u){if(this.binarizer=u,u===null)throw new g("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(u,p){return this.binarizer.getBlackRow(u,p)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(u,p,_,E){const T=this.binarizer.getLuminanceSource().crop(u,p,_,E);return new v(this.binarizer.createBinarizer(T))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(u))}rotateCounterClockwise45(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(u))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class S extends d{static getChecksumInstance(){return new S}}S.kind="ChecksumException";class A{constructor(u){this.source=u}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(u,p,_,E,T){for(;T--;)_[E++]=u[p++]}static currentTimeMillis(){return Date.now()}}class m extends d{}m.kind="IndexOutOfBoundsException";class b extends m{constructor(u=void 0,p=void 0){super(p),this.index=u,this.message=p}}b.kind="ArrayIndexOutOfBoundsException";class x{static fill(u,p){for(let _=0,E=u.length;_<E;_++)u[_]=p}static fillWithin(u,p,_,E){x.rangeCheck(u.length,p,_);for(let T=p;T<_;T++)u[T]=E}static rangeCheck(u,p,_){if(p>_)throw new g("fromIndex("+p+") > toIndex("+_+")");if(p<0)throw new b(p);if(_>u)throw new b(_)}static asList(...u){return u}static create(u,p,_){return Array.from({length:u}).map(T=>Array.from({length:p}).fill(_))}static createInt32Array(u,p,_){return Array.from({length:u}).map(T=>Int32Array.from({length:p}).fill(_))}static equals(u,p){if(!u||!p||!u.length||!p.length||u.length!==p.length)return!1;for(let _=0,E=u.length;_<E;_++)if(u[_]!==p[_])return!1;return!0}static hashCode(u){if(u===null)return 0;let p=1;for(const _ of u)p=31*p+_;return p}static fillUint8Array(u,p){for(let _=0;_!==u.length;_++)u[_]=p}static copyOf(u,p){return u.slice(0,p)}static copyOfUint8Array(u,p){if(u.length<=p){const _=new Uint8Array(p);return _.set(u),_}return u.slice(0,p)}static copyOfRange(u,p,_){const E=_-p,T=new Int32Array(E);return w.arraycopy(u,p,T,0,E),T}static binarySearch(u,p,_){_===void 0&&(_=x.numberComparator);let E=0,T=u.length-1;for(;E<=T;){const R=T+E>>1,N=_(p,u[R]);if(N>0)E=R+1;else if(N<0)T=R-1;else return R}return-E-1}static numberComparator(u,p){return u-p}}class y{static numberOfTrailingZeros(u){let p;if(u===0)return 32;let _=31;return p=u<<16,p!==0&&(_-=16,u=p),p=u<<8,p!==0&&(_-=8,u=p),p=u<<4,p!==0&&(_-=4,u=p),p=u<<2,p!==0&&(_-=2,u=p),_-(u<<1>>>31)}static numberOfLeadingZeros(u){if(u===0)return 32;let p=1;return u>>>16||(p+=16,u<<=16),u>>>24||(p+=8,u<<=8),u>>>28||(p+=4,u<<=4),u>>>30||(p+=2,u<<=2),p-=u>>>31,p}static toHexString(u){return u.toString(16)}static toBinaryString(u){return String(parseInt(String(u),2))}static bitCount(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),u=u+(u>>>4)&252645135,u=u+(u>>>8),u=u+(u>>>16),u&63}static truncDivision(u,p){return Math.trunc(u/p)}static parseInt(u,p=void 0){return parseInt(u,p)}}y.MIN_VALUE_32_BITS=-2147483648,y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class O{constructor(u,p){u===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=u,p==null?this.bits=O.makeArray(u):this.bits=p)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(u){if(u>this.bits.length*32){const p=O.makeArray(u);w.arraycopy(this.bits,0,p,0,this.bits.length),this.bits=p}}get(u){return(this.bits[Math.floor(u/32)]&1<<(u&31))!==0}set(u){this.bits[Math.floor(u/32)]|=1<<(u&31)}flip(u){this.bits[Math.floor(u/32)]^=1<<(u&31)}getNextSet(u){const p=this.size;if(u>=p)return p;const _=this.bits;let E=Math.floor(u/32),T=_[E];T&=~((1<<(u&31))-1);const R=_.length;for(;T===0;){if(++E===R)return p;T=_[E]}const N=E*32+y.numberOfTrailingZeros(T);return N>p?p:N}getNextUnset(u){const p=this.size;if(u>=p)return p;const _=this.bits;let E=Math.floor(u/32),T=~_[E];T&=~((1<<(u&31))-1);const R=_.length;for(;T===0;){if(++E===R)return p;T=~_[E]}const N=E*32+y.numberOfTrailingZeros(T);return N>p?p:N}setBulk(u,p){this.bits[Math.floor(u/32)]=p}setRange(u,p){if(p<u||u<0||p>this.size)throw new g;if(p===u)return;p--;const _=Math.floor(u/32),E=Math.floor(p/32),T=this.bits;for(let R=_;R<=E;R++){const N=R>_?0:u&31,Z=(2<<(R<E?31:p&31))-(1<<N);T[R]|=Z}}clear(){const u=this.bits.length,p=this.bits;for(let _=0;_<u;_++)p[_]=0}isRange(u,p,_){if(p<u||u<0||p>this.size)throw new g;if(p===u)return!0;p--;const E=Math.floor(u/32),T=Math.floor(p/32),R=this.bits;for(let N=E;N<=T;N++){const z=N>E?0:u&31,oe=(2<<(N<T?31:p&31))-(1<<z)&4294967295;if((R[N]&oe)!==(_?oe:0))return!1}return!0}appendBit(u){this.ensureCapacity(this.size+1),u&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(u,p){if(p<0||p>32)throw new g("Num bits must be between 0 and 32");this.ensureCapacity(this.size+p);for(let _=p;_>0;_--)this.appendBit((u>>_-1&1)===1)}appendBitArray(u){const p=u.size;this.ensureCapacity(this.size+p);for(let _=0;_<p;_++)this.appendBit(u.get(_))}xor(u){if(this.size!==u.size)throw new g("Sizes don't match");const p=this.bits;for(let _=0,E=p.length;_<E;_++)p[_]^=u.bits[_]}toBytes(u,p,_,E){for(let T=0;T<E;T++){let R=0;for(let N=0;N<8;N++)this.get(u)&&(R|=1<<7-N),u++;p[_+T]=R}}getBitArray(){return this.bits}reverse(){const u=new Int32Array(this.bits.length),p=Math.floor((this.size-1)/32),_=p+1,E=this.bits;for(let T=0;T<_;T++){let R=E[T];R=R>>1&1431655765|(R&1431655765)<<1,R=R>>2&858993459|(R&858993459)<<2,R=R>>4&252645135|(R&252645135)<<4,R=R>>8&16711935|(R&16711935)<<8,R=R>>16&65535|(R&65535)<<16,u[p-T]=R}if(this.size!==_*32){const T=_*32-this.size;let R=u[0]>>>T;for(let N=1;N<_;N++){const z=u[N];R|=z<<32-T,u[N-1]=R,R=z>>>T}u[_-1]=R}this.bits=u}static makeArray(u){return new Int32Array(Math.floor((u+31)/32))}equals(u){if(!(u instanceof O))return!1;const p=u;return this.size===p.size&&x.equals(this.bits,p.bits)}hashCode(){return 31*this.size+x.hashCode(this.bits)}toString(){let u="";for(let p=0,_=this.size;p<_;p++)p&7||(u+=" "),u+=this.get(p)?"X":".";return u}clone(){return new O(this.size,this.bits.slice())}}var k;(function(ae){ae[ae.OTHER=0]="OTHER",ae[ae.PURE_BARCODE=1]="PURE_BARCODE",ae[ae.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ae[ae.TRY_HARDER=3]="TRY_HARDER",ae[ae.CHARACTER_SET=4]="CHARACTER_SET",ae[ae.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ae[ae.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ae[ae.ASSUME_GS1=7]="ASSUME_GS1",ae[ae.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ae[ae.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ae[ae.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(k||(k={}));var P=k;class L extends d{static getFormatInstance(){return new L}}L.kind="FormatException";var M;(function(ae){ae[ae.Cp437=0]="Cp437",ae[ae.ISO8859_1=1]="ISO8859_1",ae[ae.ISO8859_2=2]="ISO8859_2",ae[ae.ISO8859_3=3]="ISO8859_3",ae[ae.ISO8859_4=4]="ISO8859_4",ae[ae.ISO8859_5=5]="ISO8859_5",ae[ae.ISO8859_6=6]="ISO8859_6",ae[ae.ISO8859_7=7]="ISO8859_7",ae[ae.ISO8859_8=8]="ISO8859_8",ae[ae.ISO8859_9=9]="ISO8859_9",ae[ae.ISO8859_10=10]="ISO8859_10",ae[ae.ISO8859_11=11]="ISO8859_11",ae[ae.ISO8859_13=12]="ISO8859_13",ae[ae.ISO8859_14=13]="ISO8859_14",ae[ae.ISO8859_15=14]="ISO8859_15",ae[ae.ISO8859_16=15]="ISO8859_16",ae[ae.SJIS=16]="SJIS",ae[ae.Cp1250=17]="Cp1250",ae[ae.Cp1251=18]="Cp1251",ae[ae.Cp1252=19]="Cp1252",ae[ae.Cp1256=20]="Cp1256",ae[ae.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ae[ae.UTF8=22]="UTF8",ae[ae.ASCII=23]="ASCII",ae[ae.Big5=24]="Big5",ae[ae.GB18030=25]="GB18030",ae[ae.EUC_KR=26]="EUC_KR"})(M||(M={}));class B{constructor(u,p,_,...E){this.valueIdentifier=u,this.name=_,typeof p=="number"?this.values=Int32Array.from([p]):this.values=p,this.otherEncodingNames=E,B.VALUE_IDENTIFIER_TO_ECI.set(u,this),B.NAME_TO_ECI.set(_,this);const T=this.values;for(let R=0,N=T.length;R!==N;R++){const z=T[R];B.VALUES_TO_ECI.set(z,this)}for(const R of E)B.NAME_TO_ECI.set(R,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(u){if(u<0||u>=900)throw new L("incorect value");const p=B.VALUES_TO_ECI.get(u);if(p===void 0)throw new L("incorect value");return p}static getCharacterSetECIByName(u){const p=B.NAME_TO_ECI.get(u);if(p===void 0)throw new L("incorect value");return p}equals(u){if(!(u instanceof B))return!1;const p=u;return this.getName()===p.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(M.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(M.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(M.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(M.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(M.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(M.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(M.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(M.Big5,28,"Big5"),B.GB18030=new B(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(M.EUC_KR,30,"EUC_KR","EUC-KR");class j extends d{}j.kind="UnsupportedOperationException";class F{static decode(u,p){const _=this.encodingName(p);return this.customDecoder?this.customDecoder(u,_):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(_)?this.decodeFallback(u,_):new TextDecoder(_).decode(u)}static shouldDecodeOnFallback(u){return!F.isBrowser()&&u==="ISO-8859-1"}static encode(u,p){const _=this.encodingName(p);return this.customEncoder?this.customEncoder(u,_):typeof TextEncoder>"u"?this.encodeFallback(u):new TextEncoder().encode(u)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(u){return typeof u=="string"?u:u.getName()}static encodingCharacterSet(u){return u instanceof B?u:B.getCharacterSetECIByName(u)}static decodeFallback(u,p){const _=this.encodingCharacterSet(p);if(F.isDecodeFallbackSupported(_)){let E="";for(let T=0,R=u.length;T<R;T++){let N=u[T].toString(16);N.length<2&&(N="0"+N),E+="%"+N}return decodeURIComponent(E)}if(_.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(u.buffer));throw new j(`Encoding ${this.encodingName(p)} not supported by fallback.`)}static isDecodeFallbackSupported(u){return u.equals(B.UTF8)||u.equals(B.ISO8859_1)||u.equals(B.ASCII)}static encodeFallback(u){const _=btoa(unescape(encodeURIComponent(u))).split(""),E=[];for(let T=0;T<_.length;T++)E.push(_[T].charCodeAt(0));return new Uint8Array(E)}}class U{static castAsNonUtf8Char(u,p=null){const _=p?p.getName():this.ISO88591;return F.decode(new Uint8Array([u]),_)}static guessEncoding(u,p){if(p!=null&&p.get(P.CHARACTER_SET)!==void 0)return p.get(P.CHARACTER_SET).toString();const _=u.length;let E=!0,T=!0,R=!0,N=0,z=0,Z=0,oe=0,ue=0,ge=0,Ae=0,$e=0,We=0,Je=0,st=0;const kt=u.length>3&&u[0]===239&&u[1]===187&&u[2]===191;for(let Mt=0;Mt<_&&(E||T||R);Mt++){const Rt=u[Mt]&255;R&&(N>0?Rt&128?N--:R=!1:Rt&128&&(Rt&64?(N++,Rt&32?(N++,Rt&16?(N++,Rt&8?R=!1:oe++):Z++):z++):R=!1)),E&&(Rt>127&&Rt<160?E=!1:Rt>159&&(Rt<192||Rt===215||Rt===247)&&st++),T&&(ue>0?Rt<64||Rt===127||Rt>252?T=!1:ue--:Rt===128||Rt===160||Rt>239?T=!1:Rt>160&&Rt<224?(ge++,$e=0,Ae++,Ae>We&&(We=Ae)):Rt>127?(ue++,Ae=0,$e++,$e>Je&&(Je=$e)):(Ae=0,$e=0))}return R&&N>0&&(R=!1),T&&ue>0&&(T=!1),R&&(kt||z+Z+oe>0)?U.UTF8:T&&(U.ASSUME_SHIFT_JIS||We>=3||Je>=3)?U.SHIFT_JIS:E&&T?We===2&&ge===2||st*10>=_?U.SHIFT_JIS:U.ISO88591:E?U.ISO88591:T?U.SHIFT_JIS:R?U.UTF8:U.PLATFORM_DEFAULT_ENCODING}static format(u,...p){let _=-1;function E(R,N,z,Z,oe,ue){if(R==="%%")return"%";if(p[++_]===void 0)return;R=Z?parseInt(Z.substr(1)):void 0;let ge=oe?parseInt(oe.substr(1)):void 0,Ae;switch(ue){case"s":Ae=p[_];break;case"c":Ae=p[_][0];break;case"f":Ae=parseFloat(p[_]).toFixed(R);break;case"p":Ae=parseFloat(p[_]).toPrecision(R);break;case"e":Ae=parseFloat(p[_]).toExponential(R);break;case"x":Ae=parseInt(p[_]).toString(ge||16);break;case"d":Ae=parseFloat(parseInt(p[_],ge||10).toPrecision(R)).toFixed(0);break}Ae=typeof Ae=="object"?JSON.stringify(Ae):(+Ae).toString(ge);let $e=parseInt(z),We=z&&z[0]+""=="0"?"0":" ";for(;Ae.length<$e;)Ae=N!==void 0?Ae+We:We+Ae;return Ae}let T=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(T,E)}static getBytes(u,p){return F.encode(u,p)}static getCharCode(u,p=0){return u.charCodeAt(p)}static getCharAt(u){return String.fromCharCode(u)}}U.SHIFT_JIS=B.SJIS.getName(),U.GB2312="GB2312",U.ISO88591=B.ISO8859_1.getName(),U.EUC_JP="EUC_JP",U.UTF8=B.UTF8.getName(),U.PLATFORM_DEFAULT_ENCODING=U.UTF8,U.ASSUME_SHIFT_JIS=!1;class V{constructor(u=""){this.value=u}enableDecoding(u){return this.encoding=u,this}append(u){return typeof u=="string"?this.value+=u.toString():this.encoding?this.value+=U.castAsNonUtf8Char(u,this.encoding):this.value+=String.fromCharCode(u),this}appendChars(u,p,_){for(let E=p;p<p+_;E++)this.append(u[E]);return this}length(){return this.value.length}charAt(u){return this.value.charAt(u)}deleteCharAt(u){this.value=this.value.substr(0,u)+this.value.substring(u+1)}setCharAt(u,p){this.value=this.value.substr(0,u)+p+this.value.substr(u+1)}substring(u,p){return this.value.substring(u,p)}setLengthToZero(){this.value=""}toString(){return this.value}insert(u,p){this.value=this.value.substr(0,u)+p+this.value.substr(u+p.length)}}class Q{constructor(u,p,_,E){if(this.width=u,this.height=p,this.rowSize=_,this.bits=E,p==null&&(p=u),this.height=p,u<1||p<1)throw new g("Both dimensions must be greater than 0");_==null&&(_=Math.floor((u+31)/32)),this.rowSize=_,E==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(u){const p=u.length,_=u[0].length,E=new Q(_,p);for(let T=0;T<p;T++){const R=u[T];for(let N=0;N<_;N++)R[N]&&E.set(N,T)}return E}static parseFromString(u,p,_){if(u===null)throw new g("stringRepresentation cannot be null");const E=new Array(u.length);let T=0,R=0,N=-1,z=0,Z=0;for(;Z<u.length;)if(u.charAt(Z)===`
`||u.charAt(Z)==="\r"){if(T>R){if(N===-1)N=T-R;else if(T-R!==N)throw new g("row lengths do not match");R=T,z++}Z++}else if(u.substring(Z,Z+p.length)===p)Z+=p.length,E[T]=!0,T++;else if(u.substring(Z,Z+_.length)===_)Z+=_.length,E[T]=!1,T++;else throw new g("illegal character encountered: "+u.substring(Z));if(T>R){if(N===-1)N=T-R;else if(T-R!==N)throw new g("row lengths do not match");z++}const oe=new Q(N,z);for(let ue=0;ue<T;ue++)E[ue]&&oe.set(Math.floor(ue%N),Math.floor(ue/N));return oe}get(u,p){const _=p*this.rowSize+Math.floor(u/32);return(this.bits[_]>>>(u&31)&1)!==0}set(u,p){const _=p*this.rowSize+Math.floor(u/32);this.bits[_]|=1<<(u&31)&4294967295}unset(u,p){const _=p*this.rowSize+Math.floor(u/32);this.bits[_]&=~(1<<(u&31)&4294967295)}flip(u,p){const _=p*this.rowSize+Math.floor(u/32);this.bits[_]^=1<<(u&31)&4294967295}xor(u){if(this.width!==u.getWidth()||this.height!==u.getHeight()||this.rowSize!==u.getRowSize())throw new g("input matrix dimensions do not match");const p=new O(Math.floor(this.width/32)+1),_=this.rowSize,E=this.bits;for(let T=0,R=this.height;T<R;T++){const N=T*_,z=u.getRow(T,p).getBitArray();for(let Z=0;Z<_;Z++)E[N+Z]^=z[Z]}}clear(){const u=this.bits,p=u.length;for(let _=0;_<p;_++)u[_]=0}setRegion(u,p,_,E){if(p<0||u<0)throw new g("Left and top must be nonnegative");if(E<1||_<1)throw new g("Height and width must be at least 1");const T=u+_,R=p+E;if(R>this.height||T>this.width)throw new g("The region must fit inside the matrix");const N=this.rowSize,z=this.bits;for(let Z=p;Z<R;Z++){const oe=Z*N;for(let ue=u;ue<T;ue++)z[oe+Math.floor(ue/32)]|=1<<(ue&31)&4294967295}}getRow(u,p){p==null||p.getSize()<this.width?p=new O(this.width):p.clear();const _=this.rowSize,E=this.bits,T=u*_;for(let R=0;R<_;R++)p.setBulk(R*32,E[T+R]);return p}setRow(u,p){w.arraycopy(p.getBitArray(),0,this.bits,u*this.rowSize,this.rowSize)}rotate180(){const u=this.getWidth(),p=this.getHeight();let _=new O(u),E=new O(u);for(let T=0,R=Math.floor((p+1)/2);T<R;T++)_=this.getRow(T,_),E=this.getRow(p-1-T,E),_.reverse(),E.reverse(),this.setRow(T,E),this.setRow(p-1-T,_)}getEnclosingRectangle(){const u=this.width,p=this.height,_=this.rowSize,E=this.bits;let T=u,R=p,N=-1,z=-1;for(let Z=0;Z<p;Z++)for(let oe=0;oe<_;oe++){const ue=E[Z*_+oe];if(ue!==0){if(Z<R&&(R=Z),Z>z&&(z=Z),oe*32<T){let ge=0;for(;!(ue<<31-ge&4294967295);)ge++;oe*32+ge<T&&(T=oe*32+ge)}if(oe*32+31>N){let ge=31;for(;!(ue>>>ge);)ge--;oe*32+ge>N&&(N=oe*32+ge)}}}return N<T||z<R?null:Int32Array.from([T,R,N-T+1,z-R+1])}getTopLeftOnBit(){const u=this.rowSize,p=this.bits;let _=0;for(;_<p.length&&p[_]===0;)_++;if(_===p.length)return null;const E=_/u;let T=_%u*32;const R=p[_];let N=0;for(;!(R<<31-N&4294967295);)N++;return T+=N,Int32Array.from([T,E])}getBottomRightOnBit(){const u=this.rowSize,p=this.bits;let _=p.length-1;for(;_>=0&&p[_]===0;)_--;if(_<0)return null;const E=Math.floor(_/u);let T=Math.floor(_%u)*32;const R=p[_];let N=31;for(;!(R>>>N);)N--;return T+=N,Int32Array.from([T,E])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(u){if(!(u instanceof Q))return!1;const p=u;return this.width===p.width&&this.height===p.height&&this.rowSize===p.rowSize&&x.equals(this.bits,p.bits)}hashCode(){let u=this.width;return u=31*u+this.width,u=31*u+this.height,u=31*u+this.rowSize,u=31*u+x.hashCode(this.bits),u}toString(u="X ",p="  ",_=`
`){return this.buildToString(u,p,_)}buildToString(u,p,_){let E=new V;for(let T=0,R=this.height;T<R;T++){for(let N=0,z=this.width;N<z;N++)E.append(this.get(N,T)?u:p);E.append(_)}return E.toString()}clone(){return new Q(this.width,this.height,this.rowSize,this.bits.slice())}}class q extends d{static getNotFoundInstance(){return new q}}q.kind="NotFoundException";class G extends A{constructor(u){super(u),this.luminances=G.EMPTY,this.buckets=new Int32Array(G.LUMINANCE_BUCKETS)}getBlackRow(u,p){const _=this.getLuminanceSource(),E=_.getWidth();p==null||p.getSize()<E?p=new O(E):p.clear(),this.initArrays(E);const T=_.getRow(u,this.luminances),R=this.buckets;for(let z=0;z<E;z++)R[(T[z]&255)>>G.LUMINANCE_SHIFT]++;const N=G.estimateBlackPoint(R);if(E<3)for(let z=0;z<E;z++)(T[z]&255)<N&&p.set(z);else{let z=T[0]&255,Z=T[1]&255;for(let oe=1;oe<E-1;oe++){const ue=T[oe+1]&255;(Z*4-z-ue)/2<N&&p.set(oe),z=Z,Z=ue}}return p}getBlackMatrix(){const u=this.getLuminanceSource(),p=u.getWidth(),_=u.getHeight(),E=new Q(p,_);this.initArrays(p);const T=this.buckets;for(let z=1;z<5;z++){const Z=Math.floor(_*z/5),oe=u.getRow(Z,this.luminances),ue=Math.floor(p*4/5);for(let ge=Math.floor(p/5);ge<ue;ge++){const Ae=oe[ge]&255;T[Ae>>G.LUMINANCE_SHIFT]++}}const R=G.estimateBlackPoint(T),N=u.getMatrix();for(let z=0;z<_;z++){const Z=z*p;for(let oe=0;oe<p;oe++)(N[Z+oe]&255)<R&&E.set(oe,z)}return E}createBinarizer(u){return new G(u)}initArrays(u){this.luminances.length<u&&(this.luminances=new Uint8ClampedArray(u));const p=this.buckets;for(let _=0;_<G.LUMINANCE_BUCKETS;_++)p[_]=0}static estimateBlackPoint(u){const p=u.length;let _=0,E=0,T=0;for(let oe=0;oe<p;oe++)u[oe]>T&&(E=oe,T=u[oe]),u[oe]>_&&(_=u[oe]);let R=0,N=0;for(let oe=0;oe<p;oe++){const ue=oe-E,ge=u[oe]*ue*ue;ge>N&&(R=oe,N=ge)}if(E>R){const oe=E;E=R,R=oe}if(R-E<=p/16)throw new q;let z=R-1,Z=-1;for(let oe=R-1;oe>E;oe--){const ue=oe-E,ge=ue*ue*(R-oe)*(_-u[oe]);ge>Z&&(z=oe,Z=ge)}return z<<G.LUMINANCE_SHIFT}}G.LUMINANCE_BITS=5,G.LUMINANCE_SHIFT=8-G.LUMINANCE_BITS,G.LUMINANCE_BUCKETS=1<<G.LUMINANCE_BITS,G.EMPTY=Uint8ClampedArray.from([0]);class te extends G{constructor(u){super(u),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const u=this.getLuminanceSource(),p=u.getWidth(),_=u.getHeight();if(p>=te.MINIMUM_DIMENSION&&_>=te.MINIMUM_DIMENSION){const E=u.getMatrix();let T=p>>te.BLOCK_SIZE_POWER;p&te.BLOCK_SIZE_MASK&&T++;let R=_>>te.BLOCK_SIZE_POWER;_&te.BLOCK_SIZE_MASK&&R++;const N=te.calculateBlackPoints(E,T,R,p,_),z=new Q(p,_);te.calculateThresholdForBlock(E,T,R,p,_,N,z),this.matrix=z}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(u){return new te(u)}static calculateThresholdForBlock(u,p,_,E,T,R,N){const z=T-te.BLOCK_SIZE,Z=E-te.BLOCK_SIZE;for(let oe=0;oe<_;oe++){let ue=oe<<te.BLOCK_SIZE_POWER;ue>z&&(ue=z);const ge=te.cap(oe,2,_-3);for(let Ae=0;Ae<p;Ae++){let $e=Ae<<te.BLOCK_SIZE_POWER;$e>Z&&($e=Z);const We=te.cap(Ae,2,p-3);let Je=0;for(let kt=-2;kt<=2;kt++){const Mt=R[ge+kt];Je+=Mt[We-2]+Mt[We-1]+Mt[We]+Mt[We+1]+Mt[We+2]}const st=Je/25;te.thresholdBlock(u,$e,ue,st,E,N)}}}static cap(u,p,_){return u<p?p:u>_?_:u}static thresholdBlock(u,p,_,E,T,R){for(let N=0,z=_*T+p;N<te.BLOCK_SIZE;N++,z+=T)for(let Z=0;Z<te.BLOCK_SIZE;Z++)(u[z+Z]&255)<=E&&R.set(p+Z,_+N)}static calculateBlackPoints(u,p,_,E,T){const R=T-te.BLOCK_SIZE,N=E-te.BLOCK_SIZE,z=new Array(_);for(let Z=0;Z<_;Z++){z[Z]=new Int32Array(p);let oe=Z<<te.BLOCK_SIZE_POWER;oe>R&&(oe=R);for(let ue=0;ue<p;ue++){let ge=ue<<te.BLOCK_SIZE_POWER;ge>N&&(ge=N);let Ae=0,$e=255,We=0;for(let st=0,kt=oe*E+ge;st<te.BLOCK_SIZE;st++,kt+=E){for(let Mt=0;Mt<te.BLOCK_SIZE;Mt++){const Rt=u[kt+Mt]&255;Ae+=Rt,Rt<$e&&($e=Rt),Rt>We&&(We=Rt)}if(We-$e>te.MIN_DYNAMIC_RANGE)for(st++,kt+=E;st<te.BLOCK_SIZE;st++,kt+=E)for(let Mt=0;Mt<te.BLOCK_SIZE;Mt++)Ae+=u[kt+Mt]&255}let Je=Ae>>te.BLOCK_SIZE_POWER*2;if(We-$e<=te.MIN_DYNAMIC_RANGE&&(Je=$e/2,Z>0&&ue>0)){const st=(z[Z-1][ue]+2*z[Z][ue-1]+z[Z-1][ue-1])/4;$e<st&&(Je=st)}z[Z][ue]=Je}}return z}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class Y{constructor(u,p){this.width=u,this.height=p}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(u,p,_,E){throw new j("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new j("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new j("This luminance source does not support rotation by 45 degrees.")}toString(){const u=new Uint8ClampedArray(this.width);let p=new V;for(let _=0;_<this.height;_++){const E=this.getRow(_,u);for(let T=0;T<this.width;T++){const R=E[T]&255;let N;R<64?N="#":R<128?N="+":R<192?N=".":N=" ",p.append(N)}p.append(`
`)}return p.toString()}}class J extends Y{constructor(u){super(u.getWidth(),u.getHeight()),this.delegate=u}getRow(u,p){const _=this.delegate.getRow(u,p),E=this.getWidth();for(let T=0;T<E;T++)_[T]=255-(_[T]&255);return _}getMatrix(){const u=this.delegate.getMatrix(),p=this.getWidth()*this.getHeight(),_=new Uint8ClampedArray(p);for(let E=0;E<p;E++)_[E]=255-(u[E]&255);return _}isCropSupported(){return this.delegate.isCropSupported()}crop(u,p,_,E){return new J(this.delegate.crop(u,p,_,E))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new J(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new J(this.delegate.rotateCounterClockwise45())}}class K extends Y{constructor(u){super(u.width,u.height),this.canvas=u,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(u)}static makeBufferFromCanvasImageData(u){const p=u.getContext("2d").getImageData(0,0,u.width,u.height);return K.toGrayscaleBuffer(p.data,u.width,u.height)}static toGrayscaleBuffer(u,p,_){const E=new Uint8ClampedArray(p*_);for(let T=0,R=0,N=u.length;T<N;T+=4,R++){let z;if(u[T+3]===0)z=255;else{const oe=u[T],ue=u[T+1],ge=u[T+2];z=306*oe+601*ue+117*ge+512>>10}E[R]=z}return E}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const _=this.getWidth(),E=u*_;return p===null?p=this.buffer.slice(E,E+_):(p.length<_&&(p=new Uint8ClampedArray(_)),p.set(this.buffer.slice(E,E+_))),p}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(u,p,_,E){return super.crop(u,p,_,E),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const u=this.canvas.ownerDocument.createElement("canvas");u.width=this.canvas.width,u.height=this.canvas.height,this.tempCanvasElement=u}return this.tempCanvasElement}rotate(u){const p=this.getTempCanvasElement(),_=p.getContext("2d"),E=u*K.DEGREE_TO_RADIANS,T=this.canvas.width,R=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(E))*T+Math.abs(Math.sin(E))*R),z=Math.ceil(Math.abs(Math.sin(E))*T+Math.abs(Math.cos(E))*R);return p.width=N,p.height=z,_.translate(N/2,z/2),_.rotate(E),_.drawImage(this.canvas,T/-2,R/-2),this.buffer=K.makeBufferFromCanvasImageData(p),this}invert(){return new J(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(u,p,_){this.deviceId=u,this.label=p,this.kind="videoinput",this.groupId=_||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||commonjsGlobal||self||window||void 0)&&(globalThis||commonjsGlobal||self||window||void 0).__awaiter||function(ae,u,p,_){function E(T){return T instanceof p?T:new p(function(R){R(T)})}return new(p||(p=Promise))(function(T,R){function N(oe){try{Z(_.next(oe))}catch(ue){R(ue)}}function z(oe){try{Z(_.throw(oe))}catch(ue){R(ue)}}function Z(oe){oe.done?T(oe.value):E(oe.value).then(N,z)}Z((_=_.apply(ae,u||[])).next())})};class Re{constructor(u,p=500,_){this.reader=u,this.timeBetweenScansMillis=p,this._hints=_,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(u){this._timeBetweenDecodingAttempts=u<0?0:u}set hints(u){this._hints=u||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const u=yield navigator.mediaDevices.enumerateDevices(),p=[];for(const _ of u){const E=_.kind==="video"?"videoinput":_.kind;if(E!=="videoinput")continue;const T=_.deviceId||_.id,R=_.label||`Video device ${p.length+1}`,N=_.groupId,z={deviceId:T,label:R,kind:E,groupId:N};p.push(z)}return p})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(p=>new ne(p.deviceId,p.label))})}findDeviceById(u){return de(this,void 0,void 0,function*(){const p=yield this.listVideoInputDevices();return p?p.find(_=>_.deviceId===u):null})}decodeFromInputVideoDevice(u,p){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(u,p)})}decodeOnceFromVideoDevice(u,p){return de(this,void 0,void 0,function*(){this.reset();let _;u?_={deviceId:{exact:u}}:_={facingMode:"environment"};const E={video:_};return yield this.decodeOnceFromConstraints(E,p)})}decodeOnceFromConstraints(u,p){return de(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeOnceFromStream(_,p)})}decodeOnceFromStream(u,p){return de(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(u,p);return yield this.decodeOnce(_)})}decodeFromInputVideoDeviceContinuously(u,p,_){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(u,p,_)})}decodeFromVideoDevice(u,p,_){return de(this,void 0,void 0,function*(){let E;u?E={deviceId:{exact:u}}:E={facingMode:"environment"};const T={video:E};return yield this.decodeFromConstraints(T,p,_)})}decodeFromConstraints(u,p,_){return de(this,void 0,void 0,function*(){const E=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeFromStream(E,p,_)})}decodeFromStream(u,p,_){return de(this,void 0,void 0,function*(){this.reset();const E=yield this.attachStreamToVideo(u,p);return yield this.decodeContinuously(E,_)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(u,p){return de(this,void 0,void 0,function*(){const _=this.prepareVideoElement(p);return this.addVideoSource(_,u),this.videoElement=_,this.stream=u,yield this.playVideoOnLoadAsync(_),_})}playVideoOnLoadAsync(u){return new Promise((p,_)=>this.playVideoOnLoad(u,()=>p()))}playVideoOnLoad(u,p){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(u),u.addEventListener("ended",this.videoEndedListener),u.addEventListener("canplay",this.videoCanPlayListener),u.addEventListener("playing",p),this.tryPlayVideo(u)}isVideoPlaying(u){return u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2}tryPlayVideo(u){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(u)){console.warn("Trying to play video that is already playing.");return}try{yield u.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(u,p){const _=document.getElementById(u);if(!_)throw new f(`element with id '${u}' not found`);if(_.nodeName.toLowerCase()!==p.toLowerCase())throw new f(`element with id '${u}' must be an ${p} element`);return _}decodeFromImage(u,p){if(!u&&!p)throw new f("either imageElement with a src set or an url must be provided");return p&&!u?this.decodeFromImageUrl(p):this.decodeFromImageElement(u)}decodeFromVideo(u,p){if(!u&&!p)throw new f("Either an element with a src set or an URL must be provided");return p&&!u?this.decodeFromVideoUrl(p):this.decodeFromVideoElement(u)}decodeFromVideoContinuously(u,p,_){if(u===void 0&&p===void 0)throw new f("Either an element with a src set or an URL must be provided");return p&&!u?this.decodeFromVideoUrlContinuously(p,_):this.decodeFromVideoElementContinuously(u,_)}decodeFromImageElement(u){if(!u)throw new f("An image element must be provided.");this.reset();const p=this.prepareImageElement(u);this.imageElement=p;let _;return this.isImageLoaded(p)?_=this.decodeOnce(p,!1,!0):_=this._decodeOnLoadImage(p),_}decodeFromVideoElement(u){const p=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideo(p)}decodeFromVideoElementContinuously(u,p){const _=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideoContinuously(_,p)}_decodeFromVideoElementSetup(u){if(!u)throw new f("A video element must be provided.");this.reset();const p=this.prepareVideoElement(u);return this.videoElement=p,p}decodeFromImageUrl(u){if(!u)throw new f("An URL must be provided.");this.reset();const p=this.prepareImageElement();this.imageElement=p;const _=this._decodeOnLoadImage(p);return p.src=u,_}decodeFromVideoUrl(u){if(!u)throw new f("An URL must be provided.");this.reset();const p=this.prepareVideoElement(),_=this.decodeFromVideoElement(p);return p.src=u,_}decodeFromVideoUrlContinuously(u,p){if(!u)throw new f("An URL must be provided.");this.reset();const _=this.prepareVideoElement(),E=this.decodeFromVideoElementContinuously(_,p);return _.src=u,E}_decodeOnLoadImage(u){return new Promise((p,_)=>{this.imageLoadedListener=()=>this.decodeOnce(u,!1,!0).then(p,_),u.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(u){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(u),yield this.decodeOnce(u)})}_decodeOnLoadVideoContinuously(u,p){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(u),this.decodeContinuously(u,p)})}isImageLoaded(u){return!(!u.complete||u.naturalWidth===0)}prepareImageElement(u){let p;return typeof u>"u"&&(p=document.createElement("img"),p.width=200,p.height=200),typeof u=="string"&&(p=this.getMediaElement(u,"img")),u instanceof HTMLImageElement&&(p=u),p}prepareVideoElement(u){let p;return!u&&typeof document<"u"&&(p=document.createElement("video"),p.width=200,p.height=200),typeof u=="string"&&(p=this.getMediaElement(u,"video")),u instanceof HTMLVideoElement&&(p=u),p.setAttribute("autoplay","true"),p.setAttribute("muted","true"),p.setAttribute("playsinline","true"),p}decodeOnce(u,p=!0,_=!0){this._stopAsyncDecode=!1;const E=(T,R)=>{if(this._stopAsyncDecode){R(new q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(u);T(N)}catch(N){const z=p&&N instanceof q,oe=(N instanceof S||N instanceof L)&&_;if(z||oe)return setTimeout(E,this._timeBetweenDecodingAttempts,T,R);R(N)}};return new Promise((T,R)=>E(T,R))}decodeContinuously(u,p){this._stopContinuousDecode=!1;const _=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const E=this.decode(u);p(E,null),setTimeout(_,this.timeBetweenScansMillis)}catch(E){p(null,E);const T=E instanceof S||E instanceof L,R=E instanceof q;(T||R)&&setTimeout(_,this._timeBetweenDecodingAttempts)}};_()}decode(u){const p=this.createBinaryBitmap(u);return this.decodeBitmap(p)}_isHTMLVideoElement(u){return u.videoWidth!==0}drawFrameOnCanvas(u,p,_){p||(p={sx:0,sy:0,sWidth:u.videoWidth,sHeight:u.videoHeight,dx:0,dy:0,dWidth:u.videoWidth,dHeight:u.videoHeight}),_||(_=this.captureCanvasContext),_.drawImage(u,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}drawImageOnCanvas(u,p,_=this.captureCanvasContext){p||(p={sx:0,sy:0,sWidth:u.naturalWidth,sHeight:u.naturalHeight,dx:0,dy:0,dWidth:u.naturalWidth,dHeight:u.naturalHeight}),_||(_=this.captureCanvasContext),_.drawImage(u,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}createBinaryBitmap(u){this.getCaptureCanvasContext(u),this._isHTMLVideoElement(u)?this.drawFrameOnCanvas(u):this.drawImageOnCanvas(u);const p=this.getCaptureCanvas(u),_=new K(p),E=new te(_);return new v(E)}getCaptureCanvasContext(u){if(!this.captureCanvasContext){const _=this.getCaptureCanvas(u).getContext("2d");this.captureCanvasContext=_}return this.captureCanvasContext}getCaptureCanvas(u){if(!this.captureCanvas){const p=this.createCaptureCanvas(u);this.captureCanvas=p}return this.captureCanvas}decodeBitmap(u){return this.reader.decode(u,this._hints)}createCaptureCanvas(u){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const p=document.createElement("canvas");let _,E;return typeof u<"u"&&(u instanceof HTMLVideoElement?(_=u.videoWidth,E=u.videoHeight):u instanceof HTMLImageElement&&(_=u.naturalWidth||u.width,E=u.naturalHeight||u.height)),p.style.width=_+"px",p.style.height=E+"px",p.width=_,p.height=E,p}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(u=>u.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(u,p){try{u.srcObject=p}catch{u.src=URL.createObjectURL(p)}}cleanVideoSource(u){try{u.srcObject=null}catch{u.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(u,p,_=p==null?0:8*p.length,E,T,R=w.currentTimeMillis()){this.text=u,this.rawBytes=p,this.numBits=_,this.resultPoints=E,this.format=T,this.timestamp=R,this.text=u,this.rawBytes=p,_==null?this.numBits=p==null?0:8*p.length:this.numBits=_,this.resultPoints=E,this.format=T,this.resultMetadata=null,R==null?this.timestamp=w.currentTimeMillis():this.timestamp=R}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(u,p){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(u,p)}putAllMetadata(u){u!==null&&(this.resultMetadata===null?this.resultMetadata=u:this.resultMetadata=new Map(u))}addResultPoints(u){const p=this.resultPoints;if(p===null)this.resultPoints=u;else if(u!==null&&u.length>0){const _=new Array(p.length+u.length);w.arraycopy(p,0,_,0,p.length),w.arraycopy(u,0,_,p.length,u.length),this.resultPoints=_}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Me;(function(ae){ae[ae.AZTEC=0]="AZTEC",ae[ae.CODABAR=1]="CODABAR",ae[ae.CODE_39=2]="CODE_39",ae[ae.CODE_93=3]="CODE_93",ae[ae.CODE_128=4]="CODE_128",ae[ae.DATA_MATRIX=5]="DATA_MATRIX",ae[ae.EAN_8=6]="EAN_8",ae[ae.EAN_13=7]="EAN_13",ae[ae.ITF=8]="ITF",ae[ae.MAXICODE=9]="MAXICODE",ae[ae.PDF_417=10]="PDF_417",ae[ae.QR_CODE=11]="QR_CODE",ae[ae.RSS_14=12]="RSS_14",ae[ae.RSS_EXPANDED=13]="RSS_EXPANDED",ae[ae.UPC_A=14]="UPC_A",ae[ae.UPC_E=15]="UPC_E",ae[ae.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Me||(Me={}));var Ie=Me,ce;(function(ae){ae[ae.OTHER=0]="OTHER",ae[ae.ORIENTATION=1]="ORIENTATION",ae[ae.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ae[ae.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ae[ae.ISSUE_NUMBER=4]="ISSUE_NUMBER",ae[ae.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ae[ae.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ae[ae.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ae[ae.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ae[ae.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ae[ae.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ce||(ce={}));var pe=ce;class me{constructor(u,p,_,E,T=-1,R=-1){this.rawBytes=u,this.text=p,this.byteSegments=_,this.ecLevel=E,this.structuredAppendSequenceNumber=T,this.structuredAppendParity=R,this.numBits=u==null?0:8*u.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(u){this.numBits=u}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(u){this.errorsCorrected=u}getErasures(){return this.erasures}setErasures(u){this.erasures=u}getOther(){return this.other}setOther(u){this.other=u}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class we{exp(u){return this.expTable[u]}log(u){if(u===0)throw new g;return this.logTable[u]}static addOrSubtract(u,p){return u^p}}class Xe{constructor(u,p){if(p.length===0)throw new g;this.field=u;const _=p.length;if(_>1&&p[0]===0){let E=1;for(;E<_&&p[E]===0;)E++;E===_?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(_-E),w.arraycopy(p,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);const p=this.coefficients;let _;if(u===1){_=0;for(let R=0,N=p.length;R!==N;R++){const z=p[R];_=we.addOrSubtract(_,z)}return _}_=p[0];const E=p.length,T=this.field;for(let R=1;R<E;R++)_=we.addOrSubtract(T.multiply(u,_),p[R]);return _}addOrSubtract(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero())return u;if(u.isZero())return this;let p=this.coefficients,_=u.coefficients;if(p.length>_.length){const R=p;p=_,_=R}let E=new Int32Array(_.length);const T=_.length-p.length;w.arraycopy(_,0,E,0,T);for(let R=T;R<_.length;R++)E[R]=we.addOrSubtract(p[R-T],_[R]);return new Xe(this.field,E)}multiply(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero()||u.isZero())return this.field.getZero();const p=this.coefficients,_=p.length,E=u.coefficients,T=E.length,R=new Int32Array(_+T-1),N=this.field;for(let z=0;z<_;z++){const Z=p[z];for(let oe=0;oe<T;oe++)R[z+oe]=we.addOrSubtract(R[z+oe],N.multiply(Z,E[oe]))}return new Xe(N,R)}multiplyScalar(u){if(u===0)return this.field.getZero();if(u===1)return this;const p=this.coefficients.length,_=this.field,E=new Int32Array(p),T=this.coefficients;for(let R=0;R<p;R++)E[R]=_.multiply(T[R],u);return new Xe(_,E)}multiplyByMonomial(u,p){if(u<0)throw new g;if(p===0)return this.field.getZero();const _=this.coefficients,E=_.length,T=new Int32Array(E+u),R=this.field;for(let N=0;N<E;N++)T[N]=R.multiply(_[N],p);return new Xe(R,T)}divide(u){if(!this.field.equals(u.field))throw new g("GenericGFPolys do not have same GenericGF field");if(u.isZero())throw new g("Divide by 0");const p=this.field;let _=p.getZero(),E=this;const T=u.getCoefficient(u.getDegree()),R=p.inverse(T);for(;E.getDegree()>=u.getDegree()&&!E.isZero();){const N=E.getDegree()-u.getDegree(),z=p.multiply(E.getCoefficient(E.getDegree()),R),Z=u.multiplyByMonomial(N,z),oe=p.buildMonomial(N,z);_=_.addOrSubtract(oe),E=E.addOrSubtract(Z)}return[_,E]}toString(){let u="";for(let p=this.getDegree();p>=0;p--){let _=this.getCoefficient(p);if(_!==0){if(_<0?(u+=" - ",_=-_):u.length>0&&(u+=" + "),p===0||_!==1){const E=this.field.log(_);E===0?u+="1":E===1?u+="a":(u+="a^",u+=E)}p!==0&&(p===1?u+="x":(u+="x^",u+=p))}}return u}}class Qe extends d{}Qe.kind="ArithmeticException";class Pe extends we{constructor(u,p,_){super(),this.primitive=u,this.size=p,this.generatorBase=_;const E=new Int32Array(p);let T=1;for(let N=0;N<p;N++)E[N]=T,T*=2,T>=p&&(T^=u,T&=p-1);this.expTable=E;const R=new Int32Array(p);for(let N=0;N<p-1;N++)R[E[N]]=N;this.logTable=R,this.zero=new Xe(this,Int32Array.from([0])),this.one=new Xe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,p){if(u<0)throw new g;if(p===0)return this.zero;const _=new Int32Array(u+1);return _[0]=p,new Xe(this,_)}inverse(u){if(u===0)throw new Qe;return this.expTable[this.size-this.logTable[u]-1]}multiply(u,p){return u===0||p===0?0:this.expTable[(this.logTable[u]+this.logTable[p])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+y.toHexString(this.primitive)+","+this.size+")"}equals(u){return u===this}}Pe.AZTEC_DATA_12=new Pe(4201,4096,1),Pe.AZTEC_DATA_10=new Pe(1033,1024,1),Pe.AZTEC_DATA_6=new Pe(67,64,1),Pe.AZTEC_PARAM=new Pe(19,16,1),Pe.QR_CODE_FIELD_256=new Pe(285,256,0),Pe.DATA_MATRIX_FIELD_256=new Pe(301,256,1),Pe.AZTEC_DATA_8=Pe.DATA_MATRIX_FIELD_256,Pe.MAXICODE_FIELD_64=Pe.AZTEC_DATA_6;class Ze extends d{}Ze.kind="ReedSolomonException";class _e extends d{}_e.kind="IllegalStateException";class qe{constructor(u){this.field=u}decode(u,p){const _=this.field,E=new Xe(_,u),T=new Int32Array(p);let R=!0;for(let Ae=0;Ae<p;Ae++){const $e=E.evaluateAt(_.exp(Ae+_.getGeneratorBase()));T[T.length-1-Ae]=$e,$e!==0&&(R=!1)}if(R)return;const N=new Xe(_,T),z=this.runEuclideanAlgorithm(_.buildMonomial(p,1),N,p),Z=z[0],oe=z[1],ue=this.findErrorLocations(Z),ge=this.findErrorMagnitudes(oe,ue);for(let Ae=0;Ae<ue.length;Ae++){const $e=u.length-1-_.log(ue[Ae]);if($e<0)throw new Ze("Bad error location");u[$e]=Pe.addOrSubtract(u[$e],ge[Ae])}}runEuclideanAlgorithm(u,p,_){if(u.getDegree()<p.getDegree()){const Ae=u;u=p,p=Ae}const E=this.field;let T=u,R=p,N=E.getZero(),z=E.getOne();for(;R.getDegree()>=(_/2|0);){let Ae=T,$e=N;if(T=R,N=z,T.isZero())throw new Ze("r_{i-1} was zero");R=Ae;let We=E.getZero();const Je=T.getCoefficient(T.getDegree()),st=E.inverse(Je);for(;R.getDegree()>=T.getDegree()&&!R.isZero();){const kt=R.getDegree()-T.getDegree(),Mt=E.multiply(R.getCoefficient(R.getDegree()),st);We=We.addOrSubtract(E.buildMonomial(kt,Mt)),R=R.addOrSubtract(T.multiplyByMonomial(kt,Mt))}if(z=We.multiply(N).addOrSubtract($e),R.getDegree()>=T.getDegree())throw new _e("Division algorithm failed to reduce polynomial?")}const Z=z.getCoefficient(0);if(Z===0)throw new Ze("sigmaTilde(0) was zero");const oe=E.inverse(Z),ue=z.multiplyScalar(oe),ge=R.multiplyScalar(oe);return[ue,ge]}findErrorLocations(u){const p=u.getDegree();if(p===1)return Int32Array.from([u.getCoefficient(1)]);const _=new Int32Array(p);let E=0;const T=this.field;for(let R=1;R<T.getSize()&&E<p;R++)u.evaluateAt(R)===0&&(_[E]=T.inverse(R),E++);if(E!==p)throw new Ze("Error locator degree does not match number of roots");return _}findErrorMagnitudes(u,p){const _=p.length,E=new Int32Array(_),T=this.field;for(let R=0;R<_;R++){const N=T.inverse(p[R]);let z=1;for(let Z=0;Z<_;Z++)if(R!==Z){const oe=T.multiply(p[Z],N),ue=oe&1?oe&-2:oe|1;z=T.multiply(z,ue)}E[R]=T.multiply(u.evaluateAt(N),T.inverse(z)),T.getGeneratorBase()!==0&&(E[R]=T.multiply(E[R],N))}return E}}var Be;(function(ae){ae[ae.UPPER=0]="UPPER",ae[ae.LOWER=1]="LOWER",ae[ae.MIXED=2]="MIXED",ae[ae.DIGIT=3]="DIGIT",ae[ae.PUNCT=4]="PUNCT",ae[ae.BINARY=5]="BINARY"})(Be||(Be={}));class mt{decode(u){this.ddata=u;let p=u.getBits(),_=this.extractBits(p),E=this.correctBits(_),T=mt.convertBoolArrayToByteArray(E),R=mt.getEncodedData(E),N=new me(T,R,null,null);return N.setNumBits(E.length),N}static highLevelDecode(u){return this.getEncodedData(u)}static getEncodedData(u){let p=u.length,_=Be.UPPER,E=Be.UPPER,T="",R=0;for(;R<p;)if(E===Be.BINARY){if(p-R<5)break;let N=mt.readCode(u,R,5);if(R+=5,N===0){if(p-R<11)break;N=mt.readCode(u,R,11)+31,R+=11}for(let z=0;z<N;z++){if(p-R<8){R=p;break}const Z=mt.readCode(u,R,8);T+=U.castAsNonUtf8Char(Z),R+=8}E=_}else{let N=E===Be.DIGIT?4:5;if(p-R<N)break;let z=mt.readCode(u,R,N);R+=N;let Z=mt.getCharacter(E,z);Z.startsWith("CTRL_")?(_=E,E=mt.getTable(Z.charAt(5)),Z.charAt(6)==="L"&&(_=E)):(T+=Z,E=_)}return T}static getTable(u){switch(u){case"L":return Be.LOWER;case"P":return Be.PUNCT;case"M":return Be.MIXED;case"D":return Be.DIGIT;case"B":return Be.BINARY;case"U":default:return Be.UPPER}}static getCharacter(u,p){switch(u){case Be.UPPER:return mt.UPPER_TABLE[p];case Be.LOWER:return mt.LOWER_TABLE[p];case Be.MIXED:return mt.MIXED_TABLE[p];case Be.PUNCT:return mt.PUNCT_TABLE[p];case Be.DIGIT:return mt.DIGIT_TABLE[p];default:throw new _e("Bad table")}}correctBits(u){let p,_;this.ddata.getNbLayers()<=2?(_=6,p=Pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(_=8,p=Pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(_=10,p=Pe.AZTEC_DATA_10):(_=12,p=Pe.AZTEC_DATA_12);let E=this.ddata.getNbDatablocks(),T=u.length/_;if(T<E)throw new L;let R=u.length%_,N=new Int32Array(T);for(let ge=0;ge<T;ge++,R+=_)N[ge]=mt.readCode(u,R,_);try{new qe(p).decode(N,T-E)}catch(ge){throw new L(ge)}let z=(1<<_)-1,Z=0;for(let ge=0;ge<E;ge++){let Ae=N[ge];if(Ae===0||Ae===z)throw new L;(Ae===1||Ae===z-1)&&Z++}let oe=new Array(E*_-Z),ue=0;for(let ge=0;ge<E;ge++){let Ae=N[ge];if(Ae===1||Ae===z-1)oe.fill(Ae>1,ue,ue+_-1),ue+=_-1;else for(let $e=_-1;$e>=0;--$e)oe[ue++]=(Ae&1<<$e)!==0}return oe}extractBits(u){let p=this.ddata.isCompact(),_=this.ddata.getNbLayers(),E=(p?11:14)+_*4,T=new Int32Array(E),R=new Array(this.totalBitsInLayer(_,p));if(p)for(let N=0;N<T.length;N++)T[N]=N;else{let N=E+1+2*y.truncDivision(y.truncDivision(E,2)-1,15),z=E/2,Z=y.truncDivision(N,2);for(let oe=0;oe<z;oe++){let ue=oe+y.truncDivision(oe,15);T[z-oe-1]=Z-ue-1,T[z+oe]=Z+ue+1}}for(let N=0,z=0;N<_;N++){let Z=(_-N)*4+(p?9:12),oe=N*2,ue=E-1-oe;for(let ge=0;ge<Z;ge++){let Ae=ge*2;for(let $e=0;$e<2;$e++)R[z+Ae+$e]=u.get(T[oe+$e],T[oe+ge]),R[z+2*Z+Ae+$e]=u.get(T[oe+ge],T[ue-$e]),R[z+4*Z+Ae+$e]=u.get(T[ue-$e],T[ue-ge]),R[z+6*Z+Ae+$e]=u.get(T[ue-ge],T[oe+$e])}z+=Z*8}return R}static readCode(u,p,_){let E=0;for(let T=p;T<p+_;T++)E<<=1,u[T]&&(E|=1);return E}static readByte(u,p){let _=u.length-p;return _>=8?mt.readCode(u,p,8):mt.readCode(u,p,_)<<8-_}static convertBoolArrayToByteArray(u){let p=new Uint8Array((u.length+7)/8);for(let _=0;_<p.length;_++)p[_]=mt.readByte(u,8*_);return p}totalBitsInLayer(u,p){return((p?88:112)+16*u)*u}}mt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],mt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],mt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],mt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],mt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(u){return u===NaN?0:u<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:u>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:u+(u<0?-.5:.5)|0}static distance(u,p,_,E){const T=u-_,R=p-E;return Math.sqrt(T*T+R*R)}static sum(u){let p=0;for(let _=0,E=u.length;_!==E;_++){const T=u[_];p+=T}return p}}class Dt{static floatToIntBits(u){return u}}Dt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Se{constructor(u,p){this.x=u,this.y=p}getX(){return this.x}getY(){return this.y}equals(u){if(u instanceof Se){const p=u;return this.x===p.x&&this.y===p.y}return!1}hashCode(){return 31*Dt.floatToIntBits(this.x)+Dt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(u){const p=this.distance(u[0],u[1]),_=this.distance(u[1],u[2]),E=this.distance(u[0],u[2]);let T,R,N;if(_>=p&&_>=E?(R=u[0],T=u[1],N=u[2]):E>=_&&E>=p?(R=u[1],T=u[0],N=u[2]):(R=u[2],T=u[0],N=u[1]),this.crossProductZ(T,R,N)<0){const z=T;T=N,N=z}u[0]=T,u[1]=R,u[2]=N}static distance(u,p){return ht.distance(u.x,u.y,p.x,p.y)}static crossProductZ(u,p,_){const E=p.x,T=p.y;return(_.x-E)*(u.y-T)-(_.y-T)*(u.x-E)}}class Ye{constructor(u,p){this.bits=u,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class Le extends Ye{constructor(u,p,_,E,T){super(u,p),this.compact=_,this.nbDatablocks=E,this.nbLayers=T}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ze{constructor(u,p,_,E){this.image=u,this.height=u.getHeight(),this.width=u.getWidth(),p==null&&(p=ze.INIT_SIZE),_==null&&(_=u.getWidth()/2|0),E==null&&(E=u.getHeight()/2|0);const T=p/2|0;if(this.leftInit=_-T,this.rightInit=_+T,this.upInit=E-T,this.downInit=E+T,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new q}detect(){let u=this.leftInit,p=this.rightInit,_=this.upInit,E=this.downInit,T=!1,R=!0,N=!1,z=!1,Z=!1,oe=!1,ue=!1;const ge=this.width,Ae=this.height;for(;R;){R=!1;let $e=!0;for(;($e||!z)&&p<ge;)$e=this.containsBlackPoint(_,E,p,!1),$e?(p++,R=!0,z=!0):z||p++;if(p>=ge){T=!0;break}let We=!0;for(;(We||!Z)&&E<Ae;)We=this.containsBlackPoint(u,p,E,!0),We?(E++,R=!0,Z=!0):Z||E++;if(E>=Ae){T=!0;break}let Je=!0;for(;(Je||!oe)&&u>=0;)Je=this.containsBlackPoint(_,E,u,!1),Je?(u--,R=!0,oe=!0):oe||u--;if(u<0){T=!0;break}let st=!0;for(;(st||!ue)&&_>=0;)st=this.containsBlackPoint(u,p,_,!0),st?(_--,R=!0,ue=!0):ue||_--;if(_<0){T=!0;break}R&&(N=!0)}if(!T&&N){const $e=p-u;let We=null;for(let Mt=1;We===null&&Mt<$e;Mt++)We=this.getBlackPointOnSegment(u,E-Mt,u+Mt,E);if(We==null)throw new q;let Je=null;for(let Mt=1;Je===null&&Mt<$e;Mt++)Je=this.getBlackPointOnSegment(u,_+Mt,u+Mt,_);if(Je==null)throw new q;let st=null;for(let Mt=1;st===null&&Mt<$e;Mt++)st=this.getBlackPointOnSegment(p,_+Mt,p-Mt,_);if(st==null)throw new q;let kt=null;for(let Mt=1;kt===null&&Mt<$e;Mt++)kt=this.getBlackPointOnSegment(p,E-Mt,p-Mt,E);if(kt==null)throw new q;return this.centerEdges(kt,We,st,Je)}else throw new q}getBlackPointOnSegment(u,p,_,E){const T=ht.round(ht.distance(u,p,_,E)),R=(_-u)/T,N=(E-p)/T,z=this.image;for(let Z=0;Z<T;Z++){const oe=ht.round(u+Z*R),ue=ht.round(p+Z*N);if(z.get(oe,ue))return new Se(oe,ue)}return null}centerEdges(u,p,_,E){const T=u.getX(),R=u.getY(),N=p.getX(),z=p.getY(),Z=_.getX(),oe=_.getY(),ue=E.getX(),ge=E.getY(),Ae=ze.CORR;return T<this.width/2?[new Se(ue-Ae,ge+Ae),new Se(N+Ae,z+Ae),new Se(Z-Ae,oe-Ae),new Se(T+Ae,R-Ae)]:[new Se(ue+Ae,ge+Ae),new Se(N+Ae,z-Ae),new Se(Z-Ae,oe+Ae),new Se(T-Ae,R-Ae)]}containsBlackPoint(u,p,_,E){const T=this.image;if(E){for(let R=u;R<=p;R++)if(T.get(R,_))return!0}else for(let R=u;R<=p;R++)if(T.get(_,R))return!0;return!1}}ze.INIT_SIZE=10,ze.CORR=1;class Ue{static checkAndNudgePoints(u,p){const _=u.getWidth(),E=u.getHeight();let T=!0;for(let R=0;R<p.length&&T;R+=2){const N=Math.floor(p[R]),z=Math.floor(p[R+1]);if(N<-1||N>_||z<-1||z>E)throw new q;T=!1,N===-1?(p[R]=0,T=!0):N===_&&(p[R]=_-1,T=!0),z===-1?(p[R+1]=0,T=!0):z===E&&(p[R+1]=E-1,T=!0)}T=!0;for(let R=p.length-2;R>=0&&T;R-=2){const N=Math.floor(p[R]),z=Math.floor(p[R+1]);if(N<-1||N>_||z<-1||z>E)throw new q;T=!1,N===-1?(p[R]=0,T=!0):N===_&&(p[R]=_-1,T=!0),z===-1?(p[R+1]=0,T=!0):z===E&&(p[R+1]=E-1,T=!0)}}}class Ge{constructor(u,p,_,E,T,R,N,z,Z){this.a11=u,this.a21=p,this.a31=_,this.a12=E,this.a22=T,this.a32=R,this.a13=N,this.a23=z,this.a33=Z}static quadrilateralToQuadrilateral(u,p,_,E,T,R,N,z,Z,oe,ue,ge,Ae,$e,We,Je){const st=Ge.quadrilateralToSquare(u,p,_,E,T,R,N,z);return Ge.squareToQuadrilateral(Z,oe,ue,ge,Ae,$e,We,Je).times(st)}transformPoints(u){const p=u.length,_=this.a11,E=this.a12,T=this.a13,R=this.a21,N=this.a22,z=this.a23,Z=this.a31,oe=this.a32,ue=this.a33;for(let ge=0;ge<p;ge+=2){const Ae=u[ge],$e=u[ge+1],We=T*Ae+z*$e+ue;u[ge]=(_*Ae+R*$e+Z)/We,u[ge+1]=(E*Ae+N*$e+oe)/We}}transformPointsWithValues(u,p){const _=this.a11,E=this.a12,T=this.a13,R=this.a21,N=this.a22,z=this.a23,Z=this.a31,oe=this.a32,ue=this.a33,ge=u.length;for(let Ae=0;Ae<ge;Ae++){const $e=u[Ae],We=p[Ae],Je=T*$e+z*We+ue;u[Ae]=(_*$e+R*We+Z)/Je,p[Ae]=(E*$e+N*We+oe)/Je}}static squareToQuadrilateral(u,p,_,E,T,R,N,z){const Z=u-_+T-N,oe=p-E+R-z;if(Z===0&&oe===0)return new Ge(_-u,T-_,u,E-p,R-E,p,0,0,1);{const ue=_-T,ge=N-T,Ae=E-R,$e=z-R,We=ue*$e-ge*Ae,Je=(Z*$e-ge*oe)/We,st=(ue*oe-Z*Ae)/We;return new Ge(_-u+Je*_,N-u+st*N,u,E-p+Je*E,z-p+st*z,p,Je,st,1)}}static quadrilateralToSquare(u,p,_,E,T,R,N,z){return Ge.squareToQuadrilateral(u,p,_,E,T,R,N,z).buildAdjoint()}buildAdjoint(){return new Ge(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(u){return new Ge(this.a11*u.a11+this.a21*u.a12+this.a31*u.a13,this.a11*u.a21+this.a21*u.a22+this.a31*u.a23,this.a11*u.a31+this.a21*u.a32+this.a31*u.a33,this.a12*u.a11+this.a22*u.a12+this.a32*u.a13,this.a12*u.a21+this.a22*u.a22+this.a32*u.a23,this.a12*u.a31+this.a22*u.a32+this.a32*u.a33,this.a13*u.a11+this.a23*u.a12+this.a33*u.a13,this.a13*u.a21+this.a23*u.a22+this.a33*u.a23,this.a13*u.a31+this.a23*u.a32+this.a33*u.a33)}}class ut extends Ue{sampleGrid(u,p,_,E,T,R,N,z,Z,oe,ue,ge,Ae,$e,We,Je,st,kt,Mt){const Rt=Ge.quadrilateralToQuadrilateral(E,T,R,N,z,Z,oe,ue,ge,Ae,$e,We,Je,st,kt,Mt);return this.sampleGridWithTransform(u,p,_,Rt)}sampleGridWithTransform(u,p,_,E){if(p<=0||_<=0)throw new q;const T=new Q(p,_),R=new Float32Array(2*p);for(let N=0;N<_;N++){const z=R.length,Z=N+.5;for(let oe=0;oe<z;oe+=2)R[oe]=oe/2+.5,R[oe+1]=Z;E.transformPoints(R),Ue.checkAndNudgePoints(u,R);try{for(let oe=0;oe<z;oe+=2)u.get(Math.floor(R[oe]),Math.floor(R[oe+1]))&&T.set(oe/2,N)}catch{throw new q}}return T}}class at{static setGridSampler(u){at.gridSampler=u}static getInstance(){return at.gridSampler}}at.gridSampler=new ut;class Ut{constructor(u,p){this.x=u,this.y=p}toResultPoint(){return new Se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Zt{constructor(u){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=u}detect(){return this.detectMirror(!1)}detectMirror(u){let p=this.getMatrixCenter(),_=this.getBullsEyeCorners(p);if(u){let R=_[0];_[0]=_[2],_[2]=R}this.extractParameters(_);let E=this.sampleGrid(this.image,_[this.shift%4],_[(this.shift+1)%4],_[(this.shift+2)%4],_[(this.shift+3)%4]),T=this.getMatrixCornerPoints(_);return new Le(E,T,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(u){if(!this.isValidPoint(u[0])||!this.isValidPoint(u[1])||!this.isValidPoint(u[2])||!this.isValidPoint(u[3]))throw new q;let p=2*this.nbCenterLayers,_=new Int32Array([this.sampleLine(u[0],u[1],p),this.sampleLine(u[1],u[2],p),this.sampleLine(u[2],u[3],p),this.sampleLine(u[3],u[0],p)]);this.shift=this.getRotation(_,p);let E=0;for(let R=0;R<4;R++){let N=_[(this.shift+R)%4];this.compact?(E<<=7,E+=N>>1&127):(E<<=10,E+=(N>>2&992)+(N>>1&31))}let T=this.getCorrectedParameterData(E,this.compact);this.compact?(this.nbLayers=(T>>6)+1,this.nbDataBlocks=(T&63)+1):(this.nbLayers=(T>>11)+1,this.nbDataBlocks=(T&2047)+1)}getRotation(u,p){let _=0;u.forEach((E,T,R)=>{let N=(E>>p-2<<1)+(E&1);_=(_<<3)+N}),_=((_&1)<<11)+(_>>1);for(let E=0;E<4;E++)if(y.bitCount(_^this.EXPECTED_CORNER_BITS[E])<=2)return E;throw new q}getCorrectedParameterData(u,p){let _,E;p?(_=7,E=2):(_=10,E=4);let T=_-E,R=new Int32Array(_);for(let z=_-1;z>=0;--z)R[z]=u&15,u>>=4;try{new qe(Pe.AZTEC_PARAM).decode(R,T)}catch{throw new q}let N=0;for(let z=0;z<E;z++)N=(N<<4)+R[z];return N}getBullsEyeCorners(u){let p=u,_=u,E=u,T=u,R=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ue=this.getFirstDifferent(p,R,1,-1),ge=this.getFirstDifferent(_,R,1,1),Ae=this.getFirstDifferent(E,R,-1,1),$e=this.getFirstDifferent(T,R,-1,-1);if(this.nbCenterLayers>2){let We=this.distancePoint($e,ue)*this.nbCenterLayers/(this.distancePoint(T,p)*(this.nbCenterLayers+2));if(We<.75||We>1.25||!this.isWhiteOrBlackRectangle(ue,ge,Ae,$e))break}p=ue,_=ge,E=Ae,T=$e,R=!R}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new q;this.compact=this.nbCenterLayers===5;let N=new Se(p.getX()+.5,p.getY()-.5),z=new Se(_.getX()+.5,_.getY()+.5),Z=new Se(E.getX()-.5,E.getY()+.5),oe=new Se(T.getX()-.5,T.getY()-.5);return this.expandSquare([N,z,Z,oe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let u,p,_,E;try{let N=new ze(this.image).detect();u=N[0],p=N[1],_=N[2],E=N[3]}catch{let z=this.image.getWidth()/2,Z=this.image.getHeight()/2;u=this.getFirstDifferent(new Ut(z+7,Z-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Ut(z+7,Z+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Ut(z-7,Z+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new Ut(z-7,Z-7),!1,-1,-1).toResultPoint()}let T=ht.round((u.getX()+E.getX()+p.getX()+_.getX())/4),R=ht.round((u.getY()+E.getY()+p.getY()+_.getY())/4);try{let N=new ze(this.image,15,T,R).detect();u=N[0],p=N[1],_=N[2],E=N[3]}catch{u=this.getFirstDifferent(new Ut(T+7,R-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Ut(T+7,R+7),!1,1,1).toResultPoint(),_=this.getFirstDifferent(new Ut(T-7,R+7),!1,-1,1).toResultPoint(),E=this.getFirstDifferent(new Ut(T-7,R-7),!1,-1,-1).toResultPoint()}return T=ht.round((u.getX()+E.getX()+p.getX()+_.getX())/4),R=ht.round((u.getY()+E.getY()+p.getY()+_.getY())/4),new Ut(T,R)}getMatrixCornerPoints(u){return this.expandSquare(u,2*this.nbCenterLayers,this.getDimension())}sampleGrid(u,p,_,E,T){let R=at.getInstance(),N=this.getDimension(),z=N/2-this.nbCenterLayers,Z=N/2+this.nbCenterLayers;return R.sampleGrid(u,N,N,z,z,Z,z,Z,Z,z,Z,p.getX(),p.getY(),_.getX(),_.getY(),E.getX(),E.getY(),T.getX(),T.getY())}sampleLine(u,p,_){let E=0,T=this.distanceResultPoint(u,p),R=T/_,N=u.getX(),z=u.getY(),Z=R*(p.getX()-u.getX())/T,oe=R*(p.getY()-u.getY())/T;for(let ue=0;ue<_;ue++)this.image.get(ht.round(N+ue*Z),ht.round(z+ue*oe))&&(E|=1<<_-ue-1);return E}isWhiteOrBlackRectangle(u,p,_,E){let T=3;u=new Ut(u.getX()-T,u.getY()+T),p=new Ut(p.getX()-T,p.getY()-T),_=new Ut(_.getX()+T,_.getY()-T),E=new Ut(E.getX()+T,E.getY()+T);let R=this.getColor(E,u);if(R===0)return!1;let N=this.getColor(u,p);return N!==R||(N=this.getColor(p,_),N!==R)?!1:(N=this.getColor(_,E),N===R)}getColor(u,p){let _=this.distancePoint(u,p),E=(p.getX()-u.getX())/_,T=(p.getY()-u.getY())/_,R=0,N=u.getX(),z=u.getY(),Z=this.image.get(u.getX(),u.getY()),oe=Math.ceil(_);for(let ge=0;ge<oe;ge++)N+=E,z+=T,this.image.get(ht.round(N),ht.round(z))!==Z&&R++;let ue=R/_;return ue>.1&&ue<.9?0:ue<=.1===Z?1:-1}getFirstDifferent(u,p,_,E){let T=u.getX()+_,R=u.getY()+E;for(;this.isValid(T,R)&&this.image.get(T,R)===p;)T+=_,R+=E;for(T-=_,R-=E;this.isValid(T,R)&&this.image.get(T,R)===p;)T+=_;for(T-=_;this.isValid(T,R)&&this.image.get(T,R)===p;)R+=E;return R-=E,new Ut(T,R)}expandSquare(u,p,_){let E=_/(2*p),T=u[0].getX()-u[2].getX(),R=u[0].getY()-u[2].getY(),N=(u[0].getX()+u[2].getX())/2,z=(u[0].getY()+u[2].getY())/2,Z=new Se(N+E*T,z+E*R),oe=new Se(N-E*T,z-E*R);T=u[1].getX()-u[3].getX(),R=u[1].getY()-u[3].getY(),N=(u[1].getX()+u[3].getX())/2,z=(u[1].getY()+u[3].getY())/2;let ue=new Se(N+E*T,z+E*R),ge=new Se(N-E*T,z-E*R);return[Z,ue,oe,ge]}isValid(u,p){return u>=0&&u<this.image.getWidth()&&p>0&&p<this.image.getHeight()}isValidPoint(u){let p=ht.round(u.getX()),_=ht.round(u.getY());return this.isValid(p,_)}distancePoint(u,p){return ht.distance(u.getX(),u.getY(),p.getX(),p.getY())}distanceResultPoint(u,p){return ht.distance(u.getX(),u.getY(),p.getX(),p.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(y.truncDivision(this.nbLayers-4,8)+1)+15}}class Pt{decode(u,p=null){let _=null,E=new Zt(u.getBlackMatrix()),T=null,R=null;try{let oe=E.detectMirror(!1);T=oe.getPoints(),this.reportFoundResultPoints(p,T),R=new mt().decode(oe)}catch(oe){_=oe}if(R==null)try{let oe=E.detectMirror(!0);T=oe.getPoints(),this.reportFoundResultPoints(p,T),R=new mt().decode(oe)}catch(oe){throw _??oe}let N=new Te(R.getText(),R.getRawBytes(),R.getNumBits(),T,Ie.AZTEC,w.currentTimeMillis()),z=R.getByteSegments();z!=null&&N.putMetadata(pe.BYTE_SEGMENTS,z);let Z=R.getECLevel();return Z!=null&&N.putMetadata(pe.ERROR_CORRECTION_LEVEL,Z),N}reportFoundResultPoints(u,p){if(u!=null){let _=u.get(P.NEED_RESULT_POINT_CALLBACK);_!=null&&p.forEach((E,T,R)=>{_.foundPossibleResultPoint(E)})}}reset(){}}class Ot extends Re{constructor(u=500){super(new Pt,u)}}class vt{decode(u,p){try{return this.doDecode(u,p)}catch{if(p&&p.get(P.TRY_HARDER)===!0&&u.isRotateSupported()){const T=u.rotateCounterClockwise(),R=this.doDecode(T,p),N=R.getResultMetadata();let z=270;N!==null&&N.get(pe.ORIENTATION)===!0&&(z=z+N.get(pe.ORIENTATION)%360),R.putMetadata(pe.ORIENTATION,z);const Z=R.getResultPoints();if(Z!==null){const oe=T.getHeight();for(let ue=0;ue<Z.length;ue++)Z[ue]=new Se(oe-Z[ue].getY()-1,Z[ue].getX())}return R}else throw new q}}reset(){}doDecode(u,p){const _=u.getWidth(),E=u.getHeight();let T=new O(_);const R=p&&p.get(P.TRY_HARDER)===!0,N=Math.max(1,E>>(R?8:5));let z;R?z=E:z=15;const Z=Math.trunc(E/2);for(let oe=0;oe<z;oe++){const ue=Math.trunc((oe+1)/2),ge=(oe&1)===0,Ae=Z+N*(ge?ue:-ue);if(Ae<0||Ae>=E)break;try{T=u.getBlackRow(Ae,T)}catch{continue}for(let $e=0;$e<2;$e++){if($e===1&&(T.reverse(),p&&p.get(P.NEED_RESULT_POINT_CALLBACK)===!0)){const We=new Map;p.forEach((Je,st)=>We.set(st,Je)),We.delete(P.NEED_RESULT_POINT_CALLBACK),p=We}try{const We=this.decodeRow(Ae,T,p);if($e===1){We.putMetadata(pe.ORIENTATION,180);const Je=We.getResultPoints();Je!==null&&(Je[0]=new Se(_-Je[0].getX()-1,Je[0].getY()),Je[1]=new Se(_-Je[1].getX()-1,Je[1].getY()))}return We}catch{}}}throw new q}static recordPattern(u,p,_){const E=_.length;for(let Z=0;Z<E;Z++)_[Z]=0;const T=u.getSize();if(p>=T)throw new q;let R=!u.get(p),N=0,z=p;for(;z<T;){if(u.get(z)!==R)_[N]++;else{if(++N===E)break;_[N]=1,R=!R}z++}if(!(N===E||N===E-1&&z===T))throw new q}static recordPatternInReverse(u,p,_){let E=_.length,T=u.get(p);for(;p>0&&E>=0;)u.get(--p)!==T&&(E--,T=!T);if(E>=0)throw new q;vt.recordPattern(u,p+1,_)}static patternMatchVariance(u,p,_){const E=u.length;let T=0,R=0;for(let Z=0;Z<E;Z++)T+=u[Z],R+=p[Z];if(T<R)return Number.POSITIVE_INFINITY;const N=T/R;_*=N;let z=0;for(let Z=0;Z<E;Z++){const oe=u[Z],ue=p[Z]*N,ge=oe>ue?oe-ue:ue-oe;if(ge>_)return Number.POSITIVE_INFINITY;z+=ge}return z/T}}class Ve extends vt{static findStartPattern(u){const p=u.getSize(),_=u.getNextSet(0);let E=0,T=Int32Array.from([0,0,0,0,0,0]),R=_,N=!1;const z=6;for(let Z=_;Z<p;Z++)if(u.get(Z)!==N)T[E]++;else{if(E===z-1){let oe=Ve.MAX_AVG_VARIANCE,ue=-1;for(let ge=Ve.CODE_START_A;ge<=Ve.CODE_START_C;ge++){const Ae=vt.patternMatchVariance(T,Ve.CODE_PATTERNS[ge],Ve.MAX_INDIVIDUAL_VARIANCE);Ae<oe&&(oe=Ae,ue=ge)}if(ue>=0&&u.isRange(Math.max(0,R-(Z-R)/2),R,!1))return Int32Array.from([R,Z,ue]);R+=T[0]+T[1],T=T.slice(2,T.length-1),T[E-1]=0,T[E]=0,E--}else E++;T[E]=1,N=!N}throw new q}static decodeCode(u,p,_){vt.recordPattern(u,_,p);let E=Ve.MAX_AVG_VARIANCE,T=-1;for(let R=0;R<Ve.CODE_PATTERNS.length;R++){const N=Ve.CODE_PATTERNS[R],z=this.patternMatchVariance(p,N,Ve.MAX_INDIVIDUAL_VARIANCE);z<E&&(E=z,T=R)}if(T>=0)return T;throw new q}decodeRow(u,p,_){const E=_&&_.get(P.ASSUME_GS1)===!0,T=Ve.findStartPattern(p),R=T[2];let N=0;const z=new Uint8Array(20);z[N++]=R;let Z;switch(R){case Ve.CODE_START_A:Z=Ve.CODE_CODE_A;break;case Ve.CODE_START_B:Z=Ve.CODE_CODE_B;break;case Ve.CODE_START_C:Z=Ve.CODE_CODE_C;break;default:throw new L}let oe=!1,ue=!1,ge="",Ae=T[0],$e=T[1];const We=Int32Array.from([0,0,0,0,0,0]);let Je=0,st=0,kt=R,Mt=0,Rt=!0,Tr=!1,yr=!1;for(;!oe;){const oi=ue;switch(ue=!1,Je=st,st=Ve.decodeCode(p,We,$e),z[N++]=st,st!==Ve.CODE_STOP&&(Rt=!0),st!==Ve.CODE_STOP&&(Mt++,kt+=Mt*st),Ae=$e,$e+=We.reduce((ui,di)=>ui+di,0),st){case Ve.CODE_START_A:case Ve.CODE_START_B:case Ve.CODE_START_C:throw new L}switch(Z){case Ve.CODE_CODE_A:if(st<64)yr===Tr?ge+=String.fromCharCode(32+st):ge+=String.fromCharCode(32+st+128),yr=!1;else if(st<96)yr===Tr?ge+=String.fromCharCode(st-64):ge+=String.fromCharCode(st+64),yr=!1;else switch(st!==Ve.CODE_STOP&&(Rt=!1),st){case Ve.CODE_FNC_1:E&&(ge.length===0?ge+="]C1":ge+="");break;case Ve.CODE_FNC_2:case Ve.CODE_FNC_3:break;case Ve.CODE_FNC_4_A:!Tr&&yr?(Tr=!0,yr=!1):Tr&&yr?(Tr=!1,yr=!1):yr=!0;break;case Ve.CODE_SHIFT:ue=!0,Z=Ve.CODE_CODE_B;break;case Ve.CODE_CODE_B:Z=Ve.CODE_CODE_B;break;case Ve.CODE_CODE_C:Z=Ve.CODE_CODE_C;break;case Ve.CODE_STOP:oe=!0;break}break;case Ve.CODE_CODE_B:if(st<96)yr===Tr?ge+=String.fromCharCode(32+st):ge+=String.fromCharCode(32+st+128),yr=!1;else switch(st!==Ve.CODE_STOP&&(Rt=!1),st){case Ve.CODE_FNC_1:E&&(ge.length===0?ge+="]C1":ge+="");break;case Ve.CODE_FNC_2:case Ve.CODE_FNC_3:break;case Ve.CODE_FNC_4_B:!Tr&&yr?(Tr=!0,yr=!1):Tr&&yr?(Tr=!1,yr=!1):yr=!0;break;case Ve.CODE_SHIFT:ue=!0,Z=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_A:Z=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_C:Z=Ve.CODE_CODE_C;break;case Ve.CODE_STOP:oe=!0;break}break;case Ve.CODE_CODE_C:if(st<100)st<10&&(ge+="0"),ge+=st;else switch(st!==Ve.CODE_STOP&&(Rt=!1),st){case Ve.CODE_FNC_1:E&&(ge.length===0?ge+="]C1":ge+="");break;case Ve.CODE_CODE_A:Z=Ve.CODE_CODE_A;break;case Ve.CODE_CODE_B:Z=Ve.CODE_CODE_B;break;case Ve.CODE_STOP:oe=!0;break}break}oi&&(Z=Z===Ve.CODE_CODE_A?Ve.CODE_CODE_B:Ve.CODE_CODE_A)}const Qr=$e-Ae;if($e=p.getNextUnset($e),!p.isRange($e,Math.min(p.getSize(),$e+($e-Ae)/2),!1))throw new q;if(kt-=Mt*Je,kt%103!==Je)throw new S;const ln=ge.length;if(ln===0)throw new q;ln>0&&Rt&&(Z===Ve.CODE_CODE_C?ge=ge.substring(0,ln-2):ge=ge.substring(0,ln-1));const Pn=(T[1]+T[0])/2,Vr=Ae+Qr/2,yn=z.length,In=new Uint8Array(yn);for(let oi=0;oi<yn;oi++)In[oi]=z[oi];const si=[new Se(Pn,u),new Se(Vr,u)];return new Te(ge,In,0,si,Ie.CODE_128,new Date().getTime())}}Ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ve.MAX_AVG_VARIANCE=.25,Ve.MAX_INDIVIDUAL_VARIANCE=.7,Ve.CODE_SHIFT=98,Ve.CODE_CODE_C=99,Ve.CODE_CODE_B=100,Ve.CODE_CODE_A=101,Ve.CODE_FNC_1=102,Ve.CODE_FNC_2=97,Ve.CODE_FNC_3=96,Ve.CODE_FNC_4_A=101,Ve.CODE_FNC_4_B=100,Ve.CODE_START_A=103,Ve.CODE_START_B=104,Ve.CODE_START_C=105,Ve.CODE_STOP=106;class pt extends vt{constructor(u=!1,p=!1){super(),this.usingCheckDigit=u,this.extendedMode=p,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(u,p,_){let E=this.counters;E.fill(0),this.decodeRowResult="";let T=pt.findAsteriskPattern(p,E),R=p.getNextSet(T[1]),N=p.getSize(),z,Z;do{pt.recordPattern(p,R,E);let We=pt.toNarrowWidePattern(E);if(We<0)throw new q;z=pt.patternToChar(We),this.decodeRowResult+=z,Z=R;for(let Je of E)R+=Je;R=p.getNextSet(R)}while(z!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let oe=0;for(let We of E)oe+=We;let ue=R-Z-oe;if(R!==N&&ue*2<oe)throw new q;if(this.usingCheckDigit){let We=this.decodeRowResult.length-1,Je=0;for(let st=0;st<We;st++)Je+=pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(st));if(this.decodeRowResult.charAt(We)!==pt.ALPHABET_STRING.charAt(Je%43))throw new S;this.decodeRowResult=this.decodeRowResult.substring(0,We)}if(this.decodeRowResult.length===0)throw new q;let ge;this.extendedMode?ge=pt.decodeExtended(this.decodeRowResult):ge=this.decodeRowResult;let Ae=(T[1]+T[0])/2,$e=Z+oe/2;return new Te(ge,null,0,[new Se(Ae,u),new Se($e,u)],Ie.CODE_39,new Date().getTime())}static findAsteriskPattern(u,p){let _=u.getSize(),E=u.getNextSet(0),T=0,R=E,N=!1,z=p.length;for(let Z=E;Z<_;Z++)if(u.get(Z)!==N)p[T]++;else{if(T===z-1){if(this.toNarrowWidePattern(p)===pt.ASTERISK_ENCODING&&u.isRange(Math.max(0,R-Math.floor((Z-R)/2)),R,!1))return[R,Z];R+=p[0]+p[1],p.copyWithin(0,2,2+T-1),p[T-1]=0,p[T]=0,T--}else T++;p[T]=1,N=!N}throw new q}static toNarrowWidePattern(u){let p=u.length,_=0,E;do{let T=2147483647;for(let z of u)z<T&&z>_&&(T=z);_=T,E=0;let R=0,N=0;for(let z=0;z<p;z++){let Z=u[z];Z>_&&(N|=1<<p-1-z,E++,R+=Z)}if(E===3){for(let z=0;z<p&&E>0;z++){let Z=u[z];if(Z>_&&(E--,Z*2>=R))return-1}return N}}while(E>3);return-1}static patternToChar(u){for(let p=0;p<pt.CHARACTER_ENCODINGS.length;p++)if(pt.CHARACTER_ENCODINGS[p]===u)return pt.ALPHABET_STRING.charAt(p);if(u===pt.ASTERISK_ENCODING)return"*";throw new q}static decodeExtended(u){let p=u.length,_="";for(let E=0;E<p;E++){let T=u.charAt(E);if(T==="+"||T==="$"||T==="%"||T==="/"){let R=u.charAt(E+1),N="\0";switch(T){case"+":if(R>="A"&&R<="Z")N=String.fromCharCode(R.charCodeAt(0)+32);else throw new L;break;case"$":if(R>="A"&&R<="Z")N=String.fromCharCode(R.charCodeAt(0)-64);else throw new L;break;case"%":if(R>="A"&&R<="E")N=String.fromCharCode(R.charCodeAt(0)-38);else if(R>="F"&&R<="J")N=String.fromCharCode(R.charCodeAt(0)-11);else if(R>="K"&&R<="O")N=String.fromCharCode(R.charCodeAt(0)+16);else if(R>="P"&&R<="T")N=String.fromCharCode(R.charCodeAt(0)+43);else if(R==="U")N="\0";else if(R==="V")N="@";else if(R==="W")N="`";else if(R==="X"||R==="Y"||R==="Z")N="";else throw new L;break;case"/":if(R>="A"&&R<="O")N=String.fromCharCode(R.charCodeAt(0)-32);else if(R==="Z")N=":";else throw new L;break}_+=N,E++}else _+=T}return _}}pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pt.ASTERISK_ENCODING=148;class wt extends vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(u,p,_){let E=this.decodeStart(p),T=this.decodeEnd(p),R=new V;wt.decodeMiddle(p,E[1],T[0],R);let N=R.toString(),z=null;_!=null&&(z=_.get(P.ALLOWED_LENGTHS)),z==null&&(z=wt.DEFAULT_ALLOWED_LENGTHS);let Z=N.length,oe=!1,ue=0;for(let $e of z){if(Z===$e){oe=!0;break}$e>ue&&(ue=$e)}if(!oe&&Z>ue&&(oe=!0),!oe)throw new L;const ge=[new Se(E[1],u),new Se(T[0],u)];return new Te(N,null,0,ge,Ie.ITF,new Date().getTime())}static decodeMiddle(u,p,_,E){let T=new Int32Array(10),R=new Int32Array(5),N=new Int32Array(5);for(T.fill(0),R.fill(0),N.fill(0);p<_;){vt.recordPattern(u,p,T);for(let Z=0;Z<5;Z++){let oe=2*Z;R[Z]=T[oe],N[Z]=T[oe+1]}let z=wt.decodeDigit(R);E.append(z.toString()),z=this.decodeDigit(N),E.append(z.toString()),T.forEach(function(Z){p+=Z})}}decodeStart(u){let p=wt.skipWhiteSpace(u),_=wt.findGuardPattern(u,p,wt.START_PATTERN);return this.narrowLineWidth=(_[1]-_[0])/4,this.validateQuietZone(u,_[0]),_}validateQuietZone(u,p){let _=this.narrowLineWidth*10;_=_<p?_:p;for(let E=p-1;_>0&&E>=0&&!u.get(E);E--)_--;if(_!==0)throw new q}static skipWhiteSpace(u){const p=u.getSize(),_=u.getNextSet(0);if(_===p)throw new q;return _}decodeEnd(u){u.reverse();try{let p=wt.skipWhiteSpace(u),_;try{_=wt.findGuardPattern(u,p,wt.END_PATTERN_REVERSED[0])}catch(T){T instanceof q&&(_=wt.findGuardPattern(u,p,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(u,_[0]);let E=_[0];return _[0]=u.getSize()-_[1],_[1]=u.getSize()-E,_}finally{u.reverse()}}static findGuardPattern(u,p,_){let E=_.length,T=new Int32Array(E),R=u.getSize(),N=!1,z=0,Z=p;T.fill(0);for(let oe=p;oe<R;oe++)if(u.get(oe)!==N)T[z]++;else{if(z===E-1){if(vt.patternMatchVariance(T,_,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[Z,oe];Z+=T[0]+T[1],w.arraycopy(T,2,T,0,z-1),T[z-1]=0,T[z]=0,z--}else z++;T[z]=1,N=!N}throw new q}static decodeDigit(u){let p=wt.MAX_AVG_VARIANCE,_=-1,E=wt.PATTERNS.length;for(let T=0;T<E;T++){let R=wt.PATTERNS[T],N=vt.patternMatchVariance(u,R,wt.MAX_INDIVIDUAL_VARIANCE);N<p?(p=N,_=T):N===p&&(_=-1)}if(_>=0)return _%10;throw new q}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(u){let p=!1,_,E=0,T=Int32Array.from([0,0,0]);for(;!p;){T=Int32Array.from([0,0,0]),_=Ct.findGuardPattern(u,E,!1,this.START_END_PATTERN,T);let R=_[0];E=_[1];let N=R-(E-R);N>=0&&(p=u.isRange(N,R,!1))}return _}static checkChecksum(u){return Ct.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let p=u.length;if(p===0)return!1;let _=parseInt(u.charAt(p-1),10);return Ct.getStandardUPCEANChecksum(u.substring(0,p-1))===_}static getStandardUPCEANChecksum(u){let p=u.length,_=0;for(let E=p-1;E>=0;E-=2){let T=u.charAt(E).charCodeAt(0)-48;if(T<0||T>9)throw new L;_+=T}_*=3;for(let E=p-2;E>=0;E-=2){let T=u.charAt(E).charCodeAt(0)-48;if(T<0||T>9)throw new L;_+=T}return(1e3-_)%10}static decodeEnd(u,p){return Ct.findGuardPattern(u,p,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(u,p,_,E){return this.findGuardPattern(u,p,_,E,new Int32Array(E.length))}static findGuardPattern(u,p,_,E,T){let R=u.getSize();p=_?u.getNextUnset(p):u.getNextSet(p);let N=0,z=p,Z=E.length,oe=_;for(let ue=p;ue<R;ue++)if(u.get(ue)!==oe)T[N]++;else{if(N===Z-1){if(vt.patternMatchVariance(T,E,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([z,ue]);z+=T[0]+T[1];let ge=T.slice(2,T.length-1);for(let Ae=0;Ae<N-1;Ae++)T[Ae]=ge[Ae];T[N-1]=0,T[N]=0,N--}else N++;T[N]=1,oe=!oe}throw new q}static decodeDigit(u,p,_,E){this.recordPattern(u,_,p);let T=this.MAX_AVG_VARIANCE,R=-1,N=E.length;for(let z=0;z<N;z++){let Z=E[z],oe=vt.patternMatchVariance(p,Z,Ct.MAX_INDIVIDUAL_VARIANCE);oe<T&&(T=oe,R=z)}if(R>=0)return R;throw new q}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $t{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,p,_){let E=this.decodeRowStringBuffer,T=this.decodeMiddle(p,_,E),R=E.toString(),N=$t.parseExtensionString(R),z=[new Se((_[0]+_[1])/2,u),new Se(T,u)],Z=new Te(R,null,0,z,Ie.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&Z.putAllMetadata(N),Z}decodeMiddle(u,p,_){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let T=u.getSize(),R=p[1],N=0;for(let Z=0;Z<5&&R<T;Z++){let oe=Ct.decodeDigit(u,E,R,Ct.L_AND_G_PATTERNS);_+=String.fromCharCode(48+oe%10);for(let ue of E)R+=ue;oe>=10&&(N|=1<<4-Z),Z!==4&&(R=u.getNextSet(R),R=u.getNextUnset(R))}if(_.length!==5)throw new q;let z=this.determineCheckDigit(N);if($t.extensionChecksum(_.toString())!==z)throw new q;return R}static extensionChecksum(u){let p=u.length,_=0;for(let E=p-2;E>=0;E-=2)_+=u.charAt(E).charCodeAt(0)-48;_*=3;for(let E=p-1;E>=0;E-=2)_+=u.charAt(E).charCodeAt(0)-48;return _*=3,_%10}determineCheckDigit(u){for(let p=0;p<10;p++)if(u===this.CHECK_DIGIT_ENCODINGS[p])return p;throw new q}static parseExtensionString(u){if(u.length!==5)return null;let p=$t.parseExtension5String(u);return p==null?null:new Map([[pe.SUGGESTED_PRICE,p]])}static parseExtension5String(u){let p;switch(u.charAt(0)){case"0":p="£";break;case"5":p="$";break;case"9":switch(u){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}p="";break;default:p="";break}let _=parseInt(u.substring(1)),E=(_/100).toString(),T=_%100,R=T<10?"0"+T:T.toString();return p+E+"."+R}}class yt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,p,_){let E=this.decodeRowStringBuffer,T=this.decodeMiddle(p,_,E),R=E.toString(),N=yt.parseExtensionString(R),z=[new Se((_[0]+_[1])/2,u),new Se(T,u)],Z=new Te(R,null,0,z,Ie.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&Z.putAllMetadata(N),Z}decodeMiddle(u,p,_){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let T=u.getSize(),R=p[1],N=0;for(let z=0;z<2&&R<T;z++){let Z=Ct.decodeDigit(u,E,R,Ct.L_AND_G_PATTERNS);_+=String.fromCharCode(48+Z%10);for(let oe of E)R+=oe;Z>=10&&(N|=1<<1-z),z!==1&&(R=u.getNextSet(R),R=u.getNextUnset(R))}if(_.length!==2)throw new q;if(parseInt(_.toString())%4!==N)throw new q;return R}static parseExtensionString(u){return u.length!==2?null:new Map([[pe.ISSUE_NUMBER,parseInt(u)]])}}class lt{static decodeRow(u,p,_){let E=Ct.findGuardPattern(p,_,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $t().decodeRow(u,p,E)}catch{return new yt().decodeRow(u,p,E)}}}lt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class dt extends Ct{constructor(){super(),this.decodeRowStringBuffer="",dt.L_AND_G_PATTERNS=dt.L_PATTERNS.map(u=>Int32Array.from(u));for(let u=10;u<20;u++){let p=dt.L_PATTERNS[u-10],_=new Int32Array(p.length);for(let E=0;E<p.length;E++)_[E]=p[p.length-E-1];dt.L_AND_G_PATTERNS[u]=_}}decodeRow(u,p,_){let E=dt.findStartGuardPattern(p),T=_==null?null:_.get(P.NEED_RESULT_POINT_CALLBACK);if(T!=null){const Rt=new Se((E[0]+E[1])/2,u);T.foundPossibleResultPoint(Rt)}let R=this.decodeMiddle(p,E,this.decodeRowStringBuffer),N=R.rowOffset,z=R.resultString;if(T!=null){const Rt=new Se(N,u);T.foundPossibleResultPoint(Rt)}let Z=this.decodeEnd(p,N);if(T!=null){const Rt=new Se((Z[0]+Z[1])/2,u);T.foundPossibleResultPoint(Rt)}let oe=Z[1],ue=oe+(oe-Z[0]);if(ue>=p.getSize()||!p.isRange(oe,ue,!1))throw new q;let ge=z.toString();if(ge.length<8)throw new L;if(!dt.checkChecksum(ge))throw new S;let Ae=(E[1]+E[0])/2,$e=(Z[1]+Z[0])/2,We=this.getBarcodeFormat(),Je=[new Se(Ae,u),new Se($e,u)],st=new Te(ge,null,0,Je,We,new Date().getTime()),kt=0;try{let Rt=lt.decodeRow(u,p,Z[1]);st.putMetadata(pe.UPC_EAN_EXTENSION,Rt.getText()),st.putAllMetadata(Rt.getResultMetadata()),st.addResultPoints(Rt.getResultPoints()),kt=Rt.getText().length}catch{}let Mt=_==null?null:_.get(P.ALLOWED_EAN_EXTENSIONS);if(Mt!=null){let Rt=!1;for(let Tr in Mt)if(kt.toString()===Tr){Rt=!0;break}if(!Rt)throw new q}return st}decodeEnd(u,p){return dt.findGuardPattern(u,p,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static checkChecksum(u){return dt.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let p=u.length;if(p===0)return!1;let _=parseInt(u.charAt(p-1),10);return dt.getStandardUPCEANChecksum(u.substring(0,p-1))===_}static getStandardUPCEANChecksum(u){let p=u.length,_=0;for(let E=p-1;E>=0;E-=2){let T=u.charAt(E).charCodeAt(0)-48;if(T<0||T>9)throw new L;_+=T}_*=3;for(let E=p-2;E>=0;E-=2){let T=u.charAt(E).charCodeAt(0)-48;if(T<0||T>9)throw new L;_+=T}return(1e3-_)%10}}class xt extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,p,_){let E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let T=u.getSize(),R=p[1],N=0;for(let Z=0;Z<6&&R<T;Z++){let oe=dt.decodeDigit(u,E,R,dt.L_AND_G_PATTERNS);_+=String.fromCharCode(48+oe%10);for(let ue of E)R+=ue;oe>=10&&(N|=1<<5-Z)}_=xt.determineFirstDigit(_,N),R=dt.findGuardPattern(u,R,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let Z=0;Z<6&&R<T;Z++){let oe=dt.decodeDigit(u,E,R,dt.L_PATTERNS);_+=String.fromCharCode(48+oe);for(let ue of E)R+=ue}return{rowOffset:R,resultString:_}}getBarcodeFormat(){return Ie.EAN_13}static determineFirstDigit(u,p){for(let _=0;_<10;_++)if(p===this.FIRST_DIGIT_ENCODINGS[_])return u=String.fromCharCode(48+_)+u,u;throw new q}}xt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Wt extends dt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,p,_){const E=this.decodeMiddleCounters;E[0]=0,E[1]=0,E[2]=0,E[3]=0;let T=u.getSize(),R=p[1];for(let z=0;z<4&&R<T;z++){let Z=dt.decodeDigit(u,E,R,dt.L_PATTERNS);_+=String.fromCharCode(48+Z);for(let oe of E)R+=oe}R=dt.findGuardPattern(u,R,!0,dt.MIDDLE_PATTERN,new Int32Array(dt.MIDDLE_PATTERN.length).fill(0))[1];for(let z=0;z<4&&R<T;z++){let Z=dt.decodeDigit(u,E,R,dt.L_PATTERNS);_+=String.fromCharCode(48+Z);for(let oe of E)R+=oe}return{rowOffset:R,resultString:_}}getBarcodeFormat(){return Ie.EAN_8}}class hr extends dt{constructor(){super(...arguments),this.ean13Reader=new xt}getBarcodeFormat(){return Ie.UPC_A}decode(u,p){return this.maybeReturnResult(this.ean13Reader.decode(u))}decodeRow(u,p,_){return this.maybeReturnResult(this.ean13Reader.decodeRow(u,p,_))}decodeMiddle(u,p,_){return this.ean13Reader.decodeMiddle(u,p,_)}maybeReturnResult(u){let p=u.getText();if(p.charAt(0)==="0"){let _=new Te(p.substring(1),null,null,u.getResultPoints(),Ie.UPC_A);return u.getResultMetadata()!=null&&_.putAllMetadata(u.getResultMetadata()),_}else throw new q}reset(){this.ean13Reader.reset()}}class Yt extends dt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(u,p,_){const E=this.decodeMiddleCounters.map(Z=>Z);E[0]=0,E[1]=0,E[2]=0,E[3]=0;const T=u.getSize();let R=p[1],N=0;for(let Z=0;Z<6&&R<T;Z++){const oe=Yt.decodeDigit(u,E,R,Yt.L_AND_G_PATTERNS);_+=String.fromCharCode(48+oe%10);for(let ue of E)R+=ue;oe>=10&&(N|=1<<5-Z)}let z=Yt.determineNumSysAndCheckDigit(_,N);return{rowOffset:R,resultString:z}}decodeEnd(u,p){return Yt.findGuardPatternWithoutCounters(u,p,!0,Yt.MIDDLE_END_PATTERN)}checkChecksum(u){return dt.checkChecksum(Yt.convertUPCEtoUPCA(u))}static determineNumSysAndCheckDigit(u,p){for(let _=0;_<=1;_++)for(let E=0;E<10;E++)if(p===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[_][E]){let T=String.fromCharCode(48+_),R=String.fromCharCode(48+E);return T+u+R}throw q.getNotFoundInstance()}getBarcodeFormat(){return Ie.UPC_E}static convertUPCEtoUPCA(u){const p=u.slice(1,7).split("").map(T=>T.charCodeAt(0)),_=new V;_.append(u.charAt(0));let E=p[5];switch(E){case 0:case 1:case 2:_.appendChars(p,0,2),_.append(E),_.append("0000"),_.appendChars(p,2,3);break;case 3:_.appendChars(p,0,3),_.append("00000"),_.appendChars(p,3,2);break;case 4:_.appendChars(p,0,4),_.append("00000"),_.append(p[4]);break;default:_.appendChars(p,0,5),_.append("0000"),_.append(E);break}return u.length>=8&&_.append(u.charAt(7)),_.toString()}}Yt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class vr extends vt{constructor(u){super();let p=u==null?null:u.get(P.POSSIBLE_FORMATS),_=[];n(p)?(_.push(new xt),_.push(new hr),_.push(new Wt),_.push(new Yt)):(p.indexOf(Ie.EAN_13)>-1&&_.push(new xt),p.indexOf(Ie.UPC_A)>-1&&_.push(new hr),p.indexOf(Ie.EAN_8)>-1&&_.push(new Wt),p.indexOf(Ie.UPC_E)>-1&&_.push(new Yt)),this.readers=_}decodeRow(u,p,_){for(let E of this.readers)try{const T=E.decodeRow(u,p,_),R=T.getBarcodeFormat()===Ie.EAN_13&&T.getText().charAt(0)==="0",N=_==null?null:_.get(P.POSSIBLE_FORMATS),z=N==null||N.includes(Ie.UPC_A);if(R&&z){const Z=T.getRawBytes(),oe=new Te(T.getText().substring(1),Z,Z?Z.length:null,T.getResultPoints(),Ie.UPC_A);return oe.putAllMetadata(T.getResultMetadata()),oe}return T}catch{}throw new q}reset(){for(let u of this.readers)u.reset()}}class fr extends vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(u,p){for(let _=0;_<p.length;_++)if(vt.patternMatchVariance(u,p[_],fr.MAX_INDIVIDUAL_VARIANCE)<fr.MAX_AVG_VARIANCE)return _;throw new q}static count(u){return ht.sum(new Int32Array(u))}static increment(u,p){let _=0,E=p[0];for(let T=1;T<u.length;T++)p[T]>E&&(E=p[T],_=T);u[_]++}static decrement(u,p){let _=0,E=p[0];for(let T=1;T<u.length;T++)p[T]<E&&(E=p[T],_=T);u[_]--}static isFinderPattern(u){let p=u[0]+u[1],_=p+u[2]+u[3],E=p/_;if(E>=fr.MIN_FINDER_PATTERN_RATIO&&E<=fr.MAX_FINDER_PATTERN_RATIO){let T=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;for(let N of u)N>R&&(R=N),N<T&&(T=N);return R<10*T}return!1}}fr.MAX_AVG_VARIANCE=.2,fr.MAX_INDIVIDUAL_VARIANCE=.45,fr.MIN_FINDER_PATTERN_RATIO=9.5/12,fr.MAX_FINDER_PATTERN_RATIO=12.5/14;class br{constructor(u,p){this.value=u,this.checksumPortion=p}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(u){if(!(u instanceof br))return!1;const p=u;return this.value===p.value&&this.checksumPortion===p.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class $r{constructor(u,p,_,E,T){this.value=u,this.startEnd=p,this.value=u,this.startEnd=p,this.resultPoints=new Array,this.resultPoints.push(new Se(_,T)),this.resultPoints.push(new Se(E,T))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(u){if(!(u instanceof $r))return!1;const p=u;return this.value===p.value}hashCode(){return this.value}}class Lr{constructor(){}static getRSSvalue(u,p,_){let E=0;for(let z of u)E+=z;let T=0,R=0,N=u.length;for(let z=0;z<N-1;z++){let Z;for(Z=1,R|=1<<z;Z<u[z];Z++,R&=~(1<<z)){let oe=Lr.combins(E-Z-1,N-z-2);if(_&&R===0&&E-Z-(N-z-1)>=N-z-1&&(oe-=Lr.combins(E-Z-(N-z),N-z-2)),N-z-1>1){let ue=0;for(let ge=E-Z-(N-z-2);ge>p;ge--)ue+=Lr.combins(E-Z-ge-1,N-z-3);oe-=ue*(N-1-z)}else E-Z>p&&oe--;T+=oe}E-=Z}return T}static combins(u,p){let _,E;u-p>p?(E=p,_=u-p):(E=u-p,_=p);let T=1,R=1;for(let N=u;N>_;N--)T*=N,R<=E&&(T/=R,R++);for(;R<=E;)T/=R,R++;return T}}class fn{static buildBitArray(u){let p=u.length*2-1;u[u.length-1].getRightChar()==null&&(p-=1);let _=12*p,E=new O(_),T=0,N=u[0].getRightChar().getValue();for(let z=11;z>=0;--z)N&1<<z&&E.set(T),T++;for(let z=1;z<u.length;++z){let Z=u[z],oe=Z.getLeftChar().getValue();for(let ue=11;ue>=0;--ue)oe&1<<ue&&E.set(T),T++;if(Z.getRightChar()!=null){let ue=Z.getRightChar().getValue();for(let ge=11;ge>=0;--ge)ue&1<<ge&&E.set(T),T++}}return E}}class pn{constructor(u,p){p?this.decodedInformation=null:(this.finished=u,this.decodedInformation=p)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _r{constructor(u){this.newPosition=u}getNewPosition(){return this.newPosition}}class ir extends _r{constructor(u,p){super(u),this.value=p}getValue(){return this.value}isFNC1(){return this.value===ir.FNC1}}ir.FNC1="$";class Jt extends _r{constructor(u,p,_){super(u),_?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=p}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class gt extends _r{constructor(u,p,_){if(super(u),p<0||p>10||_<0||_>10)throw new L;this.firstDigit=p,this.secondDigit=_}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===gt.FNC1}isSecondDigitFNC1(){return this.secondDigit===gt.FNC1}isAnyFNC1(){return this.firstDigit===gt.FNC1||this.secondDigit===gt.FNC1}}gt.FNC1=10;class it{constructor(){}static parseFieldsInGeneralPurpose(u){if(!u)return null;if(u.length<2)throw new q;let p=u.substring(0,2);for(let T of it.TWO_DIGIT_DATA_LENGTH)if(T[0]===p)return T[1]===it.VARIABLE_LENGTH?it.processVariableAI(2,T[2],u):it.processFixedAI(2,T[1],u);if(u.length<3)throw new q;let _=u.substring(0,3);for(let T of it.THREE_DIGIT_DATA_LENGTH)if(T[0]===_)return T[1]===it.VARIABLE_LENGTH?it.processVariableAI(3,T[2],u):it.processFixedAI(3,T[1],u);for(let T of it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(T[0]===_)return T[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,T[2],u):it.processFixedAI(4,T[1],u);if(u.length<4)throw new q;let E=u.substring(0,4);for(let T of it.FOUR_DIGIT_DATA_LENGTH)if(T[0]===E)return T[1]===it.VARIABLE_LENGTH?it.processVariableAI(4,T[2],u):it.processFixedAI(4,T[1],u);throw new q}static processFixedAI(u,p,_){if(_.length<u)throw new q;let E=_.substring(0,u);if(_.length<u+p)throw new q;let T=_.substring(u,u+p),R=_.substring(u+p),N="("+E+")"+T,z=it.parseFieldsInGeneralPurpose(R);return z==null?N:N+z}static processVariableAI(u,p,_){let E=_.substring(0,u),T;_.length<u+p?T=_.length:T=u+p;let R=_.substring(u,T),N=_.substring(T),z="("+E+")"+R,Z=it.parseFieldsInGeneralPurpose(N);return Z==null?z:z+Z}}it.VARIABLE_LENGTH=[],it.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",it.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",it.VARIABLE_LENGTH,20],["22",it.VARIABLE_LENGTH,29],["30",it.VARIABLE_LENGTH,8],["37",it.VARIABLE_LENGTH,8],["90",it.VARIABLE_LENGTH,30],["91",it.VARIABLE_LENGTH,30],["92",it.VARIABLE_LENGTH,30],["93",it.VARIABLE_LENGTH,30],["94",it.VARIABLE_LENGTH,30],["95",it.VARIABLE_LENGTH,30],["96",it.VARIABLE_LENGTH,30],["97",it.VARIABLE_LENGTH,3],["98",it.VARIABLE_LENGTH,30],["99",it.VARIABLE_LENGTH,30]],it.THREE_DIGIT_DATA_LENGTH=[["240",it.VARIABLE_LENGTH,30],["241",it.VARIABLE_LENGTH,30],["242",it.VARIABLE_LENGTH,6],["250",it.VARIABLE_LENGTH,30],["251",it.VARIABLE_LENGTH,30],["253",it.VARIABLE_LENGTH,17],["254",it.VARIABLE_LENGTH,20],["400",it.VARIABLE_LENGTH,30],["401",it.VARIABLE_LENGTH,30],["402",17],["403",it.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",it.VARIABLE_LENGTH,20],["421",it.VARIABLE_LENGTH,15],["422",3],["423",it.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],it.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",it.VARIABLE_LENGTH,15],["391",it.VARIABLE_LENGTH,18],["392",it.VARIABLE_LENGTH,15],["393",it.VARIABLE_LENGTH,18],["703",it.VARIABLE_LENGTH,30]],it.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",it.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",it.VARIABLE_LENGTH,20],["8003",it.VARIABLE_LENGTH,30],["8004",it.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",it.VARIABLE_LENGTH,30],["8008",it.VARIABLE_LENGTH,12],["8018",18],["8020",it.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",it.VARIABLE_LENGTH,70],["8200",it.VARIABLE_LENGTH,70]];class ct{constructor(u){this.buffer=new V,this.information=u}decodeAllCodes(u,p){let _=p,E=null;do{let T=this.decodeGeneralPurposeField(_,E),R=it.parseFieldsInGeneralPurpose(T.getNewString());if(R!=null&&u.append(R),T.isRemaining()?E=""+T.getRemainingValue():E=null,_===T.getNewPosition())break;_=T.getNewPosition()}while(!0);return u.toString()}isStillNumeric(u){if(u+7>this.information.getSize())return u+4<=this.information.getSize();for(let p=u;p<u+3;++p)if(this.information.get(p))return!0;return this.information.get(u+3)}decodeNumeric(u){if(u+7>this.information.getSize()){let T=this.extractNumericValueFromBitArray(u,4);return T===0?new gt(this.information.getSize(),gt.FNC1,gt.FNC1):new gt(this.information.getSize(),T-1,gt.FNC1)}let p=this.extractNumericValueFromBitArray(u,7),_=(p-8)/11,E=(p-8)%11;return new gt(u+7,_,E)}extractNumericValueFromBitArray(u,p){return ct.extractNumericValueFromBitArray(this.information,u,p)}static extractNumericValueFromBitArray(u,p,_){let E=0;for(let T=0;T<_;++T)u.get(p+T)&&(E|=1<<_-T-1);return E}decodeGeneralPurposeField(u,p){this.buffer.setLengthToZero(),p!=null&&this.buffer.append(p),this.current.setPosition(u);let _=this.parseBlocks();return _!=null&&_.isRemaining()?new Jt(this.current.getPosition(),this.buffer.toString(),_.getRemainingValue()):new Jt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let u,p;do{let _=this.current.getPosition();if(this.current.isAlpha()?(p=this.parseAlphaBlock(),u=p.isFinished()):this.current.isIsoIec646()?(p=this.parseIsoIec646Block(),u=p.isFinished()):(p=this.parseNumericBlock(),u=p.isFinished()),!(_!==this.current.getPosition())&&!u)break}while(!u);return p.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let u=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFirstDigitFNC1()){let p;return u.isSecondDigitFNC1()?p=new Jt(this.current.getPosition(),this.buffer.toString()):p=new Jt(this.current.getPosition(),this.buffer.toString(),u.getSecondDigit()),new pn(!0,p)}if(this.buffer.append(u.getFirstDigit()),u.isSecondDigitFNC1()){let p=new Jt(this.current.getPosition(),this.buffer.toString());return new pn(!0,p)}this.buffer.append(u.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let u=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let p=new Jt(this.current.getPosition(),this.buffer.toString());return new pn(!0,p)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let u=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let p=new Jt(this.current.getPosition(),this.buffer.toString());return new pn(!0,p)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pn(!1)}isStillIsoIec646(u){if(u+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(u,5);if(p>=5&&p<16)return!0;if(u+7>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(u,7);if(_>=64&&_<116)return!0;if(u+8>this.information.getSize())return!1;let E=this.extractNumericValueFromBitArray(u,8);return E>=232&&E<253}decodeIsoIec646(u){let p=this.extractNumericValueFromBitArray(u,5);if(p===15)return new ir(u+5,ir.FNC1);if(p>=5&&p<15)return new ir(u+5,"0"+(p-5));let _=this.extractNumericValueFromBitArray(u,7);if(_>=64&&_<90)return new ir(u+7,""+(_+1));if(_>=90&&_<116)return new ir(u+7,""+(_+7));let E=this.extractNumericValueFromBitArray(u,8),T;switch(E){case 232:T="!";break;case 233:T='"';break;case 234:T="%";break;case 235:T="&";break;case 236:T="'";break;case 237:T="(";break;case 238:T=")";break;case 239:T="*";break;case 240:T="+";break;case 241:T=",";break;case 242:T="-";break;case 243:T=".";break;case 244:T="/";break;case 245:T=":";break;case 246:T=";";break;case 247:T="<";break;case 248:T="=";break;case 249:T=">";break;case 250:T="?";break;case 251:T="_";break;case 252:T=" ";break;default:throw new L}return new ir(u+8,T)}isStillAlpha(u){if(u+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(u,5);if(p>=5&&p<16)return!0;if(u+6>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(u,6);return _>=16&&_<63}decodeAlphanumeric(u){let p=this.extractNumericValueFromBitArray(u,5);if(p===15)return new ir(u+5,ir.FNC1);if(p>=5&&p<15)return new ir(u+5,"0"+(p-5));let _=this.extractNumericValueFromBitArray(u,6);if(_>=32&&_<58)return new ir(u+6,""+(_+33));let E;switch(_){case 58:E="*";break;case 59:E=",";break;case 60:E="-";break;case 61:E=".";break;case 62:E="/";break;default:throw new _e("Decoding invalid alphanumeric value: "+_)}return new ir(u+6,E)}isAlphaTo646ToAlphaLatch(u){if(u+1>this.information.getSize())return!1;for(let p=0;p<5&&p+u<this.information.getSize();++p)if(p===2){if(!this.information.get(u+2))return!1}else if(this.information.get(u+p))return!1;return!0}isAlphaOr646ToNumericLatch(u){if(u+3>this.information.getSize())return!1;for(let p=u;p<u+3;++p)if(this.information.get(p))return!1;return!0}isNumericToAlphaNumericLatch(u){if(u+1>this.information.getSize())return!1;for(let p=0;p<4&&p+u<this.information.getSize();++p)if(this.information.get(u+p))return!1;return!0}}class De{constructor(u){this.information=u,this.generalDecoder=new ct(u)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class er extends De{constructor(u){super(u)}encodeCompressedGtin(u,p){u.append("(01)");let _=u.length();u.append("9"),this.encodeCompressedGtinWithoutAI(u,p,_)}encodeCompressedGtinWithoutAI(u,p,_){for(let E=0;E<4;++E){let T=this.getGeneralDecoder().extractNumericValueFromBitArray(p+10*E,10);T/100===0&&u.append("0"),T/10===0&&u.append("0"),u.append(T)}er.appendCheckDigit(u,_)}static appendCheckDigit(u,p){let _=0;for(let E=0;E<13;E++){let T=u.charAt(E+p).charCodeAt(0)-48;_+=E&1?T:3*T}_=10-_%10,_===10&&(_=0),u.append(_)}}er.GTIN_SIZE=40;class Cr extends er{constructor(u){super(u)}parseInformation(){let u=new V;u.append("(01)");let p=u.length(),_=this.getGeneralDecoder().extractNumericValueFromBitArray(Cr.HEADER_SIZE,4);return u.append(_),this.encodeCompressedGtinWithoutAI(u,Cr.HEADER_SIZE+4,p),this.getGeneralDecoder().decodeAllCodes(u,Cr.HEADER_SIZE+44)}}Cr.HEADER_SIZE=4;class wr extends De{constructor(u){super(u)}parseInformation(){let u=new V;return this.getGeneralDecoder().decodeAllCodes(u,wr.HEADER_SIZE)}}wr.HEADER_SIZE=5;class Xt extends er{constructor(u){super(u)}encodeCompressedWeight(u,p,_){let E=this.getGeneralDecoder().extractNumericValueFromBitArray(p,_);this.addWeightCode(u,E);let T=this.checkWeight(E),R=1e5;for(let N=0;N<5;++N)T/R===0&&u.append("0"),R/=10;u.append(T)}}class Vt extends Xt{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()!=Vt.HEADER_SIZE+Xt.GTIN_SIZE+Vt.WEIGHT_SIZE)throw new q;let u=new V;return this.encodeCompressedGtin(u,Vt.HEADER_SIZE),this.encodeCompressedWeight(u,Vt.HEADER_SIZE+Xt.GTIN_SIZE,Vt.WEIGHT_SIZE),u.toString()}}Vt.HEADER_SIZE=5,Vt.WEIGHT_SIZE=15;class zt extends Vt{constructor(u){super(u)}addWeightCode(u,p){u.append("(3103)")}checkWeight(u){return u}}class bt extends Vt{constructor(u){super(u)}addWeightCode(u,p){p<1e4?u.append("(3202)"):u.append("(3203)")}checkWeight(u){return u<1e4?u:u-1e4}}class _t extends er{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<_t.HEADER_SIZE+er.GTIN_SIZE)throw new q;let u=new V;this.encodeCompressedGtin(u,_t.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+er.GTIN_SIZE,_t.LAST_DIGIT_SIZE);u.append("(392"),u.append(p),u.append(")");let _=this.getGeneralDecoder().decodeGeneralPurposeField(_t.HEADER_SIZE+er.GTIN_SIZE+_t.LAST_DIGIT_SIZE,null);return u.append(_.getNewString()),u.toString()}}_t.HEADER_SIZE=8,_t.LAST_DIGIT_SIZE=2;class Lt extends er{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<Lt.HEADER_SIZE+er.GTIN_SIZE)throw new q;let u=new V;this.encodeCompressedGtin(u,Lt.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+er.GTIN_SIZE,Lt.LAST_DIGIT_SIZE);u.append("(393"),u.append(p),u.append(")");let _=this.getGeneralDecoder().extractNumericValueFromBitArray(Lt.HEADER_SIZE+er.GTIN_SIZE+Lt.LAST_DIGIT_SIZE,Lt.FIRST_THREE_DIGITS_SIZE);_/100==0&&u.append("0"),_/10==0&&u.append("0"),u.append(_);let E=this.getGeneralDecoder().decodeGeneralPurposeField(Lt.HEADER_SIZE+er.GTIN_SIZE+Lt.LAST_DIGIT_SIZE+Lt.FIRST_THREE_DIGITS_SIZE,null);return u.append(E.getNewString()),u.toString()}}Lt.HEADER_SIZE=8,Lt.LAST_DIGIT_SIZE=2,Lt.FIRST_THREE_DIGITS_SIZE=10;class Gt extends Xt{constructor(u,p,_){super(u),this.dateCode=_,this.firstAIdigits=p}parseInformation(){if(this.getInformation().getSize()!=Gt.HEADER_SIZE+Gt.GTIN_SIZE+Gt.WEIGHT_SIZE+Gt.DATE_SIZE)throw new q;let u=new V;return this.encodeCompressedGtin(u,Gt.HEADER_SIZE),this.encodeCompressedWeight(u,Gt.HEADER_SIZE+Gt.GTIN_SIZE,Gt.WEIGHT_SIZE),this.encodeCompressedDate(u,Gt.HEADER_SIZE+Gt.GTIN_SIZE+Gt.WEIGHT_SIZE),u.toString()}encodeCompressedDate(u,p){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(p,Gt.DATE_SIZE);if(_==38400)return;u.append("("),u.append(this.dateCode),u.append(")");let E=_%32;_/=32;let T=_%12+1;_/=12;let R=_;R/10==0&&u.append("0"),u.append(R),T/10==0&&u.append("0"),u.append(T),E/10==0&&u.append("0"),u.append(E)}addWeightCode(u,p){u.append("("),u.append(this.firstAIdigits),u.append(p/1e5),u.append(")")}checkWeight(u){return u%1e5}}Gt.HEADER_SIZE=8,Gt.WEIGHT_SIZE=20,Gt.DATE_SIZE=16;function lr(ae){try{if(ae.get(1))return new Cr(ae);if(!ae.get(2))return new wr(ae);switch(ct.extractNumericValueFromBitArray(ae,1,4)){case 4:return new zt(ae);case 5:return new bt(ae)}switch(ct.extractNumericValueFromBitArray(ae,1,5)){case 12:return new _t(ae);case 13:return new Lt(ae)}switch(ct.extractNumericValueFromBitArray(ae,1,7)){case 56:return new Gt(ae,"310","11");case 57:return new Gt(ae,"320","11");case 58:return new Gt(ae,"310","13");case 59:return new Gt(ae,"320","13");case 60:return new Gt(ae,"310","15");case 61:return new Gt(ae,"320","15");case 62:return new Gt(ae,"310","17");case 63:return new Gt(ae,"320","17")}}catch(u){throw console.log(u),new _e("unknown decoder: "+ae)}}class rr{constructor(u,p,_,E){this.leftchar=u,this.rightchar=p,this.finderpattern=_,this.maybeLast=E}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(u,p){return u instanceof rr?rr.equalsOrNull(u.leftchar,p.leftchar)&&rr.equalsOrNull(u.rightchar,p.rightchar)&&rr.equalsOrNull(u.finderpattern,p.finderpattern):!1}static equalsOrNull(u,p){return u===null?p===null:rr.equals(u,p)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kt{constructor(u,p,_){this.pairs=u,this.rowNumber=p,this.wasReversed=_}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(u){return this.checkEqualitity(this,u)}toString(){return"{ "+this.pairs+" }"}equals(u,p){return u instanceof Kt?this.checkEqualitity(u,p)&&u.wasReversed===p.wasReversed:!1}checkEqualitity(u,p){if(!u||!p)return;let _;return u.forEach((E,T)=>{p.forEach(R=>{E.getLeftChar().getValue()===R.getLeftChar().getValue()&&E.getRightChar().getValue()===R.getRightChar().getValue()&&E.getFinderPatter().getValue()===R.getFinderPatter().getValue()&&(_=!0)})}),_}}class ot extends fr{constructor(u){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=u===!0}decodeRow(u,p,_){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(u,p))}catch(E){this.verbose&&console.log(E)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(u,p))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(u,p){let _=!1;for(;!_;)try{this.pairs.push(this.retrieveNextPair(p,this.pairs,u))}catch(T){if(T instanceof q){if(!this.pairs.length)throw new q;_=!0}}if(this.checkChecksum())return this.pairs;let E;if(this.rows.length?E=!0:E=!1,this.storeRow(u,!1),E){let T=this.checkRowsBoolean(!1);if(T!=null||(T=this.checkRowsBoolean(!0),T!=null))return T}throw new q}checkRowsBoolean(u){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,u&&(this.rows=this.rows.reverse());let p=null;try{p=this.checkRows(new Array,0)}catch(_){this.verbose&&console.log(_)}return u&&(this.rows=this.rows.reverse()),p}checkRows(u,p){for(let _=p;_<this.rows.length;_++){let E=this.rows[_];this.pairs.length=0;for(let R of u)this.pairs.push(R.getPairs());if(this.pairs.push(E.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let T=new Array(u);T.push(E);try{return this.checkRows(T,_+1)}catch(R){this.verbose&&console.log(R)}}throw new q}static isValidSequence(u){for(let p of ot.FINDER_PATTERN_SEQUENCES){if(u.length>p.length)continue;let _=!0;for(let E=0;E<u.length;E++)if(u[E].getFinderPattern().getValue()!=p[E]){_=!1;break}if(_)return!0}return!1}storeRow(u,p){let _=0,E=!1,T=!1;for(;_<this.rows.length;){let R=this.rows[_];if(R.getRowNumber()>u){T=R.isEquivalent(this.pairs);break}E=R.isEquivalent(this.pairs),_++}T||E||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(_,new Kt(this.pairs,u,p)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(u,p){for(let _ of p)if(_.getPairs().length!==u.length){for(let E of _.getPairs())for(let T of u)if(rr.equals(E,T))break}}static isPartialRow(u,p){for(let _ of p){let E=!0;for(let T of u){let R=!1;for(let N of _.getPairs())if(T.equals(N)){R=!0;break}if(!R){E=!1;break}}if(E)return!0}return!1}getRows(){return this.rows}static constructResult(u){let p=fn.buildBitArray(u),E=lr(p).parseInformation(),T=u[0].getFinderPattern().getResultPoints(),R=u[u.length-1].getFinderPattern().getResultPoints(),N=[T[0],T[1],R[0],R[1]];return new Te(E,null,null,N,Ie.RSS_EXPANDED,null)}checkChecksum(){let u=this.pairs.get(0),p=u.getLeftChar(),_=u.getRightChar();if(_==null)return!1;let E=_.getChecksumPortion(),T=2;for(let N=1;N<this.pairs.size();++N){let z=this.pairs.get(N);E+=z.getLeftChar().getChecksumPortion(),T++;let Z=z.getRightChar();Z!=null&&(E+=Z.getChecksumPortion(),T++)}return E%=211,211*(T-4)+E==p.getValue()}static getNextSecondBar(u,p){let _;return u.get(p)?(_=u.getNextUnset(p),_=u.getNextSet(_)):(_=u.getNextSet(p),_=u.getNextUnset(_)),_}retrieveNextPair(u,p,_){let E=p.length%2==0;this.startFromEven&&(E=!E);let T,R=!0,N=-1;do this.findNextPair(u,p,N),T=this.parseFoundFinderPattern(u,_,E),T==null?N=ot.getNextSecondBar(u,this.startEnd[0]):R=!1;while(R);let z=this.decodeDataCharacter(u,T,E,!0);if(!this.isEmptyPair(p)&&p[p.length-1].mustBeLast())throw new q;let Z;try{Z=this.decodeDataCharacter(u,T,E,!1)}catch(oe){Z=null,this.verbose&&console.log(oe)}return new rr(z,Z,T,!0)}isEmptyPair(u){return u.length===0}findNextPair(u,p,_){let E=this.getDecodeFinderCounters();E[0]=0,E[1]=0,E[2]=0,E[3]=0;let T=u.getSize(),R;_>=0?R=_:this.isEmptyPair(p)?R=0:R=p[p.length-1].getFinderPattern().getStartEnd()[1];let N=p.length%2!=0;this.startFromEven&&(N=!N);let z=!1;for(;R<T&&(z=!u.get(R),!!z);)R++;let Z=0,oe=R;for(let ue=R;ue<T;ue++)if(u.get(ue)!=z)E[Z]++;else{if(Z==3){if(N&&ot.reverseCounters(E),ot.isFinderPattern(E)){this.startEnd[0]=oe,this.startEnd[1]=ue;return}N&&ot.reverseCounters(E),oe+=E[0]+E[1],E[0]=E[2],E[1]=E[3],E[2]=0,E[3]=0,Z--}else Z++;E[Z]=1,z=!z}throw new q}static reverseCounters(u){let p=u.length;for(let _=0;_<p/2;++_){let E=u[_];u[_]=u[p-_-1],u[p-_-1]=E}}parseFoundFinderPattern(u,p,_){let E,T,R;if(_){let Z=this.startEnd[0]-1;for(;Z>=0&&!u.get(Z);)Z--;Z++,E=this.startEnd[0]-Z,T=Z,R=this.startEnd[1]}else T=this.startEnd[0],R=u.getNextUnset(this.startEnd[1]+1),E=R-this.startEnd[1];let N=this.getDecodeFinderCounters();w.arraycopy(N,0,N,1,N.length-1),N[0]=E;let z;try{z=this.parseFinderValue(N,ot.FINDER_PATTERNS)}catch{return null}return new $r(z,[T,R],T,R,p)}decodeDataCharacter(u,p,_,E){let T=this.getDataCharacterCounters();for(let Vr=0;Vr<T.length;Vr++)T[Vr]=0;if(E)ot.recordPatternInReverse(u,p.getStartEnd()[0],T);else{ot.recordPattern(u,p.getStartEnd()[1],T);for(let Vr=0,yn=T.length-1;Vr<yn;Vr++,yn--){let In=T[Vr];T[Vr]=T[yn],T[yn]=In}}let R=17,N=ht.sum(new Int32Array(T))/R,z=(p.getStartEnd()[1]-p.getStartEnd()[0])/15;if(Math.abs(N-z)/z>.3)throw new q;let Z=this.getOddCounts(),oe=this.getEvenCounts(),ue=this.getOddRoundingErrors(),ge=this.getEvenRoundingErrors();for(let Vr=0;Vr<T.length;Vr++){let yn=1*T[Vr]/N,In=yn+.5;if(In<1){if(yn<.3)throw new q;In=1}else if(In>8){if(yn>8.7)throw new q;In=8}let si=Vr/2;Vr&1?(oe[si]=In,ge[si]=yn-In):(Z[si]=In,ue[si]=yn-In)}this.adjustOddEvenCounts(R);let Ae=4*p.getValue()+(_?0:2)+(E?0:1)-1,$e=0,We=0;for(let Vr=Z.length-1;Vr>=0;Vr--){if(ot.isNotA1left(p,_,E)){let yn=ot.WEIGHTS[Ae][2*Vr];We+=Z[Vr]*yn}$e+=Z[Vr]}let Je=0;for(let Vr=oe.length-1;Vr>=0;Vr--)if(ot.isNotA1left(p,_,E)){let yn=ot.WEIGHTS[Ae][2*Vr+1];Je+=oe[Vr]*yn}let st=We+Je;if($e&1||$e>13||$e<4)throw new q;let kt=(13-$e)/2,Mt=ot.SYMBOL_WIDEST[kt],Rt=9-Mt,Tr=Lr.getRSSvalue(Z,Mt,!0),yr=Lr.getRSSvalue(oe,Rt,!1),Qr=ot.EVEN_TOTAL_SUBSET[kt],ln=ot.GSUM[kt],Pn=Tr*Qr+yr+ln;return new br(Pn,st)}static isNotA1left(u,p,_){return!(u.getValue()==0&&p&&_)}adjustOddEvenCounts(u){let p=ht.sum(new Int32Array(this.getOddCounts())),_=ht.sum(new Int32Array(this.getEvenCounts())),E=!1,T=!1;p>13?T=!0:p<4&&(E=!0);let R=!1,N=!1;_>13?N=!0:_<4&&(R=!0);let z=p+_-u,Z=(p&1)==1,oe=(_&1)==0;if(z==1)if(Z){if(oe)throw new q;T=!0}else{if(!oe)throw new q;N=!0}else if(z==-1)if(Z){if(oe)throw new q;E=!0}else{if(!oe)throw new q;R=!0}else if(z==0){if(Z){if(!oe)throw new q;p<_?(E=!0,N=!0):(T=!0,R=!0)}else if(oe)throw new q}else throw new q;if(E){if(T)throw new q;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(T&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(N)throw new q;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class ur extends br{constructor(u,p,_){super(u,p),this.count=0,this.finderPattern=_}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nr extends fr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(u,p,_){const E=this.decodePair(p,!1,u,_);nr.addOrTally(this.possibleLeftPairs,E),p.reverse();let T=this.decodePair(p,!0,u,_);nr.addOrTally(this.possibleRightPairs,T),p.reverse();for(let R of this.possibleLeftPairs)if(R.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&nr.checkChecksum(R,N))return nr.constructResult(R,N)}throw new q}static addOrTally(u,p){if(p==null)return;let _=!1;for(let E of u)if(E.getValue()===p.getValue()){E.incrementCount(),_=!0;break}_||u.push(p)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(u,p){let _=4537077*u.getValue()+p.getValue(),E=new String(_).toString(),T=new V;for(let Z=13-E.length;Z>0;Z--)T.append("0");T.append(E);let R=0;for(let Z=0;Z<13;Z++){let oe=T.charAt(Z).charCodeAt(0)-48;R+=Z&1?oe:3*oe}R=10-R%10,R===10&&(R=0),T.append(R.toString());let N=u.getFinderPattern().getResultPoints(),z=p.getFinderPattern().getResultPoints();return new Te(T.toString(),null,0,[N[0],N[1],z[0],z[1]],Ie.RSS_14,new Date().getTime())}static checkChecksum(u,p){let _=(u.getChecksumPortion()+16*p.getChecksumPortion())%79,E=9*u.getFinderPattern().getValue()+p.getFinderPattern().getValue();return E>72&&E--,E>8&&E--,_===E}decodePair(u,p,_,E){try{let T=this.findFinderPattern(u,p),R=this.parseFoundFinderPattern(u,_,p,T),N=E==null?null:E.get(P.NEED_RESULT_POINT_CALLBACK);if(N!=null){let oe=(T[0]+T[1])/2;p&&(oe=u.getSize()-1-oe),N.foundPossibleResultPoint(new Se(oe,_))}let z=this.decodeDataCharacter(u,R,!0),Z=this.decodeDataCharacter(u,R,!1);return new ur(1597*z.getValue()+Z.getValue(),z.getChecksumPortion()+4*Z.getChecksumPortion(),R)}catch{return null}}decodeDataCharacter(u,p,_){let E=this.getDataCharacterCounters();for(let Je=0;Je<E.length;Je++)E[Je]=0;if(_)vt.recordPatternInReverse(u,p.getStartEnd()[0],E);else{vt.recordPattern(u,p.getStartEnd()[1]+1,E);for(let Je=0,st=E.length-1;Je<st;Je++,st--){let kt=E[Je];E[Je]=E[st],E[st]=kt}}let T=_?16:15,R=ht.sum(new Int32Array(E))/T,N=this.getOddCounts(),z=this.getEvenCounts(),Z=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let Je=0;Je<E.length;Je++){let st=E[Je]/R,kt=Math.floor(st+.5);kt<1?kt=1:kt>8&&(kt=8);let Mt=Math.floor(Je/2);Je&1?(z[Mt]=kt,oe[Mt]=st-kt):(N[Mt]=kt,Z[Mt]=st-kt)}this.adjustOddEvenCounts(_,T);let ue=0,ge=0;for(let Je=N.length-1;Je>=0;Je--)ge*=9,ge+=N[Je],ue+=N[Je];let Ae=0,$e=0;for(let Je=z.length-1;Je>=0;Je--)Ae*=9,Ae+=z[Je],$e+=z[Je];let We=ge+3*Ae;if(_){if(ue&1||ue>12||ue<4)throw new q;let Je=(12-ue)/2,st=nr.OUTSIDE_ODD_WIDEST[Je],kt=9-st,Mt=Lr.getRSSvalue(N,st,!1),Rt=Lr.getRSSvalue(z,kt,!0),Tr=nr.OUTSIDE_EVEN_TOTAL_SUBSET[Je],yr=nr.OUTSIDE_GSUM[Je];return new br(Mt*Tr+Rt+yr,We)}else{if($e&1||$e>10||$e<4)throw new q;let Je=(10-$e)/2,st=nr.INSIDE_ODD_WIDEST[Je],kt=9-st,Mt=Lr.getRSSvalue(N,st,!0),Rt=Lr.getRSSvalue(z,kt,!1),Tr=nr.INSIDE_ODD_TOTAL_SUBSET[Je],yr=nr.INSIDE_GSUM[Je];return new br(Rt*Tr+Mt+yr,We)}}findFinderPattern(u,p){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let E=u.getSize(),T=!1,R=0;for(;R<E&&(T=!u.get(R),p!==T);)R++;let N=0,z=R;for(let Z=R;Z<E;Z++)if(u.get(Z)!==T)_[N]++;else{if(N===3){if(fr.isFinderPattern(_))return[z,Z];z+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,N--}else N++;_[N]=1,T=!T}throw new q}parseFoundFinderPattern(u,p,_,E){let T=u.get(E[0]),R=E[0]-1;for(;R>=0&&T!==u.get(R);)R--;R++;const N=E[0]-R,z=this.getDecodeFinderCounters(),Z=new Int32Array(z.length);w.arraycopy(z,0,Z,1,z.length-1),Z[0]=N;const oe=this.parseFinderValue(Z,nr.FINDER_PATTERNS);let ue=R,ge=E[1];return _&&(ue=u.getSize()-1-ue,ge=u.getSize()-1-ge),new $r(oe,[R,E[1]],ue,ge,p)}adjustOddEvenCounts(u,p){let _=ht.sum(new Int32Array(this.getOddCounts())),E=ht.sum(new Int32Array(this.getEvenCounts())),T=!1,R=!1,N=!1,z=!1;u?(_>12?R=!0:_<4&&(T=!0),E>12?z=!0:E<4&&(N=!0)):(_>11?R=!0:_<5&&(T=!0),E>10?z=!0:E<4&&(N=!0));let Z=_+E-p,oe=(_&1)===(u?1:0),ue=(E&1)===1;if(Z===1)if(oe){if(ue)throw new q;R=!0}else{if(!ue)throw new q;z=!0}else if(Z===-1)if(oe){if(ue)throw new q;T=!0}else{if(!ue)throw new q;N=!0}else if(Z===0){if(oe){if(!ue)throw new q;_<E?(T=!0,z=!0):(R=!0,N=!0)}else if(ue)throw new q}else throw new q;if(T){if(R)throw new q;fr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(R&&fr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(z)throw new q;fr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}z&&fr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nr.OUTSIDE_GSUM=[0,161,961,2015,2715],nr.INSIDE_GSUM=[0,336,1036,1516],nr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nr.INSIDE_ODD_WIDEST=[2,4,6,8],nr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class kr extends vt{constructor(u,p){super(),this.readers=[],this.verbose=p===!0;const _=u?u.get(P.POSSIBLE_FORMATS):null,E=u&&u.get(P.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;_?((_.includes(Ie.EAN_13)||_.includes(Ie.UPC_A)||_.includes(Ie.EAN_8)||_.includes(Ie.UPC_E))&&this.readers.push(new vr(u)),_.includes(Ie.CODE_39)&&this.readers.push(new pt(E)),_.includes(Ie.CODE_128)&&this.readers.push(new Ve),_.includes(Ie.ITF)&&this.readers.push(new wt),_.includes(Ie.RSS_14)&&this.readers.push(new nr),_.includes(Ie.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new vr(u)),this.readers.push(new pt),this.readers.push(new vr(u)),this.readers.push(new Ve),this.readers.push(new wt),this.readers.push(new nr),this.readers.push(new ot(this.verbose)))}decodeRow(u,p,_){for(let E=0;E<this.readers.length;E++)try{return this.readers[E].decodeRow(u,p,_)}catch{}throw new q}reset(){this.readers.forEach(u=>u.reset())}}class Ur extends Re{constructor(u=500,p){super(new kr(p),u,p)}}class dr{constructor(u,p,_){this.ecCodewords=u,this.ecBlocks=[p],_&&this.ecBlocks.push(_)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class mr{constructor(u,p){this.count=u,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ar{constructor(u,p,_,E,T,R){this.versionNumber=u,this.symbolSizeRows=p,this.symbolSizeColumns=_,this.dataRegionSizeRows=E,this.dataRegionSizeColumns=T,this.ecBlocks=R;let N=0;const z=R.getECCodewords(),Z=R.getECBlocks();for(let oe of Z)N+=oe.getCount()*(oe.getDataCodewords()+z);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(u,p){if(u&1||p&1)throw new L;for(let _ of ar.VERSIONS)if(_.symbolSizeRows===u&&_.symbolSizeColumns===p)return _;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new ar(1,10,10,8,8,new dr(5,new mr(1,3))),new ar(2,12,12,10,10,new dr(7,new mr(1,5))),new ar(3,14,14,12,12,new dr(10,new mr(1,8))),new ar(4,16,16,14,14,new dr(12,new mr(1,12))),new ar(5,18,18,16,16,new dr(14,new mr(1,18))),new ar(6,20,20,18,18,new dr(18,new mr(1,22))),new ar(7,22,22,20,20,new dr(20,new mr(1,30))),new ar(8,24,24,22,22,new dr(24,new mr(1,36))),new ar(9,26,26,24,24,new dr(28,new mr(1,44))),new ar(10,32,32,14,14,new dr(36,new mr(1,62))),new ar(11,36,36,16,16,new dr(42,new mr(1,86))),new ar(12,40,40,18,18,new dr(48,new mr(1,114))),new ar(13,44,44,20,20,new dr(56,new mr(1,144))),new ar(14,48,48,22,22,new dr(68,new mr(1,174))),new ar(15,52,52,24,24,new dr(42,new mr(2,102))),new ar(16,64,64,14,14,new dr(56,new mr(2,140))),new ar(17,72,72,16,16,new dr(36,new mr(4,92))),new ar(18,80,80,18,18,new dr(48,new mr(4,114))),new ar(19,88,88,20,20,new dr(56,new mr(4,144))),new ar(20,96,96,22,22,new dr(68,new mr(4,174))),new ar(21,104,104,24,24,new dr(56,new mr(6,136))),new ar(22,120,120,18,18,new dr(68,new mr(6,175))),new ar(23,132,132,20,20,new dr(62,new mr(8,163))),new ar(24,144,144,22,22,new dr(62,new mr(8,156),new mr(2,155))),new ar(25,8,18,6,16,new dr(7,new mr(1,5))),new ar(26,8,32,6,14,new dr(11,new mr(1,10))),new ar(27,12,26,10,24,new dr(14,new mr(1,16))),new ar(28,12,36,10,16,new dr(18,new mr(1,22))),new ar(29,16,36,14,16,new dr(24,new mr(1,32))),new ar(30,16,48,14,22,new dr(28,new mr(1,49)))]}}ar.VERSIONS=ar.buildVersions();class Yr{constructor(u){const p=u.getHeight();if(p<8||p>144||p&1)throw new L;this.version=Yr.readVersion(u),this.mappingBitMatrix=this.extractDataRegion(u),this.readMappingMatrix=new Q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(u){const p=u.getHeight(),_=u.getWidth();return ar.getVersionForDimensions(p,_)}readCodewords(){const u=new Int8Array(this.version.getTotalCodewords());let p=0,_=4,E=0;const T=this.mappingBitMatrix.getHeight(),R=this.mappingBitMatrix.getWidth();let N=!1,z=!1,Z=!1,oe=!1;do if(_===T&&E===0&&!N)u[p++]=this.readCorner1(T,R)&255,_-=2,E+=2,N=!0;else if(_===T-2&&E===0&&R&3&&!z)u[p++]=this.readCorner2(T,R)&255,_-=2,E+=2,z=!0;else if(_===T+4&&E===2&&!(R&7)&&!Z)u[p++]=this.readCorner3(T,R)&255,_-=2,E+=2,Z=!0;else if(_===T-2&&E===0&&(R&7)===4&&!oe)u[p++]=this.readCorner4(T,R)&255,_-=2,E+=2,oe=!0;else{do _<T&&E>=0&&!this.readMappingMatrix.get(E,_)&&(u[p++]=this.readUtah(_,E,T,R)&255),_-=2,E+=2;while(_>=0&&E<R);_+=1,E+=3;do _>=0&&E<R&&!this.readMappingMatrix.get(E,_)&&(u[p++]=this.readUtah(_,E,T,R)&255),_+=2,E-=2;while(_<T&&E>=0);_+=3,E+=1}while(_<T||E<R);if(p!==this.version.getTotalCodewords())throw new L;return u}readModule(u,p,_,E){return u<0&&(u+=_,p+=4-(_+4&7)),p<0&&(p+=E,u+=4-(E+4&7)),this.readMappingMatrix.set(p,u),this.mappingBitMatrix.get(p,u)}readUtah(u,p,_,E){let T=0;return this.readModule(u-2,p-2,_,E)&&(T|=1),T<<=1,this.readModule(u-2,p-1,_,E)&&(T|=1),T<<=1,this.readModule(u-1,p-2,_,E)&&(T|=1),T<<=1,this.readModule(u-1,p-1,_,E)&&(T|=1),T<<=1,this.readModule(u-1,p,_,E)&&(T|=1),T<<=1,this.readModule(u,p-2,_,E)&&(T|=1),T<<=1,this.readModule(u,p-1,_,E)&&(T|=1),T<<=1,this.readModule(u,p,_,E)&&(T|=1),T}readCorner1(u,p){let _=0;return this.readModule(u-1,0,u,p)&&(_|=1),_<<=1,this.readModule(u-1,1,u,p)&&(_|=1),_<<=1,this.readModule(u-1,2,u,p)&&(_|=1),_<<=1,this.readModule(0,p-2,u,p)&&(_|=1),_<<=1,this.readModule(0,p-1,u,p)&&(_|=1),_<<=1,this.readModule(1,p-1,u,p)&&(_|=1),_<<=1,this.readModule(2,p-1,u,p)&&(_|=1),_<<=1,this.readModule(3,p-1,u,p)&&(_|=1),_}readCorner2(u,p){let _=0;return this.readModule(u-3,0,u,p)&&(_|=1),_<<=1,this.readModule(u-2,0,u,p)&&(_|=1),_<<=1,this.readModule(u-1,0,u,p)&&(_|=1),_<<=1,this.readModule(0,p-4,u,p)&&(_|=1),_<<=1,this.readModule(0,p-3,u,p)&&(_|=1),_<<=1,this.readModule(0,p-2,u,p)&&(_|=1),_<<=1,this.readModule(0,p-1,u,p)&&(_|=1),_<<=1,this.readModule(1,p-1,u,p)&&(_|=1),_}readCorner3(u,p){let _=0;return this.readModule(u-1,0,u,p)&&(_|=1),_<<=1,this.readModule(u-1,p-1,u,p)&&(_|=1),_<<=1,this.readModule(0,p-3,u,p)&&(_|=1),_<<=1,this.readModule(0,p-2,u,p)&&(_|=1),_<<=1,this.readModule(0,p-1,u,p)&&(_|=1),_<<=1,this.readModule(1,p-3,u,p)&&(_|=1),_<<=1,this.readModule(1,p-2,u,p)&&(_|=1),_<<=1,this.readModule(1,p-1,u,p)&&(_|=1),_}readCorner4(u,p){let _=0;return this.readModule(u-3,0,u,p)&&(_|=1),_<<=1,this.readModule(u-2,0,u,p)&&(_|=1),_<<=1,this.readModule(u-1,0,u,p)&&(_|=1),_<<=1,this.readModule(0,p-2,u,p)&&(_|=1),_<<=1,this.readModule(0,p-1,u,p)&&(_|=1),_<<=1,this.readModule(1,p-1,u,p)&&(_|=1),_<<=1,this.readModule(2,p-1,u,p)&&(_|=1),_<<=1,this.readModule(3,p-1,u,p)&&(_|=1),_}extractDataRegion(u){const p=this.version.getSymbolSizeRows(),_=this.version.getSymbolSizeColumns();if(u.getHeight()!==p)throw new g("Dimension of bitMatrix must match the version size");const E=this.version.getDataRegionSizeRows(),T=this.version.getDataRegionSizeColumns(),R=p/E|0,N=_/T|0,z=R*E,Z=N*T,oe=new Q(Z,z);for(let ue=0;ue<R;++ue){const ge=ue*E;for(let Ae=0;Ae<N;++Ae){const $e=Ae*T;for(let We=0;We<E;++We){const Je=ue*(E+2)+1+We,st=ge+We;for(let kt=0;kt<T;++kt){const Mt=Ae*(T+2)+1+kt;if(u.get(Mt,Je)){const Rt=$e+kt;oe.set(Rt,st)}}}}}return oe}}class nn{constructor(u,p){this.numDataCodewords=u,this.codewords=p}static getDataBlocks(u,p){const _=p.getECBlocks();let E=0;const T=_.getECBlocks();for(let We of T)E+=We.getCount();const R=new Array(E);let N=0;for(let We of T)for(let Je=0;Je<We.getCount();Je++){const st=We.getDataCodewords(),kt=_.getECCodewords()+st;R[N++]=new nn(st,new Uint8Array(kt))}const Z=R[0].codewords.length-_.getECCodewords(),oe=Z-1;let ue=0;for(let We=0;We<oe;We++)for(let Je=0;Je<N;Je++)R[Je].codewords[We]=u[ue++];const ge=p.getVersionNumber()===24,Ae=ge?8:N;for(let We=0;We<Ae;We++)R[We].codewords[Z-1]=u[ue++];const $e=R[0].codewords.length;for(let We=Z;We<$e;We++)for(let Je=0;Je<N;Je++){const st=ge?(Je+8)%N:Je,kt=ge&&st>7?We-1:We;R[st].codewords[kt]=u[ue++]}if(ue!==u.length)throw new g;return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gn{constructor(u){this.bytes=u,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(u){if(u<1||u>32||u>this.available())throw new g(""+u);let p=0,_=this.bitOffset,E=this.byteOffset;const T=this.bytes;if(_>0){const R=8-_,N=u<R?u:R,z=R-N,Z=255>>8-N<<z;p=(T[E]&Z)>>z,u-=N,_+=N,_===8&&(_=0,E++)}if(u>0){for(;u>=8;)p=p<<8|T[E]&255,E++,u-=8;if(u>0){const R=8-u,N=255>>R<<R;p=p<<u|(T[E]&N)>>R,_+=u}}return this.bitOffset=_,this.byteOffset=E,p}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Dr;(function(ae){ae[ae.PAD_ENCODE=0]="PAD_ENCODE",ae[ae.ASCII_ENCODE=1]="ASCII_ENCODE",ae[ae.C40_ENCODE=2]="C40_ENCODE",ae[ae.TEXT_ENCODE=3]="TEXT_ENCODE",ae[ae.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ae[ae.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ae[ae.BASE256_ENCODE=6]="BASE256_ENCODE"})(Dr||(Dr={}));class sn{static decode(u){const p=new gn(u),_=new V,E=new V,T=new Array;let R=Dr.ASCII_ENCODE;do if(R===Dr.ASCII_ENCODE)R=this.decodeAsciiSegment(p,_,E);else{switch(R){case Dr.C40_ENCODE:this.decodeC40Segment(p,_);break;case Dr.TEXT_ENCODE:this.decodeTextSegment(p,_);break;case Dr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(p,_);break;case Dr.EDIFACT_ENCODE:this.decodeEdifactSegment(p,_);break;case Dr.BASE256_ENCODE:this.decodeBase256Segment(p,_,T);break;default:throw new L}R=Dr.ASCII_ENCODE}while(R!==Dr.PAD_ENCODE&&p.available()>0);return E.length()>0&&_.append(E.toString()),new me(u,_.toString(),T.length===0?null:T,null)}static decodeAsciiSegment(u,p,_){let E=!1;do{let T=u.readBits(8);if(T===0)throw new L;if(T<=128)return E&&(T+=128),p.append(String.fromCharCode(T-1)),Dr.ASCII_ENCODE;if(T===129)return Dr.PAD_ENCODE;if(T<=229){const R=T-130;R<10&&p.append("0"),p.append(""+R)}else switch(T){case 230:return Dr.C40_ENCODE;case 231:return Dr.BASE256_ENCODE;case 232:p.append("");break;case 233:case 234:break;case 235:E=!0;break;case 236:p.append("[)>05"),_.insert(0,"");break;case 237:p.append("[)>06"),_.insert(0,"");break;case 238:return Dr.ANSIX12_ENCODE;case 239:return Dr.TEXT_ENCODE;case 240:return Dr.EDIFACT_ENCODE;case 241:break;default:if(T!==254||u.available()!==0)throw new L;break}}while(u.available()>0);return Dr.ASCII_ENCODE}static decodeC40Segment(u,p){let _=!1;const E=[];let T=0;do{if(u.available()===8)return;const R=u.readBits(8);if(R===254)return;this.parseTwoBytes(R,u.readBits(8),E);for(let N=0;N<3;N++){const z=E[N];switch(T){case 0:if(z<3)T=z+1;else if(z<this.C40_BASIC_SET_CHARS.length){const Z=this.C40_BASIC_SET_CHARS[z];_?(p.append(String.fromCharCode(Z.charCodeAt(0)+128)),_=!1):p.append(Z)}else throw new L;break;case 1:_?(p.append(String.fromCharCode(z+128)),_=!1):p.append(String.fromCharCode(z)),T=0;break;case 2:if(z<this.C40_SHIFT2_SET_CHARS.length){const Z=this.C40_SHIFT2_SET_CHARS[z];_?(p.append(String.fromCharCode(Z.charCodeAt(0)+128)),_=!1):p.append(Z)}else switch(z){case 27:p.append("");break;case 30:_=!0;break;default:throw new L}T=0;break;case 3:_?(p.append(String.fromCharCode(z+224)),_=!1):p.append(String.fromCharCode(z+96)),T=0;break;default:throw new L}}}while(u.available()>0)}static decodeTextSegment(u,p){let _=!1,E=[],T=0;do{if(u.available()===8)return;const R=u.readBits(8);if(R===254)return;this.parseTwoBytes(R,u.readBits(8),E);for(let N=0;N<3;N++){const z=E[N];switch(T){case 0:if(z<3)T=z+1;else if(z<this.TEXT_BASIC_SET_CHARS.length){const Z=this.TEXT_BASIC_SET_CHARS[z];_?(p.append(String.fromCharCode(Z.charCodeAt(0)+128)),_=!1):p.append(Z)}else throw new L;break;case 1:_?(p.append(String.fromCharCode(z+128)),_=!1):p.append(String.fromCharCode(z)),T=0;break;case 2:if(z<this.TEXT_SHIFT2_SET_CHARS.length){const Z=this.TEXT_SHIFT2_SET_CHARS[z];_?(p.append(String.fromCharCode(Z.charCodeAt(0)+128)),_=!1):p.append(Z)}else switch(z){case 27:p.append("");break;case 30:_=!0;break;default:throw new L}T=0;break;case 3:if(z<this.TEXT_SHIFT3_SET_CHARS.length){const Z=this.TEXT_SHIFT3_SET_CHARS[z];_?(p.append(String.fromCharCode(Z.charCodeAt(0)+128)),_=!1):p.append(Z),T=0}else throw new L;break;default:throw new L}}}while(u.available()>0)}static decodeAnsiX12Segment(u,p){const _=[];do{if(u.available()===8)return;const E=u.readBits(8);if(E===254)return;this.parseTwoBytes(E,u.readBits(8),_);for(let T=0;T<3;T++){const R=_[T];switch(R){case 0:p.append("\r");break;case 1:p.append("*");break;case 2:p.append(">");break;case 3:p.append(" ");break;default:if(R<14)p.append(String.fromCharCode(R+44));else if(R<40)p.append(String.fromCharCode(R+51));else throw new L;break}}}while(u.available()>0)}static parseTwoBytes(u,p,_){let E=(u<<8)+p-1,T=Math.floor(E/1600);_[0]=T,E-=T*1600,T=Math.floor(E/40),_[1]=T,_[2]=E-T*40}static decodeEdifactSegment(u,p){do{if(u.available()<=16)return;for(let _=0;_<4;_++){let E=u.readBits(6);if(E===31){const T=8-u.getBitOffset();T!==8&&u.readBits(T);return}E&32||(E|=64),p.append(String.fromCharCode(E))}}while(u.available()>0)}static decodeBase256Segment(u,p,_){let E=1+u.getByteOffset();const T=this.unrandomize255State(u.readBits(8),E++);let R;if(T===0?R=u.available()/8|0:T<250?R=T:R=250*(T-249)+this.unrandomize255State(u.readBits(8),E++),R<0)throw new L;const N=new Uint8Array(R);for(let z=0;z<R;z++){if(u.available()<8)throw new L;N[z]=this.unrandomize255State(u.readBits(8),E++)}_.push(N);try{p.append(F.decode(N,U.ISO88591))}catch(z){throw new _e("Platform does not support required encoding: "+z.message)}}static unrandomize255State(u,p){const _=149*p%255+1,E=u-_;return E>=0?E:E+256}}sn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],sn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],sn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],sn.TEXT_SHIFT2_SET_CHARS=sn.C40_SHIFT2_SET_CHARS,sn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class mn{constructor(){this.rsDecoder=new qe(Pe.DATA_MATRIX_FIELD_256)}decode(u){const p=new Yr(u),_=p.getVersion(),E=p.readCodewords(),T=nn.getDataBlocks(E,_);let R=0;for(let Z of T)R+=Z.getNumDataCodewords();const N=new Uint8Array(R),z=T.length;for(let Z=0;Z<z;Z++){const oe=T[Z],ue=oe.getCodewords(),ge=oe.getNumDataCodewords();this.correctErrors(ue,ge);for(let Ae=0;Ae<ge;Ae++)N[Ae*z+Z]=ue[Ae]}return sn.decode(N)}correctErrors(u,p){const _=new Int32Array(u);try{this.rsDecoder.decode(_,u.length-p)}catch{throw new S}for(let E=0;E<p;E++)u[E]=_[E]}}class Hr{constructor(u){this.image=u,this.rectangleDetector=new ze(this.image)}detect(){const u=this.rectangleDetector.detect();let p=this.detectSolid1(u);if(p=this.detectSolid2(p),p[3]=this.correctTopRight(p),!p[3])throw new q;p=this.shiftToModuleCenter(p);const _=p[0],E=p[1],T=p[2],R=p[3];let N=this.transitionsBetween(_,R)+1,z=this.transitionsBetween(T,R)+1;(N&1)===1&&(N+=1),(z&1)===1&&(z+=1),4*N<7*z&&4*z<7*N&&(N=z=Math.max(N,z));let Z=Hr.sampleGrid(this.image,_,E,T,R,N,z);return new Ye(Z,[_,E,T,R])}static shiftPoint(u,p,_){let E=(p.getX()-u.getX())/(_+1),T=(p.getY()-u.getY())/(_+1);return new Se(u.getX()+E,u.getY()+T)}static moveAway(u,p,_){let E=u.getX(),T=u.getY();return E<p?E-=1:E+=1,T<_?T-=1:T+=1,new Se(E,T)}detectSolid1(u){let p=u[0],_=u[1],E=u[3],T=u[2],R=this.transitionsBetween(p,_),N=this.transitionsBetween(_,E),z=this.transitionsBetween(E,T),Z=this.transitionsBetween(T,p),oe=R,ue=[T,p,_,E];return oe>N&&(oe=N,ue[0]=p,ue[1]=_,ue[2]=E,ue[3]=T),oe>z&&(oe=z,ue[0]=_,ue[1]=E,ue[2]=T,ue[3]=p),oe>Z&&(ue[0]=E,ue[1]=T,ue[2]=p,ue[3]=_),ue}detectSolid2(u){let p=u[0],_=u[1],E=u[2],T=u[3],R=this.transitionsBetween(p,T),N=Hr.shiftPoint(_,E,(R+1)*4),z=Hr.shiftPoint(E,_,(R+1)*4),Z=this.transitionsBetween(N,p),oe=this.transitionsBetween(z,T);return Z<oe?(u[0]=p,u[1]=_,u[2]=E,u[3]=T):(u[0]=_,u[1]=E,u[2]=T,u[3]=p),u}correctTopRight(u){let p=u[0],_=u[1],E=u[2],T=u[3],R=this.transitionsBetween(p,T),N=this.transitionsBetween(_,T),z=Hr.shiftPoint(p,_,(N+1)*4),Z=Hr.shiftPoint(E,_,(R+1)*4);R=this.transitionsBetween(z,T),N=this.transitionsBetween(Z,T);let oe=new Se(T.getX()+(E.getX()-_.getX())/(R+1),T.getY()+(E.getY()-_.getY())/(R+1)),ue=new Se(T.getX()+(p.getX()-_.getX())/(N+1),T.getY()+(p.getY()-_.getY())/(N+1));if(!this.isValid(oe))return this.isValid(ue)?ue:null;if(!this.isValid(ue))return oe;let ge=this.transitionsBetween(z,oe)+this.transitionsBetween(Z,oe),Ae=this.transitionsBetween(z,ue)+this.transitionsBetween(Z,ue);return ge>Ae?oe:ue}shiftToModuleCenter(u){let p=u[0],_=u[1],E=u[2],T=u[3],R=this.transitionsBetween(p,T)+1,N=this.transitionsBetween(E,T)+1,z=Hr.shiftPoint(p,_,N*4),Z=Hr.shiftPoint(E,_,R*4);R=this.transitionsBetween(z,T)+1,N=this.transitionsBetween(Z,T)+1,(R&1)===1&&(R+=1),(N&1)===1&&(N+=1);let oe=(p.getX()+_.getX()+E.getX()+T.getX())/4,ue=(p.getY()+_.getY()+E.getY()+T.getY())/4;p=Hr.moveAway(p,oe,ue),_=Hr.moveAway(_,oe,ue),E=Hr.moveAway(E,oe,ue),T=Hr.moveAway(T,oe,ue);let ge,Ae;return z=Hr.shiftPoint(p,_,N*4),z=Hr.shiftPoint(z,T,R*4),ge=Hr.shiftPoint(_,p,N*4),ge=Hr.shiftPoint(ge,E,R*4),Z=Hr.shiftPoint(E,T,N*4),Z=Hr.shiftPoint(Z,_,R*4),Ae=Hr.shiftPoint(T,E,N*4),Ae=Hr.shiftPoint(Ae,p,R*4),[z,ge,Z,Ae]}isValid(u){return u.getX()>=0&&u.getX()<this.image.getWidth()&&u.getY()>0&&u.getY()<this.image.getHeight()}static sampleGrid(u,p,_,E,T,R,N){return at.getInstance().sampleGrid(u,R,N,.5,.5,R-.5,.5,R-.5,N-.5,.5,N-.5,p.getX(),p.getY(),T.getX(),T.getY(),E.getX(),E.getY(),_.getX(),_.getY())}transitionsBetween(u,p){let _=Math.trunc(u.getX()),E=Math.trunc(u.getY()),T=Math.trunc(p.getX()),R=Math.trunc(p.getY()),N=Math.abs(R-E)>Math.abs(T-_);if(N){let We=_;_=E,E=We,We=T,T=R,R=We}let z=Math.abs(T-_),Z=Math.abs(R-E),oe=-z/2,ue=E<R?1:-1,ge=_<T?1:-1,Ae=0,$e=this.image.get(N?E:_,N?_:E);for(let We=_,Je=E;We!==T;We+=ge){let st=this.image.get(N?Je:We,N?We:Je);if(st!==$e&&(Ae++,$e=st),oe+=Z,oe>0){if(Je===R)break;Je+=ue,oe-=z}}return Ae}}class Kr{constructor(){this.decoder=new mn}decode(u,p=null){let _,E;if(p!=null&&p.has(P.PURE_BARCODE)){const Z=Kr.extractPureBits(u.getBlackMatrix());_=this.decoder.decode(Z),E=Kr.NO_POINTS}else{const Z=new Hr(u.getBlackMatrix()).detect();_=this.decoder.decode(Z.getBits()),E=Z.getPoints()}const T=_.getRawBytes(),R=new Te(_.getText(),T,8*T.length,E,Ie.DATA_MATRIX,w.currentTimeMillis()),N=_.getByteSegments();N!=null&&R.putMetadata(pe.BYTE_SEGMENTS,N);const z=_.getECLevel();return z!=null&&R.putMetadata(pe.ERROR_CORRECTION_LEVEL,z),R}reset(){}static extractPureBits(u){const p=u.getTopLeftOnBit(),_=u.getBottomRightOnBit();if(p==null||_==null)throw new q;const E=this.moduleSize(p,u);let T=p[1];const R=_[1];let N=p[0];const Z=(_[0]-N+1)/E,oe=(R-T+1)/E;if(Z<=0||oe<=0)throw new q;const ue=E/2;T+=ue,N+=ue;const ge=new Q(Z,oe);for(let Ae=0;Ae<oe;Ae++){const $e=T+Ae*E;for(let We=0;We<Z;We++)u.get(N+We*E,$e)&&ge.set(We,Ae)}return ge}static moduleSize(u,p){const _=p.getWidth();let E=u[0];const T=u[1];for(;E<_&&p.get(E,T);)E++;if(E===_)throw new q;const R=E-u[0];if(R===0)throw new q;return R}}Kr.NO_POINTS=[];class An extends Re{constructor(u=500){super(new Kr,u)}}var bn;(function(ae){ae[ae.L=0]="L",ae[ae.M=1]="M",ae[ae.Q=2]="Q",ae[ae.H=3]="H"})(bn||(bn={}));class Br{constructor(u,p,_){this.value=u,this.stringValue=p,this.bits=_,Br.FOR_BITS.set(_,this),Br.FOR_VALUE.set(u,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(u){switch(u){case"L":return Br.L;case"M":return Br.M;case"Q":return Br.Q;case"H":return Br.H;default:throw new f(u+"not available")}}toString(){return this.stringValue}equals(u){if(!(u instanceof Br))return!1;const p=u;return this.value===p.value}static forBits(u){if(u<0||u>=Br.FOR_BITS.size)throw new g;return Br.FOR_BITS.get(u)}}Br.FOR_BITS=new Map,Br.FOR_VALUE=new Map,Br.L=new Br(bn.L,"L",1),Br.M=new Br(bn.M,"M",0),Br.Q=new Br(bn.Q,"Q",3),Br.H=new Br(bn.H,"H",2);class Jr{constructor(u){this.errorCorrectionLevel=Br.forBits(u>>3&3),this.dataMask=u&7}static numBitsDiffering(u,p){return y.bitCount(u^p)}static decodeFormatInformation(u,p){const _=Jr.doDecodeFormatInformation(u,p);return _!==null?_:Jr.doDecodeFormatInformation(u^Jr.FORMAT_INFO_MASK_QR,p^Jr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(u,p){let _=Number.MAX_SAFE_INTEGER,E=0;for(const T of Jr.FORMAT_INFO_DECODE_LOOKUP){const R=T[0];if(R===u||R===p)return new Jr(T[1]);let N=Jr.numBitsDiffering(u,R);N<_&&(E=T[1],_=N),u!==p&&(N=Jr.numBitsDiffering(p,R),N<_&&(E=T[1],_=N))}return _<=3?new Jr(E):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(u){if(!(u instanceof Jr))return!1;const p=u;return this.errorCorrectionLevel===p.errorCorrectionLevel&&this.dataMask===p.dataMask}}Jr.FORMAT_INFO_MASK_QR=21522,Jr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class et{constructor(u,...p){this.ecCodewordsPerBlock=u,this.ecBlocks=p}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let u=0;const p=this.ecBlocks;for(const _ of p)u+=_.getCount();return u}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ee{constructor(u,p){this.count=u,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class or{constructor(u,p,..._){this.versionNumber=u,this.alignmentPatternCenters=p,this.ecBlocks=_;let E=0;const T=_[0].getECCodewordsPerBlock(),R=_[0].getECBlocks();for(const N of R)E+=N.getCount()*(N.getDataCodewords()+T);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(u){return this.ecBlocks[u.getValue()]}static getProvisionalVersionForDimension(u){if(u%4!==1)throw new L;try{return this.getVersionForNumber((u-17)/4)}catch{throw new L}}static getVersionForNumber(u){if(u<1||u>40)throw new g;return or.VERSIONS[u-1]}static decodeVersionInformation(u){let p=Number.MAX_SAFE_INTEGER,_=0;for(let E=0;E<or.VERSION_DECODE_INFO.length;E++){const T=or.VERSION_DECODE_INFO[E];if(T===u)return or.getVersionForNumber(E+7);const R=Jr.numBitsDiffering(u,T);R<p&&(_=E+7,p=R)}return p<=3?or.getVersionForNumber(_):null}buildFunctionPattern(){const u=this.getDimensionForVersion(),p=new Q(u);p.setRegion(0,0,9,9),p.setRegion(u-8,0,8,9),p.setRegion(0,u-8,9,8);const _=this.alignmentPatternCenters.length;for(let E=0;E<_;E++){const T=this.alignmentPatternCenters[E]-2;for(let R=0;R<_;R++)E===0&&(R===0||R===_-1)||E===_-1&&R===0||p.setRegion(this.alignmentPatternCenters[R]-2,T,5,5)}return p.setRegion(6,9,1,u-17),p.setRegion(9,6,u-17,1),this.versionNumber>6&&(p.setRegion(u-11,0,3,6),p.setRegion(0,u-11,6,3)),p}toString(){return""+this.versionNumber}}or.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),or.VERSIONS=[new or(1,new Int32Array(0),new et(7,new Ee(1,19)),new et(10,new Ee(1,16)),new et(13,new Ee(1,13)),new et(17,new Ee(1,9))),new or(2,Int32Array.from([6,18]),new et(10,new Ee(1,34)),new et(16,new Ee(1,28)),new et(22,new Ee(1,22)),new et(28,new Ee(1,16))),new or(3,Int32Array.from([6,22]),new et(15,new Ee(1,55)),new et(26,new Ee(1,44)),new et(18,new Ee(2,17)),new et(22,new Ee(2,13))),new or(4,Int32Array.from([6,26]),new et(20,new Ee(1,80)),new et(18,new Ee(2,32)),new et(26,new Ee(2,24)),new et(16,new Ee(4,9))),new or(5,Int32Array.from([6,30]),new et(26,new Ee(1,108)),new et(24,new Ee(2,43)),new et(18,new Ee(2,15),new Ee(2,16)),new et(22,new Ee(2,11),new Ee(2,12))),new or(6,Int32Array.from([6,34]),new et(18,new Ee(2,68)),new et(16,new Ee(4,27)),new et(24,new Ee(4,19)),new et(28,new Ee(4,15))),new or(7,Int32Array.from([6,22,38]),new et(20,new Ee(2,78)),new et(18,new Ee(4,31)),new et(18,new Ee(2,14),new Ee(4,15)),new et(26,new Ee(4,13),new Ee(1,14))),new or(8,Int32Array.from([6,24,42]),new et(24,new Ee(2,97)),new et(22,new Ee(2,38),new Ee(2,39)),new et(22,new Ee(4,18),new Ee(2,19)),new et(26,new Ee(4,14),new Ee(2,15))),new or(9,Int32Array.from([6,26,46]),new et(30,new Ee(2,116)),new et(22,new Ee(3,36),new Ee(2,37)),new et(20,new Ee(4,16),new Ee(4,17)),new et(24,new Ee(4,12),new Ee(4,13))),new or(10,Int32Array.from([6,28,50]),new et(18,new Ee(2,68),new Ee(2,69)),new et(26,new Ee(4,43),new Ee(1,44)),new et(24,new Ee(6,19),new Ee(2,20)),new et(28,new Ee(6,15),new Ee(2,16))),new or(11,Int32Array.from([6,30,54]),new et(20,new Ee(4,81)),new et(30,new Ee(1,50),new Ee(4,51)),new et(28,new Ee(4,22),new Ee(4,23)),new et(24,new Ee(3,12),new Ee(8,13))),new or(12,Int32Array.from([6,32,58]),new et(24,new Ee(2,92),new Ee(2,93)),new et(22,new Ee(6,36),new Ee(2,37)),new et(26,new Ee(4,20),new Ee(6,21)),new et(28,new Ee(7,14),new Ee(4,15))),new or(13,Int32Array.from([6,34,62]),new et(26,new Ee(4,107)),new et(22,new Ee(8,37),new Ee(1,38)),new et(24,new Ee(8,20),new Ee(4,21)),new et(22,new Ee(12,11),new Ee(4,12))),new or(14,Int32Array.from([6,26,46,66]),new et(30,new Ee(3,115),new Ee(1,116)),new et(24,new Ee(4,40),new Ee(5,41)),new et(20,new Ee(11,16),new Ee(5,17)),new et(24,new Ee(11,12),new Ee(5,13))),new or(15,Int32Array.from([6,26,48,70]),new et(22,new Ee(5,87),new Ee(1,88)),new et(24,new Ee(5,41),new Ee(5,42)),new et(30,new Ee(5,24),new Ee(7,25)),new et(24,new Ee(11,12),new Ee(7,13))),new or(16,Int32Array.from([6,26,50,74]),new et(24,new Ee(5,98),new Ee(1,99)),new et(28,new Ee(7,45),new Ee(3,46)),new et(24,new Ee(15,19),new Ee(2,20)),new et(30,new Ee(3,15),new Ee(13,16))),new or(17,Int32Array.from([6,30,54,78]),new et(28,new Ee(1,107),new Ee(5,108)),new et(28,new Ee(10,46),new Ee(1,47)),new et(28,new Ee(1,22),new Ee(15,23)),new et(28,new Ee(2,14),new Ee(17,15))),new or(18,Int32Array.from([6,30,56,82]),new et(30,new Ee(5,120),new Ee(1,121)),new et(26,new Ee(9,43),new Ee(4,44)),new et(28,new Ee(17,22),new Ee(1,23)),new et(28,new Ee(2,14),new Ee(19,15))),new or(19,Int32Array.from([6,30,58,86]),new et(28,new Ee(3,113),new Ee(4,114)),new et(26,new Ee(3,44),new Ee(11,45)),new et(26,new Ee(17,21),new Ee(4,22)),new et(26,new Ee(9,13),new Ee(16,14))),new or(20,Int32Array.from([6,34,62,90]),new et(28,new Ee(3,107),new Ee(5,108)),new et(26,new Ee(3,41),new Ee(13,42)),new et(30,new Ee(15,24),new Ee(5,25)),new et(28,new Ee(15,15),new Ee(10,16))),new or(21,Int32Array.from([6,28,50,72,94]),new et(28,new Ee(4,116),new Ee(4,117)),new et(26,new Ee(17,42)),new et(28,new Ee(17,22),new Ee(6,23)),new et(30,new Ee(19,16),new Ee(6,17))),new or(22,Int32Array.from([6,26,50,74,98]),new et(28,new Ee(2,111),new Ee(7,112)),new et(28,new Ee(17,46)),new et(30,new Ee(7,24),new Ee(16,25)),new et(24,new Ee(34,13))),new or(23,Int32Array.from([6,30,54,78,102]),new et(30,new Ee(4,121),new Ee(5,122)),new et(28,new Ee(4,47),new Ee(14,48)),new et(30,new Ee(11,24),new Ee(14,25)),new et(30,new Ee(16,15),new Ee(14,16))),new or(24,Int32Array.from([6,28,54,80,106]),new et(30,new Ee(6,117),new Ee(4,118)),new et(28,new Ee(6,45),new Ee(14,46)),new et(30,new Ee(11,24),new Ee(16,25)),new et(30,new Ee(30,16),new Ee(2,17))),new or(25,Int32Array.from([6,32,58,84,110]),new et(26,new Ee(8,106),new Ee(4,107)),new et(28,new Ee(8,47),new Ee(13,48)),new et(30,new Ee(7,24),new Ee(22,25)),new et(30,new Ee(22,15),new Ee(13,16))),new or(26,Int32Array.from([6,30,58,86,114]),new et(28,new Ee(10,114),new Ee(2,115)),new et(28,new Ee(19,46),new Ee(4,47)),new et(28,new Ee(28,22),new Ee(6,23)),new et(30,new Ee(33,16),new Ee(4,17))),new or(27,Int32Array.from([6,34,62,90,118]),new et(30,new Ee(8,122),new Ee(4,123)),new et(28,new Ee(22,45),new Ee(3,46)),new et(30,new Ee(8,23),new Ee(26,24)),new et(30,new Ee(12,15),new Ee(28,16))),new or(28,Int32Array.from([6,26,50,74,98,122]),new et(30,new Ee(3,117),new Ee(10,118)),new et(28,new Ee(3,45),new Ee(23,46)),new et(30,new Ee(4,24),new Ee(31,25)),new et(30,new Ee(11,15),new Ee(31,16))),new or(29,Int32Array.from([6,30,54,78,102,126]),new et(30,new Ee(7,116),new Ee(7,117)),new et(28,new Ee(21,45),new Ee(7,46)),new et(30,new Ee(1,23),new Ee(37,24)),new et(30,new Ee(19,15),new Ee(26,16))),new or(30,Int32Array.from([6,26,52,78,104,130]),new et(30,new Ee(5,115),new Ee(10,116)),new et(28,new Ee(19,47),new Ee(10,48)),new et(30,new Ee(15,24),new Ee(25,25)),new et(30,new Ee(23,15),new Ee(25,16))),new or(31,Int32Array.from([6,30,56,82,108,134]),new et(30,new Ee(13,115),new Ee(3,116)),new et(28,new Ee(2,46),new Ee(29,47)),new et(30,new Ee(42,24),new Ee(1,25)),new et(30,new Ee(23,15),new Ee(28,16))),new or(32,Int32Array.from([6,34,60,86,112,138]),new et(30,new Ee(17,115)),new et(28,new Ee(10,46),new Ee(23,47)),new et(30,new Ee(10,24),new Ee(35,25)),new et(30,new Ee(19,15),new Ee(35,16))),new or(33,Int32Array.from([6,30,58,86,114,142]),new et(30,new Ee(17,115),new Ee(1,116)),new et(28,new Ee(14,46),new Ee(21,47)),new et(30,new Ee(29,24),new Ee(19,25)),new et(30,new Ee(11,15),new Ee(46,16))),new or(34,Int32Array.from([6,34,62,90,118,146]),new et(30,new Ee(13,115),new Ee(6,116)),new et(28,new Ee(14,46),new Ee(23,47)),new et(30,new Ee(44,24),new Ee(7,25)),new et(30,new Ee(59,16),new Ee(1,17))),new or(35,Int32Array.from([6,30,54,78,102,126,150]),new et(30,new Ee(12,121),new Ee(7,122)),new et(28,new Ee(12,47),new Ee(26,48)),new et(30,new Ee(39,24),new Ee(14,25)),new et(30,new Ee(22,15),new Ee(41,16))),new or(36,Int32Array.from([6,24,50,76,102,128,154]),new et(30,new Ee(6,121),new Ee(14,122)),new et(28,new Ee(6,47),new Ee(34,48)),new et(30,new Ee(46,24),new Ee(10,25)),new et(30,new Ee(2,15),new Ee(64,16))),new or(37,Int32Array.from([6,28,54,80,106,132,158]),new et(30,new Ee(17,122),new Ee(4,123)),new et(28,new Ee(29,46),new Ee(14,47)),new et(30,new Ee(49,24),new Ee(10,25)),new et(30,new Ee(24,15),new Ee(46,16))),new or(38,Int32Array.from([6,32,58,84,110,136,162]),new et(30,new Ee(4,122),new Ee(18,123)),new et(28,new Ee(13,46),new Ee(32,47)),new et(30,new Ee(48,24),new Ee(14,25)),new et(30,new Ee(42,15),new Ee(32,16))),new or(39,Int32Array.from([6,26,54,82,110,138,166]),new et(30,new Ee(20,117),new Ee(4,118)),new et(28,new Ee(40,47),new Ee(7,48)),new et(30,new Ee(43,24),new Ee(22,25)),new et(30,new Ee(10,15),new Ee(67,16))),new or(40,Int32Array.from([6,30,58,86,114,142,170]),new et(30,new Ee(19,118),new Ee(6,119)),new et(28,new Ee(18,47),new Ee(31,48)),new et(30,new Ee(34,24),new Ee(34,25)),new et(30,new Ee(20,15),new Ee(61,16)))];var Xr;(function(ae){ae[ae.DATA_MASK_000=0]="DATA_MASK_000",ae[ae.DATA_MASK_001=1]="DATA_MASK_001",ae[ae.DATA_MASK_010=2]="DATA_MASK_010",ae[ae.DATA_MASK_011=3]="DATA_MASK_011",ae[ae.DATA_MASK_100=4]="DATA_MASK_100",ae[ae.DATA_MASK_101=5]="DATA_MASK_101",ae[ae.DATA_MASK_110=6]="DATA_MASK_110",ae[ae.DATA_MASK_111=7]="DATA_MASK_111"})(Xr||(Xr={}));class on{constructor(u,p){this.value=u,this.isMasked=p}unmaskBitMatrix(u,p){for(let _=0;_<p;_++)for(let E=0;E<p;E++)this.isMasked(_,E)&&u.flip(E,_)}}on.values=new Map([[Xr.DATA_MASK_000,new on(Xr.DATA_MASK_000,(ae,u)=>(ae+u&1)===0)],[Xr.DATA_MASK_001,new on(Xr.DATA_MASK_001,(ae,u)=>(ae&1)===0)],[Xr.DATA_MASK_010,new on(Xr.DATA_MASK_010,(ae,u)=>u%3===0)],[Xr.DATA_MASK_011,new on(Xr.DATA_MASK_011,(ae,u)=>(ae+u)%3===0)],[Xr.DATA_MASK_100,new on(Xr.DATA_MASK_100,(ae,u)=>(Math.floor(ae/2)+Math.floor(u/3)&1)===0)],[Xr.DATA_MASK_101,new on(Xr.DATA_MASK_101,(ae,u)=>ae*u%6===0)],[Xr.DATA_MASK_110,new on(Xr.DATA_MASK_110,(ae,u)=>ae*u%6<3)],[Xr.DATA_MASK_111,new on(Xr.DATA_MASK_111,(ae,u)=>(ae+u+ae*u%3&1)===0)]]);class ai{constructor(u){const p=u.getHeight();if(p<21||(p&3)!==1)throw new L;this.bitMatrix=u}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let u=0;for(let T=0;T<6;T++)u=this.copyBit(T,8,u);u=this.copyBit(7,8,u),u=this.copyBit(8,8,u),u=this.copyBit(8,7,u);for(let T=5;T>=0;T--)u=this.copyBit(8,T,u);const p=this.bitMatrix.getHeight();let _=0;const E=p-7;for(let T=p-1;T>=E;T--)_=this.copyBit(8,T,_);for(let T=p-8;T<p;T++)_=this.copyBit(T,8,_);if(this.parsedFormatInfo=Jr.decodeFormatInformation(u,_),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const u=this.bitMatrix.getHeight(),p=Math.floor((u-17)/4);if(p<=6)return or.getVersionForNumber(p);let _=0;const E=u-11;for(let R=5;R>=0;R--)for(let N=u-9;N>=E;N--)_=this.copyBit(N,R,_);let T=or.decodeVersionInformation(_);if(T!==null&&T.getDimensionForVersion()===u)return this.parsedVersion=T,T;_=0;for(let R=5;R>=0;R--)for(let N=u-9;N>=E;N--)_=this.copyBit(R,N,_);if(T=or.decodeVersionInformation(_),T!==null&&T.getDimensionForVersion()===u)return this.parsedVersion=T,T;throw new L}copyBit(u,p,_){return(this.isMirror?this.bitMatrix.get(p,u):this.bitMatrix.get(u,p))?_<<1|1:_<<1}readCodewords(){const u=this.readFormatInformation(),p=this.readVersion(),_=on.values.get(u.getDataMask()),E=this.bitMatrix.getHeight();_.unmaskBitMatrix(this.bitMatrix,E);const T=p.buildFunctionPattern();let R=!0;const N=new Uint8Array(p.getTotalCodewords());let z=0,Z=0,oe=0;for(let ue=E-1;ue>0;ue-=2){ue===6&&ue--;for(let ge=0;ge<E;ge++){const Ae=R?E-1-ge:ge;for(let $e=0;$e<2;$e++)T.get(ue-$e,Ae)||(oe++,Z<<=1,this.bitMatrix.get(ue-$e,Ae)&&(Z|=1),oe===8&&(N[z++]=Z,oe=0,Z=0))}R=!R}if(z!==p.getTotalCodewords())throw new L;return N}remask(){if(this.parsedFormatInfo===null)return;const u=on.values[this.parsedFormatInfo.getDataMask()],p=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,p)}setMirror(u){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=u}mirror(){const u=this.bitMatrix;for(let p=0,_=u.getWidth();p<_;p++)for(let E=p+1,T=u.getHeight();E<T;E++)u.get(p,E)!==u.get(E,p)&&(u.flip(E,p),u.flip(p,E))}}class cn{constructor(u,p){this.numDataCodewords=u,this.codewords=p}static getDataBlocks(u,p,_){if(u.length!==p.getTotalCodewords())throw new g;const E=p.getECBlocksForLevel(_);let T=0;const R=E.getECBlocks();for(const $e of R)T+=$e.getCount();const N=new Array(T);let z=0;for(const $e of R)for(let We=0;We<$e.getCount();We++){const Je=$e.getDataCodewords(),st=E.getECCodewordsPerBlock()+Je;N[z++]=new cn(Je,new Uint8Array(st))}const Z=N[0].codewords.length;let oe=N.length-1;for(;oe>=0&&N[oe].codewords.length!==Z;)oe--;oe++;const ue=Z-E.getECCodewordsPerBlock();let ge=0;for(let $e=0;$e<ue;$e++)for(let We=0;We<z;We++)N[We].codewords[$e]=u[ge++];for(let $e=oe;$e<z;$e++)N[$e].codewords[ue]=u[ge++];const Ae=N[0].codewords.length;for(let $e=ue;$e<Ae;$e++)for(let We=0;We<z;We++){const Je=We<oe?$e:$e+1;N[We].codewords[Je]=u[ge++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Sn;(function(ae){ae[ae.TERMINATOR=0]="TERMINATOR",ae[ae.NUMERIC=1]="NUMERIC",ae[ae.ALPHANUMERIC=2]="ALPHANUMERIC",ae[ae.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ae[ae.BYTE=4]="BYTE",ae[ae.ECI=5]="ECI",ae[ae.KANJI=6]="KANJI",ae[ae.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ae[ae.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ae[ae.HANZI=9]="HANZI"})(Sn||(Sn={}));class cr{constructor(u,p,_,E){this.value=u,this.stringValue=p,this.characterCountBitsForVersions=_,this.bits=E,cr.FOR_BITS.set(E,this),cr.FOR_VALUE.set(u,this)}static forBits(u){const p=cr.FOR_BITS.get(u);if(p===void 0)throw new g;return p}getCharacterCountBits(u){const p=u.getVersionNumber();let _;return p<=9?_=0:p<=26?_=1:_=2,this.characterCountBitsForVersions[_]}getValue(){return this.value}getBits(){return this.bits}equals(u){if(!(u instanceof cr))return!1;const p=u;return this.value===p.value}toString(){return this.stringValue}}cr.FOR_BITS=new Map,cr.FOR_VALUE=new Map,cr.TERMINATOR=new cr(Sn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),cr.NUMERIC=new cr(Sn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),cr.ALPHANUMERIC=new cr(Sn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),cr.STRUCTURED_APPEND=new cr(Sn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),cr.BYTE=new cr(Sn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),cr.ECI=new cr(Sn.ECI,"ECI",Int32Array.from([0,0,0]),7),cr.KANJI=new cr(Sn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),cr.FNC1_FIRST_POSITION=new cr(Sn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),cr.FNC1_SECOND_POSITION=new cr(Sn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),cr.HANZI=new cr(Sn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zr{static decode(u,p,_,E){const T=new gn(u);let R=new V;const N=new Array;let z=-1,Z=-1;try{let oe=null,ue=!1,ge;do{if(T.available()<4)ge=cr.TERMINATOR;else{const Ae=T.readBits(4);ge=cr.forBits(Ae)}switch(ge){case cr.TERMINATOR:break;case cr.FNC1_FIRST_POSITION:case cr.FNC1_SECOND_POSITION:ue=!0;break;case cr.STRUCTURED_APPEND:if(T.available()<16)throw new L;z=T.readBits(8),Z=T.readBits(8);break;case cr.ECI:const Ae=zr.parseECIValue(T);if(oe=B.getCharacterSetECIByValue(Ae),oe===null)throw new L;break;case cr.HANZI:const $e=T.readBits(4),We=T.readBits(ge.getCharacterCountBits(p));$e===zr.GB2312_SUBSET&&zr.decodeHanziSegment(T,R,We);break;default:const Je=T.readBits(ge.getCharacterCountBits(p));switch(ge){case cr.NUMERIC:zr.decodeNumericSegment(T,R,Je);break;case cr.ALPHANUMERIC:zr.decodeAlphanumericSegment(T,R,Je,ue);break;case cr.BYTE:zr.decodeByteSegment(T,R,Je,oe,N,E);break;case cr.KANJI:zr.decodeKanjiSegment(T,R,Je);break;default:throw new L}break}}while(ge!==cr.TERMINATOR)}catch{throw new L}return new me(u,R.toString(),N.length===0?null:N,_===null?null:_.toString(),z,Z)}static decodeHanziSegment(u,p,_){if(_*13>u.available())throw new L;const E=new Uint8Array(2*_);let T=0;for(;_>0;){const R=u.readBits(13);let N=R/96<<8&4294967295|R%96;N<959?N+=41377:N+=42657,E[T]=N>>8&255,E[T+1]=N&255,T+=2,_--}try{p.append(F.decode(E,U.GB2312))}catch(R){throw new L(R)}}static decodeKanjiSegment(u,p,_){if(_*13>u.available())throw new L;const E=new Uint8Array(2*_);let T=0;for(;_>0;){const R=u.readBits(13);let N=R/192<<8&4294967295|R%192;N<7936?N+=33088:N+=49472,E[T]=N>>8,E[T+1]=N,T+=2,_--}try{p.append(F.decode(E,U.SHIFT_JIS))}catch(R){throw new L(R)}}static decodeByteSegment(u,p,_,E,T,R){if(8*_>u.available())throw new L;const N=new Uint8Array(_);for(let Z=0;Z<_;Z++)N[Z]=u.readBits(8);let z;E===null?z=U.guessEncoding(N,R):z=E.getName();try{p.append(F.decode(N,z))}catch(Z){throw new L(Z)}T.push(N)}static toAlphaNumericChar(u){if(u>=zr.ALPHANUMERIC_CHARS.length)throw new L;return zr.ALPHANUMERIC_CHARS[u]}static decodeAlphanumericSegment(u,p,_,E){const T=p.length();for(;_>1;){if(u.available()<11)throw new L;const R=u.readBits(11);p.append(zr.toAlphaNumericChar(Math.floor(R/45))),p.append(zr.toAlphaNumericChar(R%45)),_-=2}if(_===1){if(u.available()<6)throw new L;p.append(zr.toAlphaNumericChar(u.readBits(6)))}if(E)for(let R=T;R<p.length();R++)p.charAt(R)==="%"&&(R<p.length()-1&&p.charAt(R+1)==="%"?p.deleteCharAt(R+1):p.setCharAt(R,""))}static decodeNumericSegment(u,p,_){for(;_>=3;){if(u.available()<10)throw new L;const E=u.readBits(10);if(E>=1e3)throw new L;p.append(zr.toAlphaNumericChar(Math.floor(E/100))),p.append(zr.toAlphaNumericChar(Math.floor(E/10)%10)),p.append(zr.toAlphaNumericChar(E%10)),_-=3}if(_===2){if(u.available()<7)throw new L;const E=u.readBits(7);if(E>=100)throw new L;p.append(zr.toAlphaNumericChar(Math.floor(E/10))),p.append(zr.toAlphaNumericChar(E%10))}else if(_===1){if(u.available()<4)throw new L;const E=u.readBits(4);if(E>=10)throw new L;p.append(zr.toAlphaNumericChar(E))}}static parseECIValue(u){const p=u.readBits(8);if(!(p&128))return p&127;if((p&192)===128){const _=u.readBits(8);return(p&63)<<8&4294967295|_}if((p&224)===192){const _=u.readBits(16);return(p&31)<<16&4294967295|_}throw new L}}zr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zr.GB2312_SUBSET=1;class $n{constructor(u){this.mirrored=u}isMirrored(){return this.mirrored}applyMirroredCorrection(u){if(!this.mirrored||u===null||u.length<3)return;const p=u[0];u[0]=u[2],u[2]=p}}class zn{constructor(){this.rsDecoder=new qe(Pe.QR_CODE_FIELD_256)}decodeBooleanArray(u,p){return this.decodeBitMatrix(Q.parseFromBooleanArray(u),p)}decodeBitMatrix(u,p){const _=new ai(u);let E=null;try{return this.decodeBitMatrixParser(_,p)}catch(T){E=T}try{_.remask(),_.setMirror(!0),_.readVersion(),_.readFormatInformation(),_.mirror();const T=this.decodeBitMatrixParser(_,p);return T.setOther(new $n(!0)),T}catch(T){throw E!==null?E:T}}decodeBitMatrixParser(u,p){const _=u.readVersion(),E=u.readFormatInformation().getErrorCorrectionLevel(),T=u.readCodewords(),R=cn.getDataBlocks(T,_,E);let N=0;for(const oe of R)N+=oe.getNumDataCodewords();const z=new Uint8Array(N);let Z=0;for(const oe of R){const ue=oe.getCodewords(),ge=oe.getNumDataCodewords();this.correctErrors(ue,ge);for(let Ae=0;Ae<ge;Ae++)z[Z++]=ue[Ae]}return zr.decode(z,_,E,p)}correctErrors(u,p){const _=new Int32Array(u);try{this.rsDecoder.decode(_,u.length-p)}catch{throw new S}for(let E=0;E<p;E++)u[E]=_[E]}}class Gn extends Se{constructor(u,p,_){super(u,p),this.estimatedModuleSize=_}aboutEquals(u,p,_){if(Math.abs(p-this.getY())<=u&&Math.abs(_-this.getX())<=u){const E=Math.abs(u-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(u,p,_){const E=(this.getX()+p)/2,T=(this.getY()+u)/2,R=(this.estimatedModuleSize+_)/2;return new Gn(E,T,R)}}class kn{constructor(u,p,_,E,T,R,N){this.image=u,this.startX=p,this.startY=_,this.width=E,this.height=T,this.moduleSize=R,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const u=this.startX,p=this.height,_=this.width,E=u+_,T=this.startY+p/2,R=new Int32Array(3),N=this.image;for(let z=0;z<p;z++){const Z=T+(z&1?-Math.floor((z+1)/2):Math.floor((z+1)/2));R[0]=0,R[1]=0,R[2]=0;let oe=u;for(;oe<E&&!N.get(oe,Z);)oe++;let ue=0;for(;oe<E;){if(N.get(oe,Z))if(ue===1)R[1]++;else if(ue===2){if(this.foundPatternCross(R)){const ge=this.handlePossibleCenter(R,Z,oe);if(ge!==null)return ge}R[0]=R[2],R[1]=1,R[2]=0,ue=1}else R[++ue]++;else ue===1&&ue++,R[ue]++;oe++}if(this.foundPatternCross(R)){const ge=this.handlePossibleCenter(R,Z,E);if(ge!==null)return ge}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new q}static centerFromEnd(u,p){return p-u[2]-u[1]/2}foundPatternCross(u){const p=this.moduleSize,_=p/2;for(let E=0;E<3;E++)if(Math.abs(p-u[E])>=_)return!1;return!0}crossCheckVertical(u,p,_,E){const T=this.image,R=T.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let z=u;for(;z>=0&&T.get(p,z)&&N[1]<=_;)N[1]++,z--;if(z<0||N[1]>_)return NaN;for(;z>=0&&!T.get(p,z)&&N[0]<=_;)N[0]++,z--;if(N[0]>_)return NaN;for(z=u+1;z<R&&T.get(p,z)&&N[1]<=_;)N[1]++,z++;if(z===R||N[1]>_)return NaN;for(;z<R&&!T.get(p,z)&&N[2]<=_;)N[2]++,z++;if(N[2]>_)return NaN;const Z=N[0]+N[1]+N[2];return 5*Math.abs(Z-E)>=2*E?NaN:this.foundPatternCross(N)?kn.centerFromEnd(N,z):NaN}handlePossibleCenter(u,p,_){const E=u[0]+u[1]+u[2],T=kn.centerFromEnd(u,_),R=this.crossCheckVertical(p,T,2*u[1],E);if(!isNaN(R)){const N=(u[0]+u[1]+u[2])/3;for(const Z of this.possibleCenters)if(Z.aboutEquals(N,R,T))return Z.combineEstimate(R,T,N);const z=new Gn(T,R,N);this.possibleCenters.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return null}}class Hn extends Se{constructor(u,p,_,E){super(u,p),this.estimatedModuleSize=_,this.count=E,E===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(u,p,_){if(Math.abs(p-this.getY())<=u&&Math.abs(_-this.getX())<=u){const E=Math.abs(u-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1}combineEstimate(u,p,_){const E=this.count+1,T=(this.count*this.getX()+p)/E,R=(this.count*this.getY()+u)/E,N=(this.count*this.estimatedModuleSize+_)/E;return new Hn(T,R,N,E)}}class ri{constructor(u){this.bottomLeft=u[0],this.topLeft=u[1],this.topRight=u[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class tn{constructor(u,p){this.image=u,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=p}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(u){const p=u!=null&&u.get(P.TRY_HARDER)!==void 0,_=u!=null&&u.get(P.PURE_BARCODE)!==void 0,E=this.image,T=E.getHeight(),R=E.getWidth();let N=Math.floor(3*T/(4*tn.MAX_MODULES));(N<tn.MIN_SKIP||p)&&(N=tn.MIN_SKIP);let z=!1;const Z=new Int32Array(5);for(let ue=N-1;ue<T&&!z;ue+=N){Z[0]=0,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0;let ge=0;for(let Ae=0;Ae<R;Ae++)if(E.get(Ae,ue))(ge&1)===1&&ge++,Z[ge]++;else if(ge&1)Z[ge]++;else if(ge===4)if(tn.foundPatternCross(Z)){if(this.handlePossibleCenter(Z,ue,Ae,_)===!0)if(N=2,this.hasSkipped===!0)z=this.haveMultiplyConfirmedCenters();else{const We=this.findRowSkip();We>Z[2]&&(ue+=We-Z[2]-N,Ae=R-1)}else{Z[0]=Z[2],Z[1]=Z[3],Z[2]=Z[4],Z[3]=1,Z[4]=0,ge=3;continue}ge=0,Z[0]=0,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0}else Z[0]=Z[2],Z[1]=Z[3],Z[2]=Z[4],Z[3]=1,Z[4]=0,ge=3;else Z[++ge]++;tn.foundPatternCross(Z)&&this.handlePossibleCenter(Z,ue,R,_)===!0&&(N=Z[0],this.hasSkipped&&(z=this.haveMultiplyConfirmedCenters()))}const oe=this.selectBestPatterns();return Se.orderBestPatterns(oe),new ri(oe)}static centerFromEnd(u,p){return p-u[4]-u[3]-u[2]/2}static foundPatternCross(u){let p=0;for(let T=0;T<5;T++){const R=u[T];if(R===0)return!1;p+=R}if(p<7)return!1;const _=p/7,E=_/2;return Math.abs(_-u[0])<E&&Math.abs(_-u[1])<E&&Math.abs(3*_-u[2])<3*E&&Math.abs(_-u[3])<E&&Math.abs(_-u[4])<E}getCrossCheckStateCount(){const u=this.crossCheckStateCount;return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u}crossCheckDiagonal(u,p,_,E){const T=this.getCrossCheckStateCount();let R=0;const N=this.image;for(;u>=R&&p>=R&&N.get(p-R,u-R);)T[2]++,R++;if(u<R||p<R)return!1;for(;u>=R&&p>=R&&!N.get(p-R,u-R)&&T[1]<=_;)T[1]++,R++;if(u<R||p<R||T[1]>_)return!1;for(;u>=R&&p>=R&&N.get(p-R,u-R)&&T[0]<=_;)T[0]++,R++;if(T[0]>_)return!1;const z=N.getHeight(),Z=N.getWidth();for(R=1;u+R<z&&p+R<Z&&N.get(p+R,u+R);)T[2]++,R++;if(u+R>=z||p+R>=Z)return!1;for(;u+R<z&&p+R<Z&&!N.get(p+R,u+R)&&T[3]<_;)T[3]++,R++;if(u+R>=z||p+R>=Z||T[3]>=_)return!1;for(;u+R<z&&p+R<Z&&N.get(p+R,u+R)&&T[4]<_;)T[4]++,R++;if(T[4]>=_)return!1;const oe=T[0]+T[1]+T[2]+T[3]+T[4];return Math.abs(oe-E)<2*E&&tn.foundPatternCross(T)}crossCheckVertical(u,p,_,E){const T=this.image,R=T.getHeight(),N=this.getCrossCheckStateCount();let z=u;for(;z>=0&&T.get(p,z);)N[2]++,z--;if(z<0)return NaN;for(;z>=0&&!T.get(p,z)&&N[1]<=_;)N[1]++,z--;if(z<0||N[1]>_)return NaN;for(;z>=0&&T.get(p,z)&&N[0]<=_;)N[0]++,z--;if(N[0]>_)return NaN;for(z=u+1;z<R&&T.get(p,z);)N[2]++,z++;if(z===R)return NaN;for(;z<R&&!T.get(p,z)&&N[3]<_;)N[3]++,z++;if(z===R||N[3]>=_)return NaN;for(;z<R&&T.get(p,z)&&N[4]<_;)N[4]++,z++;if(N[4]>=_)return NaN;const Z=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(Z-E)>=2*E?NaN:tn.foundPatternCross(N)?tn.centerFromEnd(N,z):NaN}crossCheckHorizontal(u,p,_,E){const T=this.image,R=T.getWidth(),N=this.getCrossCheckStateCount();let z=u;for(;z>=0&&T.get(z,p);)N[2]++,z--;if(z<0)return NaN;for(;z>=0&&!T.get(z,p)&&N[1]<=_;)N[1]++,z--;if(z<0||N[1]>_)return NaN;for(;z>=0&&T.get(z,p)&&N[0]<=_;)N[0]++,z--;if(N[0]>_)return NaN;for(z=u+1;z<R&&T.get(z,p);)N[2]++,z++;if(z===R)return NaN;for(;z<R&&!T.get(z,p)&&N[3]<_;)N[3]++,z++;if(z===R||N[3]>=_)return NaN;for(;z<R&&T.get(z,p)&&N[4]<_;)N[4]++,z++;if(N[4]>=_)return NaN;const Z=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(Z-E)>=E?NaN:tn.foundPatternCross(N)?tn.centerFromEnd(N,z):NaN}handlePossibleCenter(u,p,_,E){const T=u[0]+u[1]+u[2]+u[3]+u[4];let R=tn.centerFromEnd(u,_),N=this.crossCheckVertical(p,Math.floor(R),u[2],T);if(!isNaN(N)&&(R=this.crossCheckHorizontal(Math.floor(R),Math.floor(N),u[2],T),!isNaN(R)&&(!E||this.crossCheckDiagonal(Math.floor(N),Math.floor(R),u[2],T)))){const z=T/7;let Z=!1;const oe=this.possibleCenters;for(let ue=0,ge=oe.length;ue<ge;ue++){const Ae=oe[ue];if(Ae.aboutEquals(z,N,R)){oe[ue]=Ae.combineEstimate(N,R,z),Z=!0;break}}if(!Z){const ue=new Hn(R,N,z);oe.push(ue),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ue)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let p=null;for(const _ of this.possibleCenters)if(_.getCount()>=tn.CENTER_QUORUM)if(p==null)p=_;else return this.hasSkipped=!0,Math.floor((Math.abs(p.getX()-_.getX())-Math.abs(p.getY()-_.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let u=0,p=0;const _=this.possibleCenters.length;for(const R of this.possibleCenters)R.getCount()>=tn.CENTER_QUORUM&&(u++,p+=R.getEstimatedModuleSize());if(u<3)return!1;const E=p/_;let T=0;for(const R of this.possibleCenters)T+=Math.abs(R.getEstimatedModuleSize()-E);return T<=.05*p}selectBestPatterns(){const u=this.possibleCenters.length;if(u<3)throw new q;const p=this.possibleCenters;let _;if(u>3){let E=0,T=0;for(const z of this.possibleCenters){const Z=z.getEstimatedModuleSize();E+=Z,T+=Z*Z}_=E/u;let R=Math.sqrt(T/u-_*_);p.sort((z,Z)=>{const oe=Math.abs(Z.getEstimatedModuleSize()-_),ue=Math.abs(z.getEstimatedModuleSize()-_);return oe<ue?-1:oe>ue?1:0});const N=Math.max(.2*_,R);for(let z=0;z<p.length&&p.length>3;z++){const Z=p[z];Math.abs(Z.getEstimatedModuleSize()-_)>N&&(p.splice(z,1),z--)}}if(p.length>3){let E=0;for(const T of p)E+=T.getEstimatedModuleSize();_=E/p.length,p.sort((T,R)=>{if(R.getCount()===T.getCount()){const N=Math.abs(R.getEstimatedModuleSize()-_),z=Math.abs(T.getEstimatedModuleSize()-_);return N<z?1:N>z?-1:0}else return R.getCount()-T.getCount()}),p.splice(3)}return[p[0],p[1],p[2]]}}tn.CENTER_QUORUM=2,tn.MIN_SKIP=3,tn.MAX_MODULES=57;class qn{constructor(u){this.image=u}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(u){this.resultPointCallback=u==null?null:u.get(P.NEED_RESULT_POINT_CALLBACK);const _=new tn(this.image,this.resultPointCallback).find(u);return this.processFinderPatternInfo(_)}processFinderPatternInfo(u){const p=u.getTopLeft(),_=u.getTopRight(),E=u.getBottomLeft(),T=this.calculateModuleSize(p,_,E);if(T<1)throw new q("No pattern found in proccess finder.");const R=qn.computeDimension(p,_,E,T),N=or.getProvisionalVersionForDimension(R),z=N.getDimensionForVersion()-7;let Z=null;if(N.getAlignmentPatternCenters().length>0){const Ae=_.getX()-p.getX()+E.getX(),$e=_.getY()-p.getY()+E.getY(),We=1-3/z,Je=Math.floor(p.getX()+We*(Ae-p.getX())),st=Math.floor(p.getY()+We*($e-p.getY()));for(let kt=4;kt<=16;kt<<=1)try{Z=this.findAlignmentInRegion(T,Je,st,kt);break}catch(Mt){if(!(Mt instanceof q))throw Mt}}const oe=qn.createTransform(p,_,E,Z,R),ue=qn.sampleGrid(this.image,oe,R);let ge;return Z===null?ge=[E,p,_]:ge=[E,p,_,Z],new Ye(ue,ge)}static createTransform(u,p,_,E,T){const R=T-3.5;let N,z,Z,oe;return E!==null?(N=E.getX(),z=E.getY(),Z=R-3,oe=Z):(N=p.getX()-u.getX()+_.getX(),z=p.getY()-u.getY()+_.getY(),Z=R,oe=R),Ge.quadrilateralToQuadrilateral(3.5,3.5,R,3.5,Z,oe,3.5,R,u.getX(),u.getY(),p.getX(),p.getY(),N,z,_.getX(),_.getY())}static sampleGrid(u,p,_){return at.getInstance().sampleGridWithTransform(u,_,_,p)}static computeDimension(u,p,_,E){const T=ht.round(Se.distance(u,p)/E),R=ht.round(Se.distance(u,_)/E);let N=Math.floor((T+R)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new q("Dimensions could be not found.")}return N}calculateModuleSize(u,p,_){return(this.calculateModuleSizeOneWay(u,p)+this.calculateModuleSizeOneWay(u,_))/2}calculateModuleSizeOneWay(u,p){const _=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(p.getX()),Math.floor(p.getY())),E=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(u.getX()),Math.floor(u.getY()));return isNaN(_)?E/7:isNaN(E)?_/7:(_+E)/14}sizeOfBlackWhiteBlackRunBothWays(u,p,_,E){let T=this.sizeOfBlackWhiteBlackRun(u,p,_,E),R=1,N=u-(_-u);N<0?(R=u/(u-N),N=0):N>=this.image.getWidth()&&(R=(this.image.getWidth()-1-u)/(N-u),N=this.image.getWidth()-1);let z=Math.floor(p-(E-p)*R);return R=1,z<0?(R=p/(p-z),z=0):z>=this.image.getHeight()&&(R=(this.image.getHeight()-1-p)/(z-p),z=this.image.getHeight()-1),N=Math.floor(u+(N-u)*R),T+=this.sizeOfBlackWhiteBlackRun(u,p,N,z),T-1}sizeOfBlackWhiteBlackRun(u,p,_,E){const T=Math.abs(E-p)>Math.abs(_-u);if(T){let Ae=u;u=p,p=Ae,Ae=_,_=E,E=Ae}const R=Math.abs(_-u),N=Math.abs(E-p);let z=-R/2;const Z=u<_?1:-1,oe=p<E?1:-1;let ue=0;const ge=_+Z;for(let Ae=u,$e=p;Ae!==ge;Ae+=Z){const We=T?$e:Ae,Je=T?Ae:$e;if(ue===1===this.image.get(We,Je)){if(ue===2)return ht.distance(Ae,$e,u,p);ue++}if(z+=N,z>0){if($e===E)break;$e+=oe,z-=R}}return ue===2?ht.distance(_+Z,E,u,p):NaN}findAlignmentInRegion(u,p,_,E){const T=Math.floor(E*u),R=Math.max(0,p-T),N=Math.min(this.image.getWidth()-1,p+T);if(N-R<u*3)throw new q("Alignment top exceeds estimated module size.");const z=Math.max(0,_-T),Z=Math.min(this.image.getHeight()-1,_+T);if(Z-z<u*3)throw new q("Alignment bottom exceeds estimated module size.");return new kn(this.image,R,z,N-R,Z-z,u,this.resultPointCallback).find()}}class en{constructor(){this.decoder=new zn}getDecoder(){return this.decoder}decode(u,p){let _,E;if(p!=null&&p.get(P.PURE_BARCODE)!==void 0){const z=en.extractPureBits(u.getBlackMatrix());_=this.decoder.decodeBitMatrix(z,p),E=en.NO_POINTS}else{const z=new qn(u.getBlackMatrix()).detect(p);_=this.decoder.decodeBitMatrix(z.getBits(),p),E=z.getPoints()}_.getOther()instanceof $n&&_.getOther().applyMirroredCorrection(E);const T=new Te(_.getText(),_.getRawBytes(),void 0,E,Ie.QR_CODE,void 0),R=_.getByteSegments();R!==null&&T.putMetadata(pe.BYTE_SEGMENTS,R);const N=_.getECLevel();return N!==null&&T.putMetadata(pe.ERROR_CORRECTION_LEVEL,N),_.hasStructuredAppend()&&(T.putMetadata(pe.STRUCTURED_APPEND_SEQUENCE,_.getStructuredAppendSequenceNumber()),T.putMetadata(pe.STRUCTURED_APPEND_PARITY,_.getStructuredAppendParity())),T}reset(){}static extractPureBits(u){const p=u.getTopLeftOnBit(),_=u.getBottomRightOnBit();if(p===null||_===null)throw new q;const E=this.moduleSize(p,u);let T=p[1],R=_[1],N=p[0],z=_[0];if(N>=z||T>=R)throw new q;if(R-T!==z-N&&(z=N+(R-T),z>=u.getWidth()))throw new q;const Z=Math.round((z-N+1)/E),oe=Math.round((R-T+1)/E);if(Z<=0||oe<=0)throw new q;if(oe!==Z)throw new q;const ue=Math.floor(E/2);T+=ue,N+=ue;const ge=N+Math.floor((Z-1)*E)-z;if(ge>0){if(ge>ue)throw new q;N-=ge}const Ae=T+Math.floor((oe-1)*E)-R;if(Ae>0){if(Ae>ue)throw new q;T-=Ae}const $e=new Q(Z,oe);for(let We=0;We<oe;We++){const Je=T+Math.floor(We*E);for(let st=0;st<Z;st++)u.get(N+Math.floor(st*E),Je)&&$e.set(st,We)}return $e}static moduleSize(u,p){const _=p.getHeight(),E=p.getWidth();let T=u[0],R=u[1],N=!0,z=0;for(;T<E&&R<_;){if(N!==p.get(T,R)){if(++z===5)break;N=!N}T++,R++}if(T===E||R===_)throw new q;return(T-u[0])/7}}en.NO_POINTS=new Array;class gr{PDF417Common(){}static getBitCountSum(u){return ht.sum(u)}static toIntArray(u){if(u==null||!u.length)return gr.EMPTY_INT_ARRAY;const p=new Int32Array(u.length);let _=0;for(const E of u)p[_++]=E;return p}static getCodeword(u){const p=x.binarySearch(gr.SYMBOL_TABLE,u&262143);return p<0?-1:(gr.CODEWORD_TABLE[p]-1)%gr.NUMBER_OF_CODEWORDS}}gr.NUMBER_OF_CODEWORDS=929,gr.MAX_CODEWORDS_IN_BARCODE=gr.NUMBER_OF_CODEWORDS-1,gr.MIN_ROWS_IN_BARCODE=3,gr.MAX_ROWS_IN_BARCODE=90,gr.MODULES_IN_CODEWORD=17,gr.MODULES_IN_STOP_PATTERN=18,gr.BARS_IN_MODULE=8,gr.EMPTY_INT_ARRAY=new Int32Array([]),gr.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),gr.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Nr{constructor(u,p){this.bits=u,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class Er{static detectMultiple(u,p,_){let E=u.getBlackMatrix(),T=Er.detect(_,E);return T.length||(E=E.clone(),E.rotate180(),T=Er.detect(_,E)),new Nr(E,T)}static detect(u,p){const _=new Array;let E=0,T=0,R=!1;for(;E<p.getHeight();){const N=Er.findVertices(p,E,T);if(N[0]==null&&N[3]==null){if(!R)break;R=!1,T=0;for(const z of _)z[1]!=null&&(E=Math.trunc(Math.max(E,z[1].getY()))),z[3]!=null&&(E=Math.max(E,Math.trunc(z[3].getY())));E+=Er.ROW_STEP;continue}if(R=!0,_.push(N),!u)break;N[2]!=null?(T=Math.trunc(N[2].getX()),E=Math.trunc(N[2].getY())):(T=Math.trunc(N[4].getX()),E=Math.trunc(N[4].getY()))}return _}static findVertices(u,p,_){const E=u.getHeight(),T=u.getWidth(),R=new Array(8);return Er.copyToResult(R,Er.findRowsWithPattern(u,E,T,p,_,Er.START_PATTERN),Er.INDEXES_START_PATTERN),R[4]!=null&&(_=Math.trunc(R[4].getX()),p=Math.trunc(R[4].getY())),Er.copyToResult(R,Er.findRowsWithPattern(u,E,T,p,_,Er.STOP_PATTERN),Er.INDEXES_STOP_PATTERN),R}static copyToResult(u,p,_){for(let E=0;E<_.length;E++)u[_[E]]=p[E]}static findRowsWithPattern(u,p,_,E,T,R){const N=new Array(4);let z=!1;const Z=new Int32Array(R.length);for(;E<p;E+=Er.ROW_STEP){let ue=Er.findGuardPattern(u,T,E,_,!1,R,Z);if(ue!=null){for(;E>0;){const ge=Er.findGuardPattern(u,T,--E,_,!1,R,Z);if(ge!=null)ue=ge;else{E++;break}}N[0]=new Se(ue[0],E),N[1]=new Se(ue[1],E),z=!0;break}}let oe=E+1;if(z){let ue=0,ge=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;oe<p;oe++){const Ae=Er.findGuardPattern(u,ge[0],oe,_,!1,R,Z);if(Ae!=null&&Math.abs(ge[0]-Ae[0])<Er.MAX_PATTERN_DRIFT&&Math.abs(ge[1]-Ae[1])<Er.MAX_PATTERN_DRIFT)ge=Ae,ue=0;else{if(ue>Er.SKIPPED_ROW_COUNT_MAX)break;ue++}}oe-=ue+1,N[2]=new Se(ge[0],oe),N[3]=new Se(ge[1],oe)}return oe-E<Er.BARCODE_MIN_HEIGHT&&x.fill(N,null),N}static findGuardPattern(u,p,_,E,T,R,N){x.fillWithin(N,0,N.length,0);let z=p,Z=0;for(;u.get(z,_)&&z>0&&Z++<Er.MAX_PIXEL_DRIFT;)z--;let oe=z,ue=0,ge=R.length;for(let Ae=T;oe<E;oe++)if(u.get(oe,_)!==Ae)N[ue]++;else{if(ue===ge-1){if(Er.patternMatchVariance(N,R,Er.MAX_INDIVIDUAL_VARIANCE)<Er.MAX_AVG_VARIANCE)return new Int32Array([z,oe]);z+=N[0]+N[1],w.arraycopy(N,2,N,0,ue-1),N[ue-1]=0,N[ue]=0,ue--}else ue++;N[ue]=1,Ae=!Ae}return ue===ge-1&&Er.patternMatchVariance(N,R,Er.MAX_INDIVIDUAL_VARIANCE)<Er.MAX_AVG_VARIANCE?new Int32Array([z,oe-1]):null}static patternMatchVariance(u,p,_){let E=u.length,T=0,R=0;for(let Z=0;Z<E;Z++)T+=u[Z],R+=p[Z];if(T<R)return 1/0;let N=T/R;_*=N;let z=0;for(let Z=0;Z<E;Z++){let oe=u[Z],ue=p[Z]*N,ge=oe>ue?oe-ue:ue-oe;if(ge>_)return 1/0;z+=ge}return z/T}}Er.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Er.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Er.MAX_AVG_VARIANCE=.42,Er.MAX_INDIVIDUAL_VARIANCE=.8,Er.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Er.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Er.MAX_PIXEL_DRIFT=3,Er.MAX_PATTERN_DRIFT=5,Er.SKIPPED_ROW_COUNT_MAX=25,Er.ROW_STEP=5,Er.BARCODE_MIN_HEIGHT=10;class jr{constructor(u,p){if(p.length===0)throw new g;this.field=u;let _=p.length;if(_>1&&p[0]===0){let E=1;for(;E<_&&p[E]===0;)E++;E===_?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(_-E),w.arraycopy(p,E,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);if(u===1){let E=0;for(let T of this.coefficients)E=this.field.add(E,T);return E}let p=this.coefficients[0],_=this.coefficients.length;for(let E=1;E<_;E++)p=this.field.add(this.field.multiply(u,p),this.coefficients[E]);return p}add(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero())return u;if(u.isZero())return this;let p=this.coefficients,_=u.coefficients;if(p.length>_.length){let R=p;p=_,_=R}let E=new Int32Array(_.length),T=_.length-p.length;w.arraycopy(_,0,E,0,T);for(let R=T;R<_.length;R++)E[R]=this.field.add(p[R-T],_[R]);return new jr(this.field,E)}subtract(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");return u.isZero()?this:this.add(u.negative())}multiply(u){return u instanceof jr?this.multiplyOther(u):this.multiplyScalar(u)}multiplyOther(u){if(!this.field.equals(u.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero()||u.isZero())return new jr(this.field,new Int32Array([0]));let p=this.coefficients,_=p.length,E=u.coefficients,T=E.length,R=new Int32Array(_+T-1);for(let N=0;N<_;N++){let z=p[N];for(let Z=0;Z<T;Z++)R[N+Z]=this.field.add(R[N+Z],this.field.multiply(z,E[Z]))}return new jr(this.field,R)}negative(){let u=this.coefficients.length,p=new Int32Array(u);for(let _=0;_<u;_++)p[_]=this.field.subtract(0,this.coefficients[_]);return new jr(this.field,p)}multiplyScalar(u){if(u===0)return new jr(this.field,new Int32Array([0]));if(u===1)return this;let p=this.coefficients.length,_=new Int32Array(p);for(let E=0;E<p;E++)_[E]=this.field.multiply(this.coefficients[E],u);return new jr(this.field,_)}multiplyByMonomial(u,p){if(u<0)throw new g;if(p===0)return new jr(this.field,new Int32Array([0]));let _=this.coefficients.length,E=new Int32Array(_+u);for(let T=0;T<_;T++)E[T]=this.field.multiply(this.coefficients[T],p);return new jr(this.field,E)}toString(){let u=new V;for(let p=this.getDegree();p>=0;p--){let _=this.getCoefficient(p);_!==0&&(_<0?(u.append(" - "),_=-_):u.length()>0&&u.append(" + "),(p===0||_!==1)&&u.append(_),p!==0&&(p===1?u.append("x"):(u.append("x^"),u.append(p))))}return u.toString()}}class ii{add(u,p){return(u+p)%this.modulus}subtract(u,p){return(this.modulus+u-p)%this.modulus}exp(u){return this.expTable[u]}log(u){if(u===0)throw new g;return this.logTable[u]}inverse(u){if(u===0)throw new Qe;return this.expTable[this.modulus-this.logTable[u]-1]}multiply(u,p){return u===0||p===0?0:this.expTable[(this.logTable[u]+this.logTable[p])%(this.modulus-1)]}getSize(){return this.modulus}equals(u){return u===this}}class Cn extends ii{constructor(u,p){super(),this.modulus=u,this.expTable=new Int32Array(u),this.logTable=new Int32Array(u);let _=1;for(let E=0;E<u;E++)this.expTable[E]=_,_=_*p%u;for(let E=0;E<u-1;E++)this.logTable[this.expTable[E]]=E;this.zero=new jr(this,new Int32Array([0])),this.one=new jr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,p){if(u<0)throw new g;if(p===0)return this.zero;let _=new Int32Array(u+1);return _[0]=p,new jr(this,_)}}Cn.PDF417_GF=new Cn(gr.NUMBER_OF_CODEWORDS,3);class Rn{constructor(){this.field=Cn.PDF417_GF}decode(u,p,_){let E=new jr(this.field,u),T=new Int32Array(p),R=!1;for(let $e=p;$e>0;$e--){let We=E.evaluateAt(this.field.exp($e));T[p-$e]=We,We!==0&&(R=!0)}if(!R)return 0;let N=this.field.getOne();if(_!=null)for(const $e of _){let We=this.field.exp(u.length-1-$e),Je=new jr(this.field,new Int32Array([this.field.subtract(0,We),1]));N=N.multiply(Je)}let z=new jr(this.field,T),Z=this.runEuclideanAlgorithm(this.field.buildMonomial(p,1),z,p),oe=Z[0],ue=Z[1],ge=this.findErrorLocations(oe),Ae=this.findErrorMagnitudes(ue,oe,ge);for(let $e=0;$e<ge.length;$e++){let We=u.length-1-this.field.log(ge[$e]);if(We<0)throw S.getChecksumInstance();u[We]=this.field.subtract(u[We],Ae[$e])}return ge.length}runEuclideanAlgorithm(u,p,_){if(u.getDegree()<p.getDegree()){let ge=u;u=p,p=ge}let E=u,T=p,R=this.field.getZero(),N=this.field.getOne();for(;T.getDegree()>=Math.round(_/2);){let ge=E,Ae=R;if(E=T,R=N,E.isZero())throw S.getChecksumInstance();T=ge;let $e=this.field.getZero(),We=E.getCoefficient(E.getDegree()),Je=this.field.inverse(We);for(;T.getDegree()>=E.getDegree()&&!T.isZero();){let st=T.getDegree()-E.getDegree(),kt=this.field.multiply(T.getCoefficient(T.getDegree()),Je);$e=$e.add(this.field.buildMonomial(st,kt)),T=T.subtract(E.multiplyByMonomial(st,kt))}N=$e.multiply(R).subtract(Ae).negative()}let z=N.getCoefficient(0);if(z===0)throw S.getChecksumInstance();let Z=this.field.inverse(z),oe=N.multiply(Z),ue=T.multiply(Z);return[oe,ue]}findErrorLocations(u){let p=u.getDegree(),_=new Int32Array(p),E=0;for(let T=1;T<this.field.getSize()&&E<p;T++)u.evaluateAt(T)===0&&(_[E]=this.field.inverse(T),E++);if(E!==p)throw S.getChecksumInstance();return _}findErrorMagnitudes(u,p,_){let E=p.getDegree(),T=new Int32Array(E);for(let Z=1;Z<=E;Z++)T[E-Z]=this.field.multiply(Z,p.getCoefficient(Z));let R=new jr(this.field,T),N=_.length,z=new Int32Array(N);for(let Z=0;Z<N;Z++){let oe=this.field.inverse(_[Z]),ue=this.field.subtract(0,u.evaluateAt(oe)),ge=this.field.inverse(R.evaluateAt(oe));z[Z]=this.field.multiply(ue,ge)}return z}}class vn{constructor(u,p,_,E,T){u instanceof vn?this.constructor_2(u):this.constructor_1(u,p,_,E,T)}constructor_1(u,p,_,E,T){const R=p==null||_==null,N=E==null||T==null;if(R&&N)throw new q;R?(p=new Se(0,E.getY()),_=new Se(0,T.getY())):N&&(E=new Se(u.getWidth()-1,p.getY()),T=new Se(u.getWidth()-1,_.getY())),this.image=u,this.topLeft=p,this.bottomLeft=_,this.topRight=E,this.bottomRight=T,this.minX=Math.trunc(Math.min(p.getX(),_.getX())),this.maxX=Math.trunc(Math.max(E.getX(),T.getX())),this.minY=Math.trunc(Math.min(p.getY(),E.getY())),this.maxY=Math.trunc(Math.max(_.getY(),T.getY()))}constructor_2(u){this.image=u.image,this.topLeft=u.getTopLeft(),this.bottomLeft=u.getBottomLeft(),this.topRight=u.getTopRight(),this.bottomRight=u.getBottomRight(),this.minX=u.getMinX(),this.maxX=u.getMaxX(),this.minY=u.getMinY(),this.maxY=u.getMaxY()}static merge(u,p){return u==null?p:p==null?u:new vn(u.image,u.topLeft,u.bottomLeft,p.topRight,p.bottomRight)}addMissingRows(u,p,_){let E=this.topLeft,T=this.bottomLeft,R=this.topRight,N=this.bottomRight;if(u>0){let z=_?this.topLeft:this.topRight,Z=Math.trunc(z.getY()-u);Z<0&&(Z=0);let oe=new Se(z.getX(),Z);_?E=oe:R=oe}if(p>0){let z=_?this.bottomLeft:this.bottomRight,Z=Math.trunc(z.getY()+p);Z>=this.image.getHeight()&&(Z=this.image.getHeight()-1);let oe=new Se(z.getX(),Z);_?T=oe:N=oe}return new vn(this.image,E,T,R,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qn{constructor(u,p,_,E){this.columnCount=u,this.errorCorrectionLevel=E,this.rowCountUpperPart=p,this.rowCountLowerPart=_,this.rowCount=p+_}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class xn{constructor(){this.buffer=""}static form(u,p){let _=-1;function E(R,N,z,Z,oe,ue){if(R==="%%")return"%";if(p[++_]===void 0)return;R=Z?parseInt(Z.substr(1)):void 0;let ge=oe?parseInt(oe.substr(1)):void 0,Ae;switch(ue){case"s":Ae=p[_];break;case"c":Ae=p[_][0];break;case"f":Ae=parseFloat(p[_]).toFixed(R);break;case"p":Ae=parseFloat(p[_]).toPrecision(R);break;case"e":Ae=parseFloat(p[_]).toExponential(R);break;case"x":Ae=parseInt(p[_]).toString(ge||16);break;case"d":Ae=parseFloat(parseInt(p[_],ge||10).toPrecision(R)).toFixed(0);break}Ae=typeof Ae=="object"?JSON.stringify(Ae):(+Ae).toString(ge);let $e=parseInt(z),We=z&&z[0]+""=="0"?"0":" ";for(;Ae.length<$e;)Ae=N!==void 0?Ae+We:We+Ae;return Ae}let T=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(T,E)}format(u,...p){this.buffer+=xn.form(u,p)}toString(){return this.buffer}}class Mn{constructor(u){this.boundingBox=new vn(u),this.codewords=new Array(u.getMaxY()-u.getMinY()+1)}getCodewordNearby(u){let p=this.getCodeword(u);if(p!=null)return p;for(let _=1;_<Mn.MAX_NEARBY_DISTANCE;_++){let E=this.imageRowToCodewordIndex(u)-_;if(E>=0&&(p=this.codewords[E],p!=null)||(E=this.imageRowToCodewordIndex(u)+_,E<this.codewords.length&&(p=this.codewords[E],p!=null)))return p}return null}imageRowToCodewordIndex(u){return u-this.boundingBox.getMinY()}setCodeword(u,p){this.codewords[this.imageRowToCodewordIndex(u)]=p}getCodeword(u){return this.codewords[this.imageRowToCodewordIndex(u)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const u=new xn;let p=0;for(const _ of this.codewords){if(_==null){u.format("%3d:    |   %n",p++);continue}u.format("%3d: %3d|%3d%n",p++,_.getRowNumber(),_.getValue())}return u.toString()}}Mn.MAX_NEARBY_DISTANCE=5;class Yn{constructor(){this.values=new Map}setValue(u){u=Math.trunc(u);let p=this.values.get(u);p==null&&(p=0),p++,this.values.set(u,p)}getValue(){let u=-1,p=new Array;for(const[_,E]of this.values.entries()){const T={getKey:()=>_,getValue:()=>E};T.getValue()>u?(u=T.getValue(),p=[],p.push(T.getKey())):T.getValue()===u&&p.push(T.getKey())}return gr.toIntArray(p)}getConfidence(u){return this.values.get(u)}}class Ln extends Mn{constructor(u,p){super(u),this._isLeft=p}setRowNumbers(){for(let u of this.getCodewords())u?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(u){let p=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(p,u);let _=this.getBoundingBox(),E=this._isLeft?_.getTopLeft():_.getTopRight(),T=this._isLeft?_.getBottomLeft():_.getBottomRight(),R=this.imageRowToCodewordIndex(Math.trunc(E.getY())),N=this.imageRowToCodewordIndex(Math.trunc(T.getY())),z=-1,Z=1,oe=0;for(let ue=R;ue<N;ue++){if(p[ue]==null)continue;let ge=p[ue],Ae=ge.getRowNumber()-z;if(Ae===0)oe++;else if(Ae===1)Z=Math.max(Z,oe),oe=1,z=ge.getRowNumber();else if(Ae<0||ge.getRowNumber()>=u.getRowCount()||Ae>ue)p[ue]=null;else{let $e;Z>2?$e=(Z-2)*Ae:$e=Ae;let We=$e>=ue;for(let Je=1;Je<=$e&&!We;Je++)We=p[ue-Je]!=null;We?p[ue]=null:(z=ge.getRowNumber(),oe=1)}}}getRowHeights(){let u=this.getBarcodeMetadata();if(u==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(u);let p=new Int32Array(u.getRowCount());for(let _ of this.getCodewords())if(_!=null){let E=_.getRowNumber();if(E>=p.length)continue;p[E]++}return p}adjustIncompleteIndicatorColumnRowNumbers(u){let p=this.getBoundingBox(),_=this._isLeft?p.getTopLeft():p.getTopRight(),E=this._isLeft?p.getBottomLeft():p.getBottomRight(),T=this.imageRowToCodewordIndex(Math.trunc(_.getY())),R=this.imageRowToCodewordIndex(Math.trunc(E.getY())),N=this.getCodewords(),z=-1;for(let Z=T;Z<R;Z++){if(N[Z]==null)continue;let oe=N[Z];oe.setRowNumberAsRowIndicatorColumn();let ue=oe.getRowNumber()-z;ue===0||(ue===1?z=oe.getRowNumber():oe.getRowNumber()>=u.getRowCount()?N[Z]=null:z=oe.getRowNumber())}}getBarcodeMetadata(){let u=this.getCodewords(),p=new Yn,_=new Yn,E=new Yn,T=new Yn;for(let N of u){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let z=N.getValue()%30,Z=N.getRowNumber();switch(this._isLeft||(Z+=2),Z%3){case 0:_.setValue(z*3+1);break;case 1:T.setValue(z/3),E.setValue(z%3);break;case 2:p.setValue(z+1);break}}if(p.getValue().length===0||_.getValue().length===0||E.getValue().length===0||T.getValue().length===0||p.getValue()[0]<1||_.getValue()[0]+E.getValue()[0]<gr.MIN_ROWS_IN_BARCODE||_.getValue()[0]+E.getValue()[0]>gr.MAX_ROWS_IN_BARCODE)return null;let R=new Qn(p.getValue()[0],_.getValue()[0],E.getValue()[0],T.getValue()[0]);return this.removeIncorrectCodewords(u,R),R}removeIncorrectCodewords(u,p){for(let _=0;_<u.length;_++){let E=u[_];if(u[_]==null)continue;let T=E.getValue()%30,R=E.getRowNumber();if(R>p.getRowCount()){u[_]=null;continue}switch(this._isLeft||(R+=2),R%3){case 0:T*3+1!==p.getRowCountUpperPart()&&(u[_]=null);break;case 1:(Math.trunc(T/3)!==p.getErrorCorrectionLevel()||T%3!==p.getRowCountLowerPart())&&(u[_]=null);break;case 2:T+1!==p.getColumnCount()&&(u[_]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bn{constructor(u,p){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=u,this.barcodeColumnCount=u.getColumnCount(),this.boundingBox=p,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let u=gr.MAX_CODEWORDS_IN_BARCODE,p;do p=u,u=this.adjustRowNumbersAndGetCount();while(u>0&&u<p);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(u){u?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let u=this.adjustRowNumbersByRow();if(u===0)return 0;for(let p=1;p<this.barcodeColumnCount+1;p++){let _=this.detectionResultColumns[p].getCodewords();for(let E=0;E<_.length;E++)_[E]!=null&&(_[E].hasValidRowNumber()||this.adjustRowNumbers(p,E,_))}return u}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let u=this.detectionResultColumns[0].getCodewords(),p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let _=0;_<u.length;_++)if(u[_]!=null&&p[_]!=null&&u[_].getRowNumber()===p[_].getRowNumber())for(let E=1;E<=this.barcodeColumnCount;E++){let T=this.detectionResultColumns[E].getCodewords()[_];T!=null&&(T.setRowNumber(u[_].getRowNumber()),T.hasValidRowNumber()||(this.detectionResultColumns[E].getCodewords()[_]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let u=0,p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let _=0;_<p.length;_++){if(p[_]==null)continue;let E=p[_].getRowNumber(),T=0;for(let R=this.barcodeColumnCount+1;R>0&&T<this.ADJUST_ROW_NUMBER_SKIP;R--){let N=this.detectionResultColumns[R].getCodewords()[_];N!=null&&(T=Bn.adjustRowNumberIfValid(E,T,N),N.hasValidRowNumber()||u++)}}return u}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let u=0,p=this.detectionResultColumns[0].getCodewords();for(let _=0;_<p.length;_++){if(p[_]==null)continue;let E=p[_].getRowNumber(),T=0;for(let R=1;R<this.barcodeColumnCount+1&&T<this.ADJUST_ROW_NUMBER_SKIP;R++){let N=this.detectionResultColumns[R].getCodewords()[_];N!=null&&(T=Bn.adjustRowNumberIfValid(E,T,N),N.hasValidRowNumber()||u++)}}return u}static adjustRowNumberIfValid(u,p,_){return _==null||_.hasValidRowNumber()||(_.isValidRowNumber(u)?(_.setRowNumber(u),p=0):++p),p}adjustRowNumbers(u,p,_){if(!this.detectionResultColumns[u-1])return;let E=_[p],T=this.detectionResultColumns[u-1].getCodewords(),R=T;this.detectionResultColumns[u+1]!=null&&(R=this.detectionResultColumns[u+1].getCodewords());let N=new Array(14);N[2]=T[p],N[3]=R[p],p>0&&(N[0]=_[p-1],N[4]=T[p-1],N[5]=R[p-1]),p>1&&(N[8]=_[p-2],N[10]=T[p-2],N[11]=R[p-2]),p<_.length-1&&(N[1]=_[p+1],N[6]=T[p+1],N[7]=R[p+1]),p<_.length-2&&(N[9]=_[p+2],N[12]=T[p+2],N[13]=R[p+2]);for(let z of N)if(Bn.adjustRowNumber(E,z))return}static adjustRowNumber(u,p){return p==null?!1:p.hasValidRowNumber()&&p.getBucket()===u.getBucket()?(u.setRowNumber(p.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(u){this.boundingBox=u}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(u,p){this.detectionResultColumns[u]=p}getDetectionResultColumn(u){return this.detectionResultColumns[u]}toString(){let u=this.detectionResultColumns[0];u==null&&(u=this.detectionResultColumns[this.barcodeColumnCount+1]);let p=new xn;for(let _=0;_<u.getCodewords().length;_++){p.format("CW %3d:",_);for(let E=0;E<this.barcodeColumnCount+2;E++){if(this.detectionResultColumns[E]==null){p.format("    |   ");continue}let T=this.detectionResultColumns[E].getCodewords()[_];if(T==null){p.format("    |   ");continue}p.format(" %3d|%3d",T.getRowNumber(),T.getValue())}p.format("%n")}return p.toString()}}class jn{constructor(u,p,_,E){this.rowNumber=jn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(u),this.endX=Math.trunc(p),this.bucket=Math.trunc(_),this.value=Math.trunc(E)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(u){return u!==jn.BARCODE_ROW_UNKNOWN&&this.bucket===u%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(u){this.rowNumber=u}toString(){return this.rowNumber+"|"+this.value}}jn.BARCODE_ROW_UNKNOWN=-1;class hn{static initialize(){for(let u=0;u<gr.SYMBOL_TABLE.length;u++){let p=gr.SYMBOL_TABLE[u],_=p&1;for(let E=0;E<gr.BARS_IN_MODULE;E++){let T=0;for(;(p&1)===_;)T+=1,p>>=1;_=p&1,hn.RATIOS_TABLE[u]||(hn.RATIOS_TABLE[u]=new Array(gr.BARS_IN_MODULE)),hn.RATIOS_TABLE[u][gr.BARS_IN_MODULE-E-1]=Math.fround(T/gr.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(u){let p=hn.getDecodedCodewordValue(hn.sampleBitCounts(u));return p!==-1?p:hn.getClosestDecodedValue(u)}static sampleBitCounts(u){let p=ht.sum(u),_=new Int32Array(gr.BARS_IN_MODULE),E=0,T=0;for(let R=0;R<gr.MODULES_IN_CODEWORD;R++){let N=p/(2*gr.MODULES_IN_CODEWORD)+R*p/gr.MODULES_IN_CODEWORD;T+u[E]<=N&&(T+=u[E],E++),_[E]++}return _}static getDecodedCodewordValue(u){let p=hn.getBitValue(u);return gr.getCodeword(p)===-1?-1:p}static getBitValue(u){let p=0;for(let _=0;_<u.length;_++)for(let E=0;E<u[_];E++)p=p<<1|(_%2===0?1:0);return Math.trunc(p)}static getClosestDecodedValue(u){let p=ht.sum(u),_=new Array(gr.BARS_IN_MODULE);if(p>1)for(let R=0;R<_.length;R++)_[R]=Math.fround(u[R]/p);let E=Dt.MAX_VALUE,T=-1;this.bSymbolTableReady||hn.initialize();for(let R=0;R<hn.RATIOS_TABLE.length;R++){let N=0,z=hn.RATIOS_TABLE[R];for(let Z=0;Z<gr.BARS_IN_MODULE;Z++){let oe=Math.fround(z[Z]-_[Z]);if(N+=Math.fround(oe*oe),N>=E)break}N<E&&(E=N,T=gr.SYMBOL_TABLE[R])}return T}}hn.bSymbolTableReady=!1,hn.RATIOS_TABLE=new Array(gr.SYMBOL_TABLE.length).map(ae=>new Array(gr.BARS_IN_MODULE));class ni{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(u){this.segmentIndex=u}getFileId(){return this.fileId}setFileId(u){this.fileId=u}getOptionalData(){return this.optionalData}setOptionalData(u){this.optionalData=u}isLastSegment(){return this.lastSegment}setLastSegment(u){this.lastSegment=u}getSegmentCount(){return this.segmentCount}setSegmentCount(u){this.segmentCount=u}getSender(){return this.sender||null}setSender(u){this.sender=u}getAddressee(){return this.addressee||null}setAddressee(u){this.addressee=u}getFileName(){return this.fileName}setFileName(u){this.fileName=u}getFileSize(){return this.fileSize}setFileSize(u){this.fileSize=u}getChecksum(){return this.checksum}setChecksum(u){this.checksum=u}getTimestamp(){return this.timestamp}setTimestamp(u){this.timestamp=u}}class Xn{static parseLong(u,p=void 0){return parseInt(u,p)}}class tr extends d{}tr.kind="NullPointerException";class Ar{writeBytes(u){this.writeBytesOffset(u,0,u.length)}writeBytesOffset(u,p,_){if(u==null)throw new tr;if(p<0||p>u.length||_<0||p+_>u.length||p+_<0)throw new m;if(_===0)return;for(let E=0;E<_;E++)this.write(u[p+E])}flush(){}close(){}}class Qt extends d{}class be extends Ar{constructor(u=32){if(super(),this.count=0,u<0)throw new g("Negative initial size: "+u);this.buf=new Uint8Array(u)}ensureCapacity(u){u-this.buf.length>0&&this.grow(u)}grow(u){let _=this.buf.length<<1;if(_-u<0&&(_=u),_<0){if(u<0)throw new Qt;_=y.MAX_VALUE}this.buf=x.copyOfUint8Array(this.buf,_)}write(u){this.ensureCapacity(this.count+1),this.buf[this.count]=u,this.count+=1}writeBytesOffset(u,p,_){if(p<0||p>u.length||_<0||p+_-u.length>0)throw new m;this.ensureCapacity(this.count+_),w.arraycopy(u,p,this.buf,this.count,_),this.count+=_}writeTo(u){u.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return x.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(u){return u?typeof u=="string"?this.toString_string(u):this.toString_number(u):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(u){return new String(this.buf).toString()}toString_number(u){return new String(this.buf).toString()}close(){}}var ve;(function(ae){ae[ae.ALPHA=0]="ALPHA",ae[ae.LOWER=1]="LOWER",ae[ae.MIXED=2]="MIXED",ae[ae.PUNCT=3]="PUNCT",ae[ae.ALPHA_SHIFT=4]="ALPHA_SHIFT",ae[ae.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ve||(ve={}));function Fe(){if(typeof window<"u")return window.BigInt||null;if(typeof commonjsGlobal<"u")return commonjsGlobal.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let tt;function Bt(ae){if(typeof tt>"u"&&(tt=Fe()),tt===null)throw new Error("BigInt is not supported!");return tt(ae)}function Et(){let ae=[];ae[0]=Bt(1);let u=Bt(900);ae[1]=u;for(let p=2;p<16;p++)ae[p]=ae[p-1]*u;return ae}class He{static decode(u,p){let _=new V(""),E=B.ISO8859_1;_.enableDecoding(E);let T=1,R=u[T++],N=new ni;for(;T<u[0];){switch(R){case He.TEXT_COMPACTION_MODE_LATCH:T=He.textCompaction(u,T,_);break;case He.BYTE_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH_6:T=He.byteCompaction(R,u,E,T,_);break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(u[T++]);break;case He.NUMERIC_COMPACTION_MODE_LATCH:T=He.numericCompaction(u,T,_);break;case He.ECI_CHARSET:B.getCharacterSetECIByValue(u[T++]);break;case He.ECI_GENERAL_PURPOSE:T+=2;break;case He.ECI_USER_DEFINED:T++;break;case He.BEGIN_MACRO_PDF417_CONTROL_BLOCK:T=He.decodeMacroBlock(u,T,N);break;case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case He.MACRO_PDF417_TERMINATOR:throw new L;default:T--,T=He.textCompaction(u,T,_);break}if(T<u.length)R=u[T++];else throw L.getFormatInstance()}if(_.length()===0)throw L.getFormatInstance();let z=new me(null,_.toString(),null,p);return z.setOther(N),z}static decodeMacroBlock(u,p,_){if(p+He.NUMBER_OF_SEQUENCE_CODEWORDS>u[0])throw L.getFormatInstance();let E=new Int32Array(He.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<He.NUMBER_OF_SEQUENCE_CODEWORDS;N++,p++)E[N]=u[p];_.setSegmentIndex(y.parseInt(He.decodeBase900toBase10(E,He.NUMBER_OF_SEQUENCE_CODEWORDS)));let T=new V;p=He.textCompaction(u,p,T),_.setFileId(T.toString());let R=-1;for(u[p]===He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(R=p+1);p<u[0];)switch(u[p]){case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(p++,u[p]){case He.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new V;p=He.textCompaction(u,p+1,N),_.setFileName(N.toString());break;case He.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let z=new V;p=He.textCompaction(u,p+1,z),_.setSender(z.toString());break;case He.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let Z=new V;p=He.textCompaction(u,p+1,Z),_.setAddressee(Z.toString());break;case He.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let oe=new V;p=He.numericCompaction(u,p+1,oe),_.setSegmentCount(y.parseInt(oe.toString()));break;case He.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ue=new V;p=He.numericCompaction(u,p+1,ue),_.setTimestamp(Xn.parseLong(ue.toString()));break;case He.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ge=new V;p=He.numericCompaction(u,p+1,ge),_.setChecksum(y.parseInt(ge.toString()));break;case He.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Ae=new V;p=He.numericCompaction(u,p+1,Ae),_.setFileSize(Xn.parseLong(Ae.toString()));break;default:throw L.getFormatInstance()}break;case He.MACRO_PDF417_TERMINATOR:p++,_.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(R!==-1){let N=p-R;_.isLastSegment()&&N--,_.setOptionalData(x.copyOfRange(u,R,R+N))}return p}static textCompaction(u,p,_){let E=new Int32Array((u[0]-p)*2),T=new Int32Array((u[0]-p)*2),R=0,N=!1;for(;p<u[0]&&!N;){let z=u[p++];if(z<He.TEXT_COMPACTION_MODE_LATCH)E[R]=z/30,E[R+1]=z%30,R+=2;else switch(z){case He.TEXT_COMPACTION_MODE_LATCH:E[R++]=He.TEXT_COMPACTION_MODE_LATCH;break;case He.BYTE_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH_6:case He.NUMERIC_COMPACTION_MODE_LATCH:case He.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case He.MACRO_PDF417_TERMINATOR:p--,N=!0;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E[R]=He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,z=u[p++],T[R]=z,R++;break}}return He.decodeTextCompaction(E,T,R,_),p}static decodeTextCompaction(u,p,_,E){let T=ve.ALPHA,R=ve.ALPHA,N=0;for(;N<_;){let z=u[N],Z="";switch(T){case ve.ALPHA:if(z<26)Z=String.fromCharCode(65+z);else switch(z){case 26:Z=" ";break;case He.LL:T=ve.LOWER;break;case He.ML:T=ve.MIXED;break;case He.PS:R=T,T=ve.PUNCT_SHIFT;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(p[N]);break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break;case ve.LOWER:if(z<26)Z=String.fromCharCode(97+z);else switch(z){case 26:Z=" ";break;case He.AS:R=T,T=ve.ALPHA_SHIFT;break;case He.ML:T=ve.MIXED;break;case He.PS:R=T,T=ve.PUNCT_SHIFT;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(p[N]);break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break;case ve.MIXED:if(z<He.PL)Z=He.MIXED_CHARS[z];else switch(z){case He.PL:T=ve.PUNCT;break;case 26:Z=" ";break;case He.LL:T=ve.LOWER;break;case He.AL:T=ve.ALPHA;break;case He.PS:R=T,T=ve.PUNCT_SHIFT;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(p[N]);break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break;case ve.PUNCT:if(z<He.PAL)Z=He.PUNCT_CHARS[z];else switch(z){case He.PAL:T=ve.ALPHA;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(p[N]);break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break;case ve.ALPHA_SHIFT:if(T=R,z<26)Z=String.fromCharCode(65+z);else switch(z){case 26:Z=" ";break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break;case ve.PUNCT_SHIFT:if(T=R,z<He.PAL)Z=He.PUNCT_CHARS[z];else switch(z){case He.PAL:T=ve.ALPHA;break;case He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:E.append(p[N]);break;case He.TEXT_COMPACTION_MODE_LATCH:T=ve.ALPHA;break}break}Z!==""&&E.append(Z),N++}}static byteCompaction(u,p,_,E,T){let R=new be,N=0,z=0,Z=!1;switch(u){case He.BYTE_COMPACTION_MODE_LATCH:let oe=new Int32Array(6),ue=p[E++];for(;E<p[0]&&!Z;)switch(oe[N++]=ue,z=900*z+ue,ue=p[E++],ue){case He.TEXT_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH:case He.NUMERIC_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH_6:case He.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case He.MACRO_PDF417_TERMINATOR:E--,Z=!0;break;default:if(N%5===0&&N>0){for(let ge=0;ge<6;++ge)R.write(Number(Bt(z)>>Bt(8*(5-ge))));z=0,N=0}break}E===p[0]&&ue<He.TEXT_COMPACTION_MODE_LATCH&&(oe[N++]=ue);for(let ge=0;ge<N;ge++)R.write(oe[ge]);break;case He.BYTE_COMPACTION_MODE_LATCH_6:for(;E<p[0]&&!Z;){let ge=p[E++];if(ge<He.TEXT_COMPACTION_MODE_LATCH)N++,z=900*z+ge;else switch(ge){case He.TEXT_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH:case He.NUMERIC_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH_6:case He.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case He.MACRO_PDF417_TERMINATOR:E--,Z=!0;break}if(N%5===0&&N>0){for(let Ae=0;Ae<6;++Ae)R.write(Number(Bt(z)>>Bt(8*(5-Ae))));z=0,N=0}}break}return T.append(F.decode(R.toByteArray(),_)),E}static numericCompaction(u,p,_){let E=0,T=!1,R=new Int32Array(He.MAX_NUMERIC_CODEWORDS);for(;p<u[0]&&!T;){let N=u[p++];if(p===u[0]&&(T=!0),N<He.TEXT_COMPACTION_MODE_LATCH)R[E]=N,E++;else switch(N){case He.TEXT_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH:case He.BYTE_COMPACTION_MODE_LATCH_6:case He.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case He.MACRO_PDF417_TERMINATOR:p--,T=!0;break}(E%He.MAX_NUMERIC_CODEWORDS===0||N===He.NUMERIC_COMPACTION_MODE_LATCH||T)&&E>0&&(_.append(He.decodeBase900toBase10(R,E)),E=0)}return p}static decodeBase900toBase10(u,p){let _=Bt(0);for(let T=0;T<p;T++)_+=He.EXP900[p-T-1]*Bt(u[T]);let E=_.toString();if(E.charAt(0)!=="1")throw new L;return E.substring(1)}}He.TEXT_COMPACTION_MODE_LATCH=900,He.BYTE_COMPACTION_MODE_LATCH=901,He.NUMERIC_COMPACTION_MODE_LATCH=902,He.BYTE_COMPACTION_MODE_LATCH_6=924,He.ECI_USER_DEFINED=925,He.ECI_GENERAL_PURPOSE=926,He.ECI_CHARSET=927,He.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,He.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,He.MACRO_PDF417_TERMINATOR=922,He.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,He.MAX_NUMERIC_CODEWORDS=15,He.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,He.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,He.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,He.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,He.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,He.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,He.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,He.PL=25,He.LL=27,He.AS=27,He.ML=28,He.AL=28,He.PS=29,He.PAL=29,He.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,He.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",He.EXP900=Fe()?Et():[],He.NUMBER_OF_SEQUENCE_CODEWORDS=2;class At{constructor(){}static decode(u,p,_,E,T,R,N){let z=new vn(u,p,_,E,T),Z=null,oe=null,ue;for(let $e=!0;;$e=!1){if(p!=null&&(Z=At.getRowIndicatorColumn(u,z,p,!0,R,N)),E!=null&&(oe=At.getRowIndicatorColumn(u,z,E,!1,R,N)),ue=At.merge(Z,oe),ue==null)throw q.getNotFoundInstance();let We=ue.getBoundingBox();if($e&&We!=null&&(We.getMinY()<z.getMinY()||We.getMaxY()>z.getMaxY()))z=We;else break}ue.setBoundingBox(z);let ge=ue.getBarcodeColumnCount()+1;ue.setDetectionResultColumn(0,Z),ue.setDetectionResultColumn(ge,oe);let Ae=Z!=null;for(let $e=1;$e<=ge;$e++){let We=Ae?$e:ge-$e;if(ue.getDetectionResultColumn(We)!==void 0)continue;let Je;We===0||We===ge?Je=new Ln(z,We===0):Je=new Mn(z),ue.setDetectionResultColumn(We,Je);let st=-1,kt=st;for(let Mt=z.getMinY();Mt<=z.getMaxY();Mt++){if(st=At.getStartColumn(ue,We,Mt,Ae),st<0||st>z.getMaxX()){if(kt===-1)continue;st=kt}let Rt=At.detectCodeword(u,z.getMinX(),z.getMaxX(),Ae,st,Mt,R,N);Rt!=null&&(Je.setCodeword(Mt,Rt),kt=st,R=Math.min(R,Rt.getWidth()),N=Math.max(N,Rt.getWidth()))}}return At.createDecoderResult(ue)}static merge(u,p){if(u==null&&p==null)return null;let _=At.getBarcodeMetadata(u,p);if(_==null)return null;let E=vn.merge(At.adjustBoundingBox(u),At.adjustBoundingBox(p));return new Bn(_,E)}static adjustBoundingBox(u){if(u==null)return null;let p=u.getRowHeights();if(p==null)return null;let _=At.getMax(p),E=0;for(let N of p)if(E+=_-N,N>0)break;let T=u.getCodewords();for(let N=0;E>0&&T[N]==null;N++)E--;let R=0;for(let N=p.length-1;N>=0&&(R+=_-p[N],!(p[N]>0));N--);for(let N=T.length-1;R>0&&T[N]==null;N--)R--;return u.getBoundingBox().addMissingRows(E,R,u.isLeft())}static getMax(u){let p=-1;for(let _ of u)p=Math.max(p,_);return p}static getBarcodeMetadata(u,p){let _;if(u==null||(_=u.getBarcodeMetadata())==null)return p==null?null:p.getBarcodeMetadata();let E;return p==null||(E=p.getBarcodeMetadata())==null?_:_.getColumnCount()!==E.getColumnCount()&&_.getErrorCorrectionLevel()!==E.getErrorCorrectionLevel()&&_.getRowCount()!==E.getRowCount()?null:_}static getRowIndicatorColumn(u,p,_,E,T,R){let N=new Ln(p,E);for(let z=0;z<2;z++){let Z=z===0?1:-1,oe=Math.trunc(Math.trunc(_.getX()));for(let ue=Math.trunc(Math.trunc(_.getY()));ue<=p.getMaxY()&&ue>=p.getMinY();ue+=Z){let ge=At.detectCodeword(u,0,u.getWidth(),E,oe,ue,T,R);ge!=null&&(N.setCodeword(ue,ge),E?oe=ge.getStartX():oe=ge.getEndX())}}return N}static adjustCodewordCount(u,p){let _=p[0][1],E=_.getValue(),T=u.getBarcodeColumnCount()*u.getBarcodeRowCount()-At.getNumberOfECCodeWords(u.getBarcodeECLevel());if(E.length===0){if(T<1||T>gr.MAX_CODEWORDS_IN_BARCODE)throw q.getNotFoundInstance();_.setValue(T)}else E[0]!==T&&_.setValue(T)}static createDecoderResult(u){let p=At.createBarcodeMatrix(u);At.adjustCodewordCount(u,p);let _=new Array,E=new Int32Array(u.getBarcodeRowCount()*u.getBarcodeColumnCount()),T=[],R=new Array;for(let z=0;z<u.getBarcodeRowCount();z++)for(let Z=0;Z<u.getBarcodeColumnCount();Z++){let oe=p[z][Z+1].getValue(),ue=z*u.getBarcodeColumnCount()+Z;oe.length===0?_.push(ue):oe.length===1?E[ue]=oe[0]:(R.push(ue),T.push(oe))}let N=new Array(T.length);for(let z=0;z<N.length;z++)N[z]=T[z];return At.createDecoderResultFromAmbiguousValues(u.getBarcodeECLevel(),E,gr.toIntArray(_),gr.toIntArray(R),N)}static createDecoderResultFromAmbiguousValues(u,p,_,E,T){let R=new Int32Array(E.length),N=100;for(;N-- >0;){for(let z=0;z<R.length;z++)p[E[z]]=T[z][R[z]];try{return At.decodeCodewords(p,u,_)}catch(z){if(!(z instanceof S))throw z}if(R.length===0)throw S.getChecksumInstance();for(let z=0;z<R.length;z++)if(R[z]<T[z].length-1){R[z]++;break}else if(R[z]=0,z===R.length-1)throw S.getChecksumInstance()}throw S.getChecksumInstance()}static createBarcodeMatrix(u){let p=Array.from({length:u.getBarcodeRowCount()},()=>new Array(u.getBarcodeColumnCount()+2));for(let E=0;E<p.length;E++)for(let T=0;T<p[E].length;T++)p[E][T]=new Yn;let _=0;for(let E of u.getDetectionResultColumns()){if(E!=null){for(let T of E.getCodewords())if(T!=null){let R=T.getRowNumber();if(R>=0){if(R>=p.length)continue;p[R][_].setValue(T.getValue())}}}_++}return p}static isValidBarcodeColumn(u,p){return p>=0&&p<=u.getBarcodeColumnCount()+1}static getStartColumn(u,p,_,E){let T=E?1:-1,R=null;if(At.isValidBarcodeColumn(u,p-T)&&(R=u.getDetectionResultColumn(p-T).getCodeword(_)),R!=null)return E?R.getEndX():R.getStartX();if(R=u.getDetectionResultColumn(p).getCodewordNearby(_),R!=null)return E?R.getStartX():R.getEndX();if(At.isValidBarcodeColumn(u,p-T)&&(R=u.getDetectionResultColumn(p-T).getCodewordNearby(_)),R!=null)return E?R.getEndX():R.getStartX();let N=0;for(;At.isValidBarcodeColumn(u,p-T);){p-=T;for(let z of u.getDetectionResultColumn(p).getCodewords())if(z!=null)return(E?z.getEndX():z.getStartX())+T*N*(z.getEndX()-z.getStartX());N++}return E?u.getBoundingBox().getMinX():u.getBoundingBox().getMaxX()}static detectCodeword(u,p,_,E,T,R,N,z){T=At.adjustCodewordStartColumn(u,p,_,E,T,R);let Z=At.getModuleBitCount(u,p,_,E,T,R);if(Z==null)return null;let oe,ue=ht.sum(Z);if(E)oe=T+ue;else{for(let $e=0;$e<Z.length/2;$e++){let We=Z[$e];Z[$e]=Z[Z.length-1-$e],Z[Z.length-1-$e]=We}oe=T,T=oe-ue}if(!At.checkCodewordSkew(ue,N,z))return null;let ge=hn.getDecodedValue(Z),Ae=gr.getCodeword(ge);return Ae===-1?null:new jn(T,oe,At.getCodewordBucketNumber(ge),Ae)}static getModuleBitCount(u,p,_,E,T,R){let N=T,z=new Int32Array(8),Z=0,oe=E?1:-1,ue=E;for(;(E?N<_:N>=p)&&Z<z.length;)u.get(N,R)===ue?(z[Z]++,N+=oe):(Z++,ue=!ue);return Z===z.length||N===(E?_:p)&&Z===z.length-1?z:null}static getNumberOfECCodeWords(u){return 2<<u}static adjustCodewordStartColumn(u,p,_,E,T,R){let N=T,z=E?-1:1;for(let Z=0;Z<2;Z++){for(;(E?N>=p:N<_)&&E===u.get(N,R);){if(Math.abs(T-N)>At.CODEWORD_SKEW_SIZE)return T;N+=z}z=-z,E=!E}return N}static checkCodewordSkew(u,p,_){return p-At.CODEWORD_SKEW_SIZE<=u&&u<=_+At.CODEWORD_SKEW_SIZE}static decodeCodewords(u,p,_){if(u.length===0)throw L.getFormatInstance();let E=1<<p+1,T=At.correctErrors(u,_,E);At.verifyCodewordCount(u,E);let R=He.decode(u,""+p);return R.setErrorsCorrected(T),R.setErasures(_.length),R}static correctErrors(u,p,_){if(p!=null&&p.length>_/2+At.MAX_ERRORS||_<0||_>At.MAX_EC_CODEWORDS)throw S.getChecksumInstance();return At.errorCorrection.decode(u,_,p)}static verifyCodewordCount(u,p){if(u.length<4)throw L.getFormatInstance();let _=u[0];if(_>u.length)throw L.getFormatInstance();if(_===0)if(p<u.length)u[0]=u.length-p;else throw L.getFormatInstance()}static getBitCountForCodeword(u){let p=new Int32Array(8),_=0,E=p.length-1;for(;!((u&1)!==_&&(_=u&1,E--,E<0));)p[E]++,u>>=1;return p}static getCodewordBucketNumber(u){return u instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(u):this.getCodewordBucketNumber_number(u)}static getCodewordBucketNumber_number(u){return At.getCodewordBucketNumber(At.getBitCountForCodeword(u))}static getCodewordBucketNumber_Int32Array(u){return(u[0]-u[2]+u[4]-u[6]+9)%9}static toString(u){let p=new xn;for(let _=0;_<u.length;_++){p.format("Row %2d: ",_);for(let E=0;E<u[_].length;E++){let T=u[_][E];T.getValue().length===0?p.format("        ",null):p.format("%4d(%2d)",T.getValue()[0],T.getConfidence(T.getValue()[0]))}p.format("%n")}return p.toString()}}At.CODEWORD_SKEW_SIZE=2,At.MAX_ERRORS=3,At.MAX_EC_CODEWORDS=512,At.errorCorrection=new Rn;class qt{decode(u,p=null){let _=qt.decode(u,p,!1);if(_==null||_.length===0||_[0]==null)throw q.getNotFoundInstance();return _[0]}decodeMultiple(u,p=null){try{return qt.decode(u,p,!0)}catch(_){throw _ instanceof L||_ instanceof S?q.getNotFoundInstance():_}}static decode(u,p,_){const E=new Array,T=Er.detectMultiple(u,p,_);for(const R of T.getPoints()){const N=At.decode(T.getBits(),R[4],R[5],R[6],R[7],qt.getMinCodewordWidth(R),qt.getMaxCodewordWidth(R)),z=new Te(N.getText(),N.getRawBytes(),void 0,R,Ie.PDF_417);z.putMetadata(pe.ERROR_CORRECTION_LEVEL,N.getECLevel());const Z=N.getOther();Z!=null&&z.putMetadata(pe.PDF417_EXTRA_METADATA,Z),E.push(z)}return E.map(R=>R)}static getMaxWidth(u,p){return u==null||p==null?0:Math.trunc(Math.abs(u.getX()-p.getX()))}static getMinWidth(u,p){return u==null||p==null?y.MAX_VALUE:Math.trunc(Math.abs(u.getX()-p.getX()))}static getMaxCodewordWidth(u){return Math.floor(Math.max(Math.max(qt.getMaxWidth(u[0],u[4]),qt.getMaxWidth(u[6],u[2])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN),Math.max(qt.getMaxWidth(u[1],u[5]),qt.getMaxWidth(u[7],u[3])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(u){return Math.floor(Math.min(Math.min(qt.getMinWidth(u[0],u[4]),qt.getMinWidth(u[6],u[2])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN),Math.min(qt.getMinWidth(u[1],u[5]),qt.getMinWidth(u[7],u[3])*gr.MODULES_IN_CODEWORD/gr.MODULES_IN_STOP_PATTERN)))}reset(){}}class Or extends d{}Or.kind="ReaderException";class Rr{constructor(u,p){this.verbose=u===!0,p&&this.setHints(p)}decode(u,p){return p&&this.setHints(p),this.decodeInternal(u)}decodeWithState(u){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(u)}setHints(u){this.hints=u;const p=!n(u)&&u.get(P.TRY_HARDER)===!0,_=n(u)?null:u.get(P.POSSIBLE_FORMATS),E=new Array;if(!n(_)){const T=_.some(R=>R===Ie.UPC_A||R===Ie.UPC_E||R===Ie.EAN_13||R===Ie.EAN_8||R===Ie.CODABAR||R===Ie.CODE_39||R===Ie.CODE_93||R===Ie.CODE_128||R===Ie.ITF||R===Ie.RSS_14||R===Ie.RSS_EXPANDED);T&&!p&&E.push(new kr(u,this.verbose)),_.includes(Ie.QR_CODE)&&E.push(new en),_.includes(Ie.DATA_MATRIX)&&E.push(new Kr),_.includes(Ie.AZTEC)&&E.push(new Pt),_.includes(Ie.PDF_417)&&E.push(new qt),T&&p&&E.push(new kr(u,this.verbose))}E.length===0&&(p||E.push(new kr(u,this.verbose)),E.push(new en),E.push(new Kr),E.push(new Pt),E.push(new qt),p&&E.push(new kr(u,this.verbose))),this.readers=E}reset(){if(this.readers!==null)for(const u of this.readers)u.reset()}decodeInternal(u){if(this.readers===null)throw new Or("No readers where selected, nothing can be read.");for(const p of this.readers)try{return p.decode(u,this.hints)}catch(_){if(_ instanceof Or)continue}throw new q("No MultiFormat Readers were able to detect the code.")}}class Wr extends Re{constructor(u=null,p=500){const _=new Rr;_.setHints(u),super(_,p)}decodeBitmap(u){return this.reader.decodeWithState(u)}}class an extends Re{constructor(u=500){super(new qt,u)}}class Sr extends Re{constructor(u=500){super(new en,u)}}var Ir;(function(ae){ae[ae.ERROR_CORRECTION=0]="ERROR_CORRECTION",ae[ae.CHARACTER_SET=1]="CHARACTER_SET",ae[ae.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ae[ae.MIN_SIZE=3]="MIN_SIZE",ae[ae.MAX_SIZE=4]="MAX_SIZE",ae[ae.MARGIN=5]="MARGIN",ae[ae.PDF417_COMPACT=6]="PDF417_COMPACT",ae[ae.PDF417_COMPACTION=7]="PDF417_COMPACTION",ae[ae.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ae[ae.AZTEC_LAYERS=9]="AZTEC_LAYERS",ae[ae.QR_VERSION=10]="QR_VERSION"})(Ir||(Ir={}));var Nt=Ir;class un{constructor(u){this.field=u,this.cachedGenerators=[],this.cachedGenerators.push(new Xe(u,Int32Array.from([1])))}buildGenerator(u){const p=this.cachedGenerators;if(u>=p.length){let _=p[p.length-1];const E=this.field;for(let T=p.length;T<=u;T++){const R=_.multiply(new Xe(E,Int32Array.from([1,E.exp(T-1+E.getGeneratorBase())])));p.push(R),_=R}}return p[u]}encode(u,p){if(p===0)throw new g("No error correction bytes");const _=u.length-p;if(_<=0)throw new g("No data bytes provided");const E=this.buildGenerator(p),T=new Int32Array(_);w.arraycopy(u,0,T,0,_);let R=new Xe(this.field,T);R=R.multiplyByMonomial(p,1);const z=R.divide(E)[1].getCoefficients(),Z=p-z.length;for(let oe=0;oe<Z;oe++)u[_+oe]=0;w.arraycopy(z,0,u,_+Z,z.length)}}class pr{constructor(){}static applyMaskPenaltyRule1(u){return pr.applyMaskPenaltyRule1Internal(u,!0)+pr.applyMaskPenaltyRule1Internal(u,!1)}static applyMaskPenaltyRule2(u){let p=0;const _=u.getArray(),E=u.getWidth(),T=u.getHeight();for(let R=0;R<T-1;R++){const N=_[R];for(let z=0;z<E-1;z++){const Z=N[z];Z===N[z+1]&&Z===_[R+1][z]&&Z===_[R+1][z+1]&&p++}}return pr.N2*p}static applyMaskPenaltyRule3(u){let p=0;const _=u.getArray(),E=u.getWidth(),T=u.getHeight();for(let R=0;R<T;R++)for(let N=0;N<E;N++){const z=_[R];N+6<E&&z[N]===1&&z[N+1]===0&&z[N+2]===1&&z[N+3]===1&&z[N+4]===1&&z[N+5]===0&&z[N+6]===1&&(pr.isWhiteHorizontal(z,N-4,N)||pr.isWhiteHorizontal(z,N+7,N+11))&&p++,R+6<T&&_[R][N]===1&&_[R+1][N]===0&&_[R+2][N]===1&&_[R+3][N]===1&&_[R+4][N]===1&&_[R+5][N]===0&&_[R+6][N]===1&&(pr.isWhiteVertical(_,N,R-4,R)||pr.isWhiteVertical(_,N,R+7,R+11))&&p++}return p*pr.N3}static isWhiteHorizontal(u,p,_){p=Math.max(p,0),_=Math.min(_,u.length);for(let E=p;E<_;E++)if(u[E]===1)return!1;return!0}static isWhiteVertical(u,p,_,E){_=Math.max(_,0),E=Math.min(E,u.length);for(let T=_;T<E;T++)if(u[T][p]===1)return!1;return!0}static applyMaskPenaltyRule4(u){let p=0;const _=u.getArray(),E=u.getWidth(),T=u.getHeight();for(let z=0;z<T;z++){const Z=_[z];for(let oe=0;oe<E;oe++)Z[oe]===1&&p++}const R=u.getHeight()*u.getWidth();return Math.floor(Math.abs(p*2-R)*10/R)*pr.N4}static getDataMaskBit(u,p,_){let E,T;switch(u){case 0:E=_+p&1;break;case 1:E=_&1;break;case 2:E=p%3;break;case 3:E=(_+p)%3;break;case 4:E=Math.floor(_/2)+Math.floor(p/3)&1;break;case 5:T=_*p,E=(T&1)+T%3;break;case 6:T=_*p,E=(T&1)+T%3&1;break;case 7:T=_*p,E=T%3+(_+p&1)&1;break;default:throw new g("Invalid mask pattern: "+u)}return E===0}static applyMaskPenaltyRule1Internal(u,p){let _=0;const E=p?u.getHeight():u.getWidth(),T=p?u.getWidth():u.getHeight(),R=u.getArray();for(let N=0;N<E;N++){let z=0,Z=-1;for(let oe=0;oe<T;oe++){const ue=p?R[N][oe]:R[oe][N];ue===Z?z++:(z>=5&&(_+=pr.N1+(z-5)),z=1,Z=ue)}z>=5&&(_+=pr.N1+(z-5))}return _}}pr.N1=3,pr.N2=3,pr.N3=40,pr.N4=10;class Nn{constructor(u,p){this.width=u,this.height=p;const _=new Array(p);for(let E=0;E!==p;E++)_[E]=new Uint8Array(u);this.bytes=_}getHeight(){return this.height}getWidth(){return this.width}get(u,p){return this.bytes[p][u]}getArray(){return this.bytes}setNumber(u,p,_){this.bytes[p][u]=_}setBoolean(u,p,_){this.bytes[p][u]=_?1:0}clear(u){for(const p of this.bytes)x.fill(p,u)}equals(u){if(!(u instanceof Nn))return!1;const p=u;if(this.width!==p.width||this.height!==p.height)return!1;for(let _=0,E=this.height;_<E;++_){const T=this.bytes[_],R=p.bytes[_];for(let N=0,z=this.width;N<z;++N)if(T[N]!==R[N])return!1}return!0}toString(){const u=new V;for(let p=0,_=this.height;p<_;++p){const E=this.bytes[p];for(let T=0,R=this.width;T<R;++T)switch(E[T]){case 0:u.append(" 0");break;case 1:u.append(" 1");break;default:u.append("  ");break}u.append(`
`)}return u.toString()}}class On{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const u=new V;return u.append(`<<
`),u.append(" mode: "),u.append(this.mode?this.mode.toString():"null"),u.append(`
 ecLevel: `),u.append(this.ecLevel?this.ecLevel.toString():"null"),u.append(`
 version: `),u.append(this.version?this.version.toString():"null"),u.append(`
 maskPattern: `),u.append(this.maskPattern.toString()),this.matrix?(u.append(`
 matrix:
`),u.append(this.matrix.toString())):u.append(`
 matrix: null
`),u.append(`>>
`),u.toString()}setMode(u){this.mode=u}setECLevel(u){this.ecLevel=u}setVersion(u){this.version=u}setMaskPattern(u){this.maskPattern=u}setMatrix(u){this.matrix=u}static isValidMaskPattern(u){return u>=0&&u<On.NUM_MASK_PATTERNS}}On.NUM_MASK_PATTERNS=8;class Mr extends d{}Mr.kind="WriterException";class sr{constructor(){}static clearMatrix(u){u.clear(255)}static buildMatrix(u,p,_,E,T){sr.clearMatrix(T),sr.embedBasicPatterns(_,T),sr.embedTypeInfo(p,E,T),sr.maybeEmbedVersionInfo(_,T),sr.embedDataBits(u,E,T)}static embedBasicPatterns(u,p){sr.embedPositionDetectionPatternsAndSeparators(p),sr.embedDarkDotAtLeftBottomCorner(p),sr.maybeEmbedPositionAdjustmentPatterns(u,p),sr.embedTimingPatterns(p)}static embedTypeInfo(u,p,_){const E=new O;sr.makeTypeInfoBits(u,p,E);for(let T=0,R=E.getSize();T<R;++T){const N=E.get(E.getSize()-1-T),z=sr.TYPE_INFO_COORDINATES[T],Z=z[0],oe=z[1];if(_.setBoolean(Z,oe,N),T<8){const ue=_.getWidth()-T-1,ge=8;_.setBoolean(ue,ge,N)}else{const ge=_.getHeight()-7+(T-8);_.setBoolean(8,ge,N)}}}static maybeEmbedVersionInfo(u,p){if(u.getVersionNumber()<7)return;const _=new O;sr.makeVersionInfoBits(u,_);let E=6*3-1;for(let T=0;T<6;++T)for(let R=0;R<3;++R){const N=_.get(E);E--,p.setBoolean(T,p.getHeight()-11+R,N),p.setBoolean(p.getHeight()-11+R,T,N)}}static embedDataBits(u,p,_){let E=0,T=-1,R=_.getWidth()-1,N=_.getHeight()-1;for(;R>0;){for(R===6&&(R-=1);N>=0&&N<_.getHeight();){for(let z=0;z<2;++z){const Z=R-z;if(!sr.isEmpty(_.get(Z,N)))continue;let oe;E<u.getSize()?(oe=u.get(E),++E):oe=!1,p!==255&&pr.getDataMaskBit(p,Z,N)&&(oe=!oe),_.setBoolean(Z,N,oe)}N+=T}T=-T,N+=T,R-=2}if(E!==u.getSize())throw new Mr("Not all bits consumed: "+E+"/"+u.getSize())}static findMSBSet(u){return 32-y.numberOfLeadingZeros(u)}static calculateBCHCode(u,p){if(p===0)throw new g("0 polynomial");const _=sr.findMSBSet(p);for(u<<=_-1;sr.findMSBSet(u)>=_;)u^=p<<sr.findMSBSet(u)-_;return u}static makeTypeInfoBits(u,p,_){if(!On.isValidMaskPattern(p))throw new Mr("Invalid mask pattern");const E=u.getBits()<<3|p;_.appendBits(E,5);const T=sr.calculateBCHCode(E,sr.TYPE_INFO_POLY);_.appendBits(T,10);const R=new O;if(R.appendBits(sr.TYPE_INFO_MASK_PATTERN,15),_.xor(R),_.getSize()!==15)throw new Mr("should not happen but we got: "+_.getSize())}static makeVersionInfoBits(u,p){p.appendBits(u.getVersionNumber(),6);const _=sr.calculateBCHCode(u.getVersionNumber(),sr.VERSION_INFO_POLY);if(p.appendBits(_,12),p.getSize()!==18)throw new Mr("should not happen but we got: "+p.getSize())}static isEmpty(u){return u===255}static embedTimingPatterns(u){for(let p=8;p<u.getWidth()-8;++p){const _=(p+1)%2;sr.isEmpty(u.get(p,6))&&u.setNumber(p,6,_),sr.isEmpty(u.get(6,p))&&u.setNumber(6,p,_)}}static embedDarkDotAtLeftBottomCorner(u){if(u.get(8,u.getHeight()-8)===0)throw new Mr;u.setNumber(8,u.getHeight()-8,1)}static embedHorizontalSeparationPattern(u,p,_){for(let E=0;E<8;++E){if(!sr.isEmpty(_.get(u+E,p)))throw new Mr;_.setNumber(u+E,p,0)}}static embedVerticalSeparationPattern(u,p,_){for(let E=0;E<7;++E){if(!sr.isEmpty(_.get(u,p+E)))throw new Mr;_.setNumber(u,p+E,0)}}static embedPositionAdjustmentPattern(u,p,_){for(let E=0;E<5;++E){const T=sr.POSITION_ADJUSTMENT_PATTERN[E];for(let R=0;R<5;++R)_.setNumber(u+R,p+E,T[R])}}static embedPositionDetectionPattern(u,p,_){for(let E=0;E<7;++E){const T=sr.POSITION_DETECTION_PATTERN[E];for(let R=0;R<7;++R)_.setNumber(u+R,p+E,T[R])}}static embedPositionDetectionPatternsAndSeparators(u){const p=sr.POSITION_DETECTION_PATTERN[0].length;sr.embedPositionDetectionPattern(0,0,u),sr.embedPositionDetectionPattern(u.getWidth()-p,0,u),sr.embedPositionDetectionPattern(0,u.getWidth()-p,u);const _=8;sr.embedHorizontalSeparationPattern(0,_-1,u),sr.embedHorizontalSeparationPattern(u.getWidth()-_,_-1,u),sr.embedHorizontalSeparationPattern(0,u.getWidth()-_,u);const E=7;sr.embedVerticalSeparationPattern(E,0,u),sr.embedVerticalSeparationPattern(u.getHeight()-E-1,0,u),sr.embedVerticalSeparationPattern(E,u.getHeight()-E,u)}static maybeEmbedPositionAdjustmentPatterns(u,p){if(u.getVersionNumber()<2)return;const _=u.getVersionNumber()-1,E=sr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[_];for(let T=0,R=E.length;T!==R;T++){const N=E[T];if(N>=0)for(let z=0;z!==R;z++){const Z=E[z];Z>=0&&sr.isEmpty(p.get(Z,N))&&sr.embedPositionAdjustmentPattern(Z-2,N-2,p)}}}}sr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),sr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),sr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),sr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),sr.VERSION_INFO_POLY=7973,sr.TYPE_INFO_POLY=1335,sr.TYPE_INFO_MASK_PATTERN=21522;class Tn{constructor(u,p){this.dataBytes=u,this.errorCorrectionBytes=p}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Pr{constructor(){}static calculateMaskPenalty(u){return pr.applyMaskPenaltyRule1(u)+pr.applyMaskPenaltyRule2(u)+pr.applyMaskPenaltyRule3(u)+pr.applyMaskPenaltyRule4(u)}static encode(u,p,_=null){let E=Pr.DEFAULT_BYTE_MODE_ENCODING;const T=_!==null&&_.get(Nt.CHARACTER_SET)!==void 0;T&&(E=_.get(Nt.CHARACTER_SET).toString());const R=this.chooseMode(u,E),N=new O;if(R===cr.BYTE&&(T||Pr.DEFAULT_BYTE_MODE_ENCODING!==E)){const Mt=B.getCharacterSetECIByName(E);Mt!==void 0&&this.appendECI(Mt,N)}this.appendModeInfo(R,N);const z=new O;this.appendBytes(u,R,z,E);let Z;if(_!==null&&_.get(Nt.QR_VERSION)!==void 0){const Mt=Number.parseInt(_.get(Nt.QR_VERSION).toString(),10);Z=or.getVersionForNumber(Mt);const Rt=this.calculateBitsNeeded(R,N,z,Z);if(!this.willFit(Rt,Z,p))throw new Mr("Data too big for requested version")}else Z=this.recommendVersion(p,R,N,z);const oe=new O;oe.appendBitArray(N);const ue=R===cr.BYTE?z.getSizeInBytes():u.length;this.appendLengthInfo(ue,Z,R,oe),oe.appendBitArray(z);const ge=Z.getECBlocksForLevel(p),Ae=Z.getTotalCodewords()-ge.getTotalECCodewords();this.terminateBits(Ae,oe);const $e=this.interleaveWithECBytes(oe,Z.getTotalCodewords(),Ae,ge.getNumBlocks()),We=new On;We.setECLevel(p),We.setMode(R),We.setVersion(Z);const Je=Z.getDimensionForVersion(),st=new Nn(Je,Je),kt=this.chooseMaskPattern($e,p,Z,st);return We.setMaskPattern(kt),sr.buildMatrix($e,p,Z,kt,st),We.setMatrix(st),We}static recommendVersion(u,p,_,E){const T=this.calculateBitsNeeded(p,_,E,or.getVersionForNumber(1)),R=this.chooseVersion(T,u),N=this.calculateBitsNeeded(p,_,E,R);return this.chooseVersion(N,u)}static calculateBitsNeeded(u,p,_,E){return p.getSize()+u.getCharacterCountBits(E)+_.getSize()}static getAlphanumericCode(u){return u<Pr.ALPHANUMERIC_TABLE.length?Pr.ALPHANUMERIC_TABLE[u]:-1}static chooseMode(u,p=null){if(B.SJIS.getName()===p&&this.isOnlyDoubleByteKanji(u))return cr.KANJI;let _=!1,E=!1;for(let T=0,R=u.length;T<R;++T){const N=u.charAt(T);if(Pr.isDigit(N))_=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)E=!0;else return cr.BYTE}return E?cr.ALPHANUMERIC:_?cr.NUMERIC:cr.BYTE}static isOnlyDoubleByteKanji(u){let p;try{p=F.encode(u,B.SJIS)}catch{return!1}const _=p.length;if(_%2!==0)return!1;for(let E=0;E<_;E+=2){const T=p[E]&255;if((T<129||T>159)&&(T<224||T>235))return!1}return!0}static chooseMaskPattern(u,p,_,E){let T=Number.MAX_SAFE_INTEGER,R=-1;for(let N=0;N<On.NUM_MASK_PATTERNS;N++){sr.buildMatrix(u,p,_,N,E);let z=this.calculateMaskPenalty(E);z<T&&(T=z,R=N)}return R}static chooseVersion(u,p){for(let _=1;_<=40;_++){const E=or.getVersionForNumber(_);if(Pr.willFit(u,E,p))return E}throw new Mr("Data too big")}static willFit(u,p,_){const E=p.getTotalCodewords(),R=p.getECBlocksForLevel(_).getTotalECCodewords(),N=E-R,z=(u+7)/8;return N>=z}static terminateBits(u,p){const _=u*8;if(p.getSize()>_)throw new Mr("data bits cannot fit in the QR Code"+p.getSize()+" > "+_);for(let R=0;R<4&&p.getSize()<_;++R)p.appendBit(!1);const E=p.getSize()&7;if(E>0)for(let R=E;R<8;R++)p.appendBit(!1);const T=u-p.getSizeInBytes();for(let R=0;R<T;++R)p.appendBits(R&1?17:236,8);if(p.getSize()!==_)throw new Mr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(u,p,_,E,T,R){if(E>=_)throw new Mr("Block ID too large");const N=u%_,z=_-N,Z=Math.floor(u/_),oe=Z+1,ue=Math.floor(p/_),ge=ue+1,Ae=Z-ue,$e=oe-ge;if(Ae!==$e)throw new Mr("EC bytes mismatch");if(_!==z+N)throw new Mr("RS blocks mismatch");if(u!==(ue+Ae)*z+(ge+$e)*N)throw new Mr("Total bytes mismatch");E<z?(T[0]=ue,R[0]=Ae):(T[0]=ge,R[0]=$e)}static interleaveWithECBytes(u,p,_,E){if(u.getSizeInBytes()!==_)throw new Mr("Number of bits and data bytes does not match");let T=0,R=0,N=0;const z=new Array;for(let oe=0;oe<E;++oe){const ue=new Int32Array(1),ge=new Int32Array(1);Pr.getNumDataBytesAndNumECBytesForBlockID(p,_,E,oe,ue,ge);const Ae=ue[0],$e=new Uint8Array(Ae);u.toBytes(8*T,$e,0,Ae);const We=Pr.generateECBytes($e,ge[0]);z.push(new Tn($e,We)),R=Math.max(R,Ae),N=Math.max(N,We.length),T+=ue[0]}if(_!==T)throw new Mr("Data bytes does not match offset");const Z=new O;for(let oe=0;oe<R;++oe)for(const ue of z){const ge=ue.getDataBytes();oe<ge.length&&Z.appendBits(ge[oe],8)}for(let oe=0;oe<N;++oe)for(const ue of z){const ge=ue.getErrorCorrectionBytes();oe<ge.length&&Z.appendBits(ge[oe],8)}if(p!==Z.getSizeInBytes())throw new Mr("Interleaving error: "+p+" and "+Z.getSizeInBytes()+" differ.");return Z}static generateECBytes(u,p){const _=u.length,E=new Int32Array(_+p);for(let R=0;R<_;R++)E[R]=u[R]&255;new un(Pe.QR_CODE_FIELD_256).encode(E,p);const T=new Uint8Array(p);for(let R=0;R<p;R++)T[R]=E[_+R];return T}static appendModeInfo(u,p){p.appendBits(u.getBits(),4)}static appendLengthInfo(u,p,_,E){const T=_.getCharacterCountBits(p);if(u>=1<<T)throw new Mr(u+" is bigger than "+((1<<T)-1));E.appendBits(u,T)}static appendBytes(u,p,_,E){switch(p){case cr.NUMERIC:Pr.appendNumericBytes(u,_);break;case cr.ALPHANUMERIC:Pr.appendAlphanumericBytes(u,_);break;case cr.BYTE:Pr.append8BitBytes(u,_,E);break;case cr.KANJI:Pr.appendKanjiBytes(u,_);break;default:throw new Mr("Invalid mode: "+p)}}static getDigit(u){return u.charCodeAt(0)-48}static isDigit(u){const p=Pr.getDigit(u);return p>=0&&p<=9}static appendNumericBytes(u,p){const _=u.length;let E=0;for(;E<_;){const T=Pr.getDigit(u.charAt(E));if(E+2<_){const R=Pr.getDigit(u.charAt(E+1)),N=Pr.getDigit(u.charAt(E+2));p.appendBits(T*100+R*10+N,10),E+=3}else if(E+1<_){const R=Pr.getDigit(u.charAt(E+1));p.appendBits(T*10+R,7),E+=2}else p.appendBits(T,4),E++}}static appendAlphanumericBytes(u,p){const _=u.length;let E=0;for(;E<_;){const T=Pr.getAlphanumericCode(u.charCodeAt(E));if(T===-1)throw new Mr;if(E+1<_){const R=Pr.getAlphanumericCode(u.charCodeAt(E+1));if(R===-1)throw new Mr;p.appendBits(T*45+R,11),E+=2}else p.appendBits(T,6),E++}}static append8BitBytes(u,p,_){let E;try{E=F.encode(u,_)}catch(T){throw new Mr(T)}for(let T=0,R=E.length;T!==R;T++){const N=E[T];p.appendBits(N,8)}}static appendKanjiBytes(u,p){let _;try{_=F.encode(u,B.SJIS)}catch(T){throw new Mr(T)}const E=_.length;for(let T=0;T<E;T+=2){const R=_[T]&255,N=_[T+1]&255,z=R<<8&4294967295|N;let Z=-1;if(z>=33088&&z<=40956?Z=z-33088:z>=57408&&z<=60351&&(Z=z-49472),Z===-1)throw new Mr("Invalid byte sequence");const oe=(Z>>8)*192+(Z&255);p.appendBits(oe,13)}}static appendECI(u,p){p.appendBits(cr.ECI.getBits(),4),p.appendBits(u.getValue(),8)}}Pr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Pr.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class En{write(u,p,_,E=null){if(u.length===0)throw new g("Found empty contents");if(p<0||_<0)throw new g("Requested dimensions are too small: "+p+"x"+_);let T=Br.L,R=En.QUIET_ZONE_SIZE;E!==null&&(E.get(Nt.ERROR_CORRECTION)!==void 0&&(T=Br.fromString(E.get(Nt.ERROR_CORRECTION).toString())),E.get(Nt.MARGIN)!==void 0&&(R=Number.parseInt(E.get(Nt.MARGIN).toString(),10)));const N=Pr.encode(u,T,E);return this.renderResult(N,p,_,R)}writeToDom(u,p,_,E,T=null){typeof u=="string"&&(u=document.querySelector(u));const R=this.write(p,_,E,T);u&&u.appendChild(R)}renderResult(u,p,_,E){const T=u.getMatrix();if(T===null)throw new _e;const R=T.getWidth(),N=T.getHeight(),z=R+E*2,Z=N+E*2,oe=Math.max(p,z),ue=Math.max(_,Z),ge=Math.min(Math.floor(oe/z),Math.floor(ue/Z)),Ae=Math.floor((oe-R*ge)/2),$e=Math.floor((ue-N*ge)/2),We=this.createSVGElement(oe,ue);for(let Je=0,st=$e;Je<N;Je++,st+=ge)for(let kt=0,Mt=Ae;kt<R;kt++,Mt+=ge)if(T.get(kt,Je)===1){const Rt=this.createSvgRectElement(Mt,st,ge,ge);We.appendChild(Rt)}return We}createSVGElement(u,p){const _=document.createElementNS(En.SVG_NS,"svg");return _.setAttributeNS(null,"height",u.toString()),_.setAttributeNS(null,"width",p.toString()),_}createSvgRectElement(u,p,_,E){const T=document.createElementNS(En.SVG_NS,"rect");return T.setAttributeNS(null,"x",u.toString()),T.setAttributeNS(null,"y",p.toString()),T.setAttributeNS(null,"height",_.toString()),T.setAttributeNS(null,"width",E.toString()),T.setAttributeNS(null,"fill","#000000"),T}}En.QUIET_ZONE_SIZE=4,En.SVG_NS="http://www.w3.org/2000/svg";class rn{encode(u,p,_,E,T){if(u.length===0)throw new g("Found empty contents");if(p!==Ie.QR_CODE)throw new g("Can only encode QR_CODE, but got "+p);if(_<0||E<0)throw new g(`Requested dimensions are too small: ${_}x${E}`);let R=Br.L,N=rn.QUIET_ZONE_SIZE;T!==null&&(T.get(Nt.ERROR_CORRECTION)!==void 0&&(R=Br.fromString(T.get(Nt.ERROR_CORRECTION).toString())),T.get(Nt.MARGIN)!==void 0&&(N=Number.parseInt(T.get(Nt.MARGIN).toString(),10)));const z=Pr.encode(u,R,T);return rn.renderResult(z,_,E,N)}static renderResult(u,p,_,E){const T=u.getMatrix();if(T===null)throw new _e;const R=T.getWidth(),N=T.getHeight(),z=R+E*2,Z=N+E*2,oe=Math.max(p,z),ue=Math.max(_,Z),ge=Math.min(Math.floor(oe/z),Math.floor(ue/Z)),Ae=Math.floor((oe-R*ge)/2),$e=Math.floor((ue-N*ge)/2),We=new Q(oe,ue);for(let Je=0,st=$e;Je<N;Je++,st+=ge)for(let kt=0,Mt=Ae;kt<R;kt++,Mt+=ge)T.get(kt,Je)===1&&We.setRegion(Mt,st,ge,ge);return We}}rn.QUIET_ZONE_SIZE=4;class Jn{encode(u,p,_,E,T){let R;switch(p){case Ie.QR_CODE:R=new rn;break;default:throw new g("No encoder available for format "+p)}return R.encode(u,p,_,E,T)}}class _n extends Y{constructor(u,p,_,E,T,R,N,z){if(super(R,N),this.yuvData=u,this.dataWidth=p,this.dataHeight=_,this.left=E,this.top=T,E+R>p||T+N>_)throw new g("Crop rectangle does not fit within image data.");z&&this.reverseHorizontal(R,N)}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const _=this.getWidth();(p==null||p.length<_)&&(p=new Uint8ClampedArray(_));const E=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,E,p,0,_),p}getMatrix(){const u=this.getWidth(),p=this.getHeight();if(u===this.dataWidth&&p===this.dataHeight)return this.yuvData;const _=u*p,E=new Uint8ClampedArray(_);let T=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.yuvData,T,E,0,_),E;for(let R=0;R<p;R++){const N=R*u;w.arraycopy(this.yuvData,T,E,N,u),T+=this.dataWidth}return E}isCropSupported(){return!0}crop(u,p,_,E){return new _n(this.yuvData,this.dataWidth,this.dataHeight,this.left+u,this.top+p,_,E,!1)}renderThumbnail(){const u=this.getWidth()/_n.THUMBNAIL_SCALE_FACTOR,p=this.getHeight()/_n.THUMBNAIL_SCALE_FACTOR,_=new Int32Array(u*p),E=this.yuvData;let T=this.top*this.dataWidth+this.left;for(let R=0;R<p;R++){const N=R*u;for(let z=0;z<u;z++){const Z=E[T+z*_n.THUMBNAIL_SCALE_FACTOR]&255;_[N+z]=4278190080|Z*65793}T+=this.dataWidth*_n.THUMBNAIL_SCALE_FACTOR}return _}getThumbnailWidth(){return this.getWidth()/_n.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_n.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(u,p){const _=this.yuvData;for(let E=0,T=this.top*this.dataWidth+this.left;E<p;E++,T+=this.dataWidth){const R=T+u/2;for(let N=T,z=T+u-1;N<R;N++,z--){const Z=_[N];_[N]=_[z],_[z]=Z}}}invert(){return new J(this)}}_n.THUMBNAIL_SCALE_FACTOR=2;class Vn extends Y{constructor(u,p,_,E,T,R,N){if(super(p,_),this.dataWidth=E,this.dataHeight=T,this.left=R,this.top=N,u.BYTES_PER_ELEMENT===4){const z=p*_,Z=new Uint8ClampedArray(z);for(let oe=0;oe<z;oe++){const ue=u[oe],ge=ue>>16&255,Ae=ue>>7&510,$e=ue&255;Z[oe]=(ge+Ae+$e)/4&255}this.luminances=Z}else this.luminances=u;if(E===void 0&&(this.dataWidth=p),T===void 0&&(this.dataHeight=_),R===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+p>this.dataWidth||this.top+_>this.dataHeight)throw new g("Crop rectangle does not fit within image data.")}getRow(u,p){if(u<0||u>=this.getHeight())throw new g("Requested row is outside the image: "+u);const _=this.getWidth();(p==null||p.length<_)&&(p=new Uint8ClampedArray(_));const E=(u+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,E,p,0,_),p}getMatrix(){const u=this.getWidth(),p=this.getHeight();if(u===this.dataWidth&&p===this.dataHeight)return this.luminances;const _=u*p,E=new Uint8ClampedArray(_);let T=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return w.arraycopy(this.luminances,T,E,0,_),E;for(let R=0;R<p;R++){const N=R*u;w.arraycopy(this.luminances,T,E,N,u),T+=this.dataWidth}return E}isCropSupported(){return!0}crop(u,p,_,E){return new Vn(this.luminances,_,E,this.dataWidth,this.dataHeight,this.left+u,this.top+p)}invert(){return new J(this)}}class ei extends B{static forName(u){return this.getCharacterSetECIByName(u)}}class Fn{}Fn.ISO_8859_1=B.ISO8859_1;class Zn{isCompact(){return this.compact}setCompact(u){this.compact=u}getSize(){return this.size}setSize(u){this.size=u}getLayers(){return this.layers}setLayers(u){this.layers=u}getCodeWords(){return this.codeWords}setCodeWords(u){this.codeWords=u}getMatrix(){return this.matrix}setMatrix(u){this.matrix=u}}class Kn{static singletonList(u){return[u]}static min(u,p){return u.sort(p)[0]}}class Zr{constructor(u){this.previous=u}getPrevious(){return this.previous}}class Dn extends Zr{constructor(u,p,_){super(u),this.value=p,this.bitCount=_}appendTo(u,p){u.appendBits(this.value,this.bitCount)}add(u,p){return new Dn(this,u,p)}addBinaryShift(u,p){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Dn(this,u,p)}toString(){let u=this.value&(1<<this.bitCount)-1;return u|=1<<this.bitCount,"<"+y.toBinaryString(u|1<<this.bitCount).substring(1)+">"}}class qr extends Dn{constructor(u,p,_){super(u,0,0),this.binaryShiftStart=p,this.binaryShiftByteCount=_}appendTo(u,p){for(let _=0;_<this.binaryShiftByteCount;_++)(_===0||_===31&&this.binaryShiftByteCount<=62)&&(u.appendBits(31,5),this.binaryShiftByteCount>62?u.appendBits(this.binaryShiftByteCount-31,16):_===0?u.appendBits(Math.min(this.binaryShiftByteCount,31),5):u.appendBits(this.binaryShiftByteCount-31,5)),u.appendBits(p[this.binaryShiftStart+_],8)}addBinaryShift(u,p){return new qr(this,u,p)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ti(ae,u,p){return new qr(ae,u,p)}function D(ae,u,p){return new Dn(ae,u,p)}const I=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],H=0,W=1,X=2,re=3,se=4,fe=new Dn(null,0,0),le=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ke(ae){for(let u of ae)x.fill(u,-1);return ae[H][se]=0,ae[W][se]=0,ae[W][H]=28,ae[re][se]=0,ae[X][se]=0,ae[X][H]=15,ae}const je=ke(x.createInt32Array(6,6));class Ke{constructor(u,p,_,E){this.token=u,this.mode=p,this.binaryShiftByteCount=_,this.bitCount=E}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(u,p){let _=this.bitCount,E=this.token;if(u!==this.mode){let R=le[this.mode][u];E=D(E,R&65535,R>>16),_+=R>>16}let T=u===X?4:5;return E=D(E,p,T),new Ke(E,u,0,_+T)}shiftAndAppend(u,p){let _=this.token,E=this.mode===X?4:5;return _=D(_,je[this.mode][u],E),_=D(_,p,5),new Ke(_,this.mode,0,this.bitCount+E+5)}addBinaryShiftChar(u){let p=this.token,_=this.mode,E=this.bitCount;if(this.mode===se||this.mode===X){let N=le[_][H];p=D(p,N&65535,N>>16),E+=N>>16,_=H}let T=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,R=new Ke(p,_,this.binaryShiftByteCount+1,E+T);return R.binaryShiftByteCount===2078&&(R=R.endBinaryShift(u+1)),R}endBinaryShift(u){if(this.binaryShiftByteCount===0)return this;let p=this.token;return p=ti(p,u-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ke(p,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(u){let p=this.bitCount+(le[this.mode][u.mode]>>16);return this.binaryShiftByteCount<u.binaryShiftByteCount?p+=Ke.calculateBinaryShiftCost(u)-Ke.calculateBinaryShiftCost(this):this.binaryShiftByteCount>u.binaryShiftByteCount&&u.binaryShiftByteCount>0&&(p+=10),p<=u.bitCount}toBitArray(u){let p=[];for(let E=this.endBinaryShift(u.length).token;E!==null;E=E.getPrevious())p.unshift(E);let _=new O;for(const E of p)E.appendTo(_,u);return _}toString(){return U.format("%s bits=%d bytes=%d",I[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(u){return u.binaryShiftByteCount>62?21:u.binaryShiftByteCount>31?20:u.binaryShiftByteCount>0?10:0}}Ke.INITIAL_STATE=new Ke(fe,H,0,0);function nt(ae){const u=U.getCharCode(" "),p=U.getCharCode("."),_=U.getCharCode(",");ae[H][u]=1;const E=U.getCharCode("Z"),T=U.getCharCode("A");for(let ge=T;ge<=E;ge++)ae[H][ge]=ge-T+2;ae[W][u]=1;const R=U.getCharCode("z"),N=U.getCharCode("a");for(let ge=N;ge<=R;ge++)ae[W][ge]=ge-N+2;ae[X][u]=1;const z=U.getCharCode("9"),Z=U.getCharCode("0");for(let ge=Z;ge<=z;ge++)ae[X][ge]=ge-Z+2;ae[X][_]=12,ae[X][p]=13;const oe=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ge=0;ge<oe.length;ge++)ae[re][U.getCharCode(oe[ge])]=ge;const ue=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ge=0;ge<ue.length;ge++)U.getCharCode(ue[ge])>0&&(ae[se][U.getCharCode(ue[ge])]=ge);return ae}const Ft=nt(x.createInt32Array(5,256));class Tt{constructor(u){this.text=u}encode(){const u=U.getCharCode(" "),p=U.getCharCode(`
`);let _=Kn.singletonList(Ke.INITIAL_STATE);for(let T=0;T<this.text.length;T++){let R,N=T+1<this.text.length?this.text[T+1]:0;switch(this.text[T]){case U.getCharCode("\r"):R=N===p?2:0;break;case U.getCharCode("."):R=N===u?3:0;break;case U.getCharCode(","):R=N===u?4:0;break;case U.getCharCode(":"):R=N===u?5:0;break;default:R=0}R>0?(_=Tt.updateStateListForPair(_,T,R),T++):_=this.updateStateListForChar(_,T)}return Kn.min(_,(T,R)=>T.getBitCount()-R.getBitCount()).toBitArray(this.text)}updateStateListForChar(u,p){const _=[];for(let E of u)this.updateStateForChar(E,p,_);return Tt.simplifyStates(_)}updateStateForChar(u,p,_){let E=this.text[p]&255,T=Ft[u.getMode()][E]>0,R=null;for(let N=0;N<=se;N++){let z=Ft[N][E];if(z>0){if(R==null&&(R=u.endBinaryShift(p)),!T||N===u.getMode()||N===X){const Z=R.latchAndAppend(N,z);_.push(Z)}if(!T&&je[u.getMode()][N]>=0){const Z=R.shiftAndAppend(N,z);_.push(Z)}}}if(u.getBinaryShiftByteCount()>0||Ft[u.getMode()][E]===0){let N=u.addBinaryShiftChar(p);_.push(N)}}static updateStateListForPair(u,p,_){const E=[];for(let T of u)this.updateStateForPair(T,p,_,E);return this.simplifyStates(E)}static updateStateForPair(u,p,_,E){let T=u.endBinaryShift(p);if(E.push(T.latchAndAppend(se,_)),u.getMode()!==se&&E.push(T.shiftAndAppend(se,_)),_===3||_===4){let R=T.latchAndAppend(X,16-_).latchAndAppend(X,1);E.push(R)}if(u.getBinaryShiftByteCount()>0){let R=u.addBinaryShiftChar(p).addBinaryShiftChar(p+1);E.push(R)}}static simplifyStates(u){let p=[];for(const _ of u){let E=!0;for(const T of p){if(T.isBetterThanOrEqualTo(_)){E=!1;break}_.isBetterThanOrEqualTo(T)&&(p=p.filter(R=>R!==T))}E&&p.push(_)}return p}}class Ht{constructor(){}static encodeBytes(u){return Ht.encode(u,Ht.DEFAULT_EC_PERCENT,Ht.DEFAULT_AZTEC_LAYERS)}static encode(u,p,_){let E=new Tt(u).encode(),T=y.truncDivision(E.getSize()*p,100)+11,R=E.getSize()+T,N,z,Z,oe,ue;if(_!==Ht.DEFAULT_AZTEC_LAYERS){if(N=_<0,z=Math.abs(_),z>(N?Ht.MAX_NB_BITS_COMPACT:Ht.MAX_NB_BITS))throw new g(U.format("Illegal value %s for layers",_));Z=Ht.totalBitsInLayer(z,N),oe=Ht.WORD_SIZE[z];let Rt=Z-Z%oe;if(ue=Ht.stuffBits(E,oe),ue.getSize()+T>Rt)throw new g("Data to large for user specified layer");if(N&&ue.getSize()>oe*64)throw new g("Data to large for user specified layer")}else{oe=0,ue=null;for(let Rt=0;;Rt++){if(Rt>Ht.MAX_NB_BITS)throw new g("Data too large for an Aztec code");if(N=Rt<=3,z=N?Rt+1:Rt,Z=Ht.totalBitsInLayer(z,N),R>Z)continue;(ue==null||oe!==Ht.WORD_SIZE[z])&&(oe=Ht.WORD_SIZE[z],ue=Ht.stuffBits(E,oe));let Tr=Z-Z%oe;if(!(N&&ue.getSize()>oe*64)&&ue.getSize()+T<=Tr)break}}let ge=Ht.generateCheckWords(ue,Z,oe),Ae=ue.getSize()/oe,$e=Ht.generateModeMessage(N,z,Ae),We=(N?11:14)+z*4,Je=new Int32Array(We),st;if(N){st=We;for(let Rt=0;Rt<Je.length;Rt++)Je[Rt]=Rt}else{st=We+1+2*y.truncDivision(y.truncDivision(We,2)-1,15);let Rt=y.truncDivision(We,2),Tr=y.truncDivision(st,2);for(let yr=0;yr<Rt;yr++){let Qr=yr+y.truncDivision(yr,15);Je[Rt-yr-1]=Tr-Qr-1,Je[Rt+yr]=Tr+Qr+1}}let kt=new Q(st);for(let Rt=0,Tr=0;Rt<z;Rt++){let yr=(z-Rt)*4+(N?9:12);for(let Qr=0;Qr<yr;Qr++){let ln=Qr*2;for(let Pn=0;Pn<2;Pn++)ge.get(Tr+ln+Pn)&&kt.set(Je[Rt*2+Pn],Je[Rt*2+Qr]),ge.get(Tr+yr*2+ln+Pn)&&kt.set(Je[Rt*2+Qr],Je[We-1-Rt*2-Pn]),ge.get(Tr+yr*4+ln+Pn)&&kt.set(Je[We-1-Rt*2-Pn],Je[We-1-Rt*2-Qr]),ge.get(Tr+yr*6+ln+Pn)&&kt.set(Je[We-1-Rt*2-Qr],Je[Rt*2+Pn])}Tr+=yr*8}if(Ht.drawModeMessage(kt,N,st,$e),N)Ht.drawBullsEye(kt,y.truncDivision(st,2),5);else{Ht.drawBullsEye(kt,y.truncDivision(st,2),7);for(let Rt=0,Tr=0;Rt<y.truncDivision(We,2)-1;Rt+=15,Tr+=16)for(let yr=y.truncDivision(st,2)&1;yr<st;yr+=2)kt.set(y.truncDivision(st,2)-Tr,yr),kt.set(y.truncDivision(st,2)+Tr,yr),kt.set(yr,y.truncDivision(st,2)-Tr),kt.set(yr,y.truncDivision(st,2)+Tr)}let Mt=new Zn;return Mt.setCompact(N),Mt.setSize(st),Mt.setLayers(z),Mt.setCodeWords(Ae),Mt.setMatrix(kt),Mt}static drawBullsEye(u,p,_){for(let E=0;E<_;E+=2)for(let T=p-E;T<=p+E;T++)u.set(T,p-E),u.set(T,p+E),u.set(p-E,T),u.set(p+E,T);u.set(p-_,p-_),u.set(p-_+1,p-_),u.set(p-_,p-_+1),u.set(p+_,p-_),u.set(p+_,p-_+1),u.set(p+_,p+_-1)}static generateModeMessage(u,p,_){let E=new O;return u?(E.appendBits(p-1,2),E.appendBits(_-1,6),E=Ht.generateCheckWords(E,28,4)):(E.appendBits(p-1,5),E.appendBits(_-1,11),E=Ht.generateCheckWords(E,40,4)),E}static drawModeMessage(u,p,_,E){let T=y.truncDivision(_,2);if(p)for(let R=0;R<7;R++){let N=T-3+R;E.get(R)&&u.set(N,T-5),E.get(R+7)&&u.set(T+5,N),E.get(20-R)&&u.set(N,T+5),E.get(27-R)&&u.set(T-5,N)}else for(let R=0;R<10;R++){let N=T-5+R+y.truncDivision(R,5);E.get(R)&&u.set(N,T-7),E.get(R+10)&&u.set(T+7,N),E.get(29-R)&&u.set(N,T+7),E.get(39-R)&&u.set(T-7,N)}}static generateCheckWords(u,p,_){let E=u.getSize()/_,T=new un(Ht.getGF(_)),R=y.truncDivision(p,_),N=Ht.bitsToWords(u,_,R);T.encode(N,R-E);let z=p%_,Z=new O;Z.appendBits(0,z);for(const oe of Array.from(N))Z.appendBits(oe,_);return Z}static bitsToWords(u,p,_){let E=new Int32Array(_),T,R;for(T=0,R=u.getSize()/p;T<R;T++){let N=0;for(let z=0;z<p;z++)N|=u.get(T*p+z)?1<<p-z-1:0;E[T]=N}return E}static getGF(u){switch(u){case 4:return Pe.AZTEC_PARAM;case 6:return Pe.AZTEC_DATA_6;case 8:return Pe.AZTEC_DATA_8;case 10:return Pe.AZTEC_DATA_10;case 12:return Pe.AZTEC_DATA_12;default:throw new g("Unsupported word size "+u)}}static stuffBits(u,p){let _=new O,E=u.getSize(),T=(1<<p)-2;for(let R=0;R<E;R+=p){let N=0;for(let z=0;z<p;z++)(R+z>=E||u.get(R+z))&&(N|=1<<p-1-z);(N&T)===T?(_.appendBits(N&T,p),R--):N&T?_.appendBits(N,p):(_.appendBits(N|1,p),R--)}return _}static totalBitsInLayer(u,p){return((p?88:112)+16*u)*u}}Ht.DEFAULT_EC_PERCENT=33,Ht.DEFAULT_AZTEC_LAYERS=0,Ht.MAX_NB_BITS=32,Ht.MAX_NB_BITS_COMPACT=4,Ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class St{encode(u,p,_,E){return this.encodeWithHints(u,p,_,E,null)}encodeWithHints(u,p,_,E,T){let R=Fn.ISO_8859_1,N=Ht.DEFAULT_EC_PERCENT,z=Ht.DEFAULT_AZTEC_LAYERS;return T!=null&&(T.has(Nt.CHARACTER_SET)&&(R=ei.forName(T.get(Nt.CHARACTER_SET).toString())),T.has(Nt.ERROR_CORRECTION)&&(N=y.parseInt(T.get(Nt.ERROR_CORRECTION).toString())),T.has(Nt.AZTEC_LAYERS)&&(z=y.parseInt(T.get(Nt.AZTEC_LAYERS).toString()))),St.encodeLayers(u,p,_,E,R,N,z)}static encodeLayers(u,p,_,E,T,R,N){if(p!==Ie.AZTEC)throw new g("Can only encode AZTEC, but got "+p);let z=Ht.encode(U.getBytes(u,T),R,N);return St.renderResult(z,_,E)}static renderResult(u,p,_){let E=u.getMatrix();if(E==null)throw new _e;let T=E.getWidth(),R=E.getHeight(),N=Math.max(p,T),z=Math.max(_,R),Z=Math.min(N/T,z/R),oe=(N-T*Z)/2,ue=(z-R*Z)/2,ge=new Q(N,z);for(let Ae=0,$e=ue;Ae<R;Ae++,$e+=Z)for(let We=0,Je=oe;We<T;We++,Je+=Z)E.get(We,Ae)&&ge.setRegion(Je,$e,Z,Z);return ge}}r.AbstractExpandedDecoder=De,r.ArgumentException=f,r.ArithmeticException=Qe,r.AztecCode=Zn,r.AztecCodeReader=Pt,r.AztecCodeWriter=St,r.AztecDecoder=mt,r.AztecDetector=Zt,r.AztecDetectorResult=Le,r.AztecEncoder=Ht,r.AztecHighLevelEncoder=Tt,r.AztecPoint=Ut,r.BarcodeFormat=Ie,r.Binarizer=A,r.BinaryBitmap=v,r.BitArray=O,r.BitMatrix=Q,r.BitSource=gn,r.BrowserAztecCodeReader=Ot,r.BrowserBarcodeReader=Ur,r.BrowserCodeReader=Re,r.BrowserDatamatrixCodeReader=An,r.BrowserMultiFormatReader=Wr,r.BrowserPDF417Reader=an,r.BrowserQRCodeReader=Sr,r.BrowserQRCodeSvgWriter=En,r.CharacterSetECI=B,r.ChecksumException=S,r.Code128Reader=Ve,r.Code39Reader=pt,r.DataMatrixDecodedBitStreamParser=sn,r.DataMatrixReader=Kr,r.DecodeHintType=P,r.DecoderResult=me,r.DefaultGridSampler=ut,r.DetectorResult=Ye,r.EAN13Reader=xt,r.EncodeHintType=Nt,r.Exception=d,r.FormatException=L,r.GenericGF=Pe,r.GenericGFPoly=Xe,r.GlobalHistogramBinarizer=G,r.GridSampler=Ue,r.GridSamplerInstance=at,r.HTMLCanvasElementLuminanceSource=K,r.HybridBinarizer=te,r.ITFReader=wt,r.IllegalArgumentException=g,r.IllegalStateException=_e,r.InvertedLuminanceSource=J,r.LuminanceSource=Y,r.MathUtils=ht,r.MultiFormatOneDReader=kr,r.MultiFormatReader=Rr,r.MultiFormatWriter=Jn,r.NotFoundException=q,r.OneDReader=vt,r.PDF417DecodedBitStreamParser=He,r.PDF417DecoderErrorCorrection=Rn,r.PDF417Reader=qt,r.PDF417ResultMetadata=ni,r.PerspectiveTransform=Ge,r.PlanarYUVLuminanceSource=_n,r.QRCodeByteMatrix=Nn,r.QRCodeDataMask=on,r.QRCodeDecodedBitStreamParser=zr,r.QRCodeDecoderErrorCorrectionLevel=Br,r.QRCodeDecoderFormatInformation=Jr,r.QRCodeEncoder=Pr,r.QRCodeEncoderQRCode=On,r.QRCodeMaskUtil=pr,r.QRCodeMatrixUtil=sr,r.QRCodeMode=cr,r.QRCodeReader=en,r.QRCodeVersion=or,r.QRCodeWriter=rn,r.RGBLuminanceSource=Vn,r.RSS14Reader=nr,r.RSSExpandedReader=ot,r.ReaderException=Or,r.ReedSolomonDecoder=qe,r.ReedSolomonEncoder=un,r.ReedSolomonException=Ze,r.Result=Te,r.ResultMetadataType=pe,r.ResultPoint=Se,r.StringUtils=U,r.UnsupportedOperationException=j,r.VideoInputDevice=ne,r.WhiteRectangleDetector=ze,r.WriterException=Mr,r.ZXingArrays=x,r.ZXingCharset=ei,r.ZXingInteger=y,r.ZXingStandardCharsets=Fn,r.ZXingStringBuilder=V,r.ZXingStringEncoding=F,r.ZXingSystem=w,r.createAbstractExpandedDecoder=lr,Object.defineProperty(r,"__esModule",{value:!0})})})(zxingJs_umd$1,zxingJs_umd$1.exports);var zxingJs_umdExports=zxingJs_umd$1.exports;const zxingJs_umd=getDefaultExportFromCjs(zxingJs_umdExports),ZXing=_mergeNamespaces({__proto__:null,default:zxingJs_umd},[zxingJs_umdExports]);var ZXingHtml5QrcodeDecoder=function(){function s(e,r,n){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,zxingJs_umdExports.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,zxingJs_umdExports.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,zxingJs_umdExports.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,zxingJs_umdExports.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,zxingJs_umdExports.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,zxingJs_umdExports.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,zxingJs_umdExports.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,zxingJs_umdExports.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,zxingJs_umdExports.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,zxingJs_umdExports.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,zxingJs_umdExports.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,zxingJs_umdExports.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,zxingJs_umdExports.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,zxingJs_umdExports.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,zxingJs_umdExports.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,zxingJs_umdExports.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,zxingJs_umdExports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var o=this.createZXingFormats(e),a=new Map;a.set(zxingJs_umdExports.DecodeHintType.POSSIBLE_FORMATS,o),a.set(zxingJs_umdExports.DecodeHintType.TRY_HARDER,!1),this.hints=a}return s.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,o){try{n(r.decode(e))}catch(a){o(a)}})},s.prototype.decode=function(e){var r=new zxingJs_umdExports.MultiFormatReader(this.verbose,this.hints),n=new zxingJs_umdExports.HTMLCanvasElementLuminanceSource(e),o=new zxingJs_umdExports.BinaryBitmap(new zxingJs_umdExports.HybridBinarizer(n)),a=r.decode(o);return{text:a.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,o){e.set(r,n)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var r=[],n=0,o=e;n<o.length;n++){var a=o[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return r},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),__awaiter$4=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$4=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BarcodeDetectorDelegate=function(){function s(e,r,n){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"qr_code"],[Html5QrcodeSupportedFormats.AZTEC,"aztec"],[Html5QrcodeSupportedFormats.CODABAR,"codabar"],[Html5QrcodeSupportedFormats.CODE_39,"code_39"],[Html5QrcodeSupportedFormats.CODE_93,"code_93"],[Html5QrcodeSupportedFormats.CODE_128,"code_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"data_matrix"],[Html5QrcodeSupportedFormats.ITF,"itf"],[Html5QrcodeSupportedFormats.EAN_13,"ean_13"],[Html5QrcodeSupportedFormats.EAN_8,"ean_8"],[Html5QrcodeSupportedFormats.PDF_417,"pdf417"],[Html5QrcodeSupportedFormats.UPC_A,"upc_a"],[Html5QrcodeSupportedFormats.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return __awaiter$4(this,void 0,void 0,function(){var r,n;return __generator$4(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=o.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,o=0,a=e;o<a.length;o++){var c=a[o],l=c.boundingBox.width*c.boundingBox.height;l>n&&(n=l,r=c)}if(!r)throw"No largest barcode found";return r},s.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,o=e;n<o.length;n++){var a=o[n];this.formatMap.has(a)?r.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,o){e.set(r,n)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),__awaiter$3=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$3=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Html5QrcodeShim=function(){function s(e,r,n,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&BarcodeDetectorDelegate.isSupported()?(this.primaryDecoder=new BarcodeDetectorDelegate(e,n,o),this.secondaryDecoder=new ZXingHtml5QrcodeDecoder(e,n,o)):this.primaryDecoder=new ZXingHtml5QrcodeDecoder(e,n,o)}return s.prototype.decodeAsync=function(e){return __awaiter$3(this,void 0,void 0,function(){var r;return __generator$3(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return __awaiter$3(this,void 0,void 0,function(){var r,n;return __generator$3(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(n=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var o=n[r];e+=o}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),__extends$1=function(){var s=function(e,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},s(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),__awaiter$2=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$2=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},AbstractCameraCapability=function(){function s(e,r){this.name=e,this.track=r}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},s}(),AbstractRangeCameraCapability=function(s){__extends$1(e,s);function e(r,n){return s.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var o={advanced:[n]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(AbstractCameraCapability),ZoomFeatureImpl=function(s){__extends$1(e,s);function e(r){return s.call(this,"zoom",r)||this}return e}(AbstractRangeCameraCapability),TorchFeatureImpl=function(s){__extends$1(e,s);function e(r){return s.call(this,"torch",r)||this}return e}(AbstractCameraCapability),CameraCapabilitiesImpl=function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new ZoomFeatureImpl(this.track)},s.prototype.torchFeature=function(){return new TorchFeatureImpl(this.track)},s}(),RenderedCameraImpl=function(){function s(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,o),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,r,n,o){return __awaiter$2(this,void 0,void 0,function(){var a,c;return __generator$2(this,function(l){switch(l.label){case 0:return a=new s(e,r,o),n.aspectRatio?(c={aspectRatio:n.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:l.sent(),l.label=2;case 2:return a.setupSurface(),[2,a]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var o=e.mediaStream.getVideoTracks(),a=o.length,c=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++c,c>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},s.prototype.getCapabilities=function(){return new CameraCapabilitiesImpl(this.getFirstTrackOrFail())},s}(),CameraImpl=function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,r,n){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(o){return[2,RenderedCameraImpl.create(e,this.mediaStream,r,n)]})})},s.create=function(e){return __awaiter$2(this,void 0,void 0,function(){var r,n;return __generator$2(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=o.sent(),[2,new s(n)]}})})},s}(),__awaiter$1=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator$1=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CameraFactory=function(){function s(){}return s.failIfNotSupported=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(r){return[2,CameraImpl.create(e)]})})},s}(),__awaiter=function(s,e,r,n){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function l(f){try{d(n.next(f))}catch(g){c(g)}}function h(f){try{d(n.throw(f))}catch(g){c(g)}}function d(f){f.done?a(f.value):o(f.value).then(l,h)}d((n=n.apply(s,e||[])).next())})},__generator=function(s,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(d){return function(f){return h([d,f])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(s,r)}catch(f){d=[6,f],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},CameraRetriever=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=Html5QrcodeStrings.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return __awaiter(this,void 0,void 0,function(){var e,r,n,o,a,c,l;return __generator(this,function(h){switch(h.label){case 0:return e=function(d){for(var f=d.getVideoTracks(),g=0,v=f;g<v.length;g++){var S=v[g];S.enabled=!1,S.stop(),d.removeTrack(S)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),o=[],a=0,c=n;a<c.length;a++)l=c[a],l.kind==="videoinput"&&o.push({id:l.deviceId,label:l.label});return e(r),[2,o]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(a){for(var c=[],l=0,h=a;l<h.length;l++){var d=h[l];d.kind==="video"&&c.push({id:d.id,label:d.label})}e(c)},o=MediaStreamTrack;o.getSources(n)})},s}(),Html5QrcodeScannerState;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Html5QrcodeScannerState||(Html5QrcodeScannerState={}));var StateManagerImpl=function(){function s(){this.state=Html5QrcodeScannerState.NOT_STARTED,this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Html5QrcodeScannerState.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case Html5QrcodeScannerState.UNKNOWN:throw"Transition from unknown is not allowed";case Html5QrcodeScannerState.NOT_STARTED:this.failIfNewStateIs(e,[Html5QrcodeScannerState.PAUSED]);break;case Html5QrcodeScannerState.SCANNING:break;case Html5QrcodeScannerState.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,r){for(var n=0,o=r;n<o.length;n++){var a=o[n];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s}(),StateManagerProxy=function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Html5QrcodeScannerState.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Html5QrcodeScannerState.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Html5QrcodeScannerState.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Html5QrcodeScannerState.PAUSED},s}(),StateManagerFactory=function(){function s(){}return s.create=function(){return new StateManagerProxy(new StateManagerImpl)},s}(),__extends=function(){var s=function(e,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},s(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Constants=function(s){__extends(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Html5QrcodeConstants),InternalHtml5QrcodeConfig=function(){function s(e,r){this.logger=r,this.fps=Constants.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Constants.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},s.create=function(e,r){return new s(e,r)},s}(),Html5Qrcode=function(){function s(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new BaseLoggger(this.verbose),this.qrcode=new Html5QrcodeShim(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=StateManagerFactory.create()}return s.prototype.start=function(e,r,n,o){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;o?c=o:c=this.verbose?this.logger.log:function(){};var l=InternalHtml5QrcodeConfig.create(r,this.logger);this.clearElement();var h=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=h,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:Constants.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var g=this,v=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);return new Promise(function(S,A){var w=d?l.videoConstraints:g.createVideoConstraints(e);if(!w){v.cancel(),A("videoConstraints should be defined");return}var m={};(!d||l.aspectRatio)&&(m.aspectRatio=l.aspectRatio);var b={onRenderSurfaceReady:function(x,y){g.setupUi(x,y,l),g.isScanning=!0,g.foreverScan(l,n,c)}};CameraFactory.failIfNotSupported().then(function(x){x.create(w).then(function(y){return y.render(a.element,m,b).then(function(O){g.renderedCamera=O,v.execute(),S(null)}).catch(function(O){v.cancel(),A(O)})}).catch(function(y){v.cancel(),A(Html5QrcodeStrings.errorGettingUserMedia(y))})}).catch(function(x){v.cancel(),A(Html5QrcodeStrings.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED),this.showPausedState(),(isNullOrUndefined(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var a=document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),n(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),r.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},s.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var l=c.width,h=c.height,d=document.getElementById(n.elementId),f=d.clientWidth?d.clientWidth:Constants.DEFAULT_WIDTH,g=Math.max(d.clientHeight?d.clientHeight:h,Constants.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(l,h,f,g);if(r){var S=n.createCanvasElement(f,g,"qr-canvas-visible");S.style.display="inline-block",d.appendChild(S);var A=S.getContext("2d");if(!A)throw"Unable to get 2d context from canvas";A.canvas.width=f,A.canvas.height=g,A.drawImage(c,0,0,l,h,v.x,v.y,v.width,v.height)}var w=Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING,m=Math.max(c.width,v.width),b=Math.max(c.height,v.height),x=m+2*w,y=b+2*w,O=n.createCanvasElement(x,y);d.appendChild(O);var k=O.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=x,k.canvas.height=y,k.drawImage(c,0,0,l,h,w,w,m,b);try{n.qrcode.decodeRobustlyAsync(O).then(function(P){o(Html5QrcodeResultFactory.createFromQrcodeResult(P))}).catch(a)}catch(P){a("QR code parse error, error = ".concat(P))}},c.onerror=a,c.onabort=a,c.onstalled=a,c.onsuspend=a,c.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return CameraRetriever.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!VideoConstraintsUtil.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var r=[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],o=0,a=e.formatsToSupport;o<a.length;o++){var c=a[o];isValidHtml5QrcodeSupportedFormats(c)?n.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(isNullOrUndefined(e))return!0;if(!isNullOrUndefined(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(isNullOrUndefined(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return isNullOrUndefined(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,r,n){var o=this,a=n.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(e,r,a),l=function(d){if(d<Constants.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Constants.MIN_QR_BOX_SIZE,"px.")},h=function(d){return d>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};l(c.width),l(c.height),c.width=h(c.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return n},s.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var o=isNullOrUndefined(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(e,r,o);a.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=n.isShadedBoxEnabled()&&a.height<=r,l={x:0,y:0,width:e,height:r},h=c?this.getShadedRegionBounds(e,r,a):l,d=this.createCanvasElement(h.width,h.height),f={willReadFrequently:!0},g=d.getContext("2d",f);g.canvas.width=h.width,g.canvas.height=h.height,this.element.append(d),c&&this.possiblyInsertShadingElement(this.element,e,r,a),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=g,this.canvasElement=d},s.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Html5QrcodeStrings.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},s.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Html5QrcodeResultFactory.createFromQrcodeResult(o)),n.possiblyUpdateShaders(!0),!0}).catch(function(o){n.possiblyUpdateShaders(!1);var a=Html5QrcodeStrings.codeParseError(o);return r(a,Html5QrcodeErrorFactory.createFrom(a)),!1})},s.prototype.foreverScan=function(e,r,n){var o=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),c=a.videoWidth/a.clientWidth,l=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*c,d=this.qrRegion.height*l,f=this.qrRegion.x*c,g=this.qrRegion.y*l;this.context.drawImage(a,f,g,h,d,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,r,n)},o.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(S){!S&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(r,n).finally(function(){v()})):v()}).catch(function(S){o.logger.logError("Error happend while scanning context",S),v()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",o={user:!0,environment:!0},a="exact",c=function(A){if(A in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(A,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var h=Object.keys(e)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var d=e.facingMode;if(typeof d=="string"){if(c(d))return{facingMode:d}}else if(typeof d=="object")if(a in d){if(c(d["".concat(a)]))return{facingMode:{exact:d["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var f=typeof d;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var g=e.deviceId;if(typeof g=="string")return{deviceId:g};if(typeof g=="object"){if(a in g)return{deviceId:{exact:g["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var v=typeof g;throw"Invalid type of 'deviceId' = ".concat(v)}}}var S=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(S)},s.prototype.computeCanvasDrawConfig=function(e,r,n,o){if(e<=n&&r<=o){var a=(n-e)/2,c=(o-r)/2;return{x:a,y:c,width:e,height:r}}else{var l=e,h=r;return e>n&&(r=n/e*r,e=n),r>o&&(e=o/r*e,r=o),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(h)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,o)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Constants.BORDER_SHADER_MATCH_COLOR:Constants.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,r,n){var o=e,a=r,c=document.createElement("canvas");return c.style.width="".concat(o,"px"),c.style.height="".concat(a,"px"),c.style.display="none",c.id=isNullOrUndefined(n)?"qr-canvas":n,c},s.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},s.prototype.possiblyInsertShadingElement=function(e,r,n,o){if(!(r-o.width<1||n-o.height<1)){var a=document.createElement("div");a.style.position="absolute";var c=(r-o.width)/2,l=(n-o.height)/2;if(a.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Constants.SHADED_REGION_ELEMENT_ID),r-o.width<11||n-o.height<11)this.hasBorderShaders=!1;else{var h=5,d=40;this.insertShaderBorders(a,d,h,-h,null,0,!0),this.insertShaderBorders(a,d,h,-h,null,0,!1),this.insertShaderBorders(a,d,h,null,-h,0,!0),this.insertShaderBorders(a,d,h,null,-h,0,!1),this.insertShaderBorders(a,h,d+h,-h,null,-h,!0),this.insertShaderBorders(a,h,d+h,null,-h,-h,!0),this.insertShaderBorders(a,h,d+h,-h,null,-h,!1),this.insertShaderBorders(a,h,d+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(a)}},s.prototype.insertShaderBorders=function(e,r,n,o,a,c,l){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Constants.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),o!==null&&(h.style.top="".concat(o,"px")),a!==null&&(h.style.bottom="".concat(a,"px")),l?h.style.left="".concat(c,"px"):h.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s}(),Html5QrcodeScannerStatus;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Html5QrcodeScannerStatus||(Html5QrcodeScannerStatus={}));var eruda$1={exports:{}};/*! eruda v3.0.1 https://eruda.liriliri.io/ */(function(module,exports){(function(s,e){module.exports=e()})(self,function(){return function(){var __webpack_modules__={422:function(s,e,r){r.d(e,{Z:function(){return pe}});var n=r(5671),o=r(3144),a=r(9340),c=r(2963),l=r(1120),h=r(2461),d=r.n(h),f=r(3990),g=r.n(f),v=r(6768),S=r.n(v),A=r(4331),w=r.n(A),m=r(5610),b=r.n(m),x=r(7483),y=r.n(x),O=r(6341),k=r.n(O),P=r(3875),L=r.n(P),M=r(6954),B=r.n(M);r(9585);function j(we){var Xe="luna-".concat(we,"-");function Qe(Pe){return d()(w()(Pe).split(/\s+/),function(Ze){return k()(Ze,Xe)?Ze:Ze.replace(/[\w-]+/,function(_e){return"".concat(Xe).concat(_e)})}).join(" ")}return function(Pe){if(/<[^>]*>/g.test(Pe))try{var Ze=y().parse(Pe);return F(Ze,function(_e){_e.attrs&&_e.attrs.class&&(_e.attrs.class=Qe(_e.attrs.class))}),y().stringify(Ze)}catch{return Qe(Pe)}return Qe(Pe)}}function F(we,Xe){for(var Qe=0,Pe=we.length;Qe<Pe;Qe++){var Ze=we[Qe];Xe(Ze),Ze.content&&F(Ze.content,Xe)}}b();function U(){var we=B()();return we==="os x"?"mac":we}var V=r(1443),Q=r.n(V),q=r(1512),G=r.n(q),te=r(3783),Y=r.n(te),J=r(6329),K=r.n(J),ne=r(4193),de=r.n(ne),Re=r(5852),Te=r.n(Re);function Me(we){var Xe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qe,Pe=(0,l.Z)(we);if(Xe){var Ze=(0,l.Z)(this).constructor;Qe=Reflect.construct(Pe,arguments,Ze)}else Qe=Pe.apply(this,arguments);return(0,c.Z)(this,Qe)}}var Ie=function(we){(0,a.Z)(Qe,we);var Xe=Me(Qe);function Qe(Pe,Ze){var _e,qe=Ze.compName,Be=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,mt=Be===void 0?"light":Be;return(0,n.Z)(this,Qe),(_e=Xe.call(this)).subComponents=[],_e.compName=qe,_e.c=j(qe),_e.options={},_e.container=Pe,_e.$container=G()(Pe),_e.$container.addClass(["luna-".concat(qe),_e.c("platform-".concat(U()))]),_e.on("optionChange",function(ht,Dt,Se){var Ye=_e.c;ht==="theme"&&(_e.$container.rmClass(Ye("theme-".concat(Se))).addClass(Ye("theme-".concat(Dt))),Y()(_e.subComponents,function(Le){return Le.setOption("theme",Dt)}))}),_e.setOption("theme",mt),_e}return(0,o.Z)(Qe,[{key:"destroy",value:function(){this.destroySubComponents();var Pe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Pe("platform-".concat(U()))).rmClass(Pe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Pe,Ze){var _e=this,qe=this.options,Be={};typeof Pe=="string"?Be[Pe]=Ze:Be=Pe,Y()(Be,function(mt,ht){var Dt=qe[ht];qe[ht]=mt,_e.emit("optionChange",ht,mt,Dt)})}},{key:"getOption",value:function(Pe){return this.options[Pe]}},{key:"addSubComponent",value:function(Pe){Pe.setOption("theme",this.options.theme),this.subComponents.push(Pe)}},{key:"removeSubComponent",value:function(Pe){Te()(this.subComponents,function(Ze){return Ze===Pe})}},{key:"destroySubComponents",value:function(){Y()(this.subComponents,function(Pe){return Pe.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Pe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};de()(Pe,Ze),K()(this.options,Pe)}},{key:"find",value:function(Pe){return this.$container.find(this.c(Pe))}}]),Qe}(Q());function ce(we){var Xe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qe,Pe=(0,l.Z)(we);if(Xe){var Ze=(0,l.Z)(this).constructor;Qe=Reflect.construct(Pe,arguments,Ze)}else Qe=Pe.apply(this,arguments);return(0,c.Z)(this,Qe)}}s=r.hmd(s);var pe=function(we){(0,a.Z)(Qe,we);var Xe=ce(Qe);function Qe(Pe){var Ze,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.Z)(this,Qe),(Ze=Xe.call(this,Pe,{compName:"box-model"})).initOptions(_e),Ze.options.element&&Ze.render(),Ze.bindEvent(),Ze}return(0,o.Z)(Qe,[{key:"bindEvent",value:function(){var Pe=this;this.on("optionChange",function(Ze){Ze==="element"&&Pe.render()})}},{key:"render",value:function(){var Pe=this.c,Ze=this.getBoxModelData();this.$container.html(['<div class="'.concat(Pe("box-model"),'">'),Ze.position?'<div class="'.concat(Pe("position"),'">'):"",Ze.position?'<div class="'.concat(Pe("label"),'">position</div><div class="').concat(Pe("top"),'">').concat(Ze.position.top,'</div><br><div class="').concat(Pe("left"),'">').concat(Ze.position.left,"</div>"):"",'<div class="'.concat(Pe("margin"),'">'),'<div class="'.concat(Pe("label"),'">margin</div><div class="').concat(Pe("top"),'">').concat(Ze.margin.top,'</div><br><div class="').concat(Pe("left"),'">').concat(Ze.margin.left,"</div>"),'<div class="'.concat(Pe("border"),'">'),'<div class="'.concat(Pe("label"),'">border</div><div class="').concat(Pe("top"),'">').concat(Ze.border.top,'</div><br><div class="').concat(Pe("left"),'">').concat(Ze.border.left,"</div>"),'<div class="'.concat(Pe("padding"),'">'),'<div class="'.concat(Pe("label"),'">padding</div><div class="').concat(Pe("top"),'">').concat(Ze.padding.top,'</div><br><div class="').concat(Pe("left"),'">').concat(Ze.padding.left,"</div>"),'<div class="'.concat(Pe("content"),'">'),"<span>".concat(Ze.content.width,"</span>&nbsp;×&nbsp;<span>").concat(Ze.content.height,"</span>"),"</div>",'<div class="'.concat(Pe("right"),'">').concat(Ze.padding.right,'</div><br><div class="').concat(Pe("bottom"),'">').concat(Ze.padding.bottom,"</div>"),"</div>",'<div class="'.concat(Pe("right"),'">').concat(Ze.border.right,'</div><br><div class="').concat(Pe("bottom"),'">').concat(Ze.border.bottom,"</div>"),"</div>",'<div class="'.concat(Pe("right"),'">').concat(Ze.margin.right,'</div><br><div class="').concat(Pe("bottom"),'">').concat(Ze.margin.bottom,"</div>"),"</div>",Ze.position?'<div class="'.concat(Pe("right"),'">').concat(Ze.position.right,'</div><br><div class="').concat(Pe("bottom"),'">').concat(Ze.position.bottom,"</div>"):"",Ze.position?"</div>":"","</div>"].join(""))}},{key:"getBoxModelData",value:function(){var Pe=this.options.element,Ze=window.getComputedStyle(Pe);function _e(Be){var mt=["top","left","right","bottom"];return Be!=="position"&&(mt=d()(mt,function(ht){return"".concat(Be,"-").concat(ht)})),Be==="border"&&(mt=d()(mt,function(ht){return"".concat(ht,"-width")})),{top:me(Ze[mt[0]],Be),left:me(Ze[mt[1]],Be),right:me(Ze[mt[2]],Be),bottom:me(Ze[mt[3]],Be)}}var qe={margin:_e("margin"),border:_e("border"),padding:_e("padding"),content:{width:me(Ze.width),height:me(Ze.height)}};return Ze.position!=="static"&&(qe.position=_e("position")),qe}}]),Qe}(Ie);function me(we,Xe){if(g()(we))return we;if(!S()(we))return"‒";var Qe,Pe=(Qe=we,L()(Qe.replace("px","")));return isNaN(Pe)?we:Xe==="position"?Pe:Pe===0?"‒":Pe}(function(we,Xe){try{we.exports=Xe,we.exports.default=Xe}catch{}})(s,pe)},8816:function(s,e,r){r.d(e,{Z:function(){return hn}});var n=r(168),o=r(181);function a(tr,Ar){return function(Qt){if(Array.isArray(Qt))return Qt}(tr)||function(Qt,be){var ve=Qt==null?null:typeof Symbol<"u"&&Qt[Symbol.iterator]||Qt["@@iterator"];if(ve!=null){var Fe,tt,Bt,Et,He=[],At=!0,qt=!1;try{if(Bt=(ve=ve.call(Qt)).next,be===0){if(Object(ve)!==ve)return;At=!1}else for(;!(At=(Fe=Bt.call(ve)).done)&&(He.push(Fe.value),He.length!==be);At=!0);}catch(Or){qt=!0,tt=Or}finally{try{if(!At&&ve.return!=null&&(Et=ve.return(),Object(Et)!==Et))return}finally{if(qt)throw tt}}return He}}(tr,Ar)||(0,o.Z)(tr,Ar)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var c=r(5671),l=r(3144),h=r(1752),d=r(9340),f=r(2963),g=r(1120),v=r(7326),S=r(8901),A=r.n(S),w=r(3367),m=r.n(w),b=r(6341),x=r.n(b),y=r(6930),O=r.n(y),k=r(4187),P=r.n(k),L=r(3783),M=r.n(L),B=r(4858),j=r.n(B),F=r(8887),U=r.n(F),V=r(7756),Q=r.n(V),q=r(3023),G=r.n(q);function te(tr){return tr.constructor&&tr.constructor.name?tr.constructor.name:G()({}.toString.call(tr).replace(/(\[object )|]/g,""))}var Y=r(2461),J=r.n(Y),K=r(4331),ne=r.n(K),de=r(5610),Re=r.n(de),Te=r(7483),Me=r.n(Te),Ie=r(3990),ce=r.n(Ie),pe=r(3875),me=r.n(pe),we=r(6954),Xe=r.n(we),Qe=r(9585),Pe=r.n(Qe);function Ze(tr){var Ar="luna-".concat(tr,"-");function Qt(be){return J()(ne()(be).split(/\s+/),function(ve){return x()(ve,Ar)?ve:ve.replace(/[\w-]+/,function(Fe){return"".concat(Ar).concat(Fe)})}).join(" ")}return function(be){if(/<[^>]*>/g.test(be))try{var ve=Me().parse(be);return _e(ve,function(Fe){Fe.attrs&&Fe.attrs.class&&(Fe.attrs.class=Qt(Fe.attrs.class))}),Me().stringify(ve)}catch{return Qt(be)}return Qt(be)}}function _e(tr,Ar){for(var Qt=0,be=tr.length;Qt<be;Qt++){var ve=tr[Qt];Ar(ve),ve.content&&_e(ve.content,Ar)}}Re();var qe=Ze("console");function Be(tr){var Ar,Qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=Qt.topObj,ve=Qt.level,Fe=ve===void 0?0:ve,tt=Qt.getterVal,Bt=tt!==void 0&&tt,Et=Qt.unenumerable,He=Et===void 0||Et,At="",qt="",Or=[],Rr=[],Wr="";be=be||tr;var an={getterVal:Bt,unenumerable:He,level:Fe+1},Sr=Fe===0,Ir='<span class="'.concat(qe("key"),'">'),Nt='<span class="'.concat(qe("number"),'">'),un='<span class="'.concat(qe("null"),'">'),pr='<span class="'.concat(qe("string"),'">'),Nn='<span class="'.concat(qe("boolean"),'">'),On='<span class="'.concat(qe("special"),'">'),Mr=function(qr){return A()(qr).replace(/\\n/g,"↵").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},sr="</span>";function Tn(qr){return qr=m()(qr),x()(mt,qr)||O()(qr,"Array[")?On+Mr(qr)+sr:(qr.length>100&&(qr=Q()(qr,100,{separator:" ",ellipsis:"…"})),pr+Mr('"'.concat(qr,'"'))+sr)}function Pr(qr){if(Ar>5)Wr=", …";else{var ti=function(I){return Ir+Mr(I)+sr}(Dt(qr));if(!Bt){var D=Object.getOwnPropertyDescriptor(tr,qr);if(D&&D.get)return Or.push("".concat(ti,": ").concat(Tn("(...)"))),void Ar++}Or.push("".concat(ti,": ").concat(Be(be[qr],an))),Ar++}}try{qt={}.toString.call(tr)}catch{qt="[object Object]"}var En,rn=qt=="[object Array]",Jn=qt=="[object Object]",_n=qt=="[object Number]",Vn=qt=="[object RegExp]",ei=qt=="[object Symbol]",Fn=qt=="[object Function]",Zn=qt=="[object Boolean]";if(qt=="[object String]")At=Tn(Dt(tr));else if(Vn)En=Dt(tr.toString()),At=pr+En+sr;else if(Fn)At=Tn("ƒ");else if(rn)if(Sr){At="[";var Kn=tr.length,Zr="";Kn>100&&(Kn=100,Zr=", …");for(var Dn=0;Dn<Kn;Dn++)Or.push("".concat(Be(tr[Dn],an)));At+=Or.join(", ")+Zr+"]"}else At="Array(".concat(tr.length,")");else if(Jn)ht(tr)&&(tr=Object.getPrototypeOf(tr)),Rr=He?Object.getOwnPropertyNames(tr):Object.keys(tr),Sr?(Ar=1,At="{",M()(Rr,Pr),At+=Or.join(", ")+Wr+"}"):(At=te(tr))==="Object"&&(At="{…}");else if(_n)At=tr+"",At=j()(At,"Infinity")||At==="NaN"?'"'.concat(At,'"'):Nt+At+sr;else if(Zn)At=Nn+(tr?"true":"false")+sr;else if(tr===null)At=function(qr){return un+qr+sr}("null");else if(ei)At=Tn("Symbol");else if(tr===void 0)At=Tn("undefined");else try{ht(tr)&&(tr=Object.getPrototypeOf(tr)),Sr?(Ar=1,At="{",Rr=He?Object.getOwnPropertyNames(tr):Object.keys(tr),M()(Rr,Pr),At+=Or.join(", ")+Wr+"}"):(At=te(tr))==="Object"&&(At="{…}")}catch{At=Tn(tr)}return At}var mt=["(...)","undefined","Symbol","Object","ƒ"];function ht(tr){var Ar=U()(Object.getOwnPropertyNames(tr)),Qt=Object.getPrototypeOf(tr);return Ar&&Qt&&Qt!==Object.prototype}function Dt(tr){return P()(tr).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var Se,Ye=r(8299),Le=r(5564),ze=r(8209),Ue=r(242),Ge=r.n(Ue),ut=r(5166),at=r.n(ut),Ut=r(6768),Zt=r.n(Ut),Pt=r(2749),Ot=r.n(Pt),vt=r(6997),Ve=r.n(vt),pt=r(4193),wt=r.n(pt),Ct=r(9833),$t=r.n(Ct),yt=r(9296),lt=r.n(yt),dt=r(8099),xt=r.n(dt),Wt=r(6156),hr=r.n(Wt),Yt=r(1286),vr=r.n(Yt),fr=r(4777),br=r.n(fr),$r=r(1352),Lr=r.n($r),fn=r(6472),pn=r.n(fn),_r=r(42),ir=r.n(_r),Jt=r(4675),gt=r.n(Jt),it=r(3063),ct=r.n(it),De=r(2533),er=r.n(De),Cr=r(1512),wr=r.n(Cr),Xt=r(8613),Vt=r.n(Xt),zt=r(1443),bt=r.n(zt),_t=r(6049),Lt=r.n(_t),Gt=r(4400),lr=r.n(Gt),rr=r(2327),Kt=r.n(rr),ot=r(9963),ur=r.n(ot),nr=r(6837),kr=r.n(nr),Ur=r(3988),dr=r.n(Ur),mr=r(3651),ar=r.n(mr),Yr=r(6053),nn=r.n(Yr),gn=r(1907),Dr=r.n(gn),sn=r(4891),mn=r.n(sn),Hr=r(5229),Kr=r.n(Hr),An=r(4696),bn=r.n(An),Br=r(9804),Jr=r.n(Br),et=r(1754),Ee=r.n(et);function or(tr){var Ar=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qt,be=(0,g.Z)(tr);if(Ar){var ve=(0,g.Z)(this).constructor;Qt=Reflect.construct(be,arguments,ve)}else Qt=be.apply(this,arguments);return(0,f.Z)(this,Qt)}}var Xr=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,on={comment:"",string:"",number:"",keyword:"",operator:""},ai=function(tr){(0,d.Z)(Qt,tr);var Ar=or(Qt);function Qt(be,ve){var Fe,tt=ve.type,Bt=tt===void 0?"log":tt,Et=ve.args,He=Et===void 0?[]:Et,At=ve.id,qt=ve.group,Or=ve.targetGroup,Rr=ve.header,Wr=ve.ignoreFilter,an=Wr!==void 0&&Wr,Sr=ve.accessGetter,Ir=ve.unenumerable,Nt=ve.lazyEvaluation;(0,c.Z)(this,Qt),(Fe=Ar.call(this)).container=Vt()("div"),Fe.count=1,Fe.width=0,Fe.height=0,Fe.isHidden=!1,Fe.columns=[],Fe.elements={},Fe.objects={},Fe.console=be,Fe.type=Bt,Fe.group=qt,Fe.targetGroup=Or,Fe.args=He,Fe.id=At,Fe.header=Rr,Fe.ignoreFilter=an,Fe.collapsed=!1,Fe.container.log=(0,v.Z)(Fe),Fe.height=0,Fe.width=0,Fe.$container=wr()(Fe.container),Fe.accessGetter=Sr,Fe.unenumerable=Ir,Fe.lazyEvaluation=Nt;var un="info";switch(Bt){case"debug":un="verbose";break;case"error":un="error";break;case"warn":un="warning"}return Fe.level=un,Fe.resizeSensor=new(Ge())(Fe.container),Fe.onResize=Lt()(function(){Pe()(Fe.container)?Fe.isHidden=!0:(Fe.isHidden||Fe.updateSize(!1),Fe.isHidden=!1)},16),Fe.formatMsg(),Fe.group&&Fe.checkGroup(),Fe.bindEvent(),Fe}return(0,l.Z)(Qt,[{key:"checkGroup",value:function(){for(var be=this.group,ve=!1;be;){if(be.collapsed){ve=!0;break}be=be.parent}return ve!==this.collapsed&&(this.collapsed=ve,!0)}},{key:"updateIcon",value:function(be){var ve=this.console.c;return this.$container.find(ve(".icon-container")).find(ve(".icon")).rmAttr("class").addClass([ve("icon"),ve("icon-".concat(be))]),this}},{key:"addCount",value:function(){this.count++;var be=this.$container,ve=this.count,Fe=this.console.c,tt=be.find(Fe(".count-container")),Bt=be.find(Fe(".icon-container")),Et=tt.find(Fe(".count"));return ve===2&&tt.rmClass(Fe("hidden")),Et.text(m()(ve)),Bt.addClass(Fe("hidden")),this}},{key:"groupEnd",value:function(){var be=this.$container,ve=this.console.c;return be.find(".".concat(ve("nesting-level"),":not(.").concat(ve("group-closed"),")")).last().addClass(ve("group-closed")),this}},{key:"updateTime",value:function(be){var ve=this.$container.find(this.console.c(".time-container"));return this.header&&(ve.find("span").eq(0).text(be),this.header.time=be),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!nn()(this.args,function(be){return at()(be)})}},{key:"updateSize",value:function(){var be=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],ve=this.container.getBoundingClientRect(),Fe=ve.width,tt=ve.height-1;this.height!==tt&&(this.height=tt,be||this.emit("updateHeight")),this.width!==Fe&&(this.width=Fe)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var be=this.args,ve="";M()(be,function(Fe,tt){tt!==0&&(ve+=" "),at()(Fe)?ve+=lr()(Fe):ve+=m()(Fe)}),Kt()(ve)}},{key:"bindEvent",value:function(){var be=this,ve=this.console.c,Fe=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",ve(".dom-viewer"),function(tt){return tt.stopPropagation()}).on("click",ve(".preview"),function(tt){tt.stopPropagation();var Bt=wr()(this).find(ve(".preview-icon-container")).find(ve(".icon")),Et="caret-down";Bt.hasClass(ve("icon-caret-down"))&&(Et="caret-right"),Bt.rmAttr("class").addClass([ve("icon"),ve("icon-".concat(Et))]),Fe.renderObjectViewer(this)}).on("click",function(){return be.click()})}},{key:"renderEl",value:function(){var be=this.elements,ve=this.console.c,Fe=this;this.$container.find(ve(".dom-viewer")).each(function(){var tt=wr()(this).data("id");new ze.Z(this,{node:be[tt],theme:Fe.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function(be){var ve=this.console,Fe=this.unenumerable,tt=this.accessGetter,Bt=this.lazyEvaluation,Et=ve.c,He=wr()(be),At=He.data("id");if(At){var qt=this.objects[At],Or=He.find(Et(".json"));if(Or.hasClass(Et("hidden"))){if(Or.data("init")!=="true"){if(Bt){var Rr=new Ye.Z(Or.get(0),{unenumerable:Fe,accessGetter:tt});Rr.setOption("theme",ve.getOption("theme")),Rr.set(qt)}else{var Wr=new Ye.q(Or.get(0));Wr.setOption("theme",ve.getOption("theme")),Wr.set(qt)}Or.data("init","true")}Or.rmClass(Et("hidden"))}else Or.addClass(Et("hidden"))}}},{key:"renderTable",value:function(be){var ve=this,Fe="__LunaConsoleValue",tt=this.columns,Bt=this.$container,Et=this.console,He=Et.c,At=Bt.find(He(".data-grid")),qt=be[0],Or=new Le.Z(At.get(0),{columns:xt()([{id:"(index)",title:"(index)",sortable:!0}],J()(tt,function(Rr){return{id:Rr,title:Rr===Fe?"Value":Rr,sortable:!0}})),theme:Et.getOption("theme")});M()(qt,function(Rr,Wr){var an={"(index)":m()(Wr)};tt.forEach(function(Sr){at()(Rr)?an[Sr]=Sr===Fe?"":ve.formatTableVal(Rr[Sr]):Ve()(Rr)&&(an[Sr]=Sr===Fe?ve.formatTableVal(Rr):"")}),Or.append(an)})}},{key:"extractObj",value:function(be){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=arguments.length>2?arguments[2]:void 0,tt=this.accessGetter,Bt=this.unenumerable;wt()(ve,{accessGetter:tt,unenumerable:Bt,symbol:Bt,timeout:1e3}),function(Et,He,At){var qt=ur()(Et,He);kr()(function(){return At(qt)})}(be,ve,function(Et){return Fe(JSON.parse(Et))})}},{key:"click",value:function(){var be=this.type,ve=this.$container,Fe=this.console,tt=Fe.c;switch(be){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Fe.toggleGroup(this);break;case"error":ve.find(tt(".stack")).toggleClass(tt("hidden"))}}},{key:"formatMsg",value:function(){var be=this.args,ve=this.type,Fe=this.id,tt=this.header,Bt=this.group,Et=this.console.c;be=gt()(be);var He,At,qt="";switch(ve!=="group"&&ve!=="groupCollapsed"||be.length===0&&(be=["console.group"]),ve){case"log":case"info":case"debug":qt=this.formatCommon(be);break;case"dir":qt=this.formatDir(be);break;case"warn":He="warn",qt=this.formatCommon(be);break;case"error":Zt()(be[0])&&be.length!==1&&(be=this.substituteStr(be)),At=be[0],He="error",At=Ot()(At)?At:new Error(this.formatCommon(be)),qt=this.formatErr(At);break;case"table":qt=this.formatTable(be);break;case"html":qt=be[0];break;case"input":qt=this.formatJs(be[0]),He="input";break;case"output":qt=this.formatCommon(be),He="output";break;case"groupCollapsed":qt=this.formatCommon(be),He="caret-right";break;case"group":qt=this.formatCommon(be),He="caret-down"}x()(["log","debug","warn"],ve)&&this.isSimple()&&(qt=dr()(qt,function(Or){return'<a href="'.concat(Or,'" target="_blank">').concat(Or,"</a>")})),qt=this.render({msg:qt,type:ve,icon:He,id:Fe,header:tt,group:Bt}),this.$container.addClass("".concat(Et("log-container"))).html(qt),ve==="table"&&(U()(this.columns)||this.renderTable(be)),U()(this.elements)||this.renderEl(),this.$content=this.$container.find(Et(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function(be){var ve=this.console.c,Fe="",tt="";if(be.group)for(var Bt=be.group.indentLevel,Et=0;Et<Bt;Et++)tt+='<div class="'.concat(ve("nesting-level"),'"></div>');be.header&&(Fe+=Dr()(Se||(Se=(0,n.Z)([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),ve("header"),tt,ve("time-from-container"),be.header.time,be.header.from));var He="";return be.icon&&(He='<div class="'.concat(ve("icon-container"),'"><span class="').concat(ve("icon icon-"+be.icon),'"></span></div>')),Fe+=`
    <div class="`.concat(ve(be.type+" log-item"),`">
      `).concat(tt,`
      `).concat(He,`
      <div class="`).concat(ve("count-container hidden"),`">
        <div class="`).concat(ve("count"),`"></div>
      </div>    
      <div class="`).concat(ve("log-content-wrapper"),`">
        <div class="`).concat(ve("log-content"),'">').concat(be.msg,`</div>
      </div>
    </div>`)}},{key:"formatTable",value:function(be){var ve=be[0],Fe=be[1],tt=[];return Zt()(Fe)&&(Fe=Lr()(Fe)),pn()(Fe)||(Fe=null),at()(ve)?(M()(ve,function(Bt){Ve()(Bt)?tt.push("__LunaConsoleValue"):at()(Bt)&&(tt=tt.concat(er()(Bt)))}),(tt=ir()(tt)).sort(),Fe&&(tt=tt.filter(function(Bt){return x()(Fe,Bt)})),tt.length>20&&(tt=tt.slice(0,20)),U()(tt)?this.formatCommon(be):(this.columns=tt,this.console.c('<div class="data-grid"></div>')+this.formatPreview(ve))):this.formatCommon(be)}},{key:"formatErr",value:function(be){var ve=be.stack?be.stack.split(`
`):[],Fe="".concat(be.message||ve[0],"<br/>");return ve=ve.map(function(tt){return A()(tt)}),Fe+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(ve.slice(1).join("<br/>"),"</div>").replace(Xr,function(tt){return'<a href="'.concat(tt,'" target="_blank">').concat(tt,"</a>")})}},{key:"formatCommon",value:function(be){var ve=this.console.c,Fe=Zt()(be[0])&&be.length!==1;Fe&&(be=this.substituteStr(be));for(var tt=0,Bt=be.length;tt<Bt;tt++){var Et=be[tt];$t()(Et)?be[tt]=this.formatEl(Et):br()(Et)?be[tt]=this.formatFn(Et):Ee()(Et)?be[tt]='<span class="'.concat(ve("regexp"),'">').concat(A()(m()(Et)),"</span>"):at()(Et)?be[tt]=this.formatPreview(Et):vr()(Et)?be[tt]='<span class="'.concat(ve("undefined"),'">undefined</span>'):hr()(Et)?be[tt]='<span class="'.concat(ve("null"),'">null</span>'):ce()(Et)?be[tt]='<span class="'.concat(ve("number"),'">').concat(m()(Et),"</span>"):typeof Et=="bigint"?be[tt]='<span class="'.concat(ve("number"),'">').concat(m()(Et),"n</span>"):bn()(Et)?be[tt]='<span class="'.concat(ve("boolean"),'">').concat(m()(Et),"</span>"):Jr()(Et)?be[tt]='<span class="'.concat(ve("symbol"),'">').concat(A()(m()(Et)),"</span>"):(Et=m()(Et),tt===0&&Fe||(Et=A()(Et)),Et.length>5e3&&(Et=Q()(Et,5e3,{separator:" ",ellipsis:"…"})),be[tt]=Et)}return be.join(" ")}},{key:"formatDir",value:function(be){return at()(be[0])?this.formatPreview(be[0]):this.formatCommon(be)}},{key:"formatTableVal",value:function(be){var ve=this.console.c;return at()(be)?"{…}":Ve()(be)?mn()('<div class="'.concat(ve("preview"),'">').concat(Be(be),"</div>")):m()(be)}},{key:"formatPreview",value:function(be){var ve=this,Fe=this.console.c,tt=Kr()();this.lazyEvaluation?this.objects[tt]=be:this.extractObj(be,{},function(He){ve.objects[tt]=He});var Bt=x()(["dir","table"],this.type),Et=te(be);return Et==="Array"&&be.length>1?(Et="(".concat(be.length,")"),Bt&&(Et="Array".concat(Et))):Et==="RegExp"?Et=m()(be):$t()(be)&&(Et=this.formatElName(be)),'<div class="'.concat(Fe("preview"),'" data-id="').concat(tt,'">')+'<div class="'.concat(Fe("preview-container"),'">')+'<div class="'.concat(Fe("preview-icon-container"),'"><span class="').concat(Fe("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(Fe("preview-content-container"),'">')+'<span class="'.concat(Fe("descriptor"),'">').concat(A()(Et),"</span> ")+'<span class="'.concat(Fe("object-preview"),'">').concat(Bt?"":Be(be,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(Fe("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function(be){var ve=A()(be[0]),Fe=!1,tt="";be.shift();for(var Bt=0,Et=ve.length;Bt<Et;Bt++){var He=ve[Bt];if(He==="%"&&be.length!==0){Bt++;var At=be.shift();switch(ve[Bt]){case"i":case"d":tt+=lt()(At);break;case"f":tt+=me()(At);break;case"s":tt+=m()(At);break;case"O":at()(At)?tt+=this.formatPreview(At):tt+=m()(At);break;case"o":$t()(At)?tt+=this.formatEl(At):at()(At)?tt+=this.formatPreview(At):tt+=m()(At);break;case"c":if(ve.length<=Bt+1)break;Fe&&(tt+="</span>"),Fe=!0,tt+='<span style="'.concat(cn(At),'">');break;default:Bt--,be.unshift(At),tt+=He}}else tt+=He}return Fe&&(tt+="</span>"),be.unshift(tt),be}},{key:"formatJs",value:function(be){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c(ar()(be,"js",on)),"</pre>")}},{key:"formatFn",value:function(be){return'<pre style="display:inline">'.concat(this.formatJs(be.toString()),"</pre>")}},{key:"formatElName",value:function(be){var ve=be.id,Fe=be.className,tt=be.tagName.toLowerCase();if(ve!==""&&(tt+="#".concat(ve)),Zt()(Fe)){var Bt="";M()(Fe.split(/\s+/g),function(Et){Et.trim()!==""&&(Bt+=".".concat(Et))}),tt+=Bt}return tt}},{key:"formatEl",value:function(be){var ve=Kr()();return this.elements[ve]=be,this.console.c('<div class="dom-viewer" data-id="'.concat(ve,'"></div>'))}}]),Qt}(bt());function cn(tr){var Ar=(tr=ct()(tr)).split(";"),Qt={};M()(Ar,function(ve){if(x()(ve,":")){var Fe=a(ve.split(":"),2),tt=Fe[0],Bt=Fe[1];Qt[ne()(tt)]=ne()(Bt)}}),Qt.display="inline-block",Qt["max-width"]="100%",delete Qt.width,delete Qt.height;var be="";return M()(Qt,function(ve,Fe){be+="".concat(Fe,":").concat(ve,";")}),be}var Sn=r(1194),cr=r.n(Sn),zr=r(8847),$n=r.n(zr),zn=r(6329),Gn=r.n(zn),kn=r(9001),Hn=r.n(kn),ri=r(9702),tn=r.n(ri),qn=r(2439),en=r.n(qn),gr=r(8933),Nr=r.n(gr),Er=r(4407),jr=r.n(Er),ii=r(5852),Cn=r.n(ii);function Rn(tr){var Ar=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qt,be=(0,g.Z)(tr);if(Ar){var ve=(0,g.Z)(this).constructor;Qt=Reflect.construct(be,arguments,ve)}else Qt=be.apply(this,arguments);return(0,f.Z)(this,Qt)}}var vn,Qn=function(tr){(0,d.Z)(Qt,tr);var Ar=Rn(Qt);function Qt(be,ve){var Fe,tt,Bt=ve.compName,Et=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,He=Et===void 0?"light":Et;return(0,c.Z)(this,Qt),(Fe=Ar.call(this)).subComponents=[],Fe.compName=Bt,Fe.c=Ze(Bt),Fe.options={},Fe.container=be,Fe.$container=wr()(be),Fe.$container.addClass(["luna-".concat(Bt),Fe.c("platform-".concat((tt=Xe()(),tt==="os x"?"mac":tt)))]),Fe.on("optionChange",function(At,qt,Or){var Rr=Fe.c;At==="theme"&&(Fe.$container.rmClass(Rr("theme-".concat(Or))).addClass(Rr("theme-".concat(qt))),M()(Fe.subComponents,function(Wr){return Wr.setOption("theme",qt)}))}),Fe.setOption("theme",He),Fe}return(0,l.Z)(Qt,[{key:"destroy",value:function(){var be=this;this.destroySubComponents();var ve=this.$container,Fe=ve.attr("class");M()(Fe.split(/\s+/),function(tt){O()(tt,"luna-".concat(be.compName))&&ve.rmClass(tt)}),ve.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(be,ve){var Fe=this,tt=this.options,Bt={};typeof be=="string"?Bt[be]=ve:Bt=be,M()(Bt,function(Et,He){var At=tt[He];tt[He]=Et,Fe.emit("optionChange",He,Et,At)})}},{key:"getOption",value:function(be){return this.options[be]}},{key:"addSubComponent",value:function(be){be.setOption("theme",this.options.theme),this.subComponents.push(be)}},{key:"removeSubComponent",value:function(be){Cn()(this.subComponents,function(ve){return ve===be})}},{key:"destroySubComponents",value:function(){M()(this.subComponents,function(be){return be.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(be){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wt()(be,ve),Gn()(this.options,be)}},{key:"find",value:function(be){return this.$container.find(this.c(be))}}]),Qt}(bt()),xn=r(1571),Mn=r.n(xn);function Yn(tr){var Ar=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Qt,be=(0,g.Z)(tr);if(Ar){var ve=(0,g.Z)(this).constructor;Qt=Reflect.construct(be,arguments,ve)}else Qt=be.apply(this,arguments);return(0,f.Z)(this,Qt)}}s=r.hmd(s);var Ln=navigator.userAgent,Bn=Ln.indexOf("Android")>-1||Ln.indexOf("Adr")>-1,jn=0,hn=function(tr){(0,d.Z)(Qt,tr);var Ar=Yn(Qt);function Qt(be){var ve,Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,c.Z)(this,Qt),(ve=Ar.call(this,be,{compName:"console"},Fe)).spaceHeight=0,ve.topSpaceHeight=0,ve.bottomSpaceHeight=0,ve.lastScrollTop=0,ve.lastTimestamp=0,ve.speedToleranceFactor=100,ve.maxSpeedTolerance=2e3,ve.minSpeedTolerance=100,ve.logs=[],ve.displayLogs=[],ve.timer={},ve.counter={},ve.asyncList=[],ve.asyncTimer=null,ve.isAtBottom=!0,ve.groupStack=new(Hn()),ve.selectedLog=null,ve.onScroll=function(){var tt=ve.container,Bt=tt.scrollHeight,Et=tt.offsetHeight,He=tt.scrollTop;if(!(He<=0||Et+He>Bt)){var At=!1;(Bt===Et||He===Bt-Et)&&(At=!0),ve.isAtBottom=At;var qt=ve.lastScrollTop,Or=ve.lastTimestamp,Rr=$n()(),Wr=Rr-Or,an=He-qt,Sr=Math.abs(an/Wr)*ve.speedToleranceFactor;Wr>1e3&&(Sr=1e3),Sr>ve.maxSpeedTolerance&&(Sr=ve.maxSpeedTolerance),Sr<ve.minSpeedTolerance&&(Sr=ve.minSpeedTolerance),ve.lastScrollTop=He,ve.lastTimestamp=Rr;var Ir=0,Nt=0;qt<He?(Ir=ve.minSpeedTolerance,Nt=Sr):(Ir=Sr,Nt=ve.minSpeedTolerance),ve.topSpaceHeight<He-Ir&&ve.topSpaceHeight+ve.el.offsetHeight>He+Et+Nt||ve.renderViewport({topTolerance:2*Ir,bottomTolerance:2*Nt})}},ve.initTpl(),ve.initOptions(Fe,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),ve.$el=ve.find(".logs"),ve.el=ve.$el.get(0),ve.$fakeEl=ve.find(".fake-logs"),ve.fakeEl=ve.$fakeEl.get(0),ve.$space=ve.find(".logs-space"),ve.space=ve.$space.get(0),Bn&&(ve.speedToleranceFactor=800,ve.maxSpeedTolerance=3e3,ve.minSpeedTolerance=800),ve.resizeSensor=new(Ge())(be),ve.renderViewport=en()(function(tt){ve._renderViewport(tt)},16),ve.global={copy:function(tt){Zt()(tt)||(tt=JSON.stringify(tt,null,2)),Kt()(tt)},$:function(tt){return document.querySelector(tt)},$$:function(tt){return Lr()(document.querySelectorAll(tt))},$x:function(tt){return Nr()(tt)},clear:function(){ve.clear()},dir:function(tt){ve.dir(tt)},table:function(tt,Bt){ve.table(tt,Bt)},keys:er()},ve.bindEvent(),ve}return(0,l.Z)(Qt,[{key:"setGlobal",value:function(be,ve){this.global[be]=ve}},{key:"destroy",value:function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(0,h.Z)((0,g.Z)(Qt.prototype),"destroy",this).call(this)}},{key:"count",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",ve=this.counter;vr()(ve[be])?ve[be]=1:ve[be]++,this.info("".concat(be,": ").concat(ve[be]))}},{key:"countReset",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.counter[be]=0}},{key:"assert",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||ve.shift()||(ve.length===0&&ve.unshift("console.assert"),ve.unshift("Assertion failed: "),this.insert("error",ve))}},{key:"log",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("log",ve)}},{key:"debug",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("debug",ve)}},{key:"dir",value:function(be){vr()(be)||this.insert("dir",[be])}},{key:"table",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("table",ve)}},{key:"time",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";if(this.timer[be])return this.insert("warn",["Timer '".concat(be,"' already exists")]);this.timer[be]=cr()()}},{key:"timeLog",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",ve=this.timer[be];if(!ve)return this.insert("warn",["Timer '".concat(be,"' does not exist")]);this.info("".concat(be,": ").concat(cr()()-ve,"ms"))}},{key:"timeEnd",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.timeLog(be),delete this.timer[be]}},{key:"clear",value:function(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(Hn()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),be?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("info",ve)}},{key:"error",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("error",ve)}},{key:"warn",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];U()(ve)||this.insert("warn",ve)}},{key:"group",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];this.insert({type:"group",args:ve,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];this.insert({type:"groupCollapsed",args:ve,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function(be){this.insert({type:"input",args:[be],ignoreFilter:!0});try{this.output(this.evalJs(be))}catch(ve){this.insert({type:"error",ignoreFilter:!0,args:[ve]})}}},{key:"html",value:function(){for(var be=arguments.length,ve=new Array(be),Fe=0;Fe<be;Fe++)ve[Fe]=arguments[Fe];this.insert("html",ve)}},{key:"toggleGroup",value:function(be){be.targetGroup.collapsed?this.openGroup(be):this.collapseGroup(be)}},{key:"output",value:function(be){this.insert({type:"output",args:[be],ignoreFilter:!0})}},{key:"render",value:function(){var be=this.logs,ve=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var Fe=0,tt=be.length;Fe<tt;Fe++)this.attachLog(be[Fe]);ve&&(x()(this.displayLogs,ve)||this.selectLog(null))}},{key:"insert",value:function(be,ve){var Fe,tt=this.options,Bt=tt.showHeader,Et=tt.asyncRender;if(Bt&&(Fe={time:ni(),from:Xn()}),Et)return this.insertAsync(be,ve,Fe);this.insertSync(be,ve,Fe)}},{key:"insertAsync",value:function(be,ve,Fe){this.asyncList.push([be,ve,Fe]),this.handleAsyncList()}},{key:"insertSync",value:function(be,ve,Fe){var tt,Bt=this,Et=this.logs,He=this.groupStack,At=this.options,qt=At.maxNum,Or=At.accessGetter,Rr=At.unenumerable,Wr=At.lazyEvaluation;if((tt=Zt()(be)?{type:be,args:ve,header:Fe}:be).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(He.size>0&&(tt.group=He.peek()),Gn()(tt,{id:++jn,accessGetter:Or,unenumerable:Rr,lazyEvaluation:Wr}),tt.type==="group"||tt.type==="groupCollapsed"){var an={id:Kr()("group"),collapsed:!1,parent:He.peek(),indentLevel:He.size+1};tt.type==="groupCollapsed"&&(an.collapsed=!0),tt.targetGroup=an,He.push(an)}var Sr=new ai(this,tt);Sr.on("updateHeight",function(){Bt.isAtBottom=!1,Bt.renderViewport()});var Ir=this.lastLog;if(Ir&&!x()(["html","group","groupCollapsed"],Sr.type)&&Ir.type===Sr.type&&Sr.isSimple()&&Ir.text()===Sr.text()?(Ir.addCount(),Sr.header&&Ir.updateTime(Sr.header.time),Sr=Ir,this.detachLog(Ir)):(Et.push(Sr),this.lastLog=Sr),qt!==0&&Et.length>qt){var Nt=Et[0];this.detachLog(Nt),Et.shift()}this.attachLog(Sr),this.emit("insert",Sr)}},{key:"updateTopSpace",value:function(be){this.topSpaceHeight=be,this.el.style.top=be+"px"}},{key:"updateBottomSpace",value:function(be){this.bottomSpaceHeight=be}},{key:"updateSpace",value:function(be){this.spaceHeight!==be&&(this.spaceHeight=be,this.space.style.height=be+"px")}},{key:"detachLog",value:function(be){var ve=this.displayLogs,Fe=ve.indexOf(be);Fe>-1&&(ve.splice(Fe,1),this.renderViewport())}},{key:"attachLog",value:function(be){if(this.filterLog(be)&&!be.collapsed){var ve=this.displayLogs;if(ve.length===0)return ve.push(be),void this.renderViewport();var Fe=tn()(ve);if(be.id>Fe.id)return ve.push(be),void this.renderViewport();for(var tt,Bt=0,Et=ve.length-1,He=0;Bt<=Et;){if((tt=ve[He=Bt+Math.floor((Et-Bt)/2)]).id===be.id)return;tt.id<be.id?Bt=He+1:Et=He-1}tt.id<be.id?ve.splice(He+1,0,be):ve.splice(He,0,be),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var be=this,ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,Fe=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){be.asyncTimer=null;var tt,Bt,Et=!1,He=Fe.length;He<1e3?(Bt=200,tt=400):He<5e3?(Bt=500,tt=800):He<1e4?(Bt=800,tt=1e3):He<25e3?(Bt=1e3,tt=1200):He<5e4?(Bt=1500,tt=1500):(Bt=2e3,tt=2500),Bt>He&&(Bt=He,Et=!0);for(var At=0;At<Bt;At++){var qt=a(Fe.shift(),3),Or=qt[0],Rr=qt[1],Wr=qt[2];be.insertSync(Or,Rr,Wr)}Et||Mn()(function(){return be.handleAsyncList(tt)})},ve))}},{key:"injectGlobal",value:function(){M()(this.global,function(be,ve){window[ve]||(window[ve]=be)})}},{key:"clearGlobal",value:function(){M()(this.global,function(be,ve){window[ve]&&window[ve]===be&&delete window[ve]})}},{key:"evalJs",value:function(be){var ve;this.injectGlobal();try{ve=eval.call(window,"(".concat(be,")"))}catch{ve=eval.call(window,be)}return this.setGlobal("$_",ve),this.clearGlobal(),ve}},{key:"filterLog",value:function(be){var ve=this.options.level,Fe=this.options.filter;if(be.ignoreFilter)return!0;if(!x()(ve,be.level))return!1;if(Fe){if(br()(Fe))return Fe(be);if(Ee()(Fe))return Fe.test(ct()(be.text()));if(Zt()(Fe)&&(Fe=ne()(Fe)))return x()(ct()(be.text()),ct()(Fe))}return!0}},{key:"collapseGroup",value:function(be){be.targetGroup.collapsed=!0,be.updateIcon("caret-right"),this.updateGroup(be)}},{key:"openGroup",value:function(be){be.targetGroup.collapsed=!1,be.updateIcon("caret-down"),this.updateGroup(be)}},{key:"updateGroup",value:function(be){for(var ve=be.targetGroup,Fe=this.logs,tt=Fe.length,Bt=Fe.indexOf(be)+1;Bt<tt;){var Et=Fe[Bt];if(!Et.checkGroup()&&Et.group===ve)break;Et.collapsed?this.detachLog(Et):this.attachLog(Et),Bt++}}},{key:"selectLog",value:function(be){var ve;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),hr()(be)?this.emit("deselect"):(this.selectedLog=be,(ve=this.selectedLog)===null||ve===void 0||ve.select(),this.emit("select",be))}},{key:"bindEvent",value:function(){var be=this,ve=this.$el,Fe=this.c;this.resizeSensor.addListener(this.renderViewport);var tt=this;ve.on("click",Fe(".log-container"),function(){tt.selectLog(this.log)}),this.on("optionChange",function(Bt,Et){var He=be.logs;switch(Bt){case"maxNum":Et>0&&He.length>Et&&(be.logs=He.slice(He.length-Et),be.render());break;case"filter":be.render();break;case"level":be.options.level=Lr()(Et),be.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=be.topTolerance,Fe=ve===void 0?500:ve,tt=be.bottomTolerance,Bt=tt===void 0?500:tt,Et=this.el,He=this.container,At=this.space;if(!Pe()(He)){for(var qt=He.scrollTop,Or=He.offsetHeight,Rr=At.getBoundingClientRect().width,Wr=qt-Fe,an=qt+Or+Bt,Sr=this.displayLogs,Ir=0,Nt=0,un=0,pr=Sr.length,Nn=this.fakeEl,On=document.createDocumentFragment(),Mr=[],sr=0;sr<pr;sr++){var Tn=Sr[sr],Pr=Tn.width;Tn.height!==0&&Pr===Rr||(On.appendChild(Tn.container),Mr.push(Tn))}if(Mr.length>0){Nn.appendChild(On);for(var En=0,rn=Mr.length;En<rn;En++)Mr[En].updateSize();Nn.textContent=""}for(var Jn=document.createDocumentFragment(),_n=0;_n<pr;_n++){var Vn=Sr[_n],ei=Vn.container,Fn=Vn.height;un>an?Nt+=Fn:un+Fn>Wr?Jn.appendChild(ei):un<Wr&&(Ir+=Fn),un+=Fn}for(this.updateSpace(un),this.updateTopSpace(Ir),this.updateBottomSpace(Nt);Et.firstChild;)Et.lastChild&&Et.removeChild(Et.lastChild);Et.appendChild(Jn);var Zn=He.scrollHeight;this.isAtBottom&&qt<=Zn-Or&&(He.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(Dr()(vn||(vn=(0,n.Z)([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))}}]),Qt}(Qn),ni=function(){return jr()("HH:MM:ss ")};function Xn(){for(var tr=new Error,Ar="",Qt=tr.stack?tr.stack.split(`
`):"",be=0,ve=Qt.length;be<ve;be++)if((Ar=Qt[be]).indexOf("winConsole")>-1&&be<ve-1){Ar=Qt[be+1];break}return Ar}(function(tr,Ar){try{tr.exports=Ar,tr.exports.default=Ar}catch{}})(s,hn)},5564:function(s,e,r){r.d(e,{Z:function(){return Lr}});var n=r(168),o=r(5671),a=r(3144),c=r(7326),l=r(1752),h=r(9340),d=r(2963),f=r(1120),g=r(1512),v=r.n(g),S=r(1907),A=r.n(S),w=r(1443),m=r.n(w),b=r(2461),x=r.n(b),y=r(4331),O=r.n(y),k=r(5610),P=r.n(k),L=r(7483),M=r.n(L),B=(r(3990),r(6341)),j=r.n(B),F=r(3875),U=r.n(F),V=r(6954),Q=r.n(V);r(9585);function q(_r){var ir="luna-".concat(_r,"-");function Jt(gt){return x()(O()(gt).split(/\s+/),function(it){return j()(it,ir)?it:it.replace(/[\w-]+/,function(ct){return"".concat(ir).concat(ct)})}).join(" ")}return function(gt){if(/<[^>]*>/g.test(gt))try{var it=M().parse(gt);return G(it,function(ct){ct.attrs&&ct.attrs.class&&(ct.attrs.class=Jt(ct.attrs.class))}),M().stringify(it)}catch{return Jt(gt)}return Jt(gt)}}function G(_r,ir){for(var Jt=0,gt=_r.length;Jt<gt;Jt++){var it=_r[Jt];ir(it),it.content&&G(it.content,ir)}}var te="ontouchstart"in P(),Y="PointerEvent"in P(),J={start:"touchstart",move:"touchmove",end:"touchend"},K={start:"mousedown",move:"mousemove",end:"mouseup"},ne={start:"pointerdown",move:"pointermove",end:"pointerup"};function de(_r){return Y?ne[_r]:te?J[_r]:K[_r]}function Re(_r,ir){var Jt=_r==="x"?"clientX":"clientY";return ir[Jt]?ir[Jt]:ir.changedTouches?ir.changedTouches[0][Jt]:0}function Te(_r){return U()(_r.replace("px",""))}var Me=r(3783),Ie=r.n(Me),ce=r(6329),pe=r.n(ce),me=r(4193),we=r.n(me),Xe=r(5852),Qe=r.n(Xe),Pe=r(6930),Ze=r.n(Pe);function _e(_r){var ir=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Jt,gt=(0,f.Z)(_r);if(ir){var it=(0,f.Z)(this).constructor;Jt=Reflect.construct(gt,arguments,it)}else Jt=gt.apply(this,arguments);return(0,d.Z)(this,Jt)}}var qe,Be=function(_r){(0,h.Z)(Jt,_r);var ir=_e(Jt);function Jt(gt,it){var ct,De,er=it.compName,Cr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,wr=Cr===void 0?"light":Cr;return(0,o.Z)(this,Jt),(ct=ir.call(this)).subComponents=[],ct.compName=er,ct.c=q(er),ct.options={},ct.container=gt,ct.$container=v()(gt),ct.$container.addClass(["luna-".concat(er),ct.c("platform-".concat((De=Q()(),De==="os x"?"mac":De)))]),ct.on("optionChange",function(Xt,Vt,zt){var bt=ct.c;Xt==="theme"&&(ct.$container.rmClass(bt("theme-".concat(zt))).addClass(bt("theme-".concat(Vt))),Ie()(ct.subComponents,function(_t){return _t.setOption("theme",Vt)}))}),ct.setOption("theme",wr),ct}return(0,a.Z)(Jt,[{key:"destroy",value:function(){var gt=this;this.destroySubComponents();var it=this.$container,ct=it.attr("class");Ie()(ct.split(/\s+/),function(De){Ze()(De,"luna-".concat(gt.compName))&&it.rmClass(De)}),it.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(gt,it){var ct=this,De=this.options,er={};typeof gt=="string"?er[gt]=it:er=gt,Ie()(er,function(Cr,wr){var Xt=De[wr];De[wr]=Cr,ct.emit("optionChange",wr,Cr,Xt)})}},{key:"getOption",value:function(gt){return this.options[gt]}},{key:"addSubComponent",value:function(gt){gt.setOption("theme",this.options.theme),this.subComponents.push(gt)}},{key:"removeSubComponent",value:function(gt){Qe()(this.subComponents,function(it){return it===gt})}},{key:"destroySubComponents",value:function(){Ie()(this.subComponents,function(gt){return gt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(gt){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};we()(gt,it),pe()(this.options,gt)}},{key:"find",value:function(gt){return this.$container.find(this.c(gt))}}]),Jt}(m()),mt=r(8901),ht=r.n(mt),Dt=r(8613),Se=r.n(Dt),Ye=r(3367),Le=r.n(Ye),ze=r(9833),Ue=r.n(ze),Ge=r(1286),ut=r.n(Ge),at=r(242),Ut=r.n(at),Zt=r(2439),Pt=r.n(Zt),Ot=r(6156),vt=r.n(Ot),Ve=r(4777),pt=r.n(Ve),wt=r(1754),Ct=r.n(wt),$t=r(6768),yt=r.n($t),lt=r(3063),dt=r.n(lt),xt=r(9882),Wt=r.n(xt),hr=r(9853),Yt=r.n(hr),vr=r(6435),fr=r.n(vr);function br(_r){var ir=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Jt,gt=(0,f.Z)(_r);if(ir){var it=(0,f.Z)(this).constructor;Jt=Reflect.construct(gt,arguments,it)}else Jt=gt.apply(this,arguments);return(0,d.Z)(this,Jt)}}s=r.hmd(s);var $r=v()(document),Lr=function(_r){(0,h.Z)(Jt,_r);var ir=br(Jt);function Jt(gt,it){var ct;(0,o.Z)(this,Jt),(ct=ir.call(this,gt,{compName:"data-grid"},it)).resizeIdx=0,ct.resizeStartX=0,ct.resizeStartLeft=0,ct.resizeDeltaX=0,ct.nodes=[],ct.colWidthsInitialized=!1,ct.colMap={},ct.selectedNode=null,ct.isAscending=!0,ct.colWidths=[],ct.onResizeColMove=function(Xt){var Vt=(0,c.Z)(ct),zt=Vt.resizeIdx,bt=Vt.$resizers,_t=Vt.colWidths,Lt=Vt.$colgroup,Gt=Re("x",Xt=Xt.origEvent)-ct.resizeStartX,lr=_t[zt],rr=_t[zt+1],Kt=fr()(24-lr,0),ot=Yt()(rr-24,0);Gt=Wt()(Gt,Kt,ot),Lt.each(function(){var nr=v()(this).find("col");nr.eq(zt).css("width",lr+Gt+"px"),nr.eq(zt+1).css("width",rr-Gt+"px")}),ct.resizeDeltaX=Gt;var ur=ct.resizeStartLeft+Gt;bt.eq(zt).css("left","".concat(ur,"px"))},ct.onResizeColEnd=function(Xt){ct.onResizeColMove(Xt);var Vt=(0,c.Z)(ct),zt=Vt.c,bt=Vt.colWidths,_t=Vt.resizeIdx,Lt=Vt.resizeDeltaX,Gt=ct.options.columns,lr=Gt[_t],rr=Gt[_t+1],Kt=bt[_t]+Lt,ot=Kt+(bt[_t+1]-Lt),ur=lr.weight+rr.weight,nr=ur*(Kt/ot),kr=ur-nr;lr.weight=nr,rr.weight=kr,ct.applyColWeights(),v()(document.body).rmClass(zt("resizing")),$r.off(de("move"),ct.onResizeColMove),$r.off(de("end"),ct.onResizeColEnd)},ct.$container.attr("tabindex","0"),ct.resizeSensor=new(Ut())(gt),ct.onResize=Pt()(function(){ct.updateHeight(),ct.updateWeights()},16),it.height&&(it.maxHeight=it.height,it.minHeight=it.height),ct.initOptions(it,{minHeight:41,maxHeight:1/0,filter:""});var De=ct.options,er=De.columns,Cr=De.minHeight,wr=De.maxHeight;return Ie()(er,function(Xt){we()(Xt,{sortable:!1}),ct.colMap[Xt.id]=Xt}),wr<Cr&&ct.setOption("maxHeight",Cr),ct.initTpl(),ct.$headerRow=ct.find(".header").find("tr"),ct.$fillerRow=ct.find(".filler-row"),ct.fillerRow=ct.$fillerRow.get(0),ct.$tableBody=ct.find(".data").find("tbody"),ct.tableBody=ct.$tableBody.get(0),ct.$colgroup=ct.$container.find("colgroup"),ct.$dataContainer=ct.find(".data-container"),ct.renderHeader(),ct.renderResizers(),ct.updateWeights(),ct.updateHeight(),ct.bindEvent(),ct}return(0,a.Z)(Jt,[{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(Jt.prototype),"destroy",this).call(this),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(gt){var it=this.nodes,ct=it.indexOf(gt);ct>-1&&(gt.detach(),it.splice(ct,1),gt===this.selectedNode&&this.selectNode(it[ct]||it[ct-1]||null),this.updateHeight())}},{key:"append",value:function(gt,it){var ct=new fn(this,gt,it);return this.nodes.push(ct),this.sortId?this.sortNodes(this.sortId,this.isAscending):this.filterNode(ct)&&(this.tableBody.insertBefore(ct.container,this.fillerRow),this.updateHeight()),ct}},{key:"clear",value:function(){Ie()(this.nodes,function(gt){return gt.detach()}),this.nodes=[],this.selectNode(null),this.updateHeight()}},{key:"updateHeight",value:function(){var gt=this.$fillerRow,it=this.c,ct=this.$container,De=this.options,er=De.maxHeight,Cr=De.minHeight;this.$dataContainer.css({height:"auto"});var wr=this.$headerRow.offset().height+Te(ct.css("border-top-width"))+Te(ct.css("border-bottom-width"));(Cr-=wr)<0&&(Cr=0),er-=wr;var Xt=this.$dataContainer.find(it(".node")),Vt=Xt.length,zt=0;Vt>0&&(zt=Xt.offset().height*Vt),zt>Cr?gt.hide():gt.show(),zt<Cr?zt=Cr:zt>=er&&(zt=er),this.$dataContainer.css({height:zt})}},{key:"selectNode",value:function(gt){var it;(vt()(gt)||gt!=null&&gt.selectable)&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null),vt()(gt)?this.emit("deselect"):(this.selectedNode=gt,(it=this.selectedNode)===null||it===void 0||it.select(),this.emit("select",gt)))}},{key:"onResizeColStart",value:function(gt){var it=this.c,ct=this.resizeIdx,De=this.$resizers;gt.stopPropagation(),gt.preventDefault(),gt=gt.origEvent,this.resizeStartX=Re("x",gt),this.resizeStartLeft=Te(De.eq(ct).css("left")),v()(document.body).addClass(it("resizing")),$r.on(de("move"),this.onResizeColMove),$r.on(de("end"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var gt=this,it=this.c,ct=this.$headerRow,De=this.$tableBody,er=this.$resizers;this.resizeSensor.addListener(this.onResize);var Cr=this;De.on("click",it(".node"),function(){Cr.selectNode(this.dataGridNode)}),ct.on("click",it(".sortable"),function(wr){wr.stopPropagation();var Xt=v()(this),Vt=Xt.data("id"),zt=Xt.data("order")!=="descending";Xt.data("order",zt?"descending":"ascending"),Cr.sortNodes(Vt,zt),ct.find("th").each(function(){var bt=v()(this);bt.data("id")!==Vt&&bt.rmAttr("data-order")})}),er.on(de("start"),function(wr){var Xt=v()(this);Cr.resizeIdx=U()(Xt.data("idx")),Cr.onResizeColStart(wr)}),this.on("optionChange",function(wr){switch(wr){case"minHeight":case"maxHeight":gt.updateHeight();break;case"filter":gt.renderData()}})}},{key:"sortNodes",value:function(gt,it){var ct=this.colMap[gt].comparator||pn;this.nodes.sort(function(De,er){var Cr=De.data[gt],wr=er.data[gt];return Ue()(Cr)&&(Cr=Cr.innerText),Ue()(wr)&&(wr=wr.innerText),it?ct(Cr,wr):ct(wr,Cr)}),this.renderData(),this.sortId=gt,this.isAscending=it}},{key:"updateWeights",value:function(){var gt=this.container,it=this.$headerRow,ct=this.options.columns,De=gt.offsetWidth;if(!this.colWidthsInitialized&&De){for(var er=0,Cr=ct.length;er<Cr;er++){var wr=ct[er];if(!wr.weight){var Xt=it.find("th").get(er).offsetWidth;wr.weight=100*Xt/De}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var gt=this.container,it=this.$colgroup,ct=this.options.columns,De=gt.offsetWidth;if(!(De<=0)){for(var er=0,Cr=ct.length,wr=0;wr<Cr;wr++)er+=ct[wr].weight;var Xt="",Vt=0,zt=0;this.colWidths=[];for(var bt=0;bt<Cr;bt++){var _t=(Vt+=ct[bt].weight)*De/er|0,Lt=Math.max(_t-zt,14);zt=_t,Xt+='<col style="width:'.concat(Lt,'px"></col>'),this.colWidths[bt]=Lt}it.html(Xt),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var gt=this.colWidths,it=[],ct=gt.length-1,De=0;De<ct;De++)it[De]=(it[De-1]||0)+gt[De];for(var er=0;er<ct;er++)this.$resizers.eq(er).css("left",it[er]+"px")}},{key:"renderData",value:function(){var gt=this,it=this.tableBody,ct=this.nodes,De=this.fillerRow;Ie()(ct,function(er){return er.detach()}),Ie()(ct,function(er){gt.filterNode(er)&&it.insertBefore(er.container,De)}),this.selectedNode&&!this.filterNode(this.selectedNode)&&this.selectNode(null),this.updateHeight()}},{key:"filterNode",value:function(gt){var it=this.options.filter;if(it){if(pt()(it))return it(gt);if(Ct()(it))return it.test(gt.text());if(yt()(it)&&(it=O()(it)))return j()(dt()(gt.text()),dt()(it))}return!0}},{key:"renderHeader",value:function(){var gt=this.c,it="",ct="";Ie()(this.options.columns,function(De){var er=ht()(De.title);De.sortable?it+=gt('<th class="sortable" data-id="'.concat(De.id,'">').concat(er,"</th>")):it+="<th>".concat(er,"</th>"),ct+="<td></td>"}),this.$headerRow.html(it),this.$fillerRow.html(ct)}},{key:"renderResizers",value:function(){for(var gt="",it=this.options.columns.length-1,ct=0;ct<it;ct++)gt+=this.c('<div class="resizer" data-idx="'.concat(ct,'"></div>'));this.$container.append(gt),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(A()(qe||(qe=(0,n.Z)([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))}}]),Jt}(Be),fn=function(){function _r(ir,Jt){var gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{selectable:!1};(0,o.Z)(this,_r),this.container=Se()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=v()(this.container),this.$container.addClass(ir.c("node")),this.dataGrid=ir,this.data=Jt,gt.selectable&&(this.selectable=gt.selectable),this.render()}return(0,a.Z)(_r,[{key:"text",value:function(){return this.$container.text()}},{key:"detach",value:function(){this.$container.remove()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var ir=this.data,Jt=this.$container,gt=this.container,it=this.dataGrid.getOption("columns");Jt.html(""),Ie()(it,function(ct){var De=Se()("td"),er=ir[ct.id];ut()(er)||(Ue()(er)?De.appendChild(er):De.innerText=Le()(er)),gt.appendChild(De)})}}]),_r}();function pn(_r,ir){if(_r=Le()(_r),ir=Le()(ir),Ze()(_r,"_")&&!Ze()(ir,"_"))return 1;if(Ze()(ir,"_")&&!Ze()(_r,"_"))return-1;for(var Jt,gt,it,ct,De=/^\d+|^\D+/;;){if(!_r)return ir?-1:0;if(!ir)return 1;if(Jt=_r.match(De)[0],gt=ir.match(De)[0],it=!isNaN(Jt),ct=!isNaN(gt),it&&!ct)return-1;if(ct&&!it)return 1;if(it&&ct){var er=Jt-gt;if(er)return er;if(Jt.length!==gt.length)return+Jt||+gt?gt.length-Jt.length:Jt.length-gt.length}else if(Jt!==gt)return Jt<gt?-1:1;_r=_r.substring(Jt.length),ir=ir.substring(gt.length)}}(function(_r,ir){try{_r.exports=ir,_r.exports.default=ir}catch{}})(s,Lr)},8209:function(s,e,r){r.d(e,{Z:function(){return at}});var n=r(168),o=r(4942),a=r(5671),c=r(3144),l=r(7326),h=r(9340),d=r(2963),f=r(1120),g=r(1443),v=r.n(g),S=r(1512),A=r.n(S),w=r(2461),m=r.n(w),b=r(4331),x=r.n(b),y=r(5610),O=r.n(y),k=r(7483),P=r.n(k),L=(r(3990),r(6341)),M=r.n(L),B=(r(3875),r(6954)),j=r.n(B);r(9585);function F(Pt){var Ot="luna-".concat(Pt,"-");function vt(Ve){return m()(x()(Ve).split(/\s+/),function(pt){return M()(pt,Ot)?pt:pt.replace(/[\w-]+/,function(wt){return"".concat(Ot).concat(wt)})}).join(" ")}return function(Ve){if(/<[^>]*>/g.test(Ve))try{var pt=P().parse(Ve);return U(pt,function(wt){wt.attrs&&wt.attrs.class&&(wt.attrs.class=vt(wt.attrs.class))}),P().stringify(pt)}catch{return vt(Ve)}return vt(Ve)}}function U(Pt,Ot){for(var vt=0,Ve=Pt.length;vt<Ve;vt++){var pt=Pt[vt];Ot(pt),pt.content&&U(pt.content,Ot)}}var V="ontouchstart"in O();function Q(){var Pt=j()();return Pt==="os x"?"mac":Pt}var q=r(3783),G=r.n(q),te=r(6329),Y=r.n(te),J=r(4193),K=r.n(J),ne=r(5852),de=r.n(ne);function Re(Pt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ve=(0,f.Z)(Pt);if(Ot){var pt=(0,f.Z)(this).constructor;vt=Reflect.construct(Ve,arguments,pt)}else vt=Ve.apply(this,arguments);return(0,d.Z)(this,vt)}}var Te,Me=function(Pt){(0,h.Z)(vt,Pt);var Ot=Re(vt);function vt(Ve,pt){var wt,Ct=pt.compName,$t=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,yt=$t===void 0?"light":$t;return(0,a.Z)(this,vt),(wt=Ot.call(this)).subComponents=[],wt.compName=Ct,wt.c=F(Ct),wt.options={},wt.container=Ve,wt.$container=A()(Ve),wt.$container.addClass(["luna-".concat(Ct),wt.c("platform-".concat(Q()))]),wt.on("optionChange",function(lt,dt,xt){var Wt=wt.c;lt==="theme"&&(wt.$container.rmClass(Wt("theme-".concat(xt))).addClass(Wt("theme-".concat(dt))),G()(wt.subComponents,function(hr){return hr.setOption("theme",dt)}))}),wt.setOption("theme",yt),wt}return(0,c.Z)(vt,[{key:"destroy",value:function(){this.destroySubComponents();var Ve=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Ve("platform-".concat(Q()))).rmClass(Ve("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Ve,pt){var wt=this,Ct=this.options,$t={};typeof Ve=="string"?$t[Ve]=pt:$t=Ve,G()($t,function(yt,lt){var dt=Ct[lt];Ct[lt]=yt,wt.emit("optionChange",lt,yt,dt)})}},{key:"getOption",value:function(Ve){return this.options[Ve]}},{key:"addSubComponent",value:function(Ve){Ve.setOption("theme",this.options.theme),this.subComponents.push(Ve)}},{key:"removeSubComponent",value:function(Ve){de()(this.subComponents,function(pt){return pt===Ve})}},{key:"destroySubComponents",value:function(){G()(this.subComponents,function(Ve){return Ve.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Ve){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K()(Ve,pt),Y()(this.options,Ve)}},{key:"find",value:function(Ve){return this.$container.find(this.c(Ve))}}]),vt}(v()),Ie=r(8613),ce=r.n(Ie),pe=r(5972),me=r.n(pe),we=r(1907),Xe=r.n(we),Qe=r(1352),Pe=r.n(Qe),Ze=r(2289),_e=r.n(Ze),qe=r(3651),Be=r.n(qe),mt=r(7756),ht=r.n(mt),Dt=r(8901),Se=r.n(Dt),Ye=r(1672),Le=r.n(Ye);function ze(Pt,Ot){var vt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(Pt);Ot&&(Ve=Ve.filter(function(pt){return Object.getOwnPropertyDescriptor(Pt,pt).enumerable})),vt.push.apply(vt,Ve)}return vt}function Ue(Pt){for(var Ot=1;Ot<arguments.length;Ot++){var vt=arguments[Ot]!=null?arguments[Ot]:{};Ot%2?ze(Object(vt),!0).forEach(function(Ve){(0,o.Z)(Pt,Ve,vt[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(vt)):ze(Object(vt)).forEach(function(Ve){Object.defineProperty(Pt,Ve,Object.getOwnPropertyDescriptor(vt,Ve))})}return Pt}function Ge(Pt){var Ot=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ve=(0,f.Z)(Pt);if(Ot){var pt=(0,f.Z)(this).constructor;vt=Reflect.construct(Ve,arguments,pt)}else vt=Ve.apply(this,arguments);return(0,d.Z)(this,vt)}}s=r.hmd(s);var ut={comment:"",string:"",number:"",keyword:"",operator:""},at=function(Pt){(0,h.Z)(vt,Pt);var Ot=Ge(vt);function vt(Ve){var pt,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,a.Z)(this,vt),(pt=Ot.call(this,Ve,{compName:"dom-viewer"},wt)).isExpanded=!1,pt.childNodes=[],pt.childNodeDomViewers=[],pt.toggle=function(){pt.isExpanded?pt.collapse():pt.expand()},pt.initOptions(wt,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:Ve,rootDomViewer:(0,l.Z)(pt),ignore:function(){return!1}}),pt.initTpl(),pt.bindEvent(),pt.options.isEndTag||pt.initObserver(),pt}return(0,c.Z)(vt,[{key:"select",value:function(Ve){var pt=this.c,wt=this.options;if(!Ve||Ve&&wt.node===Ve)return this.$tag.hasClass(pt("selected"))?void 0:(A()(this.options.rootContainer).find(pt(".selected")).rmClass(pt("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(pt("selected")),void wt.rootDomViewer.emit("select",wt.node));if(Ve.nodeType===Node.ELEMENT_NODE)for(var Ct=Ve,$t=Ve.parentElement;$t;){if($t===wt.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf(Ct)].select(Ve);break}Ct=$t,$t=$t.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"expand",value:function(){this.isExpandable()&&!this.isExpanded&&(this.isExpanded=!0,this.renderExpandTag(),this.renderChildNodes())}},{key:"collapse",value:function(){this.isExpandable()&&this.isExpanded&&(this.isExpanded=!1,this.renderCollapseTag())}},{key:"destroy",value:function(){var Ve=this.c;this.$tag.hasClass(Ve("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(Ve("platform-".concat(Q()))).rmClass(Ve("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var Ve=this.$tag,pt=this.c,wt=this.options.node;Ve.html(this.renderHtmlTag(Ue(Ue({},Ut(wt)),{},{hasTail:!1,hasToggleButton:!0}))),Ve.addClass(pt("expanded")),this.$children.rmClass(pt("hidden"))}},{key:"renderCollapseTag",value:function(){var Ve=this.$tag,pt=this.c,wt=this.options.node;this.$children.addClass(pt("hidden")),this.$tag.html(this.renderHtmlTag(Ue(Ue({},Ut(wt)),{},{hasTail:!0,hasToggleButton:!0}))),Ve.rmClass(pt("expanded"))}},{key:"initObserver",value:function(){var Ve=this;this.observer=new(_e())(function(pt){G()(pt,function(wt){Ve.handleMutation(wt)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(Ve){var pt=this.$tag,wt=this.c,Ct=this.options,$t=Ct.node,yt=Ct.ignore;if(M()(["attributes","childList"],Ve.type)){if(Ve.type==="childList"){if(Le()(Ve.addedNodes,yt)&&Le()(Ve.removedNodes,yt))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(wt("hidden")),pt.html(this.renderHtmlTag(Ue(Ue({},Ut($t)),{},{hasTail:!1}))))}else Ve.type==="characterData"&&($t.nodeType===Node.TEXT_NODE?pt.html(this.renderTextNode($t)):$t.nodeType===Node.COMMENT_NODE&&pt.html(this.renderHtmlComment($t.nodeValue)))}},{key:"bindEvent",value:function(){var Ve=this,pt=this.c,wt=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&wt.on("click",pt(".toggle"),function(Ct){Ct.stopPropagation(),Ve.toggle()}),V?wt.on("click",function(){return Ve.select()}):wt.on("mousedown",function(){return Ve.select()})}},{key:"isExpandable",value:function(){return this.options.node.nodeType===Node.ELEMENT_NODE&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var Ve=this.options,pt=Ve.rootContainer,wt=Ve.ignore,Ct=this.options.node,$t=Pe()(Ct.childNodes);return $t=me()($t,function(yt){if(yt.nodeType===Node.TEXT_NODE||yt.nodeType===Node.COMMENT_NODE){var lt=yt.nodeValue;if(x()(lt)==="")return!1}return yt!==pt&&!wt(yt)})}},{key:"initTpl",value:function(){var Ve=this.container,pt=this.c,wt=this.options,Ct=wt.node,$t=wt.isEndTag,yt=A()(ce()("li"));if(yt.addClass(pt("tree-item")),this.$tag=yt,$t)yt.html(pt('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat(Ct.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(Ct.nodeType===Node.ELEMENT_NODE){var lt=this.isExpandable(),dt=Ue(Ue({},Ut(Ct)),{},{hasTail:lt,hasToggleButton:lt});yt.html(this.renderHtmlTag(dt))}else if(Ct.nodeType===Node.TEXT_NODE)yt.html(this.renderTextNode(Ct));else{if(Ct.nodeType!==Node.COMMENT_NODE)return;var xt=Ct.nodeValue;if(xt.trim()==="")return;yt.html(this.renderHtmlComment(xt))}if(Ve.appendChild(yt.get(0)),Ct.nodeType===Ct.ELEMENT_NODE){var Wt=A()(ce()("ul"));Wt.addClass([pt("children"),pt("hidden")]),Ve.appendChild(Wt.get(0)),this.$children=Wt}}},{key:"renderChildNodes",value:function(){var Ve=this,pt=this.options.node,wt=this.options,Ct=wt.rootContainer,$t=wt.ignore,yt=wt.rootDomViewer,lt=this.$children.get(0),dt=this.childNodes,xt=this.childNodeDomViewers;G()(xt,function(Yt){Yt.detach(),Ve.removeSubComponent(Yt)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var Wt=this.getChildNodes();this.childNodes=Wt;var hr=[];this.childNodeDomViewers=hr,G()(Wt,function(Yt,vr){var fr,br=dt.indexOf(Yt);(fr=br>-1?xt[br]:new vt(lt,{node:Yt,parent:Ve,rootContainer:Ct,rootDomViewer:yt,ignore:$t})).attach(),hr[vr]=fr,Ve.addSubComponent(fr)}),G()(xt,function(Yt){Yt.isAttached()||Yt.destroy()}),pt&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new vt(lt,{node:pt,parent:this,isEndTag:!0,rootContainer:Ct,rootDomViewer:yt,ignore:$t}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(Ve){var pt=m()(Ve.attributes,function($t){var yt=$t.name,lt=$t.value,dt=$t.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat(Se()(yt),"</span>").concat(lt?'="<span class="attribute-value'.concat(dt?" attribute-underline":"",'">').concat(Se()(lt),'</span>"'):"","</span>")}).join(""),wt="";Ve.hasTail?wt="".concat(Ve.hasTail?"…":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(Ve.tagName,"</span>&gt;</span>"):this.isExpandable()||(wt='<span class="html-tag">&lt;<span class="tag-name">/'.concat(Ve.tagName,"</span>&gt;</span>"));var Ct="";return Ve.hasToggleButton&&(Ct='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c(Xe()(Te||(Te=(0,n.Z)([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),Ct,Ve.tagName,pt,wt))}},{key:"renderTextNode",value:function(Ve){var pt=this.c,wt=Ve.nodeValue,Ct=Ve.parentElement,$t='<span class="text-node">',yt='</span><span class="selection"></span>';if(Ct&&wt.length<1e4){if(Ct.tagName==="STYLE")return pt("".concat($t).concat(Be()(wt,"css",ut)).concat(yt));if(Ct.tagName==="SCRIPT")return pt("".concat($t).concat(Be()(wt,"js",ut)).concat(yt))}return pt('"'.concat($t).concat(Se()(ht()(wt,1e4,{separator:" ",ellipsis:"…"}))).concat(yt,'"'))}},{key:"renderHtmlComment",value:function(Ve){return this.c('<span class="html-comment">&lt;!-- '.concat(Se()(Ve),' --&gt;</span><span class="selection"></span>'))}}]),vt}(Me);function Ut(Pt){var Ot={tagName:"",attributes:[]};Ot.tagName=Pt.tagName.toLocaleLowerCase();var vt=[];return G()(Pt.attributes,function(Ve){var pt=Ve.name,wt=Ve.value;vt.push({name:pt,value:wt,isLink:Zt(Pt,pt)})}),Ot.attributes=vt,Ot}function Zt(Pt,Ot){var vt=Pt.tagName;return(vt==="SCRIPT"||vt==="IMAGE"||vt==="VIDEO"||vt==="AUDIO")&&Ot==="src"||vt==="LINK"&&Ot==="href"}(function(Pt,Ot){try{Pt.exports=Ot,Pt.exports.default=Ot}catch{}})(s,at)},129:function(s,e,r){r.d(e,{Z:function(){return Ze}});var n=r(907),o=r(181);function a(Dt){return function(Se){if(Array.isArray(Se))return(0,n.Z)(Se)}(Dt)||function(Se){if(typeof Symbol<"u"&&Se[Symbol.iterator]!=null||Se["@@iterator"]!=null)return Array.from(Se)}(Dt)||(0,o.Z)(Dt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var c=r(168),l=r(5671),h=r(3144),d=r(7326),f=r(1752),g=r(9340),v=r(2963),S=r(1120),A=r(1443),w=r.n(A),m=r(1512),b=r.n(m),x=r(2461),y=r.n(x),O=r(4331),k=r.n(O),P=r(5610),L=r.n(P),M=r(7483),B=r.n(M),j=(r(3990),r(6341)),F=r.n(j),U=(r(3875),r(6954)),V=r.n(U);r(9585);function Q(Dt){var Se="luna-".concat(Dt,"-");function Ye(Le){return y()(k()(Le).split(/\s+/),function(ze){return F()(ze,Se)?ze:ze.replace(/[\w-]+/,function(Ue){return"".concat(Se).concat(Ue)})}).join(" ")}return function(Le){if(/<[^>]*>/g.test(Le))try{var ze=B().parse(Le);return q(ze,function(Ue){Ue.attrs&&Ue.attrs.class&&(Ue.attrs.class=Ye(Ue.attrs.class))}),B().stringify(ze)}catch{return Ye(Le)}return Ye(Le)}}function q(Dt,Se){for(var Ye=0,Le=Dt.length;Ye<Le;Ye++){var ze=Dt[Ye];Se(ze),ze.content&&q(ze.content,Se)}}L();var G=r(3783),te=r.n(G),Y=r(6329),J=r.n(Y),K=r(4193),ne=r.n(K),de=r(5852),Re=r.n(de),Te=r(6930),Me=r.n(Te);function Ie(Dt){var Se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ye,Le=(0,S.Z)(Dt);if(Se){var ze=(0,S.Z)(this).constructor;Ye=Reflect.construct(Le,arguments,ze)}else Ye=Le.apply(this,arguments);return(0,v.Z)(this,Ye)}}var ce,pe=function(Dt){(0,g.Z)(Ye,Dt);var Se=Ie(Ye);function Ye(Le,ze){var Ue,Ge,ut=ze.compName,at=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ut=at===void 0?"light":at;return(0,l.Z)(this,Ye),(Ue=Se.call(this)).subComponents=[],Ue.compName=ut,Ue.c=Q(ut),Ue.options={},Ue.container=Le,Ue.$container=b()(Le),Ue.$container.addClass(["luna-".concat(ut),Ue.c("platform-".concat((Ge=V()(),Ge==="os x"?"mac":Ge)))]),Ue.on("optionChange",function(Zt,Pt,Ot){var vt=Ue.c;Zt==="theme"&&(Ue.$container.rmClass(vt("theme-".concat(Ot))).addClass(vt("theme-".concat(Pt))),te()(Ue.subComponents,function(Ve){return Ve.setOption("theme",Pt)}))}),Ue.setOption("theme",Ut),Ue}return(0,h.Z)(Ye,[{key:"destroy",value:function(){var Le=this;this.destroySubComponents();var ze=this.$container,Ue=ze.attr("class");te()(Ue.split(/\s+/),function(Ge){Me()(Ge,"luna-".concat(Le.compName))&&ze.rmClass(Ge)}),ze.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Le,ze){var Ue=this,Ge=this.options,ut={};typeof Le=="string"?ut[Le]=ze:ut=Le,te()(ut,function(at,Ut){var Zt=Ge[Ut];Ge[Ut]=at,Ue.emit("optionChange",Ut,at,Zt)})}},{key:"getOption",value:function(Le){return this.options[Le]}},{key:"addSubComponent",value:function(Le){Le.setOption("theme",this.options.theme),this.subComponents.push(Le)}},{key:"removeSubComponent",value:function(Le){Re()(this.subComponents,function(ze){return ze===Le})}},{key:"destroySubComponents",value:function(){te()(this.subComponents,function(Le){return Le.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Le){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ne()(Le,ze),J()(this.options,Le)}},{key:"find",value:function(Le){return this.$container.find(this.c(Le))}}]),Ye}(w()),me=r(1907),we=r.n(me),Xe=r(8613),Qe=r.n(Xe);function Pe(Dt){var Se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ye,Le=(0,S.Z)(Dt);if(Se){var ze=(0,S.Z)(this).constructor;Ye=Reflect.construct(Le,arguments,ze)}else Ye=Le.apply(this,arguments);return(0,v.Z)(this,Ye)}}s=r.hmd(s);var Ze=function(Dt){(0,g.Z)(Ye,Dt);var Se=Pe(Ye);function Ye(Le){var ze,Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,l.Z)(this,Ye),(ze=Se.call(this,Le,{compName:"modal"},Ue)).render=function(){var Ge=(0,d.Z)(ze),ut=Ge.options,at=Ge.c,Ut=Ge.$body;ut.title?(Ut.rmClass(at("no-title")),ze.$title.text(ut.title)):Ut.addClass(at("no-title")),ut.footer?(Ut.rmClass(at("no-footer")),ze.$footer.html("").append(ut.footer)):Ut.addClass(at("no-footer")),ut.showClose?ze.$close.show():ze.$close.hide(),ze.$body.css("width",ut.width+"px"),ze.$content.html("").append(ut.content)},ze.hide(),ze.initOptions(Ue,{title:"",content:"",footer:"",showClose:!0,width:ht()}),ze.initTpl(),ze.$title=ze.find(".title"),ze.$content=ze.find(".content"),ze.$body=ze.find(".body"),ze.$footer=ze.find(".footer"),ze.$close=ze.find(".icon-close"),ze.bindEvent(),ze}return(0,h.Z)(Ye,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){(0,f.Z)((0,S.Z)(Ye.prototype),"destroy",this).call(this),this.$container.rmClass(this.c("hidden"))}},{key:"bindEvent",value:function(){var Le=this;this.$body.on("click",this.c(".icon-close"),function(){return Le.hide()}),this.on("optionChange",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c(we()(ce||(ce=(0,c.Z)([`
      <div class="body">
        <span class="icon icon-close"></span>
        <div class="title"></div>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
      `])))))}}],[{key:"alert",value:function(Le){var ze=Be(),Ue=ze.c;ze.setOption({title:"",content:Le,width:ht(),footer:mt({OK:{type:"primary",onclick:function(){ze.hide()}}},Ue)}),ze.show()}},{key:"confirm",value:function(Le){return new Promise(function(ze){var Ue=Be(),Ge=Ue.c;Ue.setOption({title:"",content:Le,width:ht(),footer:mt({Cancel:{type:"secondary",onclick:function(){Ue.hide(),ze(!1)}},OK:{type:"primary",onclick:function(){Ue.hide(),ze(!0)}}},Ge)}),Ue.show()})}},{key:"prompt",value:function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(Ue){var Ge=Be(),ut=Ge.c,at=Qe()("input"+ut(".input"),{value:ze});function Ut(){Ge.hide(),Ue(at.value)}b()(at).on("keypress",function(Pt){(Pt=Pt.origEvent).key==="Enter"&&Ut()}),Ge.setOption({title:Le,content:at,width:ht(),footer:mt({Cancel:{type:"secondary",onclick:function(){Ge.hide(),Ue(null)}},OK:{type:"primary",onclick:Ut}},ut)}),Ge.show();var Zt=at.value.length;at.setSelectionRange(Zt,Zt),at.focus()})}},{key:"setContainer",value:function(Le){qe=Le}}]),Ye}(pe),_e=null,qe=null;function Be(){return qe||(qe=Qe()("div"),document.body.append(qe)),_e||(_e=new Ze(qe,{showClose:!1})),_e}function mt(Dt,Se){var Ye=y()(Dt,function(Le,ze){return Qe()(Se(".button")+Se("."+Le.type),{onclick:Le.onclick},ze)});return Qe().apply(void 0,[Se(".button-group"),{}].concat(a(Ye)))}function ht(){return window.innerWidth<500?window.innerWidth-32:500}(function(Dt,Se){try{Dt.exports=Se,Dt.exports.default=Se}catch{}})(s,Ze)},8299:function(s,e,r){r.d(e,{q:function(){return De},Z:function(){return wr}});var n=r(1002),o=r(5671),a=r(3144),c=r(7326),l=r(1752),h=r(9340),d=r(2963),f=r(1120),g=r(415),v=r.n(g),S=r(3990),A=r.n(S),w=r(4696),m=r.n(w),b=r(3063),x=r.n(b),y=r(5166),O=r.n(y),k=r(6472),P=r.n(k),L=r(3023),M=r.n(L),B=r(2533),j=r.n(B),F=r(3783),U=r.n(F),V=r(300),Q=r.n(V),q=r(4321),G=r.n(q),te=r(3085),Y=r.n(te),J=r(1512),K=r.n(J),ne=r(801),de=r.n(ne),Re=r(7756),Te=r.n(Re),Me=r(6768),Ie=r.n(Me),ce=r(1116),pe=r.n(ce),me=r(5972),we=r.n(me),Xe=r(996),Qe=r.n(Xe),Pe=r(3367),Ze=r.n(Pe),_e=r(1214),qe=r.n(_e),Be=r(6339),mt=r.n(Be),ht=r(6329),Dt=r.n(ht),Se=function(){function Xt(){(0,o.Z)(this,Xt),this.id=0,this.visited=[]}return(0,a.Z)(Xt,[{key:"set",value:function(Vt,zt){var bt=this.visited,_t=this.id,Lt={id:_t,val:Vt};return Dt()(Lt,zt),bt.push(Lt),this.id++,_t}},{key:"get",value:function(Vt){for(var zt=this.visited,bt=0,_t=zt.length;bt<_t;bt++){var Lt=zt[bt];if(Vt===Lt.val)return Lt}return!1}}]),Xt}(),Ye=r(4331),Le=r.n(Ye),ze=r(8901),Ue=r.n(ze),Ge=function(Xt){return Ue()(Ze()(Xt)).replace(/\n/g,"↵").replace(/\f|\r|\t/g,"")};function ut(Xt){return Xt.length>500&&(Xt=Xt.slice(0,500)+"..."),"ƒ "+Le()(function(Vt){var zt=Vt.match(at);return zt?zt[0]:Vt}(Xt).replace("function",""))}var at=/function(.*?)\((.*?)\)/,Ut=r(6930),Zt=r.n(Ut),Pt=r(5229),Ot=r.n(Pt),vt=r(3875),Ve=r.n(vt),pt=r(9433),wt=r.n(pt),Ct=r(1443),$t=r.n(Ct),yt=r(2461),lt=r.n(yt),dt=r(5610),xt=r.n(dt),Wt=r(7483),hr=r.n(Wt),Yt=r(6341),vr=r.n(Yt),fr=r(6954),br=r.n(fr);r(9585);function $r(Xt){var Vt="luna-".concat(Xt,"-");function zt(bt){return lt()(Le()(bt).split(/\s+/),function(_t){return vr()(_t,Vt)?_t:_t.replace(/[\w-]+/,function(Lt){return"".concat(Vt).concat(Lt)})}).join(" ")}return function(bt){if(/<[^>]*>/g.test(bt))try{var _t=hr().parse(bt);return Lr(_t,function(Lt){Lt.attrs&&Lt.attrs.class&&(Lt.attrs.class=zt(Lt.attrs.class))}),hr().stringify(_t)}catch{return zt(bt)}return zt(bt)}}function Lr(Xt,Vt){for(var zt=0,bt=Xt.length;zt<bt;zt++){var _t=Xt[zt];Vt(_t),_t.content&&Lr(_t.content,Vt)}}xt();function fn(){var Xt=br()();return Xt==="os x"?"mac":Xt}var pn=r(4193),_r=r.n(pn),ir=r(5852),Jt=r.n(ir);function gt(Xt){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var zt,bt=(0,f.Z)(Xt);if(Vt){var _t=(0,f.Z)(this).constructor;zt=Reflect.construct(bt,arguments,_t)}else zt=bt.apply(this,arguments);return(0,d.Z)(this,zt)}}var it=function(Xt){(0,h.Z)(zt,Xt);var Vt=gt(zt);function zt(bt,_t){var Lt,Gt=_t.compName,lr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,rr=lr===void 0?"light":lr;return(0,o.Z)(this,zt),(Lt=Vt.call(this)).subComponents=[],Lt.compName=Gt,Lt.c=$r(Gt),Lt.options={},Lt.container=bt,Lt.$container=K()(bt),Lt.$container.addClass(["luna-".concat(Gt),Lt.c("platform-".concat(fn()))]),Lt.on("optionChange",function(Kt,ot,ur){var nr=Lt.c;Kt==="theme"&&(Lt.$container.rmClass(nr("theme-".concat(ur))).addClass(nr("theme-".concat(ot))),U()(Lt.subComponents,function(kr){return kr.setOption("theme",ot)}))}),Lt.setOption("theme",rr),Lt}return(0,a.Z)(zt,[{key:"destroy",value:function(){this.destroySubComponents();var bt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(bt("platform-".concat(fn()))).rmClass(bt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(bt,_t){var Lt=this,Gt=this.options,lr={};typeof bt=="string"?lr[bt]=_t:lr=bt,U()(lr,function(rr,Kt){var ot=Gt[Kt];Gt[Kt]=rr,Lt.emit("optionChange",Kt,rr,ot)})}},{key:"getOption",value:function(bt){return this.options[bt]}},{key:"addSubComponent",value:function(bt){bt.setOption("theme",this.options.theme),this.subComponents.push(bt)}},{key:"removeSubComponent",value:function(bt){Jt()(this.subComponents,function(_t){return _t===bt})}},{key:"destroySubComponents",value:function(){U()(this.subComponents,function(bt){return bt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(bt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_r()(bt,_t),Dt()(this.options,bt)}},{key:"find",value:function(bt){return this.$container.find(this.c(bt))}}]),zt}($t());function ct(Xt){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var zt,bt=(0,f.Z)(Xt);if(Vt){var _t=(0,f.Z)(this).constructor;zt=Reflect.construct(bt,arguments,_t)}else zt=bt.apply(this,arguments);return(0,d.Z)(this,zt)}}var De=function(Xt){(0,h.Z)(zt,Xt);var Vt=ct(zt);function zt(bt){var _t;return(0,o.Z)(this,zt),(_t=Vt.call(this,bt,{compName:"object-viewer"})).onItemClick=function(Lt){var Gt=(0,c.Z)(_t),lr=Gt.map,rr=Gt.c,Kt=K()(Lt.curTarget),ot=Kt.data("object-id"),ur=Kt.find("span").eq(0);if(!Kt.data("first-level")&&(ot&&(Kt.find("ul").html(_t.objToHtml(lr[ot],!1)),Kt.rmAttr("data-object-id")),Lt.stopImmediatePropagation(),ur.hasClass(rr("expanded")))){var nr=Kt.find("ul").eq(0);ur.hasClass(rr("collapsed"))?(ur.rmClass(rr("collapsed")),nr.show()):(ur.addClass(rr("collapsed")),nr.hide()),_t.emit("change")}},_t.bindEvent(),_t}return(0,a.Z)(zt,[{key:"set",value:function(bt){Ie()(bt)&&(bt=JSON.parse(bt)),this.data={id:Ot()("json"),enumerable:{0:bt}},this.map={},er(this.map,this.data),this.render()}},{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(zt.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(bt,_t){var Lt=this,Gt="";return U()(["enumerable","unenumerable","symbol"],function(lr){if(bt[lr]){var rr=j()(bt[lr]);mt()(rr);for(var Kt=0,ot=rr.length;Kt<ot;Kt++){var ur=rr[Kt];Gt+=Lt.createEl(ur,bt[lr][ur],lr,_t)}}}),bt.proto&&(Gt===""?Gt=this.objToHtml(bt.proto):Gt+=this.createEl("[[Prototype]]",bt.proto,"proto")),Gt}},{key:"createEl",value:function(bt,_t,Lt){var Gt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],lr=this.c,rr=(0,n.Z)(_t);if(_t===null)return"<li>".concat(Ur(bt),'<span class="').concat(lr("null"),'">null</span></li>');if(A()(_t)||m()(_t))return"<li>".concat(Ur(bt),'<span class="').concat(lr(rr),'">').concat(Ge(_t),"</span></li>");if(_t.type==="RegExp"&&(rr="regexp"),_t.type==="Number"&&(rr="number"),_t.type==="Number"||_t.type==="RegExp")return"<li>".concat(Ur(bt),'<span class="').concat(lr(rr),'">').concat(Ge(_t.value),"</span></li>");if(_t.type==="Undefined"||_t.type==="Symbol")return"<li>".concat(Ur(bt),'<span class="').concat(lr("special"),'">').concat(x()(_t.type),"</span></li>");if(_t==="(...)")return"<li>".concat(Ur(bt),'<span class="').concat(lr("special"),'">').concat(_t,"</span></li>");if(O()(_t)){var Kt=_t.id,ot=_t.reference,ur=function(dr){var mr=dr.type,ar=dr.value;if(mr)return mr==="Function"?ut(ar):mr==="Array"&&dr.unenumerable?"Array(".concat(dr.unenumerable.length,")"):dr.type}(_t)||M()(rr),nr=Gt?"":'<span class="'.concat(lr("expanded collapsed"),'"><span class="').concat(lr("icon icon-caret-right"),'"></span><span class="').concat(lr("icon icon-caret-down"),'"></span></span>'),kr="<li ".concat(Gt?'data-first-level="true"':""," ").concat('data-object-id="'+(ot||Kt)+'"',">").concat(nr).concat(Ur(bt),'<span class="').concat(lr("open"),'">').concat(Gt?"":ur,'</span><ul class="').concat(lr(rr),'" ').concat(Gt?"":'style="display:none"',">");return Gt&&(kr+=this.objToHtml(this.map[Kt])),kr+'</ul><span class="'.concat(lr("close"),'"></span></li>')}function Ur(dr){if(Gt||O()(_t)&&_t.jsonSplitArr)return"";var mr=lr("key");return Lt==="unenumerable"||Lt==="symbol"?mr=lr("key-lighter"):Lt==="proto"&&(mr=lr("key-special")),'<span class="'.concat(mr,'">').concat(Ge(dr),"</span>: ")}return Ie()(_t)&&_t.length>1e4&&(_t=Te()(_t,50,{separator:" ",ellipsis:"…"})),"<li>".concat(Ur(bt),'<span class="').concat(lr((0,n.Z)(_t)),'">"').concat(Ge(_t),'"</span></li>')}},{key:"render",value:function(){var bt=this.map[this.data.id];this.$container.html(this.objToHtml(bt,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),zt}(it);function er(Xt,Vt){var zt=Vt.id;if(zt||zt===0){if(Vt.type&&Zt()(Vt.type,"Array")&&Vt.enumerable){var bt=function(rr,Kt,ot){var ur=[],nr={};return U()(rr.enumerable,function(kr,Ur){var dr=Ve()(Ur);wt()(dr)?nr[Ur]=kr:ur[dr]=kr}),ur.enumerable=nr,ur.type=ot,ur.id=Kt,rr.unenumerable&&(ur.unenumerable=rr.unenumerable),rr.symbol&&(ur.symbol=rr.symbol),rr.proto&&(ur.proto=rr.proto),ur}(Vt,zt,Vt.type);bt.length>100&&(Vt=function(rr){var Kt=0,ot={};U()(Qe()(rr,100),function(nr){var kr={},Ur=Kt;kr.type="["+Ur,kr.enumerable={},U()(nr,function(mr){kr.enumerable[Kt]=mr,Kt+=1});var dr=Kt-1;kr.type+=(dr-Ur>0?" … "+dr:"")+"]",kr.id=Ot()("json"),kr.jsonSplitArr=!0,ot[Kt]=kr});var ur={};return ur.enumerable=ot,ur.id=rr.id,ur.type=rr.type,rr.unenumerable&&(ur.unenumerable=rr.unenumerable),rr.symbol&&(ur.symbol=rr.symbol),rr.proto&&(ur.proto=rr.proto),ur}(bt))}Xt[zt]=Vt;var _t=[];U()(["enumerable","unenumerable","symbol"],function(rr){if(Vt[rr])for(var Kt in Vt[rr])_t.push(Vt[rr][Kt])}),Vt.proto&&_t.push(Vt.proto);for(var Lt=0,Gt=_t.length;Lt<Gt;Lt++){var lr=_t[Lt];O()(lr)&&er(Xt,lr)}}}function Cr(Xt){var Vt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var zt,bt=(0,f.Z)(Xt);if(Vt){var _t=(0,f.Z)(this).constructor;zt=Reflect.construct(bt,arguments,_t)}else zt=bt.apply(this,arguments);return(0,d.Z)(this,zt)}}s=r.hmd(s);var wr=function(Xt){(0,h.Z)(zt,Xt);var Vt=Cr(zt);function zt(bt){var _t,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,zt),(_t=Vt.call(this,bt,{compName:"object-viewer"})).onItemClick=function(Gt){var lr=(0,c.Z)(_t),rr=lr.map,Kt=lr.c,ot=K()(Gt.curTarget),ur=ot.data("object-id"),nr=ot.find("span").eq(0);if(!ot.data("first-level")&&(ur&&(ot.find("ul").html(_t.objToHtml(rr[ur],!1)),ot.rmAttr("data-object-id")),Gt.stopImmediatePropagation(),nr.hasClass(Kt("expanded")))){var kr=ot.find("ul").eq(0);nr.hasClass(Kt("collapsed"))?(nr.rmClass(Kt("collapsed")),kr.show()):(nr.addClass(Kt("collapsed")),kr.hide()),_t.emit("change")}},_t.initOptions(Lt,{unenumerable:!1,accessGetter:!1}),_t.bindEvent(),_t}return(0,a.Z)(zt,[{key:"set",value:function(bt){this.data=[bt],this.visitor=new Se,this.map={},this.render()}},{key:"destroy",value:function(){(0,l.Z)((0,f.Z)(zt.prototype),"destroy",this).call(this),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(bt,_t){var Lt=this,Gt=this.visitor,lr=bt,rr=!1,Kt=Gt.get(bt);Kt&&Kt.self&&(lr=Kt.self);var ot="",ur=["enumerable"],nr=j()(bt),kr=[],Ur=[],dr=[],mr={};if(this.options.unenumerable&&!_t&&(ur.push("unenumerable"),ur.push("symbol"),kr=de()(pe()(bt,{prototype:!1,unenumerable:!0}),nr),Ur=we()(pe()(bt,{prototype:!1,symbol:!0}),function(Dr){return(0,n.Z)(Dr)==="symbol"})),P()(bt)&&bt.length>100){ur.unshift("virtual"),rr=!0;var ar=0,Yr={};U()(Qe()(bt,100),function(Dr){var sn=Object.create(null),mn=ar,Hr="["+mn;U()(Dr,function(An){sn[ar]=An,Yr[ar]=!0,ar++});var Kr=ar-1;mr[Hr+=(Kr-mn>0?" … "+Kr:"")+"]"]=sn}),dr=j()(mr),nr=we()(nr,function(Dr){return!Yr[Dr]})}U()(ur,function(Dr){var sn=[];sn=Dr==="symbol"?Ur:Dr==="unenumerable"?kr:Dr==="virtual"?dr:nr,rr||mt()(sn);for(var mn=0,Hr=sn.length;mn<Hr;mn++){var Kr=Ze()(sn[mn]),An="",bn=Object.getOwnPropertyDescriptor(bt,Kr),Br=bn&&bn.get,Jr=bn&&bn.set;if(Br&&!Lt.options.accessGetter)An="(...)";else try{An=Dr==="virtual"?mr[Kr]:lr[Kr],G()(An)&&An.catch(qe())}catch(et){An=et instanceof Error?et.message:Ze()(et)}ot+=Lt.createEl(Kr,bt,An,Dr,_t),Br&&(ot+=Lt.createEl("get ".concat(Kr),bt,bn.get,Dr,_t)),Jr&&(ot+=Lt.createEl("set ".concat(Kr),bt,bn.set,Dr,_t))}});var nn=v()(bt);if(!_t&&nn)if(ot===""){var gn=Gt.set(nn,{self:bt});this.map[gn]=nn,ot=this.objToHtml(nn)}else ot+=this.createEl("[[Prototype]]",lr||bt,nn,"proto");return ot}},{key:"createEl",value:function(bt,_t,Lt,Gt){var lr=arguments.length>4&&arguments[4]!==void 0&&arguments[4],rr=this.visitor,Kt=this.c,ot=(0,n.Z)(Lt),ur=Y()(Lt,!1);if(Gt==="virtual"&&(ur=bt),Lt===null)return"<li>".concat(Yr(bt),'<span class="').concat(Kt("null"),'">null</span></li>');if(A()(Lt)||m()(Lt))return"<li>".concat(Yr(bt),'<span class="').concat(Kt(ot),'">').concat(Ge(Lt),"</span></li>");if(ur==="RegExp"&&(ot="regexp"),ur==="Number"&&(ot="number"),ur==="Undefined"||ur==="Symbol")return"<li>".concat(Yr(bt),'<span class="').concat(Kt("special"),'">').concat(x()(ur),"</span></li>");if(Lt==="(...)")return"<li>".concat(Yr(bt),'<span class="').concat(Kt("special"),'">').concat(Lt,"</span></li>");if(O()(Lt)){var nr,kr=rr.get(Lt);if(kr)nr=kr.id;else{var Ur={};Gt==="proto"&&(Ur.self=_t),nr=rr.set(Lt,Ur),this.map[nr]=Lt}var dr="Object";dr=ot==="regexp"?'<span class="'.concat(Kt(ot),'">').concat(Ge(Lt)):Ge(function(nn,gn){if(gn)return gn==="Function"?ut(Q()(nn)):gn==="Array"?"Array(".concat(nn.length,")"):gn}(Lt,ur)||M()(ot));var mr=lr?"":'<span class="'.concat(Kt("expanded collapsed"),'"><span class="').concat(Kt("icon icon-caret-right"),'"></span><span class="').concat(Kt("icon icon-caret-down"),'"></span></span>'),ar="<li ".concat(lr?'data-first-level="true"':""," ").concat('data-object-id="'+nr+'"',">").concat(mr).concat(Yr(bt),'<span class="').concat(Kt("open"),'">').concat(lr?"":dr,'</span><ul class="').concat(Kt(ot),'" ').concat(lr?"":'style="display:none"',">");return lr&&(ar+=this.objToHtml(Lt)),ar+'</ul><span class="'.concat(Kt("close"),'"></span></li>')}function Yr(nn){if(lr||O()(Lt)&&Gt==="virtual")return"";var gn=Kt("key");return Gt==="unenumerable"||Gt==="symbol"?gn=Kt("key-lighter"):Gt==="proto"&&(gn=Kt("key-special")),'<span class="'.concat(gn,'">').concat(Ge(nn),"</span>: ")}return Ie()(Lt)&&Lt.length>1e4&&(Lt=Te()(Lt,50,{separator:" ",ellipsis:"…"})),"<li>".concat(Yr(bt),'<span class="').concat(Kt((0,n.Z)(Lt)),'">"').concat(Ge(Lt),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}]),zt}(it);wr.Static=De,function(Xt,Vt){try{Xt.exports=Vt,Xt.exports.default=Vt}catch{}}(s,wr)},8692:function(s,e,r){r.d(e,{Z:function(){return ut}});var n=r(7326),o=r(5671),a=r(3144),c=r(9340),l=r(2963),h=r(1120),d=r(1512),f=r.n(d),g=r(8613),v=r.n(g),S=r(8901),A=r.n(S),w=r(5229),m=r.n(w),b=r(5166),x=r.n(b),y=r(4193),O=r.n(y),k=r(2461),P=r.n(k),L=r(3875),M=r.n(L),B=r(3367),j=r.n(B),F=r(4777),U=r.n(F),V=r(9702),Q=r.n(V),q=r(1754),G=r.n(q),te=r(6768),Y=r.n(te),J=r(4331),K=r.n(J),ne=r(6341),de=r.n(ne),Re=r(3063),Te=r.n(Re),Me=r(6156),Ie=r.n(Me),ce=r(3783),pe=r.n(ce),me=r(1443),we=r.n(me),Xe=r(5610),Qe=r.n(Xe),Pe=r(7483),Ze=r.n(Pe),_e=(r(3990),r(6954)),qe=r.n(_e);r(9585);function Be(Ct){var $t="luna-".concat(Ct,"-");function yt(lt){return P()(K()(lt).split(/\s+/),function(dt){return de()(dt,$t)?dt:dt.replace(/[\w-]+/,function(xt){return"".concat($t).concat(xt)})}).join(" ")}return function(lt){if(/<[^>]*>/g.test(lt))try{var dt=Ze().parse(lt);return mt(dt,function(xt){xt.attrs&&xt.attrs.class&&(xt.attrs.class=yt(xt.attrs.class))}),Ze().stringify(dt)}catch{return yt(lt)}return yt(lt)}}function mt(Ct,$t){for(var yt=0,lt=Ct.length;yt<lt;yt++){var dt=Ct[yt];$t(dt),dt.content&&mt(dt.content,$t)}}Qe();function ht(){var Ct=qe()();return Ct==="os x"?"mac":Ct}var Dt=r(6329),Se=r.n(Dt),Ye=r(5852),Le=r.n(Ye);function ze(Ct){var $t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,lt=(0,h.Z)(Ct);if($t){var dt=(0,h.Z)(this).constructor;yt=Reflect.construct(lt,arguments,dt)}else yt=lt.apply(this,arguments);return(0,l.Z)(this,yt)}}var Ue=function(Ct){(0,c.Z)(yt,Ct);var $t=ze(yt);function yt(lt,dt){var xt,Wt=dt.compName,hr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Yt=hr===void 0?"light":hr;return(0,o.Z)(this,yt),(xt=$t.call(this)).subComponents=[],xt.compName=Wt,xt.c=Be(Wt),xt.options={},xt.container=lt,xt.$container=f()(lt),xt.$container.addClass(["luna-".concat(Wt),xt.c("platform-".concat(ht()))]),xt.on("optionChange",function(vr,fr,br){var $r=xt.c;vr==="theme"&&(xt.$container.rmClass($r("theme-".concat(br))).addClass($r("theme-".concat(fr))),pe()(xt.subComponents,function(Lr){return Lr.setOption("theme",fr)}))}),xt.setOption("theme",Yt),xt}return(0,a.Z)(yt,[{key:"destroy",value:function(){this.destroySubComponents();var lt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(lt("platform-".concat(ht()))).rmClass(lt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(lt,dt){var xt=this,Wt=this.options,hr={};typeof lt=="string"?hr[lt]=dt:hr=lt,pe()(hr,function(Yt,vr){var fr=Wt[vr];Wt[vr]=Yt,xt.emit("optionChange",vr,Yt,fr)})}},{key:"getOption",value:function(lt){return this.options[lt]}},{key:"addSubComponent",value:function(lt){lt.setOption("theme",this.options.theme),this.subComponents.push(lt)}},{key:"removeSubComponent",value:function(lt){Le()(this.subComponents,function(dt){return dt===lt})}},{key:"destroySubComponents",value:function(){pe()(this.subComponents,function(lt){return lt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(lt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O()(lt,dt),Se()(this.options,lt)}},{key:"find",value:function(lt){return this.$container.find(this.c(lt))}}]),yt}(we());function Ge(Ct){var $t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,lt=(0,h.Z)(Ct);if($t){var dt=(0,h.Z)(this).constructor;yt=Reflect.construct(lt,arguments,dt)}else yt=lt.apply(this,arguments);return(0,l.Z)(this,yt)}}s=r.hmd(s);var ut=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt){var dt,xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,yt),(dt=$t.call(this,lt,{compName:"setting"},xt)).items=[],dt.selectedItem=null,dt.initOptions(xt,{separatorCollapse:!0,filter:""}),dt.bindEvent(),dt}return(0,a.Z)(yt,[{key:"appendTitle",value:function(lt){var dt=new Ut(this,lt);return this.append(dt),dt}},{key:"appendSeparator",value:function(){var lt=this.items,dt=this.options.separatorCollapse,xt=Q()(lt);if(dt&&xt instanceof Zt)return xt;var Wt=new Zt(this);return this.append(Wt),Wt}},{key:"appendNumber",value:function(lt,dt,xt,Wt,hr){x()(Wt)&&(hr=Wt,Wt="");var Yt=new Ot(this,lt,dt,xt,Wt,hr);return this.append(Yt),Yt}},{key:"appendButton",value:function(lt,dt,xt){U()(dt)&&(xt=dt,dt="");var Wt=new wt(this,lt,dt,xt);return this.append(Wt),Wt}},{key:"appendInput",value:function(lt,dt,xt){var Wt=new Pt(this,lt,dt,xt,arguments.length>3&&arguments[3]!==void 0?arguments[3]:"");return this.append(Wt),Wt}},{key:"appendCheckbox",value:function(lt,dt,xt,Wt){Wt||(Wt=xt,xt="");var hr=new Ve(this,lt,dt,xt,Wt);return this.append(hr),hr}},{key:"appendSelect",value:function(lt,dt,xt,Wt,hr){x()(Wt)&&(hr=Wt,Wt="");var Yt=new pt(this,lt,dt,xt,Wt,hr);return this.append(Yt),Yt}},{key:"remove",value:function(lt){var dt=this.items,xt=dt.indexOf(lt);xt>-1&&(lt.detach(),dt.splice(xt,1),lt===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){pe()(this.items,function(lt){return lt.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(lt){var dt;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),Ie()(lt)||(this.selectedItem=lt,(dt=this.selectedItem)===null||dt===void 0||dt.select())}},{key:"renderSettings",value:function(){var lt=this,dt=this.items;pe()(dt,function(xt){return xt.detach()}),pe()(dt,function(xt){lt.filterItem(xt)&&lt.$container.append(xt.container)})}},{key:"bindEvent",value:function(){var lt=this,dt=this.c;this.on("optionChange",function(Wt){Wt==="filter"&&lt.renderSettings()});var xt=this;this.$container.on("click",dt(".item"),function(){xt.selectItem(this.settingItem)})}},{key:"filterItem",value:function(lt){var dt=this.options.filter;if(dt){if(U()(dt))return dt(lt);if(G()(dt))return dt.test(lt.text());if(Y()(dt)&&(dt=K()(dt)))return de()(Te()(lt.text()),Te()(dt))}return!0}},{key:"append",value:function(lt){this.items.push(lt),this.filterItem(lt)&&this.$container.append(lt.container)}}]),yt}(Ue),at=function(){function Ct($t,yt,lt,dt){(0,o.Z)(this,Ct),this.container=v()("div",{tabindex:"0"}),this.setting=$t,this.container.settingItem=this,this.$container=f()(this.container),this.$container.addClass($t.c("item")).addClass($t.c("item-".concat(dt))),this.key=yt,this.value=lt}return(0,a.Z)(Ct,[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function($t){this.setting.emit("change",this.key,$t,this.value),this.value=$t}}]),Ct}(),Ut=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt){var xt;return(0,o.Z)(this,yt),(xt=$t.call(this,lt,"","","title")).$container.text(dt),xt}return(0,a.Z)(yt)}(at),Zt=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt){return(0,o.Z)(this,yt),$t.call(this,lt,"","","separator")}return(0,a.Z)(yt)}(at),Pt=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt,xt,Wt,hr){var Yt;(0,o.Z)(this,yt),Yt=$t.call(this,lt,dt,xt,"input");var vr=lt.c;Yt.$container.html('<div class="'.concat(vr("title"),'">').concat(A()(Wt),`</div>
      <div class="`).concat(vr("description"),'">').concat(hr,`</div>
      <div class="`).concat(vr("control"),`">
        <input type="text"></input>
      </div>`));var fr=Yt.$container.find("input");return fr.val(xt),fr.on("change",function(){return Yt.onChange(fr.val())}),Yt}return(0,a.Z)(yt)}(at),Ot=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt,xt,Wt,hr){var Yt,vr=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};(0,o.Z)(this,yt),Yt=$t.call(this,lt,dt,xt,"number"),O()(vr,{min:0,max:10,step:1});var fr=(0,n.Z)(Yt).$container,br=lt.c,$r=!!vr.range;delete vr.range;var Lr=vr.min,fn=vr.max,pn='<input type="'.concat($r?"range":"number",'"').concat(P()(vr,function(gt,it){return" ".concat(it,'="').concat(gt,'"')}),"></input>");$r&&(pn="".concat(Lr,'<div class="').concat(br("range-container"),`">
        <div class="`).concat(br("range-track"),`">
          <div class="`).concat(br("range-track-bar"),`">
            <div class="`).concat(br("range-track-progress"),'" style="width: ').concat(vt(xt,Lr,fn),`%;"></div>
          </div>
        </div>
        `).concat(pn,`
      </div><span class="`).concat(br("value"),'">').concat(xt,"</span>/").concat(fn)),fr.html('<div class="'.concat(br("title"),'">').concat(A()(Wt),`</div>
      <div class="`).concat(br("description"),'">').concat(hr,`</div>
      <div class="`).concat(br("control"),'">').concat(pn,"</div>"));var _r=fr.find(br(".value")),ir=fr.find("input"),Jt=fr.find(br(".range-track-progress"));return ir.val(j()(xt)),ir.on("change",function(){var gt=M()(ir.val());Yt.onChange(gt)}),ir.on("input",function(){var gt=M()(ir.val());Jt.css("width",vt(gt,Lr,fn)+"%"),_r.text(j()(gt))}),Yt}return(0,a.Z)(yt)}(at),vt=function(Ct,$t,yt){return((Ct-$t)/(yt-$t)*100).toFixed(2)},Ve=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt,xt,Wt,hr){var Yt;(0,o.Z)(this,yt),Yt=$t.call(this,lt,dt,xt,"checkbox");var vr=lt.c,fr=m()(lt.c("checkbox-"));Yt.$container.html('<div class="'.concat(vr("title"),'">').concat(A()(Wt),`</div>
      <div class="`).concat(vr("control"),`">
        <input type="checkbox" id="`).concat(fr,`"></input>
        <label for="`).concat(fr,'">').concat(hr,`</label>
      </div>`));var br=Yt.$container.find("input"),$r=br.get(0);return $r.checked=xt,br.on("change",function(){return Yt.onChange($r.checked)}),Yt}return(0,a.Z)(yt)}(at),pt=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt,xt,Wt,hr,Yt){var vr;(0,o.Z)(this,yt),vr=$t.call(this,lt,dt,xt,"select");var fr=lt.c;vr.$container.html('<div class="'.concat(fr("title"),'">').concat(A()(Wt),`</div>
      <div class="`).concat(fr("description"),'">').concat(hr,`</div>
      <div class="`).concat(fr("control"),`">
        <div class="`).concat(fr("select"),`">
          <select>
            `).concat(P()(Yt,function($r,Lr){return'<option value="'.concat(A()($r),'"').concat($r===xt?" selected":"",">").concat(A()(Lr),"</option>")}).join(""),`
          </select>
        </div>
      </div>`));var br=vr.$container.find("select");return br.on("change",function(){return vr.onChange(br.val())}),vr}return(0,a.Z)(yt)}(at),wt=function(Ct){(0,c.Z)(yt,Ct);var $t=Ge(yt);function yt(lt,dt,xt,Wt){var hr;return(0,o.Z)(this,yt),xt||(xt=dt,dt=""),(hr=$t.call(this,lt,"","","button")).$container.html(lt.c('<div class="title">'.concat(A()(dt),`</div>
      <div class="control">
        <button>`).concat(A()(xt),`</button>
      </div>`))),hr.$container.find("button").on("click",Wt),hr}return(0,a.Z)(yt)}(at);(function(Ct,$t){try{Ct.exports=$t,Ct.exports.default=$t}catch{}})(s,ut)},7638:function(s,e,r){r.d(e,{Z:function(){return Xe}});var n=r(168),o=r(5671),a=r(3144),c=r(9340),l=r(2963),h=r(1120),d=r(1443),f=r.n(d),g=r(1512),v=r.n(g),S=r(2461),A=r.n(S),w=r(4331),m=r.n(w),b=r(5610),x=r.n(b),y=r(7483),O=r.n(y),k=r(3990),P=r.n(k),L=r(6341),M=r.n(L),B=(r(3875),r(6954)),j=r.n(B);r(9585);function F(Qe){var Pe="luna-".concat(Qe,"-");function Ze(_e){return A()(m()(_e).split(/\s+/),function(qe){return M()(qe,Pe)?qe:qe.replace(/[\w-]+/,function(Be){return"".concat(Pe).concat(Be)})}).join(" ")}return function(_e){if(/<[^>]*>/g.test(_e))try{var qe=O().parse(_e);return U(qe,function(Be){Be.attrs&&Be.attrs.class&&(Be.attrs.class=Ze(Be.attrs.class))}),O().stringify(qe)}catch{return Ze(_e)}return Ze(_e)}}function U(Qe,Pe){for(var Ze=0,_e=Qe.length;Ze<_e;Ze++){var qe=Qe[Ze];Pe(qe),qe.content&&U(qe.content,Pe)}}var V;x();function Q(){var Qe=j()();return Qe==="os x"?"mac":Qe}var q=r(3783),G=r.n(q),te=r(6329),Y=r.n(te),J=r(4193),K=r.n(J),ne=r(5852),de=r.n(ne);function Re(Qe){var Pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ze,_e=(0,h.Z)(Qe);if(Pe){var qe=(0,h.Z)(this).constructor;Ze=Reflect.construct(_e,arguments,qe)}else Ze=_e.apply(this,arguments);return(0,l.Z)(this,Ze)}}var Te,Me=function(Qe){(0,c.Z)(Ze,Qe);var Pe=Re(Ze);function Ze(_e,qe){var Be,mt=qe.compName,ht=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Dt=ht===void 0?"light":ht;return(0,o.Z)(this,Ze),(Be=Pe.call(this)).subComponents=[],Be.compName=mt,Be.c=F(mt),Be.options={},Be.container=_e,Be.$container=v()(_e),Be.$container.addClass(["luna-".concat(mt),Be.c("platform-".concat(Q()))]),Be.on("optionChange",function(Se,Ye,Le){var ze=Be.c;Se==="theme"&&(Be.$container.rmClass(ze("theme-".concat(Le))).addClass(ze("theme-".concat(Ye))),G()(Be.subComponents,function(Ue){return Ue.setOption("theme",Ye)}))}),Be.setOption("theme",Dt),Be}return(0,a.Z)(Ze,[{key:"destroy",value:function(){this.destroySubComponents();var _e=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(_e("platform-".concat(Q()))).rmClass(_e("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(_e,qe){var Be=this,mt=this.options,ht={};typeof _e=="string"?ht[_e]=qe:ht=_e,G()(ht,function(Dt,Se){var Ye=mt[Se];mt[Se]=Dt,Be.emit("optionChange",Se,Dt,Ye)})}},{key:"getOption",value:function(_e){return this.options[_e]}},{key:"addSubComponent",value:function(_e){_e.setOption("theme",this.options.theme),this.subComponents.push(_e)}},{key:"removeSubComponent",value:function(_e){de()(this.subComponents,function(qe){return qe===_e})}},{key:"destroySubComponents",value:function(){G()(this.subComponents,function(_e){return _e.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(_e){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K()(_e,qe),Y()(this.options,_e)}},{key:"find",value:function(_e){return this.$container.find(this.c(_e))}}]),Ze}(f()),Ie=r(1907),ce=r.n(Ie),pe=r(8901),me=r.n(pe);function we(Qe){var Pe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ze,_e=(0,h.Z)(Qe);if(Pe){var qe=(0,h.Z)(this).constructor;Ze=Reflect.construct(_e,arguments,qe)}else Ze=_e.apply(this,arguments);return(0,l.Z)(this,Ze)}}s=r.hmd(s);var Xe=function(Qe){(0,c.Z)(Ze,Qe);var Pe=we(Ze);function Ze(_e){var qe,Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,o.Z)(this,Ze),(qe=Pe.call(this,_e,{compName:"tab"},Be)).initOptions(Be,{height:30}),qe.initTpl(),qe.$tabs=qe.find(".tabs"),qe.tabs=qe.$tabs.get(0),qe.$slider=qe.find(".slider"),qe.bindEvent(),qe.updateHeight(),qe}return(0,a.Z)(Ze,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(_e,qe){var Be=this.c,mt=this.$tabs,ht=this.options.height-1,Dt=mt.find(Be(".item")),Se=Dt.length,Ye='<div class="'.concat(this.c("item"),'" data-id="').concat(me()(qe.id),'" style="height: ').concat(ht,"px; line-height: ").concat(ht,'px;">').concat(me()(qe.title),"</div>");_e>Se-1?mt.append(Ye):Dt.eq(_e).before(Ye),this.updateSlider()}},{key:"append",value:function(_e){this.insert(this.length,_e)}},{key:"remove",value:function(_e){var qe=this.c,Be=this;this.$tabs.find(qe(".item")).each(function(){var mt=v()(this);if(mt.data("id")===_e){if(mt.hasClass(qe("selected")))if(Be.length>0){var ht=Be.$tabs.find(qe(".item")).eq(0).data("id");Be.select(ht)}else Be.emit("deselect");mt.remove()}}),this.updateSlider()}},{key:"select",value:function(_e){var qe=this.c,Be=this;this.$tabs.find(qe(".item")).each(function(){var mt=v()(this);mt.data("id")===_e?(mt.addClass(qe("selected")),Be.updateSlider(),Be.scrollToSelected(),Be.emit("select",_e)):mt.rmClass(qe("selected"))})}},{key:"scrollToSelected",value:function(){var _e,qe=this.$tabs,Be=this.tabs,mt=this.c,ht=qe.find(mt(".selected")).get(0),Dt=ht.offsetLeft,Se=ht.offsetWidth,Ye=Be.offsetWidth,Le=Be.scrollLeft;Dt<Le?_e=Dt:Dt+Se>Ye+Le&&(_e=Dt+Se-Ye),P()(_e)&&(Be.scrollLeft=_e)}},{key:"hideScrollbar",value:function(){var _e=this.$tabs;if(getComputedStyle(this.tabs,"::-webkit-scrollbar").display!=="none"){var qe=function(){if(P()(V))return V;if(!document)return 16;var Be=document.createElement("div"),mt=document.createElement("div");Be.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),mt.setAttribute("style","height: 200px"),Be.appendChild(mt);var ht=document.body||document.documentElement;return ht.appendChild(Be),V=Be.offsetWidth-Be.clientWidth,ht.removeChild(Be),V}();_e.css("height",this.options.height-1+qe+"px")}}},{key:"updateSlider",value:function(){var _e=this.$slider,qe=this.$tabs,Be=this.c,mt=qe.find(Be(".selected")).get(0);mt?_e.css({width:mt.offsetWidth,left:mt.offsetLeft-qe.get(0).scrollLeft}):_e.css({width:0})}},{key:"updateHeight",value:function(){var _e=this.options.height,qe=_e-1;this.find(".tabs-container").css("height",_e+"px"),this.find(".item").css({height:qe,lineHeight:qe}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var _e=this,qe=this.tabs,Be=this.c;this.on("optionChange",function(ht){ht==="height"&&_e.updateHeight()});var mt=this;this.$tabs.on("wheel",function(ht){ht.preventDefault(),qe.scrollLeft+=ht.origEvent.deltaY}).on("click",Be(".item"),function(){var ht=v()(this);mt.select(ht.data("id"))}).on("scroll",function(){_e.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c(ce()(Te||(Te=(0,n.Z)([`
        <div class="tabs-container">
          <div class="tabs"></div>
        </div>
        <div class="slider"></div>
      `])))))}}]),Ze}(Me);(function(Qe,Pe){try{Qe.exports=Pe,Qe.exports.default=Pe}catch{}})(s,Xe)},7049:function(s,e,r){r.d(e,{Z:function(){return Se}});var n=r(5671),o=r(3144),a=r(7326),c=r(1752),l=r(9340),h=r(2963),d=r(1120),f=r(1443),g=r.n(f),v=r(1512),S=r.n(v),A=r(2461),w=r.n(A),m=r(4331),b=r.n(m),x=r(5610),y=r.n(x),O=r(7483),k=r.n(O),P=(r(3990),r(6341)),L=r.n(P),M=(r(3875),r(6954)),B=r.n(M);r(9585);function j(Le){var ze="luna-".concat(Le,"-");function Ue(Ge){return w()(b()(Ge).split(/\s+/),function(ut){return L()(ut,ze)?ut:ut.replace(/[\w-]+/,function(at){return"".concat(ze).concat(at)})}).join(" ")}return function(Ge){if(/<[^>]*>/g.test(Ge))try{var ut=k().parse(Ge);return F(ut,function(at){at.attrs&&at.attrs.class&&(at.attrs.class=Ue(at.attrs.class))}),k().stringify(ut)}catch{return Ue(Ge)}return Ue(Ge)}}function F(Le,ze){for(var Ue=0,Ge=Le.length;Ue<Ge;Ue++){var ut=Le[Ue];ze(ut),ut.content&&F(ut.content,ze)}}var U="ontouchstart"in y();function V(){var Le=B()();return Le==="os x"?"mac":Le}var Q=r(3783),q=r.n(Q),G=r(6329),te=r.n(G),Y=r(4193),J=r.n(Y),K=r(5852),ne=r.n(K);function de(Le){var ze=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ue,Ge=(0,d.Z)(Le);if(ze){var ut=(0,d.Z)(this).constructor;Ue=Reflect.construct(Ge,arguments,ut)}else Ue=Ge.apply(this,arguments);return(0,h.Z)(this,Ue)}}var Re=function(Le){(0,l.Z)(Ue,Le);var ze=de(Ue);function Ue(Ge,ut){var at,Ut=ut.compName,Zt=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Pt=Zt===void 0?"light":Zt;return(0,n.Z)(this,Ue),(at=ze.call(this)).subComponents=[],at.compName=Ut,at.c=j(Ut),at.options={},at.container=Ge,at.$container=S()(Ge),at.$container.addClass(["luna-".concat(Ut),at.c("platform-".concat(V()))]),at.on("optionChange",function(Ot,vt,Ve){var pt=at.c;Ot==="theme"&&(at.$container.rmClass(pt("theme-".concat(Ve))).addClass(pt("theme-".concat(vt))),q()(at.subComponents,function(wt){return wt.setOption("theme",vt)}))}),at.setOption("theme",Pt),at}return(0,o.Z)(Ue,[{key:"destroy",value:function(){this.destroySubComponents();var Ge=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Ge("platform-".concat(V()))).rmClass(Ge("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Ge,ut){var at=this,Ut=this.options,Zt={};typeof Ge=="string"?Zt[Ge]=ut:Zt=Ge,q()(Zt,function(Pt,Ot){var vt=Ut[Ot];Ut[Ot]=Pt,at.emit("optionChange",Ot,Pt,vt)})}},{key:"getOption",value:function(Ge){return this.options[Ge]}},{key:"addSubComponent",value:function(Ge){Ge.setOption("theme",this.options.theme),this.subComponents.push(Ge)}},{key:"removeSubComponent",value:function(Ge){ne()(this.subComponents,function(ut){return ut===Ge})}},{key:"destroySubComponents",value:function(){q()(this.subComponents,function(Ge){return Ge.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Ge){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};J()(Ge,ut),te()(this.options,Ge)}},{key:"find",value:function(Ge){return this.$container.find(this.c(Ge))}}]),Ue}(g()),Te=r(9702),Me=r.n(Te),Ie=r(8887),ce=r.n(Ie),pe=r(2439),me=r.n(pe),we=r(6049),Xe=r.n(we),Qe=r(2327),Pe=r.n(Qe),Ze=r(8901),_e=r.n(Ze),qe=r(7387),Be=r.n(qe),mt=r(6677),ht=r.n(mt);function Dt(Le){var ze=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Ue,Ge=(0,d.Z)(Le);if(ze){var ut=(0,d.Z)(this).constructor;Ue=Reflect.construct(Ge,arguments,ut)}else Ue=Ge.apply(this,arguments);return(0,h.Z)(this,Ue)}}s=r.hmd(s);var Se=function(Le){(0,l.Z)(Ue,Le);var ze=Dt(Ue);function Ue(Ge){var ut,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.Z)(this,Ue),(ut=ze.call(this,Ge,{compName:"text-viewer"},at)).lineNum=0,ut.copy=function(){var Ut=(0,a.Z)(ut).c,Zt=ut.options,Pt=Zt.text,Ot=Zt.escape;Pe()(Ot?Pt:Be()(ht()(Pt)));var vt=ut.$copy.find(Ut(".icon"));vt.addClass(Ut("icon-check")).rmClass(Ut("icon-copy")),setTimeout(function(){vt.rmClass(Ut("icon-check")).addClass(Ut("icon-copy"))},1e3)},ut._updateCopyPos=function(){var Ut=(0,a.Z)(ut).container;ut.$copy.css({top:Ut.scrollTop+5,right:5-Ut.scrollLeft})},ut.initOptions(at,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),ut.render=me()(function(){return ut._render()},16),ut.updateCopyPos=Xe()(function(){return ut._updateCopyPos()},300),ut.initTpl(),ut.$text=ut.find(".text"),ut.$copy=ut.find(".copy"),U&&ut.$copy.css("opacity","1"),ut.options.text&&ut.render(),ut.bindEvent(),ut.updateHeight(),ut}return(0,o.Z)(Ue,[{key:"append",value:function(Ge){var ut=this,at=this.options,Ut=this.$copy,Zt=this.c,Pt=this.$text,Ot=at.showLineNumbers;if(this.options.text+=Ge,!Ot)return this.$text.append(at.escape?_e()(Ge):Ge);var vt=function(pt){return pt.length===0?[]:pt.split(Ye)}(Ge);ce()(vt)&&(vt=["&nbsp;"]),b()(Me()(vt))||vt.pop();var Ve="";q()(vt,function(pt,wt){ut.lineNum+=1,Ve+='<div class="'.concat(Zt("table-row"),'"><div class="').concat(Zt("line-number"),'">').concat(ut.lineNum,'</div><div class="').concat(Zt("line-text"),'">').concat(at.escape?_e()(pt):pt||" ","</div></div>")}),Pt.find(Zt(".table")).append(Ve),Ut.hide(),Pt.offset().height>40&&Ut.show(),this.updateCopyPos()}},{key:"destroy",value:function(){this.$container.off("scroll",this.updateCopyPos),(0,c.Z)((0,d.Z)(Ue.prototype),"destroy",this).call(this)}},{key:"updateHeight",value:function(){var Ge=this.options.maxHeight;Ge>0&&Ge!==1/0?this.$text.css("max-height",Ge):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var Ge=this;this.on("optionChange",function(ut){ut==="maxHeight"?Ge.updateHeight():Ge.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var Ge=this.c,ut=this.$text,at=this.options,Ut=at.text,Zt=at.wrapLongLines,Pt=at.showLineNumbers;Zt?ut.addClass(Ge("wrap-long-lines")):ut.rmClass(Ge("wrap-long-lines")),Pt?ut.addClass(Ge("line-numbers")):ut.rmClass(Ge("line-numbers")),ut.html('<div class="'.concat(Ge("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(Ut)}}]),Ue}(Re),Ye=/\r\n|\r|\n/g;(function(Le,ze){try{Le.exports=ze,Le.exports.default=ze}catch{}})(s,Se)},6672:function(s,e,r){r.d(e,{Z:function(){return Fi}});var n={};r.r(n),r.d(n,{classPrefix:function(){return De},drag:function(){return _t},escapeJsonStr:function(){return pn},evalCss:function(){return ct},eventClient:function(){return Lt},eventPage:function(){return Gt},getFileName:function(){return ir},hasSafeArea:function(){return fn},isChobitsuEl:function(){return it},isErudaEl:function(){return gt},pxToNum:function(){return Jt},safeStorage:function(){return _r}});var o=r(5671),a=r(3144),c=r(7326),l=r(9340),h=r(2963),d=r(1120),f=r(4942),g=r(1443),v=r.n(g),S=new(v());S.ADD="ADD",S.SHOW="SHOW",S.SCALE="SCALE";var A=S,w=r(1752),m=r(7496),b=r.n(m)()({init:function(Oe){this._$el=Oe},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),x=r(1512),y=r.n(x),O=r(125),k=r.n(O),P=r(5229),L=r.n(P),M=r(3783),B=r.n(M),j=r(5972),F=r.n(j),U=r(6768),V=r.n(U),Q=r(6341),q=r.n(Q),G=r(4675),te=r.n(G),Y=r(3367),J=r.n(Y),K=r(2533),ne=r.n(K),de=r(7622),Re=r.n(de),Te=r(4193),Me=r.n(Te),Ie=r(6329),ce=r.n(Ie),pe=r(6472),me=r.n(pe),we=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Xe=we.length;function Qe(Oe){for(var Ce={},xe=0;xe<Xe;xe++)Ce[we[xe]]=Oe[xe];return Ce}function Pe(Oe){return me()(Oe)&&(Oe=Qe(Oe)),Oe.darkerBackground||(Oe.darkerBackground=Oe.contrast),ce()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},Oe)}function Ze(Oe){return me()(Oe)&&(Oe=Qe(Oe)),Oe.darkerBackground||(Oe.darkerBackground=Oe.contrast),ce()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},Oe)}var _e=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],qe={Light:Ze({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:Pe({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":Pe(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":Pe(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":Ze(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":Pe(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":Pe(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":Pe(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:Pe(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":Pe(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":Pe(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":Ze(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":Pe(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":Ze(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:Ze(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":Pe(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":Ze(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},Be=[],mt=1,ht=qe.Light,Dt=function Oe(Ce,xe){Ce=J()(Ce);for(var ee=0,he=Be.length;ee<he;ee++)if(Be[ee].css===Ce)return;xe=xe||Oe.container||document.head;var ye=document.createElement("style");ye.type="text/css",xe.appendChild(ye);var Ne={css:Ce,el:ye,container:xe};return Ye(Ne),Be.push(Ne),Ne};function Se(){B()(Be,function(Oe){return Ye(Oe)})}function Ye(Oe){var Ce=Oe.css,xe=Oe.el;Ce=(Ce=Ce.replace(/(\d+)px/g,function(he,ye){return+ye*mt+"px"})).replace(/_/g,"eruda-");var ee=ne()(qe.Light);B()(ee,function(he){Ce=Ce.replace(new RegExp("var\\(--".concat(Re()(he),"\\)"),"g"),ht[he])}),xe.innerText=Ce}Dt.setScale=function(Oe){mt=Oe,Se()},Dt.setTheme=function(Oe){ht=V()(Oe)?qe[Oe]||qe.Light:Me()(Oe,qe.Light),Se()},Dt.getCurTheme=function(){return ht},Dt.getThemes=function(){return qe},Dt.clear=function(){B()(Be,function(Oe){var Ce=Oe.container,xe=Oe.el;return Ce.removeChild(xe)}),Be=[]},Dt.remove=function(Oe){Be=F()(Be,function(Ce){return Ce!==Oe}),Oe.container.removeChild(Oe.el)};var Le=Dt,ze=r(8692);function Ue(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var Ge=function(Oe){(0,l.Z)(xe,Oe);var Ce=Ue(xe);function xe(){var ee;return(0,o.Z)(this,xe),(ee=Ce.call(this))._style=Le(r(8011)),ee.name="settings",ee._settings=[],ee}return(0,a.Z)(xe,[{key:"init",value:function(ee){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._setting=new ze.Z(ee.get(0)),this._bindEvent()}},{key:"remove",value:function(ee,he){var ye=this;if(V()(ee)){var Ne=this;this._$el.find(".luna-setting-item-title").each(function(){y()(this).text()===ee&&Ne._setting.remove(this.settingItem)})}else this._settings=F()(this._settings,function(rt){return rt.config!==ee||rt.key!==he||(ye._setting.remove(rt.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),Le.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(ee,he,ye){var Ne=this._genId(),rt=this._setting.appendCheckbox(Ne,!!ee.get(he),ye);return this._settings.push({config:ee,key:he,id:Ne,item:rt}),this}},{key:"select",value:function(ee,he,ye,Ne){var rt=this._genId(),ft={};B()(Ne,function(jt){return ft[jt]=jt});var It=this._setting.appendSelect(rt,ee.get(he),"",ye,ft);return this._settings.push({config:ee,key:he,id:rt,item:It}),this}},{key:"range",value:function(ee,he,ye,Ne){var rt=Ne.min,ft=rt===void 0?0:rt,It=Ne.max,jt=It===void 0?1:It,xr=Ne.step,Fr=xr===void 0?.1:xr,Gr=this._genId(),dn=this._setting.appendNumber(Gr,ee.get(he),ye,{max:jt,min:ft,step:Fr,range:!0});return this._settings.push({config:ee,key:he,min:ft,max:jt,step:Fr,id:Gr,item:dn}),this}},{key:"button",value:function(ee,he){return this._setting.appendButton(ee,he),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(ee){return this._setting.appendTitle(ee),this}},{key:"_cleanSeparator",value:function(){var ee=te()(this._$el.get(0).children);function he(rt){return q()(rt.getAttribute("class"),"luna-setting-item-separator")}for(var ye=0,Ne=ee.length;ye<Ne-1;ye++)he(ee[ye])&&he(ee[ye+1])&&y()(ee[ye]).remove()}},{key:"_genId",value:function(){return L()("eruda-settings")}},{key:"_getSetting",value:function(ee){var he;return B()(this._settings,function(ye){ye.id===ee&&(he=ye)}),he}},{key:"_bindEvent",value:function(){var ee=this;this._setting.on("change",function(he,ye){var Ne=ee._getSetting(he);Ne.config.set(Ne.key,ye)})}}],[{key:"createCfg",value:function(ee,he){return new(k())("eruda-"+ee,he)}}]),xe}(b),ut=r(6837),at=r.n(ut),Ut=r(442),Zt=r.n(Ut),Pt=r(6334),Ot=r.n(Pt),vt=r(4187),Ve=r.n(vt),pt=r(1286),wt=r.n(pt),Ct=r(9702),$t=r.n(Ct),yt=r(2461),lt=r.n(yt),dt=r(5026),xt=r.n(dt),Wt=r(5610),hr=r.n(Wt),Yt=r(3875),vr=r.n(Yt),fr=r(4331),br=r.n(fr),$r=r(7483),Lr=r.n($r);function fn(){var Oe=!1,Ce=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(Ce.style.paddingBottom="env(safe-area-inset-bottom)",Oe=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(Ce.style.paddingBottom="constant(safe-area-inset-bottom)",Oe=!0),Oe){document.body.appendChild(Ce);var xe=parseInt(window.getComputedStyle(Ce).paddingBottom);if(document.body.removeChild(Ce),xe>0)return!0}return!1}function pn(Oe){return Ve()(Oe).replace(/\\'/g,"'").replace(/\t/g,"\\t")}function _r(Oe,Ce){var xe;switch(wt()(Ce)&&(Ce=!0),Oe){case"local":xe=window.localStorage;break;case"session":xe=window.sessionStorage}try{var ee="test-localStorage-"+Date.now();xe.setItem(ee,ee);var he=xe.getItem(ee);if(xe.removeItem(ee),he!==ee)throw new Error}catch{return Ce?xt():void 0}return xe}function ir(Oe){var Ce=$t()(Oe.split("/"));return Ce===""&&(Ce=(Oe=new(Ot())(Oe)).hostname),Ce}function Jt(Oe){return vr()(Oe.replace("px",""))}function gt(Oe){for(;Oe;){if(Oe.id==="eruda")return!0;Oe=Oe.parentNode}return!1}function it(Oe){for(;Oe;){var Ce="";if(Oe.getAttribute&&(Ce=Oe.getAttribute("class")||""),q()(Ce,"__chobitsu-hide__"))return!0;Oe=Oe.parentNode}return!1}var ct=Le;function De(Oe){if(/<[^>]*>/g.test(Oe))try{var Ce=Lr().parse(Oe);return er(Ce,function(xe){xe.attrs&&xe.attrs.class&&(xe.attrs.class=Cr(xe.attrs.class))}),Lr().stringify(Ce)}catch{return Cr(Oe)}return Cr(Oe)}function er(Oe,Ce){for(var xe=0,ee=Oe.length;xe<ee;xe++){var he=Oe[xe];Ce(he),he.content&&er(he.content,Ce)}}function Cr(Oe){var Ce="eruda-";return lt()(br()(Oe).split(/\s+/),function(xe){return q()(xe,Ce)?xe:xe.replace(/[\w-]+/,function(ee){return"".concat(Ce).concat(ee)})}).join(" ")}var wr="ontouchstart"in hr(),Xt="PointerEvent"in hr(),Vt={start:"touchstart",move:"touchmove",end:"touchend"},zt={start:"mousedown",move:"mousemove",end:"mouseup"},bt={start:"pointerdown",move:"pointermove",end:"pointerup"};function _t(Oe){return Xt?bt[Oe]:wr?Vt[Oe]:zt[Oe]}function Lt(Oe,Ce){var xe=Oe==="x"?"clientX":"clientY";return Ce[xe]?Ce[xe]:Ce.changedTouches?Ce.changedTouches[0][xe]:0}function Gt(Oe,Ce){var xe=Oe==="x"?"pageX":"pageY";return Ce[xe]?Ce[xe]:Ce.changedTouches?Ce.changedTouches[0][xe]:0}function lr(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var rr,Kt=y()(document),ot=function(Oe){(0,l.Z)(xe,Oe);var Ce=lr(xe);function xe(ee){var he;return(0,o.Z)(this,xe),he=Ce.call(this),(0,f.Z)((0,c.Z)(he),"_onDragStart",function(ye){var Ne=he._$el;Ne.addClass(De("active")),he._isClick=!0,ye=ye.origEvent,he._startX=Lt("x",ye),he._oldX=Jt(Ne.css("left")),he._oldY=Jt(Ne.css("top")),he._startY=Lt("y",ye),Kt.on(_t("move"),he._onDragMove),Kt.on(_t("end"),he._onDragEnd)}),(0,f.Z)((0,c.Z)(he),"_onDragMove",function(ye){var Ne=he._$el.get(0).offsetWidth,rt=he._$container.get(0).offsetWidth,ft=he._$container.get(0).offsetHeight,It=Lt("x",ye=ye.origEvent)-he._startX,jt=Lt("y",ye)-he._startY;(Math.abs(It)>3||Math.abs(jt)>3)&&(he._isClick=!1);var xr=he._oldX+It,Fr=he._oldY+jt;xr<0?xr=0:xr>rt-Ne&&(xr=rt-Ne),Fr<0?Fr=0:Fr>ft-Ne&&(Fr=ft-Ne),he._$el.css({left:xr,top:Fr})}),(0,f.Z)((0,c.Z)(he),"_onDragEnd",function(ye){var Ne=he._$el;he._isClick&&he.emit("click"),he._onDragMove(ye),Kt.off(_t("move"),he._onDragMove),Kt.off(_t("end"),he._onDragEnd);var rt=he.config;rt.get("rememberPos")&&rt.set("pos",{x:Jt(Ne.css("left")),y:Jt(Ne.css("top"))}),Ne.rmClass("eruda-active")}),he._style=Le(r(9195)),he._$container=ee,he._initTpl(),he._bindEvent(),he._registerListener(),he}return(0,a.Z)(xe,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(ee){this._isOutOfRange(ee)&&(ee=this._getDefPos()),this._$el.css({left:ee.x,top:ee.y}),this.config.set("pos",ee)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){Le.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(ee){ee=ee||this.config.get("pos");var he=this._getDefPos();return ee.x>he.x+10||ee.x<0||ee.y<0||ee.y>he.y+10}},{key:"_registerListener",value:function(){var ee=this;this._scaleListener=function(){return at()(function(){ee._isOutOfRange()&&ee._resetPos()})},A.on(A.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){A.off(A.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var ee=this._$container;ee.append(De('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=ee.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(ee){var he=this.config,ye=he.get("pos"),Ne=this._getDefPos();he.get("rememberPos")&&!ee||(ye=Ne),this.setPos(ye)}},{key:"_bindEvent",value:function(){var ee=this;this._$el.on(_t("start"),this._onDragStart),Zt().on("change",function(){return ee._resetPos(!0)}),window.addEventListener("resize",function(){return ee._resetPos()})}},{key:"initCfg",value:function(ee){var he=this.config=Ge.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});ee.switch(he,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var ee=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-ee,y:window.innerHeight-ee}}}]),xe}(v()),ur=r(4989),nr=rr=new(r.n(ur)())("[Eruda]","warn");rr.formatter=function(Oe,Ce){return Ce.unshift(this.name),Ce};var kr=r(3990),Ur=r.n(kr),dr=r(2520),mr=r.n(dr),ar=r(6930),Yr=r.n(ar),nn=r(4270),gn=r.n(nn),Dr=r(6093),sn=r.n(Dr),mn=r(129),Hr=r(7638);function Kr(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var An=function(Oe){(0,l.Z)(xe,Oe);var Ce=Kr(xe);function xe(ee){var he,ye=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).defaults,Ne=ye===void 0?{}:ye;return(0,o.Z)(this,xe),he=Ce.call(this),(0,f.Z)((0,c.Z)(he),"_checkSafeArea",function(){var rt=(0,c.Z)(he).$container;fn()?rt.addClass(De("safe-area")):rt.rmClass(De("safe-area"))}),(0,f.Z)((0,c.Z)(he),"_updateTabHeight",function(rt){he._tab.setOption("height",40*rt),at()(function(){he._tab.updateSlider()})}),he._defCfg=ce()({transparency:1,displaySize:80,theme:mr()()?"Dark":"Light"},Ne),he._style=Le(r(13)),he.$container=ee,he._isShow=!1,he._opacity=1,he._tools={},he._isResizing=!1,he._resizeTimer=null,he._resizeStartY=0,he._resizeStartSize=0,he._initTpl(),he._initTab(),he._initNotification(),he._initModal(),gn()(function(){return he._checkSafeArea()}),he._bindEvent(),he}return(0,a.Z)(xe,[{key:"show",value:function(){var ee=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){ee._$el.css("opacity",ee._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var ee=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return ee._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(ee){var he=this._tab;if(!(ee instanceof b)){var ye=new b,Ne=ye.init,rt=ye.show,ft=ye.hide,It=ye.destroy;Me()(ee,{init:Ne,show:rt,hide:ft,destroy:It})}var jt=ee.name;return jt?(jt=jt.toLowerCase(),this._tools[jt]?nr.warn("Tool ".concat(jt," already exists")):(this._$tools.prepend('<div id="'.concat(De(jt),'" class="').concat(De(jt+" tool"),'"></div>')),ee.init(this._$tools.find(".".concat(De(jt),".").concat(De("tool"))),this),ee.active=!1,this._tools[jt]=ee,jt==="settings"?he.append({id:jt,title:jt}):he.insert(he.length-1,{id:jt,title:jt}),this)):nr.error("You must specify a name for a tool")}},{key:"remove",value:function(ee){var he=this._tools;if(!he[ee])return nr.warn("Tool ".concat(ee," doesn't exist"));this._tab.remove(ee);var ye=he[ee];if(delete he[ee],ye.active){var Ne=ne()(he);Ne.length>0&&this.showTool(he[$t()(Ne)].name)}return ye.destroy(),this}},{key:"removeAll",value:function(){var ee=this;return B()(this._tools,function(he){return ee.remove(he.name)}),this}},{key:"get",value:function(ee){var he=this._tools[ee];if(he)return he}},{key:"showTool",value:function(ee){if(this._curTool===ee)return this;this._curTool=ee;var he=this._tools,ye=he[ee];if(ye){var Ne={};return B()(he,function(rt){rt.active&&(Ne=rt,rt.active=!1,rt.hide())}),ye.active=!0,ye.show(),this._tab.select(ee),this.emit("showTool",ee,Ne),this}}},{key:"initCfg",value:function(ee){var he=this,ye=this.config=Ge.createCfg("dev-tools",this._defCfg);this._setTransparency(ye.get("transparency")),this._setDisplaySize(ye.get("displaySize")),this._setTheme(ye.get("theme")),ye.on("change",function(Ne,rt){switch(Ne){case"transparency":return he._setTransparency(rt);case"displaySize":return he._setDisplaySize(rt);case"theme":return he._setTheme(rt)}}),ee.separator().select(ye,"theme","Theme",ne()(Le.getThemes())).range(ye,"transparency","Transparency",{min:.2,max:1,step:.01}).range(ye,"displaySize","Display Size",{min:40,max:100,step:1}).button("Restore defaults and reload",function(){var Ne=_r("local"),rt=JSON.parse(JSON.stringify(Ne));B()(rt,function(ft,It){V()(ft)&&Yr()(It,"eruda")&&Ne.removeItem(It)}),window.location.reload()}).separator()}},{key:"notify",value:function(ee,he){this._notification.notify(ee,he)}},{key:"destroy",value:function(){Le.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),A.off(A.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(ee){var he=this.$container;(function(ye){return q()(_e,ye)})(ee)?he.addClass(De("dark")):he.rmClass(De("dark")),Le.setTheme(ee)}},{key:"_setTransparency",value:function(ee){Ur()(ee)&&(this._opacity=ee,this._isShow&&this._$el.css({opacity:ee}))}},{key:"_setDisplaySize",value:function(ee){Ur()(ee)&&this._$el.css({height:ee+"%"})}},{key:"_initTpl",value:function(){var ee=this.$container;ee.append(De(`
      <div class="dev-tools">
        <div class="resizer"></div>
        <div class="tab"></div>
        <div class="tools"></div>
        <div class="notification"></div>
        <div class="modal"></div>
      </div>
      `)),this._$el=ee.find(De(".dev-tools")),this._$tools=this._$el.find(De(".tools"))}},{key:"_initTab",value:function(){var ee=this;this._tab=new Hr.Z(this._$el.find(De(".tab")).get(0),{height:40}),this._tab.on("select",function(he){return ee.showTool(he)})}},{key:"_initNotification",value:function(){this._notification=new(sn())(this._$el.find(De(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){mn.Z.setContainer(this._$el.find(De(".modal")).get(0))}},{key:"_bindEvent",value:function(){var ee=this,he=this._$el.find(De(".resizer")),ye=this._$el.find(De(".nav-bar")),Ne=y()(document),rt=function(It){if(ee._isResizing){It.preventDefault(),It.stopPropagation(),It=It.origEvent;var jt=(ee._resizeStartY-Lt("y",It))/window.innerHeight*100,xr=ee._resizeStartSize+jt;xr<40?xr=40:xr>100&&(xr=100),ee.config.set("displaySize",vr()(xr.toFixed(2)))}},ft=function It(){clearTimeout(ee._resizeTimer),ee._isResizing=!1,he.css("height",10),Ne.off(_t("move"),rt),Ne.off(_t("end"),It)};he.css("height",10),he.on(_t("start"),function(It){It.preventDefault(),It.stopPropagation(),It=It.origEvent,ee._isResizing=!0,ee._resizeStartSize=ee.config.get("displaySize"),ee._resizeStartY=Lt("y",It),he.css("height","100%"),Ne.on(_t("move"),rt),Ne.on(_t("end"),ft)}),ye.on("contextmenu",function(It){return It.preventDefault()}),this.$container.on("click",function(It){return It.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),A.on(A.SCALE,this._updateTabHeight)}}]),xe}(v()),bn=r(1214),Br=r.n(bn),Jr=r(4777),et=r.n(Jr),Ee=r(1754),or=r.n(Ee),Xr=r(5484),on=r.n(Xr),ai=r(3023),cn=r.n(ai),Sn=r(9585),cr=r.n(Sn),zr=r(6156),$n=r.n(zr),zn=r(8816);function Gn(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}on().start();var kn=function(Oe){(0,l.Z)(xe,Oe);var Ce=Gn(xe);function xe(){var ee,he=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).name,ye=he===void 0?"console":he;return(0,o.Z)(this,xe),ee=Ce.call(this),(0,f.Z)((0,c.Z)(ee),"_handleShow",function(){cr()(ee._$el.get(0))||ee._logger.renderViewport()}),(0,f.Z)((0,c.Z)(ee),"_handleErr",function(Ne){ee._logger.error(Ne)}),v().mixin((0,c.Z)(ee)),ee.name=ye,ee._selectedLog=null,ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var ee=this,he=this._origConsole={},ye=window.console;return Hn.forEach(function(Ne){var rt=he[Ne]=Br();ye[Ne]&&(rt=he[Ne]=ye[Ne].bind(ye)),ye[Ne]=function(){ee[Ne].apply(ee,arguments),rt.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(ee,he){this._logger.setGlobal(ee,he)}},{key:"restoreConsole",value:function(){var ee=this;return this._origConsole?(Hn.forEach(function(he){return window.console[he]=ee._origConsole[he]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return on().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return on().rmListener(this._handleErr),this}},{key:"filter",value:function(ee){var he=this._$filterText,ye=this._logger;V()(ee)?(he.text(ee),ye.setOption("filter",br()(ee))):or()(ee)?(he.text(J()(ee)),ye.setOption("filter",ee)):et()(ee)&&(he.text("ƒ"),ye.setOption("filter",ee))}},{key:"destroy",value:function(){this._logger.destroy(),(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&Le.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(ee){var he=this._$el,ye=he.find(De(".js-input"));ee?(ye.show(),he.rmClass(De("js-input-hidden"))):(ye.hide(),he.addClass(De("js-input-hidden")))}},{key:"_appendTpl",value:function(){var ee=this._$el;this._style=Le(r(3191)),ee.append(De(`
      <div class="control">
        <span class="icon-clear clear-console"></span>
        <span class="level active" data-level="all">All</span>
        <span class="level" data-level="info">Info</span>
        <span class="level" data-level="warning">Warning</span>
        <span class="level" data-level="error">Error</span>
        <span class="filter-text"></span>
        <span class="icon-filter filter"></span>
        <span class="icon-copy icon-disabled copy"></span>
      </div>
      <div class="logs-container"></div>
      <div class="js-input">
        <div class="buttons">
          <div class="button cancel">Cancel</div>
          <div class="button execute">Execute</div>
        </div>
        <span class="icon-arrow-right"></span>
        <textarea></textarea>
      </div>
    `));var he=ee.find(De(".js-input")),ye=he.find("textarea"),Ne=he.find(De(".buttons"));ce()(this,{_$control:ee.find(De(".control")),_$logs:ee.find(De(".logs-container")),_$inputContainer:he,_$input:ye,_$inputBtns:Ne,_$filterText:ee.find(De(".filter-text"))})}},{key:"_initLogger",value:function(){var ee=this.config,he=ee.get("maxLogNum");he=he==="infinite"?0:+he;var ye=this._$control.find(De(".level")),Ne=new zn.Z(this._$logs.get(0),{asyncRender:ee.get("asyncRender"),maxNum:he,showHeader:ee.get("displayExtraInfo"),unenumerable:ee.get("displayUnenumerable"),accessGetter:ee.get("displayGetterVal"),lazyEvaluation:ee.get("lazyEvaluation")});Ne.on("optionChange",function(rt,ft){rt==="level"&&ye.each(function(){var It=y()(this),jt=It.data("level");It[jt===ft||jt==="all"&&me()(ft)?"addClass":"rmClass"](De("active"))})}),ee.get("overrideConsole")&&this.overrideConsole(),this._logger=Ne}},{key:"_exposeLogger",value:function(){var ee=this,he=this._logger;["html"].concat(Hn).forEach(function(ye){return ee[ye]=function(){for(var Ne=arguments.length,rt=new Array(Ne),ft=0;ft<Ne;ft++)rt[ft]=arguments[ft];return he[ye].apply(he,rt),ee.emit.apply(ee,[ye].concat(rt)),ee}})}},{key:"_bindEvent",value:function(){var ee=this,he=this._container,ye=this._$input,Ne=this._$inputBtns,rt=this._$control,ft=this._logger,It=this.config;rt.on("click",De(".clear-console"),function(){return ft.clear(!0)}).on("click",De(".level"),function(){var jt=y()(this).data("level");jt==="all"&&(jt=["verbose","info","warning","error"]),ft.setOption("level",jt)}).on("click",De(".filter"),function(){mn.Z.prompt("Filter").then(function(jt){$n()(jt)||ee.filter(jt)})}).on("click",De(".copy"),function(){ee._selectedLog.copy(),he.notify("Copied")}),Ne.on("click",De(".cancel"),function(){return ee._hideInput()}).on("click",De(".execute"),function(){var jt=ye.val().trim();jt!==""&&(ft.evaluate(jt),ye.val("").get(0).blur(),ee._hideInput())}),ye.on("focusin",function(){return ee._showInput()}),ft.on("insert",function(jt){jt.type==="error"&&It.get("displayIfErr")&&he.showTool("console").show()}),ft.on("select",function(jt){ee._selectedLog=jt,rt.find(De(".icon-copy")).rmClass(De("icon-disabled"))}),ft.on("deselect",function(){ee._selectedLog=null,rt.find(De(".icon-copy")).addClass(De("icon-disabled"))}),he.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(De("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(De("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var ee=this.config,he=this._container.get("settings");he&&he.remove(ee,"asyncRender").remove(ee,"jsExecution").remove(ee,"catchGlobalErr").remove(ee,"overrideConsole").remove(ee,"displayExtraInfo").remove(ee,"displayUnenumerable").remove(ee,"displayGetterVal").remove(ee,"lazyEvaluation").remove(ee,"displayIfErr").remove(ee,"maxLogNum").remove(cn()(this.name))}},{key:"_initCfg",value:function(){var ee=this,he=this._container,ye=this.config=Ge.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(ye.get("jsExecution")),ye.get("catchGlobalErr")&&this.catchGlobalErr(),ye.on("change",function(rt,ft){var It=ee._logger;switch(rt){case"asyncRender":return It.setOption("asyncRender",ft);case"jsExecution":return ee._enableJsExecution(ft);case"catchGlobalErr":return ft?ee.catchGlobalErr():ee.ignoreGlobalErr();case"overrideConsole":return ft?ee.overrideConsole():ee.restoreConsole();case"maxLogNum":return It.setOption("maxNum",ft==="infinite"?0:+ft);case"displayExtraInfo":return It.setOption("showHeader",ft);case"displayUnenumerable":return It.setOption("unenumerable",ft);case"displayGetterVal":return It.setOption("accessGetter",ft);case"lazyEvaluation":return It.setOption("lazyEvaluation",ft)}});var Ne=he.get("settings");Ne&&Ne.text(cn()(this.name)).switch(ye,"asyncRender","Asynchronous Rendering").switch(ye,"jsExecution","Enable JavaScript Execution").switch(ye,"catchGlobalErr","Catch Global Errors").switch(ye,"overrideConsole","Override Console").switch(ye,"displayIfErr","Auto Display If Error Occurs").switch(ye,"displayExtraInfo","Display Extra Information").switch(ye,"displayUnenumerable","Display Unenumerable Properties").switch(ye,"displayGetterVal","Access Getter Value").switch(ye,"lazyEvaluation","Lazy Evaluation").select(ye,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),xe}(b),Hn=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],ri=r(4677),tn=r.n(ri),qn=r(8887),en=r.n(qn),gr=r(8901),Nr=r.n(gr),Er=r(2327),jr=r.n(Er),ii=r(4219),Cn=r.n(ii),Rn=r(7756),vn=r.n(Rn);function Qn(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var xn=function(Oe){(0,l.Z)(xe,Oe);var Ce=Qn(xe);function xe(ee,he){var ye;return(0,o.Z)(this,xe),ye=Ce.call(this),(0,f.Z)((0,c.Z)(ye),"_copyRes",function(){var Ne=ye._detailData,rt="".concat(Ne.method," ").concat(Ne.url," ").concat(Ne.status,`
`);en()(Ne.data)||(rt+=`
Request Data

`,rt+="".concat(Ne.data,`
`)),en()(Ne.reqHeaders)||(rt+=`
Request Headers

`,B()(Ne.reqHeaders,function(ft,It){return rt+="".concat(It,": ").concat(ft,`
`)})),en()(Ne.resHeaders)||(rt+=`
Response Headers

`,B()(Ne.resHeaders,function(ft,It){return rt+="".concat(It,": ").concat(ft,`
`)})),Ne.resTxt&&(rt+=`
`.concat(Ne.resTxt,`
`)),jr()(rt),ye._devtools.notify("Copied")}),ye._$container=ee,ye._devtools=he,ye._detailData={},ye._bindEvent(),ye}return(0,a.Z)(xe,[{key:"show",value:function(ee){ee.resTxt&&br()(ee.resTxt)===""&&delete ee.resTxt,en()(ee.resHeaders)&&delete ee.resHeaders,en()(ee.reqHeaders)&&delete ee.reqHeaders;var he="";ee.data&&(he='<pre class="'.concat(De("data"),'">').concat(Nr()(ee.data),"</pre>"));var ye="<tr><td>Empty</td></tr>";ee.reqHeaders&&(ye=lt()(ee.reqHeaders,function(jt,xr){return`<tr>
          <td class="`.concat(De("key"),'">').concat(Nr()(xr),`</td>
          <td>`).concat(Nr()(jt),`</td>
        </tr>`)}).join(""));var Ne="<tr><td>Empty</td></tr>";ee.resHeaders&&(Ne=lt()(ee.resHeaders,function(jt,xr){return`<tr>
          <td class="`.concat(De("key"),'">').concat(Nr()(xr),`</td>
          <td>`).concat(Nr()(jt),`</td>
        </tr>`)}).join(""));var rt="";if(ee.resTxt){var ft=ee.resTxt;ft.length>Mn&&(ft=vn()(ft,Mn)),rt='<pre class="'.concat(De("response"),'">').concat(Nr()(ft),"</pre>")}var It='<div class="'.concat(De("control"),`">
      <span class="`).concat(De("icon-arrow-left back"),`"></span>
      <span class="`).concat(De("icon-delete back"),`"></span>
      <span class="`).concat(De("url"),'">').concat(Nr()(ee.url),`</span>
      <span class="`).concat(De("icon-copy copy-res"),`"></span>
    </div>
    <div class="`).concat(De("http"),`">
      `).concat(he,`
      <div class="`).concat(De("section"),`">
        <h2>Response Headers</h2>
        <table class="`).concat(De("headers"),`">
          <tbody>
            `).concat(Ne,`
          </tbody>
        </table>
      </div>
      <div class="`).concat(De("section"),`">
        <h2>Request Headers</h2>
        <table class="`).concat(De("headers"),`">
          <tbody>
            `).concat(ye,`
          </tbody>
        </table>
      </div>
      `).concat(rt,`
    </div>`);this._$container.html(It).show(),this._detailData=ee}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var ee=this,he=this._devtools;this._$container.on("click",De(".back"),function(){return ee.hide()}).on("click",De(".copy-res"),this._copyRes).on("click",De(".http .response"),function(){var Ne=ee._detailData,rt=Ne.resTxt;if(Cn()(rt))return ye("object",rt);switch(Ne.subType){case"css":return ye("css",rt);case"html":return ye("html",rt);case"javascript":return ye("js",rt);case"json":return ye("object",rt)}return Ne.type==="image"?ye("img",Ne.url):void 0});var ye=function(Ne,rt){var ft=he.get("sources");ft&&(ft.set(Ne,rt),he.showTool("sources"))}}}]),xe}(v()),Mn=1e5,Yn=r(2439),Ln=r.n(Yn),Bn=r(9143),jn=r.n(Bn),hn=r(2139),ni=r(8689),Xn=r(7935),tr=r(9119);function Ar(Oe,Ce){var xe=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(Oe);Ce&&(ee=ee.filter(function(he){return Object.getOwnPropertyDescriptor(Oe,he).enumerable})),xe.push.apply(xe,ee)}return xe}function Qt(Oe){for(var Ce=1;Ce<arguments.length;Ce++){var xe=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?Ar(Object(xe),!0).forEach(function(ee){(0,f.Z)(Oe,ee,xe[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(xe)):Ar(Object(xe)).forEach(function(ee){Object.defineProperty(Oe,ee,Object.getOwnPropertyDescriptor(xe,ee))})}return Oe}var be=new(jn());be.register("Network",hn),be.register("Overlay",ni),be.register("DOM",Qt(Qt({},Xn),{},{getNodeId:Xn.getDOMNodeId,getNode:Xn.getDOMNode})),be.register("Storage",tr);var ve=be,Fe=r(5564),tt=r(242),Bt=r.n(tt),Et=r(2765),He=r.n(Et),At=r(6954),qt=r.n(At),Or=r(7913),Rr=r.n(Or);function Wr(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var an=function(Oe){(0,l.Z)(xe,Oe);var Ce=Wr(xe);function xe(){var ee;return(0,o.Z)(this,xe),ee=Ce.call(this),(0,f.Z)((0,c.Z)(ee),"_reqWillBeSent",function(he){if(ee._isRecording){var ye,Ne={name:ir(he.request.url),url:he.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:he.request.postData,method:he.request.method,startTime:1e3*he.timestamp,time:0,resTxt:"",done:!1,reqHeaders:he.request.headers||{},resHeaders:{}};Ne.render=function(){var rt={name:Ne.name,method:Ne.method,status:Ne.status,type:Ne.subType,size:Ne.size,time:Ne.displayTime};ye?(ye.data=rt,ye.render()):(ye=ee._requestDataGrid.append(rt,{selectable:!0}),y()(ye.container).data("id",he.requestId)),Ne.hasErr&&y()(ye.container).addClass(De("request-error"))},Ne.render(),ee._requests[he.requestId]=Ne}}),(0,f.Z)((0,c.Z)(ee),"_resReceivedExtraInfo",function(he){var ye=ee._requests[he.requestId];ee._isRecording&&ye&&(ye.resHeaders=he.headers,ee._updateType(ye),ye.render())}),(0,f.Z)((0,c.Z)(ee),"_resReceived",function(he){var ye=ee._requests[he.requestId];if(ee._isRecording&&ye){var Ne=he.response,rt=Ne.status,ft=Ne.headers;ye.status=rt,(rt<200||rt>=300)&&(ye.hasErr=!0),ft&&(ye.resHeaders=ft,ee._updateType(ye)),ye.render()}}),(0,f.Z)((0,c.Z)(ee),"_loadingFinished",function(he){var ye=ee._requests[he.requestId];if(ee._isRecording&&ye){var Ne=1e3*he.timestamp;ye.time=Ne-ye.startTime,ye.displayTime=tn()(ye.time),ye.size=he.encodedDataLength,ye.done=!0,ye.resTxt=ve.domain("Network").getResponseBody({requestId:he.requestId}).body,ye.render()}}),(0,f.Z)((0,c.Z)(ee),"_copyCurl",function(){var he=ee._selectedRequest;jr()(function(ye){var Ne=qt()();Ne==="windows"&&(Ne="win");var rt=[],ft=Rr()(["accept-encoding","host","method","path","scheme","version"]),It=Ne==="win"?function(Wn){var ci=/[\r\n]/.test(Wn)?'^"':'"';return ci+Wn.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'\/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,`^

`)+ci}:function(Wn){return/[\0-\x1F\x7F-\x9F!]|\'/.test(Wn)?"$'"+Wn.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(ci){for(var hi=ci.charCodeAt(0).toString(16);hi.length<4;)hi="0"+hi;return"\\u"+hi})+"'":"'"+Wn+"'"};rt.push(It(ye.url()).replace(/[[{}\]]/g,"\\$&"));var jt="GET",xr=[],Fr=ye.requestFormData();Fr&&(xr.push("--data-raw "+It(Fr)),ft["content-length"]=!0,jt="POST"),ye.requestMethod!==jt&&rt.push("-X "+It(ye.requestMethod));for(var Gr=ye.requestHeaders(),dn=0;dn<Gr.length;dn++){var wn=Gr[dn],Un=wn.name.replace(/^:/,"");ft[Un.toLowerCase()]||rt.push("-H "+It(Un+": "+wn.value))}return(rt=rt.concat(xr)).push("--compressed"),"curl "+rt.join(rt.length>=3?Ne==="win"?` ^
  `:` \\
  `:" ")}({requestMethod:he.method,url:function(){return he.url},requestFormData:function(){return he.data},requestHeaders:function(){var ye=he.reqHeaders||{};return ce()(ye,{"User-Agent":navigator.userAgent,Referer:location.href}),lt()(ye,function(Ne,rt){return{name:rt,value:Ne}})}})),ee._container.notify("Copied")}),(0,f.Z)((0,c.Z)(ee),"_toggleRecording",function(){ee._$control.find(De(".record")).toggleClass(De("recording")),ee._isRecording=!ee._isRecording}),(0,f.Z)((0,c.Z)(ee),"_showDetail",function(){ee._selectedRequest&&(ee._splitMode&&ee._$network.css("width","50%"),ee._detail.show(ee._selectedRequest))}),(0,f.Z)((0,c.Z)(ee),"_updateScale",function(he){ee._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*he,"px)"))}),ee._style=Le(r(3180)),ee.name="network",ee._requests={},ee._selectedRequest=null,ee._isRecording=!0,ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._initTpl(),this._detail=new xn(this._$detail,he),this._splitMediaQuery=new(He())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new Fe.Z(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new(Bt())(ee.get(0)),this._bindEvent()}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"show",this).call(this),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var ee=[];return B()(this._requests,function(he){ee.push(he)}),ee}},{key:"_updateDataGridHeight",value:function(){var ee=this._$el.offset().height-this._$control.offset().height;this._requestDataGrid.setOption({minHeight:ee,maxHeight:ee})}},{key:"_updateType",value:function(ee){var he=function(rt){if(!rt)return"unknown";var ft=rt.split(";")[0].split("/");return{type:ft[0],subType:$t()(ft)}}(ee.resHeaders["content-type"]||""),ye=he.type,Ne=he.subType;ee.type=ye,ee.subType=Ne}},{key:"_updateButtons",value:function(){var ee=this._$control,he=ee.find(De(".show-detail")),ye=ee.find(De(".copy-curl")),Ne=De("icon-disabled");he.addClass(Ne),ye.addClass(Ne),this._selectedRequest&&(he.rmClass(Ne),ye.rmClass(Ne))}},{key:"_bindEvent",value:function(){var ee=this,he=this._$control,ye=this._$filterText,Ne=this._requestDataGrid,rt=this;he.on("click",De(".clear-request"),function(){return ee.clear()}).on("click",De(".show-detail"),this._showDetail).on("click",De(".copy-curl"),this._copyCurl).on("click",De(".record"),this._toggleRecording).on("click",De(".filter"),function(){mn.Z.prompt("Filter").then(function(It){$n()(It)||(ye.text(It),Ne.setOption("filter",br()(It)))})}),Ne.on("select",function(It){var jt=y()(It.container).data("id"),xr=rt._requests[jt];ee._selectedRequest=xr,ee._updateButtons(),ee._splitMode&&ee._showDetail()}),Ne.on("deselect",function(){ee._selectedRequest=null,ee._updateButtons(),ee._detail.hide()}),this._resizeSensor.addListener(Ln()(function(){return ee._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){ee._detail.hide(),ee._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){ee._detail.hide(),ee._splitMode=!1}),this._detail.on("hide",function(){ee._splitMode&&ee._$network.css("width","100%")}),ve.domain("Network").enable();var ft=ve.domain("Network");ft.on("requestWillBeSent",this._reqWillBeSent),ft.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),ft.on("responseReceived",this._resReceived),ft.on("loadingFinished",this._loadingFinished),A.on(A.SCALE,this._updateScale)}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),this._resizeSensor.destroy(),Le.remove(this._style),this._splitMediaQuery.removeAllListeners();var ee=ve.domain("Network");ee.off("requestWillBeSent",this._reqWillBeSent),ee.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),ee.off("responseReceived",this._resReceived),ee.off("loadingFinished",this._loadingFinished),A.off(A.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var ee=this._$el;ee.html(De(`<div class="network">
        <div class="control">
          <span class="icon-record record recording"></span>
          <span class="icon-clear clear-request"></span>
          <span class="icon-eye icon-disabled show-detail"></span>
          <span class="icon-copy icon-disabled copy-curl"></span>
          <span class="filter-text"></span>
          <span class="icon-filter filter"></span>
        </div>
        <div class="requests"></div>
      </div>
      <div class="detail"></div>`)),this._$network=ee.find(De(".network")),this._$detail=ee.find(De(".detail")),this._$requests=ee.find(De(".requests")),this._$control=ee.find(De(".control")),this._$filterText=ee.find(De(".filter-text"))}}]),xe}(b),Sr=r(9833),Ir=r.n(Sr),Nt=r(9956),un=r.n(Nt),pr=r(8209),Nn=r(3063),On=r.n(Nn),Mr=r(3487),sr=r.n(Mr),Tn=r(42),Pr=r.n(Tn),En=r(4696),rn=r.n(En),Jn=r(7653),_n=r.n(Jn),Vn=r(8613),ei=r.n(Vn),Fn=r(2289),Zn=r.n(Fn),Kn=r(3629),Zr=r.n(Kn);function Dn(Oe){for(var Ce={},xe=0,ee=Oe.length;xe<ee;xe++){var he=Oe[xe];Oe[he]!=="initial"&&(Ce[he]=Oe[he])}return function(ye){return Zr()(ye,{comparator:function(Ne,rt){for(var ft=Ne.length,It=rt.length,jt=ft>It?It:ft,xr=0;xr<jt;xr++){var Fr=I(Ne.charCodeAt(xr),rt.charCodeAt(xr));if(Fr!==0)return Fr}return ft>It?1:ft<It?-1:0}})}(Ce)}var qr=Element.prototype,ti=function(){return!1};qr.webkitMatchesSelector?ti=function(Oe,Ce){return Oe.webkitMatchesSelector(Ce)}:qr.mozMatchesSelector&&(ti=function(Oe,Ce){return Oe.mozMatchesSelector(Ce)});var D=function(){function Oe(Ce){(0,o.Z)(this,Oe),this._el=Ce}return(0,a.Z)(Oe,[{key:"getComputedStyle",value:function(){return Dn(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var Ce=this,xe=[];return B()(document.styleSheets,function(ee){try{if(!ee.cssRules)return}catch{return}B()(ee.cssRules,function(he){var ye=!1;try{ye=Ce._elMatchesSel(he.selectorText)}catch{}ye&&xe.push({selectorText:he.selectorText,style:Dn(he.style)})})}),xe}},{key:"_elMatchesSel",value:function(Ce){return ti(this._el,Ce)}}]),Oe}();function I(Oe,Ce){return(Oe=H(Oe))>(Ce=H(Ce))?1:Oe<Ce?-1:0}function H(Oe){return Oe===45?123:Oe}var W=r(422);function X(Oe){var Ce=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).noAttr,xe=Ce!==void 0&&Ce;if(Oe.nodeType===Node.TEXT_NODE)return'<span class="'.concat(De("tag-name-color"),'">(text)</span>');if(Oe.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(De("tag-name-color"),'"><!--></span>');var ee=Oe.id,he=Oe.className,ye=Oe.attributes,Ne='<span class="eruda-tag-name-color">'.concat(Oe.tagName.toLowerCase(),"</span>");if(ee!==""&&(Ne+='<span class="eruda-function-color">#'.concat(ee,"</span>")),V()(he)){var rt="";B()(he.split(/\s+/g),function(ft){ft.trim()!==""&&(rt+=".".concat(ft))}),Ne+='<span class="eruda-attribute-name-color">'.concat(rt,"</span>")}return xe||B()(ye,function(ft){var It=ft.name;It!=="id"&&It!=="class"&&It!=="style"&&(Ne+=' <span class="eruda-attribute-name-color">'.concat(It,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(ft.value,'</span><span class="eruda-operator-color">"</span>'))}),Ne}var re=function(){function Oe(Ce,xe){var ee=this;(0,o.Z)(this,Oe),(0,f.Z)(this,"hide",function(){ee._$container.hide(),ee._disableObserver(),ve.domain("Overlay").hideHighlight()}),this._$container=Ce,this._devtools=xe,this._curEl=document.documentElement,this._bindEvent(),this._initObserver(),this._initCfg(),this._initTpl()}return(0,a.Z)(Oe,[{key:"show",value:function(Ce){this._curEl=Ce,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render();var xe=ve.domain("DOM").getNodeId({node:Ce}).nodeId;ve.domain("Overlay").highlightNode({nodeId:xe,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var Ce=Tt(),xe=this._origAddEvent=Ce.addEventListener,ee=this._origRmEvent=Ce.removeEventListener;Ce.addEventListener=function(he,ye,Ne){(function(rt,ft,It){var jt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!Ir()(rt)||!et()(It)||!rn()(jt))){var xr=rt.erudaEvents=rt.erudaEvents||{};xr[ft]=xr[ft]||[],xr[ft].push({listener:It,listenerStr:It.toString(),useCapture:jt})}})(this,he,ye,Ne),xe.apply(this,arguments)},Ce.removeEventListener=function(he,ye,Ne){(function(rt,ft,It){var jt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!Ir()(rt)||!et()(It)||!rn()(jt))){var xr=rt.erudaEvents;if(!(!xr||!xr[ft])){for(var Fr=xr[ft],Gr=0,dn=Fr.length;Gr<dn;Gr++)if(Fr[Gr].listener===It){Fr.splice(Gr,1);break}Fr.length===0&&delete xr[ft],ne()(xr).length===0&&delete rt.erudaEvents}}})(this,he,ye,Ne),ee.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var Ce=Tt();this._origAddEvent&&(Ce.addEventListener=this._origAddEvent),this._origRmEvent&&(Ce.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var Ce=this._$container,xe='<div class="'.concat(De("control"),`">
      <span class="`).concat(De("icon-arrow-left back"),`"></span>
      <span class="`).concat(De("element-name"),`"></span>
      <span class="`).concat(De("icon-refresh refresh"),`"></span>
    </div>
    <div class="`).concat(De("element"),`">
      <div class="`).concat(De("attributes section"),`"></div>
      <div class="`).concat(De("styles section"),`"></div>
      <div class="`).concat(De("computed-style section"),`"></div>
      <div class="`).concat(De("listeners section"),`"></div>
    </div>`);Ce.html(xe),this._$elementName=Ce.find(De(".element-name")),this._$attributes=Ce.find(De(".attributes")),this._$styles=Ce.find(De(".styles")),this._$listeners=Ce.find(De(".listeners")),this._$computedStyle=Ce.find(De(".computed-style"));var ee=ei()("div");this._$boxModel=y()(ee),this._boxModel=new W.Z(ee)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var Ce=this._getData(this._curEl),xe=this._$attributes,ee=this._$elementName,he=this._$styles,ye=this._$computedStyle,Ne=this._$listeners;ee.html(Ce.name);var rt="<tr><td>Empty</td></tr>";en()(Ce.attributes)||(rt=lt()(Ce.attributes,function(Gr){var dn=Gr.name,wn=Gr.value;return`<tr>
          <td class="`.concat(De("attribute-name-color"),'">').concat(Nr()(dn),`</td>
          <td class="`).concat(De("string-color"),'">').concat(wn,`</td>
        </tr>`)}).join("")),rt=`<h2>Attributes</h2>
    <div class="`.concat(De("table-wrapper"),`">
      <table>
        <tbody>
          `).concat(rt,` 
        </tbody>
      </table>
    </div>`),xe.html(rt);var ft="";if(en()(Ce.styles))he.hide();else{var It=lt()(Ce.styles,function(Gr){var dn=Gr.selectorText,wn=Gr.style;return wn=lt()(wn,function(Un,Wn){return'<div class="'.concat(De("rule"),'"><span>').concat(Nr()(Wn),"</span>: ").concat(Un,";</div>")}).join(""),'<div class="'.concat(De("style-rules"),`">
          <div>`).concat(Nr()(dn),` {</div>
            `).concat(wn,`
          <div>}</div>
        </div>`)}).join("");ft=`<h2>Styles</h2>
      <div class="`.concat(De("style-wrapper"),`">
        `).concat(It,`
      </div>`),he.html(ft).show()}var jt="";if(Ce.computedStyle){var xr=De(`<div class="btn toggle-all-computed-style">
        <span class="icon-expand"></span>
      </div>`);Ce.rmDefComputedStyle&&(xr=De(`<div class="btn toggle-all-computed-style">
          <span class="icon-compress"></span>
        </div>`)),jt=`<h2>
        Computed Style
        `.concat(xr,`
        <div class="`).concat(De("btn computed-style-search"),`">
          <span class="`).concat(De("icon-filter"),`"></span>
        </div>
        `).concat(Ce.computedStyleSearchKeyword?'<div class="'.concat(De("btn filter-text"),'">').concat(Nr()(Ce.computedStyleSearchKeyword),"</div>"):"",`
      </h2>
      <div class="`).concat(De("box-model"),`"></div>
      <div class="`).concat(De("table-wrapper"),`">
        <table>
          <tbody>
          `).concat(lt()(Ce.computedStyle,function(Gr,dn){return`<tr>
              <td class="`.concat(De("key"),'">').concat(Nr()(dn),`</td>
              <td>`).concat(Gr,`</td>
            </tr>`)}).join(""),`
          </tbody>
        </table>
      </div>`),ye.html(jt).show(),this._boxModel.setOption("element",this._curEl),ye.find(De(".box-model")).append(this._$boxModel.get(0))}else ye.text("").hide();var Fr="";Ce.listeners?(Fr=lt()(Ce.listeners,function(Gr,dn){return Gr=lt()(Gr,function(wn){var Un=wn.useCapture,Wn=wn.listenerStr;return"<li ".concat(Un?'class="'.concat(De("capture"),'"'):"",">").concat(Nr()(Wn),"</li>")}).join(""),'<div class="'.concat(De("listener"),`">
          <div class="`).concat(De("listener-type"),'">').concat(Nr()(dn),`</div>
          <ul class="`).concat(De("listener-content"),`">
            `).concat(Gr,`
          </ul>
        </div>`)}).join(""),Fr=`<h2>Event Listeners</h2>
      <div class="`.concat(De("listener-wrapper"),`">
        `).concat(Fr,` 
      </div>`),Ne.html(Fr).show()):Ne.hide(),this._$container.show()}},{key:"_getData",value:function(Ce){var xe={},ee=new D(Ce),he=Ce.className,ye=Ce.id,Ne=Ce.attributes,rt=Ce.tagName;xe.computedStyleSearchKeyword=this._computedStyleSearchKeyword,xe.attributes=fe(Ne),xe.name=X({tagName:rt,id:ye,className:he,attributes:Ne});var ft=Ce.erudaEvents;if(ft&&ne()(ft).length!==0&&(xe.listeners=ft),nt(rt))return xe;var It=ee.getComputedStyle(),jt=ee.getMatchedCSSRules();jt.unshift(function(Fr){for(var Gr={selectorText:"element.style",style:{}},dn=0,wn=Fr.length;dn<wn;dn++){var Un=Fr[dn];Gr.style[Un]=Fr[Un]}return Gr}(Ce.style)),jt.forEach(function(Fr){return se(Fr.style)}),xe.styles=jt,this._rmDefComputedStyle&&(It=function(Fr,Gr){var dn={},wn=["display","width","height"];return B()(Gr,function(Un){wn=wn.concat(ne()(Un.style))}),wn=Pr()(wn),B()(Fr,function(Un,Wn){q()(wn,Wn)&&(dn[Wn]=Un)}),dn}(It,jt)),xe.rmDefComputedStyle=this._rmDefComputedStyle;var xr=On()(xe.computedStyleSearchKeyword);return xr&&(It=sr()(It,function(Fr,Gr){return q()(Gr,xr)||q()(Fr,xr)})),se(It),xe.computedStyle=It,xe}},{key:"_bindEvent",value:function(){var Ce=this,xe=this._devtools;this._$container.on("click",De(".toggle-all-computed-style"),function(){return Ce._toggleAllComputedStyle()}).on("click",De(".computed-style-search"),function(){mn.Z.prompt("Filter").then(function(ee){$n()(ee)||(ee=br()(ee),Ce._computedStyleSearchKeyword=ee,Ce._render())})}).on("click",".eruda-listener-content",function(){var ee=y()(this).text(),he=xe.get("sources");he&&(he.set("js",ee),xe.showTool("sources"))}).on("click",De(".element-name"),function(){var ee=xe.get("sources");ee&&(ee.set("object",Ce._curEl),xe.showTool("sources"))}).on("click",De(".back"),this.hide).on("click",De(".refresh"),function(){Ce._render(),xe.notify("Refreshed")})}},{key:"_initObserver",value:function(){var Ce=this;this._observer=new(Zn())(function(xe){B()(xe,function(ee){return Ce._handleMutation(ee)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(Ce){if(!gt(Ce.target)&&Ce.type==="attributes"){if(Ce.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var Ce=this.config,xe=this._devtools.get("settings");xe&&xe.remove(Ce,"overrideEventTarget").remove(Ce,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Ce=this,xe=this.config=Ge.createCfg("elements",{overrideEventTarget:!0});xe.get("overrideEventTarget")&&this.overrideEventTarget(),xe.on("change",function(he,ye){if(he==="overrideEventTarget")return ye?Ce.overrideEventTarget():Ce.restoreEventTarget()});var ee=this._devtools.get("settings");ee&&(ee.text("Elements").switch(xe,"overrideEventTarget","Catch Event Listeners"),ee.separator())}}]),Oe}();function se(Oe){B()(Oe,function(Ce,xe){return Oe[xe]=je(Ce)})}var fe=function(Oe){return lt()(Oe,function(Ce){var xe=Ce.value,ee=Ce.name;return xe=Nr()(xe),(ee==="src"||ee==="href")&&!Yr()(xe,"data")&&(xe=Ft(xe)),ee==="style"&&(xe=je(xe)),{name:ee,value:xe}})},le=/rgba?\((.*?)\)/g,ke=/url\("?(.*?)"?\)/g;function je(Oe){return(Oe=J()(Oe)).replace(le,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(ke,function(Ce,xe){return'url("'.concat(Ft(xe),'")')})}var Ke=["script","style","meta","title","link","head"],nt=function(Oe){return Ke.indexOf(Oe.toLowerCase())>-1},Ft=function(Oe){return'<a href="'.concat(Oe,'" target="_blank">').concat(Oe,"</a>")},Tt=function(){return _n()(window,"EventTarget.prototype")||window.Node.prototype};function Ht(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var St=function(Oe){(0,l.Z)(xe,Oe);var Ce=Ht(xe);function xe(){var ee;return(0,o.Z)(this,xe),ee=Ce.call(this),(0,f.Z)((0,c.Z)(ee),"_showDetail",function(){ee._isShow&&ee._curNode&&(ee._curNode.nodeType===Node.ELEMENT_NODE?ee._detail.show(ee._curNode):ee._detail.show(ee._curNode.parentNode))}),(0,f.Z)((0,c.Z)(ee),"_back",function(){if(ee._curNode!==ee._htmlEl){for(var he=ee._curParentQueue,ye=he.shift();!ae(ye);)ye=he.shift();ee.set(ye)}}),(0,f.Z)((0,c.Z)(ee),"_updateScale",function(he){ee._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*he,"px)"))}),(0,f.Z)((0,c.Z)(ee),"_deleteNode",function(){var he=ee._curNode;he.parentNode&&he.parentNode.removeChild(he)}),(0,f.Z)((0,c.Z)(ee),"_copyNode",function(){var he=ee._curNode;he.nodeType===Node.ELEMENT_NODE?jr()(he.outerHTML):jr()(he.nodeValue),ee._container.notify("Copied")}),(0,f.Z)((0,c.Z)(ee),"_toggleSelect",function(){ee._$el.find(De(".select")).toggleClass(De("active")),ee._selectElement=!ee._selectElement,ee._selectElement?(ve.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!un()(),showRulers:!1,showAccessibilityInfo:!un()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),ee._container.hide()):(ve.domain("Overlay").setInspectMode({mode:"none"}),ve.domain("Overlay").hideHighlight())}),(0,f.Z)((0,c.Z)(ee),"_inspectNodeRequested",function(he){var ye=he.backendNodeId;ee._container.show(),ee._toggleSelect();var Ne=ve.domain("DOM").getNode({nodeId:ye}).node;ee.select(Ne)}),(0,f.Z)((0,c.Z)(ee),"_setNode",function(he){if(he!==ee._curNode){ee._curNode=he,ee._renderCrumbs();for(var ye=[],Ne=he.parentNode;Ne;)ye.push(Ne),Ne=Ne.parentNode;ee._curParentQueue=ye,ee._splitMode&&ee._showDetail(),ee._updateButtons(),ee._updateHistory()}}),ee._style=Le(r(5896)),ee.name="elements",ee._selectElement=!1,ee._observeElement=!0,ee._history=[],v().mixin((0,c.Z)(ee)),ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){var ye=this;(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new re(this._$detail,he),this.config=this._detail.config,this._splitMediaQuery=new(He())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new pr.Z(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(Ne){return gt(Ne)||it(Ne)}}),this._domViewer.expand(),this._bindEvent(),ve.domain("Overlay").enable(),at()(function(){return ye._updateHistory()})}},{key:"show",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"show",this).call(this),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"hide",this).call(this),this._isShow=!1,ve.domain("Overlay").hideHighlight()}},{key:"set",value:function(ee){return this.select(ee)}},{key:"select",value:function(ee){return this._domViewer.select(ee),this._setNode(ee),this.emit("change",ee),this}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),A.off(A.SCALE,this._updateScale),Le.remove(this._style),this._detail.destroy(),ve.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),ve.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var ee=this._$control,he=ee.find(De(".show-detail")),ye=ee.find(De(".copy-node")),Ne=ee.find(De(".delete-node")),rt=De("icon-disabled");he.addClass(rt),ye.addClass(rt),Ne.addClass(rt);var ft=this._curNode;ft&&(ft!==document.documentElement&&ft!==document.body&&Ne.rmClass(rt),ye.rmClass(rt),ft.nodeType===Node.ELEMENT_NODE&&he.rmClass(rt))}},{key:"_initTpl",value:function(){var ee=this._$el;ee.html(De(`<div class="elements">
        <div class="control">
          <span class="icon icon-select select"></span>
          <span class="icon icon-eye show-detail"></span>
          <span class="icon icon-copy copy-node"></span>
          <span class="icon icon-delete delete-node"></span>
        </div>
        <div class="dom-viewer-container">
          <div class="dom-viewer"></div>
        </div>
        <div class="crumbs"></div>
      </div>
      <div class="detail"></div>`)),this._$detail=ee.find(De(".detail")),this._$domViewer=ee.find(De(".dom-viewer")),this._$control=ee.find(De(".control")),this._$crumbs=ee.find(De(".crumbs"))}},{key:"_renderCrumbs",value:function(){var ee=function(ye){for(var Ne=[],rt=0;ye;)Ne.push({text:X(ye,{noAttr:!0}),idx:rt++}),ye=ye.parentElement;return Ne.reverse()}(this._curNode),he="";en()(ee)||(he=lt()(ee,function(ye){var Ne=ye.text,rt=ye.idx;return'<li class="'.concat(De("crumb"),'" data-idx="').concat(rt,'">').concat(Ne,"</div></li>")}).join("")),this._$crumbs.html(he)}},{key:"_bindEvent",value:function(){var ee=this,he=this;this._$el.on("click",De(".crumb"),function(){for(var ye=vr()(y()(this).data("idx")),Ne=he._curNode;ye--&&Ne.parentElement;)Ne=Ne.parentElement;ae(Ne)&&he.select(Ne)}),this._$control.on("click",De(".select"),this._toggleSelect).on("click",De(".show-detail"),this._showDetail).on("click",De(".copy-node"),this._copyNode).on("click",De(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),ve.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){ee._splitMode=!0,ee._showDetail()}),this._splitMediaQuery.on("unmatch",function(){ee._splitMode=!1,ee._detail.hide()}),A.on(A.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var ee=this._container.get("console");if(ee){var he=this._history;he.unshift(this._curNode),he.length>5&&he.pop();for(var ye=0;ye<5;ye++)ee.setGlobal("$".concat(ye),he[ye])}}}]),xe}(b),ae=function(Oe){return Ir()(Oe)&&Oe.parentNode},u=r(8847),p=r.n(u),_=r(9622),E=r.n(_),T=null,R=[{name:"Border All",fn:function(){if(T)return Le.remove(T),void(T=null);T=Le("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var Oe=new(Ot());Oe.setQuery("timestamp",p()()),window.location.replace(Oe.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){mn.Z.prompt("Enter the text").then(function(Oe){Oe&&br()(Oe)!==""&&function(Ce){var xe=document.body,ee=new RegExp(Ce,"ig");N(xe,function(he){var ye=y()(he);if(ye.hasClass("eruda-search-highlight-block"))return document.createTextNode(ye.text())}),N(xe,function(he){if(he.nodeType===3){var ye=he.nodeValue;if((ye=ye.replace(ee,function(rt){return'<span class="eruda-keyword">'.concat(rt,"</span>")}))!==he.nodeValue){var Ne=y()(document.createElement("div"));return Ne.html(ye),Ne.addClass("eruda-search-highlight-block"),Ne.get(0)}}})}(Oe)})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var Oe=document.body;Oe.contentEditable=Oe.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var Oe=document.body,Ce=document.documentElement,xe=y()(Oe);if(xe.data("scaled"))window.scrollTo(0,+xe.data("scaled")),xe.rmAttr("data-scaled"),xe.css("transform","none");else{var ee=Math.max(Oe.scrollHeight,Oe.offsetHeight,Ce.clientHeight,Ce.scrollHeight,Ce.offsetHeight),he=Math.max(document.documentElement.clientHeight,window.innerHeight||0),ye=he/ee;xe.css("transform","scale(".concat(ye,")")),xe.data("scaled",window.scrollY),window.scrollTo(0,ee/2-he/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Monitor Plugin",fn:function(){z("monitor")},desc:"Display page fps and memory"},{name:"Load Features Plugin",fn:function(){z("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){z("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){z("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){z("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){z("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){z("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){z("touches")},desc:"Visualize screen touches"}];function N(Oe,Ce){var xe=Oe.childNodes;if(!gt(Oe)){for(var ee=0,he=xe.length;ee<he;ee++){var ye=N(xe[ee],Ce);ye&&Oe.replaceChild(ye,xe[ee])}return Ce(Oe)}}function z(Oe){var Ce="eruda"+cn()(Oe);if(!window[Ce]){var xe=location.protocol;Yr()(xe,"http")||(xe="http:"),E()("".concat(xe,"//cdn.jsdelivr.net/npm/eruda-").concat(Oe,"@").concat(Z[Oe]),function(ee){if(!ee||!window[Ce])return nr.error("Fail to load plugin "+Oe);A.emit(A.ADD,window[Ce]),A.emit(A.SHOW,Oe)})}}Le(r(7346),document.head);var Z={monitor:"1.0.0",features:"2.0.0",timing:"2.0.1",code:"2.1.0",benchmark:"2.0.1",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"},oe=r(5852),ue=r.n(oe);function ge(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var Ae=function(Oe){(0,l.Z)(xe,Oe);var Ce=ge(xe);function xe(){var ee;return(0,o.Z)(this,xe),(ee=Ce.call(this))._style=Le(r(5571)),ee.name="snippets",ee._snippets=[],ee}return(0,a.Z)(xe,[{key:"init",value:function(ee){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),Le.remove(this._style)}},{key:"add",value:function(ee,he,ye){return this._snippets.push({name:ee,fn:he,desc:ye}),this._render(),this}},{key:"remove",value:function(ee){return ue()(this._snippets,function(he){return he.name===ee}),this._render(),this}},{key:"run",value:function(ee){for(var he=this._snippets,ye=0,Ne=he.length;ye<Ne;ye++)he[ye].name===ee&&this._run(ye);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var ee=this;this._$el.on("click",".eruda-run",function(){var he=y()(this).data("idx");ee._run(he)})}},{key:"_run",value:function(ee){this._snippets[ee].fn.call(null)}},{key:"_addDefSnippets",value:function(){var ee=this;B()(R,function(he){ee.add(he.name,he.fn,he.desc)})}},{key:"_render",value:function(){var ee=lt()(this._snippets,function(he,ye){return'<div class="'.concat(De("section run"),'" data-idx="').concat(ye,`">
        <h2 class="`).concat(De("name"),'">').concat(Nr()(he.name),`
          <div class="`).concat(De("btn"),`">
            <span class="`).concat(De("icon-play"),`"></span>
          </div>
        </h2>
        <div class="`).concat(De("description"),`">
          `).concat(Nr()(he.desc),`
        </div>
      </div>`)}).join("");this._renderHtml(ee)}},{key:"_renderHtml",value:function(ee){ee!==this._lastHtml&&(this._lastHtml=ee,this._$el.html(ee))}}]),xe}(b),$e=r(4224),We=r.n($e),Je=r(8991),st=r.n(Je),kt=r(1352),Mt=r.n(kt),Rt=r(8099),Tr=r.n(Rt),yr=function(){function Oe(Ce,xe,ee,he){var ye=this;(0,o.Z)(this,Oe),(0,f.Z)(this,"_updateGridHeight",function(Ne){ye._dataGrid.setOption({minHeight:60*Ne,maxHeight:223*Ne})}),this._type=he,this._$container=Ce,this._devtools=xe,this._resources=ee,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new Fe.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,a.Z)(Oe,[{key:"destroy",value:function(){A.off(A.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var Ce=this._dataGrid;this._refreshStorage(),Ce.clear(),B()(this._storeData,function(xe){var ee=xe.key,he=xe.val;Ce.append({key:ee,value:he},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var Ce=this._resources,xe=_r(this._type,!1);if(xe){var ee=[];xe=JSON.parse(JSON.stringify(xe)),B()(xe,function(he,ye){V()(he)&&(Ce.config.get("hideErudaSetting")&&(Yr()(ye,"eruda")||ye==="active-eruda")||ee.push({key:ye,val:vn()(he,200)}))}),this._storeData=ee}}},{key:"_updateButtons",value:function(){var Ce=this._$container,xe=Ce.find(De(".show-detail")),ee=Ce.find(De(".delete-storage")),he=Ce.find(De(".copy-storage")),ye=De("btn-disabled");xe.addClass(ye),ee.addClass(ye),he.addClass(ye),this._selectedItem&&(xe.rmClass(ye),ee.rmClass(ye),he.rmClass(ye))}},{key:"_initTpl",value:function(){var Ce=this._$container,xe=this._type;Ce.html(De(`<h2 class="title">
      `.concat(xe==="local"?"Local":"Session",` Storage
      <div class="btn refresh-storage">
        <span class="icon icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-storage btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-storage btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-storage">
        <span class="icon icon-clear"></span>
      </div>
      <div class="btn filter">
        <span class="icon icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`))),this._$dataGrid=Ce.find(De(".data-grid")),this._$filterText=Ce.find(De(".filter-text"))}},{key:"_getVal",value:function(Ce){return this._type==="local"?localStorage.getItem(Ce):sessionStorage.getItem(Ce)}},{key:"_bindEvent",value:function(){var Ce=this,xe=this._type,ee=this._devtools;function he(ye,Ne){var rt=ee.get("sources");if(rt)return rt.set(ye,Ne),ee.showTool("sources"),!0}this._$container.on("click",De(".refresh-storage"),function(){ee.notify("Refreshed"),Ce.refresh()}).on("click",De(".clear-storage"),function(){B()(Ce._storeData,function(ye){xe==="local"?localStorage.removeItem(ye.key):sessionStorage.removeItem(ye.key)}),Ce.refresh()}).on("click",De(".show-detail"),function(){var ye=Ce._selectedItem,Ne=Ce._getVal(ye);try{he("object",JSON.parse(Ne))}catch{he("raw",Ne)}}).on("click",De(".copy-storage"),function(){var ye=Ce._selectedItem;jr()(Ce._getVal(ye)),ee.notify("Copied")}).on("click",De(".filter"),function(){mn.Z.prompt("Filter").then(function(ye){$n()(ye)||(ye=br()(ye),Ce._$filterText.text(ye),Ce._dataGrid.setOption("filter",ye))})}).on("click",De(".delete-storage"),function(){var ye=Ce._selectedItem;xe==="local"?localStorage.removeItem(ye):sessionStorage.removeItem(ye),Ce.refresh()}),this._dataGrid.on("select",function(ye){Ce._selectedItem=ye.data.key,Ce._updateButtons()}).on("deselect",function(){Ce._selectedItem=null,Ce._updateButtons()}),A.on(A.SCALE,this._updateGridHeight)}}]),Oe}();function Qr(Oe,Ce){Oe.rmClass(De("ok")).rmClass(De("danger")).rmClass(De("warn")).addClass(De(Ce))}function ln(Oe,Ce){if(Ce===0)return"";var xe=0,ee=0;switch(Oe){case"cookie":xe=30,ee=60;break;case"script":xe=5,ee=10;break;case"stylesheet":xe=4,ee=8;break;case"image":xe=50,ee=100}return Ce>=ee?"danger":Ce>=xe?"warn":"ok"}var Pn=function(){function Oe(Ce,xe){(0,o.Z)(this,Oe),this._$container=Ce,this._devtools=xe,this._selectedItem=null,this._initTpl(),this._dataGrid=new Fe.Z(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()}return(0,a.Z)(Oe,[{key:"refresh",value:function(){var Ce=this._$container,xe=this._dataGrid,ee=ve.domain("Network").getCookies().cookies,he=lt()(ee,function(ye){return{key:ye.name,val:ye.value}});xe.clear(),B()(he,function(ye){var Ne=ye.key,rt=ye.val;xe.append({key:Ne,value:rt},{selectable:!0})}),Qr(Ce,ln("cookie",he.length))}},{key:"_initTpl",value:function(){var Ce=this._$container;Ce.html(De(`<h2 class="title">
      Cookie
      <div class="btn refresh-cookie">
        <span class="icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-cookie btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-cookie btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-cookie">
        <span class="icon-clear"></span>
      </div>
      <div class="btn filter" data-type="cookie">
        <span class="icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`)),this._$dataGrid=Ce.find(De(".data-grid")),this._$filterText=Ce.find(De(".filter-text"))}},{key:"_updateButtons",value:function(){var Ce=this._$container,xe=Ce.find(De(".show-detail")),ee=Ce.find(De(".delete-cookie")),he=Ce.find(De(".copy-cookie")),ye=De("btn-disabled");xe.addClass(ye),ee.addClass(ye),he.addClass(ye),this._selectedItem&&(xe.rmClass(ye),ee.rmClass(ye),he.rmClass(ye))}},{key:"_getVal",value:function(Ce){for(var xe=ve.domain("Network").getCookies().cookies,ee=0,he=xe.length;ee<he;ee++)if(xe[ee].name===Ce)return xe[ee].value;return""}},{key:"_bindEvent",value:function(){var Ce=this,xe=this._devtools;function ee(he,ye){var Ne=xe.get("sources");if(Ne)return Ne.set(he,ye),xe.showTool("sources"),!0}this._$container.on("click",De(".refresh-cookie"),function(){xe.notify("Refreshed"),Ce.refresh()}).on("click",De(".clear-cookie"),function(){ve.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Ce.refresh()}).on("click",De(".delete-cookie"),function(){var he=Ce._selectedItem;ve.domain("Network").deleteCookies({name:he}),Ce.refresh()}).on("click",De(".show-detail"),function(){var he=Ce._selectedItem,ye=Ce._getVal(he);try{ee("object",JSON.parse(ye))}catch{ee("raw",ye)}}).on("click",De(".copy-cookie"),function(){var he=Ce._selectedItem;jr()(Ce._getVal(he)),xe.notify("Copied")}).on("click",De(".filter"),function(){mn.Z.prompt("Filter").then(function(he){$n()(he)||(he=br()(he),Ce._filter=he,Ce._$filterText.text(he),Ce._dataGrid.setOption("filter",he))})}),this._dataGrid.on("select",function(he){Ce._selectedItem=he.data.key,Ce._updateButtons()}).on("deselect",function(){Ce._selectedItem=null,Ce._updateButtons()})}}]),Oe}();function Vr(Oe,Ce){var xe=typeof Symbol<"u"&&Oe[Symbol.iterator]||Oe["@@iterator"];if(!xe){if(Array.isArray(Oe)||(xe=function(ft,It){if(ft){if(typeof ft=="string")return yn(ft,It);var jt=Object.prototype.toString.call(ft).slice(8,-1);if(jt==="Object"&&ft.constructor&&(jt=ft.constructor.name),jt==="Map"||jt==="Set")return Array.from(ft);if(jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt))return yn(ft,It)}}(Oe))||Ce&&Oe&&typeof Oe.length=="number"){xe&&(Oe=xe);var ee=0,he=function(){};return{s:he,n:function(){return ee>=Oe.length?{done:!0}:{done:!1,value:Oe[ee++]}},e:function(ft){throw ft},f:he}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ye,Ne=!0,rt=!1;return{s:function(){xe=xe.call(Oe)},n:function(){var ft=xe.next();return Ne=ft.done,ft},e:function(ft){rt=!0,ye=ft},f:function(){try{Ne||xe.return==null||xe.return()}finally{if(rt)throw ye}}}}function yn(Oe,Ce){(Ce==null||Ce>Oe.length)&&(Ce=Oe.length);for(var xe=0,ee=new Array(Ce);xe<Ce;xe++)ee[xe]=Oe[xe];return ee}function In(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var si=function(Oe){(0,l.Z)(xe,Oe);var Ce=In(xe);function xe(){var ee;return(0,o.Z)(this,xe),(ee=Ce.call(this))._style=Le(r(2488)),ee.name="resources",ee._hideErudaSetting=!1,ee._observeElement=!0,ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._initTpl(),this._localStorage=new yr(this._$localStorage,he,this,"local"),this._sessionStorage=new yr(this._$sessionStorage,he,this,"session"),this._cookie=new Pn(this._$cookie,he),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),Le.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var ee=[];y()("script").each(function(){var ft=this.src;ft!==""&&ee.push(ft)});var he=ln("script",(ee=Pr()(ee)).length),ye="<li>Empty</li>";en()(ee)||(ye=lt()(ee,function(ft){return ft=Nr()(ft),'<li><a href="'.concat(ft,'" target="_blank" class="').concat(De("js-link"),'">').concat(ft,"</a></li>")}).join(""));var Ne='<h2 class="'.concat(De("title"),`">
      Script
      <div class="`).concat(De("btn refresh-script"),`">
        <span class="`).concat(De("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(De("link-list"),`">
      `).concat(ye,`
    </ul>`),rt=this._$script;return Qr(rt,he),rt.html(Ne),this}},{key:"refreshStylesheet",value:function(){var ee=[];y()("link").each(function(){this.rel==="stylesheet"&&ee.push(this.href)});var he=ln("stylesheet",(ee=Pr()(ee)).length),ye="<li>Empty</li>";en()(ee)||(ye=lt()(ee,function(ft){return ft=Nr()(ft),' <li><a href="'.concat(ft,'" target="_blank" class="').concat(De("css-link"),'">').concat(ft,"</a></li>")}).join(""));var Ne='<h2 class="'.concat(De("title"),`">
      Stylesheet
      <div class="`).concat(De("btn refresh-stylesheet"),`">
        <span class="`).concat(De("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(De("link-list"),`">
      `).concat(ye,`
    </ul>`),rt=this._$stylesheet;return Qr(rt,he),rt.html(Ne),this}},{key:"refreshIframe",value:function(){var ee=[];y()("iframe").each(function(){var Ne=y()(this).attr("src");Ne&&ee.push(Ne)}),ee=Pr()(ee);var he="<li>Empty</li>";en()(ee)||(he=lt()(ee,function(Ne){return Ne=Nr()(Ne),'<li><a href="'.concat(Ne,'" target="_blank" class="').concat(De("iframe-link"),'">').concat(Ne,"</a></li>")}).join(""));var ye='<h2 class="'.concat(De("title"),`">
      Iframe
      <div class="`).concat(De("btn refresh-iframe"),`">
        <span class="`).concat(De("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(De("link-list"),`">
      `).concat(he,`
    </ul>`);return this._$iframe.html(ye),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var ee=[],he=this._performance=window.webkitPerformance||window.performance;he&&he.getEntries?this._performance.getEntries().forEach(function(It){if(It.initiatorType==="img"||ui(It.name)){if(q()(It.name,"exclude=true"))return;ee.push(It.name)}}):y()("img").each(function(){var It=y()(this),jt=It.attr("src");It.data("exclude")!=="true"&&ee.push(jt)}),(ee=Pr()(ee)).sort();var ye=ln("image",ee.length),Ne="<li>Empty</li>";en()(ee)||(Ne=lt()(ee,function(It){return'<li class="'.concat(De("image"),`">
          <img src="`).concat(Nr()(It),'" data-exclude="true" class="').concat(De("img-link"),`"/>
        </li>`)}).join(""));var rt='<h2 class="'.concat(De("title"),`">
      Image
      <div class="`).concat(De("btn refresh-image"),`">
        <span class="`).concat(De("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(De("image-list"),`">
      `).concat(Ne,`
    </ul>`),ft=this._$image;return Qr(ft,ye),ft.html(rt),this}},{key:"show",value:function(){return(0,w.Z)((0,d.Z)(xe.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),(0,w.Z)((0,d.Z)(xe.prototype),"hide",this).call(this)}},{key:"_initTpl",value:function(){var ee=this._$el;ee.html(De(`<div class="section local-storage"></div>
      <div class="section session-storage"></div>
      <div class="section cookie"></div>
      <div class="section script"></div>
      <div class="section stylesheet"></div>
      <div class="section iframe"></div>
      <div class="section image"></div>`)),this._$localStorage=ee.find(De(".local-storage")),this._$sessionStorage=ee.find(De(".session-storage")),this._$cookie=ee.find(De(".cookie")),this._$script=ee.find(De(".script")),this._$stylesheet=ee.find(De(".stylesheet")),this._$iframe=ee.find(De(".iframe")),this._$image=ee.find(De(".image"))}},{key:"_bindEvent",value:function(){var ee=this,he=this._$el,ye=this._container;function Ne(ft,It){var jt=ye.get("sources");if(jt)return jt.set(ft,It),ye.showTool("sources"),!0}function rt(ft){return function(It){if(ye.get("sources")){It.preventDefault();var jt=y()(this).attr("href");ft!=="iframe"&&We()(location.href,jt)?st()({url:jt,success:function(xr){Ne(ft,xr)},dataType:"raw"}):Ne("iframe",jt)}}}he.on("click",".eruda-refresh-script",function(){ye.notify("Refreshed"),ee.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){ye.notify("Refreshed"),ee.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){ye.notify("Refreshed"),ee.refreshIframe()}).on("click",".eruda-refresh-image",function(){ye.notify("Refreshed"),ee.refreshImage()}).on("click",".eruda-img-link",function(){Ne("img",y()(this).attr("src"))}).on("click",".eruda-css-link",rt("css")).on("click",".eruda-js-link",rt("js")).on("click",".eruda-iframe-link",rt("iframe"))}},{key:"_rmCfg",value:function(){var ee=this.config,he=this._container.get("settings");he&&he.remove(ee,"hideErudaSetting").remove(ee,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var ee=this,he=this.config=Ge.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});he.get("hideErudaSetting")&&(this._hideErudaSetting=!0),he.get("observeElement")||(this._observeElement=!1),he.on("change",function(ye,Ne){switch(ye){case"hideErudaSetting":return void(ee._hideErudaSetting=Ne);case"observeElement":return ee._observeElement=Ne,Ne?ee._enableObserver():ee._disableObserver()}}),this._container.get("settings").text("Resources").switch(he,"hideErudaSetting","Hide Eruda Setting").switch(he,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var ee=this;this._observer=new(Zn())(function(he){B()(he,function(ye){ee._handleMutation(ye)})})}},{key:"_handleMutation",value:function(ee){var he=this;if(!gt(ee.target)){var ye=function(It){var jt=function(xr){return xr.tagName?xr.tagName.toLowerCase():""}(It);switch(jt){case"script":he.refreshScript();break;case"img":he.refreshImage();break;case"link":he.refreshStylesheet()}};if(ee.type==="attributes")ye(ee.target);else if(ee.type==="childList"){ye(ee.target);var Ne,rt=Mt()(ee.addedNodes),ft=Vr(rt=Tr()(rt,Mt()(ee.removedNodes)));try{for(ft.s();!(Ne=ft.n()).done;)ye(Ne.value)}catch(It){ft.e(It)}finally{ft.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),xe}(b),oi=/\.(jpeg|jpg|gif|png)$/,ui=function(Oe){return oi.test(Oe)},di=r(4541),fi=r.n(di),pi=fi()(),xi=[{name:"Location",val:function(){return Nr()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(qt()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(pi.name+" "+pi.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.0.1</a>'},{name:"Backers",val:function(){return'<a rel="noreferrer noopener" href="https://opencollective.com/eruda" target="_blank"><img data-exclude="true" style="width: 100%;"src="https://opencollective.com/eruda/backers.svg?width='.concat(1.5*window.innerWidth,'&exclude=true"></a>')}}],wi=r(550),Si=r.n(wi);function Ci(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var Ei=function(Oe){(0,l.Z)(xe,Oe);var Ce=Ci(xe);function xe(){var ee;return(0,o.Z)(this,xe),(ee=Ce.call(this))._style=Le(r(879)),ee.name="info",ee._infos=[],ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),Le.remove(this._style)}},{key:"add",value:function(ee,he){var ye=this._infos,Ne=!1;return B()(ye,function(rt){ee===rt.name&&(rt.val=he,Ne=!0)}),Ne||ye.push({name:ee,val:he}),this._render(),this}},{key:"get",value:function(ee){var he,ye=this._infos;return wt()(ee)?Si()(ye):(B()(ye,function(Ne){ee===Ne.name&&(he=Ne.val)}),he)}},{key:"remove",value:function(ee){for(var he=this._infos,ye=he.length-1;ye>=0;ye--)he[ye].name===ee&&he.splice(ye,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var ee=this;B()(xi,function(he){return ee.add(he.name,he.val)})}},{key:"_render",value:function(){var ee=[];B()(this._infos,function(ye){var Ne=ye.name,rt=ye.val;et()(rt)&&(rt=rt()),ee.push({name:Ne,val:rt})});var he="<ul>".concat(lt()(ee,function(ye){return'<li><h2 class="'.concat(De("title"),'">').concat(Nr()(ye.name),'<span class="').concat(De("icon-copy copy"),'"></span></h2><div class="').concat(De("content"),'">').concat(ye.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(he)}},{key:"_bindEvent",value:function(){var ee=this._container;this._$el.on("click",De(".copy"),function(){var he=y()(this).parent().parent(),ye=he.find(De(".title")).text(),Ne=he.find(De(".content")).text();jr()("".concat(ye,": ").concat(Ne)),ee.notify("Copied")})}},{key:"_renderHtml",value:function(ee){ee!==this._lastHtml&&(this._lastHtml=ee,this._$el.html(ee))}}]),xe}(b),Ai=r(8299),Oi=r(8368),Ti=r.n(Oi),Di=r(3651),ki=r.n(Di),gi=r(7049);function Ri(Oe){var Ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var xe,ee=(0,d.Z)(Oe);if(Ce){var he=(0,d.Z)(this).constructor;xe=Reflect.construct(ee,arguments,he)}else xe=ee.apply(this,arguments);return(0,h.Z)(this,xe)}}var Mi=function(Oe){(0,l.Z)(xe,Oe);var Ce=Ri(xe);function xe(){var ee;return(0,o.Z)(this,xe),(ee=Ce.call(this))._style=Le(r(1344)),ee.name="sources",ee._showLineNum=!0,ee}return(0,a.Z)(xe,[{key:"init",value:function(ee,he){(0,w.Z)((0,d.Z)(xe.prototype),"init",this).call(this,ee),this._container=he,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){(0,w.Z)((0,d.Z)(xe.prototype),"destroy",this).call(this),Le.remove(this._style),this._rmCfg()}},{key:"set",value:function(ee,he){if(ee==="img"){this._isFetchingData=!0;var ye=new Image,Ne=this;return ye.onload=function(){Ne._isFetchingData=!1,Ne._data={type:"img",val:{width:this.width,height:this.height,src:he}},Ne._render()},ye.onerror=function(){Ne._isFetchingData=!1},void(ye.src=he)}return this._data={type:ee,val:he},this._render(),this}},{key:"show",value:function(){return(0,w.Z)((0,d.Z)(xe.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var ee=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,st()({url:location.href,success:function(he){return ee._html=he},error:function(){return ee._html="Sorry, unable to fetch source code:("},complete:function(){ee._isGettingHtml=!1,ee._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var ee=this;this._container.on("showTool",function(he,ye){he!==ee.name&&ye.name===ee.name&&delete ee._data})}},{key:"_rmCfg",value:function(){var ee=this.config,he=this._container.get("settings");he&&he.remove(ee,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var ee=this,he=this.config=Ge.createCfg("sources",{showLineNum:!0});he.get("showLineNum")||(this._showLineNum=!1),he.on("change",function(ye,Ne){ye!=="showLineNum"||(ee._showLineNum=Ne)}),this._container.get("settings").text("Sources").switch(he,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var ee=this._data.val,he=ee.width,ye=ee.height,Ne=ee.src;this._renderHtml('<div class="'.concat(De("image"),`">
      <div class="`).concat(De("breadcrumb"),'">').concat(Nr()(Ne),`</div>
      <div class="`).concat(De("img-container"),`" data-exclude="true">
        <img src="`).concat(Nr()(Ne),`">
      </div>
      <div class="`).concat(De("img-info"),'">').concat(Nr()(he)," × ").concat(Nr()(ye),`</div>
    </div>`))}},{key:"_renderCode",value:function(){var ee=this._data;this._renderHtml('<div class="'.concat(De("code"),'" data-type="').concat(ee.type,'"></div>'),!1);var he=ee.val,ye=ee.val.length;ye>li&&(he=vn()(he,li)),ye<Li?(he=ki()(he,ee.type,{comment:"",string:"",number:"",keyword:"",operator:""}),B()(["comment","string","number","keyword","operator"],function(rt){he=Ti()(he,'class="'.concat(rt,'"'),'class="'.concat(De(rt),'"'))})):he=Nr()(he);var Ne=this._$el.find(De(".code")).get(0);new gi.Z(Ne,{text:he,escape:!1,wrapLongLines:!0,showLineNumbers:ee.val.length<mi&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(De("json"),'"></ul>'),!1);var ee=this._data.val;try{V()(ee)&&(ee=JSON.parse(ee))}catch{}new Ai.Z(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(ee)}},{key:"_renderRaw",value:function(){var ee=this._data;this._renderHtml('<div class="'.concat(De("raw-wrapper"),`">
      <div class="`).concat(De("raw"),`"></div>
    </div>`));var he=ee.val,ye=this._$el.find(De(".raw")).get(0);he.length>li&&(he=vn()(he,li)),new gi.Z(ye,{text:he,wrapLongLines:!0,showLineNumbers:he.length<mi&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(Nr()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(ee){var he=this;(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&ee===this._lastHtml||(this._lastHtml=ee,this._$el.html(ee),setTimeout(function(){return he._$el.get(0).scrollTop=0},0))}}]),xe}(b),Li=3e4,mi=8e4,li=1e5,Pi=r(5166),Ii=r.n(Pi),Bi=r(3514),Ni=r.n(Bi),Fi={init:function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ce=Oe.container,xe=Oe.tool,ee=Oe.autoScale,he=ee===void 0||ee,ye=Oe.useShadowDom,Ne=ye===void 0||ye,rt=Oe.defaults,ft=rt===void 0?{}:rt;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(Ce,Ne),this._initStyle(),this._initDevTools(ft),this._initEntryBtn(),this._initSettings(),this._initTools(xe),this._registerListener(),he&&this._autoScale())},_isInit:!1,version:"3.0.1",util:n,chobitsu:ve,Tool:b,Console:kn,Elements:St,Network:an,Sources:Mi,Resources:si,Info:Ei,Snippets:Ae,Settings:Ge,get:function(Oe){if(this._checkInit()){if(Oe==="entryBtn")return this._entryBtn;var Ce=this._devTools;return Oe?Ce.get(Oe):Ce}},add:function(Oe){if(this._checkInit())return et()(Oe)&&(Oe=Oe(this)),this._devTools.add(Oe),this},remove:function(Oe){return this._devTools.remove(Oe),this},show:function(Oe){if(this._checkInit()){var Ce=this._devTools;return Oe?Ce.showTool(Oe):Ce.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),y()(this._container).remove(),Le.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(Oe){return Ur()(Oe)?(this._scale=Oe,A.emit(A.SCALE,Oe),this):this._scale},position:function(Oe){var Ce=this._entryBtn;return Ii()(Oe)?(Ce.setPos(Oe),this):Ce.getPos()},_autoScale:function(){un()()&&this.scale(1/Ni()())},_registerListener:function(){var Oe=this;this._addListener=function(){return Oe.add.apply(Oe,arguments)},this._showListener=function(){return Oe.show.apply(Oe,arguments)},A.on(A.ADD,this._addListener),A.on(A.SHOW,this._showListener),A.on(A.SCALE,Le.setScale)},_unregisterListener:function(){A.off(A.ADD,this._addListener),A.off(A.SHOW,this._showListener),A.off(A.SCALE,Le.setScale)},_checkInit:function(){return this._isInit||nr.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(Oe,Ce){var xe,ee;Oe||(Oe=document.createElement("div"),document.documentElement.appendChild(Oe)),Oe.id="eruda",Oe.style.all="initial",this._container=Oe,Ce&&(Oe.attachShadow?xe=Oe.attachShadow({mode:"open"}):Oe.createShadowRoot&&(xe=Oe.createShadowRoot()),xe&&(Le.container=document.head,Le(r(5357)+r(9327)+r(4821)+r(8903)+r(5777)),ee=document.createElement("div"),xe.appendChild(ee),this._shadowRoot=xe)),this._shadowRoot||(ee=document.createElement("div"),Oe.appendChild(ee)),ce()(ee,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),fi()().name==="ios"&&ee.setAttribute("ontouchstart",""),this._$el=y()(ee)},_initDevTools:function(Oe){this._devTools=new An(this._$el,{defaults:Oe})},_initStyle:function(){var Oe="eruda-style-container",Ce=this._$el;this._shadowRoot?(Le.container=this._shadowRoot,Le(":host { all: initial }")):(Ce.append('<div class="'.concat(Oe,'"></div>')),Le.container=Ce.find(".".concat(Oe)).get(0)),Le(r(8020)+r(4821)+r(9327)+r(7591)+r(4987)+r(8903)+r(5512)+r(2156)+r(5777)+r(7871)+r(6833)+r(8516)+r(5357))},_initEntryBtn:function(){var Oe=this;this._entryBtn=new ot(this._$el),this._entryBtn.on("click",function(){return Oe._devTools.toggle()})},_initSettings:function(){var Oe=this._devTools,Ce=new Ge;Oe.add(Ce),this._entryBtn.initCfg(Ce),Oe.initCfg(Ce)},_initTools:function(){var Oe=this,Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];Ce=Mt()(Ce);var xe=this._devTools;Ce.forEach(function(ee){var he=Oe[cn()(ee)];try{he&&xe.add(new he)}catch(ye){at()(function(){nr.error("Something wrong when initializing tool ".concat(ee,":"),ye.message)})}}),xe.showTool(Ce[0]||"settings")}}},2027:function(s,e,r){var n=r(6672).Z;s.exports=n,s.exports.default=n},6610:function(s,e,r){r.r(e),e.default={}},9143:function(s,e,r){var n=this&&this.__awaiter||function(S,A,w,m){return new(w||(w=Promise))(function(b,x){function y(P){try{k(m.next(P))}catch(L){x(L)}}function O(P){try{k(m.throw(P))}catch(L){x(L)}}function k(P){var L;P.done?b(P.value):(L=P.value,L instanceof w?L:new w(function(M){M(L)})).then(y,O)}k((m=m.apply(S,A||[])).next())})},o=this&&this.__generator||function(S,A){var w,m,b,x,y={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return x={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function O(k){return function(P){return function(L){if(w)throw new TypeError("Generator is already executing.");for(;y;)try{if(w=1,m&&(b=2&L[0]?m.return:L[0]?m.throw||((b=m.return)&&b.call(m),0):m.next)&&!(b=b.call(m,L[1])).done)return b;switch(m=0,b&&(L=[2&L[0],b.value]),L[0]){case 0:case 1:b=L;break;case 4:return y.label++,{value:L[1],done:!1};case 5:y.label++,m=L[1],L=[0];continue;case 7:L=y.ops.pop(),y.trys.pop();continue;default:if(b=y.trys,!((b=b.length>0&&b[b.length-1])||L[0]!==6&&L[0]!==2)){y=0;continue}if(L[0]===3&&(!b||L[1]>b[0]&&L[1]<b[3])){y.label=L[1];break}if(L[0]===6&&y.label<b[1]){y.label=b[1],b=L;break}if(b&&y.label<b[2]){y.label=b[2],y.ops.push(L);break}b[2]&&y.ops.pop(),y.trys.pop();continue}L=A.call(S,y)}catch(M){L=[6,M],m=0}finally{w=b=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([k,P])}}},a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(3276)),l=a(r(1214)),h=a(r(5936)),d=a(r(3783)),f=a(r(1443)),g=r(316),v=function(){function S(){var A=this;this.resolves=new Map,this.domains=new Map,this.onMessage=l.default,c.default.on("message",function(w){var m=JSON.parse(w),b=A.resolves.get(m.id);if(b&&b(m.result),!m.id){var x=m.method.split("."),y=x[0],O=x[1],k=A.domains.get(y);k&&k.emit(O,m.params)}A.onMessage(w)})}return S.prototype.domain=function(A){return this.domains.get(A)},S.prototype.setOnMessage=function(A){this.onMessage=A},S.prototype.sendMessage=function(A,w){var m=this;w===void 0&&(w={});var b=h.default();return this.sendRawMessage(JSON.stringify({id:b,method:A,params:w})),new Promise(function(x){m.resolves.set(b,x)})},S.prototype.sendRawMessage=function(A){return n(this,void 0,void 0,function(){var w,m,b,x,y,O,k;return o(this,function(P){switch(P.label){case 0:w=JSON.parse(A),m=w.method,b=w.params,x=w.id,y={id:x},P.label=1;case 1:return P.trys.push([1,3,,4]),O=y,[4,this.callMethod(m,b)];case 2:return O.result=P.sent(),[3,4];case 3:return(k=P.sent())instanceof g.ErrorWithCode?y.error={message:k.message,code:k.code}:k instanceof Error&&(y.error={message:k.message}),[3,4];case 4:return c.default.emit("message",JSON.stringify(y)),[2]}})})},S.prototype.register=function(A,w){var m=this.domains,b=m.get(A);b||(b={},f.default.mixin(b)),d.default(w,function(x,y){b[y]=x}),m.set(A,b)},S.prototype.callMethod=function(A,w){return n(this,void 0,void 0,function(){var m,b,x,y;return o(this,function(O){if(m=A.split("."),b=m[0],x=m[1],(y=this.domain(b))&&y[x])return[2,y[x](w)||{}];throw Error(A+" unimplemented")})})},S}();e.default=v},7935:function(s,e,r){var n=this&&this.__createBinding||(Object.create?function(Q,q,G,te){te===void 0&&(te=G),Object.defineProperty(Q,te,{enumerable:!0,get:function(){return q[G]}})}:function(Q,q,G,te){te===void 0&&(te=G),Q[te]=q[G]}),o=this&&this.__setModuleDefault||(Object.create?function(Q,q){Object.defineProperty(Q,"default",{enumerable:!0,value:q})}:function(Q,q){Q.default=q}),a=this&&this.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var q={};if(Q!=null)for(var G in Q)G!=="default"&&Object.hasOwnProperty.call(Q,G)&&n(q,Q,G);return o(q,Q),q},c=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(e,"__esModule",{value:!0}),e.getDOMNode=e.getDOMNodeId=e.setOuterHTML=e.setNodeValue=e.setInspectedNode=e.setAttributeValue=e.setAttributesAsText=e.resolveNode=e.requestNode=e.requestChildNodes=e.removeNode=e.pushNodesByBackendIdsToFrontend=e.discardSearchResults=e.pushNodesToFrontend=e.getSearchResults=e.performSearch=e.moveTo=e.getOuterHTML=e.getDocument=e.enable=e.copyTo=e.collectClassNamesFromSubtree=void 0;var l=c(r(3276)),h=a(r(2049)),d=r(2049),f=a(r(7923)),g=c(r(6126)),v=c(r(1512)),S=c(r(6156)),A=c(r(8887)),w=c(r(7483)),m=c(r(2461)),b=c(r(42)),x=c(r(6341)),y=c(r(3063)),O=c(r(3783)),k=c(r(1352)),P=c(r(8933)),L=c(r(8099)),M=r(1628),B=r(316);e.collectClassNamesFromSubtree=function(Q){var q=d.getNode(Q.nodeId),G=[];return V(q,function(te){if(te.nodeType===1){var Y=te.getAttribute("class");if(Y)for(var J=0,K=Y.split(/\s+/);J<K.length;J++){var ne=K[J];G.push(ne)}}}),{classNames:b.default(G)}},e.copyTo=function(Q){var q=Q.nodeId,G=Q.targetNodeId,te=d.getNode(q),Y=d.getNode(G),J=te.cloneNode(!0);Y.appendChild(J)},e.enable=function(){g.default.observe(),h.clear()},e.getDocument=function(){return{root:h.wrap(document,{depth:2})}},e.getOuterHTML=function(Q){return{outerHTML:d.getNode(Q.nodeId).outerHTML}},e.moveTo=function(Q){var q=Q.nodeId,G=Q.targetNodeId,te=d.getNode(q);d.getNode(G).appendChild(te)};var j=new Map;function F(Q){for(var q=[Q],G=Q.parentNode;G&&(q.push(G),!(Y=d.getNodeId(G)));)G=G.parentNode;for(;q.length;){var te=q.pop(),Y=d.getNodeId(te);l.default.trigger("DOM.setChildNodes",{parentId:Y,nodes:h.getChildNodes(te,1)})}return d.getNodeId(Q)}e.performSearch=function(Q){var q=y.default(Q.query),G=[];try{G=L.default(G,k.default(document.querySelectorAll(q)))}catch{}try{G=L.default(G,P.default(q))}catch{}V(document,function(Y){var J=Y.nodeType;if(J===1){var K=Y.localName;if(x.default("<"+K+" ",q)||x.default("</"+K+">",q))return void G.push(Y);var ne=[];O.default(Y.attributes,function(Te){var Me=Te.name,Ie=Te.value;return ne.push(Me,Ie)});for(var de=0,Re=ne.length;de<Re;de++)if(x.default(y.default(ne[de]),q)){G.push(Y);break}}else J===3&&x.default(y.default(Y.nodeValue),q)&&G.push(Y)});var te=B.createId();return j.set(te,G),{searchId:te,resultCount:G.length}},e.getSearchResults=function(Q){var q=Q.searchId,G=Q.fromIndex,te=Q.toIndex,Y=j.get(q).slice(G,te);return{nodeIds:m.default(Y,function(J){var K=d.getNodeId(J);return K||F(J)})}},e.pushNodesToFrontend=F,e.discardSearchResults=function(Q){j.delete(Q.searchId)},e.pushNodesByBackendIdsToFrontend=function(Q){return{nodeIds:Q.backendNodeIds}},e.removeNode=function(Q){var q=d.getNode(Q.nodeId);v.default(q).remove()},e.requestChildNodes=function(Q){var q=Q.nodeId,G=Q.depth,te=G===void 0?1:G,Y=d.getNode(q);l.default.trigger("DOM.setChildNodes",{parentId:q,nodes:h.getChildNodes(Y,te)})},e.requestNode=function(Q){var q=f.getObj(Q.objectId);return{nodeId:d.getNodeId(q)}},e.resolveNode=function(Q){var q=d.getNode(Q.nodeId);return{object:f.wrap(q)}},e.setAttributesAsText=function(Q){var q,G=Q.name,te=Q.text,Y=Q.nodeId,J=d.getNode(Y);G&&J.removeAttribute(G),v.default(J).attr((q="<div "+(q=te)+"></div>",w.default.parse(q)[0].attrs))},e.setAttributeValue=function(Q){var q=Q.nodeId,G=Q.name,te=Q.value;d.getNode(q).setAttribute(G,te)};var U=[];function V(Q,q){for(var G=h.filterNodes(Q.childNodes),te=0,Y=G.length;te<Y;te++){var J=G[te];q(J),V(J,q)}}e.setInspectedNode=function(Q){var q=d.getNode(Q.nodeId);U.unshift(q),U.length>5&&U.pop();for(var G=0;G<5;G++)M.setGlobal("$"+G,U[G])},e.setNodeValue=function(Q){var q=Q.nodeId,G=Q.value;d.getNode(q).nodeValue=G},e.setOuterHTML=function(Q){var q=Q.nodeId,G=Q.outerHTML;d.getNode(q).outerHTML=G},e.getDOMNodeId=function(Q){var q=Q.node;return{nodeId:h.getOrCreateNodeId(q)}},e.getDOMNode=function(Q){var q=Q.nodeId;return{node:d.getNode(q)}},g.default.on("attributes",function(Q,q){var G=d.getNodeId(Q);if(G){var te=Q.getAttribute(q);S.default(te)?l.default.trigger("DOM.attributeRemoved",{nodeId:G,name:q}):l.default.trigger("DOM.attributeModified",{nodeId:G,name:q,value:te})}}),g.default.on("childList",function(Q,q,G){var te=d.getNodeId(Q);if(te){if(q=h.filterNodes(q),G=h.filterNodes(G),!A.default(q)){Te();for(var Y=0,J=q.length;Y<J;Y++){var K=q[Y],ne=h.getPreviousNode(K),de=ne?d.getNodeId(ne):0,Re={node:h.wrap(K,{depth:0}),parentNodeId:te,previousNodeId:de};l.default.trigger("DOM.childNodeInserted",Re)}}if(!A.default(G))for(Y=0,J=G.length;Y<J;Y++){if(K=G[Y],!d.getNodeId(K)){Te();break}l.default.trigger("DOM.childNodeRemoved",{nodeId:d.getNodeId(K),parentNodeId:te})}}function Te(){l.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:h.wrap(Q,{depth:0}).childNodeCount,nodeId:te})}}),g.default.on("characterData",function(Q){var q=d.getNodeId(Q);q&&l.default.trigger("DOM.characterDataModified",{characterData:Q.nodeValue,nodeId:q})})},2139:function(s,e,r){var n=this&&this.__spreadArrays||function(){for(var w=0,m=0,b=arguments.length;m<b;m++)w+=arguments[m].length;var x=Array(w),y=0;for(m=0;m<b;m++)for(var O=arguments[m],k=0,P=O.length;k<P;k++,y++)x[y]=O[k];return x},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.getResponseBody=e.enable=e.getCookies=e.deleteCookies=void 0;var a=o(r(4331)),c=o(r(3783)),l=o(r(1420)),h=o(r(5031)),d=o(r(8763)),f=o(r(8740)),g=o(r(6341)),v=r(2636),S=o(r(3276));e.deleteCookies=function(w){h.default(w.name)},e.getCookies=function(){var w=[],m=document.cookie;return a.default(m)!==""&&c.default(m.split(";"),function(b){b=b.split("=");var x=a.default(b.shift());b=l.default(b.join("=")),w.push({name:x,value:b})}),{cookies:w}};var A=new Map;e.enable=d.default(function(){var w=window.XMLHttpRequest.prototype,m=w.send,b=w.open,x=w.setRequestHeader;w.open=function(k,P){if(!function(B){return!g.default(B,"__chobitsu-hide__=true")}(P))return b.apply(this,arguments);var L=this,M=L.chobitsuRequest=new v.XhrRequest(L,k,P);M.on("send",function(B,j){var F={method:j.method,url:j.url,headers:j.reqHeaders};j.data&&(F.postData=j.data),S.default.trigger("Network.requestWillBeSent",{requestId:B,type:"XHR",request:F,timestamp:j.time/1e3})}),M.on("headersReceived",function(B,j){S.default.trigger("Network.responseReceivedExtraInfo",{requestId:B,blockedCookies:[],headers:j.resHeaders})}),M.on("done",function(B,j){S.default.trigger("Network.responseReceived",{requestId:B,type:"XHR",response:{status:j.status},timestamp:j.time/1e3}),A.set(B,j.resTxt),S.default.trigger("Network.loadingFinished",{requestId:B,encodedDataLength:j.size,timestamp:j.time/1e3})}),L.addEventListener("readystatechange",function(){switch(L.readyState){case 2:return M.handleHeadersReceived();case 4:return M.handleDone()}}),b.apply(this,arguments)},w.send=function(k){var P=this.chobitsuRequest;P&&P.handleSend(k),m.apply(this,arguments)},w.setRequestHeader=function(k,P){var L=this.chobitsuRequest;L&&L.handleReqHeadersSet(k,P),x.apply(this,arguments)};var y=!1;if(window.fetch&&(y=f.default(window.fetch)),!y&&navigator.serviceWorker&&(y=!0),y){var O=window.fetch;window.fetch=function(){for(var k=[],P=0;P<arguments.length;P++)k[P]=arguments[P];var L=new(v.FetchRequest.bind.apply(v.FetchRequest,n([void 0],k)));L.on("send",function(B,j){var F={method:j.method,url:j.url,headers:j.reqHeaders};j.data&&(F.postData=j.data),S.default.trigger("Network.requestWillBeSent",{requestId:B,type:"Fetch",request:F,timestamp:j.time/1e3})}),L.on("done",function(B,j){S.default.trigger("Network.responseReceived",{requestId:B,type:"Fetch",response:{status:j.status,headers:j.resHeaders},timestamp:j.time/1e3}),A.set(B,j.resTxt),S.default.trigger("Network.loadingFinished",{requestId:B,encodedDataLength:j.size,timestamp:j.time/1e3})});var M=O.apply(void 0,k);return L.send(M),M}}}),e.getResponseBody=function(w){return{base64Encoded:!1,body:A.get(w.requestId)}}},8689:function(s,e,r){var n=this&&this.__createBinding||(Object.create?function(Me,Ie,ce,pe){pe===void 0&&(pe=ce),Object.defineProperty(Me,pe,{enumerable:!0,get:function(){return Ie[ce]}})}:function(Me,Ie,ce,pe){pe===void 0&&(pe=ce),Me[pe]=Ie[ce]}),o=this&&this.__setModuleDefault||(Object.create?function(Me,Ie){Object.defineProperty(Me,"default",{enumerable:!0,value:Ie})}:function(Me,Ie){Me.default=Ie}),a=this&&this.__importStar||function(Me){if(Me&&Me.__esModule)return Me;var Ie={};if(Me!=null)for(var ce in Me)ce!=="default"&&Object.hasOwnProperty.call(Me,ce)&&n(Ie,Me,ce);return o(Ie,Me),Ie},c=this&&this.__importDefault||function(Me){return Me&&Me.__esModule?Me:{default:Me}};Object.defineProperty(e,"__esModule",{value:!0}),e.setInspectMode=e.setShowViewportSizeOnResize=e.hideHighlight=e.highlightNode=e.disable=e.enable=void 0;var l,h,d=r(2049),f=r(7935),g=c(r(1512)),v=c(r(8613)),S=c(r(642)),A=c(r(4193)),w=c(r(6329)),m=c(r(3276)),b=c(r(5610)),x=c(r(3474)),y=c(r(4210)),O=c(r(7715)),k=a(r(7923)),P=!1,L=!1,M=y.default("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),B="ontouchstart"in b.default,j=r(2777).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function F(Me){var Ie,ce=Me.nodeId,pe=Me.highlightConfig,me=Me.objectId;ce&&(Ie=d.getNode(ce)),me&&(Ie=k.getObj(me)),Ie.nodeType!==1&&Ie.nodeType!==3||(A.default(pe,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),M||w.default(pe,{showInfo:!1}),l.highlight(Ie,pe))}function U(){l.hide()}e.enable=function(){if(!L){var Me=v.default("div",{class:"__chobitsu-hide__",style:{all:"initial"}});h=g.default(Me),document.documentElement.appendChild(Me);var Ie=null,ce=null;if(Me.attachShadow?ce=Me.attachShadow({mode:"open"}):Me.createShadowRoot&&(ce=Me.createShadowRoot()),ce){var pe=document.createElement("style");pe.textContent=j,pe.type="text/css",ce.appendChild(pe),Ie=document.createElement("div"),ce.appendChild(Ie)}else Ie=document.createElement("div"),Me.appendChild(Ie),P||(S.default(j),P=!0);l=new O.default(Ie,{monitorResize:x.default(b.default.ResizeObserver),showInfo:M}),window.addEventListener("resize",de),L=!0}},e.disable=function(){l.destroy(),h.remove(),window.removeEventListener("resize",de),L=!1},e.highlightNode=F,e.hideHighlight=U;var V=!1;e.setShowViewportSizeOnResize=function(Me){V=Me.show};var Q={},q="none";function G(Me){if(B){var Ie=Me.touches[0]||Me.changedTouches[0];return document.elementFromPoint(Ie.clientX,Ie.clientY)}return document.elementFromPoint(Me.clientX,Me.clientY)}e.setInspectMode=function(Me){Q=Me.highlightConfig,q=Me.mode};var te=-1;function Y(Me){if(q!=="none"){var Ie=G(Me);if(Ie&&d.isValidNode(Ie)){var ce=d.getNodeId(Ie);ce||(ce=f.pushNodesToFrontend(Ie)),F({nodeId:ce,highlightConfig:Q}),ce!==te&&(m.default.trigger("Overlay.nodeHighlightRequested",{nodeId:ce}),te=ce)}}}function J(Me){if(q!=="none"){Me.preventDefault(),Me.stopImmediatePropagation();var Ie=G(Me);m.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:d.getNodeId(Ie)}),te=-1,U()}}function K(Me,Ie){document.documentElement.addEventListener(Me,Ie,!0)}B?(K("touchstart",Y),K("touchmove",Y),K("touchend",J)):(K("mousemove",Y),K("mouseout",function(){q!=="none"&&U()}),K("click",J));var ne=v.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function de(){V&&(Te.text(window.innerWidth+"px × "+window.innerHeight+"px"),Re?clearTimeout(Re):document.documentElement.appendChild(ne),Re=setTimeout(function(){Te.remove(),Re=null},1e3))}var Re,Te=g.default(ne)},9119:function(s,e,r){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.getTrustTokens=e.clearDataForOrigin=e.getUsageAndQuota=void 0;var o=n(r(3783)),a=n(r(5031)),c=n(r(615)),l=r(2139),h=c.default("local"),d=c.default("session");e.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},e.clearDataForOrigin=function(f){var g=f.storageTypes.split(",");o.default(g,function(v){if(v==="cookies"){var S=l.getCookies().cookies;o.default(S,function(A){var w=A.name;return a.default(w)})}else v==="local_storage"&&(h.clear(),d.clear())})},e.getTrustTokens=function(){return{tokens:[]}}},3276:function(s,e,r){var n,o=this&&this.__extends||(n=function(l,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var g in f)f.hasOwnProperty(g)&&(d[g]=f[g])},n(l,h)},function(l,h){function d(){this.constructor=l}n(l,h),l.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var c=function(l){function h(){return l!==null&&l.apply(this,arguments)||this}return o(h,l),h.prototype.trigger=function(d,f){this.emit("message",JSON.stringify({method:d,params:f}))},h}(a(r(1443)).default);e.default=new c},1628:function(s,e,r){var n=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.setGlobal=void 0;var o=n(r(6768)),a=n(r(2327)),c=n(r(1352)),l=n(r(2533)),h=n(r(8933)),d=n(r(3783)),f={copy:function(g){o.default(g)||(g=JSON.stringify(g,null,2)),a.default(g)},$:function(g){return document.querySelector(g)},$$:function(g){return c.default(document.querySelectorAll(g))},$x:function(g){return h.default(g)},keys:l.default};e.setGlobal=function(g,v){f[g]=v},e.default=function(g){var v;d.default(f,function(S,A){window[A]||(window[A]=S)});try{v=eval.call(window,"("+g+")")}catch{v=eval.call(window,g)}return d.default(f,function(S,A){window[A]&&window[A]===S&&delete window[A]}),v}},6126:function(s,e,r){var n,o=this&&this.__extends||(n=function(d,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var S in v)v.hasOwnProperty(S)&&(g[S]=v[S])},n(d,f)},function(d,f){function g(){this.constructor=d}n(d,f),d.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}),a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(3783)),h=function(d){function f(){var g=d.call(this)||this;return g.observer=new MutationObserver(function(v){l.default(v,function(S){return g.handleMutation(S)})}),g}return o(f,d),f.prototype.observe=function(){var g=this.observer;g.disconnect(),g.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},f.prototype.handleMutation=function(g){g.type==="attributes"?this.emit("attributes",g.target,g.attributeName):g.type==="childList"?this.emit("childList",g.target,g.addedNodes,g.removedNodes):g.type==="characterData"&&this.emit("characterData",g.target)},f}(c.default);e.default=new h},2049:function(s,e,r){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=e.isValidNode=e.filterNodes=e.getPreviousNode=e.getChildNodes=e.wrap=e.getNodeId=e.clear=e.getOrCreateNodeId=void 0;var o=n(r(2461)),a=n(r(5972)),c=n(r(3783)),l=n(r(4331)),h=n(r(6341)),d=n(r(6329)),f=r(316),g=new Map,v=new Map,S=1;function A(y){var O=v.get(y);return O||(O=S++,v.set(y,O),g.set(O,y),O)}function w(y,O){var k=(O===void 0?{}:O).depth,P=k===void 0?1:k,L=A(y),M={nodeName:y.nodeName,nodeType:y.nodeType,localName:y.localName||"",nodeValue:y.nodeValue||"",nodeId:L,backendNodeId:L};if(y.parentNode&&(M.parentId=A(y.parentNode)),y.nodeType===10)return d.default(M,{publicId:"",systemId:""});if(y.attributes){var B=[];c.default(y.attributes,function(U){var V=U.name,Q=U.value;return B.push(V,Q)}),M.attributes=B}var j=b(y.childNodes);M.childNodeCount=j.length;var F=M.childNodeCount===1&&j[0].nodeType===3;return(P>0||F)&&(M.children=m(y,P)),M}function m(y,O){var k=b(y.childNodes);return o.default(k,function(P){return w(P,{depth:O-1})})}function b(y){return a.default(y,function(O){return x(O)})}function x(y){if(y.nodeType===1){var O=y.getAttribute("class")||"";if(h.default(O,"__chobitsu-hide__")||h.default(O,"html2canvas-container"))return!1}var k=!(y.nodeType===3&&l.default(y.nodeValue||"")==="");return k&&y.parentNode?x(y.parentNode):k}e.getOrCreateNodeId=A,e.clear=function(){g.clear(),v.clear()},e.getNodeId=function(y){return v.get(y)},e.wrap=w,e.getChildNodes=m,e.getPreviousNode=function(y){var O=y.previousSibling;if(O){for(;!x(O)&&O.previousSibling;)O=O.previousSibling;return O&&x(O)?O:void 0}},e.filterNodes=b,e.isValidNode=x,e.getNode=function(y){var O=g.get(y);if(!O||O.nodeType===10)throw f.createErr(-32e3,"Could not find node with given id");return O}},7923:function(s,e,r){var n=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(e,"__esModule",{value:!0}),e.getProperties=e.releaseObj=e.getObj=e.wrap=e.clear=void 0;var o=n(r(3367)),a=n(r(6156)),c=n(r(6472)),l=n(r(4777)),h=n(r(9833)),d=n(r(2749)),f=n(r(3708)),g=n(r(7470)),v=n(r(1754)),S=n(r(3085)),A=n(r(2533)),w=n(r(300)),m=n(r(1116)),b=n(r(8740)),x=n(r(415)),y=n(r(9804)),O=n(r(6257)),k=new Map,P=new Map,L=new Map,M=new Map,B=1;function j(K,ne){var de=P.get(K);return de||(de=JSON.stringify({injectedScriptId:0,id:B++}),P.set(K,de),k.set(de,K),L.set(de,ne),de)}function F(K,ne){var de=ne===void 0?{}:ne,Re=de.generatePreview,Te=Re!==void 0&&Re,Me=de.self,Ie=Me===void 0?K:Me,ce=te(K),pe=ce.type,me=ce.subtype;return pe==="undefined"?ce:pe==="string"||pe==="boolean"||me==="null"?(ce.value=K,ce):(ce.description=G(K,Ie),pe==="number"?(ce.value=K,ce):pe==="symbol"?(ce.objectId=j(K,Ie),ce):(ce.className=pe==="function"?"Function":me==="array"?"Array":me==="map"?"Map":me==="set"?"Set":me==="regexp"?"RegExp":me==="error"?K.name:S.default(K,!1),Te&&(ce.preview=Q(K,Ie)),ce.objectId=j(K,Ie),ce))}function U(K){return k.get(K)}e.clear=function(){k.clear(),P.clear(),L.clear()},e.wrap=F,e.getObj=U,e.releaseObj=function(K){var ne=U(K);P.delete(ne),L.delete(K),k.delete(K)},e.getProperties=function(K){for(var ne=K.accessorPropertiesOnly,de=K.objectId,Re=K.ownProperties,Te=K.generatePreview,Me=[],Ie={prototype:!Re,unenumerable:!0,symbol:!ne},ce=k.get(de),pe=L.get(de),me=m.default(ce,Ie),we=x.default(ce),Xe=0,Qe=me.length;Xe<Qe;Xe++){var Pe=me[Xe],Ze=void 0;try{Ze=pe[Pe]}catch{}var _e={name:o.default(Pe),isOwn:O.default(pe,Pe)},qe=Object.getOwnPropertyDescriptor(ce,Pe);if(!qe&&we&&(qe=Object.getOwnPropertyDescriptor(we,Pe)),qe){if(ne&&!qe.get&&!qe.set)continue;_e.configurable=qe.configurable,_e.enumerable=qe.enumerable,_e.writable=qe.writable,qe.get&&(_e.get=F(qe.get)),qe.set&&(_e.set=F(qe.set))}we&&O.default(we,Pe)&&_e.enumerable&&(_e.isOwn=!0);var Be=!0;!_e.isOwn&&_e.get&&(Be=!1),Be&&(y.default(Pe)?(_e.symbol=F(Pe),_e.value={type:"undefined"}):_e.value=F(Ze,{generatePreview:Te})),ne&&l.default(Ze)&&b.default(Ze)||Me.push(_e)}if(!we||Re||J(ce)||Me.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:O.default(ce,"__proto__"),value:F(we,{self:pe}),writable:!1}),ne)return{result:Me};var mt=[];if(we&&!J(ce)&&mt.push({name:"[[Prototype]]",value:F(we,{self:pe})}),f.default(ce)||g.default(ce)){var ht=function(Dt){for(var Se=M.get(Dt),Ye=Se?U(Se):[],Le=Dt.entries(),ze=Le.next().value;ze;)f.default(Dt)?Ye.push(new Y(ze[1],ze[0])):Ye.push(new Y(ze[1])),ze=Le.next().value;return Ye}(ce);mt.push({name:"[[Entries]]",value:F(ht)})}return{internalProperties:mt,result:Me}};var V=5;function Q(K,ne){ne===void 0&&(ne=K);var de=te(K);de.description=G(K,ne);var Re=!1,Te=[],Me=A.default(K),Ie=Me.length;Ie>V&&(Ie=V,Re=!0);for(var ce=0;ce<Ie;ce++){var pe=Me[ce];Te.push(q(pe,ne[pe]))}if(de.properties=Te,f.default(K)){for(var me=[],we=(ce=0,K.keys()),Xe=we.next().value;Xe;){if(ce>V){Re=!0;break}me.push({key:Q(Xe),value:Q(K.get(Xe))}),ce++,Xe=we.next().value}de.entries=me}else if(g.default(K)){var Qe=[],Pe=(ce=0,K.keys());for(Xe=Pe.next().value;Xe;){if(ce>V){Re=!0;break}Qe.push({value:Q(Xe)}),ce++,Xe=Pe.next().value}de.entries=Qe}return de.overflow=Re,de}function q(K,ne){var de=te(ne);de.name=K;var Re,Te=de.subtype;return Re=de.type==="object"?Te==="null"?"null":Te==="array"?"Array("+ne.length+")":Te==="map"?"Map("+ne.size+")":Te==="set"?"Set("+ne.size+")":S.default(ne,!1):o.default(ne),de.value=Re,de}function G(K,ne){ne===void 0&&(ne=K);var de=te(K),Re=de.type,Te=de.subtype;return Re==="string"?K:Re==="number"||Re==="symbol"?o.default(K):Re==="function"?w.default(K):Te==="array"?"Array("+K.length+")":Te==="map"?"Map("+ne.size+")":Te==="set"?"Set("+ne.size+")":Te==="regexp"?o.default(K):Te==="error"?K.stack:Te==="internal#entry"?K.name?'{"'+o.default(K.name)+'" => "'+o.default(K.value)+'"}':'"'+o.default(K.value)+'"':S.default(K,!1)}function te(K){var ne=typeof K,de="object";if(K instanceof Y)de="internal#entry";else if(a.default(K))de="null";else if(c.default(K))de="array";else if(v.default(K))de="regexp";else if(d.default(K))de="error";else if(f.default(K))de="map";else if(g.default(K))de="set";else try{h.default(K)&&(de="node")}catch{}return{type:ne,subtype:de}}var Y=function(K,ne){ne&&(this.name=ne),this.value=K};function J(K){return K instanceof Y||!!(K[0]&&K[0]instanceof Y)}},2636:function(s,e,r){var n,o=this&&this.__extends||(n=function(V,Q){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,G){q.__proto__=G}||function(q,G){for(var te in G)G.hasOwnProperty(te)&&(q[te]=G[te])},n(V,Q)},function(V,Q){function q(){this.constructor=V}n(V,Q),V.prototype=Q===null?Object.create(Q):(q.prototype=Q.prototype,new q)}),a=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(e,"__esModule",{value:!0}),e.fullUrl=e.FetchRequest=e.XhrRequest=void 0;var c=a(r(1443)),l=a(r(6768)),h=a(r(9702)),d=a(r(6334)),f=a(r(8887)),g=a(r(4331)),v=a(r(8847)),S=a(r(3783)),A=a(r(6930)),w=a(r(3875)),m=r(316),b=function(V){function Q(q,G,te){var Y=V.call(this)||this;return Y.xhr=q,Y.reqHeaders={},Y.method=G,Y.url=M(te),Y.id=m.createId(),Y}return o(Q,V),Q.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},Q.prototype.handleSend=function(q){l.default(q)||(q=""),q={name:B(this.url),url:this.url,data:q,time:v.default(),reqHeaders:this.reqHeaders,method:this.method},f.default(this.reqHeaders)||(q.reqHeaders=this.reqHeaders),this.emit("send",this.id,q)},Q.prototype.handleReqHeadersSet=function(q,G){q&&G&&(this.reqHeaders[q]=G)},Q.prototype.handleHeadersReceived=function(){var q=this.xhr,G=j(q.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:G.type,subType:G.subType,size:P(q,!0,this.url),time:v.default(),resHeaders:k(q)})},Q.prototype.handleDone=function(){var q,G,te,Y=this,J=this.xhr,K=J.responseType,ne="",de=function(){Y.emit("done",Y.id,{status:J.status,size:P(J,!1,Y.url),time:v.default(),resTxt:ne})},Re=j(J.getResponseHeader("Content-Type")||"");K!=="blob"||Re.type!=="text"&&Re.subType!=="javascript"&&Re.subType!=="json"?(K!==""&&K!=="text"||(ne=J.responseText),K==="json"&&(ne=JSON.stringify(J.response)),de()):(q=J.response,G=function(Te,Me){Me&&(ne=Me),de()},(te=new FileReader).onload=function(){G(null,te.result)},te.onerror=function(Te){G(Te)},te.readAsText(q))},Q}(c.default);e.XhrRequest=b;var x=function(V){function Q(q,G){G===void 0&&(G={});var te=V.call(this)||this;return q instanceof window.Request&&(q=q.url),te.url=M(q),te.id=m.createId(),te.options=G,te.reqHeaders=G.headers||{},te.method=G.method||"GET",te}return o(Q,V),Q.prototype.send=function(q){var G=this,te=this.options,Y=l.default(te.body)?te.body:"";this.emit("send",this.id,{name:B(this.url),url:this.url,data:Y,reqHeaders:this.reqHeaders,time:v.default(),method:this.method}),q.then(function(J){var K=j((J=J.clone()).headers.get("Content-Type"));return J.text().then(function(ne){var de={type:K.type,subType:K.subType,time:v.default(),size:y(J,ne),resTxt:ne,resHeaders:O(J),status:J.status};f.default(G.reqHeaders)||(de.reqHeaders=G.reqHeaders),G.emit("done",G.id,de)}),J})},Q}(c.default);function y(V,Q){var q=V.headers.get("Content-length");return q?w.default(q):U(Q)}function O(V){var Q={};return V.headers.forEach(function(q,G){return Q[G]=q}),Q}function k(V){var Q=V.getAllResponseHeaders().split(`
`),q={};return S.default(Q,function(G){if((G=g.default(G))!==""){var te=G.split(":",2),Y=te[0],J=te[1];q[Y]=g.default(J)}}),q}function P(V,Q,q){var G=0;function te(){if(!Q){var Y=V.responseType,J="";Y!==""&&Y!=="text"||(J=V.responseText),J&&(G=U(J))}}if(function(Y){return!A.default(Y,F)}(q))te();else try{G=w.default(V.getResponseHeader("Content-Length"))}catch{te()}return G===0&&te(),G}e.FetchRequest=x;var L=document.createElement("a");function M(V){return L.href=V,L.protocol+"//"+L.host+L.pathname+L.search+L.hash}function B(V){var Q=h.default(V.split("/"));return Q.indexOf("?")>-1&&(Q=g.default(Q.split("?")[0])),Q===""&&(Q=new d.default(V).hostname),Q}function j(V){if(!V)return{type:"unknown",subType:"unknown"};var Q=V.split(";")[0].split("/");return{type:Q[0],subType:h.default(Q)}}e.fullUrl=M;var F=window.location.origin;function U(V){var Q=encodeURIComponent(V).match(/%[89ABab]/g);return V.length+(Q?Q.length:0)}},316:function(s,e,r){var n,o=this&&this.__extends||(n=function(x,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,k){O.__proto__=k}||function(O,k){for(var P in k)k.hasOwnProperty(P)&&(O[P]=k[P])},n(x,y)},function(x,y){function O(){this.constructor=x}n(x,y),x.prototype=y===null?Object.create(y):(O.prototype=y.prototype,new O)}),a=this&&this.__awaiter||function(x,y,O,k){return new(O||(O=Promise))(function(P,L){function M(F){try{j(k.next(F))}catch(U){L(U)}}function B(F){try{j(k.throw(F))}catch(U){L(U)}}function j(F){var U;F.done?P(F.value):(U=F.value,U instanceof O?U:new O(function(V){V(U)})).then(M,B)}j((k=k.apply(x,y||[])).next())})},c=this&&this.__generator||function(x,y){var O,k,P,L,M={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return L={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function B(j){return function(F){return function(U){if(O)throw new TypeError("Generator is already executing.");for(;M;)try{if(O=1,k&&(P=2&U[0]?k.return:U[0]?k.throw||((P=k.return)&&P.call(k),0):k.next)&&!(P=P.call(k,U[1])).done)return P;switch(k=0,P&&(U=[2&U[0],P.value]),U[0]){case 0:case 1:P=U;break;case 4:return M.label++,{value:U[1],done:!1};case 5:M.label++,k=U[1],U=[0];continue;case 7:U=M.ops.pop(),M.trys.pop();continue;default:if(P=M.trys,!((P=P.length>0&&P[P.length-1])||U[0]!==6&&U[0]!==2)){M=0;continue}if(U[0]===3&&(!P||U[1]>P[0]&&U[1]<P[3])){M.label=U[1];break}if(U[0]===6&&M.label<P[1]){M.label=P[1],P=U;break}if(P&&M.label<P[2]){M.label=P[2],M.ops.push(U);break}P[2]&&M.ops.pop(),M.trys.pop();continue}U=y.call(x,M)}catch(V){U=[6,V],k=0}finally{O=P=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([j,F])}}},l=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBase64Content=e.getTextContent=e.getOrigin=e.getUrl=e.createErr=e.ErrorWithCode=e.getAbsoluteUrl=e.createId=void 0;var h=l(r(5229)),d=l(r(1216)),f=l(r(6930)),g=l(r(6334)),v=l(r(1792)),S=l(r(6610)),A=d.default(1e3,9999)+".";e.createId=function(){return h.default(A)},e.getAbsoluteUrl=function(x){var y=document.createElement("a");return y.href=x,y.href};var w=function(x){function y(O,k){var P=this.constructor,L=x.call(this,k)||this;return L.code=O,Object.setPrototypeOf(L,P.prototype),L}return o(y,x),y}(Error);function m(x,y,O){return O===void 0&&(O=""),a(this,void 0,void 0,function(){var k;return c(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,8]),(k=new g.default(x)).setQuery("__chobitsu-hide__","true"),[4,S.default.get(k.toString(),{responseType:y})];case 1:return[2,P.sent().data];case 2:if(P.sent(),!O)return[3,7];P.label=3;case 3:return P.trys.push([3,6,,7]),[4,S.default.get(b(O,x),{responseType:y})];case 4:return[4,P.sent().data];case 5:return[2,P.sent()];case 6:return P.sent(),[3,7];case 7:return[3,8];case 8:return[2,y==="arraybuffer"?new ArrayBuffer(0):""]}})})}function b(x,y){var O=new g.default(x);return O.setQuery("url",y),O.setQuery("__chobitsu-hide__","true"),O.toString()}e.ErrorWithCode=w,e.createErr=function(x,y){return new w(x,y)},e.getUrl=function(){var x=location.href;return f.default(x,"about:")?parent.location.href:x},e.getOrigin=function(){var x=location.origin;return x==="null"?parent.location.origin:x},e.getTextContent=function(x,y){return y===void 0&&(y=""),a(this,void 0,void 0,function(){return c(this,function(O){switch(O.label){case 0:return[4,m(x,"text",y)];case 1:return[2,O.sent()]}})})},e.getBase64Content=function(x,y){return y===void 0&&(y=""),a(this,void 0,void 0,function(){var O;return c(this,function(k){switch(k.label){case 0:return O=v.default,[4,m(x,"arraybuffer",y)];case 1:return[2,O.apply(void 0,[k.sent(),"base64"])]}})})}},3191:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 10px 10px 35px}#_console ._control [class*=' _icon-'],#_console ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=' _icon-']._active,#_console ._control [class*=' _icon-']:active,#_console ._control [class^='_icon-']._active,#_console ._control [class^='_icon-']:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}",""]),s.exports=e},13:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),s.exports=e},5896:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px 0}#_elements ._control [class*=' _icon-'],#_elements ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=' _icon-']._active,#_elements ._control [class*=' _icon-']:active,#_elements ._control [class^='_icon-']._active,#_elements ._control [class^='_icon-']:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}",""]),s.exports=e},9195:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),s.exports=e},879:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},3180:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border);padding:10px;border-bottom:none}#_network ._control [class*=' _icon-'],#_network ._control [class^='_icon-']{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=' _icon-']._active,#_network ._control [class*=' _icon-']:active,#_network ._control [class^='_icon-']._active,#_network ._control [class^='_icon-']:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}",""]),s.exports=e},2488:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding:10px!important}#_resources ._image-list:after{content:'';display:block;clear:both}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},8011:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),s.exports=e},5571:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),s.exports=e},7346:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),s.exports=e},1344:function(s,e,r){(e=r(3645)(!1)).push([s.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),s.exports=e},8020:function(s,e,r){(e=r(3645)(!1)).push([s.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:'';content:none}._container table{border-collapse:collapse;border-spacing:0}",""]),s.exports=e},8516:function(s,e,r){(e=r(3645)(!1)).push([s.id,`.luna-console{background:var(--background)}.luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}.luna-console-log-item a{color:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}.luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}.luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}.luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}.luna-console-preview .luna-console-key{color:var(--var-color)}.luna-console-preview .luna-console-number{color:var(--number-color)}.luna-console-preview .luna-console-null{color:var(--operator-color)}.luna-console-preview .luna-console-string{color:var(--string-color)}.luna-console-preview .luna-console-boolean{color:var(--keyword-color)}.luna-console-preview .luna-console-special{color:var(--operator-color)}.luna-console-preview .luna-console-keyword{color:var(--keyword-color)}.luna-console-preview .luna-console-operator{color:var(--operator-color)}.luna-console-preview .luna-console-comment{color:var(--comment-color)}.luna-object-viewer{color:var(--primary);font-size:12px!important}.luna-object-viewer-null{color:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{color:var(--string-color)}.luna-object-viewer-number{color:var(--number-color)}.luna-object-viewer-boolean{color:var(--keyword-color)}.luna-object-viewer-special{color:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}.luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}.luna-notification{pointer-events:none!important;padding:10px;z-index:1000}.luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}.luna-notification-upper{margin-bottom:10px}.luna-notification-lower{margin-top:10px}.luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}.luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{background:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}.luna-dom-viewer{color:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}.luna-dom-viewer-children{margin:0;padding-left:15px!important}.luna-modal{z-index:9999999}.luna-modal-body,.luna-modal-input{color:var(--foreground);background:var(--background)}.luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}.luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}.luna-modal-button-group .luna-modal-primary{background:var(--accent)}.luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}.luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}.luna-tab-tabs-container{border-color:var(--border)}.luna-tab-item.luna-tab-selected,.luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}.luna-tab-slider{background:var(--accent)}.luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}.luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer .luna-text-viewer-copy,.luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}.luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}.luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}.luna-setting{color:var(--foreground);background:var(--background)}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:var(--darker-background)}.luna-setting-item.luna-setting-selected:focus{outline:0}.luna-setting-item-title{font-size:14px}.luna-setting-item-separator{border-color:var(--border)}.luna-setting-item-checkbox input{border-color:var(--border)}.luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}.luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}.luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}.luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:var(--darker-background)}.luna-setting-item-button button:active{border:1px solid var(--accent)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}.luna-box-model{background:0 0}.luna-box-model-position{color:var(--foreground)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=' _icon-'],._container h2 [class^='_icon-']{font-weight:400}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}`,""]),s.exports=e},6833:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-box-model{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;display:inline-block;color:#222;font-size:12px;text-align:center;white-space:nowrap}.luna-box-model.luna-box-model-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-box-model.luna-box-model-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color:#a5a5a5;background-color:#242424}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px}.luna-box-model-position{border:1px grey dotted}.luna-box-model-margin{color:#333;border:1px dashed;background:rgba(246,178,107,.66)}.luna-box-model-border{color:#333;border:1px #000 solid;background:rgba(255,229,153,.66)}.luna-box-model-padding{color:#333;border:1px grey dashed;background:rgba(147,196,125,.55)}.luna-box-model-content{color:#333;border:1px grey solid;min-width:100px;background:rgba(111,168,220,.66)}",""]),s.exports=e},9327:function(s,e,r){(e=r(3645)(!1)).push([s.id,`@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{content:'\\f101'}.luna-console-icon-input:before{content:'\\f102'}.luna-console-icon-output:before{content:'\\f103'}.luna-console-icon-warn:before{content:'\\f104'}.luna-console-icon-caret-down:before{content:'\\f105'}.luna-console-icon-caret-right:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}`,""]),s.exports=e},4987:function(s,e,r){(e=r(3645)(!1)).push([s.id,'.luna-data-grid{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;font-size:12px;border:1px solid #ccc;overflow:hidden;outline:0}.luna-data-grid.luna-data-grid-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background-color:#242424}.luna-data-grid.luna-data-grid-theme-dark{color:#a5a5a5;background:#242424;border-color:#3d3d3d}.luna-data-grid table{width:100%;height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid #ccc;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid #ccc;text-align:left;background:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:active,.luna-data-grid th.luna-data-grid-sortable:hover{background:#e6e6e6}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selected{color:#fff;background:#1a73e8}.luna-data-grid:focus.luna-data-grid-theme-dark .luna-data-grid-node.luna-data-grid-selected{background:#0e639c}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto}.luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#ddd}.luna-data-grid-data-container tr:nth-child(even){background:#f2f7fd}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{background:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background:#0b2544}',""]),s.exports=e},8903:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{content:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{content:'\\f102'}.luna-dom-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:0 0;overflow-x:hidden;word-wrap:break-word;padding:0 0 0 12px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;cursor:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#a5a5a5;background-color:#242424}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#f2f7fd}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{display:none}.luna-dom-viewer-html-tag{color:#881280}.luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:-10000px;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{color:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}",""]),s.exports=e},5512:function(s,e,r){(e=r(3645)(!1)).push([s.id,`@font-face{font-family:luna-modal-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-modal-icon-'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:'\\f101'}.luna-modal{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}.luna-modal.luna-modal-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-modal.luna-modal-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color:#a5a5a5;background-color:#242424}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;background:#fff;max-height:100%;display:flex;flex-direction:column;border-radius:4px}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;background:#e9ecef;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{background:#1a73e8;content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{color:#1a73e8;border:1px solid #ccc;background:#fff}.luna-modal-button.luna-modal-primary{color:#fff;background:#1a73e8}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid #ccc;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-dark{color:#a5a5a5}.luna-modal-theme-dark .luna-modal-body{background:#242424}`,""]),s.exports=e},7591:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-notification{position:fixed;top:0;left:0;width:100%;height:100%;padding:20px;box-sizing:border-box;pointer-events:none;display:flex;flex-direction:column;font-size:14px;font-family:Arial,Helvetica,sans-serif}.luna-notification-item{display:flex;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);padding:10px 16px;color:#333;background:#fff}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-theme-dark .luna-notification-item{box-shadow:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);color:#a5a5a5;background:#242424}",""]),s.exports=e},4821:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),s.exports=e},7871:function(s,e,r){(e=r(3645)(!1)).push([s.id,`.luna-setting{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;min-width:320px}.luna-setting.luna-setting-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-setting.luna-setting-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting-item.luna-setting-selected,.luna-setting-item:hover{background:#f3f3f3}.luna-setting-item.luna-setting-selected:focus{outline:1px solid #1a73e8}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description{line-height:1.4em}.luna-setting-item .luna-setting-description *{margin:0}.luna-setting-item .luna-setting-description strong{font-weight:600}.luna-setting-item .luna-setting-description a{background-color:transparent;color:#0969da;text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-size:18px;font-weight:600}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:100%}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:#333;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;outline:0;padding:2px 8px;border-radius:0;font-size:14px;background:#fff;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#ccc;border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;background:#1a73e8;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:0 0;height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid #ccc;background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid #ccc;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked{background-color:#1a73e8;border-color:#1a73e8}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;background:#fff;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #ccc;padding:2px 8px;padding-right:18px;outline:0;color:#333;border-radius:0;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #333;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;background:#fff;border:1px solid #ccc;padding:2px 8px;color:#1a73e8;font-size:14px;border-radius:2px}.luna-setting-item-button button:active,.luna-setting-item-button button:hover{background:#f3f3f3}.luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-item-separator{border-bottom:1px solid #ccc}.luna-setting-theme-dark{color-scheme:dark;color:#a5a5a5;background:#242424}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a{background-color:transparent;color:#58a6ff}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-input input{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{color:#a5a5a5;border-color:#3d3d3d;background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-button button{background:#242424;border-color:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background:#292a2d}.luna-setting-theme-dark .luna-setting-item-button button:active{border:1px solid #1a73e8}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background:#3d3d3d;border-color:#3d3d3d;color:#a5a5a5}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:#3d3d3d}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#3d3d3d;background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}`,""]),s.exports=e},2156:function(s,e,r){(e=r(3645)(!1)).push([s.id,".luna-tab{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;overflow:hidden;width:100%}.luna-tab.luna-tab-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-tab.luna-tab-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color:#a5a5a5;background-color:#242424}.luna-tab-tabs-container{border-bottom:1px solid #ccc}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{cursor:pointer;display:inline-block;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item:hover{background:#f3f3f3}.luna-tab-slider{transition:left .3s,width .3s;height:1px;background:#1a73e8;position:absolute;bottom:0;left:0}",""]),s.exports=e},5777:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),s.exports=e},5357:function(s,e,r){(e=r(3645)(!1)).push([s.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),s.exports=e},3645:function(s){s.exports=function(e){var r=[];return r.toString=function(){return this.map(function(n){var o=function(a,c){var l=a[1]||"",h=a[3];if(!h)return l;if(c&&typeof btoa=="function"){var d=(g=h,v=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),S="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(v),"/*# ".concat(S," */")),f=h.sources.map(function(A){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(A," */")});return[l].concat(f).concat([d]).join(`
`)}var g,v,S;return[l].join(`
`)}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(o,"}"):o}).join("")},r.i=function(n,o,a){typeof n=="string"&&(n=[[null,n,""]]);var c={};if(a)for(var l=0;l<this.length;l++){var h=this[l][0];h!=null&&(c[h]=!0)}for(var d=0;d<n.length;d++){var f=[].concat(n[d]);a&&c[f[0]]||(o&&(f[2]?f[2]="".concat(o," and ").concat(f[2]):f[2]=o),r.push(f))}},r}},1512:function(s,e,r){var n=r(3244),o=r(6906),a=r(7665),c=r(975),l=r(4991),h=r(4209),d=r(9702),f=r(6757),g=r(8381),v=r(5543),S=r(7781),A=r(8908),w=r(1286),m=r(6768);e=function(x){return new n(x)},n.methods({offset:function(){return o(this)},hide:function(){return this.css("display","none")},show:function(){return a(this),this},first:function(){return e(this[0])},last:function(){return e(d(this))},get:function(x){return this[x]},eq:function(x){return e(this[x])},on:function(x,y,O){return v.on(this,x,y,O),this},off:function(x,y,O){return v.off(this,x,y,O),this},html:function(x){var y=h.html(this,x);return w(x)?y:this},text:function(x){var y=h.text(this,x);return w(x)?y:this},val:function(x){var y=h.val(this,x);return w(x)?y:this},css:function(x,y){var O=c(this,x,y);return b(x,y)?O:this},attr:function(x,y){var O=l(this,x,y);return b(x,y)?O:this},data:function(x,y){var O=g(this,x,y);return b(x,y)?O:this},rmAttr:function(x){return l.remove(this,x),this},remove:function(){return f(this),this},addClass:function(x){return S.add(this,x),this},rmClass:function(x){return S.remove(this,x),this},toggleClass:function(x){return S.toggle(this,x),this},hasClass:function(x){return S.has(this,x)},parent:function(){return e(this[0].parentNode)},append:function(x){return A.append(this,x),this},prepend:function(x){return A.prepend(this,x),this},before:function(x){return A.before(this,x),this},after:function(x){return A.after(this,x),this}});var b=function(x,y){return w(y)&&m(x)};s.exports=e},4991:function(s,e,r){var n=r(1352),o=r(5166),a=r(6768),c=r(3783),l=r(1286),h=r(2341);(e=function(d,f,g){if(d=h(d),l(g)&&a(f))return function(S,A){return S.getAttribute(A)}(d[0],f);var v=f;o(v)||((v={})[f]=g),function(S,A){c(S,function(w){c(A,function(m,b){w.setAttribute(b,m)})})}(d,v)}).remove=function(d,f){d=h(d),f=n(f),c(d,function(g){c(f,function(v){g.removeAttribute(v)})})},s.exports=e},7781:function(s,e,r){var n=r(1352),o=r(6053),a=r(2341),c=r(6768),l=r(3783);function h(d){return c(d)?d.split(/\s+/):n(d)}e={add:function(d,f){d=a(d);var g=h(f);l(d,function(v){var S=[];l(g,function(A){e.has(v,A)||S.push(A)}),S.length!==0&&(v.className+=(v.className?" ":"")+S.join(" "))})},has:function(d,f){d=a(d);var g=new RegExp("(^|\\s)"+f+"(\\s|$)");return o(d,function(v){return g.test(v.className)})},toggle:function(d,f){d=a(d),l(d,function(g){if(!e.has(g,f))return e.add(g,f);e.remove(g,f)})},remove:function(d,f){d=a(d);var g=h(f);l(d,function(v){l(g,function(S){v.classList.remove(S)})})}},s.exports=e},975:function(s,e,r){var n=r(6768),o=r(5166),a=r(7622),c=r(1286),l=r(6341),h=r(3990),d=r(2341),f=r(747),g=r(3783);e=function(S,A,w){if(S=d(S),c(w)&&n(A))return function(b,x){return b.style[f(x)]||getComputedStyle(b,"").getPropertyValue(x)}(S[0],A);var m=A;o(m)||((m={})[A]=w),function(b,x){g(b,function(y){var O=";";g(x,function(k,P){P=f.dash(P),O+=P+":"+function(L,M){var B=h(M)&&!l(v,a(L));return B?M+"px":M}(P,k)+";"}),y.style.cssText+=O})}(S,m)};var v=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];s.exports=e},8381:function(s,e,r){var n=r(4991),o=r(6768),a=r(5166),c=r(3783);r(2341),e=function(l,h,d){var f=h;return o(h)&&(f="data-"+h),a(h)&&(f={},c(h,function(g,v){f["data-"+v]=g})),n(l,f,d)},s.exports=e},5543:function(s,e,r){var n=r(2443),o=r(1286),a=r(2341),c=r(3783);function l(h){return function(d,f,g,v){d=a(d),o(v)&&(v=g,g=void 0),c(d,function(S){n[h](S,f,g,v)})}}e={on:l("add"),off:l("remove")},s.exports=e},8908:function(s,e,r){var n=r(3783),o=r(2341),a=r(6768);function c(l){return function(h,d){h=o(h),n(h,function(f){if(a(d))f.insertAdjacentHTML(l,d);else{var g=f.parentNode;switch(l){case"beforebegin":g&&g.insertBefore(d,f);break;case"afterend":g&&g.insertBefore(d,f.nextSibling);break;case"beforeend":f.appendChild(d);break;case"afterbegin":f.prepend(d)}}})}}e={before:c("beforebegin"),after:c("afterend"),append:c("beforeend"),prepend:c("afterbegin")},s.exports=e},6906:function(s,e,r){var n=r(2341);e=function(o){var a=(o=n(o))[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:Math.round(a.width),height:Math.round(a.height)}},s.exports=e},4209:function(s,e,r){var n=r(1286),o=r(3783),a=r(2341);function c(l){return function(h,d){var f=(h=a(h))[0];if(n(d))return f?f[l]:"";f&&o(h,function(g){g[l]=d})}}e={html:c("innerHTML"),text:c("textContent"),val:c("value")},s.exports=e},6757:function(s,e,r){var n=r(3783),o=r(2341);e=function(a){a=o(a),n(a,function(c){var l=c.parentNode;l&&l.removeChild(c)})},s.exports=e},2341:function(s,e,r){var n=r(6768),o=r(1352),a=r(3244);e=function(c){return o(n(c)?new a(c):c)},s.exports=e},7665:function(s,e,r){var n=r(3783),o=r(2341);e=function(c){c=o(c),n(c,function(l){(function(h){return getComputedStyle(h,"").getPropertyValue("display")=="none"})(l)&&(l.style.display=function(h){var d,f;return a[h]||(d=document.createElement(h),document.documentElement.appendChild(d),f=getComputedStyle(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),f=="none"&&(f="block"),a[h]=f),a[h]}(l.nodeName))})};var a={};s.exports=e},7496:function(s,e,r){var n=r(6329),o=r(1352),a=r(5022),c=r(7653),l=r(9537),h=(e=function(d,f){return h.extend(d,f)}).Base=function d(f,g,v){v=v||{};var S=g.className||c(g,"initialize.name")||"";delete g.className;var A=function(){var w=o(arguments);return this.initialize&&this.initialize.apply(this,w)||this};if(!l)try{A=new Function("toArr","return function "+S+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(o)}catch{}return a(A,f),A.prototype.constructor=A,A.extend=function(w,m){return d(A,w,m)},A.inherits=function(w){a(A,w)},A.methods=function(w){return n(A.prototype,w),A},A.statics=function(w){return n(A,w),A},A.methods(g).statics(v),A}(Object,{className:"Base",callSuper:function(d,f,g){return d.prototype[f].apply(this,g)},toString:function(){return this.constructor.name}});s.exports=e},3009:function(s,e,r){var n=r(7496),o=r(6768),a=r(9882),c=r(3279),l=r(5925),h=r(5044);e=n({initialize:function(A){o(A)&&(A=e.parse(A)),this.model=A.model,this.val=A.val},toRgb:function(){var A=this.val;this.model==="hsl"&&(A=l(A));var w="rgba";return A[3]===1&&(w="rgb",A=A.slice(0,3)),w+"("+A.join(", ")+")"},toHex:function(){var A=this.val;this.model==="hsl"&&(A=l(A));var w=h.encode(A.slice(0,3));return w[0]===w[1]&&w[2]===w[3]&&w[4]===w[5]&&(w=w[0]+w[2]+w[5]),"#"+w},toHsl:function(){var A=this.val;this.model==="rgb"&&(A=c(A));var w="hsla";return A[3]===1&&(w="hsl",A=A.slice(0,3)),A[1]=A[1]+"%",A[2]=A[2]+"%",w+"("+A.join(", ")+")"}},{parse:function(A){var w,m,b=[0,0,0,1],x="rgb";if(m=A.match(d))for(m=m[1],w=0;w<3;w++)b[w]=parseInt(m[w]+m[w],16);else if(m=A.match(f))for(m=m[1],w=0;w<3;w++){var y=2*w;b[w]=parseInt(m.slice(y,y+2),16)}else if(m=A.match(g)){for(w=0;w<3;w++)b[w]=parseInt(m[w+1],0);m[4]&&(b[3]=parseFloat(m[4]))}else if(m=A.match(v)){for(w=0;w<3;w++)b[w]=Math.round(2.55*parseFloat(m[w+1]));m[4]&&(b[3]=parseFloat(m[4]))}else(m=A.match(S))&&(x="hsl",b=[(parseFloat(m[1])%360+360)%360,a(parseFloat(m[2]),0,100),a(parseFloat(m[3]),0,100),a(parseFloat(m[4]),0,1)]);return{val:b,model:x}}});var d=/^#([a-fA-F0-9]{3})$/,f=/^#([a-fA-F0-9]{6})$/,g=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,v=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,S=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;s.exports=e},1443:function(s,e,r){var n=r(7496),o=r(6257),a=r(3783),c=r(9677),l=r(8763),h=r(4675);e=n({initialize:function(){this._events=this._events||{}},on:function(d,f){return this._events[d]=this._events[d]||[],this._events[d].push(f),this},off:function(d,f){var g=this._events;if(o(g,d)){var v=g[d].indexOf(f);return v>-1&&g[d].splice(v,1),this}},once:function(d,f){return this.on(d,l(f)),this},emit:function(d){var f=this;if(o(this._events,d)){var g=c(arguments,1),v=h(this._events[d]);return a(v,function(S){return S.apply(f,g)},this),this}},removeAllListeners:function(d){return d?delete this._events[d]:this._events={},this}},{mixin:function(d){a(["on","off","once","emit","removeAllListeners"],function(f){d[f]=e.prototype[f]}),d._events=d._events||{}}}),s.exports=e},9640:function(s,e,r){var n=r(7496),o=r(4454),a=r(6472),c=r(3783),l=r(2533);e=n({initialize:function(h){a(h)?(this.size=h.length,c(h,function(d,f){this[d]=f},this)):(this.size=l(h).length,c(h,function(d,f){this[f]=d},this)),o(this)}}),s.exports=e},125:function(s,e,r){var n=r(5128),o=r(615),a=r(8887),c=r(4400),l=r(4193),h=r(5166),d=o("local");e=n.extend({initialize:function(f,g){this._name=f,g=g||{};var v=d.getItem(f);try{v=JSON.parse(v)}catch{v={}}h(v)||(v={}),g=l(v,g),this.callSuper(n,"initialize",[g])},save:function(f){if(a(f))return d.removeItem(this._name);d.setItem(this._name,c(f))}}),s.exports=e},4989:function(s,e,r){var n=r(1443),o=r(9640),a=r(1352),c=r(1286),l=r(4675),h=r(6768),d=r(3990);e=n.extend({initialize:function(f,g){this.name=f,this.setLevel(c(g)?e.level.DEBUG:g),this.callSuper(n,"initialize",arguments)},setLevel:function(f){return h(f)?((f=e.level[f.toUpperCase()])&&(this._level=f),this):(d(f)&&(this._level=f),this)},getLevel:function(){return this._level},formatter:function(f,g){return g},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(f,g){return(g=a(g)).length===0?this:(this.emit("all",f,l(g)),e.level[f.toUpperCase()]<this._level||(this.emit(f,l(g)),(f==="debug"?console.log:console[f]).apply(console,this.formatter(f,g))),this)}},{level:new o({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),s.exports=e},2765:function(s,e,r){var n=r(1443);e=n.extend({className:"MediaQuery",initialize:function(o){var a=this;this.callSuper(n,"initialize"),this._listener=function(){a.emit(a.isMatch()?"match":"unmatch")},this.setQuery(o)},setQuery:function(o){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(o),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),s.exports=e},2289:function(s,e,r){var n=r(7496);(e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(e=n({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),s.exports=e},242:function(s,e,r){var n=r(8985),o=r(8613),a=r(5543),c=r(975),l=r(6341),h=r(6329),d=r(5610);e=d.ResizeObserver?n.extend({initialize:function(f){var g=this;if(f._resizeSensor)return f._resizeSensor;this.callSuper(n,"initialize");var v=new d.ResizeObserver(function(){return g.emit()});v.observe(f),f._resizeSensor=this,this._resizeObserver=v,this._el=f},destroy:function(){var f=this._el;f._resizeSensor&&(this.rmAllListeners(),delete f._resizeSensor,this._resizeObserver.unobserve(f))}}):n.extend({initialize:function(f){if(f._resizeSensor)return f._resizeSensor;this.callSuper(n,"initialize"),this._el=f,f._resizeSensor=this,l(["absolute","relative","fixed","sticky"],c(f,"position"))||c(f,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var f=this._el;f._resizeSensor&&(this.rmAllListeners(),delete f._resizeSensor,f.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var f=this._el,g={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},v={position:"absolute",left:"0px",top:"0px",transition:"0s"},S=o("div",{style:v}),A=o("div.resize-sensor-expand",{style:g},S),w=o("div.resize-sensor-shrink",{style:g},o("div",{style:h({width:"200%",height:"200%"},v)})),m=o("div.resize-sensor",{dir:"ltr",style:g},A,w);this._expandEl=A,this._expandChildEl=S,this._shrinkEl=w,this._resizeSensorEl=m,f.appendChild(m),this._resetExpandShrink()},_bindEvent:function(){var f=this;a.on(this._expandEl,"scroll",function(){return f._onScroll()}),a.on(this._shrinkEl,"scroll",function(){return f._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var f=this._el,g=f.offsetWidth,v=f.offsetHeight;c(this._expandChildEl,{width:g+10,height:v+10}),h(this._expandEl,{scrollLeft:g+10,scrollTop:v+10}),h(this._shrinkEl,{scrollLeft:g+10,scrollTop:v+10})}}),s.exports=e},3244:function(s,e,r){var n=r(7496),o=r(6768),a=r(3783),c=r(9971),l=new(e=n({className:"Select",initialize:function(h){return this.length=0,h?o(h)?l.find(h):void(h.nodeType&&(this[0]=h,this.length=1)):this},find:function(h){var d=new e;return this.each(function(){c(d,this.querySelectorAll(h))}),d},each:function(h){return a(this,function(d,f){h.call(d,f,d)}),this}}))(document);s.exports=e},8985:function(s,e,r){var n=r(7496),o=r(4675),a=r(3783),c=r(1352);e=n({initialize:function(){this._listeners=[]},addListener:function(l){this._listeners.push(l)},rmListener:function(l){var h=this._listeners.indexOf(l);h>-1&&this._listeners.splice(h,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var l=this,h=c(arguments),d=o(this._listeners);a(d,function(f){return f.apply(l,h)},this)}},{mixin:function(l){a(["addListener","rmListener","emit","rmAllListeners"],function(h){l[h]=e.prototype[h]}),l._listeners=l._listeners||[]}}),s.exports=e},9001:function(s,e,r){var n=r(7496),o=r(1527);e=n({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(a){return this._items.push(a),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(a,c){c=arguments.length>1?c:this;for(var l=this._items,h=this.size-1,d=0;h>=0;h--,d++)a.call(c,l[h],d,this)},toArr:function(){return o(this._items)}}),s.exports=e},5128:function(s,e,r){var n=r(1443),o=r(6768),a=r(5166),c=r(3783),l=r(1352);e=n.extend({initialize:function(h){this.callSuper(n,"initialize",arguments),this._data=h||{},this.save(this._data)},set:function(h,d){var f;o(h)?(f={})[h]=d:a(h)&&(f=h);var g=this;c(f,function(v,S){var A=g._data[S];g._data[S]=v,g.emit("change",S,v,A)}),this.save(this._data)},get:function(h){var d=this._data;if(o(h))return d[h];var f={};return c(h,function(g){f[g]=d[g]}),f},remove:function(h){h=l(h);var d=this._data;c(h,function(f){delete d[f]}),this.save(d)},clear:function(){this._data={},this.save(this._data)},each:function(h){c(this._data,h)},save:function(h){this._data=h}}),s.exports=e},6334:function(s,e,r){var n=r(7496),o=r(6329),a=r(4331),c=r(1745),l=r(8887),h=r(3783),d=r(6472),f=r(1352),g=r(2727),v=r(5166),S=r(3367);e=n({className:"Url",initialize:function(b){!b&&g&&(b=window.location.href),o(this,e.parse(b||""))},setQuery:function(b,x){var y=this.query;return v(b)?h(b,function(O,k){y[k]=S(O)}):y[b]=S(x),this},rmQuery:function(b){var x=this.query;return d(b)||(b=f(b)),h(b,function(y){delete x[y]}),this},toString:function(){return e.stringify(this)}},{parse:function(b){var x={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},y=a(b),O=!1,k=y.match(A);if(k&&(k=k[0],x.protocol=k.toLowerCase(),y=y.substr(k.length)),k&&(O=y.substr(0,2)==="//")&&(y=y.slice(2),x.slashes=!0),O){for(var P=y,L=-1,M=0,B=m.length;M<B;M++){var j=y.indexOf(m[M]);j!==-1&&(L===-1||j<L)&&(L=j)}L>-1&&(P=y.slice(0,L),y=y.slice(L));var F=P.lastIndexOf("@");F!==-1&&(x.auth=decodeURIComponent(P.slice(0,F)),P=P.slice(F+1)),x.hostname=P;var U=P.match(w);U&&((U=U[0])!==":"&&(x.port=U.substr(1)),x.hostname=P.substr(0,P.length-U.length))}var V=y.indexOf("#");V!==-1&&(x.hash=y.substr(V),y=y.slice(0,V));var Q=y.indexOf("?");return Q!==-1&&(x.query=c.parse(y.substr(Q+1)),y=y.slice(0,Q)),x.pathname=y||"/",x},stringify:function(b){var x=b.protocol+(b.slashes?"//":"")+(b.auth?encodeURIComponent(b.auth)+"@":"")+b.hostname+(b.port?":"+b.port:"")+b.pathname;return l(b.query)||(x+="?"+c.stringify(b.query)),b.hash&&(x+=b.hash),x}});var A=/^([a-z0-9.+-]+:)/i,w=/:[0-9]*$/,m=["/","?","#"];s.exports=e},8991:function(s,e,r){var n=r(4777),o=r(1214),a=r(4193),c=r(5166),l=r(1745);function h(d,f,g,v){return n(f)&&(v=g,g=f,f={}),{url:d,data:f,success:g,dataType:v}}(e=function(d){a(d,e.setting);var f,g=d.type,v=d.url,S=d.data,A=d.dataType,w=d.success,m=d.error,b=d.timeout,x=d.complete,y=d.xhr();return y.onreadystatechange=function(){if(y.readyState===4){var O;clearTimeout(f);var k=y.status;if(k>=200&&k<300||k===304){O=y.responseText,A==="xml"&&(O=y.responseXML);try{A==="json"&&(O=JSON.parse(O))}catch{}w(O,y)}else m(y);x(y)}},g==="GET"?(S=l.stringify(S))&&(v+=v.indexOf("?")>-1?"&"+S:"?"+S):d.contentType==="application/x-www-form-urlencoded"?c(S)&&(S=l.stringify(S)):d.contentType==="application/json"&&c(S)&&(S=JSON.stringify(S)),y.open(g,v,!0),y.setRequestHeader("Content-Type",d.contentType),b>0&&(f=setTimeout(function(){y.onreadystatechange=o,y.abort(),m(y,"timeout"),x(y)},b)),y.send(g==="GET"?null:S),y}).setting={type:"GET",success:o,error:o,complete:o,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},e.get=function(){return e(h.apply(null,arguments))},e.post=function(){var d=h.apply(null,arguments);return d.type="POST",e(d)},s.exports=e},1116:function(s,e,r){var n=r(2533),o=r(415),a=r(42),c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols;e=function(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=d.prototype,g=f===void 0||f,v=d.unenumerable,S=v!==void 0&&v,A=d.symbol,w=A!==void 0&&A,m=[];if((S||w)&&c){var b=n;S&&c&&(b=c);do m=m.concat(b(h)),w&&l&&(m=m.concat(l(h)));while(g&&(h=o(h))&&h!==Object.prototype);m=a(m)}else if(g)for(var x in h)m.push(x);else m=n(h);return m},s.exports=e},7913:function(s,e,r){var n=r(3783),o=r(1286),a=r(4777);e=function(c,l){o(l)&&(l=!0);var h=a(l),d={};return n(c,function(f){d[f]=h?l(f):l}),d},s.exports=e},3901:function(s,e){e={encode:function(c){var l,h,d=[],f=c.length,g=f%3;f-=g;for(var v=0;v<f;v+=3)d.push((l=(c[v]<<16)+(c[v+1]<<8)+c[v+2],n[l>>18&63]+n[l>>12&63]+n[l>>6&63]+n[63&l]));return f=c.length,g===1?(h=c[f-1],d.push(n[h>>2]),d.push(n[h<<4&63]),d.push("==")):g===2&&(h=(c[f-2]<<8)+c[f-1],d.push(n[h>>10]),d.push(n[h>>4&63]),d.push(n[h<<2&63]),d.push("=")),d.join("")},decode:function(c){var l=c.length,h=0;c[l-2]==="="?h=2:c[l-1]==="="&&(h=1);var d,f,g,v,S,A,w,m=new Array(3*l/4-h);for(l=h>0?l-4:l,d=0,f=0;d<l;d+=4){var b=(g=c[d],v=c[d+1],S=c[d+2],A=c[d+3],r[g.charCodeAt(0)]<<18|r[v.charCodeAt(0)]<<12|r[S.charCodeAt(0)]<<6|r[A.charCodeAt(0)]);m[f++]=b>>16&255,m[f++]=b>>8&255,m[f++]=255&b}return h===2?(w=r[c.charCodeAt(d)]<<2|r[c.charCodeAt(d+1)]>>4,m[f++]=255&w):h===1&&(w=r[c.charCodeAt(d)]<<10|r[c.charCodeAt(d+1)]<<4|r[c.charCodeAt(d+2)]>>2,m[f++]=w>>8&255,m[f++]=255&w),m}};for(var r=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;o++)r[n.charCodeAt(o)]=o;s.exports=e},5637:function(s,e){e=function(r,n){var o;return function(){return--r>0&&(o=n.apply(this,arguments)),r<=1&&(n=null),o}},s.exports=e},7494:function(s,e,r){var n=r(8935);function o(a,c){this[c]=a.replace(/\w/,function(l){return l.toUpperCase()})}e=function(a){var c=n(a),l=c[0];return c.shift(),c.forEach(o,c),l+=c.join("")},s.exports=e},1694:function(s,e,r){var n=r(6257),o=r(6472);e=function(l,h){if(o(l))return l;if(h&&n(h,l))return[l];var d=[];return l.replace(a,function(f,g,v,S){d.push(v?S.replace(c,"$1"):g||f)}),d};var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g;s.exports=e},996:function(s,e){e=function(r,n){var o=[];n=n||1;for(var a=0,c=Math.ceil(r.length/n);a<c;a++){var l=a*n,h=l+n;o.push(r.slice(l,h))}return o},s.exports=e},9882:function(s,e,r){var n=r(1286);e=function(o,a,c){return n(c)&&(c=a,a=void 0),!n(a)&&o<a?a:o>c?c:o},s.exports=e},4675:function(s,e,r){var n=r(5166),o=r(6472),a=r(6329);e=function(c){return n(c)?o(c)?c.slice():a({},c):c},s.exports=e},550:function(s,e,r){var n=r(5166),o=r(4777),a=r(6472),c=r(8820);e=function(l){return a(l)?l.map(function(h){return e(h)}):n(l)&&!o(l)?c(l,function(h){return e(h)}):l},s.exports=e},8099:function(s,e,r){var n=r(1352);e=function(){for(var o=n(arguments),a=[],c=0,l=o.length;c<l;c++)a=a.concat(n(o[c]));return a},s.exports=e},6341:function(s,e,r){var n=r(496),o=r(6768),a=r(1369),c=r(2578);e=function(l,h){return o(l)?l.indexOf(h)>-1:(a(l)||(l=c(l)),n(l,h)>=0)},s.exports=e},1792:function(s,e,r){var n=r(6768),o=r(3901),a=r(385),c=r(6472),l=r(2349),h=r(3085),d=r(3063);(e=function(f,g){var v;if(g=d(g),n(f))v=new Uint8Array(o.decode(f));else if(a(f))f=f.slice(0),v=new Uint8Array(f);else if(c(f))v=new Uint8Array(f);else if(h(f)==="uint8array")v=f.slice(0);else if(l(f)){v=new Uint8Array(f.length);for(var S=0;S<f.length;S++)v[S]=f[S]}if(v)switch(g){case"base64":v=o.encode(v);break;case"arraybuffer":v=v.buffer;break;case"array":v=[].slice.call(v);break;case"buffer":v=Buffer.from(v);break;case"blob":v=new Blob([v.buffer])}return v}).blobToArrBuffer=function(f){return new Promise(function(g,v){var S=new FileReader;S.onload=function(A){g(A.target.result)},S.onerror=function(A){v(A)},S.readAsArrayBuffer(f)})},s.exports=e},6299:function(s,e,r){var n=r(4193),o=r(3990),a=r(1286),c=r(1420),l={path:"/"};function h(d,f,g){if(!a(f)){if(g=n(g=g||{},l),o(g.expires)){var v=new Date;v.setMilliseconds(v.getMilliseconds()+864e5*g.expires),g.expires=v}return f=encodeURIComponent(f),d=encodeURIComponent(d),document.cookie=[d,"=",f,g.expires&&"; expires="+g.expires.toUTCString(),g.path&&"; path="+g.path,g.domain&&"; domain="+g.domain,g.secure?"; secure":""].join(""),e}for(var S=document.cookie?document.cookie.split("; "):[],A=d?void 0:{},w=0,m=S.length;w<m;w++){var b=S[w],x=b.split("="),y=c(x.shift());if(b=x.join("="),b=c(b),d===y){A=b;break}d||(A[y]=b)}return A}e={get:h,set:h,remove:function(d,f){return(f=f||{}).expires=-1,h(d,"",f)}},s.exports=e},2327:function(s,e,r){var n=r(6329),o=r(1214);e=function(a,c){c=c||o;var l=document.createElement("textarea"),h=document.body;n(l.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),l.value=a,h.appendChild(l),l.setAttribute("readonly",""),l.select(),l.setSelectionRange(0,a.length);try{document.execCommand("copy"),c()}catch(d){c(d)}finally{h.removeChild(l)}},s.exports=e},1662:function(s,e,r){var n=r(5166);e=function(a){if(!n(a))return{};if(o)return o(a);function c(){}return c.prototype=a,new c};var o=Object.create;s.exports=e},4427:function(s,e,r){var n=r(1286),o=r(3783);e=function(a,c){return function(l){return o(arguments,function(h,d){if(d!==0){var f=a(h);o(f,function(g){c&&!n(l[g])||(l[g]=h[g])})}}),l}},s.exports=e},4210:function(s,e,r){var n=r(1475),o=r(1286),a=r(7494);e=n(function(l,h){return o(h)?(l=a(l),!o(c[l])):(c.cssText="",c.cssText=l+":"+h,!!c.length)},function(l,h){return l+" "+h});var c=document.createElement("p").style;s.exports=e},4407:function(s,e,r){var n=r(6768),o=r(2106),a=r(3367),c=r(5351);e=function(v,S,A,w){arguments.length===1&&n(v)&&!f.test(v)&&(S=v,v=void 0),v=v||new Date,o(v)||(v=new Date(v));var m=(S=a(e.masks[S]||S||e.masks.default)).slice(0,4);m!=="UTC:"&&m!=="GMT:"||(S=S.slice(4),A=!0,m==="GMT:"&&(w=!0));var b=A?"getUTC":"get",x=v[b+"Date"](),y=v[b+"Day"](),O=v[b+"Month"](),k=v[b+"FullYear"](),P=v[b+"Hours"](),L=v[b+"Minutes"](),M=v[b+"Seconds"](),B=v[b+"Milliseconds"](),j=A?0:v.getTimezoneOffset(),F={d:x,dd:l(x),ddd:e.i18n.dayNames[y],dddd:e.i18n.dayNames[y+7],m:O+1,mm:l(O+1),mmm:e.i18n.monthNames[O],mmmm:e.i18n.monthNames[O+12],yy:a(k).slice(2),yyyy:k,h:P%12||12,hh:l(P%12||12),H:P,HH:l(P),M:L,MM:l(L),s:M,ss:l(M),l:l(B,3),L:l(Math.round(B/10)),t:P<12?"a":"p",tt:P<12?"am":"pm",T:P<12?"A":"P",TT:P<12?"AM":"PM",Z:w?"GMT":A?"UTC":(a(v).match(d)||[""]).pop().replace(g,""),o:(j>0?"-":"+")+l(100*Math.floor(Math.abs(j)/60)+Math.abs(j)%60,4),S:["th","st","nd","rd"][x%10>3?0:(x%100-x%10!=10)*x%10]};return S.replace(h,function(U){return U in F?F[U]:U.slice(1,U.length-1)})};var l=function(v){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return c(a(v),S,"0")},h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/\d/,g=/[^-+\dA-Z]/g;e.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},s.exports=e},6049:function(s,e){e=function(r,n,o){var a;return function(){var c=this,l=arguments;o||clearTimeout(a),o&&a||(a=setTimeout(function(){a=null,r.apply(c,l)},n))}},s.exports=e},1420:function(s,e,r){var n=r(3783),o=r(8166),a=r(2461),c=r(5742);function l(d){return+("0x"+d)}e=function(d){try{return decodeURIComponent(d)}catch{var f=d.match(h);return f&&n(f,function(v){d=d.replace(v,function(S){S=S.split("%").slice(1);var A=a(S,l);return S=o.encode(A),S=c.decode(S,!0),S}(v))}),d}};var h=/(%[a-f0-9]{2})+/gi;s.exports=e},4193:function(s,e,r){e=r(4427)(r(1116),!0),s.exports=e},9803:function(s,e,r){var n=r(1694),o=r(6768),a=r(5166),c=r(3783);function l(h,d,f){for(var g=n(d,h),v=g.pop();d=g.shift();)h[d]||(h[d]={}),h=h[d];Object.defineProperty(h,v,f)}e=function(h,d,f){return o(d)?l(h,d,f):a(d)&&c(d,function(g,v){l(h,v,g)}),h},s.exports=e},2443:function(s,e,r){var n=r(7496),o=r(6341);function a(){return!0}function c(){return!1}function l(d){var f,g=this.events[d.type],v=h.call(this,d,g);d=new e.Event(d);for(var S,A,w=0;(A=v[w++])&&!d.isPropagationStopped();)for(d.curTarget=A.el,S=0;(f=A.handlers[S++])&&!d.isImmediatePropagationStopped();)f.handler.apply(A.el,[d])===!1&&(d.preventDefault(),d.stopPropagation())}function h(d,f){var g,v,S,A,w=d.target,m=[],b=f.delegateCount;if(w.nodeType)for(;w!==this;w=w.parentNode||this){for(v=[],A=0;A<b;A++)v[g=(S=f[A]).selector+" "]===void 0&&(v[g]=o(this.querySelectorAll(g),w)),v[g]&&v.push(S);v.length&&m.push({el:w,handlers:v})}return b<f.length&&m.push({el:this,handlers:f.slice(b)}),m}e={add:function(d,f,g,v){var S,A={selector:g,handler:v};d.events||(d.events={}),(S=d.events[f])||((S=d.events[f]=[]).delegateCount=0,d.addEventListener(f,function(){l.apply(d,arguments)},!1)),g?S.splice(S.delegateCount++,0,A):S.push(A)},remove:function(d,f,g,v){var S=d.events;if(S&&S[f])for(var A,w=S[f],m=w.length;m--;)A=w[m],g&&A.selector!=g||A.handler!=v||(w.splice(m,1),A.selector&&w.delegateCount--)},Event:n({className:"Event",initialize:function(d){this.origEvent=d},isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var d=this.origEvent;this.isDefaultPrevented=a,d&&d.preventDefault&&d.preventDefault()},stopPropagation:function(){var d=this.origEvent;this.isPropagationStopped=a,d&&d.stopPropagation&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.origEvent;this.isImmediatePropagationStopped=a,d&&d.stopImmediatePropagation&&d.stopImmediatePropagation(),this.stopPropagation()}})},s.exports=e},4541:function(s,e,r){var n=r(2727),o=r(9296),a=r(2533);e=function(f){var g=d(f=(f=f||(n?navigator.userAgent:"")).toLowerCase(),"msie ");if(g)return{version:g,name:"ie"};if(l.test(f))return{version:11,name:"ie"};for(var v=0,S=h.length;v<S;v++){var A=h[v],w=f.match(c[A]);if(w!=null){var m=o(w[1].split(".")[0]);return A==="opera"&&(m=d(f,"version/")||m),{name:A,version:m}}}return{name:"unknown",version:-1}};var c={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},l=/trident\/7\./,h=a(c);function d(f,g){var v=f.indexOf(g);if(v>-1)return o(f.substring(v+g.length,f.indexOf(".",v)))}s.exports=e},6954:function(s,e,r){var n=r(2727);e=function(o){if(o=(o=o||(n?navigator.userAgent:"")).toLowerCase(),a("windows phone"))return"windows phone";if(a("win"))return"windows";if(a("android"))return"android";if(a("ipad")||a("iphone")||a("ipod"))return"ios";if(a("mac"))return"os x";if(a("linux"))return"linux";function a(c){return o.indexOf(c)>-1}return"unknown"},s.exports=e},801:function(s,e,r){var n=r(1137),o=r(288),a=r(5972),c=r(6341);e=n(function(l,h){return h=o(h),a(l,function(d){return!c(h,d)})}),s.exports=e},3783:function(s,e,r){var n=r(1369),o=r(2533),a=r(3955);e=function(c,l,h){var d,f;if(l=a(l,h),n(c))for(d=0,f=c.length;d<f;d++)l(c[d],d,c);else{var g=o(c);for(d=0,f=g.length;d<f;d++)l(c[g[d]],g[d],c)}return c},s.exports=e},4858:function(s,e){e=function(r,n){var o=r.length-n.length;return o>=0&&r.indexOf(n,o)===o},s.exports=e},8901:function(s,e,r){var n=r(2533),o=(e=function(d){return c.test(d)?d.replace(l,h):d}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a="(?:"+n(o).join("|")+")",c=new RegExp(a),l=new RegExp(a,"g"),h=function(d){return o[d]};s.exports=e},4187:function(s,e,r){var n=r(3367);e=function(a){return n(a).replace(o,function(c){switch(c){case'"':case"'":case"\\":return"\\"+c;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var o=/["'\\\n\r\u2028\u2029]/g;s.exports=e},2337:function(s,e){e=function(r){return r.replace(/\W/g,"\\$&")},s.exports=e},642:function(s,e){e=function(r){var n=document.createElement("style");return n.textContent=r,n.type="text/css",document.head.appendChild(n),n},s.exports=e},1672:function(s,e,r){var n=r(2838),o=r(1369),a=r(2533);e=function(c,l,h){l=n(l,h);for(var d=!o(c)&&a(c),f=(d||c).length,g=0;g<f;g++){var v=d?d[g]:g;if(!l(c[v],v,c))return!1}return!0},s.exports=e},6329:function(s,e,r){e=r(4427)(r(1116)),s.exports=e},3021:function(s,e,r){var n=r(2533);e=r(4427)(n),s.exports=e},2581:function(s,e,r){var n=r(42),o=r(4331),a=r(2461),c=r(1352);e=function(h){var d=c(h.match(l));return n(a(d,function(f){return o(f)}))};var l=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;s.exports=e},5972:function(s,e,r){var n=r(2838),o=r(3783);e=function(a,c,l){var h=[];return c=n(c,l),o(a,function(d,f,g){c(d,f,g)&&h.push(d)}),h},s.exports=e},2244:function(s,e,r){var n=r(2267),o=r(4072),a=r(1369),c=r(1286);e=function(l,h,d){var f=(a(l)?o:n)(l,h,d);if(!c(f)&&f!==-1)return l[f]},s.exports=e},4072:function(s,e,r){var n=r(2838);e=function(o,a,c,l){l=l||1,a=n(a,c);for(var h=o.length,d=l>0?0:h-1;d>=0&&d<h;){if(a(o[d],d,o))return d;d+=l}return-1},s.exports=e},2267:function(s,e,r){var n=r(2838),o=r(2533);e=function(a,c,l){c=n(c,l);for(var h,d=o(a),f=0,g=d.length;f<g;f++)if(c(a[h=d[f]],h,a))return h},s.exports=e},288:function(s,e,r){var n=r(6472);function o(a,c){for(var l,h=a.length,d=-1;h--;)l=a[++d],n(l)?o(l,c):c.push(l);return c}e=function(a){return o(a,[])},s.exports=e},4454:function(s,e,r){var n=r(2533);e=function(o){return Object.freeze?Object.freeze(o):(n(o).forEach(function(a){Object.getOwnPropertyDescriptor(o,a).configurable&&Object.defineProperty(o,a,{writable:!1,configurable:!1})}),o)},s.exports=e},415:function(s,e,r){var n=r(5166),o=r(4777),a=Object.getPrototypeOf,c={}.constructor;e=function(l){if(n(l)){if(a)return a(l);var h=l.__proto__;return h||h===null?h:o(l.constructor)?l.constructor.prototype:l instanceof c?c.prototype:void 0}},s.exports=e},8613:function(s,e,r){var n=r(9833),o=r(6768),a=r(6930),c=r(7781),l=r(975),h=r(3783),d=r(4777);e=function(f,g){for(var v=arguments.length,S=new Array(v>2?v-2:0),A=2;A<v;A++)S[A-2]=arguments[A];(n(g)||o(g))&&(S.unshift(g),g=null),g||(g={});var w=function(O){for(var k="div",P="",L=[],M=[],B="",j=0,F=O.length;j<F;j++){var U=O[j];U==="#"||U==="."?(M.push(B),B=U):B+=U}M.push(B);for(var V=0,Q=M.length;V<Q;V++)(B=M[V])&&(a(B,"#")?P=B.slice(1):a(B,".")?L.push(B.slice(1)):k=B);return{tagName:k,id:P,classes:L}}(f),m=w.tagName,b=w.id,x=w.classes,y=document.createElement(m);return b&&y.setAttribute("id",b),c.add(y,x),h(S,function(O){o(O)?y.appendChild(document.createTextNode(O)):n(O)&&y.appendChild(O)}),h(g,function(O,k){o(O)?y.setAttribute(k,O):d(O)&&a(k,"on")?y.addEventListener(k.slice(2),O,!1):k==="style"&&l(y,O)}),y},s.exports=e},6257:function(s,e){var r=Object.prototype.hasOwnProperty;e=function(n,o){return r.call(n,o)},s.exports=e},5044:function(s,e,r){var n=r(7348);e={encode:function(o){for(var a=[],c=0,l=o.length;c<l;c++){var h=o[c];a.push((h>>>4).toString(16)),a.push((15&h).toString(16))}return a.join("")},decode:function(o){var a=[],c=o.length;n(c)&&c--;for(var l=0;l<c;l+=2)a.push(parseInt(o.substr(l,2),16));return a}},s.exports=e},3651:function(s,e,r){var n=r(3783),o=r(4193);e=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o(d,a),l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;"),h=c[h];var f=0,g=[];n(h,function(S){S.language&&(l=l.replace(S.re,function(A,w){return w?(g[f++]=e(w,S.language,d),A.replace(w,"___subtmpl"+(f-1)+"___")):A}))}),n(h,function(S,A){c[S.language]||(l=l.replace(S.re,"___"+A+"___$1___end"+A+"___"))});var v=[];return l=l.replace(/___(?!subtmpl)\w+?___/g,function(S){var A=S.substr(3,3)==="end",w=(A?S.substr(6):S.substr(3)).replace(/_/g,""),m=v.length>0?v[v.length-1]:null;return!A&&(m==null||w==m||m!=null&&h[m]&&h[m].embed!=null&&h[m].embed.indexOf(w)>-1)?(v.push(w),S):A&&w==m?(v.pop(),S):""}),n(h,function(S,A){var w=d[S.style]?' style="'.concat(d[S.style],'"'):"";l=l.replace(new RegExp("___end"+A+"___","g"),"</span>").replace(new RegExp("___"+A+"___","g"),'<span class="'.concat(S.style,'"').concat(w,">"))}),n(h,function(S){S.language&&(l=l.replace(/___subtmpl\d+___/g,function(A){var w=parseInt(A.replace(/___subtmpl(\d+)___/,"$1"),10);return g[w]}))}),l};var a={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},c={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};c.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:c.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},c.css={comment:c.js.comment,string:c.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},s.exports=e},5925:function(s,e){e=function(n){var o,a,c,l=n[0]/360,h=n[1]/100,d=n[2]/100,f=[];if(n[3]&&(f[3]=n[3]),h===0)return c=r(255*d),f[0]=f[1]=f[2]=c,f;for(var g=2*d-(o=d<.5?d*(1+h):d+h-d*h),v=0;v<3;v++)(a=l+.3333333333333333*-(v-1))<0&&a++,a>1&&a--,c=6*a<1?g+6*(o-g)*a:2*a<1?o:3*a<2?g+(o-g)*(.6666666666666666-a)*6:g,f[v]=r(255*c);return f};var r=Math.round;s.exports=e},7483:function(s,e,r){var n=r(8702),o=r(9001),a=r(6472),c=r(3783),l=r(6768),h=r(8820),d=function(g){return g.replace(/&quot;/g,'"')},f=function(g){return g.replace(/"/g,"&quot;")};e={parse:function(g){var v=[],S=new o;return n(g,{start:function(A,w){w=h(w,function(m){return d(m)}),S.push({tag:A,attrs:w})},end:function(){var A=S.pop();if(S.size){var w=S.peek();a(w.content)||(w.content=[]),w.content.push(A)}else v.push(A)},comment:function(A){var w="<!--".concat(A,"-->"),m=S.peek();m?(m.content||(m.content=[]),m.content.push(w)):v.push(w)},text:function(A){var w=S.peek();w?(w.content||(w.content=[]),w.content.push(A)):v.push(A)}}),v},stringify:function g(v){var S="";return a(v)?c(v,function(A){return S+=g(A)}):l(v)?S=v:(S+="<".concat(v.tag),c(v.attrs,function(A,w){return S+=" ".concat(w,'="').concat(f(A),'"')}),S+=">",v.content&&(S+=g(v.content)),S+="</".concat(v.tag,">")),S}},s.exports=e},6362:function(s,e){e=function(r){return r},s.exports=e},496:function(s,e){e=function(r,n,o){return Array.prototype.indexOf.call(r,n,o)},s.exports=e},5022:function(s,e,r){var n=r(1662);e=function(o,a){o.prototype=n(a.prototype)},s.exports=e},7190:function(s,e,r){var n=r(3783);e=function(o){var a={};return n(o,function(c,l){a[c]=l}),a},s.exports=e},7403:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Arguments]"},s.exports=e},6472:function(s,e,r){var n=r(106);e=Array.isArray?Array.isArray:function(o){return n(o)==="[object Array]"},s.exports=e},385:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object ArrayBuffer]"},s.exports=e},1369:function(s,e,r){var n=r(3990),o=r(4777),a=Math.pow(2,53)-1;e=function(c){if(!c)return!1;var l=c.length;return n(l)&&l>=0&&l<=a&&!o(c)},s.exports=e},4696:function(s,e){e=function(r){return r===!0||r===!1},s.exports=e},2727:function(s,e){e=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,s.exports=e},2349:function(s,e,r){var n=r(4777);e=function(o){return o!=null&&(!!o._isBuffer||o.constructor&&n(o.constructor.isBuffer)&&o.constructor.isBuffer(o))},s.exports=e},2520:function(s,e,r){var n=new(r(2765))("(prefers-color-scheme: dark)");e=function(){return n.isMatch()},s.exports=e},2106:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Date]"},s.exports=e},9833:function(s,e){e=function(r){return!(!r||r.nodeType!==1)},s.exports=e},8887:function(s,e,r){var n=r(1369),o=r(6472),a=r(6768),c=r(7403),l=r(2533);e=function(h){return h==null||(n(h)&&(o(h)||a(h)||c(h))?h.length===0:l(h).length===0)},s.exports=e},2749:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Error]"},s.exports=e},4777:function(s,e,r){var n=r(106);e=function(o){var a=n(o);return a==="[object Function]"||a==="[object GeneratorFunction]"||a==="[object AsyncFunction]"},s.exports=e},9585:function(s,e,r){var n=r(5610),o=n.getComputedStyle,a=n.document;function c(l,h){return l.right<h.left||l.left>h.right||l.bottom<h.top||l.top>h.bottom}e=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=h.display,f=d===void 0||d,g=h.visibility,v=g!==void 0&&g,S=h.opacity,A=S!==void 0&&S,w=h.size,m=w!==void 0&&w,b=h.viewport,x=b!==void 0&&b,y=h.overflow,O=y!==void 0&&y,k=o(l);if(f){var P=l.tagName;if(P==="BODY"||P==="HTML"||k.position==="fixed"){if(k.display==="none")return!0;for(var L=l;L=L.parentElement;)if(o(L).display==="none")return!0}else if(l.offsetParent===null)return!0}if(v&&k.visibility==="hidden")return!0;if(A){if(k.opacity==="0")return!0;for(var M=l;M=M.parentElement;)if(o(M).opacity==="0")return!0}var B=l.getBoundingClientRect();if(m&&(B.width===0||B.height===0))return!0;if(x)return c(B,{top:0,left:0,right:a.documentElement.clientWidth,bottom:a.documentElement.clientHeight});if(O)for(var j=l;j=j.parentElement;){var F=o(j).overflow;if((F==="scroll"||F==="hidden")&&c(B,j.getBoundingClientRect()))return!0}return!1},s.exports=e},2246:function(s,e,r){var n=r(3990);e=function(o){return n(o)&&o%1==0},s.exports=e},4219:function(s,e){e=function(r){try{return JSON.parse(r),!0}catch{return!1}},s.exports=e},3708:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Map]"},s.exports=e},7949:function(s,e,r){var n=r(2533);e=function(o,a){var c=n(a),l=c.length;if(o==null)return!l;o=Object(o);for(var h=0;h<l;h++){var d=c[h];if(a[d]!==o[d]||!(d in o))return!1}return!0},s.exports=e},9537:function(s,e,r){var n=r(4777);e=typeof wx<"u"&&n(wx.openLocation),s.exports=e},9956:function(s,e,r){var n=r(2727),o=r(1475),a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;e=o(function(l){return l=l||(n?navigator.userAgent:""),a.test(l)||c.test(l.substr(0,4))}),s.exports=e},9433:function(s,e,r){var n=r(3990);e=function(o){return n(o)&&o!==+o},s.exports=e},8740:function(s,e,r){var n=r(5166),o=r(4777),a=r(300);e=function(d){return!!n(d)&&(o(d)?l.test(a(d)):h.test(a(d)))};var c=Object.prototype.hasOwnProperty,l=new RegExp("^"+a(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=/^\[object .+?Constructor\]$/;s.exports=e},2763:function(s,e){e=function(r){return r==null},s.exports=e},1965:function(s,e,r){var n=r(106);e=typeof process<"u"&&n(process)==="[object process]",s.exports=e},6156:function(s,e){e=function(r){return r===null},s.exports=e},3990:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Number]"},s.exports=e},5166:function(s,e){e=function(r){var n=typeof r;return!!r&&(n==="function"||n==="object")},s.exports=e},7348:function(s,e,r){var n=r(2246);e=function(o){return!!n(o)&&o%2!=0},s.exports=e},6997:function(s,e){e=function(r){var n=typeof r;return r==null||n!=="function"&&n!=="object"},s.exports=e},4321:function(s,e,r){var n=r(5166),o=r(4777);e=function(a){return n(a)&&o(a.then)&&o(a.catch)},s.exports=e},1754:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object RegExp]"},s.exports=e},7470:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object Set]"},s.exports=e},3843:function(s,e){e=function(r){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.defComparator,o=0,a=r.length;o<a-1;o++)if(n(r[o],r[o+1])>0)return!1;return!0},e.defComparator=function(r,n){return r<n?-1:r>n?1:0},s.exports=e},6768:function(s,e,r){var n=r(106);e=function(o){return n(o)==="[object String]"},s.exports=e},9804:function(s,e){e=function(r){return typeof r=="symbol"},s.exports=e},1286:function(s,e){e=function(r){return r===void 0},s.exports=e},7622:function(s,e,r){var n=r(8935);e=function(o){return n(o).join("-")},s.exports=e},2533:function(s,e,r){var n=r(6257);e=Object.keys?Object.keys:function(o){var a=[];for(var c in o)n(o,c)&&a.push(c);return a},s.exports=e},9702:function(s,e){e=function(r){var n=r?r.length:0;if(n)return r[n-1]},s.exports=e},3988:function(s,e,r){var n=r(2581),o=r(3783),a=r(2337);function c(l){return'<a href="'+l+'">'+l+"</a>"}e=function(l,h){h=h||c;var d=n(l);return o(d,function(f){l=l.replace(new RegExp(a(f),"g"),h)}),l},s.exports=e},9622:function(s,e){e=function(r,n){var o=document.createElement("script");o.src=r,o.onload=function(){var a=o.readyState&&o.readyState!="complete"&&o.readyState!="loaded";n&&n(!a)},o.onerror=function(){n(!1)},document.body.appendChild(o)},s.exports=e},3063:function(s,e,r){var n=r(3367);e=function(o){return n(o).toLocaleLowerCase()},s.exports=e},5351:function(s,e,r){var n=r(4552),o=r(3367);e=function(a,c,l){var h=(a=o(a)).length;return l=l||" ",h<c&&(a=(n(l,c-h)+a).slice(-c)),a},s.exports=e},7767:function(s,e){var r=/^\s+/;e=function(n,o){if(o==null)return n.trimLeft?n.trimLeft():n.replace(r,"");for(var a,c,l=0,h=n.length,d=o.length,f=!0;f&&l<h;)for(f=!1,a=-1,c=n.charAt(l);++a<d;)if(c===o[a]){f=!0,l++;break}return l>=h?"":n.substr(l,h)},s.exports=e},2461:function(s,e,r){var n=r(2838),o=r(2533),a=r(1369);e=function(c,l,h){l=n(l,h);for(var d=!a(c)&&o(c),f=(d||c).length,g=Array(f),v=0;v<f;v++){var S=d?d[v]:v;g[v]=l(c[S],S,c)}return g},s.exports=e},8820:function(s,e,r){var n=r(2838),o=r(2533);e=function(a,c,l){c=n(c,l);for(var h=o(a),d=h.length,f={},g=0;g<d;g++){var v=h[g];f[v]=c(a[v],v,a)}return f},s.exports=e},4491:function(s,e,r){var n=r(3021),o=r(7949);e=function(a){return a=n({},a),function(c){return o(c,a)}},s.exports=e},9853:function(s,e){e=function(){for(var r=arguments,n=r[0],o=1,a=r.length;o<a;o++)r[o]>n&&(n=r[o]);return n},s.exports=e},5026:function(s,e,r){var n=r(2533);e={getItem:function(d){return(a[d]?o[d]:this[d])||null},setItem:function(d,f){a[d]?o[d]=f:this[d]=f},removeItem:function(d){a[d]?delete o[d]:delete this[d]},key:function(d){var f=c();return d>=0&&d<f.length?f[d]:null},clear:function(){for(var d,f=l(),g=0;d=f[g];g++)delete this[d];f=h();for(var v,S=0;v=f[S];S++)delete o[v]}},Object.defineProperty(e,"length",{enumerable:!1,configurable:!0,get:function(){return c().length}});var o={},a={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function c(){return l().concat(h())}function l(){return n(e).filter(function(d){return!a[d]})}function h(){return n(o)}s.exports=e},1475:function(s,e,r){var n=r(6257);e=function(o,a){var c=function(l){var h=c.cache,d=""+(a?a.apply(this,arguments):l);return n(h,d)||(h[d]=o.apply(this,arguments)),h[d]};return c.cache={},c},s.exports=e},9971:function(s,e,r){e=r(1137)(function(n,o){for(var a=n.length,c=0,l=o.length;c<l;c++)for(var h=o[c],d=0,f=h.length;d<f;d++)n[a++]=h[d];return n.length=a,n}),s.exports=e},8573:function(s,e,r){var n=r(3783),o=r(6768),a=r(1286),c=r(6341),l=r(6472),h=r(5166),d=r(1352);(e=function(S,A){if(a(S))return w={},g(function(b,x){w[b]=x}),w;var w;if(o(S)&&a(A)||l(S))return function(b){if(!o(b)){var x={};return g(function(O,k){c(b,O)&&(x[O]=k)}),x}var y=v(b);if(y)return y.getAttribute("content")}(S);var m=S;h(m)||((m={})[S]=A),function(b){n(b,function(x,y){var O=v(y);if(O)return O.setAttribute("content",x);(O=f.createElement("meta")).setAttribute("name",y),O.setAttribute("content",x),f.head.appendChild(O)})}(m)}).remove=function(S){S=d(S),n(S,function(A){var w=v(A);w&&f.head.removeChild(w)})};var f=document;function g(S){var A=f.querySelectorAll("meta");n(A,function(w){var m=w.getAttribute("name"),b=w.getAttribute("content");m&&b&&S(m,b)})}function v(S){return f.querySelector('meta[name="'+S+'"]')}s.exports=e},6435:function(s,e){e=function(){for(var r=arguments,n=r[0],o=1,a=r.length;o<a;o++)r[o]<n&&(n=r[o]);return n},s.exports=e},4677:function(s,e,r){var n=r(3875),o=r(6768);e=function(h){if(o(h)){var d=h.match(l);return d?n(d[1])*a[d[2]||"ms"]:0}for(var f=h,g="ms",v=0,S=c.length;v<S;v++)if(f>=a[c[v]]){g=c[v];break}return+(f/a[g]).toFixed(2)+g};var a={ms:1,s:1e3};a.m=60*a.s,a.h=60*a.m,a.d=24*a.h,a.y=365.25*a.d;var c=["y","d","h","m","s"],l=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;s.exports=e},6339:function(s,e,r){var n=r(6930),o=r(5610),a=r(3367);function c(l,h){if(l=a(l),h=a(h),n(l,"_")&&!n(h,"_"))return 1;if(n(h,"_")&&!n(l,"_"))return-1;for(var d,f,g,v,S=/^\d+|^\D+/;;){if(!l)return h?-1:0;if(!h)return 1;if(d=l.match(S)[0],f=h.match(S)[0],g=!o.isNaN(d),v=!o.isNaN(f),g&&!v)return-1;if(v&&!g)return 1;if(g&&v){var A=d-f;if(A)return A;if(d.length!==f.length)return+d||+f?f.length-d.length:d.length-f.length}else if(d!==f)return d<f?-1:1;l=l.substring(d.length),h=h.substring(f.length)}}e=function(l){return l.sort(c)},s.exports=e},6837:function(s,e){function r(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}e=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(n){setImmediate(r(n))}:function(n){setTimeout(r(n),0)},s.exports=e},1214:function(s,e){e=function(){},s.exports=e},8847:function(s,e){e=Date.now?Date.now:function(){return new Date().getTime()},s.exports=e},106:function(s,e){var r=Object.prototype.toString;e=function(n){return r.call(n)},s.exports=e},8763:function(s,e,r){e=r(4198)(r(5637),2),s.exports=e},3955:function(s,e,r){var n=r(1286);e=function(o,a,c){if(n(a))return o;switch(c??3){case 1:return function(l){return o.call(a,l)};case 3:return function(l,h,d){return o.call(a,l,h,d)};case 4:return function(l,h,d,f){return o.call(a,l,h,d,f)}}return function(){return o.apply(a,arguments)}},s.exports=e},442:function(s,e,r){var n=r(1443),o=r(7653),a=window.screen;e={get:function(){if(a){var c=o(a,"orientation.type");if(c)return c.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},n.mixin(e),window.addEventListener("orientationchange",function(){setTimeout(function(){e.emit("change",e.get())},200)},!1),s.exports=e},8702:function(s,e,r){var n=r(9702),o=r(7913),a=r(6930),c=r(3063);e=function(v,S){for(var A,w=[],m=v;v;){if(A=!0,n(w)&&g[n(w)]){var b=new RegExp("</".concat(n(w),"[^>]*>")).exec(v);if(b){var x=v.substring(0,b.index);v=v.substring(b.index+b[0].length),x&&S.text&&S.text(x)}j("",n(w))}else{if(a(v,"<!--")){var y=v.indexOf("-->");y>=0&&(S.comment&&S.comment(v.substring(4,y)),v=v.substring(y+3),A=!1)}else if(a(v,"<!")){var O=v.match(l);O&&(S.text&&S.text(v.substring(0,O[0].length)),v=v.substring(O[0].length),A=!1)}else if(a(v,"</")){var k=v.match(h);k&&(v=v.substring(k[0].length),k[0].replace(h,j),A=!1)}else if(a(v,"<")){var P=v.match(d);P&&(v=v.substring(P[0].length),P[0].replace(d,B),A=!1)}if(A){var L=v.indexOf("<"),M=L<0?v:v.substring(0,L);v=L<0?"":v.substring(L),S.text&&S.text(M)}}if(m===v)throw Error("Parse Error: "+v);m=v}function B(F,U,V,Q){if(U=c(U),(Q=!!Q)||w.push(U),S.start){var q={};V.replace(f,function(G,te,Y,J,K){q[te]=Y||J||K||""}),S.start(U,q,Q)}}function j(F,U){var V;if(U=c(U))for(V=w.length-1;V>=0&&w[V]!==U;V--);else V=0;if(V>=0){for(var Q=w.length-1;Q>=V;Q--)S.end&&S.end(w[Q]);w.length=V}}j()};var l=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,h=/^<\/([-A-Za-z0-9_]+)[^>]*>/,d=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,f=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,g=o("script,style".split(","));s.exports=e},4198:function(s,e,r){var n=r(1137),o=r(1352);e=n(function(a,c){return function(){var l=[];return l=(l=l.concat(c)).concat(o(arguments)),a.apply(this,l)}}),s.exports=e},1194:function(s,e,r){var n,o=r(8847),a=r(5610),c=a.performance,l=a.process;if(c&&c.now)e=function(){return c.now()};else if(l&&l.hrtime){var h=function(){var d=l.hrtime();return 1e9*d[0]+d[1]};n=h()-1e9*l.uptime(),e=function(){return(h()-n)/1e6}}else n=o(),e=function(){return o()-n};s.exports=e},3487:function(s,e,r){var n=r(6768),o=r(6472),a=r(6341),c=r(3783);e=function(l,h,d){if(n(h)&&(h=[h]),o(h)){var f=h;h=function(S,A){return a(f,A)}}var g={},v=function(S,A){h(S,A)&&(g[A]=S)};return d&&(v=function(S,A){h(S,A)||(g[A]=S)}),c(l,v),g},s.exports=e},747:function(s,e,r){var n=r(1475),o=r(7494),a=r(3023),c=r(6257),l=r(7622);(e=n(function(g){if(g=g.replace(d,""),g=o(g),c(f,g))return g;for(var v=h.length;v--;){var S=h[v]+a(g);if(c(f,S))return S}return g})).dash=n(function(g){var v=e(g);return(d.test(v)?"-":"")+l(v)});var h=["O","ms","Moz","Webkit"],d=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,f=document.createElement("p").style;s.exports=e},2994:function(s,e,r){var n=r(6472),o=r(7653);e=function(a){return n(a)?function(l){return o(l,a)}:(c=a,function(l){return l?.[c]});var c},s.exports=e},1745:function(s,e,r){var n=r(4331),o=r(3783),a=r(1286),c=r(6472),l=r(2461),h=r(8887),d=r(5972),f=r(5166);e={parse:function(v){var S={};return v=n(v).replace(g,""),o(v.split("&"),function(A){var w=A.split("="),m=w.shift(),b=w.length>0?w.join("="):null;m=decodeURIComponent(m),b=decodeURIComponent(b),a(S[m])?S[m]=b:c(S[m])?S[m].push(b):S[m]=[S[m],b]}),S},stringify:function(v,S){return d(l(v,function(A,w){return f(A)&&h(A)?"":c(A)?e.stringify(A,w):encodeURIComponent(S||w)+"="+encodeURIComponent(A)}),function(A){return A.length>0}).join("&")}};var g=/^(\?|#|&)/g;s.exports=e},1571:function(s,e,r){var n,o,a=r(8847),c=r(2727),l=0;if(c){n=window.requestAnimationFrame,o=window.cancelAnimationFrame;for(var h=["ms","moz","webkit","o"],d=0,f=h.length;d<f&&!n;d++)n=window[h[d]+"RequestAnimationFrame"],o=window[h[d]+"CancelAnimationFrame"]||window[h[d]+"CancelRequestAnimationFrame"];n&&(n=n.bind(window),o=o.bind(window))}o=o||function(g){clearTimeout(g)},(n=n||function(g){var v=a(),S=Math.max(0,16-(v-l)),A=setTimeout(function(){g(v+S)},S);return l=v+S,A}).cancel=o,e=n,s.exports=e},1216:function(s,e){e=function(r,n,o){n==null&&(n=r,r=0);var a=Math.random();return o||r%1||n%1?Math.min(r+a*(n-r+parseFloat("1e-"+((a+"").length-1))),n):r+Math.floor(a*(n-r+1))},s.exports=e},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(s){for(var e=new Uint8Array(s),r=0;r<s;r++)e[r]=random(0,255);return e},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(s){var e=new Uint8Array(s);return crypto.getRandomValues(e),e})):isNode&&(crypto=eval("require")("crypto"),exports=function(s){return crypto.randomBytes(s)}),module.exports=exports},4270:function(s,e){var r,n=[],o=document,a=o.documentElement.doScroll,c="DOMContentLoaded",l=(a?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);l||o.addEventListener(c,r=function(){for(o.removeEventListener(c,r),l=1;r=n.shift();)r()}),e=function(h){l?setTimeout(h,0):n.push(h)},s.exports=e},5852:function(s,e,r){var n=r(2838);e=function(o,a,c){var l=[];a=n(a,c);for(var h=-1,d=o.length;++h<d;){var f=h-l.length,g=o[f];a(g,h,o)&&(l.push(g),o.splice(f,1))}return l},s.exports=e},4552:function(s,e){e=function(r,n){var o="";if(n<1)return"";for(;n>0;)1&n&&(o+=r),n>>=1,r+=r;return o},s.exports=e},8368:function(s,e,r){var n=r(2337);e=function(o,a,c){return o.replace(new RegExp(n(a),"g"),c)},s.exports=e},1137:function(s,e){e=function(r,n){return n=n==null?r.length-1:+n,function(){var o,a=Math.max(arguments.length-n,0),c=new Array(a);for(o=0;o<a;o++)c[o]=arguments[o+n];switch(n){case 0:return r.call(this,c);case 1:return r.call(this,arguments[0],c);case 2:return r.call(this,arguments[0],arguments[1],c)}var l=new Array(n+1);for(o=0;o<n;o++)l[o]=arguments[o];return l[n]=c,r.apply(this,l)}},s.exports=e},1527:function(s,e){e=function(r){var n=r.length,o=Array(n);n--;for(var a=0;a<=n;a++)o[n-a]=r[a];return o},s.exports=e},3279:function(s,e){e=function(a){var c,l,h=a[0]/255,d=a[1]/255,f=a[2]/255,g=r(h,d,f),v=n(h,d,f),S=v-g;(c=r(60*(c=v===g?0:h===v?(d-f)/S:d===v?2+(f-h)/S:4+(h-d)/S),360))<0&&(c+=360);var A=(g+v)/2;l=v===g?0:A<=.5?S/(v+g):S/(2-v-g);var w=[o(c),o(100*l),o(100*A)];return a[3]&&(w[3]=a[3]),w};var r=Math.min,n=Math.max,o=Math.round;s.exports=e},5031:function(s,e,r){var n=r(6299);e=function(o){var a,c=window.location,l=c.hostname,h=c.pathname,d=l.split("."),f=h.split("/"),g="",v=f.length;if(!b())for(var S=d.length-1;S>=0;S--){var A=d[S];if(A!==""){if(b({domain:g=g===""?A:A+"."+g,path:a="/"})||b({domain:g}))return;for(var w=0;w<v;w++){var m=f[w];if(m!==""&&(b({domain:g,path:a+=m})||b({path:a})||b({domain:g,path:a+="/"})||b({path:a})))return}}}function b(x){return x=x||{},n.remove(o,x),!n.get(o)}},s.exports=e},5610:function(s,e,r){e=r(2727)?window:r.g,s.exports=e},3597:function(s,e){e=function(r,n){if(n==null){if(r.trimRight)return r.trimRight();n=` \r
	\f\v`}for(var o,a,c=r.length-1,l=n.length,h=!0;h&&c>=0;)for(h=!1,o=-1,a=r.charAt(c);++o<l;)if(a===n[o]){h=!0,c--;break}return c>=0?r.substring(0,c+1):""},s.exports=e},2838:function(s,e,r){var n=r(4777),o=r(5166),a=r(6472),c=r(3955),l=r(4491),h=r(6362),d=r(2994);e=function(f,g,v){return f==null?h:n(f)?c(f,g,v):o(f)&&!a(f)?l(f):d(f)},s.exports=e},7653:function(s,e,r){var n=r(1286),o=r(1694);e=function(a,c){var l;for(l=(c=o(c,a)).shift();!n(l);){if((a=a[l])==null)return;l=c.shift()}return a},s.exports=e},8079:function(s,e,r){var n=r(1694),o=r(1286),a=r(3367),c=r(9804),l=r(6768);e=function(h,d,f){var g,v=(d=n(d,h)).pop();for(g=d.shift();!o(g);){if(l(g)||c(g)||(g=a(g)),g==="__proto__"||g==="constructor"||g==="prototype")return;h[g]||(h[g]={}),h=h[g],g=d.shift()}h[v]=f},s.exports=e},615:function(s,e,r){var n=r(5026);e=function(o){var a;switch(o=o||"local"){case"local":a=window.localStorage;break;case"session":a=window.sessionStorage}try{var c="test-localStorage-"+Date.now();a.setItem(c,c);var l=a.getItem(c);if(a.removeItem(c),l!==c)throw new Error}catch{return n}return a},s.exports=e},4224:function(s,e,r){var n=r(6334);e=function(o,a){return o=new n(o),a=new n(a),o.port=0|o.port||(o.protocol==="https"?443:80),a.port=0|a.port||(a.protocol==="https"?443:80),o.protocol===a.protocol&&o.hostname===a.hostname&&o.port===a.port},s.exports=e},9677:function(s,e){e=function(r,n,o){var a=r.length;n=n==null?0:n<0?Math.max(a+n,0):Math.min(n,a),o=o==null?a:o<0?Math.max(a+o,0):Math.min(o,a);for(var c=[];n<o;)c.push(r[n++]);return c},s.exports=e},6053:function(s,e,r){var n=r(2838),o=r(1369),a=r(2533);e=function(c,l,h){l=n(l,h);for(var d=!o(c)&&a(c),f=(d||c).length,g=0;g<f;g++){var v=d?d[g]:g;if(l(c[v],v,c))return!0}return!1},s.exports=e},3629:function(s,e,r){var n=r(3843),o=r(4193),a=r(2533),c=r(6472),l=r(5166);e=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(f,h);var g=f.deep,v=f.comparator,S=[],A=[];return function w(m){var b,x=S.indexOf(m);if(x>-1)return A[x];if(c(m)){b=[],S.push(m),A.push(b);for(var y=0,O=m.length;y<O;y++){var k=m[y];g&&l(k)?b[y]=w(k):b[y]=k}}else{b={},S.push(m),A.push(b);for(var P=a(m).sort(v),L=0,M=P.length;L<M;L++){var B=P[L],j=m[B];g&&l(j)?b[B]=w(j):b[B]=j}}return b}(d)};var h={deep:!1,comparator:n.defComparator};s.exports=e},8935:function(s,e){var r=/([A-Z])/g,n=/[_.\- ]+/g,o=/(^-)|(-$)/g;e=function(a){return(a=a.replace(r,"-$1").toLowerCase().replace(n,"-").replace(o,"")).split("-")},s.exports=e},6930:function(s,e){e=function(r,n){return r.indexOf(n)===0},s.exports=e},4400:function(s,e,r){var n=r(3085),o=r(3023),a=r(3367),c=r(1286),l=r(4777),h=r(1754);e=function(d,f){return JSON.stringify(d,(g=[],v=[],function(S,A){if(g.length>0){var w=g.indexOf(this);w>-1?(g.splice(w+1),v.splice(w,1/0,S)):(g.push(this),v.push(S));var m=g.indexOf(A);m>-1&&(A=g[0]===A?"[Circular ~]":"[Circular ~."+v.slice(0,m).join(".")+"]")}else g.push(A);return h(A)||l(A)?A="["+o(n(A))+" "+a(A)+"]":c(A)&&(A=null),A}),f);var g,v},s.exports=e},9963:function(s,e,r){var n=r(4187),o=r(3085),a=r(3367),c=r(4858),l=r(300),h=r(2533),d=r(3783),f=r(7496),g=r(415),v=r(801),S=r(6329),A=r(4321),w=r(5972),m=r(8847),b=r(1116),x=r(6341),y=r(5166),O=r(9537),k=r(1662),P=r(6930),L=r(8079),M=r(9803),B=r(3487),j=r(1369);function F(Y,J,K,ne){var de=[];return d(J,function(Re){var Te,Me=Object.getOwnPropertyDescriptor(K,Re),Ie=Me&&Me.get,ce=Me&&Me.set;if(!ne.accessGetter&&Ie)Te="(...)";else try{if(Te=K[Re],x(ne.ignore,Te))return;A(Te)&&Te.catch(function(){})}catch(pe){Te=pe.message}de.push("".concat(U(Re),":").concat(e(Te,ne))),Ie&&de.push("".concat(U("get "+a(Re)),":").concat(e(Me.get,ne))),ce&&de.push("".concat(U("set "+a(Re)),":").concat(e(Me.set,ne)))}),'"'.concat(Y,'":{')+de.join(",")+"}"}function U(Y){return'"'.concat(Q(Y),'"')}function V(Y){return'"'.concat(Q(a(Y)),'"')}function Q(Y){return n(Y).replace(/\\'/g,"'").replace(/\t/g,"\\t")}e=function(Y){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=J.self,ne=J.startTime,de=ne===void 0?m():ne,Re=J.timeout,Te=Re===void 0?0:Re,Me=J.depth,Ie=Me===void 0?0:Me,ce=J.curDepth,pe=ce===void 0?1:ce,me=J.visitor,we=me===void 0?new q:me,Xe=J.unenumerable,Qe=Xe!==void 0&&Xe,Pe=J.symbol,Ze=Pe!==void 0&&Pe,_e=J.accessGetter,qe=_e!==void 0&&_e,Be=J.ignore,mt=Be===void 0?[]:Be,ht="",Dt={visitor:we,unenumerable:Qe,symbol:Ze,accessGetter:qe,depth:Ie,curDepth:pe+1,timeout:Te,startTime:de,ignore:mt},Se=o(Y,!1);if(Se==="String")ht=V(Y);else if(Se==="Number")ht=a(Y),c(ht,"Infinity")&&(ht='{"value":"'.concat(ht,'","type":"Number"}'));else if(Se==="NaN")ht='{"value":"NaN","type":"Number"}';else if(Se==="Boolean")ht=Y?"true":"false";else if(Se==="Null")ht="null";else if(Se==="Undefined")ht='{"type":"Undefined"}';else if(Se==="Symbol"){var Ye="Symbol";try{Ye=a(Y)}catch{}ht='{"value":'.concat(V(Ye),',"type":"Symbol"}')}else{if(Te&&m()-de>Te)return V("Timeout");if(Ie&&pe>Ie)return V("{...}");ht="{";var Le,ze=[],Ue=we.get(Y);if(Ue?(Le=Ue.id,ze.push('"reference":'.concat(Le))):(Le=we.set(Y),ze.push('"id":'.concat(Le))),ze.push('"type":"'.concat(Se,'"')),c(Se,"Function")?ze.push('"value":'.concat(V(l(Y)))):Se==="RegExp"&&ze.push('"value":'.concat(V(Y))),!Ue){var Ge=h(Y);if(Ge.length&&ze.push(F("enumerable",Ge,K||Y,Dt)),Qe){var ut=v(b(Y,{prototype:!1,unenumerable:!0}),Ge);ut.length&&ze.push(F("unenumerable",ut,K||Y,Dt))}if(Ze){var at=w(b(Y,{prototype:!1,symbol:!0}),function(Pt){return typeof Pt=="symbol"});at.length&&ze.push(F("symbol",at,K||Y,Dt))}var Ut=g(Y);if(Ut&&!x(mt,Ut)){var Zt='"proto":'.concat(e(Ut,S(Dt,{self:K||Y})));ze.push(Zt)}}ht+=ze.join(",")+"}"}return ht};var q=f({initialize:function(){this.id=1,this.visited=[]},set:function(Y){var J=this.visited,K=this.id,ne={id:K,val:Y};return J.push(ne),this.id++,K},get:function(Y){for(var J=this.visited,K=0,ne=J.length;K<ne;K++){var de=J[K];if(Y===de.val)return de}return!1}});function G(Y,J){var K=J.map;if(!y(Y))return Y;var ne=Y.id,de=Y.type,Re=Y.value,Te=Y.proto,Me=Y.reference,Ie=Y.enumerable,ce=Y.unenumerable;if(Me)return Y;if(de==="Number")return Re==="Infinity"?Number.POSITIVE_INFINITY:Re==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(de!=="Undefined"){var pe,me,we;if(de==="Function")(pe=function(){}).toString=function(){return Re},Te&&Object.setPrototypeOf(pe,G(Te,J));else if(de==="RegExp")we=(me=Re).lastIndexOf("/"),pe=new RegExp(me.slice(1,we),me.slice(we+1));else{var Xe;de!=="Object"?(Xe=O?function(){}:new Function(de,""),Te&&(Xe.prototype=G(Te,J)),pe=new Xe):pe=k(Te?G(Te,J):null)}var Qe,Pe={};return Ie&&(j(Ie)&&(Qe=Ie.length,delete Ie.length),Ie=B(Ie,function(_e,qe){return!Ze(Ie,_e,qe)}),d(Ie,function(_e,qe){(Pe[qe]||{}).get||(pe[qe]=G(_e,J))}),Qe&&(pe.length=Qe)),ce&&(ce=B(ce,function(_e,qe){return!Ze(ce,_e,qe)}),d(ce,function(_e,qe){var Be=Pe[qe]||{};if(!Be.get)if(_e=G(_e,J),y(_e)&&_e.reference){var mt=_e.reference;_e=function(){return K[mt]},Be.get=_e}else Be.value=_e;Be.enumerable=!1,Pe[qe]=Be})),M(pe,Pe),K[ne]=pe,pe}function Ze(_e,qe,Be){Be=a(Be);var mt=!1;return d(["get","set"],function(ht){if(P(Be,ht+" ")){var Dt=Be.replace(ht+" ","");_e[Dt]&&((qe=G(qe,J))==="Timeout"&&(qe=te),L(Pe,[Dt,ht],qe),mt=!0)}}),mt}}function te(){return"Timeout"}e.parse=function(Y){var J={},K=G(JSON.parse(Y),{map:J});return function(ne){d(ne,function(de){for(var Re=h(de),Te=0,Me=Re.length;Te<Me;Te++){var Ie=Re[Te];if(y(de[Ie])){var ce=de[Ie].reference;ce&&ne[ce]&&(de[Ie]=ne[ce])}}var pe=g(de);pe&&pe.reference&&ne[pe.reference]&&Object.setPrototypeOf(de,ne[pe.reference])})}(J),K},s.exports=e},6677:function(s,e){var r=/<[^>]*>/g;e=function(n){return n.replace(r,"")},s.exports=e},1907:function(s,e,r){var n=r(6768),o=r(1352),a=r(6435),c=r(2461),l=r(4331);e=function(d){n(d)&&(d=o(d));for(var f="",g=arguments.length,v=new Array(g>1?g-1:0),S=1;S<g;S++)v[S-1]=arguments[S];for(var A=0,w=d.length;A<w;A++)f+=d[A],v[A]&&(f+=v[A]);for(var m=f.split(`
`),b=[],x=0,y=m.length;x<y;x++){var O=m[x].match(h);O&&b.push(O[1].length)}var k=b.length>0?a.apply(null,b):0;return l(c(m,function(P){return P[0]===" "?P.slice(k):P}).join(`
`))};var h=/^(\s+)\S+/;s.exports=e},2439:function(s,e,r){var n=r(6049);e=function(o,a){return n(o,a,!0)},s.exports=e},1352:function(s,e,r){var n=r(1369),o=r(2461),a=r(6472),c=r(6768);e=function(l){return l?a(l)?l:n(l)&&!c(l)?o(l):[l]:[]},s.exports=e},3474:function(s,e,r){var n=r(6768);e=function(o){return n(o)?(o=o.toLowerCase())!=="0"&&o!==""&&o!=="false":!!o},s.exports=e},4891:function(s,e){var r=document;if(e=function(o){var a=r.createElement("body");return a.innerHTML=o,a.childNodes[0]},r.createRange&&r.body){var n=r.createRange();n.selectNode(r.body),n.createContextualFragment&&(e=function(o){return n.createContextualFragment(o).childNodes[0]})}s.exports=e},9296:function(s,e,r){var n=r(3875);e=function(o){return o?(o=n(o))-o%1:o===0?o:0},s.exports=e},3875:function(s,e,r){var n=r(3990),o=r(5166),a=r(4777),c=r(6768);e=function(l){if(n(l))return l;if(o(l)){var h=a(l.valueOf)?l.valueOf():l;l=o(h)?h+"":h}return c(l)?+l:l===0?l:+l},s.exports=e},300:function(s,e,r){var n=r(2763);e=function(a){if(n(a))return"";try{return o.call(a)}catch{}try{return a+""}catch{}return""};var o=Function.prototype.toString;s.exports=e},3367:function(s,e){e=function(r){return r==null?"":r.toString()},s.exports=e},4331:function(s,e,r){var n=r(7767),o=r(3597);e=function(a,c){return c==null&&a.trim?a.trim():n(o(a,c),c)},s.exports=e},7756:function(s,e,r){var n=r(4193),o=r(1286);e=function(c,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n(h,a);var d=h.ellipsis,f=h.separator;if(l>c.length)return c;var g=l-d.length;if(g<1)return d;var v=c.slice(0,g);if(o(f))return v+d;if(c.indexOf(f,g)!==g){var S=v.lastIndexOf(f);S>-1&&(v=v.slice(0,S))}return v+d};var a={ellipsis:"..."};s.exports=e},3085:function(s,e,r){var n=r(106),o=r(9433),a=r(3063),c=r(2349);e=function(h){var d,f=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return h===null&&(d="Null"),h===void 0&&(d="Undefined"),o(h)&&(d="NaN"),c(h)&&(d="Buffer"),d||(d=n(h).match(l))&&(d=d[1]),d?f?a(d):d:""};var l=/^\[object\s+(.*?)]$/;s.exports=e},8166:function(s,e,r){var n=r(996),o=r(2461);e={encode:function(a){return a.length<32768?String.fromCodePoint.apply(String,a):o(n(a,32767),function(c){return String.fromCodePoint.apply(String,c)}).join("")},decode:function(a){for(var c=[],l=0,h=a.length;l<h;){var d=a.charCodeAt(l++);if(d>=55296&&d<=56319&&l<h){var f=a.charCodeAt(l++);(64512&f)==56320?c.push(((1023&d)<<10)+(1023&f)+65536):(c.push(d),l--)}else c.push(d)}return c}},s.exports=e},5484:function(s,e,r){var n=r(2727),o=r(8985),a=!1;function c(l){a&&e.emit(l)}e={start:function(){a=!0},stop:function(){a=!1}},o.mixin(e),n?(window.addEventListener("error",function(l){if(l.error)c(l.error);else if(l.message){var h=new Error(l.message);h.stack="Error: ".concat(l.message,` 
 at `).concat(l.filename,":").concat(l.lineno,":").concat(l.colno),c(h)}}),window.addEventListener("unhandledrejection",function(l){c(l.reason)})):(process.on("uncaughtException",c),process.on("unhandledRejection",c)),s.exports=e},7387:function(s,e,r){var n=r(8901),o=r(2533);e=function(f){return l.test(f)?f.replace(h,d):f};var a=r(7190)(n.map),c="(?:"+o(a).join("|")+")",l=new RegExp(c),h=new RegExp(c,"g");function d(f){return a[f]}s.exports=e},5229:function(s,e){var r=0;e=function(n){var o=++r+"";return n?n+o:o},s.exports=e},42:function(s,e,r){var n=r(5972);function o(a,c){return a===c}e=function(a,c){return c=c||o,n(a,function(l,h,d){for(var f=d.length;++h<f;)if(c(l,d[h]))return!1;return!0})},s.exports=e},4502:function(s,e,r){var n=r(3367);e=function(o){return n(o).toLocaleUpperCase()},s.exports=e},3023:function(s,e){e=function(r){return r.length<1?r:r[0].toUpperCase()+r.slice(1)},s.exports=e},5742:function(s,e,r){var n=r(8166);e={encode:function(m){for(var b=n.decode(m),x="",y=0,O=b.length;y<O;y++)x+=S(b[y]);return x},decode:function(m,b){o=n.decode(m),a=0,c=o.length,l=0,h=0,d=0,f=128,g=191;for(var x,y=[];(x=A(b))!==!1;)y.push(x);return n.encode(y)}};var o,a,c,l,h,d,f,g,v=String.fromCharCode;function S(m){if(!(4294967168&m))return v(m);var b,x,y="";for(4294965248&m?4294901760&m?!(4292870144&m)&&(b=3,x=240):(b=2,x=224):(b=1,x=192),y+=v((m>>6*b)+x);b>0;)y+=v(128|63&m>>6*(b-1)),b--;return y}function A(m){for(;;){if(a>=c&&d){if(m)return w();throw new Error("Invalid byte index")}if(a===c)return!1;var b=o[a];if(a++,d){if(b<f||b>g){if(m)return a--,w();throw new Error("Invalid continuation byte")}if(f=128,g=191,l=l<<6|63&b,++h===d){var x=l;return l=0,d=0,h=0,x}}else{if(!(128&b))return b;if((224&b)==192)d=1,l=31&b;else if((240&b)==224)b===224&&(f=160),b===237&&(g=159),d=2,l=15&b;else{if((248&b)!=240){if(m)return w();throw new Error("Invalid UTF-8 detected")}b===240&&(f=144),b===244&&(g=143),d=3,l=7&b}}}}function w(){var m=a-h-1;return a=m+1,l=0,d=0,h=0,f=128,g=191,o[m]}s.exports=e},5936:function(s,e,r){var n=r(3366);e=function(){var c=n(16);return c[6]=15&c[6]|64,c[8]=63&c[8]|128,o[c[0]]+o[c[1]]+o[c[2]]+o[c[3]]+"-"+o[c[4]]+o[c[5]]+"-"+o[c[6]]+o[c[7]]+"-"+o[c[8]]+o[c[9]]+"-"+o[c[10]]+o[c[11]]+o[c[12]]+o[c[13]]+o[c[14]]+o[c[15]]};for(var o=[],a=0;a<256;a++)o[a]=(a+256).toString(16).substr(1);s.exports=e},2578:function(s,e,r){var n=r(3783);e=function(o){var a=[];return n(o,function(c){a.push(c)}),a},s.exports=e},3514:function(s,e,r){var n=r(8573),o=r(9882),a=r(4331),c=r(3783),l=r(2461),h=r(9433);e=function(){var d=n("viewport");if(!d)return 1;d=l(d.split(","),function(A){return a(A)});var f=.25,g=5,v=1;c(d,function(A){var w=(A=A.split("="))[0];A=A[1],w==="initial-scale"&&(v=+A),w==="maximum-scale"&&(g=+A),w==="minimum-scale"&&(f=+A)});var S=o(v,f,g);return h(S)?1:S},s.exports=e},8933:function(s,e){e=function(r){for(var n=[],o=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),a=0;a<o.snapshotLength;a++)n.push(o.snapshotItem(a));return n},s.exports=e},3577:function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(s,e,r){var n,o=this&&this.__extends||(n=function(V,Q){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,G){q.__proto__=G}||function(q,G){for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&(q[te]=G[te])},n(V,Q)},function(V,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function q(){this.constructor=V}n(V,Q),V.prototype=Q===null?Object.create(Q):(q.prototype=Q.prototype,new q)}),a=this&&this.__assign||function(){return a=Object.assign||function(V){for(var Q,q=1,G=arguments.length;q<G;q++)for(var te in Q=arguments[q])Object.prototype.hasOwnProperty.call(Q,te)&&(V[te]=Q[te]);return V},a.apply(this,arguments)},c=this&&this.__values||function(V){var Q=typeof Symbol=="function"&&Symbol.iterator,q=Q&&V[Q],G=0;if(q)return q.call(V);if(V&&typeof V.length=="number")return{next:function(){return V&&G>=V.length&&(V=void 0),{value:V&&V[G++],done:!V}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(e,"__esModule",{value:!0});var h=l(r(1160)),d=r(7669),f=r(2062),g=l(r(242)),v=l(r(2439)),S=l(r(3063)),A=l(r(3783)),w=l(r(3009)),m=l(r(5044)),b=l(r(4502)),x=l(r(6329)),y=l(r(7494)),O=l(r(6341)),k=l(r(3875)),P=l(r(3577)),L=l(r(6768));r(8169);var M=function(V){function Q(q,G){G===void 0&&(G={});var te=V.call(this,q,{compName:"dom-highlighter"},G)||this;return te.overlay=new d.HighlightOverlay(window),te.reset=function(){var Y=document.documentElement.clientWidth,J=document.documentElement.clientHeight;te.overlay.reset({viewportSize:{width:Y,height:J},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},te.initOptions(G,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),te.overlay.setContainer(q),te.overlay.setPlatform("mac"),te.redraw=(0,v.default)(function(){te.reset(),te.draw()},16),te.redraw(),te.bindEvent(),te}return o(Q,V),Q.prototype.highlight=function(q,G){G&&(0,x.default)(this.options,G),this.target=q,q instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new g.default(q),this.resizeSensor.addListener(this.redraw)),this.redraw()},Q.prototype.hide=function(){this.target=null,this.redraw()},Q.prototype.intercept=function(q){this.interceptor=q},Q.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),V.prototype.destroy.call(this)},Q.prototype.draw=function(){var q=this.target;q&&(q instanceof Text?this.drawText(q):this.drawElement(q))},Q.prototype.drawText=function(q){var G=this.options,te=document.createRange();te.selectNode(q);var Y=te.getBoundingClientRect(),J=Y.left,K=Y.top,ne=Y.width,de=Y.height;te.detach();var Re={paths:[{path:this.rectToPath({left:J,top:K,width:ne,height:de}),fillColor:F(G.contentColor),name:"content"}],showExtensionLines:G.showExtensionLines,showRulers:G.showRulers};G.showInfo&&(Re.elementInfo={tagName:"#text",nodeWidth:ne,nodeHeight:de}),this.overlay.drawHighlight(Re)},Q.prototype.drawElement=function(q){var G={paths:this.getPaths(q),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(G.elementInfo=this.getElementInfo(q)),this.interceptor){var te=this.interceptor(G);te&&(G=te)}this.overlay.drawHighlight(G)},Q.prototype.getPaths=function(q){var G=this.options,te=window.getComputedStyle(q),Y=q.getBoundingClientRect(),J=Y.left,K=Y.top,ne=Y.width,de=Y.height,Re=function(qe){return(0,f.pxToNum)(te.getPropertyValue(qe))},Te=Re("margin-left"),Me=Re("margin-right"),Ie=Re("margin-top"),ce=Re("margin-bottom"),pe=Re("border-left-width"),me=Re("border-right-width"),we=Re("border-top-width"),Xe=Re("border-bottom-width"),Qe=Re("padding-left"),Pe=Re("padding-right"),Ze=Re("padding-top"),_e=Re("padding-bottom");return[{path:this.rectToPath({left:J+pe+Qe,top:K+we+Ze,width:ne-pe-Qe-me-Pe,height:de-we-Ze-Xe-_e}),fillColor:F(G.contentColor),name:"content"},{path:this.rectToPath({left:J+pe,top:K+we,width:ne-pe-me,height:de-we-Xe}),fillColor:F(G.paddingColor),name:"padding"},{path:this.rectToPath({left:J,top:K,width:ne,height:de}),fillColor:F(G.borderColor),name:"border"},{path:this.rectToPath({left:J-Te,top:K-Ie,width:ne+Te+Me,height:de+Ie+ce}),fillColor:F(G.marginColor),name:"margin"}]},Q.prototype.getElementInfo=function(q){var G=q.getBoundingClientRect(),te=G.width,Y=G.height,J=q.getAttribute("class")||"";J=J.split(/\s+/).map(function(ne){return"."+ne}).join("");var K={tagName:(0,S.default)(q.tagName),className:J,idValue:q.id,nodeWidth:te,nodeHeight:Y};return this.options.showStyles&&(K.style=this.getStyles(q)),this.options.showAccessibilityInfo&&(0,x.default)(K,this.getAccessibilityInfo(q)),K},Q.prototype.getStyles=function(q){for(var G=window.getComputedStyle(q),te=!1,Y=q.childNodes,J=0,K=Y.length;J<K;J++)Y[J].nodeType===3&&(te=!0);var ne=[];return te&&ne.push("color","font-family","font-size","line-height"),ne.push("padding","margin","background-color"),U(G,ne)},Q.prototype.getAccessibilityInfo=function(q){var G=window.getComputedStyle(q);return a({showAccessibilityInfo:!0,contrast:a({contrastAlgorithm:"aa",textOpacity:.1},U(G,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(q)},this.getAccessibleNameAndRole(q))},Q.prototype.isFocusable=function(q){var G=(0,S.default)(q.tagName);if((0,O.default)(["a","button","input","textarea","select","details"],G))return!0;var te=q.getAttribute("tabindex");return!!(te&&(0,k.default)(te)>-1)},Q.prototype.getAccessibleNameAndRole=function(q){var G=q.getAttribute("labelledby")||q.getAttribute("aria-label"),te=q.getAttribute("role"),Y=(0,S.default)(q.tagName);return P.default.forEach(function(J){var K,ne;if(!te){var de=J[0],Re=J[2];if(de===Y){if(Re)try{for(var Te=c(Re),Me=Te.next();!Me.done;Me=Te.next()){var Ie=Me.value;if(q.getAttribute(Ie[0])!==Ie[1])return}}catch(ce){K={error:ce}}finally{try{Me&&!Me.done&&(ne=Te.return)&&ne.call(Te)}finally{if(K)throw K.error}}te=J[1]}}}),{accessibleName:G||q.getAttribute("title")||"",accessibleRole:te||"generic"}},Q.prototype.bindEvent=function(){var q=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return q.redraw()})},Q.prototype.rectToPath=function(q){var G=q.left,te=q.top,Y=q.width,J=q.height,K=[];return K.push("M",G,te),K.push("L",G+Y,te),K.push("L",G+Y,te+J),K.push("L",G,te+J),K.push("Z"),K},Q}(h.default);e.default=M,s.exports=M,s.exports.default=M;var B=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,j=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function F(V){return(0,L.default)(V)?V:V.a?"rgba(".concat(V.r,", ").concat(V.g,", ").concat(V.b,", ").concat(V.a,")"):"rgb(".concat(V.r,", ").concat(V.g,", ").concat(V.b,")")}function U(V,Q,q){q===void 0&&(q=!1);var G={};return(0,A.default)(Q,function(te){var Y,J=V[te==="text-opacity"?"color":te];J&&(Y=J,(B.test(Y)||j.test(Y))&&(J=function(K){var ne=w.default.parse(K),de=ne.val[3]||1;return ne.val=ne.val.slice(0,3),ne.val.push(Math.round(255*de)),"#"+(0,b.default)(m.default.encode(ne.val))}(J),te==="text-opacity"&&(J=J.slice(7),J=m.default.decode(J)[0]/255)),q&&(te=(0,y.default)(te)),G[te]=J)}),G}},9706:function(s,e){var r=this&&this.__read||function(F,U){var V=typeof Symbol=="function"&&F[Symbol.iterator];if(!V)return F;var Q,q,G=V.call(F),te=[];try{for(;(U===void 0||U-- >0)&&!(Q=G.next()).done;)te.push(Q.value)}catch(Y){q={error:Y}}finally{try{Q&&!Q.done&&(V=G.return)&&V.call(G)}finally{if(q)throw q.error}}return te},n=this&&this.__values||function(F){var U=typeof Symbol=="function"&&Symbol.iterator,V=U&&F[U],Q=0;if(V)return V.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&Q>=F.length&&(F=void 0),{value:F&&F[Q++],done:!F}}};throw new TypeError(U?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(F,U){var V=F[3];return[(1-V)*U[0]+V*F[0],(1-V)*U[1]+V*F[1],(1-V)*U[2]+V*F[2],V+U[3]*(1-V)]}function a(F){var U=r(F,3),V=U[0],Q=U[1],q=U[2];return .2126*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:Math.pow((Q+.055)/1.055,2.4))+.0722*(q<=.03928?q/12.92:Math.pow((q+.055)/1.055,2.4))}Object.defineProperty(e,"__esModule",{value:!0}),e.getContrastThreshold=e.isLargeFont=e.getAPCAThreshold=e.desiredLuminanceAPCA=e.contrastRatioByLuminanceAPCA=e.contrastRatioAPCA=e.luminanceAPCA=e.contrastRatio=e.luminance=e.rgbaToHsla=e.blendColors=void 0,e.blendColors=o,e.rgbaToHsla=function(F){var U=r(F,4),V=U[0],Q=U[1],q=U[2],G=U[3],te=Math.max(V,Q,q),Y=Math.min(V,Q,q),J=te-Y,K=te+Y,ne=.5*K;return[Y===te?0:V===te?(.16666666666666666*(Q-q)/J+1)%1:Q===te?.16666666666666666*(q-V)/J+.3333333333333333:.16666666666666666*(V-Q)/J+.6666666666666666,ne===0||ne===1?0:ne<=.5?J/K:J/(2-K),ne,G]},e.luminance=a,e.contrastRatio=function(F,U){var V=a(o(F,U)),Q=a(U);return(Math.max(V,Q)+.05)/(Math.min(V,Q)+.05)};var c=2.4,l=.55,h=.58,d=.62,f=.57,g=.03,v=1.45,S=1.25,A=1.25,w=5e-4,m=.078,b=12.82051282051282,x=.06,y=.001;function O(F){var U=r(F,3),V=U[0],Q=U[1],q=U[2];return .2126729*Math.pow(V,c)+.7151522*Math.pow(Q,c)+.072175*Math.pow(q,c)}function k(F){return F>g?F:F+Math.pow(g-F,v)}function P(F,U){if(F=k(F),U=k(U),Math.abs(F-U)<w)return 0;var V=0;return 100*(V=U>=F?(V=(Math.pow(U,l)-Math.pow(F,h))*S)<y?0:V<m?V-V*b*x:V-x:(V=(Math.pow(U,d)-Math.pow(F,f))*A)>-y?0:V>-m?V-V*b*x:V+x)}e.luminanceAPCA=O,e.contrastRatioAPCA=function(F,U){return P(O(F),O(U))},e.contrastRatioByLuminanceAPCA=P,e.desiredLuminanceAPCA=function(F,U,V){function Q(){return V?Math.pow(Math.abs(Math.pow(F,d)-(-U-x)/A),1/f):Math.pow(Math.abs(Math.pow(F,l)-(U+x)/S),1/h)}F=k(F),U/=100;var q=Q();return(q<0||q>1)&&(V=!V,q=Q()),q};var L=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function M(F,U){var V=72*parseFloat(F.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(U)!==-1?V>=14:V>=18}L.reverse(),e.getAPCAThreshold=function(F,U){var V,Q,q,G,te=parseFloat(F.replace("px","")),Y=parseFloat(U);try{for(var J=n(L),K=J.next();!K.done;K=J.next()){var ne=r(K.value),de=ne[0],Re=ne.slice(1);if(te>=de)try{for(var Te=(q=void 0,n([900,800,700,600,500,400,300,200,100].entries())),Me=Te.next();!Me.done;Me=Te.next()){var Ie=r(Me.value,2),ce=Ie[0];if(Y>=Ie[1]){var pe=Re[Re.length-1-ce];return pe===-1?null:pe}}}catch(me){q={error:me}}finally{try{Me&&!Me.done&&(G=Te.return)&&G.call(Te)}finally{if(q)throw q.error}}}}catch(me){V={error:me}}finally{try{K&&!K.done&&(Q=J.return)&&Q.call(J)}finally{if(V)throw V.error}}return null},e.isLargeFont=M;var B={aa:3,aaa:4.5},j={aa:4.5,aaa:7};e.getContrastThreshold=function(F,U){return M(F,U)?B:j}},9434:function(s,e){var r=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,g=f&&d[f],v=0;if(g)return g.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&v>=d.length&&(d=void 0),{value:d&&d[v++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(d,f){var g=typeof Symbol=="function"&&d[Symbol.iterator];if(!g)return d;var v,S,A=g.call(d),w=[];try{for(;(f===void 0||f-- >0)&&!(v=A.next()).done;)w.push(v.value)}catch(m){S={error:m}}finally{try{v&&!v.done&&(g=A.return)&&g.call(A)}finally{if(S)throw S.error}}return w},o=this&&this.__spreadArray||function(d,f,g){if(g||arguments.length===2)for(var v,S=0,A=f.length;S<A;S++)!v&&S in f||(v||(v=Array.prototype.slice.call(f,0,S)),v[S]=f[S]);return d.concat(v||Array.prototype.slice.call(f))};Object.defineProperty(e,"__esModule",{value:!0}),e.adoptStyleSheet=e.constrainNumber=e.ellipsify=e.createElement=e.createTextChild=e.createChild=e.log=e.Overlay=void 0;var a=function(){function d(f,g){g===void 0&&(g=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=f,this._document=f.document,Array.isArray(g)||(g=[g]),this.style=g}return d.prototype.setCanvas=function(f){this.canvas=f,this._context=f.getContext("2d")},d.prototype.install=function(){var f,g;try{for(var v=r(this.style),S=v.next();!S.done;S=v.next())h(S.value)}catch(A){f={error:A}}finally{try{S&&!S.done&&(g=v.return)&&g.call(v)}finally{if(f)throw f.error}}this._installed=!0},d.prototype.uninstall=function(){var f,g,v=function(w){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(m){return m!==w})};try{for(var S=r(this.style),A=S.next();!A.done;A=S.next())v(A.value)}catch(w){f={error:w}}finally{try{A&&!A.done&&(g=S.return)&&g.call(S)}finally{if(f)throw f.error}}this._installed=!1},d.prototype.reset=function(f){f&&(this.viewportSize=f.viewportSize,this.visualViewportSize=f.visualViewportSize,this.deviceScaleFactor=f.deviceScaleFactor,this.pageScaleFactor=f.pageScaleFactor,this.pageZoomFactor=f.pageZoomFactor,this.emulationScaleFactor=f.emulationScaleFactor,this.scrollX=Math.round(f.scrollX),this.scrollY=Math.round(f.scrollY)),this.resetCanvas()},d.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},d.prototype.setPlatform=function(f){this.platform=f,this._installed||this.install()},d.prototype.dispatch=function(f){this[f.shift()].apply(this,f)},d.prototype.eventHasCtrlOrMeta=function(f){return this.platform==="mac"?f.metaKey&&!f.ctrlKey:f.ctrlKey&&!f.metaKey},Object.defineProperty(d.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),d}();function c(d,f,g){var v=l(f,g);return v.addEventListener("click",function(S){S.stopPropagation()},!1),d.appendChild(v),v}function l(d,f){var g=document.createElement(d);if(f){var v=f.split(/\s+/);v=v.map(function(S){return"luna-dom-highlighter-"+S}),g.className=v.join(" ")}return g}function h(d){document.adoptedStyleSheets=o(o([],n(document.adoptedStyleSheets),!1),[d],!1)}e.Overlay=a,e.log=function(d){var f=document.getElementById("log");f||((f=c(document.body,"div")).id="log"),c(f,"div").textContent=d},e.createChild=c,e.createTextChild=function(d,f){var g=document.createTextNode(f);return d.appendChild(g),g},e.createElement=l,e.ellipsify=function(d,f){return d.length<=f?String(d):d.substr(0,f-1)+"…"},e.constrainNumber=function(d,f,g){return d<f?d=f:d>g&&(d=g),d},e.adoptStyleSheet=h},1521:function(s,e,r){var n=this&&this.__values||function(b){var x=typeof Symbol=="function"&&Symbol.iterator,y=x&&b[x],O=0;if(y)return y.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&O>=b.length&&(b=void 0),{value:b&&b[O++],done:!b}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(b,x){var y=typeof Symbol=="function"&&b[Symbol.iterator];if(!y)return b;var O,k,P=y.call(b),L=[];try{for(;(x===void 0||x-- >0)&&!(O=P.next()).done;)L.push(O.value)}catch(M){k={error:M}}finally{try{O&&!O.done&&(y=P.return)&&y.call(P)}finally{if(k)throw k.error}}return L},a=this&&this.__spreadArray||function(b,x,y){if(y||arguments.length===2)for(var O,k=0,P=x.length;k<P;k++)!O&&k in x||(O||(O=Array.prototype.slice.call(x,0,k)),O[k]=x[k]);return b.concat(O||Array.prototype.slice.call(x))},c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.drawPath=e.formatColor=e.formatRgba=e.parseHexa=e.createPathForQuad=e.hatchFillPath=e.applyMatrixToPoint=e.emptyBounds=e.buildPath=e.fillPathWithBoxStyle=e.drawPathWithLineStyle=void 0;var l=c(r(4858)),h=r(9706);function d(b,x,y){var O=0;function k(M){for(var B=[],j=0;j<M;++j){var F=Math.round(b[O++]*y);x.maxX=Math.max(x.maxX,F),x.minX=Math.min(x.minX,F);var U=Math.round(b[O++]*y);x.maxY=Math.max(x.maxY,U),x.minY=Math.min(x.minY,U),x.leftmostXForY[U]=Math.min(x.leftmostXForY[U]||Number.MAX_VALUE,F),x.rightmostXForY[U]=Math.max(x.rightmostXForY[U]||Number.MIN_VALUE,F),x.topmostYForX[F]=Math.min(x.topmostYForX[F]||Number.MAX_VALUE,U),x.bottommostYForX[F]=Math.max(x.bottommostYForX[F]||Number.MIN_VALUE,U),x.allPoints.push({x:F,y:U}),B.push(F,U)}return B}for(var P=b.length,L=new Path2D;O<P;)switch(b[O++]){case"M":L.moveTo.apply(L,k(1));break;case"L":L.lineTo.apply(L,k(1));break;case"C":L.bezierCurveTo.apply(L,k(3));break;case"Q":L.quadraticCurveTo.apply(L,k(2));break;case"Z":L.closePath()}return L}e.drawPathWithLineStyle=function(b,x,y,O){O===void 0&&(O=1),y&&y.color&&(b.save(),b.translate(.5,.5),b.lineWidth=O,y.pattern==="dashed"&&b.setLineDash([3,3]),y.pattern==="dotted"&&b.setLineDash([2,2]),b.strokeStyle=y.color,b.stroke(x),b.restore())},e.fillPathWithBoxStyle=function(b,x,y,O,k){k&&(b.save(),k.fillColor&&(b.fillStyle=k.fillColor,b.fill(x)),k.hatchColor&&A(b,x,y,10,k.hatchColor,O,!1),b.restore())},e.buildPath=d,e.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},e.applyMatrixToPoint=function(b,x){var y=new DOMPoint(b.x,b.y);return{x:(y=y.matrixTransform(x)).x,y:y.y}};var f,g=5,v=3,S="";function A(b,x,y,O,k,P,L){if((b.canvas.width<y.maxX-y.minX||b.canvas.height<y.maxY-y.minY)&&(y={minX:0,maxX:b.canvas.width,minY:0,maxY:b.canvas.height,allPoints:[]}),!f||k!==S){S=k;var M=document.createElement("canvas");M.width=O,M.height=g+v;var B=M.getContext("2d");B.clearRect(0,0,M.width,M.height),B.rect(0,0,1,g),B.fillStyle=k,B.fill(),f=b.createPattern(M,"repeat")}b.save();var j=new DOMMatrix;f.setTransform(j.scale(L?-1:1,1).rotate(0,0,-45+P)),b.fillStyle=f,b.fill(x),b.restore()}function w(b){return(b.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(x){return parseInt(x,16)/255})}function m(b,x){if(x==="rgb"){var y=o(b,4),O=y[0],k=y[1],P=y[2],L=y[3];return"rgb(".concat((255*O).toFixed()," ").concat((255*k).toFixed()," ").concat((255*P).toFixed()).concat(L===1?"":" / "+Math.round(100*L)/100,")")}if(x==="hsl"){var M=o((0,h.rgbaToHsla)(b),4),B=M[0],j=M[1],F=M[2];return L=M[3],"hsl(".concat(Math.round(360*B),"deg ").concat(Math.round(100*j)," ").concat(Math.round(100*F)).concat(L===1?"":" / "+Math.round(100*L)/100,")")}throw new Error("NOT_REACHED")}e.hatchFillPath=A,e.createPathForQuad=function(b,x,y,O){var k,P,L=["M",b.p1.x,b.p1.y,"L",b.p2.x,b.p2.y,"L",b.p3.x,b.p3.y,"L",b.p4.x,b.p4.y];try{for(var M=n(x),B=M.next();!B.done;B=M.next()){var j=B.value;L=a(a([],o(L),!1),["L",j.p4.x,j.p4.y,"L",j.p3.x,j.p3.y,"L",j.p2.x,j.p2.y,"L",j.p1.x,j.p1.y,"L",j.p4.x,j.p4.y,"L",b.p4.x,b.p4.y],!1)}}catch(F){k={error:F}}finally{try{B&&!B.done&&(P=M.return)&&P.call(M)}finally{if(k)throw k.error}}return L.push("Z"),d(L,y,O)},e.parseHexa=w,e.formatRgba=m,e.formatColor=function(b,x){return x==="rgb"||x==="hsl"?m(w(b),x):(0,l.default)(b,"FF")?b.substr(0,7):b},e.drawPath=function(b,x,y,O,k,P,L){b.save();var M=d(x,P,L);return y&&(b.fillStyle=y,b.fill(M)),O&&(k==="dashed"&&b.setLineDash([3,3]),k==="dotted"&&b.setLineDash([2,2]),b.lineWidth=2,b.strokeStyle=O,b.stroke(M)),b.restore(),M}},7669:function(s,e,r){var n,o=this&&this.__extends||(n=function(w,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(b[y]=x[y])},n(w,m)},function(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function b(){this.constructor=w}n(w,m),w.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}),a=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.HighlightOverlay=void 0;var c=a(r(4858)),l=r(9706),h=r(9434),d=r(1521),f=function(w){function m(){var b=w!==null&&w.apply(this,arguments)||this;return b.gridLabelState={gridLayerCounter:0},b}return o(m,w),m.prototype.setContainer=function(b){this._container=b},m.prototype.setPlatform=function(b){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+b),w.prototype.setPlatform.call(this,b)},Object.defineProperty(m.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),m.prototype.reset=function(b){w.prototype.reset.call(this,b),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},m.prototype.install=function(){var b=this.document.createElement("canvas");b.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(b);var x=this.document.createElement("div");this.container.appendChild(x),this.tooltip=x,this.setCanvas(b),w.prototype.install.call(this)},m.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",w.prototype.uninstall.call(this)},m.prototype.drawHighlight=function(b){this.context.save();for(var x=(0,d.emptyBounds)(),y=b.paths.slice();y.length;){var O=y.pop();O&&(this.context.save(),(0,d.drawPath)(this.context,O.path,O.fillColor,O.outlineColor,void 0,x,this.emulationScaleFactor),y.length&&(this.context.globalCompositeOperation="destination-out",(0,d.drawPath)(this.context,y[y.length-1].path,"red",void 0,void 0,x,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var k=!!(b.paths.length&&b.showRulers&&x.minX<20&&x.maxX+20<this.canvasWidth),P=!!(b.paths.length&&b.showRulers&&x.minY<20&&x.maxY+20<this.canvasHeight);return b.showRulers&&this.drawAxis(this.context,k,P),b.paths.length&&(b.showExtensionLines&&function(L,M,B,j,F,U,V,Q){L.save();var q=V,G=Q;if(L.strokeStyle=F||A,L.lineWidth=1,L.translate(.5,.5),U&&L.setLineDash([3,3]),B)for(var te in M.rightmostXForY)L.beginPath(),L.moveTo(q,Number(te)),L.lineTo(M.rightmostXForY[te],Number(te)),L.stroke();else for(var te in M.leftmostXForY)L.beginPath(),L.moveTo(0,Number(te)),L.lineTo(M.leftmostXForY[te],Number(te)),L.stroke();if(j)for(var Y in M.bottommostYForX)L.beginPath(),L.moveTo(Number(Y),G),L.lineTo(Number(Y),M.topmostYForX[Y]),L.stroke();else for(var Y in M.topmostYForX)L.beginPath(),L.moveTo(Number(Y),0),L.lineTo(Number(Y),M.topmostYForX[Y]),L.stroke();L.restore()}(this.context,x,k,P,void 0,!1,this.canvasWidth,this.canvasHeight),b.elementInfo&&function(L,M,B,j,F,U){L.innerHTML="";var V=(0,h.createChild)(L,"div"),Q=(0,h.createChild)(V,"div","tooltip-content"),q=function(_e,qe){var Be=(0,h.createElement)("div","element-info"),mt=(0,h.createChild)(Be,"div","element-info-header"),ht=function(xt){return xt.layoutObjectName&&(0,c.default)(xt.layoutObjectName,"Grid")?"grid":xt.layoutObjectName&&xt.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(_e);ht&&(0,h.createChild)(mt,"div","element-layout-type ".concat(ht));var Dt=(0,h.createChild)(mt,"div","element-description");(0,h.createChild)(Dt,"span","material-tag-name").textContent=_e.tagName;var Se=(0,h.createChild)(Dt,"span","material-node-id"),Ye=80;Se.textContent=_e.idValue?"#"+(0,h.ellipsify)(_e.idValue,Ye):"",Se.classList.toggle("hidden",!_e.idValue);var Le=(0,h.createChild)(Dt,"span","material-class-name");Se.textContent.length<Ye&&(Le.textContent=(0,h.ellipsify)(_e.className||"",Ye-Se.textContent.length)),Le.classList.toggle("hidden",!_e.className);var ze=(0,h.createChild)(mt,"div","dimensions");(0,h.createChild)(ze,"span","material-node-width").textContent=String(Math.round(100*_e.nodeWidth)/100),(0,h.createTextChild)(ze,"×"),(0,h.createChild)(ze,"span","material-node-height").textContent=String(Math.round(100*_e.nodeHeight)/100);var Ue,Ge=_e.style||{};_e.isLockedAncestor&&yt("Showing content-visibility ancestor",""),_e.isLocked&&yt("Descendants are skipped due to content-visibility","");var ut=Ge.color;ut&&ut!=="#00000000"&&lt("Color",ut,qe);var at=Ge["font-family"],Ut=Ge["font-size"];at&&Ut!=="0px"&&yt("Font","".concat(Ut," ").concat(at));var Zt=Ge["background-color"];Zt&&Zt!=="#00000000"&&lt("Background",Zt,qe);var Pt=Ge.margin;Pt&&Pt!=="0px"&&yt("Margin",Pt);var Ot=Ge.padding;Ot&&Ot!=="0px"&&yt("Padding",Ot);var vt=_e.contrast?_e.contrast.backgroundColor:null,Ve=ut&&ut!=="#00000000"&&vt&&vt!=="#00000000";_e.showAccessibilityInfo&&(wt("Accessibility"),Ve&&Ge.color&&_e.contrast&&dt(Ge.color,_e.contrast),yt("Name",_e.accessibleName),yt("Role",_e.accessibleRole),$t("Keyboard-focusable",_e.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function pt(){Ue||(Ue=(0,h.createChild)(Be,"div","element-info-body"))}function wt(xt){pt();var Wt=(0,h.createChild)(Ue,"div","element-info-row element-info-section");(0,h.createChild)(Wt,"div","section-name").textContent=xt,(0,h.createChild)((0,h.createChild)(Wt,"div","separator-container"),"div","separator")}function Ct(xt,Wt,hr){pt();var Yt=(0,h.createChild)(Ue,"div","element-info-row");return Wt&&Yt.classList.add(Wt),(0,h.createChild)(Yt,"div","element-info-name").textContent=xt,(0,h.createChild)(Yt,"div","element-info-gap"),(0,h.createChild)(Yt,"div",hr||"")}function $t(xt,Wt){(0,h.createChild)(Ct(xt,"","element-info-value-icon"),"div",Wt)}function yt(xt,Wt){(0,h.createTextChild)(Ct(xt,"","element-info-value-text"),Wt)}function lt(xt,Wt,hr){var Yt=Ct(xt,"","element-info-value-color"),vr=(0,h.createChild)(Yt,"div","color-swatch");(0,h.createChild)(vr,"div","color-swatch-inner").style.backgroundColor=Wt,(0,h.createTextChild)(Yt,(0,d.formatColor)(Wt,hr))}function dt(xt,Wt){var hr=(0,d.parseHexa)(xt),Yt=(0,d.parseHexa)(Wt.backgroundColor);hr[3]*=Wt.textOpacity;var vr=Ct("Contrast","","element-info-value-contrast"),fr=(0,h.createChild)(vr,"div","contrast-text");fr.style.color=(0,d.formatRgba)(hr,"rgb"),fr.style.backgroundColor=Wt.backgroundColor,fr.textContent="Aa";var br=(0,h.createChild)(vr,"span");if(Wt.contrastAlgorithm==="apca"){var $r=(0,l.contrastRatioAPCA)(hr,Yt),Lr=(0,l.getAPCAThreshold)(Wt.fontSize,Wt.fontWeight);br.textContent=String(Math.floor(100*$r)/100)+"%",(0,h.createChild)(vr,"div",Lr===null||Math.abs($r)<Lr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(Wt.contrastAlgorithm==="aa"||Wt.contrastAlgorithm==="aaa"){var fn=(0,l.contrastRatio)(hr,Yt);Lr=(0,l.getContrastThreshold)(Wt.fontSize,Wt.fontWeight)[Wt.contrastAlgorithm],br.textContent=String(Math.floor(100*fn)/100),(0,h.createChild)(vr,"div",fn<Lr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return Be}(M,B);Q.appendChild(q);var G,te=Q.offsetWidth,Y=Q.offsetHeight,J=8,K=2,ne=2*J,de=J+2,Re=K+de,Te=F-K-de-ne,Me=j.maxX-j.minX<ne+2*de;if(Me)G=.5*(j.minX+j.maxX)-J;else{var Ie=j.minX+de,ce=j.maxX-de-ne;G=Ie>Re&&Ie<Te?Ie:(0,h.constrainNumber)(Re,Ie,ce)}var pe=G<Re||G>Te,me=G-de;me=(0,h.constrainNumber)(me,K,F-te-K);var we=j.minY-J-Y,Xe=!0;we<0?(we=Math.min(U-Y,j.maxY+J),Xe=!1):j.minY>U&&(we=U-J-Y);var Qe=me>=j.minX&&me+te<=j.maxX&&we>=j.minY&&we+Y<=j.maxY,Pe=me<j.maxX&&me+te>j.minX&&we<j.maxY&&we+Y>j.minY;if(Pe&&!Qe)return void(Q.style.display="none");if(Q.style.top=we+"px",Q.style.left=me+"px",!pe){var Ze=(0,h.createChild)(Q,"div","tooltip-arrow");Ze.style.clipPath=Xe?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",Ze.style.top=(Xe?Y-1:-J)+"px",Ze.style.left=G-me+"px"}}(this.tooltip,b.elementInfo,b.colorFormat,x,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:x}},m.prototype.drawAxis=function(b,x,y){b.save();var O=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,k=this.scrollX*this.pageScaleFactor,P=this.scrollY*this.pageScaleFactor;function L(te){return Math.round(te*O)}function M(te){return Math.round(te/O)}var B=this.canvasWidth/O,j=this.canvasHeight/O,F=50;b.save(),b.fillStyle=S,y?b.fillRect(0,L(j)-15,L(B),L(j)):b.fillRect(0,0,L(B),15),b.globalCompositeOperation="destination-out",b.fillStyle="red",x?b.fillRect(L(B)-15,0,L(B),L(j)):b.fillRect(0,0,15,L(j)),b.restore(),b.fillStyle=S,x?b.fillRect(L(B)-15,0,L(B),L(j)):b.fillRect(0,0,15,L(j)),b.lineWidth=1,b.strokeStyle=v,b.fillStyle=v,b.save(),b.translate(-k,.5-P);for(var U=j+M(P),V=100;V<U;V+=100)b.save(),b.translate(k,L(V)),b.rotate(-Math.PI/2),b.fillText(String(V),2,x?L(B)-7:13),b.restore();b.translate(.5,-.5);for(var Q=B+M(k),q=100;q<Q;q+=100)b.save(),b.fillText(String(q),L(q)+2,y?P+L(j)-7:P+13),b.restore();for(b.restore(),b.save(),x&&(b.translate(L(B),0),b.scale(-1,1)),b.translate(-k,.5-P),U=j+M(P),V=F;V<U;V+=F){b.beginPath(),b.moveTo(k,L(V));var G=V%100?5:8;b.lineTo(k+G,L(V)),b.stroke()}for(b.strokeStyle=g,V=5;V<U;V+=5)V%F&&(b.beginPath(),b.moveTo(k,L(V)),b.lineTo(k+5,L(V)),b.stroke());for(b.restore(),b.save(),y&&(b.translate(0,L(j)),b.scale(1,-1)),b.translate(.5-k,-P),Q=B+M(k),q=F;q<Q;q+=F)b.beginPath(),b.moveTo(L(q),P),G=q%100?5:8,b.lineTo(L(q),P+G),b.stroke();for(b.strokeStyle=g,q=5;q<Q;q+=5)q%F&&(b.beginPath(),b.moveTo(L(q),P),b.lineTo(L(q),P+5),b.stroke());b.restore(),b.restore()},m}(h.Overlay);e.HighlightOverlay=f;var g="rgba(0,0,0,0.2)",v="rgba(0,0,0,0.7)",S="rgba(255, 255, 255, 0.8)",A="rgba(128, 128, 128, 0.3)"},1160:function(s,e,r){var n,o=this&&this.__extends||(n=function(A,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(m[x]=b[x])},n(A,w)},function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function m(){this.constructor=A}n(A,w),A.prototype=w===null?Object.create(w):(m.prototype=w.prototype,new m)}),a=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(1512)),h=r(2062),d=a(r(3783)),f=a(r(6329)),g=a(r(4193)),v=a(r(5852)),S=function(A){function w(m,b,x){var y=b.compName,O=(x===void 0?{}:x).theme,k=O===void 0?"light":O,P=A.call(this)||this;return P.subComponents=[],P.compName=y,P.c=(0,h.classPrefix)(y),P.options={},P.container=m,P.$container=(0,l.default)(m),P.$container.addClass(["luna-".concat(y),P.c("platform-".concat((0,h.getPlatform)()))]),P.on("optionChange",function(L,M,B){var j=P.c;L==="theme"&&(P.$container.rmClass(j("theme-".concat(B))).addClass(j("theme-".concat(M))),(0,d.default)(P.subComponents,function(F){return F.setOption("theme",M)}))}),P.setOption("theme",k),P}return o(w,A),w.prototype.destroy=function(){this.destroySubComponents();var m=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(m("platform-".concat((0,h.getPlatform)()))).rmClass(m("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},w.prototype.setOption=function(m,b){var x=this,y=this.options,O={};typeof m=="string"?O[m]=b:O=m,(0,d.default)(O,function(k,P){var L=y[P];y[P]=k,x.emit("optionChange",P,k,L)})},w.prototype.getOption=function(m){return this.options[m]},w.prototype.addSubComponent=function(m){m.setOption("theme",this.options.theme),this.subComponents.push(m)},w.prototype.removeSubComponent=function(m){(0,v.default)(this.subComponents,function(b){return b===m})},w.prototype.destroySubComponents=function(){(0,d.default)(this.subComponents,function(m){return m.destroy()}),this.subComponents=[]},w.prototype.initOptions=function(m,b){b===void 0&&(b={}),(0,g.default)(m,b),(0,f.default)(this.options,m)},w.prototype.find=function(m){return this.$container.find(this.c(m))},w}(c.default);e.default=S},2062:function(s,e,r){var n=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.resetCanvasSize=e.getPlatform=e.pxToNum=e.executeAfterTransition=e.hasVerticalScrollbar=e.measuredScrollbarWidth=e.eventPage=e.eventClient=e.drag=e.classPrefix=void 0;var o=n(r(2461)),a=n(r(4331)),c=n(r(5610)),l=n(r(7483)),h=n(r(3990)),d=n(r(6341)),f=n(r(3875)),g=n(r(6954)),v=n(r(9585));function S(x,y){for(var O=0,k=x.length;O<k;O++){var P=x[O];y(P),P.content&&S(P.content,y)}}e.classPrefix=function(x){var y="luna-".concat(x,"-");function O(k){return(0,o.default)((0,a.default)(k).split(/\s+/),function(P){return(0,d.default)(P,y)?P:P.replace(/[\w-]+/,function(L){return"".concat(y).concat(L)})}).join(" ")}return function(k){if(/<[^>]*>/g.test(k))try{var P=l.default.parse(k);return S(P,function(L){L.attrs&&L.attrs.class&&(L.attrs.class=O(L.attrs.class))}),l.default.stringify(P)}catch{return O(k)}return O(k)}};var A,w="ontouchstart"in c.default,m={start:"touchstart",move:"touchmove",end:"touchend"},b={start:"mousedown",move:"mousemove",end:"mouseup"};e.drag=function(x){return w?m[x]:b[x]},e.eventClient=function(x,y){var O=x==="x"?"clientX":"clientY";return y[O]?y[O]:y.changedTouches?y.changedTouches[0][O]:0},e.eventPage=function(x,y){var O=x==="x"?"pageX":"pageY";return y[O]?y[O]:y.changedTouches?y.changedTouches[0][O]:0},e.measuredScrollbarWidth=function(){if((0,h.default)(A))return A;if(!document)return 16;var x=document.createElement("div"),y=document.createElement("div");return x.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),y.setAttribute("style","height: 200px"),x.appendChild(y),document.body.appendChild(x),A=x.offsetWidth-x.clientWidth,document.body.removeChild(x),A},e.hasVerticalScrollbar=function(x){return x.scrollHeight>x.offsetHeight},e.executeAfterTransition=function(x,y){if((0,v.default)(x))return y();var O=function(k){k.target===x&&(x.removeEventListener("transitionend",O),y())};x.addEventListener("transitionend",O)},e.pxToNum=function(x){return(0,f.default)(x.replace("px",""))},e.getPlatform=function(){var x=(0,g.default)();return x==="os x"?"mac":x},e.resetCanvasSize=function(x){x.width=Math.round(x.offsetWidth*window.devicePixelRatio),x.height=Math.round(x.offsetHeight*window.devicePixelRatio)}},6093:function(s,e,r){var n,o=this&&this.__extends||(n=function(v,S){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var m in w)Object.prototype.hasOwnProperty.call(w,m)&&(A[m]=w[m])},n(v,S)},function(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function A(){this.constructor=v}n(v,S),v.prototype=S===null?Object.create(S):(A.prototype=S.prototype,new A)}),a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1512)),l=a(r(5229)),h=a(r(2244)),d=a(r(8613)),f=function(v){function S(A,w){w===void 0&&(w={});var m=v.call(this,A,{compName:"notification"},w)||this;return m.notifications=[],m.initOptions(w,{position:{x:"right",y:"bottom"},duration:2e3}),m.initTpl(),m}return o(S,v),S.prototype.notify=function(A,w){var m=this;w===void 0&&(w={duration:this.options.duration});var b=new g(this,A);this.notifications.push(b),this.add(b),setTimeout(function(){return m.remove(b.id)},w.duration)},S.prototype.dismissAll=function(){for(var A=this.notifications,w=A[0];w;)this.remove(w.id),w=A[0]},S.prototype.add=function(A){this.container.appendChild(A.container)},S.prototype.remove=function(A){var w=this.notifications,m=(0,h.default)(w,function(x){return x.id===A});if(m){m.destroy();var b=w.indexOf(m);w.splice(b,1)}},S.prototype.initTpl=function(){var A=this.$container,w=this.options.position,m=w.x,b=w.y,x="flex-end",y="flex-end";switch(m){case"center":y="center";break;case"left":y="flex-start"}b==="top"&&(x="flex-start"),A.attr("style","justify-content: ".concat(x,"; align-items: ").concat(y))},S}(a(r(5404)).default);e.default=f;var g=function(){function v(S,A){this.container=(0,d.default)("div"),this.$container=(0,c.default)(this.container),this.notification=S,this.content=A,this.id=(0,l.default)("luna-notification-"),this.$container.attr({id:this.id,class:S.c("item ".concat(S.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return v.prototype.destroy=function(){this.$container.remove()},v.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},v}();s.exports=f,s.exports.default=f},5404:function(s,e,r){var n,o=this&&this.__extends||(n=function(A,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(m[x]=b[x])},n(A,w)},function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function m(){this.constructor=A}n(A,w),A.prototype=w===null?Object.create(w):(m.prototype=w.prototype,new m)}),a=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(r(1443)),l=a(r(1512)),h=r(164),d=a(r(3783)),f=a(r(6329)),g=a(r(4193)),v=a(r(5852)),S=function(A){function w(m,b,x){var y=b.compName,O=(x===void 0?{}:x).theme,k=O===void 0?"light":O,P=A.call(this)||this;return P.subComponents=[],P.compName=y,P.c=(0,h.classPrefix)(y),P.options={},P.container=m,P.$container=(0,l.default)(m),P.$container.addClass(["luna-".concat(y),P.c("platform-".concat((0,h.getPlatform)()))]),P.on("optionChange",function(L,M,B){var j=P.c;L==="theme"&&(P.$container.rmClass(j("theme-".concat(B))).addClass(j("theme-".concat(M))),(0,d.default)(P.subComponents,function(F){return F.setOption("theme",M)}))}),P.setOption("theme",k),P}return o(w,A),w.prototype.destroy=function(){this.destroySubComponents();var m=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(m("platform-".concat((0,h.getPlatform)()))).rmClass(m("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},w.prototype.setOption=function(m,b){var x=this,y=this.options,O={};typeof m=="string"?O[m]=b:O=m,(0,d.default)(O,function(k,P){var L=y[P];y[P]=k,x.emit("optionChange",P,k,L)})},w.prototype.getOption=function(m){return this.options[m]},w.prototype.addSubComponent=function(m){m.setOption("theme",this.options.theme),this.subComponents.push(m)},w.prototype.removeSubComponent=function(m){(0,v.default)(this.subComponents,function(b){return b===m})},w.prototype.destroySubComponents=function(){(0,d.default)(this.subComponents,function(m){return m.destroy()}),this.subComponents=[]},w.prototype.initOptions=function(m,b){b===void 0&&(b={}),(0,g.default)(m,b),(0,f.default)(this.options,m)},w.prototype.find=function(m){return this.$container.find(this.c(m))},w}(c.default);e.default=S},164:function(s,e,r){var n=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.resetCanvasSize=e.getPlatform=e.pxToNum=e.executeAfterTransition=e.hasVerticalScrollbar=e.measuredScrollbarWidth=e.eventClient=e.drag=e.classPrefix=void 0;var o=n(r(2461)),a=n(r(4331)),c=n(r(5610)),l=n(r(7483)),h=n(r(3990)),d=n(r(6341)),f=n(r(3875)),g=n(r(6954)),v=n(r(9585));function S(x,y){for(var O=0,k=x.length;O<k;O++){var P=x[O];y(P),P.content&&S(P.content,y)}}e.classPrefix=function(x){var y="luna-".concat(x,"-");function O(k){return(0,o.default)((0,a.default)(k).split(/\s+/),function(P){return(0,d.default)(P,y)?P:P.replace(/[\w-]+/,function(L){return"".concat(y).concat(L)})}).join(" ")}return function(k){if(/<[^>]*>/g.test(k))try{var P=l.default.parse(k);return S(P,function(L){L.attrs&&L.attrs.class&&(L.attrs.class=O(L.attrs.class))}),l.default.stringify(P)}catch{return O(k)}return O(k)}};var A,w="ontouchstart"in c.default,m={start:"touchstart",move:"touchmove",end:"touchend"},b={start:"mousedown",move:"mousemove",end:"mouseup"};e.drag=function(x){return w?m[x]:b[x]},e.eventClient=function(x,y){var O=x==="x"?"clientX":"clientY";return y[O]?y[O]:y.changedTouches?y.changedTouches[0][O]:0},e.measuredScrollbarWidth=function(){if((0,h.default)(A))return A;if(!document)return 16;var x=document.createElement("div"),y=document.createElement("div");return x.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),y.setAttribute("style","height: 200px"),x.appendChild(y),document.body.appendChild(x),A=x.offsetWidth-x.clientWidth,document.body.removeChild(x),A},e.hasVerticalScrollbar=function(x){return x.scrollHeight>x.offsetHeight},e.executeAfterTransition=function(x,y){if((0,v.default)(x))return y();var O=function(k){k.target===x&&(x.removeEventListener("transitionend",O),y())};x.addEventListener("transitionend",O)},e.pxToNum=function(x){return(0,f.default)(x.replace("px",""))},e.getPlatform=function(){var x=(0,g.default)();return x==="os x"?"mac":x},e.resetCanvasSize=function(x){x.width=Math.round(x.offsetWidth*window.devicePixelRatio),x.height=Math.round(x.offsetHeight*window.devicePixelRatio)}},8169:function(s,e,r){r.r(e),r.d(e,{default:function(){return m}});var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,c=function(b){var x=[],y=String(b).trim();return y[0]!=="M"&&y[0]!=="m"||y.replace(o,function(O,k,P){var L=k.toLowerCase(),M=function(j){var F=j.match(a);return F?F.map(Number):[]}(P),B=k;if(L==="m"&&M.length>2&&(x.push([B].concat(M.splice(0,2))),L="l",B=B==="m"?"l":"L"),M.length<n[L])return"";for(x.push([B].concat(M.splice(0,n[L])));M.length>=n[L]&&M.length&&n[L];)x.push([B].concat(M.splice(0,n[L])));return""}),x};function l(b,x){for(var y=0;y<x.length;y++){var O=x[y];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}function h(b){return function(x){if(Array.isArray(x))return d(x)}(b)||function(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}(b)||function(x,y){if(x){if(typeof x=="string")return d(x,y);var O=Object.prototype.toString.call(x).slice(8,-1);if(O==="Object"&&x.constructor&&(O=x.constructor.name),O==="Map"||O==="Set")return Array.from(x);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return d(x,y)}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(b,x){(x==null||x>b.length)&&(x=b.length);for(var y=0,O=new Array(x);y<x;y++)O[y]=b[y];return O}var f=c;function g(b,x){var y=b.x*Math.cos(x)-b.y*Math.sin(x),O=b.y*Math.cos(x)+b.x*Math.sin(x);b.x=y,b.y=O}function v(b,x){b.x*=x,b.y*=x}var S=function(b){if(b!==void 0&&b.CanvasRenderingContext2D&&(!b.Path2D||!function(L){var M=L.document.createElement("canvas").getContext("2d"),B=new L.Path2D("M0 0 L1 1");return M.strokeStyle="red",M.lineWidth=1,M.stroke(B),M.getImageData(0,0,1,1).data[0]===255}(b))){var x=function(){function L(j){var F;(function(U,V){if(!(U instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.segments=[],j&&j instanceof L?(F=this.segments).push.apply(F,h(j.segments)):j&&(this.segments=f(j))}var M,B;return M=L,(B=[{key:"addPath",value:function(j){var F;j&&j instanceof L&&(F=this.segments).push.apply(F,h(j.segments))}},{key:"moveTo",value:function(j,F){this.segments.push(["M",j,F])}},{key:"lineTo",value:function(j,F){this.segments.push(["L",j,F])}},{key:"arc",value:function(j,F,U,V,Q,q){this.segments.push(["AC",j,F,U,V,Q,!!q])}},{key:"arcTo",value:function(j,F,U,V,Q){this.segments.push(["AT",j,F,U,V,Q])}},{key:"ellipse",value:function(j,F,U,V,Q,q,G,te){this.segments.push(["E",j,F,U,V,Q,q,G,!!te])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(j,F,U,V,Q,q){this.segments.push(["C",j,F,U,V,Q,q])}},{key:"quadraticCurveTo",value:function(j,F,U,V){this.segments.push(["Q",j,F,U,V])}},{key:"rect",value:function(j,F,U,V){this.segments.push(["R",j,F,U,V])}}])&&l(M.prototype,B),Object.defineProperty(M,"prototype",{writable:!1}),L}(),y=b.CanvasRenderingContext2D.prototype.fill,O=b.CanvasRenderingContext2D.prototype.stroke;b.CanvasRenderingContext2D.prototype.fill=function(){for(var L=arguments.length,M=new Array(L),B=0;B<L;B++)M[B]=arguments[B];var j="nonzero";M.length===0||M.length===1&&typeof M[0]=="string"?y.apply(this,M):(arguments.length===2&&(j=M[1]),P(this,M[0].segments),y.call(this,j))},b.CanvasRenderingContext2D.prototype.stroke=function(L){L?(P(this,L.segments),O.call(this)):O.call(this)};var k=b.CanvasRenderingContext2D.prototype.isPointInPath;b.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var L=arguments.length,M=new Array(L),B=0;B<L;B++)M[B]=arguments[B];if(M[0].constructor.name==="Path2D"){var j=M[1],F=M[2],U=M[3]||"nonzero";return P(this,M[0].segments),k.apply(this,[j,F,U])}return k.apply(this,M)},b.Path2D=x}function P(L,M){var B,j,F,U,V,Q,q,G,te,Y,J,K,ne,de,Re,Te,Me,Ie,ce,pe,me,we,Xe,Qe,Pe,Ze,_e,qe,Be,mt={x:0,y:0},ht={x:0,y:0};L.beginPath();for(var Dt=0;Dt<M.length;++Dt){var Se=M[Dt];switch((pe=Se[0])!=="S"&&pe!=="s"&&pe!=="C"&&pe!=="c"&&(we=null,Xe=null),pe!=="T"&&pe!=="t"&&pe!=="Q"&&pe!=="q"&&(Qe=null,Pe=null),pe){case"m":case"M":pe==="m"?(J+=Se[1],ne+=Se[2]):(J=Se[1],ne=Se[2]),pe!=="M"&&mt||(mt={x:J,y:ne}),L.moveTo(J,ne);break;case"l":J+=Se[1],ne+=Se[2],L.lineTo(J,ne);break;case"L":J=Se[1],ne=Se[2],L.lineTo(J,ne);break;case"H":J=Se[1],L.lineTo(J,ne);break;case"h":J+=Se[1],L.lineTo(J,ne);break;case"V":ne=Se[1],L.lineTo(J,ne);break;case"v":ne+=Se[1],L.lineTo(J,ne);break;case"a":case"A":pe==="a"?(J+=Se[6],ne+=Se[7]):(J=Se[6],ne=Se[7]),Te=Se[1],Me=Se[2],q=Se[3]*Math.PI/180,F=!!Se[4],U=!!Se[5],V={x:J,y:ne},g(Q={x:(ht.x-V.x)/2,y:(ht.y-V.y)/2},-q),(G=Q.x*Q.x/(Te*Te)+Q.y*Q.y/(Me*Me))>1&&(Te*=G=Math.sqrt(G),Me*=G),te=Te*Te*Me*Me,Y=Te*Te*Q.y*Q.y+Me*Me*Q.x*Q.x,v(me={x:Te*Q.y/Me,y:-Me*Q.x/Te},U!==F?Math.sqrt((te-Y)/Y)||0:-Math.sqrt((te-Y)/Y)||0),j=Math.atan2((Q.y-me.y)/Me,(Q.x-me.x)/Te),B=Math.atan2(-(Q.y+me.y)/Me,-(Q.x+me.x)/Te),g(me,q),_e=me,qe=(V.x+ht.x)/2,Be=(V.y+ht.y)/2,_e.x+=qe,_e.y+=Be,L.save(),L.translate(me.x,me.y),L.rotate(q),L.scale(Te,Me),L.arc(0,0,1,j,B,!U),L.restore();break;case"C":we=Se[3],Xe=Se[4],J=Se[5],ne=Se[6],L.bezierCurveTo(Se[1],Se[2],we,Xe,J,ne);break;case"c":L.bezierCurveTo(Se[1]+J,Se[2]+ne,Se[3]+J,Se[4]+ne,Se[5]+J,Se[6]+ne),we=Se[3]+J,Xe=Se[4]+ne,J+=Se[5],ne+=Se[6];break;case"S":we!==null&&Xe!==null||(we=J,Xe=ne),L.bezierCurveTo(2*J-we,2*ne-Xe,Se[1],Se[2],Se[3],Se[4]),we=Se[1],Xe=Se[2],J=Se[3],ne=Se[4];break;case"s":we!==null&&Xe!==null||(we=J,Xe=ne),L.bezierCurveTo(2*J-we,2*ne-Xe,Se[1]+J,Se[2]+ne,Se[3]+J,Se[4]+ne),we=Se[1]+J,Xe=Se[2]+ne,J+=Se[3],ne+=Se[4];break;case"Q":Qe=Se[1],Pe=Se[2],J=Se[3],ne=Se[4],L.quadraticCurveTo(Qe,Pe,J,ne);break;case"q":Qe=Se[1]+J,Pe=Se[2]+ne,J+=Se[3],ne+=Se[4],L.quadraticCurveTo(Qe,Pe,J,ne);break;case"T":Qe!==null&&Pe!==null||(Qe=J,Pe=ne),Qe=2*J-Qe,Pe=2*ne-Pe,J=Se[1],ne=Se[2],L.quadraticCurveTo(Qe,Pe,J,ne);break;case"t":Qe!==null&&Pe!==null||(Qe=J,Pe=ne),Qe=2*J-Qe,Pe=2*ne-Pe,J+=Se[1],ne+=Se[2],L.quadraticCurveTo(Qe,Pe,J,ne);break;case"z":case"Z":J=mt.x,ne=mt.y,mt=void 0,L.closePath();break;case"AC":J=Se[1],ne=Se[2],Re=Se[3],j=Se[4],B=Se[5],Ze=Se[6],L.arc(J,ne,Re,j,B,Ze);break;case"AT":K=Se[1],de=Se[2],J=Se[3],ne=Se[4],Re=Se[5],L.arcTo(K,de,J,ne,Re);break;case"E":J=Se[1],ne=Se[2],Te=Se[3],Me=Se[4],q=Se[5],j=Se[6],B=Se[7],Ze=Se[8],L.save(),L.translate(J,ne),L.rotate(q),L.scale(Te,Me),L.arc(0,0,1,j,B,Ze),L.restore();break;case"R":J=Se[1],ne=Se[2],Ie=Se[3],ce=Se[4],mt={x:J,y:ne},L.rect(J,ne,Ie,ce)}ht.x=J,ht.y=ne}}},A=c,w=S;typeof window<"u"&&w(window);var m={path2dPolyfill:w,parsePath:A}},2777:function(s){s.exports=`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}

/*# sourceMappingURL=luna-dom-highlighter.css.map*/`},907:function(s,e,r){function n(o,a){(a==null||a>o.length)&&(a=o.length);for(var c=0,l=new Array(a);c<a;c++)l[c]=o[c];return l}r.d(e,{Z:function(){return n}})},7326:function(s,e,r){function n(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}r.d(e,{Z:function(){return n}})},5671:function(s,e,r){function n(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}r.d(e,{Z:function(){return n}})},3144:function(s,e,r){r.d(e,{Z:function(){return a}});var n=r(9142);function o(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,(0,n.Z)(d.key),d)}}function a(c,l,h){return l&&o(c.prototype,l),h&&o(c,h),Object.defineProperty(c,"prototype",{writable:!1}),c}},4942:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(9142);function o(a,c,l){return(c=(0,n.Z)(c))in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,a}},1752:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(1120);function o(){return o=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,c,l){var h=function(f,g){for(;!Object.prototype.hasOwnProperty.call(f,g)&&(f=(0,n.Z)(f))!==null;);return f}(a,c);if(h){var d=Object.getOwnPropertyDescriptor(h,c);return d.get?d.get.call(arguments.length<3?a:l):d.value}},o.apply(this,arguments)}},1120:function(s,e,r){function n(o){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},n(o)}r.d(e,{Z:function(){return n}})},9340:function(s,e,r){function n(a,c){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,h){return l.__proto__=h,l},n(a,c)}function o(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),c&&n(a,c)}r.d(e,{Z:function(){return o}})},2963:function(s,e,r){r.d(e,{Z:function(){return a}});var n=r(1002),o=r(7326);function a(c,l){if(l&&((0,n.Z)(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(c)}},168:function(s,e,r){function n(o,a){return a||(a=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}}))}r.d(e,{Z:function(){return n}})},9142:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(1002);function o(a){var c=function(l,h){if((0,n.Z)(l)!=="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,h||"default");if((0,n.Z)(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}(a,"string");return(0,n.Z)(c)==="symbol"?c:String(c)}},1002:function(s,e,r){function n(o){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},n(o)}r.d(e,{Z:function(){return n}})},181:function(s,e,r){r.d(e,{Z:function(){return o}});var n=r(907);function o(a,c){if(a){if(typeof a=="string")return(0,n.Z)(a,c);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?(0,n.Z)(a,c):void 0}}}},__webpack_module_cache__={};function __webpack_require__(s){var e=__webpack_module_cache__[s];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[s]={id:s,loaded:!1,exports:{}};return __webpack_modules__[s].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(s,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.hmd=function(s){return(s=Object.create(s)).children||(s.children=[]),Object.defineProperty(s,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+s.id)}}),s},__webpack_require__.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},__webpack_require__.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(2027);return __webpack_exports__}()})})(eruda$1);var erudaExports=eruda$1.exports;const eruda=getDefaultExportFromCjs(erudaExports);var erudaFeatures$1={exports:{}};/*! eruda-features v2.0.0 https://github.com/liriliri/eruda-features#readme */(function(module,exports){(function(s,e){module.exports=e()})(typeof self<"u"?self:commonjsGlobal,function(){return function(s){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return s[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=s,e.c=r,e.d=function(n,o,a){e.o(n,o)||Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:a})},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="/assets/",e(e.s=47)}([function(s,e){var r=s.exports={version:"2.5.1"};typeof __e=="number"&&(__e=r)},function(s,e,r){function n(b){return g[b]}function o(b){for(var x=1;x<arguments.length;x++)for(var y in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],y)&&(b[y]=arguments[x][y]);return b}function a(b,x){for(var y=0,O=b.length;y<O;y++)if(b[y]===x)return y;return-1}function c(b){if(typeof b!="string"){if(b&&b.toHTML)return b.toHTML();if(b==null)return"";if(!b)return b+"";b=""+b}return S.test(b)?b.replace(v,n):b}function l(b){return!b&&b!==0||!(!m(b)||b.length!==0)}function h(b){var x=o({},b);return x._parent=b,x}function d(b,x){return b.path=x,b}function f(b,x){return(b?b+".":"")+x}e.__esModule=!0,e.extend=o,e.indexOf=a,e.escapeExpression=c,e.isEmpty=l,e.createFrame=h,e.blockParams=d,e.appendContextPath=f;var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},v=/[&<>"'`=]/g,S=/[&<>"'`=]/,A=Object.prototype.toString;e.toString=A;var w=function(b){return typeof b=="function"};w(/x/)&&(e.isFunction=w=function(b){return typeof b=="function"&&A.call(b)==="[object Function]"}),e.isFunction=w;var m=Array.isArray||function(b){return!(!b||typeof b!="object")&&A.call(b)==="[object Array]"};e.isArray=m},function(s,e){var r=s.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=r)},function(s,e){var r={}.hasOwnProperty;s.exports=function(n,o){return r.call(n,o)}},function(s,e,r){var n=r(10),o=r(37),a=r(19),c=Object.defineProperty;e.f=r(5)?Object.defineProperty:function(l,h,d){if(n(l),h=a(h,!0),n(d),o)try{return c(l,h,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(l[h]=d.value),l}},function(s,e,r){s.exports=!r(12)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(s,e,r){var n=r(63),o=r(16);s.exports=function(a){return n(o(a))}},function(s,e,r){var n=r(2),o=r(0),a=r(36),c=r(8),l=function(h,d,f){var g,v,S,A=h&l.F,w=h&l.G,m=h&l.S,b=h&l.P,x=h&l.B,y=h&l.W,O=w?o:o[d]||(o[d]={}),k=O.prototype,P=w?n:m?n[d]:(n[d]||{}).prototype;w&&(f=d);for(g in f)(v=!A&&P&&P[g]!==void 0)&&g in O||(S=v?P[g]:f[g],O[g]=w&&typeof P[g]!="function"?f[g]:x&&v?a(S,n):y&&P[g]==S?function(L){var M=function(B,j,F){if(this instanceof L){switch(arguments.length){case 0:return new L;case 1:return new L(B);case 2:return new L(B,j)}return new L(B,j,F)}return L.apply(this,arguments)};return M.prototype=L.prototype,M}(S):b&&typeof S=="function"?a(Function.call,S):S,b&&((O.virtual||(O.virtual={}))[g]=S,h&l.R&&k&&!k[g]&&c(k,g,S)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,s.exports=l},function(s,e,r){var n=r(4),o=r(15);s.exports=r(5)?function(a,c,l){return n.f(a,c,o(1,l))}:function(a,c,l){return a[c]=l,a}},function(s,e,r){var n=r(18)("wks"),o=r(14),a=r(2).Symbol,c=typeof a=="function";(s.exports=function(l){return n[l]||(n[l]=c&&a[l]||(c?a:o)("Symbol."+l))}).store=n},function(s,e,r){var n=r(11);s.exports=function(o){if(!n(o))throw TypeError(o+" is not an object!");return o}},function(s,e){s.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},function(s,e){s.exports=function(r){try{return!!r()}catch{return!0}}},function(s,e,r){function n(a,c){var l=c&&c.loc,h=void 0,d=void 0;l&&(h=l.start.line,d=l.start.column,a+=" - "+h+":"+d);for(var f=Error.prototype.constructor.call(this,a),g=0;g<o.length;g++)this[o[g]]=f[o[g]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{l&&(this.lineNumber=h,Object.defineProperty?Object.defineProperty(this,"column",{value:d,enumerable:!0}):this.column=d)}catch{}}e.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,s.exports=e.default},function(s,e){var r=0,n=Math.random();s.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++r+n).toString(36))}},function(s,e){s.exports=function(r,n){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:n}}},function(s,e){s.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}},function(s,e,r){var n=r(18)("keys"),o=r(14);s.exports=function(a){return n[a]||(n[a]=o(a))}},function(s,e,r){var n=r(2),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});s.exports=function(a){return o[a]||(o[a]={})}},function(s,e,r){var n=r(11);s.exports=function(o,a){if(!n(o))return o;var c,l;if(a&&typeof(c=o.toString)=="function"&&!n(l=c.call(o))||typeof(c=o.valueOf)=="function"&&!n(l=c.call(o))||!a&&typeof(c=o.toString)=="function"&&!n(l=c.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(s,e,r){function n(d){return d&&d.__esModule?d:{default:d}}e.__esModule=!0;var o=r(57),a=n(o),c=r(72),l=n(c),h=typeof l.default=="function"&&typeof a.default=="symbol"?function(d){return typeof d}:function(d){return d&&typeof l.default=="function"&&d.constructor===l.default&&d!==l.default.prototype?"symbol":typeof d};e.default=typeof l.default=="function"&&h(a.default)==="symbol"?function(d){return d===void 0?"undefined":h(d)}:function(d){return d&&typeof l.default=="function"&&d.constructor===l.default&&d!==l.default.prototype?"symbol":d===void 0?"undefined":h(d)}},function(s,e){var r=Math.ceil,n=Math.floor;s.exports=function(o){return isNaN(o=+o)?0:(o>0?n:r)(o)}},function(s,e){s.exports=!0},function(s,e){s.exports={}},function(s,e,r){var n=r(10),o=r(62),a=r(26),c=r(17)("IE_PROTO"),l=function(){},h=function(){var d,f=r(38)("iframe"),g=a.length;for(f.style.display="none",r(67).appendChild(f),f.src="javascript:",d=f.contentWindow.document,d.open(),d.write("<script>document.F=Object<\/script>"),d.close(),h=d.F;g--;)delete h.prototype[a[g]];return h()};s.exports=Object.create||function(d,f){var g;return d!==null?(l.prototype=n(d),g=new l,l.prototype=null,g[c]=d):g=h(),f===void 0?g:o(g,f)}},function(s,e,r){var n=r(41),o=r(26);s.exports=Object.keys||function(a){return n(a,o)}},function(s,e){s.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(s,e,r){var n=r(4).f,o=r(3),a=r(9)("toStringTag");s.exports=function(c,l,h){c&&!o(c=h?c:c.prototype,a)&&n(c,a,{configurable:!0,value:l})}},function(s,e,r){e.f=r(9)},function(s,e,r){var n=r(2),o=r(0),a=r(22),c=r(28),l=r(4).f;s.exports=function(h){var d=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});h.charAt(0)=="_"||h in d||l(d,h,{value:c.f(h)})}},function(s,e){e.f={}.propertyIsEnumerable},function(s,e,r){var n=r(30),o=r(15),a=r(6),c=r(19),l=r(3),h=r(37),d=Object.getOwnPropertyDescriptor;e.f=r(5)?d:function(f,g){if(f=a(f),g=c(g,!0),h)try{return d(f,g)}catch{}if(l(f,g))return o(!n.f.call(f,g),f[g])}},function(s,e,r){s.exports={default:r(48),__esModule:!0}},function(s,e,r){var n=r(16);s.exports=function(o){return Object(n(o))}},function(s,e,r){var n=r(3),o=r(33),a=r(17)("IE_PROTO"),c=Object.prototype;s.exports=Object.getPrototypeOf||function(l){return l=o(l),n(l,a)?l[a]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?c:null}},function(s,e,r){var n=r(7),o=r(0),a=r(12);s.exports=function(c,l){var h=(o.Object||{})[c]||Object[c],d={};d[c]=l(h),n(n.S+n.F*a(function(){h(1)}),"Object",d)}},function(s,e,r){var n=r(50);s.exports=function(o,a,c){if(n(o),a===void 0)return o;switch(c){case 1:return function(l){return o.call(a,l)};case 2:return function(l,h){return o.call(a,l,h)};case 3:return function(l,h,d){return o.call(a,l,h,d)}}return function(){return o.apply(a,arguments)}}},function(s,e,r){s.exports=!r(5)&&!r(12)(function(){return Object.defineProperty(r(38)("div"),"a",{get:function(){return 7}}).a!=7})},function(s,e,r){var n=r(11),o=r(2).document,a=n(o)&&n(o.createElement);s.exports=function(c){return a?o.createElement(c):{}}},function(s,e,r){var n=r(22),o=r(7),a=r(40),c=r(8),l=r(3),h=r(23),d=r(61),f=r(27),g=r(34),v=r(9)("iterator"),S=!([].keys&&"next"in[].keys()),A=function(){return this};s.exports=function(w,m,b,x,y,O,k){d(b,m,x);var P,L,M,B=function(Y){if(!S&&Y in V)return V[Y];switch(Y){case"keys":case"values":return function(){return new b(this,Y)}}return function(){return new b(this,Y)}},j=m+" Iterator",F=y=="values",U=!1,V=w.prototype,Q=V[v]||V["@@iterator"]||y&&V[y],q=Q||B(y),G=y?F?B("entries"):q:void 0,te=m=="Array"&&V.entries||Q;if(te&&(M=g(te.call(new w)))!==Object.prototype&&M.next&&(f(M,j,!0),n||l(M,v)||c(M,v,A)),F&&Q&&Q.name!=="values"&&(U=!0,q=function(){return Q.call(this)}),n&&!k||!S&&!U&&V[v]||c(V,v,q),h[m]=q,h[j]=A,y)if(P={values:F?q:B("values"),keys:O?q:B("keys"),entries:G},k)for(L in P)L in V||a(V,L,P[L]);else o(o.P+o.F*(S||U),m,P);return P}},function(s,e,r){s.exports=r(8)},function(s,e,r){var n=r(3),o=r(6),a=r(64)(!1),c=r(17)("IE_PROTO");s.exports=function(l,h){var d,f=o(l),g=0,v=[];for(d in f)d!=c&&n(f,d)&&v.push(d);for(;h.length>g;)n(f,d=h[g++])&&(~a(v,d)||v.push(d));return v}},function(s,e){var r={}.toString;s.exports=function(n){return r.call(n).slice(8,-1)}},function(s,e){e.f=Object.getOwnPropertySymbols},function(s,e,r){var n=r(41),o=r(26).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(a){return n(a,o)}},function(s,e,r){var n=r(98);s.exports=(n.default||n).template({1:function(o,a,c,l,h){var d,f,g=a??(o.nullContext||{}),v=c.helperMissing,S=o.escapeExpression;return`        <li>
            <a href="http://caniuse.com/#search=`+S((f=(f=c.key||h&&h.key)!=null?f:v,typeof f=="function"?f.call(g,{name:"key",hash:{},data:h}):f))+'" target="_blank" class="eruda-inner-wrapper '+((d=c.if.call(g,a,{name:"if",hash:{},fn:o.program(2,h,0),inverse:o.noop,data:h}))!=null?d:"")+`">
                `+S((f=(f=c.key||h&&h.key)!=null?f:v,typeof f=="function"?f.call(g,{name:"key",hash:{},data:h}):f))+`
            </a>
        </li>
`},2:function(o,a,c,l,h){return"eruda-ok"},compiler:[7,">= 4.0.0"],main:function(o,a,c,l,h){var d;return`<ul>
`+((d=c.each.call(a??(o.nullContext||{}),a!=null?a.features:a,{name:"each",hash:{},fn:o.program(1,h,0),inverse:o.noop,data:h}))!=null?d:"")+`</ul>
<a class="eruda-html5test" target="_blank" href="http://html5test.com">Go to HTML5 Test</a>`},useData:!0})},function(s,e,r){function n(A){return A&&A.__esModule?A:{default:A}}function o(A,w,m){this.helpers=A||{},this.partials=w||{},this.decorators=m||{},h.registerDefaultHelpers(this),d.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=o;var a=r(1),c=r(13),l=n(c),h=r(100),d=r(108),f=r(110),g=n(f);e.VERSION="4.0.11",e.COMPILER_REVISION=7;var v={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=v,o.prototype={constructor:o,logger:g.default,log:g.default.log,registerHelper:function(A,w){if(a.toString.call(A)==="[object Object]"){if(w)throw new l.default("Arg not supported with multiple helpers");a.extend(this.helpers,A)}else this.helpers[A]=w},unregisterHelper:function(A){delete this.helpers[A]},registerPartial:function(A,w){if(a.toString.call(A)==="[object Object]")a.extend(this.partials,A);else{if(w===void 0)throw new l.default('Attempting to register a partial called "'+A+'" as undefined');this.partials[A]=w}},unregisterPartial:function(A){delete this.partials[A]},registerDecorator:function(A,w){if(a.toString.call(A)==="[object Object]"){if(w)throw new l.default("Arg not supported with multiple decorators");a.extend(this.decorators,A)}else this.decorators[A]=w},unregisterDecorator:function(A){delete this.decorators[A]}};var S=g.default.log;e.log=S,e.createFrame=a.createFrame,e.logger=g.default},function(s,e,r){function n(k){return k&&k.__esModule?k:{default:k}}var o=r(32),a=n(o),c=r(51),l=n(c),h=r(52),d=n(h),f=r(56),g=n(f),v=r(82),S=n(v),A=r(86),w=n(A),m=r(94),b=n(m),x=r(95),y=x["feature-detects"],O=x["special-names"];s.exports=function(k){var P=k.util.evalCss;return new(function(L){function M(){(0,l.default)(this,M);var B=(0,g.default)(this,(M.__proto__||(0,a.default)(M)).call(this));return B.name="features",B._style=P(r(96)),B._tpl=r(45),B._features={},B._isInit=!1,B}return(0,w.default)(M,L),(0,d.default)(M,[{key:"init",value:function(B,j){(0,S.default)(M.prototype.__proto__||(0,a.default)(M.prototype),"init",this).call(this,B,j),B.html(r(45)())}},{key:"show",value:function(){(0,S.default)(M.prototype.__proto__||(0,a.default)(M.prototype),"show",this).call(this),this._isInit||this._initFeatures()}},{key:"hide",value:function(){(0,S.default)(M.prototype.__proto__||(0,a.default)(M.prototype),"hide",this).call(this)}},{key:"destroy",value:function(){(0,S.default)(M.prototype.__proto__||(0,a.default)(M.prototype),"destroy",this).call(this),P.remove(this._style)}},{key:"_initFeatures",value:function(){var B=this;this._isInit=!0,b.default.testRunner();var j=0,F=y.length;y.forEach(function(U){O[U]&&(U=O[U]),U=U.replace(/\//g,""),b.default.on(U,function(V){B._features[U]=V,++j===F&&B._render()})})}},{key:"_render",value:function(){this._$el.html(this._tpl({features:this._features}))}}]),M}(k.Tool))}},function(s,e,r){r(49),s.exports=r(0).Object.getPrototypeOf},function(s,e,r){var n=r(33),o=r(34);r(35)("getPrototypeOf",function(){return function(a){return o(n(a))}})},function(s,e){s.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}},function(s,e,r){e.__esModule=!0,e.default=function(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}},function(s,e,r){e.__esModule=!0;var n=r(53),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(){function a(c,l){for(var h=0;h<l.length;h++){var d=l[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,o.default)(c,d.key,d)}}return function(c,l,h){return l&&a(c.prototype,l),h&&a(c,h),c}}()},function(s,e,r){s.exports={default:r(54),__esModule:!0}},function(s,e,r){r(55);var n=r(0).Object;s.exports=function(o,a,c){return n.defineProperty(o,a,c)}},function(s,e,r){var n=r(7);n(n.S+n.F*!r(5),"Object",{defineProperty:r(4).f})},function(s,e,r){e.__esModule=!0;var n=r(20),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||(c===void 0?"undefined":(0,o.default)(c))!=="object"&&typeof c!="function"?a:c}},function(s,e,r){s.exports={default:r(58),__esModule:!0}},function(s,e,r){r(59),r(68),s.exports=r(28).f("iterator")},function(s,e,r){var n=r(60)(!0);r(39)(String,"String",function(o){this._t=String(o),this._i=0},function(){var o,a=this._t,c=this._i;return c>=a.length?{value:void 0,done:!0}:(o=n(a,c),this._i+=o.length,{value:o,done:!1})})},function(s,e,r){var n=r(21),o=r(16);s.exports=function(a){return function(c,l){var h,d,f=String(o(c)),g=n(l),v=f.length;return g<0||g>=v?a?"":void 0:(h=f.charCodeAt(g),h<55296||h>56319||g+1===v||(d=f.charCodeAt(g+1))<56320||d>57343?a?f.charAt(g):h:a?f.slice(g,g+2):d-56320+(h-55296<<10)+65536)}}},function(s,e,r){var n=r(24),o=r(15),a=r(27),c={};r(8)(c,r(9)("iterator"),function(){return this}),s.exports=function(l,h,d){l.prototype=n(c,{next:o(1,d)}),a(l,h+" Iterator")}},function(s,e,r){var n=r(4),o=r(10),a=r(25);s.exports=r(5)?Object.defineProperties:function(c,l){o(c);for(var h,d=a(l),f=d.length,g=0;f>g;)n.f(c,h=d[g++],l[h]);return c}},function(s,e,r){var n=r(42);s.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return n(o)=="String"?o.split(""):Object(o)}},function(s,e,r){var n=r(6),o=r(65),a=r(66);s.exports=function(c){return function(l,h,d){var f,g=n(l),v=o(g.length),S=a(d,v);if(c&&h!=h){for(;v>S;)if((f=g[S++])!=f)return!0}else for(;v>S;S++)if((c||S in g)&&g[S]===h)return c||S||0;return!c&&-1}}},function(s,e,r){var n=r(21),o=Math.min;s.exports=function(a){return a>0?o(n(a),9007199254740991):0}},function(s,e,r){var n=r(21),o=Math.max,a=Math.min;s.exports=function(c,l){return c=n(c),c<0?o(c+l,0):a(c,l)}},function(s,e,r){var n=r(2).document;s.exports=n&&n.documentElement},function(s,e,r){r(69);for(var n=r(2),o=r(8),a=r(23),c=r(9)("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),h=0;h<l.length;h++){var d=l[h],f=n[d],g=f&&f.prototype;g&&!g[c]&&o(g,c,d),a[d]=a.Array}},function(s,e,r){var n=r(70),o=r(71),a=r(23),c=r(6);s.exports=r(39)(Array,"Array",function(l,h){this._t=c(l),this._i=0,this._k=h},function(){var l=this._t,h=this._k,d=this._i++;return!l||d>=l.length?(this._t=void 0,o(1)):h=="keys"?o(0,d):h=="values"?o(0,l[d]):o(0,[d,l[d]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(s,e){s.exports=function(){}},function(s,e){s.exports=function(r,n){return{value:n,done:!!r}}},function(s,e,r){s.exports={default:r(73),__esModule:!0}},function(s,e,r){r(74),r(79),r(80),r(81),s.exports=r(0).Symbol},function(s,e,r){var n=r(2),o=r(3),a=r(5),c=r(7),l=r(40),h=r(75).KEY,d=r(12),f=r(18),g=r(27),v=r(14),S=r(9),A=r(28),w=r(29),m=r(76),b=r(77),x=r(10),y=r(6),O=r(19),k=r(15),P=r(24),L=r(78),M=r(31),B=r(4),j=r(25),F=M.f,U=B.f,V=L.f,Q=n.Symbol,q=n.JSON,G=q&&q.stringify,te=S("_hidden"),Y=S("toPrimitive"),J={}.propertyIsEnumerable,K=f("symbol-registry"),ne=f("symbols"),de=f("op-symbols"),Re=Object.prototype,Te=typeof Q=="function",Me=n.QObject,Ie=!Me||!Me.prototype||!Me.prototype.findChild,ce=a&&d(function(){return P(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a!=7})?function(Se,Ye,Le){var ze=F(Re,Ye);ze&&delete Re[Ye],U(Se,Ye,Le),ze&&Se!==Re&&U(Re,Ye,ze)}:U,pe=function(Se){var Ye=ne[Se]=P(Q.prototype);return Ye._k=Se,Ye},me=Te&&typeof Q.iterator=="symbol"?function(Se){return typeof Se=="symbol"}:function(Se){return Se instanceof Q},we=function(Se,Ye,Le){return Se===Re&&we(de,Ye,Le),x(Se),Ye=O(Ye,!0),x(Le),o(ne,Ye)?(Le.enumerable?(o(Se,te)&&Se[te][Ye]&&(Se[te][Ye]=!1),Le=P(Le,{enumerable:k(0,!1)})):(o(Se,te)||U(Se,te,k(1,{})),Se[te][Ye]=!0),ce(Se,Ye,Le)):U(Se,Ye,Le)},Xe=function(Se,Ye){x(Se);for(var Le,ze=m(Ye=y(Ye)),Ue=0,Ge=ze.length;Ge>Ue;)we(Se,Le=ze[Ue++],Ye[Le]);return Se},Qe=function(Se,Ye){return Ye===void 0?P(Se):Xe(P(Se),Ye)},Pe=function(Se){var Ye=J.call(this,Se=O(Se,!0));return!(this===Re&&o(ne,Se)&&!o(de,Se))&&(!(Ye||!o(this,Se)||!o(ne,Se)||o(this,te)&&this[te][Se])||Ye)},Ze=function(Se,Ye){if(Se=y(Se),Ye=O(Ye,!0),Se!==Re||!o(ne,Ye)||o(de,Ye)){var Le=F(Se,Ye);return!Le||!o(ne,Ye)||o(Se,te)&&Se[te][Ye]||(Le.enumerable=!0),Le}},_e=function(Se){for(var Ye,Le=V(y(Se)),ze=[],Ue=0;Le.length>Ue;)o(ne,Ye=Le[Ue++])||Ye==te||Ye==h||ze.push(Ye);return ze},qe=function(Se){for(var Ye,Le=Se===Re,ze=V(Le?de:y(Se)),Ue=[],Ge=0;ze.length>Ge;)!o(ne,Ye=ze[Ge++])||Le&&!o(Re,Ye)||Ue.push(ne[Ye]);return Ue};Te||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor!");var Se=v(arguments.length>0?arguments[0]:void 0),Ye=function(Le){this===Re&&Ye.call(de,Le),o(this,te)&&o(this[te],Se)&&(this[te][Se]=!1),ce(this,Se,k(1,Le))};return a&&Ie&&ce(Re,Se,{configurable:!0,set:Ye}),pe(Se)},l(Q.prototype,"toString",function(){return this._k}),M.f=Ze,B.f=we,r(44).f=L.f=_e,r(30).f=Pe,r(43).f=qe,a&&!r(22)&&l(Re,"propertyIsEnumerable",Pe,!0),A.f=function(Se){return pe(S(Se))}),c(c.G+c.W+c.F*!Te,{Symbol:Q});for(var Be="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),mt=0;Be.length>mt;)S(Be[mt++]);for(var ht=j(S.store),Dt=0;ht.length>Dt;)w(ht[Dt++]);c(c.S+c.F*!Te,"Symbol",{for:function(Se){return o(K,Se+="")?K[Se]:K[Se]=Q(Se)},keyFor:function(Se){if(!me(Se))throw TypeError(Se+" is not a symbol!");for(var Ye in K)if(K[Ye]===Se)return Ye},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),c(c.S+c.F*!Te,"Object",{create:Qe,defineProperty:we,defineProperties:Xe,getOwnPropertyDescriptor:Ze,getOwnPropertyNames:_e,getOwnPropertySymbols:qe}),q&&c(c.S+c.F*(!Te||d(function(){var Se=Q();return G([Se])!="[null]"||G({a:Se})!="{}"||G(Object(Se))!="{}"})),"JSON",{stringify:function(Se){if(Se!==void 0&&!me(Se)){for(var Ye,Le,ze=[Se],Ue=1;arguments.length>Ue;)ze.push(arguments[Ue++]);return Ye=ze[1],typeof Ye=="function"&&(Le=Ye),!Le&&b(Ye)||(Ye=function(Ge,ut){if(Le&&(ut=Le.call(this,Ge,ut)),!me(ut))return ut}),ze[1]=Ye,G.apply(q,ze)}}}),Q.prototype[Y]||r(8)(Q.prototype,Y,Q.prototype.valueOf),g(Q,"Symbol"),g(Math,"Math",!0),g(n.JSON,"JSON",!0)},function(s,e,r){var n=r(14)("meta"),o=r(11),a=r(3),c=r(4).f,l=0,h=Object.isExtensible||function(){return!0},d=!r(12)(function(){return h(Object.preventExtensions({}))}),f=function(w){c(w,n,{value:{i:"O"+ ++l,w:{}}})},g=function(w,m){if(!o(w))return typeof w=="symbol"?w:(typeof w=="string"?"S":"P")+w;if(!a(w,n)){if(!h(w))return"F";if(!m)return"E";f(w)}return w[n].i},v=function(w,m){if(!a(w,n)){if(!h(w))return!0;if(!m)return!1;f(w)}return w[n].w},S=function(w){return d&&A.NEED&&h(w)&&!a(w,n)&&f(w),w},A=s.exports={KEY:n,NEED:!1,fastKey:g,getWeak:v,onFreeze:S}},function(s,e,r){var n=r(25),o=r(43),a=r(30);s.exports=function(c){var l=n(c),h=o.f;if(h)for(var d,f=h(c),g=a.f,v=0;f.length>v;)g.call(c,d=f[v++])&&l.push(d);return l}},function(s,e,r){var n=r(42);s.exports=Array.isArray||function(o){return n(o)=="Array"}},function(s,e,r){var n=r(6),o=r(44).f,a={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(h){try{return o(h)}catch{return c.slice()}};s.exports.f=function(h){return c&&a.call(h)=="[object Window]"?l(h):o(n(h))}},function(s,e){},function(s,e,r){r(29)("asyncIterator")},function(s,e,r){r(29)("observable")},function(s,e,r){function n(h){return h&&h.__esModule?h:{default:h}}e.__esModule=!0;var o=r(32),a=n(o),c=r(83),l=n(c);e.default=function h(d,f,g){d===null&&(d=Function.prototype);var v=(0,l.default)(d,f);if(v===void 0){var S=(0,a.default)(d);return S===null?void 0:h(S,f,g)}if("value"in v)return v.value;var A=v.get;if(A!==void 0)return A.call(g)}},function(s,e,r){s.exports={default:r(84),__esModule:!0}},function(s,e,r){r(85);var n=r(0).Object;s.exports=function(o,a){return n.getOwnPropertyDescriptor(o,a)}},function(s,e,r){var n=r(6),o=r(31).f;r(35)("getOwnPropertyDescriptor",function(){return function(a,c){return o(n(a),c)}})},function(s,e,r){function n(f){return f&&f.__esModule?f:{default:f}}e.__esModule=!0;var o=r(87),a=n(o),c=r(91),l=n(c),h=r(20),d=n(h);e.default=function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+(g===void 0?"undefined":(0,d.default)(g)));f.prototype=(0,l.default)(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(a.default?(0,a.default)(f,g):f.__proto__=g)}},function(s,e,r){s.exports={default:r(88),__esModule:!0}},function(s,e,r){r(89),s.exports=r(0).Object.setPrototypeOf},function(s,e,r){var n=r(7);n(n.S,"Object",{setPrototypeOf:r(90).set})},function(s,e,r){var n=r(11),o=r(10),a=function(c,l){if(o(c),!n(l)&&l!==null)throw TypeError(l+": can't set as prototype!")};s.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(c,l,h){try{h=r(36)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),h(c,[]),l=!(c instanceof Array)}catch{l=!0}return function(d,f){return a(d,f),l?d.__proto__=f:h(d,f),d}}({},!1):void 0),check:a}},function(s,e,r){s.exports={default:r(92),__esModule:!0}},function(s,e,r){r(93);var n=r(0).Object;s.exports=function(o,a){return n.create(o,a)}},function(s,e,r){var n=r(7);n(n.S,"Object",{create:r(24)})},function(module,exports,__webpack_require__){function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function is(s,e){return(s===void 0?"undefined":(0,_typeof3.default)(s))===e}function testRunner(){var s,e,r,n,o,a,c;for(var l in tests)if(tests.hasOwnProperty(l)){if(s=[],e=tests[l],e.name&&(s.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(r=0;r<e.options.aliases.length;r++)s.push(e.options.aliases[r].toLowerCase());for(n=is(e.fn,"function")?e.fn():e.fn,o=0;o<s.length;o++)a=s[o],c=a.split("."),c.length===1?Modernizr[c[0]]=n:(!Modernizr[c[0]]||Modernizr[c[0]]instanceof Boolean||(Modernizr[c[0]]=new Boolean(Modernizr[c[0]])),Modernizr[c[0]][c[1]]=n),classes.push((n?"":"no-")+c.join("-"))}}function createElement(){return typeof document.createElement!="function"?document.createElement(arguments[0]):isSVG?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}function contains(s,e){return!!~(""+s).indexOf(e)}function getBody(){var s=document.body;return s||(s=createElement(isSVG?"svg":"body"),s.fake=!0),s}function injectElementWithStyles(s,e,r,n){var o,a,c,l,h="modernizr",d=createElement("div"),f=getBody();if(parseInt(r,10))for(;r--;)c=createElement("div"),c.id=n?n[r]:h+(r+1),d.appendChild(c);return o=createElement("style"),o.type="text/css",o.id="s"+h,(f.fake?f:d).appendChild(o),f.appendChild(d),o.styleSheet?o.styleSheet.cssText=s:o.appendChild(document.createTextNode(s)),d.id=h,f.fake&&(f.style.background="",f.style.overflow="hidden",l=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(f)),a=e(d,s),f.fake?(f.parentNode.removeChild(f),docElement.style.overflow=l,docElement.offsetHeight):d.parentNode.removeChild(d),!!a}function domToCSS(s){return s.replace(/([A-Z])/g,function(e,r){return"-"+r.toLowerCase()}).replace(/^ms-/,"-ms-")}function computedStyle(s,e,r){var n;if("getComputedStyle"in window){n=getComputedStyle.call(window,s,e);var o=window.console;if(n!==null)r&&(n=n.getPropertyValue(r));else if(o){var a=o.error?"error":"log";o[a].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else n=!e&&s.currentStyle&&s.currentStyle[r];return n}function nativeTestProps(s,e){var r=s.length;if("CSS"in window&&"supports"in window.CSS){for(;r--;)if(window.CSS.supports(domToCSS(s[r]),e))return!0;return!1}if("CSSSupportsRule"in window){for(var n=[];r--;)n.push("("+domToCSS(s[r])+":"+e+")");return n=n.join(" or "),injectElementWithStyles("@supports ("+n+") { #modernizr { position: absolute; } }",function(o){return computedStyle(o,null,"position")=="absolute"})}}function cssToDOM(s){return s.replace(/([a-z])-([a-z])/g,function(e,r,n){return r+n.toUpperCase()}).replace(/^-/,"")}function testProps(s,e,r,n){function o(){c&&(delete mStyle.style,delete mStyle.modElem)}if(n=!is(n,"undefined")&&n,!is(r,"undefined")){var a=nativeTestProps(s,r);if(!is(a,"undefined"))return a}for(var c,l,h,d,f,g=["modernizr","tspan","samp"];!mStyle.style&&g.length;)c=!0,mStyle.modElem=createElement(g.shift()),mStyle.style=mStyle.modElem.style;for(h=s.length,l=0;l<h;l++)if(d=s[l],f=mStyle.style[d],contains(d,"-")&&(d=cssToDOM(d)),mStyle.style[d]!==void 0){if(n||is(r,"undefined"))return o(),e!="pfx"||d;try{mStyle.style[d]=r}catch{}if(mStyle.style[d]!=f)return o(),e!="pfx"||d}return o(),!1}function fnBind(s,e){return function(){return s.apply(e,arguments)}}function testDOMProps(s,e,r){var n;for(var o in s)if(s[o]in e)return r===!1?s[o]:(n=e[s[o]],is(n,"function")?fnBind(n,r||e):n);return!1}function testPropsAll(s,e,r,n,o){var a=s.charAt(0).toUpperCase()+s.slice(1),c=(s+" "+cssomPrefixes.join(a+" ")+a).split(" ");return is(e,"string")||is(e,"undefined")?testProps(c,e,n,o):(c=(s+" "+domPrefixes.join(a+" ")+a).split(" "),testDOMProps(c,e,r))}function testAllProps(s,e,r){return testPropsAll(s,void 0,void 0,e,r)}function setClasses(s){var e=docElement.className,r=Modernizr._config.classPrefix||"";if(isSVG&&(e=e.baseVal),Modernizr._config.enableJSClass){var n=new RegExp("(^|\\s)"+r+"no-js(\\s|$)");e=e.replace(n,"$1"+r+"js$2")}Modernizr._config.enableClasses&&(e+=" "+r+s.join(" "+r),isSVG?docElement.className.baseVal=e:docElement.className=e)}function addTest(s,e){if((s===void 0?"undefined":(0,_typeof3.default)(s))=="object")for(var r in s)hasOwnProp(s,r)&&addTest(r,s[r]);else{s=s.toLowerCase();var n=s.split("."),o=Modernizr[n[0]];if(n.length==2&&(o=o[n[1]]),o!==void 0)return Modernizr;e=typeof e=="function"?e():e,n.length==1?Modernizr[n[0]]=e:(!Modernizr[n[0]]||Modernizr[n[0]]instanceof Boolean||(Modernizr[n[0]]=new Boolean(Modernizr[n[0]])),Modernizr[n[0]][n[1]]=e),setClasses([(e&&e!=0?"":"no-")+n.join("-")]),Modernizr._trigger(s,e)}return Modernizr}function detectDeleteDatabase(s,e){var r=s.deleteDatabase(e);r.onsuccess=function(){addTest("indexeddb.deletedatabase",!0)},r.onerror=function(){addTest("indexeddb.deletedatabase",!1)}}var _typeof2=__webpack_require__(20),_typeof3=_interopRequireDefault(_typeof2),tests=[],ModernizrProto={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!1,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(s,e){var r=this;setTimeout(function(){e(r[s])},0)},addTest:function(s,e,r){tests.push({name:s,fn:e,options:r})},addAsyncTest:function(s){tests.push({name:null,fn:s})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var classes=[],docElement=document.documentElement,isSVG=docElement.nodeName.toLowerCase()==="svg";/*!
{
  "name" : "HTML5 Audio Element",
  "property": "audio",
  "tags" : ["html5", "audio", "media"]
}
!*/Modernizr.addTest("audio",function(){var s=createElement("audio"),e=!1;try{e=!!s.canPlayType,e&&(e=new Boolean(e),e.ogg=s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),e.mp3=s.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,""),e.opus=s.canPlayType('audio/ogg; codecs="opus"')||s.canPlayType('audio/webm; codecs="opus"').replace(/^no$/,""),e.wav=s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e.m4a=(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""))}catch{}return e}),Modernizr.addTest("canvas",function(){var s=createElement("canvas");return!(!s.getContext||!s.getContext("2d"))}),Modernizr.addTest("cookies",function(){try{document.cookie="cookietest=1";var s=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",s}catch{return!1}});var omPrefixes="Moz O ms Webkit",cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];ModernizrProto._cssomPrefixes=cssomPrefixes;var modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style});var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];ModernizrProto._domPrefixes=domPrefixes,ModernizrProto.testAllProps=testPropsAll,ModernizrProto.testAllProps=testAllProps,Modernizr.addTest("cssanimations",testAllProps("animationName","a",!0)),Modernizr.addTest("boxshadow",testAllProps("boxShadow","1px 1px",!0)),Modernizr.addTest("boxsizing",testAllProps("boxSizing","border-box",!0)&&(document.documentMode===void 0||document.documentMode>7));var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];ModernizrProto._prefixes=prefixes,Modernizr.addTest("csscalc",function(){var s=createElement("a");return s.style.cssText="width:"+prefixes.join("calc(10px);width:"),!!s.style.length}),Modernizr.addTest("flexbox",testAllProps("flexBasis","1px",!0)),Modernizr.addTest("csstransforms",function(){return navigator.userAgent.indexOf("Android 2.")===-1&&testAllProps("transform","scale(1)",!0)});var testStyles=ModernizrProto.testStyles=injectElementWithStyles,newSyntax="CSS"in window&&"supports"in window.CSS,oldSyntax="supportsCSS"in window;Modernizr.addTest("supports",newSyntax||oldSyntax),Modernizr.addTest("csstransforms3d",function(){var s=!!testAllProps("perspective","1px",!0),e=Modernizr._config.usePrefixes;if(s&&(!e||"webkitPerspective"in docElement.style)){var r;Modernizr.supports?r="@supports (perspective: 1px)":(r="@media (transform-3d)",e&&(r+=",(-webkit-transform-3d)")),r+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",testStyles("#modernizr{width:0;height:0}"+r,function(n){s=n.offsetWidth===7&&n.offsetHeight===18})}return s}),Modernizr.addTest("csstransitions",testAllProps("transition","all",!0)),Modernizr.addTest("promises",function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var s;return new window.Promise(function(e){s=e}),typeof s=="function"}()}),Modernizr.addTest("filereader",!!(window.File&&window.FileList&&window.FileReader));var atRule=function(s){var e,r=prefixes.length,n=window.CSSRule;if(n!==void 0){if(!s)return!1;if(s=s.replace(/^@/,""),(e=s.replace(/-/g,"_").toUpperCase()+"_RULE")in n)return"@"+s;for(var o=0;o<r;o++){var a=prefixes[o];if(a.toUpperCase()+"_"+e in n)return"@-"+a.toLowerCase()+"-"+s}return!1}};ModernizrProto.atRule=atRule;var prefixed=ModernizrProto.prefixed=function(s,e,r){return s.indexOf("@")===0?atRule(s):(s.indexOf("-")!=-1&&(s=cssToDOM(s)),e?testPropsAll(s,e,r):testPropsAll(s,"pfx"))};/*!
{
  "name": "Filesystem API",
  "property": "filesystem",
  "caniuse": "filesystem",
  "notes": [{
    "name": "W3 Draft",
    "href": "http://dev.w3.org/2009/dap/file-system/file-dir-sys.html"
  }],
  "authors": ["Eric Bidelman (@ebidel)"],
  "tags": ["file"],
  "builderAliases": ["file_filesystem"],
  "knownBugs": ["The API will be present in Chrome incognito, but will throw an exception. See crbug.com/93417"]
}
!*/Modernizr.addTest("filesystem",!!prefixed("requestFileSystem",window)),Modernizr.addTest("placeholder","placeholder"in createElement("input")&&"placeholder"in createElement("textarea")),Modernizr.addTest("fullscreen",!(!prefixed("exitFullscreen",document,!1)&&!prefixed("cancelFullScreen",document,!1))),Modernizr.addTest("geolocation","geolocation"in navigator);var hasEvent=function(){function s(r,n){var o;return!!r&&(n&&typeof n!="string"||(n=createElement(n||"div")),r="on"+r,o=r in n,!o&&e&&(n.setAttribute||(n=createElement("div")),n.setAttribute(r,""),o=typeof n[r]=="function",n[r]!==void 0&&(n[r]=void 0),n.removeAttribute(r)),o)}var e=!("onblur"in document.documentElement);return s}();ModernizrProto.hasEvent=hasEvent,Modernizr.addTest("hashchange",function(){return hasEvent("hashchange",window)!==!1&&(document.documentMode===void 0||document.documentMode>7)}),Modernizr.addTest("history",function(){var s=navigator.userAgent;return(s.indexOf("Android 2.")===-1&&s.indexOf("Android 4.0")===-1||s.indexOf("Mobile Safari")===-1||s.indexOf("Chrome")!==-1||s.indexOf("Windows Phone")!==-1||location.protocol==="file:")&&window.history&&"pushState"in window.history});var hasOwnProp;(function(){var s={}.hasOwnProperty;hasOwnProp=is(s,"undefined")||is(s.call,"undefined")?function(e,r){return r in e&&is(e.constructor.prototype[r],"undefined")}:function(e,r){return s.call(e,r)}})(),ModernizrProto._l={},ModernizrProto.on=function(s,e){this._l[s]||(this._l[s]=[]),this._l[s].push(e),Modernizr.hasOwnProperty(s)&&setTimeout(function(){Modernizr._trigger(s,Modernizr[s])},0)},ModernizrProto._trigger=function(s,e){if(this._l[s]){var r=this._l[s];setTimeout(function(){var n;for(n=0;n<r.length;n++)(0,r[n])(e)},0),delete this._l[s]}},Modernizr._q.push(function(){ModernizrProto.addTest=addTest}),Modernizr.addAsyncTest(function(){function s(n,o,a){function c(h){var d=!(!h||h.type!=="load")&&l.width==1;addTest(n,n==="webp"&&d?new Boolean(d):d),a&&a(h)}var l=new Image;l.onerror=c,l.onload=c,l.src=o}var e=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],r=e.shift();s(r.name,r.uri,function(n){if(n&&n.type==="load")for(var o=0;o<e.length;o++)s(e[o].name,e[o].uri)})}),Modernizr.addAsyncTest(function(){var s=new Image;s.onerror=function(){addTest("webpalpha",!1)},s.onload=function(){addTest("webpalpha",s.width==1)},s.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="}),Modernizr.addAsyncTest(function(){var s;try{s=prefixed("indexedDB",window)}catch{}if(s){var e="modernizr-"+Math.random(),r=s.open(e);r.onerror=function(){r.error&&r.error.name==="InvalidStateError"?addTest("indexeddb",!1):(addTest("indexeddb",!0),detectDeleteDatabase(s,e))},r.onsuccess=function(){addTest("indexeddb",!0),detectDeleteDatabase(s,e)}}else addTest("indexeddb",!1)}),Modernizr.addTest("json","JSON"in window&&"parse"in JSON&&"stringify"in JSON),Modernizr.addTest("fetch","fetch"in window),Modernizr.addTest("xhr2","XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest),Modernizr.addTest("notification",function(){if(!window.Notification||!window.Notification.requestPermission)return!1;if(window.Notification.permission==="granted")return!0;try{new window.Notification("")}catch(s){if(s.name==="TypeError")return!1}return!0}),Modernizr.addTest("performance",!!prefixed("performance",window)),Modernizr.addTest("pointerevents",function(){var s=!1,e=domPrefixes.length;for(s=Modernizr.hasEvent("pointerdown");e--&&!s;)hasEvent(domPrefixes[e]+"pointerdown")&&(s=!0);return s}),Modernizr.addTest("queryselector","querySelector"in document&&"querySelectorAll"in document),Modernizr.addTest("scriptasync","async"in createElement("script")),Modernizr.addTest("scriptdefer","defer"in createElement("script")),Modernizr.addTest("serviceworker","serviceWorker"in navigator),Modernizr.addTest("localstorage",function(){var s="modernizr";try{return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch{return!1}}),Modernizr.addTest("sessionstorage",function(){var s="modernizr";try{return sessionStorage.setItem(s,s),sessionStorage.removeItem(s),!0}catch{return!1}}),Modernizr.addTest("websqldatabase","openDatabase"in window),Modernizr.addTest("stylescoped","scoped"in createElement("style")),Modernizr.addTest("svg",!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("templatestrings",function(){var supports;try{eval("``"),supports=!0}catch(s){}return!!supports}),Modernizr.addTest("touchevents",function(){var s;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)s=!0;else{var e=["@media (",prefixes.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");testStyles(e,function(r){s=r.offsetTop===9})}return s}),Modernizr.addTest("typedarrays","ArrayBuffer"in window);/*!
{
  "name": "Blob URLs",
  "property": "bloburls",
  "caniuse": "bloburls",
  "notes": [{
    "name": "W3C Working Draft",
    "href": "https://www.w3.org/TR/FileAPI/#creating-revoking"
  }],
  "tags": ["file", "url"],
  "authors": ["Ron Waldon (@jokeyrhyme)"]
}
!*/var url=prefixed("URL",window,!1);url=url&&window[url],Modernizr.addTest("bloburls",url&&"revokeObjectURL"in url&&"createObjectURL"in url),Modernizr.addAsyncTest(function(){function s(){var r=new Image;r.onerror=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=!1},r.onload=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=r.width==1&&r.height==1};for(var n="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";n.length<33e3;)n=`\r
`+n;r.src="data:image/gif;base64,"+n}navigator.userAgent.indexOf("MSIE 7.")!==-1&&setTimeout(function(){addTest("datauri",!1)},10);var e=new Image;e.onerror=function(){addTest("datauri",!1)},e.onload=function(){e.width==1&&e.height==1?s():addTest("datauri",!1)},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),Modernizr.addTest("video",function(){var s=createElement("video"),e=!1;try{e=!!s.canPlayType,e&&(e=new Boolean(e),e.ogg=s.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=s.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=s.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),e.vp9=s.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),e.hls=s.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch{}return e}),Modernizr.addTest("webgl",function(){var s=createElement("canvas"),e="probablySupportsContext"in s?"probablySupportsContext":"supportsContext";return e in s?s[e]("webgl")||s[e]("experimental-webgl"):"WebGLRenderingContext"in window});/*!
{
  "name": "WebSockets Support",
  "property": "websockets",
  "authors": ["Phread [fearphage]", "Mike Sherov [mikesherov]", "Burak Yigit Kaya [BYK]"],
  "caniuse": "websockets",
  "tags": ["html5"],
  "warnings": [
    "This test will reject any old version of WebSockets even if it is not prefixed such as in Safari 5.1"
  ],
  "notes": [{
    "name": "CLOSING State and Spec",
    "href": "https://www.w3.org/TR/websockets/#the-websocket-interface"
  }],
  "polyfills": [
    "sockjs",
    "socketio",
    "kaazing-websocket-gateway",
    "websocketjs",
    "atmosphere",
    "graceful-websocket",
    "portal",
    "datachannel"
  ]
}
!*/var supports=!1;try{supports="WebSocket"in window&&window.WebSocket.CLOSING===2}catch(s){}Modernizr.addTest("websockets",supports),Modernizr.testRunner=testRunner,delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();module.exports=Modernizr},function(s,e){s.exports={"feature-detects":["audio","canvas","cookies","css/animations","css/boxshadow","css/boxsizing","css/calc","css/flexbox","css/transforms","css/transforms3d","css/transitions","es6/promises","file/api","file/filesystem","forms/placeholder","fullscreen-api","geolocation","hashchange","history","img/webp","img/webp-alpha","indexeddb","json","network/fetch","network/xhr2","notification","performance","pointerevents","queryselector","script/async","script/defer","serviceworker","storage/localstorage","storage/sessionstorage","storage/websqldatabase","style/scoped","svg","templatestrings","touchevents","typed-arrays","url/bloburls","url/data-uri","video","webgl","websockets"],"special-names":{"css/boxshadow":"boxshadow","css/boxsizing":"boxsizing","css/flexbox":"flexbox","es6/promises":"promises","file/api":"filereader","file/filesystem":"filesystem","forms/placeholder":"placeholder","fullscreen-api":"fullscreen","img/webp":"webp","img/webp-alpha":"webpalpha","network/fetch":"fetch","network/xhr2":"xhr2","storage/localstorage":"localstorage","storage/sessionstorage":"sessionstorage","storage/websqldatabase":"websqldatabase","typed-arrays":"typedarrays","url/bloburls":"bloburls","url/data-uri":"datauri"}}},function(s,e,r){e=s.exports=r(97)(void 0),e.push([s.i,'.eruda-dev-tools .eruda-tools .eruda-features{padding-bottom:40px;padding-top:5px}.eruda-dev-tools .eruda-tools .eruda-features ul{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}.eruda-dev-tools .eruda-tools .eruda-features ul:after{content:"";display:block;clear:both}.eruda-dev-tools .eruda-tools .eruda-features ul li{width:33.3%;float:left;padding:5px}.eruda-dev-tools .eruda-tools .eruda-features ul li .eruda-inner-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;font-size:12px;text-decoration:underline;display:block;padding:10px;text-align:center;color:var(--console-error-foreground);background:var(--console-error-background);border:1px solid var(--console-error-border)}.eruda-dev-tools .eruda-tools .eruda-features ul li .eruda-inner-wrapper.eruda-ok{background:var(--darker-background);border:1px solid var(--border);color:var(--foreground)}.eruda-dev-tools .eruda-tools .eruda-features .eruda-html5test{position:absolute;left:0;bottom:0;color:var(--fore-ground);border-top:1px solid var(--border);width:100%;background:var(--darker-background);display:block;height:40px;line-height:40px;text-decoration:none;text-align:center;margin-top:10px}.eruda-dev-tools .eruda-tools .eruda-features .eruda-html5test:active{color:var(--select-foreground)}',""])},function(s,e){function r(o,a){var c=o[1]||"",l=o[3];if(!l)return c;if(a&&typeof btoa=="function"){var h=n(l);return[c].concat(l.sources.map(function(d){return"/*# sourceURL="+l.sourceRoot+d+" */"})).concat([h]).join(`
`)}return[c].join(`
`)}function n(o){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"}s.exports=function(o){var a=[];return a.toString=function(){return this.map(function(c){var l=r(c,o);return c[2]?"@media "+c[2]+"{"+l+"}":l}).join("")},a.i=function(c,l){typeof c=="string"&&(c=[[null,c,""]]);for(var h={},d=0;d<this.length;d++){var f=this[d][0];typeof f=="number"&&(h[f]=!0)}for(d=0;d<c.length;d++){var g=c[d];typeof g[0]=="number"&&h[g[0]]||(l&&!g[2]?g[2]=l:l&&(g[2]="("+g[2]+") and ("+l+")"),a.push(g))}},a}},function(s,e,r){s.exports=r(99).default},function(s,e,r){function n(y){return y&&y.__esModule?y:{default:y}}function o(y){if(y&&y.__esModule)return y;var O={};if(y!=null)for(var k in y)Object.prototype.hasOwnProperty.call(y,k)&&(O[k]=y[k]);return O.default=y,O}function a(){var y=new l.HandlebarsEnvironment;return S.extend(y,l),y.SafeString=d.default,y.Exception=g.default,y.Utils=S,y.escapeExpression=S.escapeExpression,y.VM=w,y.template=function(O){return w.template(O,y)},y}e.__esModule=!0;var c=r(46),l=o(c),h=r(111),d=n(h),f=r(13),g=n(f),v=r(1),S=o(v),A=r(112),w=o(A),m=r(113),b=n(m),x=a();x.create=a,b.default(x),x.default=x,e.default=x,s.exports=e.default},function(s,e,r){function n(y){return y&&y.__esModule?y:{default:y}}function o(y){c.default(y),h.default(y),f.default(y),v.default(y),A.default(y),m.default(y),x.default(y)}e.__esModule=!0,e.registerDefaultHelpers=o;var a=r(101),c=n(a),l=r(102),h=n(l),d=r(103),f=n(d),g=r(104),v=n(g),S=r(105),A=n(S),w=r(106),m=n(w),b=r(107),x=n(b)},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("blockHelperMissing",function(a,c){var l=c.inverse,h=c.fn;if(a===!0)return h(this);if(a===!1||a==null)return l(this);if(n.isArray(a))return a.length>0?(c.ids&&(c.ids=[c.name]),o.helpers.each(a,c)):l(this);if(c.data&&c.ids){var d=n.createFrame(c.data);d.contextPath=n.appendContextPath(c.data.contextPath,c.name),c={data:d}}return h(a,c)})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1),o=r(13),a=function(c){return c&&c.__esModule?c:{default:c}}(o);e.default=function(c){c.registerHelper("each",function(l,h){function d(y,O,k){A&&(A.key=y,A.index=O,A.first=O===0,A.last=!!k,w&&(A.contextPath=w+y)),S+=f(l[y],{data:A,blockParams:n.blockParams([l[y],y],[w+y,null])})}if(!h)throw new a.default("Must pass iterator to #each");var f=h.fn,g=h.inverse,v=0,S="",A=void 0,w=void 0;if(h.data&&h.ids&&(w=n.appendContextPath(h.data.contextPath,h.ids[0])+"."),n.isFunction(l)&&(l=l.call(this)),h.data&&(A=n.createFrame(h.data)),l&&typeof l=="object")if(n.isArray(l))for(var m=l.length;v<m;v++)v in l&&d(v,v,v===l.length-1);else{var b=void 0;for(var x in l)l.hasOwnProperty(x)&&(b!==void 0&&d(b,v-1),b=x,v++);b!==void 0&&d(b,v-1,!0)}return v===0&&(S=g(this)),S})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(13),o=function(a){return a&&a.__esModule?a:{default:a}}(n);e.default=function(a){a.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("if",function(a,c){return n.isFunction(a)&&(a=a.call(this)),!c.hash.includeZero&&!a||n.isEmpty(a)?c.inverse(this):c.fn(this)}),o.registerHelper("unless",function(a,c){return o.helpers.if.call(this,a,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},s.exports=e.default},function(s,e,r){e.__esModule=!0,e.default=function(n){n.registerHelper("log",function(){for(var o=[void 0],a=arguments[arguments.length-1],c=0;c<arguments.length-1;c++)o.push(arguments[c]);var l=1;a.hash.level!=null?l=a.hash.level:a.data&&a.data.level!=null&&(l=a.data.level),o[0]=l,n.log.apply(n,o)})},s.exports=e.default},function(s,e,r){e.__esModule=!0,e.default=function(n){n.registerHelper("lookup",function(o,a){return o&&o[a]})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerHelper("with",function(a,c){n.isFunction(a)&&(a=a.call(this));var l=c.fn;if(n.isEmpty(a))return c.inverse(this);var h=c.data;return c.data&&c.ids&&(h=n.createFrame(c.data),h.contextPath=n.appendContextPath(c.data.contextPath,c.ids[0])),l(a,{data:h,blockParams:n.blockParams([a],[h&&h.contextPath])})})},s.exports=e.default},function(s,e,r){function n(c){a.default(c)}e.__esModule=!0,e.registerDefaultDecorators=n;var o=r(109),a=function(c){return c&&c.__esModule?c:{default:c}}(o)},function(s,e,r){e.__esModule=!0;var n=r(1);e.default=function(o){o.registerDecorator("inline",function(a,c,l,h){var d=a;return c.partials||(c.partials={},d=function(f,g){var v=l.partials;l.partials=n.extend({},v,c.partials);var S=a(f,g);return l.partials=v,S}),c.partials[h.args[0]]=h.fn,d})},s.exports=e.default},function(s,e,r){e.__esModule=!0;var n=r(1),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if(typeof a=="string"){var c=n.indexOf(o.methodMap,a.toLowerCase());a=c>=0?c:parseInt(a,10)}return a},log:function(a){if(a=o.lookupLevel(a),typeof console<"u"&&o.lookupLevel(o.level)<=a){var c=o.methodMap[a];console[c]||(c="log");for(var l=arguments.length,h=Array(l>1?l-1:0),d=1;d<l;d++)h[d-1]=arguments[d];console[c].apply(console,h)}}};e.default=o,s.exports=e.default},function(s,e,r){function n(o){this.string=o}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,s.exports=e.default},function(s,e,r){function n(m){var b=m&&m[0]||1,x=w.COMPILER_REVISION;if(b!==x){if(b<x){var y=w.REVISION_CHANGES[x],O=w.REVISION_CHANGES[b];throw new A.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+y+") or downgrade your runtime to an older version ("+O+").")}throw new A.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+m[1]+").")}}function o(m,b){function x(k,P,L){L.hash&&(P=v.extend({},P,L.hash),L.ids&&(L.ids[0]=!0)),k=b.VM.resolvePartial.call(this,k,P,L);var M=b.VM.invokePartial.call(this,k,P,L);if(M==null&&b.compile&&(L.partials[L.name]=b.compile(k,m.compilerOptions,b),M=L.partials[L.name](P,L)),M!=null){if(L.indent){for(var B=M.split(`
`),j=0,F=B.length;j<F&&(B[j]||j+1!==F);j++)B[j]=L.indent+B[j];M=B.join(`
`)}return M}throw new A.default("The partial "+L.name+" could not be compiled when running in runtime-only mode")}function y(k){function P(F){return""+m.main(O,F,O.helpers,O.partials,M,j,B)}var L=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],M=L.data;y._setup(L),!L.partial&&m.useData&&(M=d(k,M));var B=void 0,j=m.useBlockParams?[]:void 0;return m.useDepths&&(B=L.depths?k!=L.depths[0]?[k].concat(L.depths):L.depths:[k]),(P=f(m.main,P,O,L.depths||[],M,j))(k,L)}if(!b)throw new A.default("No environment passed to template");if(!m||!m.main)throw new A.default("Unknown template object: "+typeof m);m.main.decorator=m.main_d,b.VM.checkRevision(m.compiler);var O={strict:function(k,P){if(!(P in k))throw new A.default('"'+P+'" not defined in '+k);return k[P]},lookup:function(k,P){for(var L=k.length,M=0;M<L;M++)if(k[M]&&k[M][P]!=null)return k[M][P]},lambda:function(k,P){return typeof k=="function"?k.call(P):k},escapeExpression:v.escapeExpression,invokePartial:x,fn:function(k){var P=m[k];return P.decorator=m[k+"_d"],P},programs:[],program:function(k,P,L,M,B){var j=this.programs[k],F=this.fn(k);return P||B||M||L?j=a(this,k,F,P,L,M,B):j||(j=this.programs[k]=a(this,k,F)),j},data:function(k,P){for(;k&&P--;)k=k._parent;return k},merge:function(k,P){var L=k||P;return k&&P&&k!==P&&(L=v.extend({},P,k)),L},nullContext:Object.seal({}),noop:b.VM.noop,compilerInfo:m.compiler};return y.isTop=!0,y._setup=function(k){k.partial?(O.helpers=k.helpers,O.partials=k.partials,O.decorators=k.decorators):(O.helpers=O.merge(k.helpers,b.helpers),m.usePartial&&(O.partials=O.merge(k.partials,b.partials)),(m.usePartial||m.useDecorators)&&(O.decorators=O.merge(k.decorators,b.decorators)))},y._child=function(k,P,L,M){if(m.useBlockParams&&!L)throw new A.default("must pass block params");if(m.useDepths&&!M)throw new A.default("must pass parent depths");return a(O,k,m[k],P,0,L,M)},y}function a(m,b,x,y,O,k,P){function L(M){var B=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],j=P;return!P||M==P[0]||M===m.nullContext&&P[0]===null||(j=[M].concat(P)),x(m,M,m.helpers,m.partials,B.data||y,k&&[B.blockParams].concat(k),j)}return L=f(x,L,m,P,y,k),L.program=b,L.depth=P?P.length:0,L.blockParams=O||0,L}function c(m,b,x){return m?m.call||x.name||(x.name=m,m=x.partials[m]):m=x.name==="@partial-block"?x.data["partial-block"]:x.partials[x.name],m}function l(m,b,x){var y=x.data&&x.data["partial-block"];x.partial=!0,x.ids&&(x.data.contextPath=x.ids[0]||x.data.contextPath);var O=void 0;if(x.fn&&x.fn!==h&&function(){x.data=w.createFrame(x.data);var k=x.fn;O=x.data["partial-block"]=function(P){var L=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return L.data=w.createFrame(L.data),L.data["partial-block"]=y,k(P,L)},k.partials&&(x.partials=v.extend({},x.partials,k.partials))}(),m===void 0&&O&&(m=O),m===void 0)throw new A.default("The partial "+x.name+" could not be found");if(m instanceof Function)return m(b,x)}function h(){return""}function d(m,b){return b&&"root"in b||(b=b?w.createFrame(b):{},b.root=m),b}function f(m,b,x,y,O,k){if(m.decorator){var P={};b=m.decorator(b,P,x,y&&y[0],O,k,y),v.extend(b,P)}return b}e.__esModule=!0,e.checkRevision=n,e.template=o,e.wrapProgram=a,e.resolvePartial=c,e.invokePartial=l,e.noop=h;var g=r(1),v=function(m){if(m&&m.__esModule)return m;var b={};if(m!=null)for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(b[x]=m[x]);return b.default=m,b}(g),S=r(13),A=function(m){return m&&m.__esModule?m:{default:m}}(S),w=r(46)},function(s,e,r){(function(n){e.__esModule=!0,e.default=function(o){var a=n!==void 0?n:window,c=a.Handlebars;o.noConflict=function(){return a.Handlebars===o&&(a.Handlebars=c),o}},s.exports=e.default}).call(e,r(114))},function(s,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(r=window)}s.exports=r}])})})(erudaFeatures$1);var erudaFeaturesExports=erudaFeatures$1.exports;const erudaFeatures=getDefaultExportFromCjs(erudaFeaturesExports);var global=typeof window<"u"?window:null,ssr=global===null,document$1=ssr?void 0:global.document,addEventListener$1="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect="getBoundingClientRect",gutterStartDragging="_a",aGutterSize="_b",bGutterSize="_c",HORIZONTAL="horizontal",NOOP=function(){return!1},calc=ssr?"calc":["","-webkit-","-moz-","-o-"].filter(function(s){var e=document$1.createElement("div");return e.style.cssText="width:"+s+"calc(9px)",!!e.style.length}).shift()+"calc",isString=function(s){return typeof s=="string"||s instanceof String},elementOrSelector=function(s){if(isString(s)){var e=document$1.querySelector(s);if(!e)throw new Error("Selector "+s+" did not match a DOM element");return e}return s},getOption=function(s,e,r){var n=s[e];return n!==void 0?n:r},getGutterSize=function(s,e,r,n){if(e){if(n==="end")return 0;if(n==="center")return s/2}else if(r){if(n==="start")return 0;if(n==="center")return s/2}return s},defaultGutterFn=function(s,e){var r=document$1.createElement("div");return r.className="gutter gutter-"+e,r},defaultElementStyleFn=function(s,e,r){var n={};return isString(e)?n[s]=e:n[s]=calc+"("+e+"% - "+r+"px)",n},defaultGutterStyleFn=function(s,e){var r;return r={},r[s]=e+"px",r},Split=function(s,e){if(e===void 0&&(e={}),ssr)return{};var r=s,n,o,a,c,l,h;Array.from&&(r=Array.from(r));var d=elementOrSelector(r[0]),f=d.parentNode,g=getComputedStyle?getComputedStyle(f):null,v=g?g.flexDirection:null,S=getOption(e,"sizes")||r.map(function(){return 100/r.length}),A=getOption(e,"minSize",100),w=Array.isArray(A)?A:r.map(function(){return A}),m=getOption(e,"maxSize",1/0),b=Array.isArray(m)?m:r.map(function(){return m}),x=getOption(e,"expandToMin",!1),y=getOption(e,"gutterSize",10),O=getOption(e,"gutterAlign","center"),k=getOption(e,"snapOffset",30),P=Array.isArray(k)?k:r.map(function(){return k}),L=getOption(e,"dragInterval",1),M=getOption(e,"direction",HORIZONTAL),B=getOption(e,"cursor",M===HORIZONTAL?"col-resize":"row-resize"),j=getOption(e,"gutter",defaultGutterFn),F=getOption(e,"elementStyle",defaultElementStyleFn),U=getOption(e,"gutterStyle",defaultGutterStyleFn);M===HORIZONTAL?(n="width",o="clientX",a="left",c="right",l="clientWidth"):M==="vertical"&&(n="height",o="clientY",a="top",c="bottom",l="clientHeight");function V(pe,me,we,Xe){var Qe=F(n,me,we,Xe);Object.keys(Qe).forEach(function(Pe){pe.style[Pe]=Qe[Pe]})}function Q(pe,me,we){var Xe=U(n,me,we);Object.keys(Xe).forEach(function(Qe){pe.style[Qe]=Xe[Qe]})}function q(){return h.map(function(pe){return pe.size})}function G(pe){return"touches"in pe?pe.touches[0][o]:pe[o]}function te(pe){var me=h[this.a],we=h[this.b],Xe=me.size+we.size;me.size=pe/this.size*Xe,we.size=Xe-pe/this.size*Xe,V(me.element,me.size,this[aGutterSize],me.i),V(we.element,we.size,this[bGutterSize],we.i)}function Y(pe){var me,we=h[this.a],Xe=h[this.b];this.dragging&&(me=G(pe)-this.start+(this[aGutterSize]-this.dragOffset),L>1&&(me=Math.round(me/L)*L),me<=we.minSize+we.snapOffset+this[aGutterSize]?me=we.minSize+this[aGutterSize]:me>=this.size-(Xe.minSize+Xe.snapOffset+this[bGutterSize])&&(me=this.size-(Xe.minSize+this[bGutterSize])),me>=we.maxSize-we.snapOffset+this[aGutterSize]?me=we.maxSize+this[aGutterSize]:me<=this.size-(Xe.maxSize-Xe.snapOffset+this[bGutterSize])&&(me=this.size-(Xe.maxSize+this[bGutterSize])),te.call(this,me),getOption(e,"onDrag",NOOP)(q()))}function J(){var pe=h[this.a].element,me=h[this.b].element,we=pe[getBoundingClientRect](),Xe=me[getBoundingClientRect]();this.size=we[n]+Xe[n]+this[aGutterSize]+this[bGutterSize],this.start=we[a],this.end=we[c]}function K(pe){if(!getComputedStyle)return null;var me=getComputedStyle(pe);if(!me)return null;var we=pe[l];return we===0?null:(M===HORIZONTAL?we-=parseFloat(me.paddingLeft)+parseFloat(me.paddingRight):we-=parseFloat(me.paddingTop)+parseFloat(me.paddingBottom),we)}function ne(pe){var me=K(f);if(me===null||w.reduce(function(Pe,Ze){return Pe+Ze},0)>me)return pe;var we=0,Xe=[],Qe=pe.map(function(Pe,Ze){var _e=me*Pe/100,qe=getGutterSize(y,Ze===0,Ze===pe.length-1,O),Be=w[Ze]+qe;return _e<Be?(we+=Be-_e,Xe.push(0),Be):(Xe.push(_e-Be),_e)});return we===0?pe:Qe.map(function(Pe,Ze){var _e=Pe;if(we>0&&Xe[Ze]-we>0){var qe=Math.min(we,Xe[Ze]-we);we-=qe,_e=Pe-qe}return _e/me*100})}function de(){var pe=this,me=h[pe.a].element,we=h[pe.b].element;pe.dragging&&getOption(e,"onDragEnd",NOOP)(q()),pe.dragging=!1,global[removeEventListener]("mouseup",pe.stop),global[removeEventListener]("touchend",pe.stop),global[removeEventListener]("touchcancel",pe.stop),global[removeEventListener]("mousemove",pe.move),global[removeEventListener]("touchmove",pe.move),pe.stop=null,pe.move=null,me[removeEventListener]("selectstart",NOOP),me[removeEventListener]("dragstart",NOOP),we[removeEventListener]("selectstart",NOOP),we[removeEventListener]("dragstart",NOOP),me.style.userSelect="",me.style.webkitUserSelect="",me.style.MozUserSelect="",me.style.pointerEvents="",we.style.userSelect="",we.style.webkitUserSelect="",we.style.MozUserSelect="",we.style.pointerEvents="",pe.gutter.style.cursor="",pe.parent.style.cursor="",document$1.body.style.cursor=""}function Re(pe){if(!("button"in pe&&pe.button!==0)){var me=this,we=h[me.a].element,Xe=h[me.b].element;me.dragging||getOption(e,"onDragStart",NOOP)(q()),pe.preventDefault(),me.dragging=!0,me.move=Y.bind(me),me.stop=de.bind(me),global[addEventListener$1]("mouseup",me.stop),global[addEventListener$1]("touchend",me.stop),global[addEventListener$1]("touchcancel",me.stop),global[addEventListener$1]("mousemove",me.move),global[addEventListener$1]("touchmove",me.move),we[addEventListener$1]("selectstart",NOOP),we[addEventListener$1]("dragstart",NOOP),Xe[addEventListener$1]("selectstart",NOOP),Xe[addEventListener$1]("dragstart",NOOP),we.style.userSelect="none",we.style.webkitUserSelect="none",we.style.MozUserSelect="none",we.style.pointerEvents="none",Xe.style.userSelect="none",Xe.style.webkitUserSelect="none",Xe.style.MozUserSelect="none",Xe.style.pointerEvents="none",me.gutter.style.cursor=B,me.parent.style.cursor=B,document$1.body.style.cursor=B,J.call(me),me.dragOffset=G(pe)-me.end}}S=ne(S);var Te=[];h=r.map(function(pe,me){var we={element:elementOrSelector(pe),size:S[me],minSize:w[me],maxSize:b[me],snapOffset:P[me],i:me},Xe;if(me>0&&(Xe={a:me-1,b:me,dragging:!1,direction:M,parent:f},Xe[aGutterSize]=getGutterSize(y,me-1===0,!1,O),Xe[bGutterSize]=getGutterSize(y,!1,me===r.length-1,O),v==="row-reverse"||v==="column-reverse")){var Qe=Xe.a;Xe.a=Xe.b,Xe.b=Qe}if(me>0){var Pe=j(me,M,we.element);Q(Pe,y,me),Xe[gutterStartDragging]=Re.bind(Xe),Pe[addEventListener$1]("mousedown",Xe[gutterStartDragging]),Pe[addEventListener$1]("touchstart",Xe[gutterStartDragging]),f.insertBefore(Pe,we.element),Xe.gutter=Pe}return V(we.element,we.size,getGutterSize(y,me===0,me===r.length-1,O),me),me>0&&Te.push(Xe),we});function Me(pe){var me=pe.i===Te.length,we=me?Te[pe.i-1]:Te[pe.i];J.call(we);var Xe=me?we.size-pe.minSize-we[bGutterSize]:pe.minSize+we[aGutterSize];te.call(we,Xe)}h.forEach(function(pe){var me=pe.element[getBoundingClientRect]()[n];me<pe.minSize&&(x?Me(pe):pe.minSize=me)});function Ie(pe){var me=ne(pe);me.forEach(function(we,Xe){if(Xe>0){var Qe=Te[Xe-1],Pe=h[Qe.a],Ze=h[Qe.b];Pe.size=me[Xe-1],Ze.size=we,V(Pe.element,Pe.size,Qe[aGutterSize],Pe.i),V(Ze.element,Ze.size,Qe[bGutterSize],Ze.i)}})}function ce(pe,me){Te.forEach(function(we){if(me!==!0?we.parent.removeChild(we.gutter):(we.gutter[removeEventListener]("mousedown",we[gutterStartDragging]),we.gutter[removeEventListener]("touchstart",we[gutterStartDragging])),pe!==!0){var Xe=F(n,we.a.size,we[aGutterSize]);Object.keys(Xe).forEach(function(Qe){h[we.a].element.style[Qe]="",h[we.b].element.style[Qe]=""})}})}return{setSizes:Ie,getSizes:q,collapse:function(me){Me(h[me])},destroy:ce,parent:f,pairs:Te}};function makeSplitJS(s){var e=localStorage.getItem("split-sizes"),r;e?r=JSON.parse(e):r=[50,50],Split(s,{sizes:r,direction:"vertical",minSize:0,expandToMin:!0,gutterSize:18,onDragEnd:function(n){localStorage.setItem("split-sizes",JSON.stringify(n))}})}class Controller{mpyc;editor;term;demoSelect;hostPeerIDInput;chatInput;myPeerIDEl;knownPeersEl;resetPeerIDButton;runMPyCButton;runMPyCAsyncButton;stopMPyCButton;connectToPeerButton;sendMessageButton;clearTerminalButton;showQRCodeButton;scanQRInput;versionDiv;toggleStatsEl;qrScanner;scanQRCodeButton;qrScannerModal;qrScannerModalDiv;closeQRScannerButton;constructor(e,r){this.mpyc=e,this.demoSelect=$(r.demoSelectSelector),this.hostPeerIDInput=$(r.hostPeerIDInputSelector),this.chatInput=$(r.chatInputSelector),this.myPeerIDEl=$(r.myPeerIDSelector),this.knownPeersEl=$(r.peersDivSelector),this.resetPeerIDButton=$(r.resetPeerIDButtonSelector),this.runMPyCButton=$(r.runMPyCButtonSelector),this.runMPyCAsyncButton=$(r.runMPyCAsyncButtonSelector),this.stopMPyCButton=$(r.stopMPyCButtonSelector),this.connectToPeerButton=$(r.connectToPeerButtonSelector),this.sendMessageButton=$(r.sendMessageButtonSelector),this.clearTerminalButton=$(r.clearTerminalButtonSelector),this.showQRCodeButton=$(r.showQRCodeButtonSelector),this.scanQRInput=$(r.scanQRInputSelector),this.toggleStatsEl=$(r.toggleStatsSelector),this.versionDiv=$(r.versionSelector),this.scanQRCodeButton=$("#scanQRCodeButton"),this.closeQRScannerButton=$("#closeQRCodeScannerButton"),this.qrScannerModalDiv=$("#qrScannerModal"),this.qrScannerModal=new Modal(this.qrScannerModalDiv),this.term=new Term(r.terminalSelector,e),this.editor=new Editor(r.editorSelector,this.demoSelect,e),this.init(e,r)}init(e,r){this.term.info(`Initializing ${format.green("PeerJS")}...`),this.term.info(`Initializing ${format.green(e.runtime.type())} runtime...`),this.updateHostPeerIDInput(),this.hostPeerIDInput.addEventListener("input",debounce(()=>{try{let o=new URL(this.hostPeerIDInput.value).searchParams.get("peer");o&&(this.hostPeerIDInput.value=o)}catch{}})),$$('[data-bs-toggle="tooltip"]').forEach(n=>new Tooltip(n,{trigger:"hover"})),this.setupMPyCEvents(e),this.setupButtonEvents(e,r),this.setupDemoSelector(),makeSplitJS(r.splitPanelSelectors),this.setupGlobals()}setupMPyCEvents(e){addEventListener("error",r=>{this.term.error(r.error)}),e.on("transport:ready",async r=>{this.myPeerIDEl.value=safe(r),setTabState("myPeerID",r),console.log("Peer ID: "+r),this.term.success(`${format.green("PeerJS")} ready with ID: ${format.peerID(r)}`),this.updatePeersDiv()}),e.on("transport:closed",async()=>{this.term.error("PeerJS closed.")}),e.on("transport:error",async r=>{this.term.warn(`PeerJS failed: ${r.message}`),console.warn(`PeerJS failed: ${r.message}
${r.stack}`),r.message==="Lost connection to server."&&setTimeout(()=>{this.mpyc.transport.reconnect()},1e3)}),e.on("transport:conn:ready",this.onPeerConnectedHook),e.on("transport:conn:disconnected",this.onPeerDisconnectedHook),e.on("transport:conn:error",this.onPeerConnectionErrorHook),e.on("transport:conn:data:custom",this.processChatMessage),e.on("runtime:error",async r=>{this.term.error(r.error)}),e.on("runtime:messageerror",async r=>{this.term.error(r.data)}),e.on("runtime:exec:done",async()=>{this.updatePeersDiv()}),e.on("runtime:exec:init",async()=>{this.updatePeersDiv()}),e.on("runtime:display",async r=>{this.term.display(r)}),e.on("runtime:display:error",async r=>{this.term.displayError(r)}),e.on("runtime:display:stats",async r=>{this.term.live(r)}),e.on("runtime:ready",async()=>{console.log(`${e.runtime.type()} runtime ready.`),this.term.success(`${format.green(e.runtime.type())} runtime ready.`)})}closeQRScanner(){this.qrScanner.stop(),this.qrScannerModal.hide()}setupButtonEvents(e,r){this.resetPeerIDButton.addEventListener("click",async()=>{delete sessionStorage.myPeerID,this.term.writeln("Restarting PeerJS..."),e.resetTransport(()=>new PeerJSTransport)}),this.stopMPyCButton.addEventListener("click",async()=>{this.term.writeln("Restarting PyScript runtime..."),e.resetRuntime()}),this.runMPyCButton.addEventListener("click",async o=>{e.runMPC(this.editor.getCode(),this.demoSelect.value,o.ctrlKey||o.shiftKey)}),this.connectToPeerButton.addEventListener("click",async()=>{localStorage.hostPeerID=this.hostPeerIDInput.value,e.transport.connect(this.hostPeerIDInput.value)}),this.sendMessageButton.addEventListener("click",async()=>{this.sendChatMessage()}),this.clearTerminalButton.addEventListener("click",async()=>{this.term.clear()}),this.closeQRScannerButton.addEventListener("click",async()=>{this.closeQRScanner()}),this.scanQRCodeButton.addEventListener("click",async()=>{const o={fps:10,qrbox:{width:150,height:150}},a=(c,l)=>{this.hostPeerIDInput.value=c,this.hostPeerIDInput.dispatchEvent(new Event("input")),this.closeQRScanner()};this.qrScanner.start({facingMode:"environment"},o,a,void 0),this.qrScannerModal.show()}),this.qrScannerModalDiv.addEventListener("hidden.bs.modal",async()=>{this.qrScanner.stop()}),isMobileFn(navigator.userAgent)&&(this.scanQRCodeButton.hidden=!1,this.setupEruda(),this.qrScanner=new Html5Qrcode("qrScannerEl",{formatsToSupport:[Html5QrcodeSupportedFormats.QR_CODE],verbose:!1})),this.toggleStatsEl.addEventListener("click",async()=>{this.toggleStatsEl.checked?(setStorage("showStats","true"),Tooltip.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Disable runtime stats"}),this.mpyc.runtime.showStats()):(setStorage("showStats","false"),Tooltip.getInstance("#toggleStatsLabel").setContent({".tooltip-inner":"Enable runtime stats"}),this.mpyc.runtime.hideStats())});const n=getStorage("showStats");this.toggleStatsEl.checked=n==="true",this.toggleStatsEl.dispatchEvent(new Event("click")),this.chatInput.addEventListener("keypress",async o=>{let a=o;if(a.key==="Enter"&&!a.shiftKey)return a.preventDefault(),this.sendChatMessage()}),makeQRButton(r.showQRCodeButtonSelector,()=>this.myPeerIDEl.value),new CopyButton(r.myPeerIDSelector,r.copyPeerIDButtonSelector)}setupEruda(){let e=document.createElement("div");document.body.prepend(e),eruda.init({container:e,autoScale:!0,tool:["console","elements","network","info","resources"]}),eruda.add(erudaFeatures),eruda.position({x:0,y:0})}setupGlobals(){window.mpyc=this.mpyc,window.editor=this.editor,window.term=this.term,window.clearTabCount=()=>{delete localStorage.tabCount},window.r=()=>{this.mpyc.reset()},window.run=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!1),window.runa=async()=>this.mpyc.runMPC(this.editor.getCode(),this.demoSelect.value,!0),window.app=this}onPeerConnectedHook=async e=>{this.term.success(`Connected to: ${format.peerID(e)}`),this.updatePeersDiv()};async updatePeersDiv(){console.log("updating the peers div"),this.knownPeersEl.innerHTML="",this.mpyc.transport.getPeers(!0).forEach((e,r)=>{let n=`
        <span class="position-relative end-0">
            <i class='bi ${this.mpyc.peersReady.get(e)?"bi-play-fill":"bi-pause-fill"}'></i>
        </span>`;this.knownPeersEl.innerHTML+=`
        <li class="list-group-item ${e==this.mpyc.transport.id()?"":"list-group-item-light"}"> 
            <span class="" style="user-select:none">${r}: </span>
            <span class="d-inline-block text-truncate" style="vertical-align:top;max-width:80%;">${safe(e)}</span> 
            ${n}
        </li>`})}onPeerDisconnectedHook=async e=>{this.term.error(`Disconnected from: ${format.peerID(e)}`),this.updatePeersDiv()};onPeerConnectionErrorHook=async({peerID:e,err:r})=>{this.term.error(`Failed to connect to: ${format.peerID(e)}: ${r.message}`),this.updatePeersDiv()};setupDemoSelector(){const e=window.matchMedia("(max-width: 1199px)"),r=n=>{n.matches?($("#mpc-demos").hidden=!0,$("#connectedPartiesLabel").hidden=!0,this.demoSelect.size=1,$("#connectedPartiesLocationMobile").insertAdjacentElement("beforeend",this.knownPeersEl),$("#demoSelectorLocation2").insertAdjacentElement("beforeend",this.demoSelect),$("#chatFooter").insertAdjacentElement("beforeend",$("#chatInputGroup"))):($("#mpc-demos").insertAdjacentElement("beforeend",this.demoSelect),$("#connectedPartiesLocationDesktop").insertAdjacentElement("beforeend",this.knownPeersEl),$("#mpc-demos").hidden=!1,$("#connectedPartiesLabel").hidden=!1,$("#chatSidebar").insertAdjacentElement("beforeend",$("#chatInputGroup")),this.demoSelect.size=window.innerHeight/(4*21))};e.addEventListener("change",r),r(e),this.demoSelect.addEventListener("change",async()=>{localStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex,sessionStorage.demoSelectorSelectedIndex=this.demoSelect.selectedIndex;let n=await fetchSelectedDemo(this.demoSelect);this.editor.updateCode(n)}),this.demoSelect.selectedIndex=parseInt(sessionStorage.demoSelectorSelectedIndex||localStorage.demoSelectorSelectedIndex||1),this.demoSelect.dispatchEvent(new Event("change"))}updateHostPeerIDInput(){var n=new URLSearchParams(window.location.search).get("peer")||localStorage.hostPeerID;return n&&(this.hostPeerIDInput.value=n,localStorage.hostPeerID=n),n}sendChatMessage(){let e=this.chatInput.value;this.chatInput.value="",this.term.chatMe(e),this.mpyc.transport.broadcast("chat",e)}processChatMessage=async({peerID:e,data:r})=>{if(r.type!="user:chat"){console.warn("unknown message type",r);return}this.term.chat(e,r.payload)}}function main(){ensureStorageSchema(18);let s=loadPeerID();document.title+=` - (${sessionStorage.tabID})`;const e=()=>{try{return new PeerJSTransport(s)}catch(o){return console.warn(o),new PeerJSTransport}},r=()=>new PyScriptWorkerRuntime(void 0,"./config.toml");let n=new MPCManager(e,r);new Controller(n,{terminalSelector:"#terminal",editorSelector:"#editor",demoSelectSelector:"select#select-demo",hostPeerIDInputSelector:"input#hostPeerID",chatInputSelector:"#chatInput",myPeerIDSelector:"#myPeerID",peersDivSelector:"#knownPeers",copyPeerIDButtonSelector:"button#copyPeerID",resetPeerIDButtonSelector:"button#resetPeerID",runMPyCButtonSelector:"button#startButton",runMPyCAsyncButtonSelector:"button#startAsyncButton",stopMPyCButtonSelector:"button#stopButton",connectToPeerButtonSelector:"button#connect",sendMessageButtonSelector:"#sendMessageButton",clearTerminalButtonSelector:"button#clearTerminal",showQRCodeButtonSelector:"#show-qr",scanQRInputSelector:"#scan-qr",splitPanelSelectors:[".split-panel-editor",".split-panel-terminal"],toggleStatsSelector:"#toggleStatsEl",versionSelector:"#version"})}main();var define_BUILD_INFO_default={version:"0.6.0",dirty:!1,deployment:"test",timestamp:1701786658490,time:"5/12/2023, 15:30:58",revision:"cb99125"};function makeVersion(){let s=define_BUILD_INFO_default;console.log("buildInfo",s);let e=document.querySelector("#version");e.innerText=`v${s.version}-${s.revision}`,e.innerText+=` (${s.time})`}makeVersion();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}