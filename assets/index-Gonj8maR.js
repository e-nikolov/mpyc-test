import{s as c}from"./purify.es-WJuOpzwb.js";const l=(i="#out",t=["Data"])=>(...e)=>{const r=u(i,t).insertRow();for(let s of e){const o=r.insertCell();o.textContent=s,o.style.paddingRight="50px"}},u=(i="#out",t=["Data"])=>{const e=document.querySelector(i);let n=e.querySelector("table");if(n)return n;const r=document.createElement("table"),s=r.createTHead().insertRow();s.style.borderBottom="1px solid #ccc";for(let o of t)s.insertCell().textContent=o;return e.insertAdjacentElement("beforeend",r),r};class a{static async run2(t={},e){const n=e?Object.getPrototypeOf(e):this.prototype;for(const r of Object.getOwnPropertyNames(n))r!="constructor"&&(await m(n[r].bind(e||n),{...t,name:`${t.name||n.constructor.name} - ${r}`}),await c(0))}async run(t={}){await a.run2(t,this)}}const m=async(i,t={})=>{t={...h,...t};let e=new d(i,t);return await e.run(),t.logEnabled&&e.logTable(t.logSelector),e},h={name:"",setupFn:()=>{},logEnabled:!0,logSelector:"#out",runtimeGoalMS:500,this:void 0};class d{_N=0;_I=0;_duration=0;benchFunc=()=>{};startTime=0;timerOn=!1;opts;get N(){return this._N}get I(){return this._I}get duration(){return this._duration}get name(){return this.opts.name}get result(){return{name:this.name,N:this.N.toLocaleString,duration:this.duration.toLocaleString}}constructor(t,e={}){this.opts={...h,...e},this.benchFunc=t}StartTimer(){this.timerOn||(this.startTime=performance.now(),this.timerOn=!0)}StopTimer(){this.timerOn&&(this._duration+=performance.now()-this.startTime,this.timerOn=!1)}ResetTimer(){this.timerOn&&(this.startTime=performance.now()),this._duration=0}run=async()=>{await this.runN(1);for(let t=1;this._duration<=this.opts.runtimeGoalMS&&t<1e9;){let e=t,n=this._N,r=this._duration;r<=0&&(r=1),t=Math.floor(this.opts.runtimeGoalMS*n/r),t+=Math.floor(t/5),t=Math.min(t,100*e),t=Math.max(t,e+1),t=Math.min(t,1e9),await this.runN(t)}};runN=async t=>{for(this._N=t,this._I=0;this._I<t;this._I++)this.opts.setupFn(this);for(this.ResetTimer(),this.StartTimer(),this._I=0;this._I<t;this._I++)await this.benchFunc(this);this.StopTimer()};toString(){return`${this.name}		${Math.round(1e3*this.N/(this.duration+1)).toLocaleString()} ops/sec`}toStrings(){return[this.name,`${Math.round(1e3*this.N/(this.duration+1)).toLocaleString()} ops/sec`]}logTable(t="#out"){l(t,["Name","Ops/sec"])(...this.toStrings())}}export{a as B};
